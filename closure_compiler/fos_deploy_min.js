/*
 2011 Benjamin Arthur Lupton {@link http://balupton.com}
 @license MIT License {@link http://creativecommons.org/licenses/MIT/}
 @return {String} outerHtml
 Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Copyright 2011, Tim Down
 Licensed under the MIT license.
 Version: 1.2.1
 Build date: 8 October 2011
 RequireJS i18n 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/i18n for details
*/
define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(g,f,n){return g("dijit.layout.AccordionPane",n,{constructor:function(){f.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0")},onSelected:function(){}})});
define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(g,f,n,m){return g("dijit.ToolbarSeparator",[n,m],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);f.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})});
define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(g,f,n,m){return f("dojo.fx.Toggler",null,{node:null,showFunc:n.fadeIn,hideFunc:n.fadeOut,showDuration:200,hideDuration:200,constructor:function(f){g.mixin(this,f);this.node=f.node;this._showArgs=g.mixin({},f);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=g.mixin({},f);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;
this.hideAnim=this.hideFunc(this._hideArgs);m.after(this.showAnim,"beforeBegin",g.hitch(this.hideAnim,"stop",!0),!0);m.after(this.hideAnim,"beforeBegin",g.hitch(this.showAnim,"stop",!0),!0)},show:function(f){return this.showAnim.play(f||0)},hide:function(f){return this.hideAnim.play(f||0)}})});
define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u){g=g("dijit.TooltipDialog",[d,p,b,c],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:r,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(e(this.containerNode,
"keydown",k.hitch(this,"_onKey")))},orient:function(a,b,c){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight",
"TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+c];f.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems(this.containerNode);l.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+
"px",this.connectorNode.style.left=""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==m.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==m.TAB){var b=a.target;this._getFocusItems(this.containerNode);this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==
this._firstFocusItem&&a.shiftKey?(l.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey?a.stopPropagation():(l.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}}});n("dojo-bidi")&&g.extend({_setTitleAttr:function(a){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,a):a;this._set("title",a)},_setTextDirAttr:function(a){this._created&&this.textDir==a||(this._set("textDir",a),this.textDir&&
this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return g});
define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query ../registry".split(" "),function(g,f,n,m,k,e){return f("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var l=[];k("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(m.hitch(this,function(d){d.name==this.name&&d.form==this.focusNode.form&&(d=e.getEnclosingWidget(d))&&l.push(d)}));return l},_setCheckedAttr:function(e){this.inherited(arguments);this._created&&e&&g.forEach(this._getRelatedWidgets(),
m.hitch(this,function(d){d!=this&&d.checked&&d.set("checked",!1)}))},_getSubmitValue:function(e){return null==e?"on":e},_onClick:function(e){return this.checked||this.disabled?(e.stopPropagation(),e.preventDefault(),!1):this.readOnly?(e.stopPropagation(),e.preventDefault(),g.forEach(this._getRelatedWidgets(),m.hitch(this,function(d){n.set(this.focusNode||this.domNode,"checked",d.checked)})),!1):this.inherited(arguments)}})});
define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(g,f,n){return g("dijit.form.RadioButton",[f,n],{baseClass:"dijitRadio"})});
define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(g,f,n,m){return g("dijit.CheckedMenuItem",n,{baseClass:"dijitCheckedMenuItem",templateString:m,checked:!1,_setCheckedAttr:function(k){f.toggle(this.domNode,this.baseClass+"Checked",k);this.domNode.setAttribute("aria-checked",k?"true":"false");this._set("checked",k)},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(f){this.disabled||
(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(f)}})});
define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(g,f,n,m,k,e,l){return g("dijit.PopupMenuItem",l,{_fillContent:function(){if(this.srcNodeRef){var d=m("*",this.srcNodeRef);this.inherited(arguments,[d[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(d,c){var b=this.popup;k.open(n.delegate(d,{popup:this.popup,around:this.domNode}));c&&b.focus&&b.focus()},_closePopup:function(){k.close(this.popup);this.popup.parentMenu=
null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var d=m("[widgetId]",this.dropDownContainer)[0];this.popup=e.byNode(d)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&f.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(d){this.popup&&
(this.popup._destroyed||this.popup.destroyRecursive(d),delete this.popup);this.inherited(arguments)}})});define(["dojo/window","../main"],function(g,f){f.getDocumentWindow=function(f){return g.get(f)}});
define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(g,f,n){f.mixin(n,{hasWaiRole:function(f,k){var e=this.getWaiRole(f);return k?-1<e.indexOf(k):0<e.length},getWaiRole:function(m){return f.trim((g.get(m,"role")||"").replace("wairole:",""))},setWaiRole:function(f,k){g.set(f,"role",k)},removeWaiRole:function(m,k){var e=g.get(m,"role");e&&(k?(e=f.trim((" "+e+" ").replace(" "+k+" "," ")),g.set(m,"role",e)):m.removeAttribute("role"))},hasWaiState:function(f,k){return f.hasAttribute?
f.hasAttribute("aria-"+k):!!f.getAttribute("aria-"+k)},getWaiState:function(f,k){return f.getAttribute("aria-"+k)||""},setWaiState:function(f,k,e){f.setAttribute("aria-"+k,e)},removeWaiState:function(f,k){f.removeAttribute("aria-"+k)}});return n});define(["../typematic"],function(){});define(["dojo/uacss"],function(){});define(["dojo/window","../main"],function(g,f){f.scrollIntoView=function(f,m){g.scrollIntoView(f,m)}});
define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(g,f,n){var m=n._createWrapper;n._createWrapper=function(e){e.declaredClass||(e={_popupWrapper:e.parentNode&&g.contains(e.parentNode,"dijitPopup")?e.parentNode:null,domNode:e,destroy:function(){},ownerDocument:e.ownerDocument,ownerDocumentBody:f.body(e.ownerDocument)});return m.call(this,e)};var k=n.open;n.open=function(e){if(e.orient&&"string"!=typeof e.orient&&!("length"in e.orient)){var l=[],d;for(d in e.orient)l.push({aroundCorner:d,
corner:e.orient[d]});e.orient=l}return k.call(this,e)};return n});
define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(g,f,n,m,k){var e={getViewport:function(){return n.getBox()}};e.placeOnScreen=m.at;e.placeOnScreenAroundElement=function(e,d,c,b){var p;if(f.isArray(c))p=c;else{p=[];for(var r in c)p.push({aroundCorner:r,corner:c[r]})}return m.around(e,d,p,!0,b)};e.placeOnScreenAroundNode=e.placeOnScreenAroundElement;e.placeOnScreenAroundRectangle=e.placeOnScreenAroundElement;e.getPopupAroundAlignment=function(e,d){var c={};g.forEach(e,
function(b){var e=d;switch(b){case "after":c[d?"BR":"BL"]=d?"BL":"BR";break;case "before":c[d?"BL":"BR"]=d?"BR":"BL";break;case "below-alt":e=!e;case "below":c[e?"BL":"BR"]=e?"TL":"TR";c[e?"BR":"BL"]=e?"TR":"TL";break;case "above-alt":e=!e;default:c[e?"TL":"TR"]=e?"BL":"BR",c[e?"TR":"TL"]=e?"BR":"BL"}});return c};f.mixin(k,e);return k});
define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),function(g,f,n,m,k,e){var l=function(c){var b=c.document;this.getType=function(){if(b.getSelection){var d="text",e;try{e=c.getSelection()}catch(l){}e&&1==e.rangeCount&&(e=e.getRangeAt(0),e.startContainer==e.endContainer&&1==e.endOffset-e.startOffset&&3!=e.startContainer.nodeType&&(d="control"));return d}return b.selection.type.toLowerCase()};this.getSelectedText=function(){if(b.getSelection){var d=
c.getSelection();return d?d.toString():""}return"control"==this.getType()?null:b.selection.createRange().text};this.getSelectedHtml=function(){if(b.getSelection){var d=c.getSelection();if(d&&d.rangeCount){var e,l="";for(e=0;e<d.rangeCount;e++){var a=d.getRangeAt(e).cloneContents(),q=b.createElement("div");q.appendChild(a);l+=q.innerHTML}return l}return null}return"control"==this.getType()?null:b.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(b.getSelection){var d=
c.getSelection();return d.anchorNode.childNodes[d.anchorOffset]}if((d=b.selection.createRange())&&d.item)return b.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var c=this.getSelectedElement();if(c)return c.parentNode}else if(b.getSelection){if(c=b.getSelection()){for(c=c.anchorNode;c&&1!=c.nodeType;)c=c.parentNode;return c}}else return c=b.selection.createRange(),c.collapse(!0),c.parentElement();return null};this.hasAncestorElement=function(b){return null!=
this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(b){var c=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(c,arguments)};this.isTag=function(b,c){if(b&&b.tagName)for(var d=b.tagName.toLowerCase(),a=0;a<c.length;a++){var e=String(c[a]).toLowerCase();if(d==e)return e}return""};this.getParentOfType=function(b,c){for(;b;){if(this.isTag(b,c).length)return b;b=b.parentNode}return null};this.collapse=function(d){if(b.getSelection){var e=c.getSelection();
e.removeAllRanges?d?e.collapseToStart():e.collapseToEnd():e.collapse(d)}else e=b.selection.createRange(),e.collapse(d),e.select()};this.remove=function(){var d=b.selection;b.getSelection?(d=c.getSelection(),d.deleteFromDocument()):"none"!=d.type.toLowerCase()&&d.clear();return d};this.selectElementChildren=function(d,e){var l;d=f.byId(d);if(b.getSelection){var a=c.getSelection();m("opera")?(l=a.rangeCount?a.getRangeAt(0):b.createRange(),l.setStart(d,0),l.setEnd(d,3==d.nodeType?d.length:d.childNodes.length),
a.addRange(l)):a.selectAllChildren(d)}else if(l=d.ownerDocument.body.createTextRange(),l.moveToElementText(d),!e)try{l.select()}catch(q){}};this.selectElement=function(c,d){var e;c=f.byId(c);if(b.getSelection){var a=b.getSelection();e=b.createRange();a.removeAllRanges&&(m("opera")&&a.getRangeAt(0)&&(e=a.getRangeAt(0)),e.selectNode(c),a.removeAllRanges(),a.addRange(e))}else try{a=c.tagName?c.tagName.toLowerCase():"",e="img"===a||"table"===a?k.body(b).createControlRange():k.body(b).createRange(),e.addElement(c),
d||e.select()}catch(l){this.selectElementChildren(c,d)}};this.inSelection=function(d){if(d){var e,l;if(b.getSelection){var a=c.getSelection();a&&0<a.rangeCount&&(l=a.getRangeAt(0));if(l&&l.compareBoundaryPoints&&b.createRange)try{if(e=b.createRange(),e.setStart(d,0),1===l.compareBoundaryPoints(l.START_TO_END,e))return!0}catch(q){}}else{l=b.selection.createRange();try{e=d.ownerDocument.body.createTextRange(),e.moveToElementText(d)}catch(f){}if(l&&e&&1===l.compareEndPoints("EndToStart",e))return!0}}return!1};
this.getBookmark=function(){var d,l,f=b.selection,a=e.curNode;if(b.getSelection){if(f=c.getSelection())if(f.isCollapsed){if(d=a?a.tagName:"")if(d=d.toLowerCase(),"textarea"==d||"input"==d&&(!a.type||"text"==a.type.toLowerCase()))return f={start:a.selectionStart,end:a.selectionEnd,node:a,pRange:!0},{isCollapsed:f.end<=f.start,mark:f};d={isCollapsed:!0};f.rangeCount&&(d.mark=f.getRangeAt(0).cloneRange())}else l=f.getRangeAt(0),d={isCollapsed:!1,mark:l.cloneRange()}}else if(f){d=a?a.tagName:"";d=d.toLowerCase();
if(a&&d&&("button"==d||"textarea"==d||"input"==d)){if(f.type&&"none"==f.type.toLowerCase())return{isCollapsed:!0,mark:null};l=f.createRange();return{isCollapsed:l.text&&l.text.length?!1:!0,mark:{range:l,pRange:!0}}}d={};try{l=f.createRange(),d.isCollapsed=!("Text"==f.type?l.htmlText.length:l.length)}catch(q){return d.isCollapsed=!0,d}if("CONTROL"==f.type.toUpperCase())if(l.length)for(d.mark=[],f=0,a=l.length;f<a;)d.mark.push(l.item(f++));else d.isCollapsed=!0,d.mark=null;else d.mark=l.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");
return d};this.moveToBookmark=function(d){if(d=d.mark)if(b.getSelection){var e=c.getSelection();e&&e.removeAllRanges?d.pRange?(e=d.node,e.selectionStart=d.start,e.selectionEnd=d.end):(e.removeAllRanges(),e.addRange(d)):console.warn("No idea how to restore selection for this browser!")}else if(b.selection&&d){var l;d.pRange?l=d.range:n.isArray(d)?(l=b.body.createControlRange(),g.forEach(d,function(a){l.addElement(a)})):(l=b.body.createTextRange(),l.moveToBookmark(d));l.select()}};this.isCollapsed=
function(){return this.getBookmark().isCollapsed}},d=new l(window);d.SelectionManager=l;return d});
define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(g,f,n,m,k,e,l,d){e.focus=function(c){if(c){var b="node"in c?c.node:c,l=c.bookmark;c=c.openedForWindow;var f=l?l.isCollapsed:!1;if(b){var u="iframe"==b.tagName.toLowerCase()?b.contentWindow:b;if(u&&u.focus)try{u.focus()}catch(a){}e._onFocusNode(b)}if(l&&k.withGlobal(c||k.global,d.isCollapsed)&&!f){c&&c.focus();try{k.withGlobal(c||k.global,d.moveToBookmark,null,[l])}catch(q){}}}};
e.watch("curNode",function(c,b,e){d._curFocus=e;d._prevFocus=b;e&&m.publish("focusNode",e)});e.watch("activeStack",function(c,b,e){d._activeStack=e});e.on("widget-blur",function(c,b){m.publish("widgetBlur",c,b)});e.on("widget-focus",function(c,b){m.publish("widgetFocus",c,b)});n.mixin(d,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return d.getBookmark().isCollapsed},getBookmark:function(){return(k.global==window?l:new l.SelectionManager(k.global)).getBookmark()},moveToBookmark:function(c){return(k.global==
window?l:new l.SelectionManager(k.global)).moveToBookmark(c)},getFocus:function(c,b){var l=!e.curNode||c&&f.isDescendant(e.curNode,c.domNode)?d._prevFocus:e.curNode;return{node:l,bookmark:l&&l==e.curNode&&k.withGlobal(b||k.global,d.getBookmark),openedForWindow:b}},_activeStack:[],registerIframe:function(c){return e.registerIframe(c)},unregisterIframe:function(c){c&&c.remove()},registerWin:function(c,b){return e.registerWin(c,b)},unregisterWin:function(c){c&&c.remove()}});return d});
define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(g,f,n,m){var k=f("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(e){if(this._hash[e.id])throw Error("Tried to register widget with id=="+e.id+" but that id is already registered");this._hash[e.id]=e;this.length++},remove:function(e){this._hash[e]&&(delete this._hash[e],this.length--)},forEach:function(e,l){l=l||n.global;var d=0,c;for(c in this._hash)e.call(l,this._hash[c],
d++,this._hash);return this},filter:function(e,l){l=l||n.global;var d=new k,c=0,b;for(b in this._hash){var p=this._hash[b];e.call(l,p,c++,this._hash)&&d.add(p)}return d},byId:function(e){return this._hash[e]},byClass:function(e){var l=new k,d,c;for(d in this._hash)c=this._hash[d],c.declaredClass==e&&l.add(c);return l},toArray:function(){var e=[],l;for(l in this._hash)e.push(this._hash[l]);return e},map:function(e,l){return g.map(this.toArray(),e,l)},every:function(e,l){l=l||n.global;var d=0,c;for(c in this._hash)if(!e.call(l,
this._hash[c],d++,this._hash))return!1;return!0},some:function(e,l){l=l||n.global;var d=0,c;for(c in this._hash)if(e.call(l,this._hash[c],d++,this._hash))return!0;return!1}});g.forEach("forEach filter byClass map every some".split(" "),function(e){m[e]=k.prototype[e]});return k});define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(g){return g._base});
define(["../_base/declare","../dom-class","./Source"],function(g,f,n){return g("dojo.dnd.Target",n,{constructor:function(){this.isSource=!1;f.remove(this.node,"dojoDndSource")}})});define(["../_base/declare","./Source"],function(g,f){return g("dojo.dnd.AutoSource",f,{constructor:function(){this.autoSync=!0}})});
define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u){n.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");e=u._iframeName;e=e.substring(0,e.lastIndexOf("_"));var a=m.delegate(u,{create:function(){return a._frame=u.create.apply(u,arguments)},get:null,post:null,send:function(a){var b,c=k._ioSetArgs(a,function(a){b&&b.cancel()},
function(a){var c=null;a=a.ioArgs;try{var d=a.handleAs;"xml"===d||"html"===d?c=b.response.data:(c=b.response.text,"json"===d?c=f.fromJson(c):"javascript"===d&&(c=n.eval(c)))}catch(e){c=e}return c},function(a,b){b.ioArgs._hasError=!0;return a}),e=c.ioArgs,l="GET",p=d.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&p&&(l="POST");a={method:l,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:p?null:a.content,data:p?a.content:null,timeout:a.timeout,ioArgs:e};
a.method&&(a.method=a.method.toUpperCase());if(g.ioPublish&&n.publish&&!1!==e.args.ioPublish)var m=r.after(u,"_notifyStart",function(a){a.options.ioArgs===e&&(m.remove(),k._ioNotifyStart(c))},!0);b=u(e.url,a,!0);e._callNext=b._callNext;b.then(function(){c.resolve(c)}).otherwise(function(a){c.ioArgs.error=a;c.reject(a)});return c},_iframeOnload:l.global[e+"_onload"]});m.setObject("dojo.io.iframe",a);return a});
define("require dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/keys dojo/_base/lang dojo/sniff dojo/topic ../focus ../_base/manager dojo/ready ../_Widget ../_Container ../_TemplatedMixin ../_CssStateMixin ./StackContainer ./ContentPane dojo/text!./templates/AccordionButton.html ../a11yclick".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x,C,y,z,D,F){u=n("dijit.layout._AccordionButton",[v,C,y],{templateString:F,
label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var a=this.id.replace(" ","_");e.set(this.titleTextNode,"id",a+"_title");this.focusNode.setAttribute("aria-labelledby",e.get(this.titleTextNode,"id"));k.setSelectable(this.domNode,
!1)},getTitleHeight:function(){return c.getMarginSize(this.domNode).h},_onTitleClick:function(){this.getParent().selectChild(this.contentWidget,!0);a.focus(this.focusNode)},_onTitleKeyDown:function(a){return this.getParent()._onKeyDown(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a);this.focusNode.setAttribute("aria-expanded",a?"true":"false");this.focusNode.setAttribute("aria-selected",a?"true":"false");this.focusNode.setAttribute("tabIndex",a?"0":"-1")}});r("dojo-bidi")&&
u.extend({_setLabelAttr:function(a){this._set("label",a);e.set(this.titleTextNode,"innerHTML",a);this.applyTextDir(this.titleTextNode)},_setTitleAttr:function(a){this._set("title",a);e.set(this.titleTextNode,"title",a);this.applyTextDir(this.titleTextNode)}});var H=n("dijit.layout._AccordionInnerContainer"+(r("dojo-bidi")?"_NoBidi":""),[v,y],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=d.place("<div class='"+this.baseClass+"' role='presentation'>",
this.contentWidget.domNode,"after");var a=this.contentWidget,b=p.isString(this.buttonWidget)?p.getObject(this.buttonWidget):this.buttonWidget;this.button=a._buttonWidget=(new b({contentWidget:a,label:a.title,title:a.tooltip,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,iconClass:a.iconClass,id:a.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=d.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",this.domNode);this.containerNode.setAttribute("aria-labelledby",
this.button.id);d.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var a=this.button,b=this.contentWidget;this._contentWidgetWatches=[b.watch("title",p.hitch(this,function(b,c,d){a.set("label",d)})),b.watch("tooltip",p.hitch(this,function(b,c,d){a.set("title",d)})),b.watch("iconClass",p.hitch(this,function(b,c,d){a.set("iconClass",d)}))]},_setSelectedAttr:function(a){this._set("selected",a);this.button.set("selected",a);if(a&&(a=this.contentWidget,
a.onSelected))a.onSelected()},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive();f.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments)},destroyDescendants:function(a){this.contentWidget.destroyRecursive(a)}});r("dojo-bidi")&&(H=n("dijit.layout._AccordionInnerContainer",H,{postCreate:function(){this.inherited(arguments);var a=this.button;
this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(b,c,d){a.set("textDir",d)}))}}));n=n("dijit.layout.AccordionContainer",z,{duration:q.defaultDuration,buttonWidget:u,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&this.selectedChildWidget._wrapperWidget.set("selected",
!0))},layout:function(){var a=this.selectedChildWidget;if(a){var b=a._wrapperWidget.domNode,d=c.getMarginExtents(b),b=c.getPadBorderExtents(b),e=a._wrapperWidget.containerNode,l=c.getMarginExtents(e),e=c.getPadBorderExtents(e),p=this._contentBox,q=0;f.forEach(this.getChildren(),function(b){b!=a&&(q+=c.getMarginSize(b._wrapperWidget.domNode).h)});this._verticalSpace=p.h-q-d.h-b.h-l.h-e.h-a._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-d.w-b.w-
l.w-e.w};a&&a.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=H({contentWidget:a,buttonWidget:this.buttonWidget,id:a.id+"_wrapper",dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,parent:this});this.inherited(arguments);d.place(a.domNode,a._wrapper,"replace")},removeChild:function(a){a._wrapperWidget&&(d.place(a.domNode,a._wrapperWidget.domNode,"after"),a._wrapperWidget.destroy(),delete a._wrapperWidget);l.remove(a.domNode,"dijitHidden");this.inherited(arguments)},
getChildren:function(){return f.map(this.inherited(arguments),function(a){return"dijit.layout._AccordionInnerContainer"==a.declaredClass?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop();f.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()});this.inherited(arguments)},_showChild:function(a){a._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},_hideChild:function(a){a._wrapperWidget.containerNode.style.display=
"none";this.inherited(arguments)},_transition:function(a,b,d){8>r("ie")&&(d=!1);this._animation&&(this._animation.stop(!0),delete this._animation);var e=this;if(a){a._wrapperWidget.set("selected",!0);var l=this._showChild(a);this.doLayout&&a.resize&&a.resize(this._containerContentBox)}b&&(b._wrapperWidget.set("selected",!1),d||this._hideChild(b));if(d){var p=a._wrapperWidget.containerNode,q=b._wrapperWidget.containerNode;d=a._wrapperWidget.containerNode;a=c.getMarginExtents(d);d=c.getPadBorderExtents(d);
var f=a.h+d.h;q.style.height=e._verticalSpace-f+"px";this._animation=new m.Animation({node:p,duration:this.duration,curve:[1,this._verticalSpace-f-1],onAnimate:function(a){a=Math.floor(a);p.style.height=a+"px";q.style.height=e._verticalSpace-f-a+"px"},onEnd:function(){delete e._animation;p.style.height="auto";b._wrapperWidget.containerNode.style.display="none";q.style.height="auto";e._hideChild(b)}});this._animation.onStop=this._animation.onEnd;this._animation.play()}return l},_onKeyDown:function(a,
c){if(!this.disabled&&!a.altKey&&(c||a.ctrlKey)){var d=a.keyCode;if(c&&(d==b.LEFT_ARROW||d==b.UP_ARROW)||a.ctrlKey&&d==b.PAGE_UP)this._adjacent(!1)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault();else if(c&&(d==b.RIGHT_ARROW||d==b.DOWN_ARROW)||a.ctrlKey&&(d==b.PAGE_DOWN||d==b.TAB))this._adjacent(!0)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault()}}});r("dijit-legacy-requires")&&t(0,function(){g(["dijit/layout/AccordionPane"])});n._InnerContainer=H;n._Button=
u;return n});
define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(g,f,n,m,k,e,l,d){f=f("dijit.layout.LayoutContainer",l,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(g.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(c){this.inherited(arguments);c.region&&n.add(c.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var c=g.map(this.getChildren(),
function(b,c){return{pane:b,weight:["center"==b.region?Infinity:0,b.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(b.region)?1:-1),c]}},this);c.sort(function(b,c){for(var d=b.weight,e=c.weight,a=0;a<d.length;a++)if(d[a]!=e[a])return d[a]-e[a];return 0});return g.map(c,function(b){return b.pane})},layout:function(){d.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(c,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(c){this.inherited(arguments);
this._started&&this.layout();n.remove(c.domNode,this.baseClass+"Pane");m.set(c.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});m.set(c.domNode,/top|bottom/.test(c.region)?"width":"height","auto")}});f.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};k.extend(e,f.ChildWidgetProperties);return f});
define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){var v=n("dijit.layout._Splitter",[u,a],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',
constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);m.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=f(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=
this.horizontal?"h":"w",b=e.getMarginBox(this.child.domNode)[a],c=g.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=e.getContentBox(c.domNode)[a]-10;return Math.min(this.child.maxSize,b+a)},_startDrag:function(a){this.cover||(this.cover=k.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after"));m.add(this.cover,"dijitSplitterCoverActive");this.fake&&k.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),
m.add(this.domNode,"dijitSplitterShadow"),k.place(this.fake,this.domNode,"after"));m.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");this.fake&&m.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var d=this._factor,q=this.horizontal,f=q?"pageY":"pageX",r=a[f],t=this.domNode.style,q=q?"h":"w",v=l.getComputedStyle(this.child.domNode),u=e.getMarginBox(this.child.domNode,v)[q],x=this._computeMaxSize(),g=Math.max(this.child.minSize,
e.getPadBorderExtents(this.child.domNode,v)[q]+10),q=this.region,n="top"==q||"bottom"==q?"top":"left",S=parseInt(t[n],10),O=this._resize,s=c.hitch(this.container,"_layoutChildren",this.child.id),q=this.ownerDocument;this._handlers=this._handlers.concat([b(q,p.move,this._drag=function(a,b){var c=a[f]-r,e=d*c+u,l=Math.max(Math.min(e,x),g);(O||b)&&s(l);t[n]=c+S+d*(l-e)+"px"}),b(q,"dragstart",function(a){a.stopPropagation();a.preventDefault()}),b(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation();
a.preventDefault()}),b(q,p.release,c.hitch(this,"_stopDrag"))]);a.stopPropagation();a.preventDefault()},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;m.toggle(this.domNode,"dijitSplitterHover",a);m.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&m.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&k.destroy(this.fake),m.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),
this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&f(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var b=this.horizontal,c=1;switch(a.keyCode){case b?d.UP_ARROW:d.LEFT_ARROW:c*=-1;case b?d.DOWN_ARROW:d.RIGHT_ARROW:break;default:return}b=e.getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*
c;this.container._layoutChildren(this.child.id,Math.max(Math.min(b,this._computeMaxSize()),this.child.minSize));a.stopPropagation();a.preventDefault()},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),x=n("dijit.layout._Gutter",[u,a],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},
buildRendering:function(){this.inherited(arguments);m.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});n=n("dijit.layout.BorderContainer",q,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:v,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var b=a.region,d=a.isLeftToRight();"leading"==b&&(b=d?"left":"right");"trailing"==b&&(b=d?"right":"left");b&&
"center"!=b&&(a.splitter||this.gutters)&&!a._splitterWidget&&(d=a.splitter?this._splitterClass:x,c.isString(d)&&(d=c.getObject(d)),d=new d({id:a.id+"_splitter",container:this,child:a,region:b,live:this.liveSplitters}),d.isSplitter=!0,a._splitterWidget=d,b="bottom"==b||b==(this.isLeftToRight()?"right":"left"),k.place(d.domNode,a.domNode,b?"before":"after"),d.startup())},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget);
this.inherited(arguments)},getChildren:function(){return g.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return g.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var c=this.domNode;this.cs=l.getComputedStyle(c);this.pe=e.getPadExtents(c,this.cs);this.pe.r=l.toPixelValue(c,this.cs.paddingRight);this.pe.b=l.toPixelValue(c,this.cs.paddingBottom);l.set(c,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=[];g.forEach(this._getOrderedChildren(),function(a){c.push(a);a._splitterWidget&&c.push(a._splitterWidget)});t.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},c,a,b)}},destroyRecursive:function(){g.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});n.ChildWidgetProperties={splitter:!1,
minSize:0,maxSize:Infinity};c.mixin(n.ChildWidgetProperties,q.ChildWidgetProperties);c.extend(r,n.ChildWidgetProperties);n._Splitter=v;n._Gutter=x;return n});
define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x,C,y){r=f("dijit.layout.ScrollingTabController",
[a,t],{baseClass:"dijitTabController dijitScrollingTabController",templateString:r,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None",n.add(a,"tabStrip-disabled"));n.add(this.tablistWrapper,
this.tabStripClass)},onStartup:function(){this.inherited(arguments);k.set(this.domNode,"visibility","");this._postStartup=!0;this.own(d(this.containerNode,"attrmodified-label, attrmodified-iconclass",l.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments);k.set(this.containerNode,"width",k.get(this.containerNode,"width")+200+"px")},onRemoveChild:function(a,b){var c=this.pane2button(a.id);this._selectedTab===c.domNode&&(this._selectedTab=null);
this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=c("> .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode))return this._btnWidth+=m.getMarginSize(a).w,!0;k.set(a,"display","none");return!1},this)},_getTabsWidth:function(){var a=this.getChildren();if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;
return a.offsetLeft+a.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||k.get(this.scrollNode,"width");return 0<b&&a<b},resize:function(a){this._dim=a;this.scrollNode.style.height="auto";var b=this._contentBox=q.marginBox2contentBox(this.domNode,{h:0,w:a.w});b.h=this.scrollNode.offsetHeight;m.setContentSize(this.domNode,b);b=this._enableBtn(this._contentBox.w);this._buttons.style("display",b?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";
this._menuBtn.region=this.isLeftToRight()?"right":"left";q.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());this._postResize=!0;return{h:this._contentBox.h,w:a.w}},_getScroll:function(){return this.isLeftToRight()||
8>b("ie")||b("ie")&&b("quirks")||b("webkit")?this.scrollNode.scrollLeft:k.get(this.containerNode,"width")-k.get(this.scrollNode,"width")+(8<=b("ie")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||8>b("ie")||b("ie")&&b("quirks")||b("webkit"))return a;var c=k.get(this.containerNode,"width")-k.get(this.scrollNode,"width");return(8<=b("ie")?-1:1)*(a-c)},onSelectChild:function(a){var b=this.pane2button(a.id);if(b){b=b.domNode;if(b!=this._selectedTab&&(this._selectedTab=
b,this._postResize)){var c=this._getScroll();(c>b.offsetLeft||c+k.get(this.scrollNode,"width")<b.offsetLeft+k.get(b,"width"))&&this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=k.get(this.scrollNode,"width"),c=k.get(this.containerNode,"width")-b,d=this._getTabsWidth();if(a.length&&d>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-
b:c};a=this.isLeftToRight()?0:c;return{min:a,max:a}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=k.get(this.scrollNode,"width"),c=this._getScrollBounds(),a=a.offsetLeft+k.get(a,"width")/2-b/2;return a=Math.min(Math.max(a,c.min),c.max)},createSmoothScroll:function(a){if(0<arguments.length){var b=this._getScrollBounds();a=Math.min(Math.max(a,b.min),b.max)}else a=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var c=this,d=this.scrollNode,
l=new e.Animation({beforeBegin:function(){this.curve&&delete this.curve;var b=d.scrollLeft,p=c._convertToScrollLeft(a);l.curve=new e._Line(b,p)},onAnimate:function(a){d.scrollLeft=a}});this._anim=l;this._setButtonClass(a);return l},_getBtnNode:function(a){for(a=a.target;a&&!n.contains(a,"tabStripButton");)a=a.parentNode;return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!n.contains(b,"dijitTabDisabled")){var c=
0.75*k.get(this.scrollNode,"width")*a,c=this._getScroll()+c;this._setButtonClass(c);this.createSmoothScroll(c).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});u=f("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:u,tabIndex:"",isFocusable:function(){return!1}});f("dijit.layout._ScrollingTabControllerButton",[C,u]);f("dijit.layout._ScrollingTabControllerMenuButton",
[C,y,u],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new v({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var b=p.byId(this.containerId);g.forEach(b.getChildren(),function(a){var c=new x({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||b.textDir,onClick:function(){b.selectChild(a)}});
this.dropDown.addChild(c)},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return r});
define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch dojo/i18n!../nls/common".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a){m=f("dijit.layout._StackButton",a,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});f=
f("dijit.layout.StackController",[p,r,u],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:m,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return b.byId(this.id+"_"+a)},postCreate:function(){this.inherited(arguments);this.own(d.subscribe(this.containerId+"-startup",e.hitch(this,"onStartup")),d.subscribe(this.containerId+"-addChild",e.hitch(this,"onAddChild")),d.subscribe(this.containerId+
"-removeChild",e.hitch(this,"onRemoveChild")),d.subscribe(this.containerId+"-selectChild",e.hitch(this,"onSelectChild")),d.subscribe(this.containerId+"-containerKeyDown",e.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(l(this.containerNode,"click",e.hitch(this,function(a){var c=b.getEnclosingWidget(a.target);if(c!=this.containerNode&&!c.disabled&&c.page)for(a=a.target;a!==this.containerNode;a=a.parentNode)if(n.contains(a,this.buttonWidgetCloseClass)){this.onCloseButtonClick(c.page);
break}else if(a==c.domNode){this.onButtonClick(c.page);break}})))},onStartup:function(a){this.textDir=a.textDir;g.forEach(a.children,this.onAddChild,this);if(a.selected)this.onSelectChild(a.selected);var c=b.byId(this.containerId).containerNode,d=e.hitch(this,"pane2button");a={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var p=function(a,b){return l(c,"attrmodified-"+a,function(a){var c=d(a.detail&&a.detail.widget&&
a.detail.widget.id);c&&c.set(b,a.detail.newValue)})},f;for(f in a)this.own(p(f,a[f]))},destroy:function(a){this.destroyDescendants(a);this.inherited(arguments)},onAddChild:function(a,b){var c=new (e.isString(this.buttonWidget)?e.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,
title:a.tooltip,page:a});this.addChild(c,b);a.controlButton=c;if(!this._currentChild)this.onSelectChild(a);c=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+c.id:c.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",c)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy());delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var c=
this.pane2button(this._currentChild.id);c.set("checked",!1);c.focusNode.setAttribute("tabIndex","-1")}c=this.pane2button(a.id);c.set("checked",!0);this._currentChild=a;c.focusNode.setAttribute("tabIndex","0");b.byId(this.containerId)}},onButtonClick:function(a){var d=this.pane2button(a.id);c.focus(d.focusNode);this._currentChild&&this._currentChild.id===a.id&&d.set("checked",!0);b.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){b.byId(this.containerId).closeChild(a);this._currentChild&&
(a=this.pane2button(this._currentChild.id))&&c.focus(a.focusNode||a.domNode)},adjacent:function(a){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(a=!a);var b=this.getChildren(),c=g.indexOf(b,this.pane2button(this._currentChild.id)),d=b[c],e;do c=(c+(a?1:b.length-1))%b.length,e=b[c];while(e.disabled&&e!=d);return e},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var c=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case k.LEFT_ARROW:case k.UP_ARROW:a._djpage||
(c=!1);break;case k.PAGE_UP:a.ctrlKey&&(c=!1);break;case k.RIGHT_ARROW:case k.DOWN_ARROW:a._djpage||(c=!0);break;case k.PAGE_DOWN:a.ctrlKey&&(c=!0);break;case k.HOME:for(var d=this.getChildren(),e=0;e<d.length;e++){var l=d[e];if(!l.disabled){this.onButtonClick(l.page);break}}a.stopPropagation();a.preventDefault();break;case k.END:d=this.getChildren();for(e=d.length-1;0<=e;e--)if(l=d[e],!l.disabled){this.onButtonClick(l.page);break}a.stopPropagation();a.preventDefault();break;case k.DELETE:case 87:if(this._currentChild.closable&&
(a.keyCode==k.DELETE||a.ctrlKey))this.onCloseButtonClick(this._currentChild);a.stopPropagation();a.preventDefault();break;case k.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==c&&(this.onButtonClick(this.adjacent(c).page),a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page;this.onkeydown(a.e)}});f.StackButton=m;return f});
define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){r=g("dijit.layout._TabButton"+(k("dojo-bidi")?"_NoBidi":""),d.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:r,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);
f.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var b=this.domNode;this.defer(function(){b.className=b.className},1)},_setCloseButtonAttr:function(b){this._set("closeButton",b);m.toggle(this.domNode,"dijitClosable",b);this.closeNode.style.display=b?"":"none";b&&(b=e.getLocalization("dijit","common"),this.closeNode&&n.set(this.closeNode,"title",b.itemClose))},_setDisabledAttr:function(b){this.inherited(arguments);if(this.closeNode)if(b)n.remove(this.closeNode,"title");
else{var a=e.getLocalization("dijit","common");n.set(this.closeNode,"title",a.itemClose)}},_setLabelAttr:function(b){this.inherited(arguments);this.showLabel||this.params.title||(this.iconNode.alt=l.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});k("dojo-bidi")&&(r=g("dijit.layout._TabButton",r,{_setLabelAttr:function(b){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}}));g=g("dijit.layout.TabController",d,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",
tabPosition:"top",buttonWidget:r,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var d=new b({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return m.contains(a,"dijitClosable")&&!m.contains(a,"dijitTabDisabled")}});this.own(d);var a=e.getLocalization("dijit","common"),l=this;d.addChild(new p({label:a.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,
lang:this.lang,textDir:this.textDir,onClick:function(a){a=c.byNode(this.getParent().currentTarget);l.onCloseButtonClick(a.page)}}))}});g.TabButton=r;return g});
define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(g,f,n,m,k,e,l,d,c){return e("dijit.layout._LayoutWidget",[f,n,m],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),
this.own(k.on("resize",g.hitch(this,"resize"))))}},resize:function(b,e){var l=this.domNode;b&&d.setMarginBox(l,b);var f=e||{};g.mixin(f,b||{});"h"in f&&"w"in f||(f=g.mixin(d.getMarginBox(l),f));var a=c.getComputedStyle(l),q=d.getMarginExtents(l,a),t=d.getBorderExtents(l,a),f=this._borderBox={w:f.w-(q.w+t.w),h:f.h-(q.h+t.h)},q=d.getPadExtents(l,a);this._contentBox={l:c.toPixelValue(l,a.paddingLeft),t:c.toPixelValue(l,a.paddingTop),w:f.w-q.w,h:f.h-q.h};this.layout()},layout:function(){},_setupChild:function(b){l.add(b.domNode,
this.baseClass+"-child "+(b.baseClass?this.baseClass+"-"+b.baseClass:""))},addChild:function(b,c){this.inherited(arguments);this._started&&this._setupChild(b)},removeChild:function(b){l.remove(b.domNode,this.baseClass+"-child"+(b.baseClass?" "+this.baseClass+"-"+b.baseClass:""));this.inherited(arguments)}})});
define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget dojo/i18n!../nls/common".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a){e("dijit-legacy-requires")&&c(0,function(){require(["dijit/layout/StackController"])});n=n("dijit.layout.StackContainer",a,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);
m.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",l.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();g.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=r.byId(f(this.id+"_selectedChild")):g.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},this);var c=this.selectedChildWidget;!c&&a[0]&&(c=this.selectedChildWidget=a[0],c.selected=!0);
b.publish(this.id+"-startup",{children:a,selected:c,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,c=k.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",a.domNode,"replace"),d=a["aria-label"]||a.title||a.label;d&&c.setAttribute("aria-label",d);k.place(b,c);a._wrapper=c;this.inherited(arguments);
"none"==b.style.display&&(b.style.display="block");a.domNode.title=""},addChild:function(a,c){this.inherited(arguments);this._started&&(b.publish(this.id+"-addChild",a,c),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){var c=g.indexOf(this.getChildren(),a);this.inherited(arguments);k.destroy(a._wrapper);delete a._wrapper;this._started&&b.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=
void 0,this._started)){var d=this.getChildren();d.length&&this.selectChild(d[Math.max(c-1,0)])}this._started&&this.layout()}},selectChild:function(a,c){var d;a=r.byId(a);this.selectedChildWidget!=a&&(d=this._transition(a,this.selectedChildWidget,c),this._set("selectedChildWidget",a),b.publish(this.id+"-selectChild",a),this.persist&&f(this.id+"_selectedChild",this.selectedChildWidget.id));return p(d||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);a.resize&&(this.doLayout?
a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=g.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){b.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||
this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&m.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&m.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=
!0;this.selectedChildWidget=void 0;g.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});n.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};l.extend(u,n.ChildWidgetProperties);return n});
define("dojo/text!./templates/TabContainer.html ./StackContainer ./utils ../_TemplatedMixin dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(g,f,n,m,k,e,l,d){return k("dijit.layout._TabContainerBase",[f,m],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:g,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&d.set(this.srcNodeRef,
"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||e.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(e.add(this.domNode,"dijitTabContainerNested"),e.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),e.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),e.add(this.containerNode,"dijitTabPaneWrapperNested")):e.add(this.domNode,"tabStrip-"+(this.tabStrip?
"enabled":"disabled"))},_setupChild:function(c){e.add(c.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var c=this.selectedChildWidget;if(this.doLayout){var b=this.tabPosition.replace(/-h/,"");this.tablist.region=b;b=[this.tablist,{domNode:this.tablistSpacer,region:b},{domNode:this.containerNode,region:"center"}];n.layoutChildren(this.domNode,
this._contentBox,b);this._containerContentBox=n.marginBox2contentBox(this.containerNode,b[2]);c&&c.resize&&c.resize(this._containerContentBox)}else{if(this.tablist.resize){b=this.tablist.domNode.style;b.width="0";var d=l.getContentBox(this.domNode).w;b.width="";this.tablist.resize({w:d})}c&&c.resize&&c.resize()}}},destroy:function(c){this.tablist&&this.tablist.destroy(c);this.inherited(arguments)}})});
define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(g,f,n,m,k){return f("dijit.layout.TabContainer",n,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(e){var l=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?g.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,
textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":l,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},e)},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?m:k)}})});
define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(g,f,n,m,k,e){m=g("dojo.dnd.move.constrainedMoveable",e,{constraints:function(){},within:!1,constructor:function(e,d){d||(d={});this.constraints=d.constraints;this.within=d.within},onFirstMove:function(e){var d=this.constraintBox=this.constraints.call(this,e);d.r=d.l+d.w;d.b=d.t+d.h;this.within&&(e=f.getMarginSize(e.node),d.r-=e.w,d.b-=e.h)},onMove:function(e,d){var c=this.constraintBox,b=e.node.style;
this.onMoving(e,d);d.l=d.l<c.l?c.l:c.r<d.l?c.r:d.l;d.t=d.t<c.t?c.t:c.b<d.t?c.b:d.t;b.left=d.l+"px";b.top=d.t+"px";this.onMoved(e,d)}});k=g("dojo.dnd.move.boxConstrainedMoveable",m,{box:{},constructor:function(e,d){var c=d&&d.box;this.constraints=function(){return c}}});g=g("dojo.dnd.move.parentConstrainedMoveable",m,{area:"content",constructor:function(e,d){var c=d&&d.area;this.constraints=function(){var b=this.node.parentNode,d=n.getComputedStyle(b),e=f.getMarginBox(b,d);if("margin"==c)return e;
var l=f.getMarginExtents(b,d);e.l+=l.l;e.t+=l.t;e.w-=l.w;e.h-=l.h;if("border"==c)return e;l=f.getBorderExtents(b,d);e.l+=l.l;e.t+=l.t;e.w-=l.w;e.h-=l.h;if("padding"==c)return e;l=f.getPadExtents(b,d);e.l+=l.l;e.t+=l.t;e.w-=l.w;e.h-=l.h;return e}}});return{constrainedMoveable:m,boxConstrainedMoveable:k,parentConstrainedMoveable:g}});
define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x,C,y,z){var D=f("dijit.form._SliderMover",p,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=
k.position(b.sliderBarContainer,!0),b._setPixelValue_=d.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(a){p.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}});n=f("dijit.form.HorizontalSlider",[C,y],{templateString:z,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,
clickSelect:!0,slideDuration:q.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(a){this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey||this._setValueAttr(this.value,!0)},_onKeyDown:function(a){if(!(this.disabled||
this.readOnly||a.altKey||a.ctrlKey||a.metaKey)){switch(a.keyCode){case l.HOME:this._setValueAttr(this.minimum,!1);break;case l.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?l.RIGHT_ARROW:l.LEFT_ARROW:case !1===this._descending?l.DOWN_ARROW:l.UP_ARROW:case !1===this._descending?l.PAGE_DOWN:l.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?l.LEFT_ARROW:l.RIGHT_ARROW:case !1===this._descending?l.UP_ARROW:l.DOWN_ARROW:case !1===this._descending?
l.PAGE_UP:l.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){this.disabled||this.readOnly||(c("ie")||t.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&this.clickSelect){t.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=k.position(this.sliderBarContainer,!0),c=a[this._mousePixelCoord]-
b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;if(1>=d||Infinity==d)d=b;d--;a=Math.round(a/(b/d));this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*a/d+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;this.focusNode.setAttribute("aria-valuenow",
a);this.inherited(arguments);var c=(a-this.minimum)/(this.maximum-this.minimum),d=!1===this._descending?this.remainingBar:this.progressBar,e=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(b&&0<this.slideDuration&&d.style[this._progressPixelSize]){var l=this,p={},f=parseFloat(d.style[this._progressPixelSize]),r=this.slideDuration*(c-f/100);0!=r&&(0>r&&(r=0-r),p[this._progressPixelSize]={start:f,
end:100*c,units:"%"},this._inProgressAnim=m.animateProperty({node:d,duration:r,onAnimate:function(a){e.style[l._progressPixelSize]=100-parseFloat(a[l._progressPixelSize])+"%"},onEnd:function(){delete l._inProgressAnim},properties:p}),this._inProgressAnim.play())}else d.style[this._progressPixelSize]=100*c+"%",e.style[this._progressPixelSize]=100*(1-c)+"%"},_bumpValue:function(a,b){if(!this.disabled&&!this.readOnly){var c=e.getComputedStyle(this.sliderBarContainer),d=k.getContentBox(this.sliderBarContainer,
c),c=this.discreteValues;if(1>=c||Infinity==c)c=d[this._pixelCount];c--;d=(this.value-this.minimum)*c/(this.maximum-this.minimum)+a;0>d&&(d=0);d>c&&(d=c);d=d*(this.maximum-this.minimum)/c+this.minimum;this._setValueAttr(d,b)}},_onClkBumper:function(a){this.disabled||this.readOnly||!this.clickSelect||this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:
this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==l.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==l.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){a.stopPropagation();a.preventDefault();this._bumpValue(0>a.wheelDelta?-1:1,!0)},startup:function(){this._started||(g.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,
b,c){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var a=r('label[for="'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",a[0].id));this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",
this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(v.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),v.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(a(this.domNode,u.wheel,d.hitch(this,"_mouseWheeled")));var c=f(D,{widget:this});this._movable=new b(this.sliderHandle,{mover:c});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&
this._inProgressAnim.stop(!0);this.inherited(arguments)}});n._Mover=D;return n});
define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),function(g,f,n,m,k,e,l,d,c,b){return g("dijit.form._Spinner",d,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:c,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(b){return b},_arrowPressed:function(c,
d,e){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),d*e),!1),b.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(b,c,d){var a=this.smallDelta;c==this.textbox&&(c=d.keyCode,a=c==f.PAGE_UP||c==f.PAGE_DOWN?this.largeDelta:this.smallDelta,c=c==f.UP_ARROW||c==f.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==b?this._arrowReleased(c):this._arrowPressed(c,c==this.upArrowNode?1:-1,a)},_wheelTimer:null,
_mouseWheeled:function(b){b.stopPropagation();b.preventDefault();var c=b.wheelDelta/120;Math.floor(c)!=c&&(c=0<b.wheelDelta?1:-1);b=b.detail?-1*b.detail:c;if(0!==b){var d=this[0<b?"upArrowNode":"downArrowNode"];this._arrowPressed(d,b,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(d)},50)}},_setConstraintsAttr:function(b){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",
this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(b,c){this.focusNode.setAttribute("aria-valuenow",b);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,k.wheel,n.hitch(this,"_mouseWheeled")),l.addListener(this.upArrowNode,this.textbox,{keyCode:f.UP_ARROW,ctrlKey:!1,
altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),l.addListener(this.downArrowNode,this.textbox,{keyCode:f.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),l.addListener(this.upArrowNode,this.textbox,{keyCode:f.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,
this.minimumTimeout),l.addListener(this.downArrowNode,this.textbox,{keyCode:f.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})});
define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(g,f,n,m){return g("dijit.form.NumberSpinner",[n,m.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(f,e){var l=this.constraints,d=isNaN(f),c=!isNaN(l.max),b=!isNaN(l.min);d&&0!=e&&(f=0<e?b?l.min:c?l.max:0:c?this.constraints.max:b?l.min:0);var p=f+e;if(d||isNaN(p))return f;c&&p>l.max&&(p=l.max);b&&p<l.min&&(p=l.min);return p},_onKeyDown:function(k){if(!(this.disabled||this.readOnly||k.keyCode!=
f.HOME&&k.keyCode!=f.END||k.ctrlKey||k.altKey||k.metaKey||"undefined"==typeof this.get("value"))){var e=this.constraints[k.keyCode==f.HOME?"min":"max"];"number"==typeof e&&this._setValueAttr(e,!1);k.stopPropagation();k.preventDefault()}}})});
define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(g,f,n,m,k,e){return g("dijit.MenuSeparator",[n,m,k],{templateString:e,buildRendering:function(){this.inherited(arguments);f.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})});
define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x){function C(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(l.hitch(this,a,b))}}var y=f("dijit.form._SelectMenu",
r,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;l.isArray(b)&&(b=b[b.length-1]);b&&g.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)}});k=f("dijit.form.Select"+
(c("dojo-bidi")?"_NoBidi":""),[b,p,t],{baseClass:"dijitSelect dijitValidationTextBox",templateString:x,_buttonInputDisabled:c("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=a?a:0].value)}this.dropDown=new y({id:this.id+"_menu",parentWidget:this});m.add(this.dropDown.domNode,
this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(b){if(b.value||b.label){var c=l.hitch(this,"_setValueAttr",b);b=new u({option:b,label:b.label||this.emptyLabel,onClick:c,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:b.disabled||!1});b.focusNode.setAttribute("role","option");return b}return new a({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?
this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=v.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===
a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{g.forEach(this._getChildren(),function(a){a.destroyRecursive()});var b=new u({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);
this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);n.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML=
'<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+a+"</span>"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?q.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):q.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||
0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);q.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=e.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");9>c("ie")&&this.defer(function(){try{var a=
domStyle.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_setStyleAttr:function(a){this.inherited(arguments);m.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&
(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0);this.inherited(arguments)},_onBlur:function(){q.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});c("dojo-bidi")&&(k=f("dijit.form.Select",k,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));k._Menu=y;k.prototype._onContainerKeydown=C("_onContainerKeydown");k.prototype._onContainerKeypress=C("_onContainerKeypress");return k});
define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){return k("dijit._TimePicker",[q,t],{baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},
serialize:m.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){d.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,d){a=[];for(b=0;b<this._maxIncrement;b++)(c=
this._createOption(b))&&a.push(c);return a},_showText:function(){var a=m.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);var b=function(a){return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds()},c=b(this._clickableIncrementDate),b=b(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=a("T00:00:00");this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=
b/c;this._maxIncrement=86400/c;a=this._getFilteredNodes();g.forEach(a,function(a){this.domNode.appendChild(a)},this);!a.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in a)this._set(b,a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var b=new Date(this._refDate),c=this._clickableIncrementDate;
b.setTime(b.getTime()+c.getHours()*a*36E5+c.getMinutes()*a*6E4+c.getSeconds()*a*1E3);"time"==this.constraints.selector&&b.setFullYear(1970,0,1);c=n.format(b,this.constraints);if(this.filterString&&0!==c.toLowerCase().indexOf(this.filterString))return null;var d=this.ownerDocument.createElement("div");d.className=this.baseClass+"Item";d.date=b;d.idx=a;l.create("div",{"class":this.baseClass+"ItemInner",innerHTML:c},d);1>a%this._visibleIncrement&&-1<a%this._visibleIncrement?e.add(d,this.baseClass+"Marker"):
a%this._clickableIncrement||e.add(d,this.baseClass+"Tick");this.isDisabledDate(b)&&e.add(d,this.baseClass+"ItemDisabled");this.value&&!f.compare(this.value,b,this.constraints.selector)&&(d.selected=!0,e.add(d,this.baseClass+"ItemSelected"),this._selectedDiv=d,e.contains(d,this.baseClass+"Marker")?e.add(d,this.baseClass+"MarkerSelected"):e.add(d,this.baseClass+"TickSelected"),this._highlightOption(d,!0));return d},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},
_onOptionSelected:function(a){(a=a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a)&&(this._highlighted_option=null,this.set("value",a),this.onChange(a))},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}e.toggle(a,this.baseClass+"ItemHover",b);e.contains(a,this.baseClass+"Marker")?e.toggle(a,
this.baseClass+"MarkerHover",b):e.toggle(a,this.baseClass+"TickHover",b)}},handleKey:function(a){if(a.keyCode==c.DOWN_ARROW)return this.selectNextNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==c.UP_ARROW)return this.selectPreviousNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==c.ENTER||a.keyCode===c.TAB){if(!this._keyboardSelected&&a.keyCode===c.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});return a.keyCode===c.TAB}},
onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,!1)},onClick:function(a){this._onOptionSelected({target:a})}})});
define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(g,f,n,m,k){return g("dijit.form.TimeTextBox",k,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:m,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(e){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),e.keyCode){case f.ENTER:case f.TAB:case f.ESCAPE:case f.DOWN_ARROW:case f.UP_ARROW:break;default:this.defer(function(){var e=this.get("displayedValue");
this.filterString=e&&!this.parse(e,this.constraints)?e.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()})}}})});define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(g,f,n){return g("dijit.form.ComboBox",[f,n],{})});
define(["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(g,f,n,m){var k=g("dijit.form.NumberTextBoxMixin",null,{pattern:function(e){return"("+(this.focused&&this.editOptions?this._regExpGenerator(f.delegate(e,this.editOptions))+"|":"")+this._regExpGenerator(e)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:n.format,_regExpGenerator:n.regexp,postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(e){var l=
"number"==typeof e.places?e.places:0;l&&l++;"number"!=typeof e.max&&(e.max=9*Math.pow(10,15-l));"number"!=typeof e.min&&(e.min=-9*Math.pow(10,15-l));this.inherited(arguments,[e]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(!this.disabled){var e=this.get("value");"number"!=typeof e||isNaN(e)||(e=this.format(e,this.constraints),void 0!==e&&(this.textbox.value=e));this.inherited(arguments)}},format:function(e,l){var d=String(e);if("number"!=
typeof e)return d;if(isNaN(e))return"";if(!("rangeCheck"in this&&this.rangeCheck(e,l))&&!1!==l.exponent&&/\de[-+]?\d/i.test(d))return d;this.editOptions&&this.focused&&(l=f.mixin({},l,this.editOptions));return this._formatter(e,l)},_parser:n.parse,parse:function(e,l){var d=this._parser(e,f.mixin({},l,this.editOptions&&this.focused?this.editOptions:{}));this.editOptions&&this.focused&&isNaN(d)&&(d=this._parser(e,l));return d},_getDisplayedValueAttr:function(){var e=this.inherited(arguments);return isNaN(e)?
this.textbox.value:e},filter:function(e){return null==e||""===e?NaN:this.inherited(arguments)},serialize:function(e,l){return"number"!=typeof e||isNaN(e)?"":this.inherited(arguments)},_setBlurValue:function(){var e=f.hitch(f.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(e,!0)},_setValueAttr:function(e,l,d){if(void 0!==e&&void 0===d)if(d=String(e),"number"==typeof e)if(isNaN(e))d="";else{if("rangeCheck"in this&&this.rangeCheck(e,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(d))d=
void 0}else e?e=void 0:(d="",e=NaN);this.inherited(arguments,[e,l,d])},_getValueAttr:function(){var e=this.inherited(arguments);if(isNaN(e)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+n._realNumberRegexp(f.delegate(this.constraints))+"$").test(this.textbox.value))return e=Number(this.textbox.value),isNaN(e)?void 0:e}else return e},isValid:function(e){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);
var l=this.get("value");return!isNaN(l)&&this.rangeCheck(l,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1}});g=g("dijit.form.NumberTextBox",[m,k],{baseClass:"dijitTextBox dijitNumberTextBox"});g.Mixin=k;return g});
define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(g,f,n,m){return g("dijit.form.SimpleTextarea",m,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);n("ie")&&
this.cols&&f.add(this.textbox,"dijitTextAreaCols")},filter:function(f){f&&(f=f.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(f){if(this.maxLength){var e=parseInt(this.maxLength),l=this.textbox.value.replace(/\r/g,""),e=l.length-e;if(0<e){var d=this.textbox;if(d.selectionStart){var c=d.selectionStart,b=0;n("opera")&&(b=(this.textbox.value.substring(0,c).match(/\r/g)||[]).length);this.textbox.value=l.substring(0,c-e-b)+l.substring(c-b);d.setSelectionRange(c-e,c-e)}else this.ownerDocument.selection&&
(d.focus(),l=this.ownerDocument.selection.createRange(),l.moveStart("character",-e),l.text="",l.select())}}this.inherited(arguments)}})});
define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(g,f,n,m,k,e,l){n.add("textarea-needs-help-shrinking",function(){var d=e.body(),c=f.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},
d,"last"),b=c.scrollHeight>=c.clientHeight;d.removeChild(c);return b});return g("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var d=this.textbox;d.style.overflowY="hidden";this.own(k(d,"focus, resize",m.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(l.on("resize",m.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(d){this.inherited(arguments);
this.resize()},_estimateHeight:function(){var d=this.textbox;d.rows=(d.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function d(){var a=!1;""===c.value&&(c.value=" ",a=!0);var b=c.scrollHeight;a&&(c.value="");return b}var c=this.textbox;"hidden"==c.style.overflowY&&(c.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(d()||c.offsetHeight){var b=d()+Math.max(c.offsetHeight-c.clientHeight,0),e=b+"px";e!=c.style.height&&(c.style.height=e,c.rows=
1);if(n("textarea-needs-help-shrinking")){var l=d(),f=c.style.minHeight,a=4,q=c.scrollTop;c.style.minHeight=e;for(c.style.height="auto";0<b;){c.style.minHeight=Math.max(b-a,4)+"px";e=d();l-=e;b-=l;if(l<a)break;l=e;a<<=1}c.style.height=b+"px";c.style.minHeight=f;c.scrollTop=q}c.style.overflowY=d()>c.clientHeight?"auto":"hidden";"hidden"==c.style.overflowY&&(c.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})});
define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(g,f,n,m){return g("dijit.form.Textarea",[m,n],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);f.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})});
define(["dojo/_base/declare","dojo/on","dojo/window"],function(g,f,n){return g("dijit.form._ListBase",null,{selected:null,_listConnect:function(m,k){var e=this;return e.own(f(e.containerNode,f.selector(function(e,d,c){return e.parentNode==c},m),function(l){l.preventDefault();e[k](l,this)}))},selectFirstNode:function(){for(var f=this.containerNode.firstChild;f&&"none"==f.style.display;)f=f.nextSibling;this._setSelectedAttr(f)},selectLastNode:function(){for(var f=this.containerNode.lastChild;f&&"none"==
f.style.display;)f=f.previousSibling;this._setSelectedAttr(f)},selectNextNode:function(){var f=this.selected;if(f){for(f=f.nextSibling;f&&"none"==f.style.display;)f=f.nextSibling;f?this._setSelectedAttr(f):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var f=this.selected;if(f){for(f=f.previousSibling;f&&"none"==f.style.display;)f=f.previousSibling;f?this._setSelectedAttr(f):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(f){if(this.selected!=
f){var k=this.selected;if(k)this.onDeselect(k);f&&(n.scrollIntoView(f),this.onSelect(f));this._set("selected",f)}else if(f)this.onSelect(f)}})});
define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(g,f,n,m){return g("dijit.form._ListMouseMixin",m,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this.own(f(this.domNode,"mousedown",function(f){f.preventDefault()}));this._listConnect("click","_onClick");this._listConnect(n.press,"_onMouseDown");this._listConnect(n.release,"_onMouseUp");this._listConnect(n.over,"_onMouseOver");this._listConnect(n.out,"_onMouseOut")},_onClick:function(f,e){this._setSelectedAttr(e);
this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(e)})},_onMouseDown:function(f,e){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(e)},_onMouseUp:function(f,e){this._isDragging=!1;var l=this.selected,d=this._hoveredNode;l&&e==l?this.defer(function(){this._onClick(f,l)}):d&&this.defer(function(){this._onClick(f,d)})},_onMouseOut:function(f,e){this._hoveredNode&&
(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(f,e){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=e;this.onHover(e);this._isDragging&&this._setSelectedAttr(e)}})});define({previousMessage:"Vorherige Auswahl",nextMessage:"Weitere Auswahlm\u00f6glichkeiten"});
define({root:{previousMessage:"Previous choices",nextMessage:"More choices"},zh:!0,"zh-tw":!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,ko:!0,kk:!0,ja:!0,it:!0,hu:!0,hr:!0,he:!0,fr:!0,fi:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0});
define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(g,f,n,m,k){var e=f("dijit.form._ComboBoxMenuMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=k.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},
_setValueAttr:function(e){this._set("value",e);this.onChange(e)},onClick:function(e){if(e==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(e==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(e)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(e,d){var c=this._createMenuItem(),b=d(e);b.html?c.innerHTML=b.label:c.appendChild(c.ownerDocument.createTextNode(b.label));""==c.innerHTML&&
(c.innerHTML="&#160;");return c},createOptions:function(e,d,c){this.items=e;this.previousButton.style.display=0==d.start?"none":"";n.set(this.previousButton,"id",this.id+"_prev");g.forEach(e,function(b,d){var e=this._createOption(b,c);e.setAttribute("item",d);n.set(e,"id",this.id+d);this.nextButton.parentNode.insertBefore(e,this.nextButton)},this);var b=!1;e.total&&!e.total.then&&-1!=e.total?d.start+d.count<e.total?b=!0:d.start+d.count>e.total&&d.count==e.length&&(b=!0):d.count==e.length&&(b=!0);
this.nextButton.style.display=b?"":"none";n.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var e=this.containerNode;2<e.childNodes.length;)e.removeChild(e.childNodes[e.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);
this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});m("dojo-bidi")&&(e=f("dijit.form._ComboBoxMenuMixin",e,{_createOption:function(){var e=this.inherited(arguments);this.applyTextDir(e);return e}}));return e});
define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(g,f,n,m,k,e,l,d){return g("dijit.form._ComboBoxMenu",[k,e,d,l],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(f.add(this.previousButton,"dijitMenuItemRtl"),f.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var c=this.ownerDocument.createElement("div");c.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");c.setAttribute("role","option");return c},onHover:function(c){f.add(c,"dijitMenuItemHover")},onUnhover:function(c){f.remove(c,
"dijitMenuItemHover")},onSelect:function(c){f.add(c,"dijitMenuItemSelected")},onDeselect:function(c){f.remove(c,"dijitMenuItemSelected")},_page:function(c){var b=0,d=this.domNode.scrollTop,e=n.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();b<e;){var l=this.getHighlightedOption();if(c){if(!l.previousSibling||"none"==l.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!l.nextSibling||"none"==l.nextSibling.style.display)break;this.selectNextNode()}l=
this.domNode.scrollTop;b+=(l-d)*(c?-1:1);d=l}},handleKey:function(c){switch(c.keyCode){case m.DOWN_ARROW:return this.selectNextNode(),!1;case m.PAGE_DOWN:return this._page(!1),!1;case m.UP_ARROW:return this.selectPreviousNode(),!1;case m.PAGE_UP:return this._page(!0),!1;default:return!0}}})});
define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),function(g,f,n,m,k,e,l){return g("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(d){return RegExp("^"+d.replace(/(\\.)|(\*)|(\?)|\W/g,function(c,b,d,e){return d?".*":e?".":b?b:"\\"+c})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=
this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(d){if(!this.disabled&&!this.readOnly){var c=d.charOrCode;if(!("type"in d&&"key"==d.type.substring(0,3)&&(d.altKey||(d.ctrlKey||
d.metaKey)&&"x"!=c&&"v"!=c||c==f.SHIFT))){this._prev_key_backspace=d=!1;switch(c){case f.DELETE:case f.BACKSPACE:d=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:d="string"==typeof c||229==c}if(d)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(d){this._abortQuery();var c=this,b=n.clone(this.query),l={start:0,count:this.pageSize,
queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},f=k.substitute(this.queryExpr,[d.replace(/([\\\*\?])/g,"\\$1")]),u,a=function(){var d=c._fetchHandle=c.store.query(b,l);c.disabled||c.readOnly||u!==c._lastQuery||e(d,function(f){c._fetchHandle=null;c.disabled||c.readOnly||u!==c._lastQuery||e(d.total,function(d){f.total=d;var e=c.pageSize;if(isNaN(e)||e>f.total)e=f.total;f.nextPage=function(d){l.direction=d=!1!==d;l.count=e;d?(l.start+=f.length,l.start>=f.total&&(l.count=0)):(l.start-=e,0>l.start&&
(l.count=Math.max(e+l.start,0),l.start=0));0>=l.count?(f.length=0,c.onSearch(f,b,l)):a()};c.onSearch(f,b,l)})},function(a){c._fetchHandle=null;c._cancelingQuery||console.error(c.declaredClass+" "+a.toString())})};n.mixin(l,this.fetchProperties);this.store._oldAPI?u=f:(u=this._patternToRegExp(f),u.toString=function(){return f});this._lastQuery=b[this.searchAttr]=u;this._queryDeferHandle=this.defer(a,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var d=
this.list;d&&(this.store=l.byId(d))}this.inherited(arguments)}})});
define(["../../_base/array"],function(g){return function(f,n){function m(e){e=g.filter(e,f);var l=n&&n.sort;l&&e.sort("function"==typeof l?l:function(c,b){for(var d,e=0;d=l[e];e++){var f=c[d.attribute],a=b[d.attribute];if(f!=a)return!!d.descending==(null==f||f>a)?-1:1}return 0});if(n&&(n.start||n.count)){var d=e.length;e=e.slice(n.start||0,(n.start||0)+(n.count||Infinity));e.total=d}return e}switch(typeof f){default:throw Error("Can not query with a "+typeof f);case "object":case "undefined":var k=
f;f=function(e){for(var l in k){var d=k[l];if(d&&d.test){if(!d.test(e[l],e))return!1}else if(d!=e[l])return!1}return!0};break;case "string":if(!this[f])throw Error("No filter function "+f+" was found in store");f=this[f];case "function":}m.matches=f;return m}});
define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(g,f,n){return g("dojo.store.Memory",null,{constructor:function(f){for(var k in f)this[k]=f[k];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:n,get:function(f){return this.data[this.index[f]]},getIdentity:function(f){return f[this.idProperty]},put:function(f,k){var e=this.data,l=this.index,d=this.idProperty,d=f[d]=k&&"id"in k?k.id:d in f?f[d]:Math.random();if(d in l){if(k&&!1===k.overwrite)throw Error("Object already exists");
e[l[d]]=f}else l[d]=e.push(f)-1;return d},add:function(f,k){(k=k||{}).overwrite=!1;return this.put(f,k)},remove:function(f){var k=this.index,e=this.data;if(f in k)return e.splice(k[f],1),this.setData(e),!0},query:function(m,k){return f(this.queryEngine(m,k)(this.data))},setData:function(f){f.items?(this.idProperty=f.identifier,f=this.data=f.items):this.data=f;this.index={};for(var k=0,e=f.length;k<e;k++)this.index[f[k][this.idProperty]]=k}})});
define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(g,f,n,m,k,e){function l(d){return{id:d.value,value:d.value,name:n.trim(d.innerText||d.textContent||"")}}return g("dijit.form.DataList",k,{constructor:function(d,c){this.domNode=f.byId(c);n.mixin(this,d);this.id&&e.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:m("option",this.domNode).map(l)}])},destroy:function(){e.remove(this.id)},fetchSelectedItem:function(){var d=
m("> option[selected]",this.domNode)[0]||m("> option",this.domNode)[0];return d&&l(d)}})});
define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){f=f("dijit.form._AutoCompleterMixin",p,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(b){var c=0;if("number"==typeof b.selectionStart)c=b.selectionStart;else if(d("ie")){var a=b.ownerDocument.selection.createRange().duplicate();
b=b.createTextRange();a.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",a),c=String(b.text).replace(/\r/g,"").length}catch(e){}}return c},_setCaretPos:function(c,d){d=parseInt(d);b.selectInputText(c,d,d)},_setDisabledAttr:function(b){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",b?"true":"false")},_onKey:function(b){if(!(32<=b.charCode)){var c=b.charCode||b.keyCode;if(c!=m.ALT&&c!=m.CTRL&&c!=m.META&&c!=m.SHIFT){var a=this.dropDown,d=null;this._abortQuery();
this.inherited(arguments);if(!(b.altKey||b.ctrlKey||b.metaKey))switch(this._opened&&(d=a.getHighlightedOption()),c){case m.PAGE_DOWN:case m.DOWN_ARROW:case m.PAGE_UP:case m.UP_ARROW:this._opened&&this._announceOption(d);b.stopPropagation();b.preventDefault();break;case m.ENTER:if(d){if(d==a.nextButton){this._nextSearch(1);b.stopPropagation();b.preventDefault();break}else if(d==a.previousButton){this._nextSearch(-1);b.stopPropagation();b.preventDefault();break}b.stopPropagation();b.preventDefault()}else this._setBlurValue(),
this._setCaretPos(this.focusNode,this.focusNode.value.length);case m.TAB:c=this.get("displayedValue");if(a&&(c==a._messages.previousMessage||c==a._messages.nextMessage))break;d&&this._selectOption(d);case m.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(c){var d=this.focusNode;b.selectInputText(d,d.value.length);var a=this.ignoreCase?"toLowerCase":"substr";0==c[a](0).indexOf(this.focusNode.value[a](0))?(a=this.autoComplete?this._getCaretPos(d):d.value.length,
a+1>d.value.length&&(d.value=c,b.selectInputText(d,a))):(d.value=c,b.selectInputText(d))},_openResultList:function(b,c,a){var d=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();b.length||0!=a.start?(this._nextSearch=this.dropDown.onPage=k.hitch(this,function(a){b.nextPage(-1!==a);this.focus()}),this.dropDown.createOptions(b,a,k.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in a?(a.direction?this.dropDown.highlightFirstOption():a.direction||this.dropDown.highlightLastOption(),
d&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(c[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&
(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var b=this.get("displayedValue"),c=this.dropDown;!c||b!=c._messages.previousMessage&&b!=c._messages.nextMessage?"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",b)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(b,
c,a){var d="";b&&(a||(a=this.store._oldAPI?this.store.getValue(b,this.searchAttr):b[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(b):a);this.set("value",d,c,a,b)},_announceOption:function(b){if(b){var c;if(b==this.dropDown.nextButton||b==this.dropDown.previousButton)c=b.innerHTML,this.item=void 0,this.value="";else{var a=this.dropDown.items[b.getAttribute("item")];c=(this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]).toString();this.set("item",
a,!1,c)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",n.get(b,"id"));this._autoCompleteText(c)}},_selectOption:function(b){this.closeDropDown();b&&this._announceOption(b);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=
void 0;this.inherited(arguments)},_startSearch:function(b){if(!this.dropDown){var c=this.id+"_popup";this.dropDown=new (k.isString(this.dropDownClass)?k.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:k.hitch(this,this._selectOption),id:c,dir:this.dir,textDir:this.textDir})}this._lastInput=b;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!(this.store||(this.store=new c({},this.srcNodeRef),"value"in
this.params))){var b=this.item=this.store.fetchSelectedItem();if(b){var d=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(b,d):b[d]}}},postCreate:function(){var b=e('label[for="'+this.id+'"]');b.length&&(b[0].id||(b[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",b[0].id));this.inherited(arguments);g.after(this,"onSearch",k.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(b){b=this.labelFunc(b,this.store);var c=this.labelType;"none"!=this.highlightMatch&&
"text"==this.labelType&&this._lastInput&&(b=this.doHighlight(b,this._lastInput),c="html");return{html:"html"==c,label:b}},doHighlight:function(b,c){var a=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),d=this.queryExpr.indexOf("${0}");c=l.escapeString(c);return this._escapeHtml(b.replace(RegExp((0==d?"^":"")+"("+c+")"+(d==this.queryExpr.length-4?"$":""),a),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(b){return b=
String(b).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(b,c){return(c._oldAPI?c.getValue(b,this.labelAttr||this.searchAttr):b[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(b,c,a,d){this._set("item",d||null);null==b&&(b="");this.inherited(arguments)}});d("dojo-bidi")&&f.extend({_setTextDirAttr:function(b){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",
b)}});return f});
define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(g,f,n,m,k,e,l,d,c){return g("dijit.form.ComboBoxMixin",[d,e],{dropDownClass:l,hasDownArrow:!0,templateString:c,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(b){this._set("hasDownArrow",b);this._buttonNode.style.display=b?
"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(b){b.get||m.mixin(b,{_oldAPI:!0,get:function(b){var c=new f;this.fetchItemByIdentity({identity:b,onItem:function(b){c.resolve(b)},onError:function(b){c.reject(b)}});return c.promise},query:function(b,c){var d=new f(function(){a.abort&&a.abort()});d.total=new f;var a=this.fetch(m.mixin({query:b,onBegin:function(a){d.total.resolve(a)},onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},
c));return k(d)}});this._set("store",b)},postMixInProperties:function(){var b=this.params.store||this.store;b&&this._setStoreAttr(b);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var c=this.declaredClass;m.mixin(this.store,{getValue:function(b,d){n.deprecated(c+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return b[d]},getLabel:function(b){n.deprecated(c+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly",
"","2.0");return b.name},fetch:function(b){n.deprecated(c+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],m.hitch(this,function(c){(new c({objectStore:this})).fetch(b)}))}})}}})});
define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(g,f,n,m,k){return g("dijit.form.FilteringSelect",[m,k],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(e,l,d,c){l&&l[this.searchAttr]!==this._lastQuery||!l&&e.length&&this.store.getIdentity(e[0])!=
this._lastQuery||(e.length?this.set("item",e[0],c):this.set("value","",c||void 0===c&&!this.focused,this.textbox.value,null))},_openResultList:function(e,l,d){l[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(e,l,d,c){this._onChangeActive||(l=null);if(void 0===c){if(null===e||""===e)if(e="",!f.isString(d)){this._setDisplayedValueAttr(d||
"",l);return}var b=this;this._lastQuery=e;n(this.store.get(e),function(c){b._callbackSetLabel(c?[c]:[],void 0,void 0,l)})}else this.valueNode.value=e,this.inherited(arguments)},_setItemAttr:function(e,l,d){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(e){return e.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(e,l){null==e&&(e="");if(!this._created){if(!("displayedValue"in this.params))return;l=!1}if(this.store){this.closeDropDown();
var d=f.clone(this.query),c=this._getDisplayQueryString(e),b;this.store._oldAPI?b=c:(b=this._patternToRegExp(c),b.toString=function(){return c});this._lastQuery=d[this.searchAttr]=b;this._lastDisplayedValue=this.textbox.value=e;this._set("displayedValue",e);var p=this,r={ignoreCase:this.ignoreCase,deep:!0};f.mixin(r,this.fetchProperties);this._fetchHandle=this.store.query(d,r);n(this._fetchHandle,function(b){p._fetchHandle=null;p._callbackSetLabel(b||[],d,r,l)},function(b){p._fetchHandle=null;p._cancelingQuery||
console.error("dijit.form.FilteringSelect: "+b.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})});
define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(g,f,n,m,k,e,l,d){return g("dijit.form.Form",[k,e,l,d],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",postMixInProperties:function(){this.nameAttrSetting=
this.name?"name='"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(c){f.set(this.domNode,"encType",c);m("ie")&&(this.domNode.encoding=c);this._set("encType",c)},reset:function(c){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:c?c.target:this.domNode,target:c?c.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},
_onReset:function(c){this.reset(c);c.stopPropagation();c.preventDefault();return!1},_onSubmit:function(c){var b=this.constructor.prototype;if(this.execute!=b.execute||this.onExecute!=b.onExecute)n.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(c)&&(c.stopPropagation(),c.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})});
define({invalidMessage:"Der eingegebene Wert ist ung\u00fcltig. ",missingMessage:"Dieser Wert ist erforderlich.",rangeMessage:"Dieser Wert liegt au\u00dferhalb des g\u00fcltigen Bereichs. "});
define({root:{invalidMessage:"The value entered is not valid.",missingMessage:"This value is required.",rangeMessage:"This value is out of range."},zh:!0,"zh-tw":!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,ko:!0,kk:!0,ja:!0,it:!0,hu:!0,hr:!0,he:!0,fr:!0,fi:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0});
define("dojo/_base/declare dojo/_base/kernel dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(g,f,n,m,k,e){var l;return l=g("dijit.form.ValidationTextBox",m,{templateString:e,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(d,c){c!=l.prototype[d]&&(f.deprecated("ValidationTextBox id="+
this.id+", set('"+d+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(d){this._deprecateRegExp("regExpGen",d);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(d){this._deprecateRegExp("regExp",d)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(d,c){return RegExp("^(?:"+this._computeRegexp(c)+")"+(this.required?"":"?")+"$").test(d)&&(!this.required||!this._isEmpty(d))&&
(this._isEmpty(d)||void 0!==this.parse(d,c))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(d){return(this.trim?/^\s*$/:/^$/).test(d)},getErrorMessage:function(){var d="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,c="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?
this.missingMessage:d;return this.required&&this._isEmpty(this.textbox.value)?c:d},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(d){var c="",b=this.disabled||this.isValid(d);b&&(this._maskValidSubsetError=!0);var e=this._isEmpty(this.textbox.value),l=!b&&d&&this._isValidSubset();this._set("state",b?"":((!this._hasBeenBlurred||d)&&e||l)&&(this._maskValidSubsetError||l&&!this._hasBeenBlurred&&d)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",
b?"false":"true");"Error"==this.state?(this._maskValidSubsetError=d&&l,c=this.getErrorMessage(d)):"Incomplete"==this.state?(c=this.getPromptMessage(d),this._maskValidSubsetError=!this._hasBeenBlurred||d):e&&(c=this.getPromptMessage(d));this.set("message",c);return b},displayMessage:function(d){d&&this.focused?k.show(d,this.domNode,this.tooltipPosition,!this.isLeftToRight()):k.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(d){this.constraints=
{};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(d){!d.locale&&this.lang&&(d.locale=this.lang);this._set("constraints",d);this._refreshState()},_setPatternAttr:function(d){this._set("pattern",d)},_computeRegexp:function(d){var c=this.pattern;"function"==typeof c&&(c=c.call(this,d));if(c!=this._lastRegExp){var b="";this._lastRegExp=c;".*"!=c&&c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(c){switch(c.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":b+=
c;break;case ")":b+="|$)";break;default:b+="(?:"+c+"|$)"}});try{"".search(b)}catch(e){b=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+b+")$"}return c},postMixInProperties:function(){this.inherited(arguments);this.messages=n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(d){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(d){this._set("required",
d);this.focusNode.setAttribute("aria-required",d);this._refreshState()},_setMessageAttr:function(d){this._set("message",d);this.displayMessage(d)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}})});
define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(g,f,n,m){return g("dijit.form.MappedTextBox",m,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(f){return f.toString?f.toString():""},toString:function(){var f=this.filter(this.get("value"));return null!=f?"string"==typeof f?f:this.serialize(f,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},
buildRendering:function(){this.inherited(arguments);this.valueNode=n.place("<input type='hidden'"+(this.name&&!f("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})});
define(["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(g,f,n){return g("dijit.form.RangeBoundTextBox",n,{rangeMessage:"",rangeCheck:function(f,k){return("min"in k?0<=this.compare(f,k.min):!0)&&("max"in k?0>=this.compare(f,k.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var f=this.get("value");if(null==f)return!1;var k=!1;"min"in this.constraints&&(k=this.constraints.min,k=0>this.compare(f,"number"==typeof k&&
0<=k&&0!=f?0:k));!k&&"max"in this.constraints&&(k=this.constraints.max,k=0<this.compare(f,"number"!=typeof k||0<k?k:0));return k},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(f){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(f))},getErrorMessage:function(f){var k=this.get("value");return null==k||""===k||"number"==typeof k&&isNaN(k)||this.isInRange(f)?this.inherited(arguments):this.rangeMessage},
postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=f.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})});
define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(g,f,n,m,k,e,l,d){new Date("X");return m("dijit.form._DateTimeTextBox",[e,l],{templateString:d,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:f.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(c,b){var d=this._isInvalidDate(c),
e=this._isInvalidDate(b);return d?e?0:-1:e?1:g.compare(c,b,this._selector)},autoWidth:!0,format:function(c,b){return c?this.dateLocaleModule.format(c,b):""},parse:function(c,b){return this.dateLocaleModule.parse(c,b)||(this._isEmpty(c)?null:void 0)},serialize:function(c,b){c.toGregorian&&(c=c.toGregorian());return n.toISOString(c,b)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){this.dateModule=c.datePackage?k.getObject(c.datePackage,
!1):g;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=c.datePackage?k.getObject(c.datePackage+".locale",!1):f;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(c){c.selector=this._selector;
c.fullYear=!0;var b=n.fromISOString;"string"==typeof c.min&&(c.min=b(c.min));"string"==typeof c.max&&(c.max=b(c.max));this.inherited(arguments)},_isInvalidDate:function(c){return!c||isNaN(c)||"object"!=typeof c||c.toString()==this._invalidDate},_setValueAttr:function(c,b,d){void 0!==c&&("string"==typeof c&&(c=n.fromISOString(c)),this._isInvalidDate(c)&&(c=null),c instanceof Date&&!(this.dateClassObj instanceof Date)&&(c=new this.dateClassObj(c)));this.inherited(arguments);this.value instanceof Date&&
(this.filterString="");this.dropDown&&this.dropDown.set("value",c,!1)},_set:function(c,b){var d=this._get("value");"value"==c&&d instanceof Date&&0==this.compare(b,d)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(c){this._isInvalidDate(c)&&(c=new this.dateClassObj);this._set("dropDownDefaultValue",c)},openDropDown:function(c){this.dropDown&&this.dropDown.destroy();var b=k.isString(this.popupClass)?k.getObject(this.popupClass,!1):this.popupClass,d=this,e=this.get("value");this.dropDown=
new b({onChange:function(b){d.set("value",b,!0)},id:this.id+"_popup",dir:d.dir,lang:d.lang,value:e,textDir:d.textDir,currentFocus:this._isInvalidDate(e)?this.dropDownDefaultValue:e,constraints:d.constraints,filterString:d.filterString,datePackage:d.params.datePackage,isDisabledDate:function(b){return!d.rangeCheck(b,d.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(c,b){this._setValueAttr(this.parse(c,this.constraints),
b,c)}})});
define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q){var t=f("dijit.CalendarLite",[u,a],{templateString:q,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',
weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<
a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=e.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,
0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var b=a.getDay(),c=this.dateModule.getDaysInMonth(a),d=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),e=new this.dateClassObj,l=n.getFirstDayOfWeek(this.lang);l>b&&(l-=7);if(!this.summary){var f=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,
a);this.gridNode.setAttribute("summary",f[a.getMonth()])}this._date2cell={};g.forEach(this.dateCells,function(f,p){var q=p+l,t=new this.dateClassObj(a),r="dijitCalendar",k=0;q<b?(q=d-b+q+1,k=-1,r+="Previous"):q>=b+c?(q=q-b-c+1,k=1,r+="Next"):(q=q-b+1,r+="Current");k&&(t=this.dateModule.add(t,"month",k));t.setDate(q);this.dateModule.compare(t,e,"date")||(r="dijitCalendarCurrentDate "+r);this.isDisabledDate(t,this.lang)?(r="dijitCalendarDisabledDate "+r,f.setAttribute("aria-disabled","true")):(r="dijitCalendarEnabledDate "+
r,f.removeAttribute("aria-disabled"),f.setAttribute("aria-selected","false"));(k=this.getClassForDate(t,this.lang))&&(r=k+" "+r);f.className=r+"Month dijitCalendarDateTemplate";r=t.valueOf();this._date2cell[r]=f;f.dijitDateValue=r;this._setText(this.dateLabels[p],t.getDateLocalized?t.getDateLocalized(this.lang):t.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;
g.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?c.getObject(a.datePackage,!1):m;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?c.getObject(a.datePackage+".locale",!1):k},_createMonthWidget:function(){return t._MonthWidget({id:this.id+
"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=n.getFirstDayOfWeek(this.lang);this.dayCellsHtml=r.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=r.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);
l.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=c.hitch(this,function(a,d,e){return b(this[a],"click",c.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,d,e))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode",
"year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c);a=this._patchDate(a);this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(c,a,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();d&&d!=c&&(p("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},
focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!d.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,c){d.toggle(c,"dijitCalendarSelectedDate",a);c.setAttribute("aria-selected",a?"true":
"false")}g.forEach(this._selectedCells||[],c.partial(b,!1));this._selectedCells=g.filter(g.map(a,this._getNodeByDate,this),function(a){return a});g.forEach(this._selectedCells,c.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});t._MonthWidget=f("dijit.CalendarLite._MonthWidget",u,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),c=6==p("ie")?"":"<div class='dijitSpacer'>"+g.map(b,function(a){return"<div>"+
a+"</div>"}).join("")+"</div>";this.domNode.innerHTML=c+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});return t});
define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){var v=m("dijit.Calendar",[r,u,a],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},
setValue:function(a){l.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new v._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:c.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(b(this.domNode,"keydown",c.hitch(this,"_onKeyDown")),b(this.dateRowsNode,"mouseover",c.hitch(this,
"_onDayMouseOver")),b(this.dateRowsNode,"mouseout",c.hitch(this,"_onDayMouseOut")),b(this.dateRowsNode,"mousedown",c.hitch(this,"_onDayMouseDown")),b(this.dateRowsNode,"mouseup",c.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){(a=e.contains(a.target,"dijitCalendarDateLabel")?
a.target.parentNode:a.target)&&(a.dijitDateValue&&!e.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(e.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",e.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),e.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=
a.target.parentNode)&&a.dijitDateValue&&!e.contains(a,"dijitCalendarDisabledDate")&&(e.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&e.remove(a,"dijitCalendarActiveDate")},handleKey:function(a){var b=-1,c,e=this.currentFocus;switch(a.keyCode){case d.RIGHT_ARROW:b=1;case d.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case d.DOWN_ARROW:b=1;case d.UP_ARROW:c="week";break;case d.PAGE_DOWN:b=1;case d.PAGE_UP:c=a.ctrlKey||
a.altKey?"year":"month";break;case d.END:e=this.dateModule.add(e,"month",1),c="day";case d.HOME:e=new this.dateClassObj(e);e.setDate(1);break;default:return!0}c&&(e=this.dateModule.add(e,c,b));this._setCurrentFocusAttr(e);return!1},_onKeyDown:function(a){this.handleKey(a)||(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});v._MonthDropDownButton=m("dijit.Calendar._MonthDropDownButton",t,{onMonthSelect:function(){},
postCreate:function(){this.inherited(arguments);this.dropDown=new v._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",b);this.containerNode.innerHTML=(6==p("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});v._MonthDropDown=m("dijit.Calendar._MonthDropDown",
[u,q],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(a){this.domNode.innerHTML=g.map(a,function(a,b){return a?"<div class='dijitCalendarMonthLabel' month='"+b+"'>"+a+"</div>":""}).join("")},_onClick:function(a){this.onChange(k.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){e.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==
a.type)}});return v});define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(g,f,n){return g("dijit.form.DateTextBox",n,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:f,_selector:"date",maxHeight:Infinity,value:new Date("")})});
define("dojo/_base/array dojo/_base/declare dojo/dom dojo/has dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(g,f,n,m,k,e,l,d){var c=f("dijit.form._TextBoxMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(b,c,d){var e;void 0!==b&&(e=this.filter(b),"string"!=typeof d&&(d=null===e||"number"==
typeof e&&isNaN(e)?"":this.filter(this.format(e,this.constraints))));null==d||"number"==typeof d&&isNaN(d)||this.textbox.value==d||(this.textbox.value=d,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[e,c])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(b){null==b?b="":"string"!=typeof b&&(b=String(b));this.textbox.value=b;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",
this.get("displayedValue"))},format:function(b){return null==b?"":b.toString?b.toString():b},parse:function(b){return b},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(b){this._processInput(b);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(b){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);
this.inherited(arguments);this.own(l(this.textbox,"keydown, keypress, paste, cut, input, compositionend",e.hitch(this,function(b){var c;if("keydown"==b.type){c=b.keyCode;switch(c){case k.SHIFT:case k.ALT:case k.CTRL:case k.META:case k.CAPS_LOCK:case k.NUM_LOCK:case k.SCROLL_LOCK:return}if(!b.ctrlKey&&!b.metaKey&&!b.altKey){switch(c){case k.NUMPAD_0:case k.NUMPAD_1:case k.NUMPAD_2:case k.NUMPAD_3:case k.NUMPAD_4:case k.NUMPAD_5:case k.NUMPAD_6:case k.NUMPAD_7:case k.NUMPAD_8:case k.NUMPAD_9:case k.NUMPAD_MULTIPLY:case k.NUMPAD_PLUS:case k.NUMPAD_ENTER:case k.NUMPAD_MINUS:case k.NUMPAD_PERIOD:case k.NUMPAD_DIVIDE:return}if(65<=
c&&90>=c||48<=c&&57>=c||c==k.SPACE)return;c=!1;for(var d in k)if(k[d]===b.keyCode){c=!0;break}if(!c)return}}(c=32<=b.charCode?String.fromCharCode(b.charCode):b.charCode)||(c=65<=b.keyCode&&90>=b.keyCode||48<=b.keyCode&&57>=b.keyCode||b.keyCode==k.SPACE?String.fromCharCode(b.keyCode):b.keyCode);c||(c=229);if("keypress"==b.type){if("string"!=typeof c)return;if("a"<=c&&"z">=c||"A"<=c&&"Z">=c||"0"<=c&&"9">=c||" "===c)if(b.ctrlKey||b.metaKey||b.altKey)return}if("input"==b.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var l={faux:!0},a;for(a in b)"layerX"!=a&&"layerY"!=a&&(d=b[a],"function"!=typeof d&&"undefined"!=typeof d&&(l[a]=d));e.mixin(l,{charOrCode:c,_wasConsumed:!1,preventDefault:function(){l._wasConsumed=!0;b.preventDefault()},stopPropagation:function(){b.stopPropagation()}});!1===this.onInput(l)&&(l.preventDefault(),l.stopPropagation());l._wasConsumed||(this.defer(function(){this._onInput(l)}),"keypress"==b.type&&b.stopPropagation())})))},_blankValue:"",filter:function(b){if(null===
b)return this._blankValue;if("string"!=typeof b)return b;this.trim&&(b=e.trim(b));this.uppercase&&(b=b.toUpperCase());this.lowercase&&(b=b.toLowerCase());this.propercase&&(b=b.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}));return b},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(b){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},
_onFocus:function(b){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==b&&(this._selectOnClickHandle=l.once(this.domNode,"mouseup, touchend",e.hitch(this,function(b){this._isTextSelected()||c.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});
m("dojo-bidi")&&(c=f("dijit.form._TextBoxMixin",c,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));c._setSelectionRange=d._setSelectionRange=function(b,c,d){b.setSelectionRange&&b.setSelectionRange(c,d)};c.selectInputText=d.selectInputText=function(b,d,e){b=n.byId(b);isNaN(d)&&(d=0);
isNaN(e)&&(e=b.value?b.value.length:0);try{b.focus(),c._setSelectionRange(b,d,e)}catch(l){}};return c});
define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){d=g("dijit.form.TextBox"+(l("dojo-bidi")?"_NoBidi":""),[d,c],{templateString:b,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:l("ie")?
"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var b=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==b||"file"==b)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>l("ie")&&this.defer(function(){try{var b=n.getComputedStyle(this.domNode);if(b){var c=b.fontFamily;if(c){var a=this.domNode.getElementsByTagName("INPUT");
if(a)for(b=0;b<a.length;b++)a[b].style.fontFamily=c}}}catch(d){}})},_setPlaceHolderAttr:function(b){this._set("placeHolder",b);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=f.create("span",{onmousedown:function(b){b.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(e(this._phspan,"touchend, MSPointerUp",k.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(b));
this._updatePlaceHolder()},_onInput:function(b){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(b,c,a){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){m.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){m.deprecated(this.declaredClass+
"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",b)},_onBlur:function(b){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),l("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(b){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});l("ie")&&(d.prototype._isTextSelected=function(){var b=this.ownerDocument.selection.createRange();
return b.parentElement()==this.textbox&&0<b.text.length},p._setSelectionRange=c._setSelectionRange=function(b,c,a){b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveStart("character",-99999),b.moveStart("character",c),b.moveEnd("character",a-c),b.select())});l("dojo-bidi")&&(d=g("dijit.form.TextBox",d,{_setPlaceHolderAttr:function(b){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return d});
define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),function(g,f,n,m,k,e,l,d){return f("dijit.ProgressBar",[e,l],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:d,_indeterminateHighContrastImagePath:g.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);this.params&&"value"in this.params||(this.value=
this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update()},_setDirAttr:function(c){n.toggle(this.domNode,"dijitProgressBarRtl","rtl"==c);this.inherited(arguments)},update:function(c){m.mixin(this,c||{});c=this.internalProgress;var b=this.domNode,d=1;this.indeterminate?b.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?
(d=Math.min(parseFloat(this.progress)/100,1),this.progress=d*this.maximum):(this.progress=Math.min(this.progress,this.maximum),d=this.maximum?this.progress/this.maximum:0),b.setAttribute("aria-valuenow",this.progress));b.setAttribute("aria-labelledby",this.labelNode.id);b.setAttribute("aria-valuemin",0);b.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(d);n.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);c.style.width=100*d+"%";this.onChange()},
_setValueAttr:function(c){this._set("value",c);Infinity==c?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:c})},_setLabelAttr:function(c){this._set("label",c);this.update()},_setIndeterminateAttr:function(c){this._set("indeterminate",c);this.update()},report:function(c){return this.label?this.label:this.indeterminate?"&#160;":k.format(c,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})});
define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(g,f,n,m,k,e,l,d){n("dijit-legacy-requires")&&k(0,function(){g(["dijit/ToolbarSeparator"])});return f("dijit.Toolbar",[e,d,l],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})});
define(["../has","../_base/kernel"],function(g,f){var n=document.createElement("div"),m=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector,k=n.querySelectorAll,e=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;g.add("dom-matches-selector",!!m);g.add("dom-qsa",!!k);var l=function(e,r){if(b&&-1<e.indexOf(","))return b(e,r);var u=r?r.ownerDocument||r:f.doc||document,a=(k?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(e);
r=r||u;if(a){if(a[2]){var q=f.byId?f.byId(a[2],u):u.getElementById(a[2]);if(!q||a[1]&&a[1]!=q.tagName.toLowerCase())return[];if(r!=u)for(u=q;u!=r;)if(u=u.parentNode,!u)return[];return a[3]?l(a[3],q):[q]}if(a[3]&&r.getElementsByClassName)return r.getElementsByClassName(a[4]);if(a[5])if(q=r.getElementsByTagName(a[5]),a[4]||a[6])e=(a[4]||"")+a[6];else return q}if(k)return 1===r.nodeType&&"object"!==r.nodeName.toLowerCase()?d(r,e,r.querySelectorAll):r.querySelectorAll(e);q||(q=r.getElementsByTagName("*"));
for(var a=[],u=0,t=q.length;u<t;u++){var v=q[u];1==v.nodeType&&c(v,e,r)&&a.push(v)}return a},d=function(b,c,d){var a=b,l=b.getAttribute("id"),f=l||"__dojo__",k=b.parentNode,m=/^\s*[+~]/.test(c);if(m&&!k)return[];l?f=f.replace(/'/g,"\\$&"):b.setAttribute("id",f);m&&k&&(b=b.parentNode);c=c.match(e);for(k=0;k<c.length;k++)c[k]="[id='"+f+"'] "+c[k];c=c.join(",");try{return d.call(b,c)}finally{l||a.removeAttribute("id")}};if(!g("dom-matches-selector"))var c=function(){function b(a,c,d){var e=c.charAt(0);
if('"'==e||"'"==e)c=c.slice(1,-1);c=c.replace(/\\/g,"");var l=f[d||""];return function(b){return(b=b.getAttribute(a))&&l(b,c)}}function c(a){return function(b,c){for(;(b=b.parentNode)!=c;)if(a(b,c))return!0}}function d(a){return function(b,c){b=b.parentNode;return a?b!=c&&a(b,c):b==c}}function a(a,b){return a?function(c,d){return b(c)&&a(c,d)}:b}var e="div"==n.tagName?"toLowerCase":"toUpperCase",l={"":function(a){a=a[e]();return function(b){return b.tagName==a}},".":function(a){var b=" "+a+" ";return function(c){return-1<
c.className.indexOf(a)&&-1<(" "+c.className+" ").indexOf(b)}},"#":function(a){return function(b){return b.id==a}}},f={"^=":function(a,b){return 0==a.indexOf(b)},"*=":function(a,b){return-1<a.indexOf(b)},"$=":function(a,b){return a.substring(a.length-b.length,a.length)==b},"~=":function(a,b){return-1<(" "+a+" ").indexOf(" "+b+" ")},"|=":function(a,b){return 0==(a+"-").indexOf(b+"-")},"=":function(a,b){return a==b},"":function(a,b){return!0}},k={};return function(e,f,q){var v=k[f];if(!v){if(f.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,
function(e,f,q,k,m,g,x){k?v=a(v,l[q||""](k.replace(/\\/g,""))):f?v=(" "==f?c:d)(v):m&&(v=a(v,b(m,x,g)));return""}))throw Error("Syntax error in query");if(!v)return!0;k[f]=v}return v(e,q)}}();if(!g("dom-qsa"))var b=function(b,c){for(var d=b.match(e),a=[],f=0;f<d.length;f++){b=new String(d[f].replace(/\s*$/,""));b.indexOf=escape;for(var t=l(b,c),k=0,m=t.length;k<m;k++){var g=t[k];a[g.sourceIndex]=g}}d=[];for(f in a)d.push(a[f]);return d};l.match=m?function(b,c,e){return e&&9!=e.nodeType?d(e,c,function(a){return m.call(b,
a)}):m.call(b,c)}:c;return l});
define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(g,f,n,m,k,e){return f("dijit.tree._dndContainer",null,{constructor:function(l,d){this.tree=l;this.node=l.domNode;m.mixin(this,d);this.containerState="";n.add(this.node,"dojoDndContainer");this.events=[k(this.node,e.enter,m.hitch(this,"onOverEvent")),k(this.node,e.leave,m.hitch(this,"onOutEvent")),g.after(this.tree,"_onNodeMouseEnter",m.hitch(this,"onMouseOver"),!0),g.after(this.tree,"_onNodeMouseLeave",
m.hitch(this,"onMouseOut"),!0),k(this.node,"dragstart, selectstart",function(c){c.preventDefault()})]},destroy:function(){for(var e;e=this.events.pop();)e.remove();this.node=this.parent=null},onMouseOver:function(e){this.current=e},onMouseOut:function(){this.current=null},_changeState:function(e,d){var c="dojoDnd"+e,b=e.toLowerCase()+"State";n.replace(this.node,c+d,c+this[b]);this[b]=d},_addItemClass:function(e,d){n.add(e,"dojoDndItem"+d)},_removeItemClass:function(e,d){n.remove(e,"dojoDndItem"+d)},
onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})});
define("dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){return n("dijit.tree._dndSelector",p,{constructor:function(){this.selection={};this.anchor=null;this.events.push(d(this.tree.domNode,c.press,k.hitch(this,"onMouseDown")),d(this.tree.domNode,c.release,k.hitch(this,"onMouseUp")),d(this.tree.domNode,c.move,k.hitch(this,"onMouseMove")),d(this.tree.domNode,
b.press,k.hitch(this,"onClickPress")),d(this.tree.domNode,b.release,k.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],c=this.selection,a;for(a in c)b.push(c[a]);return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(b,c){this.setSelection(this.getSelectedTreeNodes().concat([b]));c&&(this.anchor=b);return b},removeTreeNode:function(b){var c=g.filter(this.getSelectedTreeNodes(),
function(a){return!e.isDescendant(a.domNode,b.domNode)});this.setSelection(c);return b},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},setSelection:function(b){var c=this.getSelectedTreeNodes();g.forEach(this._setDifference(c,b),k.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));g.forEach(this._setDifference(b,c),k.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(b,
c){g.forEach(c,function(a){a.__exclude__=!0});var a=g.filter(b,function(a){return!a.__exclude__});g.forEach(c,function(a){delete a.__exclude__});return a},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),c=[],a=[],d=[];g.forEach(b,function(b){var e=b.getTreePath(),l=this.tree.model;a.push(b);c.push(e);e=g.map(e,function(a){return l.getIdentity(a)},this);d.push(e.join("/"))},this);b=g.map(a,function(a){return a.item});this.tree._set("paths",c);this.tree._set("path",c[0]||[]);
this.tree._set("selectedNodes",a);this.tree._set("selectedNode",a[0]||null);this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,this.current))){l.isLeft(b)&&b.preventDefault();var c="keydown"==b.type?this.tree.focusedChild:this.current;if(c){var a=f.isCopyKey(b),d=c.id;this.singular||b.shiftKey||!this.selection[d]?(this._doDeselect=!1,this.userSelect(c,a,b.shiftKey)):this._doDeselect=
!0}}},onClickRelease:function(b){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,f.isCopyKey(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(b,c){if(b===c)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-c.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(c)&2?1:-1;if(document.createRange){var a=
doc.createRange();a.setStartBefore(b);var d=doc.createRange();d.setStartBefore(c);return a.compareBoundaryPoints(a.END_TO_END,d)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(b,c,a){if(this.singular)this.anchor==b&&c?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(a&&this.anchor){c=this._compareNodes(this.anchor.rowNode,b.rowNode);a=this.anchor;0>c?c=a:(c=b,b=a);for(a=[];c!=b;)a.push(c),c=this.tree._getNext(c);
a.push(b);this.setSelection(a)}else this.selection[b.id]&&c?this.removeTreeNode(b):c?this.addTreeNode(b,!0):(this.setSelection([b]),this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,c){c=c||m.global;for(var a in this.selection)b.call(c,this.getItem(a),a,this)}})});
define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(g,f,n,m,k){return f("dijit.tree.ForestStoreModel",k,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(e){this.root={store:this,root:!0,id:e.rootId,label:e.rootLabel,children:e.rootChildren}},mayHaveChildren:function(e){return e===this.root||this.inherited(arguments)},getChildren:function(e,l,d){e===this.root?this.root.children?l(this.root.children):this.store.fetch({query:this.query,
onComplete:m.hitch(this,function(c){this.root.children=c;l(c)}),onError:d}):this.inherited(arguments)},isItem:function(e){return e===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(e){if(e.identity==this.root.id){var l=e.scope||n.global;e.onItem&&e.onItem.call(l,this.root)}else this.inherited(arguments)},getIdentity:function(e){return e===this.root?this.root.id:this.inherited(arguments)},getLabel:function(e){return e===this.root?this.root.label:this.inherited(arguments)},newItem:function(e,
l,d){return l===this.root?(this.onNewRootItem(e),this.store.newItem(e)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(e,l,d,c,b){if(l===this.root&&!c)this.onLeaveRoot(e);this.inherited(arguments,[e,l===this.root?null:l,d===this.root?null:d,c,b]);if(d===this.root)this.onAddToRoot(e)},onAddToRoot:function(e){console.log(this,": item ",e," added to root")},onLeaveRoot:function(e){console.log(this,": item ",e," removed from root")},_requeryTop:function(){var e=this.root.children||
[];this.store.fetch({query:this.query,onComplete:m.hitch(this,function(l){this.root.children=l;if(e.length!=l.length||g.some(e,function(d,c){return l[c]!=d}))this.onChildrenChange(this.root,l)})})},onNewItem:function(e,l){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(e){-1!=g.indexOf(this.root.children,e)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(e,l,d,c){this._requeryTop();this.inherited(arguments)}})});
define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(g,f,n,m){return n("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(k){m.mixin(this,k);this.connects=[];k=this.store;if(!k.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");k.getFeatures()["dojo.data.api.Notification"]&&
(this.connects=this.connects.concat([f.after(k,"onNew",m.hitch(this,"onNewItem"),!0),f.after(k,"onDelete",m.hitch(this,"onDeleteItem"),!0),f.after(k,"onSet",m.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var f;f=this.connects.pop();)f.remove()},getRoot:function(f,e){this.root?f(this.root):this.store.fetch({query:this.query,onComplete:m.hitch(this,function(e){if(1!=e.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+e.length+" items, but must return exactly one");this.root=
e[0];f(this.root)}),onError:e})},mayHaveChildren:function(f){return g.some(this.childrenAttrs,function(e){return this.store.hasAttribute(f,e)},this)},getChildren:function(f,e,l){var d=this.store;if(d.isItemLoaded(f)){for(var c=[],b=0;b<this.childrenAttrs.length;b++)var p=d.getValues(f,this.childrenAttrs[b]),c=c.concat(p);var r=0;this.deferItemLoadingUntilExpand||g.forEach(c,function(a){d.isItemLoaded(a)||r++});0==r?e(c):g.forEach(c,function(a,b){d.isItemLoaded(a)||d.loadItem({item:a,onItem:function(a){c[b]=
a;0==--r&&e(c)},onError:l})})}else{var u=m.hitch(this,arguments.callee);d.loadItem({item:f,onItem:function(a){u(a,e,l)},onError:l})}},isItem:function(f){return this.store.isItem(f)},fetchItemByIdentity:function(f){this.store.fetchItemByIdentity(f)},getIdentity:function(f){return this.store.getIdentity(f)},getLabel:function(f){return this.labelAttr?this.store.getValue(f,this.labelAttr):this.store.getLabel(f)},newItem:function(f,e,l){var d={parent:e,attribute:this.childrenAttrs[0]},c;this.newItemIdAttr&&
f[this.newItemIdAttr]?this.fetchItemByIdentity({identity:f[this.newItemIdAttr],scope:this,onItem:function(b){b?this.pasteItem(b,null,e,!0,l):(c=this.store.newItem(f,d))&&void 0!=l&&this.pasteItem(c,e,e,!1,l)}}):(c=this.store.newItem(f,d))&&void 0!=l&&this.pasteItem(c,e,e,!1,l)},pasteItem:function(f,e,l,d,c){var b=this.store,p=this.childrenAttrs[0];e&&g.forEach(this.childrenAttrs,function(c){if(b.containsValue(e,c,f)){if(!d){var a=g.filter(b.getValues(e,c),function(a){return a!=f});b.setValues(e,c,
a)}p=c}});if(l)if("number"==typeof c){var r=b.getValues(l,p).slice();r.splice(c,0,f);b.setValues(l,p,r)}else b.setValues(l,p,b.getValues(l,p).concat(f))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(f,e){e&&this.getChildren(e.item,m.hitch(this,function(f){this.onChildrenChange(e.item,f)}))},onDeleteItem:function(f){this.onDelete(f)},onSetItem:function(f,e){if(-1!=g.indexOf(this.childrenAttrs,e))this.getChildren(f,m.hitch(this,function(e){this.onChildrenChange(f,
e)}));else this.onChange(f)}})});
define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){n.isAsync||b(0,function(){p(["./fx/Toggler"])});n=n.fx={};b={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var r=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;m.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&
(this.duration+=a.delay)},this)};r.prototype=new f;g.extend(r,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=k.after(this._current,"onAnimate",g.hitch(this,"_onAnimate"),!0),this._onEndCtx=k.after(this._current,"onEnd",g.hitch(this,"_onEnd"),!0),this._current.play(0,
!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var c=k.after(this._current,"beforeBegin",g.hitch(this,function(){this._fire("beforeBegin")}),!0),d=k.after(this._current,"onBegin",g.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),e=k.after(this._current,"onPlay",g.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();d.remove();e.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();
this._onAnimateCtx=k.after(this._current,"onAnimate",g.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=k.after(this._current,"onEnd",g.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=k.after(this._current,"onPause",g.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;
this._current=null;m.some(this._animations,function(a){if(a.duration<=c)return this._current=a,!0;c-=a.duration;return!1});this._current&&this._current.gotoPercent(c/this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=k.after(this._current,"onStop",g.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},
status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});g.extend(r,b);n.chain=function(a){return new r(a)};var u=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;m.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(k.after(a,"onEnd",g.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=
new e.Animation({curve:[0,1],duration:this.duration});var b=this;m.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){b._connects.push(k.after(b._pseudoAnimation,a,function(){b._fire(a,arguments)},!0))})};g.extend(u,{_doAction:function(a,b){m.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,
b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;m.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},
destroy:function(){m.forEach(this._connects,function(a){a.remove()})}});g.extend(u,b);n.combine=function(a){return new u(a)};n.wipeIn=function(a){var b=a.node=l.byId(a.node),c=b.style,f;a=e.animateProperty(g.mixin({properties:{height:{start:function(){f=c.overflow;c.overflow="hidden";if("hidden"==c.visibility||"none"==c.display)return c.height="1px",c.display="",c.visibility="",1;var a=d.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a));var p=function(){c.height="auto";
c.overflow=f};k.after(a,"onStop",p,!0);k.after(a,"onEnd",p,!0);return a};n.wipeOut=function(a){var b=(a.node=l.byId(a.node)).style,c;a=e.animateProperty(g.mixin({properties:{height:{end:1}}},a));k.after(a,"beforeBegin",function(){c=b.overflow;b.overflow="hidden";b.display=""},!0);var d=function(){b.overflow=c;b.height="auto";b.display="none"};k.after(a,"onStop",d,!0);k.after(a,"onEnd",d,!0);return a};n.slideTo=function(a){var b=null,f=null,p=function(a){return function(){var e=d.getComputedStyle(a),
l=e.position;b="absolute"==l?a.offsetTop:parseInt(e.top)||0;f="absolute"==l?a.offsetLeft:parseInt(e.left)||0;"absolute"!=l&&"relative"!=l&&(e=c.position(a,!0),b=e.y,f=e.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=f+"px")}}(a.node=l.byId(a.node));p();a=e.animateProperty(g.mixin({properties:{top:a.top||0,left:a.left||0}},a));k.after(a,"beforeBegin",p,!0);return a};return n});
define(["./_base/kernel","./regexp"],function(g,f){g.cookie=function(g,m,k){var e=document.cookie,l;if(1==arguments.length)l=(l=e.match(RegExp("(?:^|; )"+f.escapeString(g)+"=([^;]*)")))?decodeURIComponent(l[1]):void 0;else{k=k||{};e=k.expires;if("number"==typeof e){var d=new Date;d.setTime(d.getTime()+864E5*e);e=k.expires=d}e&&e.toUTCString&&(k.expires=e.toUTCString());m=encodeURIComponent(m);var e=g+"="+m,c;for(c in k)e+="; "+c,d=k[c],!0!==d&&(e+="="+d);document.cookie=e}return l};g.cookie.isSupported=
function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return g.cookie});
define("dojo/_base/array dojo/aspect dojo/_base/connect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),function(g,
f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x,C,y,z,D,F,H,M,I,J,K,G,S,O,s,T,Q,U,N){function V(a){return v.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var P=k("dijit._TreeNode",[I,J,K,G,S],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a)},labelType:"text",isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:s,
baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";p.set(this.domNode,"backgroundPosition",b+" 0px");p.set(this.rowNode,this.isLeftToRight()?
"paddingLeft":"paddingRight",b);g.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,
b,d){var e="_"+b+"Class";b+="Node";var f=this[e];this[e]=this.tree["get"+d+"Class"](a,this.isExpanded);c.replace(this[b],this[e]||"",f||"");p.set(this[b],this.tree["get"+d+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();a&&a.rowNode&&"none"!=a.rowNode.style.display?c.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling()):c.add(this.domNode,"dijitTreeIsRoot")},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed",
"dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;c.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return V(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role","group");c.add(this.contentNode,
"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=u.wipeIn({node:this.containerNode,duration:M.defaultDuration}),b=this._expandDeferred=new e(function(){a.stop()});f.after(a,"onEnd",function(){b.resolve(!0)},!0);a.play();return V(b)},collapse:function(){if(this._collapseDeferred)return V(this._collapseDeferred);this._expandDeferred&&(this._expandDeferred.cancel(),
delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");c.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=u.wipeOut({node:this.containerNode,duration:M.defaultDuration}),b=this._collapseDeferred=new e(function(){a.stop()});f.after(a,"onEnd",function(){b.resolve(!0)},!0);a.play();return V(b)},
indent:0,setChildItems:function(a){var b=this.tree,c=b.model,d=[],e=this.getChildren();g.forEach(e,function(a){K.prototype.removeChild.call(this,a)},this);this.defer(function(){g.forEach(e,function(a){if(!a._destroyed&&!a.getParent()){b.dndController.removeTreeNode(a);var d=function(a){var e=c.getIdentity(a.item),f=b._itemNodesMap[e];1==f.length?delete b._itemNodesMap[e]:(e=g.indexOf(f,a),-1!=e&&f.splice(e,1));g.forEach(a.getChildren(),d)};d(a);if(b.persist){var e=g.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),
f;for(f in b._openedNodes)f.substr(0,e.length)==e&&delete b._openedNodes[f];b._saveExpandedNodes()}a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,g.forEach(a,function(a){var e=c.getIdentity(a),f=b._itemNodesMap[e],l;if(f)for(var p=0;p<f.length;p++)if(f[p]&&!f[p].getParent()){l=f[p];l.set("indent",this.indent+1);break}l||(l=this.tree._createTreeNode({item:a,tree:b,isExpandable:c.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),
ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),f?f.push(l):b._itemNodesMap[e]=[l]);this.addChild(l);(this.tree.autoExpand||this.tree._state(l))&&d.push(b._expandNode(l))},this),g.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=l(d);this.tree._startPaint(a);return V(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),
a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,this.collapse());g.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");c.toggle(this.rowNode,"dijitTreeRowSelected",
a)},focus:function(){F.focus(this.focusNode)}});a("dojo-bidi")&&P.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),g.forEach(this.getChildren(),function(b){b.set("textDir",a)},this))}});var aa=k("dijit.Tree",[I,O,J,S],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:T,
persist:!1,autoExpand:!1,dndController:N,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){C.publish(this.id,v.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&
this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new e;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(x(this.containerNode,x.selector(".dijitTreeNode",y.enter),function(b){a._onNodeMouseEnter(H.byNode(this),b)}),x(this.containerNode,x.selector(".dijitTreeNode",y.leave),function(b){a._onNodeMouseLeave(H.byNode(this),b)}),x(this.containerNode,D,function(b){var c=H.getEnclosingWidget(b.target);
c.isInstanceOf(P)&&a._onClick(c,b)}),x(this.containerNode,x.selector(".dijitTreeNode","dblclick"),function(b){a._onDblClick(H.byNode(this),b)}));this.model||this._store2model();this.own(f.after(this.model,"onChange",v.hitch(this,"_onItemChange"),!0),f.after(this.model,"onChildrenChange",v.hitch(this,"_onItemChildrenChange"),!0),f.after(this.model,"onDelete",v.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){v.isString(this.dndController)&&(this.dndController=v.getObject(this.dndController));
for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=V(this.pendingCommandsPromise);this.onLoadDeferred.then(v.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;q.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};
this.params.mayHaveChildren&&(a.mayHaveChildren=v.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(a.getChildren=v.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new U(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(v.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||
"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):
this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),b.labelNode.setAttribute("role","presentation"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=
[b];b._updateLayout();this._expandNode(b).then(v.hitch(this,function(){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(!0)}))}),v.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=v.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(v.hitch(this,function(){var c=g.map(a,function(a){return!a||v.isString(a)?a:b.model.getIdentity(a)}),d=[];g.forEach(c,function(a){d=d.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?V(this.set("paths",[a]).then(function(a){return a[0]})):V(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,d){var e=a.shift(),f=g.filter(d,function(a){return a.getIdentity()==e})[0];
if(f)return a.length?c._expandNode(f).then(function(){return b(a,f.getChildren())}):f;throw new aa.PathError("Could not expand path at "+e);}var c=this;return V(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return l(g.map(a,function(a){a=g.map(a,function(a){return v.isString(a)?a:c.model.getIdentity(a)});if(a.length)return b(a,[c.rootNode]);throw new aa.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",
[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function a(c){return b._expandNode(c).then(function(){var b=g.filter(c.getChildren()||[],function(a){return a.isExpandable});return l(g.map(b,a))})}var b=this;return V(a(this.rootNode))},collapseAll:function(){function a(c){var d=g.filter(c.getChildren()||[],function(a){return a.isExpandable}),d=l(g.map(d,a));return!c.isExpanded||c==b.rootNode&&!b.showRoot?d:d.then(function(){return b._collapseNode(c)})}
var b=this;return V(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},
_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&b.isExpanded&&b.hasChildren();)c=b.getChildren(),b=c[c.length-1];else if(c=b.getParent(),this.showRoot||c!==this.rootNode)b=c;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();
c&&c.isTreeNode&&(this.showRoot||c!==this.rootNode)&&this.focusNode(c)}},focusLastChild:function(){var a=this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();
if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return d.isDescendant(a,b.expandoNode)||d.isDescendant(a,b.expandoNodeText)},__click:function(a,b,c,d){var e=this.isExpandoNode(b.target,a);a.isExpandable&&(c||e)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[d](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,
b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){q.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){q.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.",
"","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,d=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new e,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},
function(b){console.error(d,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(v.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){this.focusChild(a)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),d=this.getTooltip(a);g.forEach(b,function(b){b.set({item:a,
label:c,tooltip:d});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this.model.getIdentity(a);(c=this._itemNodesMap[c])&&g.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(g.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=
m(this.cookieName);a&&g.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=g.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);m(this.cookieName,a.join(","),
{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!v.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&b.setMarginBox(this.domNode,a);this._nodePixelIndent=b.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(v.hitch(this,
function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=v.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});z(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&
(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new P(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});a("dojo-bidi")&&aa.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});aa.PathError=r("TreePathError");
aa._TreeNode=P;return aa});define({buttonOk:"OK",buttonCancel:"Abbrechen",buttonSave:"Speichern",itemClose:"Schlie\u00dfen"});define({root:{buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close"},zh:!0,"zh-tw":!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,ko:!0,kk:!0,ja:!0,it:!0,hu:!0,hr:!0,he:!0,fr:!0,fi:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0});define({loadingState:"Wird geladen...",errorState:"Es ist ein Fehler aufgetreten."});
define({root:{loadingState:"Loading...",errorState:"Sorry, an error occurred"},zh:!0,"zh-tw":!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,ko:!0,kk:!0,ja:!0,it:!0,hu:!0,hr:!0,he:!0,fr:!0,fi:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0});
define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(g,f,n,m,k,e,l){var d={};f.setObject("dojo.html",d);var c=0;d._secureForInnerHtml=function(b){return b.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};d._emptyNode=e.empty;d._setNodeContent=function(b,c){e.empty(b);if(c)if("string"==typeof c&&(c=e.toDom(c,b.ownerDocument)),!c.nodeType&&f.isArrayLike(c))for(var d=c.length,l=0;l<c.length;l=d==c.length?l+1:0)e.place(c[l],
b,"last");else e.place(c,b,"last");return b};d._ContentSetter=m("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:g._scopeName,startup:!0,constructor:function(b,d){f.mixin(this,b||{});d=this.node=k.byId(this.node||d);this.id||(this.id=["Setter",d?d.id||d.tagName:"",c++].join("_"))},set:function(b,c){void 0!==b&&(this.content=b);c&&this._mixin(c);this.onBegin();this.setContent();var d=this.onEnd();return d&&d.then?d:this.node},setContent:function(){var b=
this.node;if(!b)throw Error(this.declaredClass+": setContent given no node");try{b=d._setNodeContent(b,this.content)}catch(c){var e=this.onContentError(c);try{b.innerHTML=e}catch(f){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+f.message,f)}}this.node=b},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(n.forEach(this.parseResults,function(b){b.destroy&&
b.destroy()}),delete this.parseResults);e.empty(this.node)},onBegin:function(){var b=this.content;if(f.isString(b)&&(this.cleanContent&&(b=d._secureForInnerHtml(b)),this.extractContent)){var c=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);c&&(b=c[1])}this.empty();this.content=b;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(b){return"Error occurred setting content: "+
b},onExecError:function(b){return"Error occurred executing scripts: "+b},_mixin:function(b){var c={},d;for(d in b)d in c||(this[d]=b[d])},_parse:function(){var b=this.node;try{var c={};n.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var d=this;this.parseDeferred=l.parse({rootNode:b,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(e){this._onError("Content",
e,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(b,c,e){b=this["on"+b+"Error"].call(this,c);e?console.error(e,c):b&&d._setNodeContent(this.node,b,!0)}});d.set=function(b,c,e){void 0==c&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),c="");return e?(new d._ContentSetter(f.mixin(e,{content:c,node:b}))).set():d._setNodeContent(b,c,!0)};return d});
define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(g,f,n,m,k){function e(c){return c.substring(0,1).toUpperCase()+c.substring(1)}function l(c,b){var d=c.resize?c.resize(b):n.setMarginBox(c.domNode,b);d?k.mixin(c,d):(k.mixin(c,n.getMarginBox(c.domNode)),k.mixin(c,b))}var d={marginBox2contentBox:function(c,b){var d=m.getComputedStyle(c),e=n.getMarginExtents(c,d),f=n.getPadBorderExtents(c,d);return{l:m.toPixelValue(c,d.paddingLeft),t:m.toPixelValue(c,
d.paddingTop),w:b.w-(e.w+f.w),h:b.h-(e.h+f.h)}},layoutChildren:function(c,b,d,r,u){b=k.mixin({},b);f.add(c,"dijitLayoutContainer");d=g.filter(d,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(g.filter(d,function(a){return"center"==a.region||"client"==a.layoutAlign}));g.forEach(d,function(a){var c=a.domNode,d=a.region||a.layoutAlign;if(!d)throw Error("No region setting for "+a.id);var p=c.style;p.left=b.l+"px";p.top=b.t+"px";p.position="absolute";f.add(c,"dijitAlign"+e(d));c=
{};r&&r==a.id&&(c["top"==a.region||"bottom"==a.region?"h":"w"]=u);"leading"==d&&(d=a.isLeftToRight()?"left":"right");"trailing"==d&&(d=a.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(c.w=b.w,l(a,c),b.h-=a.h,"top"==d?b.t+=a.h:p.top=b.t+b.h+"px"):"left"==d||"right"==d?(c.h=b.h,l(a,c),b.w-=a.w,"left"==d?b.l+=a.w:p.left=b.l+b.w+"px"):"client"!=d&&"center"!=d||l(a,b)})}};k.setObject("dijit.layout.utils",d);return d});
define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query dojo/sniff ../registry ../Viewport ./utils".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){return f("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var c=this.getParent();this._childOfLayoutWidget=c&&c.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();
this._childOfLayoutWidget||this.own(b.on("resize",e.hitch(this,"resize")))}},_checkIfSingleChild:function(){var b=[],d=!1;l("> *",this.containerNode).some(function(a){var e=c.byNode(a);e&&e.resize?b.push(e):!/script|link|style/i.test(a.nodeName)&&a.offsetHeight&&(d=!0)});this._singleChild=1!=b.length||d?null:b[0];n.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(b,c){this._resizeCalled=!0;this._scheduleLayout(b,c)},_scheduleLayout:function(b,c){this._isShown()?
this._layout(b,c):(this._needLayout=!0,this._changeSize=b,this._resultSize=c)},_layout:function(b,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();b&&m.setMarginBox(this.domNode,b);var a=this.containerNode;if(a===this.domNode){var d=c||{};e.mixin(d,b||{});"h"in d&&"w"in d||(d=e.mixin(m.getMarginBox(a),d));this._contentBox=p.marginBox2contentBox(a,d)}else this._contentBox=m.getContentBox(a);this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();
if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||m.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=this.getChildren(),c,a=0;c=b[a++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,c=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!n.contains(b,"dijitHidden")&&
c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})});
define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/i18n!../nls/loading dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v){return b("dijit.layout.ContentPane",[n,m,k],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:g._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",
errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,b){if(!(a&&a.template||!b||"href"in
a||"content"in a)){b=r.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=f.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=t.getLocalization("dijit","loading",this.lang);this.loadingMessage=e.substitute(this.loadingMessage,a);this.errorMessage=e.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);
this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&c.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!f.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){c.forEach(this.getChildren(),function(a){a._started||a._destroyed||!f.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&c.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!f.isFunction(a.startup)||
(a.startup(),a._started=!0)},this)},setHref:function(a){g.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new p(f.hitch(this,"cancel"));this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){g.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.",
"","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=new p(f.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();
this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new p(f.hitch(this,"cancel"));this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,
b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};f.isObject(this.ioArgs)&&f.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||q.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",
!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(b){this.isLoaded&&this._onUnloadHandler();var d=this._contentSetter;c.forEach(this.getChildren(),function(a){a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b);a._destroyed=
!0});d&&(c.forEach(d.parseResults,function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b),a._destroyed=!0)}),delete d.parseResults);b||a.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;c&&c instanceof l._ContentSetter||(c=this._contentSetter=new l._ContentSetter({node:this.containerNode,_onError:f.hitch(this,this._onError),onContentError:f.hitch(this,function(a){a=this.onContentError(a);
try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})}));var d=f.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=c.set(f.isObject(a)&&a.domNode?a.domNode:a,d),e=this;return v(d&&d.then?d:c.parseDeferred,function(){delete e._contentSetterParams;
b||(e._started&&(e._startChildren(),e._scheduleLayout()),e._onLoadHandler(a))})},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})});
define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){var u=g("dijit.DialogUnderlay",[d,c],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){m.set(this.node,"id",a+"_underlay");
this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(e(this.domNode,"keydown",f.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=l.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display=
"block";this.open=!0;this.layout();this.bgIframe=new b(this.domNode);var a=l.get(this.ownerDocument);this._modalConnects=[p.on("resize",f.hitch(this,"layout")),e(a,"scroll",f.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});
u.show=function(a,b){var c=u._singleton;!c||c._destroyed?c=r._underlay=u._singleton=new u(a):a&&c.set(a);k.set(c.domNode,"zIndex",b);c.open||c.show()};u.hide=function(){var a=u._singleton;a&&!a._destroyed&&a.hide()};return u});
define(["dojo/_base/declare","./a11y"],function(g,f){return g("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var g=f._getTabNavigable(this.containerNode);this._firstFocusItem=g.lowest||g.first||this.closeButtonNode||this.domNode;this._lastFocusItem=g.last||g.highest||this._firstFocusItem}})});
define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(g,f,n,m,k,e){return f("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(e){var d=[];g.forEach(e||this.getChildren(),function(c){"value"in c?d.push(c):d=d.concat(this._getDescendantFormWidgets(c.getChildren()))},this);return d},reset:function(){g.forEach(this._getDescendantFormWidgets(),function(e){e.reset&&e.reset()})},validate:function(){var f=!1;return g.every(g.map(this._getDescendantFormWidgets(),
function(d){d._hasBeenBlurred=!0;var c=d.disabled||!d.validate||d.validate();c||f||(e.scrollIntoView(d.containerNode||d.domNode),d.focus(),f=!0);return c}),function(d){return d})},setValues:function(e){n.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",e)},_setValueAttr:function(e){var d={};g.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(d[b.name]||(d[b.name]=[])).push(b)});for(var c in d)if(d.hasOwnProperty(c)){var b=
d[c],f=m.getObject(c,!1,e);void 0!==f&&(f=[].concat(f),"boolean"==typeof b[0].checked?g.forEach(b,function(b){b.set("value",-1!=g.indexOf(f,b._get("value")))}):b[0].multiple?b[0].set("value",f):g.forEach(b,function(b,c){b.set("value",f[c])}))}},getValues:function(){n.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var e={};g.forEach(this._getDescendantFormWidgets(),function(d){var c=d.name;if(c&&!d.disabled){var b=
d.get("value");"boolean"==typeof d.checked?/Radio/.test(d.declaredClass)?!1!==b?m.setObject(c,b,e):(b=m.getObject(c,!1,e),void 0===b&&m.setObject(c,null,e)):(d=m.getObject(c,!1,e),d||(d=[],m.setObject(c,d,e)),!1!==b&&d.push(b)):(d=m.getObject(c,!1,e),"undefined"!=typeof d?m.isArray(d)?d.push(b):m.setObject(c,[d,b],e):m.setObject(c,b,e))}});return e},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var e=g.map(this._descendants,function(d){return d.get("state")||
""});return 0<=g.indexOf(e,"Error")?"Error":0<=g.indexOf(e,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(e){this._descendants=this._getDescendantFormWidgets();g.forEach(this._descendants,function(d){d._started||d.startup()});e||this._onChildChange()},_onChildChange:function(e){e&&"state"!=e&&"disabled"!=e||this._set("state",this._getState());e&&"value"!=e&&"disabled"!=e&&"checked"!=e||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=
this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var e=this;this.own(k(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(d){d.target!=e.domNode&&e._onChildChange(d.type.replace("attrmodified-",""))}));this.watch("state",function(d,c,b){this.onValidStateChange(""==
b)})},destroy:function(){this.inherited(arguments)}})});
define(["../_base/declare","./Moveable"],function(g,f){var n=f.prototype.onMove;return g("dojo.dnd.TimedMoveable",f,{timeout:40,constructor:function(f,k){k||(k={});k.timeout&&"number"==typeof k.timeout&&0<=k.timeout&&(this.timeout=k.timeout)},onMoveStop:function(m){m._timer&&(clearTimeout(m._timer),n.call(this,m,m._leftTop));f.prototype.onMoveStop.apply(this,arguments)},onMove:function(f,k){f._leftTop=k;if(!f._timer){var e=this;f._timer=setTimeout(function(){f._timer=null;n.call(e,f,f._leftTop)},
this.timeout)}}})});
define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u){return f("dojo.dnd.Mover",[c],{constructor:function(a,c,d){function f(a){a.preventDefault();a.stopPropagation()}this.node=e.byId(a);this.marginBox={l:c.pageX,t:c.pageY};this.mouseButton=c.button;c=this.host=d;a=a.ownerDocument;this.events=[b(a,p.move,n.hitch(this,"onFirstMove")),b(a,p.move,
n.hitch(this,"onMouseMove")),b(a,p.release,n.hitch(this,"onMouseUp")),b(a,"dragstart",f),b(a.body,"selectstart",f)];u.autoScrollStart(a);if(c&&c.onMoveStart)c.onMoveStart(this)},onMouseMove:function(a){u.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(m("webkit")&&m("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=
this.node.style,c,e=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=l.getMarginBox(this.node);c=k.doc.body;var f=d.getComputedStyle(c),p=l.getMarginBox(c,f),f=l.getContentBox(c,f);c=b.l-(f.l-p.l);b=b.t-(f.t-p.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(e&&e.onFirstMove)e.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){g.forEach(this.events,
function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})});
define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){return f("dojo.dnd.Moveable",[e],{handle:"",delay:0,skip:!1,constructor:function(b,a){this.node=m.byId(b);a||(a={});this.handle=a.handle?m.byId(a.handle):null;this.handle||(this.handle=this.node);this.delay=0<a.delay?a.delay:0;this.skip=a.skip;this.mover=a.mover?a.mover:p;this.events=[l(this.handle,c.press,n.hitch(this,
"onMouseDown")),l(this.handle,"dragstart",n.hitch(this,"onSelectStart")),l(this.handle,"selectstart",n.hitch(this,"onSelectStart"))]},markupFactory:function(b,a,c){return new c(a,b)},destroy:function(){g.forEach(this.events,function(b){b.remove()});this.events=this.node=this.handle=null},onMouseDown:function(d){if(!this.skip||!b.isFormElement(d)){if(this.delay)this.events.push(l(this.handle,c.move,n.hitch(this,"onMouseMove")),l(this.handle,c.release,n.hitch(this,"onMouseUp"))),this._lastX=d.pageX,
this._lastY=d.pageY;else this.onDragDetected(d);d.stopPropagation();d.preventDefault()}},onMouseMove:function(b){if(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)this.onMouseUp(b),this.onDragDetected(b);b.stopPropagation();b.preventDefault()},onMouseUp:function(b){for(var a=0;2>a;++a)this.events.pop().remove();b.stopPropagation();b.preventDefault()},onSelectStart:function(c){this.skip&&b.isFormElement(c)||(c.stopPropagation(),c.preventDefault())},onDragDetected:function(b){new this.mover(this.node,
b,this)},onMoveStart:function(b){d.publish("/dnd/move/start",b);k.add(r.body(),"dojoMove");k.add(this.node,"dojoMoveItem")},onMoveStop:function(b){d.publish("/dnd/move/stop",b);k.remove(r.body(),"dojoMove");k.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(b,a){this.onMoving(b,a);var c=b.node.style;c.left=a.l+"px";c.top=a.t+"px";this.onMoved(b,a)},onMoving:function(){},onMoved:function(){}})});
define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane dojo/text!./templates/Dialog.html dojo/i18n!./nls/common".split(" "),function(g,f,n,m,k,e,l,d,
c,b,p,r,u,a,q,t,v,x,C,y,z,D,F,H,M,I,J,K,G){z=m("dijit._DialogBase"+(t("dojo-bidi")?"_NoBidi":""),[F,M,I,H],{templateString:G,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:z.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=
a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=p.getLocalization("dijit","common");u.mixin(this,a);this.inherited(arguments)},postCreate:function(){c.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);n.after(this,"onExecute",u.hitch(this,"hide"),!0);n.after(this,"onCancel",u.hitch(this,"hide"),!0);this._modalconnects=[]},onLoad:function(){this._size();this._position();this.autofocus&&O.isTop(this)&&
(this._getFocusItems(this.domNode),y.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems(this.domNode);y.focus(this._firstFocusItem)},_endDrag:function(){var a=d.position(this.domNode),b=v.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==t("ie")?C:x)(a,{handle:this.titleBar}),
n.after(this._moveable,"onMoveStop",u.hitch(this,"_endDrag"),!0)):l.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":f.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:u.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();this._singleChild?"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle):
c.set(this.containerNode,{width:"auto",height:"auto"});var a=d.position(this.domNode),b=v.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;if(a.w>=b.w||a.h>=b.h){var e=d.position(this.containerNode),f=Math.min(a.w,b.w)-(a.w-e.w),a=Math.min(a.h,b.h)-(a.h-e.h);this._singleChild&&this._singleChild.resize?("undefined"==typeof this._singleChildOriginalStyle&&(this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText),this._singleChild.resize({w:f,h:a})):c.set(this.containerNode,
{width:f+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!l.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=v.getBox(this.ownerDocument),e=this._relativePosition,f=e?null:d.position(a);c.set(a,{left:Math.floor(b.l+(e?e.x:(b.w-f.w)/2))+"px",top:Math.floor(b.t+(e?e.y:(b.h-f.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==r.TAB){this._getFocusItems(this.domNode);var b=a.target;
this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(y.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey||(y.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==r.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(!this.open){this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=
!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),O.hide(this));var d=v.get(this.ownerDocument);this._modalconnects.push(a(d,"scroll",u.hitch(this,"resize")));this._modalconnects.push(a(this.domNode,"keydown",u.hitch(this,"_onKey")));c.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var e;this._fadeInDeferred=new k(u.hitch(this,function(){e.stop();delete this._fadeInDeferred}));d=this._fadeInDeferred.promise;e=b.fadeIn({node:this.domNode,
duration:this.duration,beforeBegin:u.hitch(this,function(){O.show(this,this.underlayAttrs)}),onEnd:u.hitch(this,function(){this.autofocus&&O.isTop(this)&&(this._getFocusItems(this.domNode),y.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return d}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new k(u.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));
this._fadeOutDeferred.then(u.hitch(this,"onHide"));var c=this._fadeOutDeferred.promise;a=b.fadeOut({node:this.domNode,duration:this.duration,onEnd:u.hitch(this,function(){this.domNode.style.display="none";O.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var d;d=this._modalconnects.pop();)d.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return c}},resize:function(){"none"!=
this.domNode.style.display&&(this._size(),t("touch")||this._position())},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();O.hide(this);this.inherited(arguments)}});t("dojo-bidi")&&(z=m("dijit._DialogBase",z,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(a){this._created&&
this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var S=m("dijit.Dialog",[K,z],{});S._DialogBase=z;var O=S._DialogLevelManager={_beginZIndex:950,show:function(a,b){s[s.length-1].focus=y.curNode;var d=s[s.length-1].dialog?s[s.length-1].zIndex+2:S._DialogLevelManager._beginZIndex;c.set(a.domNode,"zIndex",d);J.show(b,d-1);s.push({dialog:a,underlayAttrs:b,zIndex:d})},hide:function(a){if(s[s.length-1].dialog==a){s.pop();var b=s[s.length-1];1==s.length?J.hide():J.show(b.underlayAttrs,
b.zIndex-1);if(a.refocus&&(a=b.focus,!b.dialog||a&&e.isDescendant(a,b.dialog.domNode)||(b.dialog._getFocusItems(b.dialog.domNode),a=b.dialog._firstFocusItem),a))try{a.focus()}catch(c){}}else b=f.indexOf(f.map(s,function(a){return a.dialog}),a),-1!=b&&s.splice(b,1)},isTop:function(a){return s[s.length-1].dialog==a}},s=S._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];y.watch("curNode",function(a,b,c){a=s[s.length-1].dialog;if(c&&a&&!a._fadeOutDeferred&&c.ownerDocument==a.ownerDocument){do if(c==
a.domNode||l.contains(c,"dijitPopup"))return;while(c=c.parentNode);a.focus()}});t("dijit-legacy-requires")&&q(0,function(){g(["dijit/TooltipDialog"])});return S});
define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){var r=c.lambda("item.purgeGroup()");return n("dojox.charting.plot2d.Columns",[k,e],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(c,
a){this.opt=g.clone(g.mixin(this.opt,this.defaultParams));b.updateWithObject(this.opt,a);b.updateWithPattern(this.opt,a,this.optionalParams);this.animate=this.opt.animate},getSeriesStats:function(){var b=l.collectSimpleStats(this.series);b.hmin-=0.5;b.hmax+=0.5;return b},createRect:function(b,a,c){var d;this.opt.enableCache&&0<b._rectFreePool.length?(d=b._rectFreePool.pop(),d.setShape(c),a.add(d)):d=a.createRect(c);this.opt.enableCache&&b._rectUsePool.push(d);return d},render:function(b,a){if(this.zoom&&
!this.isDataDirty())return this.performZoom(b,a);this.resetEvents();this.dirty=this.isDirty();var c;this.dirty&&(f.forEach(this.series,r),this._eventSeries={},this.cleanGroup(),c=this.getGroup(),d.forEachRev(this.series,function(a){a.cleanGroup(c)}));for(var e=this.chart.theme,l=this._hScaler.scaler.getTransformerFromModel(this._hScaler),p=this._vScaler.scaler.getTransformerFromModel(this._vScaler),k=Math.max(0,this._vScaler.bounds.lower),n=p(k),z=this.events(),D=this.getBarProperties(),F=this.series.length-
1;0<=F;--F){var H=this.series[F];if(this.dirty||H.dirty){H.cleanGroup();this.opt.enableCache&&(H._rectFreePool=(H._rectFreePool?H._rectFreePool:[]).concat(H._rectUsePool?H._rectUsePool:[]),H._rectUsePool=[]);var M=e.next("column",[this.opt,H]),I=Array(H.data.length);c=H.group;for(var J=f.some(H.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),K=J?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,G=J?Math.min(H.data.length,Math.ceil(this._hScaler.bounds.to)):H.data.length;K<
G;++K){var S=H.data[K];if(null!=S){var O=this.getValue(S,K,F,J),s=p(O.y),T=Math.abs(s-n),Q,U;this.opt.styleFunc||"number"!=typeof S?(Q="number"!=typeof S?[S]:[],this.opt.styleFunc&&Q.push(this.opt.styleFunc(S)),Q=e.addMixin(M,"column",Q,!0)):Q=e.post(M,"column");if(1<=D.width&&0<=T){var N={x:a.l+l(O.x+0.5)+D.gap+D.thickness*F,y:b.height-a.b-(O.y>k?s:n),width:D.width,height:T};Q.series.shadow&&(U=g.clone(N),U.x+=Q.series.shadow.dx,U.y+=Q.series.shadow.dy,U=this.createRect(H,c,U).setFill(Q.series.shadow.color).setStroke(Q.series.shadow),
this.animate&&this._animateColumn(U,b.height-a.b+n,T));var V=this._plotFill(Q.series.fill,b,a),V=this._shapeFill(V,N),V=this.createRect(H,c,N).setFill(V).setStroke(Q.series.stroke);V.setFilter&&Q.series.filter&&V.setFilter(Q.series.filter);H.dyn.fill=V.getFill();H.dyn.stroke=V.getStroke();if(z){var P={element:"column",index:K,run:H,shape:V,shadow:U,cx:O.x+0.5,cy:O.y,x:J?K:H.data[K].x,y:J?H.data[K]:H.data[K].y};this._connectEvents(P);I[K]=P}!isNaN(O.py)&&O.py>k&&(N.height=s-p(O.py));this.createLabel(c,
S,N,Q);this.animate&&this._animateColumn(V,b.height-a.b-n,T)}}}this._eventSeries[H.name]=I;H.dirty=!1}else e.skip(),this._reconnectEvents(H.name)}this.dirty=!1;m("dojo-bidi")&&this._checkOrientation(this.group,b,a);return this},getValue:function(b,a,c,d){d?(c="number"==typeof b?b:b.y,b=a):(c=b.y,b=b.x-1);return{x:b,y:c}},getBarProperties:function(){var b=l.calculateBarSize(this._hScaler.bounds.scale,this.opt);return{gap:b.gap,width:b.size,thickness:0}},_animateColumn:function(b,a,c){0==c&&(c=1);p.animateTransform(g.delegate({shape:b,
duration:1200,transform:[{name:"translate",start:[0,a-a/c],end:[0,0]},{name:"scale",start:[1,1/c],end:[1,1]},{name:"original"}]},this.animate)).play()}})});define(["dojo/_base/declare","./Columns","./common"],function(g,f,n){return g("dojox.charting.plot2d.ClusteredColumns",f,{getBarProperties:function(){var f=n.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);return{gap:f.gap,width:f.size,thickness:f.size}}})});
define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./Base ./_PlotEvents ./common dojox/gfx dojox/gfx/matrix dojox/lang/functional dojox/lang/utils dojo/has".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){return n("dojox.charting.plot2d.Pie",[m,k],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,omitLabels:!1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,
font:"",fontColor:"",labelWiring:{}},constructor:function(c,d){this.opt=g.clone(this.defaultParams);b.updateWithObject(this.opt,d);b.updateWithPattern(this.opt,d,this.optionalParams);this.axes=[];this.run=null;this.dyn=[]},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this},setAxis:function(b){return this},addSeries:function(b){this.run=b;return this},getSeriesStats:function(){return g.delegate(e.defaultStats)},getRequiredColors:function(){return this.run?this.run.data.length:
0},render:function(b,e){if(!this.dirty)return this;this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var a=this.group,k=this.chart.theme;if(!this.run||!this.run.data.length)return this;var t=(b.width-e.l-e.r)/2,v=(b.height-e.t-e.b)/2,m=Math.min(t,v),C="font"in this.opt?this.opt.font:k.series.font,n,z=d._degToRad(this.opt.startAngle),D=z,F,H,M,I,J=this.run.data,K=this.events();this.dyn=[];"radius"in this.opt&&(m=this.opt.radius,I=m-this.opt.labelOffset);var G={cx:e.l+t,cy:e.t+
v,r:m};if(this.opt.shadow||k.shadow){F=this.opt.shadow||k.shadow;var S=g.clone(G);S.cx+=F.dx;S.cy+=F.dy;a.createCircle(S).setFill(F.color).setStroke(F)}a.setFilter&&(this.opt.filter||k.filter)&&a.createCircle(G).setFill(k.series.stroke).setFilter(this.opt.filter||k.filter);if("number"==typeof J[0]){F=c.map(J,"x ? Math.max(x, 0) : 0");if(c.every(F,"<= 0"))return a.createCircle(G).setStroke(k.series.stroke),this.dyn=f.map(F,function(){return{}}),this;H=c.map(F,"/this",c.foldl(F,"+",0));this.opt.labels&&
(M=f.map(H,function(a){return 0<a?this._getLabel(100*a)+"%":""},this))}else{F=c.map(J,"x ? Math.max(x.y, 0) : 0");if(c.every(F,"<= 0"))return a.createCircle(G).setStroke(k.series.stroke),this.dyn=f.map(F,function(){return{}}),this;H=c.map(F,"/this",c.foldl(F,"+",0));this.opt.labels&&(M=f.map(H,function(a,b){if(0>a)return"";var c=J[b];return"text"in c?c.text:this._getLabel(100*a)+"%"},this))}var O=c.map(J,function(a,b){var c=[this.opt,this.run];null!==a&&"number"!=typeof a&&c.push(a);this.opt.styleFunc&&
c.push(this.opt.styleFunc(a));return k.next("slice",c,!0)},this);this.opt.labels&&(n=C?l.normalizedLength(l.splitFontString(C).size):0,F=c.foldl1(c.map(M,function(a,b){return l._base._getTextBox(a,{font:O[b].series.font}).w},this),"Math.max(a, b)")/2,0>this.opt.labelOffset&&(m=Math.min(t-2*F,v-n)+this.opt.labelOffset),I=m-this.opt.labelOffset);var s=Array(H.length);f.some(H,function(c,f){if(0>c)return!1;if(0==c)return this.dyn.push({fill:null,stroke:null}),!1;var l=J[f],p=O[f],k;if(1<=c){k=this._plotFill(p.series.fill,
b,e);k=this._shapeFill(k,{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*G.r});k=this._pseudoRadialFill(k,{x:G.cx,y:G.cy},G.r);var t=a.createCircle(G).setFill(k).setStroke(p.series.stroke);this.dyn.push({fill:k,stroke:p.series.stroke});K&&(l={element:"slice",index:f,run:this.run,shape:t,x:f,y:"number"==typeof l?l:l.y,cx:G.cx,cy:G.cy,cr:m},this._connectEvents(l),s[f]=l);return!1}var q=D+2*c*Math.PI;f+1==H.length&&(q=z+2*Math.PI);var t=q-D,v=G.cx+m*Math.cos(D),g=G.cy+m*Math.sin(D),C=G.cx+m*Math.cos(q),
n=G.cy+m*Math.sin(q);k=d._degToRad(this.opt.fanSize);if(p.series.fill&&"radial"===p.series.fill.type&&"fan"===this.opt.radGrad&&t>k){var y=a.createGroup(),F=Math.ceil(t/k),I=t/F;k=this._shapeFill(p.series.fill,{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*G.r});for(var M=0;M<F;++M){var S=0==M?v:G.cx+m*Math.cos(D+(M-0.2)*I),T=0==M?g:G.cy+m*Math.sin(D+(M-0.2)*I),Q=M==F-1?C:G.cx+m*Math.cos(D+(M+1+0.2)*I),N=M==F-1?n:G.cy+m*Math.sin(D+(M+1+0.2)*I);y.createPath().moveTo(G.cx,G.cy).lineTo(S,T).arcTo(m,m,0,
I>Math.PI,!0,Q,N).lineTo(G.cx,G.cy).closePath().setFill(this._pseudoRadialFill(k,{x:G.cx,y:G.cy},m,D+(M+0.5)*I,D+(M+0.5)*I))}y.createPath().moveTo(G.cx,G.cy).lineTo(v,g).arcTo(m,m,0,t>Math.PI,!0,C,n).lineTo(G.cx,G.cy).closePath().setStroke(p.series.stroke);t=y}else t=a.createPath().moveTo(G.cx,G.cy).lineTo(v,g).arcTo(m,m,0,t>Math.PI,!0,C,n).lineTo(G.cx,G.cy).closePath().setStroke(p.series.stroke),(k=p.series.fill)&&"radial"===k.type?(k=this._shapeFill(k,{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*
G.r}),"linear"===this.opt.radGrad&&(k=this._pseudoRadialFill(k,{x:G.cx,y:G.cy},m,D,q))):k&&"linear"===k.type&&(k=this._plotFill(k,b,e),k=this._shapeFill(k,t.getBoundingBox())),t.setFill(k);this.dyn.push({fill:k,stroke:p.series.stroke});K&&(l={element:"slice",index:f,run:this.run,shape:t,x:f,y:"number"==typeof l?l:l.y,cx:G.cx,cy:G.cy,cr:m},this._connectEvents(l),s[f]=l);D=q;return!1},this);if(this.opt.labels){var T=p("dojo-bidi")&&this.chart.isRightToLeft();if("default"==this.opt.labelStyle)D=z,f.some(H,
function(c,d){if(0>=c)return!1;var e=O[d];if(1<=c)return this.renderLabel(a,G.cx,G.cy+n/2,M[d],e,0<this.opt.labelOffset),!0;var f=D+2*c*Math.PI;d+1==H.length&&(f=z+2*Math.PI);if(this.opt.omitLabels&&0.001>f-D)return!1;var l=(D+f)/2,p=G.cx+I*Math.cos(l),l=G.cy+I*Math.sin(l)+n/2;this.renderLabel(a,T?b.width-p:p,l,M[d],e,0<this.opt.labelOffset);D=f;return!1},this);else if("columns"==this.opt.labelStyle){var D=z,Q=this.opt.omitLabels,U=[];f.forEach(H,function(a,b){var c=D+2*a*Math.PI;b+1==H.length&&(c=
z+2*Math.PI);var d=(D+c)/2;U.push({angle:d,left:0>Math.cos(d),theme:O[b],index:b,omit:Q?0.001>c-D:!1});D=c});t=l._base._getTextBox("a",{font:C}).h;this._getProperLabelRadius(U,t,1.1*G.r);f.forEach(U,function(c,d){if(!c.omit){var e=G.cx-2*G.r,f=G.cx+2*G.r,p=l._base._getTextBox(M[d],{font:c.theme.series.font}).w,k=G.cx+c.labelR*Math.cos(c.angle),t=G.cy+c.labelR*Math.sin(c.angle),f=c.left?e+p:f-p,e=c.left?e:f,q=a.createPath().moveTo(G.cx+G.r*Math.cos(c.angle),G.cy+G.r*Math.sin(c.angle));Math.abs(c.labelR*
Math.cos(c.angle))<2*G.r-p&&q.lineTo(k,t);q.lineTo(f,t).setStroke(c.theme.series.labelWiring);this.renderLabel(a,T?b.width-p-e:e,t,M[d],c.theme,!1,"left")}},this)}}var N=0;this._eventSeries[this.run.name]=c.map(J,function(a){return 0>=a?null:s[N++]});p("dojo-bidi")&&this._checkOrientation(this.group,b,e);return this},_getProperLabelRadius:function(b,c,a){var d,e,f=1,l=1;if(1==b.length)b[0].labelR=a;else{for(var p=0;p<b.length;p++){var k=Math.abs(Math.sin(b[p].angle));b[p].left?f>=k&&(f=k,d=b[p]):
l>=k&&(l=k,e=b[p])}d.labelR=e.labelR=a;this._calculateLabelR(d,b,c);this._calculateLabelR(e,b,c)}},_calculateLabelR:function(b,c,a){for(var d=b.index,e=c.length,f=b.labelR;!(c[d%e].left^c[(d+1)%e].left);)c[(d+1)%e].omit||(f=(Math.sin(c[d%e].angle)*f+(c[d%e].left?-a:a))/Math.sin(c[(d+1)%e].angle),f=f<b.labelR?b.labelR:f,c[(d+1)%e].labelR=f),d++;d=b.index;for(e=0==d?e-1:d-1;!(c[d].left^c[e].left);)c[e].omit||(f=(Math.sin(c[d].angle)*f+(c[d].left?a:-a))/Math.sin(c[e].angle),f=f<b.labelR?b.labelR:f,c[e].labelR=
f),d--,e--,d=0>d?d+c.length:d,e=0>e?e+c.length:e}})});
define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(g,f,n,m){return n("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(f){},raiseEvent:function(k){this.plotEvent(k);var e=g.delegate(k);e.originalEvent=k.type;e.originalPlot=k.plot;e.type="onindirect";f.forEach(this.chart.stack,function(f){f!==this&&f.plotEvent&&(e.plot=
f,f.plotEvent(e))},this)},connect:function(f,e){this.dirty=!0;return m.connect(this,"plotEvent",f,e)},events:function(){return!!this.plotEvent.after},resetEvents:function(){this._shapeEvents.length&&(f.forEach(this._shapeEvents,function(f){f.shape.disconnect(f.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(f,e){this._shapeEvents.push({shape:f.eventMask,handle:f.eventMask.connect(e,this,function(l){f.type=e;f.event=l;this.raiseEvent(f);
f.event=null})})},_connectEvents:function(f){f&&(f.chart=this.chart,f.plot=this,f.hAxis=this.hAxis||null,f.vAxis=this.vAxis||null,f.eventMask=f.eventMask||f.shape,this._connectSingleEvent(f,"onmouseover"),this._connectSingleEvent(f,"onmouseout"),this._connectSingleEvent(f,"onclick"))},_reconnectEvents:function(k){(k=this._eventSeries[k])&&f.forEach(k,this._connectEvents,this)},fireEvent:function(f,e,l,d){(f=this._eventSeries[f])&&f.length&&l<f.length&&(l=f[l],l.type=e,l.event=d||null,this.raiseEvent(l),
l.event=null)}})});
define(["dojo/_base/lang"],function(g){var f=g.getObject("dojox.charting.scaler.primitive",!0);return g.mixin(f,{buildScaler:function(g,m,k,e){g==m&&(g-=0.5,m+=0.5);return{bounds:{lower:g,upper:m,from:g,to:m,scale:k/(m-g),span:k},scaler:f}},buildTicks:function(f,m){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(f){var m=f.bounds.from,k=f.bounds.scale;return function(e){return(e-m)*k}},getTransformerFromPlot:function(f){var m=f.bounds.from,k=f.bounds.scale;return function(e){return e/
k+m}}})});
define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),function(g,f,n,m,k,e){var l=g.getObject("dojox.charting.plot2d.common",!0);return g.mixin(l,{doIfLoaded:e.doIfLoaded,makeStroke:function(d){if(!d)return d;if("string"==typeof d||d instanceof n)d={color:d};return m.makeParameters(m.defaultStroke,d)},augmentColor:function(d,c){var b=new n(d),e=new n(c);e.a=b.a;return e},augmentStroke:function(d,c){var b=l.makeStroke(d);b&&(b.color=
l.augmentColor(b.color,c));return b},augmentFill:function(d,c){new n(c);return"string"==typeof d||d instanceof n?l.augmentColor(d,c):d},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(d){for(var c=g.delegate(l.defaultStats),b=0;b<d.length;++b)for(var e=d[b],k=0;k<e.data.length;k++)if(null!==e.data[k]){if("number"==typeof e.data[k]){var k=c.vmin,m=c.vmax;"ymin"in e&&"ymax"in e||f.forEach(e.data,
function(a,b){if(null!==a){var d=b+1,e=a;isNaN(e)&&(e=0);c.hmin=Math.min(c.hmin,d);c.hmax=Math.max(c.hmax,d);c.vmin=Math.min(c.vmin,e);c.vmax=Math.max(c.vmax,e)}})}else{var a=c.hmin,q=c.hmax,k=c.vmin,m=c.vmax;"xmin"in e&&"xmax"in e&&"ymin"in e&&"ymax"in e||f.forEach(e.data,function(a,b){if(null!==a){var d="x"in a?a.x:b+1,e=a.y;isNaN(d)&&(d=0);isNaN(e)&&(e=0);c.hmin=Math.min(c.hmin,d);c.hmax=Math.max(c.hmax,d);c.vmin=Math.min(c.vmin,e);c.vmax=Math.max(c.vmax,e)}});"xmin"in e&&(c.hmin=Math.min(a,e.xmin));
"xmax"in e&&(c.hmax=Math.max(q,e.xmax))}"ymin"in e&&(c.vmin=Math.min(k,e.ymin));"ymax"in e&&(c.vmax=Math.max(m,e.ymax));break}return c},calculateBarSize:function(d,c,b){b||(b=1);var e=c.gap,e=(d-2*e)/b;"minBarSize"in c&&(e=Math.max(e,c.minBarSize));"maxBarSize"in c&&(e=Math.min(e,c.maxBarSize));e=Math.max(e,1);return{size:e,gap:(d-e*b)/2}},collectStackedStats:function(d){var c=g.clone(l.defaultStats);if(d.length){c.hmin=Math.min(c.hmin,1);c.hmax=k.foldl(d,"seed, run -> Math.max(seed, run.data.length)",
c.hmax);for(var b=0;b<c.hmax;++b){var e=d[0].data[b],e=e&&("number"==typeof e?e:e.y);isNaN(e)&&(e=0);c.vmin=Math.min(c.vmin,e);for(var f=1;f<d.length;++f){var m=d[f].data[b],m=m&&("number"==typeof m?m:m.y);isNaN(m)&&(m=0);e+=m}c.vmax=Math.max(c.vmax,e)}}return c},curve:function(d,c){var b=d.slice(0);"x"==c&&(b[b.length]=b[0]);return f.map(b,function(d,e){if(0==e)return"M"+d.x+","+d.y;if(!isNaN(c)){var f=d.x-b[e-1].x;return"C"+(d.x-f/c*(c-1))+","+b[e-1].y+" "+(d.x-f/c)+","+d.y+" "+d.x+","+d.y}if("X"==
c||"x"==c||"S"==c){var a,l=b[e-1],f=b[e],k,v,m,g=1/6;1==e?(a="x"==c?b[b.length-2]:l,g=1/3):a=b[e-2];e==b.length-1?(k="x"==c?b[1]:f,g=1/3):k=b[e+1];v=Math.sqrt((f.x-l.x)*(f.x-l.x)+(f.y-l.y)*(f.y-l.y));m=Math.sqrt((f.x-a.x)*(f.x-a.x)+(f.y-a.y)*(f.y-a.y));var n=Math.sqrt((k.x-l.x)*(k.x-l.x)+(k.y-l.y)*(k.y-l.y)),z=m*g,g=n*g;z>v/2&&g>v/2?(z=v/2,g=v/2):z>v/2?(z=v/2,g=v/2*n/m):g>v/2&&(g=v/2,z=v/2*m/n);"S"==c&&(a==l&&(z=0),f==k&&(g=0));v=l.x+z*(f.x-a.x)/m;a=l.y+z*(f.y-a.y)/m;m=f.x-g*(k.x-l.x)/n;l=f.y-g*(k.y-
l.y)/n}return"C"+(v+","+a+" "+m+","+l+" "+f.x+","+f.y)}).join(" ")},getLabel:function(d,c,b){return e.doIfLoaded("dojo/number",function(e){return(c?e.format(d,{places:b}):e.format(d))||""},function(){return c?d.toFixed(b):d.toString()})}})});
define("dojo/_base/declare dojo/_base/array dojox/gfx ../Element ./common ../axis2d/common dojo/has".split(" "),function(g,f,n,m,k,e,l){g=g("dojox.charting.plot2d.Base",m,{constructor:function(d,c){c&&c.tooltipFunc&&(this.tooltipFunc=c.tooltipFunc)},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(d){return this},assignAxes:function(d){f.forEach(this.axes,function(c){this[c]&&this.setAxis(d[this[c]])},this)},addSeries:function(d){this.series.push(d);return this},getSeriesStats:function(){return k.collectSimpleStats(this.series)},
calculateAxes:function(d){this.initializeScalers(d,this.getSeriesStats());return this},initializeScalers:function(){return this},isDataDirty:function(){return f.some(this.series,function(d){return d.dirty})},render:function(d,c){return this},renderLabel:function(d,c,b,f,l,k,a){d=e.createText[this.opt.htmlLabels&&"vml"!=n.renderer?"html":"gfx"](this.chart,d,c,b,a?a:"middle",f,l.series.font,l.series.fontColor);k&&(this.opt.htmlLabels&&"vml"!=n.renderer?d.style.pointerEvents="none":d.rawNode&&(d.rawNode.style.pointerEvents=
"none"));this.opt.htmlLabels&&"vml"!=n.renderer&&this.htmlElements.push(d);return d},getRequiredColors:function(){return this.series.length},_getLabel:function(d){return k.getLabel(d,this.opt.fixed,this.opt.precision)}});l("dojo-bidi")&&g.extend({_checkOrientation:function(d,c,b){this.chart.applyMirroring(this.group,c,b)}});return g});
define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/has ./Base ../scaler/primitive dojox/gfx dojox/gfx/fx dojox/lang/utils".split(" "),function(g,f,n,m,k,e,l,d,c){return f("dojox.charting.plot2d.CartesianBase",k,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0},constructor:function(b,d){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=
d&&d.hAxis||"x";this.vAxis=d&&d.vAxis||"y";this.series=[];this.opt=g.clone(this.baseParams);c.updateWithObject(this.opt,d)},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(b,c){this.inherited(arguments);if(!c&&this.chart._nativeClip){var d=this.chart.offsets,e=this.chart.dim,a=Math.max(0,e.width-d.l-d.r),e=Math.max(0,e.height-d.t-d.b);this.group.setClip({x:d.l,y:d.t,width:a,height:e});this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},
purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||this.group},setAxis:function(b){b&&(this[b.vertical?"_vAxis":"_hAxis"]=b);return this},toPage:function(b){var c=this._hAxis,d=this._vAxis,e=c.getScaler(),a=d.getScaler(),f=e.scaler.getTransformerFromModel(e),l=a.scaler.getTransformerFromModel(a),k=this.chart.getCoords(),m=this.chart.offsets,g=this.chart.dim,e=function(a){var b={};b.x=f(a[c.name])+k.x+m.l;b.y=k.y+g.height-m.b-l(a[d.name]);
return b};return b?e(b):e},toData:function(b){var c=this._hAxis,d=this._vAxis,e=c.getScaler(),a=d.getScaler(),f=e.scaler.getTransformerFromPlot(e),l=a.scaler.getTransformerFromPlot(a),k=this.chart.getCoords(),m=this.chart.offsets,g=this.chart.dim,e=function(a){var b={};b[c.name]=f(a.x-k.x-m.l);b[d.name]=l(k.y+g.height-a.y-m.b);return b};return b?e(b):e},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},createLabel:function(b,c,d,e){if(this.opt.labels){var a,
f=this.opt.labelFunc?this.opt.labelFunc.apply(this,[c,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(c.y)?c:c.y);if("inside"==this.opt.labelStyle){var k=l._base._getTextBox(f,{font:e.series.font});c=d.x+d.width/2;a=d.y+d.height/2+k.h/4;if(k.w>d.width||k.h>d.height)return}else c=d.x+d.width/2,a=d.y-this.opt.labelOffset;this.renderLabel(b,c,a,f,e,"inside"==this.opt.labelStyle)}},performZoom:function(b,c){var e=this._vAxis.scale||1,f=this._hAxis.scale||1,a=b.height-c.b,l=this._hScaler.bounds,
l=(l.from-l.lower)*l.scale,k=this._vScaler.bounds,k=(k.from-k.lower)*k.scale,v=e/this.lastWindow.vscale,m=f/this.lastWindow.hscale,C=(this.lastWindow.xoffset-l)/(1==this.lastWindow.hscale?f:this.lastWindow.hscale),y=(k-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?e:this.lastWindow.vscale),z=this.getGroup(),a=d.animateTransform(g.delegate({shape:z,duration:1200,transform:[{name:"translate",start:[0,0],end:[c.l*(1-m),a*(1-v)]},{name:"scale",start:[1,1],end:[m,v]},{name:"original"},{name:"translate",
start:[0,0],end:[C,y]}]},this.zoom));g.mixin(this.lastWindow,{vscale:e,hscale:f,xoffset:l,yoffset:k});this.zoomQueue.push(a);n.connect(a,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(b,c){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(c.hmin,c.hmax,b.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=e.buildScaler(c.hmin,
c.hmax,b.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(c.vmin,c.vmax,b.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=e.buildScaler(c.vmin,c.vmax,b.height);return this}})});
define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){var r=c.lambda("item.purgeGroup()");return f("dojox.charting.plot2d.Default",[k,e],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",
fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(c,a){this.opt=g.clone(g.mixin(this.opt,this.defaultParams));b.updateWithObject(this.opt,a);b.updateWithPattern(this.opt,a,this.optionalParams);this.animate=this.opt.animate},createPath:function(b,a,c){var d;this.opt.enableCache&&0<b._pathFreePool.length?(d=b._pathFreePool.pop(),d.setShape(c),a.add(d)):d=a.createPath(c);this.opt.enableCache&&b._pathUsePool.push(d);
return d},buildSegments:function(b,a){for(var c=this.series[b],d=a?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,e=a?Math.min(c.data.length,Math.ceil(this._hScaler.bounds.to)):c.data.length,f=null,l=[];d<e;d++)if(null!=c.data[d]&&(a||null!=c.data[d].y))f||(f=[],l.push({index:d,rseg:f})),f.push(a&&c.data[d].hasOwnProperty("y")?c.data[d].y:c.data[d]);else if(!this.opt.interpolate||a)f=null;return l},render:function(b,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(b,a);this.resetEvents();
this.dirty=this.isDirty();var c;this.dirty&&(n.forEach(this.series,r),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),c=this.getGroup(),d.forEachRev(this.series,function(a){a.cleanGroup(c)}));for(var e=this.chart.theme,f,k,C=this.events(),y=this.series.length-1;0<=y;--y){var z=this.series[y];if(this.dirty||z.dirty)if(z.cleanGroup(),this.opt.enableCache&&(z._pathFreePool=(z._pathFreePool?z._pathFreePool:[]).concat(z._pathUsePool?z._pathUsePool:[]),z._pathUsePool=[]),z.data.length){var D=
e.next(this.opt.areas?"area":"line",[this.opt,z],!0),F,H=this._hScaler.scaler.getTransformerFromModel(this._hScaler),M=this._vScaler.scaler.getTransformerFromModel(this._vScaler),I=this._eventSeries[z.name]=Array(z.data.length);c=z.group;for(var J=n.some(z.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),K=this.buildSegments(y,J),G=0;G<K.length;G++){var S=K[G];F=J?n.map(S.rseg,function(c,d){return{x:H(d+S.index+1)+a.l,y:b.height-a.b-M(c),data:c}},this):n.map(S.rseg,function(c){return{x:H(c.x)+
a.l,y:b.height-a.b-M(c.y),data:c}},this);if(J&&this.opt.interpolate)for(;G<K.length;)G++,(S=K[G])&&(F=F.concat(n.map(S.rseg,function(c,d){return{x:H(d+S.index+1)+a.l,y:b.height-a.b-M(c),data:c}},this)));var O=this.opt.tension?l.curve(F,this.opt.tension):"";if(this.opt.areas&&1<F.length){var s=this._plotFill(D.series.fill,b,a),T=g.clone(F);this.opt.tension?z.dyn.fill=c.createPath(O+" "+("L"+T[T.length-1].x+","+(b.height-a.b)+" L"+T[0].x+","+(b.height-a.b)+" L"+T[0].x+","+T[0].y)).setFill(s).getFill():
(T.push({x:F[F.length-1].x,y:b.height-a.b}),T.push({x:F[0].x,y:b.height-a.b}),T.push(F[0]),z.dyn.fill=c.createPolyline(T).setFill(s).getFill())}if(this.opt.lines||this.opt.markers)f=D.series.stroke,D.series.outline&&(k=z.dyn.outline=l.makeStroke(D.series.outline),k.width=2*k.width+f.width);this.opt.markers&&(z.dyn.marker=D.symbol);var Q=null,U=null,N=null;if(f&&D.series.shadow&&1<F.length){var V=D.series.shadow,s=n.map(F,function(a){return{x:a.x+V.dx,y:a.y+V.dy}});this.opt.lines&&(z.dyn.shadow=this.opt.tension?
c.createPath(l.curve(s,this.opt.tension)).setStroke(V).getStroke():c.createPolyline(s).setStroke(V).getStroke());this.opt.markers&&D.marker.shadow&&(V=D.marker.shadow,N=n.map(s,function(a){return this.createPath(z,c,"M"+a.x+" "+a.y+" "+D.symbol).setStroke(V).setFill(V.color)},this))}if(this.opt.lines&&1<F.length){var P;k&&(z.dyn.outline=this.opt.tension?c.createPath(O).setStroke(k).getStroke():c.createPolyline(F).setStroke(k).getStroke());z.dyn.stroke=this.opt.tension?(P=c.createPath(O)).setStroke(f).getStroke():
(P=c.createPolyline(F)).setStroke(f).getStroke();P.setFilter&&D.series.filter&&P.setFilter(D.series.filter)}O=null;if(this.opt.markers){var aa=D,Q=Array(F.length),U=Array(F.length);k=null;aa.marker.outline&&(k=l.makeStroke(aa.marker.outline),k.width=2*k.width+(aa.marker.stroke?aa.marker.stroke.width:0));n.forEach(F,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var d="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&d.push(this.opt.styleFunc(a.data));aa=e.addMixin(D,"marker",
d,!0)}else aa=e.post(D,"marker");d="M"+a.x+" "+a.y+" "+aa.symbol;k&&(U[b]=this.createPath(z,c,d).setStroke(k));Q[b]=this.createPath(z,c,d).setStroke(aa.marker.stroke).setFill(aa.marker.fill)},this);z.dyn.markerFill=aa.marker.fill;z.dyn.markerStroke=aa.marker.stroke;!O&&this.opt.labels&&(O=Q[0].getBoundingBox());C?n.forEach(Q,function(a,b){var c={element:"marker",index:b+S.index,run:z,shape:a,outline:U[b]||null,shadow:N&&N[b]||null,cx:F[b].x,cy:F[b].y};J?(c.x=b+S.index+1,c.y=z.data[b+S.index]):(c.x=
S.rseg[b].x,c.y=z.data[b+S.index].y);this._connectEvents(c);I[b+S.index]=c},this):delete this._eventSeries[z.name]}if(this.opt.labels){var ea=O?O.width:2,ga=O?O.height:2;n.forEach(F,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var d="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&d.push(this.opt.styleFunc(a.data));aa=e.addMixin(D,"marker",d,!0)}else aa=e.post(D,"marker");this.createLabel(c,S.rseg[b],{x:a.x-ea/2,y:a.y-ga/2,width:ea,height:ga},aa)},this)}}z.dirty=!1}else z.dirty=
!1,e.skip();else e.skip(),this._reconnectEvents(z.name)}m("dojo-bidi")&&this._checkOrientation(this.group,b,a);this.animate&&(f=this.getGroup(),p.animateTransform(g.delegate({shape:f,duration:1200,transform:[{name:"translate",start:[0,b.height-a.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})});
define(["dojo/_base/declare","./Default"],function(g,f){return g("dojox.charting.plot2d.Lines",f,{constructor:function(){this.opt.lines=!0}})});
define(["dojo/_base/lang"],function(g){var f=function(f,e){return Math.abs(f-e)<=1E-6*(Math.abs(f)+Math.abs(e))},n=g.getObject("dojox.charting.scaler.common",!0),m={};return g.mixin(n,{doIfLoaded:function(f,e,l){if(void 0==m[f])try{m[f]=require(f)}catch(d){m[f]=null}return m[f]?e(m[f]):l()},getNumericLabel:function(k,e,l){var d="";n.doIfLoaded("dojo/number",function(b){d=(l.fixed?b.format(k,{places:0>e?-e:0}):b.format(k))||""},function(){d=l.fixed?k.toFixed(0>e?-e:0):k.toString()});if(l.labelFunc){var c=
l.labelFunc(d,k,e);if(c)return c}if(l.labels){for(var c=l.labels,b=0,p=c.length;b<p;){var r=Math.floor((b+p)/2);c[r].value<k?b=r+1:p=r}if(b<c.length&&f(c[b].value,k))return c[b].text;--b;if(0<=b&&b<c.length&&f(c[b].value,k))return c[b].text;b+=2;if(b<c.length&&f(c[b].value,k))return c[b].text}return d}})});
define(["dojo/_base/lang","./common"],function(g,f){function n(e,d){e=e.toLowerCase();for(var c=d.length-1;0<=c;--c)if(e===d[c])return!0;return!1}var m=g.getObject("dojox.charting.scaler.linear",!0),k=f.getNumericLabel,e=function(e,d,c,b,f,k,u){c=g.delegate(c);b||("major"==c.fixUpper&&(c.fixUpper="minor"),"major"==c.fixLower&&(c.fixLower="minor"));f||("minor"==c.fixUpper&&(c.fixUpper="micro"),"minor"==c.fixLower&&(c.fixLower="micro"));k||("micro"==c.fixUpper&&(c.fixUpper="none"),"micro"==c.fixLower&&
(c.fixLower="none"));var a=n(c.fixLower,["major"])?Math.floor(c.min/b)*b:n(c.fixLower,["minor"])?Math.floor(c.min/f)*f:n(c.fixLower,["micro"])?Math.floor(c.min/k)*k:c.min,q=n(c.fixUpper,["major"])?Math.ceil(c.max/b)*b:n(c.fixUpper,["minor"])?Math.ceil(c.max/f)*f:n(c.fixUpper,["micro"])?Math.ceil(c.max/k)*k:c.max;c.useMin&&(e=a);c.useMax&&(d=q);var t=!b||c.useMin&&n(c.fixLower,["major"])?e:Math.ceil(e/b)*b,v=!f||c.useMin&&n(c.fixLower,["major","minor"])?e:Math.ceil(e/f)*f,x=!k||c.useMin&&n(c.fixLower,
["major","minor","micro"])?e:Math.ceil(e/k)*k,C=b?(c.useMax&&n(c.fixUpper,["major"])?Math.round((d-t)/b):Math.floor((d-t)/b))+1:0,y=f?(c.useMax&&n(c.fixUpper,["major","minor"])?Math.round((d-v)/f):Math.floor((d-v)/f))+1:0;c=k?(c.useMax&&n(c.fixUpper,["major","minor","micro"])?Math.round((d-x)/k):Math.floor((d-x)/k))+1:0;var z=f?Math.round(b/f):0,D=k?Math.round(f/k):0,F=b?Math.floor(Math.log(b)/Math.LN10):0,H=f?Math.floor(Math.log(f)/Math.LN10):0,M=u/(d-e);isFinite(M)||(M=1);return{bounds:{lower:a,
upper:q,from:e,to:d,scale:M,span:u},major:{tick:b,start:t,count:C,prec:F},minor:{tick:f,start:v,count:y,prec:H},micro:{tick:k,start:x,count:c,prec:0},minorPerMajor:z,microPerMinor:D,scaler:m}};return g.mixin(m,{buildScaler:function(f,d,c,b,p,k){var m={fixUpper:"none",fixLower:"none",natural:!1};b&&("fixUpper"in b&&(m.fixUpper=String(b.fixUpper)),"fixLower"in b&&(m.fixLower=String(b.fixLower)),"natural"in b&&(m.natural=Boolean(b.natural)));k=!k||3>k?3:k;"min"in b&&(f=b.min);"max"in b&&(d=b.max);b.includeZero&&
(0<f&&(f=0),0>d&&(d=0));m.min=f;m.useMin=!0;m.max=d;m.useMax=!0;"from"in b&&(f=b.from,m.useMin=!1);"to"in b&&(d=b.to,m.useMax=!1);if(d<=f)return e(f,d,m,0,0,0,c);p||(p=d-f);p=Math.floor(Math.log(p)/Math.LN10);p=b&&"majorTickStep"in b?b.majorTickStep:Math.pow(10,p);var a=0,q=0,t;if(b&&"minorTickStep"in b)a=b.minorTickStep;else{do{a=p/10;if(!m.natural||0.9<a)if(t=e(f,d,m,p,a,0,c),t.bounds.scale*t.minor.tick>k)break;a=p/5;if(!m.natural||0.9<a)if(t=e(f,d,m,p,a,0,c),t.bounds.scale*t.minor.tick>k)break;
a=p/2;if(!m.natural||0.9<a)if(t=e(f,d,m,p,a,0,c),t.bounds.scale*t.minor.tick>k)break;return e(f,d,m,p,0,0,c)}while(0)}if(b&&"microTickStep"in b)q=b.microTickStep,t=e(f,d,m,p,a,q,c);else{do{q=a/10;if(!m.natural||0.9<q)if(t=e(f,d,m,p,a,q,c),3<t.bounds.scale*t.micro.tick)break;q=a/5;if(!m.natural||0.9<q)if(t=e(f,d,m,p,a,q,c),3<t.bounds.scale*t.micro.tick)break;q=a/2;if(!m.natural||0.9<q)if(t=e(f,d,m,p,a,q,c),3<t.bounds.scale*t.micro.tick)break;q=0}while(0)}return q?t:e(f,d,m,p,a,0,c)},buildTicks:function(e,
d){var c,b,f,r=e.major.start,m=e.minor.start,a=e.micro.start;if(d.microTicks&&e.micro.tick)c=e.micro.tick,b=a;else if(d.minorTicks&&e.minor.tick)c=e.minor.tick,b=m;else if(e.major.tick)c=e.major.tick,b=r;else return null;var q=1/e.bounds.scale;if(e.bounds.to<=e.bounds.from||isNaN(q)||!isFinite(q)||0>=c||isNaN(c)||!isFinite(c))return null;for(var t=[],v=[],g=[];b<=e.bounds.to+q;)Math.abs(r-b)<c/2?(f={value:r},d.majorLabels&&(f.label=k(r,e.major.prec,d)),t.push(f),r+=e.major.tick,m+=e.minor.tick):Math.abs(m-
b)<c/2?(d.minorTicks&&(f={value:m},d.minorLabels&&e.minMinorStep<=e.minor.tick*e.bounds.scale&&(f.label=k(m,e.minor.prec,d)),v.push(f)),m+=e.minor.tick):d.microTicks&&g.push({value:a}),a+=e.micro.tick,b+=c;return{major:t,minor:v,micro:g}},getTransformerFromModel:function(e){var d=e.bounds.from,c=e.bounds.scale;return function(b){return(b-d)*c}},getTransformerFromPlot:function(e){var d=e.bounds.from,c=e.bounds.scale;return function(b){return b/c+d}}})});
define(["dojo/_base/declare","../Element"],function(g,f){return g("dojox.charting.axis2d.Base",f,{constructor:function(f,m){this.vertical=m&&m.vertical;this.opt={};this.opt.min=m&&m.min;this.opt.max=m&&m.max},clear:function(){return this},initialized:function(){return!1},calculate:function(f,m,k){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(f,m){this.dirty=!1;return this}})});
define(["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(g,f,n,m,k){return f("dojox.charting.axis2d.Invisible",n,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(e,f){this.opt=g.clone(this.defaultParams);k.updateWithObject(this.opt,f);k.updateWithPattern(this.opt,f,this.optionalParams)},
dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(e,f){this.scale=e;this.offset=f;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(e,f,d){if(this.initialized())return this;var c=this.opt;
this.labels=c.labels;this.scaler=m.buildScaler(e,f,d,c);var b=this.scaler.bounds;"scale"in this&&(c.from=b.lower+this.offset,c.to=(b.upper-b.lower)/this.scale+c.from,!isFinite(c.from)||isNaN(c.from)||!isFinite(c.to)||isNaN(c.to)||c.to-c.from>=b.upper-b.lower?(delete c.from,delete c.to,delete this.scale,delete this.offset):(c.from<b.lower?(c.to+=b.lower-c.from,c.from=b.lower):c.to>b.upper&&(c.from+=b.upper-c.to,c.to=b.upper),this.offset=c.from-b.lower),this.scaler=m.buildScaler(e,f,d,c),1==this.scale&&
0==this.offset&&(delete this.scale,delete this.offset));return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})});
define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u){l=m(n("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",l,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,
minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,b){this.opt=g.clone(this.defaultParams);p.updateWithObject(this.opt,
b);p.updateWithPattern(this.opt,b,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0},setWindow:function(a,b){a!=this.scale&&(this._invalidMaxLabelSize=!0);return this.inherited(arguments)},_groupLabelWidth:function(a,c,d){if(!a.length)return 0;50<a.length&&(a.length=50);g.isObject(a[0])&&(a=r.map(a,function(a){return a.text}));d&&(a=r.map(a,function(a){return 0==g.trim(a).length?"":a.substring(0,
d)+this.trailingSymbol},this));a=a.join("<br>");return b._base._getTextBox(a,{font:c}).w||0},_getMaxLabelSize:function(a,b,c,e,l,p){if(null==this._maxLabelSize&&6==arguments.length){var k=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var r=g.clone(k);delete r.to;delete r.from;var m=d.buildScaler(a,b,c,r,k.to-k.from);m.minMinorStep=0;this._majorStart=m.major.start;k=d.buildTicks(m,k);if(p&&k){var u=m=0,n=function(a){a.label&&this.push(a.label)},M=[];this.opt.majorLabels&&(f.forEach(k.major,
n,M),m=this._groupLabelWidth(M,l,r.maxLabelCharCount),r.maxLabelSize&&(m=Math.min(r.maxLabelSize,m)));M=[];this.opt.dropLabels&&this.opt.minorLabels&&(f.forEach(k.minor,n,M),u=this._groupLabelWidth(M,l,r.maxLabelCharCount),r.maxLabelSize&&(u=Math.min(r.maxLabelSize,u)));this._maxLabelSize={majLabelW:m,minLabelW:u,majLabelH:p,minLabelH:p}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(a,c,e){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||
e!=this._oldSpan)&&Infinity!=a&&-Infinity!=c){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=e;var f=this.opt,l=this.chart.theme.axis,p=f.rotation%360,k=this.chart.theme.axis.tick.labelGap,r=f.font||l.majorTick&&l.majorTick.font||l.tick&&l.tick.font,l=r?b.normalizedLength(b.splitFontString(r).size):0,r=this._getMaxLabelSize(a,c,e,p,r,l);"number"!=typeof k&&(k=4);if(r&&f.dropLabels){var f=Math.abs(Math.cos(p*Math.PI/180)),m=Math.abs(Math.sin(p*Math.PI/
180));0>p&&(p+=360);switch(p){case 0:case 180:this.vertical?p=l:(p=r.majLabelW,l=r.minLabelW);break;case 90:case 270:this.vertical?(p=r.majLabelW,l=r.minLabelW):p=l;break;default:var p=this.vertical?Math.min(r.majLabelW,l/f):Math.min(r.majLabelW,l/m),u=Math.sqrt(r.minLabelW*r.minLabelW+l*l),l=Math.min(u,this.vertical?l*f+r.minLabelW*m:r.minLabelW*f+l*m)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(p,l)+k;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?
0:Math.floor((p+k)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=d.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var a={l:0,r:0,t:0,b:0};if(!this.scaler)return a;var c=this.opt,d=this.chart.theme.axis,e=this.chart.theme.axis.tick.labelGap,f=c.titleFont||d.title&&d.title.font,d=0==c.titleGap?0:c.titleGap||d.title&&d.title.gap,l=this.chart.theme.getTick("major",c),p=this.chart.theme.getTick("minor",c),f=f?b.normalizedLength(b.splitFontString(f).size):
0,k=c.rotation%360,r=c.leftBottom,m=Math.abs(Math.cos(k*Math.PI/180)),u=Math.abs(Math.sin(k*Math.PI/180));this.trailingSymbol=void 0===c.trailingSymbol||null===c.trailingSymbol?this.trailingSymbol:c.trailingSymbol;"number"!=typeof e&&(e=4);0>k&&(k+=360);var g=this._getMaxLabelSize();if(g){var n=Math.ceil(Math.max(g.majLabelW,g.minLabelW))+1,J=Math.ceil(Math.max(g.majLabelH,g.minLabelH))+1;if(this.vertical)switch(g=r?"l":"r",k){case 0:case 180:a[g]=n;a.t=a.b=J/2;break;case 90:case 270:a[g]=J;a.t=a.b=
n/2;break;default:45>=k||180<k&&225>=k?(a[g]=J*u/2+n*m,a[r?"t":"b"]=J*m/2+n*u,a[r?"b":"t"]=J*m/2):315<k||180>k&&135<k?(a[g]=J*u/2+n*m,a[r?"b":"t"]=J*m/2+n*u,a[r?"t":"b"]=J*m/2):90>k||180<k&&270>k?(a[g]=J*u+n*m,a[r?"t":"b"]=J*m+n*u):(a[g]=J*u+n*m,a[r?"b":"t"]=J*m+n*u)}else switch(g=r?"b":"t",k){case 0:case 180:a[g]=J;a.l=a.r=n/2;break;case 90:case 270:a[g]=n;a.l=a.r=J/2;break;default:45<=k&&90>=k||225<=k&&270>=k?(a[g]=J*m/2+n*u,a[r?"r":"l"]=J*u/2+n*m,a[r?"l":"r"]=J*u/2):90<=k&&135>=k||270<=k&&315>=
k?(a[g]=J*m/2+n*u,a[r?"l":"r"]=J*u/2+n*m,a[r?"r":"l"]=J*u/2):45>k||180<k&&225>k?(a[g]=J*m+n*u,a[r?"r":"l"]=J*u+n*m):(a[g]=J*m+n*u,a[r?"l":"r"]=J*u+n*m)}a[g]+=e+Math.max(0<l.length?l.length:0,0<p.length?p.length:0)+(c.title?f+d:0)}return a},cleanGroup:function(a){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(a,
b,d,e,f,l,p,k,r){if(!this.opt.enableCache||"html"==a)return c.createText[a](this.chart,b,d,e,f,l,p,k,r);0<this._textFreePool.length?(a=this._textFreePool.pop(),a.setShape({x:d,y:e,text:l,align:f}),b.add(a)):a=c.createText[a](this.chart,b,d,e,f,l,p,k);this._textUsePool.push(a);return a},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(c);return c},render:function(a,
e){var l,p,k,r,m,u,g,F,H,M,I,J,K,G,S=this._isRtl();if(!this.dirty||!this.scaler)return this;var O=this.opt;H=this.chart.theme.axis;var s=O.leftBottom,T=O.rotation%360,Q=0,U,N,Q=this.chart.theme.axis.tick.labelGap,V=O.font||H.majorTick&&H.majorTick.font||H.tick&&H.tick.font,P=O.titleFont||H.title&&H.title.font,aa=O.fontColor||H.majorTick&&H.majorTick.fontColor||H.tick&&H.tick.fontColor||"black",ea=O.titleFontColor||H.title&&H.title.fontColor||"black";m=0==O.titleGap?0:O.titleGap||H.title&&H.title.gap||
15;var ga=O.titleOrientation||H.title&&H.title.orientation||"axis",na=this.chart.theme.getTick("major",O),W=this.chart.theme.getTick("minor",O),Z=this.chart.theme.getTick("micro",O),ca="stroke"in O?O.stroke:H.stroke,ja=V?b.normalizedLength(b.splitFontString(V).size):0;u=Math.abs(Math.cos(T*Math.PI/180));U=Math.abs(Math.sin(T*Math.PI/180));var R=P?b.normalizedLength(b.splitFontString(P).size):0;"number"!=typeof Q&&(Q=4);0>T&&(T+=360);var ya=this._getMaxLabelSize(),ya=ya&&ya.majLabelW;if(this.vertical){K=
a.height-e.b;G=void 0;I=e.t;J=void 0;H=(a.height-e.b+e.t)/2;M=void 0;U=ja*U+(ya||0)*u+Q+Math.max(0<na.length?na.length:0,0<W.length?W.length:0)+R+m;g=0;F=-1;p=l=0;m=1;u=0;k=Q;r=0;switch(T){case 0:N="end";p=0.4*ja;break;case 90:N="middle";l=-ja;break;case 180:N="start";p=0.4*-ja;break;case 270:N="middle";break;default:45>T?(N="end",p=0.4*ja):90>T?(N="end",p=0.4*ja):135>T?N="start":225>T?(N="start",p=0.4*-ja):270>T?(N="start",l=s?0:0.4*ja):315>T?(N="end",l=s?0:0.4*ja):(N="end",p=0.4*ja)}if(s)G=J=e.l,
Q=ga&&"away"==ga?90:270,M=e.l-U+(270==Q?R:0),m=-1,k=-k;else switch(G=J=a.width-e.r,Q=ga&&"axis"==ga?90:270,M=a.width-e.r+U-(270==Q?0:R),N){case "start":N="end";break;case "end":N="start";break;case "middle":l+=ja}}else{G=e.l;K=void 0;J=a.width-e.r;I=void 0;M=(a.width-e.r+e.l)/2;H=void 0;U=ja*u+(ya||0)*U+Q+Math.max(0<na.length?na.length:0,0<W.length?W.length:0)+R+m;g=S?-1:1;m=p=l=F=0;u=1;k=0;r=Q;switch(T){case 0:N="middle";p=ja;break;case 90:N="start";l=0.4*-ja;break;case 180:N="middle";break;case 270:N=
"end";l=0.4*ja;break;default:45>T?(N="start",p=s?ja:0):135>T?(N="start",l=0.4*-ja):180>T?(N="start",p=s?0:-ja):225>T?(N="end",p=s?0:-ja):315>T?(N="end",p=s?0.4*ja:0):(N="end",p=s?ja:0)}if(s)K=I=a.height-e.b,Q=ga&&"axis"==ga?180:0,H=a.height-e.b+U-(Q?R:0);else switch(K=I=e.t,Q=ga&&"away"==ga?180:0,H=e.t-U+(Q?0:R),u=-1,r=-r,N){case "start":N="end";break;case "end":N="start";break;case "middle":p-=ja}}this.cleanGroup();var Ha=this.group,s=this.scaler,ga=this.ticks,va=d.getTransformerFromModel(this.scaler),
Y=O.title&&Q||T||!this.opt.htmlLabels||n("ie")||n("opera")?"gfx":"html",Ca=m*na.length,za=u*na.length,Da=this._skipInterval;Ha.createLine({x1:G,y1:K,x2:J,y2:I}).setStroke(ca);O.title&&(P=c.createText[Y](this.chart,Ha,M,H,"middle",O.title,P,ea),"html"==Y?this.htmlElements.push(P):P.setTransform(b.matrix.rotategAt(Q,M,H)));if(null==ga)return this.dirty=!1,this;var ra=0<ga.major.length?(ga.major[0].value-this._majorStart)/s.major.tick:0,Ea=this.opt.majorLabels;f.forEach(ga.major,function(a,c){var d=
va(a.value),e=(S?J:G)+g*d,f=K+F*d;c+=ra;this.createLine(Ha,{x1:e,y1:f,x2:e+Ca,y2:f+za}).setStroke(na);if(a.label&&(!Da||0==(c-(1+Da))%(1+Da))){var q=O.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,V,O.maxLabelCharCount):{text:a.label,truncated:!1},q=O.maxLabelSize?this.getTextWithLimitLength(q.text,V,O.maxLabelSize,q.truncated):q,d=this.createText(Y,Ha,e+(0<na.length?Ca:0)+k+(T?0:l),f+(0<na.length?za:0)+r+(T?0:p),N,q.text,V,aa);q.truncated&&this.chart.formatTruncatedLabel(d,a.label,Y);
q.truncated&&this.labelTooltip(d,this.chart,a.label,q.text,V,Y);"html"==Y?this.htmlElements.push(d):T&&d.setTransform([{dx:l,dy:p},b.matrix.rotategAt(T,e+(0<na.length?Ca:0)+k,f+(0<na.length?za:0)+r)])}},this);Ca=m*W.length;za=u*W.length;Ea=this.opt.minorLabels&&s.minMinorStep<=s.minor.tick*s.bounds.scale;f.forEach(ga.minor,function(a){var c=va(a.value),d=(S?J:G)+g*c,e=K+F*c;this.createLine(Ha,{x1:d,y1:e,x2:d+Ca,y2:e+za}).setStroke(W);if(Ea&&a.label){var f=O.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,
V,O.maxLabelCharCount):{text:a.label,truncated:!1},f=O.maxLabelSize?this.getTextWithLimitLength(f.text,V,O.maxLabelSize,f.truncated):f,c=this.createText(Y,Ha,d+(0<W.length?Ca:0)+k+(T?0:l),e+(0<W.length?za:0)+r+(T?0:p),N,f.text,V,aa);f.truncated&&this.chart.formatTruncatedLabel(c,a.label,Y);f.truncated&&this.labelTooltip(c,this.chart,a.label,f.text,V,Y);"html"==Y?this.htmlElements.push(c):T&&c.setTransform([{dx:l,dy:p},b.matrix.rotategAt(T,d+(0<W.length?Ca:0)+k,e+(0<W.length?za:0)+r)])}},this);Ca=
m*Z.length;za=u*Z.length;f.forEach(ga.micro,function(a){var b=va(a.value);a=G+g*b;b=K+F*b;this.createLine(Ha,{x1:a,y1:b,x2:a+Ca,y2:b+za}).setStroke(Z)},this);this.dirty=!1;return this},labelTooltip:function(a,c,d,f,l,p){var r=["dijit/Tooltip"],m={type:"rect"},u=["above","below"];f=b._base._getTextBox(f,{font:l}).w||0;l=l?b.normalizedLength(b.splitFontString(l).size):0;"html"==p?(g.mixin(m,e.position(a.firstChild,!0)),m.width=Math.ceil(f),m.height=Math.ceil(l),this._events.push({shape:dojo,handle:k.connect(a.firstChild,
"onmouseover",this,function(a){require(r,function(a){a.show(d,m,u)})})}),this._events.push({shape:dojo,handle:k.connect(a.firstChild,"onmouseout",this,function(a){require(r,function(a){a.hide(m)})})})):(p=a.getShape(),c=c.getCoords(),m=g.mixin(m,{x:p.x-f/2,y:p.y}),m.x+=c.x,m.y+=c.y,m.x=Math.round(m.x),m.y=Math.round(m.y),m.width=Math.ceil(f),m.height=Math.ceil(l),this._events.push({shape:a,handle:a.connect("onmouseenter",this,function(a){require(r,function(a){a.show(d,m,u)})})}),this._events.push({shape:a,
handle:a.connect("onmouseleave",this,function(a){require(r,function(a){a.hide(m)})})}))},_isRtl:function(){return!1}});return n("dojo-bidi")?m("dojox.charting.axis2d.Default",[l,u]):l});
define("dojo/_base/declare dijit/_WidgetBase dojox/gfx dojo/_base/array dojo/has dojo/has!dojo-bidi?../bidi/widget/Legend dojox/lang/functional dojo/dom dojo/dom-construct dojo/dom-class dijit/registry".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){f=g(k("dojo-bidi")?"dojox.charting.widget.NonBidiLegend":"dojox.charting.widget.Legend",f,{chartRef:"",horizontal:!0,swatchSize:18,legendBody:null,postCreate:function(){!this.chart&&this.chartRef&&((this.chart=p.byId(this.chartRef)||p.byNode(d.byId(this.chartRef)))||
console.log("Could not find chart instance with id: "+this.chartRef));this.chart=this.chart.chart||this.chart;this.refresh()},buildRendering:function(){this.domNode=c.create("table",{role:"group","aria-label":"chart legend","class":"dojoxLegendNode"});this.legendBody=c.create("tbody",null,this.domNode);this.inherited(arguments)},destroy:function(){this._surfaces&&m.forEach(this._surfaces,function(b){b.destroy()});this.inherited(arguments)},refresh:function(){this._surfaces&&m.forEach(this._surfaces,
function(a){a.destroy()});for(this._surfaces=[];this.legendBody.lastChild;)c.destroy(this.legendBody.lastChild);this.horizontal&&(b.add(this.domNode,"dojoxLegendHorizontal"),this._tr=c.create("tr",null,this.legendBody),this._inrow=0);var d=this.series||this.chart.series;if(0!=d.length)if("dojox.charting.plot2d.Pie"==d[0].chart.stack[0].declaredClass){var e=d[0].chart.stack[0];"number"==typeof e.run.data[0]?(d=l.map(e.run.data,"Math.max(x, 0)"),d=l.map(d,"/this",l.foldl(d,"+",0)),m.forEach(d,function(a,
b){this._addLabel(e.dyn[b],e._getLabel(100*a)+"%")},this)):m.forEach(e.run.data,function(a,b){this._addLabel(e.dyn[b],a.legend||a.text||a.y)},this)}else m.forEach(d,function(a){this._addLabel(a.dyn,a.legend||a.name)},this)},_addLabel:function(d,e){var a=c.create("td"),f=c.create("div",null,a),l=c.create("label",null,a),p=c.create("div",{style:{width:this.swatchSize+"px",height:this.swatchSize+"px","float":"left"}},f);b.add(f,"dojoxLegendIcon dijitInline");b.add(l,"dojoxLegendText");this._tr?(this._tr.appendChild(a),
++this._inrow===this.horizontal&&(this._tr=c.create("tr",null,this.legendBody),this._inrow=0)):c.create("tr",null,this.legendBody).appendChild(a);this._makeIcon(p,d);l.innerHTML=String(e);k("dojo-bidi")&&(l.dir=this.getTextDir(e,l.dir))},_makeIcon:function(b,c){var a=this.swatchSize,d=this.swatchSize,e=n.createSurface(b,d,a);this._surfaces.push(e);if(c.fill)e.createRect({x:2,y:2,width:d-4,height:a-4}).setFill(c.fill).setStroke(c.stroke);else if(c.stroke||c.marker){var f={x1:0,y1:a/2,x2:d,y2:a/2};
c.stroke&&e.createLine(f).setStroke(c.stroke);c.marker&&e.createPath({path:"M"+d/2+" "+a/2+" "+c.marker}).setFill(c.markerFill).setStroke(c.markerStroke)}else e.createRect({x:2,y:2,width:d-4,height:a-4}).setStroke("black"),e.createLine({x1:2,y1:2,x2:d-2,y2:a-2}).setStroke("black"),e.createLine({x1:2,y1:a-2,x2:d-2,y2:2}).setStroke("black")}});return k("dojo-bidi")?g("dojox.charting.widget.Legend",[f,e]):f});
define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(g,f,n){g.mixin(n,{filterRev:function(m,k,e){"string"==typeof m&&(m=m.split(""));e=e||f.global;k=n.lambda(k);for(var l=[],d,c=m.length-1;0<=c;--c)d=m[c],k.call(e,d,c,m)&&l.push(d);return l},forEachRev:function(m,k,e){"string"==typeof m&&(m=m.split(""));e=e||f.global;k=n.lambda(k);for(var l=m.length-1;0<=l;k.call(e,m[l],l,m),--l);},mapRev:function(m,k,e){"string"==typeof m&&(m=m.split(""));e=e||f.global;k=n.lambda(k);for(var l=m.length,
d=Array(l),l=l-1,c=0;0<=l;d[c++]=k.call(e,m[l],l,m),--l);return d},everyRev:function(m,k,e){"string"==typeof m&&(m=m.split(""));e=e||f.global;k=n.lambda(k);for(var l=m.length-1;0<=l;--l)if(!k.call(e,m[l],l,m))return!1;return!0},someRev:function(m,k,e){"string"==typeof m&&(m=m.split(""));e=e||f.global;k=n.lambda(k);for(var l=m.length-1;0<=l;--l)if(k.call(e,m[l],l,m))return!0;return!1}});return n});
define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(g,f,n,m){var k={};g.mixin(m,{foldl:function(e,f,d,c){"string"==typeof e&&(e=e.split(""));c=c||n.global;f=m.lambda(f);var b,p;if(g.isArray(e))for(b=0,p=e.length;b<p;d=f.call(c,d,e[b],b,e),++b);else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(b=0;e.hasNext();d=f.call(c,d,e.next(),b++,e));else for(b in e)b in k||(d=f.call(c,d,e[b],b,e));return d},foldl1:function(e,f,d){"string"==typeof e&&(e=e.split(""));
d=d||n.global;f=m.lambda(f);var c,b,p;if(g.isArray(e))for(c=e[0],b=1,p=e.length;b<p;c=f.call(d,c,e[b],b,e),++b);else if("function"==typeof e.hasNext&&"function"==typeof e.next){if(e.hasNext())for(c=e.next(),b=1;e.hasNext();c=f.call(d,c,e.next(),b++,e));}else for(b in p=!0,e)b in k||(p?(c=e[b],p=!1):c=f.call(d,c,e[b],b,e));return c},foldr:function(e,f,d,c){"string"==typeof e&&(e=e.split(""));c=c||n.global;f=m.lambda(f);for(var b=e.length;0<b;--b,d=f.call(c,d,e[b],b,e));return d},foldr1:function(e,
f,d){"string"==typeof e&&(e=e.split(""));d=d||n.global;f=m.lambda(f);for(var c=e.length,b=e[c-1],c=c-1;0<c;--c,b=f.call(d,b,e[c],c,e));return b},reduce:function(e,f,d){return 3>arguments.length?m.foldl1(e,f):m.foldl(e,f,d)},reduceRight:function(e,f,d){return 3>arguments.length?m.foldr1(e,f):m.foldr(e,f,d)},unfold:function(e,f,d,c,b){b=b||n.global;f=m.lambda(f);d=m.lambda(d);e=m.lambda(e);for(var p=[];!e.call(b,c);p.push(f.call(b,c)),c=d.call(b,c));return p}})});
define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(g,f,n){var m={};f.mixin(n,{keys:function(f){var e=[],l;for(l in f)l in m||e.push(l);return e},values:function(f){var e=[],l;for(l in f)l in m||e.push(f[l]);return e},filterIn:function(f,e,l){l=l||g.global;e=n.lambda(e);var d={},c,b;for(b in f)b in m||(c=f[b],e.call(l,c,b,f)&&(d[b]=c));return d},forIn:function(f,e,l){l=l||g.global;e=n.lambda(e);for(var d in f)d in m||e.call(l,f[d],d,f);return l},mapIn:function(f,e,l){l=l||g.global;
e=n.lambda(e);var d={},c;for(c in f)c in m||(d[c]=e.call(l,f[c],c,f));return d}});return n});
define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(g,f,n,m){var k={};f.mixin(m,{filter:function(e,l,d){"string"==typeof e&&(e=e.split(""));d=d||g.global;l=m.lambda(l);var c=[],b,p,r;if(f.isArray(e))for(p=0,r=e.length;p<r;++p)b=e[p],l.call(d,b,p,e)&&c.push(b);else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(p=0;e.hasNext();)b=e.next(),l.call(d,b,p++,e)&&c.push(b);else for(p in e)p in k||(b=e[p],l.call(d,b,p,e)&&c.push(b));return c},forEach:function(e,
l,d){"string"==typeof e&&(e=e.split(""));d=d||g.global;l=m.lambda(l);var c,b;if(f.isArray(e))for(c=0,b=e.length;c<b;l.call(d,e[c],c,e),++c);else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(c=0;e.hasNext();l.call(d,e.next(),c++,e));else for(c in e)c in k||l.call(d,e[c],c,e);return d},map:function(e,l,d){"string"==typeof e&&(e=e.split(""));d=d||g.global;l=m.lambda(l);var c,b,p;if(f.isArray(e))for(c=Array(b=e.length),p=0;p<b;c[p]=l.call(d,e[p],p,e),++p);else if("function"==typeof e.hasNext&&
"function"==typeof e.next)for(c=[],p=0;e.hasNext();c.push(l.call(d,e.next(),p++,e)));else for(p in c=[],e)p in k||c.push(l.call(d,e[p],p,e));return c},every:function(e,l,d){"string"==typeof e&&(e=e.split(""));d=d||g.global;l=m.lambda(l);var c,b;if(f.isArray(e))for(c=0,b=e.length;c<b;++c){if(!l.call(d,e[c],c,e))return!1}else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(c=0;e.hasNext();){if(!l.call(d,e.next(),c++,e))return!1}else for(c in e)if(!(c in k||l.call(d,e[c],c,e)))return!1;
return!0},some:function(e,l,d){"string"==typeof e&&(e=e.split(""));d=d||g.global;l=m.lambda(l);var c,b;if(f.isArray(e))for(c=0,b=e.length;c<b;++c){if(l.call(d,e[c],c,e))return!0}else if("function"==typeof e.hasNext&&"function"==typeof e.next)for(c=0;e.hasNext();){if(l.call(d,e.next(),c++,e))return!0}else for(c in e)if(!(c in k)&&l.call(d,e[c],c,e))return!0;return!1}});return m});
define(["../..","dojo/_base/lang","dojo/_base/array"],function(g,f,n){var m=f.getObject("lang.functional",!0,g),k={},e=1<"ab".split(/a*/).length?String.prototype.split:function(c){var b=this.split.call(this,c);(c=c.exec(this))&&0==c.index&&b.unshift("");return b},l=function(c){var b=[],d=e.call(c,/\s*->\s*/m);if(1<d.length)for(;d.length;)c=d.pop(),b=d.pop().split(/\s*,\s*|\s+/m),d.length&&d.push("(function("+b.join(", ")+"){ return ("+c+"); })");else if(c.match(/\b_\b/))b=["_"];else{var d=c.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),
f=c.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(d||f)d&&(b.push("$1"),c="$1"+c),f&&(b.push("$2"),c+="$2");else{var d=c.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],l={};n.forEach(d,
function(a){l.hasOwnProperty(a)||(b.push(a),l[a]=1)})}}return{args:b,body:c}},d=function(c){return c.length?function(){var b=c.length-1,d=m.lambda(c[b]).apply(this,arguments);for(--b;0<=b;--b)d=m.lambda(c[b]).call(this,d);return d}:function(b){return b}};f.mixin(m,{rawLambda:function(c){return l(c)},buildLambda:function(c){c=l(c);return"function("+c.args.join(",")+"){return ("+c.body+");}"},lambda:function(c){if("function"==typeof c)return c;if(c instanceof Array)return d(c);if(k.hasOwnProperty(c))return k[c];
var b=l(c);return k[c]=new Function(b.args,"return ("+b.body+");")},clearLambdaCache:function(){k={}}});return m});define(["./functional/lambda","./functional/array","./functional/object"],function(g){return g});
define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(g,f,n,m,k){var e=g.getObject("dojox.charting.axis2d.common",!0),l=function(d){d.marginLeft="0px";d.marginTop="0px";d.marginRight="0px";d.marginBottom="0px";d.paddingLeft="0px";d.paddingTop="0px";d.paddingRight="0px";d.paddingBottom="0px";d.borderLeftWidth="0px";d.borderTopWidth="0px";d.borderRightWidth="0px";d.borderBottomWidth="0px"};return g.mixin(e,{createText:{gfx:function(d,c,b,e,f,l,a,k){return c.createText({x:b,
y:e,text:l,align:f}).setFont(a).setFill(k)},html:function(d,c,b,e,r,u,a,q,t){c=f.doc.createElement("div");var v=c.style,g;d.getTextDir&&(c.dir=d.getTextDir(u));l(v);v.font=a;c.innerHTML=String(u).replace(/\s/g,"&nbsp;");v.color=q;v.position="absolute";v.left="-10000px";f.body().appendChild(c);var C=m.normalizedLength(m.splitFontString(a).size);t||(c.getBoundingClientRect?(g=c.getBoundingClientRect(),g=g.width||g.right-g.left):g=n.getMarginBox(c).w);"rtl"==c.dir&&(b+=t?t:g);f.body().removeChild(c);
v.position="relative";if(t)switch(v.width=t+"px",r){case "middle":v.textAlign="center";v.left=b-t/2+"px";break;case "end":v.textAlign="right";v.left=b-t+"px";break;default:v.left=b+"px",v.textAlign="left"}else switch(r){case "middle":v.left=Math.floor(b-g/2)+"px";break;case "end":v.left=Math.floor(b-g)+"px";break;default:v.left=Math.floor(b)+"px"}v.top=Math.floor(e-C)+"px";v.whiteSpace="nowrap";t=f.doc.createElement("div");v=t.style;l(v);v.width="0px";v.height="0px";t.appendChild(c);d.node.insertBefore(t,
d.node.firstChild);k("dojo-bidi")&&d.htmlElementsRegistry.push([t,b,e,r,u,a,q]);return t}}})});
define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(g,f,n){return f("dojox.charting.Series",n,{constructor:function(f,k,e){g.mixin(this,e);"string"!=typeof this.plot&&(this.plot="default");this.update(k)},clear:function(){this.dyn={}},update:function(f){g.isArray(f)?this.data=f:(this.source=f,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})});
define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(g,f,n,m,k){return n("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,constructor:function(e){this.chart=e;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol="...";this._events=[]},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.getGroup().removeShape();var e=this.getGroup().children;if(k.dispose)for(var l=0;l<e.length;++l)k.dispose(e[l],
!0);this.getGroup().rawNode&&f.empty(this.getGroup().rawNode);this.getGroup().clear();k.dispose&&k.dispose(this.getGroup(),!0);this.getGroup()!=this.group&&(this.group.rawNode&&f.empty(this.group.rawNode),this.group.clear(),k.dispose&&k.dispose(this.group,!0));this.group=null}this.dirty=!0;this._events.length&&(g.forEach(this._events,function(d){d.shape.disconnect(d.handle)}),this._events=[]);return this},cleanGroup:function(e){this.destroyHtmlElements();e||(e=this.chart.surface);if(this.group){var l;
e=this.getGroup().children;if(k.dispose)for(var d=0;d<e.length;++d)k.dispose(e[d],!0);this.getGroup().rawNode&&(l=this.getGroup().bgNode,f.empty(this.getGroup().rawNode));this.getGroup().clear();l&&this.getGroup().rawNode.appendChild(l)}else this.group=e.createGroup();this.dirty=!0;return this},getGroup:function(){return this.group},destroyHtmlElements:function(){this.htmlElements.length&&(g.forEach(this.htmlElements,f.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},getTextWidth:function(e,
f){return m._base._getTextBox(e,{font:f}).w||0},getTextWithLimitLength:function(e,f,d,c){if(!e||0>=e.length)return{text:"",truncated:c||!1};if(!d||0>=d)return{text:e,truncated:c||!1};var b=e.substring(0,1)+this.trailingSymbol,p=this.getTextWidth(b,f);if(d<=p)return{text:b,truncated:!0};if(this.getTextWidth(e,f)<=d)return{text:e,truncated:c||!1};c=0;for(b=e.length;c<b;){if(2>=b-c){for(;this.getTextWidth(e.substring(0,c)+this.trailingSymbol,f)>d;)c-=1;return{text:e.substring(0,c)+this.trailingSymbol,
truncated:!0}}p=c+Math.round(0.618*(b-c));this.getTextWidth(e.substring(0,p),f)<d?c=p:b=p}},getTextWithLimitCharCount:function(e,f,d,c){return!e||0>=e.length?{text:"",truncated:c||!1}:!d||0>=d||e.length<=d?{text:e,truncated:c||!1}:{text:e.substring(0,d)+this.trailingSymbol,truncated:!0}},_plotFill:function(e,f,d){if(!e||!e.type||!e.space)return e;var c=e.space,b;switch(e.type){case "linear":if("plot"===c||"shapeX"===c||"shapeY"===c){e=m.makeParameters(m.defaultLinearGradient,e);e.space=c;if("plot"===
c||"shapeX"===c)b=f.height-d.t-d.b,e.y1=d.t+b*e.y1/100,e.y2=d.t+b*e.y2/100;if("plot"===c||"shapeY"===c)b=f.width-d.l-d.r,e.x1=d.l+b*e.x1/100,e.x2=d.l+b*e.x2/100}break;case "radial":"plot"===c&&(e=m.makeParameters(m.defaultRadialGradient,e),e.space=c,c=f.width-d.l-d.r,f=f.height-d.t-d.b,e.cx=d.l+c*e.cx/100,e.cy=d.t+f*e.cy/100,e.r=e.r*Math.sqrt(c*c+f*f)/200);break;case "pattern":if("plot"===c||"shapeX"===c||"shapeY"===c){e=m.makeParameters(m.defaultPattern,e);e.space=c;if("plot"===c||"shapeX"===c)b=
f.height-d.t-d.b,e.y=d.t+b*e.y/100,e.height=b*e.height/100;if("plot"===c||"shapeY"===c)b=f.width-d.l-d.r,e.x=d.l+b*e.x/100,e.width=b*e.width/100}}return e},_shapeFill:function(e,f){if(!e||!e.space)return e;var d=e.space,c;switch(e.type){case "linear":if("shape"===d||"shapeX"===d||"shapeY"===d){e=m.makeParameters(m.defaultLinearGradient,e);e.space=d;if("shape"===d||"shapeX"===d)c=f.width,e.x1=f.x+c*e.x1/100,e.x2=f.x+c*e.x2/100;if("shape"===d||"shapeY"===d)c=f.height,e.y1=f.y+c*e.y1/100,e.y2=f.y+c*
e.y2/100}break;case "radial":"shape"===d&&(e=m.makeParameters(m.defaultRadialGradient,e),e.space=d,e.cx=f.x+f.width/2,e.cy=f.y+f.height/2,e.r=e.r*f.width/200);break;case "pattern":if("shape"===d||"shapeX"===d||"shapeY"===d){e=m.makeParameters(m.defaultPattern,e);e.space=d;if("shape"===d||"shapeX"===d)c=f.width,e.x=f.x+c*e.x/100,e.width=c*e.width/100;if("shape"===d||"shapeY"===d)c=f.height,e.y=f.y+c*e.y/100,e.height=c*e.height/100}}return e},_pseudoRadialFill:function(e,f,d,c,b){if(!e||"radial"!==
e.type||"shape"!==e.space)return e;var p=e.space;e=m.makeParameters(m.defaultRadialGradient,e);e.space=p;if(4>arguments.length)return e.cx=f.x,e.cy=f.y,e.r=e.r*d/100,e;p=5>arguments.length?c:(b+c)/2;return{type:"linear",x1:f.x,y1:f.y,x2:f.x+e.r*d*Math.cos(p)/100,y2:f.y+e.r*d*Math.sin(p)/100,colors:e.colors}}})});
define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x){function C(a,b){a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max));return a||b}function y(a,
b){var c={},d={};n.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(d[a.hAxis]=C(d[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(d[a.vAxis]=C(d[a.vAxis],{min:b.vmin,max:b.vmax}))});n.forEach(a,function(a){var e=c[a.name];if(a.hAxis){var f=d[a.hAxis];e.hmin=f.min;e.hmax=f.max}a.vAxis&&(f=d[a.vAxis],e.vmin=f.min,e.vmax=f.max);a.initializeScalers(b,e)})}var z=f.getObject("charting",!0,g),D=x.lambda("item.clear()"),F=x.lambda("item.purgeGroup()"),H=x.lambda("item.destroy()"),M=x.lambda("item.dirty = false"),
I=x.lambda("item.dirty = true"),J=x.lambda("item.name");g=m(b("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(a,b){b||(b={});this.margins=b.margins?b.margins:{l:10,t:10,r:10,b:10};this.stroke=b.stroke;this.fill=b.fill;this.delayInMs=b.delayInMs||200;this.title=b.title;this.titleGap=b.titleGap;this.titlePos=b.titlePos;this.titleFont=b.titleFont;this.titleFontColor=b.titleFontColor;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in b&&(this.htmlLabels=
b.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=e.byId(a);var c=l.getMarginBox(a);this.surface=t.createSurface(this.node,c.w||400,c.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},destroy:function(){n.forEach(this.series,H);n.forEach(this.stack,H);x.forIn(this.axes,H);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&d.destroy(this.chartTitle)},getCoords:function(){var a=this.node,
b=k.getComputedStyle(a),b=l.getMarginBox(a,b),a=l.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this.dirty=!0;return this},addAxis:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!z.axis2d||!z.axis2d[c])throw Error("Can't find axis: "+c+" - Check require() dependencies.");c=new z.axis2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=c;this.dirty=!0;return this},getAxis:function(a){return this.axes[a]},
removeAxis:function(a){a in this.axes&&(this.axes[a].destroy(),delete this.axes[a],this.dirty=!0);return this},addPlot:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!z.plot2d||!z.plot2d[c])throw Error("Can't find plot: "+c+" - didn't you forget to dojo.require() it?");c=new z.plot2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=this.stack.length,this.stack.push(c));this.dirty=
!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);x.forIn(this.plots,function(a,c,d){a>b&&(d[c]=a-1)});var c=n.filter(this.series,function(b){return b.plot!=a});c.length<this.series.length&&(n.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},n.forEach(c,function(a,b){this.runs[a.plot]=b},this),this.series=c);this.dirty=!0}return this},
getPlotOrder:function(){return x.map(this.stack,J)},setPlotOrder:function(a){var b={},c=x.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&x.forEach(this.stack,function(a){a=a.name;a in b||c.push(a)});a=x.map(c,function(a){return this.stack[this.plots[a]]},this);x.forEach(a,function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();
c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){b=new u(this,b,c);b.name=a;a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));this.dirty=!0;!("ymin"in b)&&"min"in b&&(b.ymin=b.min);!("ymax"in
b)&&"max"in b&&(b.ymax=b.max);return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);x.forIn(this.runs,function(a,c,d){a>b&&(d[c]=a-1)});this.dirty=!0}return this},updateSeries:function(a,b,c){a in this.runs&&(a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,!1),this._invalidateDependentPlots(a.plot,!0)));return this},
getSeriesOrder:function(a){return x.map(x.filter(this.series,function(b){return b.plot==a}),J)},setSeriesOrder:function(a){var b,c={},d=x.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var d=this.series[this.runs[a]];if(b){if(d.plot!=b)return!1}else b=d.plot;c[a]=1;return!0},this);x.forEach(this.series,function(a){var e=a.name;e in c||a.plot!=b||d.push(e)});this.series=x.map(d,function(a){return this.series[this.runs[a]]},this).concat(x.filter(this.series,function(a){return a.plot!=b}));
x.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),this.setSeriesOrder(c)}return this},resize:function(a,b){switch(arguments.length){case 1:l.setMarginBox(this.node,
a);break;case 2:l.setMarginBox(this.node,{w:a,h:b})}var c=l.getMarginBox(this.node),d=this.surface.getDimensions();return d.width!=c.w||d.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};x.forIn(this.axes,function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,d){var e=this.axes[a];e&&(e.setWindow(b,c),n.forEach(this.stack,function(b){if(b.hAxis==
a||b.vAxis==a)b.zoom=d}));return this},setWindow:function(a,b,c,d,e){"plotArea"in this||this.calculateGeometry();x.forIn(this.axes,function(e){var f,l;f=e.getScaler().bounds;l=f.span/(f.upper-f.lower);e.vertical?(f=b,l=d/l/f):(f=a,l=c/l/f);e.setWindow(f,l)});n.forEach(this.stack,function(a){a.zoom=e});return this},zoomIn:function(a,b,c){var d=this.axes[a];if(d){var d=d.getScaler().bounds,e=Math.min(b[0],b[1]),f=Math.max(b[0],b[1]),e=b[0]<d.lower?d.lower:e,f=b[1]>d.upper?d.upper:f;this.setAxisWindow(a,
(d.upper-d.lower)/(f-e),e-d.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=n.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);y(a,this.plotArea);return this},fullGeometry:function(){this._makeDirty();n.forEach(this.stack,D);this.theme||this.setTheme(new r);n.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!z.plot2d||!z.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");
var b=new z.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this);n.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},this);var a=this.dim=this.surface.getDimensions();a.width=t.normalizedLength(a.width);a.height=t.normalizedLength(a.height);x.forIn(this.axes,D);y(this.stack,a);var c=this.offsets={l:0,r:0,t:0,b:0},d=this;x.forIn(this.axes,function(a){b("dojo-bidi")&&d._resetLeftBottom(a);
x.forIn(a.getOffsets(),function(a,b){c[b]=Math.max(a,c[b])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var e=t.normalizedLength(t.splitFontString(this.titleFont).size);c["top"==this.titlePos?"t":"b"]+=e+this.titleGap}x.forIn(this.margins,function(a,
b){c[b]+=a});this.plotArea={width:a.width-c.l-c.r,height:a.height-c.t-c.b};x.forIn(this.axes,D);y(this.stack,this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();x.forEachRev(this.stack,function(a){a.render(this.dim,this.offsets)},this);x.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();
return this},fullRender:function(){this.fullGeometry();var c=this.offsets,e=this.dim,f=Math.max(0,e.width-c.l-c.r),l=Math.max(0,e.height-c.t-c.b);n.forEach(this.series,F);x.forIn(this.axes,F);n.forEach(this.stack,F);var p=this.surface.children;if(q.dispose)for(var k=0;k<p.length;++k)q.dispose(p[k]);this.chartTitle&&this.chartTitle.tagName&&d.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(e,c);this._renderPlotBackground(e,c,f,l);x.foldr(this.stack,function(a,
b){return b.render(e,c),0},0);this._nativeClip||this._renderChartBackground(e,c);this.title&&(f="canvas"==t.renderer&&this.htmlLabels||!b("ie")&&!b("opera")&&this.htmlLabels?"html":"gfx",l=t.normalizedLength(t.splitFontString(this.titleFont).size),this.chartTitle=a.createText[f](this,this.surface,e.width/2,"top"==this.titlePos?l+this.margins.t:e.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor));x.forIn(this.axes,function(a){a.render(e,c)});this._makeClean();return this},
_renderChartBackground:function(a,b){var d=this.theme,e,f=void 0!==this.fill?this.fill:d.chart&&d.chart.fill,d=void 0!==this.stroke?this.stroke:d.chart&&d.chart.stroke;if("inherit"==f)for(e=this.node,f=new c(k.get(e,"backgroundColor"));0==f.a&&e!=document.documentElement;)f=new c(k.get(e,"backgroundColor")),e=e.parentNode;f&&(this._nativeClip?(f=p.prototype._shapeFill(p.prototype._plotFill(f,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(f)):
(f=p.prototype._plotFill(f,a,b),b.l&&(e={x:0,y:0,width:b.l,height:a.height+1},this.surface.createRect(e).setFill(p.prototype._shapeFill(f,e))),b.r&&(e={x:a.width-b.r,y:0,width:b.r+1,height:a.height+2},this.surface.createRect(e).setFill(p.prototype._shapeFill(f,e))),b.t&&(e={x:0,y:0,width:a.width+1,height:b.t},this.surface.createRect(e).setFill(p.prototype._shapeFill(f,e))),b.b&&(e={x:0,y:a.height-b.b,width:a.width+1,height:b.b+2},this.surface.createRect(e).setFill(p.prototype._shapeFill(f,e)))));
d&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(d)},_renderPlotBackground:function(a,b,c,d){var e=this.theme,f=e.plotarea&&e.plotarea.fill,e=e.plotarea&&e.plotarea.stroke,l={x:b.l-1,y:b.t-1,width:c+2,height:d+2};f&&(f=p.prototype._shapeFill(p.prototype._plotFill(f,a,b),l),this.surface.createRect(l).setFill(f));e&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:d+1}).setStroke(e)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(f.hitch(this,
function(){this.render()}),this.delayInMs));return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var d=this.series[this.runs[a]].plot;d in this.plots&&(d=this.stack[this.plots[d]])&&d.fireEvent(a,b,c)}return this},_makeClean:function(){n.forEach(this.axes,M);n.forEach(this.stack,M);n.forEach(this.series,M);this.dirty=!1},_makeDirty:function(){n.forEach(this.axes,I);n.forEach(this.stack,I);n.forEach(this.series,
I);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],d,e=b?"vAxis":"hAxis";c[e]?(d=this.axes[c[e]])&&d.dependOnData()&&(d.dirty=!0,n.forEach(this.stack,function(a){a[e]&&a[e]==c[e]&&(a.dirty=!0)})):c.dirty=!0}},setDir:function(a){return this},_resetLeftBottom:function(a){},formatTruncatedLabel:function(a,b,c){}});return b("dojo-bidi")?m("dojox.charting.Chart",[g,v]):g});
define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/_base/declare dojo/query dijit/_WidgetBase ../Chart dojo/has dojo/has!dojo-bidi?../bidi/widget/Chart dojox/lang/utils dojox/lang/functional dojox/lang/functional/lambda".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u){var a,q,t,v,x,C=function(a){return a},y=f.getObject("dojox.charting");a=function(a,b,c){var d=eval("("+b+".prototype.defaultParams)"),e,f;for(e in d)e in c||(f=a.getAttribute(e),c[e]=p.coerceType(d[e],null==
f||"undefined"==typeof f?d[e]:f));b=eval("("+b+".prototype.optionalParams)");for(e in b)e in c||(f=a.getAttribute(e),null!=f&&(c[e]=p.coerceType(b[e],f)))};q=function(b){var c=b.getAttribute("name"),d=b.getAttribute("type");if(!c)return null;var c={name:c,kwArgs:{}},e=c.kwArgs;if(d){y.axis2d[d]&&(d=g._scopeName+"x.charting.axis2d."+d);var f=eval("("+d+")");f&&(e.type=f)}else d=g._scopeName+"x.charting.axis2d.Default";a(b,d,e);if(e.font||e.fontColor)e.tick||(e.tick={}),e.font&&(e.tick.font=e.font),
e.fontColor&&(e.tick.fontColor=e.fontColor);return c};t=function(b){var c=b.getAttribute("name"),d=b.getAttribute("type");if(!c)return null;var c={name:c,kwArgs:{}},e=c.kwArgs;if(d){y.plot2d&&y.plot2d[d]&&(d=g._scopeName+"x.charting.plot2d."+d);var f=eval("("+d+")");f&&(e.type=f)}else d=g._scopeName+"x.charting.plot2d.Default";a(b,d,e);var d=eval("("+d+".prototype.baseParams)"),l;for(l in d)l in e||(f=b.getAttribute(l),e[l]=p.coerceType(d[l],null==f||"undefined"==typeof f?d[l]:f));return c};v=function(b){var c=
b.getAttribute("plot"),d=b.getAttribute("type");c||(c="default");var c={plot:c,kwArgs:{}},e=c.kwArgs;if(d){y.action2d[d]&&(d=g._scopeName+"x.charting.action2d."+d);var f=eval("("+d+")");if(!f)return null;c.action=f}else return null;a(b,d,e);return c};x=function(a){a=f.partial(m.get,a);var b=a("name");if(!b)return null;var b={name:b,kwArgs:{}},c=b.kwArgs,d;d=a("plot");null!=d&&(c.plot=d);d=a("marker");null!=d&&(c.marker=d);d=a("stroke");null!=d&&(c.stroke=eval("("+d+")"));d=a("outline");null!=d&&(c.outline=
eval("("+d+")"));d=a("shadow");null!=d&&(c.shadow=eval("("+d+")"));d=a("fill");null!=d&&(c.fill=eval("("+d+")"));d=a("font");null!=d&&(c.font=d);d=a("fontColor");null!=d&&(c.fontColor=eval("("+d+")"));d=a("legend");null!=d&&(c.legend=d);d=a("data");if(null!=d)return b.type="data",b.data=d?n.map(String(d).split(","),Number):[],b;d=a("array");if(null!=d)return b.type="data",b.data=eval("("+d+")"),b;d=a("store");if(null!=d){b.type="store";b.data=eval("("+d+")");d=a("field");b.field=null!=d?d:"value";
if(d=a("query"))c.query=d;if(d=a("queryOptions"))c.queryOptions=eval("("+d+")");if(d=a("start"))c.start=Number(d);if(d=a("count"))c.count=Number(d);if(d=a("sort"))c.sort=eval("("+d+")");if(d=a("valueFn"))c.valueFn=u.lambda(d);return b}return null};l=k(c("dojo-bidi")?"dojox.charting.widget.NonBidiChart":"dojox.charting.widget.Chart",l,{theme:null,margins:null,stroke:void 0,fill:void 0,buildRendering:function(){this.inherited(arguments);var a=this.domNode,b=e("> .axis",a).map(q).filter(C),c=e("> .plot",
a).map(t).filter(C),l=e("> .action",a).map(v).filter(C),k=e("> .series",a).map(x).filter(C);a.innerHTML="";var m=this.chart=new d(a,{margins:this.margins,stroke:this.stroke,fill:this.fill,textDir:this.textDir});this.theme&&m.setTheme(this.theme);b.forEach(function(a){m.addAxis(a.name,a.kwArgs)});c.forEach(function(a){m.addPlot(a.name,a.kwArgs)});this.actions=l.map(function(a){return new a.action(m,a.plot,a.kwArgs)});r.foldl(k,function(a,b){if("data"==b.type)m.addSeries(b.name,b.data,b.kwArgs),a=!0;
else{m.addSeries(b.name,[0],b.kwArgs);var c={};p.updateWithPattern(c,b.kwArgs,{query:"",queryOptions:null,start:0,count:1},!0);b.kwArgs.sort&&(c.sort=f.clone(b.kwArgs.sort));f.mixin(c,{onComplete:function(a){if("valueFn"in b.kwArgs){var c=b.kwArgs.valueFn;a=n.map(a,function(a){return c(b.data.getValue(a,b.field,0))})}else a=n.map(a,function(a){return b.data.getValue(a,b.field,0)});m.addSeries(b.name,a,b.kwArgs).render()}});b.data.fetch(c)}return a},!1)&&m.render()},destroy:function(){this.chart.destroy();
this.inherited(arguments)},resize:function(a){this.chart.resize.apply(this.chart,arguments)}});return c("dojo-bidi")?k("dojox.charting.widget.Chart",[l,b]):l});
define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(g,f,n,m){var k=g.getObject("dojox.html",!0),e={},l={},d=[];k.insertCssRule=function(c,b,d){d=k.getDynamicStyleSheet(d);var e=c+" {"+b+"}";console.log("insertRule:",e);m("ie")?(d.cssText+=e,console.log("ss.cssText:",d.cssText)):d.sheet?d.sheet.insertRule(e,d._indicies.length):d.appendChild(n.doc.createTextNode(e));d._indicies.push(c+" "+b);return c};k.removeCssRule=function(c,b,d){var f,l=-1,a,k;for(a in e)if(!d||
d===a){f=e[a];for(k=0;k<f._indicies.length;k++)if(c+" "+b===f._indicies[k]){l=k;break}if(-1<l)break}if(!f)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===l)return console.warn("The css rule was not found and could not be removed."),!1;f._indicies.splice(l,1);m("ie")?f.removeRule(l):f.sheet&&f.sheet.deleteRule(l);return!0};k.modifyCssRule=function(c,b,d){};k.getStyleSheet=function(c){if(e[c||"default"])return e[c||"default"];if(!c)return!1;var b=
k.getStyleSheets();if(b[c])return k.getStyleSheets()[c];for(var d in b)if(b[d].href&&-1<b[d].href.indexOf(c))return b[d];return!1};k.getDynamicStyleSheet=function(c){c||(c="default");e[c]||(n.doc.createStyleSheet?(e[c]=n.doc.createStyleSheet(),9>m("ie")&&(e[c].title=c)):(e[c]=n.doc.createElement("style"),e[c].setAttribute("type","text/css"),n.doc.getElementsByTagName("head")[0].appendChild(e[c]),console.log(c," ss created: ",e[c].sheet)),e[c]._indicies=[]);return e[c]};k.enableStyleSheet=function(c){if(c=
k.getStyleSheet(c))c.sheet?c.sheet.disabled=!1:c.disabled=!1};k.disableStyleSheet=function(c){if(c=k.getStyleSheet(c))c.sheet?c.sheet.disabled=!0:c.disabled=!0};k.activeStyleSheet=function(c){var b=k.getToggledStyleSheets(),d;if(1===arguments.length)f.forEach(b,function(b){b.disabled=b.title===c?!1:!0});else for(d=0;d<b.length;d++)if(!1===b[d].disabled)return b[d];return!0};k.getPreferredStyleSheet=function(){};k.getToggledStyleSheets=function(){var c;if(!d.length){var b=k.getStyleSheets();for(c in b)b[c].title&&
d.push(b[c])}return d};k.getStyleSheets=function(){if(l.collected)return l;f.forEach(n.doc.styleSheets,function(c){var b=c.sheet?c.sheet:c;c=b.title||b.href;m("ie")?-1===b.cssText.indexOf("#default#VML")&&(b.href?l[c]=b:b.imports.length?f.forEach(b.imports,function(b){l[b.title||b.href]=b}):l[c]=b):(l[c]=b,l[c].id=b.ownerNode.id,f.forEach(b.cssRules,function(c){c.href&&(l[c.href]=c.styleSheet,l[c.href].id=b.ownerNode.id)}))});l.collected=!0;return l};return k});
define(["dojo/_base/kernel","dojo/_base/declare","./Base","../main"],function(g,f,n,m){g.experimental("dojox.gesture.swipe");g=f(n,{defaultEvent:"swipe",subEvents:["end"],press:function(f,e){e.touches&&2<=e.touches.length?delete f.context:(f.context||(f.context={x:0,y:0,t:0}),f.context.x=e.screenX,f.context.y=e.screenY,f.context.t=(new Date).getTime(),this.lock(e.currentTarget))},move:function(f,e){this._recognize(f,e,"swipe")},release:function(f,e){this._recognize(f,e,"swipe.end");delete f.context;
this.unLock()},cancel:function(f,e){delete f.context;this.unLock()},_recognize:function(f,e,l){f.context&&(f=this._getSwipeInfo(f,e))&&(f.type=l,this.fire(e.target,f))},_getSwipeInfo:function(f,e){var l,d,c={};d=f.context;c.time=(new Date).getTime()-d.t;l=e.screenX-d.x;d=e.screenY-d.y;if(0===l&&0===d)return null;c.dx=l;c.dy=d;return c}});m.gesture.swipe=new g;m.gesture.swipe.Swipe=g;return m.gesture.swipe});
define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom dojo/on dojo/touch dojo/has ../main".split(" "),function(g,f,n,m,k,e,l,d,c){g.experimental("dojox.gesture.Base");m.getObject("gesture",!0,c);return f(null,{defaultEvent:" ",subEvents:[],touchOnly:!1,_elements:null,constructor:function(b){m.mixin(this,b);this.init()},init:function(){this._elements=[];if(!d("touch")&&this.touchOnly)console.warn("Gestures:[",this.defaultEvent,"] is only supported on touch devices!");
else{var b=this.defaultEvent;this.call=this._handle(b);this._events=[b];n.forEach(this.subEvents,function(c){this[c]=this._handle(b+"."+c);this._events.push(b+"."+c)},this)}},_handle:function(b){var c=this;return function(d,f){var a=arguments;2<a.length&&(d=a[1],f=a[2]);if(d&&(d.nodeType||d.attachEvent||d.addEventListener)){var l=c._add(d,b,f);return{remove:function(){l.remove();c._remove(d,b)}}}return e(d,b,f)}},_add:function(b,c,d){var f=this._getGestureElement(b);if(!f){var f={target:b,data:{},
handles:{}},a=m.hitch(this,"_process",f,"press"),k=m.hitch(this,"_process",f,"move"),t=m.hitch(this,"_process",f,"release"),v=m.hitch(this,"_process",f,"cancel"),g=f.handles;this.touchOnly?(g.press=e(b,"touchstart",a),g.move=e(b,"touchmove",k),g.release=e(b,"touchend",t),g.cancel=e(b,"touchcancel",v)):(g.press=l.press(b,a),g.move=l.move(b,k),g.release=l.release(b,t),g.cancel=l.cancel(b,v));this._elements.push(f)}f.handles[c]=f.handles[c]?++f.handles[c]:1;return e(b,c,d)},_getGestureElement:function(b){for(var c=
0,d;c<this._elements.length;c++)if(d=this._elements[c],d.target===b)return d},_process:function(b,c,d){d._locking=d._locking||{};d._locking[this.defaultEvent]||this.isLocked(d.currentTarget)||("INPUT"==d.target.tagName&&"radio"!=d.target.type&&"checkbox"!=d.target.type||"TEXTAREA"==d.target.tagName||d.preventDefault(),d._locking[this.defaultEvent]=!0,this[c](b.data,d))},press:function(b,c){},move:function(b,c){},release:function(b,c){},cancel:function(b,c){},fire:function(b,c){b&&c&&(c.bubbles=!0,
c.cancelable=!0,e.emit(b,c.type,c))},_remove:function(b,c){var d=this._getGestureElement(b);if(d&&d.handles){d.handles[c]--;var e=d.handles;n.some(this._events,function(a){return 0<e[a]})||(this._cleanHandles(e),d=n.indexOf(this._elements,d),0<=d&&this._elements.splice(d,1))}},_cleanHandles:function(b){for(var c in b)b[c].remove&&b[c].remove(),delete b[c]},lock:function(b){this._lock=b},unLock:function(){this._lock=null},isLocked:function(b){return this._lock&&b?this._lock!==b&&k.isDescendant(b,this._lock):
!1},destroy:function(){n.forEach(this._elements,function(b){this._cleanHandles(b.handles)},this);this._elements=null}})});
define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","./Base","../main"],function(g,f,n,m,k){g.experimental("dojox.gesture.tap");g=f(m,{defaultEvent:"tap",subEvents:["hold","doubletap"],holdThreshold:500,doubleTapTimeout:250,tapRadius:10,press:function(e,f){if(f.touches&&2<=f.touches.length)clearTimeout(e.tapTimeOut),delete e.context;else{var d=f.target;this._initTap(e,f);e.tapTimeOut=setTimeout(n.hitch(this,function(){this._isTap(e,f)&&this.fire(d,{type:"tap.hold"});delete e.context}),
this.holdThreshold)}},release:function(e,f){if(e.context&&this._isTap(e,f))switch(e.context.c){case 1:this.fire(f.target,{type:"tap"});break;case 2:this.fire(f.target,{type:"tap.doubletap"})}clearTimeout(e.tapTimeOut)},_initTap:function(e,f){e.context||(e.context={x:0,y:0,t:0,c:0});var d=(new Date).getTime();d-e.context.t<=this.doubleTapTimeout?e.context.c++:(e.context.c=1,e.context.x=f.screenX,e.context.y=f.screenY);e.context.t=d},_isTap:function(e,f){var d=Math.abs(e.context.x-f.screenX),c=Math.abs(e.context.y-
f.screenY);return d<=this.tapRadius&&c<=this.tapRadius}});k.gesture.tap=new g;k.gesture.tap.Tap=g;return k.gesture.tap});
define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(g,f,n,m,k,e){return n("dojox.gfx.Mover",null,{constructor:function(f,d,c){this.shape=f;this.lastX=d.clientX;this.lastY=d.clientY;f=this.host=c;d=document;c=m(d,k.move,g.hitch(this,"onFirstMove"));this.events=[m(d,k.move,g.hitch(this,"onMouseMove")),m(d,k.release,g.hitch(this,"destroy")),m(d,"dragstart",g.hitch(e,"stop")),m(d,"selectstart",g.hitch(e,"stop")),c];if(f&&f.onMoveStart)f.onMoveStart(this)},
onMouseMove:function(f){var d=f.clientX,c=f.clientY;this.host.onMove(this,{dx:d-this.lastX,dy:c-this.lastY});this.lastX=d;this.lastY=c;e.stop(f)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){f.forEach(this.events,function(d){d.remove()});var e=this.host;if(e&&e.onMoveStop)e.onMoveStop(this);this.events=this.shape=null}})});
define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover".split(" "),function(g,f,n,m,k,e,l,d,c){return f("dojox.gfx.Moveable",null,{constructor:function(b,d){this.shape=b;this.delay=d&&0<d.delay?d.delay:0;this.mover=d&&d.mover?d.mover:c;this.events=[this.shape.on(e.press,g.hitch(this,"onMouseDown"))]},destroy:function(){n.forEach(this.events,function(b){b.remove()});this.events=this.shape=null},onMouseDown:function(b){this.delay?
(this.events.push(this.shape.on(e.move,g.hitch(this,"onMouseMove")),this.shape.on(e.release,g.hitch(this,"onMouseUp"))),this._lastX=b.clientX,this._lastY=b.clientY):new this.mover(this.shape,b,this);m.stop(b)},onMouseMove:function(b){var c=b.clientY;if(Math.abs(b.clientX-this._lastX)>this.delay||Math.abs(c-this._lastY)>this.delay)this.onMouseUp(b),new this.mover(this.shape,b,this);m.stop(b)},onMouseUp:function(b){this.events.pop().remove()},onMoveStart:function(b){k.publish("/gfx/move/start",b);l.add(d.body(),
"dojoMove")},onMoveStop:function(b){k.publish("/gfx/move/stop",b);l.remove(d.body(),"dojoMove")},onFirstMove:function(b){},onMove:function(b,c){this.onMoving(b,c);this.shape.applyLeftTransform(c);this.onMoved(b,c)},onMoving:function(b,c){},onMoved:function(b,c){}})});
define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){var r=n.utils={};f.mixin(r,{forEach:function(b,a,c){c=c||g.global;a.call(c,b);(b instanceof n.Surface||b instanceof n.Group)&&k.forEach(b.children,function(b){r.forEach(b,a,c)})},serialize:function(b){var a={},c;if((c=b instanceof n.Surface)||b instanceof n.Group){if(a.children=
k.map(b.children,r.serialize),c)return a.children}else a.shape=b.getShape();b.getTransform&&(c=b.getTransform())&&(a.transform=c);b.getStroke&&(c=b.getStroke())&&(a.stroke=c);b.getFill&&(c=b.getFill())&&(a.fill=c);b.getFont&&(c=b.getFont())&&(a.font=c);return a},toJson:function(b,a){return l.toJson(r.serialize(b),a)},deserialize:function(b,a){if(a instanceof Array)return k.map(a,f.hitch(null,r.deserialize,b));var c="shape"in a?b.createShape(a.shape):b.createGroup();"transform"in a&&c.setTransform(a.transform);
"stroke"in a&&c.setStroke(a.stroke);"fill"in a&&c.setFill(a.fill);"font"in a&&c.setFont(a.font);"children"in a&&k.forEach(a.children,f.hitch(null,r.deserialize,c));return c},fromJson:function(b,a){return r.deserialize(b,l.fromJson(a))},toSvg:function(b){var a=new d;if("svg"===n.renderer)try{var c=r._cleanSvg(r._innerXML(b.rawNode));a.callback(c)}catch(f){a.errback(f)}else{r._initSvgSerializerDeferred||r._initSvgSerializer();var l=r.toJson(b),c=function(){try{var c=b.getDimensions(),d=c.width,f=c.height,
k=r._gfxSvgProxy.document.createElement("div");r._gfxSvgProxy.document.body.appendChild(k);e.withDoc(r._gfxSvgProxy.document,function(){m.style(k,"width",d);m.style(k,"height",f)},this);r._gfxSvgProxy[dojox._scopeName].gfx.createSurface(k,d,f).whenLoaded(null,function(b){try{r._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(b,l);var c=r._cleanSvg(k.innerHTML);b.clear();b.destroy();r._gfxSvgProxy.document.body.removeChild(k);a.callback(c)}catch(d){a.errback(d)}})}catch(p){a.errback(p)}};0<r._initSvgSerializerDeferred.fired?
c():r._initSvgSerializerDeferred.addCallback(c)}return a},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){r._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!r._initSvgSerializerDeferred){r._initSvgSerializerDeferred=new d;var f=e.doc.createElement("iframe");m.style(f,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var a;c("ie")?f.onreadystatechange=function(){"complete"==f.contentWindow.document.readyState&&
(f.onreadystatechange=function(){},a=setInterval(function(){f.contentWindow[g.scopeMap.dojo[1]._scopeName]&&f.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx&&f.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(a),f.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow,f.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:f.onload=function(){f.onload=function(){};a=setInterval(function(){f.contentWindow[g.scopeMap.dojo[1]._scopeName]&&
f.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx&&f.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(a),f.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow,f.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50)};var l=p.dojoxGfxSvgProxyFrameUrl||b.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");f.setAttribute("src",l.toString());e.body().appendChild(f)}},_innerXML:function(b){return b.innerXML?
b.innerXML:b.xml?b.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(b):null},_cleanSvg:function(b){b&&(-1==b.indexOf('xmlns="http://www.w3.org/2000/svg"')&&(b=b.substring(4,b.length),b='<svg xmlns="http://www.w3.org/2000/svg"'+b),-1==b.indexOf('xmlns:xlink="http://www.w3.org/1999/xlink"')&&(b=b.substring(4,b.length),b='<svg xmlns:xlink="http://www.w3.org/1999/xlink"'+b),-1===b.indexOf("xlink:href")&&(b=b.replace(/href\s*=/g,"xlink:href=")),b=b.replace(/<img\b([^>]*)>/gi,
"<image $1 />"),b=b.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),b=b.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),b=b.replace(/[=]([^"']+?)(\s|>)/g,'="$1"$2'));return b}});return r});
define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),function(g,f,n,m,k,e,l,d){function c(a,b){this.start=a;this.end=b}function b(a,b,c){this.start=a;this.end=b;this.units=c}function p(a,b){this.start=a;this.end=b;this.temp=new m}function r(a){this.values=a;this.length=a.length}function u(a,b){this.values=a;this.def=b?b:{}}function a(a,b){this.stack=a;this.original=b}function q(a,b,c,d){if(a.values)return new r(a.values);
var e,l;l=a.start?f.normalizeColor(a.start):e=b?c?b[c]:b:d;a.end?a=f.normalizeColor(a.end):(e||(e=b?c?b[c]:b:d),a=e);return new p(l,a)}var t=f.fx={};c.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};b.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};p.prototype.getValue=function(a){return m.blendColors(this.start,this.end,a,this.temp)};r.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};
u.prototype.getValue=function(a){var b=g.clone(this.def),c;for(c in this.values)b[c]=this.values[c].getValue(a);return b};a.prototype.getValue=function(a){var b=[];k.forEach(this.stack,function(c){if(c instanceof n.Matrix2D)b.push(c);else if("original"==c.name&&this.original)b.push(this.original);else if("matrix"==c.name){if(c.start instanceof n.Matrix2D&&c.end instanceof n.Matrix2D){var d=new n.Matrix2D,e;for(e in c.start)d[e]=(c.end[e]-c.start[e])*a+c.start[e];b.push(d)}}else c.name in n&&(d=n[c.name],
"function"!=typeof d?b.push(d):(e=k.map(c.start,function(b,d){return(c.end[d]-b)*a+b}),d=d.apply(n,e),d instanceof n.Matrix2D&&b.push(d)))},this);return b};var v=new m(0,0,0,0);t.animateStroke=function(a){a.easing||(a.easing=e._defaultEasing);var b=new e.Animation(a),d=a.shape,f;l.connect(b,"beforeBegin",b,function(){f=d.getStroke();var b=a.color,e={},l;b&&(e.color=q(b,f,"color",v));(b=a.style)&&b.values&&(e.style=new r(b.values));if(b=a.width){var k=b,p=f;k.values?l=new r(k.values):(b=k.start?k.start:
l=p?p.width:1,k.end?l=k.end:"number"!=typeof l&&(l=p?p.width:1),l=new c(b,l));e.width=l}(b=a.cap)&&b.values&&(e.cap=new r(b.values));if(b=a.join)b.values?e.join=new r(b.values):(l=b.start?b.start:f&&f.join||0,b=b.end?b.end:f&&f.join||0,"number"==typeof l&&"number"==typeof b&&(e.join=new c(l,b)));this.curve=new u(e,f)});l.connect(b,"onAnimate",d,"setStroke");return b};t.animateFill=function(a){a.easing||(a.easing=e._defaultEasing);var b=new e.Animation(a),c=a.shape,d;l.connect(b,"beforeBegin",b,function(){d=
c.getFill();var b=a.color;b&&(this.curve=q(b,d,"",v))});l.connect(b,"onAnimate",c,"setFill");return b};t.animateFont=function(a){a.easing||(a.easing=e._defaultEasing);var c=new e.Animation(a),d=a.shape,f;l.connect(c,"beforeBegin",c,function(){f=d.getFont();var c=a.style,e={},l,k;c&&c.values&&(e.style=new r(c.values));(c=a.variant)&&c.values&&(e.variant=new r(c.values));(c=a.weight)&&c.values&&(e.weight=new r(c.values));(c=a.family)&&c.values&&(e.family=new r(c.values));(c=a.size)&&c.units&&(l=parseFloat(c.start?
c.start:d.font&&d.font.size||"0"),k=parseFloat(c.end?c.end:d.font&&d.font.size||"0"),e.size=new b(l,k,c.units));this.curve=new u(e,f)});l.connect(c,"onAnimate",d,"setFont");return c};t.animateTransform=function(b){b.easing||(b.easing=e._defaultEasing);var c=new e.Animation(b),p=b.shape,t;l.connect(c,"beforeBegin",c,function(){t=p.getTransform();this.curve=new a(b.transform,t)});l.connect(c,"onAnimate",p,"setTransform");if("svg"===f.renderer&&10<=d("ie"))var q=[l.connect(c,"onBegin",c,function(){for(var a=
p.getParent();a&&a.getParent;)a=a.getParent();a&&(p.__svgContainer=a.rawNode.parentNode)}),l.connect(c,"onAnimate",c,function(){try{if(p.__svgContainer){var a=p.__svgContainer.style.visibility;p.__svgContainer.style.visibility="visible";p.__svgContainer.style.visibility=a}}catch(b){}}),l.connect(c,"onEnd",c,function(){k.forEach(q,l.disconnect);if(p.__svgContainer){var a=p.__svgContainer.style.visibility,b=p.__svgContainer;p.__svgContainer.style.visibility="visible";setTimeout(function(){try{b.style.visibility=
a,b=null}catch(c){}},100)}delete p.__svgContainer})];return c};return t});
define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(g,f,n,m,k){k=n("dojox.gfx.path.Path",k.Shape,{constructor:function(e){this.shape=f.clone(g.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=e;this.segmented=!1},setAbsoluteMode:function(e){this._confirmSegmented();this.absolute="string"==typeof e?"absolute"==e:e;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();
return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var e=this.bbox,f=this._getRealMatrix();this.bbox=null;for(var d=0,c=this.segments.length;d<c;++d)this._updateWithSegment(this.segments[d],f);f=this.bbox;this.bbox=e;return this.tbbox=f?[{x:f.l,y:f.t},{x:f.r,y:f.t},{x:f.r,y:f.b},{x:f.l,y:f.b}]:null},getLastPosition:function(){this._confirmSegmented();
return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(e,f,d){d&&(f=m.multiplyPoint(d,e,f),e=f.x,f=f.y);this.bbox&&"l"in this.bbox?(this.bbox.l>e&&(this.bbox.l=e),this.bbox.r<e&&(this.bbox.r=e),this.bbox.t>f&&(this.bbox.t=f),this.bbox.b<f&&(this.bbox.b=f)):this.bbox={l:e,b:f,r:e,t:f}},_updateWithSegment:function(e,f){var d=e.args,c=d.length,b;switch(e.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(b=
0;b<c;b+=2)this._updateBBox(d[b],d[b+1],f);this.last.x=d[c-2];this.last.y=d[c-1];this.absolute=!0;break;case "H":for(b=0;b<c;++b)this._updateBBox(d[b],this.last.y,f);this.last.x=d[c-1];this.absolute=!0;break;case "V":for(b=0;b<c;++b)this._updateBBox(this.last.x,d[b],f);this.last.y=d[c-1];this.absolute=!0;break;case "m":b=0;"x"in this.last||(this._updateBBox(this.last.x=d[0],this.last.y=d[1],f),b=2);for(;b<c;b+=2)this._updateBBox(this.last.x+=d[b],this.last.y+=d[b+1],f);this.absolute=!1;break;case "l":case "t":for(b=
0;b<c;b+=2)this._updateBBox(this.last.x+=d[b],this.last.y+=d[b+1],f);this.absolute=!1;break;case "h":for(b=0;b<c;++b)this._updateBBox(this.last.x+=d[b],this.last.y,f);this.absolute=!1;break;case "v":for(b=0;b<c;++b)this._updateBBox(this.last.x,this.last.y+=d[b],f);this.absolute=!1;break;case "c":for(b=0;b<c;b+=6)this._updateBBox(this.last.x+d[b],this.last.y+d[b+1],f),this._updateBBox(this.last.x+d[b+2],this.last.y+d[b+3],f),this._updateBBox(this.last.x+=d[b+4],this.last.y+=d[b+5],f);this.absolute=
!1;break;case "s":case "q":for(b=0;b<c;b+=4)this._updateBBox(this.last.x+d[b],this.last.y+d[b+1],f),this._updateBBox(this.last.x+=d[b+2],this.last.y+=d[b+3],f);this.absolute=!1;break;case "A":for(b=0;b<c;b+=7)this._updateBBox(d[b+5],d[b+6],f);this.last.x=d[c-2];this.last.y=d[c-1];this.absolute=!0;break;case "a":for(b=0;b<c;b+=7)this._updateBBox(this.last.x+=d[b+5],this.last.y+=d[b+6],f);this.absolute=!1}var k=[e.action];for(b=0;b<c;++b)k.push(g.formatNumber(d[b],!0));"string"==typeof this.shape.path?
this.shape.path+=k.join(""):Array.prototype.push.apply(this.shape.path,k)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(e,f){this.tbbox=null;var d=this._validSegments[e.toLowerCase()];"number"==typeof d&&(d?f.length>=d&&(d={action:e,args:f.slice(0,f.length-f.length%d)},this.segments.push(d),this._updateWithSegment(d)):(d={action:e,args:[]},this.segments.push(d),this._updateWithSegment(d)))},_collectArgs:function(e,f){for(var d=0;d<f.length;++d){var c=f[d];"boolean"==
typeof c?e.push(c?1:0):"number"==typeof c?e.push(c):c instanceof Array?this._collectArgs(e,c):"x"in c&&"y"in c&&e.push(c.x,c.y)}},moveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"M":"m",e);return this},lineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"L":"l",e);return this},hLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?
"H":"h",e);return this},vLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"V":"v",e);return this},curveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"C":"c",e);return this},smoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"S":"s",e);return this},qCurveTo:function(){this._confirmSegmented();var e=
[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"Q":"q",e);return this},qSmoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"T":"t",e);return this},arcTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"A":"a",e);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var e=
this.shape.path;this.shape.path=[];this._setPath(e);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(e){e=f.isArray(e)?e:e.match(g.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(e){for(var l="",d=[],c=e.length,b=0;b<c;++b){var k=e[b],r=parseFloat(k);isNaN(r)?(l&&this._pushSegment(l,d),d=[],l=k):d.push(r)}this._pushSegment(l,d)}},setShape:function(e){this.inherited(arguments,["string"==typeof e?{path:e}:e]);this.segmented=!1;this.segments=
[];g.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});n=n("dojox.gfx.path.TextPath",k,{constructor:function(e){"text"in this||(this.text=f.clone(g.defaultTextPath));"fontStyle"in this||(this.fontStyle=f.clone(g.defaultFont))},getText:function(){return this.text},setText:function(e){this.text=g.makeParameters(this.text,"string"==typeof e?{text:e}:e);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(e){this.fontStyle="string"==typeof e?
g.splitFontString(e):g.makeParameters(g.defaultFont,e);this._setFont();return this}});return g.path={Path:k,TextPath:n}});
define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(g,f,n,m,k,e,l,d,c,b){var p=g.shape={};p.Shape=n("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(k("gfxRegistry")){var b=p.register(this);this.getUID=function(){return b}}},destroy:function(){k("gfxRegistry")&&
p.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var c=this.getBoundingBox();if(!c)return null;var d=this._getRealMatrix();
return[b.multiplyPoint(d,c.x,c.y),b.multiplyPoint(d,c.x+c.width,c.y),b.multiplyPoint(d,c.x+c.width,c.y+c.height),b.multiplyPoint(d,c.x,c.y+c.height)]},getEventSource:function(){return this.rawNode},setClip:function(b){this.clip=b},getClip:function(){return this.clip},setShape:function(b){this.shape=g.makeParameters(this.shape,b);this.bbox=null;return this},setFill:function(b){if(!b)return this.fillStyle=null,this;var c=null;if("object"==typeof b&&"type"in b)switch(b.type){case "linear":c=g.makeParameters(g.defaultLinearGradient,
b);break;case "radial":c=g.makeParameters(g.defaultRadialGradient,b);break;case "pattern":c=g.makeParameters(g.defaultPattern,b)}else c=g.normalizeColor(b);this.fillStyle=c;return this},setStroke:function(b){if(!b)return this.strokeStyle=null,this;if("string"==typeof b||f.isArray(b)||b instanceof c)b={color:b};b=this.strokeStyle=g.makeParameters(g.defaultStroke,b);b.color=g.normalizeColor(b.color);return this},setTransform:function(c){this.matrix=b.clone(c?b.normalize(c):b.identity);return this._applyTransform()},
_applyTransform:function(){return this},moveToFront:function(){var b=this.getParent();b&&(b._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var b=this.getParent();b&&(b._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(b){return b?this.setTransform([this.matrix,b]):this},applyLeftTransform:function(b){return b?this.setTransform([b,this.matrix]):this},applyTransform:function(b){return b?
this.setTransform([this.matrix,b]):this},removeShape:function(b){this.parent&&this.parent.remove(this,b);return this},_setParent:function(b,c){this.parent=b;return this._updateParentMatrix(c)},_updateParentMatrix:function(c){this.parentMatrix=c?b.clone(c):null;return this._applyTransform()},_getRealMatrix:function(){for(var c=this.matrix,d=this.parent;d;)d.matrix&&(c=b.multiply(d.matrix,c)),d=d.parent;return c}});p._eventsProcessing={on:function(b,c){return e(this.getEventSource(),b,p.fixCallback(this,
g.fixTarget,c))},connect:function(b,c,a){"on"==b.substring(0,2)&&(b=b.substring(2));return this.on(b,a?f.hitch(c,a):c)},disconnect:function(b){return b.remove()}};p.fixCallback=function(b,c,a,d){d||(d=a,a=null);if(f.isString(d)){a=a||m.global;if(!a[d])throw['dojox.gfx.shape.fixCallback: scope["',d,'"] is null (scope="',a,'")'].join("");return function(e){return c(e,b)?a[d].apply(a,arguments||[]):void 0}}return a?function(e){return c(e,b)?d.apply(a,arguments||[]):void 0}:function(e){return c(e,b)?
d.apply(a,arguments):void 0}};f.extend(p.Shape,p._eventsProcessing);p.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(b){var c=b.getParent();c&&c.remove(b,!0);this.children.push(b);return b._setParent(this,this._getRealMatrix())},remove:function(b,c){for(var a=0;a<this.children.length;++a)if(this.children[a]==b){c||(b.parent=null,b.parentMatrix=null);this.children.splice(a,1);break}return this},clear:function(b){for(var c,
a=0;a<this.children.length;++a)c=this.children[a],c.parent=null,c.parentMatrix=null,b&&c.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var c=null;l.forEach(this.children,function(d){var a=d.getBoundingBox();a&&((d=d.getTransform())&&(a=b.multiplyRectangle(d,a)),c?(c.x=Math.min(c.x,a.x),c.y=Math.min(c.y,a.y),c.endX=Math.max(c.endX,a.x+a.width),c.endY=Math.max(c.endY,a.y+a.height)):c={x:a.x,y:a.y,endX:a.x+a.width,endY:a.y+a.height})});c&&(c.width=c.endX-c.x,c.height=
c.endY-c.y);return c}return null},_moveChildToFront:function(b){for(var c=0;c<this.children.length;++c)if(this.children[c]==b){this.children.splice(c,1);this.children.push(b);break}return this},_moveChildToBack:function(b){for(var c=0;c<this.children.length;++c)if(this.children[c]==b){this.children.splice(c,1);this.children.unshift(b);break}return this}};p.Surface=n("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){l.forEach(this._nodes,
d.destroy);this._nodes=[];l.forEach(this._events,function(b){b&&b.remove()});this._events=[];this.rawNode=null;if(k("ie"))for(;this._parent.lastChild;)d.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(b){},whenLoaded:function(b,c){var a=f.hitch(b,c);if(this.isLoaded)a(this);else e.once(this,"load",function(b){a(b)})}});f.extend(p.Surface,p._eventsProcessing);
p.Rect=n("dojox.gfx.shape.Rect",p.Shape,{constructor:function(b){this.shape=g.getDefault("Rect");this.rawNode=b},getBoundingBox:function(){return this.shape}});p.Ellipse=n("dojox.gfx.shape.Ellipse",p.Shape,{constructor:function(b){this.shape=g.getDefault("Ellipse");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.rx,y:b.cy-b.ry,width:2*b.rx,height:2*b.ry}}return this.bbox}});p.Circle=n("dojox.gfx.shape.Circle",p.Shape,{constructor:function(b){this.shape=
g.getDefault("Circle");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.r,y:b.cy-b.r,width:2*b.r,height:2*b.r}}return this.bbox}});p.Line=n("dojox.gfx.shape.Line",p.Shape,{constructor:function(b){this.shape=g.getDefault("Line");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:Math.min(b.x1,b.x2),y:Math.min(b.y1,b.y2),width:Math.abs(b.x2-b.x1),height:Math.abs(b.y2-b.y1)}}return this.bbox}});p.Polyline=n("dojox.gfx.shape.Polyline",
p.Shape,{constructor:function(b){this.shape=g.getDefault("Polyline");this.rawNode=b},setShape:function(b,c){b&&b instanceof Array?(this.inherited(arguments,[{points:b}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[b]);return this},_normalizePoints:function(){var b=this.shape.points,c=b&&b.length;if(c&&"number"==typeof b[0]){for(var a=[],d=0;d<c;d+=2)a.push({x:b[d],y:b[d+1]});this.shape.points=a}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var b=
this.shape.points,c=b.length,a=b[0],d=a.x,e=a.y,f=a.x,l=a.y,k=1;k<c;++k)a=b[k],d>a.x&&(d=a.x),f<a.x&&(f=a.x),e>a.y&&(e=a.y),l<a.y&&(l=a.y);this.bbox={x:d,y:e,width:f-d,height:l-e}}return this.bbox}});p.Image=n("dojox.gfx.shape.Image",p.Shape,{constructor:function(b){this.shape=g.getDefault("Image");this.rawNode=b},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});p.Text=n(p.Shape,{constructor:function(b){this.fontStyle=null;this.shape=
g.getDefault("Text");this.rawNode=b},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?g.splitFontString(b):g.makeParameters(g.defaultFont,b);this._setFont();return this},getBoundingBox:function(){var b=null;this.getShape().text&&(b=g._base._computeTextBoundingBox(this));return b}});p.Creator={createShape:function(b){switch(b.type){case g.defaultPath.type:return this.createPath(b);case g.defaultRect.type:return this.createRect(b);case g.defaultCircle.type:return this.createCircle(b);
case g.defaultEllipse.type:return this.createEllipse(b);case g.defaultLine.type:return this.createLine(b);case g.defaultPolyline.type:return this.createPolyline(b);case g.defaultImage.type:return this.createImage(b);case g.defaultText.type:return this.createText(b);case g.defaultTextPath.type:return this.createTextPath(b)}return null},createGroup:function(){return this.createObject(g.Group)},createRect:function(b){return this.createObject(g.Rect,b)},createEllipse:function(b){return this.createObject(g.Ellipse,
b)},createCircle:function(b){return this.createObject(g.Circle,b)},createLine:function(b){return this.createObject(g.Line,b)},createPolyline:function(b){return this.createObject(g.Polyline,b)},createImage:function(b){return this.createObject(g.Image,b)},createText:function(b){return this.createObject(g.Text,b)},createPath:function(b){return this.createObject(g.Path,b)},createTextPath:function(b){return this.createObject(g.TextPath,{}).setText(b)},createObject:function(b,c){return null}};return p});
define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){function u(a,b){return n.doc.createElementNS?n.doc.createElementNS(a,b):n.doc.createElement(b)}function a(a,b,c,d){return a.setAttributeNS?a.setAttributeNS(b,c,d):a.setAttribute(c,d)}function q(a){return t.useSvgWeb?n.doc.createTextNode(a,!0):n.doc.createTextNode(a)}var t=b.svg=
{};t.useSvgWeb="undefined"!=typeof window.svgweb;var v=navigator.userAgent,x=f("ios"),C=f("android"),y=f("chrome")||C&&4<=C?"auto":"optimizeLegibility";t.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};t.getRef=function(a){return a&&"none"!=a?a.match(/^url\(#.+\)$/)?m.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?m.byId(a.slice(1)):null:null};t.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,
3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var z=0;t.Shape=k("dojox.gfx.svg.Shape",p.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=t.getRef(a))&&a.parentNode.removeChild(a)}this.clip&&(a=this.rawNode.getAttribute("clip-path"))&&(a=m.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);p.Shape.prototype.destroy.apply(this,arguments)},setFill:function(a){if(!a)return this.fillStyle=
null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var c,d=function(a){this.setAttribute(a,c[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":c=b.makeParameters(b.defaultLinearGradient,a);a=this._setFillObject(c,"linearGradient");e.forEach(["x1","y1","x2","y2"],d,a);break;case "radial":c=b.makeParameters(b.defaultRadialGradient,a);a=this._setFillObject(c,"radialGradient");e.forEach(["cx","cy","r"],d,a);break;case "pattern":c=
b.makeParameters(b.defaultPattern,a),a=this._setFillObject(c,"pattern"),e.forEach(["x","y","width","height"],d,a)}this.fillStyle=c;return this}this.fillStyle=c=b.normalizeColor(a);this.rawNode.setAttribute("fill",c.toCss());this.rawNode.setAttribute("fill-opacity",c.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(a){var d=this.rawNode;if(!a)return this.strokeStyle=null,d.setAttribute("stroke","none"),d.setAttribute("stroke-opacity",0),this;if("string"==typeof a||
g.isArray(a)||a instanceof c)a={color:a};a=this.strokeStyle=b.makeParameters(b.defaultStroke,a);a.color=b.normalizeColor(a.color);if(a){d.setAttribute("stroke",a.color.toCss());d.setAttribute("stroke-opacity",a.color.a);d.setAttribute("stroke-width",a.width);d.setAttribute("stroke-linecap",a.cap);"number"==typeof a.join?(d.setAttribute("stroke-linejoin","miter"),d.setAttribute("stroke-miterlimit",a.join)):d.setAttribute("stroke-linejoin",a.join);var e=a.style.toLowerCase();e in t.dasharray&&(e=t.dasharray[e]);
if(e instanceof Array){var e=g._toArray(e),f;for(f=0;f<e.length;++f)e[f]*=a.width;if("butt"!=a.cap){for(f=0;f<e.length;f+=2)e[f]-=a.width,1>e[f]&&(e[f]=1);for(f=1;f<e.length;f+=2)e[f]+=a.width}e=e.join(",")}d.setAttribute("stroke-dasharray",e);d.setAttribute("dojoGfxStrokeStyle",a.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof b.Surface);a=a.parent);return a},_setFillObject:function(c,d){var e=t.xmlns.svg;this.fillStyle=c;var f=this._getParentSurface().defNode,
l=this.rawNode.getAttribute("fill");if(l=t.getRef(l))if(l.tagName.toLowerCase()!=d.toLowerCase()){var k=l.id;l.parentNode.removeChild(l);l=u(e,d);l.setAttribute("id",k);f.appendChild(l)}else for(;l.childNodes.length;)l.removeChild(l.lastChild);else l=u(e,d),l.setAttribute("id",b._base._getUniqueId()),f.appendChild(l);if("pattern"==d)l.setAttribute("patternUnits","userSpaceOnUse"),e=u(e,"image"),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",c.width.toFixed(8)),e.setAttribute("height",
c.height.toFixed(8)),a(e,t.xmlns.xlink,"xlink:href",c.src),l.appendChild(e);else for(l.setAttribute("gradientUnits","userSpaceOnUse"),f=0;f<c.colors.length;++f){var k=c.colors[f],p=u(e,"stop"),q=k.color=b.normalizeColor(k.color);p.setAttribute("offset",k.offset.toFixed(8));p.setAttribute("stop-color",q.toCss());p.setAttribute("stop-opacity",q.a);l.appendChild(p)}this.rawNode.setAttribute("fill","url(#"+l.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule",
"evenodd");return l},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",
0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=b.makeParameters(this.shape,a);for(var c in this.shape)"type"!=c&&this.rawNode.setAttribute(c,this.shape[c]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,
this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;"polyline"===b&&(a=g.clone(a),a.points=a.points.join(","));var c,e=d.get(this.rawNode,"clip-path");e&&(c=m.byId(e.match(/gfx_clip[\d]+/)[0]))&&c.removeChild(c.childNodes[0]);a?(c?(b=u(t.xmlns.svg,b),c.appendChild(b)):(e="gfx_clip"+ ++z,this.rawNode.setAttribute("clip-path","url(#"+e+")"),c=
u(t.xmlns.svg,"clipPath"),b=u(t.xmlns.svg,b),c.appendChild(b),this.rawNode.parentNode.appendChild(c),d.set(c,"id",e)),d.set(b,a)):(this.rawNode.removeAttribute("clip-path"),c&&c.parentNode.removeChild(c));return this},_removeClipNode:function(){var a,b=d.get(this.rawNode,"clip-path");b&&(a=m.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});t.Group=k("dojox.gfx.svg.Group",t.Shape,{constructor:function(){p.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;
this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);t.Shape.prototype.destroy.apply(this,arguments)}});t.Group.nodeType="g";t.Rect=k("dojox.gfx.svg.Rect",[t.Shape,p.Rect],{setShape:function(a){this.shape=b.makeParameters(this.shape,a);this.bbox=null;for(var c in this.shape)"type"!=c&&"r"!=c&&this.rawNode.setAttribute(c,this.shape[c]);null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});t.Rect.nodeType="rect";
t.Ellipse=k("dojox.gfx.svg.Ellipse",[t.Shape,p.Ellipse],{});t.Ellipse.nodeType="ellipse";t.Circle=k("dojox.gfx.svg.Circle",[t.Shape,p.Circle],{});t.Circle.nodeType="circle";t.Line=k("dojox.gfx.svg.Line",[t.Shape,p.Line],{});t.Line.nodeType="line";t.Polyline=k("dojox.gfx.svg.Polyline",[t.Shape,p.Polyline],{setShape:function(a,c){a&&a instanceof Array?(this.shape=b.makeParameters(this.shape,{points:a}),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=b.makeParameters(this.shape,
a);this.bbox=null;this._normalizePoints();for(var d=[],e=this.shape.points,f=0;f<e.length;++f)d.push(e[f].x.toFixed(8),e[f].y.toFixed(8));this.rawNode.setAttribute("points",d.join(" "));return this}});t.Polyline.nodeType="polyline";t.Image=k("dojox.gfx.svg.Image",[t.Shape,p.Image],{setShape:function(c){this.shape=b.makeParameters(this.shape,c);this.bbox=null;c=this.rawNode;for(var d in this.shape)"type"!=d&&"src"!=d&&c.setAttribute(d,this.shape[d]);c.setAttribute("preserveAspectRatio","none");a(c,
t.xmlns.xlink,"xlink:href",this.shape.src);c.__gfxObject__=this;return this}});t.Image.nodeType="image";t.Text=k("dojox.gfx.svg.Text",[t.Shape,p.Text],{setShape:function(a){this.shape=b.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var c=this.shape;a.setAttribute("x",c.x);a.setAttribute("y",c.y);a.setAttribute("text-anchor",c.align);a.setAttribute("text-decoration",c.decoration);a.setAttribute("rotate",c.rotated?90:0);a.setAttribute("kerning",c.kerning?"auto":0);a.setAttribute("text-rendering",
y);a.firstChild?a.firstChild.nodeValue=c.text:a.appendChild(q(c.text));return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!=d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(b){a={x:0,y:0,width:0,height:0}}return a}});t.Text.nodeType="text";t.Path=k("dojox.gfx.svg.Path",
[t.Shape,r.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});t.Path.nodeType="path";t.TextPath=k("dojox.gfx.svg.TextPath",[t.Shape,r.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);
this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var c=this.rawNode;if(!c.firstChild){var d=u(t.xmlns.svg,"textPath"),e=q("");d.appendChild(e);c.appendChild(d)}d=(d=c.firstChild.getAttributeNS(t.xmlns.xlink,"href"))&&t.getRef(d);if(!d&&(e=this._getParentSurface())){var e=e.defNode,d=u(t.xmlns.svg,"path"),f=b._base._getUniqueId();d.setAttribute("id",f);e.appendChild(d);a(c.firstChild,t.xmlns.xlink,"xlink:href","#"+f)}d&&d.setAttribute("d",this.shape.path)}},
_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=u(t.xmlns.svg,"textPath"),c=q("");b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline","middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift",
"0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});t.TextPath.nodeType="text";var D=534<function(){var a=/WebKit\/(\d*)/.exec(v);return a?a[1]:0}();t.Surface=k("dojox.gfx.svg.Surface",p.Surface,{constructor:function(){p.Container._init.call(this)},destroy:function(){p.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;
this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);D&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this},getDimensions:function(){return this.rawNode?{width:b.normalizedLength(this.rawNode.getAttribute("width")),height:b.normalizedLength(this.rawNode.getAttribute("height"))}:null}});t.createSurface=function(a,c,d){var e=new t.Surface;e.rawNode=u(t.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");c&&e.rawNode.setAttribute("width",c);d&&e.rawNode.setAttribute("height",
d);c=u(t.xmlns.svg,"defs");e.rawNode.appendChild(c);e.defNode=c;e._parent=m.byId(a);e._parent.appendChild(e.rawNode);b._base._fixMsTouchAction(e);return e};f={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var F=p.Container;k={openBatch:function(){if(!this._batch){var a;
a=t.useSvgWeb?n.doc.createDocumentFragment(!0):n.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),F.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==
a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),F.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return F.clear.apply(this,arguments)},getBoundingBox:F.getBoundingBox,_moveChildToFront:F._moveChildToFront,
_moveChildToBack:F._moveChildToBack};r={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=u(t.xmlns.svg,a.nodeType);c.setRawNode(d);c.setShape(b);this.add(c);return c}};g.extend(t.Text,f);g.extend(t.TextPath,f);g.extend(t.Group,k);g.extend(t.Group,p.Creator);g.extend(t.Group,r);g.extend(t.Surface,k);g.extend(t.Surface,p.Creator);g.extend(t.Surface,r);t.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=x&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);
return!0};t.useSvgWeb&&(t.createSurface=function(a,c,d){var e=new t.Surface;if(!c||!d){var f=l.position(a);c=c||f.w;d=d||f.h}a=m.byId(a);var f=a.id?a.id+"_svgweb":b._base._getUniqueId(),k=u(t.xmlns.svg,"svg");k.id=f;k.setAttribute("width",c);k.setAttribute("height",d);svgweb.appendChild(k,a);k.addEventListener("SVGLoad",function(){e.rawNode=this;e.isLoaded=!0;var a=u(t.xmlns.svg,"defs");e.rawNode.appendChild(a);e.defNode=a;if(e.onLoad)e.onLoad(e)},!1);e.isLoaded=!1;return e},t.Surface.extend({destroy:function(){var a=
this.rawNode;svgweb.removeChild(a,a.parentNode)}}),f={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==arguments.length?b:g.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},g.extend(t.Shape,f),g.extend(t.Surface,f));return t});
define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,f,n,m,k){var e=null;n.add("vml",function(e,d,c){c.innerHTML='<v:shape adj="1"/>';e="adj"in c.firstChild;c.innerHTML="";return e});return{load:function(l,d,c){function b(){d(["dojox/gfx/"+p],function(a){g.renderer=p;e=a;c(a)})}if(e&&"force"!=l)c(e);else{var p=k.forceGfxRenderer;l=!p&&(f.isString(k.gfxRenderer)?k.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var r,u;!p&&l.length;)switch(l.shift()){case "svg":"SVGAngle"in
m.global&&(p="svg");break;case "vml":n("vml")&&(p="vml");break;case "silverlight":try{n("ie")?(r=new ActiveXObject("AgControl.AgControl"))&&r.IsVersionSupported("1.0")&&(u=!0):navigator.plugins["Silverlight Plug-In"]&&(u=!0)}catch(a){u=!1}finally{r=null}u&&(p="silverlight");break;case "canvas":m.global.CanvasRenderingContext2D&&(p="canvas")}"canvas"===p&&!1!==k.canvasEvents&&(p="canvasWithEvents");k.isDebug&&console.log("gfx renderer = "+p);"svg"==p&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(b):
b()}}}});define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(g,f,n){f.switchTo(n);return f});
define("dojo/_base/declare ./_CalendarView dijit/_TemplatedMixin dojo/query dojo/dom-class dojo/_base/connect dojo/_base/event dojo/_base/lang dojo/date/locale dojo/text!./Calendar/CalendarMonthYear.html".split(" "),function(g,f,n,m,k,e,l,d,c,b){return g("dojox.widget._CalendarMonthYearView",[f,n],{templateString:b,datePart:"year",displayedYears:10,useHeader:!1,postCreate:function(){this.cloneClass(".dojoxCal-MY-G-Template",5,".dojoxCal-MY-btns");this.monthContainer=this.yearContainer=this.myContainer;
m(".dojoxCalendarYearLabel",this.myContainer).forEach(function(b,c){var d="dojoxCalendarIncrease";switch(c){case 0:d="dojoxCalendarDecrease";case 1:k.remove(b,"dojoxCalendarYearLabel"),k.add(b,d)}});this._decBtn=m(".dojoxCalendarDecrease",this.myContainer)[0];this._incBtn=m(".dojoxCalendarIncrease",this.myContainer)[0];m(".dojoxCal-MY-M-Template",this.domNode).filter(function(b){return 1==b.cellIndex}).addClass("dojoxCal-MY-M-last");e.connect(this,"onBeforeDisplay",d.hitch(this,function(){this._cachedDate=
new Date(this.get("value").getTime());this._populateYears(this._cachedDate.getFullYear());this._populateMonths();this._updateSelectedMonth();this._updateSelectedYear()}));e.connect(this,"_populateYears",d.hitch(this,function(){this._updateSelectedYear()}));e.connect(this,"_populateMonths",d.hitch(this,function(){this._updateSelectedMonth()}));this._cachedDate=this.get("value");this._populateYears();this._populateMonths();this.addFx(".dojoxCalendarMonthLabel,.dojoxCalendarYearLabel ",this.myContainer)},
_setValueAttr:function(b){b&&b.getFullYear()&&this._populateYears(b.getFullYear())},getHeader:function(){return null},_getMonthNames:function(b){return this._monthNames=this._monthNames||c.getNames("months",b,"standAlone",this.getLang())},_populateMonths:function(){var b,c=this._getMonthNames("abbr"),e=this.get("value").getFullYear(),a=c[this.get("value").getMonth()],f=this.get("displayedYear");m(".dojoxCalendarMonthLabel",this.monthContainer).forEach(d.hitch(this,function(d,l){this._setText(d,c[l]);
b=a===c[l]&&e===f;k.toggle(d.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],b)}));var l=this.get("constraints");if(l){(new Date).setFullYear(this._year);var v=-1,g=12;if(l.min){var n=l.min.getFullYear();n>this._year?v=12:n==this._year&&(v=l.min.getMonth())}l.max&&(n=l.max.getFullYear(),n<this._year?g=-1:n==this._year&&(g=l.max.getMonth()));m(".dojoxCalendarMonthLabel",this.monthContainer).forEach(d.hitch(this,function(a,b){k[b<v||b>g?"add":"remove"](a,"dijitCalendarDisabledDate")}))}},
_populateYears:function(b){var c,e=this.get("constraints"),a=this.get("value").getFullYear(),f=b||a,l=f-Math.floor(this.displayedYears/2);b=e&&e.min?e.min.getFullYear():l-1E4;this._displayedYear=f;var f=m(".dojoxCalendarYearLabel",this.yearContainer),v=e&&e.max?e.max.getFullYear()-l:f.length,g;f.forEach(d.hitch(this,function(b,d){d<=v&&this._setText(b,l+d);g=l+d==a;k.toggle(b.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],g);k.toggle(b,"dijitCalendarDisabledDate",d>v);c=l+d==
a;k.toggle(b.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],c)}));this._incBtn&&k.toggle(this._incBtn,"dijitCalendarDisabledDate",v<f.length);this._decBtn&&k.toggle(this._decBtn,"dijitCalendarDisabledDate",b>=l);this.getHeader()&&this._setText(this.getHeader(),l+" - "+(l+11))},_updateSelectedYear:function(){this._year=String((this._cachedDate||this.get("value")).getFullYear());this._updateSelectedNode(".dojoxCalendarYearLabel",d.hitch(this,function(b){return null!==this._year&&
b.innerHTML==this._year}))},_updateSelectedMonth:function(){var b=(this._cachedDate||this.get("value")).getMonth();this._month=b;this._updateSelectedNode(".dojoxCalendarMonthLabel",function(c,d){return d==b})},_updateSelectedNode:function(b,c){m(b,this.domNode).forEach(function(a,b,d){k.toggle(a.parentNode,"dijitCalendarSelectedDate",c(a,b,d))});var d=m(".dojoxCal-MY-M-Template div",this.myContainer).filter(function(a){return k.contains(a.parentNode,"dijitCalendarSelectedDate")})[0];d&&(d=k.contains(d,
"dijitCalendarDisabledDate"),k.toggle(this.okBtn,"dijitDisabled",d))},onClick:function(b){function c(d){return k.contains(b.target,d)}if(c("dijitCalendarDisabledDate"))return l.stop(b),!1;if(c("dojoxCalendarMonthLabel"))this._month=b.target.parentNode.cellIndex+2*b.target.parentNode.parentNode.rowIndex,this._cachedDate.setMonth(this._month),this._updateSelectedMonth();else if(c("dojoxCalendarYearLabel"))this._year=Number(b.target.innerHTML),this._cachedDate.setYear(this._year),this._populateMonths(),
this._updateSelectedYear();else return c("dojoxCalendarDecrease")?this._populateYears(this._displayedYear-10):c("dojoxCalendarIncrease")&&this._populateYears(this._displayedYear+10),!0;l.stop(b);return!1},onOk:function(b){l.stop(b);if(k.contains(this.okBtn,"dijitDisabled"))return!1;this.onValueSelected(this._cachedDate);return!1},onCancel:function(b){l.stop(b);this.onValueSelected(this.get("value"));return!1}})});
define(["dojo/_base/declare","./_CalendarMonthYearView"],function(g,f){return g("dojox.widget._CalendarMonthYear",null,{constructor:function(){this._addView(f)}})});
define("dojo/_base/declare dijit/_WidgetBase dojo/dom-construct dojo/query dojo/date dojo/_base/window".split(" "),function(g,f,n,m,k,e){return g("dojox.widget._CalendarView",f,{headerClass:"",useHeader:!0,cloneClass:function(e,d,c){var b=m(e,this.domNode)[0];if(c)for(c=m(e,this.domNode)[0],e=0;e<d;e++)b.parentNode.insertBefore(b.cloneNode(!0),c);else for(e=0;e<d;e++)b.parentNode.appendChild(b.cloneNode(!0))},_setText:function(f,d){f.innerHTML!=d&&(n.empty(f),f.appendChild(e.doc.createTextNode(d)))},
getHeader:function(){return this.header||(this.header=n.create("span",{"class":this.headerClass}))},onValueSelected:function(e){},adjustDate:function(e,d){return k.add(e,this.datePart,d)},onDisplay:function(){},onBeforeDisplay:function(){},onBeforeUnDisplay:function(){}})});
define("dojo/_base/declare ./_CalendarView dijit/_TemplatedMixin dojo/query dojo/dom-class dojo/_base/event dojo/date dojo/date/locale dojo/text!./Calendar/CalendarDay.html dojo/cldr/supplemental dojo/NodeList-dom".split(" "),function(g,f,n,m,k,e,l,d,c,b){return g("dojox.widget._CalendarDayView",[f,n],{templateString:c,datePart:"month",dayWidth:"narrow",postCreate:function(){this.cloneClass(".dijitCalendarDayLabelTemplate",6);this.cloneClass(".dijitCalendarDateTemplate",6);this.cloneClass(".dijitCalendarWeekTemplate",
5);var c=d.getNames("days",this.dayWidth,"standAlone",this.getLang()),e=b.getFirstDayOfWeek(this.getLang());m(".dijitCalendarDayLabel",this.domNode).forEach(function(b,a){this._setText(b,c[(a+e)%7])},this)},onDisplay:function(){this._addedFx||(this._addedFx=!0,this.addFx(".dijitCalendarDateTemplate div",this.domNode))},_onDayClick:function(b){if("undefined"!=typeof b.target._date){var c=new Date(this.get("displayMonth")),d=b.target.parentNode;(d=k.contains(d,"dijitCalendarPreviousMonth")?-1:k.contains(d,
"dijitCalendarNextMonth")?1:0)&&(c=l.add(c,"month",d));c.setDate(b.target._date);this.isDisabledDate(c)?e.stop(b):this.parent._onDateSelected(c)}},_setValueAttr:function(b){this._populateDays()},_populateDays:function(){var c=new Date(this.get("displayMonth"));c.setDate(1);var e=c.getDay(),f=l.getDaysInMonth(c),a=l.getDaysInMonth(l.add(c,"month",-1)),k=new Date,t=this.get("value"),v=b.getFirstDayOfWeek(this.getLang());v>e&&(v-=7);var g=l.compare,n=this._lastDate,n=null==n||n.getMonth()!=c.getMonth()||
n.getFullYear()!=c.getFullYear();this._lastDate=c;n?(m(".dijitCalendarDateTemplate",this.domNode).forEach(function(b,d){d+=v;var n=new Date(c),C,H="dijitCalendar",M=0;d<e?(C=a-e+d+1,M=-1,H+="Previous"):d>=e+f?(C=d-e-f+1,M=1,H+="Next"):(C=d-e+1,H+="Current");M&&(n=l.add(n,"month",M));n.setDate(C);g(n,k,"date")||(H="dijitCalendarCurrentDate "+H);g(n,t,"date")||g(n,t,"month")||g(n,t,"year")||(H="dijitCalendarSelectedDate "+H);this.isDisabledDate(n,this.getLang())&&(H=" dijitCalendarDisabledDate "+H);
(C=this.getClassForDate(n,this.getLang()))&&(H=C+" "+H);b.className=H+"Month dijitCalendarDateTemplate";b.dijitDateValue=n.valueOf();H=m(".dijitCalendarDateLabel",b)[0];this._setText(H,n.getDate());H._date=H.parentNode._date=n.getDate()},this),n=d.getNames("months","wide","standAlone",this.getLang()),this._setText(this.monthLabelNode,n[c.getMonth()]),this._setText(this.yearLabelNode,c.getFullYear())):m(".dijitCalendarDateTemplate",this.domNode).removeClass("dijitCalendarSelectedDate").filter(function(a){return-1<
a.className.indexOf("dijitCalendarCurrent")&&a._date==t.getDate()}).addClass("dijitCalendarSelectedDate")}})});define(["dojo/_base/declare","./_CalendarDayView"],function(g,f){return g("dojox.widget._CalendarDay",null,{parent:null,constructor:function(){this._addView(f)}})});
define({"days-standAlone-short":"So. Mo. Di. Mi. Do. Fr. Sa.".split(" "),"months-format-narrow":"JFMAMJJASOND".split(""),"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Wochentag","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"E, d.M.y","dateFormatItem-GyMMMEd":"E, d. MMM y G","dateFormatItem-MMMEd":"E, d. MMM",eraNarrow:["v. Chr.","n. Chr."],"dateFormatItem-yMM":"MM.y","dayPeriods-format-wide-earlyMorning":"morgens","dayPeriods-format-wide-morning":"vormittags","days-format-short":"So. Mo. Di. Mi. Do. Fr. Sa.".split(" "),
"dateFormat-long":"d. MMMM y","months-format-wide":"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),"dayPeriods-format-wide-evening":"abends","dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"nachm.","dateFormat-full":"EEEE, d. MMMM y","dateFormatItem-Md":"d.M.","dayPeriods-format-wide-noon":"Mittag","dateFormatItem-yMd":"d.M.y","field-era":"Epoche","dateFormatItem-yM":"M.y","months-standAlone-wide":"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),
"timeFormat-short":"HH:mm","quarters-format-wide":["1. Quartal","2. Quartal","3. Quartal","4. Quartal"],"dateFormatItem-yQQQQ":"QQQQ y","timeFormat-long":"HH:mm:ss z","field-year":"Jahr","dateFormatItem-yMMM":"MMM y","field-hour":"Stunde","dateFormatItem-MMdd":"dd.MM.","months-format-abbr":"Jan. Feb. M\u00e4r. Apr. Mai Juni Juli Aug. Sep. Okt. Nov. Dez.".split(" "),"timeFormat-full":"HH:mm:ss zzzz","field-day-relative+0":"Heute","field-day-relative+1":"Morgen","dateFormatItem-GyMMMd":"d. MMM y G",
"field-day-relative+2":"\u00dcbermorgen","dateFormatItem-H":"HH 'Uhr'","months-standAlone-abbr":"Jan Feb M\u00e4r Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["1. Quartal","2. Quartal","3. Quartal","4. Quartal"],"dateFormatItem-Gy":"y G","dateFormatItem-M":"L","days-standAlone-wide":"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),"timeFormat-medium":"HH:mm:ss","dateFormatItem-yMMdd":"dd.MM.y","dateFormatItem-Hm":"HH:mm",
"quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],eraAbbr:["v. Chr.","n. Chr."],"field-minute":"Minute","field-dayperiod":"Tagesh\u00e4lfte","days-standAlone-abbr":"So Mo Di Mi Do Fr Sa".split(" "),"dayPeriods-format-wide-night":"nachts","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"Gestern","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","field-day-relative+-2":"Vorgestern","dateFormatItem-MMMd":"d. MMM","dateFormatItem-MEd":"E, d.M.",
"dateTimeFormat-full":"{1} {0}","dateFormatItem-yMMMM":"MMMM y","field-day":"Tag","days-format-wide":"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),"field-zone":"Zone","dateFormatItem-y":"y","months-standAlone-narrow":"JFMAMJJASOND".split(""),"field-year-relative+-1":"Letztes Jahr","field-month-relative+-1":"Letzter Monat","dateFormatItem-hm":"h:mm a","days-format-abbr":"So. Mo. Di. Mi. Do. Fr. Sa.".split(" "),eraNames:["v. Chr.","n. Chr."],"dateFormatItem-yMMMd":"d. MMM y",
"days-format-narrow":"SMDMDFS".split(""),"days-standAlone-narrow":"SMDMDFS".split(""),"dateFormatItem-MMM":"LLL","field-month":"Monat","dayPeriods-format-wide-am":"vorm.","dateFormatItem-MMMMEd":"E, d. MMMM","dateFormatItem-MMMMdd":"dd. MMMM","dateFormat-short":"dd.MM.yy","dateFormatItem-MMd":"d.MM.","dayPeriods-format-wide-afternoon":"nachmittags","field-second":"Sekunde","dateFormatItem-yMMMEd":"E, d. MMM y","field-month-relative+0":"Dieser Monat","field-month-relative+1":"N\u00e4chster Monat",
"dateFormatItem-Ed":"E, d.","field-week":"Woche","dateFormat-medium":"dd.MM.y","field-year-relative+0":"Dieses Jahr","field-week-relative+-1":"Letzte Woche","field-year-relative+1":"N\u00e4chstes Jahr","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-GyMMM":"MMM y G","field-week-relative+0":"Diese Woche","field-week-relative+1":"N\u00e4chste Woche"});
define({root:{"days-standAlone-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"months-format-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"y-MM-dd, E","dateFormatItem-GyMMMEd":"G y MMM d, E","dateFormatItem-MMMEd":"MMM d, E",eraNarrow:["BCE","CE"],"days-format-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d",
"months-format-wide":"Month1 Month2 Month3 Month4 Month5 Month6 Month7 Month8 Month9 Month10 Month11 Month12".split(" "),"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"y MMMM d, EEEE","dateFormatItem-Md":"MM-dd","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dateFormatItem-yMd":"y-MM-dd","field-era":"Era","dateFormatItem-yM":"y-MM","months-standAlone-wide":"Month1 Month2 Month3 Month4 Month5 Month6 Month7 Month8 Month9 Month10 Month11 Month12".split(" "),
"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yQQQQ":"y QQQQ","timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateTimeFormats-appendItem-Era":"{1} {0}","field-hour":"Hour","months-format-abbr":"Month1 Month2 Month3 Month4 Month5 Month6 Month7 Month8 Month9 Month10 Month11 Month12".split(" "),"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow",
"dateFormatItem-GyMMMd":"G y MMM d","dateFormatItem-H":"HH","months-standAlone-abbr":"Month1 Month2 Month3 Month4 Month5 Month6 Month7 Month8 Month9 Month10 Month11 Month12".split(" "),"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-Gy":"G y","dateFormatItem-M":"L","days-standAlone-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],eraAbbr:["BCE",
"CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"Yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"MM-dd, E","dateTimeFormat-full":"{1} {0}","field-day":"Day","days-format-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),
"field-zone":"Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","months-standAlone-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),"dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{1} {0}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),eraNames:["BCE","CE"],"dateFormatItem-yMMMd":"y MMM d","days-format-narrow":"SMTWTFS".split(""),"days-standAlone-narrow":"SMTWTFS".split(""),
"dateFormatItem-MMM":"LLL","field-month":"Month","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormat-short":"y-MM-dd","field-second":"Second","dateFormatItem-yMMMEd":"y MMM d, E","dateFormatItem-Ed":"d, E","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"y MMM d","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}",
"dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-GyMMM":"G y MMM"},ar:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-au":!0,"en-gb":!0,es:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hu:!0,it:!0,ja:!0,ko:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,"zh-tw":!0});
define(["../_base/lang","../i18n"],function(g,f){var n={};g.setObject("dojo.cldr.supplemental",n);n.getFirstDayOfWeek=function(f){f={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,
ve:0,vi:0,ws:0,za:0,zw:0}[n._region(f)];return void 0===f?1:f};n._region=function(m){m=f.normalizeLocale(m);m=m.split("-");var k=m[1];k?4==k.length&&(k=m[2]):k={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",
fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",
na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",
xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",
dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",
kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",
nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",
tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[m[0]];return k};n.getWeekend=function(f){var k=n._region(f);f={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[k];k={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[k];void 0===
f&&(f=6);void 0===k&&(k=0);return{start:f,end:k}};return n});
define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(g,f,n,m,k,e,l,d,c){function b(a,b,c,d){return d.replace(/([a-z])\1*/ig,function(e){var f,k,p=e.charAt(0);e=e.length;var r=["abbr","wide","narrow"];switch(p){case "G":f=b[4>e?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":f=a.getFullYear();switch(e){case 1:break;case 2:if(!c.fullYear){f=String(f);f=f.substr(f.length-2);break}default:k=
!0}break;case "Q":case "q":f=Math.ceil((a.getMonth()+1)/3);k=!0;break;case "M":case "L":f=a.getMonth();3>e?(f+=1,k=!0):(p=["months","L"==p?"standAlone":"format",r[e-3]].join("-"),f=b[p][f]);break;case "w":f=u._getWeekOfYear(a,0);k=!0;break;case "d":f=a.getDate();k=!0;break;case "D":f=u._getDayOfYear(a);k=!0;break;case "e":case "c":if(f=a.getDay(),2>e){f=(f-m.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":f=a.getDay();3>e?(f+=1,k=!0):(p=["days","c"==p?"standAlone":"format",r[e-3]].join("-"),f=b[p][f]);
break;case "a":p=12>a.getHours()?"am":"pm";f=c[p]||b["dayPeriods-format-wide-"+p];break;case "h":case "H":case "K":case "k":k=a.getHours();switch(p){case "h":f=k%12||12;break;case "H":f=k;break;case "K":f=k%12;break;case "k":f=k||24}k=!0;break;case "m":f=a.getMinutes();k=!0;break;case "s":f=a.getSeconds();k=!0;break;case "S":f=Math.round(a.getMilliseconds()*Math.pow(10,e-3));k=!0;break;case "v":case "z":if(f=u._getZone(a,!0,c))break;e=4;case "Z":p=u._getZone(a,!1,c);p=[0>=p?"+":"-",l.pad(Math.floor(Math.abs(p)/
60),2),l.pad(Math.abs(p)%60,2)];4==e&&(p.splice(0,0,"GMT"),p.splice(3,0,":"));f=p.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+d);}k&&(f=l.pad(f,e));return f})}function p(a,b,c,d){var e=function(a){return a};b=b||e;c=c||e;d=d||e;var l=a.match(/(''|[^'])+/g),k="'"==a.charAt(0);f.forEach(l,function(a,d){a?(l[d]=(k?c:b)(a.replace(/''/g,"'")),k=!k):l[d]=""});return d(l.join(""))}function r(a,b,c,d){d=e.escapeString(d);c.strict||(d=d.replace(" a"," ?a"));return d.replace(/([a-z])\1*/ig,
function(d){var e;e=d.charAt(0);var f=d.length,l="",k="";c.strict?(1<f&&(l="0{"+(f-1)+"}"),2<f&&(k="0{"+(f-2)+"}")):(l="0?",k="0{0,2}");switch(e){case "y":e="\\d{2,4}";break;case "M":case "L":e=2<f?"\\S+?":"1[0-2]|"+l+"[1-9]";break;case "D":e="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+l+"[1-9][0-9]|"+k+"[1-9]";break;case "d":e="3[01]|[12]\\d|"+l+"[1-9]";break;case "w":e="[1-4][0-9]|5[0-3]|"+l+"[1-9]";break;case "E":case "e":case "c":e=".+?";break;case "h":e="1[0-2]|"+l+"[1-9]";break;case "k":e="1[01]|"+
l+"\\d";break;case "H":e="1\\d|2[0-3]|"+l+"\\d";break;case "K":e="1\\d|2[0-4]|"+l+"[1-9]";break;case "m":case "s":e="[0-5]\\d";break;case "S":e="\\d{"+f+"}";break;case "a":f=c.am||b["dayPeriods-format-wide-am"];l=c.pm||b["dayPeriods-format-wide-pm"];e=f+"|"+l;c.strict||(f!=f.toLowerCase()&&(e+="|"+f.toLowerCase()),l!=l.toLowerCase()&&(e+="|"+l.toLowerCase()),-1!=e.indexOf(".")&&(e+="|"+e.replace(/\./g,"")));e=e.replace(/\./g,"\\.");break;default:e=".*"}a&&a.push(d);return"("+e+")"}).replace(/[\xa0 ]/g,
"[\\s\\xa0]")}var u={};g.setObject(c.id.replace(/\//g,"."),u);u._getZone=function(a,b,c){return b?n.getTimezoneName(a):a.getTimezoneOffset()};u.format=function(a,c){c=c||{};var d=k.normalizeLocale(c.locale),e=c.formatLength||"short",d=u._getGregorianBundle(d),f=[],l=g.hitch(this,b,a,d,c);if("year"==c.selector)return p(d["dateFormatItem-yyyy"]||"yyyy",l);var m;"date"!=c.selector&&(m=c.timePattern||d["timeFormat-"+e])&&f.push(p(m,l));"time"!=c.selector&&(m=c.datePattern||d["dateFormat-"+e])&&f.push(p(m,
l));return 1==f.length?f[0]:d["dateTimeFormat-"+e].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return f[b]})};u.regexp=function(a){return u._parseInfo(a).regexp};u._parseInfo=function(a){a=a||{};var b=k.normalizeLocale(a.locale),b=u._getGregorianBundle(b),c=a.formatLength||"short",d=a.datePattern||b["dateFormat-"+c],e=a.timePattern||b["timeFormat-"+c],c="date"==a.selector?d:"time"==a.selector?e:b["dateTimeFormat-"+c].replace(/\{(\d+)\}/g,function(a,b){return[e,d][b]}),f=[];return{regexp:p(c,
g.hitch(this,r,f,b,a)),tokens:f,bundle:b}};u.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,d=u._parseInfo(b),e=d.tokens,l=d.bundle,c=RegExp("^"+d.regexp.replace(c,"")+"$",d.strict?"":"i").exec(a&&a.replace(c,""));if(!c)return null;var k=["abbr","wide","narrow"],p=[1970,0,1,0,0,0,0],m="",c=f.every(c,function(a,c){if(!c)return!0;var d=e[c-1],q=d.length,d=d.charAt(0);switch(d){case "y":if(2!=q&&b.strict)p[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),q=100*d.substring(0,2),d=
Math.min(Number(d.substring(2,4))+20,99),p[0]=a<d?q+a:q-100+a;else{if(b.strict)return!1;p[0]=a}break;case "M":case "L":if(2<q){if(q=l["months-"+("L"==d?"standAlone":"format")+"-"+k[q-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),q=f.map(q,function(a){return a.replace(".","").toLowerCase()})),a=f.indexOf(q,a),-1==a)return!1}else a--;p[1]=a;break;case "E":case "e":case "c":q=l["days-"+("c"==d?"standAlone":"format")+"-"+k[q-3]].concat();b.strict||(a=a.toLowerCase(),q=f.map(q,function(a){return a.toLowerCase()}));
a=f.indexOf(q,a);if(-1==a)return!1;break;case "D":p[1]=0;case "d":p[2]=a;break;case "a":q=b.am||l["dayPeriods-format-wide-am"];d=b.pm||l["dayPeriods-format-wide-pm"];if(!b.strict){var v=/\./g;a=a.replace(v,"").toLowerCase();q=q.replace(v,"").toLowerCase();d=d.replace(v,"").toLowerCase()}if(b.strict&&a!=q&&a!=d)return!1;m=a==d?"p":a==q?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;p[3]=a;break;case "m":p[4]=a;break;case "s":p[5]=a;break;case "S":p[6]=a}return!0}),d=
+p[3];"p"===m&&12>d?p[3]=d+12:"a"===m&&12==d&&(p[3]=0);d=new Date(p[0],p[1],p[2],p[3],p[4],p[5],p[6]);b.strict&&d.setFullYear(p[0]);var r=e.join(""),g=-1!=r.indexOf("d"),r=-1!=r.indexOf("M");if(!c||r&&d.getMonth()>p[1]||g&&d.getDate()>p[2])return null;if(r&&d.getMonth()<p[1]||g&&d.getDate()<p[2])d=n.add(d,"hour",1);return d};var a=[];u.addCustomFormats=function(b,c){a.push({pkg:b,name:c})};u._getGregorianBundle=function(b){var c={};f.forEach(a,function(a){a=k.getLocalization(a.pkg,a.name,b);c=g.mixin(c,
a)},this);return c};u.addCustomFormats(c.id.replace(/\/date\/locale$/,".cldr"),"gregorian");u.getNames=function(a,b,c,d){var e;d=u._getGregorianBundle(d);a=[a,c,b];"standAlone"==c&&(c=a.join("-"),e=d[c],1==e[0]&&(e=void 0));a[1]="format";return(e||d[a.join("-")]).concat()};u.isWeekend=function(a,b){var c=m.getWeekend(b),d=(a||new Date).getDay();c.end<c.start&&(c.end+=7,d<c.start&&(d+=7));return d>=c.start&&d<=c.end};u._getDayOfYear=function(a){return n.difference(new Date(a.getFullYear(),0,1,a.getHours()),
a)+1};u._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=(c-b+7)%7,d=Math.floor((u._getDayOfYear(a)+d-1)/7);c==b&&d++;return d};return u});
define(["./has","./_base/lang"],function(g,f){var n={getDaysInMonth:function(f){var k=f.getMonth();return 1==k&&n.isLeapYear(f)?29:[31,28,31,30,31,30,31,31,30,31,30,31][k]},isLeapYear:function(f){f=f.getFullYear();return!(f%400)||!(f%4)&&!!(f%100)},getTimezoneName:function(f){var k=f.toString(),e="",l=k.indexOf("(");if(-1<l)e=k.substring(++l,k.indexOf(")"));else if(l=/([A-Z\/]+) \d{4}$/,k=k.match(l))e=k[1];else if(k=f.toLocaleString(),l=/ ([A-Z\/]+)$/,k=k.match(l))e=k[1];return"AM"==e||"PM"==e?"":
e},compare:function(f,k,e){f=new Date(+f);k=new Date(+(k||new Date));"date"==e?(f.setHours(0,0,0,0),k.setHours(0,0,0,0)):"time"==e&&(f.setFullYear(0,0,0),k.setFullYear(0,0,0));return f>k?1:f<k?-1:0},add:function(f,k,e){var l=new Date(+f),d=!1,c="Date";switch(k){case "day":break;case "weekday":var b;(k=e%5)?b=parseInt(e/5):(k=0<e?5:-5,b=0<e?(e-5)/5:(e+5)/5);var p=f.getDay(),r=0;6==p&&0<e?r=1:0==p&&0>e&&(r=-1);p+=k;if(0==p||6==p)r=0<e?2:-2;e=7*b+k+r;break;case "year":c="FullYear";d=!0;break;case "week":e*=
7;break;case "quarter":e*=3;case "month":d=!0;c="Month";break;default:c="UTC"+k.charAt(0).toUpperCase()+k.substring(1)+"s"}if(c)l["set"+c](l["get"+c]()+e);d&&l.getDate()<f.getDate()&&l.setDate(0);return l},difference:function(f,k,e){k=k||new Date;e=e||"day";var l=k.getFullYear()-f.getFullYear(),d=1;switch(e){case "quarter":f=f.getMonth();k=k.getMonth();f=Math.floor(f/3)+1;k=Math.floor(k/3)+1;d=k+4*l-f;break;case "weekday":l=Math.round(n.difference(f,k,"day"));e=parseInt(n.difference(f,k,"week"));
d=l%7;if(0==d)l=5*e;else{var c=0,b=f.getDay();k=k.getDay();e=parseInt(l/7);d=l%7;f=new Date(f);f.setDate(f.getDate()+7*e);f=f.getDay();if(0<l)switch(!0){case 6==b:c=-1;break;case 0==b:c=0;break;case 6==k:c=-1;break;case 0==k:c=-2;break;case 5<f+d:c=-2}else if(0>l)switch(!0){case 6==b:c=0;break;case 0==b:c=1;break;case 6==k:c=2;break;case 0==k:c=1;break;case 0>f+d:c=2}l=l+c-2*e}d=l;break;case "year":d=l;break;case "month":d=k.getMonth()-f.getMonth()+12*l;break;case "week":d=parseInt(n.difference(f,
k,"day")/7);break;case "day":d/=24;case "hour":d/=60;case "minute":d/=60;case "second":d/=1E3;case "millisecond":d*=k.getTime()-f.getTime()}return Math.round(d)}};g("extend-dojo")&&f.mixin(f.getObject("dojo.date",!0),n);return n});
define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(g,f,n,m,k,e){var l=e.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(n.hitch(this,"_fireEventAndReload"),this._currentTimeout)},
trigger:function(d,c,b,e,f,l,a,k){if(f!=this._obj){this.stop();this._initialDelay=a||500;this._subsequentDelay=l||0.9;this._minDelay=k||10;this._obj=f;this._node=b;this._count=this._currentTimeout=-1;this._callback=n.hitch(c,e);this._evt={faux:!0};for(var t in d)"layerX"!=t&&"layerY"!=t&&(c=d[t],"function"!=typeof c&&"undefined"!=typeof c&&(this._evt[t]=c));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,
this._evt),this._obj=null)},addKeyListener:function(d,c,b,e,k,u,a){var q="keyCode"in c?"keyCode":"charCode"in c?"charCode":"charOrCode",t=[m(d,"keyCode"in c?"keydown":"charCode"in c?"keypress":f._keypress,n.hitch(this,function(f){f[q]!=c[q]||void 0!==c.ctrlKey&&c.ctrlKey!=f.ctrlKey||void 0!==c.altKey&&c.altKey!=f.altKey||void 0!==c.metaKey&&c.metaKey!=(f.metaKey||!1)||void 0!==c.shiftKey&&c.shiftKey!=f.shiftKey?l._obj==c&&l.stop():(f.stopPropagation(),f.preventDefault(),l.trigger(f,b,d,e,c,k,u,a))})),
m(d,"keyup",n.hitch(this,function(){l._obj==c&&l.stop()}))];return{remove:function(){g.forEach(t,function(a){a.remove()})}}},addMouseListener:function(d,c,b,e,f,u){var a=[m(d,"mousedown",n.hitch(this,function(a){a.preventDefault();l.trigger(a,c,d,b,d,e,f,u)})),m(d,"mouseup",n.hitch(this,function(a){this._obj&&a.preventDefault();l.stop()})),m(d,"mouseout",n.hitch(this,function(a){this._obj&&a.preventDefault();l.stop()})),m(d,"dblclick",n.hitch(this,function(a){a.preventDefault();9>k("ie")&&(l.trigger(a,
c,d,b,d,e,f,u),setTimeout(n.hitch(this,l.stop),50))}))];return{remove:function(){g.forEach(a,function(a){a.remove()})}}},addListener:function(d,c,b,e,f,l,a,k){var t=[this.addKeyListener(c,b,e,f,l,a,k),this.addMouseListener(d,e,f,l,a,k)];return{remove:function(){g.forEach(t,function(a){a.remove()})}}}};return l});
define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/_WidgetsInTemplateMixin dijit/typematic dojo/_base/declare dojo/date dojo/date/stamp dojo/date/locale dojo/dom-style dojo/dom-class dojo/_base/fx dojo/on dojo/_base/array dojo/_base/lang dojo/text!./Calendar/Calendar.html".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){return e("dojox.widget._CalendarBase",[g,f,n,m],{templateString:t,_views:null,useFx:!0,value:new Date,constraints:null,footerFormat:"medium",constructor:function(){this._views=
[];this.value=new Date},_setConstraintsAttr:function(a){if(a=this.constraints=a)"string"==typeof a.min&&(a.min=d.fromISOString(a.min)),"string"==typeof a.max&&(a.max=d.fromISOString(a.max))},postMixInProperties:function(){this.inherited(arguments);this.value=this.parseInitialValue(this.value)},parseInitialValue:function(a){if(!a||-1===a)return new Date;a.getFullYear||isNaN(a)||("string"==typeof this.value&&(a=parseInt(a)),a=this._makeDate(a));return a},_makeDate:function(a){return a},postCreate:function(){this.displayMonth=
new Date(this.get("value"));this._isInvalidDate(this.displayMonth)&&(this.displayMonth=new Date);var d={parent:this,_getValueAttr:q.hitch(this,function(){return new Date(this._internalValue||this.value)}),_getDisplayMonthAttr:q.hitch(this,function(){return new Date(this.displayMonth)}),_getConstraintsAttr:q.hitch(this,function(){return this.constraints}),getLang:q.hitch(this,function(){return this.lang}),isDisabledDate:q.hitch(this,this.isDisabledDate),getClassForDate:q.hitch(this,this.getClassForDate),
addFx:this.useFx?q.hitch(this,this.addFx):function(){}};a.forEach(this._views,function(a){a=(new a(d)).placeAt(this);var c=a.getHeader();c&&(this.header.appendChild(c),b.set(c,"display","none"));b.set(a.domNode,"visibility","hidden");a.on("valueSelected",q.hitch(this,"_onDateSelected"));a.set("value",this.get("value"))},this);2>this._views.length&&b.set(this.header,"cursor","auto");this.inherited(arguments);this._children=this.getChildren();this._currentChild=0;this.footer.innerHTML="Today: "+c.format(new Date,
{formatLength:this.footerFormat,selector:"date",locale:this.lang});u(this.footer,"click",q.hitch(this,"goToToday"));var e=this._children[0];b.set(e.domNode,"top","0px");b.set(e.domNode,"visibility","visible");e.getHeader()&&b.set(e.getHeader(),"display","");p.toggle(this.container,"no-header",!e.useHeader);e.onDisplay();var f=this,e=function(a,b,c){k.addMouseListener(f[a],f,function(a){0<=a&&f._adjustDisplay(b,c)},0.8,500)};e("incrementMonth","month",1);e("decrementMonth","month",-1);this._updateTitleStyle()},
addFx:function(a,b){},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a){a||(a=new Date);a.getFullYear||(a=d.fromISOString(a+""));return this._isInvalidDate(a)?!1:!this.value||l.compare(a,this.value)?(a=new Date(a),this.displayMonth=new Date(a),this._internalValue=a,this.isDisabledDate(a,this.lang)||0!=this._currentChild||(this.value=a,this.onChange(a)),this._children&&0<this._children.length&&this._children[this._currentChild].set("value",
this.value),!0):!1},isDisabledDate:function(a,b){var c=this.constraints,d=l.compare;return c&&(c.min&&0<d(c.min,a,"date")||c.max&&0>d(c.max,a,"date"))},onValueSelected:function(a){},_onDateSelected:function(a,b,c){this.displayMonth=a;this.set("value",a);this._transitionVert(-1)||(b||0===b||(b=this.get("value")),this.onValueSelected(b))},onChange:function(a){},onHeaderClick:function(a){this._transitionVert(1)},goToToday:function(){this.set("value",new Date);this.onValueSelected(this.get("value"))},
_transitionVert:function(a){var c=this._children[this._currentChild],d=this._children[this._currentChild+a];if(!d)return!1;b.set(d.domNode,"visibility","visible");var e=b.get(this.containerNode,"height");d.set("value",this.displayMonth);c.header&&b.set(c.header,"display","none");d.header&&b.set(d.header,"display","");b.set(d.domNode,"top",-1*e+"px");b.set(d.domNode,"visibility","visible");this._currentChild+=a;a*=e;b.set(d.domNode,"top",-1*a+"px");a=r.animateProperty({node:c.domNode,properties:{top:a},
onEnd:function(){b.set(c.domNode,"visibility","hidden")}});e=r.animateProperty({node:d.domNode,properties:{top:0},onEnd:function(){d.onDisplay()}});p.toggle(this.container,"no-header",!d.useHeader);a.play();e.play();c.onBeforeUnDisplay();d.onBeforeDisplay();this._updateTitleStyle();return!0},_updateTitleStyle:function(){p.toggle(this.header,"navToPanel",this._currentChild<this._children.length-1)},_slideTable:function(a,c,d){a=a.domNode;var e=a.cloneNode(!0),f=b.get(a,"width");a.parentNode.appendChild(e);
b.set(a,"left",f*c+"px");d();c=r.animateProperty({node:e,properties:{left:f*c*-1},duration:500,onEnd:function(){e.parentNode.removeChild(e)}});d=r.animateProperty({node:a,properties:{left:0},duration:500});c.play();d.play()},_addView:function(a){this._views.push(a)},getClassForDate:function(a,b){},_adjustDisplay:function(a,b,c){var d=this._children[this._currentChild],e=this.displayMonth=d.adjustDate(this.displayMonth,b);this._slideTable(d,b,function(){d.set("value",e)})}})});
define(["dojo/_base/kernel","dojo/_base/declare","./_CalendarBase","./_CalendarDay","./_CalendarMonthYear"],function(g,f,n,m,k){g.experimental("dojox/widget/Calendar");return f("dojox.widget.Calendar",[n,m,k],{})});
define(["dojo/_base/kernel","dojo/_base/lang","./_base"],function(g,f,n){g.experimental("dojox.validate.check");n.check=function(m,k){var e=[],l=[],d={isSuccessful:function(){return!this.hasInvalid()&&!this.hasMissing()},hasMissing:function(){return 0<e.length},getMissing:function(){return e},isMissing:function(a){for(var b=0;b<e.length;b++)if(a==e[b])return!0;return!1},hasInvalid:function(){return 0<l.length},getInvalid:function(){return l},isInvalid:function(a){for(var b=0;b<l.length;b++)if(a==
l[b])return!0;return!1}},c=function(a,b){return"undefined"==typeof b[a]};if(k.trim instanceof Array)for(var b=0;b<k.trim.length;b++){var p=m[k.trim[b]];c("type",p)||"text"!=p.type&&"textarea"!=p.type&&"password"!=p.type||(p.value=p.value.replace(/(^\s*|\s*$)/g,""))}if(k.uppercase instanceof Array)for(b=0;b<k.uppercase.length;b++)p=m[k.uppercase[b]],c("type",p)||"text"!=p.type&&"textarea"!=p.type&&"password"!=p.type||(p.value=p.value.toUpperCase());if(k.lowercase instanceof Array)for(b=0;b<k.lowercase.length;b++)p=
m[k.lowercase[b]],c("type",p)||"text"!=p.type&&"textarea"!=p.type&&"password"!=p.type||(p.value=p.value.toLowerCase());if(k.ucfirst instanceof Array)for(b=0;b<k.ucfirst.length;b++)p=m[k.ucfirst[b]],c("type",p)||"text"!=p.type&&"textarea"!=p.type&&"password"!=p.type||(p.value=p.value.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase()}));if(k.digit instanceof Array)for(b=0;b<k.digit.length;b++)p=m[k.digit[b]],c("type",p)||"text"!=p.type&&"textarea"!=p.type&&
"password"!=p.type||(p.value=p.value.replace(/\D/g,""));if(k.required instanceof Array)for(b=0;b<k.required.length;b++)if(f.isString(k.required[b]))if(p=m[k.required[b]],!c("type",p)&&("text"==p.type||"textarea"==p.type||"password"==p.type||"file"==p.type)&&/^\s*$/.test(p.value))e[e.length]=p.name;else if(!(c("type",p)||"select-one"!=p.type&&"select-multiple"!=p.type||-1!=p.selectedIndex&&!/^\s*$/.test(p.options[p.selectedIndex].value)))e[e.length]=p.name;else if(p instanceof Array){for(var r=!1,
g=0;g<p.length;g++)p[g].checked&&(r=!0);r||(e[e.length]=p[0].name)}if(k.required instanceof Array)for(b=0;b<k.required.length;b++)if(f.isObject(k.required[b])){var a,q;for(q in k.required[b])p=m[q],a=k.required[b][q];if(p instanceof Array){for(g=r=0;g<p.length;g++)p[g].checked&&r++;r<a&&(e[e.length]=p[0].name)}else if(!c("type",p)&&"select-multiple"==p.type){for(g=r=0;g<p.options.length;g++)p.options[g].selected&&!/^\s*$/.test(p.options[g].value)&&r++;r<a&&(e[e.length]=p.name)}}if(f.isObject(k.dependencies))for(q in k.dependencies)p=
m[q],c("type",p)||"text"!=p.type&&"textarea"!=p.type&&"password"!=p.type||/\S+/.test(p.value)||d.isMissing(p.name)||(b=m[k.dependencies[q]],"text"!=b.type&&"textarea"!=b.type&&"password"!=b.type||/^\s*$/.test(b.value)||(e[e.length]=p.name));if(f.isObject(k.constraints))for(q in k.constraints)if((p=m[q])&&(c("tagName",p)||!(0<=p.tagName.toLowerCase().indexOf("input")||0<=p.tagName.toLowerCase().indexOf("textarea"))||!/^\s*$/.test(p.value))){g=!0;if(f.isFunction(k.constraints[q]))g=k.constraints[q](p.value);
else if(f.isArray(k.constraints[q]))if(f.isArray(k.constraints[q][0]))for(b=0;b<k.constraints[q].length&&(g=n.evaluateConstraint(k,k.constraints[q][b],q,p),g);b++);else g=n.evaluateConstraint(k,k.constraints[q],q,p);g||(l[l.length]=p.name)}if(f.isObject(k.confirm))for(q in k.confirm)p=m[q],b=m[k.confirm[q]],c("type",p)||c("type",b)||"text"!=p.type&&"textarea"!=p.type&&"password"!=p.type||b.type!=p.type||b.value==p.value||d.isInvalid(p.name)||/^\s*$/.test(b.value)||(l[l.length]=p.name);return d};n.evaluateConstraint=
function(f,k,e,l){f=k[0];k=k.slice(1);k.unshift(l.value);return"undefined"!=typeof f?f.apply(null,k):!1};return n.check});
define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(g,f,n){var m=g.getObject("validate.regexp",!0,n);return m=n.validate.regexp={ipAddress:function(f){f="object"==typeof f?f:{};"boolean"!=typeof f.allowDottedDecimal&&(f.allowDottedDecimal=!0);"boolean"!=typeof f.allowDottedHex&&(f.allowDottedHex=!0);"boolean"!=typeof f.allowDottedOctal&&(f.allowDottedOctal=!0);"boolean"!=typeof f.allowDecimal&&(f.allowDecimal=!0);"boolean"!=typeof f.allowHex&&(f.allowHex=!0);"boolean"!=typeof f.allowIPv6&&
(f.allowIPv6=!0);"boolean"!=typeof f.allowHybrid&&(f.allowHybrid=!0);var e=[];f.allowDottedDecimal&&e.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");f.allowDottedHex&&e.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");f.allowDottedOctal&&e.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");f.allowDecimal&&e.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");
f.allowHex&&e.push("0[xX]0*[\\da-fA-F]{1,8}");f.allowIPv6&&e.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");f.allowHybrid&&e.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");f="";0<e.length&&(f="("+e.join("|")+")");return f},host:function(f){f="object"==typeof f?f:{};"boolean"!=typeof f.allowIP&&(f.allowIP=!0);"boolean"!=typeof f.allowLocal&&(f.allowLocal=!1);"boolean"!=typeof f.allowPort&&(f.allowPort=!0);"boolean"!=typeof f.allowNamed&&
(f.allowNamed=!1);var e=f.allowPort?"(\\:\\d+)?":"",l="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)";f.allowIP&&(l+="|"+m.ipAddress(f));f.allowLocal&&(l+="|localhost");f.allowNamed&&(l+="|^[^-][a-zA-Z0-9_-]*");return"("+l+")"+e},url:function(k){k="object"==typeof k?k:{};"scheme"in k||(k.scheme=[!0,!1]);return f.buildGroupRE(k.scheme,function(e){return e?"(https?|ftps?)\\://":""})+m.host(k)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},
emailAddress:function(f){f="object"==typeof f?f:{};"boolean"!=typeof f.allowCruft&&(f.allowCruft=!1);f.allowPort=!1;var e="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@"+m.host(f);f.allowCruft&&(e="<?(mailto\\:)?"+e+">?");return e},emailAddressList:function(f){f="object"==typeof f?f:{};"string"!=typeof f.listSeparator&&(f.listSeparator="\\s;,");var e=m.emailAddress(f);return"("+e+"\\s*["+f.listSeparator+"]\\s*)*"+e+"\\s*["+f.listSeparator+"]?\\s*"},numberFormat:function(k){k="object"==
typeof k?k:{};"undefined"==typeof k.format&&(k.format="###-###-####");return f.buildGroupRE(k.format,function(e){return f.escapeString(e,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(f){f="object"==typeof f?f:{};"boolean"!=typeof f.allowTerritories&&(f.allowTerritories=!0);"boolean"!=typeof f.allowMilitary&&(f.allowMilitary=!0);var e="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";
f.allowTerritories&&(e+="|AS|FM|GU|MH|MP|PW|PR|VI");f.allowMilitary&&(e+="|AA|AE|AP");return"("+e+")"}}}});define({group:".",percentSign:"%",exponential:"E",scientificFormat:"#E0",percentFormat:"#,##0\u00a0%",list:";",infinity:"\u221e",minusSign:"-",decimal:",",nan:"NaN",perMille:"\u2030",decimalFormat:"#,##0.###",currencyFormat:"#,##0.00\u00a0\u00a4",plusSign:"+","decimalFormat-long":"000 Billionen","decimalFormat-short":"000\u00a0Bio"});
define({root:{scientificFormat:"#E0","currencySpacing-afterCurrency-currencyMatch":"[:^S:]",infinity:"\u221e",list:";",percentSign:"%",minusSign:"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-insertBetween":"\u00a0",nan:"NaN",plusSign:"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:^S:]",currencyFormat:"\u00a4\u00a0#,##0.00",perMille:"\u2030",group:",",
percentFormat:"#,##0%","decimalFormat-long":"000T",decimalFormat:"#,##0.###",decimal:".","currencySpacing-beforeCurrency-insertBetween":"\u00a0",exponential:"E"},ar:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-gb":!0,es:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hu:!0,it:!0,ja:!0,ko:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,"zh-tw":!0});
define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(g,f,n,m,k){var e={};g.setObject("dojo.number",e);e.format=function(d,c){c=g.mixin({},c||{});var b=f.normalizeLocale(c.locale),b=f.getLocalization("dojo.cldr","number",b);c.customs=b;b=c.pattern||b[(c.type||"decimal")+"Format"];return isNaN(d)||Infinity==Math.abs(d)?null:e._applyPattern(d,b,c)};e._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;e._applyPattern=function(d,c,b){b=b||{};var f=b.customs.group,l=b.customs.decimal;
c=c.split(";");var k=c[0];c=c[0>d?1:0]||"-"+k;if(-1!=c.indexOf("%"))d*=100;else if(-1!=c.indexOf("\u2030"))d*=1E3;else if(-1!=c.indexOf("\u00a4"))f=b.customs.currencyGroup||f,l=b.customs.currencyDecimal||l,c=c.replace(/\u00a4{1,3}/,function(a){return b[["symbol","currency","displayName"][a.length-1]]||b.currency||""});else if(-1!=c.indexOf("E"))throw Error("exponential notation not supported");var a=e._numberPatternRE,k=k.match(a);if(!k)throw Error("unable to find a number expression in pattern: "+
c);!1===b.fractional&&(b.places=0);return c.replace(a,e._formatAbsolute(d,k[0],{decimal:l,group:f,places:b.places,round:b.round}))};e.round=function(d,c,b){b=10/(b||10);return(b*+d).toFixed(c)/b};if(0==(0.9).toFixed()){var l=e.round;e.round=function(d,c,b){var e=Math.pow(10,-c||0),f=Math.abs(d);if(!d||f>=e)e=0;else if(f/=e,0.5>f||0.95<=f)e=0;return l(d,c,b)+(0<d?e:-e)}}e._formatAbsolute=function(d,c,b){b=b||{};!0===b.places&&(b.places=0);Infinity===b.places&&(b.places=6);c=c.split(".");var f="string"==
typeof b.places&&b.places.indexOf(","),l=b.places;f?l=b.places.substring(f+1):0<=l||(l=(c[1]||[]).length);0>b.round||(d=e.round(d,l,b.round));d=String(Math.abs(d)).split(".");var k=d[1]||"";c[1]||b.places?(f&&(b.places=b.places.substring(0,f)),f=void 0!==b.places?b.places:c[1]&&c[1].lastIndexOf("0")+1,f>k.length&&(d[1]=m.pad(k,f,"0",!0)),l<k.length&&(d[1]=k.substr(0,l))):d[1]&&d.pop();l=c[0].replace(",","");f=l.indexOf("0");-1!=f&&(f=l.length-f,f>d[0].length&&(d[0]=m.pad(d[0],f)),-1==l.indexOf("#")&&
(d[0]=d[0].substr(d[0].length-f)));var l=c[0].lastIndexOf(","),a,q;-1!=l&&(a=c[0].length-l-1,c=c[0].substr(0,l),l=c.lastIndexOf(","),-1!=l&&(q=c.length-l-1));c=[];for(l=d[0];l;)f=l.length-a,c.push(0<f?l.substr(f):l),l=0<f?l.slice(0,f):"",q&&(a=q,delete q);d[0]=c.reverse().join(b.group||",");return d.join(b.decimal||".")};e.regexp=function(d){return e._parseInfo(d).regexp};e._parseInfo=function(d){d=d||{};var c=f.normalizeLocale(d.locale),c=f.getLocalization("dojo.cldr","number",c),b=d.pattern||c[(d.type||
"decimal")+"Format"],l=c.group,m=c.decimal,g=1;if(-1!=b.indexOf("%"))g/=100;else if(-1!=b.indexOf("\u2030"))g/=1E3;else{var a=-1!=b.indexOf("\u00a4");a&&(l=c.currencyGroup||l,m=c.currencyDecimal||m)}c=b.split(";");1==c.length&&c.push("-"+c[0]);c=k.buildGroupRE(c,function(a){a="(?:"+k.escapeString(a,".")+")";return a.replace(e._numberPatternRE,function(a){var b={signed:!1,separator:d.strict?l:[l,""],fractional:d.fractional,decimal:m,exponent:!1};a=a.split(".");var c=d.places;1==a.length&&1!=g&&(a[1]=
"###");1==a.length||0===c?b.fractional=!1:(void 0===c&&(c=d.pattern?a[1].lastIndexOf("0")+1:Infinity),c&&void 0==d.fractional&&(b.fractional=!0),!d.places&&c<a[1].length&&(c+=","+a[1].length),b.places=c);a=a[0].split(",");1<a.length&&(b.groupSize=a.pop().length,1<a.length&&(b.groupSize2=a.pop().length));return"("+e._realNumberRegexp(b)+")"})},!0);a&&(c=c.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,b,c,e){a=k.escapeString(d[["symbol","currency","displayName"][c.length-1]]||d.currency||
"");b=b?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return d.strict?b+a+e:(b&&(b+="*"),e&&(e+="*"),"(?:"+b+a+e+")?")}));return{regexp:c.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:l,decimal:m,factor:g}};e.parse=function(d,c){var b=e._parseInfo(c),f=RegExp("^"+b.regexp+"$").exec(d);if(!f)return NaN;var l=f[1];if(!f[1]){if(!f[2])return NaN;l=f[2];b.factor*=-1}l=l.replace(RegExp("["+b.group+"\\s\\xa0]","g"),"").replace(b.decimal,".");return l*b.factor};e._realNumberRegexp=function(d){d=d||{};"places"in d||(d.places=
Infinity);"string"!=typeof d.decimal&&(d.decimal=".");"fractional"in d&&!/^0/.test(d.places)||(d.fractional=[!0,!1]);"exponent"in d||(d.exponent=[!0,!1]);"eSigned"in d||(d.eSigned=[!0,!1]);var c=e._integerRegexp(d),b=k.buildGroupRE(d.fractional,function(b){var c="";b&&0!==d.places&&(c="\\"+d.decimal,c=Infinity==d.places?"(?:"+c+"\\d+)?":c+("\\d{"+d.places+"}"));return c},!0),f=k.buildGroupRE(d.exponent,function(b){return b?"([eE]"+e._integerRegexp({signed:d.eSigned})+")":""}),c=c+b;b&&(c="(?:(?:"+
c+")|(?:"+b+"))");return c+f};e._integerRegexp=function(d){d=d||{};"signed"in d||(d.signed=[!0,!1]);"separator"in d?"groupSize"in d||(d.groupSize=3):d.separator="";var c=k.buildGroupRE(d.signed,function(b){return b?"[-+]":""},!0),b=k.buildGroupRE(d.separator,function(b){if(!b)return"(?:\\d+)";b=k.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var c=d.groupSize,e=d.groupSize2;return e?(b="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+b+"]\\d{"+e+"})*["+b+"]\\d{"+c+"})",0<c-e?"(?:"+b+"|(?:0|[1-9]\\d{0,"+
(c-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return c+b};return e});
define(["./_base/kernel","./_base/lang"],function(g,f){var n={};f.setObject("dojo.regexp",n);n.escapeString=function(f,k){return f.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return k&&-1!=k.indexOf(e)?e:"\\"+e})};n.buildGroupRE=function(f,k,e){if(!(f instanceof Array))return k(f);for(var l=[],d=0;d<f.length;d++)l.push(k(f[d]));return n.group(l.join("|"),e)};n.group=function(f,k){return"("+(k?"?:":"")+f+")"};return n});
define(["dojo/_base/lang","dojo/regexp","dojo/number","./regexp"],function(g,f,n,m){var k=g.getObject("dojox.validate",!0);k.isText=function(e,f){f="object"==typeof f?f:{};return/^\s*$/.test(e)||"number"==typeof f.length&&f.length!=e.length||"number"==typeof f.minlength&&f.minlength>e.length||"number"==typeof f.maxlength&&f.maxlength<e.length?!1:!0};k._isInRangeCache={};k.isInRange=function(e,f){e=n.parse(e,f);if(isNaN(e))return!1;f="object"==typeof f?f:{};var d="number"==typeof f.max?f.max:Infinity,
c="number"==typeof f.min?f.min:-Infinity,b=k._isInRangeCache,p=e+"max"+d+"min"+c+"dec"+("string"==typeof f.decimal?f.decimal:".");if("undefined"!=typeof b[p])return b[p];b[p]=!(e<c||e>d);return b[p]};k.isNumberFormat=function(e,f){return RegExp("^"+m.numberFormat(f)+"$","i").test(e)};k.isValidLuhn=function(e){var f=0,d,c;g.isString(e)||(e=String(e));e=e.replace(/[- ]/g,"");d=e.length%2;for(var b=0;b<e.length;b++)c=parseInt(e.charAt(b)),b%2==d&&(c*=2),9<c&&(c-=9),f+=c;return!(f%10)};return k});
define(["./_base","./regexp"],function(g,f){g.isIpAddress=function(g,m){return RegExp("^"+f.ipAddress(m)+"$","i").test(g)};g.isUrl=function(g,m){return RegExp("^"+f.url(m)+"$","i").test(g)};g.isEmailAddress=function(g,m){return RegExp("^"+f.emailAddress(m)+"$","i").test(g)};g.isEmailAddressList=function(g,m){return RegExp("^"+f.emailAddressList(m)+"$","i").test(g)};g.getEmailAddressList=function(f,m){m||(m={});m.listSeparator||(m.listSeparator="\\s;,");return g.isEmailAddressList(f,m)?f.split(RegExp("\\s*["+
m.listSeparator+"]\\s*")):[]};return g});
define("dojo/_base/fx dojo/dom-style dojo/dom-class dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_base/manager dojox/form/uploader/_Base dojo/text!../resources/UploaderFileList.html".split(" "),function(g,f,n,m,k,e,l,d,c){return m("dojox.form.uploader.FileList",d,{uploaderId:"",uploader:null,headerIndex:"#",headerType:"Type",headerFilename:"File Name",headerFilesize:"Size",_upCheckCnt:0,rowAmt:0,templateString:c,postCreate:function(){this.setUploader();this.hideProgress()},reset:function(){for(var b=
0;b<this.rowAmt;b++)this.listNode.deleteRow(0);this.rowAmt=0},setUploader:function(){if(!this.uploaderId&&!this.uploader)console.warn("uploaderId not passed to UploaderFileList");else if(this.uploaderId&&!this.uploader)this.uploader=l.byId(this.uploaderId);else if(4<this._upCheckCnt){console.warn("uploader not found for ID ",this.uploaderId);return}this.uploader?(this.connect(this.uploader,"onChange","_onUploaderChange"),this.connect(this.uploader,"reset","reset"),this.connect(this.uploader,"onBegin",
function(){this.showProgress(!0)}),this.connect(this.uploader,"onProgress","_progress"),this.connect(this.uploader,"onComplete",function(){setTimeout(k.hitch(this,function(){this.hideProgress(!0)}),1250)}),(this._fileSizeAvail={html5:1,flash:1}[this.uploader.uploadType])||(this.sizeHeader.style.display="none")):(this._upCheckCnt++,setTimeout(k.hitch(this,"setUploader"),250))},hideProgress:function(b){this._hideShowProgress(b?{ani:!0,endDisp:"none",beg:15,end:0}:{endDisp:"none",ani:!1})},showProgress:function(b){this._hideShowProgress(b?
{ani:!0,endDisp:"block",beg:0,end:15}:{endDisp:"block",ani:!1})},_progress:function(b){this.percentTextNode.innerHTML=b.percent;f.set(this.percentBarNode,"width",b.percent)},_hideShowProgress:function(b){var c=this.progressNode,d=function(){f.set(c,"display",b.endDisp)};b.ani?(f.set(c,"display","block"),g.animateProperty({node:c,properties:{height:{start:b.beg,end:b.end,units:"px"}},onEnd:d}).play()):d()},_onUploaderChange:function(b){this.reset();e.forEach(b,function(b,c){this._addRow(c+1,this.getFileType(b.name),
b.name,b.size)},this)},_addRow:function(b,c,d,e){var a,f=this.listNode.insertRow(-1);a=f.insertCell(-1);n.add(a,"dojoxUploaderIndex");a.innerHTML=b;a=f.insertCell(-1);n.add(a,"dojoxUploaderIcon");a.innerHTML=c;a=f.insertCell(-1);n.add(a,"dojoxUploaderFileName");a.innerHTML=d;this._fileSizeAvail&&(a=f.insertCell(-1),n.add(a,"dojoxUploaderSize"),a.innerHTML=this.convertBytes(e).value);this.rowAmt++}})});define({label:"Dateien ausw\u00e4hlen..."});
define({root:{label:"Select Files..."},zh:!0,"zh-tw":!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,pl:!0,nl:!0,nb:!0,ko:!0,kk:!0,ja:!0,it:!0,hu:!0,hr:!0,he:!0,fr:!0,fi:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0});
define(["dojo"],function(g){function f(c){c=g.delegate(l,c);if(!("path"in c))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),null;"id"in c||(c.id=k+e++);return c}var n,m,k="dojox-embed-flash-",e=0,l={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};g.isIE?(n=function(c){c=f(c);if(!c)return null;var b,d=c.path;if(c.vars){var e=[];for(b in c.vars)e.push(b+"="+
c.vars[b]);c.params.FlashVars=e.join("&");delete c.vars}d='<object id="'+c.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+c.width+'" height="'+c.height+'"'+(c.style?' style="'+c.style+'"':"")+'><param name="movie" value="'+d+'" />';if(c.params)for(b in c.params)d+='<param name="'+b+'" value="'+c.params[b]+'" />';return{id:c.id,markup:d+"</object>"}},m=function(){for(var c=10,b=null;!b&&7<c;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+c--)}catch(d){}return b?(c=b.GetVariable("$version").split(" ")[1].split(","),
{major:null!=c[0]?parseInt(c[0]):0,minor:null!=c[1]?parseInt(c[1]):0,rev:null!=c[2]?parseInt(c[2]):0}):{major:0,minor:0,rev:0}}(),g.addOnWindowUnload(function(){console.warn("***************UNLOAD");var c=function(){};g.query("object").reverse().style("display","none").forEach(function(b){for(var d in b)if("FlashVars"!=d&&g.isFunction(b[d]))try{b[d]=c}catch(e){}})})):(n=function(c){c=f(c);if(!c)return null;var b,d=c.path;if(c.vars){var e=[];for(b in c.vars)e.push(b+"="+c.vars[b]);c.params.flashVars=
e.join("&");delete c.vars}d='<embed type="application/x-shockwave-flash" src="'+d+'" id="'+c.id+'" width="'+c.width+'" height="'+c.height+'"'+(c.style?' style="'+c.style+'" ':"")+'pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(c.params)for(b in c.params)d+=" "+b+'="'+c.params[b]+'"';return{id:c.id,markup:d+" />"}},m=function(){var c=navigator.plugins["Shockwave Flash"];return c&&c.description?(c=c.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,
".").split("."),{major:null!=c[0]?parseInt(c[0]):0,minor:null!=c[1]?parseInt(c[1]):0,rev:null!=c[2]?parseInt(c[2]):0}):{major:0,minor:0,rev:0}}());var d=function(c,b){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=dojox.embed.Flash.available;this.minimumVersion=c.minimumVersion||9;this.domNode=this.movie=this.id=null;b&&(b=
g.byId(b));setTimeout(g.hitch(this,function(){if(c.expressInstall||this.available&&this.available>=this.minimumVersion)if(c&&b)this.init(c,b);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),100)};g.extend(d,{onReady:function(c){},onLoad:function(c){},onError:function(c){},_onload:function(){clearInterval(this._poller);
delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(c,b){this.destroy();b=g.byId(b||this.domNode);if(!b)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var d=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;dojox.embed.Flash.initialized&&(this.id=dojox.embed.Flash.place(c,b),this.domNode=b,setTimeout(g.hitch(this,function(){this.movie=this.byId(this.id,c.doc);this.onReady(this.movie);this._poller=setInterval(g.hitch(this,
function(){try{d=this.movie.PercentLoaded()}catch(b){console.warn("this.movie.PercentLoaded() failed",b,this.movie)}if(100==d)this._onload();else if(0==d&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(c){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var c=g.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),b;for(b in this)c[b]||
delete this[b];this._poller?g.connect(this,"onLoad",this,"_destroy"):this._destroy()}},byId:function(c,b){b=b||document;return b.embeds[c]?b.embeds[c]:b[c]?b[c]:window[c]?window[c]:document[c]?document[c]:null}});g.mixin(d,{minSupported:8,available:m.major,supported:m.major>=m.required,minimumRequired:m.required,version:m,initialized:!1,onInitialize:function(){d.initialized=!0},__ie_markup__:function(c){return n(c)},proxy:function(c,b){g.forEach(g.isArray(b)?b:[b],function(b){this[b]=g.hitch(this,
function(){return function(){return eval(this.movie.CallFunction('<invoke name="'+b+'" returntype="javascript"><arguments>'+g.map(arguments,function(b){return __flash__toXML(b)}).join("")+"</arguments></invoke>"))}.apply(this,arguments||[])})},c)}});d.place=function(c,b){var d=n(c);b=g.byId(b);b||(b=g.doc.createElement("div"),b.id=d.id+"-container",g.body().appendChild(b));return d?(b.innerHTML=d.markup,d.id):null};d.onInitialize();g.setObject("dojox.embed.Flash",d);return d});
define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/array dojox/embed/Flash".split(" "),function(g,f,n,m,k,e,l,d,c,b){return k("dojox.form.uploader._Flash",[],{swfPath:e.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),preventCache:!0,skipServerCheck:!0,serverTimeout:2E3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=
[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles");this.inherited(arguments)},onReady:function(b){},onLoad:function(b){},onFileChange:function(b){},onFileProgress:function(b){},getFlashFileList:function(){return this._files},flashReset:function(){this.flashMovie.reset();this._files=[];this._fileMap={}},uploadFlash:function(b){this.onBegin(this.getFileList());
b=b||{};b.returnType="F";b.uploadType=this.uploadType;console.log("flas upload",b);this.flashMovie.doUpload(b)},_change:function(b){this._files=this._files.concat(b);c.forEach(b,function(b){b.bytesLoaded=0;b.bytesTotal=b.size;this._fileMap[b.name+"_"+b.size]=b},this);this.onChange(this._files);this.onFileChange(b)},_complete:function(b){this._getCustomEvent().type="load";this.onComplete(b)},_progress:function(b){this._fileMap[b.name+"_"+b.bytesTotal].bytesLoaded=b.bytesLoaded;var c=this._getCustomEvent();
this.onFileProgress(b);this.onProgress(c)},_error:function(b){this.onError(b)},_onFlashBlur:function(b){},_getCustomEvent:function(){var b={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()},c;for(c in this._fileMap)b.bytesTotal+=this._fileMap[c].bytesTotal,b.bytesLoaded+=this._fileMap[c].bytesLoaded;b.decimal=b.bytesLoaded/b.bytesTotal;b.percent=Math.ceil(b.bytesLoaded/b.bytesTotal*100)+"%";return b},_connectFlash:function(){this._subs=[];this._cons=[];var b=d.hitch(this,
function(b,c){this._subs.push(l.subscribe(this.id+b,this,c))});b("/filesSelected","_change");b("/filesUploaded","_complete");b("/filesProgress","_progress");b("/filesError","_error");b("/filesCanceled","onCancel");b("/stageBlur","_onFlashBlur");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&m.set(this.domNode,"tabIndex",this.tabIndex)},_createFlashUploader:function(){var c=this.btnSize.w,e=this.btnSize.h;if(c){var l=this.getUrl();
if(l){if(0>l.toLowerCase().indexOf("http")&&0!=l.indexOf("/")){var a=window.location.href.split("/");a.pop();a=a.join("/")+"/";l=a+l}}else console.warn("Warning: no uploadUrl provided.");this.inputNode=n.create("div",{className:"dojoxFlashNode"},this.domNode,"first");f.set(this.inputNode,{position:"absolute",top:"-2px",width:c+"px",height:e+"px",opacity:0});c={expressInstall:!0,path:(this.swfPath.uri||this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():""),width:c,height:e,allowScriptAccess:"always",
allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:l,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new b(c,this.inputNode);this.flashObject.onError=d.hitch(function(a){console.error("Flash Error: "+
a)});this.flashObject.onReady=d.hitch(this,function(){this.onReady(this)});this.flashObject.onLoad=d.hitch(this,function(a){this.flashMovie=a;this.flashReady=!0;this.onLoad(this)});this._connectFlash()}else setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode);this._createFlashUploader()}),200)}})});
define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){function u(a){return!this.isFulfilled()}function a(a){return!!this._finished}function q(a,b){if(!b)try{var c=a.options,f=v.doc(v._frame),l=c.handleAs;if("html"!==l){if("xml"===l)if("html"===f.documentElement.tagName.toLowerCase()){d("a",f.documentElement).orphan();var p=f.documentElement.innerText,p=p.replace(/>\s+</g,
"><");a.text=e.trim(p)}else a.data=f;else a.text=f.getElementsByTagName("textarea")[0].value;k(a)}else a.data=f}catch(t){b=t}b?this.reject(b):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function t(a){this._callNext()}function v(b,c,d){var e=m.parseArgs(b,m.deepCreate(y,c),!0);b=e.url;c=e.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");v._frame||(v._frame=v.create(v._iframeName,C+"();"));
b=m.deferred(e,null,u,a,q,t);b._callNext=function(){this._calledNext||(this._calledNext=!0,v._currentDfd=null,v._fireNextRequest())};b._legacy=d;v._dfdQueue.push(b);v._fireNextRequest();n(b);return d?b:b.promise}var x=g.id.replace(/[\/\.\-]/g,"_"),C=x+"_onload";r.global[C]||(r.global[C]=function(){var a=v._currentDfd;if(a){var c=b.byId(a.response.options.form)||a._tmpForm;if(c){for(var d=a._contentToClean,e=0;e<d.length;e++)for(var f=d[e],l=0;l<c.childNodes.length;l++){var k=c.childNodes[l];if(k.name===
f){p.destroy(k);break}}a._originalAction&&c.setAttribute("action",a._originalAction);a._originalMethod&&(c.setAttribute("method",a._originalMethod),c.method=a._originalMethod);a._originalTarget&&(c.setAttribute("target",a._originalTarget),c.target=a._originalTarget)}a._tmpForm&&(p.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else v._fireNextRequest()});var y={method:"POST"};v.create=function(a,b,d){if(r.global[a])return r.global[a];if(r.global.frames[a])return r.global.frames[a];d||(c("config-useXDomain")&&
!c("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),d=c("config-dojoBlankHtmlUrl")||f.toUrl("dojo/resources/blank.html"));b=p.place('<iframe id="'+a+'" name="'+a+'" src="'+d+'" onload="'+b+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',r.body());return r.global[a]=b};
v.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=r.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(r.doc.frames[b]&&r.doc.frames[b].document)return r.doc.frames[b].document}return null};v.setSrc=function(a,b,c){a=r.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{c?a.location.replace(b):a.location=b}catch(d){console.log("dojo/request/iframe.setSrc: ",d)}};v._iframeName=
x+"_IoIframe";v._notifyStart=function(){};v._dfdQueue=[];v._currentDfd=null;v._fireNextRequest=function(){var a;try{if(!v._currentDfd&&v._dfdQueue.length){do a=v._currentDfd=v._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&v._dfdQueue.length);if(!a||a.canceled||a.isCanceled&&a.isCanceled())v._currentDfd=null;else{var c=a.response,d=c.options,f=a._contentToClean=[],k=b.byId(d.form),t=m.notify,q=d.data||null,g;a._legacy||"POST"!==d.method||k?"GET"===d.method&&k&&-1<c.url.indexOf("?")&&
(g=c.url.slice(c.url.indexOf("?")+1),q=e.mixin(l.queryToObject(g),q)):k=a._tmpForm=p.create("form",{name:x+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},r.body());if(k){if(!a._legacy){var u=k;do u=u.parentNode;while(u!==r.doc.documentElement);u||(k.style.position="absolute",k.style.left="-1000px",k.style.top="-1000px",r.body().appendChild(k));k.name||(k.name=x+"_form")}if(q){var u=function(a,b){p.create("input",{type:"hidden",name:a,value:b},k);f.push(a)},n;for(n in q){var C=q[n];
if(e.isArray(C)&&1<C.length)for(g=0;g<C.length;g++)u(n,C[g]);else k[n]?k[n].value=C:u(n,C)}}var y=k.getAttributeNode("action"),T=k.getAttributeNode("method"),Q=k.getAttributeNode("target");c.url&&(a._originalAction=y?y.value:null,y?y.value=c.url:k.setAttribute("action",c.url));a._legacy?T&&T.value||(T?T.value=d.method:k.setAttribute("method",d.method)):(a._originalMethod=T?T.value:null,T?T.value=d.method:k.setAttribute("method",d.method));a._originalTarget=Q?Q.value:null;Q?Q.value=v._iframeName:k.setAttribute("target",
v._iframeName);k.target=v._iframeName;t&&t.emit("send",c,a.promise.cancel);v._notifyStart(c);k.submit()}else d="",c.options.data&&(d=c.options.data,"string"!==typeof d&&(d=l.objectToQuery(d))),u=c.url+(-1<c.url.indexOf("?")?"&":"?")+d,t&&t.emit("send",c,a.promise.cancel),v._notifyStart(c),v.setSrc(v._frame,u,!0)}}}catch(U){a.reject(U)}};m.addCommonMethods(v,["GET","POST"]);return v});
define("dojo/query dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-form dojo/request/iframe".split(" "),function(g,f,n,m,k,e,l){return n("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(d){var c={},b;this.getForm();var e=this.getUrl(),m=this;d=d||{};d.uploadType=this.uploadType;b=f.place('<form enctype="multipart/form-data" method="post"></form>',
this.domNode);k.forEach(this._inputs,function(d,a){""!==d.value&&(b.appendChild(d),c[d.name]=d.value)},this);if(d)for(nm in d)void 0===c[nm]&&f.create("input",{name:nm,value:d[nm],type:"hidden"},b);l.post(e,{form:b,handleAs:"json",content:d}).then(function(c){f.destroy(b);if(d.ERROR||d.error)m.onError(c);else m.onComplete(c)},function(c){console.error("error parsing server result",c);f.destroy(b);m.onError(c)})}})});
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo"],function(g,f,n,m){return g("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(f){this.upload(f[0])})},_drop:function(f){m.stopEvent(f);this._files=f.dataTransfer.files;this.onChange(this.getFileList())},
upload:function(f){this.onBegin(this.getFileList());this.uploadWithFormData(f)},addDropTarget:function(f,e){e||(this.connect(f,"dragenter",m.stopEvent),this.connect(f,"dragover",m.stopEvent),this.connect(f,"dragleave",m.stopEvent));this.connect(f,"drop","_drop")},uploadWithFormData:function(f){if(this.getUrl()){var e=new FormData,l=this._getFileFieldName();n.forEach(this._files,function(c,b){e.append(l,c)},this);if(f){f.uploadType=this.uploadType;for(var d in f)e.append(d,f[d])}this.createXhr().send(e)}else console.error("No upload url found.",
this)},_xhrProgress:function(f){if(f.lengthComputable){var e={bytesLoaded:f.loaded,bytesTotal:f.total,type:f.type,timeStamp:f.timeStamp};"load"==f.type?(e.percent="100%",e.decimal=1):(e.decimal=f.loaded/f.total,e.percent=Math.ceil(f.loaded/f.total*100)+"%");this.onProgress(e)}},createXhr:function(){var k=new XMLHttpRequest,e;k.upload.addEventListener("progress",f.hitch(this,"_xhrProgress"),!1);k.addEventListener("load",f.hitch(this,"_xhrProgress"),!1);k.addEventListener("error",f.hitch(this,function(f){this.onError(f);
clearInterval(e)}),!1);k.addEventListener("abort",f.hitch(this,function(f){this.onAbort(f);clearInterval(e)}),!1);k.onreadystatechange=f.hitch(this,function(){if(4===k.readyState){clearInterval(e);try{this.onComplete(JSON.parse(k.responseText.replace(/^\{\}&&/,"")))}catch(f){console.error("Error parsing server result:",f),console.error(k.responseText),this.onError("Error parsing server result:",f)}}});k.open("POST",this.getUrl());k.setRequestHeader("Accept","application/json");e=setInterval(f.hitch(this,
function(){}),250);return k}})});
define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/has dojo/_base/declare dojo/_base/event dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),function(g,f,n,m,k,e,l,d,c,b){k.add("FormData",function(){return!!window.FormData});k.add("xhr-sendAsBinary",function(){var b=window.XMLHttpRequest&&new window.XMLHttpRequest;return b&&!!b.sendAsBinary});k.add("file-multiple",function(){return!!{"true":1,"false":1}[m.get(document.createElement("input",{type:"file"}),
"multiple")]});return e("dojox.form.uploader._Base",[d,c,b],{getForm:function(){if(!this.form)for(var b=this.domNode;b&&b.tagName&&b!==document.body;){if("form"==b.tagName.toLowerCase()){this.form=b;break}b=b.parentNode}return this.form},getUrl:function(){this.uploadUrl&&(this.url=this.uploadUrl);if(this.url)return this.url;this.getForm()&&(this.url=this.form.action);return this.url},connectForm:function(){this.url=this.getUrl();!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",
function(b){console.log("SUBMIT");l.stop(b);this.submit(this.form)}))},supports:function(b){switch(b){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return k("file-multiple");case "FormData":return k(b);case "sendAsBinary":return k("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(b){return b.substring(b.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(b){var c=Math.round(b/1024*1E5)/1E5,d=Math.round(b/1048576*1E5)/
1E5,a=Math.round(b/1073741824*1E5)/1E5,e=b;1<c&&(e=c.toFixed(1)+" kb");1<d&&(e=d.toFixed(1)+" mb");1<a&&(e=a.toFixed(1)+" gb");return{kb:c,mb:d,gb:a,bytes:b,value:e}}})});
define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/dom-form dijit dijit/form/Button ./uploader/_Base ./uploader/_HTML5 ./uploader/_IFrame ./uploader/_Flash dojo/i18n!./nls/Uploader dojo/text!./resources/Uploader.html".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x,C,y){return f("dojox.form.Uploader",[q,a,t,v,x],{uploadOnSelect:!1,tabIndex:0,
multiple:!1,label:C.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:y,baseClass:"dijitUploader "+a.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.force=this.force.toLowerCase();this.supports("multiple")?this.uploadType="form"===this.force?"form":"html5":this.uploadType="flash"===this.force?"flash":"iframe";this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);
l.set(this.domNode,{overflow:"hidden",position:"relative"});this._buildDisplay();b.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=p.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(a){for(var b=0,c,d=[];c=a[b++];)c&&c.name&&d.push(c.name);this.displayInput.value=d.join(", ")}),this.connect(this,
"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(a){},onBegin:function(a){},onProgress:function(a){},onComplete:function(a){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(a){},upload:function(a){a=a||{};a.uploadType=this.uploadType;this.inherited(arguments)},submit:function(a){a=a?a.tagName?a:this.getForm():
this.getForm();a=r.toObject(a);a.uploadType=this.uploadType;this.upload(a)},reset:function(){delete this._files;this._disconnectButton();m.forEach(this._inputs,p.destroy,dojo);this._inputs=[];this._nameIndex=0;this._createInput()},getFileList:function(){var a=[];this.supports("multiple")?m.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},this):m.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,
type:b.value.substring(b.value.lastIndexOf(".")+1)})},this);return a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(a){console.error("Uploader value is read only")},_setDisabledAttr:function(a){this.disabled!=a&&this.inputNode&&(this.inherited(arguments),l.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:l.get(a,"width"),h:l.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/
60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(l.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var a=this._getFileFieldName();this.focusNode=this.inputNode=p.create("input",{type:"file",name:a,"aria-labelledby":this.id+"_label"},this.domNode,"first");this.supports("multiple")&&
this.multiple&&b.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);l.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(k.connect(this.inputNode,"change",this,function(a){this._files=this.inputNode.files;this.onChange(this.getFileList(a));!this.supports("multiple")&&this.multiple&&this._createInput()}));-1<this.tabIndex&&(this.inputNode.tabIndex=this.tabIndex,
this._cons.push(k.connect(this.inputNode,"focus",this,function(){d.add(this.domNode,this.focusedClass)})),this._cons.push(k.connect(this.inputNode,"blur",this,function(){d.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){m.forEach(this._cons,k.disconnect);this._cons.splice(0,this._cons.length)}})});
define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),function(g,f,n,m,k,e,l){e.extend(g,{waiRole:"",waiState:""});return k("dijit._Templated",[f,n],{widgetsInTemplate:!1,constructor:function(){l.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(d,c){var b=this.inherited(arguments),e=c(d,
"waiRole");e&&d.setAttribute("role",e);(e=c(d,"waiState"))&&m.forEach(e.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),d.setAttribute("aria-"+b[0],b[1]))});return b}})});
define("dojo/_base/declare dojo/_base/kernel dojo/_base/fx dojo/dom-attr dojo/dom-class dojo/text!./resources/FileInput.html dijit/form/_FormWidget dijit/_Templated".split(" "),function(g,f,n,m,k,e,l,d){f.experimental("dojox.form.FileInput");return g("dojox.form.FileInput",l,{label:"Browse ...",cancelText:"Cancel",name:"uploadFile",templateString:e,startup:function(){this._listener=this.connect(this.fileInput,"onchange","_matchValue");this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue")},
postCreate:function(){},_matchValue:function(){this.inputNode.value=this.fileInput.value;this.inputNode.value&&(this.cancelNode.style.visibility="visible",n.fadeIn({node:this.cancelNode,duration:275}).play())},setLabel:function(c,b){this.titleNode.innerHTML=c},reset:function(c){this.disconnect(this._listener);this.disconnect(this._keyListener);this.fileInput&&this.domNode.removeChild(this.fileInput);n.fadeOut({node:this.cancelNode,duration:275}).play();this.fileInput=document.createElement("input");
this.fileInput.setAttribute("type","file");this.fileInput.setAttribute("id",this.id);this.fileInput.setAttribute("name",this.name);k.add(this.fileInput,"dijitFileInputReal");this.domNode.appendChild(this.fileInput);this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");this._listener=this.connect(this.fileInput,"onchange","_matchValue");this.inputNode.value=""}})});
define(["dojo/_base/declare","dojo/dom-attr"],function(g,f){return g("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(g){this._set("readOnly",g);f.set(this.focusNode,"readOnly",g)},_setLabelAttr:void 0,_getSubmitValue:function(f){return null==f||""===f?"on":f},_setValueAttr:function(g){g=this._getSubmitValue(g);this._set("value",g);f.set(this.focusNode,"value",g)},reset:function(){this.inherited(arguments);this._set("value",
this._getSubmitValue(this.params.value));f.set(this.focusNode,"value",this.value)},_onClick:function(f){return this.readOnly?(f.stopPropagation(),f.preventDefault(),!1):this.inherited(arguments)}})});
define(["dojo/_base/declare","dojo/dom-attr"],function(g,f){return g("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(f){var m=this.checked;this._set("checked",!m);var k=this.inherited(arguments);this.set("checked",k?this.checked:m);return k},_setCheckedAttr:function(g,m){this._set("checked",g);var k=this.focusNode||this.domNode;this._created&&f.get(k,"checked")!=!!g&&f.set(k,"checked",!!g);k.setAttribute(this._aria_attr,String(g));this._handleOnChange(g,
m)},postCreate:function(){this.inherited(arguments);var f=this.focusNode||this.domNode;this.checked&&f.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})});
define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(g,f,n,m){return g("dijit.form.ToggleButton",[n,m],{baseClass:"dijitToggleButton",setChecked:function(k){f.deprecated("setChecked("+k+") is deprecated. Use set('checked',"+k+") instead.","","2.0");this.set("checked",k)}})});
define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),function(g,f,n,m,k,e,l,d,c){m("dijit-legacy-requires")&&e(0,function(){g(["dijit/form/RadioButton"])});return f("dijit.form.CheckBox",[l,d],{templateString:c,baseClass:"dijitCheckBox",_setValueAttr:function(b,c){"string"==typeof b&&(this.inherited(arguments),b=!0);this._created&&this.set("checked",b,c)},_getValueAttr:function(){return this.checked&&
this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&k("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&k("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})});define({invalidMessage:"Es muss mindestens ein Eintrag ausgew\u00e4hlt werden.",multiSelectLabelText:"{num} Eintrag/Eintr\u00e4ge ausgew\u00e4hlt"});
define({root:{invalidMessage:"At least one item must be selected.",multiSelectLabelText:"{num} item(s) selected"},zh:!0,"zh-tw":!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,pl:!0,nl:!0,nb:!0,ko:!0,kk:!0,ja:!0,it:!0,hu:!0,hr:!0,he:!0,fr:!0,fi:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0});
define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){return g("dijit._HasDropDown",t,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){this.disabled||
this.readOnly||(a.preventDefault(),this._docHandler=this.own(p(this.ownerDocument,r.release,b.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown())},_onDropDownMouseUp:function(a){a&&this._docHandler&&(this._docHandler.remove(),this._docHandler=null);var b=this.dropDown,c=!1;if(a&&this._opened){var d=e.position(this._buttonNode,!0);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w&&a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(d=a.target;d&&!c;)k.contains(d,"dijitPopup")?c=!0:d=d.parentNode;if(c){d=a.target;if(b.onItemClick){for(var f;d&&
!(f=u.byNode(d));)d=d.parentNode;if(f&&f.onClick&&f.getParent)f.getParent().onItemClick(f,a)}return}}}this._opened?b.focus&&!1!==b.autoFocus&&(this._focusDropDownTimer=this.defer(function(){b.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||
this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";k.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(p(this._buttonNode,r.press,b.hitch(this,"_onDropDownMouseDown")),p(this._buttonNode,"click",b.hitch(this,
"_onDropDownClick")),p(a,"keydown",b.hitch(this,"_onKey")),p(a,"keyup",b.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,d=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),a.preventDefault()):b&&this._opened&&a.keyCode==c.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):
!this._opened&&(a.keyCode==c.DOWN_ARROW||(a.keyCode==c.ENTER||a.keyCode==c.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(d.tagName||"").toLowerCase()||d.type&&"text"!==d.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(b.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},
isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new f,c=b.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?c():this.loadDropDown(c);return a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,c=a.domNode,d=this._aroundNode||this.domNode,f=this,l=q.open({parent:this,popup:a,around:d,orient:this.dropDownPosition,
maxHeight:this.maxHeight,onExecute:function(){f.closeDropDown(!0)},onCancel:function(){f.closeDropDown(!0)},onClose:function(){m.set(f._popupStateNode,"popupActive",!1);k.remove(f._popupStateNode,"dijitHasDropDownOpen");f._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&d.offsetWidth>a._popupWrapper.offsetWidth)d={w:d.offsetWidth-(a._popupWrapper.offsetWidth-a.domNode.offsetWidth)},b.isFunction(a.resize)?a.resize(d):e.setMarginBox(c,d);m.set(this._popupStateNode,"popupActive","true");k.add(this._popupStateNode,
"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===c.getAttribute("role")||c.getAttribute("aria-labelledby")||c.setAttribute("aria-labelledby",this.id);return l},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus(),q.close(this.dropDown),
this._opened=!1)}})});
define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(g,f,n,m){var k=g("dijit.form._ButtonMixin"+(n("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){e.stopPropagation();e.preventDefault();this.disabled||this.valueNode.click(e);return!1},_onClick:function(e){if(this.disabled)return e.stopPropagation(),e.preventDefault(),!1;!1===this.onClick(e)&&e.preventDefault();cancelled=e.defaultPrevented;if(!cancelled&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var f=
this.domNode;f.parentNode;f=f.parentNode){var d=m.byNode(f);if(d&&"function"==typeof d._onSubmit){d._onSubmit(e);e.preventDefault();cancelled=!0;break}}return!cancelled},postCreate:function(){this.inherited(arguments);f.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(e){this._set("label",e);(this.containerNode||this.focusNode).innerHTML=e}});n("dojo-bidi")&&(k=g("dijit.form._ButtonMixin",k,{_setLabelAttr:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||
this.focusNode)}}));return k});
define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html".split(" "),function(g,f,n,m,k,e,l,d,c,b){m("dijit-legacy-requires")&&l(0,function(){g(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});l=f("dijit.form.Button"+(m("dojo-bidi")?"_NoBidi":""),[d,c],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",
templateString:b,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},_fillContent:function(b){!b||this.params&&"label"in this.params||!(b=e.trim(b.innerHTML))||(this.label=b)},_setShowLabelAttr:function(b){this.containerNode&&n.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(b){k.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},_setLabelAttr:function(b){this.inherited(arguments);
this.showLabel||"title"in this.params||(this.titleNode.title=e.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});m("dojo-bidi")&&(l=f("dijit.form.Button",l,{_setLabelAttr:function(b){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return l});
define("dojo/_base/declare dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html".split(" "),function(g,f,n,m,k,e,l,d,c){return g("dijit.form.DropDownButton",[e,l,d],{baseClass:"dijitDropDownButton",templateString:c,_fillContent:function(){if(this.srcNodeRef){var b=n("*",this.srcNodeRef);this.inherited(arguments,[b[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var b=
n("[widgetId]",this.dropDownContainer)[0];b&&(this.dropDown=m.byNode(b));delete this.dropDownContainer}this.dropDown&&k.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var b=this.dropDown;return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var c=this.dropDown,d=c.on("load",f.hitch(this,function(){d.remove();b()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})});
define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(g,f,n,m,k){return g("dijit.form.ComboButton",m,{templateString:k,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(e){e.keyCode==f[this.isLeftToRight()?
"RIGHT_ARROW":"LEFT_ARROW"]&&(n.focus(this._popupStateNode),e.stopPropagation(),e.preventDefault())},_onArrowKeyDown:function(e){e.keyCode==f[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(n.focus(this.titleNode),e.stopPropagation(),e.preventDefault())},focus:function(e){this.disabled||n.focus("start"==e?this.titleNode:this._popupStateNode)}})});
define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(g,f,n,m,k,e,l){return g("dijit.form._FormValueMixin",l,{readOnly:!1,_setReadOnlyAttr:function(d){f.set(this.focusNode,"readOnly",d);this._set("readOnly",d)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(d,c){this._handleOnChange(d,c)},_handleOnChange:function(d,c){this._set("value",
d);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})});
define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(g,f,n,m,k,e,l,d,c,b){return f("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(c){this._set("disabled",c);n.set(this.focusNode,"disabled",c);this.valueNode&&
n.set(this.valueNode,"disabled",c);this.focusNode.setAttribute("aria-disabled",c?"true":"false");c?(this._set("hovering",!1),this._set("active",!1),c="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",g.forEach(k.isArray(c)?c:[c],function(c){c=this[c];d("webkit")||b.hasDefaultTabStop(c)?c.setAttribute("tabIndex","-1"):c.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==
b&&this.isFocusable())var d=this.own(l(this.focusNode,"focus",function(){e.remove();d.remove()}))[0],e=this.own(l(this.ownerDocumentBody,"mouseup, touchend",k.hitch(this,function(a){e.remove();d.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){c.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=m.get(this.domNode,"display")},focus:function(){if(!this.disabled&&
this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},compare:function(b,c){return"number"==typeof b&&"number"==typeof c?isNaN(b)&&isNaN(c)?0:b-c:b>c?1:b<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(b,c){void 0!=this._lastValueReported||null!==c&&this._onChangeActive||(this._resetValue=this._lastValueReported=b);this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,this._lastValueReported);(this.intermediateChanges||
c||void 0===c)&&this._pendingOnChange&&(this._lastValueReported=b,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(b)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})});
define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(g,f,n,m,k,e,l,d){f("dijit-legacy-requires")&&m(0,function(){require(["dijit/form/_FormValueWidget"])});return g("dijit.form._FormWidget",[k,l,e,d],{setDisabled:function(c){n.deprecated("setDisabled("+c+") is deprecated. Use set('disabled',"+c+") instead.","","2.0");this.set("disabled",c)},setValue:function(c){n.deprecated("dijit.form._FormWidget:setValue("+
c+") is deprecated.  Use set('value',"+c+") instead.","","2.0");this.set("value",c)},getValue:function(){n.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!f("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})});
define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(g,f,n,m){return g("dijit.form._FormValueWidget",[n,m],{_layoutHackIE7:function(){if(7==f("ie"))for(var k=this.domNode,e=k.parentNode,l=k.firstChild||k,d=l.style.filter,c=this;e&&0==e.clientHeight;)(function(){var b=c.connect(e,"onscroll",function(){c.disconnect(b);l.style.filter=(new Date).getMilliseconds();c.defer(function(){l.style.filter=d})})})(),e=e.parentNode}})});
define(["../../_base/array","../../_base/lang","../../when"],function(g,f,n){var m=function(k){function e(e){k[e]||(k[e]=function(){var d=arguments;return n(k,function(c){Array.prototype.unshift.call(d,c);return m(g[e].apply(g,d))})})}if(!k)return k;k.then&&(k=f.delegate(k));e("forEach");e("filter");e("map");k.total||(k.total=n(k,function(e){return e.length}));return k};f.setObject("dojo.store.util.QueryResults",m);return m});
define(["../../_base/lang"],function(g){var f={};g.setObject("dojo.data.util.sorter",f);f.basicComparator=function(f,m){var k=-1;null===f&&(f=void 0);null===m&&(m=void 0);if(f==m)k=0;else if(f>m||null==f)k=1;return k};f.createSortFunction=function(g,m){function k(b,a,c,d){return function(e,f){var l=d.getValue(e,b),k=d.getValue(f,b);return a*c(l,k)}}for(var e=[],l,d=m.comparatorMap,c=f.basicComparator,b=0;b<g.length;b++){l=g[b];var p=l.attribute;if(p){l=l.descending?-1:1;var r=c;d&&("string"!==typeof p&&
"toString"in p&&(p=p.toString()),r=d[p]||c);e.push(k(p,l,r,m))}}return function(b,a){for(var c=0;c<e.length;){var d=e[c++](b,a);if(0!==d)return d}return 0}};return f});
define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u){return k("dijit.form._FormSelectWidget",u,{multiple:!1,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(a){var b=this.options||
[];if(null==a)return b;if(c.isArray(a))return g.map(a,"return this.getOptions(item);",this);c.isString(a)&&(a={value:a});c.isObject(a)&&(g.some(b,function(b,c){for(var d in a)if(!(d in b)||b[d]!=a[d])return!1;a=c;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){g.forEach(c.isArray(a)?a:[a],function(a){a&&c.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(c.isArray(a)?a:[a]);g.forEach(a,function(a){a&&(this.options=
g.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){g.forEach(c.isArray(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(a,b,d){var e=this.store;d=d||{};if(e!==a){for(var l;l=this._notifyConnections.pop();)l.remove();a.get||(c.mixin(a,{_oldAPI:!0,get:function(a){var b=new f;this.fetchItemByIdentity({identity:a,
onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var d=new f(function(){e.abort&&e.abort()});d.total=new f;var e=this.fetch(c.mixin({query:a,onBegin:function(a){d.total.resolve(a)},onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},b));return new r(d)}}),a.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[n.after(a,"onNew",c.hitch(this,"_onNewItem"),!0),n.after(a,"onDelete",c.hitch(this,"_onDeleteItem"),
!0),n.after(a,"onSet",c.hitch(this,"_onSetItem"),!0)]));this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();d.query&&(this._set("query",d.query),this._set("queryOptions",d.queryOptions));a&&(this._loadingStore=!0,this.onLoadDeferred=new f,this._queryRes=a.query(this.query,this.queryOptions),p(this._queryRes,c.hitch(this,function(e){if(this.sortByLabel&&!d.sort&&e.length)if(a.getValue)e.sort(m.createSortFunction([{attribute:a.getLabelAttributes(e[0])[0]}],
a));else{var f=this.labelAttr;e.sort(function(a,b){return a[f]>b[f]?1:b[f]>a[f]?-1:0})}d.onFetch&&(e=d.onFetch.call(this,e,d));g.forEach(e,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&this._queryRes.observe(c.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0);this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:b);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(e):
this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)}));return e},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=c.isArray(a)?g.map(a,function(a){return c.isObject(a)?a:{value:a}}):c.isObject(a)?[a]:[{value:a}];a=g.filter(this.getOptions(a),function(a){return a&&a.value});var d=this.getOptions()||[];this.multiple||
a[0]&&a[0].value||!d.length||(a[0]=d[0]);g.forEach(d,function(b){b.selected=g.some(a,function(a){return a.value===b.value})});d=g.map(a,function(a){return a.value});if("undefined"!=typeof d&&"undefined"!=typeof d[0]){var e=g.map(a,function(a){return a.label});this._setDisplay(this.multiple?e:e[0]);this.inherited(arguments,[this.multiple?d:d[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=g.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:
a?a.value:null},this);return this.multiple?a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(g.forEach(this._getChildren(),function(a){a.destroyRecursive()}),g.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var b=this;g.forEach(this._getChildren(),
function(c){var d=g.some(a,function(a){return c.option&&a===c.option.value});d&&!b.multiple&&(b.focusedChild=c);l.toggle(c.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d);c.domNode.setAttribute("aria-selected",d?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=g.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?g.map(g.filter(a,function(a){return a.selected}),
function(a){return a.value})||[]:""},_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?
b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);e.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?b("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+
d._scopeName+"-value")||a.getAttribute("value"),label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);n.after(this,"onChange",c.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=
null,this.setStore(a,this._oValue))},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})});
define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(g,f,n,m,k){var e={};g.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(f){e[f]=m[f]});n.mixin(e,{defaultDuration:f.defaultDuration||200});n.mixin(k,e);return k});
define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x){var C=f("dijit._MasterTooltip",[a,q],{duration:r.defaultDuration,templateString:v,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new t(this.domNode);
this.fadeIn=n.fadeIn({node:this.domNode,duration:this.duration,onEnd:d.hitch(this,"_onShow")});this.fadeOut=n.fadeOut({node:this.domNode,duration:this.duration,onEnd:d.hitch(this,"_onHide")})},show:function(a,b,c,e,f){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;f&&this.set("textDir",f);this.containerNode.align=e?"right":"left";var k=u.around(this.domNode,b,c&&c.length?c:y.defaultPosition,
!e,d.hitch(this,"orient")),p=k.aroundNodePos;"M"==k.corner.charAt(0)&&"M"==k.aroundCorner.charAt(0)?(this.connectorNode.style.top=p.y+(p.h-this.connectorNode.offsetHeight>>1)-k.y+"px",this.connectorNode.style.left=""):"M"==k.corner.charAt(1)&&"M"==k.aroundCorner.charAt(1)?this.connectorNode.style.left=p.x+(p.w-this.connectorNode.offsetWidth>>1)-k.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");l.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=
b}},orient:function(a,b,c,d,f){this.connectorNode.style.top="";var l=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+c];this.domNode.style.width="auto";
var k=e.position(this.domNode);9==p("ie")&&(k.w+=2);var t=Math.min(Math.max(d,1),k.w);e.setMarginBox(this.domNode,{w:t});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=e.position(a),b=this.connectorNode.offsetHeight,a.h>l?(this.connectorNode.style.top=l-(f.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,k.w-d)},
_onShow:function(){p("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play())},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});p("dojo-bidi")&&C.extend({_setAutoTextDir:function(a){this.applyTextDir(a);g.forEach(a.children,function(a){this._setAutoTextDir(a)},
this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});x.showTooltip=function(a,b,c,d,e){c&&(c=g.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));y._masterTT||(x._masterTT=y._masterTT=new C);return y._masterTT.show(a,b,c,d,e)};x.hideTooltip=function(a){return y._masterTT&&y._masterTT.hide(a)};var y=f("dijit.Tooltip",a,{label:"",showDelay:400,connectId:[],position:[],selector:"",
_setConnectIdAttr:function(a){g.forEach(this._connections||[],function(a){g.forEach(a,function(a){a.remove()})},this);this._connectIds=g.filter(d.isArrayLike(a)?a:a?[a]:[],function(a){return m.byId(a,this.ownerDocument)},this);this._connections=g.map(this._connectIds,function(a){a=m.byId(a,this.ownerDocument);var e=this.selector,f=e?function(a){return b.selector(e,a)}:function(a){return a},l=this;return[b(a,f(c.enter),function(){l._onHover(this)}),b(a,f("focusin"),function(){l._onHover(this)}),b(a,
f(c.leave),d.hitch(l,"_onUnHover")),b(a,f("focusout"),d.hitch(l,"_onUnHover"))]},this);this._set("connectId",a)},addTarget:function(a){a=a.id||a;-1==g.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=g.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);k.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);
var a=this.connectId;g.forEach(d.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},_onHover:function(a){this._showTimer||(this._showTimer=this.defer(function(){this.open(a)},this.showDelay))},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);this.close()},open:function(a){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);var b=this.getContent(a);b&&(y.show(b,a,this.position,!this.isLeftToRight(),
this.textDir),this._connectNode=a,this.onShow(a,this.position))},close:function(){this._connectNode&&(y.hide(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close();g.forEach(this._connections||[],function(a){g.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});y._MasterTooltip=C;y.show=x.showTooltip;y.hide=x.hideTooltip;y.defaultPosition=
["after-centered","before-centered"];return y});define(["dojo/_base/declare","./registry"],function(g,f){return g("dijit._Contained",null,{_getSibling:function(g){var m=this.domNode;do m=m[g+"Sibling"];while(m&&1!=m.nodeType);return m&&f.byNode(m)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var f=this.getParent();return f&&f.getIndexOfChild?f.getIndexOfChild(this):-1}})});
define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){l=g("dijit.MenuItem"+(e("dojo-bidi")?"_NoBidi":""),[d,c,b,p],{templateString:r,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var a="",c;c=b.search(/{\S}/);if(0<=c){var a=b.charAt(c+1),d=b.substr(0,c);b=b.substr(c+3);
c=d+a+b;b=d+'<span class="dijitMenuItemShortcutKey">'+a+"</span>"+b}else c=b;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",a)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){!b||"label"in this.params||this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);n.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&n.set(this.accelKeyNode,
"id",this.id+"_accel");f.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==e("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(b){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(b){m.toggle(this.domNode,"dijitMenuItemSelected",b)},setLabel:function(b){k.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},setDisabled:function(b){k.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.",
"","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=b?"":"none",this.accelKeyNode.innerHTML=b,n.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});e("dojo-bidi")&&(l=g("dijit.MenuItem",l,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));
return l});
define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(g,f,n,m,k,e,l,d){return f("dijit._KeyNavMixin",d,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);n.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var c=this._keyNavCodes={};c[m.HOME]=k.hitch(this,"focusFirstChild");c[m.END]=k.hitch(this,"focusLastChild");c[this.isLeftToRight()?m.LEFT_ARROW:m.RIGHT_ARROW]=k.hitch(this,
"_onLeftArrow");c[this.isLeftToRight()?m.RIGHT_ARROW:m.LEFT_ARROW]=k.hitch(this,"_onRightArrow");c[m.UP_ARROW]=k.hitch(this,"_onUpArrow");c[m.DOWN_ARROW]=k.hitch(this,"_onDownArrow")}var b=this,c="string"==typeof this.childSelector?this.childSelector:k.hitch(this,"childSelector");this.own(e(this.domNode,"keypress",k.hitch(this,"_onContainerKeypress")),e(this.domNode,"keydown",k.hitch(this,"_onContainerKeydown")),e(this.domNode,"focus",k.hitch(this,"_onContainerFocus")),e(this.containerNode,e.selector(c,
"focusin"),function(c){b._onChildFocus(l.getEnclosingWidget(this),c)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},
focusChild:function(c,b){c&&(this.focusedChild&&c!==this.focusedChild&&this._onChildBlur(this.focusedChild),c.set("tabIndex",this.tabIndex),c.focus(b?"end":"start"))},_onContainerFocus:function(c){c.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){n.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(c){n.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,
this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(c){c&&c!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),c.set("tabIndex",this.tabIndex),this.lastFocused=c,this._set("focusedChild",c))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(c,b,d,e){c&&this.focusChild(c)},_keyboardSearchCompare:function(c,b){var d=c.domNode,d=(c.label||(d.focusNode?d.focusNode.label:"")||d.innerText||d.textContent||
"").replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&d==b?-1:0},_onContainerKeydown:function(c){var b=this._keyNavCodes[c.keyCode];b?(b(c,this.focusedChild),c.stopPropagation(),c.preventDefault(),this._searchString=""):c.keyCode!=m.SPACE||!this._searchTimer||c.ctrlKey||c.altKey||c.metaKey||(c.stopImmediatePropagation(),c.preventDefault(),this._keyboardSearch(c," "))},_onContainerKeypress:function(c){c.charCode<m.SPACE||c.ctrlKey||c.altKey||c.metaKey||c.charCode==m.SPACE&&this._searchTimer||
(c.preventDefault(),c.stopPropagation(),this._keyboardSearch(c,String.fromCharCode(c.charCode).toLowerCase()))},_keyboardSearch:function(c,b){var d=null,e,f=0;k.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=b;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;e=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var c=this.focusedChild||null;if(1==
a||!c)if(c=this._getNextFocusableChild(c,1),!c)return;a=c;do{var l=this._keyboardSearchCompare(c,e);l&&0==f++&&(d=c);if(-1==l){f=-1;break}c=this._getNextFocusableChild(c,1)}while(c!=a)})();this.onKeyboardSearch(d,c,e,f)},_onChildBlur:function(){},_getNextFocusableChild:function(c,b){var d=c;do{if(c)c=this._getNext(c,b);else if(c=this[0<b?"_getFirst":"_getLast"](),!c)break;if(null!=c&&c!=d&&c.isFocusable())return c}while(c!=d);return null},_getFirst:function(){return null},_getLast:function(){return null},
_getNext:function(c,b){if(c)for(c=c.domNode;c;)if((c=c[0>b?"previousSibling":"nextSibling"])&&"getAttribute"in c){var d=l.byNode(c);if(d)return d}return null}})});
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(g,f,n,m){return f("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(f,e){var l=this.containerNode;if(0<e){for(l=l.firstChild;0<e;)1==l.nodeType&&e--,l=l.nextSibling;l?e="before":(l=this.containerNode,e="last")}n.place(f.domNode,l,e);this._started&&!f._started&&f.startup()},removeChild:function(f){"number"==
typeof f&&(f=this.getChildren()[f]);f&&(f=f.domNode)&&f.parentNode&&f.parentNode.removeChild(f)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(f,e){m.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var l=this.getChildren(),d=g.indexOf(l,f);return l[d+e]},getIndexOfChild:function(f){return g.indexOf(this.getChildren(),f)}})});
define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(g,f,n,m,k,e,l,d,c,b){return f("dijit._KeyNavContainer",[c,b,d],{connectKeyNavHandlers:function(b,c){var d=this._keyNavCodes={},a=e.hitch(this,"focusPrev"),f=e.hitch(this,"focusNext");g.forEach(b,function(b){d[b]=a});g.forEach(c,function(a){d[a]=f});d[k.HOME]=e.hitch(this,"focusFirstChild");d[k.END]=e.hitch(this,"focusLastChild")},
startupKeyNavChildren:function(){m.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);g.forEach(this.getChildren(),e.hitch(this,"_startupChild"))},addChild:function(b,c){this.inherited(arguments);this._startupChild(b)},_startupChild:function(b){b.set("tabIndex","-1")},_getFirst:function(){var b=this.getChildren();return b.length?b[0]:null},_getLast:function(){var b=this.getChildren();return b.length?b[b.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,
1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=l.byNode(b))&&b.getParent()==this}})});
define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){f=f("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);g.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,e.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||
{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(b){if(!this.disabled)switch(b.type){case "mouseover":case "MSPointerOver":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "keyup":this._set("active",
!1)}},_setStateClass:function(){function b(c){a=a.concat(g.map(a,function(a){return a+c}),"dijit"+c)}var a=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(c);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var c=this.stateNode||this.domNode,d={};g.forEach(c.className.split(" "),
function(a){d[a]=!0});"_stateClasses"in this&&g.forEach(this._stateClasses,function(a){delete d[a]});g.forEach(a,function(a){d[a]=!0});var e=[],f;for(f in d)e.push(f);c.className=e.join(" ");this._stateClasses=a},_subnodeCssMouseEvent:function(b,a,c){function d(c){m.toggle(b,a+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":m.toggle(b,a+"Hover",!0);break;case "mouseout":case "MSPointerOut":m.toggle(b,a+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "keydown":d(!0);
break;case "mouseup":case "MSPointerUp":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":m.toggle(b,a+"Focused",!0);break;case "blur":case "focusout":m.toggle(b,a+"Focused",!1)}},_trackMouseState:function(b,a){b._cssState=a}});d(function(){function d(a,b,c){if(!c||!n.isDescendant(c,b))for(;b&&b!=c;b=b.parentNode)if(b._cssState){var e=r.getEnclosingWidget(b);e&&(b==e.domNode?e._cssMouseEvent(a):e._subnodeCssMouseEvent(b,b._cssState,a))}}var a=b.body(),e;l(a,c.over,function(a){d(a,
a.target,a.relatedTarget)});l(a,c.out,function(a){d(a,a.target,a.relatedTarget)});l(a,p.press,function(a){e=a.target;d(a,e)});l(a,p.release,function(a){d(a,e);e=null});l(a,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=r.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return f});
define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(g,f,n,m){n(function(){f("highcontrast")&&g.add(m.body(),"dijit_a11y")});return f});
define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(g,f,n,m,k){var e=k.doc.documentElement;k=m("ie");var l=m("opera"),d=Math.floor,c=m("ff"),b=g.boxModel.replace(/-/,""),l={dj_quirks:m("quirks"),dj_opera:l,dj_khtml:m("khtml"),dj_webkit:m("webkit"),dj_safari:m("safari"),dj_chrome:m("chrome"),dj_gecko:m("mozilla"),dj_ios:m("ios"),dj_android:m("android")};k&&(l.dj_ie=!0,l["dj_ie"+d(k)]=!0,l.dj_iequirks=m("quirks"));c&&(l["dj_ff"+d(c)]=!0);l["dj_"+b]=!0;var p="",
r;for(r in l)l[r]&&(p+=r+" ");e.className=f.trim(e.className+" "+p);n(function(){if(!g.isBodyLtr()){var b="dj_rtl dijitRtl "+p.replace(/ /g,"-rtl ");e.className=f.trim(e.className+" "+b+"dj_rtl dijitRtl "+p.replace(/ /g,"-rtl "))}});return m});
define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(g,f,n,m,k,e,l){var d={_isElementShown:function(c){var b=m.get(c);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=n.get(c,"type")},hasDefaultTabStop:function(c){switch(c.nodeName.toLowerCase()){case "a":return n.has(c,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var d=
c.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;b=d.body}catch(e){try{b=c.contentWindow.document.body}catch(f){return!1}}return b&&("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==c.contentEditable}},isTabNavigable:function(c){return n.get(c,"disabled")?!1:n.has(c,"tabIndex")?0<=n.get(c,"tabIndex"):d.hasDefaultTabStop(c)},_getTabNavigable:function(c){function b(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}function f(a){return g[b(a)]||a}var l,k,a,q,t,m,g={},C=d._isElementShown,y=d.isTabNavigable,z=function(c){for(c=c.firstChild;c;c=c.nextSibling)if(1==c.nodeType&&!(9>=e("ie")&&"HTML"!==c.scopeName)&&C(c)){if(y(c)){var d=+n.get(c,"tabIndex");if(!n.has(c,"tabIndex")||0==d)l||(l=c),k=c;else if(0<d){if(!a||d<q)q=d,a=c;if(!t||d>=m)m=d,t=c}d=b(c);n.get(c,"checked")&&d&&(g[d]=c)}"SELECT"!=c.nodeName.toUpperCase()&&z(c)}};C(c)&&z(c);return{first:f(l),last:f(k),lowest:f(a),highest:f(t)}},
getFirstInTabbingOrder:function(c,b){var e=d._getTabNavigable(f.byId(c,b));return e.lowest?e.lowest:e.first},getLastInTabbingOrder:function(c,b){var e=d._getTabNavigable(f.byId(c,b));return e.last?e.last:e.highest}};e("extend-dojo")&&k.mixin(l,d);return d});
define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){var v,x=new (f([p,e],{curNode:null,activeStack:[],constructor:function(){var a=l.hitch(this,function(a){n.isDescendant(this.curNode,a)&&this.set("curNode",null);n.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});g.before(k,"empty",
a);g.before(k,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(b,c){var e=this,f=b.document&&b.document.body;if(f){var l=d(b.document,"mousedown, touchstart",function(a){e._justMouseDowned=!0;setTimeout(function(){e._justMouseDowned=!1},0);a&&a.target&&null==a.target.parentNode||e._onTouchNode(c||a.target,"mouse")}),k=d(f,"focusin",function(b){v=(new Date).getTime();if(b.target.tagName){var d=b.target.tagName.toLowerCase();"#document"!=d&&"body"!=
d&&(a.isTabNavigable(b.target)?e._onFocusNode(c||b.target):e._onTouchNode(c||b.target))}}),p=d(f,"focusout",function(a){(new Date).getTime()<v+100||e._onBlurNode(c||a.target)});return{remove:function(){l.remove();k.remove();p.remove();f=l=k=p=null}}}},_onBlurNode:function(a){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(l.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0);this._justMouseDowned||(this._clearActiveWidgetsTimer&&
clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(l.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0))},_onTouchNode:function(a,b){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var c=[];try{for(;a;){var d=m.get(a,"dijitPopupParent");if(d)a=q.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===r.body())break;a=u.get(a.ownerDocument).frameElement}else{var e=
a.getAttribute&&a.getAttribute("widgetId"),f=e&&q.byId(e);!f||"mouse"==b&&f.get("disabled")||c.unshift(e);a=a.parentNode}}}catch(l){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,e=a.length-1;if(a[e]!=c[d]){this.set("activeStack",a);var f;
for(f=d;0<=f&&c[f]!=a[f];f--)if(d=q.byId(c[f]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),this.emit("widget-blur",d,b);for(f++;f<=e;f++)if(d=q.byId(a[f]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));c(function(){var a=x.registerWin(u.get(document));b("ie")&&d(window,"unload",function(){a&&(a.remove(),a=null)})});t.focus=function(a){x.focus(a)};for(var C in x)/^_/.test(C)||
(t.focus[C]="function"==typeof x[C]?l.hitch(x,C):x[C]);x.watch(function(a,b,c){t.focus[a]=c});return x});define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(g,f,n,m){m.extend(f,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return n("dijit._FocusMixin",null,{_focusManager:g})});
define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u){function a(){}function q(b){return function(c,d,e,f){return c&&"string"==typeof d&&c[d]==a?c.on(d.substring(2).toLowerCase(),l.hitch(e,f)):b.apply(n,arguments)}}g.around(n,"connect",q);e.connect&&g.around(e,"connect",q);g=m("dijit._Widget",
[p,r,u],{onClick:a,onDblClick:a,onKeyDown:a,onKeyPress:a,onKeyUp:a,onMouseDown:a,onMouseMove:a,onMouseOut:a,onMouseOver:a,onMouseLeave:a,onMouseEnter:a,onMouseUp:a,constructor:function(b){this._toConnect={};for(var c in b)this[c]===a&&(this._toConnect[c.replace(/^on/,"").toLowerCase()]=b[c],delete b[c])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(b,c){return this[this._onMap(b)]===a?n.connect(this.domNode,
b.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){e.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(f.isDebug){var c=arguments.callee._ach||(arguments.callee._ach={}),d=(arguments.callee.caller||"unknown caller").toString();c[d]||(e.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+
d,"","2.0"),c[d]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){e.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?d("[widgetId]",this.containerNode).map(b.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});k("dijit-legacy-requires")&&c(0,function(){require(["dijit/_base"])});return g});
define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q){return f("dijit._MenuBase",[r,q,a,u],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},
activated:!1,_setActivatedAttr:function(a){k.toggle(this.domNode,"dijitMenuActive",a);k.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(a){var b=p.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var a=this,c="string"==typeof this.childSelector?this.childSelector:e.hitch(this,"childSelector");this.own(d(this.containerNode,d.selector(c,l.enter),function(){a.onItemHover(p.byNode(this))}),
d(this.containerNode,d.selector(c,l.leave),function(){a.onItemUnhover(p.byNode(this))}),d(this.containerNode,d.selector(c,b),function(b){a.onItemClick(p.byNode(this),b);b.stopPropagation();b.preventDefault()}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==d||a.popup&&1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},
_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&
(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==
a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();
this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var c=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,b){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var c=a.popup;c.parentMenu=this;this.own(this._mouseoverHandle=d.once(c.domNode,
"mouseover",e.hitch(this,"_onPopupHover")));var f=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){b&&f.focusChild(a);f._cleanUp()},onExecute:e.hitch(this,"_cleanUp",!0),onClose:function(){f._mouseoverHandle&&(f._mouseoverHandle.remove(),delete f._mouseoverHandle)}},b);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=
null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(m.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&
this.set("activated",!1);a&&this.set("selected",null)}})});
define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(g,f,n,m){function k(d){if((d.keyCode===g.ENTER||d.keyCode===g.SPACE)&&!/input|button|textarea/i.test(d.target.nodeName))for(d=d.target;d;d=d.parentNode)if(d.dojoClick)return!0}var e;n(document,"keydown",function(d){k(d)?(e=d.target,d.preventDefault()):e=null});n(document,"keyup",function(d){k(d)&&d.target==e&&(e=null,n.emit(d.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:d.ctrlKey,shiftKey:d.shiftKey,metaKey:d.metaKey,altKey:d.altKey,
_origType:d.type}))});var l=function(d,c){d.dojoClick=!0;return n(d,"click",c)};l.click=l;l.press=function(d,c){var b=n(d,m.press,function(b){("mousedown"!=b.type||f.isLeft(b))&&c(b)}),e=n(d,"keydown",function(b){b.keyCode!==g.ENTER&&b.keyCode!==g.SPACE||c(b)});return{remove:function(){b.remove();e.remove()}}};l.release=function(d,c){var b=n(d,m.release,function(b){("mouseup"!=b.type||f.isLeft(b))&&c(b)}),e=n(d,"keyup",function(b){b.keyCode!==g.ENTER&&b.keyCode!==g.SPACE||c(b)});return{remove:function(){b.remove();
e.remove()}}};l.move=m.move;return l});define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(g,f,n,m,k,e){g=m("dijit._OnDijitClickMixin",null,{connect:function(f,d,c){return this.inherited(arguments,[f,"ondijitclick"==d?e:d,c])}});g.a11yclick=e;return g});
define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(g,f,n,m,k){return g("dijit.DropDownMenu",[k,m],{templateString:n,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(e){this._moveToPopup(e);e.stopPropagation();e.preventDefault()},_onLeftArrow:function(){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);
else evt.stopPropagation(),evt.preventDefault()}})});
define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(g,f,n,m,k,e,l,d){d.add("config-bgIframe",!d("touch"));var c=new function(){var b=[];this.pop=function(){var c;b.length?(c=b.pop(),c.style.display=""):(9>d("ie")?(c="<iframe src='"+(n.dojoBlankHtmlUrl||g.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",c=
document.createElement(c)):(c=m.create("iframe"),c.src='javascript:""',c.className="dijitBackgroundIframe",c.setAttribute("role","presentation"),k.set(c,"opacity",0.1)),c.tabIndex=-1);return c};this.push=function(c){c.style.display="none";b.push(c)}};f.BackgroundIframe=function(b){if(!b.id)throw Error("no id");if(d("config-bgIframe")){var f=this.iframe=c.pop();b.appendChild(f);7>d("ie")||d("quirks")?(this.resize(b),this._conn=l(b,"resize",e.hitch(this,"resize",b))):k.set(f,{width:"100%",height:"100%"})}};
e.extend(f.BackgroundIframe,{resize:function(b){this.iframe&&k.set(this.iframe,{width:b.offsetWidth+"px",height:b.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(c.push(this.iframe),delete this.iframe)}});return f.BackgroundIframe});
define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(g,f,n,m,k){var e=new g,l;n(function(){var d=k.getBox();e._rlh=f(window,"resize",function(){var b=k.getBox();if(d.h!=b.h||d.w!=b.w)d=b,e.emit("resize")});if(8==m("ie")){var c=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=c&&(c=screen.deviceXDPI,e.emit("resize"))},500)}m("ios")&&(f(document,"focusin",function(b){l=b.target}),f(document,"focusout",function(b){l=null}))});e.getEffectiveBox=function(d){d=
k.getBox(d);var c=l&&l.tagName&&l.tagName.toLowerCase();m("ios")&&l&&!l.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(l.type))&&(d.h*=0==orientation||180==orientation?0.66:0.4,c=l.getBoundingClientRect(),d.h=Math.max(d.h,c.top+c.height));return d};return e});
define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(g,f,n,m,k,e,l){function d(b,c,d,l){var a=e.getEffectiveBox(b.ownerDocument);b.parentNode&&"body"==String(b.parentNode.tagName).toLowerCase()||k.body(b.ownerDocument).appendChild(b);var q=null;g.some(c,function(c){var e=c.corner,k=c.pos,p=0,m={w:{L:a.l+a.w-k.x,R:k.x-a.l,M:a.w}[e.charAt(1)],h:{T:a.t+a.h-k.y,B:k.y-a.t,M:a.h}[e.charAt(0)]},t=b.style;t.left=t.right="auto";
d&&(p=d(b,c.aroundCorner,e,m,l),p="undefined"==typeof p?0:p);var g=b.style,v=g.display,n=g.visibility;"none"==g.display&&(g.visibility="hidden",g.display="");t=f.position(b);g.display=v;g.visibility=n;v={L:k.x,R:k.x-t.w,M:Math.max(a.l,Math.min(a.l+a.w,k.x+(t.w>>1))-t.w)}[e.charAt(1)];n={T:k.y,B:k.y-t.h,M:Math.max(a.t,Math.min(a.t+a.h,k.y+(t.h>>1))-t.h)}[e.charAt(0)];k=Math.max(a.l,v);g=Math.max(a.t,n);v=Math.min(a.l+a.w,v+t.w);n=Math.min(a.t+a.h,n+t.h);v-=k;n-=g;p+=t.w-v+(t.h-n);if(null==q||p<q.overflow)q=
{corner:e,aroundCorner:c.aroundCorner,x:k,y:g,w:v,h:n,overflow:p,spaceAvailable:m};return!p});q.overflow&&d&&d(b,q.aroundCorner,q.corner,q.spaceAvailable,l);c=f.isBodyLtr(b.ownerDocument);var m=q.y,v=c?q.x:a.w-q.x-q.w;/relative|absolute/.test(n.get(k.body(b.ownerDocument),"position"))&&(m-=n.get(k.body(b.ownerDocument),"marginTop"),v-=(c?1:-1)*n.get(k.body(b.ownerDocument),c?"marginLeft":"marginRight"));var x=b.style;x.top=m+"px";x[c?"left":"right"]=v+"px";x[c?"right":"left"]="auto";return q}var c=
{TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return l.place={at:function(b,e,f,l,a){f=g.map(f,function(a){var b={corner:a,aroundCorner:c[a],pos:{x:e.x,y:e.y}};l&&(b.pos.x+="L"==a.charAt(1)?l.x:-l.x,b.pos.y+="T"==a.charAt(0)?l.y:-l.y);return b});return d(b,f,a)},around:function(b,c,e,l,a){function k(a,b){I.push({aroundCorner:a,corner:b,pos:{x:{L:D,R:D+H,M:D+(H>>1)}[a.charAt(1)],y:{T:F,B:F+M,M:F+(M>>1)}[a.charAt(0)]}})}var t;if("string"==typeof c||"offsetWidth"in c){if(t=f.position(c,!0),/^(above|below)/.test(e[0])){var v=
f.getBorderExtents(c),x=c.firstChild?f.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0},C=f.getBorderExtents(b),y=b.firstChild?f.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0};t.y+=Math.min(v.t+x.t,C.t+y.t);t.h-=Math.min(v.t+x.t,C.t+y.t)+Math.min(v.b+x.b,C.b+y.b)}}else t=c;if(c.parentNode)for(v="absolute"==n.getComputedStyle(c).position,c=c.parentNode;c&&1==c.nodeType&&"BODY"!=c.nodeName;){x=f.position(c,!0);C=n.getComputedStyle(c);/relative|absolute/.test(C.position)&&(v=!1);if(!v&&/hidden|auto|scroll/.test(C.overflow)){var y=
Math.min(t.y+t.h,x.y+x.h),z=Math.min(t.x+t.w,x.x+x.w);t.x=Math.max(t.x,x.x);t.y=Math.max(t.y,x.y);t.h=y-t.y;t.w=z-t.x}"absolute"==C.position&&(v=!0);c=c.parentNode}var D=t.x,F=t.y,H="w"in t?t.w:t.w=t.width,M="h"in t?t.h:(m.deprecated("place.around: dijit/place.__Rectangle: { x:"+D+", y:"+F+", height:"+t.height+", width:"+H+" } has been deprecated.  Please use { x:"+D+", y:"+F+", h:"+t.height+", w:"+H+" }","","2.0"),t.h=t.height),I=[];g.forEach(e,function(a){var b=l;switch(a){case "above-centered":k("TM",
"BM");break;case "below-centered":k("BM","TM");break;case "after-centered":b=!b;case "before-centered":k(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":k(b?"TL":"TR",b?"TR":"TL");k(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":k(b?"BL":"BR",b?"TL":"TR");k(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":k(b?"TL":"TR",b?"BL":"BR");k(b?"TR":"TL",b?"BR":"BL");break;default:k(a.aroundCorner,a.corner)}});b=d(b,I,a,{w:H,h:M});b.aroundNodePos=t;return b}}});
define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){function v(){this._popupWrapper&&(e.destroy(this._popupWrapper),delete this._popupWrapper)}n=n(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=l.position(this._firstAroundNode,
!0),c=b.x-a.x,a=b.y-a.y;if(c||a)for(this._firstAroundPosition=b,b=0;b<this._stack.length;b++){var d=this._stack[b].wrapper.style;d.top=parseInt(d.top,10)+a+"px";"auto"==d.right?d.left=parseInt(d.left,10)+c+"px":d.right=parseInt(d.right,10)-c+"px"}this._aroundMoveListener=setTimeout(p.hitch(this,"_repositionAll"),c||a?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,c=a.domNode;b||(b=e.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||
a.name||a.id},a.ownerDocumentBody),b.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=b,f.after(a,"destroy",v,!0));return b},moveOffScreen:function(a){var b=this._createWrapper(a);a=l.isBodyLtr(a.ownerDocument);var c={visibility:"hidden",top:"-9999px",display:""};c[a?"left":"right"]="-9999px";c[a?"right":"left"]="auto";d.set(b,c);return b},hide:function(a){var b=this._createWrapper(a);d.set(b,{display:"none",height:"auto",overflow:"visible",border:""});
a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(e){for(var f=this._stack,t=e.popup,g=t.domNode,v=e.orient||["below","below-alt","above","above-alt"],n=e.parent?e.parent.isLeftToRight():l.isBodyLtr(t.ownerDocument),H=e.around,M=e.around&&e.around.id?e.around.id+"_dropdown":"popup_"+this._idGen++;f.length&&(!e.parent||!m.isDescendant(e.parent.domNode,f[f.length-
1].widget.domNode));)this.close(f[f.length-1].widget);var I=this.moveOffScreen(t);t.startup&&!t._started&&t.startup();var J,K=l.position(g);if("maxHeight"in e&&-1!=e.maxHeight)J=e.maxHeight||Infinity;else{J=q.getEffectiveBox(this.ownerDocument);var G=H?l.position(H,!1):{y:e.y-(e.padding||0),h:2*(e.padding||0)};J=Math.floor(Math.max(G.y,J.h-(G.y+G.h)))}K.h>J&&(K=d.getComputedStyle(g),d.set(I,{overflowY:"scroll",height:J+"px",border:K.borderLeftWidth+" "+K.borderLeftStyle+" "+K.borderLeftColor}),g._originalStyle=
g.style.cssText,g.style.border="none");k.set(I,{id:M,style:{zIndex:this._beginZIndex+f.length},"class":"dijitPopup "+(t.baseClass||t["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:e.parent?e.parent.id:""});0==f.length&&H&&(this._firstAroundNode=H,this._firstAroundPosition=l.position(H,!0),this._aroundMoveListener=setTimeout(p.hitch(this,"_repositionAll"),50));c("config-bgIframe")&&!t.bgIframe&&(t.bgIframe=new a(I));M=t.orient?p.hitch(t,"orient"):null;v=H?u.around(I,H,v,n,M):u.at(I,e,"R"==v?
["TR","BR","TL","BL"]:["TL","BL","TR","BR"],e.padding,M);I.style.visibility="visible";g.style.visibility="visible";g=[];g.push(r(I,"keydown",p.hitch(this,function(a){if(a.keyCode==b.ESCAPE&&e.onCancel)a.stopPropagation(),a.preventDefault(),e.onCancel();else if(a.keyCode==b.TAB&&(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));t.onCancel&&e.onCancel&&g.push(t.on("cancel",e.onCancel));g.push(t.on(t.onExecute?"execute":"change",p.hitch(this,function(){var a=
this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));f.push({widget:t,wrapper:I,parent:e.parent,onExecute:e.onExecute,onCancel:e.onCancel,onClose:e.onClose,handlers:g});if(t.onOpen)t.onOpen(v);return v},close:function(a){for(var b=this._stack;a&&g.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),d=c.widget,e=c.onClose;if(d.onClose)d.onClose();for(var f;f=c.handlers.pop();)f.remove();d&&d.domNode&&this.hide(d);e&&e()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),
this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return t.popup=new n});
define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){p("dijit-legacy-requires")&&t(0,function(){g(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return n("dijit.Menu",q,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",
contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):f.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return u.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&
document.frames[a.name].document||null},bindDomNode:function(a){a=m.byId(a,this.ownerDocument);var e;if("iframe"==a.tagName.toLowerCase()){var f=a;e=this._iframeContentWindow(f);e=r.body(e.document)}else e=a==r.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var l={node:a,iframe:f};k.set(a,"_dijitMenu"+this.id,this._bindings.push(l));var p=c.hitch(this,function(a){var c=this.selector,e=c?function(a){return b.selector(c,a)}:function(a){return a},l=this;return[b(a,e(this.leftClickToOpen?
"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();l._scheduleOpen(this,f,{x:a.pageX,y:a.pageY})}),b(a,e("keydown"),function(a){a.shiftKey&&a.keyCode==d.F10&&(a.stopPropagation(),a.preventDefault(),l._scheduleOpen(this,f))})]});l.connects=e?p(e):[];f&&(l.onloadHandler=c.hitch(this,function(){var a=this._iframeContentWindow(f),a=r.body(a.document);l.connects=p(a)}),f.addEventListener?f.addEventListener("load",l.onloadHandler,!1):f.attachEvent("onload",l.onloadHandler))},unBindDomNode:function(a){var b;
try{b=m.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&k.has(b,a)){for(var d=k.get(b,a)-1,e=this._bindings[d],f;f=e.connects.pop();)f.remove();(f=e.iframe)&&(f.removeEventListener?f.removeEventListener("load",e.onloadHandler,!1):f.detachEvent("onload",e.onloadHandler));k.remove(b,a);delete this._bindings[d]}},_scheduleOpen:function(a,b,c){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:c})},1))},_openMyself:function(b){function c(){u.refocus&&
n&&n.focus();a.close(u)}var d=b.target,f=b.iframe;b=b.coords;var k=!b;this.currentTarget=d;if(b){if(f){var d=e.position(f,!0),t=this._iframeContentWindow(f),t=e.docScroll(t.document),q=l.getComputedStyle(f),g=l.toPixelValue,r=(p("ie")&&p("quirks")?0:g(f,q.paddingLeft))+(p("ie")&&p("quirks")?g(f,q.borderLeftWidth):0),f=(p("ie")&&p("quirks")?0:g(f,q.paddingTop))+(p("ie")&&p("quirks")?g(f,q.borderTopWidth):0);b.x+=d.x+r-t.x;b.y+=d.y+f-t.y}}else b=e.position(d,!0),b.x+=10,b.y+=10;var u=this,f=this._focusManager.get("prevNode"),
d=this._focusManager.get("curNode"),n=!d||m.isDescendant(d,this.domNode)?f:d;a.open({popup:this,x:b.x,y:b.y,onExecute:c,onCancel:c,orient:this.isLeftToRight()?"L":"R"});this.focus();k||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);a.close(this)}},destroy:function(){f.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})});
define(["../_base/lang","../_base/array"],function(g,f){var n={};g.setObject("dojo.date.stamp",n);n.fromISOString=function(m,k){n._isoRegExp||(n._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var e=n._isoRegExp.exec(m),l=null;if(e){e.shift();e[1]&&e[1]--;e[6]&&(e[6]*=1E3);k&&(k=new Date(k),f.forEach(f.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return k["get"+b]()}),function(b,c){e[c]=
e[c]||b}));l=new Date(e[0]||1970,e[1]||0,e[2]||1,e[3]||0,e[4]||0,e[5]||0,e[6]||0);100>e[0]&&l.setFullYear(e[0]||1970);var d=0,c=e[7]&&e[7].charAt(0);"Z"!=c&&(d=60*(e[8]||0)+(Number(e[9])||0),"-"!=c&&(d*=-1));c&&(d-=l.getTimezoneOffset());d&&l.setTime(l.getTime()+6E4*d)}return l};n.toISOString=function(f,k){var e=function(b){return 10>b?"0"+b:b};k=k||{};var l=[],d=k.zulu?"getUTC":"get",c="";"time"!=k.selector&&(c=f[d+"FullYear"](),c=["0000".substr((c+"").length)+c,e(f[d+"Month"]()+1),e(f[d+"Date"]())].join("-"));
l.push(c);if("date"!=k.selector){c=[e(f[d+"Hours"]()),e(f[d+"Minutes"]()),e(f[d+"Seconds"]())].join(":");d=f[d+"Milliseconds"]();k.milliseconds&&(c+="."+(100>d?"0":"")+e(d));if(k.zulu)c+="Z";else if("time"!=k.selector)var d=f.getTimezoneOffset(),b=Math.abs(d),c=c+((0<d?"-":"+")+e(Math.floor(b/60))+":"+e(b%60));l.push(c)}return l.join("T")};return n});
define(["../_base/array","../Deferred","../when"],function(g,f,n){var m=g.some;return function(k){var e,l;k instanceof Array?l=k:k&&"object"===typeof k&&(e=k);var d,c=[];if(e){l=[];for(var b in e)Object.hasOwnProperty.call(e,b)&&(c.push(b),l.push(e[b]));d={}}else l&&(d=[]);if(!l||!l.length)return(new f).resolve(d);var p=new f;p.promise.always(function(){d=c=null});var g=l.length;m(l,function(b,a){e||c.push(a);n(b,function(b){p.isFulfilled()||(d[c[a]]=b,0===--g&&p.resolve(d))},p.reject);return p.isFulfilled()});
return p.promise}});
define(["./kernel"],function(g){var f=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,n=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,m=function(){for(var k=arguments,e=[k[0]],l=1;l<k.length;l++)if(k[l]){var d=new m(k[l]+""),e=new m(e[0]+"");if(""==d.path&&!d.scheme&&!d.authority&&!d.query)null!=d.fragment&&(e.fragment=d.fragment),d=e;else if(!d.scheme&&(d.scheme=e.scheme,!d.authority&&(d.authority=e.authority,"/"!=d.path.charAt(0)))){for(var e=(e.path.substring(0,
e.path.lastIndexOf("/")+1)+d.path).split("/"),c=0;c<e.length;c++)"."==e[c]?c==e.length-1?e[c]="":(e.splice(c,1),c--):0<c&&(1!=c||""!=e[0])&&".."==e[c]&&".."!=e[c-1]&&(c==e.length-1?(e.splice(c,1),e[c-1]=""):(e.splice(c-1,2),c-=2));d.path=e.join("/")}e=[];d.scheme&&e.push(d.scheme,":");d.authority&&e.push("//",d.authority);e.push(d.path);d.query&&e.push("?",d.query);d.fragment&&e.push("#",d.fragment)}this.uri=e.join("");k=this.uri.match(f);this.scheme=k[2]||(k[1]?"":null);this.authority=k[4]||(k[3]?
"":null);this.path=k[5];this.query=k[7]||(k[6]?"":null);this.fragment=k[9]||(k[8]?"":null);null!=this.authority&&(k=this.authority.match(n),this.user=k[3]||null,this.password=k[4]||null,this.host=k[6]||k[7],this.port=k[9]||null)};m.prototype.toString=function(){return this.uri};return g._Url=m});
define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){function v(a){return eval("("+a+")")}function x(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<y){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=y}return b}function C(a,b){var c=a.join();if(!z[c]){for(var d=[],e=
0,f=a.length;e<f;e++){var l=a[e];d[d.length]=z[l]=z[l]||n.getObject(l)||~l.indexOf("/")&&(b?b(l):g(l))}e=d.shift();z[c]=d.length?e.createSubclass?e.createSubclass(d):e.extend.apply(e,d):e}return z[c]}new Date("X");var y=0;c.after(n,"extend",function(){y++},!0);var z={},D={_clearCache:function(){y++;z={}},_functionFromScript:function(a,b){var c="",d="",e=a.getAttribute(b+"args")||a.getAttribute("args"),f=a.getAttribute("with"),e=(e||"").split(/\s*,\s*/);f&&f.length&&m.forEach(f.split(/\s*,\s*/),function(a){c+=
"with("+a+"){";d+="}"});return new Function(e,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||f._scopeName)+"Type",e="data-"+(c.scope||f._scopeName)+"-",l=e+"type",k=e+"mixins",p=[];m.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(l)||a.getAttribute(d);if(c){var e=a.getAttribute(k),c=e?[c].concat(e.split(/\s*,\s*/)):[c];p.push({node:a,types:c})}});return this._instantiate(p,b,c)},_instantiate:function(a,c,d,e){function f(a){c._started||d.noStart||m.forEach(a,
function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=m.map(a,function(a){var b=a.ctor||C(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return e?b(a).then(f):f(a)},construct:function(b,e,l,k,t,g){function r(a){V&&n.setObject(V,a);for(U=0;U<na.length;U++)c[na[U].advice||"after"](a,na[U].method,n.hitch(a,na[U].func),!0);for(U=0;U<W.length;U++)W[U].call(a);
for(U=0;U<Z.length;U++)a.watch(Z[U].prop,Z[U].func);for(U=0;U<ca.length;U++)q(a,ca[U].event,ca[U].func);return a}var C=b&&b.prototype;k=k||{};var y={};k.defaults&&n.mixin(y,k.defaults);g&&n.mixin(y,g);var z;u("dom-attributes-explicit")?z=e.attributes:u("dom-attributes-specified-flag")?z=m.filter(e.attributes,function(a){return a.specified}):(g=(/^input$|^img$/i.test(e.nodeName)?e:e.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,
""),z=m.map(g.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==e.nodeName&&"value"==a||"enctype"==b?e.getAttribute(b):e.getAttributeNode(b).value}}));var D=k.scope||f._scopeName;g="data-"+D+"-";var Q={};"dojo"!==D&&(Q[g+"props"]="data-dojo-props",Q[g+"type"]="data-dojo-type",Q[g+"mixins"]="data-dojo-mixins",Q[D+"type"]="dojoType",Q[g+"id"]="data-dojo-id");for(var U=0,N,D=[],V,P;N=z[U++];){var aa=N.name,ea=aa.toLowerCase();N=N.value;switch(Q[ea]||ea){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;
case "data-dojo-props":P=N;break;case "data-dojo-id":case "jsid":V=N;break;case "data-dojo-attach-point":case "dojoattachpoint":y.dojoAttachPoint=N;break;case "data-dojo-attach-event":case "dojoattachevent":y.dojoAttachEvent=N;break;case "class":y["class"]=e.className;break;case "style":y.style=e.style&&e.style.cssText;break;default:if(aa in C||(aa=x(b)[ea]||aa),aa in C)switch(typeof C[aa]){case "string":y[aa]=N;break;case "number":y[aa]=N.length?Number(N):NaN;break;case "boolean":y[aa]="false"!=
N.toLowerCase();break;case "function":""===N||-1!=N.search(/[^\w\.]+/i)?y[aa]=new Function(N):y[aa]=n.getObject(N,!1)||new Function(N);D.push(aa);break;default:ea=C[aa],y[aa]=ea&&"length"in ea?N?N.split(/\s*,\s*/):[]:ea instanceof Date?""==N?new Date(""):"now"==N?new Date:p.fromISOString(N):ea instanceof d?f.baseUrl+N:v(N)}else y[aa]=N}}for(z=0;z<D.length;z++)Q=D[z].toLowerCase(),e.removeAttribute(Q),e[Q]=null;if(P)try{P=v.call(k.propsThis,"{"+P+"}"),n.mixin(y,P)}catch(ga){throw Error(ga.toString()+
" in data-dojo-props='"+P+"'");}n.mixin(y,l);t||(t=b&&(b._noScript||C._noScript)?[]:a("> script[type^='dojo/']",e));var na=[],W=[],Z=[],ca=[];if(t)for(U=0;U<t.length;U++)Q=t[U],e.removeChild(Q),l=Q.getAttribute(g+"event")||Q.getAttribute("event"),k=Q.getAttribute(g+"prop"),P=Q.getAttribute(g+"method"),D=Q.getAttribute(g+"advice"),z=Q.getAttribute("type"),Q=this._functionFromScript(Q,g),l?"dojo/connect"==z?na.push({method:l,func:Q}):"dojo/on"==z?ca.push({event:l,func:Q}):y[l]=Q:"dojo/aspect"==z?na.push({method:P,
advice:D,func:Q}):"dojo/watch"==z?Z.push({prop:k,func:Q}):W.push(Q);b=(t=b.markupFactory||C.markupFactory)?t(y,e,b):new b(y,e);return b.then?b.then(r):r(b)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(q)||d.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var d=[],e=[],l={},k=(b.scope||f._scopeName)+"Type",p="data-"+(b.scope||f._scopeName)+
"-",t=p+"type",q=p+"textdir",p=p+"mixins",v=a.firstChild,n=b.inherited;if(!n){var x=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&x(a.parentNode,b)},n={dir:x(a,"dir"),lang:x(a,"lang"),textDir:x(a,q)},y;for(y in n)n[y]||delete n[y]}for(var n={inherited:n},z,D;;)if(v)if(1!=v.nodeType)v=v.nextSibling;else if(z&&"script"==v.nodeName.toLowerCase())(aa=v.getAttribute("type"))&&/^dojo\/\w/i.test(aa)&&z.push(v),v=v.nextSibling;else if(D)v=v.nextSibling;else{var aa=v.getAttribute(t)||
v.getAttribute(k);y=v.firstChild;if(aa||y&&(3!=y.nodeType||y.nextSibling)){D=null;if(aa){var ea=v.getAttribute(p);z=ea?[aa].concat(ea.split(/\s*,\s*/)):[aa];try{D=C(z,b.contextRequire)}catch(ga){}D||m.forEach(z,function(a){~a.indexOf("/")&&!l[a]&&(l[a]=!0,e[e.length]=a)});ea=D&&!D.prototype._noScript?[]:null;n={types:z,ctor:D,parent:n,node:v,scripts:ea};n.inherited=c(n);d.push(n)}else n={node:v,scripts:z,parent:n};z=ea;D=v.stopParser||D&&D.prototype.stopParser&&!b.template;v=y}else v=v.nextSibling}else{if(!n||
!n.node)break;v=n.node.nextSibling;D=!1;n=n.parent;z=n.scripts}var na=new r;e.length?(u("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+e.join(", ")),(b.contextRequire||g)(e,function(){na.resolve(m.filter(d,function(a){if(!a.ctor)try{a.ctor=C(a.types,b.contextRequire)}catch(c){}for(var d=a.parent;d&&!d.types;)d=d.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);a.instantiate=!d||d.instantiate&&d.instantiateChildren;return a.instantiate}))})):
na.resolve(d);return na.promise},_require:function(a,b){var c=v("{"+a.innerHTML+"}"),d=[],e=[],f=new r,l=b&&b.contextRequire||g,k;for(k in c)d.push(k),e.push(c[k]);l(e,function(){for(var a=0;a<d.length;a++)n.setObject(d[a],arguments[a]);f.resolve(arguments)});return f.promise},_scanAmd:function(b,c){var d=new r,e=d.promise;d.resolve(!0);var f=this;a("script[type='dojo/require']",b).forEach(function(a){e=e.then(function(){return f._require(a,c)});a.parentNode.removeChild(a)});return e},parse:function(a,
b){var c;!b&&a&&a.rootNode?(b=a,c=b.rootNode):!a||!n.isObject(a)||"nodeType"in a?c=a:b=a;c=c?e.byId(c):l.body();b=b||{};var d=b.template?{template:!0}:{},f=[],k=this,p=this._scanAmd(c,b).then(function(){return k.scan(c,b)}).then(function(a){return k._instantiate(a,d,b,!0)}).then(function(a){return f=f.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});n.mixin(f,p);return f}};u("extend-dojo")&&(f.parser=D);k.parseOnLoad&&t(100,D,"parse");return D});
define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(g,f,n,m,k){return n("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var e=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);k.parse(e,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},
propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(m.hitch(this,function(e){this._startupWidgets=e;for(var d=0;d<e.length;d++)this._processTemplateNode(e[d],function(c,b){return c[b]},function(c,b,d){return b in c?c.connect(c,b,d):c.on(b,d,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(e,f,d){return f(e,"dojoType")||f(e,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){g.forEach(this._startupWidgets,function(e){e&&!e._started&&e.startup&&e.startup()});this._startupWidgets=null;this.inherited(arguments)}})});
define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(g,f,n,m,k,e,l,d,c){var b=k.delegate(d,{mouseenter:e.enter,mouseleave:e.leave,keypress:n._keypress}),p;n=m("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},
_attachTemplateNodes:function(b){for(var c=b;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==b)break;for(;!c.nextSibling;)if(c=c.parentNode,c==b)return;c=c.nextSibling}},_processTemplateNode:function(b,c,a){var d=!0,e=this.attachScope||this,f=c(b,"dojoAttachPoint")||c(b,"data-dojo-attach-point");if(f)for(var l=f.split(/\s*,\s*/);f=l.shift();)k.isArray(e[f])?e[f].push(b):e[f]=b,
d="containerNode"!=f,this._attachPoints.push(f);if(c=c(b,"dojoAttachEvent")||c(b,"data-dojo-attach-event"))for(f=c.split(/\s*,\s*/),l=k.trim;c=f.shift();)if(c){var p=null;-1!=c.indexOf(":")?(p=c.split(":"),c=l(p[0]),p=l(p[1])):c=l(c);p||(p=c);this._attachEvents.push(a(b,c,k.hitch(e,p)))}return d},_attach:function(c,d,a){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?p||(p=g("./a11yclick")):b[d]||d;return l(c,d,a)},_detachTemplateNodes:function(){var b=this.attachScope||this;f.forEach(this._attachPoints,
function(c){delete b[c]});this._attachPoints=[];f.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});k.extend(c,{dojoAttachEvent:"",dojoAttachPoint:""});return n});
define(["./_base/kernel","./_base/lang"],function(g,f){var n={};f.setObject("dojo.string",n);n.rep=function(f,k){if(0>=k||!f)return"";for(var e=[];;){k&1&&e.push(f);if(!(k>>=1))break;f+=f}return e.join("")};n.pad=function(f,k,e,l){e||(e="0");f=String(f);k=n.rep(e,Math.ceil((k-f.length)/e.length));return l?f+k:k+f};n.substitute=function(m,k,e,l){l=l||g.global;e=e?f.hitch(l,e):function(d){return d};return m.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(d,c,b){d=f.getObject(c,!1,k);b&&(d=
f.getObject(b,!1,l).call(l,d,c));return e(d,c).toString()})};n.trim=String.prototype.trim?f.trim:function(f){f=f.replace(/^\s+/,"");for(var k=f.length-1;0<=k;k--)if(/\S/.test(f.charAt(k))){f=f.substring(0,k+1);break}return f};return n});define(["./_base/kernel","./text"],function(g){return g.cache});
define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(g,f,n,m,k,e,l,d){var c=f("dijit._TemplatedMixin",d,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(b){var c=this.declaredClass,d=this;return l.substitute(b,this,function(b,a){"!"==a.charAt(0)&&(b=m.getObject(a.substr(1),!1,d));if("undefined"==typeof b)throw Error(c+" template:"+a);return null==b?"":"!"==a.charAt(0)?
b:b.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=g(this.templatePath,{sanitize:!0}));var b=c.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),d;if(m.isString(b)){if(d=n.toDom(this._stringRepl(b),this.ownerDocument),1!=d.nodeType)throw Error("Invalid template: "+b);}else d=b.cloneNode(!0);this.domNode=d}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=
!0},_fillContent:function(b){var c=this.containerNode;if(b&&c)for(;b.hasChildNodes();)c.appendChild(b.firstChild)}});c._templateCache={};c.getCachedTemplate=function(b,d,e){var f=c._templateCache,a=b,k=f[a];if(k){try{if(!k.ownerDocument||k.ownerDocument==(e||document))return k}catch(t){}n.destroy(k)}b=l.trim(b);if(d||b.match(/\$\{([^\}]+)\}/g))return f[a]=b;d=n.toDom(b,e);if(1!=d.nodeType)throw Error("Invalid template: "+b);return f[a]=d};e("ie")&&k(window,"unload",function(){var b=c._templateCache,
d;for(d in b){var e=b[d];"object"==typeof e&&n.destroy(e);delete b[d]}});return c});define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(g,f,n){return n("dijit.Destroyable",null,{destroy:function(f){this._destroyed=!0},own:function(){g.forEach(arguments,function(m){var k="destroyRecursive"in m?"destroyRecursive":"destroy"in m?"destroy":"remove",e=f.before(this,"destroy",function(d){m[k](d)}),l=f.after(m,k,function(){e.remove();l.remove()},!0)},this);return arguments}})});
define(["./_base/declare","./_base/lang","./_base/array","./when"],function(g,f,n,m){return g("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(f){var e=this._attrPairNames;return e[f]?e[f]:e[f]={s:"_"+f+"Setter",g:"_"+f+"Getter"}},postscript:function(f){f&&this.set(f)},_get:function(f,e){return"function"===typeof this[e.g]?this[e.g]():this[f]},get:function(f){return this._get(f,this._getAttrNames(f))},set:function(f,e){if("object"===typeof f){for(var l in f)f.hasOwnProperty(l)&&"_watchCallbacks"!=
l&&this.set(l,f[l]);return this}l=this._getAttrNames(f);var d=this._get(f,l);l=this[l.s];var c;"function"===typeof l?c=l.apply(this,Array.prototype.slice.call(arguments,1)):this[f]=e;if(this._watchCallbacks){var b=this;m(c,function(){b._watchCallbacks(f,d,e)})}return this},_changeAttrValue:function(f,e){var l=this.get(f);this[f]=e;this._watchCallbacks&&this._watchCallbacks(f,l,e);return this},watch:function(f,e){var l=this._watchCallbacks;if(!l)var d=this,l=this._watchCallbacks=function(b,c,e,a){var f=
function(a){if(a){a=a.slice();for(var f=0,l=a.length;f<l;f++)a[f].call(d,b,c,e)}};f(l["_"+b]);a||f(l["*"])};e||"function"!==typeof f?f="_"+f:(e=f,f="*");var c=l[f];"object"!==typeof c&&(c=l[f]=[]);c.push(e);var b={};b.unwatch=b.remove=function(){var b=n.indexOf(c,e);-1<b&&c.splice(b,1)};return b}})});
define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x,C,y,z,D,F){function H(a){return function(b){d[b?"set":"remove"](this.domNode,a,b);this._set(a,
b)}}u.add("dijit-legacy-requires",!a.isAsync);u.add("dojo-bidi",!1);u("dijit-legacy-requires")&&v(0,function(){g(["dijit/_base/manager"])});var M={};m=e("dijit._WidgetBase",[x,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:H("lang"),dir:"",_setDirAttr:H("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},
_blankGif:m.blankGif||g.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+d.substr(5,d.length-9),b.attributeMap&&d in b.attributeMap||c.push(d))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=
l.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,q.mixin(this,a));this.postMixInProperties();this.id||(this.id=F.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=y.body(this.ownerDocument);F.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();
var d=this.srcNodeRef;d&&d.parentNode&&this.domNode!==d&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);f.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||
(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(f.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,f.forEach(this.getChildren(),function(a){a._started||a._destroyed||!q.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);
this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();f.forEach(this._connects,q.hitch(this,"disconnect"));f.forEach(this._supportingWidgets,b);this.domNode&&f.forEach(F.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);F.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?d.remove(this.domNode,
"widgetId"):b.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||b.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){f.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;q.isObject(a)?r.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,e){e=3<=arguments.length?e:this.attributeMap[a];
f.forEach(q.isArray(e)?e:[e],function(e){var f=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":q.isFunction(b)&&(b=q.hitch(this,b));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?d.set(f,e,b):f.set(e,b);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":f.innerHTML=b;break;case "class":c.replace(f,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?
this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(q.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!q.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d]&&this[d].tagName,l;if((l=f)&&!(l=M[f])){l=this[d];var k={},p;for(p in l)k[p.toLowerCase()]=!0;l=M[f]=k}p=l;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:p&&c.l in
p&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;this._created&&b!==c&&(this._watchCallbacks&&this._watchCallbacks(a,c,
b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&t.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var c=this._onMap(a);return c?n.after(this,c,b,!0):this.own(t(this.domNode,a,b))[0]},_onMap:function(a){var b=
this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?F.findWidgets(this.containerNode):[]},getParent:function(){return F.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(k.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},
subscribe:function(a,b){return this.own(C.subscribe(a,q.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:p.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=r.get(this.domNode,"display")},placeAt:function(a,c){var d=!a.tagName&&F.byId(a);!d||!d.addChild||c&&"number"!==typeof c?(d=d?d.containerNode&&!/after|before|replace/.test(c||"")?d.containerNode:d.domNode:l.byId(a,this.ownerDocument),b.place(this.domNode,
d,c),!this._started&&(this.getParent()||{})._started&&this.startup()):d.addChild(this,c);return this},defer:function(a,b){var c=setTimeout(q.hitch(this,function(){c&&(c=null,this._destroyed||q.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});u("dojo-bidi")&&m.extend(D);return m});
define(["exports","require","../has"],function(g,f,n){var m=n("config-requestProvider"),k;n("host-browser")?k="./xhr":n("host-node")&&(k="./node");m||(m=k);g.getPlatformDefaultId=function(){return k};g.load=function(e,l,d,c){f(["platform"==e?k:m],function(b){d(b)})}});define(["./request/default!"],function(g){return g});
define(["./_base/kernel","require","./has","./has!host-browser?./request"],function(g,f,n,m){var k;n("host-browser")?k=function(b,c,d){m(b,{sync:!!c}).then(d)}:f.getText?k=f.getText:console.error("dojo/text plugin failed to load because loader does not support getText");var e={},l=function(b){if(b){b=b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var c=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);c&&(b=c[1])}else b="";return b},d={},c={};g.cache=function(b,c,d){var m;
"string"==typeof b?/\//.test(b)?(m=b,d=c):m=f.toUrl(b.replace(/\./g,"/")+(c?"/"+c:"")):(m=b+"",d=c);b=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof b)return e[m]=b,d?l(b):b;if(null===b)return delete e[m],null;m in e||k(m,!0,function(a){e[m]=a});return d?l(e[m]):e[m]};return{dynamic:!0,normalize:function(b,c){var d=b.split("!"),e=d[0];return(/^\./.test(e)?c(e):e)+(d[1]?"!"+d[1]:"")},load:function(b,f,m){b=b.split("!");var g=1<b.length,a=b[0],q=f.toUrl(b[0]);b="url:"+q;
var t=d,v=function(a){m(g?l(a):a)};a in e?t=e[a]:f.cache&&b in f.cache?t=f.cache[b]:q in e&&(t=e[q]);if(t===d)if(c[q])c[q].push(v);else{var n=c[q]=[v];k(q,!f.async,function(b){e[a]=e[q]=b;for(var d=0;d<n.length;)n[d++](b);delete c[q]})}else v(t)}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/dom-geometry dojo/dom-class dojo/dom-construct dojo/i18n dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Menu dijit/MenuItem dijit/Tooltip dijit/form/_FormSelectWidget dijit/form/ComboButton dojo/text!dojox/form/resources/_CheckedMultiSelectMenuItem.html dojo/text!dojox/form/resources/_CheckedMultiSelectItem.html dojo/text!dojox/form/resources/CheckedMultiSelect.html dojo/i18n!dojox/form/nls/CheckedMultiSelect dijit/form/CheckBox".split(" "),function(g,
f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x,C,y,z){var D=g("dojox.form._CheckedMultiSelectItem",[c,b,p],{templateString:C,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled=this.option.disabled=this.option.disabled||!1;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=this.option.label},
_changeBox:function(){this.get("disabled")||this.get("readOnly")||(this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus())},_onClick:function(a){this.get("disabled")||this.get("readOnly")?m.stop(a):this.checkBox._onClick(a)},_updateBox:function(){this.checkBox.set("value",this.option.selected)},_setDisabledAttr:function(a){this.disabled=a||this.option.disabled;this.checkBox.set("disabled",
this.disabled);e.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(a){this.checkBox.set("readOnly",a);this.readOnly=a}}),F=g("dojox.form._CheckedMultiSelectMenu",u,{multiple:!1,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,b=this.domNode=l.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});a.parentNode&&a.parentNode.replaceChild(b,a);e.remove(a,"dijitMenuTable");b.className=a.className+" dojoxCheckedMultiSelectMenu";
a.className="dijitReset dijitMenuTable";a.setAttribute("role","listbox");b.setAttribute("role","presentation");b.appendChild(a)},resize:function(a){a&&(k.setMarginBox(this.domNode,a),"w"in a&&(this.menuTableNode.style.width="100%"))},onClose:function(){this.inherited(arguments);this.menuTableNode&&(this.menuTableNode.style.width="")},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled||a.readOnly)return!1;if(!this.multiple)this.onExecute();
a.onClick(b)}}),H=g("dojox.form._CheckedMultiSelectMenuItem",a,{templateString:x,option:null,parent:null,_iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"});this.disabled=this.option.disabled;this.checked=this.option.selected;this.label=this.option.label;this.readOnly=this.option.readOnly;this.inherited(arguments)},onChange:function(a){},_updateBox:function(){e.toggle(this.domNode,
"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected);this.domNode.setAttribute("aria-checked",this.option.selected);this.inputNode.checked=this.option.selected;this.parent.multiple||e.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(a){this.disabled||this.readOnly||(this.parent.multiple?(this.option.selected=!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected)):this.option.selected||(n.forEach(this.parent.getChildren(),
function(a){a.option.selected=!1}),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected)));this.inherited(arguments)}});return g("dojox.form.CheckedMultiSelect",t,{templateString:y,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],postMixInProperties:function(){this.inherited(arguments);this._nlsResources=d.getLocalization("dojox.form","CheckedMultiSelect",this.lang);"$_unset_$"==this.invalidMessage&&
(this.invalidMessage=this._nlsResources.invalidMessage)},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown&&(e.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),this.dropDownMenu=new F({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,onChange:f.hitch(this,"_updateSelection")}))},startup:function(){this.inherited(arguments);this.dropDown&&
(this.dropDownButton=new v({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode))},_onMouseDown:function(a){m.stop(a)},validator:function(){return this.required?n.some(this.getOptions(),function(a){return a.selected&&null!=a.value&&0!=a.value.toString().length}):!0},validate:function(a){q.hide(this.domNode);(a=this.isValid(a))||this.displayMessage(this.invalidMessage);return a},isValid:function(a){return this.validator()},
getErrorMessage:function(a){return this.invalidMessage},displayMessage:function(a){q.hide(this.domNode);a&&q.show(a,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(a,b){},_addOptionItem:function(a){var b;this.dropDown?(b=new H({option:a,parent:this.dropDownMenu}),this.dropDownMenu.addChild(b)):(b=new D({option:a,parent:this}),this.wrapperDiv.appendChild(b.domNode));this.onAfterAddOptionItem(b,a)},_refreshState:function(){this.validate(this.focused)},onChange:function(a){this._refreshState()},
reset:function(){this.inherited(arguments);q.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);n.forEach(this._getChildren(),function(a){a._updateBox()});l.empty(this.containerNode);var a=this;n.forEach(this.value,function(b){b=l.create("option",{value:b,label:b,selected:"selected"});l.place(b,a.containerNode)});if(this.dropDown&&this.dropDownButton){var b=0,c="";n.forEach(this.options,function(a){a.selected&&(b++,c=a.label)});this.dropDownButton.set("label",
this.multiple?f.replace(this._nlsResources.multiSelectLabelText,{num:b}):c)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():n.map(this.wrapperDiv.childNodes,function(a){return r.byNode(a)})},invertSelection:function(a){this.multiple&&(n.forEach(this.options,function(a){a.selected=!a.selected}),this._updateSelection())},_setDisabledAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDownButton.set("disabled",a);n.forEach(this._getChildren(),function(b){b&&
b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){this.inherited(arguments);"readOnly"in this.attributeMap&&this[this.attributeMap.readOnly].setAttribute("readonly",a);this.readOnly=a;n.forEach(this._getChildren(),function(b){b&&b.set&&b.set("readOnly",a)})},uninitialize:function(){q.hide(this.domNode);n.forEach(this._getChildren(),function(a){a.destroyRecursive()});this.inherited(arguments)}})});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/on dojo/topic dojo/has dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList put-selector/put ../Selection dojo/has!touch?../util/touch dojo/has!touch?./_DnD-touch-autoscroll xstyle/css!dojo/resources/dnd.css".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a){var q=g(c,{grid:null,getObject:function(a){var b=this.grid;return b.store.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&
a.target!=this.grid.bodyNode},onDrop:function(a,b,c){var d=this,e=this._targetAnchor=this.targetAnchor,f=this.grid,l=f.store;!this.before&&e&&(e=e.nextSibling);e=e&&f.row(e);m.when(e&&l.get(e.id),function(e){if(d!=a)d.onDropExternal(a,b,c,e);else d.onDropInternal(b,c,e)})},onDropInternal:function(a,b,c){var d=this.grid.store,e=this,f=this.grid,l=e._targetAnchor,k;l&&(k=this.before?l.previousSibling:l.nextSibling);(b||k!==a[0]&&(c||f.down(f.row(a[0])).element!=a[0]))&&a.forEach(function(a){m.when(e.getObject(a),
function(a){d[b&&d.copy?"copy":"put"](a,{before:c})})})},onDropExternal:function(a,b,c,d){var e=this.grid.store,f=a.grid;b.forEach(function(b,l){m.when(a.getObject(b),function(k){c||(f?m.when(f.store.getIdentity(k),function(c){!l&&a.selectNone();a.delItem(b.id);f.store.remove(c)}):a.deleteSelectedNodes());e[e.copy?"copy":"put"](k,{before:d})})})},onDndStart:function(a,c,d){this.inherited(arguments);a==this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),b.manager().avatar.node.style.width=
this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(c){d("touch")&&this.isDragging&&1<a.countCurrentTouches(c,this.grid.touchNode)?(l.publish("/dnd/cancel"),b.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(b){d("touch")&&1!==a.countCurrentTouches(b,this.grid.touchNode)||this.inherited(arguments)},checkAcceptance:function(a,b){return a.getObject&&c.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);
var a=new p,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});g=g(u,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:q,postMixInProperties:function(){this.inherited(arguments);this.dndParams=f.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(b){c[b.id]=b.element}function b(a){delete c[a.id]}this.inherited(arguments);this.dndSource=new (this.dndConstructor||q)(this.bodyNode,f.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));
var c=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){n.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){n.forEach(a.rows,b)});k.after(this,"destroy",function(){delete this.dndSource._selectedNodes;c=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"==typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];r(b,".dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},
removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});g.GridSource=q;return g});define(["dojo/_base/kernel"],function(g){return g.dijit});
define(["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(g,f,n,m){var k={},e={},l={length:0,add:function(d){if(e[d.id])throw Error("Tried to register widget with id=="+d.id+" but that id is already registered");e[d.id]=d;this.length++},remove:function(d){e[d]&&(delete e[d],this.length--)},byId:function(d){return"string"==typeof d?e[d]:d},byNode:function(d){return e[d.getAttribute("widgetId")]},toArray:function(){var d=[],c;for(c in e)d.push(e[c]);return d},getUniqueId:function(d){var c;
do c=d+"_"+(d in k?++k[d]:k[d]=0);while(e[c]);return"dijit"==m._scopeName?c:m._scopeName+"_"+c},findWidgets:function(d,c){function b(d){for(d=d.firstChild;d;d=d.nextSibling)if(1==d.nodeType){var l=d.getAttribute("widgetId");l?(l=e[l])&&f.push(l):d!==c&&b(d)}}var f=[];b(d);return f},_destroyAll:function(){m._curFocus=null;m._prevFocus=null;m._activeStack=[];g.forEach(l.findWidgets(n.body()),function(d){d._destroyed||(d.destroyRecursive?d.destroyRecursive():d.destroy&&d.destroy())})},getEnclosingWidget:function(d){for(;d;){var c=
1==d.nodeType&&d.getAttribute("widgetId");if(c)return e[c];d=d.parentNode}return null},_hash:e};return m.registry=l});
define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(g,f,n){return g(null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){n.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var f=n.getEnclosingWidget(this.domNode.parentNode);f&&f.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);
n.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},resize:function(m){m&&f.setMarginBox(this.domNode,m);this.inherited(arguments)},_set:function(f,k){this[f]=k},watch:function(){},getParent:function(){return n.getEnclosingWidget(this.domNode.parentNode)}})});
define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(g,f,n,m,k,e,l){k.add("highcontrast",function(){var d=l.doc.createElement("div");d.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(f.blankGif||g.toUrl("./resources/blank.gif"))+");";l.body().appendChild(d);var c=m.getComputedStyle(d),b=c.backgroundImage,c=c.borderTopColor==c.borderRightColor||b&&("none"==b||"url(invalid-url:)"==
b);8>=k("ie")?d.outerHTML="":l.body().removeChild(d);return c});e(function(){k("highcontrast")&&n.add(l.body(),"dj_a11y")});return k});
define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),function(g,f,n,m,k,e,l,d){return g("dojo.dnd.Avatar",null,{constructor:function(c){this.manager=c;this.construct()},construct:function(){var c=e.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),b=this.manager.source,d,f=e.create("tbody",null,c),k=e.create("tr",null,f),a=e.create("td",null,k),q=Math.min(5,this.manager.nodes.length),
t=0;l("highcontrast")&&e.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},a);e.create("span",{innerHTML:b.generateText?this._generateText():""},a);for(m.set(k,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});t<q;++t)b.creator?d=b._normalizedCreator(b.getItem(this.manager.nodes[t].id).data,"avatar").node:(d=this.manager.nodes[t].cloneNode(!0),"tr"==d.tagName.toLowerCase()&&(k=e.create("table"),e.create("tbody",null,k).appendChild(d),d=k)),d.id="",k=e.create("tr",null,f),a=e.create("td",
null,k),a.appendChild(d),m.set(k,{"class":"dojoDndAvatarItem",style:{opacity:(9-t)/10}});this.node=c},destroy:function(){e.destroy(this.node);this.node=!1},update:function(){k.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(l("highcontrast")){var c=n.byId("a11yIcon"),b="+";this.manager.canDropFlag&&!this.manager.copy?b="< ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(b="x"):b="o";c.innerHTML=b}d("tr.dojoDndAvatarHeader td span"+(l("highcontrast")?" span":
""),this.node).forEach(function(b){b.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})});
define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(g,f,n,m,k,e,l){f.add("rtl-adjust-position-for-verticalScrollBar",function(c,b){var d=n.body(b),e=l.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},d,"last"),f=l.create("div",{style:{overflow:"hidden",direction:"ltr"}},e,"last"),a=0!=k.position(f).x;e.removeChild(f);d.removeChild(e);
return a});f.add("position-fixed-support",function(c,b){var d=n.body(b),e=l.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},d,"last"),f=l.create("span",{style:{position:"fixed",left:"0",top:"0"}},e,"last"),a=k.position(f).x!=k.position(e).x;e.removeChild(f);d.removeChild(e);return a});var d={getBox:function(c){c=c||n.doc;var b="BackCompat"==c.compatMode?n.body(c):c.documentElement,e=k.docScroll(c);if(f("touch")){var l=d.get(c);c=l.innerWidth||b.clientWidth;b=l.innerHeight||
b.clientHeight}else c=b.clientWidth,b=b.clientHeight;return{l:e.x,t:e.y,w:c,h:b}},get:function(c){if(f("ie")&&d!==document.parentWindow){c.parentWindow.execScript("document._parentWindow = window;","Javascript");var b=c._parentWindow;c._parentWindow=null;return b}return c.parentWindow||c.defaultView},scrollIntoView:function(c,b){try{c=m.byId(c);var d=c.ownerDocument||n.doc,l=n.body(d),g=d.documentElement||l.parentNode,a=f("ie"),q=f("webkit");if(c!=l&&c!=g)if(!(f("mozilla")||a||q||f("opera"))&&"scrollIntoView"in
c)c.scrollIntoView(!1);else{var t="BackCompat"==d.compatMode,v=Math.min(l.clientWidth||g.clientWidth,g.clientWidth||l.clientWidth),x=Math.min(l.clientHeight||g.clientHeight,g.clientHeight||l.clientHeight),d=q||t?l:g,C=b||k.position(c),y=c.parentNode,q=function(b){return 6>=a||7==a&&t?!1:f("position-fixed-support")&&"fixed"==e.get(b,"position").toLowerCase()};if(!q(c))for(;y;){y==l&&(y=d);var z=k.position(y),D=q(y),F="rtl"==e.getComputedStyle(y).direction.toLowerCase();if(y==d){z.w=v;z.h=x;d==g&&a&&
F&&(z.x+=d.offsetWidth-z.w);if(0>z.x||!a||9<=a)z.x=0;if(0>z.y||!a||9<=a)z.y=0}else{var H=k.getPadBorderExtents(y);z.w-=H.w;z.h-=H.h;z.x+=H.l;z.y+=H.t;var M=y.clientWidth,I=z.w-M;0<M&&0<I&&(F&&f("rtl-adjust-position-for-verticalScrollBar")&&(z.x+=I),z.w=M);M=y.clientHeight;I=z.h-M;0<M&&0<I&&(z.h=M)}D&&(0>z.y&&(z.h+=z.y,z.y=0),0>z.x&&(z.w+=z.x,z.x=0),z.y+z.h>x&&(z.h=x-z.y),z.x+z.w>v&&(z.w=v-z.x));var J=C.x-z.x,K=C.y-z.y,G=J+C.w-z.w,S=K+C.h-z.h,O,s;0<G*J&&(y.scrollLeft||y==d||y.scrollWidth>y.offsetHeight)&&
(O=Math[0>J?"max":"min"](J,G),F&&(8==a&&!t||9<=a)&&(O=-O),s=y.scrollLeft,y.scrollLeft+=O,O=y.scrollLeft-s,C.x-=O);0<S*K&&(y.scrollTop||y==d||y.scrollHeight>y.offsetHeight)&&(O=Math.ceil(Math[0>K?"max":"min"](K,S)),s=y.scrollTop,y.scrollTop+=O,O=y.scrollTop-s,C.y-=O);y=y!=d&&!D&&y.parentNode}}}catch(T){console.error("scrollIntoView: "+T),c.scrollIntoView(!1)}}};f("extend-dojo")&&g.setObject("dojo.window",d);return d});
define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(g,f,n,m,k,e){var l={};g.setObject("dojo.dnd.autoscroll",l);l.getViewport=e.getBox;l.V_TRIGGER_AUTOSCROLL=32;l.H_TRIGGER_AUTOSCROLL=32;l.V_AUTOSCROLL_VALUE=16;l.H_AUTOSCROLL_VALUE=16;var d,c=n.doc,b=Infinity,p=Infinity;l.autoScrollStart=function(f){c=f;d=e.getBox(c);f=n.body(c).parentNode;b=Math.max(f.scrollHeight-d.h,0);p=Math.max(f.scrollWidth-d.w,0)};l.autoScroll=function(f){var k=d||e.getBox(c),
a=n.body(c).parentNode,q=0,m=0;f.clientX<l.H_TRIGGER_AUTOSCROLL?q=-l.H_AUTOSCROLL_VALUE:f.clientX>k.w-l.H_TRIGGER_AUTOSCROLL&&(q=Math.min(l.H_AUTOSCROLL_VALUE,p-a.scrollLeft));f.clientY<l.V_TRIGGER_AUTOSCROLL?m=-l.V_AUTOSCROLL_VALUE:f.clientY>k.h-l.V_TRIGGER_AUTOSCROLL&&(m=Math.min(l.V_AUTOSCROLL_VALUE,b-a.scrollTop));window.scrollBy(q,m)};l._validNodes={div:1,p:1,td:1};l._validOverflow={auto:1,scroll:1};l.autoScrollNodes=function(b){for(var c,a,d,e,p,g,C=0,y=0,z=b.target;z;){if(1==z.nodeType&&z.tagName.toLowerCase()in
l._validNodes){d=k.getComputedStyle(z);e=d.overflow.toLowerCase()in l._validOverflow;p=d.overflowX.toLowerCase()in l._validOverflow;g=d.overflowY.toLowerCase()in l._validOverflow;if(e||p||g)c=m.getContentBox(z,d),a=m.position(z,!0);if(e||p){d=Math.min(l.H_TRIGGER_AUTOSCROLL,c.w/2);p=b.pageX-a.x;if(f("webkit")||f("opera"))p+=n.body().scrollLeft;C=0;0<p&&p<c.w&&(p<d?C=-d:p>c.w-d&&(C=d),z.scrollLeft+=C)}if(e||g){e=Math.min(l.V_TRIGGER_AUTOSCROLL,c.h/2);g=b.pageY-a.y;if(f("webkit")||f("opera"))g+=n.body().scrollTop;
y=0;0<g&&g<c.h&&(g<e?y=-e:g>c.h-e&&(y=e),z.scrollTop+=y)}if(C||y)return}try{z=z.parentNode}catch(D){z=null}}l.autoScroll(b)};return l});
define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a){var q=f("dojo.dnd.Manager",[e],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:l("touch")?0:16,OFFSET_Y:l("touch")?-64:16,overSource:function(a){this.avatar&&(this.target=a&&"Disabled"!=a.targetState?
a:null,this.canDropFlag=Boolean(this.target),this.avatar.update());b.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),b.publish("/dnd/source/over",null)):b.publish("/dnd/source/over",null)},startDrag:function(a,d,e){function f(a){a.preventDefault();a.stopPropagation()}u.autoScrollStart(m.doc);this.source=a;this.nodes=d;this.copy=Boolean(e);this.avatar=this.makeAvatar();m.body().appendChild(this.avatar.node);
b.publish("/dnd/start",a,d,this.copy);this.events=[c(m.doc,p.move,n.hitch(this,"onMouseMove")),c(m.doc,p.release,n.hitch(this,"onMouseUp")),c(m.doc,"keydown",n.hitch(this,"onKeyDown")),c(m.doc,"keyup",n.hitch(this,"onKeyUp")),c(m.doc,"dragstart",f),c(m.body(),"selectstart",f)];a="dojoDnd"+(e?"Copy":"Move");k.add(m.body(),a)},canDrop:function(a){a=Boolean(this.target&&a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){k.remove(m.body(),["dojoDndCopy","dojoDndMove"]);
g.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new a(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(u.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(r.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b));l("touch")&&a.preventDefault()},
onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var c=Boolean(this.source.copyState(r.getCopyKeyState(a)));b.publish("/dnd/drop/before",this.source,this.nodes,c,this.target,a);b.publish("/dnd/drop",this.source,this.nodes,c,this.target,a)}else b.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case d.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case d.ESCAPE:b.publish("/dnd/cancel"),this.stopDrag()}},
onKeyUp:function(a){this.avatar&&a.keyCode==d.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();k.replace(m.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});r._manager=null;q.manager=r.manager=function(){r._manager||(r._manager=new q);return r._manager};return q});
define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a){f=f("dojo.dnd.Container",c,{skipForm:!1,allowNested:!1,constructor:function(a,b){this.node=e.byId(a);b||(b={});this.creator=b.creator||null;this.skipForm=b.skipForm;this.parent=b.dropParent&&e.byId(b.dropParent);this.map={};this.current=null;this.containerState="";l.add(this.node,
"dojoDndContainer");b&&b._skipStartup||this.startup();this.events=[p(this.node,u.over,m.hitch(this,"onMouseOver")),p(this.node,u.out,m.hitch(this,"onMouseOut")),p(this.node,"dragstart",m.hitch(this,"onSelectStart")),p(this.node,"selectstart",m.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(b,c){c=c||n.global;var d=this.map,e=a._empty,f;for(f in d)f in e||b.call(c,
d[f],f,this);return c},clearItems:function(){this.map={}},getAllNodes:function(){return r((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var b={};this.getAllNodes().forEach(function(c){if(c.id){var d=this.getItem(c.id);if(d){b[c.id]=d;return}}else c.id=a.getUniqueId();var d=c.getAttribute("dndType"),e=c.getAttribute("dndData");b[c.id]={data:e||c.innerHTML,type:d?d.split(/\s*,\s*/):["text"]}},this);this.map=b;return this},insertNodes:function(a,b,c){this.parent.firstChild?
b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);return this},destroy:function(){g.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,
b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var b=this.parent.getElementsByTagName("tbody");b&&b.length&&(this.parent=b[0])}this.defaultCreator=a._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&b!=this.node;)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&
this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(b){this.skipForm&&a.isFormElement(b)||(b.stopPropagation(),b.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,
b){var c="dojoDnd"+a,d=a.toLowerCase()+"State";l.replace(this.node,c+b,c+this[d]);this[d]=b},_addItemClass:function(a,b){l.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){l.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&l.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(b,c){var d=(this.creator||this.defaultCreator).call(this,b,c);m.isArray(d.type)||(d.type=["text"]);
d.node.id||(d.node.id=a.getUniqueId());l.add(d.node,"dojoDndItem");return d}});a._createNode=function(b){return b?function(a){return d.create(b,{innerHTML:a})}:a._createSpan};a._createTrTd=function(a){var b=d.create("tr");d.create("td",{innerHTML:a},b);return b};a._createSpan=function(a){return d.create("span",{innerHTML:a})};a._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};a._defaultCreator=function(b){b=b.tagName.toLowerCase();var c="tbody"==b||"thead"==b?a._createTrTd:a._createNode(a._defaultCreatorNodes[b]);
return function(b,d){var e=b&&m.isObject(b),f,l;e&&b.tagName&&b.nodeType&&b.getAttribute?(f=b.getAttribute("dndData")||b.innerHTML,e=(e=b.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"],l=b):(f=e&&b.data?b.data:b,e=e&&b.type?b.type:["text"],l=("avatar"==d?a._createSpan:c)(String(f)));l.id||(l.id=a.getUniqueId());return{node:l,data:f,type:e}}};return f});
define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(g,f,n,m,k,e,l,d,c,b){function p(b,c,d){return t&&d?function(a,b){return e(a,d,b)}:a?function(a,d){var f=e(a,c,d),l=e(a,b,function(a){(!M||(new Date).getTime()>M+1E3)&&d.call(this,a)});return{remove:function(){f.remove();l.remove()}}}:function(a,c){return e(a,b,c)}}function r(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function u(a,c,d){if(x=!a.target.disabled&&
r(a.target))C=a.target,y=a.touches?a.touches[0].pageX:a.clientX,z=a.touches?a.touches[0].pageY:a.clientY,D=("object"==typeof x?x.x:"number"==typeof x?x:0)||4,F=("object"==typeof x?x.y:"number"==typeof x?x:0)||4,v||(v=!0,b.doc.addEventListener(c,function(a){x=x&&a.target==C&&Math.abs((a.touches?a.touches[0].pageX:a.clientX)-y)<=D&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-z)<=F},!0),b.doc.addEventListener(d,function(a){if(x){H=(new Date).getTime();var b=a.target;"LABEL"===b.tagName&&(b=n.byId(b.getAttribute("for"))||
b);setTimeout(function(){e.emit(b,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a=function(a){b.doc.addEventListener(a,function(b){b._dojo_click||!((new Date).getTime()<=H+1E3)||"INPUT"==b.target.tagName&&m.contains(b.target,"dijitOffScreen")||(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"!=a||"INPUT"==b.target.tagName&&"radio"!=b.target.type&&"checkbox"!=b.target.type||"TEXTAREA"==b.target.tagName||"AUDIO"==b.target.tagName||"VIDEO"==b.target.tagName||
b.preventDefault())},!0)},a("click"),a("mousedown"),a("mouseup"))}var a=l("touch"),q=5>l("ios"),t=navigator.msPointerEnabled,v,x,C,y,z,D,F,H,M,I;a&&(t?c(function(){b.doc.addEventListener("MSPointerDown",function(a){u(a,"MSPointerMove","MSPointerUp")},!0)}):c(function(){function a(b){var c=k.delegate(b,{bubbles:!0});6<=l("ios")&&(c.touches=b.touches,c.altKey=b.altKey,c.changedTouches=b.changedTouches,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.targetTouches=b.targetTouches);return c}
I=b.body();b.doc.addEventListener("touchstart",function(a){M=(new Date).getTime();var b=I;I=a.target;e.emit(b,"dojotouchout",{relatedTarget:I,bubbles:!0});e.emit(I,"dojotouchover",{relatedTarget:b,bubbles:!0});u(a,"touchmove","touchend")},!0);e(b.doc,"touchmove",function(c){M=(new Date).getTime();var d=b.doc.elementFromPoint(c.pageX-(q?0:b.global.pageXOffset),c.pageY-(q?0:b.global.pageYOffset));d&&(I!==d&&(e.emit(I,"dojotouchout",{relatedTarget:d,bubbles:!0}),e.emit(d,"dojotouchover",{relatedTarget:I,
bubbles:!0}),I=d),e.emit(d,"dojotouchmove",a(c)))});e(b.doc,"touchend",function(c){M=(new Date).getTime();var d=b.doc.elementFromPoint(c.pageX-(q?0:b.global.pageXOffset),c.pageY-(q?0:b.global.pageYOffset))||b.body();e.emit(d,"dojotouchend",a(c))})}));f={press:p("mousedown","touchstart","MSPointerDown"),move:p("mousemove","dojotouchmove","MSPointerMove"),release:p("mouseup","dojotouchend","MSPointerUp"),cancel:p(d.leave,"touchcancel",a?"MSPointerCancel":null),over:p("mouseover","dojotouchover","MSPointerOver"),
out:p("mouseout","dojotouchout","MSPointerOut"),enter:d._eventHandler(p("mouseover","dojotouchover","MSPointerOver")),leave:d._eventHandler(p("mouseout","dojotouchout","MSPointerOut"))};l("extend-dojo")&&(g.touch=f);return f});
define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){var u=f("dojo.dnd.Selector",r,{constructor:function(a,d){d||(d={});this.singular=d.singular;this.autoSync=d.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(c(this.node,b.press,m.hitch(this,"onMouseDown")),c(this.node,b.release,m.hitch(this,"onMouseUp")))},singular:!1,
getSelectedNodes:function(){var a=new d,b=p._empty,c;for(c in this.selection)c in b||a.push(k.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(k.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=p._empty,b;for(b in this.selection)if(!(b in a)){var c=k.byId(b);this.delItem(b);e.destroy(c)}this.anchor=null;this.selection={};return this},
forInSelectedItems:function(a,b){b=b||n.global;var c=this.selection,d=p._empty,e;for(e in c)e in d||a.call(b,this.getItem(e),e,this)},sync:function(){u.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],b=p._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);g.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=e.call(this,
b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,"Selected"),this._removeItemClass(d.node,"Anchor"));return d};u.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},destroy:function(){u.superclass.destroy.call(this);this.selection=this.anchor=
null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!p.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,l.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){p.getCopyKeyState(a)||this._removeSelection();var b=this.getAllNodes();if(b.length&&(this.anchor||(this.anchor=b[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var c=
0,d;c<b.length&&(d=b[c],d!=this.anchor&&d!=this.current);++c);for(++c;c<b.length;++c){d=b[c];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?p.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):p.getCopyKeyState(a)?this.anchor==
this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,
"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=c(this.node,b.move,m.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),
delete this.onmousemoveEvent)},_removeSelection:function(){var a=p._empty,b;for(b in this.selection)if(!(b in a)){var c=k.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return u});
define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(g,f,n,m){var k=n.getObject("dojo.dnd",!0);k.getCopyKeyState=function(e){return e[g("mac")?"metaKey":"ctrlKey"]};k._uniqueId=0;k.getUniqueId=function(){var e;do e=f._scopeName+"Unique"+ ++k._uniqueId;while(m.byId(e));return e};k._empty={};k.isFormElement=function(e){e=e.target;3==e.nodeType&&(e=e.parentNode);return 0<=" button textarea input select option ".indexOf(" "+e.tagName.toLowerCase()+" ")};return k});
define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){n.isAsync||d(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var u=f("dojo.dnd.Source",p,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,b){m.mixin(this,m.mixin({},
b));var d=this.accept;if(d.length){this.accept={};for(var e=0;e<d.length;++e)this.accept[d[e]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&k.add(this.node,"dojoDndSource");this.targetState="";this.accept&&k.add(this.node,"dojoDndTarget");this.horizontal&&k.add(this.node,"dojoDndHorizontal");this.topics=[c.subscribe("/dnd/source/over",m.hitch(this,"onDndSourceOver")),c.subscribe("/dnd/start",m.hitch(this,
"onDndStart")),c.subscribe("/dnd/drop",m.hitch(this,"onDndDrop")),c.subscribe("/dnd/cancel",m.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==r.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;
return!1},destroy:function(){u.superclass.destroy.call(this);g.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){u.superclass.onMouseMove.call(this,a);var c=r.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&c.startDrag(this,d,this.copyState(b.getCopyKeyState(a),!0))}this.isDragging&&
(d=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=e.position(this.current,!0)),d=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==e.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||d!=this.before)&&(this._markTargetAnchor(d),c.canDrop(!this.current||c.source!=this||!(this.current.id in this.selection)))}},onMouseDown:function(a){this.mouseDown||!this._legalMouseDown(a)||this.skipForm&&
b.isFormElement(a)||(this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,u.superclass.onMouseDown.call(this,a))},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,u.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=r.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&
this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?"":"Disabled");this==a&&r.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target",
"")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,c,d){var e=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return e.call(this,a.getItem(b.id).data,c)}:d?function(c){var d=a.getItem(c.id);c=c.cloneNode(!0);c.id=b.getUniqueId();return{node:c,data:d.data,type:d.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();d||this.creator||a.selectNone();
this.insertNodes(!0,c,this.before,this.current);!d&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=e},onDropInternal:function(a,c){var d=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(c)this._normalizedCreator=this.creator?function(a,b){return d.call(this,this.getItem(a.id).data,b)}:function(a){var c=this.getItem(a.id);a=a.cloneNode(!0);a.id=b.getUniqueId();return{node:a,data:c.data,type:c.type}};else{if(!this.current)return;this._normalizedCreator=
function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=d}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){u.superclass.onOverEvent.call(this);r.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){u.superclass.onOutEvent.call(this);r.manager().outSource(this);if(this.isDragging&&"Disabled"!=
this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(this.current!=this.targetAnchor||this.before!=a)this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=
null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!l.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(k.contains(a,"dojoDndHandle"))return!0;if(k.contains(a,"dojoDndItem")||k.contains(a,"dojoDndIgnore"))break}return!1}});return u});
define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/on dojo/query dojo/dnd/Source put-selector/put xstyle/css!../css/extensions/ColumnReorder.css".split(" "),function(g,f,n,m,k,e,l){function d(b,c){var a=c[2],d=b[a?"columnSets":"subRows"][c[1]];return a?d[c[2]]:d}function c(b,c,a){c[2]?b.columnSets[c[1]][c[2]]=a:b.subRows[c[1]]=a}function b(b,c){return c.slice(("dgrid-"+b+"-").length)}var p=/(\d+)(?:-(\d+))?$/;g=f(e,{copyState:function(){return!1},checkAcceptance:function(b,c){return b==
this},_legalMouseDown:function(b){return-1<b.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(e){var f=this.grid,a=p.exec(b(f.id,e[0].getAttribute("dndType"))),l=a[2]?"columnSets":"subRows",k=d(f,a),g=f.columns;this.inherited(arguments);a&&setTimeout(function(){var b=n.map(e[0].parentNode.childNodes,function(a){return g[a.columnId]});c(f,a,b);b={grid:f,subRow:b,column:g[e[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};b[l]=f[l];m.emit(f.domNode,
"dgrid-columnreorder",b)?f.set(l,f[l]):(c(f,a,k),f.renderHeader(),this._sort&&this._sort.length&&this.updateSortArrow(this._sort))},0)}});f=f(null,{columnDndConstructor:g,_initSubRowDnd:function(b,c){var a,d,e,f;d=0;for(e=b.length;d<e;d++)f=b[d],!1!==f.reorderable&&(f=f.headerNode,"TH"!=f.tagName&&(f=f.parentNode),l(f,".dojoDndItem[dndType="+c+"]"),a||(a=f.parentNode));a&&this._columnDndSources.push(new this.columnDndConstructor(a,{horizontal:!0,grid:this}))},renderHeader:function(){var b="dgrid-"+
this.id+"-",c,a;this.inherited(arguments);if(!this.reorderDisabled)if(this._columnDndSources=[],this.columnSets)for(a=0,c=this.columnSets.length;a<c;a++)n.forEach(this.columnSets[a],function(c,d){this._initSubRowDnd(c,b+a+"-"+d)},this);else n.forEach(this.subRows,function(a,c){this._initSubRowDnd(a,b+c)},this)},_destroyColumns:function(){this._columnDndSources&&n.forEach(this._columnDndSources,function(b){b.destroy()});this.inherited(arguments)}});f.ColumnDndSource=g;return f});
define({root:{popupLabel:"Show or hide columns"},es:!0});
define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),function(g,f,n,m,k,e,l,d,c){n.add("dojo-preload-i18n-Api",1);n.add("dojo-v1x-i18n-Api",1);var b=g.i18n={},p=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,r=function(a,b,c,d){var e=[c+d];b=b.split("-");for(var f="",l=0;l<b.length;l++)if(f+=(f?"-":"")+b[l],!a||a[f])e.push(c+f+"/"+d),e.specificity=f;return e},u={},a=function(a,b,c){c=c?c.toLowerCase():g.locale;a=a.replace(/\./g,
"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},q=g.getL10nName=function(b,d,e){return c.id+"!"+a(b,d,e)},t=function(a,b,c,d,f,l){a([b],function(k){var p=e.clone(k.root),m=r(!k._v1x&&k,f,c,d);a(m,function(){for(var a=1;a<m.length;a++)p=e.mixin(e.clone(p),arguments[a]);u[b+"/"+f]=p;p.$locale=m.specificity;l()})})},v=function(a){var b=k.extraLocale||[],b=e.isArray(b)?b:[b];b.push(a);return b},x=function(a,b,c){if(n("dojo-preload-i18n-Api")){var f=a.split("*"),l="preload"==
f[1];l&&(u[a]||(u[a]=1,H(f[2],d.parse(f[3]),1,b)),c(1));(f=l)||(D&&F.push([a,b,c]),f=D);if(f)return}a=p.exec(a);var k=a[1]+"/",q=a[5]||a[4],r=k+q,f=(a=a[5]&&a[4])||g.locale||"",x=r+"/"+f;a=a?[f]:v(f);var C=a.length,y=function(){--C||c(e.delegate(u[x]))};m.forEach(a,function(a){var c=r+"/"+a;n("dojo-preload-i18n-Api")&&M(c);u[c]?y():t(b,r,k,q,a,y)})};if(n("dojo-unit-tests"))var C=b.unitTests=[];if(n("dojo-preload-i18n-Api")||n("dojo-v1x-i18n-Api"))var y=b.normalizeLocale=function(a){a=a?a.toLowerCase():
g.locale;return"root"==a?"ROOT":a},z=function(a,b){return n("dojo-sync-loader")&&n("dojo-v1x-i18n-Api")?b.isXdUrl(f.toUrl(a+".js")):!0},D=0,F=[],H=b._preloadLocalizations=function(a,b,c,d){function e(a,b){z(a,d)||c?d([a],b):K([a],b,d)}function l(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function k(c){c=y(c);l(c,function(c){if(0<=m.indexOf(b,c)){var d=a.replace(/\./g,"/")+"_"+c;D++;e(d,function(a){for(var b in a)u[f.toAbsMid(b)+"/"+c]=a[b];for(--D;!D&&F.length;)x.apply(null,
F.shift())});return!0}return!1})}d=d||f;k();m.forEach(g.config.extraLocale,k)},M=function(){};if(n("dojo-v1x-i18n-Api")){var I={},J=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
K=function(a,b,c){var d=[];m.forEach(a,function(a){function b(c){c=J(c,M,a,I);c===I?d.push(u[e]=I.result):(c instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+e,c),c={}),d.push(u[e]=/nls\/[^\/]+\/[^\/]+$/.test(e)?c:{root:c,_v1x:1}))}var e=c.toUrl(a+".js");if(u[e])d.push(u[e]);else{var f=c.syncLoadNls(a);if(f)d.push(f);else if(l)l.get({url:e,sync:!0,load:b,error:function(){d.push(u[e]={})}});else try{c.getText(e,!0,b)}catch(k){d.push(u[e]={})}}});b&&b.apply(null,d)},M=function(a){for(var b,
c=a.split("/"),d=g.global[c[0]],e=1;d&&e<c.length-1;d=d[c[e++]]);d&&((b=d[c[e]])||(b=d[c[e].replace(/-/g,"_")]),b&&(u[a]=b));return b};b.getLocalization=function(b,c,d){var e;b=a(b,c,d);x(b,z(b,f)?f:function(a,b){K(a,b,f)},function(a){e=a});return e};n("dojo-unit-tests")&&C.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=J("{prop:1}",M,"nonsense",I);a.is({prop:1},b);a.is(void 0,b[1]);b=J("({prop:1})",M,"nonsense",I);a.is({prop:1},b);a.is(void 0,b[1]);b=J("{'prop-x':1}",M,"nonsense",
I);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=J("({'prop-x':1})",M,"nonsense",I);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=J("define({'prop-x':1})",M,"nonsense",I);a.is(I,b);a.is({"prop-x":1},I.result);b=J("define('some/module', {'prop-x':1})",M,"nonsense",I);a.is(I,b);a.is({"prop-x":1},I.result);b=J("this is total nonsense and should throw an error",M,"nonsense",I);a.is(b instanceof Error,!0)})})}return e.mixin(b,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:x,cache:u,getL10nName:q})});
define("dojo/_base/declare dojo/has dojo/on ../util/misc put-selector/put dojo/i18n!./nls/columnHider xstyle/css!../css/extensions/ColumnHider.css".split(" "),function(g,f,n,m,k,e){var l,d,c=f("ie"),b=c&&f("quirks"),p=8>c||b?"htmlFor":"for";return g(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:e,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var b=this.subRows,c=!0,a,d,e,f;delete this._columnHiderFirstCheckbox;e=0;for(a=b.length;e<
a;e++)for(f=0,d=b[e].length;f<d;f++)this._renderHiderMenuEntry(b[e][f]),c&&(c=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[b[e][f].id])},_renderHiderMenuEntry:function(b){var c=b.id,a,d,e;b.hidden&&this._hideColumn(c);b.unhidable||(a=k("div.dgrid-hider-menu-row"),d=this.domNode.id+"-hider-menu-check-"+c,this._columnHiderCheckboxes[c]=e=k(a,"input#"+d+".dgrid-hider-menu-check.hider-menu-check-"+c+"[type=checkbox]"),k(a,"label.dgrid-hider-menu-label.hider-menu-label"+c+"["+p+"="+d+
"]",b.label||b.field||""),k(this.hiderMenuNode,a),b.hidden||(e.checked=!0))},renderHeader:function(){var e=this,f=this.hiderMenuNode,a=this.hiderToggleNode,p;this.inherited(arguments);if(!this.hiderDisabled){if(f){for(p in this._columnHiderRules)this._columnHiderRules[p].remove();f.innerHTML=""}else a=this.hiderToggleNode=k(this.headerScrollNode,"button.ui-icon.dgrid-hider-toggle[type=button]"),this._listeners.push(n(a,"click",function(a){e._toggleColumnHiderMenu(a)})),f=this.hiderMenuNode=k("div#dgrid-hider-menu-"+
this.id+".dgrid-hider-menu[role=dialog][aria-label="+this.i18nColumnHider.popupLabel+"]"),this._listeners.push(n(f,"keyup",function(b){27===(b.charCode||b.keyCode)&&(e._toggleColumnHiderMenu(b),a.focus())})),f.style.display="none",k(this.domNode,f),this._listeners.push(n(f,".dgrid-hider-menu-check:"+(9>c||b?"click":"change"),function(a){e._updateColumnHiddenState(a.target.id.substr(e.id.length+18),!a.target.checked)})),this._listeners.push(n(f,"mousedown",function(a){a.stopPropagation()})),d||(d=
n.pausable(document,"mousedown",function(a){l&&l._toggleColumnHiderMenu(a)}),d.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()}},destroy:function(){this.inherited(arguments);for(var b in this._columnHiderRules)this._columnHiderRules[b].remove()},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_toggleColumnHiderMenu:function(){var b=this._hiderMenuOpened,c=this.hiderMenuNode,a=this.domNode,e;c.style.display=b?"none":"";b?c.style.height=
"":(c.offsetHeight>a.offsetHeight-12&&(c.style.height=a.offsetHeight-12+"px"),(e=this._columnHiderFirstCheckbox)&&e.focus());d[b?"pause":"resume"]();l=b?null:this;this._hiderMenuOpened=!b},_hideColumn:function(b){var c="#"+m.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-",a;this._columnHiderRules[b]||(this._columnHiderRules[b]=m.addCssRule(c+b,"display: none;"),8!==f("ie")||f("quirks")||(a=m.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){a.remove()},0)))},
_updateColumnHiddenState:function(b,c){c?this._hideColumn(b):(this._columnHiderRules[b]&&this._columnHiderRules[b].remove(),delete this._columnHiderRules[b]);this.columns[b].hidden=c;n.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[b],hidden:c,bubbles:!0});this.resize()},toggleColumnHiddenState:function(b,c){"undefined"===typeof c&&(c=!this._columnHiderRules[b]);this._updateColumnHiddenState(b,c);this._columnHiderCheckboxes[b].checked=!c}})});
define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-geometry dojo/has ../util/misc put-selector/put dojo/_base/html xstyle/css!../css/extensions/ColumnResizer.css".split(" "),function(g,f,n,m,k,e,l,d,c){function b(a){for(var b=a.length,c=b,d=a[0].length,e=Array(b);b--;)e[b]=Array(d);for(var f={},b=0;b<c;b++)for(var l=e[b],k=a[b],p=0,m=0;p<d;p++){var g=k[m],r;if("undefined"==typeof l[p]){l[p]=g.id;if(g.rowSpan&&1<g.rowSpan){r=e;for(var u=g.rowSpan,n=b,G=p,S=g.id,O=1;O<u;O++)r[n+
O][G]=S}if(0<b&&g.colSpan&&1<g.colSpan)for(r=1;r<g.colSpan;r++)if(l[++p]=g.id,g.rowSpan&&1<g.rowSpan)for(var u=e,n=g.rowSpan,G=b,S=p,O=g.id,s=1;s<n;s++)u[G+s][S]=O;f[g.id]=a[0][p].id;m++}}return f}function p(a,b,c,e){if(!(0>=c)){var l=a.columns[b],k={grid:a,columnId:b,width:c,bubbles:!0,cancelable:!0};e&&(k.parentType=e);if(!a._resizedColumns||f.emit(a.headerNode,"dgrid-columnresize",k))return"auto"===c?delete l.width:(l.width=c,c+="px"),(e=a._columnSizes[b])?e.set("width",c):e=d.addCssRule("#"+d.escapeCssIdentifier(a.domNode.id)+
" .dgrid-column-"+b,"width: "+c+";"),a._columnSizes[b]=e,a.resize(),!0}}var r,u=0,a={create:function(){r=c("div.dgrid-column-resizer")},destroy:function(){c(r,"!");r=null},show:function(a){a=e.position(a.domNode,!0);r.style.top=a.y+"px";r.style.height=a.h+"px";c(document.body,r)},move:function(a){r.style.left=a+"px"},hide:function(){r.parentNode.removeChild(r)}};return g(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);u++||
a.create()},destroy:function(){this.inherited(arguments);for(var b in this._columnSizes)this._columnSizes[b].remove();--u||a.destroy()},resizeColumnWidth:function(a,b){return p(this,a,b)},configStructure:function(){var a=this._oldColumnSizes=m.mixin({},this._columnSizes),b;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(b in a)b in this._columnSizes||a[b].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,c;"width"in a&&
((c=this._oldColumnSizes[b])?c.set("width",a.width+"px"):c=d.addCssRule("#"+this.domNode.id+" .dgrid-column-"+b,"width: "+a.width+"px;"),this._columnSizes[b]=c)},renderHeader:function(){this.inherited(arguments);if(!this.resizerDisabled){var a=this,e;if(this.columnSets&&this.columnSets.length)for(var k=this.columnSets.length;k--;)e=m.mixin(e||{},b(this.columnSets[k]));else this.subRows&&1<this.subRows.length&&(e=b(this.subRows));for(var k=n(".dgrid-cell",a.headerNode),p=k.length;p--;){var g=k[p],
r=g.columnId,u=a.columns[r],D=g.childNodes;if(u&&!1!==u.resizable){u=c("div.dgrid-resize-header-container");for(g.contents=u;0<D.length;)c(u,D[0]);c(g,u,"div.dgrid-resize-handle.resizeNode-"+r).columnId=e?e[r]:r}}a.mouseMoveListen||(f(a.headerNode,".dgrid-resize-handle:mousedown"+(l("touch")?",.dgrid-resize-handle:touchstart":""),function(b){a._resizeMouseDown(b,this);a.mouseMoveListen.resume();a.mouseUpListen.resume()}),a._listeners.push(a.mouseMoveListen=f.pausable(document,"mousemove"+(l("touch")?
",touchmove":""),d.throttleDelayed(function(b){a._updateResizerPosition(b)}))),a._listeners.push(a.mouseUpListen=f.pausable(document,"mouseup"+(l("touch")?",touchend":""),function(b){a._resizeMouseUp(b);a.mouseMoveListen.pause();a.mouseUpListen.pause()})),a.mouseMoveListen.pause(),a.mouseUpListen.pause())}},_resizeMouseDown:function(b,c){b.preventDefault();k.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(b);this._targetCell=n(".dgrid-column-"+c.columnId,this.headerNode)[0];
this._updateResizerPosition(b);a.show(this)},_resizeMouseUp:function(b){var c=this._columnSizes,d,e,f;this.adjustLastColumn&&(f=this.headerNode.clientWidth-1);this._resizedColumns||(d=n(".dgrid-cell",this.headerNode),this.columnSets&&this.columnSets.length?d=d.filter(function(a){return"0"==a.columnId.split("-")[0]&&!(a.columnId in c)}):this.subRows&&1<this.subRows.length&&(d=d.filter(function(a){return"0"==a.columnId.charAt(0)&&!(a.columnId in c)})),e=d.map(function(a){return a.offsetWidth}),d.forEach(function(a,
b){this.resizeColumnWidth(a.columnId,e[b])},this),this._resizedColumns=!0);k.setSelectable(this.domNode,!0);d=this._targetCell;var l=this._getResizeMouseLocation(b)-this._startX,m=d.offsetWidth+l,g=this._getResizedColumnWidths(),r=g.totalWidth,g=g.lastColId,u=n(".dgrid-column-"+g,this.headerNode)[0].offsetWidth;m<this.minWidth&&(m=this.minWidth);p(this,d.columnId,m,b.type)&&d.columnId!=g&&this.adjustLastColumn&&(r+l<f?p(this,g,"auto",b.type):u-l<=this.minWidth&&p(this,g,this.minWidth,b.type));a.hide();
delete this._startX;delete this._targetCell},_updateResizerPosition:function(b){if(this._targetCell){b=this._getResizeMouseLocation(b);var c=this._targetCell.offsetWidth,d=b;c+(b-this._startX)<this.minWidth&&(d=this._startX-(c-this.minWidth));a.move(d)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=n(".dgrid-cell",this.headerNode);this.columnSets&&
this.columnSets.length?b=b.filter(function(a){return"0"==a.columnId.split("-")[1]}):this.subRows&&1<this.subRows.length&&(b=b.filter(function(a){return"0"==a.columnId.charAt(0)}));var c=b.length;if(!c)return{};for(var d=b[c-1].columnId;c--;)a+=b[c].offsetWidth;return{totalWidth:a,lastColId:d}}})});
define([],function(){function g(a,b){var c=a[l]("link");c.rel="stylesheet";c.type="text/css";b&&(c.href=b);return c}function f(a,b){return a.lastIndexOf(".")<=a.lastIndexOf("/")?a+"."+b:a}function n(a){a=a.split("!");for(var b,c=1;b=a[c++];)b=b.split("=",2),a[b[0]]=2==b.length?b[1]:!0;return a}function m(a){if(p["dom-create-style-element"])return b=document.createElement("style"),b.setAttribute("type","text/css"),b.appendChild(document.createTextNode(a)),r.insertBefore(b,r.firstChild),b;var b=document.createStyleSheet();
b.cssText=a;return b.owningElement}var k="onreadystatechange",e="onload",l="createElement",d=!1,c=document,b="undefined"==typeof _css_cache?{}:_css_cache,p={"event-link-onload":null===document.createElement("link").onload&&!navigator.userAgent.match(/AppleWebKit/),"dom-create-style-element":!document.createStyleSheet},r=c.head||(c.head=c.getElementsByTagName("head")[0]);if(!p["bundled-css"])var u=function(a,b){function c(a){if(a=a.sheet||a.styleSheet)for(var b=document.styleSheets,d=b.length;0<d;d--)if(b[d-
1]==a)return!0}function f(a,b){c(a.link)?(l(a),b()):d||setTimeout(function(){f(a,b)},a.wait)}function l(a){a=a.link;a[k]=a[e]=null}function m(){g||(g=!0,b())}require.onError&&(require.onError=function(a){return function(){d=!0;a.apply(this,arguments)}}(require.onError));var g;(function(a,b){var c=a.link;c[k]=c[e]=function(){c.readyState&&"complete"!=c.readyState||(p["event-link-onload"]=!0,l(a),b())}})(a,m);p["event-link-onload"]||f(a,m)};return function(a,d,e){for(var l=a.split(","),k=l.length,p=
function(){0==--k&&d(D.sheet||D.styleSheet)},y=0;y<l.length;y++){a=l[y];var z=b[a];if(z)return D=m(z),p();a=n(a);var z=a.shift(),z=f(z,"css"),D=g(c);a="nowait"in a?"false"!=a.nowait:!(!e||!e.cssDeferLoad);u({link:D,url:z,wait:e&&e.cssWatchPeriod||25},p);a&&d(D);D.href=z;r.appendChild(D)}}});
define(["dojo/has","xstyle/css!../css/has-transforms3d.css"],function(g){var f=["ms","O","Moz","Webkit"];g.add("css-transitions",function(g,m,k){g=k.style;if(void 0!==g.transitionProperty)return!0;for(m=f.length;m--;)if(void 0!==g[f[m]+"TransitionProperty"])return f[m];return!1});g.add("transitionend",function(){var f=g("css-transitions");return f?!0===f?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[f]:!1});g.add("css-transforms",function(g,
m,k){g=k.style;if(void 0!==g.transformProperty)return!0;for(m=f.length;m--;)if(void 0!==g[f[m]+"Transform"])return f[m];return!1});g.add("css-transforms3d",function(g,m,k){k.className="has-csstransforms3d";document.body.appendChild(k);g=k.offsetLeft;if(9===g)return!0;if(9<g)return(k=f[g-10])||!1;document.body.removeChild(k);k.className="";return!1});return g});
define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(g,f,n,m,k,e,l,d,c,b){function p(a,c,d,e){e=this.grid.isRTL?"right":"left";var f=".dgrid-expando-icon";c&&(f+=".ui-icon.ui-icon-triangle-1-"+(d?"se":"e"));a=b("div"+f+"[style=margin-"+e+": "+a*(this.indentWidth||9)+"px; float: "+e+"]");a.innerHTML="&nbsp;";return a}function r(a){var c=this,d=this.style.height;d&&(this.style.display=
"0px"==d?"none":"block");a&&(b(this,".dgrid-tree-resetting"),setTimeout(function(){b(c,"!dgrid-tree-resetting")}));this.style.height=""}function u(a){var g=a.renderCell||d.defaultRenderCell,t,v;a||(a={});a.shouldExpand=a.shouldExpand||function(a,b,c){return c};e.after(a,"init",function(){var d=a.grid,g=".dgrid-content .dgrid-column-"+a.id,q=[];if(!d.store)throw Error("dgrid tree column plugin requires a store to operate.");a.renderExpando||(a.renderExpando=p);q.push(d.on(a.expandOn||".dgrid-expando-icon:click,"+
g+":dblclick,"+g+":keydown",function(a){var b=d.row(a);d.store.mayHaveChildren&&!d.store.mayHaveChildren(b.data)||"keydown"==a.type&&32!=a.keyCode||"dblclick"==a.type&&v&&1<v.count&&b.id==v.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||d.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(v&&v.id==d.row(a).id?v.count++:v={id:d.row(a).id,count:1})}));l("touch")&&q.push(d.on(c.selector(g,c.dbltap),function(){d.expand(this)}));d._expanded||(d._expanded={});q.push(e.after(d,"insertRow",
function(b){var c=this.row(b);a.shouldExpand(c,t,this._expanded[c.id])&&this.expand(b,!0,!0);return b}));q.push(e.before(d,"removeRow",function(a,c){var e=a.connected;e&&(m(">.dgrid-row",e).forEach(function(a){d.removeRow(a,!0)}),c||b(e,"!"))}));a.collapseOnRefresh&&q.push(e.after(d,"cleanup",function(){this._expanded={}}));d._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};d.expand=function(c,e,f){var p=c.element?c:d.row(c),g=l("transitionend");c=p.element;
if((c=-1<c.className.indexOf("dgrid-expando-icon")?c:m(".dgrid-expando-icon",c)[0])&&c.mayHaveChildren&&(f||e!==!!this._expanded[p.id])){var q=void 0===e?!this._expanded[p.id]:e;b(c,".ui-icon-triangle-1-"+(q?"se":"e")+"!ui-icon-triangle-1-"+(q?"e":"se"));var t=c.preloadNode;e=p.element;var v,u,C,y;if(!t){v=e.connected=b("div.dgrid-tree-container");var t=c.preloadNode=b(e,"+",v,"div.dgrid-preload"),s=function(a){return d.store.getChildren(p.data,a)};s.level=c.level;a.allowDuplicates&&(y={parentId:p.id});
n.when(d.renderQuery?d._trackError(function(){return d.renderQuery(s,t,y)}):d.renderArray(s(y),t,{query:s}),function(){if(d._expanded[p.id]&&g){var a=v.scrollHeight;v.style.height=a?a+"px":"auto"}});g?k(v,g,r):r.call(v)}v=e.connected;v.hidden=!q;u=v.style;!g||f?(u.display=q?"block":"none",u.height=""):(q?(u.display="block",C=v.scrollHeight,u.height="0px"):(b(v,".dgrid-tree-resetting"),u.height=v.scrollHeight+"px"),setTimeout(function(){b(v,"!dgrid-tree-resetting");u.height=q?C?C+"px":"auto":"0px"}));
q?this._expanded[p.id]=!0:delete this._expanded[p.id]}};e.after(a,"destroy",function(){f.forEach(q,function(a){a.remove()});delete d.expand;delete d._calcRowHeight})});a.renderCell=function(c,d,e,f){var l=a.grid,k=Number(f&&f.query&&f.query.level)+1,p=!l.store.mayHaveChildren||l.store.mayHaveChildren(c),m=f.parentId,k=t=isNaN(k)?0:k,l=a.renderExpando(k,p,l._expanded[(m?m+"-":"")+l.store.getIdentity(c)],c);l.level=k;l.mayHaveChildren=p;(c=g.call(a,c,d,e,f))&&c.nodeType?(b(e,l),b(e,c)):e.insertBefore(l,
e.firstChild)};return a}u.defaultRenderExpando=p;return u});
define("dojo/_base/kernel dojo/_base/array dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),function(g,f,n,m,k,e){return function(l,d){function c(b){return!a.allowSelect(a.row(b))}function b(b){return function(c){var d=c.rows,e=d.length;c="false";var f;for(f=0;f<e;f++){var k=a.cell(d[f],l.id).element;k&&(k=(k.contents||k).input)&&!k.disabled&&(k.checked=b,k.setAttribute("aria-checked",b))}if("checkbox"==q.type){d=a.selection;e=!1;for(f in d)if(d[f]!=a.allSelected){e=!0;break}q.indeterminate=
e;q.checked=a.allSelected;e?c="mixed":a.allSelected&&(c="true");q.setAttribute("aria-checked",c)}}}function p(c){if("click"==c.type||32==c.keyCode||!k("opera")&&13==c.keyCode||0===c.keyCode){var f=a.row(c),l=a._lastSelected&&a.row(a._lastSelected);a._selectionTriggerEvent=c;"radio"==d?l&&l.id==f.id||(a.clearSelection(),a.select(f,null,!0),a._lastSelected=f.element):f?(c.shiftKey?b(!0)({rows:[f]}):l=null,l=c.shiftKey?l:null,a.select(l||f,f,l?void 0:null),a._lastSelected=f.element):(e(this,(a.allSelected?
"!":".")+"dgrid-select-all"),a[a.allSelected?"clearSelection":"selectAll"]());a._selectionTriggerEvent=null}}function r(){a._hasSelectorInputListener=!0;u.push(a.on(".dgrid-selector:click,.dgrid-selector:keydown",p));var d=a._handleSelect;a._handleSelect=function(a){this.cell(a).column!=l&&d.apply(this,arguments)};if("function"==typeof l.disabled){var e=a.allowSelect,f=l.disabled;a.allowSelect=function(a){var b=e.call(this,a);return f===c?b:b&&!f.call(l,a.data)}}l.disabled=c;u.push(a.on("dgrid-select",
b(!0)));u.push(a.on("dgrid-deselect",b(!1)))}var u=[],a,q;l||(l={});l.type&&(l.selectorType=l.type,g.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4"));l.selectorType=d=d||l.selectorType||"checkbox";l.sortable=!1;var t="function"==typeof d?d:function(b,c,f){var k=c.parentNode,p;a._hasSelectorInputListener||r();p=l.disabled;e(k&&k.contents?k:c,".dgrid-selector");c=c.input||(c.input=e(c,"input[type="+d+"]",{tabIndex:isNaN(l.tabIndex)?-1:l.tabIndex,disabled:p&&("function"==
typeof p?p.call(l,f):p),checked:b}));c.setAttribute("aria-checked",!!b);return c};m.after(l,"init",function(){a=l.grid});m.after(l,"destroy",function(){f.forEach(u,function(a){a.remove()});a._hasSelectorInputListener=!1});l.renderCell=function(b,c,d,e,f){c=(c=b&&a.row(b))&&a.selection[c.id];t(c,d,b)};l.renderHeaderCell=function(b){var c="label"in l?l.label:l.field||"";"radio"!=d&&a.allowSelectAll?t(!1,b,{}):(b.appendChild(document.createTextNode(c)),a._hasSelectorInputListener||r());q=b.lastChild};
return l}});
define("dojo/_base/kernel dojo/_base/declare dojo/_base/Deferred dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),function(g,f,n,m,k,e,l,d,c){function b(a,b){for(var c=a.unselectable=b?"on":"",d=a.getElementsByTagName("*"),e=d.length;--e;)"INPUT"!==d[e].tagName&&"TEXTAREA"!==d[e].tagName&&(d[e].unselectable=c)}function p(a,c){var d=a.bodyNode,f=c?"text":21>k("ff")?"-moz-none":"none";u?d.style[u]=f:k("dom-selectstart")?c||a._selectstartHandle?
c&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=m(d,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(b(d,!c),c||a._unselectableHandle)?c&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=e.after(a,"renderRow",function(a){b(a,!0);return a})}k.add("mspointer",function(a,b,c){return"onmspointerdown"in c});k.add("css-user-select",
function(a,b,c){a=c.style;b=["Khtml","O","ms","Moz","Webkit"];c=b.length;var d="userSelect";do if("undefined"!==typeof a[d])return d;while(c--&&(d=b[c]+"UserSelect"));return!1});k.add("dom-selectstart","undefined"!==typeof document.onselectstart);var r=k("mac")?"metaKey":"ctrlKey",u=k("css-user-select"),a=k("mspointer")?"MSPointerDown":"mousedown",q=k("mspointer")?"MSPointerUp":"mouseup";return f(null,{selectionDelegate:".dgrid-row",selectionEvents:a+","+q+",dgrid-cellfocusin",deselectOnRefresh:!0,
allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a);this._initSelectionEvents()},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._deselectionHandle&&this._deselectionHandle.remove()},
_setSelectionMode:function(a){a!=this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(a){g.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4");this.set("selectionMode",a)},_setAllowTextSelection:function(a){"undefined"!==typeof a?p(this,a):p(this,"none"===this.selectionMode);this.allowTextSelection=a},_handleSelect:function(b,
c){if(this[this._selectionHandlerName]&&!("dgrid-cellfocusin"===b.type&&"mousedown"===b.parentType||b.type===q&&c!=this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=b;if(!b.keyCode||!b.ctrlKey||32==b.keyCode)if(!b.shiftKey&&b.type===a&&this.isSelected(c))this._waitForMouseUp=c;else this[this._selectionHandlerName](b,c);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,b){var c=a.keyCode?a.ctrlKey:a[r];this._lastSelected===b?this.select(b,null,!c||!this.isSelected(b)):
(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var c=this._lastSelected,d=a.keyCode?a.ctrlKey:a[r],e;a.shiftKey||(e=d?null:!0,c=null);this.select(b,c,e);c||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:a[r])||this.clearSelection(null,!0);this._multipleSelectionHandler(a,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var a=
this,b=this.selectionDelegate;k("touch")?m(this.contentNode,d.selector(b,d.tap),function(b){a._handleSelect(b,this)}):m(this.contentNode,m.selector(b,this.selectionEvents),function(b){a._handleSelect(b,this)});this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)});if(this.allowSelectAll)this.on("keydown",function(b){b[r]&&65==b.keyCode&&(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())});this._setStore&&e.after(this,"_setStore",function(){a._updateDeselectionAspect()});
this._updateDeselectionAspect()},_updateDeselectionAspect:function(){var a=this,b=this.store;this._deselectionSignal&&this._deselectionSignal.remove();this._deselectionSignal=b&&b.notify?e.after(b,"notify",function(b,c){var d=c||b&&b[this.idProperty||"id"];if(d){var e=(d=a.row(d))&&a.selection[d.id];if(e)a[(b?"":"de")+"select"](d,null,e)}},!0):e.before(this,"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(c)})},allowSelect:function(a){return!0},_selectionEventQueue:function(a,
b){var c=this,d="dgrid-"+(a?"select":"deselect"),e=this[d],f=this._selectionTriggerEvent;f&&(f=f.type);if(e)return e;setTimeout(this._fireSelectionEvent=function(){if(e){var a={bubbles:!0,grid:c};f&&(a.parentType=f);a[b]=e;m.emit(c.contentNode,d,a);e=null;delete c[d]}},0);return e=this[d]=[]},select:function(a,b,d){void 0===d&&(d=!0);a.element||(a=this.row(a));if(!1===d||this.allowSelect(a)){var e=this.selection,f=e[a.id];null===d&&(d=!f);var l=a.element;d||this.allSelected?e[a.id]=d:delete this.selection[a.id];
l&&(d?c(l,".dgrid-selected.ui-state-active"):c(l,"!dgrid-selected!ui-state-active"));d!=f&&l&&this._selectionEventQueue(d,"rows").push(a);if(b)for(b.element||(b=this.row(b)),b=b.element,e=a.element,e=b&&(b.compareDocumentPosition?2==b.compareDocumentPosition(e):b.sourceIndex>e.sourceIndex)?"down":"up";a.element!=b&&(a=this[e](a));)this.select(a,null,d)}},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this.deselect(c);
b||(this._lastSelected=null)},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this.select(b.id)}},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&(this.clearSelection(),this._fireSelectionEvent&&this._fireSelectionEvent());this._lastSelected=
null;return this.inherited(arguments)},renderArray:function(){var a=this,b=this.inherited(arguments);n.when(b,function(b){var c=a.selection,d,e,f;for(d=0;d<b.length;d++)e=a.row(b[d]),(f=e.id in c?c[e.id]:a.allSelected)&&a.select(e,null,f)});return b}})});
define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(g,f,n,m,k,e,l){function d(b){return b}function c(b){if("object"!==typeof b)b=Error(b);else if("cancel"===b.dojoType)return;b.grid=this;k.emit(this.domNode,"dgrid-error",{grid:this,error:b,cancelable:!0,bubbles:!0})&&console.error(b)}return f(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query=
{};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};e.before(this,"configStructure",n.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments);this.store&&this._updateNotifyHandle(this.store)},destroy:function(){this.inherited(arguments);this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(b){b.set&&(this._columnsWithSet[b.field]=b)},_updateNotifyHandle:function(b){this._notifyHandle&&(this._notifyHandle.remove(),
delete this._notifyHandle);"function"===typeof b.notify&&(this._notifyHandle=e.after(b,"notify",n.hitch(this,"_onNotify"),!0))},_setStore:function(b,c,d){this._updateNotifyHandle(b);this.store=b;this.dirty={};this.set("query",c,d)},_setQuery:function(b,c){var d=c&&c.sort;this.query=void 0!==b?b:this.query;this.queryOptions=c||this.queryOptions;d?this.set("sort",d):this.refresh()},setStore:function(b,c,d){g.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4");this.set("store",b,
c,d)},setQuery:function(b,c){g.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4");this.set("query",b,c)},_getQueryOptions:function(){var b=n.delegate(this.queryOptions,{});this._sort.length&&(b.sort=this._sort);return b},_getQuery:function(){var b=this.query;return"object"==typeof b&&null!=b?n.delegate(b,{}):b},_setSort:function(b,c){this.store&&(this._lastCollection=null);this.inherited(arguments)},_onNotify:function(b,c){this.inherited(arguments);b&&1>this._numObservers&&this.refresh({keepScrollPosition:!0})},
insertRow:function(b,c,d,e,a){var f=this.store,l=this.dirty,f=f&&f.getIdentity(b),k;f in l&&!(f in this._updating)&&(k=l[f]);k&&(b=n.delegate(b,k));return this.inherited(arguments)},updateDirty:function(b,c,d){var e=this.dirty,a=e[b];a||(a=e[b]={});a[c]=d},setDirty:function(b,c,d){g.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(b,c,d)},save:function(){function b(a,b){return function(f){var l=c._columnsWithSet,k=c._updating,g,q;if("function"===typeof f.set)f.set(b);
else for(g in b)f[g]=b[g];for(g in l)q=l[g].set(f),void 0!==q&&(f[g]=q);k[a]=!0;return m.when(d.put(f),function(){delete e[a];delete k[a]})}}var c=this,d=this.store,e=this.dirty,a=new m,f=a.promise,l=function(a){var b;return c.getBeforePut||!(b=c.row(a).data)?function(){return d.get(a)}:function(){return b}},k;for(k in e)var g=b(k,e[k]),f=f.then(l(k)).then(g);a.resolve();return f},revert:function(){this.dirty={};this.refresh()},_trackError:function(b){var e;"string"==typeof b&&(b=n.hitch(this,b));
try{e=b()}catch(f){c.call(this,f)}return m.when(e,d,n.hitch(this,c))},newRow:function(){this.noDataNode&&(l(this.noDataNode,"!"),delete this.noDataNode);return this.inherited(arguments)},removeRow:function(b,c){var d={element:b};!c&&this.noDataMessage&&this.up(d).element===b&&this.down(d).element===b&&(this.noDataNode=l(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})});
define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on ./util/misc put-selector/put".split(" "),function(g,f,n,m,k,e,l,d){return n([g,f],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:1,pagingMethod:"debounce",pagingDelay:l.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var c=this;e(this.bodyNode,"scroll",l[this.pagingMethod](function(b){c._processScroll(b)},
null,this.pagingDelay))},renderQuery:function(c,b,e){function f(a){d(n,"!");if(a)throw l._refreshDeferred&&(l._refreshDeferred.reject(a),delete l._refreshDeferred),a;}var l=this,a={query:c,count:0,node:b,options:e},g=this.preload,t;if(!b){var v={node:d(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:c,next:a,options:e};v.node.style.height="0";a.node=b=d(this.contentNode,"div.dgrid-preload");a.previous=v}b.rowIndex=this.minRowsPerPage;g?((a.next=g.next)&&this.bodyNode.scrollTop>=g.node.offsetTop?
a.previous=g:(a.next=g,a.previous=g.previous),a.previous.next=a,a.next.previous=a):this.preload=a;var n=d(b,"-div.dgrid-loading");d(n,"div.dgrid-below").innerHTML=this.loadingMessage;e=m.mixin(this.get("queryOptions"),e,{start:0,count:this.minRowsPerPage,query:c});this._trackError(function(){return t=c(e)});if("undefined"===typeof t)f();else return k.when(l.renderArray(t,b,e),function(c){return k.when("undefined"===typeof t.total?t.length:t.total,function(e){var f=c.length,k=b.parentNode,p=l.noDataNode;
d(n,"!");l._total=e;0===e&&(p&&(d(p,"!"),delete l.noDataNode),l.noDataNode=p=d("div.dgrid-no-data"),k.insertBefore(p,l._getFirstRowSibling(k)),p.innerHTML=l.noDataMessage);for(p=k=0;p<f;p++)k+=l._calcRowHeight(c[p]);f&&k&&(l.rowHeight=k/f);e-=f;a.count=e;b.rowIndex=f;e?b.style.height=Math.min(e*l.rowHeight,l.maxEmptySpace)+"px":b.style.display="none";l._previousScrollPosition&&(l.scrollTo(l._previousScrollPosition),delete l._previousScrollPosition);l._processScroll();l._refreshDeferred&&(l._refreshDeferred.resolve(t),
delete l._refreshDeferred);return c},f)},f),t},refresh:function(c){var b=this,d=c&&c.keepScrollPosition,f;"undefined"===typeof d&&(d=this.keepScrollPosition);d&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store)return d=this._refreshDeferred=new k,f=b.renderQuery(function(c){return b.store.query(b.query,c)}),"undefined"===typeof f&&d.reject(),d.then(function(c){setTimeout(function(){e.emit(b.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:b,
results:c})},0);delete b._refreshDeferred;return c},function(c){delete b._refreshDeferred;throw c;})},resize:function(){this.inherited(arguments);this._processScroll()},_getFirstRowSibling:function(c){return c.lastChild},_calcRowHeight:function(c){var b=c.previousSibling;return b&&b.offsetTop!=c.offsetTop?c.offsetHeight:0},lastScrollTop:0,_processScroll:function(c){function b(a,b,c,f){var k=l.farOffRemoval,m=a.node;if(b>2*k){for(var g,q=m[c],t=0,r=0,v=[];g=q;){var n=l._calcRowHeight(g);if(t+n+k>b||
0>q.className.indexOf("dgrid-row")&&0>q.className.indexOf("dgrid-loading"))break;q=g[c];t+=n;r+=g.count||1;l.removeRow(g,!0);v.push(g)}a.count+=r;f?(m.rowIndex-=r,e(a)):m.style.height=m.offsetHeight+t+"px";var C=d("div",v);setTimeout(function(){d(C,"!")},1)}}function e(a,b){a.node.style.height=Math.min(a.count*l.rowHeight,b?Infinity:l.maxEmptySpace)+"px"}function f(a,b){do a=b?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var l=this,a=l.bodyNode;c=c&&c.scrollTop||this.getScrollPosition().y;
var g=a.offsetHeight+c,t,v,n=l.preload,C=l.lastScrollTop,y=l.bufferRows*l.rowHeight,z=y-l.rowHeight,D,F,H,M=!0;for(l.lastScrollTop=c;n&&!n.node.offsetWidth;)n=n.previous;for(;n&&n!=t;){t=l.preload;l.preload=n;v=n.node;var I=v.offsetTop;if(g+1+z<I)n=f(n,M=!1);else if(c-1-z>I+v.offsetHeight)n=f(n,M=!0);else{var J=((v.rowIndex?c-y:g)-I)/l.rowHeight,I=(g-c+2*y)/l.rowHeight,K=Math.max(Math.min((c-C)*l.rowHeight,l.maxRowsPerPage/2),l.maxRowsPerPage/-2),I=I+Math.min(Math.abs(K),10);0==v.rowIndex&&(J-=I);
J=Math.max(J,0);10>J&&0<J&&I+J<l.maxRowsPerPage&&(I+=Math.max(0,J),J=0);I=Math.min(Math.max(I,l.minRowsPerPage),l.maxRowsPerPage,n.count);if(0==I)n=f(n,M);else{var I=Math.ceil(I),J=Math.min(Math.floor(J),n.count-I),G=m.mixin(l.get("queryOptions"),n.options);n.count-=I;var S=v,O,s=l.queryRowsOverlap;if(K=0<v.rowIndex&&n){var T=n.previous;T&&(b(T,c-(T.node.offsetTop+T.node.offsetHeight),"nextSibling"),0<J&&T.node==v.previousSibling?(J=Math.min(n.count,J),n.previous.count+=J,e(n.previous,!0),v.rowIndex+=
J,s=0):I+=J,n.count-=J);G.start=v.rowIndex-s;G.count=Math.min(I+s,l.maxRowsPerPage);v.rowIndex=G.start+G.count}else n.next&&(b(n.next,n.next.node.offsetTop-g,"previousSibling",!0),S=v.nextSibling,S==n.next.node?(n.next.count+=n.count-J,n.next.node.rowIndex=J+I,e(n.next),n.count=J,s=0):O=!0),G.start=n.count,G.count=Math.min(I+s,l.maxRowsPerPage);O&&S&&S.offsetWidth&&(O=S.offsetTop);e(n);v=d(S,"-div.dgrid-loading[style=height:"+I*l.rowHeight+"px]");d(v,"div.dgrid-"+(K?"below":"above")).innerHTML=l.loadingMessage;
v.count=I;G.query=n.query;if(G.start>l._total||0>G.count)console.log("Skipping query",G,l._total);else{var Q=n.query(G);if(void 0===l._trackError(function(){return Q})){d(v,"!");return}(function(a,b,c,f,m){H=k.when(l.renderArray(m,a,G),function(b){F=m;S=a.nextSibling;d(a,"!");if(f&&S&&S.offsetWidth){var g=l.getScrollPosition();l.scrollTo({x:g.x,y:g.y+S.offsetTop-f,preserveMomentum:!0})}k.when(m.total||m.length,function(a){l._total=a;c&&(c.count=a-c.node.rowIndex,e(c))});l._processScroll();return b},
function(b){d(a,"!");throw b;})}).call(this,v,a,K,O,Q);n=n.previous}}}}H&&(D=this._refreshDeferred)&&(delete this._refreshDeferred,k.when(H,function(){D.resolve(F)}))},removeRow:function(c,b){if(c){var d=c.previousSibling,e=c.nextSibling,f;if(f=d)f=d.observerIndex,f=null!=f?f:d.previousObserverIndex;d=f;if(f=e)f=e.observerIndex,f=null!=f?f:e.nextObserverIndex;e=c.observerIndex;c.observerIndex=void 0;b&&(c.nextObserverIndex=f,c.previousObserverIndex=d);-1<e&&e!==d&&e!==f&&(d=this.observers,f=d[e])&&
(f.cancel(),this._numObservers--,d[e]=0)}this.inherited(arguments)}})});define(["dojo/has"],function(g){var f={};return function(){for(var n,m=arguments,k=0;k<m.length;k++)if(n=m[k],!f[n]){f[n]=!0;var e=n.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),l=g(e[2]),d=-e[4];(0<d?d<=l&&(-e[5]||d)>=l:!!l)==!e[1]&&(document.documentElement.className+=" has-"+n)}}});
define(["put-selector/put"],function(g){var f=[],n,m,k,e=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,l={defaultDelay:15,throttle:function(d,c,b){var e=!1;b=b||l.defaultDelay;return function(){e||(e=!0,d.apply(c,arguments),setTimeout(function(){e=!1},b))}},throttleDelayed:function(d,c,b){var e=!1;b=b||l.defaultDelay;return function(){if(!e){e=!0;var f=arguments;setTimeout(function(){e=!1;d.apply(c,f)},b)}}},debounce:function(d,c,b){var e;b=b||l.defaultDelay;return function(){e&&(clearTimeout(e),e=null);var f=
arguments;e=setTimeout(function(){d.apply(c,f)},b)}},each:function(d,c,b){var e,f;if(d)if("number"===typeof d.length)for(e=0,f=d.length;e<f;e++)c.call(b,d[e],e,d);else for(e in d)c.call(b,d[e],e,d)},addCssRule:function(d,c){n||(n=g(document.getElementsByTagName("head")[0],"style"),n=n.sheet||n.styleSheet,m=n.deleteRule?"deleteRule":"removeRule",k=n.cssRules?"cssRules":"rules");var b=f.length;f[b]=(n.cssRules||n.rules).length;n.addRule?n.addRule(d,c):n.insertRule(d+"{"+c+"}",f[b]);return{get:function(c){return n[k][f[b]].style[c]},
set:function(c,d){"undefined"!==typeof f[b]&&(n[k][f[b]].style[c]=d)},remove:function(){var c=f[b],d,e;if(void 0!==c)for(n[m](c),f[b]=void 0,d=b+1,e=f.length;d<e;d++)f[d]>c&&f[d]--}}},escapeCssIdentifier:function(d){return d.replace(e,"\\$1")}};return l});
define(["require"],function(g){function f(f,m,k){var e=document.documentElement;f=e.insertBefore(document.createElement(f),e.firstChild);f.id=m;m=(f.currentStyle||getComputedStyle(f,null))[k];e.removeChild(f);return m}return{load:function(n,m,k,e){function l(){var b=f("x-parse",null,"content");b&&"none"!=b?m([eval(b)],k):k()}var d=m.toUrl(n),c=m.cache&&m.cache["url:"+d];if(c)return c.xCss&&(c=c.cssText),g(["./util/createStyleSheet"],function(b){b(c)}),l();if("none"==f("div",n.replace(/\//g,"-").replace(/\..*/,
"")+"-loaded","display"))return l();g(["./core/load-css"],function(b){b(d,l)})}}});
define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has ./util/misc dojo/has!touch?./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(g,f,n,m,k,e,l,d){function c(a,b){var c=document.body,e;d(c,a,".dgrid-scrollbar-measure");e=a["offset"+b]-a["client"+b];d(a,"!dgrid-scrollbar-measure");c.removeChild(a);return e}function b(a){var b=a?"."+a.replace(v,"."):"";this._class&&(b="!"+this._class.replace(v,"!")+b);d(this.domNode,b);this._class=
a}function p(){return this._class}function r(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function u(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)}l("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var a,q;m.add("dom-scrollbar-width",function(a,b,d){return c(d,"Width")});m.add("dom-scrollbar-height",function(a,b,d){return c(d,"Height")});var t=0,v=/ +/g,x=7>m("ie")&&!m("quirks")?function(){var a,
b,c;this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,c=this._prevWinDims||[],c[0]!==b||c[1]!==a)&&(this.resize(),this._prevWinDims=[b,a])}:function(){this._started&&this.resize()};return f(m("touch")?e:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:!0,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};b&&(this.srcNodeRef=
b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,c){var e=this.domNode=c||d("div"),l;a?(this.params=a,f.safeMixin(this,a),l=a["class"]||a.className||e.className,this._sort=a.sort||[],delete this.sort):this._sort=[];this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=e.id=e.id||this.id||"dgrid_"+t++;this.buildRendering();l&&b.call(this,l);this.postCreate();delete this.srcNodeRef;
this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this,c,e,f,l;l=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";d(a,"[role=grid].ui-widget.dgrid.dgrid-"+this.listType);c=this.headerNode=d(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?"":".dgrid-header-hidden"));(m("quirks")||8>m("ie"))&&d(a,"div.dgrid-spacer");e=this.bodyNode=d(a,"div.dgrid-scroller");
e.tabIndex=-1;this.headerScrollNode=d(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");f=this.footerNode=d("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));d(a,f);l&&(a.className+=" dgrid-rtl"+(m("webkit")?"":" dgrid-rtl-nonwebkit"));n(e,"scroll",function(d){b.showHeader&&(c.scrollLeft=d.scrollLeft||e.scrollLeft);d.stopPropagation();n.emit(a,"scroll",{scrollTarget:e})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=d(this.bodyNode,"div.dgrid-content.ui-widget-content");
this._listeners.push(this._resizeHandle=n(window,"resize",k.throttleDelayed(x,this)))},postCreate:m("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var b=this.bodyNode,c=this.headerNode,d=this.footerNode,e=c.offsetHeight,f=this.showFooter?d.offsetHeight:0,l=m("quirks")||7>m("ie");this.headerScrollNode.style.height=
b.style.marginTop=e+"px";b.style.marginBottom=f+"px";l&&(b.style.height="",b.style.height=Math.max(this.domNode.offsetHeight-e-f,0)+"px",f&&(d.style.bottom="1px",setTimeout(function(){d.style.bottom=""},0)));a||(a=m("dom-scrollbar-width"),q=m("dom-scrollbar-height"),m("ie")&&(a++,q++),k.addCssRule(".dgrid-scrollbar-width","width: "+a+"px"),k.addCssRule(".dgrid-scrollbar-height","height: "+q+"px"),17==a||l||(k.addCssRule(".dgrid-header","right: "+a+"px"),k.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header",
"left: "+a+"px")));l&&(c.style.width=b.clientWidth+"px",setTimeout(function(){c.scrollLeft=b.scrollLeft},0))},addCssRule:function(a,b){var c=k.addCssRule(a,b);this.cleanAddedRules&&this._listeners.push(c);return c},on:function(a,b){var c=n(this.domNode,a,b);m("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){var a=this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var c=document.getElementById(b);c&&this.removeRow(c,!0)}for(b=0;b<a.length;b++)(c=
a[b])&&c.cancel();this.observers=[];this._numObservers=0;this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this.cleanup();d(this.domNode,"!");this.inherited(arguments)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,c,e,f){if(b){var l=this.insertRow(a,b,c,e,f);d(l,".ui-state-highlight");setTimeout(function(){d(l,
"!ui-state-highlight")},250);return l}},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(this.maintainOddEven&&-1<(a.className+" ").indexOf("dgrid-row ")&&d(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++);while((a=a.nextSibling)&&a.rowIndex!=b)}},renderArray:function(a,b,c){function d(a){v=l.insertRow(a,r,null,k++,c);v.observerIndex=t;return v}function e(a){"undefined"!==typeof t&&(p[t].cancel(),p[t]=0,l._numObservers--);
if(a)throw a;}function f(a){(q=b?b.parentNode:l.contentNode)&&q.parentNode&&(q!==l.contentNode||a.length)?(q.insertBefore(r,b||null),(v=a[a.length-1])&&l.adjustRowIndices(v)):p[t]&&e();return g=a}c=c||{};var l=this,k=c.start||0,p=this.observers,m,g,q,t;b||(this._lastCollection=a);a.observe&&(l._numObservers++,t=p.push(a.observe(function(a,d,e){var f,k,p;-1<d&&g[d]&&(m=g.splice(d,1)[0],m.parentNode==q&&((f=m.nextSibling)&&d!=e&&f.rowIndex--,l.removeRow(m)),l._processScroll&&l._processScroll());if(-1<
e){if(g.length){if(k=g[e],!k&&(k=g[e-1]))k=(k.connected||k).nextSibling}else k=l._getFirstRowSibling&&l._getFirstRowSibling(q);p=b&&b.parentNode||k&&k.parentNode||l.contentNode;if(m=l.newRow(a,p,k,c.start+e,c))if(m.observerIndex=t,g.splice(e,0,m),!f||e<d)f=(f=m.previousSibling)&&f.rowIndex+1!=m.rowIndex&&0!=m.rowIndex?f:m;c.count++}d!=e&&f&&l.adjustRowIndices(f);l._onNotification(g,a,d,e)},!0))-1);var r=document.createDocumentFragment(),v;if(a.map){if(g=a.map(d,console.error),g.then)return g.then(f,
e)}else{g=[];for(var n=0,u=a.length;n<u;n++)g[n]=d(a[n])}return f(g)},_onNotification:function(a,b,c,d){},renderHeader:function(){},_autoId:0,insertRow:function(a,b,c,d,e){var f=e.parentId,f=this.id+"-row-"+(f?f+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),l=document.getElementById(f),k=l&&l.previousSibling;l&&this.removeRow(l);l=this.renderRow(a,e);l.className=(l.className||"")+" ui-state-default dgrid-row "+(1==d%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[l.id=
f]=a;b.insertBefore(l,c||null);k&&this.adjustRowIndices(k);l.rowIndex=d;return l},renderRow:function(a,b){return d("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||d(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var c=a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):
(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var e,f;f=e=a.element;b=b||1;do if(a=e[0>b?"previousSibling":"nextSibling"]){do if((e=a)&&-1<(e.className+" ").indexOf(c+" ")){f=e;b+=0>b?1:-1;break}while(a=(!d||!e.hidden)&&e[0>b?"lastChild":"firstChild"])}else if(e=e.parentNode,e===this.bodyNode||e===this.headerNode)break;while(b);return f},up:function(a,b,c){a.element||(a=
this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:m("touch")?function(a){return this.useTouchScroll?this.inherited(arguments):u.call(this,a)}:u,getScrollPosition:m("touch")?function(){return this.useTouchScroll?this.inherited(arguments):r.call(this)}:r,get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);if("function"===typeof this[b])return this[b].apply(this,
[].slice.call(arguments,1));m("dojo-built")||"function"!==typeof this[b+"Attr"]||console.warn("dgrid: Use "+b+" instead of "+b+"Attr for getting "+a);return this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):(m("dojo-built")||"function"!==typeof this[c+"Attr"]||console.warn("dgrid: Use "+c+" instead of "+c+"Attr for setting "+a),this[a]=b);return this},
_getClass:p,_setClass:b,_getClassName:p,_setClassName:b,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();this._lastCollection&&(a.length&&("string"!=typeof a&&(b=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(c,d){var e=c[a],f=d[a];void 0===e&&(e="");void 0===f&&(f="");return e==f?0:e>f==!b?1:-1})),this.renderArray(this._lastCollection))},sort:function(a,b){g.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4");
this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;d(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(a){g.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;d(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})});
(function(g){var f,n=/[-+,> ]/;g([],f=function(m,k){function e(f){function k(){v&&t&&v!=t&&(t==f&&(g||(g=n.test(z)&&m.createDocumentFragment()))||t).insertBefore(v,q||null)}for(var g,a,q,t,v,x=arguments,C=x[0],y=0;y<x.length;y++){var z=x[y];if("object"==typeof z){a=!1;if(z instanceof Array){v=m.createDocumentFragment();for(var D=0;D<z.length;D++)v.appendChild(e(z[D]));z=v}if(z.nodeType)v=z,k(),t=z,q=0;else for(D in z)v[D]=z[D]}else if(a)a=!1,v.appendChild(m.createTextNode(z));else{1>y&&(f=null);a=
!0;if(C=z.replace(l,function(a,l,g,n,u,C){l&&(k(),"-"==l||"+"==l?(t=(q=v||t).parentNode,v=null,"+"==l&&(q=q.nextSibling)):("<"==l?t=v=(v||t).parentNode:(","==l?t=f:v&&(t=v),v=null),q=0),v&&(t=v));if((a=!g&&n)||!v&&(g||u))"$"==a?(a=x[++y],t.appendChild(m.createTextNode(a))):(a=a||e.defaultTag,(l=b&&x[y+1]&&x[y+1].name)&&(a="<"+a+' name="'+l+'">'),v=c&&~(d=a.indexOf("|"))?m.createElementNS(c[a.slice(0,d)],a.slice(d+1)):m.createElement(a));if(g)if("$"==n&&(n=x[++y]),"#"==g)v.id=n;else if(l=(a=v.className)&&
(" "+a+" ").replace(" "+n+" "," "),"."==g)v.className=a?(l+n).substring(1):n;else if("!"==z){var D;b?e("div",v,"<").innerHTML="":(D=v.parentNode)&&D.removeChild(v)}else l=l.substring(1,l.length-1),l!=a&&(v.className=l);u&&("$"==C&&(C=x[++y]),"style"==u?v.style.cssText=C:(g="!"==u.charAt(0)?(u=u.substring(1))&&"removeAttribute":"setAttribute",C=""===C?u:C,c&&~(d=u.indexOf("|"))?v[g+"NS"](c[u.slice(0,d)],u.slice(d+1),C):v[g](u,C)));return""}))throw new SyntaxError("Unexpected char "+C+" in "+z);k();
t=C=v||t}}f&&g&&f.appendChild(g);return C}n=k||n;var l=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,d,c=!1;m=m||document;var b="object"==typeof m.createElement;e.addNamespace=function(b,d){m.createElementNS?(c||(c={}))[b]=d:m.namespaces.add(b,d)};e.defaultTag="div";e.forDocument=f;return e})})(function(g,f,n){n=n||f;"function"===typeof define?define([],function(){return n()}):"undefined"==typeof window?require("./node-html")(module,n):put=n()});
define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),function(g,f,n,m,k,e,l){function d(b,c){c&&c.nodeType&&b.appendChild(c)}function c(b,c,a,d){if(this.formatter){d=this.formatter;var e=this.grid.formatterScope;a.innerHTML="string"===typeof d&&e?e[d](c,b):d(c,b)}else null!=c&&a.appendChild(document.createTextNode(c))}var b=8>m("ie")&&!m("quirks"),p=/[^\._a-zA-Z0-9-]/g;f=f(e,{columns:null,cellNavigation:!0,tabableHeader:!0,
showHeader:!0,column:function(b){return"string"==typeof b?this.columns[b]:this.cell(b).column},listType:"grid",cell:function(b,c){if(b.column&&b.element)return b;b.target&&b.target.nodeType&&(b=b.target);var a;if(b.nodeType){do{if(this._rowIdToObject[b.id])break;var d=b.columnId;if(d){c=d;a=b;break}b=b.parentNode}while(b&&b!=this.domNode)}if(!a&&"undefined"!=typeof c){var e=this.row(b);if(d=e&&e.element)for(var d=d.getElementsByTagName("td"),f=0;f<d.length;f++)if(d[f].columnId==c){a=d[f];break}}if(null!=
b)return{row:e||this.row(b),column:c&&this.column(c),element:a}},createRowCells:function(c,d,a){var e=k("table.dgrid-row-table[role=presentation]"),f=9>m("ie")||m("quirks")?k(e,"tbody"):e,l,g,n,y,z,D,F,H,M,I;a=a||this.subRows;g=0;for(n=a.length;g<n;g++)for(D=a[g],l=k(f,"tr"),D.className&&k(l,"."+D.className),y=0,z=D.length;y<z;y++){F=D[y];H=F.id;M=F.className||F.field&&"field-"+F.field;M=k(c+(".dgrid-cell.dgrid-cell-padding"+(H?".dgrid-column-"+H:"")+(M?"."+M:"")).replace(p,"-")+"[role="+("th"===
c?"columnheader":"gridcell")+"]");M.columnId=H;b?(H=k(M,"!dgrid-cell-padding div.dgrid-cell-padding"),M.contents=H):H=M;if(I=F.colSpan)M.colSpan=I;if(I=F.rowSpan)M.rowSpan=I;d(H,F);l.appendChild(M)}return e},left:function(b,c){b.element||(b=this.cell(b));return this.cell(this._move(b,-(c||1),"dgrid-cell"))},right:function(b,c){b.element||(b=this.cell(b));return this.cell(this._move(b,c||1,"dgrid-cell"))},renderRow:function(b,e){var a=this.createRowCells("td",function(a,f){var l=b;f.get?l=f.get(b):
"field"in f&&"_item"!=f.field&&(l=l[f.field]);f.renderCell?d(a,f.renderCell(b,l,a,e)):c.call(f,b,l,a,e)},e&&e.subRows);return k("div[role=row]>",a)},renderHeader:function(){var c=this,e=this.headerNode,a=e.childNodes.length;for(e.setAttribute("role","row");a--;)k(e.childNodes[a],"!");a=this.createRowCells("th",function(a,c){var e=c.headerNode=a;b&&(a=a.parentNode);var f=c.field;f&&(a.field=f);c.renderHeaderCell?d(e,c.renderHeaderCell(e)):("label"in c||c.field)&&e.appendChild(document.createTextNode("label"in
c?c.label:c.field));!1!==c.sortable&&f&&"_item"!=f&&(a.sortable=!0,a.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[a.id=this.id+"-header"]=this.columns;e.appendChild(a);this._sortListener&&this._sortListener.remove();this._sortListener=n(a,"click,keydown",function(a){if("click"==a.type||32==a.keyCode||!m("opera")&&13==a.keyCode){var b=a.target,d,f,l;do if(b.sortable){l=[{attribute:d=b.field||b.columnId,descending:(f=c._sort[0])&&f.attribute==d&&!f.descending}];
d={bubbles:!0,cancelable:!0,grid:c,parentType:a.type,sort:l};n.emit(a.target,"dgrid-sort",d)&&(c._sortNode=b,c.set("sort",l));break}while((b=b.parentNode)&&b!=e)}})},resize:function(){var b=this.headerNode.firstChild,c=this.contentNode,a;this.inherited(arguments);if(!m("ie")||7<m("ie")&&!m("quirks"))c.style.width="",c&&b&&(a=b.offsetWidth)!=c.offsetWidth&&(c.style.width=a+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(b,
c){this.inherited(arguments);this.updateSortArrow(this._sort)},updateSortArrow:function(b,c){this._lastSortedArrow&&(k(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),k(this._lastSortedArrow,"!"),delete this._lastSortedArrow);c&&(this._sort=b);if(b[0]){var a=b[0].attribute,d=b[0].descending,e=this._sortNode,f,l,p;delete this._sortNode;if(!e)for(p in f=this.columns,f)if(l=f[p],l.field==a){e=l.headerNode;break}e&&(e=e.contents||e,this._lastSortedArrow=k(e.firstChild,"-div.dgrid-sort-arrow.ui-icon[role=presentation]"),
this._lastSortedArrow.innerHTML="&nbsp;",k(e,d?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(b,c){return this.addCssRule("#"+l.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+b,c)},_configColumns:function(b,c){var a=[],d=c instanceof Array;l.each(c,function(e,f){"string"==typeof e&&(c[f]=e={label:e});d||e.field||(e.field=f);f=e.id=e.id||(isNaN(f)?f:b+f);d&&(this.columns[f]=e);this._configColumn&&this._configColumn(e,f,c,b);e.grid=this;"function"===typeof e.init&&
e.init();a.push(e)},this);return d?c:a},_destroyColumns:function(){var b=this.subRows,c=b&&b.length,a,d,e,f;this.cleanup();for(a=0;a<c;a++)for(d=0,f=b[a].length;d<f;d++)e=b[a][d],"function"===typeof e.destroy&&e.destroy()},configStructure:function(){var b=this.subRows,c=this._columns=this.columns;this.columns=!c||c instanceof Array?{}:c;if(b)for(c=0;c<b.length;c++)b[c]=this._configColumns(c+"-",b[c]);else this.subRows=[this._configColumns("",c)]},_getColumns:function(){return this._columns||this.columns},
_setColumns:function(b){this._destroyColumns();this.subRows=null;this.columns=b;this._updateColumns()},_setSubRows:function(b){this._destroyColumns();this.subRows=b;this._updateColumns()},setColumns:function(b){g.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4");this.set("columns",b)},setSubRows:function(b){g.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 0.4");this.set("subRows",b)},_updateColumns:function(){this.configStructure();this.renderHeader();
this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});f.appendIfNode=d;f.defaultRenderCell=c;return f});define(["dojo/_base/declare","./Grid","./OnDemandList"],function(g,f,n){return g([f,n],{})});define(["dojo/_base/lang"],function(g){return g.getObject("dojox.charting.themes",!0)});
define(["dojo/_base/lang","dojo/_base/array","./_base"],function(g,f,n){function m(c,b,d){var e=new n.Palette;e.colors=[];f.forEach(c.colors,function(c){var a="dg"==b?c.g+d:c.g,f="db"==b?c.b+d:c.b,l="da"==b?c.a+d:c.a;e.colors.push(new n.Color({r:Math.min(255,Math.max(0,"dr"==b?c.r+d:c.r)),g:Math.min(255,Math.max(0,a)),b:Math.min(255,Math.max(0,f)),a:Math.min(1,Math.max(0,l))}))});return e}function k(c,b,d){var e=new n.Palette;e.colors=[];f.forEach(c.colors,function(c){c=c.toCmy();var a="dm"==b?c.m+
d:c.m,f="dy"==b?c.y+d:c.y;e.colors.push(n.fromCmy(Math.min(100,Math.max(0,"dc"==b?c.c+d:c.c)),Math.min(100,Math.max(0,a)),Math.min(100,Math.max(0,f))))});return e}function e(c,b,d){var e=new n.Palette;e.colors=[];f.forEach(c.colors,function(c){c=c.toCmyk();var a="dm"==b?c.m+d:c.m,f="dy"==b?c.y+d:c.y,l="dk"==b?c.b+d:c.b;e.colors.push(n.fromCmyk(Math.min(100,Math.max(0,"dc"==b?c.c+d:c.c)),Math.min(100,Math.max(0,a)),Math.min(100,Math.max(0,f)),Math.min(100,Math.max(0,l))))});return e}function l(c,b,
d){var e=new n.Palette;e.colors=[];f.forEach(c.colors,function(c){c=c.toHsl();var a="dl"==b?c.l+d:c.l;e.colors.push(n.fromHsl(("dh"==b?c.h+d:c.h)%360,Math.min(100,Math.max(0,"ds"==b?c.s+d:c.s)),Math.min(100,Math.max(0,a))))});return e}function d(c,b,d){var e=new n.Palette;e.colors=[];f.forEach(c.colors,function(c){c=c.toHsv();var a="dv"==b?c.v+d:c.v;e.colors.push(n.fromHsv(("dh"==b?c.h+d:c.h)%360,Math.min(100,Math.max(0,"ds"==b?c.s+d:c.s)),Math.min(100,Math.max(0,a))))});return e}n.Palette=function(c){this.colors=
[];c instanceof n.Palette?this.colors=c.colors.slice(0):c instanceof n.Color?this.colors=[null,null,c,null,null]:g.isArray(c)?this.colors=f.map(c.slice(0),function(b){return g.isString(b)?new n.Color(b):b}):g.isString(c)&&(this.colors=[null,null,new n.Color(c),null,null])};g.extend(n.Palette,{transform:function(c){var b=m;if(c.use){var f=c.use.toLowerCase();0==f.indexOf("hs")?b="l"==f.charAt(2)?l:d:0==f.indexOf("cmy")&&(b="k"==f.charAt(3)?e:k)}else if("dc"in c||"dm"in c||"dy"in c)b="dk"in c?e:k;else if("dh"in
c||"ds"in c)b="dv"in c?d:l;var f=this,g;for(g in c)"use"!=g&&(f=b(f,g,c[g]));return f},clone:function(){return new n.Palette(this)}});g.mixin(n.Palette,{generators:{analogous:function(c){var b=c.high||60,d=c.low||18;c=(g.isString(c.base)?new n.Color(c.base):c.base).toHsv();var b=[(c.h+d+360)%360,(c.h+Math.round(d/2)+360)%360,c.h,(c.h-Math.round(b/2)+360)%360,(c.h-b+360)%360],d=Math.max(10,95>=c.s?c.s+5:100-(c.s-95)),e=1<c.s?c.s-1:21-c.s,l=92<=c.v?c.v-9:Math.max(c.v+9,20),a=90>=c.v?Math.max(c.v+5,
20):95+Math.ceil((c.v-90)/2),k=[d,e,c.s,d,d],m=[l,a,c.v,l,a];return new n.Palette(f.map(b,function(a,b){return n.fromHsv(a,k[b],m[b])}))},monochromatic:function(c){c=g.isString(c.base)?new n.Color(c.base):c.base;var b=c.toHsv(),d=9<b.s-30?b.s-30:b.s+30,e=b.s,f=20<b.v-20?b.v-20:b.v+60,a=20<b.v-50?b.v-50:b.v+30;return new n.Palette([n.fromHsv(b.h,d,100-0.8*(100-b.v)),n.fromHsv(b.h,e,a),c,n.fromHsv(b.h,d,a),n.fromHsv(b.h,e,f)])},triadic:function(c){c=g.isString(c.base)?new n.Color(c.base):c.base;var b=
c.toHsv(),d=(b.h-157+360)%360,e=90<b.s?b.s-10:b.s+10,f=95<b.s?b.s-5:b.s+5,a=20<b.v-20?b.v-20:b.v+20,l=20<b.v-30?b.v-30:b.v+30,k=70<b.v-30?b.v-30:b.v+30;return new n.Palette([n.fromHsv((b.h+57+360)%360,20<b.s?b.s-10:b.s+10,b.v),n.fromHsv(b.h,e,l),c,n.fromHsv(d,e,a),n.fromHsv(d,f,k)])},complementary:function(c){c=g.isString(c.base)?new n.Color(c.base):c.base;var b=c.toHsv(),d=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,e=Math.max(b.s-10,0),f=100-0.9*(100-b.s),a=Math.min(100,b.s+20),l=Math.min(100,
b.v+30),k=20<b.v?b.v-30:b.v+30;return new n.Palette([n.fromHsv(b.h,e,l),n.fromHsv(b.h,f,k),c,n.fromHsv(d,a,k),n.fromHsv(d,b.s,b.v)])},splitComplementary:function(c){var b=g.isString(c.base)?new n.Color(c.base):c.base,d=c.da||30;c=b.toHsv();var e=360>2*c.h+137?2*c.h+137:Math.floor(c.h/2)-137,f=(e-d+360)%360,d=(e+d)%360,e=Math.max(c.s-10,0),a=100-0.9*(100-c.s),l=Math.min(100,c.s+20),k=Math.min(100,c.v+30),m=20<c.v?c.v-30:c.v+30;return new n.Palette([n.fromHsv(f,e,k),n.fromHsv(f,a,m),b,n.fromHsv(d,l,
m),n.fromHsv(d,c.s,c.v)])},compound:function(c){c=g.isString(c.base)?new n.Color(c.base):c.base;var b=c.toHsv(),d=360>2*b.h+18?2*b.h+18:Math.floor(b.h/2)-18,e=360>2*b.h+120?2*b.h+120:Math.floor(b.h/2)-120,f=360>2*b.h+99?2*b.h+99:Math.floor(b.h/2)-99,a=10<b.s-40?b.s-40:b.s+40,l=80<b.s-10?b.s-10:b.s+10,k=10<b.s-25?b.s-25:b.s+25,m=10<b.v-40?b.v-40:b.v+40,x=80<b.v-20?b.v-20:b.v+20,b=Math.max(b.v,20);return new n.Palette([n.fromHsv(d,a,m),n.fromHsv(d,l,x),c,n.fromHsv(e,k,b),n.fromHsv(f,l,x)])},shades:function(c){c=
g.isString(c.base)?new n.Color(c.base):c.base;var b=c.toHsv(),d=100==b.s&&0==b.v?0:b.s,e=20<b.v-50?b.v-50:b.v+30,f=20<=b.v-25?b.v-25:b.v+55,a=20<=b.v-75?b.v-75:b.v+5,l=Math.max(b.v-10,20);return new n.Palette([new n.fromHsv(b.h,d,e),new n.fromHsv(b.h,d,f),c,new n.fromHsv(b.h,d,a),new n.fromHsv(b.h,d,l)])}},generate:function(c,b){if(g.isFunction(b))return b({base:c});if(n.Palette.generators[b])return n.Palette.generators[b]({base:c});throw Error("dojox.color.Palette.generate: the specified generator ('"+
b+"') does not exist.");}});return n.Palette});
define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(g,f,n,m){var k={};f.setObject("dojo.colors",k);var e=function(d,c,b){0>b&&++b;1<b&&--b;var e=6*b;return 1>e?d+(c-d)*e:1>2*b?c:2>3*b?d+(c-d)*(2/3-b)*6:d};g.colorFromRgb=n.fromRgb=function(d,c){var b=d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(b){var f=b[2].split(/\s*,\s*/),l=f.length,b=b[1];if("rgb"==b&&3==l||"rgba"==b&&4==l)return b=f[0],"%"==b.charAt(b.length-1)?(b=m.map(f,function(a){return 2.56*
parseFloat(a)}),4==l&&(b[3]=f[3]),n.fromArray(b,c)):n.fromArray(f,c);if("hsl"==b&&3==l||"hsla"==b&&4==l){var b=(parseFloat(f[0])%360+360)%360/360,k=parseFloat(f[1])/100,a=parseFloat(f[2])/100,k=0.5>=a?a*(k+1):a+k-a*k,a=2*a-k,b=[256*e(a,k,b+1/3),256*e(a,k,b),256*e(a,k,b-1/3),1];4==l&&(b[3]=f[3]);return n.fromArray(b,c)}}return null};var l=function(d,c,b){d=Number(d);return isNaN(d)?b:d<c?c:d>b?b:d};n.prototype.sanitize=function(){this.r=Math.round(l(this.r,0,255));this.g=Math.round(l(this.g,0,255));
this.b=Math.round(l(this.b,0,255));this.a=l(this.a,0,1);return this};k.makeGrey=n.makeGrey=function(d,c){return n.fromArray([d,d,d,c])};f.mixin(n.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],
cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,
0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],
lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,
0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,
250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return n});
define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(g,f,n,m){g=f.getObject("color",!0,g);g.Color=n;g.blend=n.blendColors;g.fromRgb=n.fromRgb;g.fromHex=n.fromHex;g.fromArray=n.fromArray;g.fromString=n.fromString;g.greyscale=m.makeGrey;f.mixin(g,{fromCmy:function(k,e,l){f.isArray(k)?(e=k[1],l=k[2],k=k[0]):f.isObject(k)&&(e=k.m,l=k.y,k=k.c);e=1-e/100;l=1-l/100;return new n({r:Math.round(255*(1-k/100)),g:Math.round(255*e),b:Math.round(255*l)})},fromCmyk:function(k,e,l,d){f.isArray(k)?
(e=k[1],l=k[2],d=k[3],k=k[0]):f.isObject(k)&&(e=k.m,l=k.y,d=k.b,k=k.c);e/=100;l/=100;d/=100;k=1-Math.min(1,k/100*(1-d)+d);e=1-Math.min(1,e*(1-d)+d);l=1-Math.min(1,l*(1-d)+d);return new n({r:Math.round(255*k),g:Math.round(255*e),b:Math.round(255*l)})},fromHsl:function(k,e,l){f.isArray(k)?(e=k[1],l=k[2],k=k[0]):f.isObject(k)&&(e=k.s,l=k.l,k=k.h);e/=100;for(l/=100;0>k;)k+=360;for(;360<=k;)k-=360;var d,c;120>k?(d=(120-k)/60,c=k/60,k=0):240>k?(d=0,c=(240-k)/60,k=(k-120)/60):(d=(k-240)/60,c=0,k=(360-k)/
60);d=2*e*Math.min(d,1)+(1-e);c=2*e*Math.min(c,1)+(1-e);k=2*e*Math.min(k,1)+(1-e);0.5>l?(d*=l,c*=l,k*=l):(d=(1-l)*d+2*l-1,c=(1-l)*c+2*l-1,k=(1-l)*k+2*l-1);return new n({r:Math.round(255*d),g:Math.round(255*c),b:Math.round(255*k)})}});g.fromHsv=function(k,e,l){f.isArray(k)?(e=k[1],l=k[2],k=k[0]):f.isObject(k)&&(e=k.s,l=k.v,k=k.h);360==k&&(k=0);e/=100;l/=100;var d,c,b;if(0==e)c=b=d=l;else{var m=k/60;k=Math.floor(m);var g=m-k,m=l*(1-e),u=l*(1-e*g);e=l*(1-e*(1-g));switch(k){case 0:d=l;c=e;b=m;break;case 1:d=
u;c=l;b=m;break;case 2:d=m;c=l;b=e;break;case 3:d=m;c=u;b=l;break;case 4:d=e;c=m;b=l;break;case 5:d=l,c=m,b=u}}return new n({r:Math.round(255*d),g:Math.round(255*c),b:Math.round(255*b)})};f.extend(n,{toCmy:function(){var f=1-this.g/255,e=1-this.b/255;return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*f),y:Math.round(100*e)}},toCmyk:function(){var f,e,l,d=this.r/255;f=this.g/255;e=this.b/255;l=Math.min(1-d,1-f,1-e);f=(1-f-l)/(1-l);e=(1-e-l)/(1-l);return{c:Math.round((1-d-l)/(1-l)*100),m:Math.round(100*
f),y:Math.round(100*e),b:Math.round(100*l)}},toHsl:function(){var f=this.r/255,e=this.g/255,l=this.b/255,d=Math.min(f,l,e),c=Math.max(f,e,l),b=c-d,m=0,g=0,d=(d+c)/2;0<d&&1>d&&(g=b/(0.5>d?2*d:2-2*d));0<b&&(c==f&&c!=e&&(m+=(e-l)/b),c==e&&c!=l&&(m+=2+(l-f)/b),c==l&&c!=f&&(m+=4+(f-e)/b),m*=60);return{h:m,s:Math.round(100*g),l:Math.round(100*d)}},toHsv:function(){var f=this.r/255,e=this.g/255,l=this.b/255,d=Math.min(f,l,e),c=Math.max(f,e,l),d=c-d,b=null,m=0==c?0:d/c;0==m?b=0:(b=f==c?60*(e-l)/d:e==c?120+
60*(l-f)/d:240+60*(f-e)/d,0>b&&(b+=360));return{h:b,s:Math.round(100*m),v:Math.round(100*c)}}});return g});
define(["./_base","dojo/_base/lang"],function(g,f){var n=g.matrix={},m={};n._degToRad=function(f){return m[f]||(m[f]=Math.PI*f/180)};n._radToDeg=function(f){return f/Math.PI*180};n.Matrix2D=function(k){if(k)if("number"==typeof k)this.xx=this.yy=k;else if(k instanceof Array){if(0<k.length){for(var e=n.normalize(k[0]),l=1;l<k.length;++l){var d=e,c=n.normalize(k[l]),e=new n.Matrix2D;e.xx=d.xx*c.xx+d.xy*c.yx;e.xy=d.xx*c.xy+d.xy*c.yy;e.yx=d.yx*c.xx+d.yy*c.yx;e.yy=d.yx*c.xy+d.yy*c.yy;e.dx=d.xx*c.dx+d.xy*
c.dy+d.dx;e.dy=d.yx*c.dx+d.yy*c.dy+d.dy}f.mixin(this,e)}}else f.mixin(this,k)};f.extend(n.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});f.mixin(n,{identity:new n.Matrix2D,flipX:new n.Matrix2D({xx:-1}),flipY:new n.Matrix2D({yy:-1}),flipXY:new n.Matrix2D({xx:-1,yy:-1}),translate:function(f,e){return 1<arguments.length?new n.Matrix2D({dx:f,dy:e}):new n.Matrix2D({dx:f.x,dy:f.y})},scale:function(f,e){return 1<arguments.length?new n.Matrix2D({xx:f,yy:e}):"number"==typeof f?new n.Matrix2D({xx:f,yy:f}):new n.Matrix2D({xx:f.x,
yy:f.y})},rotate:function(f){var e=Math.cos(f);f=Math.sin(f);return new n.Matrix2D({xx:e,xy:-f,yx:f,yy:e})},rotateg:function(f){return n.rotate(n._degToRad(f))},skewX:function(f){return new n.Matrix2D({xy:Math.tan(f)})},skewXg:function(f){return n.skewX(n._degToRad(f))},skewY:function(f){return new n.Matrix2D({yx:Math.tan(f)})},skewYg:function(f){return n.skewY(n._degToRad(f))},reflect:function(f,e){1==arguments.length&&(e=f.y,f=f.x);var l=f*f,d=e*e,c=l+d,b=2*f*e/c;return new n.Matrix2D({xx:2*l/c-
1,xy:b,yx:b,yy:2*d/c-1})},project:function(f,e){1==arguments.length&&(e=f.y,f=f.x);var l=f*f,d=e*e,c=l+d,b=f*e/c;return new n.Matrix2D({xx:l/c,xy:b,yx:b,yy:d/c})},normalize:function(f){return f instanceof n.Matrix2D?f:new n.Matrix2D(f)},isIdentity:function(f){return 1==f.xx&&0==f.xy&&0==f.yx&&1==f.yy&&0==f.dx&&0==f.dy},clone:function(f){var e=new n.Matrix2D,l;for(l in f)"number"==typeof f[l]&&"number"==typeof e[l]&&e[l]!=f[l]&&(e[l]=f[l]);return e},invert:function(f){f=n.normalize(f);var e=f.xx*f.yy-
f.xy*f.yx;return f=new n.Matrix2D({xx:f.yy/e,xy:-f.xy/e,yx:-f.yx/e,yy:f.xx/e,dx:(f.xy*f.dy-f.yy*f.dx)/e,dy:(f.yx*f.dx-f.xx*f.dy)/e})},_multiplyPoint:function(f,e,l){return{x:f.xx*e+f.xy*l+f.dx,y:f.yx*e+f.yy*l+f.dy}},multiplyPoint:function(f,e,l){f=n.normalize(f);return"number"==typeof e&&"number"==typeof l?n._multiplyPoint(f,e,l):n._multiplyPoint(f,e.x,e.y)},multiplyRectangle:function(f,e){var l=n.normalize(f);e=e||{x:0,y:0,width:0,height:0};if(n.isIdentity(l))return{x:e.x,y:e.y,width:e.width,height:e.height};
var d=n.multiplyPoint(l,e.x,e.y),c=n.multiplyPoint(l,e.x,e.y+e.height),b=n.multiplyPoint(l,e.x+e.width,e.y),m=n.multiplyPoint(l,e.x+e.width,e.y+e.height),l=Math.min(d.x,c.x,b.x,m.x),g=Math.min(d.y,c.y,b.y,m.y),u=Math.max(d.x,c.x,b.x,m.x),d=Math.max(d.y,c.y,b.y,m.y);return{x:l,y:g,width:u-l,height:d-g}},multiply:function(f){for(var e=n.normalize(f),l=1;l<arguments.length;++l){var d=e,c=n.normalize(arguments[l]),e=new n.Matrix2D;e.xx=d.xx*c.xx+d.xy*c.yx;e.xy=d.xx*c.xy+d.xy*c.yy;e.yx=d.yx*c.xx+d.yy*
c.yx;e.yy=d.yx*c.xy+d.yy*c.yy;e.dx=d.xx*c.dx+d.xy*c.dy+d.dx;e.dy=d.yx*c.dx+d.yy*c.dy+d.dy}return e},_sandwich:function(f,e,l){return n.multiply(n.translate(e,l),f,n.translate(-e,-l))},scaleAt:function(f,e,l,d){switch(arguments.length){case 4:return n._sandwich(n.scale(f,e),l,d);case 3:return"number"==typeof l?n._sandwich(n.scale(f),e,l):n._sandwich(n.scale(f,e),l.x,l.y)}return n._sandwich(n.scale(f),e.x,e.y)},rotateAt:function(f,e,l){return 2<arguments.length?n._sandwich(n.rotate(f),e,l):n._sandwich(n.rotate(f),
e.x,e.y)},rotategAt:function(f,e,l){return 2<arguments.length?n._sandwich(n.rotateg(f),e,l):n._sandwich(n.rotateg(f),e.x,e.y)},skewXAt:function(f,e,l){return 2<arguments.length?n._sandwich(n.skewX(f),e,l):n._sandwich(n.skewX(f),e.x,e.y)},skewXgAt:function(f,e,l){return 2<arguments.length?n._sandwich(n.skewXg(f),e,l):n._sandwich(n.skewXg(f),e.x,e.y)},skewYAt:function(f,e,l){return 2<arguments.length?n._sandwich(n.skewY(f),e,l):n._sandwich(n.skewY(f),e.x,e.y)},skewYgAt:function(f,e,l){return 2<arguments.length?
n._sandwich(n.skewYg(f),e,l):n._sandwich(n.skewYg(f),e.x,e.y)}});g.Matrix2D=n.Matrix2D;return n});
define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(g,f,n,m,k,e,l,d,c){var b=f.getObject("dojox.gfx",!0),p=b._base={};b._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};b._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};b._removeClass=
function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};p._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;m("ie")&&(k.doc.documentElement.style.fontSize="100%");var c=d.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",
lineHeight:"1",overflow:"hidden"}},k.body());for(b in a)c.style.fontSize=b,a[b]=16*Math.round(12*c.offsetHeight/16)/12/1E3;k.body().removeChild(c);return a};var r=null;p._getCachedFontMeasurements=function(a){if(a||!r)r=p._getFontMeasurements();return r};var u=null,a={};p._getTextBox=function(b,e,f){var l,m,g=arguments.length,p;u||(u=d.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},k.body()));l=u;l.className="";m=l.style;m.borderWidth="0";m.margin="0";m.padding="0";m.outline="0";
if(1<g&&e)for(p in e)p in a||(m[p]=e[p]);2<g&&f&&(l.className=f);l.innerHTML=b;return l.getBoundingClientRect?(l=l.getBoundingClientRect(),{l:l.left,t:l.top,w:l.width||l.right-l.left,h:l.height||l.bottom-l.top}):c.getMarginBox(l)};p._computeTextLocation=function(a,b,c,d){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?0.75:1);return e};p._computeTextBoundingBox=function(a){if(!b._base._isRendered(a))return{x:0,y:0,width:0,height:0};
var c;c=a.getShape();var d=a.getFont()||b.defaultFont;a=a.getTextWidth();d=b.normalizedLength(d.size);c=p._computeTextLocation(c,a,d,!0);return{x:c.x,y:c.y,width:a,height:d}};p._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var q=0;p._getUniqueId=function(){var a;do a=g._scopeName+"xUnique"+ ++q;while(l.byId(a));return a};p._fixMsTouchAction=function(a){a=a.rawNode;"undefined"!=typeof a.style.msTouchAction&&(a.style.msTouchAction="none")};f.mixin(b,{defaultPath:{type:"path",
path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,
kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a=
{};return function(c){var d=a[c];if(d)return new d;d=a[c]=new Function;d.prototype=b["default"+c];return new d}}(),normalizeColor:function(a){return a instanceof n?a:new n(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return f.delegate(a);var d={};for(c in a)c in d||(d[c]=f.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);
else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var c=b.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){c.style=a[0];c.variant=a[1];c.weight=a[2];var d=a[3].indexOf("/");c.size=0>d?a[3]:a[3].substring(0,d);var e=4;0>d&&("/"==a[4]?e=6:"/"==a[4].charAt(0)&&(e=5));e<a.length&&(c.family=a.slice(e).join(" "))}return c},cm_in_pt:72/2.54,mm_in_pt:7.2/
2.54,px_in_pt:function(){return b._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*b.px_in_pt()},px2pt:function(a){return a/b.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var c=b.px_in_pt(),d=parseFloat(a);switch(a.slice(-2)){case "px":return d;case "pt":return d*c;case "in":return 72*d*c;case "pc":return 12*d*c;case "mm":return d*b.mm_in_pt*c;case "cm":return d*b.cm_in_pt*c}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,
pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var c="string"==typeof a?b[a]:a;c&&(e.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(a){b[a]=c[a]}),"string"==typeof a?b.renderer=a:e.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return b.renderer=b[a]&&b[a].Surface===b.Surface?a:null}))}});return b});
define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,f,n,m){function k(e,f){if(0>=e)return f[0].color;var d=f.length;if(1<=e)return f[d-1].color;for(var c=0;c<d;++c){var b=f[c];if(b.offset>=e)return c?(d=f[c-1],m.blendColors(new m(d.color),new m(b.color),(e-d.offset)/(b.offset-d.offset))):b.color}return f[d-1].color}g=g.gradutils={};g.getColor=function(e,f){var d;if(e){switch(e.type){case "linear":d=Math.atan2(e.y2-e.y1,e.x2-e.x1);d=n.rotate(-d);var c=n.project(e.x2-e.x1,
e.y2-e.y1),b=n.multiplyPoint(c,f),g=n.multiplyPoint(c,e.x1,e.y1),c=n.multiplyPoint(c,e.x2,e.y2),c=n.multiplyPoint(d,c.x-g.x,c.y-g.y).x;d=n.multiplyPoint(d,b.x-g.x,b.y-g.y).x/c;break;case "radial":d=f.x-e.cx,b=f.y-e.cy,d=Math.sqrt(d*d+b*b)/e.r}return k(d,e.colors)}return new m(e||[0,0,0,0])};g.reverse=function(e){if(e)switch(e.type){case "linear":case "radial":if(e=f.delegate(e),e.colors){for(var l=e.colors,d=l.length,c=0,b,k=e.colors=Array(l.length);c<d;++c)b=l[c],k[c]={offset:1-b.offset,color:b.color};
k.sort(function(b,c){return b.offset-c.offset})}}return e};return g});define(["dojo/_base/kernel"],function(g){return g.dojox});
define(["..","dojo/_base/lang"],function(g,f){var n=f.getObject("lang.utils",!0,g),m={},k=Object.prototype.toString,e=function(e){if(e)switch(k.call(e)){case "[object Array]":return e.slice(0);case "[object Object]":return f.delegate(e)}return e};f.mixin(n,{coerceType:function(e,d){switch(typeof e){case "number":return Number(eval("("+d+")"));case "string":return String(d);case "boolean":return Boolean(eval("("+d+")"))}return eval("("+d+")")},updateWithObject:function(f,d,c){if(!d)return f;for(var b in f)if(b in
d&&!(b in m)){var k=f[b];k&&"object"==typeof k?n.updateWithObject(k,d[b],c):f[b]=c?n.coerceType(k,d[b]):e(d[b])}return f},updateWithPattern:function(f,d,c,b){if(!d||!c)return f;for(var k in c)k in d&&!(k in m)&&(f[k]=b?n.coerceType(c[k],d[k]):e(d[k]));return f},merge:function(e,d){if(d){var c=k.call(e),b=k.call(d),m,g;switch(b){case "[object Array]":if(b==c){c=Array(Math.max(e.length,d.length));m=0;for(b=c.length;m<b;++m)c[m]=n.merge(e[m],d[m]);return c}return d.slice(0);case "[object Object]":if(b==
c&&e){c=f.delegate(e);for(m in d)m in e?(b=e[m],g=d[m],g!==b&&(c[m]=n.merge(b,g))):c[m]=f.clone(d[m]);return c}return f.clone(d)}}return d}});return n});
define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),function(g,f,n,m,k,e){var l=n("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(d){d=d||{};var c=l.defaultTheme;f.forEach("chart plotarea axis grid series marker indicator".split(" "),function(b){this[b]=g.delegate(c[b],d[b])},this);d.seriesThemes&&d.seriesThemes.length?(this.colors=null,this.seriesThemes=d.seriesThemes.slice(0)):
(this.seriesThemes=null,this.colors=(d.colors||l.defaultColors).slice(0));this.markerThemes=null;d.markerThemes&&d.markerThemes.length&&(this.markerThemes=d.markerThemes.slice(0));this.markers=d.markers?g.clone(d.markers):g.delegate(l.defaultMarkers);this.noGradConv=d.noGradConv;this.noRadialConv=d.noRadialConv;d.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var d=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,
series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});f.forEach("clone clear next skip addMixin post getTick".split(" "),function(c){this.hasOwnProperty(c)&&(d[c]=this[c])},this);return d},clear:function(){this._current=0},next:function(d,c,b){var e=k.merge,f;if(this.colors){f=g.delegate(this.series);var e=g.delegate(this.marker),
l=new m(this.colors[this._current%this.colors.length]),a;f.stroke&&f.stroke.color?(f.stroke=g.delegate(f.stroke),a=new m(f.stroke.color),f.stroke.color=new m(l),f.stroke.color.a=a.a):f.stroke={color:l};e.stroke&&e.stroke.color?(e.stroke=g.delegate(e.stroke),a=new m(e.stroke.color),e.stroke.color=new m(l),e.stroke.color.a=a.a):e.stroke={color:l};!f.fill||f.fill.type?f.fill=l:(a=new m(f.fill),f.fill=new m(l),f.fill.a=a.a);!e.fill||e.fill.type?e.fill=l:(a=new m(e.fill),e.fill=new m(l),e.fill.a=a.a)}else f=
this.seriesThemes?e(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,e=this.markerThemes?e(this.marker,this.markerThemes[this._current%this.markerThemes.length]):f;f={series:f,marker:e,symbol:e&&e.symbol||this._markers[this._current%this._markers.length]};++this._current;c&&(f=this.addMixin(f,d,c));b&&(f=this.post(f,d));return f},skip:function(){++this._current},addMixin:function(d,c,b,e){if(g.isArray(b))f.forEach(b,function(b){d=this.addMixin(d,c,b)},this);else{var l=
{};"color"in b&&("line"==c||"area"==c?(g.setObject("series.stroke.color",b.color,l),g.setObject("marker.stroke.color",b.color,l)):g.setObject("series.fill",b.color,l));f.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(c){var a="marker"+c.charAt(0).toUpperCase()+c.substr(1),d=a in b;c in b&&(g.setObject("series."+c,b[c],l),d||g.setObject("marker."+c,b[c],l));d&&g.setObject("marker."+c,b[a],l)});"marker"in b&&(l.symbol=b.marker,l.symbol=b.marker);d=k.merge(d,
l)}e&&(d=this.post(d,c));return d},post:function(d,c){var b=d.series.fill,e;return!this.noGradConv&&this.shapeSpaces[b.space]&&"linear"==b.type&&("bar"==c?e={x1:b.y1,y1:b.x1,x2:b.y2,y2:b.x2}:this.noRadialConv||"shape"!=b.space||"slice"!=c&&"circle"!=c||(e={type:"radial",cx:0,cy:0,r:100}),e)?k.merge(d,{series:{fill:e}}):d},getTick:function(d,c){var b=this.axis.tick,e=d+"Tick",f=k.merge;b?this.axis[e]&&(b=f(b,this.axis[e])):b=this.axis[e];c&&(b?c[e]&&(b=f(b,c[e])):b=c[e]);return b},inspectObjects:function(d){f.forEach("chart plotarea axis grid series marker indicator".split(" "),
function(c){d(this[c])},this);this.seriesThemes&&f.forEach(this.seriesThemes,d);this.markerThemes&&f.forEach(this.markerThemes,d)},reverseFills:function(){this.inspectObjects(function(d){d&&d.fill&&(d.fill=e.reverse(d.fill))})},addMarker:function(d,c){this.markers[d]=c;this._buildMarkerArray()},setMarkers:function(d){this.markers=d;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var d in this.markers)this._markers.push(this.markers[d])}});g.mixin(l,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",
SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",
position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,
color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},
markerShadow:null}}});return l});
define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(g,f,n,m,k,e){var l=f("dojox.charting.Theme",m,{});g.mixin(l,{defineColors:function(d){d=d||{};var c,b=[],f=d.num||5;if(d.colors){c=d.colors.length;for(var l=0;l<f;l++)b.push(d.colors[l%c]);return b}return d.hue?(b=d.saturation||100,c=((d.high||90)+(d.low||30))/2,e.generate(k.fromHsv(d.hue,b,c),"monochromatic").colors):d.generator?k.Palette.generate(d.base,
d.generator).colors:b},generateGradient:function(d,c,b){d=g.delegate(d);d.colors=[{offset:0,color:c},{offset:1,color:b}];return d},generateHslColor:function(d,c){d=new n(d);var b=d.toHsl(),b=k.fromHsl(b.h,b.s,c);b.a=d.a;return b},generateHslGradient:function(d,c,b,e){d=new n(d);var f=d.toHsl();b=k.fromHsl(f.h,f.s,b);e=k.fromHsl(f.h,f.s,e);b.a=e.a=d.a;return l.generateGradient(c,b,e)}});l.defaultMarkers=m.defaultMarkers;l.defaultColors=m.defaultColors;l.defaultTheme=m.defaultTheme;return l});
define({root:{"floatingmenu.tab.abbr":"Abbreviation","button.addabbr.tooltip":"insert abbreviation","button.abbr.tooltip":"format as abbreviation","newabbr.defaulttext":"Abbr"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define("aloha jquery aloha/plugin ui/ui ui/toggleButton ui/button ui/scopes ui/port-helper-attribute-field i18n!abbr/nls/i18n i18n!aloha/nls/i18n".split(" "),function(g,f,n,m,k,e,l,d,c,b){var p=window.GENTICS;return n.create("abbr",{config:["abbr"],init:function(){this.createButtons();this.subscribeEvents();this.bindInteractions()},createButtons:function(){var b=this;this._formatAbbrButton=m.adopt("formatAbbr",k,{tooltip:c.t("button.abbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",
click:function(){b.formatAbbr()}});this._insertAbbrButton=m.adopt("insertAbbr",e,{tooltip:c.t("button.addabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",click:function(){b.insertAbbr(!1)}});l.createScope("abbr","Aloha.continuoustext");this.abbrField=d({width:320,name:"abbrText",scope:"abbr"});this.remAbbrButton=m.adopt("removeAbbr",e,{tooltip:c.t("button.remabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr-rem",scope:"abbr",click:function(){b.removeAbbr()}})},bindInteractions:function(){var b=
this;this.abbrField.addListener("blur",function(a,c){""==this.getValue()&&b.removeAbbr()});for(var c=0;c<g.editables.length;c++)g.editables[c].obj.keydown(function(a){if(a.metaKey&&71==a.which)return b.findAbbrMarkup()?(b.abbrField.foreground(),b.abbrField.focus()):b.insertAbbr(),a.stopPropagation(),a.preventDefault(),!1})},subscribeEvents:function(){var b=this,c={};g.bind("aloha-editable-activated",function(){if(g.activeEditable&&g.activeEditable.obj){var a=b.getEditableConfig(g.activeEditable.obj);
c[g.activeEditable.getId()]=-1!==f.inArray("abbr",a)}});g.bind("aloha-editable-destroyed",function(){g.activeEditable&&g.activeEditable.obj&&delete c[g.activeEditable.getId()]});g.bind("aloha-selection-changed",function(a,d){if(g.activeEditable)if(c[g.activeEditable.getId()]){b._formatAbbrButton.show();b._insertAbbrButton.show();var e=b.findAbbrMarkup(d);e?(b._insertAbbrButton.hide(),b._formatAbbrButton.setState(!0),l.setScope("abbr"),b.abbrField.setTargetObject(e,"title")):(b._formatAbbrButton.setState(!1),
b.abbrField.setTargetObject(null))}else b._formatAbbrButton.hide(),b._insertAbbrButton.hide()})},findAbbrMarkup:function(b){"undefined"==typeof b&&(b=g.Selection.getRangeObject());return g.activeEditable?b.findMarkup(function(){return"abbr"==this.nodeName.toLowerCase()},g.activeEditable.obj):null},formatAbbr:function(){var b=g.Selection.getRangeObject();g.activeEditable&&(this.findAbbrMarkup(b)?this.removeAbbr():this.insertAbbr())},insertAbbr:function(b){var d=g.Selection.getRangeObject();if(!this.findAbbrMarkup(d)){d.isCollapsed()&&
!1!=b&&p.Utils.Dom.extendToWord(d);if(d.isCollapsed()){b=c.t("newabbr.defaulttext");var a=f('<abbr title="">'+b+"</abbr>");p.Utils.Dom.insertIntoDOM(a,d,f(g.activeEditable.obj));d.startContainer=d.endContainer=a.contents().get(0);d.startOffset=0;d.endOffset=b.length}else a=f('<abbr title=""></abbr>'),p.Utils.Dom.addMarkup(d,a,!1);d.select();this.abbrField.foreground();this.abbrField.focus()}},removeAbbr:function(){var b=g.Selection.getRangeObject(),c=this.findAbbrMarkup();c&&(p.Utils.Dom.removeFromDOM(c,
b,!0),b.select())},makeClean:function(b){},toString:function(){return"abbr"}})});
define("aloha/core jquery aloha/command aloha/selection util/dom aloha/contenthandlermanager aloha/console".split(" "),function(g,f,n,m,k,e,l){n.register("inserthtml",{action:function(d,c){function b(a){var d=f(a);if(!k.insertIntoDOM(d,c,m,!1))for(d=d.contents(),(k.isBlockLevelElement(a)||k.isListElement(a))&&b(f("<br/>").get(0)),n=d.length-1;0<=n;--n)b(d[n])}var m=f(k.getEditingHostOf(c.startContainer)),r=c.commonAncestorContainer,n,a=[];d=e.handleContent(d,{contenthandler:g.settings.contentHandler.insertHtml});
if("string"===typeof d)d=f("<div>"+d+"</div>");else if(d instanceof f)d=f("<div>").append(d);else throw"INVALID_VALUE_ERR";a=d.contents();k.removeRange(c);for(n=a.length-1;0<=n;--n)b(a[n]);0<a.length?c=k.setCursorAfter(a.get(a.length-1)):c.select();k.doCleanup({merge:!0,removeempty:!0},c,r);try{c.select()}catch(q){l.warn("Error:",q)}}})});define(["aloha/command","./inserthtml"],function(g,f){});
define("jquery aloha/core aloha/plugin aloha/command contenthandler/contenthandler-utils aloha/console aloha/copypaste".split(" "),function(g,f,n,m,k,e,l){function d(a,b){b.css({top:p.scrollTop(),left:p.scrollLeft()-200}).contents().remove();var c=l.getEditableAt(a);c&&c.obj.blur();l.setSelectionAt({startContainer:b[0],endContainer:b[0],startOffset:0,endOffset:0});b.focus()}function c(b,c,d){b.metaKey=null;b.stopPropagation();window.setTimeout(function(){if(c){var m=a.html();r&&/^&nbsp;/.test(m)&&
(m=m.substring(6));var g=l.getEditableAt(c);g&&g.obj.focus();l.setSelectionAt(c);g=c.startContainer;if(1===g.nodeType?"p"===g.nodeName.toLowerCase()&&k.isProppedParagraph(g.outerHTML):3===g.nodeType&&"p"===g.parentNode.nodeName.toLowerCase()&&1===g.parentNode.childNodes.length&&u.test(window.escape(g.data)))3===c.startContainer.nodeType?c.startContainer.data="":c.startContainer.innerHTML=" ",c.startOffset=0,c.endContainer===c.startContainer&&(c.endOffset=0);f.queryCommandSupported("insertHTML")?f.execCommand("insertHTML",
!1,m):e.error("Common.Paste",'Command "insertHTML" not available. Enable the plugin "common/commands".')}a.contents().remove();"function"===typeof d&&d();f.activeEditable.smartContentChange(b)},10)}function b(b,e){r?b.bind("beforepaste",function(b){q=l.getRange();d(q,a);b.stopPropagation()}):b.bind("paste",function(b){var e=l.getRange();d(e,a);r&&document.selection.createRange().execCommand("paste");c(b,e)})}var p=g(window),r=!!g.browser.msie,u=/^(\s|%A0)$/,a=g('<div style="position:absolute; clip:rect(0px,0px,0px,0px); width:1px; height:1px;"></div>').contentEditable(!0),
q=null;return n.create("paste",{settings:{},init:function(){g("body").append(a);var d=!this.settings.noclipboardaccess;f.bind("aloha-editable-created",function(a,c){b(c.obj,d)});r&&a.bind("paste",function(a){c(a,q,function(){q=null})})},register:function(a){e.deprecated("Plugins.Paste","register() for pasteHandler is deprecated.  Use the ContentHandler Plugin instead.")}})});
define("jquery aloha/core aloha/contenthandlermanager contenthandler/contenthandler-utils util/functions util/html".split(" "),function(g,f,n,m,k,e){function l(b,c){var d=e.findNodeRight(c.lastChild,a);d&&"br"===d.nodeName.toLowerCase()&&g(d).remove()}function d(a,b){var c=g(b);c.filter(r).remove();g.browser.msie&&(c.filter("br.aloha-end-br").remove(),c.filter(p).each(l));c.children(u).each(d)}function c(a,b){var d=g(b);d.filter(r).append("\u200b");d.children(u).each(c)}function b(a,c){var d=g(c);
d.filter(r).append("<br/>");d.children(u).each(b)}var p=e.BLOCKLEVEL_ELEMENTS.join(),r=e.BLOCKLEVEL_ELEMENTS.join(":empty,")+":empty",u=":not(.aloha-block)",a=k.complement(e.isIgnorableWhitespace);return n.createHandler({handleContent:function(a,e){if(!e)return a;var f=m.wrapContent(a);if(!f)return a;switch(e.command){case "initEditable":f.children(u).each(d);g.browser.msie&&7>=g.browser.version&&f.children(u).each(c);break;case "getContents":f.children(u).each(b)}return f.html()}})});
function Sanitize(g,f){var n,m;m=g||{};this.jQuery=f||{};this.config={};this.config.elements=m.elements?m.elements:[];this.config.attributes=m.attributes?m.attributes:{};this.config.attributes[Sanitize.ALL]=this.config.attributes[Sanitize.ALL]?this.config.attributes[Sanitize.ALL]:[];this.config.allow_comments=m.allow_comments?m.allow_comments:!1;this.allowed_elements={};this.config.protocols=m.protocols?m.protocols:{};this.config.add_attributes=m.add_attributes?m.add_attributes:{};this.dom=m.dom?
m.dom:document;for(n=0;n<this.config.elements.length;n++)this.allowed_elements[this.config.elements[n]]=!0;this.config.remove_element_contents={};this.config.remove_all_contents=!1;if(m.remove_contents)if(m.remove_contents instanceof Array)for(n=0;n<m.remove_contents.length;n++)this.config.remove_element_contents[m.remove_contents[n]]=!0;else this.config.remove_all_contents=!0;this.transformers=m.transformers?m.transformers:[];this.filters=m.filters?m.filters:[]}Sanitize.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i;
Sanitize.RELATIVE="__relative__";window.Sanitize=Sanitize;
Sanitize.prototype.clean_node=function(g){function f(e,f){var d;for(d=0;d<f.length;d++)if(f[d]==e)return d;return-1}function n(){var e=[],f={},d,c;for(d=0;d<arguments.length;d++)if(arguments[d]&&arguments[d].length)for(c=0;c<arguments[d].length;c++)f[arguments[d][c]]||(f[arguments[d][c]]=!0,e.push(arguments[d][c]));return e}function m(e){for(var l,d=0;d<this.filters.length;d++)if(!this.filters[d](e)){l=e.cloneNode(!0);this.current_element.appendChild(l);return}switch(e.nodeType){case 1:var c,b,k,
g,u,a,q;c=[];d=e;g=!1;for(b=0;b<this.transformers.length;b++)if(k=this.transformers[b]({allowed_elements:this.allowed_elements,config:this.config,node:e,node_name:e.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}),null!=k)if("object"==typeof k){if(k.whitelist_nodes&&k.whitelist_nodes instanceof Array)for(g=0;g<k.whitelist_nodes.length;g++)-1==f(k.whitelist_nodes[g],this.whitelist_nodes)&&this.whitelist_nodes.push(k.whitelist_nodes[g]);g=k.whitelist?!0:!1;k.attr_whitelist&&
(c=n(c,k.attr_whitelist));d=k.node?k.node:d}else throw Error("transformer output must be an object or null");e=this.jQuery;e=e.browser.msie&&"7.0"===e.browser.version;k=d.nodeName.toLowerCase();b=this.current_element;if(this.allowed_elements[k]||g){this.current_element=this.dom.createElement(d.nodeName);b.appendChild(this.current_element);g=n(this.config.attributes[k],this.config.attributes.__ALL__,c);for(c=0;c<g.length;c++)if(l=g[c],u=d.attributes[l])a=!0,this.config.protocols[k]&&this.config.protocols[k][l]&&
(a=this.config.protocols[k][l],a=(q=u.nodeValue.toLowerCase().match(Sanitize.REGEX_PROTOCOL))?-1!=f(q[1],a):-1!=f(Sanitize.RELATIVE,a)),a&&(!e||e&&"style"!==l)&&(a=document.createAttribute(l),a.value=u.nodeValue,this.current_element.setAttributeNode(a));if(this.config.add_attributes[k])for(l in this.config.add_attributes[k])if(!e||e&&"style"!==l)a=document.createAttribute(l),a.value=this.config.add_attributes[k][l],this.current_element.setAttributeNode(a)}else if(-1!=f(d,this.whitelist_nodes)){for(this.current_element=
d.cloneNode(!0);0<this.current_element.childNodes.length;)this.current_element.removeChild(this.current_element.firstChild);b.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[k])for(c=0;c<d.childNodes.length;c++)m.call(this,d.childNodes[c]);this.current_element.normalize&&this.current_element.normalize();this.current_element=b;break;case 3:l=e.cloneNode(!1);this.current_element.appendChild(l);break;case 5:l=e.cloneNode(!1);this.current_element.appendChild(l);
break;case 8:this.config.allow_comments&&(l=e.cloneNode(!1),this.current_element.appendChild(l))}}var k=this.dom.createDocumentFragment();this.current_element=k;this.whitelist_nodes=[];for(i=0;i<g.childNodes.length;i++)m.call(this,g.childNodes[i]);k.normalize&&k.normalize();return k};
define("aloha/core jquery aloha/contenthandlermanager aloha/plugin aloha/console vendor/sanitize".split(" "),function(g,f,n,m,k){function e(d){var c=["restricted","basic","relaxed"],b=g.defaults.supports,b=g.settings.contentHandler.sanitize&&-1<f.inArray(g.settings.contentHandler.sanitize,c)?g.defaults.sanitize[g.settings.contentHandler.sanitize]:g.defaults.sanitize.relaxed;g.settings.contentHandler.allows&&(b=g.settings.contentHandler.allows);d&&(b=d);b.filters=[function(b){return"false"!=b.contentEditable}];
l=new Sanitize(b,f)}var l;g.defaults.sanitize||(g.defaults.sanitize={});g.defaults.sanitize.restricted={elements:"b em i strong u del p span div br".split(" ")};g.defaults.sanitize.basic={elements:"a abbr b blockquote br cite code dd del dl dt em i li ol p pre q small strike strong sub sup u ul".split(" "),attributes:{a:["href"],blockquote:["cite"],q:["cite"],abbr:["title"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},q:{cite:["http",
"https","__relative__"]}}};g.defaults.sanitize.relaxed={elements:"a abbr b blockquote br caption cite code col colgroup dd del dl dt em h1 h2 h3 h4 h5 h6 i img li ol p pre q small strike strong sub sup table tbody td tfoot th thead tr u ul span hr object div".split(" "),attributes:{a:"href title id class target data-gentics-aloha-repository data-gentics-aloha-object-id".split(" "),div:["id","class","style"],abbr:["title"],blockquote:["cite"],br:["class"],col:["span","width"],colgroup:["span","width"],
img:"align alt height src title width class data-caption data-align data-width data-original-image".split(" "),ol:["start","type"],p:["class","style","id"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width"],th:"abbr axis colspan rowspan scope width".split(" "),ul:["type"],span:["class","style","lang","xml:lang","role"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},img:{src:["http","https","__relative__"]},
q:{cite:["http","https","__relative__"]}}};return n.createHandler({handleContent:function(d){var c,b;if(g.activeEditable&&g.settings.contentHandler&&g.settings.contentHandler.handler&&g.settings.contentHandler.handler.sanitize)if(g.settings.contentHandler.handler.sanitize&&(b=g.settings.contentHandler.handler.sanitize),"undefined"!==typeof b["#"+g.activeEditable.getId()])c=b;else for(var k=g.activeEditable.obj.attr("class").split(" "),m=0;m<k.length;m++)"undefined"!==typeof b["."+k[m]]&&(c=b["."+
k[m]]);"undefined"!==typeof l&&"undefined"===typeof c||e(c);"string"===typeof d?d=f("<div>"+d+"</div>").get(0):d instanceof f&&(d=f("<div>").append(d).get(0));return f("<div>").append(l.clean_node(d)).html()}})});
define(["jquery","aloha","aloha/contenthandlermanager","contenthandler/contenthandler-utils"],function(g,f,n,m){function k(e){e.find("table").removeAttr("cellpadding").removeAttr("cellspacing").removeAttr("border").removeAttr("border-top").removeAttr("border-bottom").removeAttr("border-left").removeAttr("border-right");e.find("td").each(function(){var e;(e=g.trim(this.innerHTML))?(e=g("<div>"+e+"</div>")[0],e=e.firstChild===e.lastChild&&"p"===e.firstChild.nodeName.toLowerCase()?(e=e.firstChild.children)&&
1===e.length&&"br"===e[0].nodeName.toLowerCase():!1):e=!1;e&&(this.innerHTML="&nbsp;");e=g(">p",this);1===e.length&&e.contents().unwrap()});e.find("td,tr").removeAttr("width").removeAttr("height").removeAttr("valign");e.find("colgroup").remove()}return n.createHandler({handleContent:function(e){var l=m.wrapContent(e);if(!l)return e;if(l.find(".aloha-block").length)return l.html();k(l);this.cleanLists(l);this.removeComments(l);this.unwrapTags(l);this.removeStyles(l);this.removeNamespacedElements(l);
e=!0;f.settings.contentHandler&&f.settings.contentHandler.handler&&f.settings.contentHandler.handler.generic&&"undefinded"!==typeof f.settings.contentHandler.handler.generic.transformFormattings&&!f.settings.contentHandler.handler.generic.transformFormattings&&(e=!1);e&&this.transformFormattings(l);return l.html()},cleanLists:function(e){e.find("ul,ol").find(">:not(li)").remove()},transformFormattings:function(e){e.find("strong,em,s,u,strike").each(function(){"STRONG"===this.nodeName?f.Markup.transformDomObject(g(this),
"b"):"EM"===this.nodeName?f.Markup.transformDomObject(g(this),"i"):"S"===this.nodeName||"STRIKE"==this.nodeName?f.Markup.transformDomObject(g(this),"del"):"U"===this.nodeName&&g(this).contents().unwrap()})},transformLinks:function(e){e.find("a").each(function(){"undefined"===typeof g(this).attr("href")&&g(this).contents().unwrap()})},removeComments:function(e){var f=this;e.contents().each(function(){8===this.nodeType?g(this).remove():f.removeComments(g(this))})},unwrapTags:function(e){e.find("span,font,div").not(".aloha-wai-lang").each(function(){"DIV"==
this.nodeName?"<br>"===this.innerHTML?g(this).contents().unwrap():g(f.Markup.transformDomObject(g(this),"p").append("<br>")).contents().unwrap():g(this).contents().unwrap()})},removeStyles:function(e){var f=this;e.children("style").filter(function(){return"false"!==this.contentEditable}).remove();e.children().filter(function(){return"false"!==this.contentEditable}).each(function(){g(this).removeAttr("style").removeClass();f.removeStyles(g(this))})},removeNamespacedElements:function(e){e.find("*").each(function(){var e=
this.prefix?this.prefix:this.scopeName?this.scopeName:void 0;if(e&&"HTML"!==e||0<=this.nodeName.indexOf(":")){var e=g(this),d=e.contents();d.length?d.unwrap():e.remove()}})}})});
define(["jquery"],function(g){return{wrapContent:function(f){return"string"===typeof f?g("<div>"+f+"</div>"):f instanceof g?g("<div>").append(f):null},isProppedParagraph:function(f){f=g.trim(f);if(!f)return!1;f=g("<div>"+f+"</div>")[0];return f.firstChild===f.lastChild&&"p"===f.firstChild.nodeName.toLowerCase()?(f=f.firstChild.children)&&1===f.length&&"br"===f[0].nodeName.toLowerCase():!1}}});
define(["jquery","aloha","aloha/contenthandlermanager","contenthandler/contenthandler-utils","util/dom"],function(g,f,n,m,k){function e(b){switch(b[0].nodeName.toLowerCase()){case "table":return 0===b.find("tbody,tr").length;case "tbody":return 0===b.find("tr").length;case "tr":return 0===b.find("td,th").length;default:return""===g.trim(b.text())}}function l(c){if(0===c.length||!b.test(c[0].outerHTML))return!1;c=c.find("*");var d,a;for(d=0;d<c.length;d++)if((a=c.eq(d).attr("style"))&&0<=a.toLowerCase().indexOf("mso")||
(a=c.eq(d).attr("class"))&&0<=a.toLowerCase().indexOf("mso"))return!0;return!1}function d(b){b.find("p.MsoTitle").each(function(){f.Markup.transformDomObject(g(this),"h1")});b.find("p.MsoSubtitle").each(function(){f.Markup.transformDomObject(g(this),"h2")})}var c=g,b=/mso/,p=/^#(.*)/;return n.createHandler({handleContent:function(b){var c=m.wrapContent(b);if(!c)return b;l(c)&&this.transformWordContent(c);return c.html()},isOrderedList:function(b){return"Wingdings"==b.css("fontFamily")||"Symbol"==
b.css("fontFamily")?!1:b.text().match(/^([0-9]{1,3}\.)|([0-9]{1,3}\)|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\)))$/)?!0:!1},transformListsFromWord:function(b){var d=this,a,e;e=b.find("p.MsoListParagraphCxSpFirst,p.MsoListParagraphCxSpMiddle,p.MsoListParagraphCxSpLast,p.MsoListParagraph,p span");e.each(function(){var a=c(this),b=a.css("font-family")||"",d=a.css("mso-list")||"",e=a.attr("style")||"";a.hasClass("MsoListParagraphCxSpFirst")||a.hasClass("MsoListParagraph")?a.addClass("aloha-list-element"):0<=
b.indexOf("Symbol")?a.closest("p").addClass("aloha-list-element"):0<=b.indexOf("Wingdings")?a.closest("p").addClass("aloha-list-element"):""!==d?a.closest("p").addClass("aloha-list-element"):0<=e.indexOf("mso-list")&&a.closest("p").addClass("aloha-list-element")});b.find("p span span span").each(function(){var a=c(this),b;0===c.trim(a.text()).replace(/&nbsp;/g,"").length&&(b=c.trim(a.parent().parent().text()).replace(/&nbsp;/g,""),b.match(/^([0-9]{1,3}\.)|([0-9]{1,3}\))|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\))|(.)$/)&&
(a.closest("p").addClass("aloha-list-element"),a.parent().parent().addClass("aloha-list-bullet")))});e="p.aloha-list-element";a=":not("+e+", font)";e=b.find(e);0<e.length&&e.each(function(){var b=c(this),e,f,l,k,m,g,p,q;b.removeClass("aloha-list-element");b.find("font").each(function(){c(this).contents().unwrap()});q=[];p=parseFloat(b.css("marginLeft"));isNaN(p)&&(p=0);g=[];m=b.nextUntil(a);k=c(b.find("span.aloha-list-bullet"));0===k.length&&(k=b.find("span").eq(0));l=d.isOrderedList(k);k.remove();
f=c(l?"<ol></ol>":"<ul></ul>");g.push(f);e=c("<li></li>");f.append(e);b.contents().appendTo(e);b.replaceWith(f);m.each(function(){var a=c(this),b,m;if(!a.is("font")){a.find("font").each(function(){c(this).contents().unwrap()});b=parseFloat(a.css("marginLeft"));isNaN(b)&&(b=0);k=c(a.find("span.aloha-list-bullet"));0===k.length&&(k=a.find("span").eq(0));l=d.isOrderedList(k);k.remove();if(b>p)m=c(l?"<ol></ol>":"<ul></ul>"),f.children(":last").append(m),f=m,g.push(f),q.push(b),p=b;else if(b<p&&0<q.length){for(;0<
q.length&&q[q.length-1]>b;)q.pop(),g.pop();f=g[g.length-1];p=b}e=c("<li></li>");f.append(e);a.contents().appendTo(e);a.remove()}})})},removeParagraphNumbering:function(b){b=b.find("h1,h2,h3,h4,h5,h6");0<b.length&&b.each(function(){var b=c(this),a=b.find("span"),b=b.find("a");a.each(function(){c.trim(c(this).text()).match(/^([\.\(]?[\d\D][\.\(]?){1,4}$/)&&c(this).remove()});b.each(function(){"undefined"===typeof c(this).attr("href")&&c(this).contents().unwrap()})})},transformToc:function(b){b.find("[class*=MsoToc]").each(function(){var b=
c(this),a=b.find("span"),b=b.find("a");a.each(function(){c(this).attr("style")&&-1<c(this).attr("style").search("mso-hide")&&c(this).remove();c(this).contents().unwrap()});b.each(function(){c(this).contents().unwrap()})})},transformWordContent:function(b){this.transformToc(b);this.removeParagraphNumbering(b);this.transformListsFromWord(b);d(b);b=b.find("*");var c,a,f;for(f=0;f<b.length;f++)a=b.eq(f),c=a[0].nodeName.toLowerCase(),"a"===c?(c=a.attr("href"))&&p.test(g.trim(c))&&a.contents().unwrap():
"div"===c||"span"===c?a.contents().unwrap():"td"!==c&&e(a)&&a.contents().unwrap()}})});define("jquery aloha/plugin aloha/contenthandlermanager contenthandler/wordcontenthandler contenthandler/genericcontenthandler contenthandler/sanitizecontenthandler contenthandler/blockelementcontenthandler".split(" "),function(g,f,n,m,k,e,l){var d={word:m,generic:k,sanitize:e,blockelement:l};return f.create("contenthandler",{init:function(){for(var c in d)d.hasOwnProperty(c)&&n.register(c,d[c])}})});
define(["jquery"],function(g){(function(f){function g(e){var l=e||window.event,d=[].slice.call(arguments,1),c=0,b=0,k=0;e=f.event.fix(l);e.type="mousewheel";l.wheelDelta&&(c=l.wheelDelta/120);l.detail&&(c=-l.detail/3);k=c;void 0!==l.axis&&l.axis===l.HORIZONTAL_AXIS&&(k=0,b=-1*c);void 0!==l.wheelDeltaY&&(k=l.wheelDeltaY/120);void 0!==l.wheelDeltaX&&(b=-1*l.wheelDeltaX/120);d.unshift(e,c,b,k);return(f.event.dispatch||f.event.handle).apply(this,d)}var m=["DOMMouseScroll","mousewheel"];if(f.event.fixHooks)for(var k=
m.length;k;)f.event.fixHooks[m[--k]]=f.event.mouseHooks;f.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=m.length;e;)this.addEventListener(m[--e],g,!1);else this.onmousewheel=g},teardown:function(){if(this.removeEventListener)for(var e=m.length;e;)this.removeEventListener(m[--e],g,!1);else this.onmousewheel=null}};f.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",
e)}})})(g)});
define(["jquery"],function(g){(function(f){f.Jcrop=function(g,m){function k(a){return""+parseInt(a)+"px"}function e(a){a=f(a).offset();return[a.left,a.top]}function l(a){return[a.pageX-P[0],a.pageY-P[1]]}function d(a,b){return function(c){if(y.aspectRatio)switch(a){case "e":c[1]=b.y+1;break;case "w":c[1]=b.y+1;break;case "n":c[0]=b.x+1;break;case "s":c[0]=b.x+1}else switch(a){case "e":c[1]=b.y2;break;case "w":c[1]=b.y2;break;case "n":c[0]=b.x2;break;case "s":c[0]=b.x2}W.setCurrent(c);Z.update()}}
function c(a){var b=a;ja.watchKeys();return function(a){W.moveOffset([a[0]-b[0],a[1]-b[1]]);b=a;Z.update()}}function b(a){switch(a){case "n":return"sw";case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function p(a){return function(f){if(y.disabled||"move"==a&&!y.allowMove)return!1;aa=!0;var k=l(f);P=e(D);ca.setCursor("move"==a?a:a+"-resize");if("move"==a)ca.activateHandlers(c(k),u);else{var k=W.getFixed(),
m=b(a),g=W.getCorner(b(m));W.setPressed(W.getCorner(m));W.setCurrent(g);ca.activateHandlers(d(a,k),u)}f.stopPropagation();f.preventDefault();return!1}}function r(a){return{x:parseInt(a.x*N),y:parseInt(a.y*V),x2:parseInt(a.x2*N),y2:parseInt(a.y2*V),w:parseInt(a.w*N),h:parseInt(a.h*V)}}function u(a){a=W.getFixed();a.w>y.minSelect[0]&&a.h>y.minSelect[1]?(Z.enableHandles(),Z.done()):Z.release();ca.setCursor(y.allowSelect?"crosshair":"default")}function a(a){W.setCurrent(a);Z.update()}function q(){var a=
f("<div></div>").addClass(y.baseClass+"-tracker");f.browser.msie&&a.css({opacity:0,backgroundColor:"white"});return a}function t(a){v([a[0]/N,a[1]/V,a[2]/N,a[3]/V])}function v(a){W.setPressed([a[0],a[1]]);W.setCurrent([a[2],a[3]]);Z.update()}function x(a){"object"!=typeof a&&(a={});y=f.extend(y,a);"function"!==typeof y.onChange&&(y.onChange=function(){});"function"!==typeof y.onSelect&&(y.onSelect=function(){})}function C(a){y.allowResize?a?Z.enableOnly():Z.enableHandles():Z.disableHandles();ca.setCursor(y.allowSelect?
"crosshair":"default");Z.setCursor(y.allowMove?"move":"default");M.css("backgroundColor",y.bgColor);"setSelect"in y&&(t(m.setSelect),Z.done(),delete y.setSelect);"trueSize"in y&&(N=y.trueSize[0]/F,V=y.trueSize[1]/H);s=y.maxSize[0]||0;T=y.maxSize[1]||0;Q=y.minSize[0]||0;U=y.minSize[1]||0;"outerImage"in y&&(D.attr("src",y.outerImage),delete y.outerImage);Z.refresh()}"object"!==typeof g&&(g=f(g)[0]);"object"!==typeof m&&(m={});"trackDocument"in m||(m.trackDocument=f.browser.msie?!1:!0,f.browser.msie&&
"8"==f.browser.version.split(".")[0]&&(m.trackDocument=!0));"keySupport"in m||(m.keySupport=f.browser.msie?!1:!0);var y={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,borderOpacity:0.4,handleOpacity:0.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],
maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}};x(m);var z=f(g),D=z.clone().removeAttr("id").css({position:"absolute"});D.width(z.width());D.height(z.height());z.after(D).hide();(function(a,b,c){var d=a.width(),e=a.height();d>b&&0<b&&(d=b,e=b/a.width()*a.height());e>c&&0<c&&(e=c,d=c/a.height()*a.width());N=a.width()/d;V=a.height()/e;a.width(d).height(e)})(D,y.boxWidth,y.boxHeight);var F=D.width(),H=D.height(),M=f("<div />").width(F).height(H).addClass(y.baseClass+"-holder").css({position:"relative",
backgroundColor:y.bgColor}).insertAfter(z).append(D);y.addClass&&M.addClass(y.addClass);var I=f("<img />").attr("src",D.attr("src")).css("position","absolute").width(F).height(H),J=f("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}).append(I),K=f("<div />").width("100%").height("100%").css("zIndex",320),G=f("<div />").css({position:"absolute",zIndex:300}).insertBefore(D).append(J,K),S=y.boundary,O=q().width(F+2*S).height(H+2*S).css({position:"absolute",
top:k(-S),left:k(-S),zIndex:290}).mousedown(function(b){if(y.disabled||!y.allowSelect)return!1;aa=!0;P=e(D);Z.disableHandles();"crosshair"!=ea&&(ca.setCursor("crosshair"),ea="crosshair");var c=l(b);W.setPressed(c);ca.activateHandlers(a,u);ja.watchKeys();Z.update();b.stopPropagation();b.preventDefault();return!1}),s,T,Q,U,N,V,P=e(D),aa,ea,ga,na,W=function(){function a(){if(!y.aspectRatio){var b=l-e,m=k-f;s&&Math.abs(b)>s&&(l=0<b?e+s:e-s);T&&Math.abs(m)>T&&(k=0<m?f+T:f-T);U&&Math.abs(m)<U&&(k=0<m?f+
U:f-U);Q&&Math.abs(b)<Q&&(l=0<b?e+Q:e-Q);0>e&&(l-=e,e-=e);0>f&&(k-=f,f-=f);0>l&&(e-=l,l-=l);0>k&&(f-=k,k-=k);l>F&&(b=l-F,e-=b,l-=b);k>H&&(b=k-H,f-=b,k-=b);e>F&&(b=e-H,k-=b,f-=b);f>H&&(b=f-H,k-=b,f-=b);return d(c(e,f,l,k))}var b=y.aspectRatio,m=y.minSize[0]/N,g=y.maxSize[0]/N,p=l-e,q=k-f,t=Math.abs(p),r=Math.abs(q);0==g&&(g=10*F);t/r<b?(t=k,w=r*b,r=0>p?e-w:w+e,0>r?(r=0,h=Math.abs((r-e)/b),t=0>q?f-h:h+f):r>F&&(r=F,h=Math.abs((r-e)/b),t=0>q?f-h:h+f)):(r=l,h=t/b,t=0>q?f-h:f+h,0>t?(t=0,w=Math.abs((t-f)*
b),r=0>p?e-w:w+e):t>H&&(t=H,w=Math.abs(t-f)*b,r=0>p?e-w:w+e));r>e?(r-e<m?r=e+m:r-e>g&&(r=e+g),t=t>f?f+(r-e)/b:f-(r-e)/b):r<e&&(e-r<m?r=e-m:e-r>g&&(r=e-g),t=t>f?f+(e-r)/b:f-(e-r)/b);0>r?(e-=r,r=0):r>F&&(e-=r-F,r=F);0>t?(f-=t,t=0):t>H&&(f-=t-H,t=H);return last=d(c(e,f,r,t))}function b(a){0>a[0]&&(a[0]=0);0>a[1]&&(a[1]=0);a[0]>F&&(a[0]=F);a[1]>H&&(a[1]=H);return[a[0],a[1]]}function c(a,b,d,e){var f=a,l=d,k=b,m=e;d<a&&(f=d,l=a);e<b&&(k=e,m=b);return[Math.round(f),Math.round(k),Math.round(l),Math.round(m)]}
function d(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var e=0,f=0,l=0,k=0,m,g;return{flipCoords:c,setPressed:function(a){a=b(a);l=e=a[0];k=f=a[1]},setCurrent:function(a){a=b(a);m=a[0]-l;g=a[1]-k;l=a[0];k=a[1]},getOffset:function(){return[m,g]},moveOffset:function(a){var b=a[0];a=a[1];0>e+b&&(b-=b+e);0>f+a&&(a-=a+f);H<k+a&&(a+=H-(k+a));F<l+b&&(b+=F-(l+b));e+=b;l+=b;f+=a;k+=a},getCorner:function(b){var c=a();switch(b){case "ne":return[c.x2,c.y];case "nw":return[c.x,c.y];case "se":return[c.x2,
c.y2];case "sw":return[c.x,c.y2]}},getFixed:a}}(),Z=function(){function a(b){b=f("<div />").css({position:"absolute",opacity:y.borderOpacity}).addClass(y.baseClass+"-"+b);J.append(b);return b}function b(a,c){var d=f("<div />").mousedown(p(a)).css({cursor:a+"-resize",position:"absolute",zIndex:c});K.append(d);return d}function c(a){var d=y.handleSize,e=F,f=d;switch(a){case "n":case "s":d="100%";break;case "e":case "w":f="100%"}return b(a,x++).width(d).height(f).css({top:k(-e+1),left:k(-e+1)})}function d(a){for(i in a)z[a[i]]=
b(a[i],x++).css({top:k(-F+1),left:k(-F+1),opacity:y.handleOpacity}).addClass(y.baseClass+"-handle")}function e(a){var b=Math.round(a.h/2-F),c=Math.round(a.w/2-F);west=-F+1;var d=a.w-F;a=a.h-F;"e"in z&&z.e.css({top:k(b),left:k(d)})&&z.w.css({top:k(b)})&&z.s.css({top:k(a),left:k(c)})&&z.n.css({left:k(c)});"ne"in z&&z.ne.css({left:k(d)})&&z.se.css({top:k(a),left:k(d)})&&z.sw.css({top:k(a)});"b"in z&&z.b.css({top:k(a)})&&z.r.css({left:k(d)})}function l(){var a=W.getFixed();W.setPressed([a.x,a.y]);W.setCurrent([a.x2,
a.y2]);m()}function m(){if(u)return g()}function g(){var a=W.getFixed(),b=a.h;G.width(a.w).height(b);var b=a.x,c=a.y;I.css({top:k(-c),left:k(-b)});G.css({top:k(c),left:k(b)});y.drawBorders&&C.right.css({left:k(a.w-1)})&&C.bottom.css({top:k(a.h-1)});s&&e(a);u||(G.show(),D.css("opacity",y.bgOpacity),u=!0);y.onChange(r(a))}function t(){s=!0;if(y.allowResize)return e(W.getFixed()),K.show(),!0}function v(){s=!1;K.hide()}function n(a){(ga=a)?v():t()}var u,x=370,C={},z={},s=!1,F=y.handleOffset;y.drawBorders&&
(C={top:a("hline").css("top",f.browser.msie?k(-1):k(0)),bottom:a("hline"),left:a("vline"),right:a("vline")});y.dragEdges&&(z.t=c("n"),z.b=c("s"),z.r=c("e"),z.l=c("w"));y.sideHandles&&d(["n","s","e","w"]);y.cornerHandles&&d(["sw","nw","ne","se"]);var H=q().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});J.append(H);v();return{updateVisible:m,update:g,release:function(){v();G.hide();D.css("opacity",1);u=!1},refresh:l,setCursor:function(a){H.css("cursor",a)},enableHandles:t,
enableOnly:function(){s=!0},showHandles:function(){s&&(e(W.getFixed()),K.show())},disableHandles:v,animMode:n,done:function(){n(!1);l()}}}(),ca=function(){function a(b){c(l(b))}function b(k){k.preventDefault();k.stopPropagation();aa&&(aa=!1,d(l(k)),y.onSelect(r(W.getFixed())),O.css({zIndex:290}),e&&f(document).unbind("mousemove",a).unbind("mouseup",b),c=function(){},d=function(){});return!1}var c=function(){},d=function(){},e=y.trackDocument;e||O.mousemove(a).mouseup(b).mouseout(b);D.before(O);return{activateHandlers:function(l,
k){aa=!0;c=l;d=k;O.css({zIndex:450});e&&f(document).mousemove(a).mouseup(b);return!1},setCursor:function(a){O.css("cursor",a)}}}(),ja=function(){function a(b,c,d){y.allowMove&&(W.moveOffset([c,d]),Z.updateVisible());b.preventDefault();b.stopPropagation()}var b=f('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(function(b){if(b.ctrlKey)return!0;var c=(na=b.shiftKey?!0:!1)?10:1;switch(b.keyCode){case 37:a(b,-c,0);break;case 39:a(b,c,0);break;case 38:a(b,0,-c);break;case 40:a(b,
0,c);break;case 27:Z.release();break;case 9:return!0}return nothing(b)}).blur(function(a){b.hide()}),c=f("<div />").css({position:"absolute",overflow:"hidden"}).append(b);y.keySupport&&c.insertBefore(D);return{watchKeys:function(){y.keySupport&&(b.show(),b.focus())}}}();K.hide();C(!0);S={animateTo:function(a){var b=a[0]/N,c=a[1]/V,d=a[2]/N,e=a[3]/V;if(!ga){a=W.flipCoords(b,c,d,e);var b=W.getFixed(),f=initcr=[b.x,b.y,b.x2,b.y2],l=y.animationDelay,k=f[0],m=f[1],d=f[2],e=f[3],g=a[0]-initcr[0],p=a[1]-
initcr[1],q=a[2]-initcr[2],t=a[3]-initcr[3],r=0,n=y.swingSpeed;Z.animMode(!0);var u=function(){return function(){r+=(100-r)/n;f[0]=k+r/100*g;f[1]=m+r/100*p;f[2]=d+r/100*q;f[3]=e+r/100*t;100>r?window.setTimeout(u,l):Z.done();99.8<=r&&(r=100);v(f)}}();window.setTimeout(u,l)}},setSelect:t,setOptions:function(a){x(a);C()},tellSelect:function(){return r(W.getFixed())},tellScaled:function(){return W.getFixed()},disable:function(){y.disabled=!0;Z.disableHandles();Z.setCursor("default");ca.setCursor("default")},
enable:function(){y.disabled=!1;C()},cancel:function(){Z.done();ca.activateHandlers(null,null)},focus:ja.watchKeys,getBounds:function(){return[F*N,H*V]},getWidgetSize:function(){return[F,H]},release:Z.release,destroy:function(){M.remove();z.show()}};z.data("Jcrop",S);return S};f.fn.Jcrop=function(g){function m(k){var e=g.useImg||k.src,l=new Image;l.onload=function(){f.Jcrop(k,g)};l.src=e}"object"!==typeof g&&(g={});this.each(function(){if(f(this).data("Jcrop")){if("api"==g)return f(this).data("Jcrop");
f(this).data("Jcrop").setOptions(g)}else m(this)});return this}})(g)});
define({root:{"size.natural":"Original size","button.addimg.tooltip":"add image ref","floatingmenu.tab.img":"Image","floatingmenu.tab.formatting":"Formatting","floatingmenu.tab.resize":"Resize","floatingmenu.tab.crop":"Crop","button.uploadimg.tooltip":"Upload img","button.uploadimg.label":"Upload","button.img.align.left.tooltip":"Left align","button.img.align.right.tooltip":"Right Align","button.img.align.none.tooltip":"No alignment","field.img.title.label":"Title","field.img.title.tooltip":"Title",
"field.img.label":"URL","field.img.tooltip":"Source","border ":"Add Border to Image","padding.increase ":"Increase Padding","padding.decrease ":"Decrease Padding","size.increase ":"Increase Size","size.decrease ":"Decrease Size",Resize:"Resize",Crop:"Crop",Reset:"Reset",Accept:"Accept",Cancel:"Cancel",height:"Height",width:"Width","button.toggle.tooltip":"Toggle keep aspect ratio","field.img.src.label":"Source","field.img.src.tooltip":"Source"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define("jquery util/class i18n!image/nls/i18n i18n!aloha/nls/i18n ui/ui ui/scopes ui/button ui/toggleButton ui/port-helper-attribute-field".split(" "),function(g,f,n,m,k,e,l,d,c){return f.extend({_constructor:function(){},init:function(b){b.floatingMenuControl=this;this.plugin=b;e.createScope(b.name,"Aloha.empty");this._addUIInsertButton();this._addUIMetaButtons();this._addUIResetButton();this._addUIAlignButtons();this._addUIMarginButtons();this._addUICropButtons();this._addUIResizeButtons();this._addUIAspectRatioToggleButton()},
_addUIAspectRatioToggleButton:function(){var b=this.plugin;this._imageCnrRatioButton=k.adopt("imageCnrRatio",d,{tooltip:n.t("button.toggle.tooltip"),icon:"aloha-icon-cnr-ratio",scope:b.name,click:function(){b.toggleKeepAspectRatio()}});!1!==b.settings.fixedAspectRatio&&(this._imageCnrRatioButton.setState(!0),b.keepAspectRatio=!0)},_addUIResetButton:function(){var b=this.plugin;this._imageCnrResetButton=k.adopt("imageCnrReset",l,{tooltip:n.t("Reset"),icon:"aloha-icon-cnr-reset",scope:b.name,click:function(){b.reset()}})},
_addUIInsertButton:function(){var b=this.plugin;this._insertImageButton=k.adopt("insertImage",l,{tooltip:n.t("button.addimg.tooltip"),icon:"aloha-button aloha-image-insert",scope:"Aloha.continuoustext",click:function(){b.insertImg()}})},_addUIMetaButtons:function(){var b=this.plugin;this.imgSrcField=c({label:n.t("field.img.src.label"),labelClass:"aloha-image-input-label",tooltip:n.t("field.img.src.tooltip"),name:"imageSource",scope:b.name});this.imgSrcField.setTemplate("<span><b>{name}</b><br/>{url}</span>");
this.imgSrcField.setObjectTypeFilter(b.objectTypeFilter);this.imgTitleField=c({label:n.t("field.img.title.label"),labelClass:"aloha-image-input-label",tooltip:n.t("field.img.title.tooltip"),name:"imageTitle",scope:b.name});this.imgTitleField.setObjectTypeFilter()},_addUIAlignButtons:function(){var b=this.plugin;this._imageAlignLeftButton=k.adopt("imageAlignLeft",l,{tooltip:n.t("button.img.align.left.tooltip"),icon:"aloha-img aloha-image-align-left",scope:b.name,click:function(){var c=g(b.getPluginFocus());
c.add(c.parent()).css("float","left")}});this._imageAlignRightButton=k.adopt("imageAlignRight",l,{tooltip:n.t("button.img.align.right.tooltip"),icon:"aloha-img aloha-image-align-right",scope:b.name,click:function(){var c=g(b.getPluginFocus());c.add(c.parent()).css("float","right")}});this._imageAlignNoneButton=k.adopt("imageAlignNone",l,{tooltip:n.t("button.img.align.none.tooltip"),icon:"aloha-img aloha-image-align-none",scope:b.name,click:function(){var c=g(b.getPluginFocus());c.add(c.parent()).css({"float":"none",
display:"inline-block"})}})},_addUIMarginButtons:function(){var b=this.plugin;this._imageIncPaddingButton=k.adopt("imageIncPadding",l,{tooltip:n.t("padding.increase"),icon:"aloha-img aloha-image-padding-increase",scope:b.name,click:function(){g(b.getPluginFocus()).increase("padding")}});this._imageDecPaddingButton=k.adopt("imageDecPadding",l,{tooltip:n.t("padding.decrease"),icon:"aloha-img aloha-image-padding-decrease",scope:b.name,click:function(){g(b.getPluginFocus()).decrease("padding")}})},_addUICropButtons:function(){var b=
this.plugin;e.createScope("Aloha.img",["Aloha.global"]);this._imageCropButton=k.adopt("imageCropButton",d,{tooltip:n.t("Crop"),icon:"aloha-icon-cnr-crop",scope:b.name,click:function(){this.getState()?b.crop():b.endCrop()}})},_addUIResizeButtons:function(){var b=this.plugin;this.imgResizeHeightField=c({label:n.t("height"),labelClass:"aloha-image-input-label",name:"imageResizeHeight",width:50,scope:b.name});this.imgResizeHeightField.maxValue=b.settings.maxHeight;this.imgResizeHeightField.minValue=b.settings.minHeight;
this.imgResizeWidthField=c({label:n.t("width"),labelClass:"aloha-image-input-label",name:"imageResizeWidth",width:50,scope:b.name});this.imgResizeWidthField.maxValue=b.settings.maxWidth;this.imgResizeWidthField.minValue=b.settings.minWidth},setScope:function(){e.setScope(this.plugin.name)},doLayout:function(){}})});
define("jquery aloha/plugin image/image-floatingMenu i18n!aloha/nls/i18n i18n!image/nls/i18n jqueryui image/vendor/jcrop/jquery.jcrop.min image/vendor/mousewheel/mousewheel".split(" "),function(g,f,n,m,k){var e=g,l=window.GENTICS,d=window.Aloha,c=!1;String.prototype.toInteger=String.prototype.toInteger||function(){return parseInt(String(this).replace(/px$/,"")||0,10)};String.prototype.toFloat=String.prototype.toInteger||function(){return parseFloat(String(this).replace(/px$/,"")||0,10)};Number.prototype.toInteger=
Number.prototype.toInteger||String.prototype.toInteger;Number.prototype.toFloat=Number.prototype.toFloat||String.prototype.toFloat;g.extend(!0,g.fn,{increase:g.fn.increase||function(b){var c=g(this),d,e;if(!c.length)return c;d=c.css(b).toFloat();e=Math.round(1.2*(d||1));d===e&&e++;c.css(b,e);return c},decrease:g.fn.decrease||function(b){var c=g(this),d,e;if(!c.length)return c;d=c.css(b).toFloat();e=Math.round(0.8*(d||0));d===e&&0<e&&e--;c.css(b,e);return c}});return f.create("image",{defaultSettings:{maxWidth:1600,
minWidth:3,maxHeight:1200,minHeight:3,autoCorrectManualInput:!0,fixedAspectRatio:!1,autoResize:!1,ui:{meta:!0,crop:!0,resizable:!0},handles:"ne, se, sw, nw",onCropped:function(b,c){d.Log.info("Default onCropped invoked",b,c)},onReset:function(b){d.Log.info("Default onReset invoked",b);return!1},onResize:function(b){d.Log.info("Default onResize invoked",b)},onResized:function(b){d.Log.info("Default onResized invoked",b)}},_onCropped:function(b,c){e("body").trigger("aloha-image-cropped",[b,c]);this.keepAspectRatio&&
(this.aspectRatioValue=this.imageObj.width()/this.imageObj.height());this.onCropped(b,c)},_onReset:function(b){e("body").trigger("aloha-image-reset",b);e("#"+this.ui.imgResizeHeightField.getInputId()).val(b.height());e("#"+this.ui.imgResizeWidthField.getInputId()).val(b.width());return this.onReset(b)},_onResize:function(b){e("body").trigger("aloha-image-resize",b);e("#"+this.ui.imgResizeHeightField.getInputId()).val(b.height());e("#"+this.ui.imgResizeWidthField.getInputId()).val(b.width());this.onResize(b)},
_onResized:function(b){e("body").trigger("aloha-image-resized",b);e("#"+this.ui.imgResizeHeightField.getInputId()).val(b.height());e("#"+this.ui.imgResizeWidthField.getInputId()).val(b.width());this.onResized(b)},imageObj:null,jcAPI:null,keepAspectRatio:!1,aspectRatioValue:!1,restoreProps:[],objectTypeFilter:[],init:function(){d.getPluginUrl("image");"undefined"!=typeof this.settings.objectTypeFilter&&(this.objectTypeFilter=this.settings.objectTypeFilter);this.config=this.defaultSettings;this.settings=
g.extend(!0,this.defaultSettings,this.settings);"number"===typeof this.settings.fixedAspectRatio?(this.aspectRatioValue=this.settings.fixedAspectRatio,this.keepAspectRatio=!0):this.keepAspectRatio=!0===this.settings.fixedAspectRatio?!0:!1;this.initializeUI();this.bindInteractions();this.subscribeEvents()},initializeUI:function(){this.ui=new n;this.ui.init(this)},bindInteractions:function(){var b=this;if(b.settings.ui.resizable)try{document.execCommand("enableObjectResizing",!1,!1)}catch(c){d.Log.info(c,
"Could not disable enableObjectResizing")}b.settings.ui.meta&&(b.ui.imgSrcField.addListener("keyup",function(c){b.srcChange()}),b.ui.imgSrcField.addListener("blur",function(c){c=g(b.ui.imgSrcField.getTargetObject());""===c.attr("src")&&c.remove()}));b.settings.onCropped&&"function"===typeof b.settings.onCropped&&(b.onCropped=b.settings.onCropped);b.settings.onReset&&"function"===typeof b.settings.onReset&&(b.onReset=b.settings.onReset);b.settings.onResized&&"function"===typeof b.settings.onResized&&
(b.onResized=b.settings.onResized);b.settings.onResize&&"function"===typeof b.settings.onResize&&(b.onResize=this.settings.onResize)},subscribeEvents:function(){var b=this,e=this.settings;g("img").filter(e.globalselector).unbind();g("img").filter(e.globalselector).click(function(c){b.clickImage(c)});d.bind("aloha-drop-files-in-editable",function(c,e){for(var a,f=e.filesObjs.length,k;0<=--f;)k=e.filesObjs[f],k.file.type.match(/image\//)&&(b.getEditableConfig(e.editable),a=g("<img/>"),a.css({"max-width":that.maxWidth,
"max-height":that.maxHeight}),a.attr("id",k.id),"undefined"===typeof k.src?a.attr("src",k.data):a.attr("src",k.src),l.Utils.Dom.insertIntoDOM(a,e.range,g(d.activeEditable.obj)))});d.bind("aloha-selection-changed",function(c,e,a){a&&a.target&&b.settings.ui.resizable&&!g(a.target).hasClass("ui-resizable-handle")&&(b.endResize(),b.imageObj=null,d.trigger("aloha-image-unselected"));null!==d.activeEditable&&(e=b.findImgMarkup(e),c=b.getEditableConfig(d.activeEditable.obj),"undefined"!==typeof c?(b.ui._insertImageButton.show(),
e?(b.ui._insertImageButton.show(),b.ui.setScope(),b.settings.ui.meta&&(b.ui.imgSrcField.setTargetObject(e,"src"),b.ui.imgTitleField.setTargetObject(e,"title")),b.ui.imgSrcField.foreground(),b.ui.imgSrcField.focus()):b.settings.ui.meta&&b.ui.imgSrcField.setTargetObject(null),b.ui.doLayout()):b.ui._insertImageButton.hide())});d.bind("aloha-editable-created",function(e,f){try{document.execCommand("enableObjectResizing",!1,!1)}catch(a){d.Log.info(a,"Could not disable enableObjectResizing")}f.obj.delegate("img",
"mouseup",function(a){c||(b.clickImage(a),a.stopPropagation())})});b._subscribeToResizeFieldEvents()},autoResize:function(b){var c=g("#"+this.ui.imgResizeWidthField.getInputId()),d=g("#"+this.ui.imgResizeHeightField.getInputId()),e=this.imageObj.width(),a=this.imageObj.height(),f=!1;if(e<this.settings.minWidth||e>this.settings.maxWidth||a<this.settings.minHeight||a>this.settings.maxHeight)f=!0;var l=e/a;return f?(e>this.settings.maxWidth&&(e=this.settings.maxWidth,a=e/l),a>this.settings.maxHeight&&
(a=this.settings.maxHeight,e=a*l),e<this.settings.minWidth&&b&&(e=this.settings.minWidth,a=e/l),a<this.settings.minHeight&&b&&(a=this.settings.minHeight,e*=l),c.val(e),d.val(a),this.setSizeByFieldValue(),!0):!1},toggleKeepAspectRatio:function(){this.keepAspectRatio=!this.keepAspectRatio;if("undefined"===typeof this.jcAPI||null===this.jcAPI)this.endResize(),this.aspectRatioValue=this.keepAspectRatio?"number"!==typeof this.settings.fixedAspectRatio?this.imageObj.width()/this.imageObj.height():this.settings.fixedAspectRatio:
!1,this.startResize()},_subscribeToResizeFieldEvents:function(){function b(a){var b=a.data.fieldName;if(8===a.keyCode||46===a.keyCode)d._updateFields(b,e(this).val(),!1)&&("undefined"!==typeof d.jcAPI&&null!==d.jcAPI?d.setCropAreaByFieldValue():d.setSizeByFieldValue());else if(57>=a.keyCode&&48<=a.keyCode||105>=a.keyCode&&96<=a.keyCode)d._updateFields(b,e(this).val(),!1)&&("undefined"!==typeof d.jcAPI&&null!==d.jcAPI?d.setCropAreaByFieldValue():d.setSizeByFieldValue());else{var c=0;if(38===a.keyCode||
107===a.keyCode)c=1;else if(40===a.keyCode||109===a.keyCode)c=-1;if(a.shiftKey||a.metaKey||a.ctrlKey)c*=10;var f=!1;0>c&&(f=!0);c=parseInt(e(this).val(),10)+c;d._updateFields(b,c,f)&&("undefined"!==typeof d.jcAPI&&null!==d.jcAPI?d.setCropAreaByFieldValue():d.setSizeByFieldValue())}a.preventDefault();return!1}function c(a,b){var f=a.data.fieldName;if(a.shiftKey||a.metaKey||a.ctrlKey)b*=10;var l=parseInt(e(this).val(),10)+b,k=!1;0>b&&(k=!0);d._updateFields(f,l,k)&&("undefined"!==typeof d.jcAPI&&null!==
d.jcAPI?d.setCropAreaByFieldValue():d.setSizeByFieldValue());return!1}var d=this,f=e("#"+d.ui.imgResizeHeightField.getInputId()),a={fieldName:"height",maxValue:d.ui.imgResizeHeightField.maxValue,minValue:d.ui.imgResizeHeightField.minValue};f.live("keyup",a,b);f.live("mousewheel",a,c);f=e("#"+d.ui.imgResizeWidthField.getInputId());a={fieldName:"width",maxValue:d.ui.imgResizeWidthField.maxValue,minValue:d.ui.imgResizeWidthField.minValue};f.live("keyup",a,b);f.live("mousewheel",a,c)},setSize:function(b,
c){this.imageObj.width(b);this.imageObj.height(c);var d=this.imageObj.closest(".Aloha_Image_Resize");d.height(c);d.width(b);this._onResize(this.imageObj);this._onResized(this.imageObj)},clickImage:function(b){this.endResize();var c=this.imageObj=g(b.target);if(!c.hasClass("aloha-ui")){this.ui.setScope();c.closest(".aloha-editable");this.ui._imageCnrRatioButton.setState(this.keepAspectRatio);this.restoreProps.push({obj:b.srcElement,src:this.imageObj.attr("src"),width:this.imageObj.width(),height:this.imageObj.height()});
b=e("#"+this.ui.imgResizeHeightField.getInputId());b.val(this.imageObj.height());b.css("background-color","");b=e("#"+this.ui.imgResizeWidthField.getInputId());b.val(this.imageObj.width());b.css("background-color","");this.settings.ui.meta&&(this.ui.imgSrcField.setTargetObject(this.imageObj,"src"),this.ui.imgTitleField.setTargetObject(this.imageObj,"title"));d.Selection.preventSelectionChanged();try{this.ui.imgSrcField.focus()}catch(f){}this.aspectRatioValue=this.imageObj.width()/this.imageObj.height();
this.settings.ui.resizable&&this.startResize();this.settings.autoResize&&this.autoResize(!0);d.Selection.preventSelectionChangedFlag=!1;d.trigger("aloha-image-selected")}},findImgMarkup:function(b){var c,e;"undefined"===typeof b&&(b=d.Selection.getRangeObject());e=g(b.startContainer);try{if(d.activeEditable&&("undefined"!==typeof b.startContainer&&"undefined"!==typeof b.startContainer.childNodes&&"undefined"!==typeof b.startOffset&&"undefined"!==typeof b.startContainer.childNodes[b.startOffset]&&
"img"===b.startContainer.childNodes[b.startOffset].nodeName.toLowerCase()&&b.startOffset+1===b.endOffset||e.hasClass("Aloha_Image_Resize")))return c=e.find("img")[0],c.css||(c.css=""),c.title||(c.title=""),c.src||(c.src=""),c}catch(f){d.Log.debug(f,"Error finding img markup.")}return null},getPluginFocus:function(){return this.imageObj},_updateFields:function(b,c,d){var e=null,a=null,f=null,l=null,k=null,m=null,n=null;if("width"==b)e=g("#"+this.ui.imgResizeWidthField.getInputId()),a=g("#"+this.ui.imgResizeHeightField.getInputId()),
f=1/this.aspectRatioValue,l=this.settings.minWidth,k=this.settings.maxWidth,m=this.settings.minHeight,n=this.settings.maxHeight;else if("height"==b)e=g("#"+this.ui.imgResizeHeightField.getInputId()),a=g("#"+this.ui.imgResizeWidthField.getInputId()),f=this.aspectRatioValue,l=this.settings.minHeight,k=this.settings.maxHeight,m=this.settings.minWidth,n=this.settings.maxWidth;else return!1;if(isNaN(c))return e.css("background-color","red"),!1;e.val(c);b=!0;c>k?this.settings.autoCorrectManualInput?(e.val(k),
c=e.val(),e.css("background-color",""),b=!0):(e.css("background-color","red"),b=!1):c<l?d?(e.val(l),c=e.val(),b=!0):(this.settings.autoCorrectManualInput?e.css("background-color","wheat"):e.css("background-color","red"),b=!1):(e.css("background-color",""),b=!0);l=!0;this.keepAspectRatio&&(c=Math.round(c*f),c>n?this.settings.autoCorrectManualInput?(a.val(n),e.val(a.val()/f),e.val(),e.css("background-color",""),a.css("background-color",""),l=!0):(c.css("background-color","red"),l=!1):c<m?d?(a.val(m),
e.val(a.val()/f),e.val(),b=!0):(this.settings.autoCorrectManualInput?(a.val(c),a.css("background-color","wheat")):a.css("background-color","red"),l=!1):(a.val(c),a.css("background-color",""),l=!0));return b&&l?!0:!1},setSizeByFieldValue:function(){var b=e("#"+this.ui.imgResizeWidthField.getInputId()).val(),c=e("#"+this.ui.imgResizeHeightField.getInputId()).val();this.setSize(b,c)},setCropAreaByFieldValue:function(){var b=this.jcAPI.tellSelect(),c=e("#"+this.ui.imgResizeWidthField.getInputId()).val(),
c=parseInt(c,10),d=e("#"+this.ui.imgResizeHeightField.getInputId()).val(),d=parseInt(d,10);this.jcAPI.setSelect([b.x,b.y,b.x+c,b.y+d])},insertImg:function(){var b=d.Selection.getRangeObject(),c=this.getEditableConfig(d.activeEditable.obj),e=d.getPluginUrl("image");b.isCollapsed()?(c="max-width: "+c.maxWidth+"; max-height: "+c.maxHeight,e=g('<img style="'+c+'" src="'+e+'/img/blank.jpg" title="" />'),l.Utils.Dom.insertIntoDOM(e,b,g(d.activeEditable.obj))):d.Log.error("img cannot markup a selection")},
srcChange:function(){this.imageObj.attr("src",this.ui.imgSrcField.getValue())},positionCropButtons:function(){var b=g(".jcrop-tracker:first"),c=b.offset(),d=c.top,c=c.left,e=b.height(),b=b.width(),a=g("#aloha-CropNResize-btns");0===d&&0===c&&a.hide();d=parseInt(d+e+3,10);c=parseInt(c+b/2-a.width()/2+10,10);0==c&&0==d||a.offset({top:d,left:c})},initCropButtons:function(){var b=this,c;g("body").append('<div id="aloha-CropNResize-btns" display="none"><button class="cnr-crop-apply" title="'+k.t("Accept")+
'"></button><button class="cnr-crop-cancel" title="'+k.t("Cancel")+'"></button></div>');c=g("#aloha-CropNResize-btns");c.find(".cnr-crop-apply").click(function(){b.acceptCrop()});c.find(".cnr-crop-cancel").click(function(){b.endCrop()});this.interval=setInterval(function(){b.positionCropButtons()},10)},destroyCropButtons:function(){g("#aloha-CropNResize-btns").remove();clearInterval(this.interval)},_disableSelection:function(b){b.find("*").attr("unselectable","on").css({"-moz-user-select":"none",
"-webkit-user-select":"none","user-select":"none"})},crop:function(){var b=this;b.initCropButtons();b.settings.ui.resizable&&b.endResize();b.jcAPI=g.Jcrop(b.imageObj,{onSelect:function(){b._onCropSelect();window.setTimeout(function(){b.ui.setScope()},10)}});b._disableSelection(e(".jcrop-holder"));b._disableSelection(e("#imageContainer"));b._disableSelection(e("#aloha-CropNResize-btns"));e("body").trigger("aloha-image-crop-start",[b.imageObj])},_onCropSelect:function(){g("#aloha-CropNResize-btns").fadeIn("slow");
g(".jcrop-handle").mousedown(function(){g("#aloha-CropNResize-btns").hide()});g(".jcrop-tracker").mousedown(function(){g("#aloha-CropNResize-btns").hide()});if("undefined"!==typeof this.jcAPI&&null!==this.jcAPI){this.positionCropButtons();var b=this.jcAPI.tellSelect();g("#"+this.ui.imgResizeWidthField.getInputId()).val(b.w);g("#"+this.ui.imgResizeHeightField.getInputId()).val(b.h)}},endCrop:function(){this.jcAPI&&(this.jcAPI.destroy(),this.jcAPI=null);this.destroyCropButtons();this.ui._imageCropButton.setState(!1);
this.settings.ui.resizable&&this.startResize();e("body").trigger("aloha-image-crop-stop",[this.imageObj]);e("#"+this.ui.imgResizeHeightField.getInputId()).val(this.imageObj.height());e("#"+this.ui.imgResizeWidthField.getInputId()).val(this.imageObj.width())},acceptCrop:function(){this._onCropped(this.imageObj,this.jcAPI.tellSelect());this.endCrop()},startResize:function(){var b=this,d=this.imageObj,e=b.keepAspectRatio?b.aspectRatioValue:!1,d=this.imageObj.css({height:this.imageObj.height(),width:this.imageObj.width(),
position:"relative","max-height":"","max-width":""});d.resizable({maxHeight:b.settings.maxHeight,minHeight:b.settings.minHeight,maxWidth:b.settings.maxWidth,minWidth:b.settings.minWidth,aspectRatio:e,handles:b.settings.handles,grid:b.settings.grid,resize:function(d,a){c=!0;b._onResize(b.imageObj)},stop:function(d,a){c=!1;b._onResized(b.imageObj);this.enableCrop&&window.setTimeout(function(){b.ui.setScope();that.done(d)},10)}});d.css("display","inline-block");g(".ui-wrapper").attr("contentEditable",
!1).addClass("aloha-image-box-active Aloha_Image_Resize aloha").css({position:"relative",display:"inline-block","float":b.imageObj.css("float")}).bind("resizestart",function(b){b.preventDefault()}).bind("mouseup",function(b){b.originalEvent.stopSelectionUpdate=!0})},endResize:function(){this.imageObj&&this.imageObj.closest(".aloha-editable");this.imageObj&&this.imageObj.is(":ui-resizable")&&this.imageObj.resizable("destroy").css({top:0,left:0})},resetSize:function(){var b=this,c=new Image;c.onload=
function(){var d=b.getPluginFocus();b.settings.ui.resizable&&b.endResize();g(d).add(d.parent()).css({width:c.width+"px",height:c.height+"px","max-width":"","max-height":""});b.settings.ui.resizable&&b.resize()};c.src=b.getPluginFocus().attr("src")},reset:function(){this.settings.ui.crop&&this.endCrop();this.settings.ui.resizable&&this.endResize();if(!this._onReset(this.imageObj))for(var b=0;b<this.restoreProps.length;b++)if(this.imageObj.get(0)===this.restoreProps[b].obj){this.imageObj.attr("src",
this.restoreProps[b].src);this.imageObj.width(this.restoreProps[b].width);this.imageObj.height(this.restoreProps[b].height);break}}})});function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=0.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;
diff_match_patch.prototype.diff_main=function(g,f,n,m){"undefined"==typeof m&&(m=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==g||null==f)throw Error("Null input. (diff_main)");if(g==f)return g?[[DIFF_EQUAL,g]]:[];"undefined"==typeof n&&(n=!0);var k=n,e=this.diff_commonPrefix(g,f);n=g.substring(0,e);g=g.substring(e);f=f.substring(e);var e=this.diff_commonSuffix(g,f),l=g.substring(g.length-e);g=g.substring(0,g.length-e);f=f.substring(0,f.length-e);g=this.diff_compute_(g,
f,k,m);n&&g.unshift([DIFF_EQUAL,n]);l&&g.push([DIFF_EQUAL,l]);this.diff_cleanupMerge(g);return g};
diff_match_patch.prototype.diff_compute_=function(g,f,n,m){if(!g)return[[DIFF_INSERT,f]];if(!f)return[[DIFF_DELETE,g]];var k=g.length>f.length?g:f,e=g.length>f.length?f:g,l=k.indexOf(e);return-1!=l?(n=[[DIFF_INSERT,k.substring(0,l)],[DIFF_EQUAL,e],[DIFF_INSERT,k.substring(l+e.length)]],g.length>f.length&&(n[0][0]=n[2][0]=DIFF_DELETE),n):1==e.length?[[DIFF_DELETE,g],[DIFF_INSERT,f]]:(k=this.diff_halfMatch_(g,f))?(f=k[1],e=k[3],g=k[4],k=this.diff_main(k[0],k[2],n,m),n=this.diff_main(f,e,n,m),k.concat([[DIFF_EQUAL,
g]],n)):n&&100<g.length&&100<f.length?this.diff_lineMode_(g,f,m):this.diff_bisect_(g,f,m)};
diff_match_patch.prototype.diff_lineMode_=function(g,f,n){var m=this.diff_linesToChars_(g,f);g=m[0];f=m[1];m=m[2];g=this.diff_bisect_(g,f,n);this.diff_charsToLines_(g,m);this.diff_cleanupSemantic(g);g.push([DIFF_EQUAL,""]);for(var k=f=0,e=0,l=m="";f<g.length;){switch(g[f][0]){case DIFF_INSERT:e++;l+=g[f][1];break;case DIFF_DELETE:k++;m+=g[f][1];break;case DIFF_EQUAL:if(1<=k&&1<=e){m=this.diff_main(m,l,!1,n);g.splice(f-k-e,k+e);f=f-k-e;for(k=m.length-1;0<=k;k--)g.splice(f,0,m[k]);f+=m.length}k=e=0;
l=m=""}f++}g.pop();return g};
diff_match_patch.prototype.diff_bisect_=function(g,f,n){for(var m=g.length,k=f.length,e=Math.ceil((m+k)/2),l=2*e,d=Array(l),c=Array(l),b=0;b<l;b++)d[b]=-1,c[b]=-1;d[e+1]=0;c[e+1]=0;for(var b=m-k,p=0!=b%2,r=0,u=0,a=0,q=0,t=0;t<e&&!((new Date).getTime()>n);t++){for(var v=-t+r;v<=t-u;v+=2){var x=e+v,C;C=v==-t||v!=t&&d[x-1]<d[x+1]?d[x+1]:d[x-1]+1;for(var y=C-v;C<m&&y<k&&g.charAt(C)==f.charAt(y);)C++,y++;d[x]=C;if(C>m)u+=2;else if(y>k)r+=2;else if(p&&(x=e+b-v,0<=x&&x<l&&-1!=c[x])){var z=m-c[x];if(C>=z)return this.diff_bisectSplit_(g,
f,C,y,n)}}for(v=-t+a;v<=t-q;v+=2){x=e+v;z=v==-t||v!=t&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1;for(C=z-v;z<m&&C<k&&g.charAt(m-z-1)==f.charAt(k-C-1);)z++,C++;c[x]=z;if(z>m)q+=2;else if(C>k)a+=2;else if(!p&&(x=e+b-v,0<=x&&x<l&&-1!=d[x]&&(C=d[x],y=e+C-x,z=m-z,C>=z)))return this.diff_bisectSplit_(g,f,C,y,n)}}return[[DIFF_DELETE,g],[DIFF_INSERT,f]]};
diff_match_patch.prototype.diff_bisectSplit_=function(g,f,n,m,k){var e=g.substring(0,n),l=f.substring(0,m);g=g.substring(n);f=f.substring(m);e=this.diff_main(e,l,!1,k);k=this.diff_main(g,f,!1,k);return e.concat(k)};
diff_match_patch.prototype.diff_linesToChars_=function(g,f){function n(d){for(var c="",b=0,e=-1,f=m.length;e<d.length-1;){e=d.indexOf("\n",b);-1==e&&(e=d.length-1);var l=d.substring(b,e+1),b=e+1;(k.hasOwnProperty?k.hasOwnProperty(l):void 0!==k[l])?c+=String.fromCharCode(k[l]):(c+=String.fromCharCode(f),k[l]=f,m[f++]=l)}return c}var m=[],k={};m[0]="";var e=n(g),l=n(f);return[e,l,m]};
diff_match_patch.prototype.diff_charsToLines_=function(g,f){for(var n=0;n<g.length;n++){for(var m=g[n][1],k=[],e=0;e<m.length;e++)k[e]=f[m.charCodeAt(e)];g[n][1]=k.join("")}};diff_match_patch.prototype.diff_commonPrefix=function(g,f){if(!g||!f||g.charAt(0)!=f.charAt(0))return 0;for(var n=0,m=Math.min(g.length,f.length),k=m,e=0;n<k;)g.substring(e,k)==f.substring(e,k)?e=n=k:m=k,k=Math.floor((m-n)/2+n);return k};
diff_match_patch.prototype.diff_commonSuffix=function(g,f){if(!g||!f||g.charAt(g.length-1)!=f.charAt(f.length-1))return 0;for(var n=0,m=Math.min(g.length,f.length),k=m,e=0;n<k;)g.substring(g.length-k,g.length-e)==f.substring(f.length-k,f.length-e)?e=n=k:m=k,k=Math.floor((m-n)/2+n);return k};
diff_match_patch.prototype.diff_commonOverlap_=function(g,f){var n=g.length,m=f.length;if(0==n||0==m)return 0;n>m?g=g.substring(n-m):n<m&&(f=f.substring(0,n));n=Math.min(n,m);if(g==f)return n;for(var m=0,k=1;;){var e=g.substring(n-k),e=f.indexOf(e);if(-1==e)return m;k+=e;if(0==e||g.substring(n-k)==f.substring(0,k))m=k,k++}};
diff_match_patch.prototype.diff_halfMatch_=function(g,f){function n(b,c,d){for(var f=b.substring(d,d+Math.floor(b.length/4)),a=-1,l="",k,m,g,n;-1!=(a=c.indexOf(f,a+1));){var y=e.diff_commonPrefix(b.substring(d),c.substring(a)),z=e.diff_commonSuffix(b.substring(0,d),c.substring(0,a));l.length<z+y&&(l=c.substring(a-z,a)+c.substring(a,a+y),k=b.substring(0,d-z),m=b.substring(d+y),g=c.substring(0,a-z),n=c.substring(a+y))}return 2*l.length>=b.length?[k,m,g,n,l]:null}if(0>=this.Diff_Timeout)return null;
var m=g.length>f.length?g:f,k=g.length>f.length?f:g;if(4>m.length||2*k.length<m.length)return null;var e=this,l=n(m,k,Math.ceil(m.length/4)),m=n(m,k,Math.ceil(m.length/2));if(l||m)l=m?l?l[4].length>m[4].length?l:m:m:l;else return null;var d,c;g.length>f.length?(m=l[0],k=l[1],d=l[2],c=l[3]):(d=l[0],c=l[1],m=l[2],k=l[3]);return[m,k,d,c,l[4]]};
diff_match_patch.prototype.diff_cleanupSemantic=function(g){for(var f=!1,n=[],m=0,k=null,e=0,l=0,d=0,c=0,b=0;e<g.length;)g[e][0]==DIFF_EQUAL?(n[m++]=e,l=c,d=b,b=c=0,k=g[e][1]):(g[e][0]==DIFF_INSERT?c+=g[e][1].length:b+=g[e][1].length,null!==k&&k.length<=Math.max(l,d)&&k.length<=Math.max(c,b)&&(g.splice(n[m-1],0,[DIFF_DELETE,k]),g[n[m-1]+1][0]=DIFF_INSERT,m--,m--,e=0<m?n[m-1]:-1,b=c=d=l=0,k=null,f=!0)),e++;f&&this.diff_cleanupMerge(g);this.diff_cleanupSemanticLossless(g);for(e=1;e<g.length;){if(g[e-
1][0]==DIFF_DELETE&&g[e][0]==DIFF_INSERT){f=g[e-1][1];n=g[e][1];if(m=this.diff_commonOverlap_(f,n))g.splice(e,0,[DIFF_EQUAL,n.substring(0,m)]),g[e-1][1]=f.substring(0,f.length-m),g[e+1][1]=n.substring(m),e++;e++}e++}};
diff_match_patch.prototype.diff_cleanupSemanticLossless=function(g){function f(a,b){if(!a||!b)return 5;var c=0;if(a.charAt(a.length-1).match(n)||b.charAt(0).match(n))if(c++,a.charAt(a.length-1).match(m)||b.charAt(0).match(m))if(c++,a.charAt(a.length-1).match(k)||b.charAt(0).match(k))c++,(a.match(e)||b.match(l))&&c++;return c}for(var n=/[^a-zA-Z0-9]/,m=/\s/,k=/[\r\n]/,e=/\n\r?\n$/,l=/^\r?\n\r?\n/,d=1;d<g.length-1;){if(g[d-1][0]==DIFF_EQUAL&&g[d+1][0]==DIFF_EQUAL){var c=g[d-1][1],b=g[d][1],p=g[d+1][1],
r=this.diff_commonSuffix(c,b);if(r)var u=b.substring(b.length-r),c=c.substring(0,c.length-r),b=u+b.substring(0,b.length-r),p=u+p;for(var r=c,u=b,a=p,q=f(c,b)+f(b,p);b.charAt(0)===p.charAt(0);){var c=c+b.charAt(0),b=b.substring(1)+p.charAt(0),p=p.substring(1),t=f(c,b)+f(b,p);t>=q&&(q=t,r=c,u=b,a=p)}g[d-1][1]!=r&&(r?g[d-1][1]=r:(g.splice(d-1,1),d--),g[d][1]=u,a?g[d+1][1]=a:(g.splice(d+1,1),d--))}d++}};
diff_match_patch.prototype.diff_cleanupEfficiency=function(g){for(var f=!1,n=[],m=0,k="",e=0,l=!1,d=!1,c=!1,b=!1;e<g.length;)g[e][0]==DIFF_EQUAL?(g[e][1].length<this.Diff_EditCost&&(c||b)?(n[m++]=e,l=c,d=b,k=g[e][1]):(m=0,k=""),c=b=!1):(g[e][0]==DIFF_DELETE?b=!0:c=!0,k&&(l&&d&&c&&b||k.length<this.Diff_EditCost/2&&3==l+d+c+b)&&(g.splice(n[m-1],0,[DIFF_DELETE,k]),g[n[m-1]+1][0]=DIFF_INSERT,m--,k="",l&&d?(c=b=!0,m=0):(m--,e=0<m?n[m-1]:-1,c=b=!1),f=!0)),e++;f&&this.diff_cleanupMerge(g)};
diff_match_patch.prototype.diff_cleanupMerge=function(g){g.push([DIFF_EQUAL,""]);for(var f=0,n=0,m=0,k="",e="",l;f<g.length;)switch(g[f][0]){case DIFF_INSERT:m++;e+=g[f][1];f++;break;case DIFF_DELETE:n++;k+=g[f][1];f++;break;case DIFF_EQUAL:1<n+m?(0!==n&&0!==m&&(l=this.diff_commonPrefix(e,k),0!==l&&(0<f-n-m&&g[f-n-m-1][0]==DIFF_EQUAL?g[f-n-m-1][1]+=e.substring(0,l):(g.splice(0,0,[DIFF_EQUAL,e.substring(0,l)]),f++),e=e.substring(l),k=k.substring(l)),l=this.diff_commonSuffix(e,k),0!==l&&(g[f][1]=e.substring(e.length-
l)+g[f][1],e=e.substring(0,e.length-l),k=k.substring(0,k.length-l))),0===n?g.splice(f-n-m,n+m,[DIFF_INSERT,e]):0===m?g.splice(f-n-m,n+m,[DIFF_DELETE,k]):g.splice(f-n-m,n+m,[DIFF_DELETE,k],[DIFF_INSERT,e]),f=f-n-m+(n?1:0)+(m?1:0)+1):0!==f&&g[f-1][0]==DIFF_EQUAL?(g[f-1][1]+=g[f][1],g.splice(f,1)):f++,n=m=0,e=k=""}""===g[g.length-1][1]&&g.pop();n=!1;for(f=1;f<g.length-1;)g[f-1][0]==DIFF_EQUAL&&g[f+1][0]==DIFF_EQUAL&&(g[f][1].substring(g[f][1].length-g[f-1][1].length)==g[f-1][1]?(g[f][1]=g[f-1][1]+g[f][1].substring(0,
g[f][1].length-g[f-1][1].length),g[f+1][1]=g[f-1][1]+g[f+1][1],g.splice(f-1,1),n=!0):g[f][1].substring(0,g[f+1][1].length)==g[f+1][1]&&(g[f-1][1]+=g[f+1][1],g[f][1]=g[f][1].substring(g[f+1][1].length)+g[f+1][1],g.splice(f+1,1),n=!0)),f++;n&&this.diff_cleanupMerge(g)};
diff_match_patch.prototype.diff_xIndex=function(g,f){var n=0,m=0,k=0,e=0,l;for(l=0;l<g.length;l++){g[l][0]!==DIFF_INSERT&&(n+=g[l][1].length);g[l][0]!==DIFF_DELETE&&(m+=g[l][1].length);if(n>f)break;k=n;e=m}return g.length!=l&&g[l][0]===DIFF_DELETE?e:e+(f-k)};
diff_match_patch.prototype.diff_prettyHtml=function(g){for(var f=[],n=/&/g,m=/</g,k=/>/g,e=/\n/g,l=0;l<g.length;l++){var d=g[l][0],c=g[l][1].replace(n,"&amp;").replace(m,"&lt;").replace(k,"&gt;").replace(e,"&para;<br>");switch(d){case DIFF_INSERT:f[l]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case DIFF_DELETE:f[l]='<del style="background:#ffe6e6;">'+c+"</del>";break;case DIFF_EQUAL:f[l]="<span>"+c+"</span>"}}return f.join("")};
diff_match_patch.prototype.diff_text1=function(g){for(var f=[],n=0;n<g.length;n++)g[n][0]!==DIFF_INSERT&&(f[n]=g[n][1]);return f.join("")};diff_match_patch.prototype.diff_text2=function(g){for(var f=[],n=0;n<g.length;n++)g[n][0]!==DIFF_DELETE&&(f[n]=g[n][1]);return f.join("")};
diff_match_patch.prototype.diff_levenshtein=function(g){for(var f=0,n=0,m=0,k=0;k<g.length;k++){var e=g[k][1];switch(g[k][0]){case DIFF_INSERT:n+=e.length;break;case DIFF_DELETE:m+=e.length;break;case DIFF_EQUAL:f+=Math.max(n,m),m=n=0}}return f+=Math.max(n,m)};
diff_match_patch.prototype.diff_toDelta=function(g){for(var f=[],n=0;n<g.length;n++)switch(g[n][0]){case DIFF_INSERT:f[n]="+"+encodeURI(g[n][1]);break;case DIFF_DELETE:f[n]="-"+g[n][1].length;break;case DIFF_EQUAL:f[n]="="+g[n][1].length}return f.join("\t").replace(/%20/g," ")};
diff_match_patch.prototype.diff_fromDelta=function(g,f){for(var n=[],m=0,k=0,e=f.split(/\t/g),l=0;l<e.length;l++){var d=e[l].substring(1);switch(e[l].charAt(0)){case "+":try{n[m++]=[DIFF_INSERT,decodeURI(d)]}catch(c){throw Error("Illegal escape in diff_fromDelta: "+d);}break;case "-":case "=":var b=parseInt(d,10);if(isNaN(b)||0>b)throw Error("Invalid number in diff_fromDelta: "+d);d=g.substring(k,k+=b);"="==e[l].charAt(0)?n[m++]=[DIFF_EQUAL,d]:n[m++]=[DIFF_DELETE,d];break;default:if(e[l])throw Error("Invalid diff operation in diff_fromDelta: "+
e[l]);}}if(k!=g.length)throw Error("Delta length ("+k+") does not equal source text length ("+g.length+").");return n};diff_match_patch.prototype.match_main=function(g,f,n){if(null==g||null==f||null==n)throw Error("Null input. (match_main)");n=Math.max(0,Math.min(n,g.length));return g==f?0:g.length?g.substring(n,n+f.length)==f?n:this.match_bitap_(g,f,n):-1};
diff_match_patch.prototype.match_bitap_=function(g,f,n){function m(a,b){var c=a/f.length,d=Math.abs(n-b);return e.Match_Distance?c+d/e.Match_Distance:d?1:c}if(f.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var k=this.match_alphabet_(f),e=this,l=this.Match_Threshold,d=g.indexOf(f,n);-1!=d&&(l=Math.min(m(0,d),l),d=g.lastIndexOf(f,n+f.length),-1!=d&&(l=Math.min(m(0,d),l)));for(var c=1<<f.length-1,d=-1,b,p,r=f.length+g.length,u,a=0;a<f.length;a++){b=0;for(p=r;b<p;)m(a,n+
p)<=l?b=p:r=p,p=Math.floor((r-b)/2+b);r=p;b=Math.max(1,n-p+1);var q=Math.min(n+p,g.length)+f.length;p=Array(q+2);for(p[q+1]=(1<<a)-1;q>=b;q--){var t=k[g.charAt(q-1)];p[q]=0===a?(p[q+1]<<1|1)&t:(p[q+1]<<1|1)&t|(u[q+1]|u[q])<<1|1|u[q+1];if(p[q]&c&&(t=m(a,q-1),t<=l))if(l=t,d=q-1,d>n)b=Math.max(1,2*n-d);else break}if(m(a+1,n)>l)break;u=p}return d};
diff_match_patch.prototype.match_alphabet_=function(g){for(var f={},n=0;n<g.length;n++)f[g.charAt(n)]=0;for(n=0;n<g.length;n++)f[g.charAt(n)]|=1<<g.length-n-1;return f};
diff_match_patch.prototype.patch_addContext_=function(g,f){if(0!=f.length){for(var n=f.substring(g.start2,g.start2+g.length1),m=0;f.indexOf(n)!=f.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)m+=this.Patch_Margin,n=f.substring(g.start2-m,g.start2+g.length1+m);m+=this.Patch_Margin;(n=f.substring(g.start2-m,g.start2))&&g.diffs.unshift([DIFF_EQUAL,n]);(m=f.substring(g.start2+g.length1,g.start2+g.length1+m))&&g.diffs.push([DIFF_EQUAL,m]);g.start1-=n.length;g.start2-=
n.length;g.length1+=n.length+m.length;g.length2+=n.length+m.length}};
diff_match_patch.prototype.patch_make=function(g,f,n){var m;if("string"==typeof g&&"string"==typeof f&&"undefined"==typeof n)m=g,f=this.diff_main(m,f,!0),2<f.length&&(this.diff_cleanupSemantic(f),this.diff_cleanupEfficiency(f));else if(g&&"object"==typeof g&&"undefined"==typeof f&&"undefined"==typeof n)f=g,m=this.diff_text1(f);else if("string"==typeof g&&f&&"object"==typeof f&&"undefined"==typeof n)m=g;else if("string"==typeof g&&"string"==typeof f&&n&&"object"==typeof n)m=g,f=n;else throw Error("Unknown call format to patch_make.");
if(0===f.length)return[];n=[];g=new patch_obj;for(var k=0,e=0,l=0,d=m,c=0;c<f.length;c++){var b=f[c][0],p=f[c][1];k||b===DIFF_EQUAL||(g.start1=e,g.start2=l);switch(b){case DIFF_INSERT:g.diffs[k++]=f[c];g.length2+=p.length;m=m.substring(0,l)+p+m.substring(l);break;case DIFF_DELETE:g.length1+=p.length;g.diffs[k++]=f[c];m=m.substring(0,l)+m.substring(l+p.length);break;case DIFF_EQUAL:p.length<=2*this.Patch_Margin&&k&&f.length!=c+1?(g.diffs[k++]=f[c],g.length1+=p.length,g.length2+=p.length):p.length>=
2*this.Patch_Margin&&k&&(this.patch_addContext_(g,d),n.push(g),g=new patch_obj,k=0,d=m,e=l)}b!==DIFF_INSERT&&(e+=p.length);b!==DIFF_DELETE&&(l+=p.length)}k&&(this.patch_addContext_(g,d),n.push(g));return n};diff_match_patch.prototype.patch_deepCopy=function(g){for(var f=[],n=0;n<g.length;n++){var m=g[n],k=new patch_obj;k.diffs=[];for(var e=0;e<m.diffs.length;e++)k.diffs[e]=m.diffs[e].slice();k.start1=m.start1;k.start2=m.start2;k.length1=m.length1;k.length2=m.length2;f[n]=k}return f};
diff_match_patch.prototype.patch_apply=function(g,f){if(0==g.length)return[f,[]];g=this.patch_deepCopy(g);var n=this.patch_addPadding(g);f=n+f+n;this.patch_splitMax(g);for(var m=0,k=[],e=0;e<g.length;e++){var l=g[e].start2+m,d=this.diff_text1(g[e].diffs),c,b=-1;if(d.length>this.Match_MaxBits){if(c=this.match_main(f,d.substring(0,this.Match_MaxBits),l),-1!=c&&(b=this.match_main(f,d.substring(d.length-this.Match_MaxBits),l+d.length-this.Match_MaxBits),-1==b||c>=b))c=-1}else c=this.match_main(f,d,l);
if(-1==c)k[e]=!1,m-=g[e].length2-g[e].length1;else if(k[e]=!0,m=c-l,l=-1==b?f.substring(c,c+d.length):f.substring(c,b+this.Match_MaxBits),d==l)f=f.substring(0,c)+this.diff_text2(g[e].diffs)+f.substring(c+d.length);else if(l=this.diff_main(d,l,!1),d.length>this.Match_MaxBits&&this.diff_levenshtein(l)/d.length>this.Patch_DeleteThreshold)k[e]=!1;else{this.diff_cleanupSemanticLossless(l);for(var d=0,p,b=0;b<g[e].diffs.length;b++){var r=g[e].diffs[b];r[0]!==DIFF_EQUAL&&(p=this.diff_xIndex(l,d));r[0]===
DIFF_INSERT?f=f.substring(0,c+p)+r[1]+f.substring(c+p):r[0]===DIFF_DELETE&&(f=f.substring(0,c+p)+f.substring(c+this.diff_xIndex(l,d+r[1].length)));r[0]!==DIFF_DELETE&&(d+=r[1].length)}}}f=f.substring(n.length,f.length-n.length);return[f,k]};
diff_match_patch.prototype.patch_addPadding=function(g){for(var f=this.Patch_Margin,n="",m=1;m<=f;m++)n+=String.fromCharCode(m);for(m=0;m<g.length;m++)g[m].start1+=f,g[m].start2+=f;var m=g[0],k=m.diffs;if(0==k.length||k[0][0]!=DIFF_EQUAL)k.unshift([DIFF_EQUAL,n]),m.start1-=f,m.start2-=f,m.length1+=f,m.length2+=f;else if(f>k[0][1].length){var e=f-k[0][1].length;k[0][1]=n.substring(k[0][1].length)+k[0][1];m.start1-=e;m.start2-=e;m.length1+=e;m.length2+=e}m=g[g.length-1];k=m.diffs;0==k.length||k[k.length-
1][0]!=DIFF_EQUAL?(k.push([DIFF_EQUAL,n]),m.length1+=f,m.length2+=f):f>k[k.length-1][1].length&&(e=f-k[k.length-1][1].length,k[k.length-1][1]+=n.substring(0,e),m.length1+=e,m.length2+=e);return n};
diff_match_patch.prototype.patch_splitMax=function(g){for(var f=this.Match_MaxBits,n=0;n<g.length;n++)if(g[n].length1>f){var m=g[n];g.splice(n--,1);for(var k=m.start1,e=m.start2,l="";0!==m.diffs.length;){var d=new patch_obj,c=!0;d.start1=k-l.length;d.start2=e-l.length;""!==l&&(d.length1=d.length2=l.length,d.diffs.push([DIFF_EQUAL,l]));for(;0!==m.diffs.length&&d.length1<f-this.Patch_Margin;){var l=m.diffs[0][0],b=m.diffs[0][1];l===DIFF_INSERT?(d.length2+=b.length,e+=b.length,d.diffs.push(m.diffs.shift()),
c=!1):l===DIFF_DELETE&&1==d.diffs.length&&d.diffs[0][0]==DIFF_EQUAL&&b.length>2*f?(d.length1+=b.length,k+=b.length,c=!1,d.diffs.push([l,b]),m.diffs.shift()):(b=b.substring(0,f-d.length1-this.Patch_Margin),d.length1+=b.length,k+=b.length,l===DIFF_EQUAL?(d.length2+=b.length,e+=b.length):c=!1,d.diffs.push([l,b]),b==m.diffs[0][1]?m.diffs.shift():m.diffs[0][1]=m.diffs[0][1].substring(b.length))}l=this.diff_text2(d.diffs);l=l.substring(l.length-this.Patch_Margin);b=this.diff_text1(m.diffs).substring(0,
this.Patch_Margin);""!==b&&(d.length1+=b.length,d.length2+=b.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===DIFF_EQUAL?d.diffs[d.diffs.length-1][1]+=b:d.diffs.push([DIFF_EQUAL,b]));c||g.splice(++n,0,d)}}};diff_match_patch.prototype.patch_toText=function(g){for(var f=[],n=0;n<g.length;n++)f[n]=g[n];return f.join("")};
diff_match_patch.prototype.patch_fromText=function(g){var f=[];if(!g)return f;g=g.split("\n");for(var n=0,m=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;n<g.length;){var k=g[n].match(m);if(!k)throw Error("Invalid patch string: "+g[n]);var e=new patch_obj;f.push(e);e.start1=parseInt(k[1],10);""===k[2]?(e.start1--,e.length1=1):"0"==k[2]?e.length1=0:(e.start1--,e.length1=parseInt(k[2],10));e.start2=parseInt(k[3],10);""===k[4]?(e.start2--,e.length2=1):"0"==k[4]?e.length2=0:(e.start2--,e.length2=parseInt(k[4],
10));for(n++;n<g.length;){k=g[n].charAt(0);try{var l=decodeURI(g[n].substring(1))}catch(d){throw Error("Illegal escape in patch_fromText: "+l);}if("-"==k)e.diffs.push([DIFF_DELETE,l]);else if("+"==k)e.diffs.push([DIFF_INSERT,l]);else if(" "==k)e.diffs.push([DIFF_EQUAL,l]);else if("@"==k)break;else if(""!==k)throw Error('Invalid patch mode "'+k+'" in: '+l);n++}}return f};function patch_obj(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0}
patch_obj.prototype.toString=function(){for(var g=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],f,n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case DIFF_INSERT:f="+";break;case DIFF_DELETE:f="-";break;case DIFF_EQUAL:f=" "}g[n+1]=f+encodeURI(this.diffs[n][1])+"\n"}return g.join("").replace(/%20/g," ")};
window.diff_match_patch=diff_match_patch;window.patch_obj=patch_obj;window.DIFF_DELETE=DIFF_DELETE;window.DIFF_INSERT=DIFF_INSERT;window.DIFF_EQUAL=DIFF_EQUAL;
(function(){function g(e,f){for(var d in f){var c=f[d];void 0!==c&&(e[d]=c)}return e}var f=function(){},n=function(e,l){var d;d=l&&l.hasOwnProperty("constructor")?l.constructor:function(){return e.apply(this,arguments)};f.prototype=e.prototype;d.prototype=new f;l&&g(d.prototype,l);d.prototype.constructor=d;d.__super__=e.prototype;return d},m;m="undefined"!==typeof exports?exports:this.Undo={};m.Stack=function(){this.commands=[];this.savePosition=this.stackPosition=-1};g(m.Stack.prototype,{execute:function(e){this._clearRedo();
e.execute();this.commands.push(e);this.stackPosition++;this.changed()},undo:function(){this.commands[this.stackPosition].undo();this.stackPosition--;this.changed()},canUndo:function(){return 0<=this.stackPosition},redo:function(){this.stackPosition++;this.commands[this.stackPosition].redo();this.changed()},canRedo:function(){return this.stackPosition<this.commands.length-1},save:function(){this.savePosition=this.stackPosition;this.changed()},dirty:function(){return this.stackPosition!=this.savePosition},
_clearRedo:function(){this.commands=this.commands.slice(0,this.stackPosition+1)},changed:function(){}});m.Command=function(e){this.name=e};var k=Error("override me!");g(m.Command.prototype,{execute:function(){throw k;},undo:function(){throw k;},redo:function(){this.execute()}});m.Command.extend=function(e){e=n(this,e);e.extend=m.Command.extend;return e}}).call(this);
define(["aloha","jquery","aloha/plugin","undo/vendor/undo","undo/vendor/diff_match_patch_uncompressed"],function(g,f,n){function m(e){e=k.patch_deepCopy(e);for(var d=0;d<e.length;d++)for(var c=0;c<e[d].diffs.length;c++)e[d].diffs[c][0]=-e[d].diffs[c][0];return e}var k=new diff_match_patch,e=!1;return n.create("undo",{init:function(){this.stack=new Undo.Stack;var f=this,d=Undo.Command.extend({constructor:function(c,b){this.editable=c;this.patch=b},execute:function(){},undo:function(){this.phase(m(this.patch))},
redo:function(){this.phase(this.patch)},phase:function(c){var b=this.editable.getContents();c=k.patch_apply(c,b)[0];this.reset(c)},reset:function(c){e=!0;var b=null;g.getActiveEditable()===this.editable&&(g.deactivateEditable(),b=this.editable);this.editable.obj.html(c);null!==b&&b.activate();this.editable.smartContentChange({type:"blur"});e=!1}});this.stack.changed=function(){};g.bind("aloha-editable-created",function(c,b){b.obj.bind("keydown","ctrl+z shift+ctrl+z",function(b){b.preventDefault();
b.shiftKey?f.redo():f.undo()})});g.bind("aloha-smart-content-changed",function(c,b){var m=b.getSnapshotContent();if(!e){var g=b.editable.getContents(),m=k.patch_make(m,g);0!==m.length&&f.stack.execute(new d(b.editable,m))}})},toString:function(){return"undo"},undo:function(){null!==g.getActiveEditable()&&g.getActiveEditable().smartContentChange({type:"blur"});this.stack.canUndo()&&this.stack.undo()},redo:function(){null!==g.getActiveEditable()&&g.getActiveEditable().smartContentChange({type:"blur"});
this.stack.canRedo()&&this.stack.redo()},stack:void 0})});define({root:{"button.toggledragdrop.tooltip":"Toggle Drag & Drop"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define(["jquery","aloha/observable","util/class"],function(g,f,n){f=n.extend(f,{schema:null,_constructor:function(b){this.schema=b},render:function(){},getValue:function(){},setValue:function(b){},destroy:function(){},_deactivate:function(){this.trigger("change",this.getValue());this.destroy()}});n=f.extend({formInputElementDefinition:null,_$formInputElement:null,render:function(){var b=g('<div class="aloha-block-editor" />'),c=GENTICS.Utils.guid();b.append(this.renderLabel().attr("id",c));b.append(this.renderFormElement().attr("id",
c));return b},renderLabel:function(){var b=g("<label />");b.html(this.schema.label);return b},renderFormElement:function(){var b=this;this._$formInputElement=g(this.formInputElementDefinition);this.afterRenderFormElement(this._$formInputElement);this._$formInputElement.change(function(){b.trigger("change",b.getValue())});return this._$formInputElement},afterRenderFormElement:function(b){},getValue:function(){return this._$formInputElement.val()},setValue:function(b){this._$formInputElement.val(b)},
destroy:function(){this._$formInputElement.remove()}});var m=n.extend({formInputElementDefinition:'<input type="text" />'}),k=n.extend({formInputElementDefinition:'<input type="range" />',afterRenderFormElement:function(b){this.schema.range&&(this.schema.range.min&&b.attr("min",this.schema.range.min),this.schema.range.max&&b.attr("max",this.schema.range.max),this.schema.range.step&&b.attr("step",this.schema.range.step))}}),e=n.extend({formInputElementDefinition:'<input type="url" />'}),l=n.extend({formInputElementDefinition:'<input type="email" />'}),
d=n.extend({formInputElementDefinition:"<select />",afterRenderFormElement:function(b){g.each(this.schema.values,function(){b.append(g("<option />").attr("value",this.key).html(this.label))})}}),c=n.extend({formInputElementDefinition:"<button />",afterRenderFormElement:function(b){var c=this;b.html(this.schema.buttonLabel);b.click(function(){c.schema.callback()})}});return{AbstractEditor:f,AbstractFormElementEditor:n,StringEditor:m,NumberEditor:k,UrlEditor:e,EmailEditor:l,SelectEditor:d,ButtonEditor:c}});
define(["jquery","aloha/contenthandlermanager","block/blockmanager"],function(g,f,n){return f.createHandler({handleContent:function(f){"string"===typeof f?f=g("<div>"+f+"</div>"):f instanceof g&&(f=g("<div>").append(f));0<f.find('.aloha-block[data-aloha-block-copy-only-block="true"]').length&&(f.find(".aloha-block:not([id])").remove(),f.find(".aloha-block + span:empty").remove(),f.find("div:empty").remove(),f.find("br.Apple-interchange-newline").remove(),f.find(".aloha-block").prev("br").remove(),
f.find("div > br:only-child").parent().remove());f.find(".aloha-block").each(function(){var f=g(this),e={},l={};g.each(f[0].attributes,function(b,c){"id"!==c.nodeName&&(c.nodeName.match(/^data-/)?l[c.nodeName.substr(5)]=c.nodeValue:e[c.nodeName]=c.nodeValue)});var d=GENTICS.Utils.guid(),c=g("<"+this.tagName+"/>").attr(e).attr("id",d).removeClass("aloha-block-active").removeClass("aloha-block").html(f.html());f.replaceWith(c);window.setTimeout(function(){n._blockify(g("#"+d),l)},50)});return f.html()}})});
define("aloha jquery block/blockmanager aloha/observable ui/scopes util/class PubSub".split(" "),function(g,f,n,m,k,e,l){function d(b){b=b.closest(".aloha-editable");return b.length?!!b.data("block-dragdrop"):!0}var c=window.GENTICS;m=e.extend(m,{title:null,id:null,$element:null,_currentlyRendering:!1,_initialized:!1,_isInsideNestedEditable:!1,_constructor:function(b,d){var a=this;this.$element=b;b.attr("id")?this.id=b.attr("id"):(this.id=c.Utils.guid(),b.attr("id",this.id));b.contentEditable(!1);
b.addClass("aloha-block");this.isDraggable()&&(b.find("img").attr("draggable","false"),b.find("a").attr("draggable","false"));f.each(d,function(b,c){a._setAttribute(b,c)});this._onElementClickHandler=function(b){f(b.target).closest(".aloha-block").get(0)===a.$element.get(0)&&(a._fixScrollPositionBugsInIE(),a.activate(b.target,b))};this._connectThisBlockToDomElement(b,function(){l.pub("aloha.block.initialized",{block:a})});this._initialized=!0},_onElementClickHandler:null,_preventSelectionChangedEventHandler:function(b){"dblclick"===
b.type||f(b.target).is(".aloha-editable")||g.Selection.preventSelectionChanged()},_connectThisBlockToDomElement:function(b,c){var a=this,d=f(b);this._disconnectFromDomElement();this.$element=d;this.$element.bind("click",this._onElementClickHandler);this.$element.bind("mousedown",this._preventSelectionChangedEventHandler);this.$element.bind("focus",this._preventSelectionChangedEventHandler);this.$element.bind("dblclick",this._preventSelectionChangedEventHandler);this.init(this.$element,function(){window.setTimeout(function(){a._postProcessElementIfNeeded();
c&&c()},5)})},_disconnectFromDomElement:function(){this.$element&&(this.$element.unbind("click",this._onElementClickHandler),this.$element.unbind("mousedown",this._preventSelectionChangedEventHandler),this.$element.unbind("focus",this._preventSelectionChangedEventHandler),this.$element.unbind("dblclick",this._preventSelectionChangedEventHandler))},_fixScrollPositionBugsInIE:function(){var b=f(window).scrollTop();window.setTimeout(function(){f(window).scrollTop()!==b&&f(window).scrollTop(b)},10)},
init:function(b,c){c()},shouldDestroy:function(){var b=this.$element.parent().closest(".aloha-block,.aloha-editable,.aloha-block-collection");return b.hasClass("aloha-block-collection")&&"div"===this.$element[0].tagName.toLowerCase()?!0:b.hasClass("aloha-editable")},destroy:function(b){if(this.shouldDestroy()||!0===b){var d=this,a=new c.Utils.RangeObject;a.startContainer=a.endContainer=this.$element.parent()[0];a.startOffset=a.endOffset=c.Utils.Dom.getIndexInParent(this.$element[0]);n.trigger("block-delete",
this);this.free();var e="span"===this.$element[0].tagName.toLowerCase();this.$element.fadeOut("fast",function(){d.$element.remove();n.trigger("block-selection-change",[]);window.setTimeout(function(){e&&a.select()},5)})}},unblock:function(){this.deactivate();this._disconnectFromDomElement();this.$element.removeClass("aloha-block");this.$element.children(".aloha-block-handle").remove();this.free()},free:function(){n._unregisterBlock(this);this.unbindAll()},getId:function(){return this.id},getSchema:function(){return null},
getTitle:function(){return this.title},isDraggable:function(){return"div"===this.$element[0].tagName.toLowerCase()&&this.$element.parents(".aloha-editable,.aloha-block,.aloha-block-collection").first().hasClass("aloha-block-collection")?!0:this.$element.parents(".aloha-editable,.aloha-block").first().hasClass("aloha-editable")},activate:function(b,c){var a=[];f.each(n._getHighlightedBlocks(),function(){this.deactivate()});"true"!==this.$element.attr("data-block-skip-scope")&&k.setScope("Aloha.Block."+
this.attr("aloha-block-type"));this.$element.addClass("aloha-block-active");this._highlight();a.push(this);this.$element.parents(".aloha-block").each(function(){var b=n.getBlock(this);b&&(b._highlight(),a.push(b))});f(b).closest(".aloha-editable,.aloha-block,.aloha-table-cell-editable,.aloha-table-cell_active").first().hasClass("aloha-block")?(this._isInsideNestedEditable=!1,g.getSelection().removeAllRanges()):(this._isInsideNestedEditable=!0,c&&g.Selection.updateSelection(c));n.trigger("block-activate",
a);n.trigger("block-selection-change",a)},deactivate:function(){var b=this,c=[this];this._unhighlight();this.$element.parents(".aloha-block").each(function(){c.push(this);b._unhighlight()});this.$element.removeClass("aloha-block-active");n.trigger("block-deactivate",c);n.trigger("block-selection-change",[])},isActive:function(){return this.$element.hasClass("aloha-block-active")},_highlight:function(){this.$element.addClass("aloha-block-highlighted");n._setHighlighted(this)},_unhighlight:function(){this.$element.removeClass("aloha-block-highlighted");
n._setUnhighlighted(this)},_update:function(){var b=this;!this._currentlyRendering&&this._initialized&&(this._currentlyRendering=!0,this.update(this.$element,function(){b._postProcessElementIfNeeded()}),this._currentlyRendering=!1)},update:function(b,c){c()},_postProcessElementIfNeeded:function(){this.createEditablesIfNeeded();this._checkThatNestedBlocksAreStillConsistent();this._makeNestedBlockCollectionsSortable();this.renderBlockHandlesIfNeeded();this.isDraggable()&&"span"===this.$element[0].tagName.toLowerCase()?
(this._setupDragDropForInlineElements(),this._disableUglyInternetExplorerDragHandles()):this.isDraggable()&&"div"===this.$element[0].tagName.toLowerCase()&&(this._setupDragDropForBlockElements(),this._disableUglyInternetExplorerDragHandles());this._hideDragHandlesIfDragDropDisabled();this._attachDropzoneHighlightEvents()},_checkThatNestedBlocksAreStillConsistent:function(){this.$element.find(".aloha-block").each(function(){var b=n.getBlock(this);b&&b.$element[0]!==this&&b._connectThisBlockToDomElement(this)})},
_makeNestedBlockCollectionsSortable:function(){var b=this;this.$element.find(".aloha-block-collection").each(function(){var c=f(this);c.closest(".aloha-block").get(0)===b.$element.get(0)&&n.createBlockLevelSortableForEditableOrBlockCollection(c)})},_disableUglyInternetExplorerDragHandles:function(){f.browser.msie&&(this.$element.get(0).onresizestart=function(b){return!1},this.$element.get(0).oncontrolselect=function(b){return!1},this.$element.get(0).onmovestart=function(b){return!1})},_hideDragHandlesIfDragDropDisabled:function(){this._dd_isDragdropEnabled()||
this.$element.find(".aloha-block-draghandle").each(function(){var b=f(this);d(b)||b.removeClass("aloha-block-draghandle")})},_attachDropzoneHighlightEvents:function(){var b=this;this.$element.delegate(".aloha-block-draghandle","mousedown",function(){var c=b.$element.parents(".aloha-editable").first().data("block-dropzones")||[];f.each(c,function(a,b){var c=f(b);f(c).each(function(){f(this).data("block-dragdrop")&&f(this).addClass("aloha-block-dropzone")})});f(document).one("mouseup.aloha-block-dropzone",
function(a){a=b.$element.parents(".aloha-editable").first().data("block-dropzones")||[];f.each(a,function(a,b){f(b).removeClass("aloha-block-dropzone")})})})},_setupDragDropForInlineElements:function(){var b=this,c=null,a=!1,d=null,e=null,l=function(){if(c){var l=f(c);l.is(".aloha-block-dropInlineElementIntoEmptyBlock")?(l.children().remove(),l.append(d)):l.is(".aloha-block-droppable-right")?(l.html(l.html()+" "),l.after(d)):(0<l.prev("[data-i]").length&&l.prev("[data-i]").html(l.prev("[data-i]").html()+
" "),l.html(" "+l.html()),l.before(d));d.removeClass("ui-draggable").css({left:0,top:0});b._fixScrollPositionBugsInIE()}f(".aloha-block-dropInlineElementIntoEmptyBlock").removeClass("aloha-block-dropInlineElementIntoEmptyBlock");e.droppable("destroy");e=null;a=!0},k=[];this.$element.draggable({handle:".aloha-block-draghandle",scope:"aloha-block-inlinedragdrop",disabled:!this._dd_isDragdropEnabled(),revert:function(){return null===c||!a},revertDuration:250,stop:function(){f.browser.msie&&7===parseInt(f.browser.version,
10)&&l();f.each(k,function(){b._dd_traverseDomTreeAndRemoveSpans(this)});d=null;k=[]},start:function(){a=!1;k=[];f(".aloha-editable").children("p:empty").html("&nbsp;");var m={tolerance:"pointer",addClasses:!1,scope:"aloha-block-inlinedragdrop",over:function(a,e){-1===f.inArray(this,k)&&k.push(this);var l=1===f(this).contents().length&&1===f(this).children("br").length;d=e.draggable;f(this).is(":empty")||l||"&nbsp;"===f(this).html()?(f(this).addClass("aloha-block-dropInlineElementIntoEmptyBlock"),
c=this):(b._dd_traverseDomTreeAndWrapCharactersWithSpans(this),f("span[data-i]",this).droppable({tolerance:"pointer",addClasses:!1,scope:"aloha-block-inlinedragdrop",over:function(){c&&f(c).removeClass("aloha-block-droppable");c=this;f(this).addClass("aloha-block-droppable")},out:function(){f(this).removeClass("aloha-block-droppable");c===this&&(c=null)}}),f.ui.ddmanager.prepareOffsets(e.draggable.data("draggable"),a))},out:function(){f(this).removeClass("aloha-block-dropInlineElementIntoEmptyBlock")},
drop:function(){f.browser.msie&&7===parseInt(f.browser.version,10)||l()}};e=f(".aloha-editable.aloha-block-dropzone").children(":not(.aloha-block)");e.droppable(m);f(".aloha-table-cell-editable").droppable(m)}})},_dd_traverseDomTreeAndWrapCharactersWithSpans:function(b){for(var c,a=0,d=b.childNodes.length;a<d;a++)if(c=b.childNodes[a],1===c.nodeType)if(!~c.className.indexOf("aloha-block")&&void 0===c.attributes["data-i"])this._dd_traverseDomTreeAndWrapCharactersWithSpans(c);else{if(c.attributes["data-i"])break}else 3===
c.nodeType&&(c=this._dd_insertSpans(c),a+=c,d+=c)},_dd_splitText:function(b){b=b.split(/(?=\b)/);for(var c=[],a=!1,d=0,e=b.length;d<e;d++)/[^\t\n\r ]/.test(b[d])?a?(c.push(" "+b[d]),a=!1):c.push(b[d]):a=!0;a&&(c[c.length-1]+=" ");return c},_dd_insertSpans:function(b){var c=b.nodeValue;if(!/[^\t\n\r ]/.test(c))return 0;for(var a=document.createDocumentFragment(),c=this._dd_splitText(c),d=c.length,e,l,k,m=0,g=0;g<d;g++)l=c[g],0!==l.length&&(k=Math.floor(l.length/2),e=parseInt(f.browser.version,10),
!f.browser.msie||7!==e&&8!==e||(k=0),0<k&&(e=document.createElement("span"),e.appendChild(document.createTextNode(l.substr(0,k))),e.setAttribute("data-i",g),a.appendChild(e),m++),e=document.createElement("span"),l=l.substr(k),e.appendChild(document.createTextNode(l)),e.setAttribute("data-i",g),e.setAttribute("class","aloha-block-droppable-right"),a.appendChild(e),m++);b.parentNode.replaceChild(a,b);return m-1},_dd_traverseDomTreeAndRemoveSpans:function(b){var c=[],a;a=function(b){for(var d=!1,e,f,
l,k=0,m=b.childNodes.length;k<m;k++)l=b.childNodes[k],1===l.nodeType&&(void 0!==l.attributes["data-i"]?(d||(d=!0,e="",f=void 0),d&&(e+=l.firstChild.nodeValue,f&&c.push(f),f=l)):(d&&(d=!1,f.parentNode.replaceChild(document.createTextNode(e),f)),~l.className.indexOf("aloha-block")||a(l)));d&&f.parentNode.replaceChild(document.createTextNode(e),f)};a(b);b=0;for(var d=c.length;b<d;b++)c[b].parentNode.removeChild(c[b])},_dd_isDragdropEnabled:function(){return d(this.$element.parent())},_setupDragDropForBlockElements:function(){this.$element.find(".aloha-block-draghandle").addClass("aloha-block-draghandle-blocklevel")},
createEditablesIfNeeded:function(){this.$element.find(".aloha-editable").aloha()},renderBlockHandlesIfNeeded:function(){this.isDraggable()&&0===this.$element.children(".aloha-block-draghandle").length&&this.$element.prepend('<span class="aloha-block-handle aloha-block-draghandle aloha-cleanme"></span>')},attr:function(b,c,a){var d=this,e=!1;if(2<=arguments.length){if("aloha-block-"===b.substr(0,12)){g.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+
b+")");return}this._getAttribute(b)!==c&&(e=!0);this._setAttribute(b,c)}else if("object"===typeof b)f.each(b,function(a,b){"aloha-block-"===a.substr(0,12)?g.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")"):(d._getAttribute(a)!==b&&(e=!0),d._setAttribute(a,b))});else return"string"===typeof b?this._getAttribute(b):this._getAttributes();e&&!a&&(this._update(),this.trigger("change"),g.activeEditable&&
g.activeEditable.smartContentChange({type:"block-change"}));return null},_setAttribute:function(b,c){this.$element.attr("data-"+b.toLowerCase(),c)},_getAttribute:function(b){return this.$element.attr("data-"+b.toLowerCase())},_getAttributes:function(){var b={};f.each(this.$element[0].attributes,function(c,a){"data-"===a.name.substr(0,5)&&(b[a.name.substr(5).toLowerCase()]=a.value)});return b}});e=m.extend({update:function(b,c){c()}});var b=m.extend({title:"Debugging",init:function(b,c){this.update(b,
c)},update:function(b,c){b.css({display:"block"});var a='<table class="debug-block">';f.each(this.attr(),function(b,c){a+="<tr><th>"+b+"</th><td>"+c+"</td></tr>"});a+="</table>";b.html(a);c()}}),p=m.extend({title:"EmptyBlock",init:function(){},activate:function(){},deactivate:function(){},renderBlockHandlesIfNeeded:function(){}});return{AbstractBlock:m,DefaultBlock:e,DebugBlock:b,EmptyBlock:p}});
define(["aloha/registry"],function(g){return new (g.extend({createEditor:function(f){if(!this.has(f.type))throw'Editor for type "'+f.type+'" not found.';return new (this.get(f.type))(f)}}))});
define(["jquery","block/blockmanager","aloha/sidebar","block/editormanager","util/class"],function(g,f,n,m,k){return new (k.extend({_sidebar:null,init:function(){this._sidebar=n.right.show();f.bind("block-selection-change",this._onBlockSelectionChange,this)},_onBlockSelectionChange:function(e){var f=this;this._sidebar&&g.each(e,function(){var d=this.getSchema(),c=this,b=[];d&&f._sidebar.addPanel({title:c.getTitle(),expanded:!0,onInit:function(){var e=g("<form />");e.submit(function(){return!1});g.each(d,
function(d,f){var a=m.createEditor(f);a.bind("change",function(a){c.attr(d,a)});c.bind("change",function(){a.setValue(c.attr(d))});e.append(a.render());a.setValue(c.attr(d));b.push(a)});this.setContent(e)},deactivate:function(){g.each(b,function(b,c){c._deactivate()});this.isActive=!1;this.effectiveElement=null}})})}}))});
define("aloha jquery ui/scopes aloha/observable aloha/registry util/class util/strings util/maps".split(" "),function(g,f,n,m,k,e,l,d){var c=window.GENTICS,b=new (e.extend(m,{defaults:{"aloha-block-type":"DefaultBlock"},blockTypes:null,blocks:null,_highlightedBlocks:null,_activeBlock:null,_dragdropEnabled:!0,_constructor:function(){n.createScope("Aloha.Block");this.blockTypes=new k;this.blocks=new k;this._highlightedBlocks={}},registerEventHandlers:function(){var b=this;this._registerEventHandlersForDeactivatingAlohaBlock();
this._registerEventHandlersForDeterminingCurrentlyActiveBlock();this._registerEventHandlersForBlockDeletion();this._registerEventHandlersForCutCopyPaste();this._registerEventHandlersForEditableActivated();g.bind("aloha-selection-changed",function(c,d,a){d&&0<f(d.getCommonAncestorContainer()).parents(".aloha-block").length||b._deactivateHighlightedBlocks()})},_registerEventHandlersForDeactivatingAlohaBlock:function(){var b=this;f(document).bind("click",function(c){d.isEmpty(b._highlightedBlocks)||
0<f(c.target).closest(".aloha-ui,.aloha-block-do-not-deactivate,.aloha-block").length||b._deactivateHighlightedBlocks()})},_registerEventHandlersForDeterminingCurrentlyActiveBlock:function(){var b=this;this.bind("block-selection-change",function(c){b._activeBlock=0<c.length?c[0]:null})},_registerEventHandlersForBlockDeletion:function(){var b=this;g.bind("aloha-command-will-execute",function(c,d){var a=d.commandId,e=0===g.getSelection().getRangeCount()||1===g.getSelection().getRangeCount()&&g.getSelection().getRangeAt(0).endContainer===
g.getSelection().getRangeAt(0).startContainer&&g.getSelection().getRangeAt(0).endContainer===f("body")[0]||1===g.getSelection().getRangeCount()&&g.getSelection().getRangeAt(0).endContainer===g.getSelection().getRangeAt(0).startContainer&&g.getSelection().getRangeAt(0).startOffset+1===g.getSelection().getRangeAt(0).endOffset;if(b._activeBlock&&("delete"===a||"forwarddelete"===a)&&e)d.preventDefault=!0,b._activeBlock.destroy();else if(!b._activeBlock&&("delete"===a||"forwarddelete"===a)&&1===g.getSelection().getRangeCount()&&
!1===g.getSelection().getRangeAt(0).collapsed){var l;l=function(a){for(var b,c=0,d=a.length;c<d;c++)if(b=a[c],1===b.domobj.nodeType){var e=f(b.domobj);"full"===b.selection&&e.is(".aloha-block")?e.remove():l(b.children)}};l(g.Selection.getSelectionTree())}});f(window.document).keydown(function(c){if(0<f(c.target).closest(".aloha-ui").length)return!0;if(b._activeBlock&&(46===c.which||8===c.which)&&!1===b._activeBlock._isInsideNestedEditable&&(f.browser.msie&&8>=parseInt(f.browser.version,10)&&b._activeBlock.$element.parents(".aloha-editable,.aloha-block").first().hasClass("aloha-editable")||
b._activeBlock.shouldDestroy()))return b._activeBlock.destroy(),c.preventDefault(),!1})},_registerEventHandlersForCutCopyPaste:function(){var b=this,d=!1,e=!1,a=null;f(window.document).keydown(function(a){g.activeEditable&&b._activeBlock&&f.contains(b._activeBlock.$element.get(0),g.activeEditable.obj.get(0))||(b._activeBlock&&(a.ctrlKey||a.metaKey)&&67===a.which&&(d=!0,b._activeBlock.$element.attr("data-aloha-block-copy-only-block","true"),c.Utils.Dom.selectDomNode(b._activeBlock.$element[0])),b._activeBlock&&
(a.ctrlKey||a.metaKey)&&88===a.which&&(e=!0,b._activeBlock.$element.attr("data-aloha-block-copy-only-block","true"),c.Utils.Dom.selectDomNode(b._activeBlock.$element[0])))});f(window.document).keyup(function(c){e||!d||67!==c.which&&18!==c.which&&91!==c.which||(d=!1,b._activeBlock.$element.removeAttr("data-aloha-block-copy-only-block"),a&&(a=null));!e||67!==c.which&&18!==c.which&&88!==c.which||(e=!1)})},_registerEventHandlersForEditableActivated:function(){var b=this;g.bind("aloha-editable-activated",
function(c,d){if(d.editable){var a=b.getBlock(d.editable.obj.closest(".aloha-block"));a&&a.activate()}})},initializeBlockLevelDragDrop:function(){var b=this;f.each(g.editables,function(c,d){d.obj.data("block-dragdrop",b._dragdropEnabled);b.createBlockLevelSortableForEditableOrBlockCollection(d.obj)});g.bind("aloha-editable-created",function(c,d){d.obj.data("block-dragdrop",b._dragdropEnabled);b.createBlockLevelSortableForEditableOrBlockCollection(d.obj)})},createBlockLevelSortableForEditableOrBlockCollection:function(b){b.hasClass("aloha-block-blocklevel-sortable")||
(b.addClass("aloha-block-blocklevel-sortable").sortable({revert:100,handle:".aloha-block-draghandle-blocklevel",connectWith:".aloha-block-blocklevel-sortable.aloha-block-dropzone",disabled:!this._dragdropEnabled,start:function(b,c){c.item.data("block-sort-allowed",0<c.item.parents(".aloha-block-dropzone").length)},change:function(b,c){c.item.data("block-sort-allowed",0<c.placeholder.parents(".aloha-block-dropzone").length)},stop:function(b,c){c.item.data("block-sort-allowed")||f(this).sortable("cancel");
c.item.removeData("block-sort-allowed")}}),b.get(0).ondragstart=function(b,c){if(!c||!c.helper||!c.helper.is(".aloha-block"))return!1})},setDragDropState:function(b){this._dragdropEnabled=b},getDragDropState:function(){return this._dragdropEnabled},registerBlockType:function(b,c){n.createScope("Aloha.Block."+b,"Aloha.Block");this.blockTypes.register(b,c)},_blockify:function(b,c){var d=f(b),a=g.require("block/block-plugin"),e=d[0].tagName.toLowerCase();-1===f.inArray(e,a.settings.rootTags)?g.Log.error("block/blockmanager",
"Blocks can only be created from ["+a.settings.rootTags.join(", ")+"] element. You passed "+e+"."):(a=this.getConfig(d,c),this.blockTypes.has(a["aloha-block-type"])?(d=new (this.blockTypes.get(a["aloha-block-type"]))(d,a),d.$element.addClass("aloha-block-"+a["aloha-block-type"]),this.blocks.register(d.getId(),d)):g.Log.error("block/blockmanager","Block Type "+a["aloha-block-type"]+" not found!"))},_unblockify:function(b){(b=this.getBlock(b))&&b.unblock()},getConfig:function(b,c){var d=b.clone(!0),
a=d.data(),e={};d.removeData();for(var k in a)a.hasOwnProperty(k)&&(e[l.camelCaseToDashes(k)]=a[k]);return f.extend({},this.defaults,c,e)},getBlock:function(b){"object"===typeof b&&(b=f(b),b.hasClass("aloha-block-inner")&&(b=b.parent()),b=b.attr("id"));return this.blocks.get(b)},_unregisterBlock:function(b){b="object"===typeof b?b.getId():b;this.blocks.unregister(b)},_deactivateHighlightedBlocks:function(){f.each(f.extend({},this._highlightedBlocks),function(c){(c=b.getBlock(c))&&c.deactivate()})},
_getHighlightedBlocks:function(){var b={};f.each(this.blocks.getEntries(),function(c,d){d.isActive()&&(b[c]=d)});return b},_setHighlighted:function(b){this._highlightedBlocks[b.id]=!0},_setUnhighlighted:function(b){delete this._highlightedBlocks[b.id]}}));g.Block=g.Block||{};return g.Block.BlockManager=b});
define("aloha aloha/plugin jquery aloha/contenthandlermanager block/blockmanager block/sidebarattributeeditor block/block block/editormanager block/blockcontenthandler block/editor ui/ui ui/toggleButton i18n!block/nls/i18n i18n!aloha/nls/i18n jqueryui".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a){var q=["div","span"];f=f.create("block",{config:[],settings:{},init:function(){var a=this;this.settings.rootTags||(this.settings.rootTags=q);k.registerBlockType("DebugBlock",l.DebugBlock);k.registerBlockType("DefaultBlock",
l.DefaultBlock);k.registerBlockType("EmptyBlock",l.EmptyBlock);d.register("string",b.StringEditor);d.register("number",b.NumberEditor);d.register("url",b.UrlEditor);d.register("email",b.EmailEditor);d.register("select",b.SelectEditor);d.register("button",b.ButtonEditor);m.register("block",c);k.setDragDropState(a.isDragDropEnabled());k.registerEventHandlers();k.initializeBlockLevelDragDrop();g.bind("aloha-plugins-loaded",function(){a._createBlocks();!1!==a.settings.sidebarAttributeEditor&&e.init()});
this.createButtons();g.bind("aloha-editable-created",function(b,c){a.setDropzones(c.obj)});g.bind("aloha-editable-activated",function(b,c){a.applyButtonConfig(c.editable)})},applyButtonConfig:function(a){this._isDragdropToggleEnabled(a)?(this._toggleDragDropButton.show(),this._toggleDragDropButton.setState(this._getDragdropState(a))):this._toggleDragDropButton.hide()},_isDragdropToggleEnabled:function(a){a=this.getEditableConfig(a.obj);return(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal||
"toggleDragdrop"===a[0]||!0==a.toggleDragdrop||"true"==a.toggleDragdrop||1==a.toggleDragdrop||"1"==a.toggleDragdrop)&&this.isDragDropEnabled()},_getDragdropState:function(a){return this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal?k.getDragDropState():a.obj.data("block-dragdrop")},_toggleDragdropState:function(a){if(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal){var b=!k.getDragDropState();k.setDragDropState(b);for(var c=0;c<g.editables.length;c++)a=
g.editables[c],this._setDragDropStateForEditable(a.obj,b)}else b=!a.obj.data("block-dragdrop"),this._setDragDropStateForEditable(a.obj,b)},createButtons:function(){var a=this;this._toggleDragDropButton=p.adopt("toggleDragDrop",r,{tooltip:u.t("button.toggledragdrop.tooltip"),icon:"aloha-icon aloha-icon-toggledragdrop",scope:"Aloha.continuoustext",click:function(){a._toggleDragdropState(g.activeEditable)}})},setDropzones:function(a){var b=this.getEditableConfig(a);(b=b&&b.dropzones||this.settings.dropzones)?
a.data("block-dropzones",b):a.data("block-dropzones",[".aloha-editable"])},isDragDropEnabled:function(){return this.settings&&"undefined"!==typeof this.settings.dragdrop?!0===this.settings.dragdrop||"true"===this.settings.dragdrop||1===this.settings.dragdrop||"1"===this.settings.dragdrop:!0},_createBlocks:function(){this.settings.defaults||(this.settings.defaults={});n.each(this.settings.defaults,function(a,b){n(a).alohaBlock(b)})},_setDragDropStateForEditable:function(a,b){a.data("block-dragdrop",
b);a.hasClass("ui-sortable")&&a.sortable("option","disabled",!b);a.find(".aloha-block.ui-draggable").each(function(){n(this).draggable("option","disabled",!b)});a.find(".aloha-block-handle").each(function(){b?n(this).addClass("aloha-block-draghandle"):n(this).removeClass("aloha-block-draghandle")})}});n.fn.alohaBlock=function(a){a=a||{};n(this).each(function(b,c){k._blockify(c,a)});return n(this)};n.fn.mahaloBlock=function(){n(this).each(function(a,b){k._unblockify(b)})};return f});
define("highlighteditables/highlighteditables-plugin",["aloha","jquery","aloha/plugin"],function(g,f,n){var m=window.GENTICS;return n.create("highlighteditables",{config:["highlight"],init:function(){var f=this,e;m.Utils.Position.addMouseMoveCallback(function(){var l,d;for(l=0;l<g.editables.length;l++)d=g.editables[l],e=f.getEditableConfig(d.obj),g.activeEditable||d.isDisabled()||"highlight"!=e||d.obj.addClass("aloha-editable-highlight")});m.Utils.Position.addMouseStopCallback(function(){f.fade()});
g.bind("aloha-editable-activated",function(e,d){f.fade()})},fade:function(){var k,e,l=function(){f(this).css("outline","")};for(k=0;k<g.editables.length;k++)e=g.editables[k].obj,e.hasClass("aloha-editable-highlight")&&e.css("outline",e.css("outlineColor")+" "+e.css("outlineStyle")+" 5px").removeClass("aloha-editable-highlight").animate({outlineWidth:"0px"},300,"swing",l)}})});
define(["jquery"],function(g){var f=function(){var f={};g.each({8:"backspace",9:"tab",13:"enter",16:"shift control alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",37:"left up right down",45:"insert",46:"delete",48:"0 1 2 3 4 5 6 7 8 9",65:"a b c d e f g h i j k l m n o p q r s t u v w x y z",112:"f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13 f14 f15"},function(m,k){var e=parseInt(m,10);g.each(k.split(" "),function(l,d){f[e+l]=d})});return f}();return{getToken:function(g){return f[g]},
keyCodeTokenMap:g.extend({},f)}});define({root:{"button.addlink.tooltip":"Insert Link","button.removelink.tooltip":"Remove Link","newlink.defaulttext":"New Link","floatingmenu.tab.link":"Link","link.target.self":"Self","link.target.blank":"Blank","link.target.parent":"Parent","link.target.top":"Top","link.target.framename":"Framename","link.target.legend":"Target","link.title.legend":"Title",insertLink:"ctrl+k"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define("aloha aloha/plugin aloha/ephemera jquery ui/port-helper-attribute-field ui/ui ui/scopes ui/surface ui/button ui/toggleButton i18n!link/nls/i18n i18n!aloha/nls/i18n aloha/console PubSub util/keys".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q){function t(){m(document).bind("keydown.aloha-link.pointer-fix",function(a){(a.metaKey||"control"===q.getToken(a.keyCode))&&m("body").addClass("aloha-link-pointer")}).bind("keyup.aloha-link.pointer-fix",function(a){(a.metaKey||"control"===q.getToken(a.keyCode))&&
m("body").removeClass("aloha-link-pointer")})}function v(a){a.obj.delegate("a","click.aloha-link.meta-click-link",function(a){if(a.metaKey||a.ctrlKey)return g.activeEditable.blur(),window.setTimeout(function(){location.href=a.target},0),a.stopPropagation(),!1})}function x(b,c){var d,e=!1;!b.ignoreNextSelectionChangedEvent&&g.Selection.isSelectionEditable()&&null!=g.activeEditable?(d=b.findLinkMarkup(c))?(b.toggleLinkScope(!0),b.hrefField.setTargetObject(d,"href"),0==m("#"+b.hrefField.getInputId()).length&&
(null!==b.hrefUpdateInt&&clearInterval(b.hrefUpdateInt),b.hrefUpdateInt=setInterval(function(){0<m("#"+b.hrefField.getInputId()).length&&(b.hrefField.setTargetObject(d,"href"),clearInterval(b.hrefUpdateInt))},200)),g.trigger("aloha-link-selected"),e=!0,a.pub("aloha.link.selected",{input:b.hrefField.getInputElem(),href:b.hrefField.getValue(),element:b.hrefField.getTargetObject()})):(b.toggleLinkScope(!1),b.hrefField.setTargetObject(null),g.trigger("aloha-link-unselected")):b.toggleLinkScope(!1);b.ignoreNextSelectionChangedEvent=
!1;return e}var C=window.GENTICS,y="",z,D={merge:!0,mergeable:function(a){return"aloha-new-link"===a.className&&a.nextSibling&&"aloha-new-link"===a.nextSibling.className}};n.classes("aloha-link-pointer","aloha-link-text");return f.create("link",{config:["a"],targetregex:"",target:"",cssclassregex:null,cssclass:"",objectTypeFilter:[],onHrefChange:null,ignoreNextSelectionChangedEvent:!1,hrefUpdateInt:null,hotKey:{insertLink:p.t("insertLink","ctrl+k")},hrefValue:"http://",init:function(){var b=this;
"undefined"!=typeof this.settings.targetregex&&(this.targetregex=this.settings.targetregex);"undefined"!=typeof this.settings.target&&(this.target=this.settings.target);"undefined"!=typeof this.settings.cssclassregex&&(this.cssclassregex=this.settings.cssclassregex);"undefined"!=typeof this.settings.cssclass&&(this.cssclass=this.settings.cssclass);"undefined"!=typeof this.settings.objectTypeFilter&&(this.objectTypeFilter=this.settings.objectTypeFilter);"undefined"!=typeof this.settings.onHrefChange&&
(this.onHrefChange=this.settings.onHrefChange);"undefined"!=typeof this.settings.hotKey&&m.extend(!0,this.hotKey,this.settings.hotKey);"undefined"!=typeof this.settings.hrefValue&&(this.hrefValue=this.settings.hrefValue);this.createButtons();this.subscribeEvents();this.bindInteractions();g.bind("aloha-plugins-loaded",function(){b.initSidebar(g.Sidebar.right);a.pub("aloha.link.ready",{plugin:b})})},nsSel:function(){var a=[];m.each(arguments,function(){a.push("."+(""==this?"aloha-link":"aloha-link-"+
this))});return m.trim(a.join(" "))},nsClass:function(){var a=[];m.each(arguments,function(){a.push(""==this?"aloha-link":"aloha-link-"+this)});return m.trim(a.join(" "))},initSidebar:function(a){var b=this;b.sidebar=a;a.addPanel({id:b.nsClass("sidebar-panel-target"),title:p.t("floatingmenu.tab.link"),content:"",expanded:!0,activeOn:"a, link",onInit:function(){var a=this;this.setContent('<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+p.t("link.target.legend")+'</legend><ul><li><input type="radio" name="targetGroup" class="'+
b.nsClass("radioTarget")+'" value="_self" /><span>'+p.t("link.target.self")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_blank" /><span>'+p.t("link.target.blank")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_parent" /><span>'+p.t("link.target.parent")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_top" /><span>'+p.t("link.target.top")+
'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="framename" /><span>'+p.t("link.target.framename")+'</span></li><li><input type="text" class="'+b.nsClass("framename")+'" /></li></ul></fieldset></div><div class="'+b.nsClass("title-container")+'" ><fieldset><legend>'+p.t("link.title.legend")+'</legend><input type="text" class="'+b.nsClass("linkTitle")+'" /></fieldset></div>');m(b.nsSel("framename")).live("keyup",function(){m(a.effective).attr("target",
m(this).val().replace('"',"&quot;").replace("'","&#39;"))});m(b.nsSel("radioTarget")).live("change",function(){"framename"==m(this).val()?m(b.nsSel("framename")).slideDown():(m(b.nsSel("framename")).slideUp().val(""),m(a.effective).attr("target",m(this).val()))});m(b.nsSel("linkTitle")).live("keyup",function(){m(a.effective).attr("title",m(this).val().replace('"',"&quot;").replace("'","&#39;"))})},onActivate:function(a){var c=this;c.effective=a;if(null!=m(c.effective).attr("target")){var d=!0;m(b.nsSel("framename")).hide().val("");
m(b.nsSel("radioTarget")).each(function(){m(this).removeAttr("checked");m(this).val()===m(c.effective).attr("target")&&(d=!1,m(this).attr("checked","checked"))});d&&(m(b.nsSel('radioTarget[value="framename"]')).attr("checked","checked"),m(b.nsSel("framename")).val(m(c.effective).attr("target")).show())}else m(b.nsSel("radioTarget")).first().attr("checked","checked"),m(c.effective).attr("target",m(b.nsSel("radioTarget")).first().val());c=this;c.effective=a;m(b.nsSel("linkTitle")).val(m(c.effective).attr("title"))}});
a.show()},subscribeEvents:function(){var a=this,b={},c=0;g.bind("aloha-editable-created",function(d,e){var f=a.getEditableConfig(e.obj),f=-1!==m.inArray("a",f);if(b[e.getId()]=f)e.obj.bind("keydown.aloha-link",a.hotKey.insertLink,function(){a.findLinkMarkup()?(a.hrefField.foreground(),a.hrefField.focus()):a.insertLink(!0);return!1}),e.obj.find("a").each(function(){a.addLinkEventHandlers(this)}),0===c++&&t()});g.bind("aloha-editable-destroyed",function(a,b){b.obj.unbind(".aloha-link");0===--c&&m(document).unbind(".aloha-link.pointer-fix")});
g.bind("aloha-editable-activated",function(c,d){b[g.activeEditable.getId()]?(a._formatLinkButton.show(),a._insertLinkButton.show()):(a._formatLinkButton.hide(),a._insertLinkButton.hide());v(d.editable)});var d=!1;g.bind("aloha-selection-changed",function(c,e){var f=!1;g.activeEditable&&b[g.activeEditable.getId()]&&(f=x(a,e))&&d!==f&&a.hrefField.foreground();d=f});var e=this;g.bind("aloha-editable-deactivated",function(a,b){d&&(setTimeout(function(){d||e.toggleLinkScope(!1)},100),d=!1);b.editable.obj.unbind(".aloha-link.meta-click-link")})},
toggleLinkScope:function(a){this._isScopeActive===a&&g.activeEditable&&this._isScopeActive_editableId===g.activeEditable.getId()||(this._isScopeActive=a,this._isScopeActive_editableId=g.activeEditable&&g.activeEditable.getId(),a?(this.hrefField.show(),this._insertLinkButton.hide(),g.activeEditable&&"A"===g.activeEditable.obj[0].nodeName?this._removeLinkButton.hide():this._removeLinkButton.show(),this._formatLinkButton.setState(!0),l.enterScope(this.name,"link")):(this.hrefField.hide(),this._insertLinkButton.show(),
this._removeLinkButton.hide(),this._formatLinkButton.setState(!1),l.leaveScope(this.name,"link",!0)))},addLinkEventHandlers:function(a){var b=this;m(a).mouseenter(function(c){g.Log.debug(b,"mouse over link.");b.mouseOverLink=a;b.updateMousePointer()});m(a).mouseleave(function(a){g.Log.debug(b,"mouse left link.");b.mouseOverLink=null;b.updateMousePointer()});m(a).click(function(a){if(a.metaKey)return g.activeEditable.blur(),window.setTimeout(function(){location.href=a.target},0),a.stopPropagation(),
!1})},createButtons:function(){var a=this;this._formatLinkButton=e.adopt("formatLink",b,{tooltip:p.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",click:function(){a.formatLink()}});this._insertLinkButton=e.adopt("insertLink",c,{tooltip:p.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",click:function(){a.insertLink(!1)}});this.hrefField=k({name:"editLink",width:320,valueField:"url",cls:"aloha-link-href-field",scope:"Aloha.continuoustext",
noTargetHighlight:!0,targetHighlightClass:"aloha-focus"});this.hrefField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.hrefField.setObjectTypeFilter(this.objectTypeFilter);this._removeLinkButton=e.adopt("removeLink",c,{tooltip:p.t("button.removelink.tooltip"),icon:"aloha-icon aloha-icon-unlink",scope:"Aloha.continuoustext",click:function(){a.removeLink()}})},bindInteractions:function(){var a=this;this.hrefField.addListener("keyup",function(b){if("escape"===q.getToken(b.keyCode)){var c=
a.hrefField.getValue();"/"==c[0]||"#"==c[0]||c.match(/^.*\.([a-z]){2,4}$/i)||c.match(/^([a-z]){3,10}:\/\/.+/i)||c.match(/^(mailto|tel):.+/i)||(c=a.hrefField.getValue(),a.hrefField.setValue(c),c!=a.hrefValue&&""!=c||a.removeLink(!1))}a.hrefChange();"enter"===q.getToken(b.keyCode)?(b=g.Selection.getRangeObject(),a.ignoreNextSelectionChangedEvent=!0,b.startContainer=b.endContainer,b.startOffset=b.endOffset,b.select(),a.ignoreNextSelectionChangedEvent=!0,c=m(a.hrefField.getInputElem()).attr("value"),
c!=a.hrefValue&&""!=c||a.removeLink(!1),window.setTimeout(function(){l.setScope("Aloha.continuoustext")},100)):(z=m(a.hrefField.getInputElem()).attr("value"),y!=z&&(y=z))});m(document).keydown(function(b){g.Log.debug(a,"Meta key down.");a.metaKey=b.metaKey;a.updateMousePointer()}).keyup(function(b){g.Log.debug(a,"Meta key up.");a.metaKey=b.metaKey;a.updateMousePointer()})},updateMousePointer:function(){this.metaKey&&this.mouseOverLink?(g.Log.debug(this,"set pointer"),m(this.mouseOverLink).removeClass("aloha-link-text"),
m(this.mouseOverLink).addClass("aloha-link-pointer")):(m(this.mouseOverLink).removeClass("aloha-link-pointer"),m(this.mouseOverLink).addClass("aloha-link-text"))},findLinkMarkup:function(a){"undefined"==typeof a&&(a=g.Selection.getRangeObject());if(g.activeEditable){var b=g.activeEditable.obj;b[0]&&"A"===b[0].nodeName&&(b=b.parent());return a.findMarkup(function(){return"A"==this.nodeName},b)}return null},formatLink:function(){g.activeEditable&&(this.findLinkMarkup(g.Selection.getRangeObject())?this.removeLink():
this.insertLink())},insertLink:function(b){var c=this,d=g.Selection.getRangeObject(),e;d.startContainer&&d.endContainer&&!this.findLinkMarkup(d)&&(this.hrefField.foreground(),d.isCollapsed()&&!1!==b&&C.Utils.Dom.extendToWord(d),d.isCollapsed()?(b=p.t("newlink.defaulttext"),e=m('<a href="'+c.hrefValue+'" class="aloha-new-link">'+b+"</a>"),C.Utils.Dom.insertIntoDOM(e,d,m(g.activeEditable.obj)),d.startContainer=d.endContainer=e.contents().get(0),d.startOffset=0,d.endOffset=b.length):(e=m('<a href="'+
c.hrefValue+'" class="aloha-new-link"></a>'),C.Utils.Dom.addMarkup(d,e,!1),C.Utils.Dom.doCleanup(D,d)),g.activeEditable.obj.find("a.aloha-new-link").each(function(a){c.addLinkEventHandlers(this);m(this).removeClass("aloha-new-link")}),d.select(),this.hrefField.focus(),this.hrefField.hasInputElem()&&m(this.hrefField.getInputElem()).attr("value",c.hrefValue).select(),b=g.createRange(),b.setStart(d.startContainer,d.startOffset),b.setEnd(d.endContainer,d.endOffset),a.pub("aloha.link.insert",{range:b}),
this.hrefChange())},removeLink:function(a){var b=g.Selection.getRangeObject(),c=this.findLinkMarkup();this.hrefField.setItem(null);c&&(C.Utils.Dom.removeFromDOM(c,b,!0),b.startContainer=b.endContainer,b.startOffset=b.endOffset,b.select(),"undefined"!=typeof a&&!0!==a||l.setScope("Aloha.continuoustext"))},hrefChange:function(){""!=this.target&&this.hrefField.setAttribute("target",this.target,this.targetregex,this.hrefField.getValue());null!=this.cssclassregex&&this.hrefField.setAttribute("class",this.cssclass,
this.cssclassregex,this.hrefField.getValue());var b=this.hrefField.getValue(),c=this.hrefField.getTargetObject();g.trigger("aloha-link-href-change",{href:b,obj:c,item:this.hrefField.getItem()});a.pub("aloha.link.changed",{href:b,element:c,input:this.hrefField.getInputElem()});"function"==typeof this.onHrefChange&&this.onHrefChange.call(this,this.hrefField.getTargetObject(),this.hrefField.getValue(),this.hrefField.getItem())}})});
define({root:{"button.createulist.tooltip":"Insert Unordered List","button.createolist.tooltip":"Insert Ordered List","button.indentlist.tooltip":"Indent List","button.outdentlist.tooltip":"Outdent List","floatingmenu.tab.list":"Lists"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define("aloha jquery aloha/plugin ui/ui ui/scopes ui/button ui/toggleButton i18n!list/nls/i18n i18n!aloha/nls/i18n aloha/engine PubSub".split(" "),function(g,f,n,m,k,e,l,d,c,b,p){function r(a,b){f(a).find(a.nodeName).each(function(){var a=g.Selection.getSelectionTree();u(a,this)&&g.Markup.transformDomObject(this,b,g.Selection.rangeObject)});g.Markup.transformDomObject(a,b,g.Selection.rangeObject)}function u(a,b){var c=!1;f.each(a,function(a,d){if(d.domobj===b&&"none"!==d.selection||u(d.children,b))c=
!0});return c}var a=window.GENTICS,q=n.create("list",{config:["ul","ol"],transformableElements:{p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,ul:!0,ol:!0},init:function(){var a=this;this._orderedListButton=m.adopt("orderedList",l,{tooltip:d.t("button.createolist.tooltip"),icon:"aloha-icon aloha-icon-orderedlist",scope:"Aloha.continuoustext",click:function(){a.transformList(!0)}});this._unorderedListButton=m.adopt("unorderedList",l,{tooltip:d.t("button.createulist.tooltip"),icon:"aloha-icon aloha-icon-unorderedlist",
scope:"Aloha.continuoustext",click:function(){a.transformList(!1)}});this._indentListButton=m.adopt("indentList",e,{tooltip:d.t("button.indentlist.tooltip"),icon:"aloha-icon aloha-icon-indent",scope:"Aloha.continuoustext",click:function(){a.indentList()}});this._outdentListButton=m.adopt("outdentList",e,{tooltip:d.t("button.outdentlist.tooltip"),icon:"aloha-icon aloha-icon-outdent",scope:"Aloha.continuoustext",click:function(){a.outdentList()}});k.createScope("Aloha.List","Aloha.continuoustext");
p.sub("aloha.selection.context-change",function(b){var c,d=b.range;a._outdentListButton.show(!1);a._indentListButton.show(!1);a._unorderedListButton.setState(!1);a._orderedListButton.setState(!1);for(b=0;b<d.markupEffectiveAtStart.length;b++){c=d.markupEffectiveAtStart[b];if(g.Selection.standardTagNameComparator(c,f("<ul></ul>"))){a._unorderedListButton.setState(!0);a._outdentListButton.show(!0);a._indentListButton.show(!0);break}if(g.Selection.standardTagNameComparator(c,f("<ol></ol>"))){a._orderedListButton.setState(!0);
a._outdentListButton.show(!0);a._indentListButton.show(!0);break}}g.activeEditable&&a.applyButtonConfig(g.activeEditable.obj)});g.Markup.addKeyHandler(9,function(b){return a.processTab(b)})},applyButtonConfig:function(a){a=this.getEditableConfig(a);g.Selection.rangeObject.unmodifiableMarkupAtStart[0]&&(-1!=f.inArray("ul",a)&&-1!=g.Selection.canTag1WrapTag2(g.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ul")?this._unorderedListButton.show(!0):this._unorderedListButton.show(!1),-1!=
f.inArray("ol",a)&&-1!=g.Selection.canTag1WrapTag2(g.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ol")?this._orderedListButton.show(!0):this._orderedListButton.show(!1))},processTab:function(a){return 9===a.keyCode?a.shiftKey?this.outdentList():this.indentList():!0},getStartingDomObjectToTransform:function(){var a=g.Selection.rangeObject,b,c;for(b=0;b<a.markupEffectiveAtStart.length;b++)if(c=a.markupEffectiveAtStart[b],this.transformableElements[c.nodeName.toLowerCase()])return c;
return!1},getNearestSelectedListItem:function(){var b=g.Selection.rangeObject,c,d;for(c=0;c<b.markupEffectiveAtStart.length;c++)if(d=b.markupEffectiveAtStart[c],a.Utils.Dom.isListElement(d))return d;return!1},transformList:function(c){var d=this.getStartingDomObjectToTransform(),e,l,k,m;this._outdentListButton.show(!0);this._indentListButton.show(!0);if(!d&&(g.Selection.changeMarkupOnSelection(f("<p></p>")),d=this.getStartingDomObjectToTransform(),!d)){g.Selection.rangeObject.startContainer.contentEditable?
(c=c?f("<ol></ol>"):f("<ul></ul>"),l=f("<li></li>"),c.append(l),k=l.get(0),d=g.getActiveEditable().obj,k.appendChild(document.createTextNode("")),d.append(c),d.focus(),c=g.createRange(),d=g.getSelection(),c.setStart(k.firstChild,0),c.setEnd(k.firstChild,0),d.removeAllRanges(),d.addRange(c),g.Selection.updateSelection()):g.Log.error(this,"Could not transform selection into a list");return}k=d.nodeName.toLowerCase();if("ul"!=k||c)if("ul"==k&&c)r(d,"ol"),this.mergeAdjacentLists(f(d));else if("ol"!=k||
c)if("ol"==k&&c)c=f(d),k=c.parent(),0<k.length&&a.Utils.Dom.isListElement(k.get(0))?"li"===k.get(0).nodeName.toLowerCase()?(k.after(c.children()),c.remove()):c.children().unwrap():(c=f(d),f.each(c.children("li"),function(a,c){m=g.Markup.transformDomObject(c,"p",g.Selection.rangeObject);m.after(m.children("ol,ul"));b.ensureContainerEditable(m.get(0))}),c.children().unwrap());else{k=g.Selection.rangeObject.getSelectedSiblings(d);c=c?f("<ol></ol>"):f("<ul></ul>");l=f("<li></li>");c.append(l);f(d).contents().appendTo(l);
f(d).replaceWith(c);g.Selection.rangeObject.startContainer==d&&(g.Selection.rangeObject.startContainer=l.get(0));g.Selection.rangeObject.endContainer==d&&(g.Selection.rangeObject.endContainer=l.get(0));if(k)for(d=!1,e=0;e<k.length;++e)if(a.Utils.Dom.isBlockLevelElement(k[e]))d&&(d=!1),l=g.Markup.transformDomObject(k[e],"li",g.Selection.rangeObject),c.append(l);else if(3!=k[e].nodeType||0!==f.trim(k[e].data).length)d||(d=f("<li></li>"),c.append(d),l=d),d.append(k[e]);this.mergeAdjacentLists(c);k=l.get(0);
a.Utils.Dom.isEmpty(k)&&(c=g.createRange(),d=g.getSelection(),k.appendChild(document.createTextNode("")),c.selectNodeContents(k.lastChild),d.removeAllRanges(),d.addRange(c),g.Selection.updateSelection())}else r(d,"ul"),this.mergeAdjacentLists(f(d));else c=f(d),k=c.parent(),0<k.length&&a.Utils.Dom.isListElement(k.get(0))?"li"===k.get(0).nodeName.toLowerCase()?(k.after(c.children()),c.remove()):c.children().unwrap():(c=f(d),f.each(c.children("li"),function(a,c){m=g.Markup.transformDomObject(c,"p",g.Selection.rangeObject);
m.after(m.children("ol,ul"));b.ensureContainerEditable(m.get(0))}),c.children().unwrap());this.refreshSelection()},indentList:function(){var a=this.getNearestSelectedListItem(),b,c,d;if(a){d=f(a).prev("li");if(0===d.length)return!1;f(a).parent();c=g.Selection.rangeObject.getSelectedSiblings(a);b=f(a).parent().clone(!1).empty();b.append(a);d.append(b);if(c)for(a=0;a<c.length;++a)b.append(f(c[a]));this.mergeAdjacentLists(b,!0);this.refreshSelection();return!1}return!0},outdentList:function(){var b=
this.getNearestSelectedListItem(),c,d,e,l,k;if(b){d=f(b);e=d.parent();c=e.parents("ul,ol");l=e.parent("li");if(0<c.length&&a.Utils.Dom.isListElement(c.get(0))){k=(b=g.Selection.rangeObject.getSelectedSiblings(b))&&0<b.length?f(b[b.length-1]):d;0<k.nextAll("li").length&&(c=e.clone(!1).empty(),c.append(k.nextAll()),k.append(c));0<l.length?l.after(d):e.before(d);if(b&&0<b.length)for(c=b.length-1;0<=c;--c)d.after(f(b[c]));0===e.contents("li").length&&e.remove();0<l.length&&0===l.contents().length&&l.remove();
this.refreshSelection()}return!1}return!0},refreshSelection:function(){g.Selection.rangeObject.update();g.Selection.rangeObject.select();g.Selection.updateSelection()},mergeAdjacentLists:function(a,b){for(var c=a.get(0),d;c.previousSibling&&1===c.previousSibling.nodeType&&this.isMergable(c.previousSibling,c,b);)c=c.previousSibling;for(a=f(c);c.nextSibling&&(1===c.nextSibling.nodeType&&this.isMergable(c.nextSibling,c,b)||3===c.nextSibling.nodeType&&0===f.trim(c.nextSibling.data).length);)d=f(c.nextSibling),
1==c.nextSibling.nodeType&&d.contents().appendTo(a),d.remove()},isMergable:function(a,b,c){return c?"ul"==a.nodeName.toLowerCase()||"ol"==a.nodeName.toLowerCase():a.nodeName==b.nodeName}});b.commands.insertorderedlist={action:function(a,b){q.transformList(!0);b&&g.Selection.rangeObject&&(b.startContainer=g.Selection.rangeObject.startContainer,b.startOffset=g.Selection.rangeObject.startOffset,b.endContainer=g.Selection.rangeObject.endContainer,b.endOffset=g.Selection.rangeObject.endOffset)},indeterm:function(){},
state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=rangeObject.markupEffectiveAtStart[i];if(g.Selection.standardTagNameComparator(effectiveMarkup,f("<ul></ul>")))break;if(g.Selection.standardTagNameComparator(effectiveMarkup,f("<ol></ol>")))return!0}return!1}};b.commands.insertunorderedlist={action:function(a,b){q.transformList(!1);b&&g.Selection.rangeObject&&(b.startContainer=g.Selection.rangeObject.startContainer,b.startOffset=g.Selection.rangeObject.startOffset,
b.endContainer=g.Selection.rangeObject.endContainer,b.endOffset=g.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=rangeObject.markupEffectiveAtStart[i];if(g.Selection.standardTagNameComparator(effectiveMarkup,f("<ul></ul>")))return!0;if(g.Selection.standardTagNameComparator(effectiveMarkup,f("<ol></ol>")))break}return!1}};b.commands.indent={action:function(a,b){q.indentList();b&&g.Selection.rangeObject&&
(b.startContainer=g.Selection.rangeObject.startContainer,b.startOffset=g.Selection.rangeObject.startOffset,b.endContainer=g.Selection.rangeObject.endContainer,b.endOffset=g.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){return!1}};b.commands.outdent={action:function(a,b){q.outdentList();b&&g.Selection.rangeObject&&(b.startContainer=g.Selection.rangeObject.startContainer,b.startOffset=g.Selection.rangeObject.startOffset,b.endContainer=g.Selection.rangeObject.endContainer,
b.endOffset=g.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){return!1}};return q});
define("aloha jquery table/table-plugin-utils table/table-cell ui/dialog i18n!table/nls/i18n".split(" "),function(g,f,n,m,k,e){function l(b){return{top:b.top[0],right:b.right[0]+1,bottom:b.bottom[0]+1,left:b.left[0]}}function d(b,c,d){var e=!0;-1!==n.indexOfAnyBut(c.top,c.top[0])||-1!==n.indexOfAnyBut(c.right,c.right[0])||-1!==n.indexOfAnyBut(c.bottom,c.bottom[0])||-1!==n.indexOfAnyBut(c.left,c.left[0])?e=!1:(c=l(c),n.walkGridInsideRect(b,c,function(a){if(!d(a))return e=!1}));return e}var c=function(b){this.table=
b};c.prototype.selectionType=void 0;c.prototype.selectedCells=[];c.prototype.selectedColumnIdxs=[];c.prototype.selectedRowIdxs=[];c.prototype.cellSelectionMode=!1;c.prototype.baseCellPosition=null;c.prototype.lastSelectionRange=null;c.prototype.selectColumns=function(b){this.unselectCells();var c=this.table.getRows();c.shift();for(var c=n.makeGrid(c),d=0;d<b.length;d++)if(-1===f.inArray(b[d],this.selectedColumnIdxs)){this.selectedColumnIdxs.push(b[d]);for(var e=0;e<c.length;e++){var a=c[e][b[d]];
n.containsDomCell(a)&&(f(a.cell).addClass(this.table.get("classCellSelected")),this.selectedCells.push(a.cell))}}this.selectionType="column"};c.prototype.selectRows=function(b){this.unselectCells();var c=this.table.getRows();b.sort(function(a,b){return a-b});for(var d=0;d<b.length;d++)if(c[b[d]]){for(var e=0;e<this.selectedRowIdxs.length;e++)if(b[d]==this.selectedRowIdxs[e])return;this.selectedRowIdxs.push(b[d]);for(e=1;e<c[b[d]].cells.length;e++)this.selectedCells.push(c[b[d]].cells[e]),f(c[b[d]].cells[e]).addClass(this.table.get("classCellSelected"))}this.selectionType=
"row"};c.prototype.selectAll=function(){var b=f.map(this.table.getRows(),function(b,c){return c});b.shift();this.selectRows(b)};c.prototype.notifyCellsSelected=function(){g.trigger("aloha-table-selection-changed")};c.prototype._notifyCellsUnselected=function(){g.trigger("aloha-table-selection-changed")};c.prototype.isHeader=function(){if(0==this.selectedCells.length)return!1;for(var b=0;b<this.selectedCells.length;b++)if(!this.selectedCells[b]||"th"!=this.selectedCells[b].nodeName.toLowerCase())return!1;
return!0};c.prototype.unselectCells=function(){var b;if(!this.cellSelectionMode&&0<this.selectedCells.length){b=this.table.getRows();for(var c=0;c<b.length;c++)for(var d=1;d<b[c].cells.length;d++)f(b[c].cells[d]).removeClass(this.table.get("classCellSelected"));this.selectedCells=[];this.selectedColumnIdxs=[];this.selectedRowIdxs=[];this.selectionType="cell";this._notifyCellsUnselected()}};c.prototype.selectionIndex=function(b){for(var c=0;c<this.selectedCells.length;c++)if(this.selectedCells[c]===
b)return c;return-1};c.prototype.mergeCells=function(){var b=this.selectedCells;if(0!==b.length){var c=function(a){return-1!=f.inArray(a.cell,b)},r=n.makeGrid(this.table.getRows()),u=n.makeContour(r,c);if(d(r,u,c)){var a=l(u),c=f(r[a.top][a.left].cell),q=f(m.getContainer(c.get(0)));n.walkGridInsideRect(r,a,function(b,c,d){if(c-b.spannedX!==a.left||d-b.spannedY!==a.top){b=b.cell;c=f(m.getContainer(b)).contents();for(d=0;d<c.length;d++)if("string"!==typeof c[d]||""!==f.trim(c[d])){q.append(" ");q.append(c);
break}f(b).remove()}});c.attr({rowspan:a.bottom-a.top,colspan:a.right-a.left});this.selectedCells=[c.get(0)];this.cellSelectionMode=!1;this.lastSelectionRange=this.baseCellPosition=null;this.selectionType="cell";g.trigger("aloha-table-selection-changed")}else k.alert({title:e.t("Table"),text:e.t("table.mergeCells.notRectangular")})}};c.prototype.splitCells=function(){var b=this,c=this.selectedCells;0<c.length&&(f(c).each(function(){n.splitCell(this,function(){return b.table.newActiveCell().obj})}),
this.cellSelectionMode=!1,this.lastSelectionRange=this.baseCellPosition=null,this.selectionType="cell",g.trigger("aloha-table-selection-changed"))};c.prototype.cellsAreMergeable=function(){var b=this.selectedCells;if(2>b.length)return!1;var c=function(a){return-1!=f.inArray(a.cell,b)},e=n.makeGrid(this.table.getRows()),l=n.makeContour(e,c);return d(e,l,c)?!0:!1};c.prototype.cellsAreSplitable=function(){var b=0;return 0<this.selectedCells.length?(f(this.selectedCells).each(function(){var c=n.colspan(this),
d=n.rowspan(this);(1<c||1<d)&&b++}),0<b?!0:!1):!1};return c});
define(["jquery"],function(g){var f={cellIndexToGridColumn:function(g,m,k){var e=null;f.walkCells(g,function(f,d,c,b,g){if(f===m&&d===k)return e=c,!1});return e},walkCells:function(g,m){for(var k=[],e=0;e<g.length;e++){for(var l=g[e].cells,d=0,c=0;c<l.length;c++){for(var b=l[c],p=f.colspan(b),b=f.rowspan(b);k[c+d];)k[c+d]-=1,d+=1;if(!1===m(e,c,c+d,p,b))return;for(var r=0;r<p;r++){if(k[c+d+r])throw"an impossible case has occurred";k[c+d+r]=b-1}d+=p-1}for(;c+d<k.length;d++)k[c+d]&&(k[c+d]-=1)}},makeGrid:function(g){var m=
[];f.walkCells(g,function(f,e,l,d,c){e=g[f].cells[e];for(var b=0;b<c;b++){m[f+b]=m[f+b]||[];for(var p=0;p<d;p++)m[f+b][l+p]={cell:e,colspan:d,rowspan:c,spannedX:p,spannedY:b}}});return m},containsDomCell:function(f){return 0===f.spannedX&&0===f.spannedY},leftDomCell:function(f,m,k){do{var e=f[m][k];if(0===e.spannedY)return e.cell;k-=e.spannedX+1}while(0<=k);return null},splitCell:function(n,m){var k=g(n),e=f.colspan(n),l=f.rowspan(n);if(1!==e||1!==l){for(var d=k.parent(),c=d.parent().children(),d=
d.index(),b=k.index(),p=f.makeGrid(c),b=f.cellIndexToGridColumn(c,d,b),r=0;r<l;r++)for(var u=0===r?1:0;u<e;u++){var a=f.leftDomCell(p,d+r,b);null==a?c.eq(d+r).prepend(m()):g(a).after(m())}k.removeAttr("colSpan");k.removeAttr("rowSpan")}},rowspan:function(f){return parseInt(g(f).attr("rowspan"))||1},colspan:function(f){return parseInt(g(f).attr("colspan"))||1},walkGrid:function(f,m){for(var k=0;k<f.length;k++)for(var e=0;e<f[k].length;e++)if(!1===m(f[k][e],e,k))return},walkGridInsideRect:function(g,
m,k){f.walkGrid(g,function(e,f,d){if(d>=m.top&&d<m.bottom&&f>=m.left&&f<m.right)return k(e,f,d)})},leftTrimArray:function(f){for(var m=0;m<f.length;m++)if(null!=f[m])return f.slice(m,f.length);return[]},makeContour:function(g,m){var k=[],e=[],l=[],d=[];f.walkGrid(g,function(c,b,f){if(m(c,b,f)){if(null==k[f]||b<k[f])k[f]=b;if(null==e[f]||b>e[f])e[f]=b;if(null==l[b]||f<l[b])l[b]=f;if(null==d[b]||f>d[b])d[b]=f}});k=f.leftTrimArray(k);e=f.leftTrimArray(e);l=f.leftTrimArray(l);d=f.leftTrimArray(d);return{left:k,
right:e,top:l,bottom:d}},indexOfAnyBut:function(f,m){for(var k=0;k<f.length;k++)if(m!==f[k])return k;return-1},isConsecutive:function(f){for(var m=1;m<f.length;m++)if(1!==Math.abs(f[m]-f[m-1]))return!1;return!0},resizeCellWidth:function(f,m){g(f).css("width",m);g(f).find(".aloha-table-cell-editable").eq(0).css({width:m,"word-wrap":"break-word"})},getMinColWidth:function(n){var m=n.closest("tbody").children("tr"),k=n.closest("tr"),e=f.cellIndexToGridColumn(m,m.index(k),k.children().index(n)),l="";
f.walkCells(m,function(d,c,b,f,k){if(b===e&&(d=g(g(m[d]).children()[c]),!(1<f)))for(f=d.text().split(" "),d=0;d<f.length;d++)f[d].length>l.length&&(l=f[d])});k=g("<span></span>");k.css("text-indent",-9999);k.css("display","inline");k.text(l);g(n).append(k);n=k.width();g(k).remove();return n},getCellResizeBoundaries:function(n,m,k){var e,l;f.walkCells(m,function(d,c,b,p,r){d=g(g(m[d]).children()[c]);if(d.hasClass("aloha-table-selectrow")||d.closest("tr").hasClass("aloha-table-selectcolumn"))return!0;
b===n&&1===p&&(e=d.offset().left+f.getCellBorder(d)+d.width()-f.getMinColWidth(d));b===n-1&&1===p&&(l=d.offset().left+f.getCellBorder(d)+f.getCellPadding(d)+f.getMinColWidth(d));if(e&&l)return k(e,l),!1})},getCellBorder:function(f){return(f.outerWidth()-f.innerWidth())/2},getCellPadding:function(f){return f.innerWidth()-f.width()}};return f});
define(["jquery","table/table-plugin-utils"],function(g,f){var n=function(f,k){null==f&&(f="<td>&nbsp;</td>");f=g(f).get(0);this.obj=g(f);this.tableObj=k;k.cells.push(this)};n.prototype.tableObj=void 0;n.prototype.obj=void 0;n.prototype.wrapper=void 0;n.prototype.hasFocus=!1;n.prototype.activate=function(){var m=this,k=m.obj;k.wrapInner("<div/>");var e=k.children("div").eq(0);e.contentEditable(!0);e.addClass("aloha-table-cell-editable");e.bind("focus",function(e){1<f.colspan(m.obj)||1<f.rowspan(m.obj)?
m.tableObj.tablePlugin._splitcellsButton.enable(!0):m.tableObj.tablePlugin._splitcellsButton.enable(!1);e.currentTarget&&(e.currentTarget.indexOf=function(){return-1});m._editableFocus(e)});e.bind("mousedown",function(e){e.currentTarget&&(e.currentTarget.indexOf=function(){return-1});m._editableMouseDown(e);m.tableObj.selection.baseCellPosition=[m._virtualY(),m._virtualX()];if(e.shiftKey){e=m.tableObj.selection.lastBaseCellPosition[1];var d=m.tableObj.selection.lastBaseCellPosition[0],c=m.tableObj.selection.baseCellPosition,
b=c[1];b>e&&(b=e,e=c[1]);var k=c[0];k>d&&(k=d,d=c[0]);var n=k,u=e,a=d,q=b,t=m.tableObj;e=t.obj.children().children("tr");e=f.makeGrid(e);t.selection.selectedCells=[];var v=t.get("classCellSelected");f.walkGrid(e,function(b,c,d){f.containsDomCell(b)&&(d>=n&&d<=a&&c>=q&&c<=u?(g(b.cell).addClass(v),t.selection.selectedCells.push(b.cell)):g(b.cell).removeClass(v))});t.selection.notifyCellsSelected()}else m.tableObj.selection.lastBaseCellPosition=m.tableObj.selection.baseCellPosition,m._editableMouseDown(e),
m._startCellSelection()});e.bind("blur",function(e){m._editableBlur(e)});e.bind("keyup",function(e){m._editableKeyUp(e)});e.bind("keydown",function(e){m._editableKeyDown(e)});e.bind("mouseover",function(e){m._selectCellRange()});e.contentEditableSelectionChange(function(f){Aloha.Selection.onChange(e,f);return e});k.bind("mousedown",function(f){window.setTimeout(function(){m.wrapper.trigger("focus");m._selectAll(e)},1);f.shiftKey||(m.tableObj.selection.unselectCells(),m._startCellSelection());f.stopPropagation()});
k.get(0)&&(k.get(0).onselectstart=function(){return!1});this.wrapper=k.children();this.wrapper.get(0)&&(this.wrapper.get(0).onselectstart=function(){window.event.cancelBubble=!0},this.wrapper.get(0).ondragstart=function(){return!1});return this};n.prototype.deactivate=function(){var f=g(this.obj.children(".aloha-table-cell-editable"));f.length&&(f.parent().append(f.contents()),f.remove(),this.obj.unbind("click"),this.obj.unbind("mousedown"),""==g.trim(this.obj.attr("class"))&&this.obj.removeAttr("class"))};
n.prototype.toString=function(){return"TableCell"};n.prototype._editableFocus=function(f){this.hasFocus||(this.tableObj.focus(),this.obj.addClass("aloha-table-cell_active"),this.hasFocus=!0,this.tableObj.selection.selectionType="cell")};n.prototype._editableBlur=function(f){this.hasFocus=!1;this.obj.removeClass("aloha-table-cell_active")};n.prototype._virtualX=function(){var m=this.tableObj.obj.children().children("tr"),k=this.obj.parent().index(),e=this.obj.index();return f.cellIndexToGridColumn(m,
k,e)};n.prototype._virtualY=function(){return this.obj.parent("tr").index()};n.prototype._startCellSelection=function(){if(!this.tableObj.selection.cellSelectionMode){this.tableObj.selection.unselectCells();this.tableObj.selection.cellSelectionMode=!0;var f=this;g("body").bind("mouseup.cellselection",function(){f._endCellSelection()});this.tableObj.selection.baseCellPosition=[this._virtualY(),this._virtualX()]}};n.prototype._endCellSelection=function(){this.tableObj.selection.cellSelectionMode&&(this.tableObj.selection.cellSelectionMode=
!1,this.tableObj.selection.baseCellPosition=null,this.tableObj.selection.lastSelectionRange=null,this.tableObj.selection.selectionType="cell",g("body").unbind("mouseup.cellselection"))};n.prototype._getSelectedRect=function(){var f=this._virtualX(),k=this._virtualY(),e=this.tableObj.selection.baseCellPosition,l=e[1];l>f&&(l=f,f=e[1]);var d=e[0];d>k&&(d=k,k=e[0]);return{top:d,right:f,bottom:k,left:l}};n.prototype._selectCellRange=function(){if(!this.tableObj.selection.resizeMode&&this.tableObj.selection.cellSelectionMode){var m=
this._getSelectedRect(),k=this.tableObj,e=k.obj.children().children("tr"),e=f.makeGrid(e);k.selection.selectedCells=[];var l=k.get("classCellSelected");f.walkGrid(e,function(d,c,b){f.containsDomCell(d)&&(b>=m.top&&b<=m.bottom&&c>=m.left&&c<=m.right?(g(d.cell).addClass(l),k.selection.selectedCells.push(d.cell)):g(d.cell).removeClass(l))});k.selection.notifyCellsSelected()}};n.prototype._selectAll=function(f){f=f.jquery?f.get(0):f;if(g.browser.msie)document.getSelection?(k=document.getSelection(),e=
document.createRange(),e.selectNodeContents(f),k.removeAllRanges(),k.addRange(e)):document.selection&&(e=document.body.createTextRange(),e.moveToElementText(f),e.select());else{var k=window.getSelection();if(k.setBaseAndExtent)k.setBaseAndExtent(f,0,f,Math.max(0,f.innerText.length-1));else{window.opera&&"<BR>"==f.innerHTML.substring(f.innerHTML.length-4)&&(f.innerHTML+="&#160;");var e=document.createRange();e.selectNodeContents(f);k.removeAllRanges();k.addRange(e)}}};n.prototype._editableMouseDown=
function(f){this.tableObj.selection.unselectCells();this.tableObj.hasFocus&&f.stopPropagation()};n.prototype._editableKeyUp=function(f){};n.prototype._editableKeyDown=function(f){this._checkForEmptyEvent(f);this.obj[0]!==this.tableObj.obj.find("tr:last td:last")[0]||9!=f.keyCode||f.altKey||f.shiftKey||f.ctrlKey||(this.tableObj.addRow(this.obj.parent().index()+1),this.tableObj.cells[this.tableObj.cells.length-1]._selectAll(this.wrapper.get(0)),f.stopPropagation())};n.prototype._checkForEmptyEvent=
function(f){f=g(this.wrapper);var k=f.text();0<f.children().length||""!==k||(this.wrapper.text("\u00a0"),this.wrapper.get(0).blur(),this.wrapper.get(0).focus())};n.getContainer=function(f){return g(f.firstChild).hasClass("aloha-table-cell-editable")?f.firstChild:f};return n});
define("aloha jquery ui/scopes ui/dialog i18n!table/nls/i18n table/table-cell table/table-selection table/table-plugin-utils".split(" "),function(g,f,n,m,k,e,l,d){function c(b,a,c,d){for(var e,l=!1,k=0;k<c.length;k++)d.showItem(c[k].name);d.setActiveItem();for(k=0;k<a.length;k++)if(f(b[0]).hasClass(a[k].cssClass)){l=!0;e=a[k].name;break}f(b).each(function(a){f(this).hasClass(e)||(l=!1)});l&&d.setActiveItem(e)}function b(b,a){var c=-1,d=null;"before"===b?d=a.selectedCells[0]:"after"===b&&(d=a.selectedCells[a.selectedCells.length-
1]);d&&1==d.nodeType&&(c=d.parentNode.rowIndex);return c}var p=window.GENTICS,r=function(b,a){this.obj=f(b);var c,e,k=this.getRows(),g=k.length,m,n=0,r=[g],D;for(c=0;c<g;c++){e=f(k[c]);e=e.children("td, th");m=e.length;m=d.cellIndexToGridColumn(k,c,m-1)+1;D=parseInt(e.last().attr("colspan"),10);0==D||isNaN(D)||(1==D&&e.last().removeAttr("colspan"),m+=D-1);rowSpan=parseInt(e.last().attr("rowspan"),10);if(1<rowSpan)for(e=1;e<rowSpan-1;e++)r[c+e]=1<D?r[c+e]+D:r[c+e]+1;r[c]+=m;r[c]>n&&(n=r[c])}for(c=
0;c<g;c++)e=n-r[c],0<e&&f(k[c]).append(Array(e+1).join("<td></td>"));this.obj.attr("id")||this.obj.attr("id",p.Utils.guid());this.tablePlugin=a;this.selection=new l(this);this.refresh()};f.extend(r.prototype,{obj:void 0,tableWrapper:void 0,cells:void 0,numRows:void 0,numCols:void 0,isActive:!1,hasFocus:!1,parentEditable:void 0,mousedown:!1,clickedColumnId:-1,clickedRowId:-1,columnsToSelect:[],rowsToSelect:[],fmPluginId:void 0});r.prototype.refresh=function(){this.numCols=this.countVirtualCols();var b=
this.getRows();this.numRows=b.length;this.cells=[];for(var a=0;a<b.length;a++)for(var c=f(b[a]).children(),d=0;d<c.length;d++)this.newCell(c[d])};r.prototype.countVirtualCols=function(){var b=this.obj.children().children("tr:first-child").children();return b.length-b.filter("."+this.get("classLeftUpperCorner")).length};r.prototype.get=function(b){return this.tablePlugin.get(b)};r.prototype.set=function(b,a){this.tablePlugin.set(b,a)};r.prototype.activate=function(){if(!this.isActive){var b=this,a;
this.obj.addClass(this.get("className"));this.obj.contentEditable(!1);""==this.obj.attr("id")&&this.obj.attr("id",p.Utils.guid());this.selection.selectionType=void 0;a=this.obj.children("tbody");0===a.length&&(a=this.obj);a.bind("keydown",function(a){a.ctrlKey||a.shiftKey||0<b.selection.selectedCells.length&&0<b.selection.selectedCells[0].length&&b.selection.selectedCells[0][0].firstChild.focus()});a.delegate("td","mousemove",function(a){var c=f(this);if(!f(this).hasClass("aloha-table-selectrow")&&
!f(this).closest("tr").hasClass("aloha-table-selectcolumn")){var d=b.tablePlugin.rowResize;if(b.tablePlugin.colResize&&3>a.pageX-c.offset().left)return c.css("cursor","col-resize"),b.attachColumnResize(c);if(d&&3>a.pageY-c.offset().top)return c.css("cursor","row-resize"),b.attachRowResize(c);d&&(d=c.closest("tr"),0<d.next("tr").length?d=!1:(a=a.pageY-(d.offset().top+d.outerHeight()),d=-3<a&&3>a));if(d)return c.css("cursor","row-resize"),b.attachRowResize(c,!0);c.css("cursor","default");return b.detachRowColResize(c)}});
a.bind("mousemove",function(a){var c=f(this).closest("table"),d;if(d=b.tablePlugin.tableResize)a=a.pageX-(c.offset().left+c.outerWidth()),d=-5<a&&5>a;if(d)return b.attachTableResizeWidth(c)});a.bind("mousedown",function(a){b.hasFocus||b.focus();a.stopPropagation();a.preventDefault();return!1});a=f('<div class="'+this.get("classTableWrapper")+'" data-block-skip-scope="true"></div>');this.obj.wrap(a);a=this.obj.parent();a.alohaBlock&&a.alohaBlock();a=this.obj.parents("."+this.get("classTableWrapper"));
a.get(0).onresizestart=function(a){return!1};a.get(0).oncontrolselect=function(a){return!1};a.get(0).ondragstart=function(a){return!1};a.get(0).onmovestart=function(a){return!1};this.tableWrapper=this.obj.parents("."+this.get("classTableWrapper")).get(0);f(this.cells).each(function(){this.activate()});this.attachSelectionColumn();this.attachSelectionRow();this.makeCaptionEditable();this.checkWai();this.isActive=!0;g.trigger("aloha-table-activated")}};r.prototype.makeCaptionEditable=function(){var b=
this.obj.find("caption").eq(0);b&&this.tablePlugin.makeCaptionEditable(b)};r.prototype.checkWai=function(){var b=this.wai;b&&(b.removeClass(this.get("waiGreen")),b.removeClass(this.get("waiRed")),""!=f.trim(this.obj[0].summary)?b.addClass(this.get("waiGreen")):b.addClass(this.get("waiRed")))};r.prototype.attachSelectionColumn=function(){var b=f("<td>"),a,c,d,e;b.html("\u00a0");d=this.obj.context.rows;for(e=0;e<d.length;e++)c=f(d[e]),a=b.clone(),a.addClass(this.get("classSelectionColumn")),a.css("width",
this.get("selectionArea")+"px"),c.prepend(a),this.attachRowSelectionEventsToCell(a)};r.prototype.attachRowSelectionEventsToCell=function(b){var a=this;b.unbind("mousedown");b.unbind("mouseover");b.get(0).onselectstart=function(){return!1};b.bind("mousedown",function(b){return a.rowSelectionMouseDown(b)});b.bind("mouseover",function(b){if(a.mousedown)return a.rowSelectionMouseOver(b)})};r.prototype.rowSelectionMouseDown=function(b){this.focus();0==this.selection.selectedCells.length&&(this.rowsToSelect=
[]);this.clickedRowId=b.currentTarget.parentNode.rowIndex;if(b.metaKey){var a=f.inArray(this.clickedRowId,this.rowsToSelect);0<=a?this.rowsToSelect.splice(a,1):this.rowsToSelect.push(this.clickedRowId)}else if(b.shiftKey){this.rowsToSelect.sort(function(a,b){return a-b});var c=this.rowsToSelect[0],a=this.clickedRowId;c>a&&(c=a,a=this.rowsToSelect[0]);for(this.rowsToSelect=[];c<=a;c++)this.rowsToSelect.push(c)}else this.rowsToSelect=[this.clickedRowId];this.selectRows();b.preventDefault();b.stopPropagation();
this.tablePlugin.summary.focus();return!1};r.prototype.rowSelectionMouseOver=function(b){var a=b.currentTarget.parentNode.rowIndex,c;if(this.mousedown&&0<=this.clickedRowId){f.inArray(a,this.rowsToSelect);c=a<this.clickedRowId?a:this.clickedRowId;a=a<this.clickedRowId?this.clickedRowId:a;for(this.rowsToSelect=[];c<=a;c++)this.rowsToSelect.push(c);this.selectRows();b.preventDefault();b.stopPropagation();return!1}};r.prototype.attachSelectionRow=function(){var b=this,a=f("<td>");a.html("\u00a0");for(var c=
0,e=0;e<this.obj.context.rows.length;e++){for(var l=0,k=0;k<this.obj.context.rows[e].cells.length;k++)var g=d.colspan(this.obj.context.rows[e].cells[k]),l=l+g;c<l&&(c=l)}l=f("<tr>");l.addClass(this.get("classSelectionRow"));l.css("height",this.get("selectionArea")+"px");for(e=0;e<c;e++)k=a.clone(),0<e?this.attachColumnSelectEventsToCell(k):(k=f("<td>").clone(),k.addClass(this.get("classLeftUpperCorner")),this.wai=f("<div/>").width(25).height(12).click(function(a){b.focus();b.selection.selectAll();
b.tablePlugin.activeTable.selection.selectionType="cell";b.tablePlugin.updateFloatingMenuScope();b._removeCursorSelection();b.tablePlugin.settings.summaryinsidebar&&(b.tablePlugin.sidebar.open(),b.tablePlugin.sidebarPanel.activate(b.obj),b.tablePlugin.sidebar.correctHeight());try{b.tablePlugin.summary.focus(),a.stopPropagation(),a.preventDefault()}catch(c){}return!1}),k.append(this.wai)),l.append(k);f(document).bind("mouseup",function(a){b.columnSelectionMouseUp(a)});this.obj.find("tr:first").before(l)};
r.prototype.attachColumnSelectEventsToCell=function(b){var a=this;b.unbind("mousedown");b.unbind("mouseover");b.get(0).onselectstart=function(){return!1};b.bind("mousedown",function(b){a.columnSelectionMouseDown(b)});b.bind("mouseover",function(b){a.columnSelectionMouseOver(b)})};r.prototype.columnSelectionMouseDown=function(b){this.focus();0==this.selection.selectedCells.length&&(this.columnsToSelect=[]);this.clickedColumnId=f(b.currentTarget.parentNode).children().index(b.currentTarget);if(b.metaKey){var a=
f.inArray(this.clickedColumnId,this.columnsToSelect);0<=a?this.columnsToSelect.splice(a,1):this.columnsToSelect.push(this.clickedColumnId)}else if(b.shiftKey){this.columnsToSelect.sort(function(a,b){return a-b});var c=this.columnsToSelect[0],a=this.clickedColumnId;c>a&&(c=a,a=this.columnsToSelect[0]);for(this.columnsToSelect=[];c<=a;c++)this.columnsToSelect.push(c)}else this.columnsToSelect=[this.clickedColumnId];this.selectColumns();b.preventDefault();b.stopPropagation();return!1};r.prototype.columnSelectionMouseOver=
function(b){var a=b.currentTarget.cellIndex;b=[];var c;if(this.mouseDownColIdx){c=a<this.mouseDownColIdx?a:this.mouseDownColIdx;for(a=a<this.mouseDownColIdx?this.mouseDownColIdx:a;c<=a;c++)b.push(c);this.selectColumns(b)}};r.prototype.columnSelectionMouseUp=function(b){this.mouseDownColIdx=!1};r.prototype.deleteRows=function(){var b=[],a={},c=this;if(0!==this.selection.selectedCells.length){for(var e=0;e<this.selection.selectedCells.length;e++)a[this.selection.selectedCells[e].parentNode.rowIndex]=
!0;for(rowId in a)b.push(rowId);a=!1;b.length==this.numRows&&(a=!0);if(a){var l=this;m.confirm({title:k.t("Table"),text:k.t("deletetable.confirm"),yes:function(){l.deleteTable()}})}else{b.sort(function(a,b){return a-b});var g=b[0];g>this.numRows-b.length&&g--;var p=this.getRows();f.each(b,function(a,b){for(var e=p[b],f=0;f<e.cells.length;f++)d.splitCell(e.cells[f],function(){return c.newActiveCell().obj})});var n=d.makeGrid(p);f.each(b,function(a,b){for(var c=n[b],e=0;e<c.length;){var l=c[e],k=d.rowspan(l.cell);
1<k&&f(l.cell).attr("rowspan",k-1);e+=l.colspan}f(p[b]).remove()});this.numRows-=b.length;window.setTimeout(function(){f(p[1].cells[g+1]).focus()},5);this.selection.unselectCells()}}};r.prototype.deleteColumns=function(){var b=[],a=this.getRows(),c=this,e,l=d.makeGrid(a);if(this.selection.selectedColumnIdxs.length==l[0].length-1)m.confirm({title:k.t("Table"),text:k.t("deletetable.confirm"),yes:function(){c.deleteTable()}});else{b.sort(function(a,b){return a-b});for(var g=this.selection.selectedColumnIdxs.sort(function(a,
b){return b-a}),p=0;p<g.length;p++){for(var n=g[p],r=0;r<a.length;r++)if(e=l[r][n]){if(0===e.spannedX){if(1<e.colspan){var D=this.newActiveCell().obj;f(e.cell).after(D);D.attr("rowspan",e.rowspan);D.attr("colspan",e.colspan-1)}f(e.cell).remove()}else f(e.cell).attr("colspan",e.colspan-1);r+=e.rowspan-1}l=d.makeGrid(a)}this.numCols-=b.length;window.setTimeout(function(){f(a[1].cells[1]).focus()},5);this.selection.unselectCells()}};r.prototype.deleteTable=function(){for(var b=-1,a=0;a<this.tablePlugin.TableRegistry.length;a++)if(this.tablePlugin.TableRegistry[a].obj.attr("id")==
this.obj.attr("id")){b=a;break}0<=b&&(this.deactivate(),this.selection.selectionType=void 0,this.tablePlugin.TableRegistry.splice(a,1),b=g.Selection.rangeObject,b.endContainer=this.obj.get(0).parentNode,b.startContainer=b.endContainer,b.endOffset=p.Utils.Dom.getIndexInParent(this.obj.get(0)),b.startOffset=b.endOffset,b.clearCaches(),this.obj.remove(),this.parentEditable.obj.focus(),b.correctRange(),b.select())};r.prototype.addRowBeforeSelection=function(c){c=b("before",this.selection);-1!==c&&this.addRow(c)};
r.prototype.addRowAfterSelection=function(){var c=b("after",this.selection);-1!==c&&this.addRow(c+1)};r.prototype.addRow=function(b){this.countVirtualCols();for(var a=this.obj.children().children("tr"),c=0;1>c;c++){var e=f("<tr>"),l=f("<td>");l.addClass(this.get("classSelectionColumn"));this.attachRowSelectionEventsToCell(l);e.append(l);l=d.makeGrid(a);if(b>=l.length)for(var k=1;k<l[0].length;k++)e.append(this.newActiveCell().obj);else for(k=1;k<l[b].length;){var g=l[b][k];if(d.containsDomCell(g))for(var m=
g.colspan;m--;)e.append(this.newActiveCell().obj);else f(g.cell).attr("rowspan",g.rowspan+1);k+=g.colspan}b>=a.length?a.eq(a.length-1).after(e):a.eq(b).before(e)}this.numRows+=1};r.prototype.addColumnsRight=function(){this.addColumns("right")};r.prototype.addColumnsLeft=function(){this.addColumns("left")};r.prototype.addColumns=function(b){var a=f("<td>"),c=this.getRows(),e,l;e=this.selection.selectedColumnIdxs;if(0!==e.length)if(e.sort(function(a,b){return a-b}),d.isConsecutive(e)){if("left"===b){l=
e[0];for(var g=0;g<this.selection.selectedColumnIdxs.length;g++)this.selection.selectedColumnIdxs[g]+=1}else l=e[e.length-1];for(var p=d.makeGrid(c),g=0;g<c.length;g++){e=a.clone();e.html("\u00a0");0==g?this.attachColumnSelectEventsToCell(e):(cellObj=this.newActiveCell(e.get(0)),e=cellObj.obj);var n=d.leftDomCell(p,g,l);null==n?f(c[g]).prepend(e):"left"===b&&d.containsDomCell(p[g][l])?f(n).before(e):f(n).after(e);this.numCols++}}else m.alert({title:k.t("Table"),text:k.t("table.addColumns.nonConsecutive")})};
r.prototype.focus=function(){this.hasFocus||(this.parentEditable.isActive||this.parentEditable.obj.focus(),this.tablePlugin.setFocusedTable(this))};r.prototype.focusOut=function(){this.hasFocus&&(this.tablePlugin.setFocusedTable(void 0),this.selection.selectionType=void 0)};r.prototype._removeCursorSelection=function(){var b=g.getSelection();b&&b._nativeSelection&&0!=b._nativeSelection._ranges.length&&(b=b.getRangeAt(0),null!=b.startContainer&&0===f(b.startContainer).closest("table").length&&0!==
this.selection.selectedCells.length&&(b=e.getContainer(this.selection.selectedCells[0]),f(b).focus()))};r.prototype.selectColumns=function(b){b=b?b:this.columnsToSelect;n.setScope(this.tablePlugin.name+".column");this.selection.selectColumns(b);this.tablePlugin._columnheaderButton.setState(this.selection.isHeader());c(this.selection.selectedCells,this.tablePlugin.columnConfig,this.tablePlugin.columnMSItems,this.tablePlugin.columnMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();this.selection.notifyCellsSelected();
this._removeCursorSelection()};r.prototype.selectRows=function(){n.setScope(this.tablePlugin.name+".row");this.selection.selectRows(this.rowsToSelect);this.tablePlugin._rowheaderButton.setState(this.selection.isHeader());c(this.selection.selectedCells,this.tablePlugin.rowConfig,this.tablePlugin.rowMSItems,this.tablePlugin.rowMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();this.selection.notifyCellsSelected();this._removeCursorSelection()};r.prototype.deactivate=function(){var b=
this.obj.parent();b.mahaloBlock&&b.mahaloBlock();this.obj.removeClass(this.get("className"));""==f.trim(this.obj.attr("class"))&&this.obj.removeAttr("class");this.obj.removeAttr("contenteditable");this.obj.parents("."+this.get("classTableWrapper")).length&&this.obj.unwrap();this.obj.find("tr."+this.get("classSelectionRow")+":first").remove();var a=this;f.each(this.obj.context.rows,function(){f(this).children("td."+a.get("classSelectionColumn")).remove()});this.obj.find("td, th").removeClass(this.get("classCellSelected"));
this.obj.find("td, th").removeClass("aloha-table-cell_active");this.obj.find("td, th").css("cursor","");this.obj.unbind();this.obj.children("tbody").unbind();for(b=0;b<this.cells.length;b++)this.cells[b].deactivate();this.obj.find("caption div").each(function(){f(this).contents().unwrap()});this.isActive=!1};r.prototype.attachColumnResize=function(b){var a=this;a.detachRowColResize(b);var c=b.closest("tbody").children("tr"),e=b.closest("tr"),l=d.cellIndexToGridColumn(c,c.index(e),e.children().index(b)),
k=function(a){var b,e;d.walkCells(c,function(k,g,m,p,n){k=f(f(c[k]).children()[g]);if(k.hasClass("aloha-table-selectrow")||k.closest("tr").hasClass("aloha-table-selectcolumn")||1<p)return!0;m===l?(e||(e=k.width()-a),d.resizeCellWidth(k,e)):m===l-1&&(b||(b=k.width()+a),d.resizeCellWidth(k,b));return!0})};b.bind("mousedown.resize",function(){var e=f("<div></div>");e.css({height:f(b).closest("tbody").innerHeight(),width:f(b).outerWidth()-f(b).innerWidth(),top:f(b).closest("tbody").offset().top,left:f(b).offset().left,
position:"absolute","background-color":"#80B5F2"});f("body").append(e);d.getCellResizeBoundaries(l,c,function(c,d){a.selection.resizeMode=!0;f("body").bind("mousemove.dnd_col_resize",function(a){a.pageX>d&&a.pageX<c&&e.css("left",a.pageX)});f("body").bind("mouseup.dnd_col_resize",function(l){var g=0;l.pageX<d?g=d-b.offset().left:l.pageX>d&&l.pageX<c?g=l.pageX-b.offset().left:l.pageX>c&&(g=c-b.offset().left);0!==g&&k(g);f("body").unbind("mousemove.dnd_col_resize");f("body").unbind("mouseup.dnd_col_resize");
a.selection.resizeMode=!1;e.remove()})})})};r.prototype.attachRowResize=function(b,a){var c=this;c.detachRowColResize(b);b.bind("mousedown.resize",function(){var d=f("<div></div>");d.css({width:b.closest("tbody").innerWidth(),height:b.outerHeight()-b.innerHeight(),top:a?b.offset().top+b.outerHeight():b.offset().top,left:b.closest("tbody").offset().left,position:"absolute","background-color":"#80B5F2"});f("body").append(d);c.selection.resizeMode=!0;f("body").bind("mousemove.dnd_row_resize",function(c){var e=
c.pageY,f;f=a?b.closest("tr").offset().top:b.closest("tr").prev("tr").offset().top;e>f&&d.css("top",c.pageY)});f("body").bind("mouseup.dnd_row_resize",function(e){var l=0,l=a?e.pageY-(b.offset().top+b.outerHeight()):e.pageY-b.offset().top;e=a?b.closest("tr"):b.closest("tr").prev("tr");l=e.height()+l;0>l&&(l=1);e.css("height",l);f("body").unbind("mousemove.dnd_row_resize");f("body").unbind("mouseup.dnd_row_resize");c.selection.resizeMode=!1;d.remove()})})};r.prototype.attachTableResizeWidth=function(b){var a=
this,c=b.closest(".aloha-table-wrapper"),e=b.find("tr:not(.aloha-table-selectcolumn) td:last-child"),l;f.each(e,function(){if(!f(this).attr("colspan")||2>f(this).attr("colspan"))return l=f(this),!1});e.css("cursor","col-resize");var k=function(a){var c=b.find("tr"),e=l.closest("tr"),k=d.cellIndexToGridColumn(c,c.index(e),e.children().index(l)),g=a-d.getCellBorder(l)-d.getCellPadding(l);d.walkCells(c,function(a,b,e,l,m){a=f(f(c[a]).children()[b]);if(a.hasClass("aloha-table-selectrow")||a.closest("tr").hasClass("aloha-table-selectcolumn")||
1<l)return!0;e===k?d.resizeCellWidth(a,g):d.resizeCellWidth(a,a.width());return!0})};e.bind("mousedown.resize",function(){var g=f("<div></div>");g.css({height:b.children("tbody").innerHeight(),width:l.outerWidth()-l.innerWidth(),top:b.find("tbody").offset().top,left:b.offset().left+b.outerWidth(),position:"absolute","background-color":"#80B5F2"});f("body").append(g);var m=c.offset().left+c.width(),p=l.offset().left+(l.innerWidth()-l.width())+d.getMinColWidth(l);a.selection.resizeMode=!0;f("body").bind("mousemove.dnd_col_resize",
function(a){a.pageX>p&&a.pageX<m&&g.css("left",a.pageX)});f("body").bind("mouseup.dnd_col_resize",function(b){var c=0;b.pageX<=p?c=p-l.offset().left:b.pageX>p&&b.pageX<m?c=b.pageX-l.offset().left:b.pageX>m&&(c=m-l.offset().left);k(c);f("body").unbind("mousemove.dnd_col_resize");f("body").unbind("mouseup.dnd_col_resize");e.unbind("mousedown.resize");e.css("cursor","default");a.selection.resizeMode=!1;g.remove()})})};r.prototype.detachRowColResize=function(b){return b.unbind("mousedown.resize")};r.prototype.toString=
function(){return"Table"};r.prototype.newCell=function(b){return new e(b,this)};r.prototype.newActiveCell=function(b){b=new e(b,this);b.activate();return b};r.prototype.getRows=function(){var b=this.obj.get(0).rows;return f.makeArray(b)};return r});
define(["jquery"],function(g){CreateLayer=function(f){this.TablePlugin=f};CreateLayer.prototype.parameters={elemId:"aloha-table-createLayer",className:"aloha-table-createdialog",numX:10,numY:10,layer:void 0,target:void 0};CreateLayer.prototype.config={};CreateLayer.prototype.visible=!1;CreateLayer.prototype.show=function(){var f=this.get("layer");null==f?this.create():(this.setPosition(f),f.find("td").removeClass("hover"),f.show());this.visible=!0};CreateLayer.prototype.create=function(){var f=this,
n=g("<div></div>");n.id=this.get("elemId");n.addClass(this.get("className"));var m=g("<table></table>");m.css("width",15*(this.get("numX")+6));for(var k,e,l=0;l<this.get("numY");l++){k=g("<tr></tr>");for(var d=0;d<this.get("numX");d++)e=g("<td>\u00a0</td>"),0==l&&0==d&&e.addClass("hover"),e.bind("mouseover",{rowId:l,colId:d},function(c){f.handleMouseOver(c,m)}),e.bind("click",{rowId:l,colId:d},function(c){f.TablePlugin.createTable(c.data.colId+1,c.data.rowId+1);f.hide()}),k.append(e);m.append(k)}n.append(m);
this.set("layer",n);this.setPosition();n.bind("click",function(c){c.stopPropagation()}).mousedown(function(c){c.stopPropagation()});g("body").append(n).bind("click",function(c){f.visible&&c.target!==f.get("target")[0]&&!g.contains(f.get("target")[0],c.target)&&f.hide()})};CreateLayer.prototype.handleMouseOver=function(f,n){for(var m=f.data.rowId,k=f.data.colId,e=n.find("tr"),l=0;l<=e.length;l++)for(var d=g(e[l]).find("td"),c=0;c<=d.length;c++)l<=m&&c<=k?g(d[c]).addClass("hover"):g(d[c]).removeClass("hover")};
CreateLayer.prototype.setPosition=function(){var f=g(this.get("target")),n=f.offset();this.get("layer").css("left",n.left+"px");this.get("layer").css("top",n.top+f.height()+"px")};CreateLayer.prototype.hide=function(){this.get("layer").hide();this.visible=!1};CreateLayer.prototype.get=function(f){if(this.config[f])return this.config[f];if(this.parameters[f])return this.parameters[f]};CreateLayer.prototype.set=function(f,g){this.config[f]?this.config[f]=g:this.parameters[f]=g};return CreateLayer});
define({root:{"floatingmenu.tab.table":"Table","floatingmenu.tab.tablelayout":"Table Layout","deleterows.confirm":"Do you really want to delete the selected rows?","deletecolumns.confirm":"Do you really want to delete the selected columns?","deletetable.confirm":"Do you really want to delete the table?",Table:"Table","button.createtable.tooltip":"Insert Table","button.addcolleft.tooltip":"Add Column left","button.addcolright.tooltip":"Add Column right","button.delcols.tooltip":"Delete Columns","button.addrowbefore.tooltip":"Add Row before",
"button.addrowafter.tooltip":"Add Row after","button.delrows.tooltip":"Delete Rows","button.caption.tooltip":"Table caption","button.naturalfit.tooltip":"Reset table sizing","empty.caption":"Table caption","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting","button.rowheader.tooltip":"Format row as table header","button.columnheader.tooltip":"Format column as table header","button.mergecells.tooltip":"Merge Cells","button.splitcells.tooltip":"Split Cells",
"table.label.target":"Summary","table.sidebar.title":"Table","table.mergeCells.notRectangular":"Only a rectangular selection can be merged","table.addColumns.nonConsecutive":"Please select a single column or a consecutive range of columns","table.createTable.nestedTablesNoSupported":"Sorry, nested tables are not supported"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define(["jquery","jqueryui"],function(g){(function(f){function g(e,l){var d=RegExp(f.ui.autocomplete.escapeRegex(l),"i");return f.grep(e,function(c){return d.test(f("<div>").html(c.label||c.value||c).text())})}var m=f.ui.autocomplete.prototype,k=m._initSource;f.extend(m,{_initSource:function(){this.options.html&&f.isArray(this.options.source)?this.source=function(e,f){f(g(this.options.source,e.term))}:k.call(this)},_renderItem:function(e,l){return f("<li></li>").data("item.autocomplete",l).append(f("<a></a>")[this.options.html?
"html":"text"](l.label)).appendTo(e)}})})(g)});
define("jquery ui/ui ui/component ui/scopes ui/context ui/utils aloha/repositorymanager aloha/selection aloha/console ui/vendor/jquery-ui-autocomplete-html".split(" "),function(g,f,n,m,k,e,l,d,c){return function(b){function c(a,b){b.item&&C(b.item.obj);u()}function m(){u()}function u(){a();s&&Q!==g(s).attr(T)&&(S||l.markObject(s),""===v()&&t())}function a(){var a=g(s);I&&a.removeClass(I);if(!M){var b=a.attr("data-original-background-color");a.css("background-color",b||"");a.attr("style")||a.removeAttr("style");
a.removeAttr("data-original-background-color")}}function q(a,b){return a.replace(/\{([^}]+)\}/g,function(a,c){return c in b?b[c]:""})}function t(){null!==H&&(J.css("color","#AAA"),J.val(H))}function v(){return J.val()}function x(a){J.val(a);J.css("color","black")}function C(a){if(S=a){var b=a[D];x(b);O=b;y(T,a[z]);l.markObject(s,a)}else O=null}function y(a,b,c,d){if(s){var e=!0;"undefined"!=typeof d&&(d.match(RegExp(c))||(e=!1));e?g(s).attr(a,b):g(s).removeAttr(a)}}var z=b.valueField||"id",D=b.displayField||
"name",F=b.objectTypeFilter||["all"],H=b.placeholder,M=!!b.noTargetHighlight,I=b.targetHighlightClass,J=b.element?g(b.element):g('<input id="aloha-attribute-field-'+b.name+'">'),K,G,S,O,s,T,Q;b.cls&&J.addClass(b.cls);b.width&&J.width(b.width);K=f.adopt(b.name,n,{scope:b.scope,init:function(){b.element?this.element=J:b.label?(this.element=e.wrapWithLabel(b.label,J),b.labelClass&&this.element.addClass(b.labelClass)):this.element=g("<span>").append(J);J.autocomplete({html:!0,appendTo:k.selector,source:function(a,
b){l.query({queryString:a.term,objectTypeFilter:F},function(a){b(g.map(a.items,function(a){return{label:q(G,a),value:a.name,obj:a}}))})},select:c})}});J.bind("focus",function(b,c){if(g(b.target).is(":visible")){var d=g(s);I&&d.addClass(I);M||(a(),d.context&&d.context.style&&d.context.style["background-color"]&&d.attr("data-original-background-color",d.context.style["background-color"]),d.css("background-color","#80B5F2"));v()===H&&x("")}}).bind("blur",m).bind("keydown",function(a){13!=a.keyCode&&
27!=a.keyCode||a.preventDefault()}).bind("keyup",function(a){S&&O!==v()&&(O=S=null);S||y(T,v());if(13==a.keyCode||27==a.keyCode)d.getRangeObject().select(),u()});t();Aloha.bind("aloha-editable-deactivated",m);var U={getInputElem:function(){return J[0]},hasInputElem:function(){return!0},getInputId:function(){return J.attr("id")},hide:function(){J.hide()},show:function(){J.show()},foreground:function(){K.foreground()},focus:function(){K.focus();J.focus()},getTargetObject:function(){return s},setTargetObject:function(a,
b){s=a;T=b;C(null);a&&b?(Q=g(a).attr(b),x(g(s).attr(T)),l.getObject(a,function(a){a&&0<a.length&&C(a[0])})):x("")},setAttribute:y,getItem:function(){return S},setItem:C,setValue:x,getValue:v,addListener:function(a,b){J.bind(a,g.proxy(b,U))},setObjectTypeFilter:function(a){F=a},setTemplate:function(a){G=a},setPlaceholder:t};return U}});
define(["jquery","ui/component","i18n!ui/nls/i18n"],function(g,f,n){function m(d){var c={};d.text&&(c.text=d.text);d.html&&(c.html=d.html);return g("<div>",c)}function k(d){return function(){d.apply(this);g(this).dialog("destroy").remove()}}function e(d){for(var c in d)d.hasOwnProperty(c)&&(d[c]=k(d[c]));return d}function l(d,c){var b="aloha aloha-dialog";d.cls&&(b+=" "+d.cls);return{resizable:!1,modal:!0,title:d.title||c,dialogClass:b,zIndex:10200}}return{confirm:function(d){var c=d.buttons||{},
b=n.t("button.yes.label"),f=n.t("button.no.label");null!==c.Yes&&"Yes"!==b&&(c[b]=c.Yes,delete c.Yes);null!==c.No&&"No"!==f&&(c[f]=c.No,delete c.No);c[b]=c[b]||d.yes||g.noop;c[f]=c[f]||d.no||g.noop;if(d.answer){var k=c[b],u=c[f];c[b]=function(){k();d.answer(!0)};c[f]=function(){u();d.answer(!1)}}var a=m(d).dialog(g.extend(l(d,"Confirm"),{buttons:e(c)}));return function(){a.dialog("destroy").remove()}},alert:function(d){var c={};c[n.t("button.dismiss.label")]=g.noop;var b=m(d).dialog(g.extend(l(d,
"Alert"),{buttons:e(c)}));return function(){b.dialog("destroy").remove()}},modal:function(d){d=m(d).dialog(g.extend(l(d,""),d));d.parent().find(".ui-dialog-titlebar").remove();return d},progress:function(d){var c=g("<div>").progressbar({value:null!=d.value?d.value:100}),b=m(d).dialog(g.extend(l(d,"Progress"),{open:function(){g(this).append(c)}}));return function(d){null!=d?c.progressbar({value:d}):b.dialog("destroy").remove()}}}});
define("aloha jquery aloha/plugin aloha/pluginmanager ui/ui ui/scopes ui/button ui/toggleButton ui/dialog ui/port-helper-attribute-field ui/port-helper-multi-split i18n!table/nls/i18n i18n!aloha/nls/i18n table/table-create-layer table/table table/table-plugin-utils util/dom aloha/console".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t,v,x){function C(a){var b=I(a),c;if(c=J.Utils.Dom.isEditable(a))if(c=!(0<b.parents(".aloha-editable table").length)){a:{var d,e=b.parents();for(c=0;c<e.length;c++){d=
e.eq(c);if(d.is(".aloha-editable")){c=!1;break a}if(d.is(".aloha-block")){c=!0;break a}}c=!1}c=!c}return c?(c=new q(a,K),a=I(v.getEditingHostOf(a)),c.parentEditable=g.getEditableById(a.attr("id")),K.TableRegistry.push(c),a=b.is("table")?"table":"table table",b.find(a).length&&x.warn("Table Plugin","Nested tables found. They will not be initialized."),g.activeEditable===c.parentEditable&&c.activate(),c):null}function y(a,b){var c,d,e=a.selection.isHeader(),l;for(c=0;c<a.selection.selectedCells.length;c++){l=
a.selection.selectedCells[c];for(d=0;d<a.cells.length;d++)if(l===a.cells[d].obj[0]){cell=a.cells[d];break}d=e?g.Markup.transformDomObject(l,"td").removeAttr("scope").get(0):g.Markup.transformDomObject(l,"th").attr("scope",b).get(0);null!=cell&&(cell.obj[0]=d,cell.deactivate(),cell.activate());f(a.selection.selectedCells[c]).bind("mousedown",function(a){var b=f(this).children("div").eq(0);window.setTimeout(function(){b.trigger("focus")},1)})}}function z(a,b,c){for(var d=!0,e=0;e<c.length;e++)if(0>
f(c[e]).attr("class").indexOf(b)){d=!1;break}if(d)for(e=0;e<c.length;e++)f(c[e]).removeClass(b);else for(e=0;e<c.length;e++)for(f(c[e]).addClass(b),d=0;d<a.length;d++)a[d].cssClass!=b&&f(c[e]).removeClass(a[d].cssClass)}function D(){var a=[],b=G;f.each(arguments,function(){a.push("."+(""==this?b:b+"-"+this))});return f.trim(a.join(" "))}function F(){var a=[],b=G;f.each(arguments,function(){a.push(""==this?b:b+"-"+this)});return f.trim(a.join(" "))}function H(a,b){var c=a.endContainer,d=a.startContainer,
e=3==c.nodeType?c.length:c.childNodes.length;3==d.nodeType&&"P"==d.parentNode.tagName&&1==d.parentNode.childNodes.length&&/^(\s|%A0)$/.test(escape(d.data))&&(d.data="",a.startOffset=0,c==d&&(a.endOffset=0));J.Utils.Dom.allowsNesting(3==d.nodeType?d.parentNode:d,b)||(0==a.startOffset&&f(3==d.nodeType?d.parentNode:d).addClass("aloha-table-cleanme"),a.endOffset==e&&f(3==c.nodeType?c.parentNode:c).addClass("aloha-table-cleanme"))}function M(){for(var a=f(".aloha-table-cleanme").removeClass("aloha-table-cleanme"),
b=0;b<a.length;b++)""!=f.trim(f(a[b]).html())||J.Utils.Dom.isEditingHost(a[b])||f(a[b]).remove()}var I=f,J=window.GENTICS,K=new n("table");K.createLayer=void 0;K.config=["table"];K.TableRegistry=[];K.activeTable=void 0;K.parameters={className:"aloha-table",classSelectionRow:"aloha-table-selectcolumn",classSelectionColumn:"aloha-table-selectrow",classLeftUpperCorner:"aloha-table-leftuppercorner",classTableWrapper:"aloha-table-wrapper",classCellSelected:"aloha-cell-selected",waiRed:"aloha-wai-red",
waiGreen:"aloha-wai-green",selectionArea:10};K.checkConfig=function(a){if("object"==typeof a&&a.length){for(var b=[],c=0;c<a.length;c++)a[c]&&b.push({name:a[c].name,text:a[c].text?a[c].text:a[c].name,tooltip:a[c].tooltip?a[c].tooltip:a[c].text,iconClass:a[c].iconClass?a[c].iconClass:"aloha-icon-"+a[c].name,cssClass:a[c].cssClass?a[c].cssClass:a[c].name});a=b}else a=[];return a};K.init=function(){var b=this,c={};this.tableConfig=this.checkConfig(this.tableConfig||this.settings.tableConfig);this.columnConfig=
this.checkConfig(this.columnConfig||this.settings.columnConfig);this.rowConfig=this.checkConfig(this.rowConfig||this.settings.rowConfig);this.cellConfig=this.checkConfig(this.cellConfig||this.settings.cellConfig);this.tableResize=void 0===this.settings.tableResize?!1:this.settings.tableResize;this.colResize=void 0===this.settings.colResize?!1:this.settings.colResize;this.rowResize=void 0===this.settings.rowResize?!1:this.settings.rowResize;f.browser.msie&&8>parseInt(f.browser.version,10)&&(this.rowResize=
this.colResize=this.tableResize=!1);this.createLayer=new a(this);g.bind("aloha-editable-created",function(a,d){var e=b.getEditableConfig(d.obj);c[d.getId()]=-1!==f.inArray("table",e);d.obj.bind("mousedown",function(a){K.setFocusedTable(void 0)});d.obj.find("table").each(function(a,b){C(b)})});this.initTableButtons();g.bind("aloha-table-selection-changed",function(){"undefined"!==typeof K.activeTable&&K.activeTable.selection&&(K.updateFloatingMenuScope(),K.activeTable.selection.cellsAreSplitable()?
(b._splitcellsButton.enable(!0),b._splitcellsRowButton.enable(!0),b._splitcellsColumnButton.enable(!0)):(b._splitcellsButton.enable(!1),b._splitcellsRowButton.enable(!1),b._splitcellsColumnButton.enable(!1)),K.activeTable.selection.cellsAreMergeable()?(b._mergecellsButton.enable(!0),b._mergecellsRowButton.enable(!0),b._mergecellsColumnButton.enable(!0)):(b._mergecellsButton.enable(!1),b._mergecellsRowButton.enable(!1),b._mergecellsColumnButton.enable(!1)))});g.bind("aloha-selection-changed",function(a,
d){d.startContainer&&g.activeEditable&&(c[g.activeEditable.getId()]&&g.Selection.mayInsertTag("table")?b._createTableButton.show():b._createTableButton.hide(),b.activeTable&&(d.findMarkup(function(){return"TABLE"===this.nodeName},g.activeEditable.obj)?(K.updateFloatingMenuScope(),K.setActiveCellStyle()):(b.activeTable.selection.cellSelectionMode=!1,b.activeTable.selection.baseCellPosition=null,b.activeTable.selection.lastSelectionRange=null,b.activeTable.focusOut())))});g.bind("aloha-editable-activated",
function(a,c){b._splitcellsButton.enable(!1);b._mergecellsButton.enable(!1);b._splitcellsRowButton.enable(!1);b._mergecellsRowButton.enable(!1);b._splitcellsColumnButton.enable(!1);b._mergecellsColumnButton.enable(!1);c.editable.obj.find("table").each(function(){for(var a=K.TableRegistry,b=0;b<a.length;b++)if(a[b].obj.attr("id")===f(this).attr("id"))return a[b].activate(),!0;C(this)})});g.bind("aloha-editable-deactivated",function(){K.activeTable&&K.activeTable.selection.unselectCells();K.setFocusedTable(void 0);
for(var a=K.TableRegistry,b=0;b<a.length;b++)a[b].deactivate()});g.bind("aloha-smart-content-changed",function(){g.activeEditable&&g.activeEditable.obj.find("table").each(function(){-1==K.indexOfTableInRegistry(this)&&C(this)&&(this.id=J.Utils.guid())})});this.settings.summaryinsidebar&&g.bind("aloha-plugins-loaded",function(){b.initSidebar(g.Sidebar.right.show())})};var G="aloha-table";K.initSidebar=function(a){var b=this;b.sidebar=a;b.sidebarPanel=a.addPanel({id:F("sidebar-panel"),title:r.t("table.sidebar.title"),
content:"",expanded:!0,activeOn:"table",onInit:function(){var a=this;this.setContent('<label class="'+F("label")+'" for="'+F("textarea")+'" >'+r.t("table.label.target")+'</label><textarea id="'+F("textarea")+'" class="'+F("textarea")+'" />');f(D("textarea")).live("keyup",function(){f(a.effective).attr("summary",f(D("textarea")).val());var c=f('div[class*="wai"]',"table#"+f(a.effective).attr("id"));c.removeClass(b.get("waiGreen"));c.removeClass(b.get("waiRed"));""!=f(D("textarea")).val().trim()?c.addClass(b.get("waiGreen")):
c.addClass(b.get("waiRed"))})},onActivate:function(a){this.effective=a;f(D("textarea")).val(f(this.effective).attr("summary"))}});a.show()};K.isEditableTable=function(a){return J.Utils.Dom.isEditable(a)};K.indexOfTableInRegistry=function(a){for(var b=this.TableRegistry,c=0;c<b.length;c++)if(b[c].obj[0].id==a.id)return c;return-1};K.getTableFromRegistry=function(a){a=this.indexOfTableInRegistry(a);return-1<a?this.TableRegistry[a]:null};K.isSelectionInTable=function(){var a=g.Selection.getRangeObject(),
a=f(a.commonAncestorContainer);return 0==a.length?!1:a.parents(".aloha-editable table").length?!0:!1};K.preventNestedTables=function(){return this.isSelectionInTable()?(c.alert({title:r.t("Table"),text:r.t("table.createTable.nestedTablesNoSupported")}),!0):!1};K.initMergeSplitCellsBtns=function(){this._mergecellsButton=k.adopt("mergecells",l,{tooltip:r.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".cell",click:function(){K.activeTable&&K.activeTable.selection.mergeCells()}});
this._splitcellsButton=k.adopt("splitcells",l,{tooltip:r.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".cell",click:function(){var a;K.activeTable&&(0<K.activeTable.selection.selectedCells.length?K.activeTable.selection.splitCells():(a=K.selectedOrActiveCells(),0<a.length&&(t.splitCell(a,function(){return K.activeTable.newActiveCell().obj}),g.trigger("aloha-table-selection-changed"))))}});this._mergecellsRowButton=k.adopt("mergecellsRow",l,{tooltip:r.t("button.mergecells.tooltip"),
icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".row",click:function(){K.activeTable&&K.activeTable.selection.mergeCells()}});this._splitcellsRowButton=k.adopt("splitcellsRow",l,{tooltip:r.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".row",click:function(){K.activeTable&&K.activeTable.selection.splitCells()}});this._mergecellsColumnButton=k.adopt("mergecellsColumn",l,{tooltip:r.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",
scope:this.name+".column",click:function(){K.activeTable&&K.activeTable.selection.mergeCells()}});this._splitcellsColumnButton=k.adopt("splitcellsColumn",l,{tooltip:r.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".column",click:function(){K.activeTable&&K.activeTable.selection.splitCells()}})};K.initNaturalFitBtn=function(){var a=this;if(this.colResize||this.rowResize)this._tableNaturalFitButton=k.adopt("naturalFit",l,{tooltip:r.t("button.naturalfit.tooltip"),
icon:"aloha-icon aloha-icon-table-naturalfit",scope:this.name+".cell",click:function(){if(a.activeTable){var b=a.activeTable.obj;b.find("td, th").each(function(){f(this).find("div").css("width","");f(this).css("width","")});b.find("tr").each(function(){f(this).css("height","")})}}})};K.initRowsBtns=function(){var a=this;this._addrowbeforeButton=k.adopt("addrowbefore",l,{tooltip:r.t("button.addrowbefore.tooltip"),icon:"aloha-icon aloha-icon-addrowbefore",scope:this.name+".row",click:function(){a.activeTable&&
a.activeTable.addRowBeforeSelection()}});this._addrowafterButton=k.adopt("addrowafter",l,{tooltip:r.t("button.addrowafter.tooltip"),icon:"aloha-icon aloha-icon-addrowafter",scope:this.name+".row",click:function(){a.activeTable&&a.activeTable.addRowAfterSelection()}});this._deleterowsButton=k.adopt("deleterows",l,{tooltip:r.t("button.delrows.tooltip"),icon:"aloha-icon aloha-icon-deleterows",scope:this.name+".row",click:function(){if(a.activeTable){var b=a.activeTable;c.confirm({title:r.t("Table"),
text:r.t("deleterows.confirm"),yes:function(){b.deleteRows()}})}}});this._rowheaderButton=k.adopt("rowheader",d,{tooltip:r.t("button.rowheader.tooltip"),icon:"aloha-icon aloha-icon-rowheader",scope:this.name+".row",click:function(){a.activeTable&&(a.activeTable.refresh(),y(a.activeTable,"column"),a.activeTable.selection.unselectCells(),a.activeTable.selection.selectRows(a.activeTable.selection.selectedRowIdxs))}});this.rowMSItems=[];f.each(this.rowConfig,function(b,c){a.rowMSItems.push({name:c.name,
text:r.t(c.text),tooltip:r.t(c.tooltip),iconClass:"aloha-icon aloha-row-layout "+c.iconClass,click:function(){a.activeTable&&(z(a.rowConfig,c.cssClass,a.activeTable.selection.selectedCells),a.activeTable.selectRows())}})});0<this.rowMSItems.length&&this.rowMSItems.push({name:"removeFormat",text:r.t("button.removeFormat.text"),tooltip:r.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var b=a.activeTable.selection.selectedCells,c=0;c<
b.length;c++)for(var d=0;d<a.rowConfig.length;d++)f(b[c]).removeClass(a.rowConfig[d].cssClass);a.activeTable.selectRows()}}});this.rowMSButton=p({items:this.rowMSItems,name:"formatRow",hideIfEmpty:!0,scope:this.name+".row"})};K.initColumnBtns=function(){var a=this;this._addcolumnleftButton=k.adopt("addcolumnleft",l,{tooltip:r.t("button.addcolleft.tooltip"),icon:"aloha-icon aloha-icon-addcolumnleft",scope:this.name+".column",click:function(){a.activeTable&&a.activeTable.addColumnsLeft()}});this._addcolumnrightButton=
k.adopt("addcolumnright",l,{tooltip:r.t("button.addcolright.tooltip"),icon:"aloha-icon aloha-icon-addcolumnright",scope:this.name+".column",click:function(){a.activeTable&&a.activeTable.addColumnsRight()}});this._deletecolumnsButton=k.adopt("deletecolumns",l,{tooltip:r.t("button.delcols.tooltip"),icon:"aloha-icon aloha-icon-deletecolumns",scope:this.name+".column",click:function(){if(a.activeTable){var b=a.activeTable;c.confirm({title:r.t("Table"),text:r.t("deletecolumns.confirm"),yes:function(){b.deleteColumns()}})}}});
this._columnheaderButton=k.adopt("columnheader",d,{tooltip:r.t("button.columnheader.tooltip"),icon:"aloha-icon aloha-icon-columnheader",scope:this.name+".column",click:function(){a.activeTable&&(a.activeTable.refresh(),y(a.activeTable,"row"),a.activeTable.selection.unselectCells(),a.activeTable.selection.selectColumns(a.activeTable.selection.selectedColumnIdxs))}});this.columnMSItems=[];f.each(this.columnConfig,function(b,c){var d={name:c.name,text:r.t(c.text),tooltip:r.t(c.tooltip),iconClass:"aloha-icon aloha-column-layout "+
c.iconClass,click:function(b,d,e){a.activeTable&&(z(a.columnConfig,c.cssClass,a.activeTable.selection.selectedCells),a.activeTable.selectColumns())}};a.columnMSItems.push(d)});0<this.columnMSItems.length&&this.columnMSItems.push({name:"removeFormat",text:r.t("button.removeFormat.text"),tooltip:r.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var b=a.activeTable.selection.selectedCells,c=0;c<b.length;c++)for(var d=0;d<a.columnConfig.length;d++)f(b[c]).removeClass(a.columnConfig[d].cssClass);
a.activeTable.selectColumns()}}});this.columnMSButton=p({items:this.columnMSItems,name:"formatColumn",hideIfEmpty:!0,scope:this.name+".column"})};K.initCellBtns=function(){var a=this;this.cellMSItems=[];f.each(this.cellConfig,function(b,c){var d={name:c.name,text:r.t(c.text),tooltip:r.t(c.tooltip),iconClass:"aloha-icon aloha-column-layout "+c.iconClass,click:function(b,d,e){a.activeTable&&(z(a.cellConfig,c.cssClass,a.selectedOrActiveCells()),a.setActiveCellStyle())}};a.cellMSItems.push(d)});0<this.cellMSItems.length&&
this.cellMSItems.push({name:"removeFormat",text:r.t("button.removeFormat.text"),tooltip:r.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var b=a.selectedOrActiveCells(),c=0;c<b.length;c++)for(var d=0;d<a.cellConfig.length;d++)f(b[c]).removeClass(a.cellConfig[d].cssClass);a.setActiveCellStyle()}}});this.cellMSButton=p({items:this.cellMSItems,name:"formatCell",hideIfEmpty:!0,scope:this.name+".cell"})};K.initTableButtons=function(){var a=
this;e.createScope(this.name+".row","Aloha.continuoustext");e.createScope(this.name+".column","Aloha.continuoustext");e.createScope(this.name+".cell","Aloha.continuoustext");this._createTableButton=k.adopt("createTable",l,{tooltip:r.t("button.createtable.tooltip"),icon:"aloha-icon aloha-icon-createTable",scope:"Aloha.continuoustext",click:function(){K.createDialog(this.element)}});this.initColumnBtns();this.initRowsBtns();this.initCellBtns();this.initMergeSplitCellsBtns();this.initNaturalFitBtn();
this.tableMSItems=[];var c=this.tableConfig;f.each(c,function(b,d){a.tableMSItems.push({name:d.name,text:r.t(d.text),tooltip:r.t(d.tooltip),iconClass:"aloha-icon aloha-table-layout "+d.iconClass,click:function(){if(a.activeTable)if(a.activeTable.obj.hasClass(d.cssClass)){for(b=0;b<c.length;b++)a.activeTable.obj.removeClass(c[b].cssClass);a.tableMSButton.setActiveItem()}else{for(var b=0;b<c.length;b++)a.activeTable.obj.removeClass(c[b].cssClass);a.activeTable.obj.addClass(d.cssClass);a.tableMSButton.setActiveItem(d.cssClass)}}})});
0<this.tableMSItems.length&&this.tableMSItems.push({name:"removeFormat",text:r.t("button.removeFormat.text"),tooltip:r.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var b=0;b<c.length;b++)a.activeTable.obj.removeClass(a.tableConfig[b].cssClass);a.tableMSButton.setActiveItem()}}});this.tableMSButton=p({items:this.tableMSItems,name:"formatTable",hideIfEmpty:!0,scope:this.name+".cell"});this._tableCaptionButton=k.adopt("tableCaption",
d,{tooltip:r.t("button.caption.tooltip"),icon:"aloha-icon aloha-icon-table-caption",scope:this.name+".cell",click:function(){if(a.activeTable)if(a.activeTable.obj.children("caption").is("caption"))a.activeTable.obj.children("caption").remove();else{var b=r.t("empty.caption"),c=f("<caption></caption>");a.activeTable.obj.prepend(c);a.makeCaptionEditable(c,b);b=c.find("div").eq(0);c=b.contents().eq(0);if(0<c.length){var d=new J.Utils.RangeObject;d.startContainer=d.endContainer=c.get(0);d.startOffset=
0;d.endOffset=c.text().length;a.activeTable.obj.find("div.aloha-table-cell-editable").blur();b.focus();d.select();g.Selection.updateSelection()}}}});this.summary=b({width:275,name:"tableSummary",noTargetHighlight:!0,scope:this.name+".cell"});this.summary.addListener("keyup",function(b){a.activeTable&&a.activeTable.checkWai()})};K.makeCaptionEditable=function(a,b){var c=a.children("div");0===c.length?(c=f("<div></div>"),f(c).addClass("aloha-ui"),f(c).addClass("aloha-editable-caption"),0<a.contents().length?
c.append(a.contents()):b&&c.text(b),a.append(c)):1<c.length&&(a.children("div:not(:first-child)").each(function(){$this=f(this);c.eq(0).append($this.contents());$this.remove()}),c=c.eq(0));c.contentEditable(!0)};K.createDialog=function(a){this.createLayer.set("target",a);this.createLayer.show()};K.createTable=function(a,b){if(!this.preventNestedTables())if(g.activeEditable&&"undefined"!==typeof g.activeEditable.obj){for(var c=document.createElement("table"),d=c.id=J.Utils.guid(),e=document.createElement("tbody"),
l=0;l<b;l++){for(var k=document.createElement("tr"),m=0;m<a;m++){var p=document.createTextNode("\u00a0"),q=document.createElement("td");q.appendChild(p);k.appendChild(q)}e.appendChild(k)}c.appendChild(e);H(g.Selection.getRangeObject(),c);J.Utils.Dom.insertIntoDOM(f(c),g.Selection.getRangeObject(),g.activeEditable.obj);M();var c=document.getElementById(d),n=C(c);n&&(I.browser.msie?window.setTimeout(function(){n.cells[0].wrapper.get(0).focus()},20):n.cells[0].wrapper.get(0).focus());n.focus();K.activeTable.selection.selectionType=
"cell";K.updateFloatingMenuScope()}else this.error("There is no active Editable where the table can be\t\t\t\tinserted!")};K.setFocusedTable=function(a){null==a&&null!=this.activeTable&&this.activeTable.selection.unselectCells();for(var b=0;b<K.TableRegistry.length;b++)K.TableRegistry[b].hasFocus=!1;"undefined"!=typeof a&&(this.summary.setTargetObject(a.obj,"summary"),a.obj.children("caption").is("caption")&&(this._tableCaptionButton.setState(!0),b=a.obj.children("caption"),this.makeCaptionEditable(b)),
a.hasFocus=!0);K.activeTable=a;for(b=0;b<this.tableMSItems.length;b++)this.tableMSButton.showItem(this.tableMSItems[b].name);this.tableMSButton.setActiveItem();if(this.activeTable)for(b=0;b<this.tableConfig.length;b++)this.activeTable.obj.hasClass(this.tableConfig[b].cssClass)&&this.tableMSButton.setActiveItem(this.tableConfig[b].name)};K.error=function(a){g.Log.error(this,a)};K.debug=function(a){g.Log.debug(this,a)};K.info=function(a){g.Log.info(this,a)};K.log=function(a){g.log("log",this,a)};K.get=
function(a){if(this.config[a])return this.config[a];if(this.parameters[a])return this.parameters[a]};K.set=function(a,b){this.config[a]?this.config[a]=b:this.parameters[a]=b};K.makeClean=function(a){var b=this;a.find("table").each(function(){b.getTableFromRegistry(this)&&((new q(this,b)).deactivate(),f(this).attr("id",null))})};K.toString=function(){return this.prefix};K.updateFloatingMenuScope=function(){null!=K.activeTable&&null!=K.activeTable.selection.selectionType&&e.setScope(K.name+"."+K.activeTable.selection.selectionType)};
K.setActiveCellStyle=function(){var a=!1,b;this.cellMSButton.setActiveItem();for(var c=this.selectedOrActiveCells(),d=0;d<this.cellConfig.length;d++)if(f(c[0]).hasClass(this.cellConfig[d].cssClass)){b=this.cellConfig[d].name;a=!0;break}f(c).each(function(c){f(this).hasClass(b)||(a=!1)});a&&this.cellMSButton.setActiveItem(b)};K.selectedOrActiveCells=function(){var a=this.activeTable.selection.selectedCells;return!a||1>a.length?(a=function(){var a=g.Selection.getRangeObject();return g.activeEditable?
a.findMarkup(function(){return"td"===this.nodeName.toLowerCase()},g.activeEditable.obj):null}())?[a]:[]:a};m.register(K);return K});define({root:{"plugin.abbr.floatingmenu.tab.abbr":"Abbreviation","floatingmenu.tab.format":"Format","floatingmenu.tab.insert":"Insert",yes:"Yes",no:"No",cancel:"Cancel","repository.no_item_found":"No item found.","repository.loading":"Loading","repository.no_items_found_yet":"No items found yet..."},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define({root:{"button.strong.tooltip":"Strong","button.em.tooltip":"Emphasize","button.b.tooltip":"Bold","button.i.tooltip":"Italic","button.u.tooltip":"Underline","button.cite.tooltip":"Cite","button.q.tooltip":"Tooltip","button.code.tooltip":"Code","button.abbr.tooltip":"Abbreviation","button.del.tooltip":"Strikethrough","button.s.tooltip":"Strikethrough","button.sub.tooltip":"Subscript","button.sup.tooltip":"Superscript","button.p.tooltip":"Paragraph","button.h1.tooltip":"Heading 1","button.h2.tooltip":"Heading 2",
"button.h3.tooltip":"Heading 3","button.h4.tooltip":"Heading 4","button.h5.tooltip":"Heading 5","button.h6.tooltip":"Heading 6","button.pre.tooltip":"Preformatted text","button.title.tooltip":"Title","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting",GENTICS_button_p:"GENTICS_button_p",GENTICS_button_h1:"GENTICS_button_h1",GENTICS_button_h2:"GENTICS_button_h2",GENTICS_button_h3:"GENTICS_button_h3",GENTICS_button_h4:"GENTICS_button_h4",GENTICS_button_h5:"GENTICS_button_h5",
GENTICS_button_h6:"GENTICS_button_h6",GENTICS_button_pre:"GENTICS_button_pre",GENTICS_button_title:"GENTICS_button_title",formatBold:"Ctrl+b",formatItalic:"Ctrl+i",formatUnderline:"Ctrl+u",formatParagraph:"Alt+Ctrl+0",formatH1:"Alt+Ctrl+1",formatH2:"Alt+Ctrl+2",formatH3:"Alt+Ctrl+3",formatH4:"Alt+Ctrl+4",formatH5:"Alt+Ctrl+5",formatH6:"Alt+Ctrl+6",formatPre:"Alt+Ctrl+P",formatDel:"Ctrl+\\",formatSub:"Ctrl+,",formatSup:"Ctrl+.","floatingmenu.tab.format":"Format","format.class.legend":"CSS class","format.class.none":"none"},
ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define(["jquery","ui/component","ui/button","ui/utils"],function(g,f,n,m){return f.extend({_activeButton:null,_isOpen:!1,init:function(){this._super();var f=this,e=this.element=g("<div>",{"class":"aloha-multisplit"});this.contentElement=g("<div>",{"class":"aloha-multisplit-content"}).appendTo(e);this.toggleButton=m.makeButtonElement({"class":"aloha-multisplit-toggle",click:function(){f.toggle()}}).button().appendTo(e);this.buttons=[];var l=this.getButtons();0===l.length&&e.hide();for(e=0;e<l.length;e++)this.addButton(l[e]);
g("body").click(function(d){f._isOpen&&!f.element.is(d.target)&&0===f.element.find(d.target).length&&f.close()})},addButton:function(f){var e=this,l=new (n.extend({tooltip:f.tooltip,icon:f.wide?f.icon:"aloha-large-icon "+f.icon,iconOnly:f.wide?!1:!0,init:function(){this._super();f.init&&f.init.call(this)},click:function(){f.click.apply(e,arguments);e.close()}}));f.wide||l.element.addClass("aloha-large-button");e.buttons[f.name]={settings:f,component:l,element:l.element,visible:!0};var d=this.contentElement.children(".aloha-ui-multisplit-fullwidth");
!f.wide&&d.length?d.before(l.element[0]):this.contentElement.append(l.element[0])},setActiveButton:function(f){f||(f=null);null!==this._activeButton&&this.buttons[this._activeButton].element.removeClass("aloha-multisplit-active");this._activeButton=f;null!==f&&this.buttons[f].element.addClass("aloha-multisplit-active")},toggle:function(){this.element.toggleClass("aloha-multisplit-open");this._isOpen=!this._isOpen},open:function(){this.element.addClass("aloha-multisplit-open");this._isOpen=!0},close:function(){this.element.removeClass("aloha-multisplit-open");
this._isOpen=!1},show:function(f){f||(f=null);null!==f&&void 0!==this.buttons[f]&&(this.buttons[f].element.show(),this.buttons[f].visible=!0,this.element.show())},hide:function(f){var e,l=!1;f||(f=null);if(null!==f&&void 0!==this.buttons[f]){this.buttons[f].element.hide();this.buttons[f].visible=!1;for(e in this.buttons)if(this.buttons.hasOwnProperty(e)&&this.buttons[e].visible){this.element.show();l=!0;break}l||this.element.hide()}}})});
define(["aloha/core","jquery","ui/ui","ui/multiSplit"],function(g,f,n,m){return function(k){var e;e=n.adopt(k.name,m,{scope:k.scope,getButtons:function(){var e=[];f.each(k.items,function(d,c){e.push({tooltip:c.tooltip,text:c.text,name:c.name,icon:c.iconClass,click:c.click,init:function(){c.cls&&this.element.addClass(c.cls);c.init&&c.init.call(this)},wide:c.wide})});return e}});return{pushItem:function(f){e.addButton(f)},showItem:function(f){e.show(f)},hideItem:function(f){e.hide(f)},setActiveItem:function(f){e.setActiveButton(f)}}}});
define(["jquery","jqueryui"],function(g){function f(f){return f.html||f.text||f.tooltip}function n(f){return'<img class="aloha-ui-inline-icon" src="'+f+'">'}return{wrapWithLabel:function(f,k){return g("<label>",{"class":"aloha-ui-label"}).append(g("<span>",{"class":"aloha-ui-label-text",text:f})).append(k)},makeButton:function(g,k,e){g.button({label:f(k),text:!(!k.text&&!k.html),icons:{primary:k.icon||k.iconUrl&&"aloha-ui-inline-icon-container"||null,secondary:e&&"aloha-jqueryui-icon ui-icon-triangle-1-s"||
null}});k.iconUrl&&g.button("widget").children(".ui-button-icon-primary").append(n(k.iconUrl));return g},makeButtonElement:function(f){return g("<button>",f).attr("type","button")},makeButtonLabel:f,makeButtonLabelWithIcon:function(g){var k=f(g);g.iconUrl&&(k=n(g.iconUrl)+k);return k},makeButtonIconFromUrl:n}});
define(["jquery","ui/component","ui/utils","jqueryui"],function(g,f,n){return f.extend({init:function(){this._super();this.createButtonElement();n.makeButton(this.buttonElement,this).button("widget").tooltip({tooltipClass:"aloha aloha-ui-tooltip",position:{my:"left top",at:"right bottom"}}).click(g.proxy(function(){this.buttonElement.tooltip("close",null,!0);this._onClick()},this))},_onClick:function(){this.click()},click:function(){},createButtonElement:function(){var f=n.makeButtonElement();this["class"]&&
f.addClass(this["class"]);return this.element=this.buttonElement=f},disable:function(){this.element.button("option","disabled",!1)},enable:function(f){this.element.button("option","disabled",!1===f)}})});
define(["jquery","ui/button","jqueryui"],function(g,f){return f.extend({_checked:!1,setState:function(f){this._checked!==f&&((this._checked=f)?this.element.addClass("aloha-button-active"):this.element.removeClass("aloha-button-active"))},getState:function(){return this._checked},_onClick:function(){this.setState(!this._checked);this.click()}})});
define("ui/ui",["jquery","ui/ui-plugin"],function(g,f){var n={};return{adopt:function(m,k,e){"string"!==g.type(m)?(e=k,k=m,m=e.name):e=g.extend({name:m},e);k.isInstance||(k=e?k.extend(e):k,k=new k);n[m]=k;f.adoptInto(m,k);return k},getAdoptedComponent:function(f){return n[f]||null}}});
define("format/format-plugin","aloha aloha/plugin aloha/state-override jquery util/arrays util/maps ui/ui ui/toggleButton ui/port-helper-multi-split PubSub i18n!format/nls/i18n i18n!aloha/nls/i18n aloha/selection".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){function u(a){var b=m(".aloha-cell-selected");if(0<b.length){var c=0;b.each(function(){var b=m(this).find("div"),d=b.find(a);0<d.length&&(d.contents().unwrap(),c++);b.contents().wrap("<"+a+"></"+a+">")});c===b.length&&b.find(a).contents().unwrap();
return!0}return!1}function a(a,b){var c=z[b];D.hasOwnProperty(b)&&(c=D[b]);return l.adopt(c,d,{tooltip:p.t("button."+b+".tooltip"),icon:"aloha-icon aloha-icon-"+c,scope:"Aloha.continuoustext",click:function(){u(b)||a.addMarkup(b);return!1}})}function q(a,b){return{name:b,tooltip:p.t("button."+b+".tooltip"),iconClass:"aloha-icon "+p.t("aloha-large-icon-"+b),markup:m("<"+b+">"),click:function(){var c;u(b)?c=!1:(a.changeMarkup(b),g.activeEditable&&m.browser.mozilla&&g.activeEditable.obj.focus(),g.activeEditable&&
g.trigger("aloha-format-block"),c=void 0);return c}}}function t(a,b){return{name:b,text:p.t("button."+b+".text"),tooltip:p.t("button."+b+".tooltip"),wide:!0,cls:"aloha-ui-multisplit-fullwidth",click:function(){a.removeFormat()}}}function v(a,b){b.select();C(a,g.Selection.getRangeObject())}function x(a,b,c){y.Utils.Dom.addMarkup(b,c);v(a,b)}function C(a,b){var c,d,e,f,l;m.each(a.buttons,function(a,d){var l=!1,k=M[d.markup[0].nodeName]||[d.markup[0].nodeName];for(e=0;e<b.markupEffectiveAtStart.length;e++)for(c=
b.markupEffectiveAtStart[e],f=0;f<k.length;f++)g.Selection.standardTextLevelSemanticsComparator(c,m("<"+k[f]+">"))&&(d.handle.setState(!0),l=!0);l||d.handle.setState(!1)});if(0<a.multiSplitItems.length){d=!1;for(e=0;e<b.markupEffectiveAtStart.length&&!d;e++)for(c=b.markupEffectiveAtStart[e],f=0;f<a.multiSplitItems.length&&!d;f++)l=a.multiSplitItems[f],l.markup&&g.Selection.standardTextLevelSemanticsComparator(c,l.markup)&&(a.multiSplitButton.setActiveItem(l.name),d=!0);d||a.multiSplitButton.setActiveItem(null)}}
var y=window.GENTICS,z={b:"bold",strong:"bold",i:"italic",em:"italic",del:"strikethrough",sub:"subscript",sup:"superscript",u:"underline",s:"strikethrough"},D={strong:"strong",em:"emphasis",s:"strikethrough2"},F={u:!0,em:!0,strong:!0,b:!0,i:!0,cite:!0,q:!0,code:!0,abbr:!0,del:!0,s:!0,sub:!0,sup:!0},H={p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,pre:!0},M={B:["STRONG","B"],I:["EM","I"],STRONG:["STRONG","B"],EM:["EM","I"]};return f.create("format",{config:"b i sub sup p h1 h2 h3 h4 h5 h6 pre removeFormat".split(" "),
availableButtons:"u strong del em b i s sub sup p h1 h2 h3 h4 h5 h6 pre removeFormat".split(" "),hotKey:{formatBold:"ctrl+b",formatItalic:"ctrl+i",formatParagraph:"alt+ctrl+0",formatH1:"alt+ctrl+1",formatH2:"alt+ctrl+2",formatH3:"alt+ctrl+3",formatH4:"alt+ctrl+4",formatH5:"alt+ctrl+5",formatH6:"alt+ctrl+6",formatPre:"ctrl+p",formatDel:"ctrl+d",formatSub:"alt+shift+s",formatSup:"ctrl+shift+s"},init:function(){var a=this;"undefined"!==typeof this.settings.hotKey&&m.extend(!0,this.hotKey,this.settings.hotKey);
this.initButtons();g.bind("aloha-plugins-loaded",function(){a.initSidebar(g.Sidebar.right)});g.bind("aloha-editable-activated",function(b,c){a.applyButtonConfig(c.editable.obj);c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatBold,function(){a.addMarkup("b");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatItalic,function(){a.addMarkup("i");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatParagraph,function(){a.changeMarkup("p");return!1});c.editable.obj.bind("keydown.aloha.format",
a.hotKey.formatH1,function(){a.changeMarkup("h1");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH2,function(){a.changeMarkup("h2");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH3,function(){a.changeMarkup("h3");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH4,function(){a.changeMarkup("h4");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH5,function(){a.changeMarkup("h5");return!1});c.editable.obj.bind("keydown.aloha.format",
a.hotKey.formatH6,function(){a.changeMarkup("h6");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatPre,function(){a.changeMarkup("pre");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatDel,function(){a.addMarkup("del");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSub,function(){a.addMarkup("sub");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSup,function(){a.addMarkup("sup");return!1})});g.bind("aloha-editable-deactivated",
function(a,b){b.editable.obj.unbind("keydown.aloha.format")})},applyButtonConfig:function(a){a=this.getEditableConfig(a);var b,c;if("object"===typeof a){var d=[];m.each(a,function(a,b){"number"===typeof a&&"string"===typeof b||d.push(a)});0<d.length&&(a=d)}this.formatOptions=a;for(b in this.buttons)this.buttons.hasOwnProperty(b)&&(-1!==m.inArray(b,a)?this.buttons[b].handle.show():this.buttons[b].handle.hide());c=this.multiSplitItems.length;for(b=0;b<c;b++)-1!==m.inArray(this.multiSplitItems[b].name,
a)?this.multiSplitButton.showItem(this.multiSplitItems[b].name):this.multiSplitButton.hideItem(this.multiSplitItems[b].name)},initButtons:function(){var d=this;this.buttons={};this.multiSplitItems=[];m.each(this.availableButtons,function(b,c){var e=!1;"number"!==typeof b&&"string"!==typeof c&&(e=c,c=b);F[c]?d.buttons[c]={handle:a(d,c),markup:m("<"+c+">",{"class":e||""})}:H[c]?d.multiSplitItems.push(q(d,c)):"removeFormat"===c?d.multiSplitItems.push(t(d,c)):g.log("warn",d,'Button "'+c+'" is not defined')});
this.multiSplitButton=c({name:"formatBlock",items:this.multiSplitItems,hideIfEmpty:!0,scope:"Aloha.continuoustext"});b.sub("aloha.selection.context-change",function(a){C(d,a.range)})},initSidebar:function(a){var b=this;b.sidebar=a;a.addPanel({id:b.nsClass("sidebar-panel-class"),title:p.t("floatingmenu.tab.format"),content:"",expanded:!0,activeOn:this.formatOptions||!1,onInit:function(){},onActivate:function(a){var c=this;c.effective=a;if(a[0]){c.format=a[0].nodeName.toLowerCase();var d=m("<div>").attr("class",
b.nsClass("target-container")),e=m("<fieldset>");e.append(m("<legend>"+c.format+" "+p.t("format.class.legend")).append(m("<select>")));d.append(e);var f='<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+p.t("format.class.legend")+'</legend><select name="targetGroup" class="'+b.nsClass("radioTarget")+'"><option value="">'+p.t("format.class.none")+"</option>";b.config[c.format]&&b.config[c.format]["class"]&&m.each(b.config[c.format]["class"],function(a,b){f+='<option value="'+a+'" >'+
b+"</option>"});f+="</select></fieldset></div>";c=this;this.setContent(f);m(b.nsSel("framename")).live("keyup",function(){m(c.effective).attr("target",m(this).val().replace('"',"&quot;").replace("'","&#39;"))});c=this;c.effective=a;m(b.nsSel("linkTitle")).val(m(c.effective).attr("title"))}}});a.show()},nsClass:function(){var a=[];m.each(arguments,function(){a.push(""==this?"aloha-format":"aloha-format-"+this)});return m.trim(a.join(" "))},nsSel:function(){var a=[];m.each(arguments,function(){a.push("."+
(""==this?"aloha-format":"aloha-format-"+this))});return m.trim(a.join(" "))},addMarkup:function(a){var b=this,c=m("<"+a+">"),d=g.Selection.rangeObject;if("undefined"!==typeof a&&""!=a){var e=M[c[0].nodeName]||[c[0].nodeName],f=d.findMarkup(function(){return-1!==k.indexOf(e,this.nodeName)},g.activeEditable.obj);if(f)d.isCollapsed()?y.Utils.Dom.removeFromDOM(f,d,!0):y.Utils.Dom.removeMarkup(d,m(f),g.activeEditable.obj),v(b,d);else{if(d.isCollapsed()&&(y.Utils.Dom.extendToWord(d),d.isCollapsed()&&n.enabled())){n.setWithRangeObject(z[a],
d,function(a,d){x(b,d,c)});return}x(b,d,c)}}},changeMarkup:function(a){g.Selection.changeMarkupOnSelection(m("<"+a+">"))},removeFormat:function(){var a="u strong em b i q del s code sub sup p h1 h2 h3 h4 h5 h6 pre quote blockquote".split(" "),b=g.Selection.rangeObject,c;this.settings.removeFormats&&(a=this.settings.removeFormats);if(!b.isCollapsed()){for(c=0;c<a.length;c++)y.Utils.Dom.removeMarkup(b,m("<"+a[c]+">"),g.activeEditable.obj);b.select()}},toString:function(){return"format"}})});
define(["jquery","util/arrays","util/maps","util/trees"],function(g,f,n,m){function k(d,c,b){var e,f,l=[],a;for(e=0;e<d.length;e++)if(f=d[e],!c[f.label]&&(a=m.postprune(f.components,b)))f=g.extend({},f),f.components=a,l.push(f);return l}function e(d,c,b){var e,f,l=[],a,k,n;for(e=0;e<d.length;e++)f=d[e],a=f.components||[],k=c[f.label],!f.exclusive&&k&&(n=m.postprune(k.components,b))&&(a=a.concat(n)),f=g.extend({},k||{},f),f.components=a,l.push(f);return l}function l(d,c){var b,e=n.fillKeys({},c,!0);
for(b=0;b<d.length;b++)e[d[b].label]=!0,n.fillKeys(e,m.flatten(d[b].components),!0);return e}return{defaultToolbarSettings:{tabs:[{label:"tab.format.label",showOn:{scope:"Aloha.continuoustext"},components:["bold strong italic emphasis underline \n subscript superscript strikethrough quote".split(" "),"formatLink formatAbbr formatNumeratedHeaders toggleDragDrop \n toggleMetaView wailang toggleFormatlessPaste".split(" "),"alignLeft alignCenter alignRight alignJustify \n orderedList unorderedList indentList outdentList colorPicker".split(" "),
["formatBlock"]]},{label:"tab.insert.label",showOn:{scope:"Aloha.continuoustext"},components:["createTable characterPicker insertLink insertImage insertAbbr insertToc insertHorizontalRule insertTag".split(" ")]},{label:"tab.link.label",showOn:{scope:"link"},components:["editLink","removeLink","linkBrowser"]},{label:"tab.img.label",showOn:{scope:"image"},components:[["imageSource","\n","imageTitle"],["imageResizeWidth","\n","imageResizeHeight"],"imageAlignLeft imageAlignRight imageAlignNone imageIncPadding \n imageCropButton imageCnrReset imageCnrRatio imageDecPadding".split(" "),
["imageBrowser"]]},{label:"tab.abbr.label",showOn:{scope:"abbr"},components:[["abbrText","removeAbbr"]]},{label:"tab.wai-lang.label",showOn:{scope:"wai-lang"},components:[["wailangfield","removewailang"]]},{label:"tab.table.label",showOn:{scope:"table.cell"},components:[["mergecells","splitcells","tableCaption","tableSummary","naturalFit"],["formatTable"]]},{label:"tab.col.label",showOn:{scope:"table.column"},components:["addcolumnleft addcolumnright deletecolumns columnheader mergecellsColumn splitcellsColumn formatColumn".split(" ")]},
{label:"tab.row.label",showOn:{scope:"table.row"},components:["addrowbefore addrowafter deleterows rowheader mergecellsRow splitcellsRow formatRow".split(" ")]},{label:"tab.cell.label",showOn:{scope:"table.cell"},components:[["alignTop","alignMiddle","alignBottom","formatCell"]]}]},combineToolbarSettings:function(d,c,b){function m(a){return"array"===g.type(a)?!a.length:u[a]}var r=n.fillTuples({},f.map(c,function(a){return[a.label,a]})),u=l(d,b);d=e(d,r,m);c=k(c,u,m);return d.concat(c)}}});
define({root:{"button.dismiss.label":"Dismiss","button.bold.label":"Bold","button.italic.label":"Italic","button.strikethrough.label":"Strikethrough","button.subscript.label":"Subscript","button.superscript.label":"Superscript","button.underline.label":"Underline","button.yes.label":"Yes","button.no.label":"No","button.p.label":"Paragraph","button.h1.label":"Heading 1","button.h2.label":"Heading 2","button.h3.label":"Heading 3","button.h4.label":"Heading 4","button.h5.label":"Heading 5","button.h6.label":"Heading 6",
"button.pre.label":"Preformatted text","button.removeFormatting.label":"Remove formatting","button.ol.label":"Insert ordered list","button.ul.label":"Insert unordered list","button.indent.label":"Indent list","button.outdent.label":"Outdent list","button.createLink.label":"Insert link","button.removeLink.label":"Remove link","button.createAbbr.label":"Insert abbreviation","button.characterPicker.label":"Pick special characters","button.createLink.label":"Insert link","button.removeLink.label":"Remove link",
"button.createAbbr.label":"Insert abbreviation","button.characterPicker.label":"Pick special characters","button.justifyLeft.label":"Align to the left","button.justifyRight.label":"Align to the right","button.justifyCenter.label":"Center","button.justifyFull.label":"Justify","button.horizontalRule.label":"Insert horizontal rule","button.createLanguageAnnotation.label":"Insert language annotation","button.metaview.label":"Switch between meta and normal view","button.quote.label":"Format selection as quote",
"button.blockquote.label":"Format selection as blockquote","tab.format.label":"Format","tab.insert.label":"Insert","tab.abbr.label":"Abbreviation","tab.img.label":"Image","tab.link.label":"Link","tab.list.label":"List","tab.table.label":"Table","tab.col.label":"Table Column","tab.row.label":"Table Row","tab.cell.label":"Table Cell","tab.wai-lang.label":"Language annotation"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});
define(["util/json2"],function(){var g={};(function(f,g){function m(b,c){k.addType(b,function(d,f,a){var l,m=f,v=(new Date).getTime();if(!d){m={};a=[];f=0;try{for(d=c.length;d=c.key(f++);)e.test(d)&&(l=JSON.parse(c.getItem(d)),l.expires&&l.expires<=v?a.push(d):m[d.replace(e,"")]=l.data);for(;d=a.pop();)c.removeItem(d)}catch(x){}return m}d="__amplify__"+d;if(f===g)if(l=(l=c.getItem(d))?JSON.parse(l):{expires:-1},l.expires&&l.expires<=v)c.removeItem(d);else return l.data;else if(null===f)c.removeItem(d);
else{l=JSON.stringify({data:f,expires:a.expires?v+a.expires:null});try{c.setItem(d,l)}catch(C){k[b]();try{c.setItem(d,l)}catch(y){throw k.error();}}}return m})}var k=f.store=function(b,c,d,e){e=k.type;d&&d.type&&d.type in k.types&&(e=d.type);return k.types[e](b,c,d||{})};k.types={};k.type=null;k.addType=function(b,c){k.type||(k.type=b);k.types[b]=c;k[b]=function(c,d,a){a=a||{};a.type=b;return k(c,d,a)}};k.error=function(){return"amplify.store quota exceeded"};var e=/^__amplify__/,l;for(l in{localStorage:1,
sessionStorage:1})try{window[l].getItem&&m(l,window[l])}catch(d){}if(window.globalStorage)try{m("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===k.type&&(k.type="globalStorage")}catch(c){}(function(){if(!k.types.localStorage){var b=document.createElement("div");b.style.display="none";document.getElementsByTagName("head")[0].appendChild(b);try{b.addBehavior("#default#userdata"),b.load("amplify")}catch(c){b.parentNode.removeChild(b);return}k.addType("userData",function(c,
d,a){b.load("amplify");var e,f,l=d,m=(new Date).getTime();if(!c){l={};f=[];for(c=0;d=b.XMLDocument.documentElement.attributes[c++];)e=JSON.parse(d.value),e.expires&&e.expires<=m?f.push(d.name):l[d.name]=e.data;for(;c=f.pop();)b.removeAttribute(c);b.save("amplify");return l}c=c.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(d===g)if(e=(d=b.getAttribute(c))?JSON.parse(d):{expires:-1},e.expires&&e.expires<=m)b.removeAttribute(c);
else return e.data;else null===d?b.removeAttribute(c):(f=b.getAttribute(c),e=JSON.stringify({data:d,expires:a.expires?m+a.expires:null}),b.setAttribute(c,e));try{b.save("amplify")}catch(p){null===f?b.removeAttribute(c):b.setAttribute(c,f);k.userData();try{b.setAttribute(c,e),b.save("amplify")}catch(y){throw null===f?b.removeAttribute(c):b.setAttribute(c,f),k.error();}}return l})}})();(function(){function b(b){return b===g?g:JSON.parse(JSON.stringify(b))}var c={},d={};k.addType("memory",function(e,
a,f){if(!e)return b(c);if(a===g)return b(c[e]);d[e]&&(clearTimeout(d[e]),delete d[e]);if(null===a)return delete c[e],null;c[e]=a;f.expires&&(d[e]=setTimeout(function(){delete c[e];delete d[e]},f.expires));return a})})()})(g);return g});
define(["aloha/core","jquery","PubSub"],function(g,f,n){function m(b){b.alohaUid||(b.alohaUid=++d);return b.alohaUid}function k(b,d){c[b.alohaUid]||(c[b.alohaUid]=[]);c[b.alohaUid].push(d);return c[b.alohaUid]}function e(c,d){b[c]||(b[c]=[]);b[c].push(d);return b[c]}function l(d){var e=b[d]||[],f;for(f=0;f<e.length;f++)e[f].apply(null,[c[e[f].alohaUid]||[]].concat(arguments))}var d=0,c={},b={};return function(){var b=Array.prototype.slice.call(arguments),c=b.shift();"string"===typeof c&&(c=[c]);var d=
b.shift();m(d);k(d,b);for(var a,f=function(b,c,d){l(a,b,c,d)},t=function(){l(a)},b=0;b<c.length;b++)a=c[b],e(a,d),g.bind(a,f),n.sub(a,t)}});
define("jquery aloha/core ui/surface ui/subguarded PubSub vendor/amplify.store util/browser".split(" "),function(g,f,n,m,k,e,l){function d(b,c,d,e){"absolute"===u&&(c.top+=r.scrollTop(),c.left+=r.scrollLeft());a.offset=c;b.stop().animate(c,d,function(){e(c);k.pub("aloha.floating.changed",{position:g.extend({},a)})})}function c(a){e.store("Aloha.FloatingMenu.pinned","true");e.store("Aloha.FloatingMenu.top",a.top);e.store("Aloha.FloatingMenu.left",a.left)}function b(a,b,c,d,e){for(b=0;b<a.length;b++)if(a[b][0].isActive())a[b][1](c,
d,e)}function p(a){if(g.browser.msie){var b=a.$element.parent();a.$element.appendTo("body");a.$element.css("position",u);b.length?a.$element.appendTo(b):a.$element.detach()}else a.$element.css("position",u)}var r=g(window),u=l.ie7?"absolute":"fixed",a={style:u,offset:{top:0,left:0}};return{getPinState:function(){return"true"===e.store("Aloha.FloatingMenu.pinned")?{top:parseInt(e.store("Aloha.FloatingMenu.top"),10),left:parseInt(e.store("Aloha.FloatingMenu.left"),10),isPinned:!0}:{top:null,left:null,
isPinned:!1}},makeFloating:function(a,d){m(["aloha-selection-changed","aloha.ui.container.selected"],b,a,function(){a._move()});var e=function(){var b;b=d.pinLeft;var c=d.pinTop;0>c?c=0:c>r.height()&&(c=r.height()/2);0>b?b=0:b>r.width()&&(b=r.width()/2);b={top:c,left:b};d.setFloatingPosition(b);a.$element.css({top:b.top,left:b.left})};r.scroll(function(){a._move(0)});r.resize(function(){d.isFloatingMode||e()});a.addPin();p(a);d.isFloatingMode||e();a.$element.css("z-index",10100).draggable({distance:20,
stop:function(a,b){d.setFloatingPosition(b.position);d.isFloatingMode||c(b.position)}})},floatSurface:function(a,b,c,e){"number"!==typeof c&&(c=500);var f=(parseInt(g("body").css("marginTop"),10)||0)+(parseInt(g("body").css("paddingTop"),10)||0);a=a.$element;var l=b.obj.offset(),k=l.top,l=l.left,m=r.scrollTop(),p=k-m-f,n=l+a.width()-r.width();0<n&&(l=Math.max(0,l-n));p>=a.height()?(b={top:k-m,left:l},b.top-=a.height()+10):(b=p+a.height()>p+b.obj.height()?{top:k+b.obj.height(),left:l}:{top:f,left:l},
b.top+=10);d(a,b,c,e)},togglePinSurface:function(a,b,d){a=a.$element;d?(e.store("Aloha.FloatingMenu.pinned",null),e.store("Aloha.FloatingMenu.top",null),e.store("Aloha.FloatingMenu.left",null),a.find(".aloha-ui-pin").removeClass("aloha-ui-pin-down")):(c(b),a.find(".aloha-ui-pin").addClass("aloha-ui-pin-down"));a.css({position:"fixed",top:b.top})},POSITION_STYLE:u}});
define("jqueryui",["jquery"],function(g){(function(f,g){function m(d,c){var b,e;b=d.nodeName.toLowerCase();if("area"===b){b=d.parentNode;e=b.name;if(!d.href||!e||"map"!==b.nodeName.toLowerCase())return!1;b=f("img[usemap=#"+e+"]")[0];return!!b&&k(b)}return(/input|select|textarea|button|object/.test(b)?!d.disabled:"a"===b?d.href||c:c)&&k(d)}function k(d){return!f(d).parents().andSelf().filter(function(){return"hidden"===f.css(this,"visibility")||f.expr.filters.hidden(this)}).length}var e=0,l=/^ui-id-\d+$/;
f.ui=f.ui||{};f.ui.version||(f.extend(f.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),f.fn.extend({_focus:f.fn.focus,focus:function(d,c){return"number"===typeof d?this.each(function(){var b=this;setTimeout(function(){f(b).focus();c&&c.call(b)},d)}):this._focus.apply(this,
arguments)},scrollParent:function(){var d;d=f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.css(this,"position"))&&/(auto|scroll)/.test(f.css(this,"overflow")+f.css(this,"overflow-y")+f.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(f.css(this,"overflow")+f.css(this,"overflow-y")+f.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||
!d.length?f(document):d},zIndex:function(d){if(d!==g)return this.css("zIndex",d);if(this.length){d=f(this[0]);for(var c;d.length&&d[0]!==document;){c=d.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(d.css("zIndex"),10),!isNaN(c)&&0!==c)return c;d=d.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){l.test(this.id)&&f(this).removeAttr("id")})}}),f("<a>").outerWidth(1).jquery||
f.each(["Width","Height"],function(d,c){function b(a,b,c,d){f.each(e,function(){b-=parseFloat(f.css(a,"padding"+this))||0;c&&(b-=parseFloat(f.css(a,"border"+this+"Width"))||0);d&&(b-=parseFloat(f.css(a,"margin"+this))||0)});return b}var e="Width"===c?["Left","Right"]:["Top","Bottom"],l=c.toLowerCase(),k={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+c]=function(a){return a===g?k["inner"+c].call(this):this.each(function(){f(this).css(l,
b(this,a)+"px")})};f.fn["outer"+c]=function(a,d){return"number"!==typeof a?k["outer"+c].call(this,a):this.each(function(){f(this).css(l,b(this,a,!0,d)+"px")})}}),f.extend(f.expr[":"],{data:f.expr.createPseudo?f.expr.createPseudo(function(d){return function(c){return!!f.data(c,d)}}):function(d,c,b){return!!f.data(d,b[3])},focusable:function(d){return m(d,!isNaN(f.attr(d,"tabindex")))},tabbable:function(d){var c=f.attr(d,"tabindex"),b=isNaN(c);return(b||0<=c)&&m(d,!b)}}),f(function(){var d=document.body,
c=d.appendChild(c=document.createElement("div"));c.offsetHeight;f.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});f.support.minHeight=100===c.offsetHeight;f.support.selectstart="onselectstart"in c;d.removeChild(c).style.display="none"}),f.fn.extend({disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(d){d.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),
f.extend(f.ui,{plugin:{add:function(d,c,b){var e;d=f.ui[d].prototype;for(e in b)d.plugins[e]=d.plugins[e]||[],d.plugins[e].push([c,b[e]])},call:function(d,c,b){var e=d.plugins[c];if(e&&d.element[0].parentNode&&11!==d.element[0].parentNode.nodeType)for(c=0;c<e.length;c++)d.options[e[c][0]]&&e[c][1].apply(d.element,b)}},contains:f.contains,hasScroll:function(d,c){if("hidden"===f(d).css("overflow"))return!1;var b=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;if(0<d[b])return!0;d[b]=1;e=0<d[b];d[b]=0;return e},
isOverAxis:function(d,c,b){return d>c&&d<c+b},isOver:function(d,c,b,e,l,k){return f.ui.isOverAxis(d,b,l)&&f.ui.isOverAxis(c,e,k)}}))})(g);(function(f,g){var m=0,k=Array.prototype.slice,e=f.cleanData;f.cleanData=function(l){for(var d=0,c;null!=(c=l[d]);d++)try{f(c).triggerHandler("remove")}catch(b){}e(l)};f.widget=function(e,d,c){var b,k,g,m,a=e.split(".")[0];e=e.split(".")[1];b=a+"-"+e;c||(c=d,d=f.Widget);f.expr[":"][b.toLowerCase()]=function(a){return!!f.data(a,b)};f[a]=f[a]||{};k=f[a][e];g=f[a][e]=
function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)};f.extend(g,k,{version:c.version,_proto:f.extend({},c),_childConstructors:[]});m=new d;m.options=f.widget.extend({},m.options);f.each(c,function(a,b){f.isFunction(b)&&(c[a]=function(){var c=function(){return d.prototype[a].apply(this,arguments)},e=function(b){return d.prototype[a].apply(this,b)};return function(){var a=this._super,d=this._superApply,f;this._super=c;this._superApply=e;f=b.apply(this,arguments);
this._super=a;this._superApply=d;return f}}())});g.prototype=f.widget.extend(m,{widgetEventPrefix:e},c,{constructor:g,namespace:a,widgetName:e,widgetBaseClass:b,widgetFullName:b});k?(f.each(k._childConstructors,function(a,b){var c=b.prototype;f.widget(c.namespace+"."+c.widgetName,g,b._proto)}),delete k._childConstructors):d._childConstructors.push(g);f.widget.bridge(e,g)};f.widget.extend=function(e){for(var d=k.call(arguments,1),c=0,b=d.length,m,r;c<b;c++)for(m in d[c])r=d[c][m],d[c].hasOwnProperty(m)&&
r!==g&&(e[m]=f.isPlainObject(r)?f.widget.extend({},e[m],r):r);return e};f.widget.bridge=function(e,d){var c=d.prototype.widgetFullName;f.fn[e]=function(b){var m="string"===typeof b,r=k.call(arguments,1),u=this;b=!m&&r.length?f.widget.extend.apply(null,[b].concat(r)):b;m?this.each(function(){var a,d=f.data(this,c);if(!d)return f.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+b+"'");if(!f.isFunction(d[b])||"_"===b.charAt(0))return f.error("no such method '"+
b+"' for "+e+" widget instance");a=d[b].apply(d,r);if(a!==d&&a!==g)return u=a&&a.jquery?u.pushStack(a.get()):a,!1}):this.each(function(){var a=f.data(this,c);a?a.option(b||{})._init():new d(b,this)});return u}};f.Widget=function(e,d){};f.Widget._childConstructors=[];f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,d){d=f(d||this.defaultElement||this)[0];this.element=f(d);this.uuid=m++;this.eventNamespace=
"."+this.widgetName+this.uuid;this.options=f.widget.extend({},this.options,this._getCreateOptions(),e);this.bindings=f();this.hoverable=f();this.focusable=f();d!==this&&(f.data(d,this.widgetName,this),f.data(d,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=f(d.style?d.ownerDocument:d.document||d),this.window=f(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:f.noop,
_getCreateEventData:f.noop,_create:f.noop,_init:f.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(f.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:f.noop,widget:function(){return this.element},option:function(e,d){var c=e,b,k,m;if(0===arguments.length)return f.widget.extend({},this.options);if("string"===typeof e)if(c={},b=e.split("."),e=b.shift(),b.length){k=c[e]=f.widget.extend({},this.options[e]);for(m=0;m<b.length-1;m++)k[b[m]]=k[b[m]]||{},k=k[b[m]];e=b.pop();if(d===g)return k[e]===g?null:k[e];k[e]=d}else{if(d===g)return this.options[e]===g?null:this.options[e];c[e]=d}this._setOptions(c);return this},_setOptions:function(e){for(var d in e)this._setOption(d,
e[d]);return this},_setOption:function(e,d){this.options[e]=d;"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!d).attr("aria-disabled",d),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,d){d?(e=f(e),this.bindings=this.bindings.add(e)):(d=e,e=this.element);var c=this;f.each(d,
function(b,d){function k(){if(!0!==c.options.disabled&&!f(this).hasClass("ui-state-disabled"))return("string"===typeof d?c[d]:d).apply(c,arguments)}"string"!==typeof d&&(k.guid=d.guid=d.guid||k.guid||f.guid++);var g=b.match(/^(\w+)\s*(.*)$/),a=g[1]+c.eventNamespace;(g=g[2])?c.widget().delegate(g,a,k):e.bind(a,k)})},_off:function(e,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.unbind(d).undelegate(d)},_delay:function(e,d){var c=this;return setTimeout(function(){return("string"===
typeof e?c[e]:e).apply(c,arguments)},d||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(d){f(d.currentTarget).addClass("ui-state-hover")},mouseleave:function(d){f(d.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(d){f(d.currentTarget).addClass("ui-state-focus")},focusout:function(d){f(d.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,d,c){var b,
k=this.options[e];c=c||{};d=f.Event(d);d.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();d.target=this.element[0];if(e=d.originalEvent)for(b in e)b in d||(d[b]=e[b]);this.element.trigger(d,c);return!(f.isFunction(k)&&!1===k.apply(this.element[0],[d].concat(c))||d.isDefaultPrevented())}};f.each({show:"fadeIn",hide:"fadeOut"},function(e,d){f.Widget.prototype["_"+e]=function(c,b,k){"string"===typeof b&&(b={effect:b});var g,m=b?!0===b||"number"===typeof b?d:b.effect||d:e;b=
b||{};"number"===typeof b&&(b={duration:b});g=!f.isEmptyObject(b);b.complete=k;b.delay&&c.delay(b.delay);if(g&&f.effects&&(f.effects.effect[m]||!1!==f.uiBackCompat&&f.effects[m]))c[e](b);else if(m!==e&&c[m])c[m](b.duration,b.easing,k);else c.queue(function(a){f(this)[e]();k&&k.call(c[0]);a()})}});!1!==f.uiBackCompat&&(f.Widget.prototype._getCreateOptions=function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]})})(g);(function(f,g){var m=!1;f(document).mouseup(function(f){m=
!1});f.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var k=this;this.element.bind("mousedown."+this.widgetName,function(e){return k._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(!0===f.data(e.target,k.widgetName+".preventClickEvent"))return f.removeData(e.target,k.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);
this._mouseMoveDelegate&&f(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(k){if(!m){this._mouseStarted&&this._mouseUp(k);this._mouseDownEvent=k;var e=this,l=1===k.which,d="string"===typeof this.options.cancel&&k.target.nodeName?f(k.target).closest(this.options.cancel).length:!1;if(!l||d||!this._mouseCapture(k))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(k)&&this._mouseDelayMet(k)&&(this._mouseStarted=!1!==this._mouseStart(k),!this._mouseStarted))return k.preventDefault(),!0;!0===f.data(k.target,this.widgetName+".preventClickEvent")&&f.removeData(k.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(c){return e._mouseMove(c)};this._mouseUpDelegate=function(c){return e._mouseUp(c)};f(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);k.preventDefault();return m=!0}},_mouseMove:function(k){if(f.browser.msie&&!(9<=document.documentMode||k.button))return this._mouseUp(k);if(this._mouseStarted)return this._mouseDrag(k),k.preventDefault();this._mouseDistanceMet(k)&&this._mouseDelayMet(k)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,k))?this._mouseDrag(k):this._mouseUp(k));return!this._mouseStarted},_mouseUp:function(k){f(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,k.target===this._mouseDownEvent.target&&f.data(k.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(k));return!1},_mouseDistanceMet:function(f){return Math.max(Math.abs(this._mouseDownEvent.pageX-f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance},_mouseDelayMet:function(f){return this.mouseDelayMet},_mouseStart:function(f){},_mouseDrag:function(f){},_mouseStop:function(f){},_mouseCapture:function(f){return!0}})})(g);
(function(f,n){function m(a,b,c){return[parseInt(a[0],10)*(u.test(a[0])?b/100:1),parseInt(a[1],10)*(u.test(a[1])?c/100:1)]}f.ui=f.ui||{};var k,e=Math.max,l=Math.abs,d=Math.round,c=/left|center|right/,b=/top|center|bottom/,p=/[\+\-]\d+%?/,r=/^\w+/,u=/%$/,a=f.fn.position;f.position={scrollbarWidth:function(){if(k!==n)return k;var a,b,c=f("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");b=c.children()[0];f("body").append(c);a=b.offsetWidth;
c.css("overflow","scroll");b=b.offsetWidth;a===b&&(b=c[0].clientWidth);c.remove();return k=a-b},getScrollInfo:function(a){var b=a.isWindow?"":a.element.css("overflow-x"),c=a.isWindow?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight;return{width:"scroll"===b||"auto"===b&&a.width<a.element[0].scrollWidth?f.position.scrollbarWidth():0,height:c?f.position.scrollbarWidth():0}},getWithinInfo:function(a){a=f(a||window);var b=f.isWindow(a[0]);return{element:a,
isWindow:b,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:b?a.width():a.outerWidth(),height:b?a.height():a.outerHeight()}}};f.fn.position=function(k){if(!k||!k.of)return a.apply(this,arguments);k=f.extend({},k);var g,n,u,C,y,z=f(k.of),D=f.position.getWithinInfo(k.within),F=f.position.getScrollInfo(D),H=z[0],M=(k.collision||"flip").split(" "),I={};9===H.nodeType?(n=z.width(),u=z.height(),C={top:0,left:0}):f.isWindow(H)?(n=z.width(),u=z.height(),C={top:z.scrollTop(),
left:z.scrollLeft()}):H.preventDefault?(k.at="left top",n=u=0,C={top:H.pageY,left:H.pageX}):(n=z.outerWidth(),u=z.outerHeight(),C=z.offset());y=f.extend({},C);f.each(["my","at"],function(){var a=(k[this]||"").split(" "),d,e;1===a.length&&(a=c.test(a[0])?a.concat(["center"]):b.test(a[0])?["center"].concat(a):["center","center"]);a[0]=c.test(a[0])?a[0]:"center";a[1]=b.test(a[1])?a[1]:"center";d=p.exec(a[0]);e=p.exec(a[1]);I[this]=[d?d[0]:0,e?e[0]:0];k[this]=[r.exec(a[0])[0],r.exec(a[1])[0]]});1===M.length&&
(M[1]=M[0]);"right"===k.at[0]?y.left+=n:"center"===k.at[0]&&(y.left+=n/2);"bottom"===k.at[1]?y.top+=u:"center"===k.at[1]&&(y.top+=u/2);g=m(I.at,n,u);y.left+=g[0];y.top+=g[1];return this.each(function(){var a,b,c=f(this),p=c.outerWidth(),r=c.outerHeight(),s=parseInt(f.css(this,"marginLeft"),10)||0,H=parseInt(f.css(this,"marginTop"),10)||0,Q=p+s+(parseInt(f.css(this,"marginRight"),10)||0)+F.width,U=r+H+(parseInt(f.css(this,"marginBottom"),10)||0)+F.height,N=f.extend({},y),V=m(I.my,c.outerWidth(),c.outerHeight());
"right"===k.my[0]?N.left-=p:"center"===k.my[0]&&(N.left-=p/2);"bottom"===k.my[1]?N.top-=r:"center"===k.my[1]&&(N.top-=r/2);N.left+=V[0];N.top+=V[1];f.support.offsetFractions||(N.left=d(N.left),N.top=d(N.top));a={marginLeft:s,marginTop:H};f.each(["left","top"],function(b,d){if(f.ui.position[M[b]])f.ui.position[M[b]][d](N,{targetWidth:n,targetHeight:u,elemWidth:p,elemHeight:r,collisionPosition:a,collisionWidth:Q,collisionHeight:U,offset:[g[0]+V[0],g[1]+V[1]],my:k.my,at:k.at,within:D,elem:c})});f.fn.bgiframe&&
c.bgiframe();k.using&&(b=function(a){var b=C.left-N.left,d=b+n-p,f=C.top-N.top,g=f+u-r,m={target:{element:z,left:C.left,top:C.top,width:n,height:u},element:{element:c,left:N.left,top:N.top,width:p,height:r},horizontal:0>d?"left":0<b?"right":"center",vertical:0>g?"top":0<f?"bottom":"middle"};n<p&&l(b+d)<n&&(m.horizontal="center");u<r&&l(f+g)<u&&(m.vertical="middle");e(l(b),l(d))>e(l(f),l(g))?m.important="horizontal":m.important="vertical";k.using.call(this,a,m)});c.offset(f.extend(N,{using:b}))})};
f.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,l=a.left-b.collisionPosition.marginLeft,c=d-l,k=l+b.collisionWidth-f-d;b.collisionWidth>f?0<c&&0>=k?(d=a.left+c+b.collisionWidth-f-d,a.left+=c-d):a.left=0<k&&0>=c?d:c>k?d+f-b.collisionWidth:d:a.left=0<c?a.left+c:0<k?a.left-k:e(a.left-l,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,l=a.top-b.collisionPosition.marginTop,c=d-l,k=l+b.collisionHeight-
f-d;b.collisionHeight>f?0<c&&0>=k?(d=a.top+c+b.collisionHeight-f-d,a.top+=c-d):a.top=0<k&&0>=c?d:c>k?d+f-b.collisionHeight:d:a.top=0<c?a.top+c:0<k?a.top-k:e(a.top-l,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,e=c.width,f=c.isWindow?c.scrollLeft:c.offset.left,k=a.left-b.collisionPosition.marginLeft,c=k-f,g=k+b.collisionWidth-e-f,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,p=-2*
b.offset[0];if(0>c){if(d=a.left+k+m+p+b.collisionWidth-e-d,0>d||d<l(c))a.left+=k+m+p}else 0<g&&(d=a.left-b.collisionPosition.marginLeft+k+m+p-f,0<d||l(d)<g)&&(a.left+=k+m+p)},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,e=c.height,f=c.isWindow?c.scrollTop:c.offset.top,k=a.top-b.collisionPosition.marginTop,c=k-f,g=k+b.collisionHeight-e-f,k="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];
0>c?(d=a.top+k+m+p+b.collisionHeight-e-d,a.top+k+m+p>c&&(0>d||d<l(c))&&(a.top+=k+m+p)):0<g&&(d=a.top-b.collisionPosition.marginTop+k+m+p-f,a.top+k+m+p>g&&(0<d||l(d)<g)&&(a.top+=k+m+p))}},flipfit:{left:function(){f.ui.position.flip.left.apply(this,arguments);f.ui.position.fit.left.apply(this,arguments)},top:function(){f.ui.position.flip.top.apply(this,arguments);f.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b,c,d,e=document.getElementsByTagName("body")[0];c=document.createElement("div");
a=document.createElement(e?"div":"body");b={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};e&&f.extend(b,{position:"absolute",left:"-1000px",top:"-1000px"});for(d in b)a.style[d]=b[d];a.appendChild(c);b=e||document.documentElement;b.insertBefore(a,b.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=f(c).offset().left;f.support.offsetFractions=10<c&&11>c;a.innerHTML="";b.removeChild(a)})();!1!==f.uiBackCompat&&function(a){var b=a.fn.position;a.fn.position=
function(c){if(!c||!c.offset)return b.call(this,c);var d=c.offset.split(" "),e=c.at.split(" ");1===d.length&&(d[1]=d[0]);/^\d/.test(d[0])&&(d[0]="+"+d[0]);/^\d/.test(d[1])&&(d[1]="+"+d[1]);1===e.length&&(/left|center|right/.test(e[0])?e[1]="center":(e[1]=e[0],e[0]="center"));return b.call(this,a.extend(c,{at:e[0]+d[0]+" "+e[1]+d[1],offset:n}))}}(g)})(g);(function(f,g){f.widget("ui.draggable",f.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,
containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&
this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(g){var k=this.options;if(this.helper||k.disabled||f(g.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(g);if(!this.handle)return!1;f(!0===k.iframeFix?"iframe":k.iframeFix).each(function(){f('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(f(this).offset()).appendTo("body")});return!0},_mouseStart:function(g){var k=this.options;this.helper=this._createHelper(g);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();f.ui.ddmanager&&(f.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset=
{top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};f.extend(this.offset,{click:{left:g.pageX-this.offset.left,top:g.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(g);this.originalPageX=g.pageX;this.originalPageY=g.pageY;k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt);k.containment&&this._setContainment();if(!1===this._trigger("start",g))return this._clear(),!1;this._cacheHelperProportions();
f.ui.ddmanager&&!k.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,g);this._mouseDrag(g,!0);f.ui.ddmanager&&f.ui.ddmanager.dragStart(this,g);return!0},_mouseDrag:function(g,k){this.position=this._generatePosition(g);this.positionAbs=this._convertPositionTo("absolute");if(!k){var e=this._uiHash();if(!1===this._trigger("drag",g,e))return this._mouseUp({}),!1;this.position=e.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==
this.options.axis||(this.helper[0].style.top=this.position.top+"px");f.ui.ddmanager&&f.ui.ddmanager.drag(this,g);return!1},_mouseStop:function(g){var k=!1;f.ui.ddmanager&&!this.options.dropBehaviour&&(k=f.ui.ddmanager.drop(this,g));this.dropped&&(k=this.dropped,this.dropped=!1);for(var e=this.element[0],l=!1;e&&(e=e.parentNode);)e==document&&(l=!0);if(!l&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!k||"valid"==this.options.revert&&k||!0===this.options.revert||f.isFunction(this.options.revert)&&
this.options.revert.call(this.element,k)){var d=this;f(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",g)&&d._clear()})}else!1!==this._trigger("stop",g)&&this._clear();return!1},_mouseUp:function(g){f("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});f.ui.ddmanager&&f.ui.ddmanager.dragStop(this,g);return f.ui.mouse.prototype._mouseUp.call(this,g)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(g){var k=this.options.handle&&f(this.options.handle,this.element).length?!1:!0;f(this.options.handle,this.element).find("*").andSelf().each(function(){this==g.target&&(k=!0)});return k},_createHelper:function(g){var k=this.options;g=f.isFunction(k.helper)?f(k.helper.apply(this.element[0],[g])):"clone"==k.helper?this.element.clone().removeAttr("id"):this.element;g.parents("body").length||g.appendTo("parent"==k.appendTo?this.element[0].parentNode:
k.appendTo);g[0]==this.element[0]||/(fixed|absolute)/.test(g.css("position"))||g.css("position","absolute");return g},_adjustOffsetFromHelper:function(g){"string"==typeof g&&(g=g.split(" "));f.isArray(g)&&(g={left:+g[0],top:+g[1]||0});"left"in g&&(this.offset.click.left=g.left+this.margins.left);"right"in g&&(this.offset.click.left=this.helperProportions.width-g.right+this.margins.left);"top"in g&&(this.offset.click.top=g.top+this.margins.top);"bottom"in g&&(this.offset.click.top=this.helperProportions.height-
g.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var g=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&f.contains(this.scrollParent[0],this.offsetParent[0])&&(g.left+=this.scrollParent.scrollLeft(),g.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&f.browser.msie)g={top:0,left:0};return{top:g.top+(parseInt(this.offsetParent.css("borderTopWidth"),
10)||0),left:g.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var f=this.element.position();return{top:f.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:f.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),
10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var g=this.options;"parent"==g.containment&&(g.containment=this.helper[0].parentNode);if("document"==g.containment||"window"==g.containment)this.containment=["document"==g.containment?0:f(window).scrollLeft()-this.offset.relative.left-
this.offset.parent.left,"document"==g.containment?0:f(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==g.containment?0:f(window).scrollLeft())+f("document"==g.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==g.containment?0:f(window).scrollTop())+(f("document"==g.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(g.containment)||
g.containment.constructor==Array)g.containment.constructor==Array&&(this.containment=g.containment);else{var g=f(g.containment),k=g[0];if(k){g.offset();var e="hidden"!=f(k).css("overflow");this.containment=[(parseInt(f(k).css("borderLeftWidth"),10)||0)+(parseInt(f(k).css("paddingLeft"),10)||0),(parseInt(f(k).css("borderTopWidth"),10)||0)+(parseInt(f(k).css("paddingTop"),10)||0),(e?Math.max(k.scrollWidth,k.offsetWidth):k.offsetWidth)-(parseInt(f(k).css("borderLeftWidth"),10)||0)-(parseInt(f(k).css("paddingRight"),
10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(k.scrollHeight,k.offsetHeight):k.offsetHeight)-(parseInt(f(k).css("borderTopWidth"),10)||0)-(parseInt(f(k).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=g}}},_convertPositionTo:function(g,k){k||(k=this.position);var e="absolute"==g?1:-1,l="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&f.contains(this.scrollParent[0],this.offsetParent[0])?
this.scrollParent:this.offsetParent,d=/(html|body)/i.test(l[0].tagName);return{top:k.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():d?0:l.scrollTop())*e,left:k.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():d?0:l.scrollLeft())*e}},_generatePosition:function(g){var k=this.options,e="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&f.contains(this.scrollParent[0],
this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(e[0].tagName),d=g.pageX,c=g.pageY;if(this.originalPosition){var b;this.containment&&(this.relative_container?(b=this.relative_container.offset(),b=[this.containment[0]+b.left,this.containment[1]+b.top,this.containment[2]+b.left,this.containment[3]+b.top]):b=this.containment,g.pageX-this.offset.click.left<b[0]&&(d=b[0]+this.offset.click.left),g.pageY-this.offset.click.top<b[1]&&(c=b[1]+this.offset.click.top),g.pageX-this.offset.click.left>
b[2]&&(d=b[2]+this.offset.click.left),g.pageY-this.offset.click.top>b[3]&&(c=b[3]+this.offset.click.top));k.grid&&(c=k.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/k.grid[1])*k.grid[1]:this.originalPageY,c=b?c-this.offset.click.top<b[1]||c-this.offset.click.top>b[3]?c-this.offset.click.top<b[1]?c+k.grid[1]:c-k.grid[1]:c:c,d=k.grid[0]?this.originalPageX+Math.round((d-this.originalPageX)/k.grid[0])*k.grid[0]:this.originalPageX,d=b?d-this.offset.click.left<b[0]||d-this.offset.click.left>
b[2]?d-this.offset.click.left<b[0]?d+k.grid[0]:d-k.grid[0]:d:d)}return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():l?0:e.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||
this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(g,k,e){e=e||this._uiHash();f.ui.plugin.call(this,g,[k,e]);"drag"==g&&(this.positionAbs=this._convertPositionTo("absolute"));return f.Widget.prototype._trigger.call(this,g,k,e)},plugins:{},_uiHash:function(f){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});f.ui.plugin.add("draggable","connectToSortable",{start:function(g,k){var e=f(this).data("draggable"),
l=e.options,d=f.extend({},k,{item:e.element});e.sortables=[];f(l.connectToSortable).each(function(){var c=f.data(this,"sortable");c&&!c.options.disabled&&(e.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",g,d))})},stop:function(g,k){var e=f(this).data("draggable"),l=f.extend({},k,{item:e.element});f.each(e.sortables,function(){this.instance.isOver?(this.instance.isOver=0,e.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&
(this.instance.options.revert=!0),this.instance._mouseStop(g),this.instance.options.helper=this.instance.options._helper,"original"==e.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",g,l))})},drag:function(g,k){var e=f(this).data("draggable"),l=this;f.each(e.sortables,function(d){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;
this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=f(l).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return k.helper[0]},g.target=this.instance.currentItem[0],this.instance._mouseCapture(g,!0),this.instance._mouseStart(g,!0,!0),this.instance.offset.click.top=e.offset.click.top,this.instance.offset.click.left=
e.offset.click.left,this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top,e._trigger("toSortable",g),e.dropped=this.instance.element,e.currentItem=e.element,this.instance.fromOutside=e),this.instance.currentItem&&this.instance._mouseDrag(g)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",
g,this.instance._uiHash(this.instance)),this.instance._mouseStop(g,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),e._trigger("fromSortable",g),e.dropped=!1)})}});f.ui.plugin.add("draggable","cursor",{start:function(g,k){var e=f("body"),l=f(this).data("draggable").options;e.css("cursor")&&(l._cursor=e.css("cursor"));e.css("cursor",l.cursor)},stop:function(g,k){var e=f(this).data("draggable").options;
e._cursor&&f("body").css("cursor",e._cursor)}});f.ui.plugin.add("draggable","opacity",{start:function(g,k){var e=f(k.helper),l=f(this).data("draggable").options;e.css("opacity")&&(l._opacity=e.css("opacity"));e.css("opacity",l.opacity)},stop:function(g,k){var e=f(this).data("draggable").options;e._opacity&&f(k.helper).css("opacity",e._opacity)}});f.ui.plugin.add("draggable","scroll",{start:function(g,k){var e=f(this).data("draggable");e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName&&
(e.overflowOffset=e.scrollParent.offset())},drag:function(g,k){var e=f(this).data("draggable"),l=e.options,d=!1;e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName?(l.axis&&"x"==l.axis||(e.overflowOffset.top+e.scrollParent[0].offsetHeight-g.pageY<l.scrollSensitivity?e.scrollParent[0].scrollTop=d=e.scrollParent[0].scrollTop+l.scrollSpeed:g.pageY-e.overflowOffset.top<l.scrollSensitivity&&(e.scrollParent[0].scrollTop=d=e.scrollParent[0].scrollTop-l.scrollSpeed)),l.axis&&"y"==l.axis||(e.overflowOffset.left+
e.scrollParent[0].offsetWidth-g.pageX<l.scrollSensitivity?e.scrollParent[0].scrollLeft=d=e.scrollParent[0].scrollLeft+l.scrollSpeed:g.pageX-e.overflowOffset.left<l.scrollSensitivity&&(e.scrollParent[0].scrollLeft=d=e.scrollParent[0].scrollLeft-l.scrollSpeed))):(l.axis&&"x"==l.axis||(g.pageY-f(document).scrollTop()<l.scrollSensitivity?d=f(document).scrollTop(f(document).scrollTop()-l.scrollSpeed):f(window).height()-(g.pageY-f(document).scrollTop())<l.scrollSensitivity&&(d=f(document).scrollTop(f(document).scrollTop()+
l.scrollSpeed))),l.axis&&"y"==l.axis||(g.pageX-f(document).scrollLeft()<l.scrollSensitivity?d=f(document).scrollLeft(f(document).scrollLeft()-l.scrollSpeed):f(window).width()-(g.pageX-f(document).scrollLeft())<l.scrollSensitivity&&(d=f(document).scrollLeft(f(document).scrollLeft()+l.scrollSpeed))));!1!==d&&f.ui.ddmanager&&!l.dropBehaviour&&f.ui.ddmanager.prepareOffsets(e,g)}});f.ui.plugin.add("draggable","snap",{start:function(g,k){var e=f(this).data("draggable"),l=e.options;e.snapElements=[];f(l.snap.constructor!=
String?l.snap.items||":data(draggable)":l.snap).each(function(){var d=f(this),c=d.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:d.outerWidth(),height:d.outerHeight(),top:c.top,left:c.left})})},drag:function(g,k){for(var e=f(this).data("draggable"),l=e.options,d=l.snapTolerance,c=k.offset.left,b=c+e.helperProportions.width,p=k.offset.top,n=p+e.helperProportions.height,u=e.snapElements.length-1;0<=u;u--){var a=e.snapElements[u].left,q=a+e.snapElements[u].width,t=e.snapElements[u].top,
v=t+e.snapElements[u].height;if(a-d<c&&c<q+d&&t-d<p&&p<v+d||a-d<c&&c<q+d&&t-d<n&&n<v+d||a-d<b&&b<q+d&&t-d<p&&p<v+d||a-d<b&&b<q+d&&t-d<n&&n<v+d){if("inner"!=l.snapMode){var x=Math.abs(t-n)<=d,C=Math.abs(v-p)<=d,y=Math.abs(a-b)<=d,z=Math.abs(q-c)<=d;x&&(k.position.top=e._convertPositionTo("relative",{top:t-e.helperProportions.height,left:0}).top-e.margins.top);C&&(k.position.top=e._convertPositionTo("relative",{top:v,left:0}).top-e.margins.top);y&&(k.position.left=e._convertPositionTo("relative",{top:0,
left:a-e.helperProportions.width}).left-e.margins.left);z&&(k.position.left=e._convertPositionTo("relative",{top:0,left:q}).left-e.margins.left)}var D=x||C||y||z;"outer"!=l.snapMode&&(x=Math.abs(t-p)<=d,C=Math.abs(v-n)<=d,y=Math.abs(a-c)<=d,z=Math.abs(q-b)<=d,x&&(k.position.top=e._convertPositionTo("relative",{top:t,left:0}).top-e.margins.top),C&&(k.position.top=e._convertPositionTo("relative",{top:v-e.helperProportions.height,left:0}).top-e.margins.top),y&&(k.position.left=e._convertPositionTo("relative",
{top:0,left:a}).left-e.margins.left),z&&(k.position.left=e._convertPositionTo("relative",{top:0,left:q-e.helperProportions.width}).left-e.margins.left));!e.snapElements[u].snapping&&(x||C||y||z||D)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,g,f.extend(e._uiHash(),{snapItem:e.snapElements[u].item}));e.snapElements[u].snapping=x||C||y||z||D}else e.snapElements[u].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,g,f.extend(e._uiHash(),{snapItem:e.snapElements[u].item})),
e.snapElements[u].snapping=!1}}});f.ui.plugin.add("draggable","stack",{start:function(g,k){var e=f(this).data("draggable").options,e=f.makeArray(f(e.stack)).sort(function(d,c){return(parseInt(f(d).css("zIndex"),10)||0)-(parseInt(f(c).css("zIndex"),10)||0)});if(e.length){var l=parseInt(e[0].style.zIndex)||0;f(e).each(function(d){this.style.zIndex=l+d});this[0].style.zIndex=l+e.length}}});f.ui.plugin.add("draggable","zIndex",{start:function(g,k){var e=f(k.helper),l=f(this).data("draggable").options;
e.css("zIndex")&&(l._zIndex=e.css("zIndex"));e.css("zIndex",l.zIndex)},stop:function(g,k){var e=f(this).data("draggable").options;e._zIndex&&f(k.helper).css("zIndex",e._zIndex)}})})(g);(function(f,g){f.widget("ui.droppable",{version:"1.9.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var g=this.options,k=g.accept;this.isover=0;this.isout=1;this.accept=f.isFunction(k)?k:function(e){return e.is(k)};
this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};f.ui.ddmanager.droppables[g.scope]=f.ui.ddmanager.droppables[g.scope]||[];f.ui.ddmanager.droppables[g.scope].push(this);g.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var g=f.ui.ddmanager.droppables[this.options.scope],k=0;k<g.length;k++)g[k]==this&&g.splice(k,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(g,k){"accept"==g&&(this.accept=f.isFunction(k)?
k:function(e){return e.is(k)});f.Widget.prototype._setOption.apply(this,arguments)},_activate:function(g){var k=f.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);k&&this._trigger("activate",g,this.ui(k))},_deactivate:function(g){var k=f.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);k&&this._trigger("deactivate",g,this.ui(k))},_over:function(g){var k=f.ui.ddmanager.current;k&&(k.currentItem||k.element)[0]!=
this.element[0]&&this.accept.call(this.element[0],k.currentItem||k.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",g,this.ui(k)))},_out:function(g){var k=f.ui.ddmanager.current;k&&(k.currentItem||k.element)[0]!=this.element[0]&&this.accept.call(this.element[0],k.currentItem||k.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",g,this.ui(k)))},_drop:function(g,k){var e=k||f.ui.ddmanager.current;
if(!e||(e.currentItem||e.element)[0]==this.element[0])return!1;var l=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var d=f.data(this,"droppable");if(d.options.greedy&&!d.options.disabled&&d.options.scope==e.options.scope&&d.accept.call(d.element[0],e.currentItem||e.element)&&f.ui.intersect(e,f.extend(d,{offset:d.element.offset()}),d.options.tolerance))return l=!0,!1});return l?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this.options.activeClass&&
this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",g,this.ui(e)),this.element):!1},ui:function(f){return{draggable:f.currentItem||f.element,helper:f.helper,position:f.position,offset:f.positionAbs}}});f.ui.intersect=function(g,k,e){if(!k.offset)return!1;var l=(g.positionAbs||g.position.absolute).left,d=l+g.helperProportions.width,c=(g.positionAbs||g.position.absolute).top,b=c+g.helperProportions.height,
p=k.offset.left,n=p+k.proportions.width,u=k.offset.top,a=u+k.proportions.height;switch(e){case "fit":return p<=l&&d<=n&&u<=c&&b<=a;case "intersect":return p<l+g.helperProportions.width/2&&d-g.helperProportions.width/2<n&&u<c+g.helperProportions.height/2&&b-g.helperProportions.height/2<a;case "pointer":return f.ui.isOver((g.positionAbs||g.position.absolute).top+(g.clickOffset||g.offset.click).top,(g.positionAbs||g.position.absolute).left+(g.clickOffset||g.offset.click).left,u,p,k.proportions.height,
k.proportions.width);case "touch":return(c>=u&&c<=a||b>=u&&b<=a||c<u&&b>a)&&(l>=p&&l<=n||d>=p&&d<=n||l<p&&d>n);default:return!1}};f.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(g,k){var e=f.ui.ddmanager.droppables[g.options.scope]||[],l=k?k.type:null,d=(g.currentItem||g.element).find(":data(droppable)").andSelf(),c=0;a:for(;c<e.length;c++)if(!(e[c].options.disabled||g&&!e[c].accept.call(e[c].element[0],g.currentItem||g.element))){for(var b=0;b<d.length;b++)if(d[b]==
e[c].element[0]){e[c].proportions.height=0;continue a}e[c].visible="none"!=e[c].element.css("display");e[c].visible&&("mousedown"==l&&e[c]._activate.call(e[c],k),e[c].offset=e[c].element.offset(),e[c].proportions={width:e[c].element[0].offsetWidth,height:e[c].element[0].offsetHeight})}},drop:function(g,k){var e=!1;f.each(f.ui.ddmanager.droppables[g.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&f.ui.intersect(g,this,this.options.tolerance)&&(e=this._drop.call(this,
k)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],g.currentItem||g.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,k)))});return e},dragStart:function(g,k){g.element.parentsUntil("body").bind("scroll.droppable",function(){g.options.refreshPositions||f.ui.ddmanager.prepareOffsets(g,k)})},drag:function(g,k){g.options.refreshPositions&&f.ui.ddmanager.prepareOffsets(g,k);f.each(f.ui.ddmanager.droppables[g.options.scope]||[],function(){if(!this.options.disabled&&
!this.greedyChild&&this.visible){var e=f.ui.intersect(g,this,this.options.tolerance);if(e=e||1!=this.isover?e&&0==this.isover?"isover":null:"isout"){var l;if(this.options.greedy){var d=this.options.scope,c=this.element.parents(":data(droppable)").filter(function(){return f.data(this,"droppable").options.scope===d});c.length&&(l=f.data(c[0],"droppable"),l.greedyChild="isover"==e?1:0)}l&&"isover"==e&&(l.isover=0,l.isout=1,l._out.call(l,k));this[e]=1;this["isout"==e?"isover":"isout"]=0;this["isover"==
e?"_over":"_out"].call(this,k);l&&"isout"==e&&(l.isout=0,l.isover=1,l._over.call(l,k))}}})},dragStop:function(g,k){g.element.parentsUntil("body").unbind("scroll.droppable");g.options.refreshPositions||f.ui.ddmanager.prepareOffsets(g,k)}}})(g);(function(f,g){f.widget("ui.resizable",f.ui.mouse,{version:"1.9.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,
maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var e=this,l=this.options;this.element.addClass("ui-resizable");f.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,
marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=l.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",
sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var c=0;c<d.length;c++){var b=f.trim(d[c]),k=f('<div class="ui-resizable-handle ui-resizable-'+b+'"></div>');k.css({zIndex:l.zIndex});"se"==b&&k.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[b]=".ui-resizable-"+b;this.element.append(k)}}this._renderAxis=function(b){b=
b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=f(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var a=f(this.handles[c],this.element),d=0,d=/sw|ne|nw|se|n|s/.test(c)?a.outerHeight():a.outerWidth(),a=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(a,d);this._proportionallyResize()}f(this.handles[c])}};
this._renderAxis(this.element);this._handles=f(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!e.resizing){if(this.className)var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=b&&b[1]?b[1]:"se"}});l.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").mouseenter(function(){l.disabled||(f(this).removeClass("ui-resizable-autohide"),e._handles.show())}).mouseleave(function(){l.disabled||e.resizing||(f(this).addClass("ui-resizable-autohide"),
e._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(d){f(d).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var l=this.element;l.after(this.originalElement.css({position:l.css("position"),width:l.outerWidth(),height:l.outerHeight(),top:l.css("top"),left:l.css("left")})).remove()}this.originalElement.css("resize",
this.originalResizeStyle);e(this.originalElement);return this},_mouseCapture:function(e){var l=!1,d;for(d in this.handles)f(this.handles[d])[0]==e.target&&(l=!0);return!this.options.disabled&&l},_mouseStart:function(e){var l=this.options,d=this.element.position(),c=this.element;this.resizing=!0;this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()};(c.is(".ui-draggable")||/absolute/.test(c.css("position")))&&c.css({position:"absolute",top:d.top,left:d.left});this._renderProxy();
var d=m(this.helper.css("left")),b=m(this.helper.css("top"));l.containment&&(d+=f(l.containment).scrollLeft()||0,b+=f(l.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:d,top:b};this.size=this._helper?{width:c.outerWidth(),height:c.outerHeight()}:{width:c.width(),height:c.height()};this.originalSize=this._helper?{width:c.outerWidth(),height:c.outerHeight()}:{width:c.width(),height:c.height()};this.originalPosition={left:d,top:b};this.sizeDiff={width:c.outerWidth()-
c.width(),height:c.outerHeight()-c.height()};this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio="number"==typeof l.aspectRatio?l.aspectRatio:this.originalSize.width/this.originalSize.height||1;l=f(".ui-resizable-"+this.axis).css("cursor");f("body").css("cursor","auto"==l?this.axis+"-resize":l);c.addClass("ui-resizable-resizing");this._propagate("start",e);return!0},_mouseDrag:function(e){var f=this.helper,d=this.originalMousePosition,c=this._change[this.axis];if(!c)return!1;d=
c.apply(this,[e,e.pageX-d.left||0,e.pageY-d.top||0]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)d=this._updateRatio(d,e);d=this._respectSize(d,e);this._propagate("resize",e);f.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(d);this._trigger("resize",e,this.ui());return!1},_mouseStop:function(e){this.resizing=
!1;var l=this.options;if(this._helper){var d=this._proportionallyResizeElements,c=d.length&&/textarea/i.test(d[0].nodeName),d=c&&f.ui.hasScroll(d[0],"left")?0:this.sizeDiff.height,c=c?0:this.sizeDiff.width,c={width:this.helper.width()-c,height:this.helper.height()-d},d=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,b=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;l.animate||this.element.css(f.extend(c,{top:b,left:d}));
this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!l.animate&&this._proportionallyResize()}f("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",e);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(e){var f=this.options,d,c,b,f={minWidth:k(f.minWidth)?f.minWidth:0,maxWidth:k(f.maxWidth)?f.maxWidth:Infinity,minHeight:k(f.minHeight)?f.minHeight:0,maxHeight:k(f.maxHeight)?f.maxHeight:Infinity};
if(this._aspectRatio||e)e=f.minHeight*this.aspectRatio,c=f.minWidth/this.aspectRatio,d=f.maxHeight*this.aspectRatio,b=f.maxWidth/this.aspectRatio,e>f.minWidth&&(f.minWidth=e),c>f.minHeight&&(f.minHeight=c),d<f.maxWidth&&(f.maxWidth=d),b<f.maxHeight&&(f.maxHeight=b);this._vBoundaries=f},_updateCache:function(e){this.offset=this.helper.offset();k(e.left)&&(this.position.left=e.left);k(e.top)&&(this.position.top=e.top);k(e.height)&&(this.size.height=e.height);k(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,
f){var d=this.position,c=this.size,b=this.axis;k(e.height)?e.width=e.height*this.aspectRatio:k(e.width)&&(e.height=e.width/this.aspectRatio);"sw"==b&&(e.left=d.left+(c.width-e.width),e.top=null);"nw"==b&&(e.top=d.top+(c.height-e.height),e.left=d.left+(c.width-e.width));return e},_respectSize:function(e,f){var d=this._vBoundaries,c=this.axis,b=k(e.width)&&d.maxWidth&&d.maxWidth<e.width,g=k(e.height)&&d.maxHeight&&d.maxHeight<e.height,m=k(e.width)&&d.minWidth&&d.minWidth>e.width,n=k(e.height)&&d.minHeight&&
d.minHeight>e.height;m&&(e.width=d.minWidth);n&&(e.height=d.minHeight);b&&(e.width=d.maxWidth);g&&(e.height=d.maxHeight);var a=this.originalPosition.left+this.originalSize.width,q=this.position.top+this.size.height,t=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);m&&t&&(e.left=a-d.minWidth);b&&t&&(e.left=a-d.maxWidth);n&&c&&(e.top=q-d.minHeight);g&&c&&(e.top=q-d.maxHeight);(d=!e.width&&!e.height)&&!e.left&&e.top?e.top=null:d&&!e.top&&e.left&&(e.left=null);return e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e=
this.helper||this.element,l=0;l<this._proportionallyResizeElements.length;l++){var d=this._proportionallyResizeElements[l];if(!this.borderDif){var c=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],b=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=f.map(c,function(c,d){var e=parseInt(c,10)||0,a=parseInt(b[d],10)||0;return e+a})}d.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||
0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var l=f.browser.msie&&7>f.browser.version,d=l?1:0,l=l?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+l,height:this.element.outerHeight()+l,position:"absolute",left:this.elementOffset.left-d+"px",top:this.elementOffset.top-d+"px",zIndex:++e.zIndex});
this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,f,d){return{width:this.originalSize.width+f}},w:function(e,f,d){return{left:this.originalPosition.left+f,width:this.originalSize.width-f}},n:function(e,f,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-d}},s:function(e,f,d){return{height:this.originalSize.height+d}},se:function(e,l,d){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,l,d]))},
sw:function(e,l,d){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,l,d]))},ne:function(e,l,d){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,l,d]))},nw:function(e,l,d){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,l,d]))}},_propagate:function(e,l){f.ui.plugin.call(this,e,[l,this.ui()]);"resize"!=e&&this._trigger(e,l,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});f.ui.plugin.add("resizable","alsoResize",{start:function(e,l){var d=f(this).data("resizable").options,c=function(b){f(b).each(function(){var b=f(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof d.alsoResize||d.alsoResize.parentNode?
c(d.alsoResize):d.alsoResize.length?(d.alsoResize=d.alsoResize[0],c(d.alsoResize)):f.each(d.alsoResize,function(b){c(b)})},resize:function(e,l){var d=f(this).data("resizable"),c=d.options,b=d.originalSize,k=d.originalPosition,g={height:d.size.height-b.height||0,width:d.size.width-b.width||0,top:d.position.top-k.top||0,left:d.position.left-k.left||0},m=function(a,b){f(a).each(function(){var a=f(this),c=f(this).data("resizable-alsoresize"),d={},e=b&&b.length?b:a.parents(l.originalElement[0]).length?
["width","height"]:["width","height","top","left"];f.each(e,function(a,b){var e=(c[b]||0)+(g[b]||0);e&&0<=e&&(d[b]=e||null)});a.css(d)})};"object"!=typeof c.alsoResize||c.alsoResize.nodeType?m(c.alsoResize):f.each(c.alsoResize,function(a,b){m(a,b)})},stop:function(e,l){f(this).removeData("resizable-alsoresize")}});f.ui.plugin.add("resizable","animate",{stop:function(e,l){var d=f(this).data("resizable"),c=d.options,b=d._proportionallyResizeElements,k=b.length&&/textarea/i.test(b[0].nodeName),g=k&&
f.ui.hasScroll(b[0],"left")?0:d.sizeDiff.height,k={width:d.size.width-(k?0:d.sizeDiff.width),height:d.size.height-g},g=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,m=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(f.extend(k,m&&g?{top:m,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var a={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),
10),left:parseInt(d.element.css("left"),10)};b&&b.length&&f(b[0]).css({width:a.width,height:a.height});d._updateCache(a);d._propagate("resize",e)}})}});f.ui.plugin.add("resizable","containment",{start:function(e,l){var d=f(this).data("resizable"),c=d.element,b=d.options.containment;if(c=b instanceof f?b.get(0):/parent/.test(b)?c.parent().get(0):b)if(d.containerElement=f(c),/document/.test(b)||b==document)d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:f(document),
left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight};else{var k=f(c),g=[];f(["Top","Right","Left","Bottom"]).each(function(a,b){g[a]=m(k.css("padding"+b))});d.containerOffset=k.offset();d.containerPosition=k.position();d.containerSize={height:k.innerHeight()-g[3],width:k.innerWidth()-g[1]};var b=d.containerOffset,n=d.containerSize.height,a=d.containerSize.width,a=f.ui.hasScroll(c,"left")?c.scrollWidth:a,n=f.ui.hasScroll(c)?c.scrollHeight:n;d.parentData=
{element:c,left:b.left,top:b.top,width:a,height:n}}},resize:function(e,l){var d=f(this).data("resizable"),c=d.options,b=d.containerOffset,k=d.position,g=d._aspectRatio||e.shiftKey,m={top:0,left:0},a=d.containerElement;a[0]!=document&&/static/.test(a.css("position"))&&(m=b);k.left<(d._helper?b.left:0)&&(d.size.width+=d._helper?d.position.left-b.left:d.position.left-m.left,g&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=c.helper?b.left:0);k.top<(d._helper?b.top:0)&&(d.size.height+=d._helper?
d.position.top-b.top:d.position.top,g&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?b.top:0);d.offset.left=d.parentData.left+d.position.left;d.offset.top=d.parentData.top+d.position.top;c=Math.abs(d.offset.left-m.left+d.sizeDiff.width);b=Math.abs((d._helper?d.offset.top-m.top:d.offset.top-b.top)+d.sizeDiff.height);m=d.containerElement.get(0)==d.element.parent().get(0);k=/relative|absolute/.test(d.containerElement.css("position"));m&&k&&(c-=d.parentData.left);c+d.size.width>=
d.parentData.width&&(d.size.width=d.parentData.width-c,g&&(d.size.height=d.size.width/d.aspectRatio));b+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-b,g&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(e,l){var d=f(this).data("resizable"),c=d.options,b=d.containerOffset,k=d.containerPosition,g=d.containerElement,m=f(d.helper),a=m.offset(),q=m.outerWidth()-d.sizeDiff.width,m=m.outerHeight()-d.sizeDiff.height;d._helper&&!c.animate&&/relative/.test(g.css("position"))&&
f(this).css({left:a.left-k.left-b.left,width:q,height:m});d._helper&&!c.animate&&/static/.test(g.css("position"))&&f(this).css({left:a.left-k.left-b.left,width:q,height:m})}});f.ui.plugin.add("resizable","ghost",{start:function(e,l){var d=f(this).data("resizable"),c=d.options,b=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:b.height,width:b.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?
c.ghost:"");d.ghost.appendTo(d.helper)},resize:function(e,l){var d=f(this).data("resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(e,l){var d=f(this).data("resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});f.ui.plugin.add("resizable","grid",{resize:function(e,l){var d=f(this).data("resizable"),c=d.options,b=d.size,k=d.originalSize,g=d.originalPosition,m=d.axis;c.grid="number"==typeof c.grid?[c.grid,c.grid]:c.grid;
var a=Math.round((b.width-k.width)/(c.grid[0]||1))*(c.grid[0]||1),c=Math.round((b.height-k.height)/(c.grid[1]||1))*(c.grid[1]||1);/^(se|s|e)$/.test(m)?(d.size.width=k.width+a,d.size.height=k.height+c):/^(ne)$/.test(m)?(d.size.width=k.width+a,d.size.height=k.height+c,d.position.top=g.top-c):(/^(sw)$/.test(m)?(d.size.width=k.width+a,d.size.height=k.height+c):(d.size.width=k.width+a,d.size.height=k.height+c,d.position.top=g.top-c),d.position.left=g.left-a)}});var m=function(e){return parseInt(e,10)||
0},k=function(e){return!isNaN(parseInt(e,10))}})(g);(function(f,g){f.widget("ui.selectable",f.ui.mouse,{version:"1.9.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var g=this;this.element.addClass("ui-selectable");this.dragged=!1;var k;this.refresh=function(){k=f(g.options.filter,g.element[0]);k.addClass("ui-selectee");k.each(function(){var e=f(this),l=e.offset();f.data(this,"selectable-item",{element:this,$element:e,left:l.left,top:l.top,right:l.left+
e.outerWidth(),bottom:l.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})};this.refresh();this.selectees=k.addClass("ui-selectee");this._mouseInit();this.helper=f("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(g){var k=
this;this.opos=[g.pageX,g.pageY];if(!this.options.disabled){var e=this.options;this.selectees=f(e.filter,this.element[0]);this._trigger("start",g);f(e.appendTo).append(this.helper);this.helper.css({left:g.clientX,top:g.clientY,width:0,height:0});e.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var e=f.data(this,"selectable-item");e.startselected=!0;g.metaKey||g.ctrlKey||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=
!0,k._trigger("unselecting",g,{unselecting:e.element}))});f(g.target).parents().andSelf().each(function(){var e=f.data(this,"selectable-item");if(e){var d=!g.metaKey&&!g.ctrlKey||!e.$element.hasClass("ui-selected");e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");e.unselecting=!d;e.selecting=d;(e.selected=d)?k._trigger("selecting",g,{selecting:e.element}):k._trigger("unselecting",g,{unselecting:e.element});return!1}})}},_mouseDrag:function(g){var k=
this;this.dragged=!0;if(!this.options.disabled){var e=this.options,l=this.opos[0],d=this.opos[1],c=g.pageX,b=g.pageY;if(l>c)var p=c,c=l,l=p;d>b&&(p=b,b=d,d=p);this.helper.css({left:l,top:d,width:c-l,height:b-d});this.selectees.each(function(){var p=f.data(this,"selectable-item");if(p&&p.element!=k.element[0]){var n=!1;"touch"==e.tolerance?n=!(p.left>c||p.right<l||p.top>b||p.bottom<d):"fit"==e.tolerance&&(n=p.left>l&&p.right<c&&p.top>d&&p.bottom<b);n?(p.selected&&(p.$element.removeClass("ui-selected"),
p.selected=!1),p.unselecting&&(p.$element.removeClass("ui-unselecting"),p.unselecting=!1),p.selecting||(p.$element.addClass("ui-selecting"),p.selecting=!0,k._trigger("selecting",g,{selecting:p.element}))):(p.selecting&&((g.metaKey||g.ctrlKey)&&p.startselected?(p.$element.removeClass("ui-selecting"),p.selecting=!1,p.$element.addClass("ui-selected"),p.selected=!0):(p.$element.removeClass("ui-selecting"),p.selecting=!1,p.startselected&&(p.$element.addClass("ui-unselecting"),p.unselecting=!0),k._trigger("unselecting",
g,{unselecting:p.element}))),!p.selected||g.metaKey||g.ctrlKey||p.startselected||(p.$element.removeClass("ui-selected"),p.selected=!1,p.$element.addClass("ui-unselecting"),p.unselecting=!0,k._trigger("unselecting",g,{unselecting:p.element})))}});return!1}},_mouseStop:function(g){var k=this;this.dragged=!1;f(".ui-unselecting",this.element[0]).each(function(){var e=f.data(this,"selectable-item");e.$element.removeClass("ui-unselecting");e.unselecting=!1;e.startselected=!1;k._trigger("unselected",g,{unselected:e.element})});
f(".ui-selecting",this.element[0]).each(function(){var e=f.data(this,"selectable-item");e.$element.removeClass("ui-selecting").addClass("ui-selected");e.selecting=!1;e.selected=!0;e.startselected=!0;k._trigger("selected",g,{selected:e.element})});this._trigger("stop",g);this.helper.remove();return!1}})})(g);(function(f,g){f.widget("ui.sortable",f.ui.mouse,{version:"1.9.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,
forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var f=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===f.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=
this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var f=this.items.length-1;0<=f;f--)this.items[f].item.removeData(this.widgetName+"-item");return this},_setOption:function(g,k){"disabled"===g?(this.options[g]=k,this.widget().toggleClass("ui-sortable-disabled",!!k)):f.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(g,k){var e=this;if(this.reverting||this.options.disabled||
"static"==this.options.type)return!1;this._refreshItems(g);var l=null;f(g.target).parents().each(function(){if(f.data(this,e.widgetName+"-item")==e)return l=f(this),!1});f.data(g.target,e.widgetName+"-item")==e&&(l=f(g.target));if(!l)return!1;if(this.options.handle&&!k){var d=!1;f(this.options.handle,l).find("*").andSelf().each(function(){this==g.target&&(d=!0)});if(!d)return!1}this.currentItem=l;this._removeCurrentsFromItems();return!0},_mouseStart:function(g,k,e){k=this.options;this.currentContainer=
this;this.refreshPositions();this.helper=this._createHelper(g);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};f.extend(this.offset,{click:{left:g.pageX-this.offset.left,top:g.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=
this.helper.css("position");this.originalPosition=this._generatePosition(g);this.originalPageX=g.pageX;this.originalPageY=g.pageY;k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();k.containment&&this._setContainment();k.cursor&&(f("body").css("cursor")&&(this._storedCursor=f("body").css("cursor")),f("body").css("cursor",k.cursor));
k.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",k.opacity));k.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",k.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",g,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!e)for(e=this.containers.length-
1;0<=e;e--)this.containers[e]._trigger("activate",g,this._uiHash(this));f.ui.ddmanager&&(f.ui.ddmanager.current=this);f.ui.ddmanager&&!k.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,g);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(g);return!0},_mouseDrag:function(g){this.position=this._generatePosition(g);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var k=this.options,e=
!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-g.pageY<k.scrollSensitivity?this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+k.scrollSpeed:g.pageY-this.overflowOffset.top<k.scrollSensitivity&&(this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-k.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-g.pageX<k.scrollSensitivity?this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+
k.scrollSpeed:g.pageX-this.overflowOffset.left<k.scrollSensitivity&&(this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-k.scrollSpeed)):(g.pageY-f(document).scrollTop()<k.scrollSensitivity?e=f(document).scrollTop(f(document).scrollTop()-k.scrollSpeed):f(window).height()-(g.pageY-f(document).scrollTop())<k.scrollSensitivity&&(e=f(document).scrollTop(f(document).scrollTop()+k.scrollSpeed)),g.pageX-f(document).scrollLeft()<k.scrollSensitivity?e=f(document).scrollLeft(f(document).scrollLeft()-
k.scrollSpeed):f(window).width()-(g.pageX-f(document).scrollLeft())<k.scrollSensitivity&&(e=f(document).scrollLeft(f(document).scrollLeft()+k.scrollSpeed)));!1!==e&&f.ui.ddmanager&&!k.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,g)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(k=this.items.length-
1;0<=k;k--){var e=this.items[k],l=e.item[0],d=this._intersectsWithPointer(e);if(d&&e.instance===this.currentContainer&&l!=this.currentItem[0]&&this.placeholder[1==d?"next":"prev"]()[0]!=l&&!f.contains(this.placeholder[0],l)&&("semi-dynamic"==this.options.type?!f.contains(this.element[0],l):1)){this.direction=1==d?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(e))this._rearrange(g,e);else break;this._trigger("change",g,this._uiHash());break}}this._contactContainers(g);
f.ui.ddmanager&&f.ui.ddmanager.drag(this,g);this._trigger("sort",g,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(g,k){if(g){f.ui.ddmanager&&!this.options.dropBehaviour&&f.ui.ddmanager.drop(this,g);if(this.options.revert){var e=this,l=this.placeholder.offset();this.reverting=!0;f(this.helper).animate({left:l.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:l.top-this.offset.parent.top-this.margins.top+
(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){e._clear(g)})}else this._clear(g,k);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var g=this.containers.length-1;0<=g;g--)this.containers[g]._trigger("deactivate",null,this._uiHash(this)),this.containers[g].containerCache.over&&
(this.containers[g]._trigger("out",null,this._uiHash(this)),this.containers[g].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),f.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?f(this.domPosition.prev).after(this.currentItem):f(this.domPosition.parent).prepend(this.currentItem));
return this},serialize:function(g){var k=this._getItemsAsjQuery(g&&g.connected),e=[];g=g||{};f(k).each(function(){var l=(f(g.item||this).attr(g.attribute||"id")||"").match(g.expression||/(.+)[-=_](.+)/);l&&e.push((g.key||l[1]+"[]")+"="+(g.key&&g.expression?l[1]:l[2]))});!e.length&&g.key&&e.push(g.key+"=");return e.join("&")},toArray:function(g){var k=this._getItemsAsjQuery(g&&g.connected),e=[];g=g||{};k.each(function(){e.push(f(g.item||this).attr(g.attribute||"id")||"")});return e},_intersectsWith:function(f){var k=
this.positionAbs.left,e=k+this.helperProportions.width,l=this.positionAbs.top,d=l+this.helperProportions.height,c=f.left,b=c+f.width,g=f.top,n=g+f.height,u=this.offset.click.top,a=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>f[this.floating?"width":"height"]?l+u>g&&l+u<n&&k+a>c&&k+a<b:c<k+this.helperProportions.width/2&&e-this.helperProportions.width/
2<b&&g<l+this.helperProportions.height/2&&d-this.helperProportions.height/2<n},_intersectsWithPointer:function(g){var k="x"===this.options.axis||f.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,g.top,g.height);g="y"===this.options.axis||f.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,g.left,g.width);k=k&&g;g=this._getDragVerticalDirection();var e=this._getDragHorizontalDirection();return k?this.floating?e&&"right"==e||"down"==g?2:1:g&&("down"==g?2:1):!1},_intersectsWithSides:function(g){var k=
f.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,g.top+g.height/2,g.height);g=f.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,g.left+g.width/2,g.width);var e=this._getDragVerticalDirection(),l=this._getDragHorizontalDirection();return this.floating&&l?"right"==l&&g||"left"==l&&!g:e&&("down"==e&&k||"up"==e&&!k)},_getDragVerticalDirection:function(){var f=this.positionAbs.top-this.lastPositionAbs.top;return 0!=f&&(0<f?"down":"up")},_getDragHorizontalDirection:function(){var f=
this.positionAbs.left-this.lastPositionAbs.left;return 0!=f&&(0<f?"right":"left")},refresh:function(f){this._refreshItems(f);this.refreshPositions();return this},_connectWith:function(){var f=this.options;return f.connectWith.constructor==String?[f.connectWith]:f.connectWith},_getItemsAsjQuery:function(g){var k=[],e=[],l=this._connectWith();if(l&&g)for(g=l.length-1;0<=g;g--)for(var d=f(l[g]),c=d.length-1;0<=c;c--){var b=f.data(d[c],this.widgetName);b&&b!=this&&!b.options.disabled&&e.push([f.isFunction(b.options.items)?
b.options.items.call(b.element):f(b.options.items,b.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),b])}e.push([f.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):f(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(g=e.length-1;0<=g;g--)e[g][0].each(function(){k.push(this)});return f(k)},_removeCurrentsFromItems:function(){for(var f=this.currentItem.find(":data("+
this.widgetName+"-item)"),k=0;k<this.items.length;k++)for(var e=0;e<f.length;e++)f[e]==this.items[k].item[0]&&this.items.splice(k,1)},_refreshItems:function(g){this.items=[];this.containers=[this];var k=this.items,e=[[f.isFunction(this.options.items)?this.options.items.call(this.element[0],g,{item:this.currentItem}):f(this.options.items,this.element),this]],l=this._connectWith();if(l&&this.ready)for(var d=l.length-1;0<=d;d--)for(var c=f(l[d]),b=c.length-1;0<=b;b--){var p=f.data(c[b],this.widgetName);
p&&p!=this&&!p.options.disabled&&(e.push([f.isFunction(p.options.items)?p.options.items.call(p.element[0],g,{item:this.currentItem}):f(p.options.items,p.element),p]),this.containers.push(p))}for(d=e.length-1;0<=d;d--)for(g=e[d][1],l=e[d][0],b=0,c=l.length;b<c;b++)p=f(l[b]),p.data(this.widgetName+"-item",g),k.push({item:p,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(g){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var k=this.items.length-
1;0<=k;k--){var e=this.items[k];if(e.instance==this.currentContainer||!this.currentContainer||e.item[0]==this.currentItem[0]){var l=this.options.toleranceElement?f(this.options.toleranceElement,e.item):e.item;g||(e.width=l.outerWidth(),e.height=l.outerHeight());l=l.offset();e.left=l.left;e.top=l.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(k=this.containers.length-1;0<=k;k--)l=this.containers[k].element.offset(),this.containers[k].containerCache.left=
l.left,this.containers[k].containerCache.top=l.top,this.containers[k].containerCache.width=this.containers[k].element.outerWidth(),this.containers[k].containerCache.height=this.containers[k].element.outerHeight();return this},_createPlaceholder:function(g){g=g||this;var k=g.options;if(!k.placeholder||k.placeholder.constructor==String){var e=k.placeholder;k.placeholder={element:function(){var l=f(document.createElement(g.currentItem[0].nodeName)).addClass(e||g.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
e||(l.style.visibility="hidden");return l},update:function(f,d){if(!e||k.forcePlaceholderSize)d.height()||d.height(g.currentItem.innerHeight()-parseInt(g.currentItem.css("paddingTop")||0,10)-parseInt(g.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(g.currentItem.innerWidth()-parseInt(g.currentItem.css("paddingLeft")||0,10)-parseInt(g.currentItem.css("paddingRight")||0,10))}}}g.placeholder=f(k.placeholder.element.call(g.element,g.currentItem));g.currentItem.after(g.placeholder);k.placeholder.update(g,
g.placeholder)},_contactContainers:function(g){for(var k=null,e=null,l=this.containers.length-1;0<=l;l--)f.contains(this.currentItem[0],this.containers[l].element[0])||(this._intersectsWith(this.containers[l].containerCache)?k&&f.contains(this.containers[l].element[0],k.element[0])||(k=this.containers[l],e=l):this.containers[l].containerCache.over&&(this.containers[l]._trigger("out",g,this._uiHash(this)),this.containers[l].containerCache.over=0));if(k)if(1===this.containers.length)this.containers[e]._trigger("over",
g,this._uiHash(this)),this.containers[e].containerCache.over=1;else if(this.currentContainer!=this.containers[e]){for(var k=1E4,l=null,d=this.positionAbs[this.containers[e].floating?"left":"top"],c=this.items.length-1;0<=c;c--)if(f.contains(this.containers[e].element[0],this.items[c].item[0])){var b=this.containers[e].floating?this.items[c].item.offset().left:this.items[c].item.offset().top;Math.abs(b-d)<k&&(k=Math.abs(b-d),l=this.items[c],this.direction=0<b-d?"down":"up")}if(l||this.options.dropOnEmpty)this.currentContainer=
this.containers[e],l?this._rearrange(g,l,null,!0):this._rearrange(g,null,this.containers[e].element,!0),this._trigger("change",g,this._uiHash()),this.containers[e]._trigger("change",g,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[e]._trigger("over",g,this._uiHash(this)),this.containers[e].containerCache.over=1}},_createHelper:function(g){var k=this.options;g=f.isFunction(k.helper)?f(k.helper.apply(this.element[0],[g,this.currentItem])):
"clone"==k.helper?this.currentItem.clone():this.currentItem;g.parents("body").length||f("parent"!=k.appendTo?k.appendTo:this.currentItem[0].parentNode)[0].appendChild(g[0]);g[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==g[0].style.width||k.forceHelperSize)&&g.width(this.currentItem.width());(""==g[0].style.height||
k.forceHelperSize)&&g.height(this.currentItem.height());return g},_adjustOffsetFromHelper:function(g){"string"==typeof g&&(g=g.split(" "));f.isArray(g)&&(g={left:+g[0],top:+g[1]||0});"left"in g&&(this.offset.click.left=g.left+this.margins.left);"right"in g&&(this.offset.click.left=this.helperProportions.width-g.right+this.margins.left);"top"in g&&(this.offset.click.top=g.top+this.margins.top);"bottom"in g&&(this.offset.click.top=this.helperProportions.height-g.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var g=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&f.contains(this.scrollParent[0],this.offsetParent[0])&&(g.left+=this.scrollParent.scrollLeft(),g.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&f.browser.msie)g={top:0,left:0};return{top:g.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:g.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var f=this.currentItem.position();return{top:f.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:f.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var g=this.options;"parent"==g.containment&&(g.containment=this.helper[0].parentNode);if("document"==g.containment||"window"==g.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,f("document"==g.containment?document:window).width()-this.helperProportions.width-this.margins.left,(f("document"==g.containment?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(g.containment)){var k=f(g.containment)[0],g=f(g.containment).offset(),e="hidden"!=f(k).css("overflow");this.containment=[g.left+(parseInt(f(k).css("borderLeftWidth"),10)||0)+(parseInt(f(k).css("paddingLeft"),10)||0)-this.margins.left,g.top+(parseInt(f(k).css("borderTopWidth"),10)||0)+(parseInt(f(k).css("paddingTop"),10)||0)-this.margins.top,g.left+(e?Math.max(k.scrollWidth,
k.offsetWidth):k.offsetWidth)-(parseInt(f(k).css("borderLeftWidth"),10)||0)-(parseInt(f(k).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,g.top+(e?Math.max(k.scrollHeight,k.offsetHeight):k.offsetHeight)-(parseInt(f(k).css("borderTopWidth"),10)||0)-(parseInt(f(k).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(g,k){k||(k=this.position);var e="absolute"==g?1:-1,l="absolute"!=this.cssPosition||this.scrollParent[0]!=
document&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(l[0].tagName);return{top:k.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():d?0:l.scrollTop())*e,left:k.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():d?0:l.scrollLeft())*e}},_generatePosition:function(g){var k=this.options,e="absolute"!=this.cssPosition||
this.scrollParent[0]!=document&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(e[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var d=g.pageX,c=g.pageY;this.originalPosition&&(this.containment&&(g.pageX-this.offset.click.left<this.containment[0]&&(d=this.containment[0]+this.offset.click.left),g.pageY-this.offset.click.top<
this.containment[1]&&(c=this.containment[1]+this.offset.click.top),g.pageX-this.offset.click.left>this.containment[2]&&(d=this.containment[2]+this.offset.click.left),g.pageY-this.offset.click.top>this.containment[3]&&(c=this.containment[3]+this.offset.click.top)),k.grid&&(c=this.originalPageY+Math.round((c-this.originalPageY)/k.grid[1])*k.grid[1],c=this.containment?c-this.offset.click.top<this.containment[1]||c-this.offset.click.top>this.containment[3]?c-this.offset.click.top<this.containment[1]?
c+k.grid[1]:c-k.grid[1]:c:c,d=this.originalPageX+Math.round((d-this.originalPageX)/k.grid[0])*k.grid[0],d=this.containment?d-this.offset.click.left<this.containment[0]||d-this.offset.click.left>this.containment[2]?d-this.offset.click.left<this.containment[0]?d+k.grid[0]:d-k.grid[0]:d:d));return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():l?0:e.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:e.scrollLeft())}},_rearrange:function(f,k,e,l){e?e[0].appendChild(this.placeholder[0]):k.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?k.item[0]:k.item[0].nextSibling);var d=this.counter=this.counter?++this.counter:1;this._delay(function(){d==this.counter&&this.refreshPositions(!l)})},_clear:function(g,k){this.reverting=!1;var e=[];!this._noFinalSort&&this.currentItem.parent().length&&
this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var l in this._storedCSS)if("auto"==this._storedCSS[l]||"static"==this._storedCSS[l])this._storedCSS[l]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!k&&e.push(function(d){this._trigger("receive",d,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&
this.domPosition.parent==this.currentItem.parent()[0]||k||e.push(function(d){this._trigger("update",d,this._uiHash())});this===this.currentContainer||k||(e.push(function(d){this._trigger("remove",d,this._uiHash())}),e.push(function(d){return function(c){d._trigger("receive",c,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(d){return function(c){d._trigger("update",c,this._uiHash(this))}}.call(this,this.currentContainer)));for(l=this.containers.length-1;0<=l;l--)k||e.push(function(d){return function(c){d._trigger("deactivate",
c,this._uiHash(this))}}.call(this,this.containers[l])),this.containers[l].containerCache.over&&(e.push(function(d){return function(c){d._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[l])),this.containers[l].containerCache.over=0);this._storedCursor&&f("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!k){this._trigger("beforeStop",
g,this._uiHash());for(l=0;l<e.length;l++)e[l].call(this,g);this._trigger("stop",g,this._uiHash())}return this.fromOutside=!1}k||this._trigger("beforeStop",g,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!k){for(l=0;l<e.length;l++)e[l].call(this,g);this._trigger("stop",g,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===f.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(g){var k=g||this;return{helper:k.helper,placeholder:k.placeholder||f([]),position:k.position,originalPosition:k.originalPosition,offset:k.positionAbs,item:k.currentItem,sender:g?g.element:null}}})})(g);(function(f,n){var m=0,k={},e={};k.height=k.paddingTop=k.paddingBottom=k.borderTopWidth=k.borderBottomWidth="hide";e.height=e.paddingTop=e.paddingBottom=e.borderTopWidth=e.borderBottomWidth="show";f.widget("ui.accordion",{version:"1.9.0",options:{active:0,animate:{},
collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.accordionId="ui-accordion-"+(this.element.attr("id")||++m),d=this.options;this.prevShow=this.prevHide=f();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();d.collapsible||!1!==d.active||(d.active=0);0>d.active&&(d.active+=this.headers.length);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.originalHeight=
this.element[0].style.height;this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(c){var b=f(this),d=b.attr("id"),k=b.next(),g=k.attr("id");d||(d=e+"-header-"+c,b.attr("id",d));g||(g=e+"-panel-"+c,k.attr("id",g));b.attr("aria-controls",g);k.attr("aria-labelledby",d)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?
this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(d.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():f()}},_createIcons:function(){var e=this.options.icons;e&&(f("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),
this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&(this.element.css("height",this.originalHeight),e.css("height",
""))},_setOption:function(e,d){"active"===e?this._activate(d):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(e,d),"collapsible"!==e||d||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),d&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!d))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var d=f.ui.keyCode,c=this.headers.length,b=this.headers.index(e.target),
k=!1;switch(e.keyCode){case d.RIGHT:case d.DOWN:k=this.headers[(b+1)%c];break;case d.LEFT:case d.UP:k=this.headers[(b-1+c)%c];break;case d.SPACE:case d.ENTER:this._eventHandler(e);break;case d.HOME:k=this.headers[0];break;case d.END:k=this.headers[c-1]}k&&(f(e.target).attr("tabIndex",-1),f(k).attr("tabIndex",0),k.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===f.ui.keyCode.UP&&e.ctrlKey&&f(e.currentTarget).prev().focus()},refresh:function(){var e,d,c=this.options.heightStyle,b=
this.element.parent();this.element.css("height",this.originalHeight);"fill"===c?(f.support.minHeight||(d=b.css("overflow"),b.css("overflow","hidden")),e=b.height(),this.element.siblings(":visible").each(function(){var b=f(this),c=b.css("position");"absolute"!==c&&"fixed"!==c&&(e-=b.outerHeight(!0))}),d&&b.css("overflow",d),this.headers.each(function(){e-=f(this).outerHeight(!0)}),this.headers.next().each(function(){f(this).height(Math.max(0,e-f(this).innerHeight()+f(this).height()))}).css("overflow",
"auto")):"auto"===c&&(e=0,this.headers.next().each(function(){e=Math.max(e,f(this).height("").height())}).height(e));"content"!==c&&this.element.height(this.element.height())},_activate:function(e){e=this._findActive(e)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:f.noop}))},_findActive:function(e){return"number"===typeof e?this.headers.eq(e):f()},_setupEvents:function(e){var d={};e&&(f.each(e.split(" "),function(c,b){d[b]="_eventHandler"}),
this._on(this.headers,d))},_eventHandler:function(e){var d=this.options,c=this.active,b=f(e.currentTarget),k=b[0]===c[0],g=k&&d.collapsible,m=g?f():b.next(),a=c.next(),m={oldHeader:c,oldPanel:a,newHeader:g?f():b,newPanel:m};e.preventDefault();k&&!d.collapsible||!1===this._trigger("beforeActivate",e,m)||(d.active=g?!1:this.headers.index(b),this.active=k?f():b,this._toggle(m),c.removeClass("ui-accordion-header-active ui-state-active"),d.icons&&c.children(".ui-accordion-header-icon").removeClass(d.icons.activeHeader).addClass(d.icons.header),
k||(b.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),d.icons&&b.children(".ui-accordion-header-icon").removeClass(d.icons.header).addClass(d.icons.activeHeader),b.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var d=e.newPanel,c=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=d;this.prevHide=c;this.options.animate?this._animate(d,c,e):(c.hide(),d.show(),this._toggleComplete(e));
c.attr({"aria-expanded":"false","aria-hidden":"true"});c.prev().attr("aria-selected","false");d.length&&c.length?c.prev().attr("tabIndex",-1):d.length&&this.headers.filter(function(){return 0===f(this).attr("tabIndex")}).attr("tabIndex",-1);d.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(f,d,c){var b,g,m,n=this,a=0,q=f.length&&(!d.length||f.index()<d.index()),t=this.options.animate||{},q=q&&t.down||t,v=function(){n._toggleComplete(c)};
"number"===typeof q&&(m=q);"string"===typeof q&&(g=q);g=g||q.easing||t.easing;m=m||q.duration||t.duration;if(!d.length)return f.animate(e,m,g,v);if(!f.length)return d.animate(k,m,g,v);b=f.show().outerHeight();d.animate(k,{duration:m,easing:g,step:function(a,b){b.now=Math.round(a)}});f.hide().animate(e,{duration:m,easing:g,complete:v,step:function(c,e){e.now=Math.round(c);"height"!==e.prop?a+=e.now:"content"!==n.options.heightStyle&&(e.now=Math.round(b-d.outerHeight()-a),a=0)}})},_toggleComplete:function(e){var d=
e.oldPanel;d.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");d.length&&(d.parent()[0].className=d.parent()[0].className);this._trigger("activate",null,e)}});!1!==f.uiBackCompat&&(function(e,d){e.extend(d.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var c=d._create;d._create=function(){if(this.options.navigation){var b=this,d=this.element.find(this.options.header),f=d.next(),
k=d.add(f).find("a").filter(this.options.navigationFilter)[0];k&&d.add(f).each(function(a){if(e.contains(this,k))return b.options.active=Math.floor(a/2),!1})}c.call(this)}}(g,g.ui.accordion.prototype),function(e,d){e.extend(d.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var c=d._create,b=d._setOption;e.extend(d,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();c.call(this)},_setOption:function(c,d){if("autoHeight"===c||"clearStyle"===
c||"fillSpace"===c)this.options.heightStyle=this._mergeHeightStyle();b.apply(this,arguments)},_mergeHeightStyle:function(){var b=this.options;if(b.fillSpace)return"fill";if(b.clearStyle)return"content";if(b.autoHeight)return"auto"}})}(g,g.ui.accordion.prototype),function(e,d){e.extend(d.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var c=d._createIcons;d._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);
c.call(this)}}(g,g.ui.accordion.prototype),function(e,d){d.activate=d._activate;var c=d._findActive;d._findActive=function(b){-1===b&&(b=!1);b&&"number"!==typeof b&&(b=this.headers.index(this.headers.filter(b)),-1===b&&(b=!1));return c.call(this,b)}}(g,g.ui.accordion.prototype),g.ui.accordion.prototype.resize=g.ui.accordion.prototype.refresh,function(e,d){e.extend(d.options,{change:null,changestart:null});var c=d._trigger;d._trigger=function(b,d,e){var f=c.apply(this,arguments);if(!f)return!1;"beforeActivate"===
b?f=c.call(this,"changestart",d,{oldHeader:e.oldHeader,oldContent:e.oldPanel,newHeader:e.newHeader,newContent:e.newPanel}):"activate"===b&&(f=c.call(this,"change",d,{oldHeader:e.oldHeader,oldContent:e.oldPanel,newHeader:e.newHeader,newContent:e.newPanel}));return f}}(g,g.ui.accordion.prototype),function(e,d){e.extend(d.options,{animate:null,animated:"slide"});var c=d._create;d._create=function(){var b=this.options;null===b.animate&&(b.animate=b.animated?"slide"===b.animated?300:"bounceslide"===b.animated?
{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:b.animated:!1);c.call(this)}}(g,g.ui.accordion.prototype))})(g);(function(f,g){var m=0;f.widget("ui.autocomplete",{version:"1.9.0",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var k,e,l;this.isMultiLine=this._isMultiLine();
this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on({keydown:function(d){if(this.element.prop("readOnly"))e=l=k=!0;else{e=l=k=!1;var c=f.ui.keyCode;switch(d.keyCode){case c.PAGE_UP:k=!0;this._move("previousPage",d);break;case c.PAGE_DOWN:k=!0;this._move("nextPage",d);break;case c.UP:k=!0;this._keyEvent("previous",d);break;case c.DOWN:k=!0;this._keyEvent("next",d);break;case c.ENTER:case c.NUMPAD_ENTER:this.menu.active&&
(k=!0,d.preventDefault(),this.menu.select(d));break;case c.TAB:this.menu.active&&this.menu.select(d);break;case c.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(d),d.preventDefault());break;default:e=!0,this._searchTimeout(d)}}},keypress:function(d){if(k)k=!1,d.preventDefault();else if(!e){var c=f.ui.keyCode;switch(d.keyCode){case c.PAGE_UP:this._move("previousPage",d);break;case c.PAGE_DOWN:this._move("nextPage",d);break;case c.UP:this._keyEvent("previous",d);break;case c.DOWN:this._keyEvent("next",
d)}}},input:function(d){l?(l=!1,d.preventDefault()):this._searchTimeout(d)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(d){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(d),this._change(d))}});this._initSource();this.menu=f("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:f(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,
{mousedown:function(d){d.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];f(d.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||f.contains(c,d.target)||b.close()})})},menufocus:function(d,c){if(this.isNewMenu&&(this.isNewMenu=!1,d.originalEvent&&/^mouse/.test(d.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){f(d.target).trigger(d.originalEvent)});
return}var b=c.item.data("ui-autocomplete-item")||c.item.data("item.autocomplete");!1!==this._trigger("focus",d,{item:b})?d.originalEvent&&/^key/.test(d.originalEvent.type)&&this._value(b.value):this.liveRegion.text(b.value)},menuselect:function(d,c){var b=c.item.data("ui-autocomplete-item")||c.item.data("item.autocomplete"),e=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e;this.selectedItem=b}));!1!==this._trigger("select",
d,{item:b})&&this._value(b.value);this.term=this._value();this.close(d);this.selectedItem=b}});this.liveRegion=f("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);f.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();
this.liveRegion.remove()},_setOption:function(f,e){this._super(f,e);"source"===f&&this._initSource();"appendTo"===f&&this.menu.element.appendTo(this.document.find(e||"body")[0]);"disabled"===f&&e&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var k,e,l=this;f.isArray(this.options.source)?(k=this.options.source,this.source=function(d,c){c(f.ui.autocomplete.filter(k,
d.term))}):"string"===typeof this.options.source?(e=this.options.source,this.source=function(d,c){l.xhr&&l.xhr.abort();l.xhr=f.ajax({url:e,data:d,dataType:"json",success:function(b,d){c(b)},error:function(){c([])}})}):this.source=this.options.source},_searchTimeout:function(f){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,f))},this.options.delay)},search:function(f,e){f=null!=f?f:this._value();this.term=this._value();
if(f.length<this.options.minLength)return this.close(e);if(!1!==this._trigger("search",e))return this._search(f)},_search:function(f){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:f},this._response())},_response:function(){var f=this,e=++m;return function(l){e===m&&f.__response(l);f.pending--;f.pending||f.element.removeClass("ui-autocomplete-loading")}},__response:function(f){f&&(f=this._normalize(f));this._trigger("response",null,{content:f});
!this.options.disabled&&f&&f.length&&!this.cancelSearch?(this._suggest(f),this._trigger("open")):this._close()},close:function(f){this.cancelSearch=!0;this._close(f)},_close:function(f){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",f))},_change:function(f){this.previous!==this._value()&&this._trigger("change",f,{item:this.selectedItem})},_normalize:function(k){return k.length&&k[0].label&&k[0].value?k:f.map(k,function(e){return"string"===
typeof e?{label:e,value:e}:f.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(k){var e=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(e,k);this.menu.refresh();e.show();this._resizeMenu();e.position(f.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var f=this.menu.element;f.outerWidth(Math.max(f.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(k,e){var l=
this;f.each(e,function(d,c){l._renderItemData(k,c)})},_renderItemData:function(f,e){return this._renderItem(f,e).data("ui-autocomplete-item",e)},_renderItem:function(k,e){return f("<li>").append(f("<a>").text(e.label)).appendTo(k)},_move:function(f,e){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(f)||this.menu.isLastItem()&&/^next/.test(f))this._value(this.term),this.menu.blur();else this.menu[f](e);else this.search(null,e)},widget:function(){return this.menu.element},
_value:function(f){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(f,e){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(f,e),e.preventDefault()}});f.extend(f.ui.autocomplete,{escapeRegex:function(f){return f.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(k,e){var l=RegExp(f.ui.autocomplete.escapeRegex(e),"i");return f.grep(k,function(d){return l.test(d.label||d.value||d)})}});f.widget("ui.autocomplete",f.ui.autocomplete,{options:{messages:{noResults:"No search results.",
results:function(f){return f+(1<f?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(f){var e;this._superApply(arguments);this.options.disabled||this.cancelSearch||(e=f&&f.length?this.options.messages.results(f.length):this.options.messages.noResults,this.liveRegion.text(e))}})})(g);(function(f,g){var m,k,e,l,d=function(){var b=f(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},c=function(b){var c=b.name,d=b.form,e=f([]);
c&&(e=d?f(d).find("[name='"+c+"']"):f("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form}));return e};f.widget("ui.button",{version:"1.9.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,d);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",
this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,g=this.options,n="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(n?"":" ui-state-active");null===g.label&&(g.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){g.disabled||(f(this).addClass("ui-state-hover"),
this===m&&f(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){g.disabled||f(this).removeClass(u)}).bind("click"+this.eventNamespace,function(a){g.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){b.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){b.buttonElement.removeClass("ui-state-focus")});n&&(this.element.bind("change"+this.eventNamespace,function(){l||
b.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){g.disabled||(l=!1,k=a.pageX,e=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){g.disabled||k===a.pageX&&e===a.pageY||(l=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(g.disabled||l)return!1;f(this).toggleClass("ui-state-active");b.buttonElement.attr("aria-pressed",b.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,
function(){if(g.disabled||l)return!1;f(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed","true");var a=b.element[0];c(a).not(a).map(function(){return f(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(g.disabled)return!1;f(this).addClass("ui-state-active");m=this;b.document.one("mouseup",function(){m=null})}).bind("mouseup"+this.eventNamespace,function(){if(g.disabled)return!1;
f(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(g.disabled)return!1;a.keyCode!==f.ui.keyCode.SPACE&&a.keyCode!==f.ui.keyCode.ENTER||f(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){f(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===f.ui.keyCode.SPACE&&f(this).click()}));this._setOption("disabled",g.disabled);this._resetButton()},_determineButtonType:function(){var b,
c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(b=this.element.parents().last(),c="label[for='"+this.element.attr("id")+"']",this.buttonElement=b.find(c),this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(c),this.buttonElement.length||(this.buttonElement=b.find(c))),this.element.addClass("ui-helper-hidden-accessible"),
(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",b)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,c){this._super(b,c);"disabled"===b?c?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?c(this.element[0]).each(function(){f(this).is(":checked")?f(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):f(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=f("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,a=[];d.primary||d.secondary?(this.options.text&&a.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(a.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",f.trim(c)))):a.push("ui-button-text-only");b.addClass(a.join(" "))}}});f.widget("ui.buttonset",{version:"1.9.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c);this._super(b,c)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return f(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return f(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(g);
(function(f,g){function m(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};f.extend(this._defaults,this.regional[""]);this.dpDiv=k(f('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function k(c){return c.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){f(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&f(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&f(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){f.datepicker._isDisabledDatepicker(d.inline?c.parent()[0]:d.input[0])||(f(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
f(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&f(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&f(this).addClass("ui-datepicker-next-hover"))})}function e(c,b){f.extend(c,b);for(var d in b)if(null==b[d]||b[d]==g)c[d]=b[d];return c}f.extend(f.ui,{datepicker:{version:"1.9.0"}});var l=(new Date).getTime(),d;f.extend(m.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(c){e(this._defaults,c||{});return this},_attachDatepicker:function(c,b){var d=null,e;for(e in this._defaults){var l=c.getAttribute("date:"+e);if(l){d=d||{};try{d[e]=eval(l)}catch(a){d[e]=l}}}e=c.nodeName.toLowerCase();l="div"==e||"span"==e;c.id||(this.uuid+=1,c.id="dp"+this.uuid);var k=this._newInst(f(c),l);k.settings=f.extend({},b||{},d||{});"input"==e?this._connectDatepicker(c,k):l&&this._inlineDatepicker(c,k)},_newInst:function(c,
b){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?k(f('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(c,b){var d=f(c);b.append=f([]);b.trigger=f([]);d.hasClass(this.markerClassName)||(this._attachments(d,b),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(c,d,a){b.settings[d]=a}).bind("getData.datepicker",function(c,d){return this._get(b,d)}),this._autoSize(b),f.data(c,"datepicker",b),b.settings.disabled&&this._disableDatepicker(c))},_attachments:function(c,b){var d=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();d&&(b.append=f('<span class="'+this._appendClass+'">'+d+"</span>"),c[e?"before":"after"](b.append));c.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();d=this._get(b,"showOn");"focus"!=
d&&"both"!=d||c.focus(this._showDatepicker);if("button"==d||"both"==d){var d=this._get(b,"buttonText"),l=this._get(b,"buttonImage");b.trigger=f(this._get(b,"buttonImageOnly")?f("<img/>").addClass(this._triggerClass).attr({src:l,alt:d,title:d}):f('<button type="button"></button>').addClass(this._triggerClass).html(""==l?d:f("<img/>").attr({src:l,alt:d,title:d})));c[e?"before":"after"](b.trigger);b.trigger.click(function(){f.datepicker._datepickerShowing&&f.datepicker._lastInput==c[0]?f.datepicker._hideDatepicker():
(f.datepicker._datepickerShowing&&f.datepicker._lastInput!=c[0]&&f.datepicker._hideDatepicker(),f.datepicker._showDatepicker(c[0]));return!1})}},_autoSize:function(c){if(this._get(c,"autoSize")&&!c.inline){var b=new Date(2009,11,20),d=this._get(c,"dateFormat");if(d.match(/[DM]/)){var e=function(b){for(var a=0,c=0,d=0;d<b.length;d++)b[d].length>a&&(a=b[d].length,c=d);return c};b.setMonth(e(this._get(c,d.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(c,d.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}c.input.attr("size",this._formatDate(c,b).length)}},_inlineDatepicker:function(c,b){var d=f(c);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(c,d,a){b.settings[d]=a}).bind("getData.datepicker",function(c,d){return this._get(b,d)}),f.data(c,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(c),
b.dpDiv.css("display","block"))},_dialogDatepicker:function(c,b,d,l,k){c=this._dialogInst;c||(this.uuid+=1,this._dialogInput=f('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),f("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},f.data(this._dialogInput[0],"datepicker",c));e(c.settings,l||{});b=b&&b.constructor==Date?this._formatDate(c,b):b;this._dialogInput.val(b);
this._pos=k?k.length?k:[k.pageX,k.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");c.settings.onSelect=d;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);f.blockUI&&f.blockUI(this.dpDiv);
f.data(this._dialogInput[0],"datepicker",c);return this},_destroyDatepicker:function(c){var b=f(c),d=f.data(c,"datepicker");if(b.hasClass(this.markerClassName)){var e=c.nodeName.toLowerCase();f.removeData(c,"datepicker");"input"==e?(d.append.remove(),d.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=e&&"span"!=e||b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(c){var b=f(c),d=f.data(c,"datepicker");if(b.hasClass(this.markerClassName)){var e=c.nodeName.toLowerCase();if("input"==e)c.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=f.map(this._disabledInputs,
function(b){return b==c?null:b})}},_disableDatepicker:function(c){var b=f(c),d=f.data(c,"datepicker");if(b.hasClass(this.markerClassName)){var e=c.nodeName.toLowerCase();if("input"==e)c.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=f.map(this._disabledInputs,function(b){return b==c?null:b});this._disabledInputs[this._disabledInputs.length]=c}},_isDisabledDatepicker:function(c){if(!c)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==c)return!0;return!1},_getInst:function(c){try{return f.data(c,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,b,d){var l=this._getInst(c);if(2==arguments.length&&"string"==typeof b)return"defaults"==
b?f.extend({},f.datepicker._defaults):l?"all"==b?f.extend({},l.settings):this._get(l,b):null;var k=b||{};"string"==typeof b&&(k={},k[b]=d);if(l){this._curInst==l&&this._hideDatepicker();var a=this._getDateDatepicker(c,!0),m=this._getMinMaxDate(l,"min"),t=this._getMinMaxDate(l,"max");e(l.settings,k);null!==m&&k.dateFormat!==g&&k.minDate===g&&(l.settings.minDate=this._formatDate(l,m));null!==t&&k.dateFormat!==g&&k.maxDate===g&&(l.settings.maxDate=this._formatDate(l,t));this._attachments(f(c),l);this._autoSize(l);
this._setDate(l,a);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(c,b,d){this._optionDatepicker(c,b,d)},_refreshDatepicker:function(c){(c=this._getInst(c))&&this._updateDatepicker(c)},_setDateDatepicker:function(c,b){var d=this._getInst(c);d&&(this._setDate(d,b),this._updateDatepicker(d),this._updateAlternate(d))},_getDateDatepicker:function(c,b){var d=this._getInst(c);d&&!d.inline&&this._setDateFromField(d,b);return d?this._getDate(d):null},_doKeyDown:function(c){var b=
f.datepicker._getInst(c.target),d=!0,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(f.datepicker._datepickerShowing)switch(c.keyCode){case 9:f.datepicker._hideDatepicker();d=!1;break;case 13:return d=f("td."+f.datepicker._dayOverClass+":not(."+f.datepicker._currentClass+")",b.dpDiv),d[0]&&f.datepicker._selectDay(c.target,b.selectedMonth,b.selectedYear,d[0]),(c=f.datepicker._get(b,"onSelect"))?(d=f.datepicker._formatDate(b),c.apply(b.input?b.input[0]:null,[d,b])):f.datepicker._hideDatepicker(),
!1;case 27:f.datepicker._hideDatepicker();break;case 33:f.datepicker._adjustDate(c.target,c.ctrlKey?-f.datepicker._get(b,"stepBigMonths"):-f.datepicker._get(b,"stepMonths"),"M");break;case 34:f.datepicker._adjustDate(c.target,c.ctrlKey?+f.datepicker._get(b,"stepBigMonths"):+f.datepicker._get(b,"stepMonths"),"M");break;case 35:(c.ctrlKey||c.metaKey)&&f.datepicker._clearDate(c.target);d=c.ctrlKey||c.metaKey;break;case 36:(c.ctrlKey||c.metaKey)&&f.datepicker._gotoToday(c.target);d=c.ctrlKey||c.metaKey;
break;case 37:(c.ctrlKey||c.metaKey)&&f.datepicker._adjustDate(c.target,e?1:-1,"D");d=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&f.datepicker._adjustDate(c.target,c.ctrlKey?-f.datepicker._get(b,"stepBigMonths"):-f.datepicker._get(b,"stepMonths"),"M");break;case 38:(c.ctrlKey||c.metaKey)&&f.datepicker._adjustDate(c.target,-7,"D");d=c.ctrlKey||c.metaKey;break;case 39:(c.ctrlKey||c.metaKey)&&f.datepicker._adjustDate(c.target,e?-1:1,"D");d=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&f.datepicker._adjustDate(c.target,
c.ctrlKey?+f.datepicker._get(b,"stepBigMonths"):+f.datepicker._get(b,"stepMonths"),"M");break;case 40:(c.ctrlKey||c.metaKey)&&f.datepicker._adjustDate(c.target,7,"D");d=c.ctrlKey||c.metaKey;break;default:d=!1}else 36==c.keyCode&&c.ctrlKey?f.datepicker._showDatepicker(this):d=!1;d&&(c.preventDefault(),c.stopPropagation())},_doKeyPress:function(c){var b=f.datepicker._getInst(c.target);if(f.datepicker._get(b,"constrainInput")){var b=f.datepicker._possibleChars(f.datepicker._get(b,"dateFormat")),d=String.fromCharCode(c.charCode==
g?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||" ">d||!b||-1<b.indexOf(d)}},_doKeyUp:function(c){c=f.datepicker._getInst(c.target);if(c.input.val()!=c.lastVal)try{f.datepicker.parseDate(f.datepicker._get(c,"dateFormat"),c.input?c.input.val():null,f.datepicker._getFormatConfig(c))&&(f.datepicker._setDateFromField(c),f.datepicker._updateAlternate(c),f.datepicker._updateDatepicker(c))}catch(b){f.datepicker.log(b)}return!0},_showDatepicker:function(c){c=c.target||c;"input"!=c.nodeName.toLowerCase()&&
(c=f("input",c.parentNode)[0]);if(!f.datepicker._isDisabledDatepicker(c)&&f.datepicker._lastInput!=c){var b=f.datepicker._getInst(c);f.datepicker._curInst&&f.datepicker._curInst!=b&&(f.datepicker._curInst.dpDiv.stop(!0,!0),b&&f.datepicker._datepickerShowing&&f.datepicker._hideDatepicker(f.datepicker._curInst.input[0]));var d=f.datepicker._get(b,"beforeShow"),d=d?d.apply(c,[c,b]):{};if(!1!==d){e(b.settings,d);b.lastVal=null;f.datepicker._lastInput=c;f.datepicker._setDateFromField(b);f.datepicker._inDialog&&
(c.value="");f.datepicker._pos||(f.datepicker._pos=f.datepicker._findPos(c),f.datepicker._pos[1]+=c.offsetHeight);var l=!1;f(c).parents().each(function(){l|="fixed"==f(this).css("position");return!l});d={left:f.datepicker._pos[0],top:f.datepicker._pos[1]};f.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});f.datepicker._updateDatepicker(b);d=f.datepicker._checkOffset(b,d,l);b.dpDiv.css({position:f.datepicker._inDialog&&f.blockUI?"static":l?"fixed":
"absolute",display:"none",left:d.left+"px",top:d.top+"px"});if(!b.inline){var d=f.datepicker._get(b,"showAnim"),k=f.datepicker._get(b,"duration"),a=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=f.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(f(c).zIndex()+1);f.datepicker._datepickerShowing=!0;if(f.effects&&(f.effects.effect[d]||f.effects[d]))b.dpDiv.show(d,f.datepicker._get(b,
"showOptions"),k,a);else b.dpDiv[d||"show"](d?k:null,a);d&&k||a();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();f.datepicker._curInst=b}}}},_updateDatepicker:function(c){this.maxRows=4;var b=f.datepicker._getBorders(c.dpDiv);d=c;c.dpDiv.empty().append(this._generateHTML(c));this._attachHandlers(c);var e=c.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-b[0],top:-b[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()});c.dpDiv.find("."+this._dayOverClass+" a").mouseover();
b=this._getNumberOfMonths(c);e=b[1];c.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<e&&c.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em");c.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");c.dpDiv[(this._get(c,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");c==f.datepicker._curInst&&f.datepicker._datepickerShowing&&c.input&&c.input.is(":visible")&&!c.input.is(":disabled")&&c.input[0]!=document.activeElement&&
c.input.focus();if(c.yearshtml){var l=c.yearshtml;setTimeout(function(){l===c.yearshtml&&c.yearshtml&&c.dpDiv.find("select.ui-datepicker-year:first").replaceWith(c.yearshtml);l=c.yearshtml=null},0)}},_getBorders:function(c){var b=function(b){return{thin:1,medium:2,thick:3}[b]||b};return[parseFloat(b(c.css("border-left-width"))),parseFloat(b(c.css("border-top-width")))]},_checkOffset:function(c,b,d){var e=c.dpDiv.outerWidth(),l=c.dpDiv.outerHeight(),a=c.input?c.input.outerWidth():0,k=c.input?c.input.outerHeight():
0,g=document.documentElement.clientWidth+(d?0:f(document).scrollLeft()),m=document.documentElement.clientHeight+(d?0:f(document).scrollTop());b.left-=this._get(c,"isRTL")?e-a:0;b.left-=d&&b.left==c.input.offset().left?f(document).scrollLeft():0;b.top-=d&&b.top==c.input.offset().top+k?f(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+l>m&&m>l?Math.abs(l+k):0);return b},_findPos:function(c){for(var b=this._getInst(c),b=this._get(b,
"isRTL");c&&("hidden"==c.type||1!=c.nodeType||f.expr.filters.hidden(c));)c=c[b?"previousSibling":"nextSibling"];c=f(c).offset();return[c.left,c.top]},_hideDatepicker:function(c){var b=this._curInst;if(b&&(!c||b==f.data(c,"datepicker"))&&this._datepickerShowing){c=this._get(b,"showAnim");var d=this._get(b,"duration"),e=function(){f.datepicker._tidyDialog(b)};if(f.effects&&(f.effects.effect[c]||f.effects[c]))b.dpDiv.hide(c,f.datepicker._get(b,"showOptions"),d,e);else b.dpDiv["slideDown"==c?"slideUp":
"fadeIn"==c?"fadeOut":"hide"](c?d:null,e);c||e();this._datepickerShowing=!1;(c=this._get(b,"onClose"))&&c.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),f.blockUI&&(f.unblockUI(),f("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(c){c.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(c){if(f.datepicker._curInst){c=
f(c.target);var b=f.datepicker._getInst(c[0]);(c[0].id!=f.datepicker._mainDivId&&0==c.parents("#"+f.datepicker._mainDivId).length&&!(c.hasClass(f.datepicker.markerClassName)||c.closest("."+f.datepicker._triggerClass).length||!f.datepicker._datepickerShowing||f.datepicker._inDialog&&f.blockUI)||c.hasClass(f.datepicker.markerClassName)&&f.datepicker._curInst!=b)&&f.datepicker._hideDatepicker()}},_adjustDate:function(c,b,d){c=f(c);var e=this._getInst(c[0]);this._isDisabledDatepicker(c[0])||(this._adjustInstDate(e,
b+("M"==d?this._get(e,"showCurrentAtPos"):0),d),this._updateDatepicker(e))},_gotoToday:function(c){c=f(c);var b=this._getInst(c[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var d=new Date;b.selectedDay=d.getDate();b.drawMonth=b.selectedMonth=d.getMonth();b.drawYear=b.selectedYear=d.getFullYear()}this._notifyChange(b);this._adjustDate(c)},_selectMonthYear:function(c,b,d){c=f(c);var e=
this._getInst(c[0]);e["selected"+("M"==d?"Month":"Year")]=e["draw"+("M"==d?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(c)},_selectDay:function(c,b,d,e){var l=f(c);f(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(l[0])||(l=this._getInst(l[0]),l.selectedDay=l.currentDay=f("a",e).html(),l.selectedMonth=l.currentMonth=b,l.selectedYear=l.currentYear=d,this._selectDate(c,this._formatDate(l,l.currentDay,l.currentMonth,l.currentYear)))},
_clearDate:function(c){c=f(c);this._getInst(c[0]);this._selectDate(c,"")},_selectDate:function(c,b){var d=f(c),d=this._getInst(d[0]);b=null!=b?b:this._formatDate(d);d.input&&d.input.val(b);this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change");d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(c){var b=
this._get(c,"altField");if(b){var d=this._get(c,"altFormat")||this._get(c,"dateFormat"),e=this._getDate(c),l=this.formatDate(d,e,this._getFormatConfig(c));f(b).each(function(){f(this).val(l)})}},noWeekends:function(c){c=c.getDay();return[0<c&&6>c,""]},iso8601Week:function(c){c=new Date(c.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));var b=c.getTime();c.setMonth(0);c.setDate(1);return Math.floor(Math.round((b-c)/864E5)/7)+1},parseDate:function(c,b,d){if(null==c||null==b)throw"Invalid arguments";
b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var e=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,a=(d?d.dayNames:null)||this._defaults.dayNames,k=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,g=(d?d.monthNames:null)||this._defaults.monthNames,m=d=-1,n=-1,C=-1,y=!1,z=function(a){(a=I+1<c.length&&c.charAt(I+1)==a)&&I++;return a},D=function(a){var c=
z(a);a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}");a=b.substring(M).match(a);if(!a)throw"Missing number at position "+M;M+=a[0].length;return parseInt(a[0],10)},F=function(a,c,d){a=f.map(z(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var e=-1;f.each(a,function(a,c){var d=c[1];if(b.substr(M,d.length).toLowerCase()==d.toLowerCase())return e=c[0],M+=d.length,!1});if(-1!=e)return e+1;throw"Unknown name at position "+M;},H=function(){if(b.charAt(M)!=
c.charAt(I))throw"Unexpected literal at position "+M;M++},M=0,I=0;I<c.length;I++)if(y)"'"!=c.charAt(I)||z("'")?H():y=!1;else switch(c.charAt(I)){case "d":n=D("d");break;case "D":F("D",l,a);break;case "o":C=D("o");break;case "m":m=D("m");break;case "M":m=F("M",k,g);break;case "y":d=D("y");break;case "@":var J=new Date(D("@"));d=J.getFullYear();m=J.getMonth()+1;n=J.getDate();break;case "!":J=new Date((D("!")-this._ticksTo1970)/1E4);d=J.getFullYear();m=J.getMonth()+1;n=J.getDate();break;case "'":z("'")?
H():y=!0;break;default:H()}if(M<b.length&&(l=b.substr(M),!/^\s+/.test(l)))throw"Extra/unparsed characters found in date: "+l;-1==d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=e?0:-100));if(-1<C){m=1;n=C;do{e=this._getDaysInMonth(d,m-1);if(n<=e)break;m++;n-=e}while(1)}J=this._daylightSavingAdjust(new Date(d,m-1,n));if(J.getFullYear()!=d||J.getMonth()+1!=m||J.getDate()!=n)throw"Invalid date";return J},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(c,b,d){if(!b)return"";var e=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,f=(d?d.dayNames:null)||this._defaults.dayNames,a=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort;d=(d?d.monthNames:null)||this._defaults.monthNames;var l=
function(a){(a=y+1<c.length&&c.charAt(y+1)==a)&&y++;return a},k=function(a,b,c){b=""+b;if(l(a))for(;b.length<c;)b="0"+b;return b},g=function(a,b,c,d){return l(a)?d[b]:c[b]},m="",n=!1;if(b)for(var y=0;y<c.length;y++)if(n)"'"!=c.charAt(y)||l("'")?m+=c.charAt(y):n=!1;else switch(c.charAt(y)){case "d":m+=k("d",b.getDate(),2);break;case "D":m+=g("D",b.getDay(),e,f);break;case "o":m+=k("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":m+=k("m",b.getMonth()+1,2);break;case "M":m+=g("M",b.getMonth(),a,d);break;case "y":m+=l("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":m+=b.getTime();break;case "!":m+=1E4*b.getTime()+this._ticksTo1970;break;case "'":l("'")?m+="'":n=!0;break;default:m+=c.charAt(y)}return m},_possibleChars:function(c){for(var b="",d=!1,e=function(a){(a=f+1<c.length&&c.charAt(f+1)==a)&&f++;return a},f=0;f<c.length;f++)if(d)"'"!=c.charAt(f)||e("'")?b+=c.charAt(f):
d=!1;else switch(c.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":e("'")?b+="'":d=!0;break;default:b+=c.charAt(f)}return b},_get:function(c,b){return c.settings[b]!==g?c.settings[b]:this._defaults[b]},_setDateFromField:function(c,b){if(c.input.val()!=c.lastVal){var d=this._get(c,"dateFormat"),e=c.lastVal=c.input?c.input.val():null,f,a;f=a=this._getDefaultDate(c);var l=this._getFormatConfig(c);try{f=this.parseDate(d,e,l)||a}catch(k){this.log(k),
e=b?"":e}c.selectedDay=f.getDate();c.drawMonth=c.selectedMonth=f.getMonth();c.drawYear=c.selectedYear=f.getFullYear();c.currentDay=e?f.getDate():0;c.currentMonth=e?f.getMonth():0;c.currentYear=e?f.getFullYear():0;this._adjustInstDate(c)}},_getDefaultDate:function(c){return this._restrictMinMax(c,this._determineDate(c,this._get(c,"defaultDate"),new Date))},_determineDate:function(c,b,d){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},l=function(a){try{return f.datepicker.parseDate(f.datepicker._get(c,
"dateFormat"),a,f.datepicker._getFormatConfig(c))}catch(b){}for(var d=(a.toLowerCase().match(/^c/)?f.datepicker._getDate(c):null)||new Date,e=d.getFullYear(),l=d.getMonth(),d=d.getDate(),k=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=k.exec(a);g;){switch(g[2]||"d"){case "d":case "D":d+=parseInt(g[1],10);break;case "w":case "W":d+=7*parseInt(g[1],10);break;case "m":case "M":l+=parseInt(g[1],10);d=Math.min(d,f.datepicker._getDaysInMonth(e,l));break;case "y":case "Y":e+=parseInt(g[1],10),d=Math.min(d,f.datepicker._getDaysInMonth(e,
l))}g=k.exec(a)}return new Date(e,l,d)};if(b=(b=null==b||""===b?d:"string"==typeof b?l(b):"number"==typeof b?isNaN(b)?d:e(b):new Date(b.getTime()))&&"Invalid Date"==b.toString()?d:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(c){if(!c)return null;c.setHours(12<c.getHours()?c.getHours()+2:0);return c},_setDate:function(c,b,d){var e=!b,f=c.selectedMonth,a=c.selectedYear;b=this._restrictMinMax(c,this._determineDate(c,
b,new Date));c.selectedDay=c.currentDay=b.getDate();c.drawMonth=c.selectedMonth=c.currentMonth=b.getMonth();c.drawYear=c.selectedYear=c.currentYear=b.getFullYear();f==c.selectedMonth&&a==c.selectedYear||d||this._notifyChange(c);this._adjustInstDate(c);c.input&&c.input.val(e?"":this._formatDate(c))},_getDate:function(c){return!c.currentYear||c.input&&""==c.input.val()?null:this._daylightSavingAdjust(new Date(c.currentYear,c.currentMonth,c.currentDay))},_attachHandlers:function(c){var b=this._get(c,
"stepMonths"),d="#"+c.id.replace(/\\\\/g,"\\");c.dpDiv.find("[data-handler]").map(function(){f(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+l].datepicker._adjustDate(d,-b,"M")},next:function(){window["DP_jQuery_"+l].datepicker._adjustDate(d,+b,"M")},hide:function(){window["DP_jQuery_"+l].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+l].datepicker._gotoToday(d)},selectDay:function(){window["DP_jQuery_"+l].datepicker._selectDay(d,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+l].datepicker._selectMonthYear(d,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+l].datepicker._selectMonthYear(d,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(c){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),d=this._get(c,"isRTL"),e=this._get(c,"showButtonPanel"),l=this._get(c,"hideIfNoPrevNext"),a=this._get(c,
"navigationAsDateFormat"),k=this._getNumberOfMonths(c),g=this._get(c,"showCurrentAtPos"),m=this._get(c,"stepMonths"),n=1!=k[0]||1!=k[1],C=this._daylightSavingAdjust(c.currentDay?new Date(c.currentYear,c.currentMonth,c.currentDay):new Date(9999,9,9)),y=this._getMinMaxDate(c,"min"),z=this._getMinMaxDate(c,"max"),g=c.drawMonth-g,D=c.drawYear;0>g&&(g+=12,D--);if(z)for(var F=this._daylightSavingAdjust(new Date(z.getFullYear(),z.getMonth()-k[0]*k[1]+1,z.getDate())),F=y&&F<y?y:F;this._daylightSavingAdjust(new Date(D,
g,1))>F;)g--,0>g&&(g=11,D--);c.drawMonth=g;c.drawYear=D;var F=this._get(c,"prevText"),F=a?this.formatDate(F,this._daylightSavingAdjust(new Date(D,g-m,1)),this._getFormatConfig(c)):F,F=this._canAdjustMonth(c,-1,D,g)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+F+"</span></a>":l?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+
(d?"e":"w")+'">'+F+"</span></a>",H=this._get(c,"nextText"),H=a?this.formatDate(H,this._daylightSavingAdjust(new Date(D,g+m,1)),this._getFormatConfig(c)):H,l=this._canAdjustMonth(c,1,D,g)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+H+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":"e")+'">'+H+"</span></a>":l?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+H+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":
"e")+'">'+H+"</span></a>",m=this._get(c,"currentText"),H=this._get(c,"gotoCurrent")&&c.currentDay?C:b,m=a?this.formatDate(m,H,this._getFormatConfig(c)):m,a=c.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(c,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(d?a:"")+(this._isInRange(c,H)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
m+"</button>":"")+(d?"":a)+"</div>":"",a=parseInt(this._get(c,"firstDay"),10),a=isNaN(a)?0:a,m=this._get(c,"showWeek"),H=this._get(c,"dayNames");this._get(c,"dayNamesShort");var M=this._get(c,"dayNamesMin"),I=this._get(c,"monthNames"),J=this._get(c,"monthNamesShort"),K=this._get(c,"beforeShowDay"),G=this._get(c,"showOtherMonths"),S=this._get(c,"selectOtherMonths");this._get(c,"calculateWeek");for(var O=this._getDefaultDate(c),s="",T=0;T<k[0];T++){var Q="";this.maxRows=4;for(var U=0;U<k[1];U++){var N=
this._daylightSavingAdjust(new Date(D,g,c.selectedDay)),V=" ui-corner-all",P="";if(n){P+='<div class="ui-datepicker-group';if(1<k[1])switch(U){case 0:P+=" ui-datepicker-group-first";V=" ui-corner-"+(d?"right":"left");break;case k[1]-1:P+=" ui-datepicker-group-last";V=" ui-corner-"+(d?"left":"right");break;default:P+=" ui-datepicker-group-middle",V=""}P+='">'}for(var P=P+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+V+'">'+(/all|left/.test(V)&&0==T?d?l:F:"")+(/all|right/.test(V)&&
0==T?d?F:l:"")+this._generateMonthYearHeader(c,g,D,y,z,0<T||0<U,I,J)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),aa=m?'<th class="ui-datepicker-week-col">'+this._get(c,"weekHeader")+"</th>":"",V=0;7>V;V++)var ea=(V+a)%7,aa=aa+("<th"+(5<=(V+a+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+H[ea]+'">'+M[ea]+"</span></th>");P+=aa+"</tr></thead><tbody>";aa=this._getDaysInMonth(D,g);D==c.selectedYear&&g==c.selectedMonth&&(c.selectedDay=Math.min(c.selectedDay,aa));V=(this._getFirstDayOfMonth(D,
g)-a+7)%7;aa=Math.ceil((V+aa)/7);this.maxRows=aa=n?this.maxRows>aa?this.maxRows:aa:aa;for(var ea=this._daylightSavingAdjust(new Date(D,g,1-V)),ga=0;ga<aa;ga++){for(var P=P+"<tr>",na=m?'<td class="ui-datepicker-week-col">'+this._get(c,"calculateWeek")(ea)+"</td>":"",V=0;7>V;V++){var W=K?K.apply(c.input?c.input[0]:null,[ea]):[!0,""],Z=ea.getMonth()!=g,ca=Z&&!S||!W[0]||y&&ea<y||z&&ea>z,na=na+('<td class="'+(5<=(V+a+6)%7?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(ea.getTime()==
N.getTime()&&g==c.selectedMonth&&c._keyEvent||O.getTime()==ea.getTime()&&O.getTime()==N.getTime()?" "+this._dayOverClass:"")+(ca?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!G?"":" "+W[1]+(ea.getTime()==C.getTime()?" "+this._currentClass:"")+(ea.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!G||!W[2]?"":' title="'+W[2]+'"')+(ca?"":' data-handler="selectDay" data-event="click" data-month="'+ea.getMonth()+'" data-year="'+ea.getFullYear()+'"')+">"+(Z&&!G?"&#xa0;":ca?'<span class="ui-state-default">'+
ea.getDate()+"</span>":'<a class="ui-state-default'+(ea.getTime()==b.getTime()?" ui-state-highlight":"")+(ea.getTime()==C.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+ea.getDate()+"</a>")+"</td>");ea.setDate(ea.getDate()+1);ea=this._daylightSavingAdjust(ea)}P+=na+"</tr>"}g++;11<g&&(g=0,D++);P+="</tbody></table>"+(n?"</div>"+(0<k[0]&&U==k[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");Q+=P}s+=Q}s+=e+(f.browser.msie&&7>parseInt(f.browser.version,10)&&!c.inline?
'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");c._keyEvent=!1;return s},_generateMonthYearHeader:function(c,b,d,e,f,a,l,k){var g=this._get(c,"changeMonth"),m=this._get(c,"changeYear"),n=this._get(c,"showMonthAfterYear"),y='<div class="ui-datepicker-title">',z="";if(a||!g)z+='<span class="ui-datepicker-month">'+l[b]+"</span>";else{l=e&&e.getFullYear()==d;for(var D=f&&f.getFullYear()==d,z=z+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
F=0;12>F;F++)(!l||F>=e.getMonth())&&(!D||F<=f.getMonth())&&(z+='<option value="'+F+'"'+(F==b?' selected="selected"':"")+">"+k[F]+"</option>");z+="</select>"}n||(y+=z+(!a&&g&&m?"":"&#xa0;"));if(!c.yearshtml)if(c.yearshtml="",a||!m)y+='<span class="ui-datepicker-year">'+d+"</span>";else{k=this._get(c,"yearRange").split(":");var H=(new Date).getFullYear();l=function(a){a=a.match(/c[+-].*/)?d+parseInt(a.substring(1),10):a.match(/[+-].*/)?H+parseInt(a,10):parseInt(a,10);return isNaN(a)?H:a};b=l(k[0]);
k=Math.max(b,l(k[1]||""));b=e?Math.max(b,e.getFullYear()):b;k=f?Math.min(k,f.getFullYear()):k;for(c.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=k;b++)c.yearshtml+='<option value="'+b+'"'+(b==d?' selected="selected"':"")+">"+b+"</option>";c.yearshtml+="</select>";y+=c.yearshtml;c.yearshtml=null}y+=this._get(c,"yearSuffix");n&&(y+=(!a&&g&&m?"":"&#xa0;")+z);return y+"</div>"},_adjustInstDate:function(c,b,d){var e=c.drawYear+("Y"==d?b:0),f=c.drawMonth+
("M"==d?b:0);b=Math.min(c.selectedDay,this._getDaysInMonth(e,f))+("D"==d?b:0);e=this._restrictMinMax(c,this._daylightSavingAdjust(new Date(e,f,b)));c.selectedDay=e.getDate();c.drawMonth=c.selectedMonth=e.getMonth();c.drawYear=c.selectedYear=e.getFullYear();"M"!=d&&"Y"!=d||this._notifyChange(c)},_restrictMinMax:function(c,b){var d=this._getMinMaxDate(c,"min"),e=this._getMinMaxDate(c,"max"),d=d&&b<d?d:b;return e&&d>e?e:d},_notifyChange:function(c){var b=this._get(c,"onChangeMonthYear");b&&b.apply(c.input?
c.input[0]:null,[c.selectedYear,c.selectedMonth+1,c])},_getNumberOfMonths:function(c){c=this._get(c,"numberOfMonths");return null==c?[1,1]:"number"==typeof c?[1,c]:c},_getMinMaxDate:function(c,b){return this._determineDate(c,this._get(c,b+"Date"),null)},_getDaysInMonth:function(c,b){return 32-this._daylightSavingAdjust(new Date(c,b,32)).getDate()},_getFirstDayOfMonth:function(c,b){return(new Date(c,b,1)).getDay()},_canAdjustMonth:function(c,b,d,e){var f=this._getNumberOfMonths(c);d=this._daylightSavingAdjust(new Date(d,
e+(0>b?b:f[0]*f[1]),1));0>b&&d.setDate(this._getDaysInMonth(d.getFullYear(),d.getMonth()));return this._isInRange(c,d)},_isInRange:function(c,b){var d=this._getMinMaxDate(c,"min"),e=this._getMinMaxDate(c,"max");return(!d||b.getTime()>=d.getTime())&&(!e||b.getTime()<=e.getTime())},_getFormatConfig:function(c){var b=this._get(c,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(c,"dayNamesShort"),dayNames:this._get(c,
"dayNames"),monthNamesShort:this._get(c,"monthNamesShort"),monthNames:this._get(c,"monthNames")}},_formatDate:function(c,b,d,e){b||(c.currentDay=c.selectedDay,c.currentMonth=c.selectedMonth,c.currentYear=c.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(e,d,b)):this._daylightSavingAdjust(new Date(c.currentYear,c.currentMonth,c.currentDay));return this.formatDate(this._get(c,"dateFormat"),b,this._getFormatConfig(c))}});f.fn.datepicker=function(c){if(!this.length)return this;
f.datepicker.initialized||(f(document).mousedown(f.datepicker._checkExternalClick).find(document.body).append(f.datepicker.dpDiv),f.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof c&&("isDisabled"==c||"getDate"==c||"widget"==c)||"option"==c&&2==arguments.length&&"string"==typeof arguments[1]?f.datepicker["_"+c+"Datepicker"].apply(f.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof c?f.datepicker["_"+c+"Datepicker"].apply(f.datepicker,
[this].concat(b)):f.datepicker._attachDatepicker(this,c)})};f.datepicker=new m;f.datepicker.initialized=!1;f.datepicker.uuid=(new Date).getTime();f.datepicker.version="1.9.0";window["DP_jQuery_"+l]=f})(g);(function(f,g){var m={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},k={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};f.widget("ui.dialog",{version:"1.9.0",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,
height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var l=f(this).css(e).offset().top;0>l&&f(this).css("top",e.top-l)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.options.title=this.options.title||this.originalTitle;var e=this,l=this.options,d=l.title||"&#160;",c=(this.uiDialog=f("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(b){l.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===f.ui.keyCode.ESCAPE&&(e.close(b),b.preventDefault())}).mousedown(function(b){e.moveToTop(!1,b)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(c);
var b=(this.uiDialogTitlebar=f("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(c),k=f("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(b){b.preventDefault();e.close(b)}).appendTo(b);(this.uiDialogTitlebarCloseText=f("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(k);var d=f("<span>").uniqueId().addClass("ui-dialog-title").html(d).prependTo(b),g=(this.uiDialogButtonPane=
f("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=f("<div>")).addClass("ui-dialog-buttonset").appendTo(g);c.attr({role:"dialog","aria-labelledby":d.attr("id")});b.find("*").add(b).disableSelection();this._hoverable(k);this._focusable(k);l.draggable&&f.fn.draggable&&this._makeDraggable();l.resizable&&f.fn.resizable&&this._makeResizable();this._createButtons(l.buttons);this._isOpen=!1;f.fn.bgiframe&&c.bgiframe();this._on(c,{keydown:function(b){if(l.modal&&
b.keyCode===f.ui.keyCode.TAB){var a=f(":tabbable",c),d=a.filter(":first"),a=a.filter(":last");if(b.target===a[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return a.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,f=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",
this.originalTitle);e=f.parent.children().eq(f.index);e.length&&e[0]!==this.element[0]?e.before(this.element):f.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(e){var l=this,d,c;if(this._isOpen&&!1!==this._trigger("beforeClose",e))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this.uiDialog.hide(this.options.hide,function(){l._trigger("close",e)}):(this.uiDialog.hide(),this._trigger("close",e)),f.ui.dialog.overlay.resize(),this.options.modal&&
(d=0,f(".ui-dialog").each(function(){this!==l.uiDialog[0]&&(c=f(this).css("z-index"),isNaN(c)||(d=Math.max(d,c)))}),f.ui.dialog.maxZ=d),this},isOpen:function(){return this._isOpen},moveToTop:function(e,l){var d=this.options;if(d.modal&&!e||!d.stack&&!d.modal)return this._trigger("focus",l);d.zIndex>f.ui.dialog.maxZ&&(f.ui.dialog.maxZ=d.zIndex);this.overlay&&(f.ui.dialog.maxZ+=1,f.ui.dialog.overlay.maxZ=f.ui.dialog.maxZ,this.overlay.$el.css("z-index",f.ui.dialog.overlay.maxZ));d={scrollTop:this.element.scrollTop(),
scrollLeft:this.element.scrollLeft()};f.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",f.ui.dialog.maxZ);this.element.attr(d);this._trigger("focus",l);return this},open:function(){if(!this._isOpen){var e;e=this.options;var l=this.uiDialog;this._size();this._position(e.position);l.show(e.show);this.overlay=e.modal?new f.ui.dialog.overlay(this):null;this.moveToTop(!0);e=this.element.find(":tabbable");e.length||(e=this.uiDialogButtonPane.find(":tabbable"),e.length||(e=l));e.eq(0).focus();this._isOpen=
!0;this._trigger("open");return this}},_createButtons:function(e){var l=this,d=!1;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();"object"===typeof e&&null!==e&&f.each(e,function(){return!(d=!0)});d?(f.each(e,function(c,b){b=f.isFunction(b)?{click:b,text:c}:b;var d=f("<button type='button'>").attr(b,!0).unbind("click").click(function(){b.click.apply(l.element[0],arguments)}).appendTo(l.uiButtonSet);f.fn.button&&d.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):
this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function e(c){return{position:c.position,offset:c.offset}}var l=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,b){f(this).addClass("ui-dialog-dragging");l._trigger("dragStart",c,e(b))},drag:function(c,b){l._trigger("drag",c,e(b))},stop:function(c,b){d.position=[b.position.left-l.document.scrollLeft(),b.position.top-
l.document.scrollTop()];f(this).removeClass("ui-dialog-dragging");l._trigger("dragStop",c,e(b));f.ui.dialog.overlay.resize()}})},_makeResizable:function(e){function l(b){return{originalPosition:b.originalPosition,originalSize:b.originalSize,position:b.position,size:b.size}}e=e===g?this.options.resizable:e;var d=this,c=this.options,b=this.uiDialog.css("position");e="string"===typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,
maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:this._minHeight(),handles:e,start:function(b,c){f(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",b,l(c))},resize:function(b,c){d._trigger("resize",b,l(c))},stop:function(b,e){f(this).removeClass("ui-dialog-resizing");c.height=f(this).height();c.width=f(this).width();d._trigger("resizeStop",b,l(e));f.ui.dialog.overlay.resize()}}).css("position",b).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},
_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(e){var l=[],d=[0,0],c;if(e){if("string"===typeof e||"object"===typeof e&&"0"in e)l=e.split?e.split(" "):[e[0],e[1]],1===l.length&&(l[1]=l[0]),f.each(["left","top"],function(b,c){+l[b]===l[b]&&(d[b]=l[b],l[b]=c)}),e={my:l.join(" "),at:l.join(" "),offset:d.join(" ")};e=f.extend({},f.ui.dialog.prototype.options.position,e)}else e=f.ui.dialog.prototype.options.position;(c=this.uiDialog.is(":visible"))||
this.uiDialog.show();this.uiDialog.position(e);c||this.uiDialog.hide()},_setOptions:function(e){var l=this,d={},c=!1;f.each(e,function(b,e){l._setOption(b,e);b in m&&(c=!0);b in k&&(d[b]=e)});c&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(e,l){var d,c=this.uiDialog;switch(e){case "buttons":this._createButtons(l);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+l);break;case "dialogClass":c.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
l);break;case "disabled":l?c.addClass("ui-dialog-disabled"):c.removeClass("ui-dialog-disabled");break;case "draggable":(d=c.is(":data(draggable)"))&&!l&&c.draggable("destroy");!d&&l&&this._makeDraggable();break;case "position":this._position(l);break;case "resizable":(d=c.is(":data(resizable)"))&&!l&&c.resizable("destroy");d&&"string"===typeof l&&c.resizable("option","handles",l);d||!1===l||this._makeResizable(l);break;case "title":f(".ui-dialog-title",this.uiDialogTitlebar).html(""+(l||"&#160;"))}this._super(e,
l)},_size:function(){var e,l,d=this.options,c=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});d.minWidth>d.width&&(d.width=d.minWidth);e=this.uiDialog.css({height:"auto",width:d.width}).outerHeight();l=Math.max(0,d.minHeight-e);"auto"===d.height?f.support.minHeight?this.element.css({minHeight:l,height:"auto"}):(this.uiDialog.show(),e=this.element.css("height","auto").height(),c||this.uiDialog.hide(),this.element.height(Math.max(e,l))):this.element.height(Math.max(d.height-
e,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});f.extend(f.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){e=e.attr("id");e||(e=this.uuid+=1);return"ui-dialog-title-"+e},overlay:function(e){this.$el=f.ui.dialog.overlay.create(e)}});f.extend(f.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:f.map("focus mousedown mouseup keydown keypress click".split(" "),function(e){return e+".dialog-overlay"}).join(" "),create:function(e){0===
this.instances.length&&(setTimeout(function(){f.ui.dialog.overlay.instances.length&&f(document).bind(f.ui.dialog.overlay.events,function(d){if(f(d.target).zIndex()<f.ui.dialog.overlay.maxZ)return!1})},1),f(window).bind("resize.dialog-overlay",f.ui.dialog.overlay.resize));var l=this.oldInstances.pop()||f("<div>").addClass("ui-widget-overlay");f(document).bind("keydown.dialog-overlay",function(d){var c=f.ui.dialog.overlay.instances;0!==c.length&&c[c.length-1]===l&&e.options.closeOnEscape&&!d.isDefaultPrevented()&&
d.keyCode&&d.keyCode===f.ui.keyCode.ESCAPE&&(e.close(d),d.preventDefault())});l.appendTo(document.body).css({width:this.width(),height:this.height()});f.fn.bgiframe&&l.bgiframe();this.instances.push(l);return l},destroy:function(e){var l=f.inArray(e,this.instances),d=0;-1!==l&&this.oldInstances.push(this.instances.splice(l,1)[0]);0===this.instances.length&&f([document,window]).unbind(".dialog-overlay");e.height(0).width(0).remove();f.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});
this.maxZ=d},height:function(){var e,l;return f.browser.msie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),l=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<l?f(window).height()+"px":e+"px"):f(document).height()+"px"},width:function(){var e,l;return f.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),l=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<l?f(window).width()+"px":
e+"px"):f(document).width()+"px"},resize:function(){var e=f([]);f.each(f.ui.dialog.overlay.instances,function(){e=e.add(this)});e.css({width:0,height:0}).css({width:f.ui.dialog.overlay.width(),height:f.ui.dialog.overlay.height()})}});f.extend(f.ui.dialog.overlay.prototype,{destroy:function(){f.ui.dialog.overlay.destroy(this.$el)}})})(g);(function(f,g){var m=!1;f.widget("ui.menu",{version:"1.9.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",
at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,f.proxy(function(f){this.options.disabled&&f.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");
this._on({"mousedown .ui-menu-item > a":function(f){f.preventDefault()},"click .ui-state-disabled > a":function(f){f.preventDefault()},"click .ui-menu-item:has(a)":function(k){var e=f(k.target).closest(".ui-menu-item");!m&&e.not(".ui-state-disabled").length&&(m=!0,this.select(k),e.has(".ui-menu").length?this.expand(k):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(k){var e=
f(k.currentTarget);e.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(k,e)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(f,e){var l=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(f,l)},blur:function(k){this._delay(function(){f.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(k)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(k){f(k.target).closest(".ui-menu").length||
this.collapseAll(k);m=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var k=
f(this);k.data("ui-menu-submenu-carat")&&k.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(k){function e(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var l,d,c,b,g=!0;switch(k.keyCode){case f.ui.keyCode.PAGE_UP:this.previousPage(k);break;case f.ui.keyCode.PAGE_DOWN:this.nextPage(k);break;case f.ui.keyCode.HOME:this._move("first","first",k);break;case f.ui.keyCode.END:this._move("last","last",k);break;case f.ui.keyCode.UP:this.previous(k);
break;case f.ui.keyCode.DOWN:this.next(k);break;case f.ui.keyCode.LEFT:this.collapse(k);break;case f.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(k);break;case f.ui.keyCode.ENTER:case f.ui.keyCode.SPACE:this._activate(k);break;case f.ui.keyCode.ESCAPE:this.collapse(k);break;default:g=!1,l=this.previousFilter||"",d=String.fromCharCode(k.keyCode),c=!1,clearTimeout(this.filterTimer),d===l?c=!0:d=l+d,b=RegExp("^"+e(d),"i"),l=this.activeMenu.children(".ui-menu-item").filter(function(){return b.test(f(this).children("a").text())}),
l=c&&-1!==l.index(this.active.next())?this.active.nextAll(".ui-menu-item"):l,l.length||(d=String.fromCharCode(k.keyCode),b=RegExp("^"+e(d),"i"),l=this.activeMenu.children(".ui-menu-item").filter(function(){return b.test(f(this).children("a").text())})),l.length?(this.focus(k,l),1<l.length?(this.previousFilter=d,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}g&&k.preventDefault()},_activate:function(f){this.active.is(".ui-state-disabled")||
(this.active.children("a[aria-haspopup='true']").length?this.expand(f):this.select(f))},refresh:function(){var k,e=this.options.icons.submenu,l=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});k=l.add(this.element);k.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});k.children(":not(.ui-menu-item)").each(function(){var d=f(this);/[^\-\u2014\u2013\s]/.test(d.text())||d.addClass("ui-widget-content ui-menu-divider")});k.children(".ui-state-disabled").attr("aria-disabled","true");l.each(function(){var d=f(this),c=d.prev("a"),b=f("<span>").addClass("ui-menu-icon ui-icon "+e).data("ui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(b);d.attr("aria-labelledby",c.attr("id"))});this.active&&!f.contains(this.element[0],this.active[0])&&
this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(f,e){var l;this.blur(f,f&&"focus"===f.type);this._scrollIntoView(e);this.active=e.first();l=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",l.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");f&&"keydown"===f.type?this._close():this.timer=this._delay(function(){this._close()},
this.delay);l=e.children(".ui-menu");l.length&&/^mouse/.test(f.type)&&this._startOpening(l);this.activeMenu=e.parent();this._trigger("focus",f,{item:e})},_scrollIntoView:function(k){var e,l,d;this._hasScroll()&&(e=parseFloat(f.css(this.activeMenu[0],"borderTopWidth"))||0,l=parseFloat(f.css(this.activeMenu[0],"paddingTop"))||0,e=k.offset().top-this.activeMenu.offset().top-e-l,l=this.activeMenu.scrollTop(),d=this.activeMenu.height(),k=k.height(),0>e?this.activeMenu.scrollTop(l+e):e+k>d&&this.activeMenu.scrollTop(l+
e-d+k))},blur:function(f,e){e||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",f,{item:this.active}))},_startOpening:function(f){clearTimeout(this.timer);"true"===f.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(f)},this.delay))},_open:function(k){var e=f.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(k.parents(".ui-menu")).hide().attr("aria-hidden",
"true");k.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(k,e){clearTimeout(this.timer);this.timer=this._delay(function(){var l=e?this.element:f(k&&k.target).closest(this.element.find(".ui-menu"));l.length||(l=this.element);this._close(l);this.blur(k);this.activeMenu=l},this.delay)},_close:function(f){f||(f=this.active?this.active.parent():this.element);f.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},
collapse:function(f){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(f,e))},expand:function(f){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(f,e)}))},next:function(f){this._move("next","first",f)},previous:function(f){this._move("prev","last",f)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},
isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(f,e,l){var d;this.active&&(d="first"===f||"last"===f?this.active["first"===f?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[f+"All"](".ui-menu-item").eq(0));d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[e]());this.focus(l,d)},nextPage:function(k){var e,l,d;this.active?this.isLastItem()||(this._hasScroll()?(l=this.active.offset().top,d=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){e=
f(this);return 0>e.offset().top-l-d}),this.focus(k,e)):this.focus(k,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(k)},previousPage:function(k){var e,l,d;this.active?this.isFirstItem()||(this._hasScroll()?(l=this.active.offset().top,d=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){e=f(this);return 0<e.offset().top-l+d}),this.focus(k,e)):this.focus(k,this.activeMenu.children(".ui-menu-item").first())):this.next(k)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(k){this.active=this.active||f(k.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(k,!0);this._trigger("select",k,e)}})})(g);(function(f,g){f.widget("ui.progressbar",{version:"1.9.0",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,
"aria-valuenow":this._value()});this.valueDiv=f("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(f){if(f===g)return this._value();this._setOption("value",
f);return this},_setOption:function(f,k){"value"===f&&(this.options.value=k,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(f,k)},_value:function(){var f=this.options.value;"number"!==typeof f&&(f=0);return Math.min(this.options.max,Math.max(this.min,f))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var f=this.value(),k=this._percentage();this.oldValue!==f&&(this.oldValue=f,this._trigger("change"));this.valueDiv.toggle(f>
this.min).toggleClass("ui-corner-right",f===this.options.max).width(k.toFixed(0)+"%");this.element.attr("aria-valuenow",f)}})})(g);(function(f,g){f.widget("ui.slider",f.ui.mouse,{version:"1.9.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var g,k=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),l=k.values&&k.values.length||1,d=[];this._mouseSliding=
this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(k.disabled?" ui-slider-disabled ui-disabled":""));this.range=f([]);k.range&&(!0===k.range&&(k.values||(k.values=[this._valueMin(),this._valueMin()]),k.values.length&&2!==k.values.length&&(k.values=[k.values[0],k.values[0]])),this.range=f("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+
("min"===k.range||"max"===k.range?" ui-slider-range-"+k.range:"")));for(g=e.length;g<l;g++)d.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=e.add(f(d.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(c){c.preventDefault()}).mouseenter(function(){k.disabled||f(this).addClass("ui-state-hover")}).mouseleave(function(){f(this).removeClass("ui-state-hover")}).focus(function(){k.disabled?
f(this).blur():(f(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),f(this).addClass("ui-state-focus"))}).blur(function(){f(this).removeClass("ui-state-focus")});this.handles.each(function(c){f(this).data("ui-slider-handle-index",c)});this._on(this.handles,{keydown:function(c){var b,d,e,l=f(c.target).data("ui-slider-handle-index");switch(c.keyCode){case f.ui.keyCode.HOME:case f.ui.keyCode.END:case f.ui.keyCode.PAGE_UP:case f.ui.keyCode.PAGE_DOWN:case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:if(c.preventDefault(),
!this._keySliding&&(this._keySliding=!0,f(c.target).addClass("ui-state-active"),b=this._start(c,l),!1===b))return}e=this.options.step;b=this.options.values&&this.options.values.length?d=this.values(l):d=this.value();switch(c.keyCode){case f.ui.keyCode.HOME:d=this._valueMin();break;case f.ui.keyCode.END:d=this._valueMax();break;case f.ui.keyCode.PAGE_UP:d=this._trimAlignValue(b+(this._valueMax()-this._valueMin())/5);break;case f.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(b-(this._valueMax()-this._valueMin())/
5);break;case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:if(b===this._valueMax())return;d=this._trimAlignValue(b+e);break;case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:if(b===this._valueMin())return;d=this._trimAlignValue(b-e)}this._slide(c,l,d)},keyup:function(c){var b=f(c.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(c,b),this._change(c,b),f(c.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();
this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(g){var k,e,l,d,c,b=this;c=this.options;if(c.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();k=this._normValueFromMouse({x:g.pageX,y:g.pageY});e=this._valueMax()-this._valueMin()+1;this.handles.each(function(c){var g=
Math.abs(k-b.values(c));e>g&&(e=g,l=f(this),d=c)});!0===c.range&&this.values(1)===c.min&&(d+=1,l=f(this.handles[d]));if(!1===this._start(g,d))return!1;this._mouseSliding=!0;this._handleIndex=d;l.addClass("ui-state-active").focus();c=l.offset();this._clickOffset=f(g.target).parents().andSelf().is(".ui-slider-handle")?{left:g.pageX-c.left-l.width()/2,top:g.pageY-c.top-l.height()/2-(parseInt(l.css("borderTopWidth"),10)||0)-(parseInt(l.css("borderBottomWidth"),10)||0)+(parseInt(l.css("marginTop"),10)||
0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(g,d,k);return this._animateOff=!0},_mouseStart:function(f){return!0},_mouseDrag:function(f){var k=this._normValueFromMouse({x:f.pageX,y:f.pageY});this._slide(f,this._handleIndex,k);return!1},_mouseStop:function(f){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(f,this._handleIndex);this._change(f,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation=
"vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(f){var k;"horizontal"===this.orientation?(k=this.elementSize.width,f=f.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(k=this.elementSize.height,f=f.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));k=f/k;1<k&&(k=1);0>k&&(k=0);"vertical"===this.orientation&&(k=1-k);f=this._valueMax()-this._valueMin();k=this._valueMin()+k*f;return this._trimAlignValue(k)},_start:function(f,
k){var e={handle:this.handles[k],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(k),e.values=this.values());return this._trigger("start",f,e)},_slide:function(f,k,e){var l;this.options.values&&this.options.values.length?(l=this.values(k?0:1),2===this.options.values.length&&!0===this.options.range&&(0===k&&e>l||1===k&&e<l)&&(e=l),e!==this.values(k)&&(l=this.values(),l[k]=e,f=this._trigger("slide",f,{handle:this.handles[k],value:e,values:l}),this.values(k?0:
1),!1!==f&&this.values(k,e,!0))):e!==this.value()&&(f=this._trigger("slide",f,{handle:this.handles[k],value:e}),!1!==f&&this.value(e))},_stop:function(f,k){var e={handle:this.handles[k],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(k),e.values=this.values());this._trigger("stop",f,e)},_change:function(f,k){if(!this._keySliding&&!this._mouseSliding){var e={handle:this.handles[k],value:this.value()};this.options.values&&this.options.values.length&&(e.value=
this.values(k),e.values=this.values());this._trigger("change",f,e)}},value:function(f){if(arguments.length)this.options.value=this._trimAlignValue(f),this._refreshValue(),this._change(null,0);else return this._value()},values:function(g,k){var e,l,d;if(1<arguments.length)this.options.values[g]=this._trimAlignValue(k),this._refreshValue(),this._change(null,g);else if(arguments.length)if(f.isArray(arguments[0])){e=this.options.values;l=arguments[0];for(d=0;d<e.length;d+=1)e[d]=this._trimAlignValue(l[d]),
this._change(null,d);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(g):this.value();else return this._values()},_setOption:function(g,k){var e,l=0;f.isArray(this.options.values)&&(l=this.options.values.length);f.Widget.prototype._setOption.apply(this,arguments);switch(g){case "disabled":k?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",
!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(e=0;e<l;e+=1)this._change(null,e);this._animateOff=!1}},_value:function(){var f=this.options.value;return f=this._trimAlignValue(f)},
_values:function(f){var k,e;if(arguments.length)return k=this.options.values[f],k=this._trimAlignValue(k);k=this.options.values.slice();for(e=0;e<k.length;e+=1)k[e]=this._trimAlignValue(k[e]);return k},_trimAlignValue:function(f){if(f<=this._valueMin())return this._valueMin();if(f>=this._valueMax())return this._valueMax();var k=0<this.options.step?this.options.step:1,e=(f-this._valueMin())%k;f-=e;2*Math.abs(e)>=k&&(f+=0<e?k:-k);return parseFloat(f.toFixed(5))},_valueMin:function(){return this.options.min},
_valueMax:function(){return this.options.max},_refreshValue:function(){var g,k,e,l,d,c=this.options.range,b=this.options,n=this,r=this._animateOff?!1:b.animate,u={};if(this.options.values&&this.options.values.length)this.handles.each(function(a,c){k=(n.values(a)-n._valueMin())/(n._valueMax()-n._valueMin())*100;u["horizontal"===n.orientation?"left":"bottom"]=k+"%";f(this).stop(1,1)[r?"animate":"css"](u,b.animate);if(!0===n.options.range)if("horizontal"===n.orientation){if(0===a)n.range.stop(1,1)[r?
"animate":"css"]({left:k+"%"},b.animate);if(1===a)n.range[r?"animate":"css"]({width:k-g+"%"},{queue:!1,duration:b.animate})}else{if(0===a)n.range.stop(1,1)[r?"animate":"css"]({bottom:k+"%"},b.animate);if(1===a)n.range[r?"animate":"css"]({height:k-g+"%"},{queue:!1,duration:b.animate})}g=k});else{e=this.value();l=this._valueMin();d=this._valueMax();k=d!==l?(e-l)/(d-l)*100:0;u["horizontal"===this.orientation?"left":"bottom"]=k+"%";this.handle.stop(1,1)[r?"animate":"css"](u,b.animate);if("min"===c&&"horizontal"===
this.orientation)this.range.stop(1,1)[r?"animate":"css"]({width:k+"%"},b.animate);if("max"===c&&"horizontal"===this.orientation)this.range[r?"animate":"css"]({width:100-k+"%"},{queue:!1,duration:b.animate});if("min"===c&&"vertical"===this.orientation)this.range.stop(1,1)[r?"animate":"css"]({height:k+"%"},b.animate);if("max"===c&&"vertical"===this.orientation)this.range[r?"animate":"css"]({height:100-k+"%"},{queue:!1,duration:b.animate})}}})})(g);(function(f){function g(f){return function(){var k=
this.element.val();f.apply(this,arguments);this._refresh();k!==this.element.val()&&this._trigger("change")}}f.widget("ui.spinner",{version:"1.9.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",
this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var g={},k=this.element;f.each(["min","max","step"],function(e,f){var d=k.attr(f);void 0!==d&&d.length&&(g[f]=d)});return g},_events:{keydown:function(f){this._start(f)&&this._keydown(f)&&f.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");
this.previous=this.element.val()},blur:function(f){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.uiSpinner.removeClass("ui-state-active"),this.previous!==this.element.val()&&this._trigger("change",f))},mousewheel:function(f,g){if(g){if(!this.spinning&&!this._start(f))return!1;this._spin((0<g?1:-1)*this.options.step,f);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(f)},100);f.preventDefault()}},"mousedown .ui-spinner-button":function(g){function k(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e}))}var e;e=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();g.preventDefault();k.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;k.call(this)});!1!==this._start(g)&&this._repeat(null,f(g.currentTarget).hasClass("ui-spinner-up")?1:-1,g)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(g){if(f(g.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(g))return!1;this._repeat(null,f(g.currentTarget).hasClass("ui-spinner-up")?1:-1,g)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var f=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(f);this.element.attr("role","spinbutton");this.buttons=f.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(0.5*
f.height())&&0<f.height()&&f.height(f.height());this.options.disabled&&this.disable()},_keydown:function(g){var k=this.options,e=f.ui.keyCode;switch(g.keyCode){case e.UP:return this._repeat(null,1,g),!0;case e.DOWN:return this._repeat(null,-1,g),!0;case e.PAGE_UP:return this._repeat(null,k.page,g),!0;case e.PAGE_DOWN:return this._repeat(null,-k.page,g),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(f){if(!this.spinning&&!1===this._trigger("start",f))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(f,g,e){f=f||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,g,e)},f);this._spin(g*this.options.step,e)},_spin:function(f,g){var e=this.value()||0;this.counter||
(this.counter=1);e=this._adjustValue(e+f*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",g,{value:e})||(this._value(e),this.counter++)},_increment:function(g){var k=this.options.incremental;return k?f.isFunction(k)?k(g):Math.floor(g*g*g/5E4-g*g/500+17*g/200+1):1},_precision:function(){var f=this._precisionOf(this.options.step);null!==this.options.min&&(f=Math.max(f,this._precisionOf(this.options.min)));return f},_precisionOf:function(f){f=f.toString();var g=f.indexOf(".");
return-1===g?0:f.length-g-1},_adjustValue:function(f){var g,e=this.options;g=null!==e.min?e.min:0;f=Math.round((f-g)/e.step)*e.step;f=g+f;f=parseFloat(f.toFixed(this._precision()));return null!==e.max&&f>e.max?e.max:null!==e.min&&f<e.min?e.min:f},_stop:function(f){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",f))},_setOption:function(f,g){if("culture"===f||"numberFormat"===f){var e=this._parse(this.element.val());this.options[f]=
g;this.element.val(this._format(e))}else"max"!==f&&"min"!==f&&"step"!==f||"string"!==typeof g||(g=this._parse(g)),this._super(f,g),"disabled"===f&&(g?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:g(function(f){this._super(f);this._value(this.element.val())}),_parse:function(f){"string"===typeof f&&""!==f&&(f=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(f,10,this.options.culture):
+f);return""===f||isNaN(f)?null:f},_format:function(f){return""===f?"":window.Globalize&&this.options.numberFormat?Globalize.format(f,this.options.numberFormat,this.options.culture):f},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(f,g){var e;""!==f&&(e=this._parse(f),null!==e&&(g||(e=this._adjustValue(e)),f=this._format(e)));this.element.val(f);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:g(function(f){this._stepUp(f)}),_stepUp:function(f){this._spin((f||1)*this.options.step)},stepDown:g(function(f){this._stepDown(f)}),_stepDown:function(f){this._spin((f||1)*-this.options.step)},pageUp:g(function(f){this._stepUp((f||1)*this.options.page)}),pageDown:g(function(f){this._stepDown((f||1)*this.options.page)}),
value:function(f){if(!arguments.length)return this._parse(this.element.val());g(this._value).call(this,f)},widget:function(){return this.uiSpinner}})})(g);(function(f,g){function m(f){f=f.cloneNode(!1);return 1<f.hash.length&&f.href.replace(e,"")===location.href.replace(e,"")}var k=0,e=/#.*$/;f.widget("ui.tabs",{version:"1.9.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=
this,d=this.options,c=d.active;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",d.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){f(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){f(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===c&&(location.hash&&this.anchors.each(function(b,
d){if(d.hash===location.hash)return c=b,!1}),null===c&&(c=this.tabs.filter(".ui-tabs-active").index()),null===c||-1===c)&&(c=this.tabs.length?0:!1);!1!==c&&(c=this.tabs.index(this.tabs.eq(c)),-1===c&&(c=d.collapsible?!1:0));d.active=c;!d.collapsible&&!1===d.active&&this.anchors.length&&(d.active=0);f.isArray(d.disabled)&&(d.disabled=f.unique(d.disabled.concat(f.map(this.tabs.filter(".ui-state-disabled"),function(b){return e.tabs.index(b)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?
this._findActive(this.options.active):f();this._refresh();this.active.length&&this.load(d.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):f()}},_tabKeydown:function(e){var d=f(this.document[0].activeElement).closest("li"),c=this.tabs.index(d),b=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:c++;break;case f.ui.keyCode.UP:case f.ui.keyCode.LEFT:b=!1;c--;break;case f.ui.keyCode.END:c=
this.anchors.length-1;break;case f.ui.keyCode.HOME:c=0;break;case f.ui.keyCode.SPACE:e.preventDefault();clearTimeout(this.activating);this._activate(c);return;case f.ui.keyCode.ENTER:e.preventDefault();clearTimeout(this.activating);this._activate(c===this.options.active?!1:c);return;default:return}e.preventDefault();clearTimeout(this.activating);c=this._focusNextTab(c,b);e.ctrlKey||(d.attr("aria-selected","false"),this.tabs.eq(c).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",
c)},this.delay))}},_panelKeydown:function(e){!this._handlePageNav(e)&&e.ctrlKey&&e.keyCode===f.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){if(e.altKey&&e.keyCode===f.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(e.altKey&&e.keyCode===f.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(e,d){function c(){e>b&&(e=0);0>e&&(e=b);return e}for(var b=this.tabs.length-
1;-1!==f.inArray(c(),this.options.disabled);)e=d?e+1:e-1;return e},_focusNextTab:function(e,d){e=this._findNextTab(e,d);this.tabs.eq(e).focus();return e},_setOption:function(e,d){"active"===e?this._activate(d):"disabled"===e?this._setupDisabled(d):(this._super(e,d),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",d),d||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(d),"heightStyle"===e&&this._setupHeightStyle(d))},_tabId:function(e){return e.attr("aria-controls")||
"ui-tabs-"+ ++k},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,d=this.tablist.children(":has(a[href])");e.disabled=f.map(d.filter(".ui-state-disabled"),function(c){return d.index(c)});this._processTabs();!1!==e.active&&this.anchors.length?this.active.length&&!f.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=f()):this._activate(this._findNextTab(Math.max(0,
e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=f());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",
tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return f("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",
tabIndex:-1});this.panels=f();this.anchors.each(function(d,c){var b,g,k,n=f(c).uniqueId().attr("id"),a=f(c).closest("li"),q=a.attr("aria-controls");m(c)?(b=c.hash,g=e.element.find(e._sanitizeSelector(b))):(k=e._tabId(a),b="#"+k,g=e.element.find(b),g.length||(g=e._createPanel(k),g.insertAfter(e.panels[d-1]||e.tablist)),g.attr("aria-live","polite"));g.length&&(e.panels=e.panels.add(g));q&&a.data("ui-tabs-aria-controls",q);a.attr({"aria-controls":b.substring(1),"aria-labelledby":n});g.attr("aria-labelledby",
n)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return f("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){f.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var d=0,c;c=this.tabs[d];d++)!0===e||-1!==f.inArray(d,e)?f(c).addClass("ui-state-disabled").attr("aria-disabled",
"true"):f(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var d={click:function(c){c.preventDefault()}};e&&f.each(e.split(" "),function(c,b){d[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,d);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(e){var d,c,b=this.element.parent();
"fill"===e?(f.support.minHeight||(c=b.css("overflow"),b.css("overflow","hidden")),d=b.height(),this.element.siblings(":visible").each(function(){var b=f(this),c=b.css("position");"absolute"!==c&&"fixed"!==c&&(d-=b.outerHeight(!0))}),c&&b.css("overflow",c),this.element.children().not(this.panels).each(function(){d-=f(this).outerHeight(!0)}),this.panels.each(function(){f(this).height(Math.max(0,d-f(this).innerHeight()+f(this).height()))}).css("overflow","auto")):"auto"===e&&(d=0,this.panels.each(function(){d=
Math.max(d,f(this).height("").height())}).height(d))},_eventHandler:function(e){var d=this.options,c=this.active,b=f(e.currentTarget).closest("li"),g=b[0]===c[0],k=g&&d.collapsible,m=k?f():this._getPanelForTab(b),a=c.length?this._getPanelForTab(c):f(),c={oldTab:c,oldPanel:a,newTab:k?f():b,newPanel:m};e.preventDefault();b.hasClass("ui-state-disabled")||b.hasClass("ui-tabs-loading")||this.running||g&&!d.collapsible||!1===this._trigger("beforeActivate",e,c)||(d.active=k?!1:this.tabs.index(b),this.active=
g?f():b,this.xhr&&this.xhr.abort(),a.length||m.length||f.error("jQuery UI Tabs: Mismatching fragment identifier."),m.length&&this.load(this.tabs.index(b),e),this._toggle(e,c))},_toggle:function(e,d){function c(){g.running=!1;g._trigger("activate",e,d)}function b(){d.newTab.closest("li").addClass("ui-tabs-active ui-state-active");k.length&&g.options.show?g._show(k,g.options.show,c):(k.show(),c())}var g=this,k=d.newPanel,m=d.oldPanel;this.running=!0;m.length&&this.options.hide?this._hide(m,this.options.hide,
function(){d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");b()}):(d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),m.hide(),b());m.attr({"aria-expanded":"false","aria-hidden":"true"});d.oldTab.attr("aria-selected","false");k.length&&m.length?d.oldTab.attr("tabIndex",-1):k.length&&this.tabs.filter(function(){return 0===f(this).attr("tabIndex")}).attr("tabIndex",-1);k.attr({"aria-expanded":"true","aria-hidden":"false"});d.newTab.attr({"aria-selected":"true",
tabIndex:0})},_activate:function(e){e=this._findActive(e);e[0]!==this.active[0]&&(e.length||(e=this.active),e=e.find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:f.noop}))},_findActive:function(e){return!1===e?f():this.tabs.eq(e)},_getIndex:function(e){"string"===typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']")));return e},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();this.tabs.add(this.panels).each(function(){f.data(this,"ui-tabs-destroy")?f(this).remove():f(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var e=f(this),d=e.data("ui-tabs-aria-controls");d?e.attr("aria-controls",d):e.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var d=this.options.disabled;!1!==d&&(e===g?d=!1:(e=this._getIndex(e),d=f.isArray(d)?f.map(d,function(c){return c!==e?c:null}):f.map(this.tabs,function(c,b){return b!==e?b:null})),this._setupDisabled(d))},disable:function(e){var d=this.options.disabled;if(!0!==d){if(e===g)d=!0;else{e=
this._getIndex(e);if(-1!==f.inArray(e,d))return;d=f.isArray(d)?f.merge([e],d).sort():[e]}this._setupDisabled(d)}},load:function(e,d){e=this._getIndex(e);var c=this,b=this.tabs.eq(e),g=b.find(".ui-tabs-anchor"),k=this._getPanelForTab(b),n={tab:b,panel:k};m(g[0])||(this.xhr=f.ajax(this._ajaxSettings(g,d,n)))&&"canceled"!==this.xhr.statusText&&(b.addClass("ui-tabs-loading"),k.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){k.html(a);c._trigger("load",d,n)},1)}).complete(function(a,
d){setTimeout(function(){"abort"===d&&c.panels.stop(!1,!0);b.removeClass("ui-tabs-loading");k.removeAttr("aria-busy");a===c.xhr&&delete c.xhr},1)}))},_ajaxSettings:function(e,d,c){var b=this;return{url:e.attr("href"),beforeSend:function(e,l){return b._trigger("beforeLoad",d,f.extend({jqXHR:e,ajaxSettings:l},c))}}},_getPanelForTab:function(e){e=f(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}});!1!==f.uiBackCompat&&(f.ui.tabs.prototype._ui=function(e,d){return{tab:e,
panel:d,index:this.anchors.index(e)}},f.widget("ui.tabs",f.ui.tabs,{url:function(e,d){this.anchors.eq(e).attr("href",d)}}),f.widget("ui.tabs",f.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var e=this;this._on({tabsbeforeload:function(d,c){f.data(c.tab[0],"cache.tabs")?d.preventDefault():c.jqXHR.success(function(){e.options.cache&&f.data(c.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(e,d,c){var b=this.options.ajaxOptions;return f.extend({},b,{error:function(d,
e,f){try{b.error(d,e,c.tab.closest("li").index(),c.tab[0])}catch(a){}}},this._superApply(arguments))},_setOption:function(e,d){"cache"===e&&!1===d&&this.anchors.removeData("cache.tabs");this._super(e,d)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(e,d){this.anchors.eq(e).removeData("cache.tabs");this._superApply(arguments)}}),f.widget("ui.tabs",f.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),f.widget("ui.tabs",f.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},
_create:function(){this._super();this._on({tabsbeforeload:function(e,d){if(e.target===this.element[0]&&this.options.spinner){var c=d.tab.find("span"),b=c.html();c.html(this.options.spinner);d.jqXHR.complete(function(){c.html(b)})}}})}}),f.widget("ui.tabs",f.ui.tabs,{options:{enable:null,disable:null},enable:function(e){var d=this.options,c;if(e&&!0===d.disabled||f.isArray(d.disabled)&&-1!==f.inArray(e,d.disabled))c=!0;this._superApply(arguments);c&&this._trigger("enable",null,this._ui(this.anchors[e],
this.panels[e]))},disable:function(e){var d=this.options,c;if(e&&!1===d.disabled||f.isArray(d.disabled)&&-1===f.inArray(e,d.disabled))c=!0;this._superApply(arguments);c&&this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))}}),f.widget("ui.tabs",f.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(e,d,c){c===g&&(c=this.anchors.length);var b,k=this.options;d=f(k.tabTemplate.replace(/#\{href\}/g,e).replace(/#\{label\}/g,
d));var m=e.indexOf("#")?this._tabId(d):e.replace("#","");d.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);d.attr("aria-controls",m);e=c>=this.tabs.length;b=this.element.find("#"+m);b.length||(b=this._createPanel(m),e?0<c?b.insertAfter(this.panels.eq(-1)):b.appendTo(this.element):b.insertBefore(this.panels[c]));b.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();e?d.appendTo(this.tablist):d.insertBefore(this.tabs[c]);k.disabled=f.map(k.disabled,function(b){return b>=
c?++b:b});this.refresh();1===this.tabs.length&&!1===k.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[c],this.panels[c]));return this},remove:function(e){e=this._getIndex(e);var d=this.options,c=this.tabs.eq(e).remove(),b=this._getPanelForTab(c).remove();c.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(e+(e+1<this.anchors.length?1:-1));d.disabled=f.map(f.grep(d.disabled,function(b){return b!==e}),function(b){return b>=e?--b:b});this.refresh();this._trigger("remove",
null,this._ui(c.find("a")[0],b[0]));return this}}),f.widget("ui.tabs",f.ui.tabs,{length:function(){return this.anchors.length}}),f.widget("ui.tabs",f.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(e){e=e.is("li")?e.find("a[href]"):e;e=e[0];return f(e).closest("li").attr("aria-controls")||e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++k}}),f.widget("ui.tabs",f.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(e){return f(this.options.panelTemplate).attr("id",
e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),f.widget("ui.tabs",f.ui.tabs,{_create:function(){var e=this.options;null===e.active&&e.selected!==g&&(e.active=-1===e.selected?!1:e.selected);this._super();e.selected=e.active;!1===e.selected&&(e.selected=-1)},_setOption:function(e,d){if("selected"!==e)return this._super(e,d);var c=this.options;this._super("active",-1===d?!1:d);c.selected=c.active;!1===c.selected&&(c.selected=-1)},_eventHandler:function(e){this._superApply(arguments);
this.options.selected=this.options.active;!1===this.options.selected&&(this.options.selected=-1)}}),f.widget("ui.tabs",f.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,d,c){var b=this._superApply(arguments);if(!b)return!1;"beforeActivate"===e&&c.newTab.length?b=this._super("select",d,{tab:c.newTab.find(".ui-tabs-anchor")[0],
panel:c.newPanel[0],index:c.newTab.closest("li").index()}):"activate"===e&&c.newTab.length&&(b=this._super("show",d,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}));return b}}),f.widget("ui.tabs",f.ui.tabs,{select:function(e){e=this._getIndex(e);if(-1===e)if(this.options.collapsible&&-1!==this.options.selected)e=this.options.selected;else return;this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var e=0;f.widget("ui.tabs",
f.ui.tabs,{options:{cookie:null},_create:function(){var d=this.options,c;null==d.active&&d.cookie&&(c=parseInt(this._cookie(),10),-1===c&&(c=!1),d.active=c);this._super()},_cookie:function(d){var c=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++e)];arguments.length&&(c.push(!1===d?-1:d),c.push(this.options.cookie));return f.cookie.apply(null,c)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(d){this._superApply(arguments);
this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),f.widget("ui.tabs",f.ui.tabs,{_trigger:function(e,d,c){c=f.extend({},c);"load"===e&&(c.panel=c.panel[0],c.tab=c.tab.find(".ui-tabs-anchor")[0]);return this._super(e,d,c)}}),f.widget("ui.tabs",f.ui.tabs,{options:{fx:null},_getFx:function(){var e,d,c=this.options.fx;c&&(f.isArray(c)?(e=c[0],d=c[1]):e=d=c);return c?{show:d,hide:e}:
null},_toggle:function(e,d){function c(){f.running=!1;f._trigger("activate",e,d)}function b(){d.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&a.show?g.animate(a.show,a.show.duration,function(){c()}):(g.show(),c())}var f=this,g=d.newPanel,k=d.oldPanel,a=this._getFx();if(!a)return this._super(e,d);f.running=!0;k.length&&a.hide?k.animate(a.hide,a.hide.duration,function(){d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");b()}):(d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
k.hide(),b())}}))})(g);(function(f){function g(e,l){var d=(e.attr("aria-describedby")||"").split(/\s+/);d.push(l);e.data("ui-tooltip-id",l).attr("aria-describedby",f.trim(d.join(" ")))}function m(e){var l=e.data("ui-tooltip-id"),d=(e.attr("aria-describedby")||"").split(/\s+/),l=f.inArray(l,d);-1!==l&&d.splice(l,1);e.removeData("ui-tooltip-id");(d=f.trim(d.join(" ")))?e.attr("aria-describedby",d):e.removeAttr("aria-describedby")}var k=0;f.widget("ui.tooltip",{version:"1.9.0",options:{content:function(){return f(this).attr("title")},
hide:!0,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={}},_setOption:function(e,l){var d=this;"disabled"===e?(this[l?"_disable":"_enable"](),this.options[e]=l):(this._super(e,l),"content"===e&&f.each(this.tooltips,function(c,b){d._updateContent(b)}))},_disable:function(){var e=this;f.each(this.tooltips,function(l,d){var c=
f.Event("blur");c.target=c.currentTarget=d[0];e.close(c,!0)});this.element.find(this.options.items).andSelf().each(function(){var e=f(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var e=f(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var l=f(e?e.target:this.element).closest(this.options.items);l.length&&(this.options.track&&l.data("ui-tooltip-id")?
(this._find(l).position(f.extend({of:l},this.options.position)),this._off(this.document,"mousemove")):(l.attr("title")&&l.data("ui-tooltip-title",l.attr("title")),l.data("tooltip-open",!0),this._updateContent(l,e)))},_updateContent:function(e,f){var d;d=this.options.content;var c=this;if("string"===typeof d)return this._open(f,e,d);(d=d.call(e[0],function(b){e.data("tooltip-open")&&c._delay(function(){this._open(f,e,b)})}))&&this._open(f,e,d)},_open:function(e,l,d){function c(c){k.of=c;b.position(k)}
var b,k;d&&(b=this._find(l),b.length?b.find(".ui-tooltip-content").html(d):(l.is("[title]")&&(e&&"mouseover"===e.type?l.attr("title",""):l.removeAttr("title")),b=this._tooltip(l),g(l,b.attr("id")),b.find(".ui-tooltip-content").html(d),this.options.track&&e&&/^mouse/.test(e.originalEvent.type)?(k=f.extend({},this.options.position),this._on(this.document,{mousemove:c}),c(e)):b.position(f.extend({of:l},this.options.position)),b.hide(),this._show(b,this.options.show),this._trigger("open",e,{tooltip:b}),
this._on(l,{mouseleave:"close",focusout:"close",keyup:function(b){b.keyCode===f.ui.keyCode.ESCAPE&&(b=f.Event(b),b.currentTarget=l[0],this.close(b,!0))}})))},close:function(e,l){var d=this,c=f(e?e.currentTarget:this.element),b=this._find(c);this.closing||!l&&e&&"focusout"!==e.type&&this.document[0].activeElement===c[0]||(c.data("ui-tooltip-title")&&c.attr("title",c.data("ui-tooltip-title")),m(c),b.stop(!0),this._hide(b,this.options.hide,function(){f(this).remove();delete d.tooltips[this.id]}),c.removeData("tooltip-open"),
this._off(c,"mouseleave focusout keyup"),this._off(this.document,"mousemove"),this.closing=!0,this._trigger("close",e,{tooltip:b}),this.closing=!1)},_tooltip:function(e){var l="ui-tooltip-"+k++,d=f("<div>").attr({id:l,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));f("<div>").addClass("ui-tooltip-content").appendTo(d);d.appendTo(this.document[0].body);f.fn.bgiframe&&d.bgiframe();this.tooltips[l]=e;return d},_find:function(e){return(e=
e.data("ui-tooltip-id"))?f("#"+e):f()},_destroy:function(){var e=this;f.each(this.tooltips,function(l,d){var c=f.Event("blur");c.target=c.currentTarget=d[0];e.close(c,!0);f("#"+l).remove();d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})})(g);g.effects||function(f,n){var m=!1!==f.uiBackCompat;f.effects={effect:{}};(function(g,e){function l(b,c,d){var e=a[c.type]||{};if(null==b)return d||!c.def?null:c.def;b=e.floor?~~b:parseFloat(b);return isNaN(b)?
c.def:e.mod?(b+e.mod)%e.mod:0>b?0:e.max<b?e.max:b}function d(a){var b=n(),c=b._rgba=[];a=a.toLowerCase();x(m,function(d,e){var f,l=e.re.exec(a);f=l&&e.parse(l);l=e.space||"rgba";if(f)return f=b[l](f),b[u[l].cache]=f[u[l].cache],c=b._rgba=f._rgba,!1});return c.length?("0,0,0,0"===c.join()&&g.extend(c,v.transparent),b):v[a]}function c(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var b=/^([\-+])=\s*(\d+\.?\d*)/,m=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],n=g.Color=function(a,b,c,d){return new g.Color.fn.parse(a,b,c,d)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},q=n.support={},t=g("<p>")[0],v,x=g.each;t.style.cssText="background-color:rgba(1,1,1,.5)";
q.rgba=-1<t.style.backgroundColor.indexOf("rgba");x(u,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});n.fn=g.extend(n.prototype,{parse:function(a,b,c,m){if(a===e)return this._rgba=[null,null,null,null],this;if(a.jquery||a.nodeType)a=g(a).css(b),b=e;var q=this,p=g.type(a),t=this._rgba=[];b!==e&&(a=[a,b,c,m],p="array");if("string"===p)return this.parse(d(a)||v._default);if("array"===p)return x(u.rgba.props,function(b,c){t[c.idx]=l(a[c.idx],c)}),this;if("object"===p)return a instanceof
n?x(u,function(b,c){a[c.cache]&&(q[c.cache]=a[c.cache].slice())}):x(u,function(b,c){var d=c.cache;x(c.props,function(b,e){if(!q[d]&&c.to){if("alpha"===b||null==a[b])return;q[d]=c.to(q._rgba)}q[d][e.idx]=l(a[b],e,!0)});q[d]&&0>f.inArray(null,q[d].slice(0,3))&&(q[d][3]=1,c.from&&(q._rgba=c.from(q[d])))}),this},is:function(a){var b=n(a),c=!0,d=this;x(u,function(a,e){var f,l=b[e.cache];l&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],x(e.props,function(a,b){if(null!=l[b.idx])return c=l[b.idx]===f[b.idx]}));
return c});return c},_space:function(){var a=[],b=this;x(u,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(b,c){var d=n(b),e=d._space(),f=u[e],g=0===this.alpha()?n("transparent"):this,k=g[f.cache]||f.to(g._rgba),m=k.slice(),d=d[f.cache];x(f.props,function(b,e){var f=e.idx,g=k[f],n=d[f],q=a[e.type]||{};null!==n&&(null===g?m[f]=n:(q.mod&&(n-g>q.mod/2?g+=q.mod:g-n>q.mod/2&&(g-=q.mod)),m[f]=l((n-g)*c+g,e)))});return this[e](m)},blend:function(a){if(1===this._rgba[3])return this;
var b=this._rgba.slice(),c=b.pop(),d=n(a)._rgba;return n(g.map(b,function(a,b){return(1-c)*d[b]+c*a}))},toRgbaString:function(){var a="rgba(",b=g.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===b[3]&&(b.pop(),a="rgb(");return a+b.join()+")"},toHslaString:function(){var a="hsla(",b=g.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===b[3]&&(b.pop(),a="hsl(");return a+b.join()+")"},toHexString:function(a){var b=this._rgba.slice(),c=b.pop();
a&&b.push(~~(255*c));return"#"+g.map(b,function(a,b){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});n.fn.parse.prototype=n.fn;u.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(b,c,d),f=Math.min(b,c,d),l=e-f,g=e+f,k=0.5*g,g=0===k||1===k?k:0.5>=k?l/g:l/(2-g);return[Math.round(f===e?0:b===e?60*(c-d)/l+360:c===
e?60*(d-b)/l+120:60*(b-c)/l+240)%360,g,k,null==a?1:a]};u.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,d=a[1],e=a[2];a=a[3];d=0.5>=e?e*(1+d):e+d-e*d;e=2*e-d;return[Math.round(255*c(e,d,b+1/3)),Math.round(255*c(e,d,b)),Math.round(255*c(e,d,b-1/3)),a]};x(u,function(a,c){var d=c.props,f=c.cache,m=c.to,q=c.from;n.fn[a]=function(a){m&&!this[f]&&(this[f]=m(this._rgba));if(a===e)return this[f].slice();var b,c=g.type(a),p="array"===c||"object"===c?
a:arguments,t=this[f].slice();x(d,function(a,b){var d=p["object"===c?a:b.idx];null==d&&(d=t[b.idx]);t[b.idx]=l(d,b)});return q?(b=n(q(t)),b[f]=t,b):n(t)};x(d,function(c,d){n.fn[c]||(n.fn[c]=function(e){var f=g.type(e),l="alpha"===c?this._hsla?"hsla":"rgba":a,m=this[l](),n=m[d.idx];if("undefined"===f)return n;"function"===f&&(e=e.call(this,n),f=g.type(e));if(null==e&&d.empty)return this;"string"===f&&(f=b.exec(e))&&(e=n+parseFloat(f[2])*("+"===f[1]?1:-1));m[d.idx]=e;return this[l](m)})})});x("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),
function(a,b){g.cssHooks[b]={set:function(a,c){var e,f="";if("string"!==g.type(c)||(e=d(c))){c=n(e||c);if(!q.rgba&&1!==c._rgba[3]){for(e="backgroundColor"===b?a.parentNode:a;(""===f||"transparent"===f)&&e&&e.style;)try{f=g.css(e,"backgroundColor"),e=e.parentNode}catch(l){}c=c.blend(f&&"transparent"!==f?f:"_default")}c=c.toRgbaString()}try{a.style[b]=c}catch(m){}}};g.fx.step[b]=function(a){a.colorInit||(a.start=n(a.elem,b),a.end=n(a.end),a.colorInit=!0);g.cssHooks[b].set(a.elem,a.start.transition(a.end,
a.pos))}});g.cssHooks.borderColor={expand:function(a){var b={};x(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a});return b}};v=g.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(g);(function(){function k(){var d=
this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,c={},b,e;if(d&&d.length&&d[0]&&d[d[0]])for(e=d.length;e--;)b=d[e],"string"===typeof d[b]&&(c[f.camelCase(b)]=d[b]);else for(b in d)"string"===typeof d[b]&&(c[b]=d[b]);return c}var e=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};f.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],
function(d,c){f.fx.step[c]=function(b){if("none"!==b.end&&!b.setAttr||1===b.pos&&!b.setAttr)g.style(b.elem,c,b.end),b.setAttr=!0}});f.effects.animateClass=function(d,c,b,m){var n=f.speed(c,b,m);return this.queue(function(){var b=f(this),a=b.attr("class")||"",c,m=n.children?b.find("*").andSelf():b,m=m.map(function(){return{el:f(this),start:k.call(this)}});c=function(){f.each(e,function(a,c){if(d[c])b[c+"Class"](d[c])})};c();m=m.map(function(){this.end=k.call(this.el[0]);var a=this.start,b=this.end,
c={},d,e;for(d in b)e=b[d],a[d]===e||l[d]||!f.fx.step[d]&&isNaN(parseFloat(e))||(c[d]=e);this.diff=c;return this});b.attr("class",a);m=m.map(function(){var a=this,b=f.Deferred(),c=g.extend({},n,{queue:!1,complete:function(){b.resolve(a)}});this.el.animate(this.diff,c);return b.promise()});f.when.apply(f,m.get()).done(function(){c();f.each(arguments,function(){var a=this.el;f.each(this.diff,function(b){a.css(b,"")})});n.complete.call(b[0])})})};f.fn.extend({_addClass:f.fn.addClass,addClass:function(d,
c,b,e){return c?f.effects.animateClass.call(this,{add:d},c,b,e):this._addClass(d)},_removeClass:f.fn.removeClass,removeClass:function(d,c,b,e){return c?f.effects.animateClass.call(this,{remove:d},c,b,e):this._removeClass(d)},_toggleClass:f.fn.toggleClass,toggleClass:function(d,c,b,e,l){return"boolean"===typeof c||c===n?b?f.effects.animateClass.call(this,c?{add:d}:{remove:d},b,e,l):this._toggleClass(d,c):f.effects.animateClass.call(this,{toggle:d},c,b,e)},switchClass:function(d,c,b,e,l){return f.effects.animateClass.call(this,
{add:c,remove:d},b,e,l)}})})();(function(){function g(e,d,c,b){f.isPlainObject(e)&&(d=e,e=e.effect);e={effect:e};d===n&&(d={});f.isFunction(d)&&(b=d,c=null,d={});if("number"===typeof d||f.fx.speeds[d])b=c,c=d,d={};f.isFunction(c)&&(b=c,c=null);d&&f.extend(e,d);c=c||d.duration;e.duration=f.fx.off?0:"number"===typeof c?c:c in f.fx.speeds?f.fx.speeds[c]:f.fx.speeds._default;e.complete=b||d.complete;return e}function e(e){return!e||"number"===typeof e||f.fx.speeds[e]?!0:"string"!==typeof e||f.effects.effect[e]?
!1:m&&f.effects[e]?!1:!0}f.extend(f.effects,{version:"1.9.0",save:function(e,d){for(var c=0;c<d.length;c++)null!==d[c]&&e.data("ui-effects-"+d[c],e[0].style[d[c]])},restore:function(e,d){var c,b;for(b=0;b<d.length;b++)null!==d[b]&&(c=e.data("ui-effects-"+d[b]),c===n&&(c=""),e.css(d[b],c))},setMode:function(e,d){"toggle"===d&&(d=e.is(":hidden")?"show":"hide");return d},getBaseline:function(e,d){var c,b;switch(e[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=e[0]/
d.height}switch(e[1]){case "left":b=0;break;case "center":b=0.5;break;case "right":b=1;break;default:b=e[1]/d.width}return{x:b,y:c}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var d={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},c=f("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),b={width:e.width(),height:e.height()},g=document.activeElement;try{g.id}catch(k){g=
document.body}e.wrap(c);(e[0]===g||f.contains(e[0],g))&&f(g).focus();c=e.parent();"static"===e.css("position")?(c.css({position:"relative"}),e.css({position:"relative"})):(f.extend(d,{position:e.css("position"),zIndex:e.css("z-index")}),f.each(["top","left","bottom","right"],function(b,a){d[a]=e.css(a);isNaN(parseInt(d[a],10))&&(d[a]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));e.css(b);return c.css(d).show()},removeWrapper:function(e){var d=document.activeElement;
e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===d||f.contains(e[0],d))&&f(d).focus());return e},setTransition:function(e,d,c,b){b=b||{};f.each(d,function(d,f){var g=e.cssUnit(f);0<g[0]&&(b[f]=g[0]*c+g[1])});return b}});f.fn.extend({effect:function(e,d,c,b){function n(a){function b(){f.isFunction(d)&&d.call(c[0]);f.isFunction(a)&&a()}var c=f(this),d=r.complete,e=r.mode;(c.is(":hidden")?"hide"===e:"show"===e)?b():q.call(c[0],r,b)}var r=g.apply(this,arguments),u=r.mode,a=r.queue,
q=f.effects.effect[r.effect],t=!q&&m&&f.effects[r.effect];return f.fx.off||!q&&!t?u?this[u](r.duration,r.complete):this.each(function(){r.complete&&r.complete.call(this)}):q?!1===a?this.each(n):this.queue(a||"fx",n):t.call(this,{options:r,duration:r.duration,callback:r.complete,mode:r.mode})},_show:f.fn.show,show:function(f){if(e(f))return this._show.apply(this,arguments);var d=g.apply(this,arguments);d.mode="show";return this.effect.call(this,d)},_hide:f.fn.hide,hide:function(f){if(e(f))return this._hide.apply(this,
arguments);var d=g.apply(this,arguments);d.mode="hide";return this.effect.call(this,d)},__toggle:f.fn.toggle,toggle:function(l){if(e(l)||"boolean"===typeof l||f.isFunction(l))return this.__toggle.apply(this,arguments);var d=g.apply(this,arguments);d.mode="toggle";return this.effect.call(this,d)},cssUnit:function(e){var d=this.css(e),c=[];f.each(["em","px","%","pt"],function(b,e){0<d.indexOf(e)&&(c=[parseFloat(d),e])});return c}})})();(function(){var g={};f.each(["Quad","Cubic","Quart","Quint","Expo"],
function(e,f){g[f]=function(d){return Math.pow(d,e+2)}});f.extend(g,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var f,d=4;e<((f=Math.pow(2,--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((3*f-2)/22-e,2)}});f.each(g,function(e,l){f.easing["easeIn"+e]=l;f.easing["easeOut"+e]=function(d){return 1-
l(1-d)};f.easing["easeInOut"+e]=function(d){return 0.5>d?l(2*d)/2:1-l(-2*d+2)/2}})})()}(g);(function(f,g){var m=/up|down|vertical/,k=/up|left|vertical|horizontal/;f.effects.effect.blind=function(e,l){var d=f(this),c="position top bottom left right height width".split(" "),b=f.effects.setMode(d,e.mode||"hide"),g=e.direction||"up",n=m.test(g),u=n?"height":"width",a=n?"top":"left",g=k.test(g),q={},t="show"===b,v,x,C;d.parent().is(".ui-effects-wrapper")?f.effects.save(d.parent(),c):f.effects.save(d,c);
d.show();v=f.effects.createWrapper(d).css({overflow:"hidden"});x=v[u]();C=parseFloat(v.css(a))||0;q[u]=t?x:0;g||(d.css(n?"bottom":"right",0).css(n?"top":"left","auto").css({position:"absolute"}),q[a]=t?C:x+C);t&&(v.css(u,0),g||v.css(a,C+x));v.animate(q,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===b&&d.hide();f.effects.restore(d,c);f.effects.removeWrapper(d);l()}})}})(g);(function(f,g){f.effects.effect.bounce=function(g,k){var e=f(this),l="position top bottom left right height width".split(" "),
d=f.effects.setMode(e,g.mode||"effect"),c="hide"===d,b="show"===d,n=g.direction||"up",d=g.distance,r=g.times||5,u=2*r+(b||c?1:0),a=g.duration/u,q=g.easing,t="up"===n||"down"===n?"top":"left",n="up"===n||"left"===n,v,x,C=e.queue(),y=C.length;(b||c)&&l.push("opacity");f.effects.save(e,l);e.show();f.effects.createWrapper(e);d||(d=e["top"===t?"outerHeight":"outerWidth"]()/3);b&&(x={opacity:1},x[t]=0,e.css("opacity",0).css(t,n?2*-d:2*d).animate(x,a,q));c&&(d/=Math.pow(2,r-1));x={};for(b=x[t]=0;b<r;b++)v=
{},v[t]=(n?"-=":"+=")+d,e.animate(v,a,q).animate(x,a,q),d=c?2*d:d/2;c&&(v={opacity:0},v[t]=(n?"-=":"+=")+d,e.animate(v,a,q));e.queue(function(){c&&e.hide();f.effects.restore(e,l);f.effects.removeWrapper(e);k()});1<y&&C.splice.apply(C,[1,0].concat(C.splice(y,u+1)));e.dequeue()}})(g);(function(f,g){f.effects.effect.clip=function(g,k){var e=f(this),l="position top bottom left right height width".split(" "),d="show"===f.effects.setMode(e,g.mode||"hide"),c="vertical"===(g.direction||"vertical"),b=c?"height":
"width",c=c?"top":"left",n={},r,u;f.effects.save(e,l);e.show();r=f.effects.createWrapper(e).css({overflow:"hidden"});r="IMG"===e[0].tagName?r:e;u=r[b]();d&&(r.css(b,0),r.css(c,u/2));n[b]=d?u:0;n[c]=d?0:u/2;r.animate(n,{queue:!1,duration:g.duration,easing:g.easing,complete:function(){d||e.hide();f.effects.restore(e,l);f.effects.removeWrapper(e);k()}})}})(g);(function(f,g){f.effects.effect.drop=function(g,k){var e=f(this),l="position top bottom left right opacity height width".split(" "),d=f.effects.setMode(e,
g.mode||"hide"),c="show"===d,b=g.direction||"left",n="up"===b||"down"===b?"top":"left",b="up"===b||"left"===b?"pos":"neg",r={opacity:c?1:0},u;f.effects.save(e,l);e.show();f.effects.createWrapper(e);u=g.distance||e["top"===n?"outerHeight":"outerWidth"](!0)/2;c&&e.css("opacity",0).css(n,"pos"===b?-u:u);r[n]=(c?"pos"===b?"+=":"-=":"pos"===b?"-=":"+=")+u;e.animate(r,{queue:!1,duration:g.duration,easing:g.easing,complete:function(){"hide"===d&&e.hide();f.effects.restore(e,l);f.effects.removeWrapper(e);
k()}})}})(g);(function(f,g){f.effects.effect.explode=function(g,k){function e(){a.push(this);a.length===l*d&&(c.css({visibility:"visible"}),f(a).remove(),b||c.hide(),k())}var l=g.pieces?Math.round(Math.sqrt(g.pieces)):3,d=l,c=f(this),b="show"===f.effects.setMode(c,g.mode||"hide"),n=c.show().css("visibility","hidden").offset(),r=Math.ceil(c.outerWidth()/d),u=Math.ceil(c.outerHeight()/l),a=[],q,t,v,x,C,y;for(q=0;q<l;q++)for(x=n.top+q*u,y=q-(l-1)/2,t=0;t<d;t++)v=n.left+t*r,C=t-(d-1)/2,c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-t*r,top:-q*u}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:u,left:v+(b?C*r:0),top:x+(b?y*u:0),opacity:b?0:1}).animate({left:v+(b?0:C*r),top:x+(b?0:y*u),opacity:b?1:0},g.duration||500,g.easing,e)}})(g);(function(f,g){f.effects.effect.fade=function(g,k){var e=f(this),l=f.effects.setMode(e,g.mode||"toggle");e.animate({opacity:l},{queue:!1,duration:g.duration,easing:g.easing,complete:k})}})(g);(function(f,g){f.effects.effect.fold=
function(g,k){var e=f(this),l="position top bottom left right height width".split(" "),d=f.effects.setMode(e,g.mode||"hide"),c="show"===d,b="hide"===d,d=g.size||15,n=/([0-9]+)%/.exec(d),r=!!g.horizFirst,u=c!==r,a=u?["width","height"]:["height","width"],q=g.duration/2,t,v={},x={};f.effects.save(e,l);e.show();t=f.effects.createWrapper(e).css({overflow:"hidden"});u=u?[t.width(),t.height()]:[t.height(),t.width()];n&&(d=parseInt(n[1],10)/100*u[b?0:1]);c&&t.css(r?{height:0,width:d}:{height:d,width:0});
v[a[0]]=c?u[0]:d;x[a[1]]=c?u[1]:0;t.animate(v,q,g.easing).animate(x,q,g.easing,function(){b&&e.hide();f.effects.restore(e,l);f.effects.removeWrapper(e);k()})}})(g);(function(f,g){f.effects.effect.highlight=function(g,k){var e=f(this),l=["backgroundImage","backgroundColor","opacity"],d=f.effects.setMode(e,g.mode||"show"),c={backgroundColor:e.css("backgroundColor")};"hide"===d&&(c.opacity=0);f.effects.save(e,l);e.show().css({backgroundImage:"none",backgroundColor:g.color||"#ffff99"}).animate(c,{queue:!1,
duration:g.duration,easing:g.easing,complete:function(){"hide"===d&&e.hide();f.effects.restore(e,l);k()}})}})(g);(function(f,g){f.effects.effect.pulsate=function(g,k){var e=f(this),l=f.effects.setMode(e,g.mode||"show"),d="show"===l,c="hide"===l,l=2*(g.times||5)+(d||"hide"===l?1:0),b=g.duration/l,n=0,r=e.queue(),u=r.length;if(d||!e.is(":visible"))e.css("opacity",0).show(),n=1;for(d=1;d<l;d++)e.animate({opacity:n},b,g.easing),n=1-n;e.animate({opacity:n},b,g.easing);e.queue(function(){c&&e.hide();k()});
1<u&&r.splice.apply(r,[1,0].concat(r.splice(u,l+1)));e.dequeue()}})(g);(function(f,g){f.effects.effect.puff=function(g,k){var e=f(this),l=f.effects.setMode(e,g.mode||"hide"),d="hide"===l,c=parseInt(g.percent,10)||150,b=c/100,n={height:e.height(),width:e.width()};f.extend(g,{effect:"scale",queue:!1,fade:!0,mode:l,complete:k,percent:d?c:100,from:d?n:{height:n.height*b,width:n.width*b}});e.effect(g)};f.effects.effect.scale=function(g,k){var e=f(this),l=f.extend(!0,{},g),d=f.effects.setMode(e,g.mode||
"effect"),c=parseInt(g.percent,10)||(0===parseInt(g.percent,10)?0:"hide"===d?0:100),b=g.direction||"both",n=g.origin,r={height:e.height(),width:e.width(),outerHeight:e.outerHeight(),outerWidth:e.outerWidth()},u="horizontal"!==b?c/100:1,c="vertical"!==b?c/100:1;l.effect="size";l.queue=!1;l.complete=k;"effect"!==d&&(l.origin=n||["middle","center"],l.restore=!0);l.from=g.from||("show"===d?{height:0,width:0}:r);l.to={height:r.height*u,width:r.width*c,outerHeight:r.outerHeight*u,outerWidth:r.outerWidth*
c};l.fade&&("show"===d&&(l.from.opacity=0,l.to.opacity=1),"hide"===d&&(l.from.opacity=1,l.to.opacity=0));e.effect(l)};f.effects.effect.size=function(g,k){var e,l,d,c,b=f(this),n="position top bottom left right width height overflow opacity".split(" "),r="position top bottom left right overflow opacity".split(" "),u=["width","height","overflow"],a=["fontSize"],q=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],t=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
v=f.effects.setMode(b,g.mode||"effect"),x=g.restore||"effect"!==v,C=g.scale||"both",y=g.origin||["middle","center"],z,D=b.css("position");"show"===v&&b.show();z={height:b.height(),width:b.width(),outerHeight:b.outerHeight(),outerWidth:b.outerWidth()};b.from=g.from||z;b.to=g.to||z;d=b.from.height/z.height;c=b.from.width/z.width;e=b.to.height/z.height;l=b.to.width/z.width;if("box"===C||"both"===C)d!==e&&(n=n.concat(q),b.from=f.effects.setTransition(b,q,d,b.from),b.to=f.effects.setTransition(b,q,e,b.to)),
c!==l&&(n=n.concat(t),b.from=f.effects.setTransition(b,t,c,b.from),b.to=f.effects.setTransition(b,t,l,b.to));"content"!==C&&"both"!==C||d===e||(n=n.concat(a),b.from=f.effects.setTransition(b,a,d,b.from),b.to=f.effects.setTransition(b,a,e,b.to));f.effects.save(b,x?n:r);b.show();f.effects.createWrapper(b);b.css("overflow","hidden").css(b.from);y&&(y=f.effects.getBaseline(y,z),b.from.top=(z.outerHeight-b.outerHeight())*y.y,b.from.left=(z.outerWidth-b.outerWidth())*y.x,b.to.top=(z.outerHeight-b.to.outerHeight)*
y.y,b.to.left=(z.outerWidth-b.to.outerWidth)*y.x);b.css(b.from);if("content"===C||"both"===C)q=q.concat(["marginTop","marginBottom"]).concat(a),t=t.concat(["marginLeft","marginRight"]),u=n.concat(q).concat(t),b.find("*[width]").each(function(){var a=f(this),b=a.height(),k=a.width();x&&f.effects.save(a,u);a.from={height:b*d,width:k*c};a.to={height:b*e,width:k*l};d!==e&&(a.from=f.effects.setTransition(a,q,d,a.from),a.to=f.effects.setTransition(a,q,e,a.to));c!==l&&(a.from=f.effects.setTransition(a,t,
c,a.from),a.to=f.effects.setTransition(a,t,l,a.to));a.css(a.from);a.animate(a.to,g.duration,g.easing,function(){x&&f.effects.restore(a,u)})});b.animate(b.to,{queue:!1,duration:g.duration,easing:g.easing,complete:function(){0===b.to.opacity&&b.css("opacity",b.from.opacity);"hide"===v&&b.hide();f.effects.restore(b,x?n:r);x||("static"===D?b.css({position:"relative",top:b.to.top,left:b.to.left}):f.each(["top","left"],function(a,c){b.css(c,function(c,d){var e=parseInt(d,10),f=a?b.to.left:b.to.top;return"auto"===
d?f+"px":e+f+"px"})}));f.effects.removeWrapper(b);k()}})}})(g);(function(f,g){f.effects.effect.shake=function(g,k){var e=f(this),l="position top bottom left right height width".split(" "),d=f.effects.setMode(e,g.mode||"effect"),c=g.direction||"left",b=g.distance||20,n=g.times||3,r=2*n+1,u=Math.round(g.duration/r),a="up"===c||"down"===c?"top":"left",q="up"===c||"left"===c,c={},t={},v={},x=e.queue(),C=x.length;f.effects.save(e,l);e.show();f.effects.createWrapper(e);c[a]=(q?"-=":"+=")+b;t[a]=(q?"+=":
"-=")+2*b;v[a]=(q?"-=":"+=")+2*b;e.animate(c,u,g.easing);for(b=1;b<n;b++)e.animate(t,u,g.easing).animate(v,u,g.easing);e.animate(t,u,g.easing).animate(c,u/2,g.easing).queue(function(){"hide"===d&&e.hide();f.effects.restore(e,l);f.effects.removeWrapper(e);k()});1<C&&x.splice.apply(x,[1,0].concat(x.splice(C,r+1)));e.dequeue()}})(g);(function(f,g){f.effects.effect.slide=function(g,k){var e=f(this),l="position top bottom left right width height".split(" "),d=f.effects.setMode(e,g.mode||"show"),c="show"===
d,b=g.direction||"left",n="up"===b||"down"===b?"top":"left",b="up"===b||"left"===b,r,u={};f.effects.save(e,l);e.show();r=g.distance||e["top"===n?"outerHeight":"outerWidth"](!0);f.effects.createWrapper(e).css({overflow:"hidden"});c&&e.css(n,b?isNaN(r)?"-"+r:-r:r);u[n]=(c?b?"+=":"-=":b?"-=":"+=")+r;e.animate(u,{queue:!1,duration:g.duration,easing:g.easing,complete:function(){"hide"===d&&e.hide();f.effects.restore(e,l);f.effects.removeWrapper(e);k()}})}})(g);(function(f,g){f.effects.effect.transfer=
function(g,k){var e=f(this),l=f(g.to),d="fixed"===l.css("position"),c=f("body"),b=d?c.scrollTop():0,c=d?c.scrollLeft():0,n=l.offset(),l={top:n.top-b,left:n.left-c,height:l.innerHeight(),width:l.innerWidth()},n=e.offset(),r=f('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(g.className).css({top:n.top-b,left:n.left-c,height:e.innerHeight(),width:e.innerWidth(),position:d?"fixed":"absolute"}).animate(l,g.duration,g.easing,function(){r.remove();k()})}})(g)});
define(["aloha/core","jquery","util/class"],function(g,f,n){var m=0;return n.extend({id:0,isInstance:!0,container:null,type:null,visible:!0,_constructor:function(){this.id=m++;this.init()},adoptParent:function(f){this.container=f},init:function(){},isVisible:function(){return this.visible},show:function(f){!1===f?this.hide():this.visible||(this.visible=!0,this.element.show(),this.container&&this.container.childVisible(this,!0))},hide:function(){this.visible&&(this.visible=!1,this.element.hide(),this.container&&
this.container.childVisible(this,!1))},focus:function(){this.element.focus();this.container&&this.container.childFocus(this)},foreground:function(){this.container&&this.container.childForeground(this)},enable:function(f){},disable:function(){}})});
define("aloha/core jquery ui/container ui/component PubSub jqueryui".split(" "),function(g,f,n,m,k){var e=0,l={};g=n.extend({_elemBySlot:null,_groupBySlot:null,_groupByComponent:null,_constructor:function(d,c,b){var g,l,k,a,m;this._elemBySlot={};this._groupBySlot={};this._groupByComponent={};this._super(d,c);this.container=c.container;this.list=this.container.data("list");this.panels=this.container.data("panels");this.id="tab-ui-container-"+ ++e;this.panel=f("<div>",{id:this.id,unselectable:"on"});
this.handle=f('<li><a href="'+location.href.replace(/#.*$/,"")+"#"+this.id+'">'+c.label+"</a></li>");for(d=0;d<b.length;d++)if("string"===typeof b[d])1===b[d].length&&10===b[d].charCodeAt(0)?this.panel.append("<div>",{unselectable:"on"}):(l=f("<span>",{unselectable:"on"}),this._elemBySlot[b[d]]=l,this.panel.append(l));else for(a=f("<div>",{"class":"aloha-ui-component-group aloha-ui-hidden",unselectable:"on"}).appendTo(this.panel),m={element:a,visibleCounter:0},k=b[d],g=0;g<k.length;g++)this._groupBySlot[k[g]]=
m,k[g]&&1===k[g].length&&10===k[g].charCodeAt(0)?a.append(f("<div>",{unselectable:"on"})):(l=f("<span>",{unselectable:"on"}),this._elemBySlot[k[g]]=l,a.append(l));this.panel.append(f("<div>",{"class":"aloha-ui-clear",unselectable:"on"}));this.handle.appendTo(this.list);this.panel.appendTo(this.panels);this.container.tabs("refresh");c=c.container.data("aloha-tabs");this.index=c.length;c.push(this)},adoptInto:function(d,c){var b=this._elemBySlot[d];if(!b)return!1;l[d]=c;c.adoptParent(this);b.append(c.element);
if(b=this._groupBySlot[d])this._groupByComponent[c.id]=b,c.isVisible()&&(b.visibleCounter||b.element.removeClass("aloha-ui-hidden"),b.visibleCounter+=1);return!0},foreground:function(){this.container.tabs("select",this.index)},childForeground:function(d){this.foreground()},hasVisibleComponents:function(){var d=this._elemBySlot,c;for(c in d)if(d.hasOwnProperty(c)&&l[c]&&l[c].visible)return!0;return!1},childVisible:function(d,c){c?d.container.show():d.container.hasVisibleComponents()||d.container.hide();
var b=this._groupByComponent[d.id];b&&(c?(0===b.visibleCounter&&b.element.removeClass("aloha-ui-hidden"),b.visibleCounter+=1):(b.visibleCounter-=1,0===b.visibleCounter&&b.element.addClass("aloha-ui-hidden")))},show:function(){this.list.children().length&&(this.handle.show(),this.visible=!0,this.container.show(),this.container.find(".ui-tabs-active").length&&this.container.tabs("option","selected")!==this.index||this.foreground())},hide:function(){var d=this.list.children();if(0!==d.length&&(this.handle.hide(),
this.visible=!1,this.index===this.container.tabs("option","selected"))){var d=this.container.data("aloha-tabs"),c;for(c=0;c<d.length;++c)if(d[c].visible){this.container.tabs("select",c);return}this.handle.removeClass("ui-tabs-active");this.container.hide()}}});f.extend(g,{createContainer:function(){var d=f("<div>",{unselectable:"on"}),c=f("<ul>",{unselectable:"on"}).appendTo(d),b=f("<div>",{unselectable:"on"}).appendTo(d);d.data("list",c).data("panels",b).data("aloha-tabs",[]).tabs({select:function(b,
c){var e=d.data("aloha-tabs");d.data("aloha-active-container",e[c.index]);k.pub("aloha.ui.container.selected",{data:e[c.index]})}});return d}});return g});
(function(){function g(f,e,g,d,c,b){e[f]&&(g.push(f),!0!==e[f]&&1!==e[f]||d.push(c+f+"/"+b))}function f(f,e,g,d,c){e=d+e+"/"+c;require._fileExists(f.toUrl(e))&&g.push(e)}function n(f,e,g){for(var d in e)!e.hasOwnProperty(d)||f.hasOwnProperty(d)&&!g?"object"===typeof e[d]&&n(f[d],e[d],g):f[d]=e[d]}var m=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define(["module"],function(k){var e=k.config();return{version:"2.0.1",load:function(l,d,c,b){b=b||{};b.locale&&(e.locale=b.locale);var k=m.exec(l),r=k[1],u=
k[4],a=k[5],q=u.split("-"),t=[],v={},x,C="";k[5]?(r=k[1],l=r+a):(a=k[4],u=e.locale,u||(u=e.locale="undefined"===typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),q=u.split("-"));if(b.isBuild){t.push(l);f(d,"root",t,r,a);for(x=0;x<q.length;x++)b=q[x],C+=(C?"-":"")+b,f(d,C,t,r,a);d(t,function(){c()})}else d([l],function(b){var e=[],f;g("root",b,e,t,r,a);for(x=0;x<q.length;x++)f=q[x],C+=(C?"-":"")+f,g(C,b,e,t,r,a);d(t,function(){var f,g,l;for(f=e.length-1;-1<
f&&e[f];f--){l=e[f];g=b[l];if(!0===g||1===g)g=d(r+l+"/"+a);n(v,g)}v.t=function(a,b){return this[a]?this[a]:b?b:a};c(v)})})}}})})();
define("jquery aloha/core ui/surface ui/tab ui/floating ui/context i18n!ui/nls/i18n jqueryui".split(" "),function(g,f,n,m,k,e,l){var d=n.extend({_moveTimeout:null,$_container:null,_tabBySlot:null,_tabs:[],_constructor:function(c,b){var e,f,n,a;this._super(c);this.$element=g("<div>",{"class":"aloha-ui aloha-ui-toolbar",unselectable:"on"});this.$_container=m.createContainer().appendTo(this.$element);this._tabBySlot={};for(n=0;n<b.length;n++){e=b[n];f=new m(c,{label:l.t(e.label,e.label),showOn:e.showOn,
container:this.$_container},e.components);for(a in f._elemBySlot)f._elemBySlot.hasOwnProperty(a)&&(this._tabBySlot[a]=f);this._tabs.push({tab:f,settings:e})}k.makeFloating(this,d)},adoptInto:function(c,b){var d=this._tabBySlot[c];return d&&d.adoptInto(c,b)},getActiveContainer:function(){return this.$_container.data("aloha-active-container")},getContainers:function(){return this.$_container.data("aloha-tabs")},_move:function(c){var b=this;b._moveTimeout&&clearTimeout(b._moveTimeout);b._moveTimeout=
setTimeout(function(){b._moveTimeout=null;f.activeEditable&&d.isFloatingMode&&k.floatSurface(b,f.activeEditable,c,d.setFloatingPosition)},20)},addPin:function(){var c=g('<div class="aloha-ui-pin">'),b=this.$element;b.find(".ui-tabs").append(c);b.find(".ui-tabs").hover(function(){b.addClass("aloha-ui-hover")},function(){b.removeClass("aloha-ui-hover")});d.isFloatingMode||c.addClass("aloha-ui-pin-down");var e=this;c.click(function(){d.isFloatingMode=!d.isFloatingMode;var b;d.isFloatingMode?b={top:d.pinTop,
left:d.pinLeft}:(b=e.$element.offset(),b.top-=g(window).scrollTop());d.setFloatingPosition(b);k.togglePinSurface(e,b,d.isFloatingMode)})},show:function(){d.$surfaceContainer.children().detach();d.$surfaceContainer.append(this.$element);d.$surfaceContainer.stop().fadeTo(200,1);var c=d.getFloatingPosition();this.$element.stop().css({top:c.top,left:c.left});this._move()},hide:function(){d.$surfaceContainer.stop().fadeOut(200,function(){d.$surfaceContainer.children().detach()})}});g.extend(d,{$surfaceContainer:null,
isFloatingMode:!0,pinLeft:0,pinTop:0,init:function(){d.$surfaceContainer=g("<div>",{"class":"aloha aloha-surface aloha-toolbar",unselectable:"on"}).hide();g(function(){d.$surfaceContainer.appendTo("body")});n.trackRange(d.$surfaceContainer);var c=k.getPinState();d.pinTop=c.top;d.pinLeft=c.left;d.isFloatingMode=!c.isPinned},setFloatingPosition:function(c){d.pinTop=c.top;d.pinLeft=c.left},getFloatingPosition:function(){return{top:d.pinTop,left:d.pinLeft}}});d.init();return d});
define(["aloha/core","jquery","util/class","ui/container"],function(g,f,n,m){var k=n.extend({_constructor:function(e){e.surfaces.push(this)},isActive:function(){return!0}});f.extend(k,{range:null,show:function(e){f.each(e.surfaces,function(e,d){d.show()})},hide:function(e){f.each(e.surfaces,function(e,d){d.hide()})},trackRange:function(e){e.bind("mousedown",function(e){e.originalEvent.stopSelectionUpdate=!0;g.eventHandled=!0;k.suppressHide=!0;g.activeEditable&&(e=g.getSelection(),k.range=0<e.getRangeCount()?
e.getRangeAt(0):null)});e.bind("mouseup",function(e){e.originalEvent.stopSelectionUpdate=!0;g.eventHandled=!1;k.suppressHide=!1})}});return k});
define(["jquery","PubSub","util/maps"],function(g,f,n){function m(b,c){if(k.hasOwnProperty(c))for(var d=k[c],e=0;e<d.length;e++){var a=d[e];b.push(a);m(b,a)}}var k={"Aloha.empty":[],"Aloha.global":["Aloha.empty"],"Aloha.continuoustext":["Aloha.global"]},e=[],l={},d=!1;Aloha.bind("aloha-selection-changed-before",function(){d=!1});Aloha.bind("aloha-selection-changed-after",function(b,e,f){"undefined"===typeof f||d||c.setScope("Aloha.continuoustext")});var c={enterScope:function(b,c){c=c||"_globalCounter";
var d=l[b];d||(d=l[b]={});var e=d[c]||0;d[c]=e+1;e||f.pub("aloha.ui.scope.change")},leaveScope:function(b,c,d){c=c||"_globalCounter";var e=l[b];if(e){var a=e[c];a&&((a-=1)&&!d?e[c]=a:(delete e[c],n.isEmpty(e)&&delete l[b],f.pub("aloha.ui.scope.change")))}},isActiveScope:function(b){return l[b]||-1!==g.inArray(b,e)?!0:!1},getPrimaryScope:function(){return e[0]},setScope:function(b){d=!0;e[0]!=b&&(e=[b],m(e,b),f.pub("aloha.ui.scope.change"))},createScope:function(b,c){c?"string"===typeof c&&(c=[c]):
c=["Aloha.empty"];k[b]=c}};return c});
define(["jquery","util/class","ui/scopes"],function(g,f,n){function m(d,c){switch(g.type(c)){case "function":return c;case "object":if(c.scope)return e[c.scope]?e[c.scope]:e[c.scope]=function(){return n.isActiveScope(c.scope)};throw"Invalid showOn configuration";default:return l}}var k=0,e={},l=function(){return!0};f=f.extend({element:null,_constructor:function(d,c){var b=m(this,c.showOn),e;b.showOnId||(b.showOnId=++k);e=b.showOnId;var f=d.containers[e];this.context=d;f||(f=d.containers[e]={shouldShow:b,
containers:[]});f.containers.push(this)},show:function(){},hide:function(){},focus:function(){},foreground:function(){},childVisible:function(d,c){},childFocus:function(d){},childForeground:function(d){}});g.extend(f,{showContainersForContext:function(d,c){var b,e,f;if(d.containers)for(e in f=d.containers,f)if(f.hasOwnProperty(e)){b=f[e];var g=b.containers;b=b.shouldShow(c)?"show":"hide";for(var a=void 0,a=0;a<g.length;a++)g[a][b]()}}});return f});
define(["aloha","jquery","util/class"],function(g,f,n){var m;m=f("#aloha-ui-context");m.length||(m=f("<div>",{"class":"aloha",id:"aloha-ui-context"}),f(function(){m.appendTo("body")}));g=n.extend({surfaces:[],containers:[]});f.extend(g,{selector:"#aloha-ui-context",element:m});return g});
define("ui/ui-plugin","jquery aloha ui/context ui/container ui/surface ui/toolbar ui/scopes ui/settings PubSub jqueryui".split(" "),function(g,f,n,m,k,e,l,d,c){var b=new n,p=new e(b,function(){var b=f.settings.toolbar,c=d.defaultToolbarSettings;return b?d.combineToolbarSettings(b.tabs||[],c.tabs,b.exclude||[]):c.tabs}());f.bind("aloha-editable-activated",function(c,d){k.show(b);m.showContainersForContext(b,c)});f.bind("aloha-editable-deactivated",function(c,d){k.suppressHide||k.hide(b)});c.sub("aloha.ui.scope.change",
function(){m.showContainersForContext(b);l.getPrimaryScope();var c=p._tabs,d=l.getPrimaryScope(),a,e;for(e=0;e<c.length;e++)if(a=c[e].settings,"object"===g.type(a.showOn)&&a.showOn.scope===d){c[e].tab.foreground();break}});return{adoptInto:function(b,c){return p.adoptInto(b,c)},showToolbar:function(c){k.show(b);m.showContainersForContext(b,c)}}});
define(["aloha/core","util/class","aloha/repositorymanager"],function(g,f,n){f=f.extend({_constructor:function(f,g){this.repositoryId=f;this.settings={};this.repositoryName=g||f;n.register(this)},init:function(){},query:null,getChildren:null,makeClean:function(f){},markObject:function(f,g){},setTemplate:function(f){this.template=f?f:null},hasTemplate:function(){return this.template?!0:!1},getTemplate:function(){return this.template},getObjectById:function(f,g){return!0}});return g.AbstractRepository=
f});define(["aloha/core","util/class"],function(g,f){var n=window.GENTICS;g.RepositoryObject=function(){};g.RepositoryDocument=f.extend({_constructor:function(f){this.type="document";f.id&&f.name&&f.repositoryId&&(n.Utils.applyProperties(this,f),this.baseType="document")}});g.RepositoryFolder=f.extend({_constructor:function(f){this.type="folder";f.id&&f.name&&f.repositoryId&&(n.Utils.applyProperties(this,f),this.baseType="folder")}})});
define(["jquery","util/class","aloha/core","aloha/console","aloha/repositoryobjects"],function(g,f,n,m,k){function e(b,c){var a={items:b,results:b.length};c&&(a.numItems=c.numItems,a.hasMoreItems=c.hasMoreItems,a.timeout=c.timeout);return a}function l(b,c){b(c)}var d=function(b){return b?function(b,a){return b.filter(a)}:function(b,a){var c=[],d;for(d=0;d<b.length;d++)a(b[d])&&c.push(b[d]);return c}}(Array.prototype.hasOwnProperty("filter")),c=function(b){return"function"===typeof b.query},b=function(b){return"function"===
typeof b.getChildren},p=function(b){return"function"===typeof b.getSelectedFolder};f=f.extend({repositories:[],settings:n.settings&&n.settings.repositories||{},initialized:!1,init:function(){"undefined"===typeof this.settings.timeout&&(this.settings.timeout=5E3);var b;for(b=0;b<this.repositories.length;b++)this.initRepository(this.repositories[b]);this.initialized=!0},register:function(b){this.getRepository(b.repositoryId)?m.warn(this,'A repository with name "'+b.repositoryId+'" already registerd. Ignoring this.'):
(this.repositories.push(b),this.initialized&&this.initRepository(b))},initRepository:function(b){b.settings||(b.settings={});this.settings[b.repositoryId]&&g.extend(b.settings,this.settings[b.repositoryId]);b.init()},getRepository:function(b){var c;for(c=0;c<this.repositories.length;c++)if(this.repositories[c].repositoryId===b)return this.repositories[c];return null},query:function(b,f){var a=this,k,n=[],p={numItems:0,hasMoreItems:!1},x,C=b.timeout&&parseInt(b.timeout,10)||a.settings.timeout,y=window.setTimeout(function(){p=
p||{};p.timeout=!0;0<x&&(m.warn(a,x+" repositories did not return before the configured timeout of "+C+"ms."),x=0);clearTimeout(y);var b=e(n,p);f(b)},C),z=function(b,c){if(0!==x){if(b&&b.length){if(!b[0].repositoryId){var d=this.repositoryId,l;for(l=0;l<b.length;l++)b[l].repositoryId=d}g.merge(n,b)}c&&p?(p.numItems=g.isNumeric(c.numItems)&&g.isNumeric(p.numItems)?p.numItems+c.numItems:void 0,p.hasMoreItems="boolean"===typeof c.hasMoreItems&&"boolean"===typeof p.hasMoreItems?p.hasMoreItems||c.hasMoreItems:
void 0,c.timeout&&(p.timeout=!0)):p=void 0;m.debug(a,"The repository "+this.repositoryId+"returned with "+b.length+" results.");0===--x&&(clearTimeout(y),d=e(n,p),f(d))}};k=b.repositoryId?[a.getRepository(b.repositoryId)]:a.repositories;var D=d(k,c);if(0===D.length)clearTimeout(y),l(f,e(n,p));else{var F=function(a){return function(){z.apply(a,arguments)}};x=D.length;for(k=0;k<D.length;k++)D[k].query(b,F(D[k]))}},getChildren:function(c,e){var a=this,f,l=[],k=0,p=c.timeout&&parseInt(c.timeout,10)||
a.settings.timeout,C=window.setTimeout(function(){0<k&&(m.warn(a,k+" repositories did not respond before the configured timeout of "+p+"ms."),k=0);clearTimeout(C);e(l)},p),y=function(a){0!==k&&(a&&g.merge(l,a),0===--k&&(clearTimeout(C),e(l)))},z=c.repositoryId?[a.getRepository(c.repositoryId)]:a.repositories;c.repositoryFilter&&c.repositoryFilter.length&&(z=d(z,function(a){return-1<g.inArray(a.repositoryId,c.repositoryFilter)}));if("aloha"===c.inFolderId){for(f=0;f<z.length;f++)l.push(new n.RepositoryFolder({id:z[f].repositoryId,
name:z[f].repositoryName,repositoryId:z[f].repositoryId,type:"repository",hasMoreItems:!0}));clearTimeout(C);e(l)}else if(z=d(z,b),0===z.length)clearTimeout(C),e(l);else for(k=z.length,f=0;f<z.length;f++)z[f].getChildren(c,y)},makeClean:function(b){var c=this,a={},d=0,e=c.repositories.length;b.find("[data-gentics-aloha-repository="+this.prefix+"]").each(function(){for(;d<e;)a.makeClean(b),d+=1;m.debug(c,"Passing contents of HTML Element with id { "+this.attr("id")+" } for cleaning to repository { "+
a.repositoryId+" }");a.makeClean(this)})},markObject:function(b,c){if(b)if(c){var a=this.getRepository(c.repositoryId);a?(g(b).attr({"data-gentics-aloha-repository":c.repositoryId,"data-gentics-aloha-object-id":c.id}),a.markObject(b,c)):m.error(this,'Trying to apply a repository "'+c.name+'" to an object, but item has no repositoryId.')}else g(b).removeAttr("data-gentics-aloha-repository").removeAttr("data-gentics-aloha-object-id")},getObject:function(b,c){var a=g(b),d=a.attr("data-gentics-aloha-object-id"),
a=a.attr("data-gentics-aloha-repository"),e=this.getRepository(a);if(e&&d){this.itemCache||(this.itemCache=[]);var f=this.itemCache[a];f||(f=this.itemCache[a]=[]);f[d]?c([f[d]]):e.getObjectById(d,function(a){f[d]=a[0];c(a)})}},folderOpened:function(b){var c=this.getRepository(b.repositoryId);"function"===typeof c.folderOpened&&c.folderOpened(b)},folderClosed:function(b){var c=this.getRepository(b.repositoryId);"function"===typeof c.folderClosed&&c.folderClosed(b)},folderSelected:function(b){var c=
this.getRepository(b.repositoryId);"function"===typeof c.folderSelected&&c.folderSelected(b)},getSelectedFolder:function(){var b=d(this.repositories,p),c,a;for(c=0;c<b.length;c++)if(a=b[c].getSelectedFolder())return a;return null},toString:function(){return"repositorymanager"}});n.RepositoryManager=new f;return n.RepositoryManager});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};
define(["jquery"],function(g){var f=window.GENTICS;f.Utils.Position={};f.Utils.Position.w=g(window);f.Utils.Position.Scroll={top:0,left:0,isScrolling:!1};f.Utils.Position.ScrollCorrection={top:100,left:50};f.Utils.Position.Mouse={x:0,y:0,oldX:0,oldY:0,isMoving:!1,triggeredMouseStop:!0};f.Utils.Position.mouseStopCallbacks=[];f.Utils.Position.mouseMoveCallbacks=[];f.Utils.Position.update=function(){var f=this.w.scrollTop(),g=this.w.scrollLeft();if(this.Scroll.isScrolling)this.Scroll.top==f&&this.Scroll.left==
g&&(this.Scroll.isScrolling=!1);else if(this.Scroll.top!=f||this.Scroll.left!=g)this.Scroll.isScrolling=!0;this.Scroll.top=f;this.Scroll.left=g;if(this.Mouse.x==this.Mouse.oldX&&this.Mouse.y==this.Mouse.oldY){if(this.Mouse.isMoving=!1,!this.Mouse.triggeredMouseStop)for(this.Mouse.triggeredMouseStop=!0,f=0;f<this.mouseStopCallbacks.length;f++)this.mouseStopCallbacks[f].call()}else for(this.Mouse.isMoving=!0,this.Mouse.triggeredMouseStop=!1,f=0;f<this.mouseMoveCallbacks.length;f++)this.mouseMoveCallbacks[f].call();
this.Mouse.oldX=this.Mouse.x;this.Mouse.oldY=this.Mouse.y};f.Utils.Position.addMouseStopCallback=function(f){this.mouseStopCallbacks.push(f);return this.mouseStopCallbacks.length-1};f.Utils.Position.addMouseMoveCallback=function(f){this.mouseMoveCallbacks.push(f);return this.mouseMoveCallbacks.length-1};g(function(){window.setInterval(function(){f.Utils.Position.update()},500)});g("html").mousemove(function(g){f.Utils.Position.Mouse.x=g.pageX;f.Utils.Position.Mouse.y=g.pageY})});
define(["aloha/core","jquery","aloha/selection","PubSub"],function(g,f,n,m){var k=+new Date;f.easing.easeOutExpo||f.extend(f.easing,{easeOutExpo:function(b,c,d,a,e){return c==e?d+a:a*(-Math.pow(2,-10*c/e)+1)+d},easeOutElastic:function(b,c,d,a,e){b=Math;var f=1.70158,g=0,l=a;if(!c)return d;if(1==(c/=e))return d+a;g||(g=0.3*e);l<b.abs(a)?(l=a,f=g/4):f=g/(2*b.PI)*b.asin(a/l);return l*b.pow(2,-10*c)*b.sin(2*(c*e-f)*b.PI/g)+a+d}});var e=function(b){this.id=null;this.folds={};this.button=null;this.title=
f('<div class="aloha-sidebar-panel-title"><span class="aloha-sidebar-panel-title-arrow"></span><span class="aloha-sidebar-panel-title-text">Untitled</span></div>');this.content=f('<div class="aloha-sidebar-panel-content"><div class="aloha-sidebar-panel-content-inner"><div class="aloha-sidebar-panel-content-inner-text"></div></div></div>');this.effectiveElement=this.element=null;this.expanded=!1;this.isActive=!0;this.init(b)},l=function(b){var c=this;this.id="aloha-sidebar-"+ ++k;this.panels={};this.container=
f('<div class="aloha-ui aloha-sidebar-bar"><div class="aloha-sidebar-handle"><span class="aloha-sidebar-handle-icon"></span></div><div class="aloha-sidebar-inner"><ul class="aloha-sidebar-panels"></ul></div></div>');this.width=300;this.isCompletelyOpen=this.isOpen=this.opened=!1;this.settings={rotateIcons:!f.browser.msie,overlayPage:!0};f(function(){"undefined"!==typeof g.settings.sidebar&&g.settings.sidebar.disabled||c.init(b)})},d=null,c=null;f.extend(l.prototype,{init:function(b){var c=this,d;
"object"===typeof b&&(d=b.panels,delete b.panels);f.extend(this,b);"object"===typeof d&&f.each(d,function(){c.addPanel(this,!0)});b=this.container;"right"===this.position&&b.addClass("aloha-sidebar-right");b.hide().appendTo(f("body")).click(function(){c.barClicked.apply(c,arguments)}).find(".aloha-sidebar-panels").width(this.width);b.width(this.width);this.width=b.width();this.updateHeight();this.initToggler();this.container.css("right"===this.position?"marginRight":"marginLeft",-this.width);this.opened&&
this.open(0);this.toggleHandleIcon(this.isOpen);this.subscribeToEvents();f(window).resize(function(){c.updateHeight();c.correctHeight()});this.correctHeight()},show:function(){this.container.css("display","block");return this},hide:function(){this.container.css("display","none");return this},checkActivePanels:function(b){var c=[];if("undefined"!==typeof b&&"undefined"!==typeof b.markupEffectiveAtStart){var d=b.markupEffectiveAtStart.length,a;for(a=0;a<d;++a)c.push(f(b.markupEffectiveAtStart[a]))}var e=
this;f.each(this.panels,function(){e.showActivePanel(this,c)});this.correctHeight()},subscribeToEvents:function(){var b=this;m.sub("aloha.selection.context-change",function(c){b.isOpen&&b.checkActivePanels(c.range);b.lastRange=c.range});g.bind("aloha-editable-deactivated",function(c,d){b.isOpen&&b.checkActivePanels();b.lastRange=null});this.container.mousedown(function(b){b.originalEvent.stopSelectionUpdate=!0;g.eventHandled=!0});this.container.mouseup(function(b){b.originalEvent.stopSelectionUpdate=
!0;g.eventHandled=!1})},correctHeight:function(){if(this.isOpen)if(this.isCompletelyOpen){var b=f(window).height(),e=[],g=[],a;for(a in this.panels)this.panels.hasOwnProperty(a)&&this.panels[a].isActive&&(g.push(this.panels[a]),e.push(a));if(0!==g.length&&(e=e.sort().join(","),c!==e||d!==b)){d=b;c=e;for(var b=this.container.find(".aloha-sidebar-inner").height()-(g[0].title.outerHeight()+10)*g.length,l,k,m,n=0,C=Math,y;0<g.length&&0<b;){b+=n;n=0;m=[];for(y=g.length-1;0<=y;--y)e=g[y],l=e.content.find(".aloha-sidebar-panel-content-inner"),
a=C.min(l.height("auto").height(),C.floor(b/(y+1))),l.height(a),b-=a,k=l.find(".aloha-sidebar-panel-content-inner-text"),k.height()>a?(m.push(e),n+=a,l.css({"overflow-x":"hidden","overflow-y":"scroll"})):l.css("overflow-y","hidden"),e.expanded&&e.expand();g=m}}}else this.correctHeightWhenCompletelyOpen=!0},showActivePanel:function(b,c){c.push(null);b.content.parent("li");var d=b.activeOn,a=f(),e=0,g=c.length,l;for(l=0;l<g;++l)d(c[l])&&(++e,c[l]&&f.merge(a,c[l]));e?b.activate(a):b.deactivate()},initToggler:function(){var b=
this,c=this.container,d=c.find(".aloha-sidebar-handle-icon"),a,e="right"===this.position;this.opened&&this.rotateHandleArrow(e?0:180,0);f(function(){"undefined"!==typeof g.settings.sidebar&&g.settings.sidebar.handle&&g.settings.sidebar.handle.top&&(f(c.find(".aloha-sidebar-handle"))[0].style.top=g.settings.sidebar.handle.top)});c.find(".aloha-sidebar-handle").click(function(){a&&clearInterval(a);d.stop().css("marginLeft",4);b.isOpen?(f(this).removeClass("aloha-sidebar-toggled"),b.close(),b.isOpen=
!1):(f(this).addClass("aloha-sidebar-toggled"),b.open(),b.isOpen=!0)}).hover(function(){var c=b.isOpen?-1:1;a&&clearInterval(a);d.stop();f(this).stop().animate(e?{marginLeft:"-="+5*c}:{marginRight:"-="+5*c},200);a=setInterval(function(){c*=-1;d.animate(e?{left:"-="+4*c}:{right:"-="+4*c},300)},300)},function(){a&&clearInterval(a);d.stop().css(e?"left":"right",5);f(this).stop().animate(e?{marginLeft:0}:{marginRight:0},600,"easeOutElastic")})},roundCorners:function(){var b=this.container,c=b.find(".aloha-sidebar-panels>li:not(.aloha-sidebar-deactivated)");
b.find(".aloha-sidebar-panel-top, .aloha-sidebar-panel-bottom").removeClass("aloha-sidebar-panel-top").removeClass("aloha-sidebar-panel-bottom");c.first().find(".aloha-sidebar-panel-title").addClass("aloha-sidebar-panel-top");c.last().find(".aloha-sidebar-panel-content").addClass("aloha-sidebar-panel-bottom")},updateHeight:function(){var b=f(window).height();this.container.height(b).find(".aloha-sidebar-inner").height(b)},barClicked:function(b){this.handleBarclick(f(b.target))},handleBarclick:function(b){b.hasClass("aloha-sidebar-panel-title")?
this.togglePanel(b):b.hasClass("aloha-sidebar-panel-content")||b.hasClass("aloha-sidebar-handle")||b.hasClass("aloha-sidebar-bar")||this.handleBarclick(b.parent())},getPanelById:function(b){return this.panels[b]},getPanelByElement:function(b){b="LI"===b[0].tagName?b:b.parent("li");return this.getPanelById(b[0].id)},togglePanel:function(b){this.getPanelByElement(b).toggle()},rotateHandleIcon:function(b,c){var d=this.container.find(".aloha-sidebar-handle-icon");d.animate({angle:b},{duration:"number"===
typeof c||"string"===typeof c?c:500,easing:"easeOutExpo",step:function(a,b){d.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},toggleHandleIcon:function(b){b^="right"===this.position;if(this.settings.rotateIcons)this.rotateHandleIcon(b?180:0,0);else{var c=this.container.find(".aloha-sidebar-handle-icon");b?c.addClass("aloha-sidebar-handle-icon-left"):c.removeClass("aloha-sidebar-handle-icon-left")}},
open:function(b,c){if(this.isOpen)return this;var d="right"===this.position,a=d?{marginRight:0}:{marginLeft:0},e=this;this.toggleHandleIcon(!0);this.container.animate(a,"number"===typeof b||"string"===typeof b?b:500,"easeOutExpo");this.settings.overlayPage||f("body").animate(d?{marginRight:"+="+this.width}:{marginLeft:"+="+this.width},500,"easeOutExpo",function(){e.isCompletelyOpen=!0;e.correctHeightWhenCompletelyOpen&&e.correctHeight()});this.isOpen=!0;this.correctHeight();this.lastRange&&this.checkActivePanels(this.lastRange);
f("body").trigger("aloha-sidebar-opened",this);return this},close:function(b,c){if(!this.isOpen)return this;var d="right"===this.position,a=d?{marginRight:-this.width}:{marginLeft:-this.width};this.toggleHandleIcon(!1);this.container.animate(a,"number"===typeof b||"string"===typeof b?b:500,"easeOutExpo");this.settings.overlayPage||f("body").animate(d?{marginRight:"-="+this.width}:{marginLeft:"-="+this.width},500,"easeOutExpo");this.isCompletelyOpen=this.isOpen=!1;return this},activatePanel:function(b,
c){"string"===typeof b&&(b=this.getPanelById(b));b&&b.activate(c);this.roundCorners();return this},expandPanel:function(b,c){"string"===typeof b&&(b=this.getPanelById(b));b&&b.expand(c);return this},collapsePanel:function(b,c){"string"===typeof b&&(b=this.getPanelById(b));b&&b.collapse(c);return this},addPanel:function(b,c){b instanceof e||(b.width||(b.width=this.width),b.sidebar=this,b=new e(b));this.panels[b.id]=b;this.container.find(".aloha-sidebar-panels").append(b.element);this.checkActivePanels(n.getRangeObject());
return b}});f.extend(e.prototype,{init:function(b){this.setTitle(b.title).setContent(b.content);delete b.title;delete b.content;f.extend(this,b);this.id||(this.id="aloha-sidebar-"+ ++k);this.element=f('<li id="'+this.id+'">').append(this.title,this.content);this.expanded&&this.content.height("auto");this.toggleTitleIcon(this.expanded);this.coerceActiveOn();this.title.attr("unselectable","on").css("-moz-user-select","none").each(function(){this.onselectstart=function(){return!1}});"function"===typeof this.onInit&&
this.onInit.apply(this)},toggleTitleIcon:function(b){if(this.sidebar.settings.rotateIcons)this.rotateTitleIcon(b?90:0);else{var c=this.title.find(".aloha-sidebar-panel-title-arrow");b?c.addClass("aloha-sidebar-panel-title-arrow-down"):c.removeClass("aloha-sidebar-panel-title-arrow-down")}},coerceActiveOn:function(){if("function"!==typeof this.activeOn){var b=this.activeOn;this.activeOn=function(){var c=typeof b;return"boolean"===c?function(){return b}:"undefined"===c?function(){return!0}:"string"===
c?function(c){return c?c.is(b):!1}:function(){return!1}}()}},activate:function(b){this.isActive=!0;this.content.parent("li").show().removeClass("aloha-sidebar-deactivated");this.effectiveElement=b;"function"===typeof this.onActivate&&this.onActivate.call(this,b)},deactivate:function(){this.isActive&&(this.isActive=!1,this.content.parent("li").hide().addClass("aloha-sidebar-deactivated"),this.effectiveElement=null)},toggle:function(){this.expanded?this.collapse():this.expand()},expand:function(b){var c=
this,d=this.content,a=d.height(),e=d.height("auto").height();d.height(a).stop().animate({height:e},500,"easeOutExpo",function(){"function"===typeof b&&b.call(c)});this.element.removeClass("collapsed");this.toggleTitleIcon(!0);this.expanded=!0;return this},collapse:function(b,c){var d=this;this.element.addClass("collapsed");this.content.stop().animate({height:3},250,"easeOutExpo",function(){"function"===typeof c&&c.call(d)});this.toggleTitleIcon(!1);this.expanded=!1;return this},setTitle:function(b){this.title.find(".aloha-sidebar-panel-title-text").html(b);
return this},setContent:function(b){b&&""!==b||(b="&nbsp;");this.content.find(".aloha-sidebar-panel-content-inner-text").html(b);return this},rotateTitleIcon:function(b,c){var d=this.title.find(".aloha-sidebar-panel-title-arrow");d.animate({angle:b},{duration:"number"===typeof c?c:500,easing:"easeOutExpo",step:function(a,b){d.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},renderEffectiveParents:function(b,
c){for(var d=b.first(),a=[],e=[],g=this.activeOn,l,k;0<d.length&&!d.is(".aloha-editable");){if(g(d)){e.push("<span>"+d[0].tagName.toLowerCase()+"</span>");l=e.length;for(k=[];l--;)k.push(e[l]);a.push('<div class="aloha-sidebar-panel-parent"><div class="aloha-sidebar-panel-parent-path">'+k.join("")+'</div><div class="aloha-sidebar-panel-parent-contentaloha-sidebar-opened">'+("function"===typeof c?c(d):"----")+"</div></div>")}d=d.parent()}this.setContent(a.join(""));f(".aloha-sidebar-panel-parent-path").click(function(){var a=
f(this).parent().find(".aloha-sidebar-panel-parent-content");a.hasClass("aloha-sidebar-opened")?a.hide().removeClass("aloha-sidebar-opened"):a.show().addClass("aloha-sidebar-opened")});this.content.height("auto").find(".aloha-sidebar-panel-content-inner").height("auto")}});var b=new l({position:"left",width:250}),l=new l({position:"right",width:250});g.Sidebar={left:b,right:l};return g.Sidebar});
define(["aloha/core","aloha/selection","jquery","aloha/console"],function(g,f,n,m){function k(d,c,b,e){if(c===e.target||!/textarea|input|select/i.test(e.target.nodeName)&&"text"!==e.target.type)return d.apply(c,b)}function e(d){var c,b,e,f;if("string"===typeof d.data){c=d.handler;b=d.data.toLowerCase().split(" ");e={};for(f=0;f<b.length;f++)e[b[f]]=!0;d.handler=function(b){if(this===b.target){var a="keypress"!==b.type&&n.hotkeys.specialKeys[b.which],d="";b.altKey&&"alt"!==a&&(d+="alt+");b.ctrlKey&&
"ctrl"!==a&&(d+="ctrl+");b.metaKey&&!b.ctrlKey&&"meta"!==a&&(d+="meta+");b.shiftKey&&"shift"!==a&&(d+="shift+");if(a){if(e[d+a])return k(c,this,arguments,b)}else if(a=String.fromCharCode(b.which).toLowerCase(),e[d+a]||e[d+n.hotkeys.shiftNums[a]]||"shift+"===d&&e[n.hotkeys.shiftNums[a]])return k(c,this,arguments,b)}}}}var l=window.XMLSerializer;n.fn.between=function(d,c){var b;3!==this[0].nodeType?(b=this.children().size(),c>b&&(c=b),0>=c?this.prepend(d):this.children().eq(c-1).after(d)):0>=c?this.before(d):
(c>=this[0].length||(b=this[0].data,this[0].data=b.substring(0,c),this.after(b.substring(c,b.length))),this.after(d))};n.fn.contentEditable=function(d){var c=n(this),b="contenteditable";n.browser.msie&&7==parseInt(n.browser.version,10)&&(b="contentEditable");if("undefined"===typeof d){if("undefined"===typeof c[0]){m.warn("The jquery object did not contain any valid elements.");return}return"undefined"===typeof c[0].isContentEditable?(m.warn("Could not determine whether the is editable or not. I assume it is."),
!0):c[0].isContentEditable}""===d?c.removeAttr(b):c.attr(b,d&&"false"!==d?"true":"false");return c};n.fn.aloha=function(){var d=this;g.bind("aloha-plugins-loaded",function(){d.each(function(c,b){g.isEditable(b)||(new g.Editable(n(b))).init()})});return d};n.fn.mahalo=function(){return this.each(function(){g.isEditable(this)&&g.getEditableById(n(this).attr("id")).destroy()})};n.fn.alohaText=function(){return this.each(function(){g.isEditable(this)&&g.getEditableById(n(this).attr("id")).getContents()})};
n.fn.contentEditableSelectionChange=function(d){var c=this;this.keyup(function(b){f.getRangeObject();d(b)});this.dblclick(function(b){d(b)});this.mousedown(function(b){c.selectionStarted=!0});n(document).mouseup(function(b){f.eventOriginalTarget=c;c.selectionStarted&&d(b);f.eventOriginalTarget=!1;c.selectionStarted=!1});return this};n.fn.outerHtml=n.fn.outerHtml||function(){var d=n(this).get(0);if("undefined"!=typeof d.outerHTML)return d.outerHTML;try{return(new l).serializeToString(d)}catch(c){try{return d.xml}catch(b){}}};
n.fn.zap=function(){return this.each(function(){n(this.childNodes).insertBefore(this)}).remove()};n.fn.textNodes=function(d,c){var b=[],e=function(f){var g,a;if(3===f.nodeType&&n.trim(f.data)&&!c||3===f.nodeType&&c||"BR"==f.nodeName&&!d)b.push(f);else for(g=0,a=f.childNodes.length;g<a;++g)e(f.childNodes[g])};e(this[0]);return n(b)};n.extendObjects=n.fn.extendObjects=function(d,c){var b,e,f,g,a;b=1;var l=d||{},k=arguments.length,m=!1,x;"boolean"===typeof l&&(m=l,l=c||{},b=2);"object"===typeof l||n.isFunction(l)||
(l={});k===b&&(l=this,--b);for(x=b;x<k;x++)if(null!=(b=arguments[x]))for(e in b)b.hasOwnProperty(e)&&(f=l[e],g=b[e],l!==g&&(m&&g&&(n.isPlainObject(g)||!0===(a=n.isArray(g)))?(a?(a=!1,f=f&&n.isArray(f)?f:[]):f=f&&n.isPlainObject(f)?f:{},n.isArray(g)?l[e]=g:l[e]=n.extendObjects(m,f,g)):void 0!==g&&(l[e]=g)));return l};n.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",
37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};n.each(["keydown",
"keyup","keypress"],function(){n.event.special[this]={add:e}})});
define(["aloha/core","jquery","util/class","aloha/pluginmanager","aloha/console"],function(g,f,n,m,k){var e=n.extend({name:null,defaults:{},settings:{},dependencies:[],_constructor:function(e){"string"!==typeof e?k.error("Cannot initialise unnamed plugin, skipping"):this.name=e},checkDependencies:function(){var e=this,d=!0;f.each(e.dependencies,function(c,b){if(!g.isPluginLoaded(b.toString()))return d=!1,k.error("plugin."+e.name,'Required plugin "'+b+'" not found.'),!1});return d},init:function(){},
getEditableConfig:function(e){var d=null,c=!1,b=this;this.settings.editables&&f.each(this.settings.editables,function(g,k){var m;if(e.is(g))if(c=!0,k instanceof Array)d=[],d=f.merge(d,k);else if("object"===typeof k)for(m in d={},d["aloha-editable-selector"]=g,k)k.hasOwnProperty(m)&&(k[m]instanceof Array?d[m]=k[m]:"object"===typeof k[m]?(d[m]={},d[m]=f.extend(!0,d[m],b.config[m],k[m])):d[m]=k[m]);else d=k});c||(d="undefined"!==typeof this.settings.config&&this.settings.config?this.settings.config:
this.config);return d},makeClean:function(e){},getUID:function(e){k.deprecated("plugin","getUID() is deprecated. Use plugin.name instead.");return this.name},toString:function(){return this.name},log:function(e,d){k.deprecated("plugin","log() is deprecated. Use Aloha.console instead.");k.log(e,this,d)}});e.create=function(l,d){var c=new (e.extend(d))(l);c.settings=f.extendObjects(!0,c.defaults,g.settings[l]);m.register(c);return c};return e});
define("aloha/core jquery aloha/command util/dom2 util/maps util/range PubSub".split(" "),function(g,f,n,m,k,e,l){function d(){p=r=null}function c(c,a,d){b&&(r=a,p=p||{},p[c]=d)}var b=!1!==g.settings.stateOverride,p=null,r=null;g.bind("aloha-selection-changed",function(b,a){r&&!m.areRangesEq(r,a)&&(d(),l.pub("aloha.selection.context-change",{range:a,event:b}))});return{enabled:function(c){null!=c&&(b=c);return b},keyPressHandler:function(b){if(p&&!b.altKey&&!b.ctrlKey&&b.which){var a=g.getSelection();
if(a.getRangeCount()){var c=String.fromCharCode(b.which),d=a.getRangeAt(0);m.insertSelectText(c,d);k.forEach(p,function(a,b){a(b,d)});m.collapseToEnd(d);a.removeAllRanges();a.addRange(d);b.preventDefault()}}},setWithRangeObject:function(d,a,f){b&&(c(d,m.rangeFromRangeObject(a),function(a,b){var c=new e(b);f(a,c);m.setRangeFromRef(b,c)}),a.select())},set:c,clear:d}});
define(["aloha/core","aloha/registry","aloha/engine","util/dom","aloha/contenthandlermanager"],function(g,f,n,m,k){var e={execCommand:function(e,d,c,b){var f={commandId:e,preventDefault:!1};g.trigger("aloha-command-will-execute",f);if(!0!==f.preventDefault){if(!b){if(!g.getSelection().getRangeCount())return;b=g.getSelection().getRangeAt(0)}"inserthtml"===e.toLowerCase()&&(c=k.handleContent(c,{contenthandler:g.settings.contentHandler.insertHtml,command:"insertHtml"}));n.execCommand(e,d,c,b);g.getSelection().getRangeCount()&&
(b=g.getSelection().getRangeAt(0),d=b.commonAncestorContainer,d.parentNode&&(d=d.parentNode),c=new window.GENTICS.Utils.RangeObject,c.startContainer=b.startContainer,c.startOffset=b.startOffset,c.endContainer=b.endContainer,c.endOffset=b.endOffset,m.doCleanup({merge:!0,removeempty:!1},c,d),c.select());g.trigger("aloha-command-executed",e)}},queryCommandEnabled:function(e,d){if(!d){if(!g.getSelection().getRangeCount())return;d=g.getSelection().getRangeAt(0)}return n.queryCommandEnabled(e,d)},queryCommandIndeterm:function(e,
d){if(!d){if(!g.getSelection().getRangeCount())return;d=g.getSelection().getRangeAt(0)}return n.queryCommandIndeterm(e,d)},queryCommandState:function(e,d){if(!d){if(!g.getSelection().getRangeCount())return;d=g.getSelection().getRangeAt(0)}return n.queryCommandState(e,d)},queryCommandSupported:function(e){return n.queryCommandSupported(e)},queryCommandValue:function(e,d){if(!d){if(!g.getSelection().getRangeCount())return;d=g.getSelection().getRangeAt(0)}return n.queryCommandValue(e,d)},querySupportedCommands:function(){var e=
[],d;for(d in n.commands)n.commands.hasOwnProperty(d)&&e.push(d);return e},getStateOverride:n.getStateOverride,setStateOverride:n.setStateOverride,resetOverrides:n.resetOverrides,unsetStateOverride:n.unsetStateOverride},e=new (f.extend(e));g.execCommand=e.execCommand;g.queryCommandEnabled=e.queryCommandEnabled;g.queryCommandIndeterm=e.queryCommandIndeterm;g.queryCommandState=e.queryCommandState;g.queryCommandSupported=e.queryCommandSupported;g.queryCommandValue=e.queryCommandValue;g.querySupportedCommands=
e.querySupportedCommands;return e});
define("aloha/copypaste",["jquery","aloha/core"],function(g,f){function n(g){var k=f.createRange(),e=f.getSelection();k.setStart(g.startContainer,g.startOffset);k.setEnd(g.endContainer,g.endOffset);e.removeAllRanges();e.addRange(k)}return{getEditableAt:function(m){if(!m||!m.commonAncestorContainer)return null;m=g(m.commonAncestorContainer);return m.length?f.getEditableHost(m):null},getRange:function(){var g=f.getSelection();return g.getRangeCount()?g.getRangeAt(0):null},selectAllOf:function(f){n({startContainer:f,
endContainer:f,startOffset:0,endOffset:f.childNodes?f.childNodes.length:f.length});g(f).focus()},setSelectionAt:n}});define([],function(){return{anyRx:function(g,f){var n,m;n=0;for(m=g.length;n<m;n++)if(g[n].test(f))return!0;return!1}}});define(["jquery"],function(g){return{ie7:g.browser.msie&&8>parseInt(g.browser.version,10)}});
define("aloha/core jquery util/functions util/maps util/arrays util/strings util/browser util/dom util/range".split(" "),function(g,f,n,m,k,e,l,d,c){function b(a,b,c){for(;b;){var d=b.nextSibling;a.insertBefore(b,c);b=d}}function p(a){var b=a.outerHTML;if("undefined"!==typeof b)return b;try{return P?P.serializeToString(a):a.xml}catch(c){return a.xml}}function r(a){var b=[];a=p(a.cloneNode(!1));for(var c;null!=(c=V.exec(a));)b.push(c[1]);return b}function u(a,b){var c={},d,f,g,l,k,m,n;m=0;for(k=a.length;m<
k;m++)if(g=a[m],g.className)for(f=e.words(g.className),n=0;n<f.length;n++)l=f[n],b[l]&&((d=c[l])?d.push(g):c[l]=[g]);return c}function a(a){for(var b=0;a.previousSibling;)b++,a=a.previousSibling;return b}function q(a){var b=0;for(a=a.firstChild;a;)b+=1,a=a.nextSibling;return b}function t(a,b){return 1===a.nodeType&&b>=q(a)||3===a.nodeType&&b===a.length&&!a.nextSibling}function v(a,b){1===a.nodeType&&b<q(a)?a=a.childNodes[b]:3===a.nodeType&&b===a.length&&(a=a.nextSibling||a.parentNode);return a}function x(a,
b,c){c?b.appendChild(a):b.parentNode.insertBefore(a,b)}function C(a,b){this.node=a;this.atEnd=b}function y(a,b){return new C(a,b)}function z(a,b){return y(v(a,b),t(a,b))}function D(a,b){for(var c=[],d=a.parentNode;d&&!b(d);)c.push(d),d=d.parentNode;return c}function F(a,b){var c=D(a,b),d=c.length?c[c.length-1]:a;d.parentNode&&c.push(d.parentNode);return c}function H(a,b){if(b(a))return[];var c=D(a,b);c.unshift(a);return c}function M(a,b){if(b(a))return[a];var c=F(a,b);c.unshift(a);return c}function I(a,
b){var c=a.parentNode,d=a.nodeValue;if(0===b||b>=d.length)return a;var e=document.createTextNode(d.substring(0,b)),d=document.createTextNode(d.substring(b,d.length));c.insertBefore(e,a);c.insertBefore(d,a);c.removeChild(a);return e}function J(b,c,d,e,f,g){c===f&&(f=g.length,0===d?(c=g.parentNode,d=a(g)):d<f?c=g:d===f?(c=g.parentNode,d=a(g)+1):(c=g.nextSibling,d-=f),b[e].call(b,c,d))}function K(a,b,c){if(3===a.nodeType){var d=c.startContainer,e=c.startOffset,f=c.endContainer,g=c.endOffset;b=I(a,b);
J(c,d,e,"setStart",a,b);J(c,f,g,"setEnd",a,b)}}function G(a,b,c,d){for(;a&&!c(a,d);){var e=a.nextSibling;b(a,d);a=e}}function S(a,b,c){G(a,b,n.returnFalse,c)}function O(a,b,c){1===a.nodeType&&S(a.firstChild,function(a){O(a,b,c)});b(a,c)}function s(a){a&&(this.startContainer=a.startContainer,this.startOffset=a.startOffset,this.endContainer=a.endContainer,this.endOffset=a.endOffset,this.commonAncestorContainer=a.commonAncestorContainer,this.collapsed=a.collapsed)}function T(b,c){c.atEnd?b.setStart(c.node,
q(c.node)):b.setStart(c.node.parentNode,a(c.node))}function Q(b,c){c.atEnd?b.setEnd(c.node,q(c.node)):b.setEnd(c.node.parentNode,a(c.node))}function U(a,b){a.setStart(b.startContainer,b.startOffset);a.setEnd(b.endContainer,b.endOffset)}function N(a,b,c){if(!a.collapsed){for(var d=z(a.startContainer,a.startOffset),e=z(a.endContainer,a.endOffset),f=!1;!d.equals(e)&&b(d)&&d.next();)f=!0;c=c||b;b=!1;for(3===a.endContainer.nodeType&&0<a.endOffset&&a.endOffset<a.endContainer.length&&e.next()&&c(e)&&e.prev();!e.equals(d)&&
c(e)&&e.prev();)b=!0;f&&T(a,d);b&&Q(a,e)}}var V=/\s([^\/<>\s=]+)(?:=(?:"[^"]*"|'[^']*'|[^>\/\s]+))?/g,P=window.XMLSerializer&&new window.XMLSerializer;C.prototype.next=function(){var a=this.node,b;if(this.atEnd||1!==a.nodeType){if(b=a.nextSibling)this.atEnd=!1;else{b=a.parentNode;if(!b)return!1;this.atEnd=!0}this.node=b}else(b=a.firstChild)?this.node=b:this.atEnd=!0;return!0};C.prototype.prev=function(){var a=this.node,b;if(this.atEnd)(b=a.lastChild)?this.node=b:this.atEnd=!1;else{if(b=a.previousSibling)1===
a.nodeType&&(this.atEnd=!0);else if(b=a.parentNode,!b)return!1;this.node=b}return!0};C.prototype.equals=function(a){return a.node===this.node&&a.atEnd===this.atEnd};C.prototype.clone=function(a){return a(a.node,a.atEnd)};C.prototype.insert=function(a){return x(a,this.node,this.atEnd)};s.prototype.update=function(){if(this.startContainer&&this.endContainer){this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset;var a=H(this.startContainer,n.returnFalse),b=H(this.endContainer,
n.returnFalse);this.commonAncestorContainer=k.intersect(a,b)[0]}};s.prototype.setStart=function(a,b){this.startContainer=a;this.startOffset=b;this.update()};s.prototype.setEnd=function(a,b){this.endContainer=a;this.endOffset=b;this.update()};return{moveNextAll:b,attrNames:r,attrs:function(a){var b=[],c=r(a),d,e;d=0;for(e=c.length;d<e;d++){var g=c[d],l=f.attr(a,g),l=null==l?"":l.toString();b.push([g,l])}return b},indexByClass:function(a,b){var c;c=l.ie7?a.getElementsByTagName("*"):f(a).find("."+m.keys(b).join(",."));
return u(c,b)},indexByName:function(a,b){var c,d={},e;c=0;for(e=b.length;c<e;c++){var g=b[c];d[g]=f.makeArray(a.getElementsByTagName(g))}return d},indexByClassHaveList:u,outerHtml:p,removeShallow:function(a){var c=a.parentNode;b(c,a.firstChild,a);c.removeChild(a)},wrap:function(a,b){a.parentNode.replaceChild(b,a);b.appendChild(a)},insert:x,cursor:y,cursorFromBoundaryPoint:z,nodeAtOffset:v,isAtEnd:t,parentsUntil:D,parentsUntilIncl:F,childAndParentsUntil:H,childAndParentsUntilIncl:M,childAndParentsUntilNode:function(a,
b){return H(a,function(a){return a===b})},childAndParentsUntilInclNode:function(a,b){return M(a,function(a){return a===b})},next:function(a,b,c){for(;a&&!b(a,c);)a=a.nextSibling;return a},parent:function(a,b,c){for(;a&&!b(a,c);)a=a.parentNode;return a},isTextNode:function(a){return 3===a.nodeType},nodeIndex:a,splitTextNode:I,splitTextContainers:function(a){K(a.startContainer,a.startOffset,a);K(a.endContainer,a.endOffset,a)},walk:S,walkRec:O,walkUntil:G,walkUntilNode:function(a,b,c,d){G(a,b,function(a){return a===
c},d)},stableRange:function(a){return new s(a)},trimRange:N,trimRangeClosingOpening:function(a,b,c){c=c||b;N(a,function(a){return a.atEnd||b(a.node)},function(a){a=a.atEnd?a.node.lastChild:a.node.previousSibling;return!a||c(a)})},setRangeFromRef:U,setRangeStartFromCursor:T,setRangeEndFromCursor:Q,splitTextNodeAdjustRange:K,insertSelectText:function(a,b){if(a.length){K(b.startContainer,b.startOffset,b);var c=v(b.startContainer,b.startOffset),d=t(b.startContainer,b.startOffset);if(d||3!==c.nodeType){var e;
(e=d?c.lastChild:c.previousSibling)&&3===e.nodeType?(e.insertData(e.length,a),b.setStart(e,e.length-a.length)):(e=document.createTextNode(a),x(e,c,d),b.setStart(e,0));b.setEnd(e,e.length)}else c.insertData(0,a),b.setStart(c,0),b.setEnd(c,a.length)}},areRangesEq:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},collapseToEnd:function(a){a.setStart(a.endContainer,a.endOffset)},extendToWord:function(a){var b=
new c(a);d.extendToWord(b);U(a,b)},rangeFromRangeObject:function(a){var b=g.createRange();b.setStart(a.startContainer,a.startOffset);b.setEnd(a.endContainer,a.endOffset);return b},cloneShallow:function(a){return a.cloneNode(!1)},setStyle:function(a,b,c){f(a).css(b,null==c?"":c)},getStyle:function(a,b){b=e.dashesToCamelCase(b);return 1===a.nodeType?a.style[b]:null},getComputedStyle:function(a,b){if(a.currentStyle)return a.currentStyle[b];var c=a.ownerDocument;return c.defaultView&&c.defaultView.getComputedStyle&&
(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b):null}}});
define(["jquery"],function(g){function f(b,c,a){var d=g.type(b),e,f,l;if("array"===d){d=a?b:[];l=e=0;for(f=b.length;l<f;l++)a=c(b[l]),a.length&&(d[e++]=a[0]);e!==d.length&&(d=d.slice(0,e))}else if("object"===d)for(e in d=a?b:{},b)b.hasOwnProperty(e)&&(a=c(b[e]),a.length?d[e]=a[0]:delete d[e]);else d=b;return d}function n(b,c){return f(b,c,!0)}function m(b,c){var a,d,e;if(1===b.nodeType)for(d=b.firstChild;d;)a=c(d),e=d.nextSibling,a.length?a[0]!==d&&b.replaceChild(a[0],d):b.removeChild(d),d=e;return b}
function k(b,c,a,d){return[a(c(d),b)]}function e(b,c,a,d){return[c(a(d,b))]}function l(b,c,a,d){return c(d)?[]:[a(d,b)]}function d(b,c,a,d){b=a(d,b);return c(b)?[]:[b]}function c(b,c,a,d){function e(d){return b(e,c,a,d)}return e(d)[0]}function b(b){b=g.type(b);return"object"!==b&&"array"!==b}function p(c,d,a){function e(a){return b(a)?[d(a)]:[g(a,e)]}var g=a?n:f;return e(c)[0]}return{prewalk:function(b,d,a){return c(k,d,a?n:f,b)},postwalk:function(b,d,a){return c(e,d,a?n:f,b)},preprune:function(b,
d,a){return c(l,d,a?n:f,b)},postprune:function(b,e,a){return c(d,e,a?n:f,b)},prewalkDom:function(b,d,a){return c(k,d,m,a?b:b.cloneNode(!0))},postwalkDom:function(b,d,a){return c(e,d,m,a?b:b.cloneNode(!0))},prepruneDom:function(b,d,a){return c(l,d,m,a?b:b.cloneNode(!0))},postpruneDom:function(b,e,a){return c(d,e,m,a?b:b.cloneNode(!0))},isLeaf:b,leaves:p,clone:function(b){function c(a){return[f(a,c)]}return c(b)[0]},flatten:function(b){var c=[];p(b,function(a){c.push(a);return a},!0);return c},walk:f,
walkInplace:n,walkDomInplace:m}});
define("jquery aloha/core aloha/console util/strings util/trees util/arrays util/maps util/dom2 util/functions util/misc util/browser PubSub".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r){function u(a){a=g(a);var b=a.attr("data-aloha-ephemera-attr"),c;p.ie7||a.removeAttr("data-aloha-ephemera-attr");if("string"===typeof b)for(c=m.words(b),b=0;b<c.length;b++)a.removeAttr(c[b])}function a(a,c,d,f){d=d[c];return!d||!0!==d&&-1===e.indexOf(d,a.nodeName)?b.anyRx(f,c):!0}function q(b,c){var e=null,f=d.attrNames(b),
l,k,m;k=0;for(m=f.length;k<m;k++)l=f[k],a(b,l,c.attrMap,c.attrRxs)&&(e=e||g(b),e.removeAttr(l))}function t(a,b){var c=a.className;if(c&&-1!==c.indexOf(x)){c=m.words(c);if(-1!==e.indexOf(c,"aloha-cleanme")||-1!==e.indexOf(c,"aloha-ephemera"))return g.removeData(a),!1;if(-1!==e.indexOf(c,"aloha-ephemera-wrapper")||-1!==e.indexOf(c,"aloha-ephemera-filler"))return d.moveNextAll(a.parentNode,a.firstChild,a.nextSibling),g.removeData(a),!1;-1!==e.indexOf(c,"aloha-ephemera-attr")&&u(a);var f=e.filter(c,function(a){return!b.classMap[a]});
f.length!==c.length&&(0===f.length?g(a).removeAttr("class"):a.className=f.join(" "))}q(a,b);return!0}var v={classMap:{"aloha-ephemera-wrapper":!0,"aloha-ephemera-filler":!0,"aloha-ephemera-attr":!0,"aloha-ephemera":!0,"aloha-cleanme":!0},attrMap:{hidefocus:!0,hideFocus:!0,tabindex:!0,tabIndex:!0,contenteditable:["TABLE"],contentEditable:["TABLE"]},attrRxs:[/^(?:nodeIndex|sizcache|sizset|jquery)[\w\d]*$/i],pruneFns:[]},x="aloha-";return{ephemera:function(a){a&&(v=a);r.pub("aloha.ephemera",{ephemera:v});
return v},classes:function(){var a=Array.prototype.slice.call(arguments);l.fillKeys(v.classMap,a,!0);var b=a,c,d;c=0;for(d=b.length;c<d;c++)-1===b[c].indexOf(x)&&(n.warn('Class "'+b[c]+'" was set to be ephemeral,which hurts peformance. Add the common substring "'+x+'" to the class to fix this problem.'),x="");r.pub("aloha.ephemera.classes",{ephemera:v,newClasses:a})},attributes:function(){var a=Array.prototype.slice.call(arguments);l.fillKeys(v.attrMap,a,!0);r.pub("aloha.ephemera.attributes",{ephemera:v,
newAttributes:a})},markElement:function(a){g(a).addClass("aloha-ephemera")},markAttr:function(a,b){a=g(a);var c=a.attr("data-aloha-ephemera-attr");null==c||""===c?c=b:-1===e.indexOf(m.words(c),b)&&(c+=" "+b);a.attr("data-aloha-ephemera-attr",c);a.addClass("aloha-ephemera-attr")},markWrapper:function(a){g(a).addClass("aloha-ephemera-wrapper")},markFiller:function(a){g(a).addClass("aloha-ephemera-filler")},prune:function(a,b){function c(a){var d;a:{d=b;var f=c;if(1===a.nodeType){if(!t(a,d)){d=[];break a}a=
k.walkDomInplace(a,f)}d=(a=e.reduce(d.pruneFns,a,e.applyNotNull))?[a]:[]}return d}b=b||v;return c(a)[0]},isAttrEphemeral:a}});
define(["jquery"],function(g){return{_eventHandlers:null,bind:function(f,g,m){this._eventHandlers=this._eventHandlers||{};this._eventHandlers[f]||(this._eventHandlers[f]=[]);this._eventHandlers[f].push({handler:g,scope:m||window})},unbind:function(f,n){this._eventHandlers=this._eventHandlers||{};this._eventHandlers[f]&&(this._eventHandlers[f]=n?g.grep(this._eventHandlers[f],function(f){return f.handler===n?!1:!0}):[])},trigger:function(f){this._eventHandlers=this._eventHandlers||{};if(this._eventHandlers[f]){var n=
[];g.each(arguments,function(f,g){0<f&&n.push(g)});g.each(this._eventHandlers[f],function(f,g){g.handler.apply(g.scope,n)})}},unbindAll:function(){this._eventHandlers=null}}});
define(["jquery","aloha/observable","util/class"],function(g,f,n){return n.extend(f,{_entries:null,_ids:null,_constructor:function(){this._entries={};this._ids=[]},register:function(f,g){this._entries[f]=g;this._ids.push(f);this.trigger("register",g,f)},unregister:function(f){var g,e=this._entries[f];delete this._entries[f];for(g in this._ids)if(this._ids.hasOwnProperty(g)&&this._ids[g]===f){this._ids.splice(g,1);break}this.trigger("unregister",e,f)},get:function(f){return this._entries[f]},has:function(f){return this._entries[f]?
!0:!1},getEntries:function(){return g.extend({},this._entries)},getIds:function(){return g.extend([],this._ids)}})});
define(["aloha/core","aloha/registry","util/class"],function(g,f,n){return new (f.extend({createHandler:function(f){if("function"!==typeof f.handleContent)throw"ContentHandler has no function handleContent().";return new (n.extend({handleContent:function(f){}},f))},handleContent:function(f,k,e){var l=k?k.contenthandler:this.getIds();if(!l)return f;var d,c;for(d=0;d<l.length&&((c=this.get(l[d]))&&(f=c.handleContent(f,k,e||g.activeEditable)),null!==f);d++);return f}}))});
define(["aloha/core","jquery","aloha/console"],function(g,f,n){function m(e,d){e.deleteData(0,e.length);""!==d&&(e.nextSibling&&3===e.nextSibling.nodeType?e.nextSibling.insertData(0,d):e.previousSibling&&3===e.previousSibling.nodeType?e.previousSibling.insertData(e.previousSibling.length,d):e.insertData(0,d));setTimeout(function(){0===e.length&&f(e).remove()},0)}function k(){if(e){var f=e.nodeValue.replace(/\u200b/,"");f===e.nodeValue&&n.warn("Expected to remove the zero width text node fix, but couldn't find it");
m(e,f);e=null}}var e=null;return{removeZeroWidthTextNodeFix:k,insertZeroWidthTextNodeFix:function(l,d){k();e=document.createTextNode("\u200b");d?f(l).after(e):f(l).before(e);g.bind("aloha-selection-changed",function(c){k();g.unbind(c)});return e}}});
define("aloha/core util/class util/html jquery aloha/ecma5shims aloha/console aloha/block-jump".split(" "),function(g,f,n,m,k,e,l){function d(a){return"false"===m(a).attr("contenteditable")}function c(a){return a&&3===a.nodeType}function b(a){return a?c(a)?a.length:a.childNodes.length:0}function p(a){return a?a.nextSibling?c(a.nextSibling)&&!(0<a.nextSibling.data.replace(/\s+/g,"").length)||"BR"===a.nextSibling.nodeName&&a.nextSibling===a.parentNode.lastChild||""===a.nextSibling.innerHTML&&!d(a.nextSibling)?
p(a.nextSibling):a.nextSibling:a.parentNode?p(a.parentNode):null:null}function r(a){return a?a.previousSibling?!c(a.previousSibling)||0<a.previousSibling.data.replace(/\s+/g,"").length?""!==a.previousSibling.innerHTML||d(a.previousSibling)?a.previousSibling:r(a.previouSibling):r(a.previousSibling):a.parentNode?r(a.parentNode):null:null}function u(a,b){return t?k.compareDocumentPosition(a,b)&16:0<m(a).find(b).length}function a(a){var b;if(b=window.$_alohaPlaceholder){b=a.startContainer;a=a.endContainer;
var c=window.$_alohaPlaceholder;b=!(c.is(b)||c.is(a)||u(c[0],b)||u(c[0],a))}b&&(0===window.$_alohaPlaceholder.html().replace(/^(&nbsp;)*$/,"").length&&window.$_alohaPlaceholder.remove(),window.$_alohaPlaceholder=null)}var q=window.GENTICS,t=!!(m.browser.msie&&9>parseInt(m.browser.version,10));g.Markup=f.extend({keyHandlers:{},addKeyHandler:function(a,b){this.keyHandlers[a]||(this.keyHandlers[a]=[]);this.keyHandlers[a].push(b)},removeKeyHandler:function(a){this.keyHandlers[a]&&(this.keyHandlers[a]=
null)},insertBreak:function(){var a=g.Selection.rangeObject,b,c,d;a.isCollapsed()||this.removeSelectedMarkup();d=m("<br/>");q.Utils.Dom.insertIntoDOM(d,a,g.activeEditable.obj);if(c=q.Utils.Dom.searchAdjacentTextNode(d.parent().get(0),q.Utils.Dom.getIndexInParent(d.get(0))+1,!1))b=c.data.search(/\S/),0<b&&(c.data=c.data.substring(b));a.startContainer=a.endContainer=d.get(0).parentNode;a.startOffset=a.endOffset=q.Utils.Dom.getIndexInParent(d.get(0))+1;a.correctRange();a.clearCaches();a.select()},preProcessKeyStrokes:function(b){if("keydown"!==
b.type)return!1;var c,d;if(this.keyHandlers[b.keyCode])for(c=this.keyHandlers[b.keyCode],d=0;d<c.length;++d)if(!c[d](b))return!1;return 37===b.keyCode||39===b.keyCode?g.getSelection().getRangeCount()&&(c=g.getSelection().getRangeAt(0),this.processCursor(c,b.keyCode))?(a(g.Selection.rangeObject),!0):!1:8===b.keyCode?(b.preventDefault(),g.execCommand("delete",!1),!1):46===b.keyCode?(g.execCommand("forwarddelete",!1),!1):13===b.keyCode?(!b.shiftKey&&n.allowNestedParagraph(g.activeEditable)?g.execCommand("insertparagraph",
!1):g.execCommand("insertlinebreak",!1),!1):!0},processCursor:function(e,f){if(!e.collapsed)return!0;l.removeZeroWidthTextNodeFix();var k=e.startContainer,n=g.getSelection();if(!k)return!0;var u,D;if(m.browser.msie&&7>=parseInt(m.browser.version,10)&&c(k))if(37==f){for(D=e.startOffset;0<D&&"\u200b"===k.data.charAt(D-1);)D--;D!=e.startOffset&&(e.setStart(e.startContainer,D),e.setEnd(e.startContainer,D),n=g.getSelection(),n.removeAllRanges(),n.addRange(e))}else if(39==f){for(D=e.startOffset;D<k.data.length&&
"\u200b"===k.data.charAt(D);)D++;D!=e.startOffset&&(e.setStart(e.startContainer,D),e.setEnd(e.startContainer,D),n.removeAllRanges(),n.addRange(e))}if(t&&!m(k).contentEditable()&&(D=m(k).parents("[contenteditable=false]"),0<D.length))if(D.parent().hasClass("aloha-editable"))u=D[0];else return!0;var F;if(!u){F=37===f||38===f;D=e.startOffset;if(c(k))if(F){if(1!==D&&!(0===D||D<=k.data.length-k.data.replace(/^\s+/,"").length))return!0}else{u=k;n=b(u);if(n===D)u=!0;else{var H=c(u);u=H&&u.data.replace(/\s+$/,
"").length===D?!0:1!==n||H?!1:"BR"===u.childNodes[0].nodeName}if(!u)return!0}else k=k.childNodes[D===b(k)?D-1:D];u=F?r(k):p(k)}return d(u)?(k=u,u=new q.Utils.RangeObject,D=F?r(k):p(k),!D||d(D)?(D=m("<div>&nbsp;</div>"),F?m(k).before(D):m(k).after(D),u.startContainer=u.endContainer=D[0],u.startOffset=u.endOffset=0,a(u),window.$_alohaPlaceholder=D):(3===e.startContainer.nodeType&&e.startContainer===e.endContainer&&""!==e.startContainer.nodeValue&&(F?1===e.startOffset:e.endOffset+1===e.endContainer.length)||
1===e.startContainer.nodeType&&(!e.startOffset||e.startContainer.childNodes[e.startOffset]&&1===e.startContainer.childNodes[e.startOffset].nodeType)?(D=l.insertZeroWidthTextNodeFix(k,F),u.startContainer=u.endContainer=D,u.startOffset=u.endOffset=F?1:0):(u.startContainer=u.endContainer=D,u.startOffset=u.endOffset=F?b(D):0,F||l.insertZeroWidthTextNodeFix(k,!0)),a(u)),u.select(),g.trigger("aloha-block-selected",k),g.Selection.preventSelectionChanged(),!1):!0},processShiftEnter:function(a){this.insertHTMLBreak(a.getSelectionTree(),
a)},processEnter:function(a){a.splitObject?this.splitRangeObject(a):this.insertHTMLBreak(a.getSelectionTree(),a)},insertHTMLCode:function(a){var b=g.Selection.rangeObject;this.insertHTMLBreak(b.getSelectionTree(),b,m(a))},insertHTMLBreak:function(a,b,c){var d,e,f,l,k;c=c||m("<br/>");d=0;for(e=a.length;d<e;++d)if(f=a[d],l=f.domobj?m(f.domobj):void 0,"none"!==f.selection)if("collapsed"==f.selection)0<d?(f=m(a[d-1].domobj),f.after(c)):(f=m(a[1].domobj),f.before(c)),b.startContainer=b.endContainer=c[0].parentNode,
b.startOffset=b.endOffset=q.Utils.Dom.getIndexInParent(c[0])+1,b.correctRange();else if(f.domobj&&3===f.domobj.nodeType){f.domobj.nextSibling&&1==f.domobj.nextSibling.nodeType&&g.Selection.replacingElements[f.domobj.nextSibling.nodeName.toLowerCase()]&&l.after("<br/>");if(this.needEndingBreak()){for(k=f.domobj;k;)if(k.nextSibling)k=!1;else{k=k.parentNode;if(q.Utils.Dom.isBlockLevelElement(k)||q.Utils.Dom.isListElement(k))break;k===b.limitObject&&(k=!1)}k&&m(k).append('<br class="aloha-cleanme" />')}l.between(c,
f.startOffset);l=0;for(f=c[0];f;)f=f.previousSibling,++l;b.startContainer=c[0].parentNode;b.endContainer=c[0].parentNode;b.startOffset=l;b.endOffset=l;b.correctRange()}else f.domobj&&1===f.domobj.nodeType&&(0===l.parent().find("br.aloha-ephemera").length&&(m(b.limitObject).find("br.aloha-ephemera").remove(),m(b.commonAncestorContainer).append(this.getFillUpElement(b.splitObject))),l.after(c),b.startContainer=b.commonAncestorContainer,b.endContainer=b.startContainer,b.startOffset=d+2,b.endOffset=d+
2,b.update());b.select()},needEndingBreak:function(){return!m.browser.msie},getSelectedText:function(){var a=g.Selection.rangeObject;return a.isCollapsed()?!1:this.getFromSelectionTree(a.getSelectionTree(),!0)},getFromSelectionTree:function(a,b){var c="",d,e,f,g;d=0;for(e=a.length;d<e;d++)f=a[d],"partial"==f.selection?3===f.domobj.nodeType?c+=f.domobj.data.substring(f.startOffset,f.endOffset):1===f.domobj.nodeType&&f.children&&(b?c+=this.getFromSelectionTree(f.children,b):(g=m(f.domobj.outerHTML).empty(),
g.html(this.getFromSelectionTree(f.children,b)),c+=g.outerHTML())):"full"==f.selection&&(3===f.domobj.nodeType?c+=m(f.domobj).text():1===f.domobj.nodeType&&f.children&&(c+=b?m(f.domobj).text():m(f.domobj).outerHTML()));return c},getSelectedMarkup:function(){var a=g.Selection.rangeObject;return a.isCollapsed()?null:this.getFromSelectionTree(a.getSelectionTree(),!1)},removeSelectedMarkup:function(){var a=g.Selection.rangeObject,b;a.isCollapsed()||(b=new g.Selection.SelectionRange,this.removeFromSelectionTree(a.getSelectionTree(),
b),b.update(),q.Utils.Dom.doCleanup({merge:!0,removeempty:!0},g.Selection.rangeObject),g.Selection.rangeObject=b,b.correctRange(),b.update(),b.select(),g.Selection.updateSelection())},removeFromSelectionTree:function(a,b){var c,d,e,f,g;e=0;for(g=a.length;e<g;e++)f=a[e],"partial"==f.selection?3===f.domobj.nodeType?(d="",0<f.startOffset&&(d+=f.domobj.data.substring(0,f.startOffset)),f.endOffset<f.domobj.data.length&&(d+=f.domobj.data.substring(f.endOffset,f.domobj.data.length)),f.domobj.data=d,b.startContainer||
(b.startContainer=b.endContainer=f.domobj,b.startOffset=b.endOffset=f.startOffset)):1===f.domobj.nodeType&&f.children&&(this.removeFromSelectionTree(f.children,b),c?c.nodeName==f.domobj.nodeName&&(m(c).append(m(f.domobj).contents()),m(f.domobj).remove()):c=f.domobj):"full"==f.selection&&(b.startContainer||((d=q.Utils.Dom.searchAdjacentTextNode(f.domobj.parentNode,q.Utils.Dom.getIndexInParent(f.domobj)+1,!1,{blocklevel:!1}))?(b.startContainer=b.endContainer=d,b.startOffset=b.endOffset=0):(b.startContainer=
b.endContainer=f.domobj.parentNode,b.startOffset=b.endOffset=q.Utils.Dom.getIndexInParent(f.domobj)+1)),m(f.domobj).remove())},splitRangeObject:function(a,b){m(a.splitObject);var c,d;a.update(a.splitObject);c=a.getSelectionTree();d=this.getSplitFollowUpContainer(a);this.splitRangeObjectHelper(c,a,d);d.hasClass("preparedForRemoval")&&d.removeClass("preparedForRemoval");c=this.getInsertAfterObject(a,d);m(d).insertAfter(c);"li"!==a.splitObject.nodeName.toLowerCase()||g.Selection.standardTextLevelSemanticsComparator(a.splitObject,
d)||m(a.splitObject).remove();a.startContainer=null;c=d.contents();0<c.length&&1==c.get(0).nodeType&&"br"===c.get(0).nodeName.toLowerCase()&&(a.startContainer=d.get(0));a.startContainer||(a.startContainer=d.textNodes(!0,!0).first().get(0));a.startContainer||(a.startContainer=d.textNodes(!1).first().parent().get(0));a.startContainer?(a.endContainer=a.startContainer,a.startOffset=0,a.endOffset=0):(a.startContainer=a.endContainer=d.parent().get(0),a.startOffset=a.endOffset=q.Utils.Dom.getIndexInParent(d.get(0)));
a.update();a.select()},getInsertAfterObject:function(a,b){var c,d,e;for(d=0;d<a.markupEffectiveAtStart.length;d++)if(e=a.markupEffectiveAtStart[d],e===a.splitObject&&(c=!0),c&&g.Selection.canTag1WrapTag2(m(e).parent()[0].nodeName,b[0].nodeName))return e;return!1},getFillUpElement:function(a){return m.browser.msie?!1:m('<br class="aloha-cleanme"/>')},removeElementContentWhitespaceObj:function(a){var b=0,c=[],d,e;for(d=0;d<a.length;++d)e=a[d],e.isElementContentWhitespace&&(c[c.length]=d);for(d=0;d<
c.length;++d)e=c[d],a.splice(e-b,1),++b},splitRangeObjectHelper:function(a,b,c,d){c||g.Log.warn(this,"no followUpContainer, no inBetweenMarkup, nothing to do...");var e=this.getFillUpElement(b.splitObject),f=m(b.splitObject),l=!1,k,n,p,t,r;if(0<a.length)for(p=c.contents(),p.length!==a.length&&this.removeElementContentWhitespaceObj(p),n=0,r=a.length;n<r;++n)k=a[n],"none"===k.selection&&!1===l||k.domobj&&3===k.domobj.nodeType&&k===a[a.length-1]&&k.startOffset===k.domobj.data.length?1<c.textNodes().length||
1===k.domobj.nodeType&&0===k.children.length?p.eq(n).remove():q.Utils.Dom.isSplitObject(c[0])?e?c.html(e):c.empty():(c.empty(),c.addClass("preparedForRemoval")):"none"!==k.selection?(k.domobj&&3===k.domobj.nodeType&&void 0!==k.startOffset&&(l=k.domobj.data,0<k.startOffset?k.domobj.data=l.substr(0,k.startOffset):1<a.length?m(k.domobj).remove():(t=m(k.domobj).parent(),q.Utils.Dom.isSplitObject(t[0])?e?t.html(e):t.empty():t.remove()),0<l.length-k.startOffset?p[n].data=l.substr(k.startOffset,l.length):
1<p.length?p.eq(n).remove():q.Utils.Dom.isBlockLevelElement(c[0])?e?c.html(e):c.empty():(c.empty(),c.addClass("preparedForRemoval"))),l=!0,0<k.children.length&&this.splitRangeObjectHelper(k.children,b,p.eq(n),d)):"none"===k.selection&&!0===l&&m(k.domobj).remove();else g.Log.error(this,"can not split splitObject due to an empty selection tree");f.find("br.aloha-ephemera:gt(0)").remove();c.find("br.aloha-ephemera:gt(0)").remove();f.find(".preparedForRemoval").remove();c.find(".preparedForRemoval").remove();
0===f.contents().length&&q.Utils.Dom.isSplitObject(f[0])&&e&&f.html(e);0===c.contents().length&&q.Utils.Dom.isSplitObject(c[0])&&e&&c.html(e)},getSplitFollowUpContainer:function(a){var b;switch(a.splitObject.nodeName.toLowerCase()){case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":if((b=m(a.splitObject).textNodes(":not(.aloha-cleanme)").last()[0])&&a.startContainer===b&&a.startOffset===b.length)return b=m("<p></p>"),a=m(a.splitObject.outerHTML).contents(),b.append(a),b;break;case "li":if("br"===
a.startContainer.nodeName.toLowerCase()&&m(a.startContainer).hasClass("aloha-ephemera"))return b=m("<p></p>"),a=m(a.splitObject.outerHTML).contents(),b.append(a),b;if(!a.splitObject.nextSibling&&0===m.trim(m(a.splitObject).text()).length)return b=m("<p></p>")}return m(a.splitObject.outerHTML)},transformDomObject:function(a,b,c){var d=m(a);b=m("<"+b+">");var e,f=d[0].cloneNode(!1).attributes;if(f)for(e=0;e<f.length;++e)("undefined"===typeof f[e].specified||f[e].specified)&&b.attr(f[e].nodeName,f[e].nodeValue);
d[0].style&&d[0].style.cssText&&(b[0].style.cssText=d[0].style.cssText);d.contents().appendTo(b);d.replaceWith(b);c&&(c.startContainer==a&&(c.startContainer=b.get(0)),c.endContainer==a&&(c.endContainer=b.get(0)));return b},toString:function(){return"Aloha.Markup"}});g.Markup=new g.Markup;return g.Markup});
define(["jquery","util/dom","util/maps","util/arrays"],function(g,f,n,m){function k(c){return 3===c.nodeType&&!c.length}var e={A:!0,B:!0,EM:!0,FONT:!0,I:!0,S:!0,SPAN:!0,STRIKE:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0},l="address article aside audio blockquote canvas dd div dl fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr noscript ol output p pre section table tfoot ul video".split(" "),d={};n.fillKeys(d,l,!0);n.fillKeys(d,m.map(l,function(c){return c.toUpperCase()}),!0);return{BLOCKLEVEL_ELEMENTS:l,
isBlock:function(c){return d[c.nodeName]},isIgnorableWhitespace:k,isInlineFormattable:function(c){return e[c.nodeName]},isProppedBlock:function(c){if(!d[c.nodeName])return!1;var b=!1;c=c.children;var e=c.length,f;for(f=0;f<e;f++)if(!b&&"br"===c[f].nodeName.toLowerCase())b=!0;else if(!k(c[f]))return!1;return b},isEditingHost:function(c){return 1===c.nodeType&&"true"===c.contentEditable},findNodeRight:function(c,b){for(;c&&!b(c);)c=c.previousSibling;return c},allowNestedParagraph:function(c){return c.obj[0]&&
f.allowsNesting(c.obj[0],g("<p>")[0])?!0:!1}}});define([],function(){return{isEmpty:function(g){for(var f in g)if(g.hasOwnProperty(f))return!1;return!0},fillTuples:function(g,f){for(var n=f.length,m;n--;)m=f[n],g[m[0]]=m[1];return g},fillKeys:function(g,f,n){for(var m=f.length;m--;)g[f[m]]=n;return g},keys:function(g){var f=[],n;for(n in g)g.hasOwnProperty(n)&&f.push(n);return f},forEach:function(g,f){for(var n in g)g.hasOwnProperty(n)&&f(g[n],n,g)}}});
define(["aloha/core","aloha/ecma5shims","util/maps","util/html","jquery"],function(g,f,n,m,k){function e(a,b){return a.hasAttribute?a.hasAttribute(b):"undefined"!=typeof a.attributes[b]}function l(a){return null===a||!a||a===Qa}function d(a,b){"string"==typeof b&&(b=[b]);"object"==typeof b&&(b=f(b).map(function(a){return a.toUpperCase()}));return a&&1==a.nodeType&&l(a.namespaceURI)&&("undefined"==typeof b||-1!=f(b).indexOf(a.tagName))}function c(a){return a&&1==a.nodeType&&l(a.namespaceURI)}function b(a,
b){return a&&1==a.nodeType&&l(a.namespaceURI)&&b.toUpperCase()===a.nodeName}function p(a,b){var c;if(c=a)if(c=1==a.nodeType)if(c=l(a.namespaceURI))a:{c=a.nodeName;var d,e;c=c.toUpperCase();d=0;for(e=b.length;d<e;d++)if(b[d].toUpperCase()===c){c=!0;break a}c=!1}return c}function r(a,b){return a&&1==a.nodeType&&l(a.namespaceURI)&&b[a.nodeName]}function u(a){var b,c=0;if(!a||!a.style)return 0;if("undefined"!==typeof a.style.length)return a.style.length;for(b in a.style)a.style[b]&&0!==a.style[b]&&"false"!==
a.style[b]&&c++;return c}function a(a){if(!a)return null;var b=[],c;for(c=a.length>>>0;c--;)b[c]=a[c];return b}function q(a){for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function t(a){return a.hasChildNodes()?a.firstChild:q(a)}function v(a){if(a.previousSibling){for(a=a.previousSibling;a.hasChildNodes();)a=a.lastChild;return a}return a.parentNode&&a.parentNode.nodeType==f.Node.ELEMENT_NODE?a.parentNode:null}function x(a,b){return a&&b&&Boolean(f.compareDocumentPosition(a,b)&
f.Node.DOCUMENT_POSITION_CONTAINED_BY)}function C(a,b){return(a||b)&&(a==b||x(a,b))}function y(a,b){return b&&a&&Boolean(f.compareDocumentPosition(b,a)&f.Node.DOCUMENT_POSITION_CONTAINED_BY)}function z(a,b){return Boolean(f.compareDocumentPosition(a,b)&f.Node.DOCUMENT_POSITION_FOLLOWING)}function D(a){for(var b=[];a.parentNode;)b.unshift(a.parentNode),a=a.parentNode;return b}function F(a){for(var b=[],c=q(a);null!=(a=t(a))&&a!=c;)b.push(a);return b}function H(a){return{"xx-small":1,small:2,medium:3,
large:4,"x-large":5,"xx-large":6,"xxx-large":7}[a]}function M(a){return"ltr"==a.dir?"ltr":"rtl"==a.dir?"rtl":c(a.parentNode)?M(a.parentNode):"ltr"}function I(a){for(var b=0;a.previousSibling;)b++,a=a.previousSibling;return b}function J(a){switch(a.nodeType){case f.Node.PROCESSING_INSTRUCTION_NODE:case f.Node.DOCUMENT_TYPE_NODE:return 0;case f.Node.TEXT_NODE:case f.Node.COMMENT_NODE:return a.length;default:return a.childNodes.length}}function K(a,b,c,d){if(a==c){if(b==d)return"equal";if(b<d)return"before";
if(b>d)return"after"}var e=f.compareDocumentPosition(c,a);if(e&f.Node.DOCUMENT_POSITION_FOLLOWING){d=K(c,d,a,b);if("before"==d)return"after";if("after"==d)return"before"}if(e&f.Node.DOCUMENT_POSITION_CONTAINS){for(;c.parentNode!=a;)c=c.parentNode;if(I(c)<b)return"after"}return"before"}function G(a){for(;null!=a.parentNode;)a=a.parentNode;return a}function S(a,b){return"after"!==K(a,0,b.startContainer,b.startOffset)||"before"!==K(a,J(a),b.endContainer,b.endOffset)?!1:G(a)==G(b.startContainer)}function O(a,
b){"undefined"==typeof b&&(b=function(){return!0});for(var c=a.startContainer,c=c.hasChildNodes()&&a.startOffset<c.childNodes.length?c.childNodes[a.startOffset]:a.startOffset==J(c)?q(c):t(c),d=a.endContainer,d=d.hasChildNodes()&&a.endOffset<d.childNodes.length?d.childNodes[a.endOffset]:q(d),e=[];z(c,d);)S(c,a)&&b(c)?(e.push(c),c=q(c)):c=t(c);return e}function s(a,b){"undefined"==typeof b&&(b=function(){return!0});for(var c=a.startContainer,c=c.hasChildNodes()&&a.startOffset<c.childNodes.length?c.childNodes[a.startOffset]:
a.startOffset==J(c)?q(c):t(c),d=a.endContainer,d=d.hasChildNodes()&&a.endOffset<d.childNodes.length?d.childNodes[a.endOffset]:q(d),e=[];z(c,d);)S(c,a)&&b(c)&&e.push(c),c=t(c);return e}function T(a){if("currentcolor"==a.toLowerCase())return null;var b=document.createElement("span");document.body.appendChild(b);b.style.color="black";var c=document.createElement("span");b.appendChild(c);c.style.color=a;a=f.getComputedStyle(c).color;if("rgb(0, 0, 0)"==a&&(b.color="white",a=f.getComputedStyle(c).color,
"rgb(0, 0, 0)"!=a))return null;document.body.removeChild(b);return/^rgba\([0-9]+, [0-9]+, [0-9]+, 1\)$/.test(a)?a.replace("rgba","rgb").replace(", 1)",")"):"transparent"==a?"rgba(0, 0, 0, 0)":a}function Q(a){a=a.toLowerCase();if(-1!=f("aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkgrey darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkslategrey darkturquoise darkviolet deeppink deepskyblue dimgray dimgrey dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray green greenyellow grey honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightgrey lightpink lightsalmon lightseagreen lightskyblue lightslategray lightslategrey lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray slategrey snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" ")).indexOf(a))return a;
a=T(a);var b=/^rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)$/.exec(a);return b?"#"+parseInt(b[1],10).toString(16).replace(/^.$/,"0$&")+parseInt(b[2],10).toString(16).replace(/^.$/,"0$&")+parseInt(b[3],10).toString(16).replace(/^.$/,"0$&"):/^#[abcdef0123456789]+$/i.exec(a)?a:null}function U(a){a=f(a).trim();if(/^[\-+]?[0-9]+(\.[0-9]+)?([eE][\-+]?[0-9]+)?$/.test(a)){var b;"+"==a[0]?(a=a.slice(1),b="relative-plus"):"-"==a[0]?(a=a.slice(1),b="relative-minus"):b="absolute";a=parseInt(a,10);"relative-plus"==b&&
(a+=3);"relative-minus"==b&&(a=3-a);1>a&&(a=1);7<a&&(a=7);a={1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[a]}return a}function N(a){a=U(a);if(-1==k.inArray(a,"xx-small x-small small medium large x-large xx-large xxx-large".split(" "))&&!/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc|px)$/.test(a))return null;var b=document.createElement("font");document.body.appendChild(b);"xxx-large"==a?b.size=7:b.style.fontSize=a;a=parseInt(f.getComputedStyle(b).fontSize,10);document.body.removeChild(b);
for(var c=1;7>c;){b=document.createElement("font");b.size=c;document.body.appendChild(b);var d=parseInt(f.getComputedStyle(b).fontSize,10);b.size=1+c;var e=parseInt(f.getComputedStyle(b).fontSize,10);document.body.removeChild(b);if(a<(e+d)/2)return String(c);c++}return"7"}function V(a,b,c,d){var e;0==E&&"undefined"!=typeof c?Oa=c:0==E&&(Oa=null,Oa=c);E++;try{e=d()}catch(f){throw E--,f;}E--;return e}function P(a,b){a=a.toLowerCase();return V(a,"action",b,function(a){return function(){return-1!=k.inArray(a,
"copy cut paste selectall stylewithcss usecss".split(" "))||null!==b}}(a))}function aa(a){var b=new window.GENTICS.Utils.RangeObject;b.startContainer=a.startContainer;b.startOffset=a.startOffset;b.endContainer=a.endContainer;b.endOffset=a.endOffset;b.select()}function ea(a,b,c,d){var e=a.toLowerCase(),f=b,g=c;if(1==arguments.length||4<=arguments.length&&"undefined"==typeof f)f=!1;if(2>=arguments.length||4<=arguments.length&&"undefined"==typeof g)g="";return V(e,"action",d,function(a,b,c){return function(){if(!P(a))return!1;
fa[a].action(c,d);aa(d);return!0}}(e,f,g))}function ga(a,b){a=a.toLowerCase();return V(a,"state",b,function(a){return function(){return P(a,b)?"undefined"!=typeof Ua(a,b)?Ua(a,b):fa[a].state(b):!1}}(a))}function na(a,b){a=a.toLowerCase();return V(a,"value",b,function(){return fa.hasOwnProperty(a)&&fa[a].hasOwnProperty("value")?"fontsize"==a&&void 0!==Wa("fontsize",b)?N(Wa("fontsize",b)):"undefined"!=typeof Wa(a,b)?Wa(a,b):fa[a].value(b):""})}function W(a){return r(a,L)}function Z(a){return a&&(a.nodeType==
f.Node.ELEMENT_NODE&&!X[f.getComputedStyle(a).display]||a.nodeType==f.Node.DOCUMENT_NODE||a.nodeType==f.Node.DOCUMENT_FRAGMENT_NODE)}function ca(a){return a&&!Z(a)}function ja(a){return a&&a.nodeType==f.Node.ELEMENT_NODE&&("true"==a.contentEditable||a.parentNode&&a.parentNode.nodeType==f.Node.DOCUMENT_NODE&&"on"==a.parentNode.designMode)}function R(a){return a&&!ja(a)&&(a.nodeType!=f.Node.ELEMENT_NODE||"false"!=a.contentEditable||k(a).hasClass("aloha-table-wrapper"))&&(ja(a.parentNode)||R(a.parentNode))}
function ya(a){var b;for(b=0;b<a.childNodes.length;b++)if(R(a.childNodes[b])||ya(a.childNodes[b]))return!0;return!1}function Ha(a){if(ja(a))return a;if(R(a)){for(a=a.parentNode;!ja(a);)a=a.parentNode;return a}return null}function va(a,b){return Ha(a)&&Ha(a)==Ha(b)}function Y(a){if(!b(a,"br"))return!1;for(var c=a.parentNode;"inline"==f.getComputedStyle(c).display;)c=c.parentNode;var d=c.style.height,e=c.style.maxHeight,g=c.style.minHeight;c.style.height="auto";c.style.maxHeight="none";k.browser.msie&&
8>k.browser.version||(c.style.minHeight="0");var l=document.createTextNode("\u200b"),m=c.offsetHeight;if(0==m)throw"isCollapsedLineBreak: original height is zero, bug?";a.parentNode.insertBefore(l,a.nextSibling);a=c.offsetHeight;l.parentNode.removeChild(l);c.style.height=d;c.style.maxHeight=e;k.browser.msie&&8>k.browser.version||(c.style.minHeight=g);return m<a-5}function Ca(a){if(!b(a,"br")||b(a.parentNode,"li")&&1==a.parentNode.childNodes.length)return!1;for(var c=a.parentNode;"inline"==f.getComputedStyle(c).display;)c=
c.parentNode;var d=c.style.height,e=c.style.maxHeight,g=c.style.minHeight,l=c.contentEditable;c.style.height="auto";c.style.maxHeight="none";c.style.minHeight="0";k.browser.msie&&7>=k.browser.version&&(c.contentEditable="false");var m=c.offsetHeight;if(0==m)throw"isExtraneousLineBreak: original height is zero, bug?";var n=a.style.display;a.style.display="none";var q=c.offsetHeight;c.style.height=d;c.style.maxHeight=e;c.style.minHeight=g;k.browser.msie&&7>=k.browser.version&&(c.contentEditable=l);
a.style.display=n;return m==q}function za(a){return a&&a.nodeType==f.Node.TEXT_NODE&&(""==a.data||/^[\t\n\r ]+$/.test(a.data)&&a.parentNode&&a.parentNode.nodeType==f.Node.ELEMENT_NODE&&-1!=k.inArray(f.getComputedStyle(a.parentNode).whiteSpace,["normal","nowrap"])||/^[\t\r ]+$/.test(a.data)&&a.parentNode&&a.parentNode.nodeType==f.Node.ELEMENT_NODE&&"pre-line"==f.getComputedStyle(a.parentNode).whiteSpace||/^[\t\n\r ]+$/.test(a.data)&&a.parentNode&&a.parentNode.nodeType==f.Node.DOCUMENT_FRAGMENT_NODE)}
function Da(a){if(!za(a))return!1;if(""==a.data)return!0;var c=a.parentNode;if(!c||f(D(a)).some(function(a){return a.nodeType==f.Node.ELEMENT_NODE&&"none"==f.getComputedStyle(a).display}))return!0;for(;!Z(c)&&c.parentNode;)c=c.parentNode;for(var d=a;d!=c;){d=v(d);if(Z(d)||b(d,"br"))return!0;if(d.nodeType==f.Node.TEXT_NODE&&!za(d)||b(d,"img"))break}d=a;for(a=q(c);d!=a;){d=t(d);if(Z(d)||b(d,"br"))return!0;if(d&&d.nodeType==f.Node.TEXT_NODE&&!za(d)||b(d,"img"))break}return!1}function ra(a){var c;if(!a||
f(D(a).concat(a)).filter(function(a){return a.nodeType==f.Node.ELEMENT_NODE},!0).some(function(a){return"none"==f.getComputedStyle(a).display}))return!1;if(Z(a)||a.nodeType==f.Node.TEXT_NODE&&!Da(a)||b(a,"img")||b(a,"br")&&!Ca(a))return!0;for(c=0;c<a.childNodes.length;c++)if(ra(a.childNodes[c]))return!0;return!1}function Ea(a){return a&&!ra(a)}function Va(a){var b;if(Y(a)&&!Ca(a))return!0;if(!ca(a)||a.nodeType!=f.Node.ELEMENT_NODE)return!1;var c=!1;for(b=0;b<a.childNodes.length;b++){if(!Ea(a.childNodes[b])&&
!Va(a.childNodes[b]))return!1;Va(a.childNodes[b])&&(c=!0)}return c}function rb(a){var b;if(a&&a.nodeType!==f.Node.TEXT_NODE)b=!1;else{b=0;a=a.data;for(var c=a.length;b<c&&"\u200b"===a.charAt(b);)b++;b=b===c}return!b}function Ta(a){var b;if(b=a)(b=!a.hasChildNodes())||(b=m.isBlock(a)?(b=m.findNodeRight(a.lastChild,ra))&&"br"===b.nodeName.toLowerCase()&&!m.findNodeRight(b.previousSibling,ra):!1,b=b||!m.findNodeRight(a.lastChild,rb)),b=b&&ja(a.parentNode)&&!a.previousSibling&&!a.nextSibling;return b}
function zb(a){var b=a.parentNode,c=I(a);b.removeChild(a);return{node:b,offset:c}}function ba(){var a;if(Oa)a=Oa;else if(g.getSelection().rangeCount)a=g.getSelection().getRangeAt(0);else return null;if(-1==k.inArray(a.startContainer.nodeType,[f.Node.TEXT_NODE,f.Node.ELEMENT_NODE])||-1==k.inArray(a.endContainer.nodeType,[f.Node.TEXT_NODE,f.Node.ELEMENT_NODE])||!(a.startContainer.ownerDocument&&a.endContainer.ownerDocument&&y(a.startContainer,a.startContainer.ownerDocument)&&y(a.endContainer,a.endContainer.ownerDocument)))throw"Invalid active range; test bug?";
return a}function Ia(a,b,c,d){-1==c&&(c=b.childNodes.length);var e=a.parentNode,l=I(a),k,m=[d];for(k=0;k<g.getSelection().rangeCount;k++)m.push(g.getSelection().getRangeAt(k));var n=[];f(m).forEach(function(a){n.push([a.startContainer,a.startOffset]);n.push([a.endContainer,a.endOffset])});f(n).forEach(function(a){a[0]==b&&a[1]>c&&a[1]++;a[0]!=e||a[1]!=l&&a[1]!=l+1||(a[0]=b,a[1]+=c-l);a[0]==e&&a[1]>l+1&&a[1]--});b.childNodes.length==c?b.appendChild(a):b.insertBefore(a,b.childNodes[c]);var q=null;if(n[0][1]>
n[0][0].childNodes.length&&n[1][1]>n[1][0].childNodes.length)d.setStart(a,0),d.setEnd(a,0);else{d.setStart(n[0][0],n[0][1]);d.setEnd(n[1][0],n[1][1]);g.getSelection().removeAllRanges();for(k=1;k<m.length;k++)q=g.createRange(),q.setStart(n[2*k][0],n[2*k][1]),q.setEnd(n[2*k+1][0],n[2*k+1][1]),g.getSelection().addRange(q);q&&(d=q)}}function ua(a,b){k.browser.msie&&7<=k.browser.version&&"undefined"!==typeof a.attributes[k.expando]&&k(a).removeAttr(k.expando);var c=a.attributes,d;for(d=0;d<c.length;d++){var e=
c[d];if("undefined"===typeof e.specified||e.specified)"function"===typeof b.setAttributeNS?b.setAttributeNS(e.namespaceURI,e.name,e.value):b.setAttribute(e.name,e.value)}}function Ja(a,c,d){if(b(a,c)||!a.parentNode)return a;c=a.ownerDocument.createElement(c);a.parentNode.insertBefore(c,a);for(ua(a,c);a.childNodes.length;)Ia(a.firstChild,c,c.childNodes.length,d);a.parentNode.removeChild(a);d.startContainer===a&&(d.startContainer=c);d.endContainer===a&&(d.endContainer=c);return c}function jb(a){var b=
a.previousSibling;if(b){for(;b.hasChildNodes();)b=b.lastChild;for(;Ea(b)&&!Ca(b)&&b!=a.parentNode;)b=v(b);R(b)&&Ca(b)&&b.parentNode.removeChild(b)}}function sb(a){for(var b=a;b.hasChildNodes();)b=b.lastChild;for(;Ea(b)&&!Ca(b)&&b!=a;)b=v(b);R(b)&&Ca(b)&&b.parentNode.removeChild(b)}function Fb(a){jb(a);sb(a)}function Pa(a,c,d,e){var f;"undefined"==typeof c&&(c=function(){return!1});"undefined"==typeof d&&(d=function(){return null});if(!a.length||!R(a[0]))return null;ca(a[a.length-1])&&!b(a[a.length-
1],"br")&&b(a[a.length-1].nextSibling,"br")&&a.push(a[a.length-1].nextSibling);d=R(a[0].previousSibling)&&c(a[0].previousSibling)?a[0].previousSibling:R(a[a.length-1].nextSibling)&&c(a[a.length-1].nextSibling)?a[a.length-1].nextSibling:d();if(!d)return null;if(!d.parentNode){a[0].parentNode.insertBefore(d,a[0]);f=e.startContainer;var g=e.startOffset,l=e.endContainer,k=e.endOffset;f==d.parentNode&&g>=I(d)&&e.setStart(f,g+1);l==d.parentNode&&k>=I(d)&&e.setEnd(l,k+1);Oa&&Oa!==e&&(f=Oa.startContainer,
g=Oa.startOffset,l=Oa.endContainer,k=Oa.endOffset,f==d.parentNode&&g>=I(d)&&Oa.setStart(f,g+1),l==d.parentNode&&k>=I(d)&&Oa.setEnd(l,k+1))}g=a[0].parentNode;if(z(d,a[0]))for(!ca(d)&&ca(d.lastChild)&&ca(a[0])&&!b(d.lastChild,"BR")&&d.appendChild(d.ownerDocument.createElement("br")),f=0;f<a.length;f++)Ia(a[f],d,-1,e);else for(!ca(d)&&ca(d.firstChild)&&ca(a[a.length-1])&&!b(a[a.length-1],"BR")&&d.insertBefore(d.ownerDocument.createElement("br"),d.firstChild),f=a.length-1;0<=f;f--)Ia(a[f],d,0,e);R(g)&&
!g.hasChildNodes()&&g.parentNode.removeChild(g);if(R(d.nextSibling)&&c(d.nextSibling)){for(!ca(d)&&ca(d.lastChild)&&ca(d.nextSibling.firstChild)&&!b(d.lastChild,"BR")&&d.appendChild(d.ownerDocument.createElement("br"));d.nextSibling.hasChildNodes();)Ia(d.nextSibling.firstChild,d,-1,e);d.parentNode.removeChild(d.nextSibling)}Fb(d);return d}function Ra(a,d){if((wa[d]||p(d,"colgroup table tbody tfoot thead tr".split(" ")))&&"object"==typeof a&&a.nodeType==f.Node.TEXT_NODE&&!/^[ \t\n\f\r]*$/.test(a.data)||
(Xc[d]||p(d,["script","style","plaintext","xmp"]))&&("object"!=typeof a||a.nodeType!=f.Node.TEXT_NODE)||"object"==typeof a&&(a.nodeType==f.Node.DOCUMENT_NODE||a.nodeType==f.Node.DOCUMENT_FRAGMENT_NODE||a.nodeType==f.Node.DOCUMENT_TYPE_NODE))return!1;c(a)&&(a=a.tagName.toLowerCase());if("string"!=typeof a)return!0;if(c(d)){for(var e=d;e;){if("a"==a&&b(e,"a")||L[a.toUpperCase()]&&r(e,da)||/^h[1-6]$/.test(a)&&c(e)&&/^H[1-6]$/.test(e.tagName))return!1;e=e.parentNode}d=d.tagName.toLowerCase()}if("object"==
typeof d&&(d.nodeType==f.Node.ELEMENT_NODE||d.nodeType==f.Node.DOCUMENT_FRAGMENT_NODE))return!0;if("string"!=typeof d)return!1;switch(d){case "colgroup":return"col"==a;case "table":return-1!=k.inArray(a,"caption col colgroup tbody td tfoot th thead tr".split(" "));case "tbody":case "thead":case "tfoot":return-1!=k.inArray(a,["td","th","tr"]);case "tr":return-1!=k.inArray(a,["td","th"]);case "dl":return-1!=k.inArray(a,["dt","dd"]);case "dir":case "ol":case "ul":return-1!=k.inArray(a,["dir","li","ol",
"ul"]);case "hgroup":return/^h[1-6]$/.test(a)}return-1!=k.inArray(a,"body caption col colgroup frame frameset head html tbody td tfoot th thead tr".split(" "))||-1!=k.inArray(a,["dd","dt"])&&"dl"!=d||"li"==a&&"ol"!=d&&"ul"!=d?!1:(e=Id[d.toUpperCase()])&&e[a.toUpperCase()]?!1:!0}function hc(a,b){return b.collapsed?!1:S(a,b)||a==b.startContainer&&a.nodeType==f.Node.TEXT_NODE&&J(a)!=b.startOffset||a==b.endContainer&&a.nodeType==f.Node.TEXT_NODE&&0!=b.endOffset||a.hasChildNodes()&&f(a.childNodes).every(function(a){return hc(a,
b)})&&!(y(b.startContainer,a)&&b.startContainer.nodeType==f.Node.TEXT_NODE&&0!=b.startOffset||y(b.endContainer,a)&&b.endContainer.nodeType==f.Node.TEXT_NODE&&b.endOffset!=J(b.endContainer))?!0:!1}function Sa(a,b){"undefined"==typeof b&&(b=function(){return!0});for(var c=a.startContainer;hc(c.parentNode,a);)c=c.parentNode;for(var d=q(a.endContainer),e=[];z(c,d);)hc(c,a)&&b(c)&&e.push(c),c=t(c);return e}function Wb(a){if(!c(a))return!1;if(-1!=k.inArray(a.tagName,"B EM I S SPAN STRIKE STRONG SUB SUP U".split(" "))&&
(0==a.attributes.length||1==a.attributes.length&&e(a,"style")))return!0;if("FONT"==a.tagName||"A"==a.tagName){var b=a.attributes.length;e(a,"style")&&b--;"FONT"==a.tagName&&(e(a,"color")&&b--,e(a,"face")&&b--,e(a,"size")&&b--);"A"==a.tagName&&e(a,"href")&&b--;if(0==b)return!0}return!1}function dc(a){return c(a)&&-1!=k.inArray(a.tagName,"A B EM FONT I S SPAN STRIKE STRONG SUB SUP U".split(" "))?0==a.attributes.length?!0:1<a.attributes.length?!1:e(a,"style")&&0==u(a)||"A"==a.tagName&&e(a,"href")||"FONT"==
a.tagName&&(e(a,"color")||e(a,"face")||e(a,"size"))||("B"==a.tagName||"STRONG"==a.tagName)&&e(a,"style")&&1==u(a)&&""!=a.style.fontWeight||("I"==a.tagName||"EM"==a.tagName)&&e(a,"style")&&1==u(a)&&""!=a.style.fontStyle||("A"==a.tagName||"FONT"==a.tagName||"SPAN"==a.tagName)&&e(a,"style")&&1==u(a)&&""==a.style.textDecoration||-1!=k.inArray(a.tagName,"A FONT S SPAN STRIKE U".split(" "))&&e(a,"style")&&1==u(a)&&("line-through"==a.style.textDecoration||"underline"==a.style.textDecoration||"overline"==
a.style.textDecoration||"none"==a.style.textDecoration)?!0:!1:!1}function Xa(a,b,c){return null===b&&null===c||"string"==typeof b&&"string"==typeof c&&b==c&&!fa[a].hasOwnProperty("equivalentValues")||"string"==typeof b&&"string"==typeof c&&fa[a].hasOwnProperty("equivalentValues")&&fa[a].equivalentValues(b,c)?!0:!1}function tb(a,b,c){if(Xa(a,b,c))return!0;if("fontsize"!=a||"string"!=typeof b||"string"!=typeof c)return!1;var d=tb;if(void 0===d.sizeMap){d.sizeMap={};var e=document.createElement("font");
document.body.appendChild(e);f("xx-small small medium large x-large xx-large xxx-large".split(" ")).forEach(function(a){e.size=H(a);d.sizeMap[a]=f.getComputedStyle(e).fontSize});document.body.removeChild(e)}return b===d.sizeMap[c]||c===d.sizeMap[b]}function xa(a,d){if(a.nodeType!=f.Node.ELEMENT_NODE&&(!a.parentNode||a.parentNode.nodeType!=f.Node.ELEMENT_NODE))return null;if(a.nodeType!=f.Node.ELEMENT_NODE)return xa(a.parentNode,d);if("createlink"==d||"unlink"==d){for(;a&&(!c(a)||"A"!=a.tagName||!e(a,
"href"));)a=a.parentNode;return a?a.getAttribute("href"):null}if("backcolor"==d||"hilitecolor"==d){for(;("rgba(0, 0, 0, 0)"==f.getComputedStyle(a).backgroundColor||""===f.getComputedStyle(a).backgroundColor||"transparent"==f.getComputedStyle(a).backgroundColor)&&a.parentNode&&a.parentNode.nodeType==f.Node.ELEMENT_NODE;)a=a.parentNode;return"rgba(0, 0, 0, 0)"==f.getComputedStyle(a).backgroundColor||""===f.getComputedStyle(a).backgroundColor||"transparent"==f.getComputedStyle(a).backgroundColor?"rgb(255, 255, 255)":
f.getComputedStyle(a).backgroundColor}if("subscript"==d||"superscript"==d){for(var g=!1,l=!1;ca(a);)f.getComputedStyle(a),b(a,"sub")?g=!0:b(a,"sup")&&(l=!0),a=a.parentNode;return g&&l?"mixed":g?"subscript":l?"superscript":null}if("strikethrough"==d){do{if(-1!=f.getComputedStyle(a).textDecoration.indexOf("line-through"))return"line-through";a=a.parentNode}while(a&&a.nodeType==f.Node.ELEMENT_NODE);return null}if("underline"==d){do{if(-1!=f.getComputedStyle(a).textDecoration.indexOf("underline"))return"underline";
a=a.parentNode}while(a&&a.nodeType==f.Node.ELEMENT_NODE);return null}if(!fa[d].hasOwnProperty("relevantCssProperty"))throw"Bug: no relevantCssProperty for "+d+" in getEffectiveCommandValue";return f.getComputedStyle(a)[fa[d].relevantCssProperty].toString()}function sa(a,d){if(("backcolor"==d||"hilitecolor"==d)&&"inline"!=f.getComputedStyle(a).display)return null;if("createlink"==d||"unlink"==d)return c(a)&&"A"==a.tagName&&e(a,"href")?a.getAttribute("href"):null;if("subscript"==d||"superscript"==d)return b(a,
"sup")?"superscript":b(a,"sub")?"subscript":null;if("strikethrough"==d&&""!=a.style.textDecoration)return-1!=a.style.textDecoration.indexOf("line-through")?"line-through":null;if("strikethrough"==d&&p(a,["S","STRIKE"]))return"line-through";if("underline"==d&&""!=a.style.textDecoration)return-1!=a.style.textDecoration.indexOf("underline")?"underline":null;if("underline"==d&&b(a,"U"))return"underline";var g=fa[d].relevantCssProperty;if(null===g)return null;if(""!=a.style[g])return a.style[g];if(l(a.namespaceURI)&&
"FONT"==a.tagName){if("color"==g&&e(a,"color"))return a.color;if("fontFamily"==g&&e(a,"face"))return a.face;if("fontSize"==g&&e(a,"size"))return g=parseInt(a.size,10),1>g&&(g=1),7<g&&(g=7),{1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[g]}return"fontWeight"!=g||"B"!=a.tagName&&"STRONG"!=a.tagName?"fontStyle"!=g||"I"!=a.tagName&&"EM"!=a.tagName?null:"italic":"bold"}function Nb(a,b,c,d){for(var e=a;Wb(e)&&1==e.childNodes.length&&Wb(e.firstChild)&&(!dc(e)||!Xa(b,
sa(e,b),c));)e=e.firstChild;if(e!=a&&dc(e)&&Xa(b,sa(e,b),c)&&tb(b,xa(e,b),c)){for(;e.hasChildNodes();)Ia(e.firstChild,e.parentNode,I(e),d);a.parentNode.insertBefore(e,a.nextSibling);Ia(a,e,-1,d)}}function Ka(a){var b=[];a=k.makeArray(a);var c,d,e,f,g,l;for(c=0;c<a.length;c++)for(e=a[c],d=0;d<Xb.length;d++){f=Xb[d];g=e;1!=g.nodeType&&(g=g.parentNode);for(l=null;g&&1==g.nodeType&&null===(l=sa(g,f));)g=g.parentNode;b.push([e,f,l])}return b}function Gb(c,d,e){if(!R(c)||null===sa(c,d))return[];if(dc(c)){d=
Array.prototype.slice.call(a(c.childNodes));var f;for(f=0;f<d.length;f++)Ia(d[f],c.parentNode,I(c),e);c.parentNode.removeChild(c);return d}"strikethrough"==d&&-1!=c.style.textDecoration.indexOf("line-through")&&(c.style.textDecoration="line-through"==c.style.textDecoration?"":c.style.textDecoration.replace("line-through",""),""==c.getAttribute("style")&&c.removeAttribute("style"));"underline"==d&&-1!=c.style.textDecoration.indexOf("underline")&&(c.style.textDecoration="underline"==c.style.textDecoration?
"":c.style.textDecoration.replace("underline",""),""==c.getAttribute("style")&&c.removeAttribute("style"));null!==fa[d].relevantCssProperty&&(c.style[fa[d].relevantCssProperty]="",""==c.getAttribute("style")&&c.removeAttribute("style"));l(c.namespaceURI)&&"FONT"==c.tagName&&("forecolor"==d&&c.removeAttribute("color"),"fontname"==d&&c.removeAttribute("face"),"fontsize"==d&&c.removeAttribute("size"));!b(c,"A")||"createlink"!=d&&"unlink"!=d||c.removeAttribute("href");return null===sa(c,d)?[]:[Ja(c,"span",
e)]}function eb(a,c,d,e){var g=[],l,m;if(a.parentNode&&null!==d&&(Ra(a,"span")&&(Nb(a.previousSibling,c,d,e),Nb(a.nextSibling,c,d,e),Pa([a],function(a){return dc(a)&&Xa(c,sa(a,c),d)&&tb(c,xa(a,c),d)},function(){return null},e)),!tb(c,xa(a,c),d)))if(!Ra(a,"span")){for(l=0;l<a.childNodes.length;l++){if(a.childNodes[l].nodeType==f.Node.ELEMENT_NODE&&(m=sa(a.childNodes[l],c),null!==m&&!Xa(c,d,m)))continue;g.push(a.childNodes[l])}for(l=0;l<g.length;l++)eb(g[l],c,d,e)}else if(!tb(c,xa(a,c),d)){g=null;kb||
("bold"!=c||"bold"!=d&&"700"!=d||(g=a.ownerDocument.createElement("b")),"italic"==c&&"italic"==d&&(g=a.ownerDocument.createElement("i")),"strikethrough"==c&&"line-through"==d&&(g=a.ownerDocument.createElement("s")),"underline"==c&&"underline"==d&&(g=a.ownerDocument.createElement("u")),"forecolor"==c&&Q(d)&&(g=a.ownerDocument.createElement("span"),k(g).css("color",Q(d))),"fontname"==c&&(g=a.ownerDocument.createElement("font"),g.face=d));if("createlink"==c||"unlink"==c)for(g=a.ownerDocument.createElement("a"),
g.setAttribute("href",d),l=a.parentNode;l;)b(l,"A")&&(l=Ja(l,"span",e)),l=l.parentNode;"fontsize"!=c||-1==k.inArray(d,"xx-small small medium large x-large xx-large xxx-large".split(" "))||kb&&"xxx-large"!=d||(g=a.ownerDocument.createElement("font"),g.size=H(d));"subscript"!=c&&"superscript"!=c||"subscript"!=d||(g=a.ownerDocument.createElement("sub"));"subscript"!=c&&"superscript"!=c||"superscript"!=d||(g=a.ownerDocument.createElement("sup"));g||(g=a.ownerDocument.createElement("span"));a.parentNode.insertBefore(g,
a);l=fa[c].relevantCssProperty;null===l||tb(c,xa(g,c),d)||(g.style[l]=d);"strikethrough"==c&&"line-through"==d&&"line-through"!=xa(g,"strikethrough")&&(g.style.textDecoration="line-through");"underline"==c&&"underline"==d&&"underline"!=xa(g,"underline")&&(g.style.textDecoration="underline");Ia(a,g,g.childNodes.length,e);if(a.nodeType==f.Node.ELEMENT_NODE&&!Xa(c,xa(a,c),d)){Ia(a,g.parentNode,I(g),e);g.parentNode.removeChild(g);g=[];for(l=0;l<a.childNodes.length;l++){if(a.childNodes[l].nodeType==f.Node.ELEMENT_NODE&&
(m=sa(a.childNodes[l],c),null!==m&&!Xa(c,d,m)))continue;g.push(a.childNodes[l])}for(l=0;l<g.length;l++)eb(g[l],c,d,e)}}}function Ab(b,c,d,e){if(b.parentNode&&b.parentNode.nodeType==f.Node.ELEMENT_NODE&&!tb(c,xa(b,c),d)){for(var g=b.parentNode,l=[];R(g)&&g.nodeType==f.Node.ELEMENT_NODE&&!tb(c,xa(g,c),d);)l.push(g),g=g.parentNode;if(l.length){var k=sa(l[l.length-1],c);if(null!==k||k==d)if(null===d||tb(c,xa(l[l.length-1].parentNode,c),d))for(;l.length;)for(g=l.pop(),null!==sa(g,c)&&(k=sa(g,c)),d=Array.prototype.slice.call(a(g.childNodes)),
null!==sa(g,c)&&Gb(g,c,e),g=0;g<d.length;g++){var m=d[g];m!=b&&(m.nodeType!=f.Node.ELEMENT_NODE||null===sa(m,c)||Xa(c,k,sa(m,c)))&&m!=l[l.length-1]&&eb(m,c,k,e)}}}}function Ya(a,b){f(a).forEach(function(a){var c=a[0],d=a[1];a=a[2];var e=c;e&&e.nodeType==f.Node.ELEMENT_NODE||(e=e.parentNode);for(;e&&e.nodeType==f.Node.ELEMENT_NODE&&null===sa(e,d);)e=e.parentNode;null===a&&e&&e.nodeType==f.Node.ELEMENT_NODE?Ab(c,d,null,b):(e&&e.nodeType==f.Node.ELEMENT_NODE&&!Xa(d,sa(e,d),a)||(!e||e.nodeType!=f.Node.ELEMENT_NODE)&&
null!==a)&&eb(c,d,a,b)})}function Na(a,b,c){c=c||ba();if(f(Sa(c)).filter(function(a){return a.nodeType==f.Node.TEXT_NODE},!0).some(R)){if(R(c.startContainer)&&c.startContainer.nodeType==f.Node.TEXT_NODE&&0!=c.startOffset&&c.startOffset!=J(c.startContainer)){var d=c.startContainer.splitText(c.startOffset),e=g.createRange();if(c.startContainer==c.endContainer){var l=c.endOffset-c.startOffset;e.setEnd(d,l);c.setEnd(d,l)}e.setStart(d,0);g.getSelection().removeAllRanges();g.getSelection().addRange(e);
c.setStart(d,0)}R(c.endContainer)&&c.endContainer.nodeType==f.Node.TEXT_NODE&&0!=c.endOffset&&c.endOffset!=J(c.endContainer)&&(d=c,e=[d.startContainer,d.startOffset],l=[d.endContainer,d.endOffset],d.endContainer.splitText(d.endOffset),d.setStart(e[0],e[1]),d.setEnd(l[0],l[1]),g.getSelection().removeAllRanges(),g.getSelection().addRange(d));f(Sa(ba(),function(a){return R(a)&&a.nodeType==f.Node.ELEMENT_NODE})).forEach(function(b){Gb(b,a,c)});f(Sa(c,R)).forEach(function(d){Ab(d,a,b,c);eb(d,a,b,c)})}else fa[a].hasOwnProperty("inlineCommandActivatedValues")&&
ub(a,-1!=f(fa[a].inlineCommandActivatedValues).indexOf(b),c),"subscript"==a&&Sb("superscript",c),"superscript"==a&&Sb("subscript",c),null===b?A(a,c):fa[a].hasOwnProperty("value")&&Tb(a,b,c)}function Yb(a,b){var c;if(a.nodeType===f.Node.TEXT_NODE&&b<a.length)for(c=b;c<a.length;c++)if("\t"!==a.data.charAt(c)&&"\r"!==a.data.charAt(c)&&"\n"!==a.data.charAt(c)||160===a.data.charCodeAt(c))return!1;if(a.nextSibling&&a.nextSibling.className&&0<=a.nextSibling.className.indexOf("aloha-table-wrapper"))return a.nextSibling;
if(a.parentNode&&a.parentNode.nextSibling&&a.parentNode.nextSibling.className&&0<=a.parentNode.nextSibling.className.indexOf("aloha-table-wrapper"))return a.parentNode.nextSibling;if(a.parentNode&&a.parentNode.nextSibling&&za(a.parentNode.nextSibling)&&a.parentNode.nextSibling.nextSibling&&a.parentNode.nextSibling.nextSibling.className&&0<=a.parentNode.nextSibling.nextSibling.className.indexOf("aloha-table-wrapper"))return a.parentNode.nextSibling.nextSibling}function Ob(a,b){var c;if(a.nodeType===
f.Node.TEXT_NODE&&0<b)for(c=b-1;0<=c;c--)if("\t"!==a.data.charAt(c)&&"\r"!==a.data.charAt(c)&&"\n"!==a.data.charAt(c)||160===a.data.charCodeAt(c))return!1;return a.previousSibling&&a.previousSibling.className&&0<=a.previousSibling.className.indexOf("aloha-table-wrapper")?a.previousSibling:a.parentNode&&a.parentNode.previousSibling&&a.parentNode.previousSibling.className&&0<=a.parentNode.previousSibling.className.indexOf("aloha-table-wrapper")?a.parentNode.previousSibling:a.parentNode&&a.parentNode.previousSibling&&
za(a.parentNode.previousSibling)&&a.parentNode.previousSibling.previousSibling&&a.parentNode.previousSibling.previousSibling.className&&0<=a.parentNode.previousSibling.previousSibling.className.indexOf("aloha-table-wrapper")?a.parentNode.previousSibling.previousSibling:!1}function lb(a,c){return!a.parentNode&&0==c||0<=c-1&&c-1<a.childNodes.length&&ra(a.childNodes[c-1])&&(Z(a.childNodes[c-1])||b(a.childNodes[c-1],"br"))}function db(a,b){return!a.parentNode&&b==J(a)||b<a.childNodes.length&&ra(a.childNodes[b])&&
Z(a.childNodes[b])}function ha(a,b){return lb(a,b)||db(a,b)}function ta(a){for(var b=0;!ha(a,b);){if(0<=b-1&&b-1<a.childNodes.length&&ra(a.childNodes[b-1]))return!1;0!=b&&a.hasChildNodes()?(a=a.childNodes[b-1],b=J(a)):(b=I(a),a=a.parentNode)}return!0}function Fa(a){for(var b=J(a);!ha(a,b);){if(b<a.childNodes.length&&ra(a.childNodes[b]))return!1;b!=J(a)&&a.hasChildNodes()?(a=a.childNodes[b],b=0):(b=1+I(a),a=a.parentNode)}return!0}function ab(a,c){var d,e=a[0].parentNode;if(R(e)&&e.parentNode){-1!=
k.inArray(e.firstChild,a)&&jb(e);d=-1!=k.inArray(e.firstChild,a);var f=-1!=k.inArray(e.lastChild,a),g=d&&ta(e),l=f&&Fa(e);if(!d&&f){for(d=a.length-1;0<=d;d--)Ia(a[d],e.parentNode,1+I(e),c);l&&!Fa(a[a.length-1])&&a[a.length-1].parentNode.insertBefore(document.createElement("br"),a[a.length-1].nextSibling);sb(e)}else{if(!d)for(d=e.cloneNode(!1),e.removeAttribute("id"),e.parentNode.insertBefore(d,e);a[0].previousSibling;)Ia(e.firstChild,d,d.childNodes.length,c);for(d=0;d<a.length;d++)Ia(a[d],e.parentNode,
I(e),c);g&&!ta(a[0])&&a[0].parentNode.insertBefore(document.createElement("br"),a[0]);ca(a[a.length-1])&&!b(a[a.length-1],"br")&&b(e.firstChild,"br")&&!ca(e)&&e.removeChild(e.firstChild);e.hasChildNodes()?jb(e):(e.parentNode===c.startContainer&&e.parentNode===c.endContainer&&c.startContainer===c.endContainer&&c.startOffset===c.endOffset&&e.parentNode.childNodes.length===c.startOffset&&(c.startOffset=e.parentNode.childNodes.length-1,c.endOffset=c.startOffset),e.parentNode.removeChild(e),l&&!Fa(a[a.length-
1])&&a[a.length-1].parentNode.insertBefore(document.createElement("br"),a[a.length-1].nextSibling));!a[a.length-1].nextSibling&&a[a.length-1].parentNode&&sb(a[a.length-1].parentNode)}}}function la(a){if(!c(a))return!1;if("BLOCKQUOTE"==a.tagName)return!0;if("DIV"!=a.tagName)return!1;if("undefined"!==typeof a.style.length){var b;for(b=0;b<a.style.length;b++)if(/^(-[a-z]+-)?margin/.test(a.style[b]))return!0}else for(b in a.style)if(/^(-[a-z]+-)?margin/.test(b)&&a.style[b]&&0!==a.style[b])return!0;return!1}
function Hb(a){if(!la(a)||"BLOCKQUOTE"!=a.tagName&&"DIV"!=a.tagName)return!1;var b;for(b=0;b<a.attributes.length;b++)if(!l(a.attributes[b].namespaceURI)||-1==k.inArray(a.attributes[b].name,["style","class","dir"]))return!1;if("undefined"!==typeof a.style.length)for(b=0;b<a.style.length;b++){if(!/^(-[a-z]+-)?(margin|border|padding)/.test(a.style[b]))return!1}else for(var c in a.style)if(!/^(-[a-z]+-)?(margin|border|padding)/.test(c)&&a.style[c]&&0!==a.style[c]&&"false"!==a.style[c])return!1;return!0}
function Zb(a){return p(a,"address div h1 h2 h3 h4 h5 h6 listing p pre xmp".split(" "))}function Za(a){return Zb(a)||p(a,["li","dt","dd"])}function vb(){return document.createElement("br")}function wb(a){a&&(ja(a)||b(a.lastChild,"br")||f(a.childNodes).some(ra)||(k.browser.msie?k.browser.msie&&7>=k.browser.version&&p(a,"p h1 h2 h3 h4 h5 h6 pre blockquote".split(" "))&&(a.firstChild||a.appendChild(document.createTextNode("\u200b"))):a.appendChild(vb())))}function bb(a,c){var e;if(R(a))if(f(D(a)).every(function(b){return!va(a,
b)||!Ra(a,b)})&&!d(a,Ib))if(p(a,["dd","dt"]))Pa([a],function(a){return b(a,"dl")&&!a.attributes.length},function(){return document.createElement("dl")},c);else{if(W(a)){a=Ja(a,Ib,c);wb(a);bb(a,c);var g=F(a);for(e=0;e<g.length;e++)bb(g[e],c)}}else{for(var g=Ka([a]),l;!Ra(a,a.parentNode);){for(e=a.parentNode.childNodes.length-1;0<=e;--e)3==a.parentNode.childNodes[e].nodeType&&0==a.parentNode.childNodes[e].data.length&&(a.parentNode.removeChild(a.parentNode.childNodes[e]),c.startContainer==a.parentNode&&
c.startOffset>e&&c.startOffset--,c.endContainer==a.parentNode&&c.endOffset>e&&c.endOffset--);if(1==a.parentNode.childNodes.length){e=c.startOffset;l=c.endOffset;c.startContainer===a.parentNode&&c.startOffset>I(a)&&(e=c.startOffset+(k(a).contents().length-1));c.endContainer===a.parentNode&&c.endOffset>I(a)&&(l=c.endOffset+(k(a).contents().length-1));k(a).contents().unwrap();c.startOffset=e;c.endOffset=l;break}else if(e=a.parentNode,ab([a],c),e===a.parentNode){e=c.startOffset;l=c.endOffset;c.startContainer===
a.parentNode&&c.startOffset>I(a)&&(e=c.startOffset+(k(a).contents().length-1));c.endContainer===a.parentNode&&c.endOffset>I(a)&&(l=c.endOffset+(k(a).contents().length-1));k(a).contents().unwrap();c.startOffset=e;c.endOffset=l;break}}Ya(g,c)}}function Jb(a,c){function d(a){return p(a,["OL","UL"])}if(b(a,"LI")&&R(a)&&R(a.parentNode))for(var e=null;f(a.childNodes).some(d);){var g=a.lastChild;p(g,["OL","UL"])||!e&&g.nodeType==f.Node.TEXT_NODE&&/^[ \t\n\f\r]*$/.test(g.data)?(e=null,Ia(g,a.parentNode,1+
I(a),c)):(e||(e=a.ownerDocument.createElement("li"),a.parentNode.insertBefore(e,a.nextSibling)),Ia(g,e,0,c))}}function yc(a,c){p(a,["OL","UL"])&&R(a)&&k(a).children("ol,ul").each(function(a,d){b(d.previousSibling,"LI")&&Ia(d,d.previousSibling,d.previousSibling.childNodes.length,c)})}function Ba(a){var c=a.startContainer,d=a.startOffset,e=a.endContainer;a=a.endOffset;var l=f(D(c).concat(c)).filter(function(a){return b(a,"li")}).slice(-1);l.length&&(d=I(l[0]),c=l[0].parentNode);if(!lb(c,d)){do 0==d?
(d=I(c),c=c.parentNode):d--;while(!ha(c,d))}for(;0==d&&c.parentNode;)d=I(c),c=c.parentNode;l=f(D(e).concat(e)).filter(function(a){return b(a,"li")}).slice(-1);l.length&&(a=1+I(l[0]),e=l[0].parentNode);if(!db(e,a)){do a==J(e)?(a=1+I(e),e=e.parentNode):a++;while(!ha(e,a))}for(;a==J(e)&&e.parentNode;)a=1+I(e),e=e.parentNode;l=g.createRange();l.setStart(c,d);l.setEnd(e,a);return l}function ob(){var a=Ba(ba()),c=O(a,function(a){return R(a)&&!la(a)&&(p(a,["ol","ul"])||p(a.parentNode,["ol","ul"])||Ra(a,
"li"))});if(!c.length)return"none";if(f(c).every(function(a){return b(a,"ol")||b(a.parentNode,"ol")||b(a.parentNode,"li")&&b(a.parentNode.parentNode,"ol")})&&!f(c).some(function(a){return b(a,"ul")||a.querySelector&&a.querySelector("ul")}))return"ol";if(f(c).every(function(a){return b(a,"ul")||b(a.parentNode,"ul")||b(a.parentNode,"li")&&b(a.parentNode.parentNode,"ul")})&&!f(c).some(function(a){return b(a,"ol")||a.querySelector&&a.querySelector("ol")}))return"ul";a=f(c).some(function(a){return b(a,
"ol")||b(a.parentNode,"ol")||a.querySelector&&a.querySelector("ol")||b(a.parentNode,"li")&&b(a.parentNode.parentNode,"ol")});c=f(c).some(function(a){return b(a,"ul")||b(a.parentNode,"ul")||a.querySelector&&a.querySelector("ul")||b(a.parentNode,"li")&&b(a.parentNode.parentNode,"ul")});return a&&c?"mixed":a?"mixed ol":c?"mixed ul":"none"}function La(a){for(;a&&a.nodeType!=f.Node.ELEMENT_NODE||a.nodeType==f.Node.ELEMENT_NODE&&-1!=k.inArray(f.getComputedStyle(a).display,["inline","none"]);)a=a.parentNode;
if(!a||a.nodeType!=f.Node.ELEMENT_NODE)return"left";var b=f.getComputedStyle(a).textAlign.replace(/^-(moz|webkit)-/,"").replace(/^auto$/,"start");return"start"==b?"ltr"==M(a)?"left":"right":"end"==b?"ltr"==M(a)?"right":"left":-1!=k.inArray(b,["center","justify","left","right"])?b:"left"}function Kb(a){var b=[];void 0!==Wa("createlink",a)&&b.push(["createlink",Wa("createlink",a)]);f("bold italic strikethrough subscript superscript underline".split(" ")).forEach(function(c){void 0!==Ua(c,a)&&b.push([c,
Ua(c,a)])});f(["fontname","fontsize","forecolor","hilitecolor"]).forEach(function(c){void 0!==Wa(c,a)&&b.push([c,Wa(c,a)])});return b}function Pb(a){var b=[],c=f(Sa(a)).filter(function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE})[0];if(!c)return b;b.push(["createlink",fa.createlink.value(a)]);f("bold italic strikethrough subscript superscript underline".split(" ")).forEach(function(a){-1!=f(fa[a].inlineCommandActivatedValues).indexOf(xa(c,a))?b.push([a,!0]):b.push([a,!1])});f(["fontname","fontsize",
"forecolor","hilitecolor"]).forEach(function(c){b.push([c,fa[c].value(a)])});b.push(["fontsize",xa(c,"fontsize")]);return b}function pb(a,b){function c(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE}var d,e,g,l=f(Sa(b)).filter(function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE})[0];if(l)for(d=0;d<a.length;d++){e=a[d][0];g=a[d][1];if("boolean"==typeof g&&ga(e,b)!=g)ea(e,!1,g,b);else if("string"!=typeof g||"fontsize"==e||Xa(e,na(e,b),g))if("string"==typeof g&&"fontsize"==e&&(void 0!==Wa("fontsize",
b)&&Wa("fontsize",b)!==g||void 0===Wa("fontsize",b)&&!tb(e,xa(l,"fontsize"),g)))ea("fontsize",!1,g,b);else continue;else ea(e,!1,g,b);l=f(Sa(b)).filter(c)[0]||l}else for(d=0;d<a.length;d++)e=a[d][0],g=a[d][1],"boolean"==typeof g&&ub(e,g,b),"string"==typeof g&&Tb(e,g,b)}function Bb(a,b,c){if(0==a)return"";if(1==a&&!b&&!c)return" ";if(1==a)return"\u00a0";var d="",e;for(e=b?"\u00a0 ":" \u00a0";3<a;)d+=e,a-=2;return 3==a?d+(b||c?b&&!c?"\u00a0\u00a0 ":!b&&c?" \u00a0\u00a0":b&&c?"\u00a0 \u00a0":"impossible":
" \u00a0 "):d+(b||c?b&&!c?"\u00a0 ":!b&&c?" \u00a0":b&&c?"\u00a0\u00a0":"impossible":"\u00a0 ")}function fb(a,b){if(R(a)||ja(a)){for(var c=a,d=b;;)if(0<=d-1&&va(c,c.childNodes[d-1]))c=c.childNodes[d-1],d=J(c);else if(0==d&&!ta(c)&&va(c,c.parentNode))d=I(c),c=c.parentNode;else if(c.nodeType==f.Node.TEXT_NODE&&-1==k.inArray(f.getComputedStyle(c.parentNode).whiteSpace,["pre","pre-wrap"])&&0!=d&&/[ \xa0]/.test(c.data[d-1]))d--;else break;for(var e=c,g=d,l=0,m=!1;;)if(g<e.childNodes.length&&va(e,e.childNodes[g]))e=
e.childNodes[g],g=0;else if(g==J(e)&&!Fa(e)&&va(e,e.parentNode))g=1+I(e),e=e.parentNode;else if(e.nodeType==f.Node.TEXT_NODE&&-1==k.inArray(f.getComputedStyle(e.parentNode).whiteSpace,["pre","pre-wrap"])&&g!=J(e)&&/[ \xa0]/.test(e.data[g]))m&&" "==e.data[g]?e.deleteData(g,1):(m=" "==e.data[g],g++,l++);else break;for(l=Bb(l,0==d&&ta(c),g==J(e)&&Fa(e));"before"==K(c,d,e,g);)d<c.childNodes.length?(c=c.childNodes[d],d=0):c.nodeType!=f.Node.TEXT_NODE||d==J(c)?(d=1+I(c),c=c.parentNode):(m=l[0],l=l.slice(1),
m!=c.data[d]&&(c.insertData(d,m),c.deleteData(d+1,1)),d++)}}function ia(c,d,e,l,k){var m,n={},q;3>arguments.length?m=c:(m=g.createRange(),m.setStart(c,d),m.setEnd(e,l));2==arguments.length&&(n=d);5==arguments.length&&(n=k);var t=null!=n.blockMerging?!!n.blockMerging:!0,v=null!=n.stripWrappers?!!n.stripWrappers:!0;if(m){var A=m.startContainer;q=m.startOffset;for(var r=m.endContainer,C=m.endOffset,u;A.hasChildNodes();)if(q==J(A)&&va(A,A.parentNode)&&ca(A))q=1+I(A),A=A.parentNode;else{if(q==J(A))break;
u=A.childNodes[q];if(Z(u)||u.nodeType==f.Node.ELEMENT_NODE&&!u.hasChildNodes()||u.nodeType!=f.Node.ELEMENT_NODE&&u.nodeType!=f.Node.TEXT_NODE)break;A=u;q=0}for(;r.hasChildNodes();)if(0==C&&va(r,r.parentNode)&&ca(r))C=I(r),r=r.parentNode;else{if(0==C)break;u=r.childNodes[C-1];if(Z(u)||u.nodeType==f.Node.ELEMENT_NODE&&!u.hasChildNodes()||u.nodeType!=f.Node.ELEMENT_NODE&&u.nodeType!=f.Node.TEXT_NODE)break;r=u;C=J(u)}if("after"!==K(r,C,A,q))return m.setEnd(m.startContainer,m.startOffset),m;r.nodeType==
f.Node.TEXT_NODE&&C==J(r)&&A!=r&&(C=1+I(r),r=r.parentNode);m.setStart(A,q);m.setEnd(r,C);for(var E=m.startContainer;va(E,E.parentNode)&&ca(E);)E=E.parentNode;if(!Z(E)&&!ja(E)||!Ra("span",E)||p(E,["td","th"]))E=null;for(var s=m.endContainer;va(s,s.parentNode)&&ca(s);)s=s.parentNode;if(!Z(s)&&!ja(s)||!Ra("span",s)||p(s,["td","th"]))s=null;n=Pb(m);if(A==r&&R(A)&&A.nodeType==f.Node.TEXT_NODE)return u=A.parentNode,A.deleteData(q,C-q),0<q&&" "===A.data.substr(q-1,1)&&q<A.data.length&&" "===A.data.substr(q,
1)&&A.replaceData(q-1,1,"\u00a0"),fb(A,q),m.setStart(m.startContainer,m.startOffset),m.setEnd(m.startContainer,m.startOffset),pb(n,m),!R(u)&&!ja(u)||ca(u)||wb(u),m;R(A)&&A.nodeType==f.Node.TEXT_NODE&&A.deleteData(q,J(A)-q);var L=O(m,function(a){return R(a)&&!p(a,"thead tbody tfoot tr th td".split(" "))});for(q=0;q<L.length;q++){var z=L[q];u=z.parentNode;u.removeChild(z);if(v||!x(u,A)&&u!=A)for(;R(u)&&ca(u)&&0==J(u);)z=u.parentNode,z.removeChild(u),u=z;!R(u)&&!ja(u)||ca(u)||wb(u)}R(r)&&r.nodeType==
f.Node.TEXT_NODE&&r.deleteData(0,C);fb(m.startContainer,m.startOffset);fb(m.endContainer,m.endOffset);if(!(t&&E&&s&&va(E,s)&&E!=s))return m.setEnd(m.startContainer,m.startOffset),s=E||s,Ta(s)&&(s=zb(s),m.setStart(s.node,s.offset),m.setEnd(s.node,s.offset)),pb(n,m),m;1==E.children.length&&Va(E.firstChild)&&E.removeChild(E.firstChild);1==s.children.length&&Va(s.firstChild)&&s.removeChild(s.firstChild);if(x(E,s)){for(u=s;u.parentNode!=E;)u=u.parentNode;m.setStart(E,I(u));m.setEnd(E,I(u));if(!s.hasChildNodes()){for(;R(s)&&
1==s.parentNode.childNodes.length&&s.parentNode!=E;)u=s,u.removeChild(s),s=u;R(s)&&!ca(s)&&ca(s.previousSibling)&&ca(s.nextSibling)&&s.parentNode.insertBefore(document.createElement("br"),s.nextSibling);R(s)&&s.parentNode.removeChild(s);pb(n,m);return m}if(!ca(s.firstChild))return pb(n,m),m;v=[];for(v.push(s.firstChild);!b(v[v.length-1],"br")&&ca(v[v.length-1].nextSibling);)v.push(v[v.length-1].nextSibling);for(t=Ka(v);v[0].parentNode!=E;)ab(v,m);R(v[0].previousSibling)&&b(v[0].previousSibling,"br")&&
v[0].parentNode.removeChild(v[0].previousSibling)}else if(y(E,s)){m.setStart(E,J(E));m.setEnd(E,J(E));for(u=E;u.parentNode!=s;)u=u.parentNode;ca(u.nextSibling)&&b(E.lastChild,"br")&&E.removeChild(E.lastChild);s=[];!u.nextSibling||b(u.nextSibling,"br")||Z(u.nextSibling)||s.push(u.nextSibling);s.length&&s[s.length-1].nextSibling&&!b(s[s.length-1].nextSibling,"br")&&!Z(s[s.length-1].nextSibling)&&s.push(s[s.length-1].nextSibling);t=Ka(s);f(s).forEach(function(a){Ia(a,E,-1,m)});b(u.nextSibling,"br")&&
u.parentNode.removeChild(u.nextSibling)}else{m.setStart(E,J(E));m.setEnd(E,J(E));ca(s.firstChild)&&b(E.lastChild,"br")&&E.removeChild(E.lastChild);for(t=Ka([].slice.call(a(s.childNodes)));s.hasChildNodes();)Ia(s.firstChild,E,-1,m);for(;!s.hasChildNodes();)u=s.parentNode,u.removeChild(s),s=u}Ya(t,m);Ta(E)&&(s=zb(E),m.setStart(s.node,s.offset),m.setEnd(s.node,s.offset),E=s.node);wb(E);pb(n,m);return m}}function gb(b,c){b.hasChildNodes()?ab([].slice.call(a(b.childNodes)),c):b.parentNode.removeChild(b)}
function qc(a,b){a&&k(a).find("ul,ol,li").each(function(){k(this).contents().each(function(){if(za(this)){var a=I(this);b.startContainer===this.parentNode&&b.startOffset>a?b.startOffset--:b.startContainer===this&&(b.startContainer=this.parentNode,b.startOffset=a);b.endContainer===this.parentNode&&b.endOffset>a?b.endOffset--:b.endContainer===this&&(b.endContainer=this.parentNode,b.endOffset=a);k(this).remove()}})})}function Lb(a,b){if(a.length){var c=a[0];if(p(c.parentNode,["OL","UL"])){var e=c.parentNode.tagName;
Pa(a,function(a){return d(a,e)},function(){return c.ownerDocument.createElement(e)},b)}else{var f=Pa(a,function(a){return Hb(a)},function(){return c.ownerDocument.createElement("blockquote")},b);bb(f,b)}}}function xb(c,d){if(R(c))if(Hb(c))gb(c,d);else if(la(c))c.removeAttribute("class"),c.removeAttribute("dir"),c.style.margin="",c.style.padding="",c.style.border="",""==c.getAttribute("style")&&c.removeAttribute("style"),Ja(c,"div",d);else{for(var e=c.parentNode,g=[];R(e)&&e.nodeType==f.Node.ELEMENT_NODE&&
!Hb(e)&&!p(e,["ol","ul"]);)g.push(e),e=e.parentNode;if(!R(e)||!Hb(e))for(e=c.parentNode,g=[];R(e)&&e.nodeType==f.Node.ELEMENT_NODE&&!la(e)&&!p(e,["ol","ul"]);)g.push(e),e=e.parentNode;if(p(c,["OL","UL"])&&(!R(e)||!la(e))){c.removeAttribute("reversed");c.removeAttribute("start");c.removeAttribute("type");g=[].slice.call(a(c.childNodes));if(c.attributes.length&&!p(c.parentNode,["OL","UL"]))Ja(c,"div",d);else{var l=Ka([].slice.call(a(c.childNodes)));gb(c,d);Ya(l,d)}for(l=0;l<g.length;l++)bb(g[l],d)}else if(R(e)&&
la(e)){g.push(e);for(l=e;g.length;){var e=g.pop(),k=c.parentNode==e?c:g[g.length-1];ca(k)&&!b(k,"BR")&&b(k.nextSibling,"BR")&&k.parentNode.removeChild(k.nextSibling);var m=[].slice.call(a(e.childNodes),0,I(k)),e=[].slice.call(a(e.childNodes),1+I(k));Lb(m,d);Lb(e,d)}xb(l,d)}}}function fc(c,e){function g(){return document.createElement("li")}function l(a){return p(a,["ol","ul"])}function k(a){return function(b){return d(b,a)}}function m(a){return function(){return document.createElement(a)}}function n(a,
b,c){return function(){if(!(R(b[0].parentNode)&&Hb(b[0].parentNode)&&R(b[0].parentNode.previousSibling)&&d(b[0].parentNode.previousSibling,a)))return document.createElement(a);var e=b[0].parentNode.previousSibling;Jb(e.lastChild,c);R(e.lastChild)&&d(e.lastChild,a)||e.appendChild(document.createElement(a));return e.lastChild}}var q=ob()==c?"disable":"enable";c=c.toUpperCase();var t="OL"==c?"UL":"OL",v=[];(function(){var a;for(a=e.endContainer;a!=e.commonAncestorContainer;a=a.parentNode)b(a,"li")&&
v.unshift(a);for(a=e.startContainer;a;a=a.parentNode)b(a,"li")&&v.unshift(a)})();f(v).forEach(function(a){Jb(a,e)});var A=Ba(e);"enable"==q&&f(s(A,function(a){return R(a)&&d(a,t)})).forEach(function(b){if(R(b.previousSibling)&&d(b.previousSibling,c)||R(b.nextSibling)&&d(b.nextSibling,c)){b=[].slice.call(a(b.childNodes));var f=Ka(b);ab(b,e);Pa(b,function(a){return d(a,c)},function(){return null},e);Ya(f,e)}else Ja(b,c,e)});A=O(A,function(a){return R(a)&&!la(a)&&(p(a,["OL","UL"])||p(a.parentNode,["OL",
"UL"])||Ra(a,"li"))});"enable"==q&&(A=f(A).filter(function(a){return!p(a,["ol","ul"])||p(a.parentNode,["ol","ul"])}));var r;if("disable"==q)for(;A.length;)if(q=[],q.push(A.shift()),d(q[0],c))xb(q[0],e);else{for(;A.length&&A[0]==q[q.length-1].nextSibling&&!d(A[0],c);)q.push(A.shift());r=Ka(q);ab(q,e);var u;for(u=0;u<q.length;u++)bb(q[u],e);Ya(r,e)}else for(;A.length;){for(q=[];!q.length||A.length&&A[0]==q[q.length-1].nextSibling;)if(p(A[0],["p","div"]))q.push(Ja(A[0],"li",e)),A.shift();else if(p(A[0],
["li","ol","ul"]))q.push(A.shift());else{for(r=[];!r.length||A.length&&A[0]==r[r.length-1].nextSibling&&ca(A[0])&&ca(r[r.length-1])&&!b(r[r.length-1],"br");)r.push(A.shift());q.push(Pa(r,void 0,g,e))}d(q[0].parentNode,c)||f(q).every(l)||(d(q[0].parentNode,t)?(r=Ka(q),ab(q,e),Pa(q,k(c),m(c),e),Ya(r,e)):bb(Pa(q,k(c),n(c,q,e),e),e))}}function Cb(a,c){function d(a){return function(c){return b(c,"div")&&f(c.attributes).every(function(b){return"align"==b.name&&b.value.toLowerCase()==a||"style"==b.name&&
1==u(c)&&c.style.textAlign==a})}}function g(a){return function(){var b=document.createElement("div");b.setAttribute("style","text-align: "+a);return b}}for(var l=Ba(c),k=s(l,function(a){return a.nodeType==f.Node.ELEMENT_NODE&&R(a)&&(e(a,"align")||""!=a.style.textAlign||b(a,"center"))}),l=0;l<k.length;l++){var m=k[l];m.removeAttribute("align");m.style.textAlign="";""==m.getAttribute("style")&&m.removeAttribute("style");p(m,["div","span","center"])&&!m.attributes.length&&gb(m,c);b(m,"center")&&m.attributes.length&&
Ja(m,"div",c)}l=Ba(Oa);k=[];for(k=O(l,function(b){return R(b)&&Ra(b,"div")&&La(b)!=a});k.length;){l=[];for(l.push(k.shift());k.length&&k[0]==l[l.length-1].nextSibling;)l.push(k.shift());Pa(l,d(a),g(a),c)}}function cb(a,b){var c;if(a.collapsed){c=a.startOffset;if(b){if(a.startContainer&&a.startContainer.nodeType===f.Node.TEXT_NODE)for(;c<a.startContainer.data.length&&"\u200b"===a.startContainer.data.charAt(c);)c++}else if(a.startContainer&&a.startContainer.nodeType===f.Node.TEXT_NODE)for(;0<c&&"\u200b"===
a.startContainer.data.charAt(c-1);)c--;c!==a.startOffset&&(a.setStart(a.startContainer,c),a.setEnd(a.startContainer,c))}}var Qa="http://www.w3.org/1999/xhtml",kb=!1,Oa=null,fa={},Ua,ub,qb,Sb,Wa,Tb,A,E=0,L={ADDRESS:!0,ARTICLE:!0,ASIDE:!0,BLOCKQUOTE:!0,CAPTION:!0,CENTER:!0,COL:!0,COLGROUP:!0,DD:!0,DETAILS:!0,DIR:!0,DIV:!0,DL:!0,DT:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,HGROUP:!0,HR:!0,LI:!0,LISTING:!0,MENU:!0,NAV:!0,OL:!0,P:!0,PLAINTEXT:!0,
PRE:!0,SECTION:!0,SUMMARY:!0,TABLE:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0,UL:!0,XMP:!0},X={inline:!0,"inline-block":!0,"inline-table":!0,none:!0};(function(){var a={},b={},c=null;qb=function(d){if(!c||c.startContainer!=d.startContainer||c.endContainer!=d.endContainer||c.startOffset!=d.startOffset||c.endOffset!=d.endOffset)if(c={startContainer:d.startContainer,endContainer:d.endContainer,startOffset:d.startOffset,endOffset:d.endOffset},!n.isEmpty(a)||!n.isEmpty(b))return a={},b={},!0;return!1};
Ua=function(b,c){qb(c);return a[b]};ub=function(b,c,d){qb(d);a[b]=c};Sb=function(b,c){qb(c);delete a[b]};Wa=function(a,c){qb(c);return b[a]};Tb=function(a,c,d){qb(d);b[a]=c;"backcolor"==a?b.hilitecolor=c:"hilitecolor"==a&&(b.backcolor=c)};A=function(a,c){qb(c);delete b[a];"backcolor"==a?delete b.hilitecolor:"hilitecolor"==a&&delete b.backcolor}})();var da={A:!0,ABBR:!0,B:!0,BDI:!0,BDO:!0,CITE:!0,CODE:!0,DFN:!0,EM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,I:!0,KBD:!0,MARK:!0,P:!0,PRE:!0,Q:!0,RP:!0,RT:!0,
RUBY:!0,S:!0,SAMP:!0,SMALL:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0,VAR:!0,ACRONYM:!0,LISTING:!0,STRIKE:!0,XMP:!0,BIG:!0,BLINK:!0,FONT:!0,MARQUEE:!0,NOBR:!0,TT:!0},wa={colgroup:!0,table:!0,tbody:!0,tfoot:!0,thead:!0,tr:!0},Xc={script:!0,style:!0,plaintext:!0,xmp:!0},rc=k.extend({H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0},L),kd={CAPTION:!0,COL:!0,COLGROUP:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0},Yc={DD:!0,DT:!0},Id={A:k.extend({A:!0},L),DD:Yc,DT:Yc,LI:{LI:!0},NOBR:k.extend({NOBR:!0},L),H1:rc,H2:rc,
H3:rc,H4:rc,H5:rc,H6:rc,TD:kd,TH:kd,ABBR:L,B:L,BDI:L,BDO:L,CITE:L,CODE:L,DFN:L,EM:L,I:L,KBD:L,MARK:L,P:L,PRE:L,Q:L,RP:L,RT:L,RUBY:L,S:L,SAMP:L,SMALL:L,SPAN:L,STRONG:L,SUB:L,SUP:L,U:L,VAR:L,ACRONYM:L,LISTING:L,STRIKE:L,XMP:L,BIG:L,BLINK:L,FONT:L,MARQUEE:L,TT:L},Xb="subscript bold fontname fontsize forecolor hilitecolor italic strikethrough underline".split(" ");fa.backcolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||Q(a)||"transparent"==a.toLowerCase())&&
Na("backcolor",a,b)},standardInlineValueCommand:!0,relevantCssProperty:"backgroundColor",equivalentValues:function(a,b){return T(a)===T(b)}};fa.bold={action:function(a,b){ga("bold",b)?Na("bold","normal",b):Na("bold","bold",b)},inlineCommandActivatedValues:["bold","600","700","800","900"],relevantCssProperty:"fontWeight",equivalentValues:function(a,b){return a==b||"bold"==a&&"700"==b||"700"==a&&"bold"==b||"normal"==a&&"400"==b||"400"==a&&"normal"==b}};fa.createlink={action:function(a,c){""!==a&&(f(Sa(ba())).forEach(function(c){f(D(c)).forEach(function(c){R(c)&&
b(c,"a")&&e(c,"href")&&c.setAttribute("href",a)})}),Na("createlink",a,c))},standardInlineValueCommand:!0};fa.fontname={action:function(a,b){Na("fontname",a,b)},standardInlineValueCommand:!0,relevantCssProperty:"fontFamily"};fa.fontsize={action:function(a,b){""!==a&&(a=U(a),(-1!=k.inArray(a,"xx-small x-small small medium large x-large xx-large xxx-large".split(" "))||/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc)$/.test(a))&&Na("fontsize",a,b))},indeterm:function(){return 2<=f(Sa(ba(),function(a){return R(a)&&
a.nodeType==f.Node.TEXT_NODE})).map(function(a){return xa(a,"fontsize")},!0).filter(function(a,b,c){return-1==f(c.slice(0,b)).indexOf(a)}).length},value:function(a){var b=Sa(a,function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE})[0];void 0===b&&(b=a.startContainer);a=xa(b,"fontsize");return N(a)},relevantCssProperty:"fontSize"};fa.forecolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||Q(a)||"transparent"==a.toLowerCase())&&Na("forecolor",a,
b)},standardInlineValueCommand:!0,relevantCssProperty:"color",equivalentValues:function(a,b){return T(a)===T(b)}};fa.hilitecolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||Q(a)||"transparent"==a.toLowerCase())&&Na("hilitecolor",a,b)},indeterm:function(){return 2<=f(Sa(ba(),function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE})).map(function(a){return xa(a,"hilitecolor")},!0).filter(function(a,b,c){return-1==f(c.slice(0,b)).indexOf(a)}).length},
standardInlineValueCommand:!0,relevantCssProperty:"backgroundColor",equivalentValues:function(a,b){return T(a)===T(b)}};fa.italic={action:function(a,b){ga("italic",b)?Na("italic","normal",b):Na("italic","italic",b)},inlineCommandActivatedValues:["italic","oblique"],relevantCssProperty:"fontStyle"};fa.removeformat={action:function(a,b){function c(a){return R(a)&&p(a,"abbr acronym b bdi bdo big blink cite code dfn em font i ins kbd mark nobr q s samp small span strike strong sub sup tt u var".split(" "))}
var d,e;d=Sa(ba(),c);f(d).forEach(function(a){for(;a.hasChildNodes();)Ia(a.firstChild,a.parentNode,I(a),ba());a.parentNode.removeChild(a)});R(ba().startContainer)&&ba().startContainer.nodeType==f.Node.TEXT_NODE&&0!=ba().startOffset&&ba().startOffset!=J(ba().startContainer)&&(ba().startContainer==ba().endContainer?(d=ba().endOffset-ba().startOffset,e=ba().startContainer.splitText(ba().startOffset),ba().setStart(e,0),ba().setEnd(e,d)):ba().setStart(ba().startContainer.splitText(ba().startOffset),0));
R(ba().endContainer)&&ba().endContainer.nodeType==f.Node.TEXT_NODE&&0!=ba().endOffset&&ba().endOffset!=J(ba().endContainer)&&(e=[ba().startContainer,ba().startOffset],d=[ba().endContainer,ba().endOffset],ba().setEnd(document.documentElement,0),d[0].splitText(d[1]),ba().setStart(e[0],e[1]),ba().setEnd(d[0],d[1]));f(Sa(ba(),R)).forEach(function(a){for(;c(a.parentNode)&&va(a.parentNode,a);)ab([a],ba())});f("subscript bold fontname fontsize forecolor hilitecolor italic strikethrough underline".split(" ")).forEach(function(a){Na(a,
null,b)})}};fa.strikethrough={action:function(a,b){ga("strikethrough",b)?Na("strikethrough",null,b):Na("strikethrough","line-through",b)},inlineCommandActivatedValues:["line-through"]};fa.subscript={action:function(a,b){var c=ga("subscript",b);Na("subscript",null,b);c||Na("subscript","subscript",b)},indeterm:function(){var a=Sa(ba(),function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE});return f(a).some(function(a){return"subscript"==xa(a,"subscript")})&&f(a).some(function(a){return"subscript"!=
xa(a,"subscript")})||f(a).some(function(a){return"mixed"==xa(a,"subscript")})},inlineCommandActivatedValues:["subscript"]};fa.superscript={action:function(a,b){var c=ga("superscript",b);Na("superscript",null,b);c||Na("superscript","superscript",b)},indeterm:function(){var a=Sa(ba(),function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE});return f(a).some(function(a){return"superscript"==xa(a,"superscript")})&&f(a).some(function(a){return"superscript"!=xa(a,"superscript")})||f(a).some(function(a){return"mixed"==
xa(a,"superscript")})},inlineCommandActivatedValues:["superscript"]};fa.underline={action:function(a,b){ga("underline",b)?Na("underline",null,b):Na("underline","underline",b)},inlineCommandActivatedValues:["underline"]};fa.unlink={action:function(){var a=ba(),c=[],d;for(d=a.startContainer;d;d=d.parentNode)b(d,"A")&&e(d,"href")&&c.unshift(d);for(d=a.startContainer;d!=q(a.endContainer);d=t(d))b(d,"A")&&e(d,"href")&&(S(d,a)||x(d,a.endContainer)||d==a.endContainer)&&c.push(d);for(d=0;d<c.length;d++)Gb(c[d],
"unlink",a)},standardInlineValueCommand:!0};var Ib="p";fa["delete"]={action:function(a,c){var d;k.browser.msie&&7>=k.browser.version&&cb(c,!1);if(c.collapsed){fb(c.startContainer,c.startOffset);for(var e=c.startContainer,l=c.startOffset,m=d=!1;;)if(0<l&&(d=b(e.childNodes[l-1],"br")||!1,m=b(e.childNodes[l-1],"hr")||!1),0==l&&R(e.previousSibling)&&Ea(e.previousSibling))e.parentNode.removeChild(e.previousSibling);else if(0<=l-1&&l-1<e.childNodes.length&&R(e.childNodes[l-1])&&(Ea(e.childNodes[l-1])||
d||m)){if(e.removeChild(e.childNodes[l-1]),l--,d||m){c.setStart(e,l);c.setEnd(e,l);return}}else if(0==l&&ca(e)||Ea(e))l=I(e),e=e.parentNode;else{if(0<=l-1&&l-1<e.childNodes.length&&R(e.childNodes[l-1])&&b(e.childNodes[l-1],"a")){gb(e.childNodes[l-1],c);return}if(0<=l-1&&l-1<e.childNodes.length&&!Z(e.childNodes[l-1])&&!p(e.childNodes[l-1],["br","img"]))e=e.childNodes[l-1],l=J(e);else break}if(d=Ob(e,l))d.parentNode.removeChild(d);else if(e.nodeType==f.Node.TEXT_NODE&&0!=l)c.setStart(e,l-1),c.setEnd(e,
l-1),ia(e,l-1,e,l);else if(e.nodeType==f.Node.TEXT_NODE&&0==l&&k.browser.msie)l=1,c.setStart(e,l),c.setEnd(e,l),c.startOffset=0,ia(c);else if(!ca(e))if(0<=l-1&&l-1<e.childNodes.length&&p(e.childNodes[l-1],["br","hr","img"]))c.setStart(e,l),c.setEnd(e,l),ia(c);else if(p(e,["li","dt","dd"])&&e==e.parentNode.firstChild&&0==l){l=[];for(d=e.parentNode;d;d=d.parentNode)b(d,"li")&&l.unshift(d);for(d=0;d<l.length;d++)Jb(l[d],c);d=Ka([e]);ab([e],c);Ya(d,c);p(e,["dd","dt"])&&f(D(e)).every(function(a){return!va(e,
a)||!Ra(e,a)})&&(e=Ja(e,Ib,c));bb(e,c);for(d=0;d<l.length;d++)yc(l[d].parentNode,c)}else{d=e;for(m=l;;)if(0==m)m=I(d),d=d.parentNode;else if(0<=m-1&&m-1<d.childNodes.length&&R(d.childNodes[m-1])&&Ea(d.childNodes[m-1]))d.removeChild(d.childNodes[m-1]),m--;else break;if(0==l&&f(D(e).concat(e)).filter(function(a){return R(a)&&va(a,e)&&la(a)}).length)for(l=g.createRange(),l.setStart(e,0),l.setEnd(e,0),l=Ba(l),l=O(l,function(a){return R(a)&&!ya(a)}),d=0;d<l.length;d++)xb(l[d],c);else if(!b(d.childNodes[m],
"table"))if(0<=m-1&&m-1<d.childNodes.length&&b(d.childNodes[m-1],"table"))c.setStart(d,m-1),c.setEnd(d,m);else if(0==l&&(b(d.childNodes[m-1],"hr")||b(d.childNodes[m-1],"br")&&(b(d.childNodes[m-1].previousSibling,"br")||!ca(d.childNodes[m-1].previousSibling))))c.setStart(e,l),c.setEnd(e,l),ia(d,m-1,d,m);else{if(p(d.childNodes[m],["li","dt","dd"])&&ca(d.childNodes[m].firstChild)&&0!=m){var n=d.childNodes[m-1];ca(n.lastChild)&&!b(n.lastChild,"br")&&n.appendChild(document.createElement("br"));ca(n.lastChild)&&
n.appendChild(document.createElement("br"))}if(p(d.childNodes[m],["li","dt","dd"])&&p(d.childNodes[m-1],["li","dt","dd"]))d=d.childNodes[m-1],m=J(d),e=d.nextSibling,l=0;else for(;0<=m-1&&m-1<d.childNodes.length;)R(d.childNodes[m-1])&&Ea(d.childNodes[m-1])?(d.removeChild(d.childNodes[m-1]),m--):(d=d.childNodes[m-1],m=J(d));n=g.createRange();n.setStart(d,m);n.setEnd(e,l);ia(n);C(document.body,c.startContainer)||(n.startContainer.hasChildNodes()||n.startContainer.nodeType==f.Node.TEXT_NODE||ja(n.startContainer)?
(c.setStart(n.startContainer,n.startOffset),c.setEnd(n.startContainer,n.startOffset)):(c.setStart(n.startContainer.parentNode,I(n.startContainer)),c.setEnd(n.startContainer.parentNode,I(n.startContainer))))}}}else ia(c)}};var hb="address dd div dt h1 h2 h3 h4 h5 h6 p pre".split(" ");fa.formatblock={action:function(c){function e(a){return function(b){return R(b)&&va(b,a)&&d(b,hb)&&!f(F(b)).some(W)}}function g(a){return function(b){return d(b,a)&&!b.attributes.length}}function l(){return!1}function m(a){return function(){return document.createElement(a)}}
var n;/^<.*>$/.test(c)&&(c=c.slice(1,-1));c=c.toLowerCase();if(-1!=f(hb).indexOf(c)){var q=Ba(ba()),t=O(q,function(a){return R(a)&&(Zb(a)||Ra(a,"p")||p(a,["dd","dt"]))&&!f(F(a)).some(W)}),v=Ka(t);for(n=0;n<t.length;n++)for(var A=t[n];f(D(A)).some(e(A));)ab([A],q);for(Ya(v,q);t.length;){if(Za(t[0]))n=[].slice.call(a(t[0].childNodes)),v=Ka(n),gb(t[0],q),Ya(v,q),t.shift();else for(n=[],n.push(t.shift());t.length&&t[0]==n[n.length-1].nextSibling&&!Za(t[0])&&!b(n[n.length-1],"BR");)n.push(t.shift());bb(Pa(n,
-1==k.inArray(c,["div","p"])?g(c):l,m(c),q),q)}}},indeterm:function(){var a=Ba(ba()),a=s(a,function(a){return ra(a)&&R(a)&&!a.hasChildNodes()});if(!a.length)return!1;var b=null,c;for(c=0;c<a.length;c++){for(var e=a[c];R(e.parentNode)&&va(e,e.parentNode)&&!d(e,hb);)e=e.parentNode;var g="";R(e)&&d(e,hb)&&!f(F(e)).some(W)&&(g=e.tagName);if(null===b)b=g;else if(b!=g)return!0}return!1},value:function(){var a=Ba(ba()),a=s(a,function(a){return ra(a)&&R(a)&&!a.hasChildNodes()});if(!a.length)return"";for(a=
a[0];R(a.parentNode)&&va(a,a.parentNode)&&!d(a,hb);)a=a.parentNode;return R(a)&&d(a,hb)&&!f(F(a)).some(W)?a.tagName.toLowerCase():""}};fa.forwarddelete={action:function(a,c){k.browser.msie&&7>=k.browser.version&&cb(c,!0);if(c.collapsed){fb(c.startContainer,c.startOffset);for(var d=c.startContainer,e=c.startOffset;;)if(e==J(d)&&R(d.nextSibling)&&Ea(d.nextSibling))d.parentNode.removeChild(d.nextSibling);else if(e<d.childNodes.length&&R(d.childNodes[e])&&Ea(d.childNodes[e]))d.removeChild(d.childNodes[e]);
else if(e<d.childNodes.length&&Va(d.childNodes[e]))e++;else if(e==J(d)&&ca(d)||Ea(d))e=1+I(d),d=d.parentNode;else if(e<d.childNodes.length&&!Z(d.childNodes[e])&&!p(d.childNodes[e],["br","img"]))d=d.childNodes[e],e=0;else break;fb(c.startContainer,c.startOffset);var g=Yb(d,e);if(g)g.parentNode.removeChild(g);else if(d.nodeType==f.Node.TEXT_NODE&&e!=J(d)){c.setStart(d,e);c.setEnd(d,e);for(g=e+1;g!=d.length&&/^[\u0300-\u036f\u0591-\u05bd\u05c1\u05c2]$/.test(d.data[g]);)g++;ia(d,e,d,g)}else if(!ca(d))if(e<
d.childNodes.length&&p(d.childNodes[e],["br","hr","img"]))c.setStart(d,e),c.setEnd(d,e),ia(d,e,d,e+1);else{for(var l=d,g=e;;)if(g==J(l))g=1+I(l),l=l.parentNode;else if(g<l.childNodes.length&&R(l.childNodes[g])&&Ea(l.childNodes[g]))l.removeChild(l.childNodes[g]);else break;if(!b(l.childNodes[g-1],"table"))if(b(l.childNodes[g],"table"))c.setStart(l,g),c.setEnd(l,g+1);else if(e==J(d)&&p(l.childNodes[g],["br","hr"]))c.setStart(d,e),c.setEnd(d,e),ia(l,g,l,g+1);else{for(;g<l.childNodes.length;)R(l.childNodes[g])&&
Ea(l.childNodes[g])?l.removeChild(l.childNodes[g]):(l=l.childNodes[g],g=0);d=ia(d,e,l,g);c.setStart(d.startContainer,d.startOffset);c.setEnd(d.endContainer,d.endOffset)}}}else ia(c)}};fa.indent={action:function(){var a=[],c;for(c=ba().endContainer;c!=ba().commonAncestorContainer;c=c.parentNode)b(c,"LI")&&a.unshift(c);for(c=ba().startContainer;c!=ba().commonAncestorContainer;c=c.parentNode)b(c,"LI")&&a.unshift(c);for(c=ba().commonAncestorContainer;c;c=c.parentNode)b(c,"LI")&&a.unshift(c);for(c=0;c<
a.length;c++)Jb(a[c],ba());a=Ba(ba());c=[];c=O(a,function(a){return R(a)&&(Ra(a,"div")||Ra(a,"ol"))});for(c.length&&b(c[0],"LI")&&p(c[0].parentNode,["OL","UL"])&&b(c[0].previousSibling,"LI")&&Jb(c[0].previousSibling,a);c.length;){var d=[];for(d.push(c.shift());c.length&&c[0]==d[d.length-1].nextSibling;)d.push(c.shift());Lb(d,a)}}};fa.inserthorizontalrule={action:function(a,b){for(;0==b.startOffset&&b.startContainer.parentNode;)b.setStart(b.startContainer.parentNode,I(b.startContainer));for(;b.endOffset==
J(b.endContainer)&&b.endContainer.parentNode;)b.setEnd(b.endContainer.parentNode,1+I(b.endContainer));ia(b,{blockMerging:!1});if(R(ba().startContainer)||ja(ba().startContainer)){ba().startContainer.nodeType==f.Node.TEXT_NODE&&0==ba().startOffset&&(ba().setStart(ba().startContainer.parentNode,I(ba().startContainer)),ba().collapse(!0));ba().startContainer.nodeType==f.Node.TEXT_NODE&&ba().startOffset==J(ba().startContainer)&&(ba().setStart(ba().startContainer.parentNode,1+I(ba().startContainer)),ba().collapse(!0));
var c=document.createElement("hr");b.insertNode(c);bb(c,b);b.setStart(c.parentNode,1+I(c));b.setEnd(c.parentNode,1+I(c));g.getSelection().removeAllRanges();g.getSelection().addRange(b)}}};fa.inserthtml={action:function(a,b){ia(b);if(R(b.startContainer)||ja(b.startContainer)){var c=b.createContextualFragment(a),d=c.lastChild;if(d){var e=F(c);Z(b.startContainer)&&f(b.startContainer.childNodes).filter(function(a,b){return R(a)&&Va(a)&&I(a)>=b.startOffset},!0).forEach(function(a){a.parentNode.removeChild(a)});
b.insertNode(c);Z(b.startContainer)&&wb(b.startContainer);b.setStart(d.parentNode,1+I(d));b.setEnd(d.parentNode,1+I(d));for(c=0;c<e.length;c++)bb(e[c],b);aa(b)}}}};fa.insertimage={action:function(a){if(""!==a){var c=ba();ia(c,{stripWrappers:!1});if(R(ba().startContainer)||ja(ba().startContainer)){Z(c.startContainer)&&1==c.startContainer.childNodes.length&&b(c.startContainer.firstChild,"br")&&0==c.startOffset&&c.startContainer.removeChild(c.startContainer.firstChild);var d=document.createElement("img");
d.setAttribute("src",a);c.insertNode(d);c.setStart(d.parentNode,1+I(d));c.setEnd(d.parentNode,1+I(d));g.getSelection().removeAllRanges();g.getSelection().addRange(c);d.removeAttribute("width");d.removeAttribute("height")}}}};fa.insertlinebreak={action:function(a,b){ia(b,{stripWrappers:!1});if(R(b.startContainer)||ja(b.startContainer))if(b.startContainer.nodeType!=f.Node.ELEMENT_NODE||Ra("br",b.startContainer))if(b.startContainer.nodeType==f.Node.ELEMENT_NODE||Ra("br",b.startContainer.parentNode)){var c,
d;b.startContainer.nodeType==f.Node.TEXT_NODE&&0==b.startOffset&&(c=b.startContainer.parentNode,d=I(b.startContainer),g.getSelection().collapse(c,d),b.setStart(c,d),b.setEnd(c,d));b.startContainer.nodeType==f.Node.TEXT_NODE&&b.startOffset==J(b.startContainer)&&(c=b.startContainer.parentNode,d=1+I(b.startContainer),g.getSelection().collapse(c,d),b.setStart(c,d),b.setEnd(c,d));c=document.createElement("br");b.insertNode(c);g.getSelection().collapse(c.parentNode,1+I(c));b.setStart(c.parentNode,1+I(c));
b.setEnd(c.parentNode,1+I(c));Y(c)&&(b.insertNode(vb()),g.getSelection().collapse(c.parentNode,1+I(c)),b.setStart(c.parentNode,1+I(c)),b.setEnd(c.parentNode,1+I(c)));k.browser.msie&&8>k.browser.version&&c.parentNode.removeAttribute("style")}}};fa.insertorderedlist={action:function(a,b){fc("ol",b)},indeterm:function(){return/^mixed( ol)?$/.test(ob())},state:function(){return"ol"==ob()}};var ld={LI:!0,DT:!0,DD:!0};fa.insertparagraph={action:function(a,c){var d;ia(c);qc(Ha(c.startContainer),c);if(R(c.startContainer)||
ja(c.startContainer)){var e=c.startContainer,l=c.startOffset;e.nodeType==f.Node.TEXT_NODE&&0!=l&&l!=J(e)&&e.splitText(l);e.nodeType==f.Node.TEXT_NODE&&l==J(e)&&(l=1+I(e),e=e.parentNode);if(e.nodeType==f.Node.TEXT_NODE||e.nodeType==f.Node.COMMENT_NODE)l=I(e),e=e.parentNode;g.getSelection().collapse(e,l);c.setStart(e,l);c.setEnd(e,l);for(var k=e;!Za(k)&&R(k.parentNode)&&va(e,k.parentNode);)k=k.parentNode;if(!R(k)||!va(k,e)||!Za(k)){var m=Ib;d=Ba(c);d=O(d,function(a){return Ra(a,"p")}).slice(0,1);if(!d.length){if(!Ra(m,
c.startContainer))return;k=document.createElement(m);c.insertNode(k);k.appendChild(vb());g.getSelection().collapse(k,0);c.setStart(k,0);c.setEnd(k,0);return}for(;d[d.length-1].nextSibling&&Ra(d[d.length-1].nextSibling,"p");)d.push(d[d.length-1].nextSibling);k=Pa(d,function(){return!1},function(){return document.createElement(m)},c)}if(k){var n;if("ADDRESS"==k.tagName||"LISTING"==k.tagName||"PRE"==k.tagName){var q=document.createElement("br");d=k.offsetHeight;c.insertNode(q);n=k.offsetHeight;g.getSelection().collapse(e,
l+1);c.setStart(e,l+1);c.setEnd(e,l+1);d!=n||y(t(q),k)||(c.insertNode(vb()),g.getSelection().collapse(e,l+1),c.setEnd(e,l+1))}else if(ld[k.tagName]&&(!k.hasChildNodes()||1==k.childNodes.length&&b(k.firstChild,"br"))){if(ab([k],c),p(k,["dd","dt"])&&f(D(k)).every(function(a){return!va(k,a)||!Ra(k,a)})&&(k=Ja(k,Ib,c)),bb(k,c),b(k,"li")&&b(k.nextSibling,"li")&&p(k.nextSibling.firstChild,["ol","ul"])){e=k.nextSibling;l=k.nextSibling.childNodes.length;for(d=0;d<l;d++)k.appendChild(e.childNodes[0]);e.parentNode.removeChild(e)}}else{l=
g.createRange();l.setStart(c.startContainer,c.startOffset);for(l.setEnd(k,J(k));0==l.startOffset&&l.startContainer!=k;)l.setStart(l.startContainer.parentNode,I(l.startContainer));for(;l.startOffset==J(l.startContainer)&&l.startContainer!=k;)l.setStart(l.startContainer.parentNode,1+I(l.startContainer));e=O(l);e=!e.length||1==e.length&&b(e[0],"br");e=/^H[1-6]$/.test(k.tagName)&&e?Ib:"DT"==k.tagName&&e?"dd":"DD"==k.tagName&&e?"dt":k.tagName.toLowerCase();e=document.createElement(e);ua(k,e);e.removeAttribute("id");
k.parentNode.insertBefore(e,k.nextSibling);n=s(l);l=l.extractContents();q=F(l);for(d=0;d<q.length;d++)q[d].nodeType==f.Node.ELEMENT_NODE&&-1==f(n).indexOf(q[d])&&q[d].removeAttribute("id");d=[];if(n=l.firstChild){do za(n)||d.push(n);while(null!=(n=n.nextSibling))}b(e,"li")&&d.length&&p(d[0],["ul","ol"])&&(d=e.offsetHeight,q=vb(),e.appendChild(q),n=e.offsetHeight,d!==n&&e.removeChild(q));e.appendChild(l);wb(k);wb(e);g.getSelection().collapse(e,0);c.setStart(e,0);c.setEnd(e,0)}}}}};fa.inserttext={action:function(a,
b){var c;ia(b,{stripWrappers:!1});if(R(b.startContainer)||ja(b.startContainer))if(1<a.length)for(c=0;c<a.length;c++)fa.inserttext.action(a[c],b);else if(""!=a)if("\n"==a)fa.insertparagraph.action("",b);else{c=b.startContainer;var d=b.startOffset;0<=d-1&&d-1<c.childNodes.length&&c.childNodes[d-1].nodeType==f.Node.TEXT_NODE&&(c=c.childNodes[d-1],d=J(c));0<=d&&d<c.childNodes.length&&c.childNodes[d].nodeType==f.Node.TEXT_NODE&&(c=c.childNodes[d],d=0);var e=c.nodeType==f.Node.ELEMENT_NODE?c:c.parentNode;
" "==a&&e.nodeType==f.Node.ELEMENT_NODE&&-1==k.inArray(f.getComputedStyle(e).whiteSpace,["pre","pre-wrap"])&&(a="\u00a0");e=Kb(b);c.nodeType==f.Node.TEXT_NODE?(c.insertData(d,a),g.getSelection().collapse(c,d),b.setStart(c,d),g.getSelection().extend(c,d+1),b.setEnd(c,d+1)):(1==c.childNodes.length&&Y(c.firstChild)&&c.removeChild(c.firstChild),c=document.createTextNode(a),b.insertNode(c),g.getSelection().collapse(c,0),b.setStart(c,0),g.getSelection().extend(c,1),b.setEnd(c,1));pb(e,b);fb(b.startContainer,
b.startOffset);fb(b.endContainer,b.endOffset);g.getSelection().collapseToEnd();b.collapse(!1)}}};fa.insertunorderedlist={action:function(a,b){fc("ul",b)},indeterm:function(){return/^mixed( ul)?$/.test(ob())},state:function(){return"ul"==ob()}};fa.justifycenter={action:function(a,b){Cb("center",b)},indeterm:function(){var a=s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return f(a).some(function(a){return"center"==La(a)})&&f(a).some(function(a){return"center"!=La(a)})},state:function(){var a=
s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return a.length&&f(a).every(function(a){return"center"==La(a)})},value:function(){var a=s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return a.length?La(a[0]):"left"}};fa.justifyfull={action:function(a,b){Cb("justify",b)},indeterm:function(){var a=s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return f(a).some(function(a){return"justify"==La(a)})&&f(a).some(function(a){return"justify"!=La(a)})},state:function(){var a=
s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return a.length&&f(a).every(function(a){return"justify"==La(a)})},value:function(){var a=s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return a.length?La(a[0]):"left"}};fa.justifyleft={action:function(a,b){Cb("left",b)},indeterm:function(){var a=s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return f(a).some(function(a){return"left"==La(a)})&&f(a).some(function(a){return"left"!=La(a)})},state:function(){var a=
s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return a.length&&f(a).every(function(a){return"left"==La(a)})},value:function(){var a=s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return a.length?La(a[0]):"left"}};fa.justifyright={action:function(a,b){Cb("right",b)},indeterm:function(){var a=s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return f(a).some(function(a){return"right"==La(a)})&&f(a).some(function(a){return"right"!=La(a)})},state:function(){var a=
s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return a.length&&f(a).every(function(a){return"right"==La(a)})},value:function(){var a=s(Ba(ba()),function(a){return R(a)&&ra(a)&&!a.hasChildNodes()});return a.length?La(a[0]):"left"}};fa.outdent={action:function(){var a=[];(function(){var c;for(c=ba().endContainer;c!=ba().commonAncestorContainer;c=c.parentNode)b(c,"li")&&a.unshift(c);for(c=ba().startContainer;c;c=c.parentNode)b(c,"li")&&a.unshift(c)})();f(a).forEach(function(a){Jb(a,
ba())});for(var c=Ba(ba()),d=O(c,function(a){return R(a)&&(!f(F(a)).some(R)||p(a,["ol","ul"])||b(a,"li")&&p(a.parentNode,["ol","ul"]))});d.length;){for(;d.length&&(p(d[0],["OL","UL"])||!p(d[0].parentNode,["OL","UL"]));)xb(d.shift(),c);if(!d.length)break;var e=[];for(e.push(d.shift());d.length&&d[0]==e[e.length-1].nextSibling&&!p(d[0],["OL","UL"]);)e.push(d.shift());var g=Ka(e);ab(e,c);f(e).forEach(bb);Ya(g,c)}}};fa.selectall={action:function(){var a=document.body;a||(a=document.documentElement);a?
g.getSelection().selectAllChildren(a):g.getSelection().removeAllRanges()}};fa.stylewithcss={action:function(a){kb="false"!=String(a).toLowerCase()},state:function(){return kb}};fa.usecss={action:function(a){kb="false"==String(a).toLowerCase()}};(function(){var a=[],b;for(b in fa)fa.hasOwnProperty(b)&&a.push(b);f(a).forEach(function(a){null==fa[a].relevantCssProperty&&(fa[a].relevantCssProperty=null);null!=fa[a].inlineCommandActivatedValues&&null==fa[a].indeterm&&(fa[a].indeterm=function(b){b=f(Sa(b,
function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE})).map(function(b){return xa(b,a)});var c=f(b).filter(function(b){return-1!=f(fa[a].inlineCommandActivatedValues).indexOf(b)});return 1<=c.length&&1<=b.length-c.length});null!=fa[a].inlineCommandActivatedValues&&(fa[a].state=function(b){var c=Sa(b,function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE});return 0==c.length?-1!=f(fa[a].inlineCommandActivatedValues).indexOf(xa(b.startContainer,a)):f(c).every(function(b){return-1!=f(fa[a].inlineCommandActivatedValues).indexOf(xa(b,
a))})});null!=fa[a].standardInlineValueCommand&&(fa[a].indeterm=function(){var b=f(Sa(ba())).filter(function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE},!0).map(function(b){return xa(b,a)}),c;for(c=1;c<b.length;c++)if(b[c]!=b[c-1])return!0;return!1},fa[a].value=function(b){var c=Sa(b,function(a){return R(a)&&a.nodeType==f.Node.TEXT_NODE})[0];"undefined"==typeof c&&(c=b.startContainer);return xa(c,a)})})})();return{commands:fa,execCommand:ea,queryCommandIndeterm:function(a,b){a=a.toLowerCase();return V(a,
"indeterm",b,function(a){return function(){return P(a,b)?fa[a].indeterm(b):!1}}(a))},queryCommandState:ga,queryCommandValue:na,queryCommandEnabled:P,queryCommandSupported:function(a){a=a.toLowerCase();return fa.hasOwnProperty(a)},copyAttributes:ua,createEndBreak:vb,isEndBreak:function(a){return b(a,"br")&&a.parentNode.lastChild===a},ensureContainerEditable:wb,isEditingHost:ja,isEditable:R,getStateOverride:Ua,setStateOverride:ub,resetOverrides:qb,unsetStateOverride:Sb}});
define("PubSub",[],function(){var g={},f={},n=0;return{sub:function(m,k){if("function"!==typeof k)return-1;var e=g[m];e||(e=g[m]=[]);e.push(++n);f[n]={channel:m,callback:k};return n},unsub:function(m){if(-1===m||!f[m])return!1;var k=f[m]&&g[f[m].channel];delete f[m];for(var e=k.length;e;)if(k[--e]===m)return k.splice(e,1),!0;return!1},pub:function(m,k){var e=m.split("."),l,d=e.length,c="",b=0;for(l=0;l<d;++l){var c=c+((0===l?"":".")+e[l]),n;var r=c;n=k;if(g[r]){n?"object"!==typeof n&&(n={data:n}):
n={};n.channel=r;for(var r=g[r].slice(),u=void 0,u=0;u<r.length;++u)f[r[u]].callback(n);n=u}else n=0;b+=n}return b}}});
define(["jquery"],function(g){var f=/\s+/;return{words:function(g){g=g.split(f);g.length&&""===g[0]&&g.shift();g.length&&""===g[g.length-1]&&g.pop();return g},dashesToCamelCase:function(f){return f.replace(/[\-]([a-z])/gi,function(f,g){return g.toUpperCase()})},camelCaseToDashes:function(f){return f.replace(/[A-Z]/g,function(f){return"-"+f.toLowerCase()})},splitIncl:function(f,g){for(var k=[],e=0,l;null!=(l=g.exec(f));)e<l.index&&(k.push(f.substring(e,l.index)),e=l.index),e+=l[0].length,k.push(l[0]);
e<f.length&&k.push(f.substring(e,f.length));return k},empty:function(f){return""===f||null==f}}});define([],function(){return{identity:function(g){return g},noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1},complement:function(g){return function(){return!g.apply(this,arguments)}}}});
define(["util/functions"],function(g){function f(d,c){var b,e,f=[];b=0;for(e=d.length;b<e;b++)f.push(c(d[b]));return f}function n(d,c){return d.map(c)}function m(d,c){var b,e,f,g=[];b=0;for(e=d.length;b<e;b++)f=d[b],c(f)&&g.push(f);return g}function k(d,c){var b,e;b=0;for(e=d.length;b<e;b++)if(c===d[b])return b;return-1}function e(d,c){return-1!==k(d,c)}function l(d,c){var b,e;b=0;for(e=d.length;b<e;b++)if(c(d[b]))return!0;return!1}return{filter:m,indexOf:k,reduce:function(d,c,b){var e,f;e=0;for(f=
d.length;e<f;e++)c=b(c,d[e]);return c},forEach:function(d,c){var b,e;b=0;for(e=d.length;b<e;b++)c(d[b],b,d)},some:l,every:function(d,c){return!l(d,g.complement(c))},map:Array.prototype.map?n:f,contains:e,equal:function(d,c,b){var e,f=d.length;if(f!==c.length)return!1;if(b)for(e=0;e<f;e++){if(!b(d[e],c[e]))return!1}else for(e=0;e<f;e++)if(d[e]!==c[e])return!1;return!0},applyNotNull:function(d,c){return null==d?null:c(d)},sortUnique:function(d,c){var b;if(c)for(d.sort(c),b=1;b<d.length;b++)0===c(d[b],
d[b-1])&&d.splice(b--,1);else for(d.sort(),b=1;b<d.length;b++)d[b]==d[b-1]&&d.splice(b--,1);return d},intersect:function(d,c){return m(d,function(b){return e(c,b)})},second:function(d){return d[1]},last:function(d){return d.length?d[d.length-1]:null}}});
define("aloha/core jquery util/class util/range util/arrays util/strings aloha/console PubSub aloha/engine aloha/ecma5shims aloha/rangy-core".split(" "),function(g,f,n,m,k,e,l,d,c,b){function p(a,b){var c=g.activeEditable?g.activeEditable.obj.parent()[0]:null,c=f(a).parentsUntil(c).get(),d;d=[];var e,l,m;1===a.nodeType&&"BODY"!==a.nodeName&&"HTML"!==a.nodeName?d.push(a.cloneNode(!1).outerHTML):d.push("#"+a.nodeType);m=0;for(l=c.length;m<l;m++){e=c[m];if("BODY"===e.nodeName||"HTML"===e.nodeName)break;
d.push(e.cloneNode(!1).outerHTML)}d=d.join("");return b&&a===b.node&&k.equal(b.parents,c)&&d===b.html?null:{node:a,parents:c,html:d}}function r(a){var b;f.browser.msie&&a.startContainer===a.endContainer&&a.startOffset===a.endOffset&&3==a.startContainer.nodeType&&a.startOffset==a.startContainer.data.length&&a.startContainer.nextSibling&&(b=a.startContainer.nextSibling,"OL"===b.nodeName||"UL"===b.nodeName)&&(" "==a.startContainer.data[a.startContainer.data.length-1]?a.startOffset=a.endOffset=a.startOffset-
1:a.startContainer.data+=" ")}var u=window.GENTICS,a=null,q=null;m=n.extend({_constructor:function(){this.rangeObject={};this.preventSelectionChangedFlag=!1;this.tagHierarchy={textNode:{},abbr:{textNode:!0},b:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0,strong:!0},pre:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0},blockquote:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,
sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0,p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0},ins:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,u:!0,p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0},ul:{li:!0},ol:{li:!0},li:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,ul:!0,ol:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,del:!0,ins:!0,u:!0,a:!0},tr:{td:!0,th:!0},table:{tr:!0},div:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,
ul:!0,ol:!0,table:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,del:!0,ins:!0,u:!0,p:!0,div:!0,pre:!0,blockquote:!0,a:!0},h1:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0}};this.tagHierarchy={textNode:this.tagHierarchy.textNode,abbr:this.tagHierarchy.abbr,br:this.tagHierarchy.textNode,img:this.tagHierarchy.textNode,b:this.tagHierarchy.b,strong:this.tagHierarchy.b,code:this.tagHierarchy.b,q:this.tagHierarchy.b,blockquote:this.tagHierarchy.blockquote,cite:this.tagHierarchy.b,
i:this.tagHierarchy.b,em:this.tagHierarchy.b,sup:this.tagHierarchy.b,sub:this.tagHierarchy.b,span:this.tagHierarchy.b,del:this.tagHierarchy.del,ins:this.tagHierarchy.ins,u:this.tagHierarchy.b,p:this.tagHierarchy.b,pre:this.tagHierarchy.pre,a:this.tagHierarchy.b,ul:this.tagHierarchy.ul,ol:this.tagHierarchy.ol,li:this.tagHierarchy.li,td:this.tagHierarchy.li,div:this.tagHierarchy.div,h1:this.tagHierarchy.h1,h2:this.tagHierarchy.h1,h3:this.tagHierarchy.h1,h4:this.tagHierarchy.h1,h5:this.tagHierarchy.h1,
h6:this.tagHierarchy.h1,table:this.tagHierarchy.table};this.replacingElements={h1:{p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,pre:!0,blockquote:!0}};this.replacingElements={h1:this.replacingElements.h1,h2:this.replacingElements.h1,h3:this.replacingElements.h1,h4:this.replacingElements.h1,h5:this.replacingElements.h1,h6:this.replacingElements.h1,pre:this.replacingElements.h1,p:this.replacingElements.h1,blockquote:this.replacingElements.h1};this.allowedToStealElements={h1:{textNode:!0}};this.allowedToStealElements=
{h1:this.allowedToStealElements.h1,h2:this.allowedToStealElements.h1,h3:this.allowedToStealElements.h1,h4:this.allowedToStealElements.h1,h5:this.allowedToStealElements.h1,h6:this.allowedToStealElements.h1,p:this.tagHierarchy.b}},SelectionTree:function(){this.domobj={};this.selection=void 0;this.children=[]},onChange:function(a,b,c){this.updateSelectionTimeout&&window.clearTimeout(this.updateSelectionTimeout);var d=this;this.updateSelectionTimeout=window.setTimeout(function(){var e=new g.Selection.SelectionRange(!0);
if(e.startContainer&&"HTML"!==e.startContainer.nodeName&&"BODY"!==e.startContainer.nodeName)g.Selection._updateSelection(b,e);else if(!this.updateSelectionTimeout)d.onChange(a,b,10+2*(c||5))},c||5)},preventSelectionChanged:function(){this.preventSelectionChangedFlag=!0},isSelectionChangedPrevented:function(){var a=this.preventSelectionChangedFlag;this.preventSelectionChangedFlag=!1;return a},isSelectionEditable:function(){return this.rangeObject.commonAncestorContainer&&f(this.rangeObject.commonAncestorContainer).contentEditable()},
isFloatingMenuVisible:function(){var a=f(g.Selection.rangeObject.commonAncestorContainer).attr("data-aloha-floatingmenu-visible");return"undefined"!==a&&"true"===a?!0:!1},updateSelection:function(a){return this._updateSelection(a,null)},_updateSelection:function(b,c){if(b&&b.originalEvent&&!0===b.originalEvent.stopSelectionUpdate||"undefined"===typeof c)return!1;this.rangeObject=c=c||new g.Selection.SelectionRange(!0);c.update();if(c&&c.startContainer&&c.endContainer&&0<f(c.commonAncestorContainer).closest(".aloha-editable").length){var e=
!(3===c.startContainer.nodeType&&!f(c.startContainer.parentNode).contentEditable()),k=!(3===c.endContainer.nodeType&&!f(c.endContainer.parentNode).contentEditable());if(!e||!k)return g.getSelection().removeAllRanges(),!0}if(this.isSelectionChangedPrevented())return!0;g.trigger("aloha-selection-changed-before",[this.rangeObject,b]);g.trigger("aloha-selection-changed",[this.rangeObject,b]);var e=this.rangeObject,m=e.startContainer,k=e.endContainer;if(m&&k){if(m=p(m,a),k=p(k,q),m||k)a=m,q=k,d.pub("aloha.selection.context-change",
{range:e,event:b})}else l.warn("aloha/selection","encountered range object without start or end container");g.trigger("aloha-selection-changed-after",[this.rangeObject,b]);return!0},getSelectionTree:function(a){if(!a)return this.rangeObject.getSelectionTree();if(!a.commonAncestorContainer)return g.Log.error(this,"the rangeObject is missing the commonAncestorContainer"),!1;this.inselection=!1;u.Utils.Dom.doCleanup({merge:!0},a)&&(a.update(),a.select());return this.recursiveGetSelectionTree(a,a.commonAncestorContainer)},
recursiveGetSelectionTree:function(a,b){var c=0,d=this,e=[];f(b).contents().each(function(f){var l="none",k=!1,m=!1,n=!1,q=!1,t=!1,p=!1;a.isCollapsed()&&b===a.startContainer&&a.startOffset==f&&(e[c]=new g.Selection.SelectionTree,e[c].selection="collapsed",e[c].domobj=void 0,d.inselection=!1,n=!0,c++);if(!d.inselection&&!n){var r;try{r=this.nodeType}catch(u){return}switch(r){case 3:this===a.startContainer&&(d.inselection=!0,l=0<a.startOffset?"partial":"full",k=a.startOffset,m=this.length);break;case 1:this===
a.startContainer&&0===a.startOffset&&(d.inselection=!0,l="full"),b===a.startContainer&&a.startOffset===f&&(d.inselection=!0,l="full")}}if(d.inselection&&!n){"none"==l&&(l="full");switch(this.nodeType){case 3:this===a.endContainer&&(d.inselection=!1,a.endOffset<this.length&&(l="partial"),!1===k&&(k=0),m=a.endOffset);break;case 1:this===a.endContainer&&0===a.endOffset&&(d.inselection=!1)}b===a.endContainer&&a.endOffset<=f&&(d.inselection=!1,l="none")}e[c]=new g.Selection.SelectionTree;e[c].domobj=this;
e[c].selection=l;"partial"==l&&(e[c].startOffset=k,e[c].endOffset=m);e[c].children=d.recursiveGetSelectionTree(a,this);l=e[c].children.length;if(0<l){for(f=0;f<l;++f)switch(e[c].children[f].selection){case "none":q=!0;break;case "full":p=!0;break;case "partial":t=!0}t||p&&q?e[c].selection="partial":!p||t||q||(e[c].selection="full")}c++});a.isCollapsed()&&b===a.startContainer&&a.startOffset==b.childNodes.length&&(e[c]=new g.Selection.SelectionTree,e[c].selection="collapsed",e[c].domobj=void 0);return e},
getRangeObject:function(){return this.rangeObject},isRangeObjectWithinMarkup:function(a,b,c,d,e){var l=this;a=f(b?a.endContainer:a.startContainer).parents();var k=!1,m=-1;"undefined"!==typeof d&&"function"!==typeof d&&g.Log.error(this,"parameter tagComparator is not a function");"undefined"===typeof d&&(d=function(a,b){return l.standardTextLevelSemanticsComparator(a,b)});0<a.length&&a.each(function(){if(this===e)return g.Log.debug(l,"reached limit dom obj"),!1;if(d(this,c))return!1===k&&(k=[]),g.Log.debug(l,
"reached object equal to markup"),m++,k[m]=this,!0});return k},standardSectionsAndGroupingContentComparator:function(a,b){if(1!==a.nodeType)return g.Log.debug(this,"only element nodes (nodeType == 1) can be compared"),!1;if(!b[0].nodeName)return!1;var c=g.Selection.replacingElements[a.nodeName.toLowerCase()];return c&&c[b[0].nodeName.toLowerCase()]},standardTagNameComparator:function(a,b){if(1===a.nodeType)return a.nodeName!=b[0].nodeName?!1:!0;g.Log.debug(this,"only element nodes (nodeType == 1) can be compared");
return!1},standardTextLevelSemanticsComparator:function(a,b){if(1===a.nodeType)return a.nodeName==b[0].nodeName&&this.standardAttributesComparator(a,b)?!0:!1;g.Log.debug(this,"only element nodes (nodeType == 1) can be compared");return!1},standardAttributesComparator:function(a,b){var c=e.words(a&&a.className||""),d=e.words(b.length&&b[0].className||"");k.sortUnique(c);k.sortUnique(d);return k.equal(c,d)},changeMarkup:function(a,d,e){var l=d[0].tagName.toLowerCase(),k,m,n=this.isRangeObjectWithinMarkup(a,
!1,d,e,k),q=this.isRangeObjectWithinMarkup(a,!0,d,e,k),t,p,r,u;if(this.replacingElements[l])m=a,a=new this.SelectionRange(a),l=g.activeEditable?g.activeEditable.obj.get(0):f("body"),a.update(l),d.isReplacingElement=!0;else if(a.isCollapsed())return g.Log.debug(this,"early returning from applying markup because nothing is currently selected"),!1;k=g.activeEditable?g.activeEditable.obj[0]:f("body");d.isReplacingElement||0!==a.startOffset||null!=(r=this.getTextNodeSibling(!1,a.commonAncestorContainer.parentNode,
a.startContainer))&&(u=this.isRangeObjectWithinMarkup({startContainer:r,startOffset:0},!1,d,e,k));d.isReplacingElement||a.endOffset!==a.endContainer.length||null!=(t=this.getTextNodeSibling(!0,a.commonAncestorContainer.parentNode,a.endContainer))&&(p=this.isRangeObjectWithinMarkup({startContainer:t,startOffset:0},!1,d,e,k));if(!d.isReplacingElement&&n&&!q)g.Log.info(this,"markup 2 non-markup"),this.prepareForRemoval(a.getSelectionTree(),d,e),f(n).addClass("preparedForRemoval"),this.insertCroppedMarkups(n,
a,!1,e);else if(!d.isReplacingElement&&n&&q)g.Log.info(this,"markup 2 markup"),this.prepareForRemoval(a.getSelectionTree(),d,e),this.splitRelevantMarkupObject(n,q,a,e);else if(!d.isReplacingElement&&(!n&&q||p||u))g.Log.info(this,"non-markup 2 markup OR with next2markup"),u&&p?(n=new g.Selection.SelectionRange(a),n.startContainer=f(u[u.length-1]).textNodes()[0],n.startOffset=0,n.endContainer=f(p[p.length-1]).textNodes().last()[0],n.endOffset=n.endContainer.length,n.update(),this.applyMarkup(n.getSelectionTree(),
a,d,e),g.Log.info(this,"double extending previous markup(previous and after selection), actually wrapping it ...")):!u||p||q?u&&!p&&q?(n=new g.Selection.SelectionRange(a),n.startContainer=f(u[u.length-1]).textNodes()[0],n.startOffset=0,n.endContainer=f(q[q.length-1]).textNodes().last()[0],n.endOffset=n.endContainer.length,n.update(),this.applyMarkup(n.getSelectionTree(),a,d,e),g.Log.info(this,"double extending previous markup(previous and relevant at the end), actually wrapping it ...")):!u&&p?(this.extendExistingMarkupWithSelection(p,
a,!0,e),g.Log.info(this,"extending following markup backwards")):this.extendExistingMarkupWithSelection(q,a,!0,e):(this.extendExistingMarkupWithSelection(u,a,!1,e),g.Log.info(this,"extending previous markup"));else if(d.isReplacingElement||!(n||q||u||p)){g.Log.info(this,"non-markup 2 non-markup");a.startContainer!==a.endContainer?q=!1:1!=a.startContainer.nodeType?q=!1:(q=a.startContainer.firstChild,q=!q||!q.nextSibling&&"BR"==q.nodeName);if(q){d=d.clone();e=a.startContainer!==a.endContainer?!1:1!=
a.startContainer.nodeType?!1:c.isEndBreak(a.startContainer);e&&d[0].appendChild(c.createEndBreak());g.activeEditable&&f.browser.mozilla&&g.activeEditable.obj.focus();c.isEditable(a.startContainer)?(c.copyAttributes(a.startContainer,d[0]),f(a.startContainer).after(d[0]).remove()):c.isEditingHost(a.startContainer)&&(f(a.startContainer).append(d[0]),c.ensureContainerEditable(d[0]));m.startContainer=d[0];m.endContainer=d[0];m.startOffset=0;m.endOffset=0;return}this.applyMarkup(a.getSelectionTree(),a,
d,e,{setRangeObject2NewMarkup:!0});m.startContainer=a.startContainer;m.endContainer=a.endContainer;m.startOffset=a.startOffset;m.endOffset=a.endOffset}d.isReplacingElement&&(m&&m.startContainer.className&&-1<m.startContainer.className.indexOf("preparedForRemoval")&&(e=f(m.startContainer).parents(d[0].tagName).get(0),m.startContainer=e,a.startContainer=e),m&&m.endContainer.className&&-1<m.endContainer.className.indexOf("preparedForRemoval")&&(e=f(m.endContainer).parents(d[0].tagName).get(0),m.endContainer=
e,a.endContainer=e));f(".preparedForRemoval").zap();d.isReplacingElement?(b.Node.ELEMENT_NODE===m.startContainer.nodeType&&m.startContainer.childNodes&&m.startContainer.childNodes.length<m.startOffset&&(m.startOffset=m.startContainer.childNodes.length,a.startOffset=m.startContainer.childNodes.length),b.Node.ELEMENT_NODE===m.endContainer.nodeType&&m.endContainer.childNodes&&m.endContainer.childNodes.length<m.endOffset&&(m.endOffset=m.endContainer.childNodes.length,a.endOffset=m.endContainer.childNodes.length),
a.endContainer=m.endContainer,a.endOffset=m.endOffset,a.startContainer=m.startContainer,a.startOffset=m.startOffset,m.update(),m.select()):(a.update(),a.select())},areMarkupObjectsAsLongAsRangeObject:function(a,b,c){var d,e,g;if(0!==c.startOffset)return!1;d=0;for(g=a.length;d<g;d++)if(e=f(a[d]),e.textNodes().first()[0]!==c.startContainer)return!1;d=0;for(a=b.length;d<a;d++)if(e=f(b[d]),e=e.textNodes().last()[0],e!==c.endContainer||e.length!=c.endOffset)return!1;return!0},splitRelevantMarkupObject:function(a,
b,c,d){f(a).addClass("preparedForRemoval");f(b).addClass("preparedForRemoval");if(this.areMarkupObjectsAsLongAsRangeObject(a,b,c))return!0;var e=this.intersectRelevantMarkupObjects(a,b);e?(this.insertCroppedMarkups([e],c,!1,d),this.insertCroppedMarkups([e],c,!0,d)):(this.insertCroppedMarkups(a,c,!1,d),this.insertCroppedMarkups(b,c,!0,d));return!0},intersectRelevantMarkupObjects:function(a,b){var c=!1,d,e,f,g,l,k;if(!a||!b)return c;l=a.length;k=b.length;for(d=0;d<l;d++)for(e=a[d],f=0;f<k;f++)g=b[f],
e===g&&(c=e);return c},extendExistingMarkupWithSelection:function(a,b,c,d){var e,g,l,k,m,n,q;c||(e=!0);c&&(g=!0);c=[];l=0;for(k=a.length;l<k;l++)c[l]=new this.SelectionRange,m=a[l],g&&!e&&(c[l].startContainer=b.startContainer,c[l].startOffset=b.startOffset,n=f(m).textNodes(!0),q=n.length-1,c[l].endContainer=n[q],c[l].endOffset=n[q].length,c[l].update(),this.applyMarkup(c[l].getSelectionTree(),b,this.getClonedMarkup4Wrapping(m),d,{setRangeObject2NewMarkup:!0})),!g&&e&&(n=f(m).textNodes(!0),c[l].startContainer=
n[0],c[l].startOffset=0,c[l].endContainer=b.endContainer,c[l].endOffset=b.endOffset,c[l].update(),this.applyMarkup(c[l].getSelectionTree(),b,this.getClonedMarkup4Wrapping(m),d,{setRangeObject2NewMarkup:!0}));return!0},getClonedMarkup4Wrapping:function(a){a=f(a.outerHTML).removeClass("preparedForRemoval").empty();0===a.attr("class").length&&a.removeAttr("class");return a},insertCroppedMarkups:function(a,b,c,d){var e,g,l,k,m;c?g=!0:e=!0;c=[];for(k=0;k<a.length;k++){c[k]=new this.SelectionRange;m=a[k];
if(e&&!g){l=f(m).textNodes(!0);c[k].startContainer=l[0];c[k].startOffset=0;if(c[k].startContainer===b.startContainer&&c[k].startOffset===b.startOffset)continue;0===b.startOffset?(c[k].endContainer=this.getTextNodeSibling(!1,m,b.startContainer),c[k].endOffset=c[k].endContainer.length):(c[k].endContainer=b.startContainer,c[k].endOffset=b.startOffset);c[k].update();this.applyMarkup(c[k].getSelectionTree(),b,this.getClonedMarkup4Wrapping(m),d,{setRangeObject2NextSibling:!0})}!e&&g&&(c[k].startContainer=
b.endContainer,c[k].startOffset=b.endOffset,l=f(m).textNodes(!0),c[k].endContainer=l[l.length-1],c[k].endOffset=l[l.length-1].length,c[k].update(),this.applyMarkup(c[k].getSelectionTree(),b,this.getClonedMarkup4Wrapping(m),d,{setRangeObject2PreviousSibling:!0}))}return!0},changeMarkupOnSelection:function(a){var b=this.getRangeObject();this.changeMarkup(b,a,this.getStandardTagComparator(a));u.Utils.Dom.doCleanup({merge:!0},b);b.update();b.select();this.rangeObject=b},applyMarkup:function(a,b,c,d,e){var f,
l;e=e||{};this.prepareForRemoval(a,c,d);a=this.optimizeSelectionTree4Markup(a,c,d);for(f=0;f<a.length;f++)l=a[f],l.wrappable?this.wrapMarkupAroundSelectionTree(l.elements,b,c,d,e):(g.Log.debug(this,"dive further into non-wrappable object"),this.applyMarkup(l.element.children,b,c,d,e))},getMarkupType:function(a){var b=f(a)[0].nodeName.toLowerCase();a.outerHtml&&g.Log.debug(this,"Node name detected: "+b+" for: "+a.outerHtml());if("#text"==b)return"textNode";if(this.replacingElements[b])return"sectionOrGroupingContent";
if(this.tagHierarchy[b])return"textLevelSemantics";g.Log.warn(this,"unknown markup passed to this.getMarkupType(...): "+a.outerHtml())},getStandardTagComparator:function(a){var b=this;switch(this.getMarkupType(a)){case "textNode":a=function(a,b){return!1};break;case "sectionOrGroupingContent":a=function(a,c){return b.standardSectionsAndGroupingContentComparator(a,c)};break;default:a=function(a,c){return b.standardTextLevelSemanticsComparator(a,c)}}return a},prepareForRemoval:function(a,b,c){var d,
e;"undefined"!==typeof c&&"function"!==typeof c&&g.Log.error(this,"parameter tagComparator is not a function");"undefined"===typeof c&&(c=this.getStandardTagComparator(b));for(d=0;d<a.length;d++)e=a[d],e.domobj&&("full"==e.selection||"partial"==e.selection&&b.isReplacingElement)&&1===e.domobj.nodeType&&c(e.domobj,b)&&(g.Log.debug(this,"Marking for removal: "+e.domobj.nodeName),f(e.domobj).addClass("preparedForRemoval")),"none"!=e.selection&&0<e.children.length&&this.prepareForRemoval(e.children,b,
c)},wrapMarkupAroundSelectionTree:function(a,b,c,d,e){var l=[],k=-1,m="",n="",q,t,p;g.Log.debug(this,"The formatting <"+c[0].tagName+"> will be wrapped around the selection");for(q=0;q<a.length;q++)if(t=a[q],t.domobj&&!this.canTag1WrapTag2(t.domobj.parentNode.tagName.toLowerCase(),c[0].tagName.toLowerCase()))g.Log.info(this,"Skipping the wrapping of <"+c[0].tagName.toLowerCase()+"> because this tag is not allowed inside <"+t.domobj.parentNode.tagName.toLowerCase()+">");else if(!t.domobj||3!==t.domobj.nodeType||
0!==f.trim(t.domobj.nodeValue).length){if(t.domobj&&"partial"==t.selection&&!c.isReplacingElement)if(void 0!==t.startOffset&&void 0===t.endOffset)k++,m+=t.domobj.data.substr(0,t.startOffset),t.domobj.data=t.domobj.data.substr(t.startOffset,t.domobj.data.length-t.startOffset),l[k]=t.domobj;else if(void 0!==t.endOffset&&void 0===t.startOffset)k++,n+=t.domobj.data.substr(t.endOffset,t.domobj.data.length-t.endOffset),t.domobj.data=t.domobj.data.substr(0,t.endOffset),l[k]=t.domobj;else if(void 0!==t.endOffset&&
void 0!==t.startOffset){if(t.startOffset==t.endOffset){g.Log.debug(this,"skipping empty selection");continue}k++;m+=t.domobj.data.substr(0,t.startOffset);p=t.domobj.data.substr(t.startOffset,t.endOffset-t.startOffset);n+=t.domobj.data.substr(t.endOffset,t.domobj.data.length-t.endOffset);t.domobj.data=p;l[k]=t.domobj}else g.Log.debug(this,"diving into object"),this.applyMarkup(t.children,b,c,d,e);t.domobj&&("full"==t.selection||"partial"==t.selection&&c.isReplacingElement)&&(k++,l[k]=t.domobj)}0<l.length&&
(l=f(l),f.each(l,function(a,b){f.browser.msie&&3==b.nodeType&&!b.nextSibling&&!b.previousSibling&&b.parentNode&&"li"==b.parentNode.nodeName.toLowerCase()&&(b.data=f.trim(b.data))}),a=l.wrapAll(c).parent(),a.before(m).after(n),e.setRangeObject2NewMarkup&&(m=l.textNodes(),-1!=m.index(b.startContainer)&&(b.startOffset=0),-1!=m.index(b.endContainer)&&(b.endOffset=b.endContainer.length)),e.setRangeObject2NextSibling&&(m=!0,n=a.textNodes(!0).last()[0],-1!=l.index(b.startContainer)&&(b.startContainer=this.getTextNodeSibling(m,
a.parent(),n),b.startOffset=0),-1!=l.index(b.endContainer)&&(b.endContainer=this.getTextNodeSibling(m,a.parent(),n),b.endOffset-=n.length)),e.setRangeObject2PreviousSibling&&(m=!1,n=a.textNodes(!0).first()[0],-1!=l.index(b.startContainer)&&(b.startContainer=this.getTextNodeSibling(m,a.parent(),n),b.startOffset=0),-1!=l.index(b.endContainer)&&(b.endContainer=this.getTextNodeSibling(m,a.parent(),n),b.endOffset=b.endContainer.length)))},getTextNodeSibling:function(a,b,c){b=f(b).textNodes(!0);c=b.index(c);
return-1==c?!1:b[c+(a?1:-1)]||!1},optimizeSelectionTree4Markup:function(a,b,c){var d=[],e=0,g=0,l=this,k,m,n,q;"undefined"===typeof c&&(c=function(a,b){return l.standardTextLevelSemanticsComparator(b)});for(k=0;k<a.length;k++)if(a[k].domobj&&"none"!=a[k].selection)if(b.isReplacingElement&&c(b[0],f(a[k].domobj)))void 0!==d[e]&&e++,d[e]={},d[e].wrappable=!0,d[e].elements=[],d[e].elements[g]=a[k],e++;else if(this.canMarkupBeApplied2ElementAsWhole([a[k]],b))if(void 0===d[e]&&(d[e]={},d[e].wrappable=!0,
d[e].elements=[]),b.isReplacingElement){q=k;for(m=k-1;0<=m;m--)if(this.canMarkupBeApplied2ElementAsWhole([a[m]],b)&&this.isMarkupAllowedToStealSelectionTreeElement(a[m],b))q=m;else break;n=k;for(m=k+1;m<a.length;m++)if(this.canMarkupBeApplied2ElementAsWhole([a[m]],b)&&this.isMarkupAllowedToStealSelectionTreeElement(a[m],b))n=m;else break;g=0;for(m=q;m<=n;m++)d[e].elements[g]=a[m],d[e].elements[g].selection="full",g++;g=0}else d[e].elements[g]=a[k],g++;else void 0!==d[e]&&e++,d[e]={},d[e].wrappable=
!1,d[e].element=a[k],g=0,e++;return d},isMarkupAllowedToStealSelectionTreeElement:function(a,b){if(!a.domobj)return!1;var c=a.domobj.nodeName.toLowerCase(),c="#text"==c?"textNode":c,d=b[0].nodeName.toLowerCase();return(d=this.allowedToStealElements[d])&&d[c]},canMarkupBeApplied2ElementAsWhole:function(a,b){var c,d,e;b.jquery&&(c=b[0].tagName);b.tagName&&(c=b.tagName);for(d=0;d<a.length;d++)if(e=a[d],e.domobj&&("none"!=e.selection||b.isReplacingElement)&&(!this.canTag1WrapTag2(c,e.domobj.nodeName)||
0<e.children.length&&!this.canMarkupBeApplied2ElementAsWhole(e.children,b)))return!1;return!0},canTag1WrapTag2:function(a,b){a="#text"==a?"textNode":a.toLowerCase();b="#text"==b?"textNode":b.toLowerCase();var c=this.tagHierarchy[a];return c&&this.tagHierarchy[b]?c[b]:!0},mayInsertTag:function(a){var b;if("object"==typeof this.rangeObject.unmodifiableMarkupAtStart){for(b=0;b<this.rangeObject.unmodifiableMarkupAtStart.length;++b)if(!this.canTag1WrapTag2(this.rangeObject.unmodifiableMarkupAtStart[b].nodeName,
a))return!1;return!0}g.Log.warn(this,"Unable to determine whether tag "+a+" may be inserted");return!0},toString:function(){return"Aloha.Selection"},SelectionRange:u.Utils.RangeObject.extend({_constructor:function(a){this._super(a);a&&(a.commonAncestorContainer&&(this.commonAncestorContainer=a.commonAncestorContainer),a.selectionTree&&(this.selectionTree=a.selectionTree),a.limitObject&&(this.limitObject=a.limitObject),a.markupEffectiveAtStart&&(this.markupEffectiveAtStart=a.markupEffectiveAtStart),
a.unmodifiableMarkupAtStart&&(this.unmodifiableMarkupAtStart=a.unmodifiableMarkupAtStart),a.splitObject&&(this.splitObject=a.splitObject))},commonAncestorContainer:void 0,selectionTree:void 0,markupEffectiveAtStart:[],unmodifiableMarkupAtStart:[],limitObject:void 0,splitObject:void 0,select:function(){this._super();g.Selection.updateSelection()},update:function(a){this.updatelimitObject();this.updateMarkupEffectiveAtStart();this.updateCommonAncestorContainer(a);this.selectionTree=void 0},getSelectionTree:function(){this.selectionTree||
(this.selectionTree=g.Selection.getSelectionTree(this));return this.selectionTree},getSelectedSiblings:function(a){var b=this.getSelectionTree();return this.recursionGetSelectedSiblings(a,b)},recursionGetSelectedSiblings:function(a,b){var c=!1,d=!1,e;for(e=0;e<b.length;++e)if(b[e].domobj===a)d=!0,c=[];else if(!d&&b[e].children){if(c=this.recursionGetSelectedSiblings(a,b[e].children),!1!==c)break}else if(d&&b[e].domobj&&"collapsed"!=b[e].selection&&"none"!=b[e].selection)c.push(b[e].domobj);else if(d&&
"none"==b[e].selection)break;return c},updateMarkupEffectiveAtStart:function(){this.markupEffectiveAtStart=[];this.unmodifiableMarkupAtStart=[];var a=this.getStartContainerParents(),b=!1,c,d,e;for(d=0;d<a.length;d++)e=a[d],b||e===this.limitObject?(b=!0,this.unmodifiableMarkupAtStart.push(e)):(this.markupEffectiveAtStart[d]=e,!c&&u.Utils.Dom.isSplitObject(e)&&(c=!0,this.splitObject=e));c||(this.splitObject=!1)},updatelimitObject:function(){if(g.editables&&0<g.editables.length){var a=this.getStartContainerParents(),
b=g.editables,c,d,e,l;for(c=0;c<a.length;c++)for(d=a[c],e=0;e<b.length;e++)if(l=b[e].obj[0],d===l)return this.limitObject=d,!0}this.limitObject=f("body");return!0},toString:function(a){return a?"Aloha.Selection.SelectionRange {start ["+this.startContainer.nodeValue+"] offset "+this.startOffset+", end ["+this.endContainer.nodeValue+"] offset "+this.endOffset+"}":"Aloha.Selection.SelectionRange"}})});var t=n.extend({_constructor:function(a){this._nativeSelection=a;this.ranges=[];this.preventChange=
!1},anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0,isCollapsed:!1,rangeCount:0,collapse:function(a,b){this._nativeSelection.collapse(a,b)},collapseToStart:function(){throw"NOT_IMPLEMENTED";},extend:function(a,b){},modify:function(a,b,c){},collapseToEnd:function(){this._nativeSelection.collapseToEnd()},selectAllChildren:function(a){throw"NOT_IMPLEMENTED";},deleteFromDocument:function(){throw"NOT_IMPLEMENTED";},getRangeAt:function(a){a=this._nativeSelection.getRangeAt(a);r(a);return a},
addRange:function(a){this._nativeSelection.addRange(a);var b=this._nativeSelection._ranges;r(a);b[0]=a;g.Selection.updateSelection()},removeRange:function(a){this._nativeSelection.removeRange()},removeAllRanges:function(){this._nativeSelection.removeAllRanges()},refresh:function(a){},toString:function(){return"Aloha.Selection"},getRangeCount:function(){return this._nativeSelection.rangeCount}});g.getSelection=function(a){a=a!==document||a!==window?window:a;return new t(window.rangy.getSelection(a))};
g.createRange=function(a){return window.rangy.createRange(a)};n=new m;return g.Selection=n});
define("aloha/core util/class jquery aloha/pluginmanager aloha/selection aloha/markup aloha/contenthandlermanager aloha/console aloha/block-jump aloha/ephemera util/dom2 PubSub aloha/copypaste aloha/command aloha/state-override".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q){function t(a){return l.handleContent(a.getContents(),{contenthandler:g.settings.contentHandler.smartContentChange},a)}var v=window.unescape,x=window.GENTICS,C=!1,y={};g.defaults.contentHandler={};g.defaults.contentHandler.initEditable=
["blockelement","sanitize"];g.defaults.contentHandler.getContents=["blockelement","sanitize","basic"];"undefined"===typeof g.settings.contentHandler&&(g.settings.contentHandler={});var z=function(a){return n(a).html()},D={65:"a"},F={"ctrl+a":function(){var a=u.getEditableAt(u.getRange());if(a)return u.selectAllOf(a.obj[0]),!1}};n(document).keydown(function(a){if(g.activeEditable){var b=D[a.which];if(b){var c=a.altKey?"alt":a.ctrlKey?"ctrl":a.shiftKey?"shift":null,b=(c?c+"+":"")+b;if(F[b])return F[b](a)}}});
g.Editable=f.extend({_constructor:function(a){a.attr("id")||a.attr("id",x.Utils.guid());this.originalObj=this.obj=a;this.ready=!1;this.sccDelimiters=[":",";",".","!","?",",",v("%u0009"),v("%u0020"),v("%u0008"),v("%u007F"),"Enter"];this.sccIdle=5E3;this.sccDelay=500;this.sccTimerDelay=this.sccTimerIdle=!1;this.keyCodeMap={93:"Apps",18:"Alt",20:"CapsLock",17:"Control",40:"Down",35:"End",13:"Enter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",
36:"Home",45:"Insert",37:"Left",224:"Meta",34:"PageDown",33:"PageUp",19:"Pause",44:"PrintScreen",39:"Right",145:"Scroll",16:"Shift",38:"Up",91:"Win",92:"Win"};this.placeholderClass="aloha-placeholder";g.registerEditable(this)},init:function(){var a=this;(this.settings=g.settings)&&g.settings.smartContentChange&&(g.settings.smartContentChange.delimiters&&(this.sccDelimiters=g.settings.smartContentChange.delimiters),g.settings.smartContentChange.idle&&(this.sccIdle=g.settings.smartContentChange.idle),
g.settings.smartContentChange.delay&&(this.sccDelay=g.settings.smartContentChange.delay));if(this.check(this.obj)){"undefined"===typeof g.settings.contentHandler.getContents&&(g.settings.contentHandler.getContents=g.defaults.contentHandler.getContents);"undefined"===typeof g.settings.contentHandler.initEditable&&(g.settings.contentHandler.initEditable=g.defaults.contentHandler.initEditable);var b=a.obj.html(),b=l.handleContent(b,{contenthandler:g.settings.contentHandler.initEditable,command:"initEditable"},
a);a.obj.html(b);g.bind("aloha-plugins-loaded",function(){a.obj.addClass("aloha-editable").contentEditable(!0);a.obj.mousedown(function(b){if(!g.eventHandled)return g.eventHandled=!0,a.activate(b)});a.obj.mouseup(function(a){g.eventHandled=!1});a.obj.focus(function(b){return a.activate(b)});a.obj.add(".aloha-block",a.obj).keydown(function(b){var c=e.preProcessKeyStrokes(b);a.keyCode=b.which;c||a.smartContentChange(b);return c}).keypress(q.keyPressHandler);a.obj.keypress(function(a){g.activeEditable.smartContentChange(a)});
a.obj.keyup(function(a){if(27===a.keyCode)return g.deactivateEditable(),!1});a.obj.contentEditableSelectionChange(function(b){k.onChange(a.obj,b);return a.obj});a.setUnmodified();a.snapshotContent=a.getContents();n.browser.mozilla&&a.initEmptyEditable();a.initPlaceholder();a.ready=!0;window.setTimeout(function(){g.disableObjectResizing()},20);g.trigger("aloha-editable-created",[a]);r.pub("aloha.editable.created",{data:a})})}else this.destroy()},isActive:!1,originalContent:null,range:void 0,check:function(){var a=
this,b=this.obj,c=b.get(0).nodeName.toLowerCase(),d="a abbr address article aside b bdo blockquote cite code command del details dfn div dl em footer h1 h2 h3 h4 h5 h6 header i ins menu nav p pre q ruby section small span strong sub sup var".split(" "),e;for(e=0;e<d.length;++e)if(c===d[e])return!0;switch(c){case "textarea":case "input":return c=n('<div id="'+this.getId()+'-aloha" class="aloha-'+c+'" />').insertAfter(b),c.height(b.height()).width(b.width()).html(b.val()),b.hide(),b.parents("form:first").submit(function(){b.val(a.getContents())}),
this.obj=c,!0}return!1},initPlaceholder:function(){g.settings.placeholder&&this.isEmpty()&&this.addPlaceholder()},isEmpty:function(){var a=n.trim(this.getContents());return 0===a.length||("<br>"===a?!0:!1)},initEmptyEditable:function(){var a=this.obj;this.empty(this.getContents())&&n(a).prepend('<br class="aloha-cleanme" />')},addPlaceholder:function(){var a=n("<div>"),b=n("<span>"),c,d=this.obj;c=x.Utils.Dom.allowsNesting(d[0],a[0])?a:b;0===n("."+this.placeholderClass,d).length&&(n.each(g.settings.placeholder,
function(a,b){d.is(a)&&c.html(b)}),c.is(":empty")||(c.addClass(this.placeholderClass).addClass("aloha-ephemera"),n(d).append(c)),n("br",d).remove())},removePlaceholder:function(a,b){var c=this.placeholderClass,d;0!==n("."+this.placeholderClass,a).length&&(!0===b?window.setTimeout(function(){d=new k.SelectionRange;d.startContainer=d.endContainer=a.get(0);d.startOffset=d.endOffset=0;n("."+c,a).remove();d.select()},100):n("."+c,a).remove())},destroy:function(){this===g.getActiveEditable()&&this.blur();
switch(this.originalObj.get(0).nodeName.toLowerCase()){case "textarea":case "input":this.originalObj.val(this.getContents()),this.obj.remove(),this.originalObj.show()}this.ready=!1;this.removePlaceholder(this.obj);this.obj.removeClass("aloha-editable").contentEditable(!1).unbind("mousedown click dblclick focus keydown keypress keyup");g.trigger("aloha-editable-destroyed",[this]);r.pub("aloha.editable.destroyed",{data:this});g.unregisterEditable(this)},setUnmodified:function(){this.originalContent=
this.getContents()},isModified:function(){return this.originalContent!==this.getContents()},toString:function(){return"Aloha.Editable"},isDisabled:function(){return!this.obj.contentEditable()||"false"===this.obj.contentEditable()},disable:function(){return this.isDisabled()||this.obj.contentEditable(!1)},enable:function(){return this.isDisabled()&&this.obj.contentEditable(!0)},activate:function(a){var b=g.getActiveEditable();C?C=!1:a&&"focus"===a.type&&null!==b&&b.obj.parent().get(0)===a.currentTarget||
this.isActive||this.isDisabled()||(this.obj.addClass("aloha-editable-active"),g.activateEditable(this),C=!0,this.removePlaceholder(this.obj,!0),C=!1,this.isActive=!0,g.trigger("aloha-editable-activated",{oldActive:b,editable:this}),r.pub("aloha.editable.activated",{data:{old:b,editable:this}}))},blur:function(){this.obj.blur();this.isActive=!1;this.initPlaceholder();this.obj.removeClass("aloha-editable-active");g.trigger("aloha-editable-deactivated",{editable:this});g.activeEditable.smartContentChange({type:"blur"},
null)},empty:function(a){return null===a||""===n.trim(a)||"<br/>"===a},getContents:function(a){var d=this.obj.html(),e=y[this.getId()];if(!e||d!==e.raw){c.removeZeroWidthTextNodeFix();var f=this.obj.clone(!1);this.removePlaceholder(f);f=n(b.prune(f[0]));m.makeClean(f);f=n("<div>"+l.handleContent(f.html(),{contenthandler:g.settings.contentHandler.getContents,command:"getContents"},this)+"</div>");e=y[this.getId()]={};e.raw=d;e.element=f}if(a)return e.element.clone().contents();null==e.serialized&&
(e.serialized=z(e.element[0]));return e.serialized},setContents:function(a,b){var c=null;g.getActiveEditable()===this&&(g.deactivateEditable(),c=this);this.obj.html(a);null!==c&&c.activate();this.smartContentChange({type:"set-contents"});return b?this.obj.contents():z(this.obj[0])},getId:function(){return this.obj.attr("id")},smartContentChange:function(a){function b(){null==l&&(l=c.getSnapshotContent());return l}var c=this,e=null,f;if(a&&(a.metaKey||a.crtlKey||a.altKey))return!1;a&&a.originalEvent&&
(f=/U\+(\w{4})/,f.exec(a.originalEvent.keyIdentifier),e=this.keyCodeMap[this.keyCode]||String.fromCharCode(a.which)||"unknown");var l=null;0<=n.inArray(e,this.sccDelimiters)?(clearTimeout(this.sccTimerIdle),clearTimeout(this.sccTimerDelay),this.sccTimerDelay=window.setTimeout(function(){g.trigger("aloha-smart-content-changed",{editable:c,keyIdentifier:a.originalEvent.keyIdentifier,keyCode:a.keyCode,"char":e,triggerType:"keypress",getSnapshotContent:b});t(c);d.debug("Aloha.Editable","smartContentChanged: event type keypress triggered")},
this.sccDelay)):a&&"paste"===a.type?(g.trigger("aloha-smart-content-changed",{editable:c,keyIdentifier:null,keyCode:null,"char":null,triggerType:"paste",getSnapshotContent:b}),t(c)):a&&"blur"===a.type?(g.trigger("aloha-smart-content-changed",{editable:c,keyIdentifier:null,keyCode:null,"char":null,triggerType:"blur",getSnapshotContent:b}),t(c)):a&&"block-change"===a.type?(g.trigger("aloha-smart-content-changed",{editable:c,keyIdentifier:null,keyCode:null,"char":null,triggerType:"block-change",getSnapshotContent:b}),
t(c)):null!==e&&(clearTimeout(this.sccTimerDelay),clearTimeout(this.sccTimerIdle),this.sccTimerIdle=window.setTimeout(function(){g.trigger("aloha-smart-content-changed",{editable:c,keyIdentifier:null,keyCode:null,"char":null,triggerType:"idle",getSnapshotContent:b});t(c)},this.sccIdle))},getSnapshotContent:function(){var a=this.snapshotContent;this.snapshotContent=this.getContents();return a}});g.Editable.setContentSerializer=function(a){z=a};g.Editable.getContentSerializer=function(){return z}});
define(["jquery","util/class"],function(g,f){function n(f,e){if(0===f.length)e&&e();else{var g=f.length,d=function(){0===--g&&e&&e()},c,b;for(c=0;c<f.length;c++)b=f[c],b.settings=b.settings||{},"undefined"===typeof b.settings.enabled&&(b.settings.enabled=!0),b.settings.enabled&&b.checkDependencies()?(b=b.init())&&"function"===typeof b.done?b.done(d):d():d()}}var m=window.Aloha;return new (f.extend({plugins:{},init:function(f,e){var g=this.plugins,d=m&&m.settings&&m.settings.plugins,c;for(c in d)d.hasOwnProperty(c)&&
g[c]&&(g[c].settings=d[c]||{});var b;if(g&&0===e.length)for(b in e=[],g)g.hasOwnProperty(b)&&e.push(b);d=e;c=[];var p;for(p=0;p<d.length;p++)(b=g[d[p]])&&c.push(b);n(c,f)},register:function(f){if(!f.name)throw Error("Plugin does not have an name.");if(this.plugins[f.name])throw Error('Already registered the plugin "'+f.name+'"!');this.plugins[f.name]=f},makeClean:function(f){for(var e in this.plugins)this.plugins.hasOwnProperty(e)&&(m.Log.isDebugEnabled()&&m.Log.debug(this,"Passing contents of HTML Element with id { "+
f.attr("id")+" } for cleaning to plugin { "+e+" }"),this.plugins[e].makeClean(f))},toString:function(){return"pluginmanager"}}))});
define(["jquery","aloha/pluginmanager"],function(g,f){function n(){var e=g.browser,d=e.version;return!(e.webkit&&532.5>parseFloat(d)||e.mozilla&&1.9>parseFloat(d)||e.msie&&7>d||e.opera&&11>d)}function m(){g("html").mousedown(function(e){var d;if(d=k.activeEditable)if(d=!k.eventHandled)e=g(e.target),d=!(e.is(".aloha-dialog")||e.closest(".aloha").length);d&&k.deactivateEditable()}).mouseup(function(){k.eventHandled=!1})}var k=window.Aloha,e=[{fn:null,event:null,deferred:null},{fn:function(e,d){if(n())g.browser.webkit?
g("html").addClass("aloha-webkit"):g.browser.opera?g("html").addClass("aloha-opera"):g.browser.msie?g("html").addClass("aloha-ie"+parseInt(g.browser.version,10)):g.browser.mozilla&&g("html").addClass("aloha-mozilla"),-1!==navigator.appVersion.indexOf("Win")?k.OSName="Win":-1!==navigator.appVersion.indexOf("Mac")?k.OSName="Mac":-1!==navigator.appVersion.indexOf("X11")?k.OSName="Unix":-1!==navigator.appVersion.indexOf("Linux")&&(k.OSName="Linux"),m(),k.settings.base=k.getAlohaUrl(),k.Log.init(),k.settings.errorhandling&&
(window.onerror=function(b,c,d){k.Log.error(k,"Error message: "+b+"\nURL: "+c+"\nLine Number: "+d);return!0}),e(),d();else{var c=window.console;if(c){var b=c.error?"error":c.log?"log":null;if(b)c[b]("This browser is not supported")}}},event:null,deferred:null},{fn:function(e,d){k.RepositoryManager.init();e();d()},event:null,deferred:null},{fn:function(e,d){if(0===k.loadedPlugins.length){var c=f.plugins,b;for(b in c)c.hasOwnProperty(b)&&k.loadedPlugins.push(b)}var g=!1;f.init(function(){g||(e(),g=
!0);d()},k.loadedPlugins);g||(e(),g=!0)},event:"aloha-plugins-loaded",deferred:null},{fn:function(e,d){var c;for(c=0;c<k.editables.length;c++)k.editables[c].ready||k.editables[c].init();e();d()},event:null,deferred:null},{fn:null,event:"aloha-ready",deferred:null}];g.extend(!0,k,{version:"${version}",editables:[],activeEditable:null,settings:{},defaults:{},ui:{},OSName:"Unknown",loadedPlugins:[],_pluginBaseUrlByName:{},init:function(){k.initialize(e)},getLoadedPlugins:function(){return this.loadedPlugins},
isPluginLoaded:function(e){var d=!1;g.each(this.loadedPlugins,function(c,b){if(e===b.toString())return d=!0,!1});return d},activateEditable:function(e){var d=k.editables,c;for(c=0;c<d.length;c++)d[c]!==e&&d[c].isActive&&d[c].blur();k.activeEditable=e},getActiveEditable:function(){return k.activeEditable},deactivateEditable:function(){k.activeEditable&&(k.activeEditable.blur(),k.activeEditable=null)},getEditableById:function(e){var d=g("#"+e);d.length&&"textarea"===d[0].nodeName.toLowerCase()&&(e+=
"-aloha");for(d=0;d<k.editables.length;d++)if(k.editables[d].getId()===e)return k.editables[d];return null},isEditable:function(e){var d,c;d=0;for(c=k.editables.length;d<c;d++)if(k.editables[d].originalObj.get(0)===e)return!0;return!1},getEditableHost:function(){var e=function(d){var c;for(c=0;c<k.editables.length;c++)if(k.editables[c].originalObj[0]===d)return k.editables[c];return null};return function(d){if(!d||0===d.length)return null;var c=e(d[0]);c||d.parents().each(function(b,d){if(c=e(d))return!1});
return c}}(),log:function(e,d,c){"undefined"!==typeof k.Log&&k.Log.log(e,d,c)},registerEditable:function(e){k.editables.push(e)},unregisterEditable:function(e){e=g.inArray(e,k.editables);-1!==e&&k.editables.splice(e,1)},isModified:function(){var e;for(e=0;e<k.editables.length;e++)if(k.editables[e].isModified&&k.editables[e].isModified())return!0;return!1},getAlohaUrl:function(e){return k.settings.baseUrl||""},getPluginUrl:function(e){if(!e)return null;(e=k.settings._pluginBaseUrlByName[e])&&(e.match("^(/|http[s]?:).*")||
(e=k.getAlohaUrl()+"/"+e));return e},disableObjectResizing:function(){try{var e;try{e=document.queryCommandSupported("enableObjectResizing")}catch(d){e=!1,k.Log.log("enableObjectResizing is not supported.")}e&&(document.execCommand("enableObjectResizing",!1,!1),k.Log.log("enableObjectResizing disabled."))}catch(c){k.Log.error(c,"Could not disable enableObjectResizing")}},toString:function(){return"Aloha"}});return k});
define(["aloha/core","util/class","jquery"],function(g,f,n){f=f.extend({init:function(){"undefined"!==typeof g.settings.logLevels&&g.settings.logLevels||(g.settings.logLevels={error:!0,warn:!0});"undefined"!==typeof g.settings.logHistory&&g.settings.logHistory||(g.settings.logHistory={});g.settings.logHistory.maxEntries||(g.settings.logHistory.maxEntries=100);g.settings.logHistory.highWaterMark||(g.settings.logHistory.highWaterMark=90);g.settings.logHistory.levels||(g.settings.logHistory.levels={error:!0,
warn:!0});this.flushLogHistory();g.trigger("aloha-logger-ready")},logHistory:[],highWaterMarkReached:!1,log:function(f,k,e){"undefined"===typeof k&&(e=f);"string"!==typeof k&&k&&k.toString&&(k=k.toString());"undefined"===typeof e&&(e=k,k=void 0);"undefined"!==typeof f&&f||(f="log");f=f.toLowerCase();if("undefined"!==typeof g.settings.logLevels&&g.settings.logLevels[f]){k=k||"Unkown Aloha Component";this.addToLogHistory({level:f,component:k,message:e,date:new Date});var l=window.console;switch(f){case "error":window.console&&
l.error&&(k||e?l.error(k+": "+e):l.error("Error occured without message and component"));break;case "warn":window.console&&l.warn&&l.warn(k+": "+e);break;case "info":window.console&&l.info&&l.info(k+": "+e);break;case "debug":window.console&&l.log&&l.log(k+" ["+f+"]: "+e);break;default:window.console&&l.log&&l.log(k+" ["+f+"]: "+e)}}},error:function(f,g){this.log("error",f,g)},warn:function(f,g){this.log("warn",f,g)},info:function(f,g){this.log("info",f,g)},debug:function(f,g){this.log("debug",f,
g)},deprecated:function(f,k){this.log("warn",f,k);if(g.settings.logLevels.deprecated)throw Error(k);},isLogLevelEnabled:function(f){return g.settings&&g.settings.logLevels&&g.settings.logLevels[f]},isErrorEnabled:function(){return this.isLogLevelEnabled("error")},isWarnEnabled:function(){return this.isLogLevelEnabled("warn")},isInfoEnabled:function(){return this.isLogLevelEnabled("info")},isDebugEnabled:function(){return this.isLogLevelEnabled("debug")},addToLogHistory:function(f){g.settings.logHistory||
this.init();if(!(0>=g.settings.logHistory.maxEntries)&&g.settings.logHistory.levels[f.level])for(this.logHistory.push(f),!this.highWaterMarkReached&&this.logHistory.length>=g.settings.logHistory.maxEntries*g.settings.logHistory.highWaterMark/100&&(g.trigger("aloha-log-full"),this.highWaterMarkReached=!0);this.logHistory.length>g.settings.logHistory.maxEntries;)this.logHistory.shift()},getLogHistory:function(){return this.logHistory},flushLogHistory:function(){this.logHistory=[];this.highWaterMarkReached=
!1}});f=new f;return g.Log=g.Console=f});
define([],function(){function g(e){var d=null;if(e){do d=e;while(null!=(e=e.parentNode))}return d}function f(e,d){return(e.contains(d)&&16)+(d.contains(e)&&8)+(0<=e.sourceIndex&&0<=d.sourceIndex?(e.sourceIndex<d.sourceIndex&&4)+(e.sourceIndex>d.sourceIndex&&2):1)}function n(e){return null!=e.sourceIndex?e:e.parentNode.insertBefore(document.createComment(""),e)}var m,k={bind:function(e){var d=this.obj||this,c=Function.prototype.bind,b=Array.prototype.slice.call(arguments,1);return c?c.apply(d,arguments):
function(){return d.apply(e,0===arguments.length?b:b.concat(Array.prototype.slice.call(arguments)))}},trim:function(){var e=this.obj||this,d=String.prototype.trim;return d?d.call(e):e.replace(/^\s+/,"").replace(/\s+$/,"")},indexOf:function(e,d){var c=this.obj||this,b=Array.prototype.indexOf;if(b)return b.call(c,e,d);void 0===d&&(d=0);0>d&&(d+=c.length);0>d&&(d=0);for(b=c.length;d<b;d++)if(void 0!==c[d]&&c[d]===e)return d;return-1},forEach:function(e,d){var c=this.obj||this,b=Array.prototype.forEach;
if(b)return b.call(c,e,d);var f,b=0;for(f=c.length;b<f;b++)void 0!==c[b]&&e.call(d,c[b],b,c)},map:function(e,d,c){var b=this.obj||this,f=Array.prototype.map,g="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,k=[];if(f)k=f.call(b,e,d);else{var f=[],a,k=0;for(a=b.length;k<a;k++)void 0!==b[k]&&(f[k]=e.call(d,b[k],k,b));k=f}return g?m(k):k},filter:function(e,d,c){var b=this.obj||this,f=Array.prototype.filter,g="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):
!1,k=[];if(f)k=f.call(b,e,d);else{var f=[],a,n,k=0;for(n=b.length;k<n;k++)void 0!==b[k]&&e.call(d,a=b[k],k,b)&&f.push(a);k=f}return g?m(k):k},every:function(e,d){var c=this.obj||this,b=Array.prototype.every;if(b)return b.call(c,e,d);var f,b=0;for(f=c.length;b<f;b++)if(void 0!==c[b]&&!e.call(d,c[b],b,c))return!1;return!0},some:function(e,d){var c=this.obj||this,b=Array.prototype.some;if(b)return b.call(c,e,d);var f,b=0;for(f=c.length;b<f;b++)if(void 0!==c[b]&&e.call(d,c[b],b,c))return!0;return!1},
hasAttribute:function(e){var d=this.obj||this;return d.hasAttribute?d.hasAttribute(e):!!d.getAttribute(e)}};m=function(e){var d=function(){};d.prototype=k;d=new d;d.obj=e;return d};for(var e in k)k.hasOwnProperty(e)&&(m[e]=k[e]);m.Node="undefined"!=typeof window.Node?window.Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,
DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32};m.compareDocumentPosition=function(e,d){if(document.documentElement.compareDocumentPosition)return e.compareDocumentPosition(d);if(!document.documentElement.contains)throw"neither compareDocumentPosition nor contains is supported by this browser.";if(e==d)return 0;if(g(e)!=g(d))return 1;if(null!=e.sourceIndex&&
null!=d.sourceIndex)return f(e,d);if(e==document)return 20;if(d==document)return 10;var c=n(e),b=n(d),k=f(c,b);e!=c&&c.parentNode.removeChild(c);d!=b&&b.parentNode.removeChild(b);return k};m.getComputedStyle=function(e,d){return window.getComputedStyle?window.getComputedStyle(e,d):e.currentStyle?e.currentStyle:null};return m});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};
define(["jquery","util/class","aloha/ecma5shims"],function(g,f,n){var m=window.GENTICS,k={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,LI:!0};f=f.extend({wordRegex:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
nonWordRegex:/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
mergeableTags:"b code del em i ins strong sub sup #text".split(" "),nonWordBoundaryTags:"a b code del em i ins span strong sub sup #text".split(" "),nonEmptyTags:["br"],tags:{flow:"a abbr address area article aside audio b bdi bdo blockquote br button canvas cite code command datalist del details dfn div dl em embed fieldset figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr i iframe img input ins kbd keygen label map mark math menu meter nav noscript object ol output p pre progress q ruby s samp script section select small span strong style sub sup svg table textarea time u ul var video wbr #text".split(" "),
phrasing:"a abbr area audio b bdi bdo br button canvas cite code command datalist del dfn em embed i iframe img input ins kbd keygen label map mark math meter noscript object output progress q ruby samp script select small span strong sub sup svg textarea time u var video wbr #text".split(" ")},children:{a:"phrasing",abbr:"phrasing",address:"flow",area:"empty",article:"flow",aside:"flow",audio:"source",b:"phrasing",base:"empty",bdo:"phrasing",blockquote:"phrasing",body:"flow",br:"empty",button:"phrasing",
canvas:"phrasing",caption:"flow",cite:"phrasing",code:"phrasing",col:"empty",colgroup:"col",command:"empty",datalist:["phrasing","option"],dd:"flow",del:"phrasing",div:"flow",details:["summary","flow"],dfn:"flow",dl:["dt","dd"],dt:"phrasing",em:"phrasing",embed:"empty",fieldset:["legend","flow"],figcaption:"flow",figure:["figcaption","flow"],footer:"flow",form:"flow",h1:"phrasing",h2:"phrasing",h3:"phrasing",h4:"phrasing",h5:"phrasing",h6:"phrasing",header:"flow",hgroup:"h1 h2 h3 h4 h5 h6".split(" "),
hr:"empty",i:"phrasing",iframe:"#text",img:"empty",input:"empty",ins:"phrasing",kbd:"phrasing",keygen:"empty",label:"phrasing",legend:"phrasing",li:"flow",link:"empty",map:"area",mark:"phrasing",menu:["li","flow"],meta:"empty",meter:"phrasing",nav:"flow",noscript:"phrasing",object:"param",ol:"li",optgroup:"option",option:"#text",output:"phrasing",p:"phrasing",param:"empty",pre:"phrasing",progress:"phrasing",q:"phrasing",rp:"phrasing",rt:"phrasing",ruby:["phrasing","rt","rp"],s:"phrasing",samp:"pharsing",
script:"#script",section:"flow",select:["option","optgroup"],small:"phrasing",source:"empty",span:"phrasing",strong:"phrasing",style:"phrasing",sub:"phrasing",summary:"phrasing",sup:"phrasing",table:"caption colgroup thead tbody tfoot tr".split(" "),tbody:"tr",td:"flow",textarea:"#text",tfoot:"tr",th:"phrasing",thead:"tr",time:"phrasing",title:"#text",tr:["th","td"],track:"empty",u:"phrasing",ul:"li","var":"phrasing",video:"source",wbr:"empty"},blockLevelElements:"p h1 h2 h3 h4 h5 h6 blockquote div pre".split(" "),
listElements:["li","ol","ul"],split:function(e,f,d){var c=g(e.startContainer),b=e.startOffset,k,m,n,a,q,t,v,x,C;d&&(c=g(e.endContainer),b=e.endOffset);1>f.length&&(f=g(document.body));d=!e.isCollapsed()&&!d;m=c.parents().get();m.unshift(c.get(0));g.each(m,function(a,b){if(f.filter(function(){return this==b}).length)return 0<a&&(k=m.slice(0,a)),!1});if(!k)return!0;k=k.reverse();c=0;for(t=k.length;c<t;++c)if(v=k[c],c===t-1)3===v.nodeType?(q=document.createTextNode(v.data.substring(b,v.data.length)),
v.data=v.data.substring(0,b)):(x=g(v),q=x.contents(),x=x.clone(!1).empty(),q=x.append(q.slice(b,q.length)).get(0)),d&&e.endContainer===v&&(e.endContainer=q,e.endOffset-=b,e.clearCaches()),a?a.prepend(q):g(v).after(q);else{x=g(v).clone(!1).empty();n?a.prepend(x):n=x;for(a=x;;){C=k[c+1].nextSibling;if(!C)break;a.append(C)}if(d&&e.endContainer===v){e.endContainer=x.get(0);v=k[c+1];for(x=0;;){v=v.previousSibling;if(!v)break;x++}e.endOffset-=x;e.clearCaches()}}g(k[0]).after(n);return g([k[0],n?n.get(0):
q])},allowsNesting:function(e,f){if(!(e&&e.nodeName&&f&&f.nodeName))return!1;var d=e.nodeName.toLowerCase(),c=f.nodeName.toLowerCase();return this.children[d]?this.children[d]==c||g.isArray(this.children[d])&&0<=g.inArray(c,this.children[d])||g.isArray(this.tags[this.children[d]])&&0<=g.inArray(c,this.tags[this.children[d]])?!0:!1:!1},addMarkup:function(e,f,d){3===e.startContainer.nodeType&&0<e.startOffset&&e.startOffset<e.startContainer.data.length&&this.split(e,g(e.startContainer).parent(),!1);
3===e.endContainer.nodeType&&0<e.endOffset&&e.endOffset<e.endContainer.data.length&&this.split(e,g(e.endContainer).parent(),!0);var c=e.getRangeTree();this.recursiveAddMarkup(c,f,e,d);this.doCleanup({merge:!0,removeempty:!0},e)},recursiveAddMarkup:function(e,f,d,c){var b,k;d=0;for(k=e.length;d<k;++d)"full"==e[d].type&&this.allowsNesting(f.get(0),e[d].domobj)?!c&&e[d].domobj.nodeName==f.get(0).nodeName||3===e[d].domobj.nodeType&&0===g.trim(e[d].domobj.data).length||(g(e[d].domobj).wrap(f),c||3===e[d].domobj.nodeType||
(b=new m.Utils.RangeObject,b.startContainer=b.endContainer=e[d].domobj.parentNode,b.startOffset=0,b.endOffset=b.endContainer.childNodes.length,this.removeMarkup(b,f,g(e[d].domobj.parentNode)))):(c||e[d].domobj&&e[d].domobj.nodeName!==f.get(0).nodeName)&&e[d].children&&0<e[d].children.length&&this.recursiveAddMarkup(e[d].children,f)},findHighestElement:function(e,f,d){f=f.toLowerCase();var c,b=e;for(e=d?function(){return d.filter(function(){return b==this}).length}:function(){return!1};!e()&&b;)b.nodeName.toLowerCase()===
f&&(c=b),b=b.parentNode;return c},removeMarkup:function(e,f,d){var c=f.get(0).nodeName,b=this.findHighestElement(e.startContainer,c,d),k=this.findHighestElement(e.endContainer,c,d),m=!1;b&&0<e.startOffset&&(this.split(e,g(b).parent(),!1),m=!0);k&&(3===e.endContainer.nodeType&&e.endOffset<e.endContainer.data.length&&(this.split(e,g(k).parent(),!0),m=!0),1===e.endContainer.nodeType&&e.endOffset<e.endContainer.childNodes.length&&(this.split(e,g(k).parent(),!0),m=!0));m&&e.correctRange();if(d=(d=this.findHighestElement(e.getCommonAncestorContainer(),
c,d))?d.parentNode:e.getCommonAncestorContainer())c=e.getRangeTree(d),this.recursiveRemoveMarkup(c,f),this.doCleanup({merge:!0,removeempty:!0},e,d)},recursiveRemoveMarkup:function(e,f){var d,c,b;d=0;for(c=e.length;d<c;++d)"full"==e[d].type&&e[d].domobj.nodeName==f.get(0).nodeName&&(b=g(e[d].domobj).contents(),0<b.length?b.first().unwrap():g(e[d].domobj).remove()),e[d].children&&this.recursiveRemoveMarkup(e[d].children,f)},doCleanup:function(e,f,d){var c=this,b,k,n,u,a;"undefined"===typeof e&&(e={});
"undefined"===typeof e.merge&&(e.merge=!1);"undefined"===typeof e.removeempty&&(e.removeempty=!1);"undefined"===typeof d&&f&&(d=f.getCommonAncestorContainer());k=b=!1;n=g(d);u=f.startOffset;a=f.endOffset;n.contents().each(function(){var d,t;try{t=this.nodeType,d=c.getIndexInParent(this)}catch(v){return}switch(t){case 1:b&&b.nodeName==this.nodeName?(f.startContainer===n&&u>d&&(f.startOffset-=1,k=!0),f.endContainer===n&&a>d&&(f.endOffset-=1,k=!0),g(b).append(g(this).contents()),k|=c.doCleanup(e,f,b),
g(this).remove()):(k|=c.doCleanup(e,f,this),t=!1,e.removeempty&&(m.Utils.Dom.isBlockLevelElement(this)&&0===this.childNodes.length&&(t=!0),0<=g.inArray(this.nodeName.toLowerCase(),c.mergeableTags)&&0===g(this).text().length&&0===this.childNodes.length&&(t=!0)),t?(f.startContainer===this.parentNode&&u>d&&(f.startOffset-=1,k=!0),f.endContainer===this.parentNode&&a>d&&(f.endOffset-=1,k=!0),g(this).remove()):b=(e.mergeable?e.mergeable(this):0<=g.inArray(this.nodeName.toLowerCase(),c.mergeableTags))?this:
!1);break;case 3:if(b&&3===b.nodeType&&e.merge)f.startContainer===this?(f.startContainer=b,f.startOffset+=b.nodeValue.length,k=!0):f.startContainer===b.parentNode&&f.startOffset===c.getIndexInParent(b)+1&&(f.startContainer=b,f.startOffset=b.nodeValue.length,k=!0),f.endContainer===this?(f.endContainer=b,f.endOffset+=b.nodeValue.length,k=!0):f.endContainer===b.parentNode&&f.endOffset===c.getIndexInParent(b)+1&&(f.endContainer=b,f.endOffset=b.nodeValue.length,k=!0),b.data+=this.data;else if(""!==this.nodeValue||
!e.removeempty){b=this;break}f.startContainer===this.parentNode&&f.startOffset>d&&(f.startOffset-=1,k=!0);f.endContainer===this.parentNode&&f.endOffset>d&&(f.endOffset-=1,k=!0);g(this).remove();if(b&&(!b.nextSibling||3!==b.nextSibling.nodeType))for(d=b.data.length-1;0<=d&&1<b.data.length;d--)"\u200b"===b.data.charAt(d)&&(b.deleteData(d,1),f.startContainer===b&&f.startOffset>d&&(f.startOffset--,k=!0),f.endContainer===b&&f.endOffset>d&&(f.endOffset--,k=!0))}});k&&f.clearCaches();return k},getIndexInParent:function(e){if(!e)return!1;
var f=0;for(e=e.previousSibling;e;)f++,e=e.previousSibling;return f},isBlockLevelElement:function(e){return e?1===e.nodeType&&0<=g.inArray(e.nodeName.toLowerCase(),this.blockLevelElements)?!0:!1:!1},isLineBreakElement:function(e){return e?1===e.nodeType&&"br"==e.nodeName.toLowerCase():!1},isListElement:function(e){return e?1===e.nodeType&&0<=g.inArray(e.nodeName.toLowerCase(),this.listElements):!1},isSplitObject:function(e){return 1===e.nodeType&&k.hasOwnProperty(e.nodeName)},searchAdjacentTextNode:function(e,
f,d,c){if(!e||1!==e.nodeType||0>f||f>e.childNodes.length)return!1;"undefined"===typeof c&&(c={blocklevel:!0,list:!0,linebreak:!0});"undefined"===typeof c.blocklevel&&(c.blocklevel=!0);"undefined"===typeof c.list&&(c.list=!0);"undefined"===typeof c.linebreak&&(c.linebreak=!0);"undefined"===typeof d&&(d=!0);var b,k=e;d&&0<f&&(b=e.childNodes[f-1]);for(!d&&f<e.childNodes.length&&(b=e.childNodes[f]);k;)if(b){if(3===b.nodeType&&0<g.trim(b.data).length)return b;if(c.blocklevel&&this.isBlockLevelElement(b)||
c.linebreak&&this.isLineBreakElement(b)||c.list&&this.isListElement(b))return!1;3===b.nodeType?b=d?b.previousSibling:b.nextSibling:(k=b,b=d?b.lastChild:b.firstChild)}else{if(c.blocklevel&&this.isBlockLevelElement(k)||c.list&&this.isListElement(k))return!1;b=d?k.previousSibling:k.nextSibling;k=k.parentNode}},insertIntoDOM:function(e,f,d,c,b){var k=f.getContainerParents(d,c),m=this,n;d||(d=g(document.body));0===k.length?n=d.get(0):g.each(k,function(a,b){if(m.allowsNesting(b,e.get(0)))return n=b,!1});
"undefined"===typeof n&&0<d.length&&(n=d.get(0));if(!this.allowsNesting(n,e.get(0))&&!b)return!1;if("undefined"!==typeof n){d=this.split(f,g(n),c);if(!0===d){d=f.startContainer;b=f.startOffset;c&&(d=f.endContainer,b=f.endOffset);if(0===b)return f=g(d).contents(),0<f.length?f.eq(0).before(e):g(d).append(e),!0;g(d).contents().eq(b-1).after(e);return!0}if(d)return d.eq(0).after(e),!0}return!1},removeFromDOM:function(e,f,d){if(d){d=this.getIndexInParent(e);var c=g(e).contents().length,b=e.parentNode;
f.startContainer==b&&f.startOffset>d?f.startOffset+=c-1:f.startContainer==e&&(f.startContainer=b,f.startOffset=d+f.startOffset);f.endContainer==b&&f.endOffset>d?f.endOffset+=c-1:f.endContainer==e&&(f.endContainer=b,f.endOffset=d+f.endOffset);g(e).contents().unwrap();this.doCleanup({merge:!0},f,b)}},removeRange:function(e){if(!e||e.isCollapsed())return!1;3==e.startContainer.nodeType&&0<e.startOffset&&e.startOffset<e.startContainer.data.length&&this.split(e,g(e.startContainer).parent(),!1);3==e.endContainer.nodeType&&
0<e.endOffset&&e.endOffset<e.endContainer.data.length&&this.split(e,g(e.endContainer).parent(),!0);var f=e.getRangeTree();e.endContainer=e.startContainer;e.endOffset=e.startOffset;this.recursiveRemoveRange(f,e);this.doCleanup({merge:!0},e);e.clearCaches()},recursiveRemoveRange:function(e,f){var d;for(d=0;d<e.length;++d)"full"==e[d].type?(0<g(f.startContainer).parents().andSelf().filter(e[d].domobj).length&&(f.startContainer=f.endContainer=e[d].domobj.parentNode,f.startOffset=f.endOffset=this.getIndexInParent(e[d].domobj)),
g(e[d].domobj).remove()):"partial"==e[d].type&&e[d].children&&this.recursiveRemoveRange(e[d].children,f)},extendToWord:function(e,f){var d=this.searchWordBoundary(e.startContainer,e.startOffset,!0),c=this.searchWordBoundary(e.endContainer,e.endOffset,!1);if(f||!(e.startContainer==d.container&&e.startOffset==d.offset||e.endContainer==c.container&&e.endOffset==c.offset))e.startContainer=d.container,e.startOffset=d.offset,e.endContainer=c.container,e.endOffset=c.offset,e.correctRange(),e.clearCaches()},
isWordBoundaryElement:function(e){return e&&e.nodeName?-1==g.inArray(e.nodeName.toLowerCase(),this.nonWordBoundaryTags):!1},searchWordBoundary:function(e,f,d){"undefined"===typeof d&&(d=!0);for(var c=!1,b,g;!c;)if(3===e.nodeType)if(d){for(g=b=e.data.substring(0,f).search(this.nonWordRegex);-1!=g;)b=g,g=e.data.substring(b+1,f).search(this.nonWordRegex),-1!=g&&(g=g+b+1);-1!=b?(f=b+1,c=!0):(f=this.getIndexInParent(e),e=e.parentNode)}else b=e.data.substring(f).search(this.nonWordRegex),-1!=b?(f+=b,c=
!0):(f=this.getIndexInParent(e)+1,e=e.parentNode);else 1===e.nodeType&&(d?0<f?this.isWordBoundaryElement(e.childNodes[f-1])?c=!0:(e=e.childNodes[f-1],f=3===e.nodeType?e.data.length:e.childNodes.length):this.isWordBoundaryElement(e)?c=!0:(f=this.getIndexInParent(e),e=e.parentNode):f<e.childNodes.length?this.isWordBoundaryElement(e.childNodes[f])?c=!0:(e=e.childNodes[f],f=0):this.isWordBoundaryElement(e)?c=!0:(f=this.getIndexInParent(e)+1,e=e.parentNode));3!==e.nodeType&&(c=this.searchAdjacentTextNode(e,
f,!d))&&(e=c,f=d?0:e.data.length);return{container:e,offset:f}},isEmpty:function(e){if(!e)return!0;if(-1!=g.inArray(e.nodeName.toLowerCase(),this.nonEmptyTags))return!1;if(3===e.nodeType)return-1==e.data.search(/\S/);var f,d;f=0;for(d=e.childNodes.length;f<d;++f)if(!this.isEmpty(e.childNodes[f]))return!1;return!0},setCursorAfter:function(e){var f=new m.Utils.RangeObject;this.getIndexInParent(e);var d;3==e.nodeType?(d=e,e=d.nodeValue.length):e.nextSibling&&3==e.nextSibling.nodeType?(d=e.nextSibling,
e=0):(d=e.parentNode,e=this.getIndexInParent(e)+1);f.startContainer=f.endContainer=d;f.startOffset=f.endOffset=e;f.select();return f},selectDomNode:function(e){var f=new m.Utils.RangeObject;f.startContainer=f.endContainer=e.parentNode;f.startOffset=this.getIndexInParent(e);f.endOffset=f.startOffset+1;f.select()},setCursorInto:function(e){var f=new m.Utils.RangeObject;f.startContainer=f.endContainer=e;f.startOffset=f.endOffset=0;f.select()},isEditingHost:function(e){return e&&1==e.nodeType&&("true"==
e.contentEditable||e.parentNode&&9==e.parentNode.nodeType&&"on"==e.parentNode.designMode)},isEditable:function(e){return e&&!this.isEditingHost(e)&&(1!=e.nodeType||"false"!=e.contentEditable)&&(this.isEditingHost(e.parentNode)||this.isEditable(e.parentNode))},getEditingHostOf:function(e){if(this.isEditingHost(e))return e;if(this.isEditable(e)){for(e=e.parentNode;!this.isEditingHost(e);)e=e.parentNode;return e}return null},inSameEditingHost:function(e,f){return this.getEditingHostOf(e)&&this.getEditingHostOf(e)==
this.getEditingHostOf(f)},isBlockNode:function(e){return e&&(e.nodeType==n.Node.ELEMENT_NODE&&-1==n(["inline","inline-block","inline-table","none"]).indexOf(n.getComputedStyle(e).display)||e.nodeType==n.Node.DOCUMENT_NODE||e.nodeType==n.Node.DOCUMENT_FRAGMENT_NODE)},getFirstVisibleChild:function(e,f){if(!e||e.nodeType==n.Node.TEXT_NODE&&this.isEmpty(e)||e.nodeType==n.Node.ELEMENT_NODE&&0==e.offsetHeight&&-1===g.inArray(e.nodeName.toLowerCase(),this.nonEmptyTags))return null;if(e.nodeType==n.Node.TEXT_NODE||
e.nodeType==n.Node.ELEMENT_NODE&&0==e.childNodes.length||!g(e).contentEditable())return f?e:null;var d;for(d=0;d<e.childNodes.length;++d){var c=this.getFirstVisibleChild(e.childNodes[d],!0);if(null!=c)return c}return null},getLastVisibleChild:function(e,f){if(!e||e.nodeType==n.Node.TEXT_NODE&&this.isEmpty(e)||e.nodeType==n.Node.ELEMENT_NODE&&0==e.offsetHeight&&-1===g.inArray(e.nodeName.toLowerCase(),this.nonEmptyTags))return null;if(e.nodeType==n.Node.TEXT_NODE||e.nodeType==n.Node.ELEMENT_NODE&&0==
e.childNodes.length||!g(e).contentEditable())return f?e:null;var d;for(d=e.childNodes.length-1;0<=d;--d){var c=this.getLastVisibleChild(e.childNodes[d],!0);if(null!=c)return c}return null}});m.Utils.Dom=new f;return m.Utils.Dom});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};
define(["jquery","util/dom","util/class","aloha/console","aloha/rangy-core"],function(g,f,n,m,k){function e(c,b){var d=[],e;for(e=1===c.nodeType?c:c.parentNode;e&&e!==b&&9!==e.nodeType;)1===e.nodeType&&d.push(e),e=e.parentNode;return d}var l=window.GENTICS,d=window.Aloha;l.Utils.RangeObject=n.extend({_constructor:function(c){"object"===typeof c?("undefined"!==typeof c.startContainer&&(this.startContainer=c.startContainer),"undefined"!==typeof c.startOffset&&(this.startOffset=c.startOffset),"undefined"!==
typeof c.endContainer&&(this.endContainer=c.endContainer),"undefined"!==typeof c.endOffset&&(this.endOffset=c.endOffset)):!0===c&&this.initializeFromUserSelection()},startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0,deleteContents:function(){f.removeRange(this)},log:function(c){m.deprecated("Utils.RangeObject",'log() is deprecated. use console.log() from module "aloha/console" instead: '+c)},isCollapsed:function(){return!this.endContainer||this.startContainer===this.endContainer&&
this.startOffset===this.endOffset},getCommonAncestorContainer:function(){if(this.commonAncestorContainer)return this.commonAncestorContainer;this.updateCommonAncestorContainer();return this.commonAncestorContainer},getContainerParents:function(c,b){var d=b?this.endContainer:this.startContainer;return d?g(e(d,c?c[0]:null)):!1},getStartContainerParents:function(c){return this.getContainerParents(c,!1)},getEndContainerParents:function(c){return this.getContainerParents(c,!0)},updateCommonAncestorContainer:function(c){if(c)this.commonAncestorContainer=
c;else{var b=this.getStartContainerParents(),d=this.getEndContainerParents(),e;if(!(0<b.length&&0<d.length))return m.warn("aloha/range","could not find commonAncestorContainer"),!1;for(e=0;e<b.length;e++)if(-1!=d.index(b[e])){this.commonAncestorContainer=b[e];break}}m.debug(c?"commonAncestorContainer was set successfully":"commonAncestorContainer was calculated successfully");return!0},getCollapsedIERange:function(c,b){var d=document.body.createTextRange(),e,f,a;a=this.searchElementToLeft(c,b);a.element?
(e=document.body.createTextRange(),e.moveToElementText(a.element),d.setEndPoint("StartToEnd",e),0!==a.characters?d.moveStart("character",a.characters):(d.moveStart("character",1),d.moveStart("character",-1))):(this.searchElementToRight(c,b),f=3==c.nodeType?c.parentNode:c,e=document.body.createTextRange(),e.moveToElementText(f),d.setEndPoint("StartToStart",e),0!==a.characters&&d.moveStart("character",a.characters));d.collapse();return d},select:function(){var c;if("undefined"===typeof this.startContainer||
"undefined"===typeof this.endContainer)return m.warn("can not select an empty range"),!1;c=k.createRange();c.setStart(this.startContainer,this.startOffset);c.setEnd(this.endContainer,this.endOffset);k.getSelection().setSingleRange(c)},searchElementToLeft:function(c,b){var d,e=0;3===c.nodeType?(e=b,d=c.previousSibling):0<b&&(d=c.childNodes[b-1]);for(;d&&3===d.nodeType;)e+=d.data.length,d=d.previousSibling;return{element:d,characters:e}},searchElementToRight:function(c,b){var d,e=0;3===c.nodeType?(e=
c.data.length-b,d=c.nextSibling):b<c.childNodes.length&&(d=c.childNodes[b]);for(;d&&3===d.nodeType;)e+=d.data.length,d=d.nextSibling;return{element:d,characters:e}},update:function(c){m.debug("now updating rangeObject");this.initializeFromUserSelection(c);this.updateCommonAncestorContainer()},initializeFromUserSelection:function(c){c=k.getSelection();if(!c||!c.rangeCount)return!1;c=c.getRangeAt(0);if(!c)return!1;this.startContainer=c.startContainer;this.endContainer=c.endContainer;this.startOffset=
c.startOffset;this.endOffset=c.endOffset;this.correctRange()},correctRange:function(){var c,b;this.clearCaches();if(this.isCollapsed()){if(1===this.startContainer.nodeType){if(0<this.startOffset&&3===this.startContainer.childNodes[this.startOffset-1].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset-1];this.startOffset=this.startContainer.data.length;this.endContainer=this.startContainer;this.endOffset=this.startOffset;return}if(0<this.startOffset&&1===this.startContainer.childNodes[this.startOffset-
1].nodeType){if(c=l.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!0)){this.startContainer=this.endContainer=c;this.startOffset=this.endOffset=c.data.length;return}if(c=l.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!1)){this.startContainer=this.endContainer=c;this.startOffset=this.endOffset=0;return}}if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset];
this.startOffset=0;this.endContainer=this.startContainer;this.endOffset=0;return}}3===this.startContainer.nodeType&&0===this.startOffset&&(c=l.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,l.Utils.Dom.getIndexInParent(this.startContainer),!0))&&0<g(c).closest(d.activeEditable.obj).length&&(this.startContainer=this.endContainer=c,this.startOffset=this.endOffset=c.data.length)}else{if(1===this.startContainer.nodeType)if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType)this.startContainer=
this.startContainer.childNodes[this.startOffset],this.startOffset=0;else if(this.startOffset<this.startContainer.childNodes.length&&1===this.startContainer.childNodes[this.startOffset].nodeType){c=!1;for(b=this.startContainer.childNodes[this.startOffset];!1===c&&b.childNodes&&0<b.childNodes.length;)b=b.childNodes[0],3===b.nodeType&&(c=b);!1!==c&&(this.startContainer=c,this.startOffset=0)}3===this.startContainer.nodeType&&this.startOffset===this.startContainer.data.length&&(c=l.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,
l.Utils.Dom.getIndexInParent(this.startContainer)+1,!1))&&(this.startContainer=c,this.startOffset=0);if(3===this.endContainer.nodeType&&0===this.endOffset)if(this.endContainer.previousSibling&&3===this.endContainer.previousSibling.nodeType)this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length;else if(this.endContainer.previousSibling&&1===this.endContainer.previousSibling.nodeType&&this.endContainer.parentNode){c=this.endContainer.parentNode;for(b=0;b<c.childNodes.length;++b)if(c.childNodes[b]==
this.endContainer){this.endOffset=b;break}this.endContainer=c}1==this.endContainer.nodeType&&0===this.endOffset&&this.endContainer.previousSibling&&(3===this.endContainer.previousSibling.nodeType?(this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length):1===this.endContainer.previousSibling.nodeType&&this.endContainer.previousSibling.childNodes&&0<this.endContainer.previousSibling.childNodes.length&&(this.endContainer=this.endContainer.previousSibling,this.endOffset=
this.endContainer.childNodes.length));if(1==this.endContainer.nodeType)if(0<this.endOffset&&3===this.endContainer.childNodes[this.endOffset-1].nodeType)this.endContainer=this.endContainer.childNodes[this.endOffset-1],this.endOffset=this.endContainer.data.length;else if(0<this.endOffset&&1===this.endContainer.childNodes[this.endOffset-1].nodeType){c=!1;for(b=this.endContainer.childNodes[this.endOffset-1];!1===c&&b.childNodes&&0<b.childNodes.length;)b=b.childNodes[b.childNodes.length-1],3===b.nodeType&&
(c=b);!1!==c&&(this.endContainer=c,this.endOffset=this.endContainer.data.length)}}},clearCaches:function(){this.commonAncestorContainer=void 0},getRangeTree:function(c){"undefined"===typeof c&&(c=this.getCommonAncestorContainer());this.inselection=!1;return this.recursiveGetRangeTree(c)},recursiveGetRangeTree:function(c){var b=0,d=this,e=[];g(c).contents().each(function(f){var a="none",g=!1,k=!1,m=!1,n=!1,C=!1,y=!1;d.isCollapsed()&&c===d.startContainer&&d.startOffset===f&&(e[b]=new l.Utils.RangeTree,
e[b].type="collapsed",e[b].domobj=void 0,d.inselection=!1,m=!0,b++);if(!d.inselection&&!m)switch(this.nodeType){case 3:this===d.startContainer&&(d.inselection=!0,a=0<d.startOffset?"partial":"full",g=d.startOffset,k=this.length);break;case 1:this===d.startContainer&&0===d.startOffset&&(d.inselection=!0,a="full"),c===d.startContainer&&d.startOffset===f&&(d.inselection=!0,a="full")}if(d.inselection&&!m){"none"==a&&(a="full");switch(this.nodeType){case 3:this===d.endContainer&&(d.inselection=!1,d.endOffset<
this.length&&(a="partial"),!1===g&&(g=0),k=d.endOffset);break;case 1:this===d.endContainer&&0===d.endOffset&&(d.inselection=!1)}c===d.endContainer&&d.endOffset<=f&&(d.inselection=!1,a="none")}e[b]=new l.Utils.RangeTree;e[b].domobj=this;e[b].type=a;"partial"==a&&(e[b].startOffset=g,e[b].endOffset=k);e[b].children=d.recursiveGetRangeTree(this);if(0<e[b].children.length){for(f=0;f<e[b].children.length;++f)switch(e[b].children[f].type){case "none":n=!0;break;case "full":y=!0;break;case "partial":C=!0}C||
y&&n?e[b].type="partial":!y||C||n||(e[b].type="full")}b++});this.isCollapsed()&&c===this.startContainer&&this.startOffset==c.childNodes.length&&(e[b]=new l.Utils.RangeTree,e[b].type="collapsed",e[b].domobj=void 0);return e},findMarkup:function(c,b,d){d=d?this.endContainer:this.startContainer;var f;b=b?b[0]:null;if(d){b=e(d,b);d=0;for(f=b.length;d<f;d++)if(c.apply(b[d]))return b[d];return!1}},getText:function(){return this.isCollapsed()?"":this.recursiveGetText(this.getRangeTree())},recursiveGetText:function(c){if(!c)return"";
var b=this,d="";g.each(c,function(){"full"==this.type?d+=g(this.domobj).text():"partial"==this.type&&3===this.domobj.nodeType?d+=g(this.domobj).text().substring(this.startOffset,this.endOffset):"partial"==this.type&&1===this.domobj.nodeType&&this.children&&(d+=b.recursiveGetText(this.children))});return d}});l.Utils.RangeTree=n.extend({domobj:{},type:null,children:[]});return l.Utils.RangeObject});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};
define("util/lang",[],function(){});(function(g){var f=g.GENTICS;f.Utils.applyProperties=function(f,g){for(var k in g)g.hasOwnProperty(k)&&(f[k]=g[k])};f.Utils.uniqeString4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};f.Utils.guid=function(){var g=f.Utils.uniqeString4;return g()+g()+"-"+g()+"-"+g()+"-"+g()+"-"+g()+g()+g()}})(window);
define([],function(){var g=!1,f=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){function n(){!g&&this._constructor&&this._constructor.apply(this,arguments)}var m=this.prototype;g=!0;var k=new this;g=!1;for(var e=0;e<arguments.length;e++){var l=arguments[e],d;for(d in l)k[d]="function"==typeof l[d]&&"function"==typeof m[d]&&f.test(l[d])?function(c,b){return function(){var d=this._super;this._super=m[c];var e=b.apply(this,arguments);this._super=d;return e}}(d,
l[d]):l[d]}n.prototype=k;n.constructor=n;n.extend=arguments.callee;return n};return this.Class});
(function(){var g=function(){function f(a,c){var d=typeof a[c];return d==p||!(d!=b||!a[c])||"unknown"==d}function g(a,c){return!(typeof a[c]!=b||!a[c])}function m(a,b){return typeof a[b]!=r}function k(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&v(a,t)&&C(a,q)}function l(a){window.alert("Rangy not supported in your browser. Reason: "+a);y.initialized=!0;y.supported=!1}function d(){if(!y.initialized){var b,c=!1,d=!1;f(document,"createRange")&&
(b=document.createRange(),v(b,a)&&C(b,u)&&(c=!0),b.detach());(b=g(document,"body")?document.body:document.getElementsByTagName("body")[0])&&f(b,"createTextRange")&&(b=b.createTextRange(),e(b)&&(d=!0));c||d||l("Neither Range nor TextRange are implemented");y.initialized=!0;y.features={implementsDomRange:c,implementsTextRange:d};c=D.concat(z);d=0;for(b=c.length;d<b;++d)try{c[d](y)}catch(k){g(window,"console")&&f(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",
k)}}}function c(a){this.name=a;this.supported=this.initialized=!1}var b="object",p="function",r="undefined",u="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer START_TO_START START_TO_END END_TO_START END_TO_END".split(" "),a="setStart setStartBefore setStartAfter setEnd setEndBefore setEndAfter collapse selectNode selectNodeContents compareBoundaryPoints deleteContents extractContents cloneContents insertNode surroundContents cloneRange toString detach".split(" "),
q="boundingHeight boundingLeft boundingTop boundingWidth htmlText text".split(" "),t="collapse compareEndPoints duplicate getBookmark moveToBookmark moveToElementText parentElement pasteHTML select setEndPoint getBoundingClientRect".split(" "),v=k(f),x=k(g),C=k(m),y={version:"1.2.1",initialized:!1,supported:!0,util:{isHostMethod:f,isHostObject:g,isHostProperty:m,areHostMethods:v,areHostObjects:x,areHostProperties:C,isTextRange:e},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!0}};
y.fail=l;y.warn=function(a){a="Rangy warning: "+a;y.config.alertOnWarn?window.alert(a):typeof window.console!=r&&typeof window.console.log!=r&&window.console.log(a)};({}).hasOwnProperty?y.util.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}:l("hasOwnProperty not supported");var z=[],D=[];y.init=d;y.addInitListener=function(a){y.initialized?a(y):z.push(a)};var F=[];y.addCreateMissingNativeApiListener=function(a){F.push(a)};y.createMissingNativeApi=function(a){a=a||window;d();
for(var b=0,c=F.length;b<c;++b)F[b](a)};c.prototype.fail=function(a){this.initialized=!0;this.supported=!1;throw Error("Module '"+this.name+"' failed to load: "+a);};c.prototype.warn=function(a){y.warn("Module "+this.name+": "+a)};c.prototype.createError=function(a){return Error("Error in Rangy "+this.name+" module: "+a)};y.createModule=function(a,b){var d=new c(a);y.modules[a]=d;D.push(function(a){b(a,d);d.initialized=!0;d.supported=!0})};y.requireModules=function(a){for(var b=0,d=a.length,e,f;b<
d;++b){f=a[b];e=y.modules[f];if(!(e&&e instanceof c))throw Error("Module '"+f+"' not found");if(!e.supported)throw Error("Module '"+f+"' not supported");}};var H=!1,x=function(a){H||(H=!0,y.initialized||d())};if(typeof window==r)l("No window found");else if(typeof document==r)l("No document found");else return f(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",x,!1),f(window,"addEventListener")?window.addEventListener("load",x,!1):f(window,"attachEvent")?window.attachEvent("onload",
x):l("Window does not have required addEventListener or attachEvent method"),y}();g.createModule("DomUtil",function(f,g){function m(a){for(var b=0;a=a.previousSibling;)b++;return b}function k(a,b){var c=[],d;for(d=a;d;d=d.parentNode)c.push(d);for(d=b;d;d=d.parentNode)if(x(c,d))return d;return null}function e(a,b,c){for(c=c?a:a.parentNode;c;){a=c.parentNode;if(a===b)return c;c=a}return null}function l(a){a=a.nodeType;return 3==a||4==a||8==a}function d(a,b){var c=b.nextSibling,d=b.parentNode;c?d.insertBefore(a,
c):d.appendChild(a);return a}function c(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=q)return a.ownerDocument;if(typeof a.document!=q)return a.document;if(a.parentNode)return c(a.parentNode);throw Error("getDocument: no document found for node");}function b(a){if(a)return a.previousSibling?a.previousSibling.nextSibling:a.nextSibling?a.nextSibling.previousSibling:a.parentNode?a.parentNode.firstChild:a}function p(a){return a?l(a)?'"'+a.data+'"':1==a.nodeType?"<"+a.nodeName+(a.id?' id="'+
a.id+'"':"")+">["+a.childNodes.length+"]":a.nodeName:"[No node]"}function r(a){this._next=this.root=a}function u(a,b){this.node=a;this.offset=b}function a(a){this.code=this[a];this.codeName=a;this.message="DOMException: "+this.codeName}var q="undefined",t=f.util;t.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||g.fail("document missing a Node creation method");t.isHostMethod(document,"getElementsByTagName")||g.fail("document missing getElementsByTagName method");
var v=document.createElement("div");t.areHostMethods(v,["insertBefore","appendChild","cloneNode"])||g.fail("Incomplete Element implementation");t.isHostProperty(v,"innerHTML")||g.fail("Element is missing innerHTML property");v=document.createTextNode("test");t.areHostMethods(v,["splitText","deleteData","insertData","appendData","cloneNode"])||g.fail("Incomplete Text Node implementation");var x=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};r.prototype={_current:null,hasNext:function(){return!!this._next},
next:function(){var a=this._current=this._next,b;if(this._current){b=a.firstChild;if(!b)for(b=null;a!==this.root&&!(b=a.nextSibling);)a=a.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}};u.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+p(this.node)+":"+this.offset+")]"}};a.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,
NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};a.prototype.toString=function(){return this.message};f.dom={arrayContains:x,isHtmlNamespace:function(a){var b;return typeof a.namespaceURI==q||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b},parentElement:function(a){a=a.parentNode;return 1==a.nodeType?a:null},getNodeIndex:m,getNodeLength:function(a){var b;return l(a)?a.length:(b=a.childNodes)?b.length:0},getCommonAncestor:k,isAncestorOf:function(a,b,c){for(b=c?b:b.parentNode;b;){if(b===
a)return!0;b=b.parentNode}return!1},getClosestAncestorIn:e,isCharacterDataNode:l,insertAfter:d,splitDataNode:function(a,b){var c=a.cloneNode(!1);c.deleteData(0,b);a.deleteData(b,a.length-b);d(c,a);return c},getDocument:c,getWindow:function(a){a=c(a);if(typeof a.defaultView!=q)return a.defaultView;if(typeof a.parentWindow!=q)return a.parentWindow;throw Error("Cannot get a window object for node");},getIframeWindow:function(a){if(typeof a.contentWindow!=q)return a.contentWindow;if(typeof a.contentDocument!=
q)return a.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element");},getIframeDocument:function(a){if(typeof a.contentDocument!=q)return a.contentDocument;if(typeof a.contentWindow!=q)return a.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element");},getBody:function(a){return t.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]},getRootContainer:function(a){for(var b;b=a.parentNode;)a=b;return a},
comparePoints:function(a,c,d,f){a=b(a);d=b(d);var g;if(a==d)return c===f?0:c<f?-1:1;if(g=e(d,a,!0))return c<=m(g)?-1:1;if(g=e(a,d,!0))return m(g)<f?-1:1;c=k(a,d);a=a===c?c:e(a,c,!0);d=d===c?c:e(d,c,!0);if(a===d)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(c=c.firstChild;c;){if(c===a)return-1;if(c===d)return 1;c=c.nextSibling}throw Error("Should not be here!");},inspectNode:p,fragmentFromNodeChildren:function(a){for(var b=c(a).createDocumentFragment(),d;d=a.firstChild;)b.appendChild(d);
return b},createIterator:function(a){return new r(a)},DomPosition:u};f.DOMException=a});g.createModule("DomRange",function(f,g){function m(a,b){return 3!=a.nodeType&&(P.isAncestorOf(a,b.startContainer,!0)||P.isAncestorOf(a,b.endContainer,!0))}function k(a){return P.getDocument(a.startContainer)}function e(a,b,c){if(b=a._listeners[b])for(var d=0,e=b.length;d<e;++d)b[d].call(a,{target:a,args:c})}function l(a){return new aa(a.parentNode,P.getNodeIndex(a))}function d(a){return new aa(a.parentNode,P.getNodeIndex(a)+
1)}function c(a,b,c){var d=11==a.nodeType?a.firstChild:a;P.isCharacterDataNode(b)?c==b.length?P.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:P.splitDataNode(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]);return d}function b(a){for(var c,d,e=k(a.range).createDocumentFragment();d=a.next();){c=a.isPartiallySelectedSubtree();d=d.cloneNode(!c);c&&(c=a.getSubtreeIterator(),d.appendChild(b(c)),c.detach(!0));if(10==d.nodeType)throw new ea("HIERARCHY_REQUEST_ERR");e.appendChild(d)}return e}
function p(a,b,c){var d,e;for(c=c||{stop:!1};d=a.next();)if(a.isPartiallySelectedSubtree())if(!1===b(d)){c.stop=!0;break}else{if(d=a.getSubtreeIterator(),p(d,b,c),d.detach(!0),c.stop)break}else for(d=P.createIterator(d);e=d.next();)if(!1===b(e)){c.stop=!0;return}}function r(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),r(b),b.detach(!0)):a.remove()}function u(a){for(var b,c=k(a.range).createDocumentFragment(),d;b=a.next();){a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),
d=a.getSubtreeIterator(),b.appendChild(u(d)),d.detach(!0)):a.remove();if(10==b.nodeType)throw new ea("HIERARCHY_REQUEST_ERR");c.appendChild(b)}return c}function a(a,b,c){var d=!(!b||!b.length),e,f=!!c;d&&(e=RegExp("^("+b.join("|")+")$"));var g=[];p(new t(a,!1),function(a){d&&!e.test(a.nodeType)||f&&!c(a)||g.push(a)});return g}function q(a){return"["+("undefined"==typeof a.getName?"Range":a.getName())+"("+P.inspectNode(a.startContainer)+":"+a.startOffset+", "+P.inspectNode(a.endContainer)+":"+a.endOffset+
")]"}function t(a,b){this.range=a;this.clonePartiallySelectedTextNodes=b;if(!a.collapsed){this.sc=a.startContainer;this.so=a.startOffset;this.ec=a.endContainer;this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&P.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||P.isCharacterDataNode(this.sc)?P.getClosestAncestorIn(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||P.isCharacterDataNode(this.ec)?
P.getClosestAncestorIn(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function v(a){this.code=this[a];this.codeName=a;this.message="RangeException: "+this.codeName}function x(b,c,d){this.nodes=a(b,c,d);this._next=this.nodes[0];this._position=0}function C(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){d=e.nodeType;if(P.arrayContains(a,d))return e;e=e.parentNode}return null}}function y(a,b){if(ya(a,b))throw new v("INVALID_NODE_TYPE_ERR");}function z(a){if(!a.startContainer)throw new ea("INVALID_STATE_ERR");
}function D(a,b){if(!P.arrayContains(b,a.nodeType))throw new v("INVALID_NODE_TYPE_ERR");}function F(a,b){if(0>b||b>(P.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new ea("INDEX_SIZE_ERR");}function H(a,b){if(ja(a,!0)!==ja(b,!0))throw new ea("WRONG_DOCUMENT_ERR");}function M(a){if(R(a,!0))throw new ea("NO_MODIFICATION_ALLOWED_ERR");}function I(a,b){if(!a)throw new ea(b);}function J(a){return!P.arrayContains(na,a.nodeType)&&!ja(a,!0)}function K(a,b){return b<=(P.isCharacterDataNode(a)?
a.length:a.childNodes.length)}function G(a){z(a);if(J(a.startContainer)||J(a.endContainer)||!K(a.startContainer,a.startOffset)||!K(a.endContainer,a.endOffset))throw Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")");}function S(){}function O(a){a.START_TO_START=za;a.START_TO_END=Da;a.END_TO_END=ra;a.END_TO_START=Ea;a.NODE_BEFORE=Va;a.NODE_AFTER=rb;a.NODE_BEFORE_AND_AFTER=Ta;a.NODE_INSIDE=zb}function s(a){O(a);O(a.prototype)}function T(a,b){return function(){G(this);
var c=this.startContainer,e=this.startOffset,f=this.commonAncestorContainer,g=new t(this,!0);c!==f&&(c=P.getClosestAncestorIn(c,f,!0),e=d(c),c=e.node,e=e.offset);p(g,M);g.reset();f=a(g);g.detach();b(this,c,e,c,e);return f}}function Q(a,b,c){function e(a,b){return function(c){z(this);D(c,ga);D(ca(c),na);c=(a?l:d)(c);(b?g:k)(this,c.node,c.offset)}}function g(a,c,d){var e=a.endContainer,f=a.endOffset;if(c!==a.startContainer||d!==this.startOffset){if(ca(c)!=ca(e)||1==P.comparePoints(c,d,e,f))e=c,f=d;
b(a,c,d,e,f)}}function k(a,c,d){var e=a.startContainer,f=a.startOffset;if(c!==a.endContainer||d!==this.endOffset){if(ca(c)!=ca(e)||-1==P.comparePoints(c,d,e,f))e=c,f=d;b(a,e,f,c,d)}}function n(a,c,d){c===a.startContainer&&d===this.startOffset&&c===a.endContainer&&d===this.endOffset||b(a,c,d,c,d)}a.prototype=new S;f.util.extend(a.prototype,{setStart:function(a,b){z(this);y(a,!0);F(a,b);g(this,a,b)},setEnd:function(a,b){z(this);y(a,!0);F(a,b);k(this,a,b)},setStartBefore:e(!0,!0),setStartAfter:e(!1,
!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(a){G(this);a?b(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):b(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){z(this);y(a,!0);b(this,a,0,a,P.getNodeLength(a))},selectNode:function(a){z(this);y(a,!1);D(a,ga);var c=l(a);a=d(a);b(this,c.node,c.offset,a.node,a.offset)},extractContents:T(u,b),deleteContents:T(r,b),canSurroundContents:function(){G(this);
M(this.startContainer);M(this.endContainer);var a=new t(this,!0),b=a._first&&m(a._first,this)||a._last&&m(a._last,this);a.detach();return!b},detach:function(){c(this)},splitBoundaries:function(){G(this);var a=this.startContainer,c=this.startOffset,d=this.endContainer,e=this.endOffset,f=a===d;P.isCharacterDataNode(d)&&0<e&&e<d.length&&P.splitDataNode(d,e);P.isCharacterDataNode(a)&&0<c&&c<a.length&&(a=P.splitDataNode(a,c),f?(e-=c,d=a):d==a.parentNode&&e>=P.getNodeIndex(a)&&e++,c=0);b(this,a,c,d,e)},
normalizeBoundaries:function(){G(this);var a=this.startContainer,c=this.startOffset,d=this.endContainer,e=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(d=a,e=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},g=function(b){var f=b.previousSibling;if(f&&f.nodeType==b.nodeType){a=b;var g=b.length;c=f.length;b.insertData(0,f.data);f.parentNode.removeChild(f);a==d?(e+=c,d=a):d==b.parentNode&&(f=P.getNodeIndex(b),e==f?(d=b,e=g):e>f&&e--)}},k=!0;P.isCharacterDataNode(d)?
d.length==e&&f(d):(0<e&&(k=d.childNodes[e-1])&&P.isCharacterDataNode(k)&&f(k),k=!this.collapsed);k?P.isCharacterDataNode(a)?0==c&&g(a):c<a.childNodes.length&&(f=a.childNodes[c])&&P.isCharacterDataNode(f)&&g(f):(a=d,c=e);b(this,a,c,d,e)},collapseToPoint:function(a,b){z(this);y(a,!0);F(a,b);n(this,a,b)}});s(a)}function U(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;a.commonAncestorContainer=a.collapsed?a.startContainer:P.getCommonAncestor(a.startContainer,a.endContainer)}
function N(a,b,c,d,f){var g=a.startContainer!==b||a.startOffset!==c,k=a.endContainer!==d||a.endOffset!==f;a.startContainer=b;a.startOffset=c;a.endContainer=d;a.endOffset=f;U(a);e(a,"boundarychange",{startMoved:g,endMoved:k})}function V(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};U(this)}f.requireModules(["DomUtil"]);var P=f.dom,aa=P.DomPosition,ea=f.DOMException;t.prototype={_current:null,_next:null,_first:null,_last:null,
isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;a&&(this._next=a!==this._last?a.nextSibling:null,P.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so)));return a},remove:function(){var a=this._current,b,c;!P.isCharacterDataNode(a)||
a!==this.sc&&a!==this.ec?a.parentNode&&a.parentNode.removeChild(a):(b=a===this.sc?this.so:0,c=a===this.ec?this.eo:a.length,b!=c&&a.deleteData(b,c-b))},isPartiallySelectedSubtree:function(){return m(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new V(k(this.range));var b=this._current,c=b,d=0,e=b,f=P.getNodeLength(b);P.isAncestorOf(b,this.sc,!0)&&(c=this.sc,d=this.so);P.isAncestorOf(b,this.ec,!0)&&(e=this.ec,
f=this.eo);N(a,c,d,e,f)}return new t(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach();this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};v.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};v.prototype.toString=function(){return this.message};x.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},
detach:function(){this._current=this._next=this.nodes=null}};var ga=[1,3,4,5,7,8,10],na=[2,9,11],W=[1,3,4,5,7,8,10,11],Z=[1,3,4,5,7,8],ca=P.getRootContainer,ja=C([9,11]),R=C([5,6,10,12]),ya=C([6,10,12]),Ha=document.createElement("style"),va=!1;try{Ha.innerHTML="<b>x</b>",va=3==Ha.firstChild.nodeType}catch(Y){}f.features.htmlParsingConforms=va;var Ca="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer".split(" "),za=0,Da=1,ra=2,Ea=3,Va=0,rb=1,Ta=2,zb=3;S.prototype=
{attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){G(this);H(this.startContainer,b.startContainer);var c=a==Ea||a==za?"start":"end",d=a==Da||a==za?"start":"end";return P.comparePoints(this[c+"Container"],this[c+"Offset"],b[d+"Container"],b[d+"Offset"])},insertNode:function(a){G(this);D(a,W);M(this.startContainer);if(P.isAncestorOf(a,this.startContainer,!0))throw new ea("HIERARCHY_REQUEST_ERR");a=c(a,this.startContainer,this.startOffset);this.setStartBefore(a)},
cloneContents:function(){G(this);var a,c;if(this.collapsed)return k(this).createDocumentFragment();if(this.startContainer===this.endContainer&&P.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),c=k(this).createDocumentFragment(),c.appendChild(a),c;c=new t(this,!0);a=b(c);c.detach();return a},canSurroundContents:function(){G(this);M(this.startContainer);M(this.endContainer);var a=new t(this,!0),b=a._first&&m(a._first,
this)||a._last&&m(a._last,this);a.detach();return!b},surroundContents:function(a){D(a,Z);if(!this.canSurroundContents())throw new v("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);c(a,this.startContainer,this.startOffset);a.appendChild(b);this.selectNode(a)},cloneRange:function(){G(this);for(var a=new V(k(this)),b=Ca.length,c;b--;)c=Ca[b],a[c]=this[c];return a},toString:function(){G(this);var a=this.startContainer;if(a===this.endContainer&&
P.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],a=new t(this,!0);p(a,function(a){3!=a.nodeType&&4!=a.nodeType||b.push(a.data)});a.detach();return b.join("")},compareNode:function(a){G(this);var b=a.parentNode,c=P.getNodeIndex(a);if(!b)throw new ea("NOT_FOUND_ERR");a=this.comparePoint(b,c);b=this.comparePoint(b,c+1);return 0>a?0<b?Ta:Va:0<b?rb:zb},comparePoint:function(a,b){G(this);I(a,"HIERARCHY_REQUEST_ERR");H(a,this.startContainer);
return 0>P.comparePoints(a,b,this.startContainer,this.startOffset)?-1:0<P.comparePoints(a,b,this.endContainer,this.endOffset)?1:0},createContextualFragment:va?function(a){var b=this.startContainer,c=P.getDocument(b);if(!b)throw new ea("INVALID_STATE_ERR");var d=null;1==b.nodeType?d=b:P.isCharacterDataNode(b)&&(d=P.parentElement(b));d=null===d||"HTML"==d.nodeName&&P.isHtmlNamespace(P.getDocument(d).documentElement)&&P.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1);d.innerHTML=a;return P.fragmentFromNodeChildren(d)}:
function(a){z(this);var b=k(this).createElement("body");b.innerHTML=a;return P.fragmentFromNodeChildren(b)},toHtml:function(){G(this);var a=k(this).createElement("div");a.appendChild(this.cloneContents());return a.innerHTML},intersectsNode:function(a,b){G(this);I(a,"NOT_FOUND_ERR");if(P.getDocument(a)!==k(this))return!1;var c=a.parentNode,d=P.getNodeIndex(a);I(c,"NOT_FOUND_ERR");var e=P.comparePoints(c,d,this.endContainer,this.endOffset),c=P.comparePoints(c,d+1,this.startContainer,this.startOffset);
return b?0>=e&&0<=c:0>e&&0<c},isPointInRange:function(a,b){G(this);I(a,"HIERARCHY_REQUEST_ERR");H(a,this.startContainer);return 0<=P.comparePoints(a,b,this.startContainer,this.startOffset)&&0>=P.comparePoints(a,b,this.endContainer,this.endOffset)},intersectsRange:function(a,b){G(this);if(k(a)!=k(this))throw new ea("WRONG_DOCUMENT_ERR");var c=P.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),d=P.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);
return b?0>=c&&0<=d:0>c&&0<d},intersection:function(a){if(this.intersectsRange(a)){var b=P.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=P.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();-1==b&&d.setStart(a.startContainer,a.startOffset);1==c&&d.setEnd(a.endContainer,a.endOffset);return d}return null},union:function(a){if(this.intersectsRange(a,!0)){var b=this.cloneRange();-1==P.comparePoints(a.startContainer,a.startOffset,
this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset);1==P.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset);return b}throw new v("Ranges do not intersect");},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==zb},containsNodeContents:function(a){return 0<=this.comparePoint(a,0)&&0>=this.comparePoint(a,P.getNodeLength(a))},containsRange:function(a){return this.intersection(a).equals(a)},
containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);return 0<c.length?(b.setStart(c[0],0),a=c.pop(),b.setEnd(a,a.length),a=this.containsRange(b),b.detach(),a):this.containsNodeContents(a)},createNodeIterator:function(a,b){G(this);return new x(this,a,b)},getNodes:function(b,c){G(this);return a(this,b,c)},getDocument:function(){return k(this)},collapseBefore:function(a){z(this);this.setEndBefore(a);this.collapse(!1)},collapseAfter:function(a){z(this);this.setStartAfter(a);
this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return V.rangesEqual(this,a)},inspect:function(){return q(this)}};Q(V,N,function(a){z(a);a.startContainer=a.startOffset=a.endContainer=a.endOffset=null;a.collapsed=a.commonAncestorContainer=null;e(a,"detach",null);a._listeners=null});f.rangePrototype=S.prototype;V.rangeProperties=Ca;V.RangeIterator=t;V.copyComparisonConstants=s;V.createPrototypeRange=Q;V.inspect=q;V.getRangeDocument=k;V.rangesEqual=function(a,b){return a.startContainer===
b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset};f.DomRange=V;f.RangeException=v});g.createModule("WrappedRange",function(f,g){function m(b,c,e,a){var f=b.duplicate();f.collapse(e);var g=f.parentElement();l.isAncestorOf(c,g,!0)||(g=c);if(!g.canHaveHTML)return new d(g.parentNode,l.getNodeIndex(g));c=l.getDocument(g).createElement("span");c.parentNode&&c.parentNode.removeChild(c);var k,m=e?"StartToStart":"StartToEnd";do g.insertBefore(c,c.previousSibling),
f.moveToElementText(c);while(0<(k=f.compareEndPoints(m,b))&&c.previousSibling);m=c.nextSibling;if(-1==k&&m&&l.isCharacterDataNode(m)){f.setEndPoint(e?"EndToStart":"EndToEnd",b);if(/[\r\n]/.test(m.data))for(f=f.duplicate(),g=f.text.replace(/\r\n/g,"\r").length,g=f.moveStart("character",g);-1==f.compareEndPoints("StartToEnd",f);)g++,f.moveStart("character",1);else if(g=f.text.replace(/\u00a0/g," "),e=m.data.replace(/\u00a0/g," "),0!==e.indexOf(g)){for(;0<g.length&&0!==e.indexOf(g);)g=g.substr(1);g=
g.length}else g=f.text.length;m=new d(m,g)}else m=(a||!e)&&c.previousSibling,m=(f=(a||e)&&c.nextSibling)&&l.isCharacterDataNode(f)?new d(f,0):m&&l.isCharacterDataNode(m)?new d(m,m.length):new d(g,l.getNodeIndex(c));c.parentNode.removeChild(c);return m}function k(b,c){var d,a,e=b.offset,f=l.getDocument(b.node),g=f.body.createTextRange(),k=l.isCharacterDataNode(b.node);k?(d=b.node,a=d.parentNode):(d=b.node.childNodes,d=e<d.length?d[e]:null,a=b.node);f=f.createElement("span");f.innerHTML="&#feff;";d?
a.insertBefore(f,d):a.appendChild(f);try{g.moveToElementText(f),g.collapse(!c)}catch(m){}a.removeChild(f);if(k)g[c?"moveStart":"moveEnd"]("character",e);return g}f.requireModules(["DomUtil","DomRange"]);var e,l=f.dom,d=l.DomPosition,c=f.DomRange;if(f.features.implementsDomRange&&(!f.features.implementsTextRange||!f.config.preferTextRange))(function(){function b(a){for(var c=g.length,d;c--;)d=g[c],a[d]=a.nativeRange[d]}var d,g=c.rangeProperties,a;e=function(a){if(!a)throw Error("Range must be specified");
this.nativeRange=a;b(this)};c.createPrototypeRange(e,function(a,b,c,d,e){var f=a.endContainer!==d||a.endOffset!=e;if(a.startContainer!==b||a.startOffset!=c||f)a.setEnd(d,e),a.setStart(b,c)},function(a){a.nativeRange.detach();a.detached=!0;for(var b=g.length,c;b--;)c=g[b],a[c]=null});d=e.prototype;d.selectNode=function(a){this.nativeRange.selectNode(a);b(this)};d.deleteContents=function(){this.nativeRange.deleteContents();b(this)};d.extractContents=function(){var a=this.nativeRange.extractContents();
b(this);return a};d.cloneContents=function(){return this.nativeRange.cloneContents()};d.surroundContents=function(a){this.nativeRange.surroundContents(a);b(this)};d.collapse=function(a){this.nativeRange.collapse(a);b(this)};d.cloneRange=function(){return new e(this.nativeRange.cloneRange())};d.refresh=function(){b(this)};d.toString=function(){return this.nativeRange.toString()};var k=document.createTextNode("test");l.getBody(document).appendChild(k);var m=document.createRange();m.setStart(k,0);m.setEnd(k,
0);try{m.setStart(k,1),d.setStart=function(a,c){this.nativeRange.setStart(a,c);b(this)},d.setEnd=function(a,c){this.nativeRange.setEnd(a,c);b(this)},a=function(a){return function(c){this.nativeRange[a](c);b(this)}}}catch(n){d.setStart=function(a,c){try{this.nativeRange.setStart(a,c)}catch(d){this.nativeRange.setEnd(a,c),this.nativeRange.setStart(a,c)}b(this)},d.setEnd=function(a,c){try{this.nativeRange.setEnd(a,c)}catch(d){this.nativeRange.setStart(a,c),this.nativeRange.setEnd(a,c)}b(this)},a=function(a,
c){return function(d){try{this.nativeRange[a](d)}catch(e){this.nativeRange[c](d),this.nativeRange[a](d)}b(this)}}}d.setStartBefore=a("setStartBefore","setEndBefore");d.setStartAfter=a("setStartAfter","setEndAfter");d.setEndBefore=a("setEndBefore","setStartBefore");d.setEndAfter=a("setEndAfter","setStartAfter");m.selectNodeContents(k);d.selectNodeContents=m.startContainer==k&&m.endContainer==k&&0==m.startOffset&&m.endOffset==k.length?function(a){this.nativeRange.selectNodeContents(a);b(this)}:function(a){this.setStart(a,
0);this.setEnd(a,c.getEndOffset(a))};m.selectNodeContents(k);m.setEnd(k,3);a=document.createRange();a.selectNodeContents(k);a.setEnd(k,4);a.setStart(k,2);-1==m.compareBoundaryPoints(m.START_TO_END,a)&1==m.compareBoundaryPoints(m.END_TO_START,a)?d.compareBoundaryPoints=function(a,b){b=b.nativeRange||b;a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END);return this.nativeRange.compareBoundaryPoints(a,b)}:d.compareBoundaryPoints=function(a,b){return this.nativeRange.compareBoundaryPoints(a,
b.nativeRange||b)};f.util.isHostMethod(m,"createContextualFragment")&&(d.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)});l.getBody(document).removeChild(k);m.detach();a.detach()})(),f.createNativeRange=function(b){b=b||document;return b.createRange()};else if(f.features.implementsTextRange){e=function(b){this.textRange=b;this.refresh()};e.prototype=new c(document);e.prototype.refresh=function(){var b,c,d=this.textRange;b=d.parentElement();var a=d.duplicate();
a.collapse(!0);c=a.parentElement();a=d.duplicate();a.collapse(!1);d=a.parentElement();c=c==d?c:l.getCommonAncestor(c,d);c=c==b?c:l.getCommonAncestor(b,c);b=this.textRange;0==b.compareEndPoints("StartToEnd",b)?c=b=m(this.textRange,c,!0,!0):(b=m(this.textRange,c,!0,!1),c=m(this.textRange,c,!1,!1));this.setStart(b.node,b.offset);this.setEnd(c.node,c.offset)};c.copyComparisonConstants(e);var b=function(){return this}();"undefined"==typeof b.Range&&(b.Range=e);f.createNativeRange=function(b){b=b||document;
return b.body.createTextRange()}}f.features.implementsTextRange&&(e.rangeToTextRange=function(b){if(b.collapsed)return k(new d(b.startContainer,b.startOffset),!0);var c=k(new d(b.startContainer,b.startOffset),!0),e=k(new d(b.endContainer,b.endOffset),!1);b=l.getDocument(b.startContainer).body.createTextRange();b.setEndPoint("StartToStart",c);b.setEndPoint("EndToEnd",e);return b});e.prototype.getName=function(){return"WrappedRange"};f.WrappedRange=e;f.createRange=function(b){b=b||document;return new e(f.createNativeRange(b))};
f.createRangyRange=function(b){b=b||document;return new c(b)};f.createIframeRange=function(b){return f.createRange(l.getIframeDocument(b))};f.createIframeRangyRange=function(b){return f.createRangyRange(l.getIframeDocument(b))};f.addCreateMissingNativeApiListener(function(b){b=b.document;"undefined"==typeof b.createRange&&(b.createRange=function(){return f.createRange(this)});b=b=null})});g.createModule("WrappedSelection",function(f,g){function m(a){return(a||window).getSelection()}function k(a){return(a||
window).document.selection}function e(a,b,c){var d=c?"end":"start";c=c?"start":"end";a.anchorNode=b[d+"Container"];a.anchorOffset=b[d+"Offset"];a.focusNode=b[c+"Container"];a.focusOffset=b[c+"Offset"]}function l(a){a.anchorNode=a.focusNode=null;a.anchorOffset=a.focusOffset=0;a.rangeCount=0;a.isCollapsed=!0;a._ranges.length=0}function d(a){var b;a instanceof C?(b=a._selectionNativeRange,b||(b=f.createNativeRange(v.getDocument(a.startContainer)),b.setEnd(a.endContainer,a.endOffset),b.setStart(a.startContainer,
a.startOffset),a._selectionNativeRange=b,a.attachListener("detach",function(){this._selectionNativeRange=null}))):a instanceof y?b=a.nativeRange:f.features.implementsDomRange&&a instanceof v.getWindow(a.startContainer).Range&&(b=a);return b}function c(a){var b=a.getNodes(),c;a:if(b.length&&1==b[0].nodeType){c=1;for(var d=b.length;c<d;++c)if(!v.isAncestorOf(b[0],b[c])){c=!1;break a}c=!0}else c=!1;if(!c)throw Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");
return b[0]}function b(a,b){var c=new y(b);a._ranges=[c];e(a,c,!1);a.rangeCount=1;a.isCollapsed=c.collapsed}function p(a){a._ranges.length=0;if("None"==a.docSelection.type)l(a);else{var c=a.docSelection.createRange();if(c&&"undefined"!=typeof c.text)b(a,c);else{a.rangeCount=c.length;for(var d,g=v.getDocument(c.item(0)),k=0;k<a.rangeCount;++k)d=f.createRange(g),d.selectNode(c.item(k)),a._ranges.push(d);a.isCollapsed=1==a.rangeCount&&a._ranges[0].collapsed;e(a,a._ranges[a.rangeCount-1],!1)}}}function r(a,
b){for(var d=a.docSelection.createRange(),e=c(b),f=v.getDocument(d.item(0)),f=v.getBody(f).createControlRange(),g=0,k=d.length;g<k;++g)f.add(d.item(g));try{f.add(e)}catch(l){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}f.select();p(a)}function u(a,b,c){this.nativeSelection=a;this.docSelection=b;this._ranges=[];this.win=c;this.refresh()}function a(a,b){for(var d=v.getDocument(b[0].startContainer),d=v.getBody(d).createControlRange(),
e=0,f;e<rangeCount;++e){f=c(b[e]);try{d.add(f)}catch(g){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)");}}d.select();p(a)}function q(a,b){if(a.anchorNode&&v.getDocument(a.anchorNode)!==v.getDocument(b))throw new z("WRONG_DOCUMENT_ERR");}function t(a){var b=[],c=new D(a.anchorNode,a.anchorOffset),d=new D(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=
0,g=a.rangeCount;f<g;++f)b[f]=C.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}f.requireModules(["DomUtil","DomRange","WrappedRange"]);f.config.checkSelectionRanges=!0;var v=f.dom,x=f.util,C=f.DomRange,y=f.WrappedRange,z=f.DOMException,D=v.DomPosition,F,H,M=f.util.isHostMethod(window,"getSelection"),I=f.util.isHostObject(document,"selection"),J=I&&(!M||f.config.preferTextRange);J?(F=k,f.isSelectionValid=function(a){a=(a||window).document;
var b=a.selection;return"None"!=b.type||v.getDocument(b.createRange().parentElement())==a}):M?(F=m,f.isSelectionValid=function(){return!0}):g.fail("Neither document.selection or window.getSelection() detected.");f.getNativeSelection=F;var M=F(),K=f.createNativeRange(document),G=v.getBody(document),S=x.areHostObjects(M,x.areHostProperties(M,["anchorOffset","focusOffset"]));f.features.selectionHasAnchorAndFocus=S;var O=x.isHostMethod(M,"extend");f.features.selectionHasExtend=O;var s="number"==typeof M.rangeCount;
f.features.selectionHasRangeCount=s;var T=!1,Q=!0;x.areHostMethods(M,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof M.rangeCount&&f.features.implementsDomRange&&function(){var a=document.createElement("iframe");G.appendChild(a);var b=v.getIframeDocument(a);b.open();b.write("<html><head></head><body>12</body></html>");b.close();var c=v.getIframeWindow(a).getSelection(),d=b.documentElement.lastChild.firstChild,b=b.createRange();b.setStart(d,1);b.collapse(!0);c.addRange(b);Q=1==c.rangeCount;
c.removeAllRanges();var e=b.cloneRange();b.setStart(d,0);e.setEnd(d,2);c.addRange(b);c.addRange(e);T=2==c.rangeCount;b.detach();e.detach();G.removeChild(a)}();f.features.selectionSupportsMultipleRanges=T;f.features.collapsedNonEditableSelectionsSupported=Q;var U=!1,N;G&&x.isHostMethod(G,"createControlRange")&&(N=G.createControlRange(),x.areHostProperties(N,["item","add"])&&(U=!0));f.features.implementsControlRange=U;H=S?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:
function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var V;x.isHostMethod(M,"getRangeAt")?V=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:S&&(V=function(a){var b=v.getDocument(a.anchorNode),b=f.createRange(b);b.setStart(a.anchorNode,a.anchorOffset);b.setEnd(a.focusNode,a.focusOffset);b.collapsed!==this.isCollapsed&&(b.setStart(a.focusNode,a.focusOffset),b.setEnd(a.anchorNode,a.anchorOffset));return b});f.getSelection=function(a){a=a||window;var b=a._rangySelection,
c=F(a),d=I?k(a):null;b?(b.nativeSelection=c,b.docSelection=d,b.refresh(a)):(b=new u(c,d,a),a._rangySelection=b);return b};f.getIframeSelection=function(a){return f.getSelection(v.getIframeWindow(a))};N=u.prototype;if(!J&&S&&x.areHostMethods(M,["removeAllRanges","addRange"])){N.removeAllRanges=function(){this.nativeSelection.removeAllRanges();l(this)};var P=function(a,b){var c=C.getRangeDocument(b),c=f.createRange(c);c.collapseToPoint(b.endContainer,b.endOffset);a.nativeSelection.addRange(d(c));a.nativeSelection.extend(b.startContainer,
b.startOffset);a.refresh()};N.addRange=s?function(a,b){if(U&&I&&"Control"==this.docSelection.type)r(this,a);else if(b&&O)P(this,a);else{var c;T?c=this.rangeCount:(this.removeAllRanges(),c=0);this.nativeSelection.addRange(d(a));this.rangeCount=this.nativeSelection.rangeCount;this.rangeCount==c+1?(f.config.checkSelectionRanges&&(c=V(this.nativeSelection,this.rangeCount-1))&&!C.rangesEqual(c,a)&&(a=new y(c)),this._ranges[this.rangeCount-1]=a,e(this,a,ga(this.nativeSelection)),this.isCollapsed=H(this)):
this.refresh()}}:function(a,b){b&&O?P(this,a):(this.nativeSelection.addRange(d(a)),this.refresh())};N.setRanges=function(b){if(U&&1<b.length)a(this,b);else{this.removeAllRanges();for(var c=0,d=b.length;c<d;++c)this.addRange(b[c])}}}else if(x.isHostMethod(M,"empty")&&x.isHostMethod(K,"select")&&U&&J)N.removeAllRanges=function(){try{var a=jQuery.browser.msie&&8>jQuery.browser.version&&"undefined"===typeof document.documentMode;a||this.docSelection.empty();"None"!=this.docSelection.type&&a&&this.docSelection.empty()}catch(b){}l(this)},
N.addRange=function(a){if("Control"==this.docSelection.type)r(this,a);else try{y.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,e(this,a,!1)}catch(b){}},N.setRanges=function(b){this.removeAllRanges();var c=b.length;1<c?a(this,b):c&&this.addRange(b[0])};else return g.fail("No means of selecting a Range or TextRange was found"),!1;N.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new z("INDEX_SIZE_ERR");return this._ranges[a]};var aa;
if(J)aa=function(a){var c;f.isSelectionValid(a.win)?c=a.docSelection.createRange():(c=v.getBody(a.win.document).createTextRange(),c.collapse(!0));"Control"==a.docSelection.type?p(a):c&&"undefined"!=typeof c.text?b(a,c):l(a)};else if(x.isHostMethod(M,"getRangeAt")&&"number"==typeof M.rangeCount)aa=function(a){if(U&&I&&"Control"==a.docSelection.type)p(a);else if(a._ranges.length=a.rangeCount=a.nativeSelection.rangeCount,a.rangeCount){for(var b=0,c=a.rangeCount;b<c;++b)a._ranges[b]=new f.WrappedRange(a.nativeSelection.getRangeAt(b));
e(a,a._ranges[a.rangeCount-1],ga(a.nativeSelection));a.isCollapsed=H(a)}else l(a)};else if(S&&"boolean"==typeof M.isCollapsed&&"boolean"==typeof K.collapsed&&f.features.implementsDomRange)aa=function(a){var b;b=a.nativeSelection;b.anchorNode?(b=V(b,0),a._ranges=[b],a.rangeCount=1,b=a.nativeSelection,a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset,a.isCollapsed=H(a)):l(a)};else return g.fail("No means of obtaining a Range or TextRange from the user's selection was found"),
!1;N.refresh=function(a){var b=a?this._ranges.slice(0):null;aa(this);if(a){a=b.length;if(a!=this._ranges.length)return!1;for(;a--;)if(!C.rangesEqual(b[a],this._ranges[a]))return!1;return!0}};var ea=function(a,b){var c=a.getAllRanges(),d=!1;a.removeAllRanges();for(var e=0,f=c.length;e<f;++e)d||b!==c[e]?a.addRange(c[e]):d=!0;a.rangeCount||l(a)};N.removeRange=U?function(a){if("Control"==this.docSelection.type){var b=this.docSelection.createRange();a=c(a);for(var d=v.getDocument(b.item(0)),d=v.getBody(d).createControlRange(),
e,f=!1,g=0,k=b.length;g<k;++g)e=b.item(g),e!==a||f?d.add(b.item(g)):f=!0;d.select();p(this)}else ea(this,a)}:function(a){ea(this,a)};var ga;!J&&S&&f.features.implementsDomRange?(ga=function(a){var b=!1;a.anchorNode&&(b=1==v.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset));return b},N.isBackwards=function(){return ga(this)}):ga=N.isBackwards=function(){return!1};N.toString=function(){for(var a=[],b=0,c=this.rangeCount;b<c;++b)a[b]=""+this._ranges[b];return a.join("")};N.collapse=
function(a,b){q(this,a);var c=f.createRange(v.getDocument(a));c.collapseToPoint(a,b);this.removeAllRanges();this.addRange(c);this.isCollapsed=!0};N.collapseToStart=function(){if(this.rangeCount){var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)}else throw new z("INVALID_STATE_ERR");};N.collapseToEnd=function(){if(this.rangeCount){var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)}else throw new z("INVALID_STATE_ERR");};N.selectAllChildren=function(a){q(this,
a);var b=f.createRange(v.getDocument(a));b.selectNodeContents(a);this.removeAllRanges();this.addRange(b)};N.deleteFromDocument=function(){if(U&&I&&"Control"==this.docSelection.type){for(var a=this.docSelection.createRange(),b;a.length;)b=a.item(0),a.remove(b),b.parentNode.removeChild(b);this.refresh()}else if(this.rangeCount){a=this.getAllRanges();this.removeAllRanges();b=0;for(var c=a.length;b<c;++b)a[b].deleteContents();this.addRange(a[c-1])}};N.getAllRanges=function(){return this._ranges.slice(0)};
N.setSingleRange=function(a){this.setRanges([a])};N.containsNode=function(a,b){for(var c=0,d=this._ranges.length;c<d;++c)if(this._ranges[c].containsNode(a,b))return!0;return!1};N.toHtml=function(){var a="";if(this.rangeCount){for(var a=C.getRangeDocument(this._ranges[0]).createElement("div"),b=0,c=this._ranges.length;b<c;++b)a.appendChild(this._ranges[b].cloneContents());a=a.innerHTML}return a};N.getName=function(){return"WrappedSelection"};N.inspect=function(){return t(this)};N.detach=function(){this.win=
this.anchorNode=this.focusNode=this.win._rangySelection=null};u.inspect=t;f.Selection=u;f.selectionPrototype=N;f.addCreateMissingNativeApiListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return f.getSelection(this)});a=null})});window.rangy=g})();define("aloha/rangy-core",["jquery","vendor/rangy-core"],function(g){return window.rangy});var JSON;JSON||(JSON={});
(function(){function g(b){return 10>b?"0"+b:b}function f(b){k.lastIndex=0;return k.test(b)?'"'+b.replace(k,function(b){var c=d[b];return"string"===typeof c?c:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function n(b,d){var g,k,a,m,t=e,v,x=d[b];x&&"object"===typeof x&&"function"===typeof x.toJSON&&(x=x.toJSON(b));"function"===typeof c&&(x=c.call(d,b,x));switch(typeof x){case "string":return f(x);case "number":return isFinite(x)?String(x):"null";case "boolean":case "null":return String(x);
case "object":if(!x)return"null";e+=l;v=[];if("[object Array]"===Object.prototype.toString.apply(x)){m=x.length;for(g=0;g<m;g+=1)v[g]=n(g,x)||"null";a=0===v.length?"[]":e?"[\n"+e+v.join(",\n"+e)+"\n"+t+"]":"["+v.join(",")+"]";e=t;return a}if(c&&"object"===typeof c)for(m=c.length,g=0;g<m;g+=1)"string"===typeof c[g]&&(k=c[g],(a=n(k,x))&&v.push(f(k)+(e?": ":":")+a));else for(k in x)Object.prototype.hasOwnProperty.call(x,k)&&(a=n(k,x))&&v.push(f(k)+(e?": ":":")+a);a=0===v.length?"{}":e?"{\n"+e+v.join(",\n"+
e)+"\n"+t+"}":"{"+v.join(",")+"}";e=t;return a}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},c;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,d,f){var g;l=e="";if("number"===typeof f)for(g=0;g<f;g+=1)l+=" ";else"string"===typeof f&&(l=f);if((c=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return n("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(b,c){function d(a,b){var e,f,g=a[b];if(g&&"object"===typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=d(g,e),void 0!==f?g[e]=f:delete g[e]);return c.call(a,b,g)}var e;b=String(b);m.lastIndex=0;m.test(b)&&(b=b.replace(m,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+b+")"),"function"===typeof c?d({"":e},""):e;throw new SyntaxError("JSON.parse");})})();define("util/json2",[],function(){return JSON});
define("./kernel ../has require module ../json ./lang ./array".split(" "),function(g,f,n,m,k,e,l){if(!f("dojo-loader"))return console.error("cannot load the Dojo v1.x loader with a foreign loader"),0;f.add("dojo-fast-sync-require",1);var d=function(a){return a.replace(/\./g,"/")},c=/\/\/>>built/,b=[],p=[],r=function(a,c,d){b.push(d);l.forEach(a.split(","),function(a){a=G(a,c.module);p.push(a);S(a)});u()},u=f("dojo-fast-sync-require")?function(){var a,c;for(c in J)if(a=J[c],void 0===a.noReqPluginCheck&&
(a.noReqPluginCheck=/loadInit\!/.test(c)||/require\!/.test(c)?1:0),!a.executed&&!a.noReqPluginCheck&&a.injected==z)return;N(function(){var a=b;b=[];l.forEach(a,function(a){a(1)})})}:function(){var a,c=function(b){a[b.mid]=1;for(var d,e,f=b.deps||[],g=0;g<f.length;g++)if(e=f[g],!((d=a[e.mid])||0!==d&&c(e)))return a[b.mid]=0,!1;return!0};return function(){var d,e;a={};for(e in J)d=J[e],d.executed||d.noReqPluginCheck?a[e]=1:(0!==d.noReqPluginCheck&&(d.noReqPluginCheck=/loadInit\!/.test(e)||/require\!/.test(e)?
1:0),d.noReqPluginCheck?a[e]=1:d.injected!==D&&(a[e]=0));var f;e=0;for(var g=p.length;e<g;e++)if(d=p[e],!((f=a[d.mid])||0!==f&&c(d)))return;N(function(){var a=b;b=[];l.forEach(a,function(a){a(1)})})}}(),a=function(a,b,c){var d=/\(|\)/g,e=1;for(d.lastIndex=b;(b=d.exec(a))&&(e=")"==b[0]?e-1:e+1,0!=e););if(0!=e)throw"unmatched paren around character "+d.lastIndex+" in: "+a;return[g.trim(a.substring(c,d.lastIndex))+";\n",d.lastIndex]},q=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,t=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,
v=/(^|\s)(require|define)\s*\(/m,x=function(b,c){var d,e,f,g=[],k=[];d=[];for(c=c||b.replace(q,function(a){t.lastIndex=v.lastIndex=0;return t.test(a)||v.test(a)?"":a});d=t.exec(c);)e=t.lastIndex,f=e-d[0].length,e=a(c,e,f),"loadInit"==d[2]?g.push(e[0]):k.push(e[0]),t.lastIndex=e[1];d=g.concat(k);return d.length||!v.test(c)?[b.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),d.join(""),d]:0},C=n.initSyncLoader(r,u,function(a,b){var d,e,f=[],g=[];if(c.test(b)||!(d=x(b)))return 0;e=a.mid+
"-*loadInit";for(var l in G("dojo",a).result.scopeMap)f.push(l),g.push('"'+l+'"');return"// xdomain rewrite of "+a.mid+"\ndefine('"+e+"',{\n\tnames:"+k.stringify(f)+",\n\tdef:function("+f.join(",")+"){"+d[1]+"}});\n\ndefine("+k.stringify(f.concat(["dojo/loadInit!"+e]))+", function("+f.join(",")+"){\n"+d[0]+"});"}),y=C.sync,z=C.requested,D=C.arrived,F=C.nonmodule,H=C.executing,M=C.executed,I=C.syncExecStack,J=C.modules,K=C.execQ,G=C.getModule,S=C.injectModule,O=C.setArrived,s=C.signal,T=C.finishExec,
Q=C.execModule,U=C.getLegacyMode,N=C.guardCheckComplete,r=C.dojoRequirePlugin;g.provide=function(a){var b=I[0],c=e.mixin(G(d(a),n.module),{executed:H,result:e.getObject(a,!0)});O(c);b&&(b.provides||(b.provides=[])).push(function(){c.result=e.getObject(a);delete c.provides;c.executed!==M&&T(c)});return c.result};f.add("config-publishRequireResult",1,0,0);g.require=function(a,b){var c=function(a,b){var c=G(d(a),n.module);if(I.length&&I[0].finish)I[0].finish.push(a);else{if(c.executed)return c.result;
b&&(c.result=F);var e=U();S(c);e=U();c.executed!==M&&c.injected===D&&C.guardCheckComplete(function(){Q(c)});if(c.executed)return c.result;e==y?c.cjs?K.unshift(c):I.length&&(I[0].finish=[a]):K.push(c)}}(a,b);f("config-publishRequireResult")&&!e.exists(a)&&void 0!==c&&e.setObject(a,c);return c};g.loadInit=function(a){a()};g.registerModulePath=function(a,b){var c={};c[a.replace(/\./g,"/")]=b;n({paths:c})};g.platformRequire=function(a){a=(a.common||[]).concat(a[g._name]||a["default"]||[]);for(var b;a.length;)e.isArray(b=
a.shift())?g.require.apply(g,b):g.require(b)};g.requireIf=g.requireAfterIf=function(a,b,c){a&&g.require(b,c)};g.requireLocalization=function(a,b,c){n(["../i18n"],function(d){d.getLocalization(a,b,c)})};return{extractLegacyApiApplications:x,require:r,loadInit:function(a,b,c){b([a],function(a){b(a.names,function(){for(var e="",f=[],k=0;k<arguments.length;k++)e+="var "+a.names[k]+"= arguments["+k+"]; ",f.push(arguments[k]);eval(e);var l=b.module,n=[],q,e={provide:function(a){a=d(a);a=G(a,l);a!==l&&O(a)},
require:function(a,b){a=d(a);b&&(G(a,l).result=F);n.push(a)},requireLocalization:function(a,b,c){q||(q=["dojo/i18n"]);c=(c||g.locale).toLowerCase();a=d(a)+"/nls/"+(/root/i.test(c)?"":c+"/")+d(b);G(a,l).isXd&&q.push("dojo/i18n!"+a)},loadInit:function(a){a()}},k={},t;try{for(t in e)k[t]=g[t],g[t]=e[t];a.def.apply(null,f)}catch(p){s("error",[{src:m.id,id:"failedDojoLoadInit"},p])}finally{for(t in e)g[t]=k[t]}q&&(n=n.concat(q));n.length?r(n.join(","),b,c):c()})})}}});
define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(g,f,n,m,k,e,l,d,c){var b=n.mixin,p={},r=p._Line=function(a,b){this.start=a;this.end=b};r.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var u=p.Animation=function(a){b(this,a);n.isArray(this.curve)&&(this.curve=new r(this.curve[0],this.curve[1]))};u.prototype=new m;n.extend(u,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=
this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(f.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||this.delay,d=n.hitch(this,
"_play",b);if(0<c)return this._delayTimer=setTimeout(d,c),this;d();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();
this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?
this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=
0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var a=0,q=null,t={run:function(){}};n.extend(u,{_startTimer:function(){this._timer||(this._timer=e.after(t,"run",n.hitch(this,"_cycle"),!0),a++);q||(q=setInterval(n.hitch(t,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,a--);0>=a&&(clearInterval(q),q=null,a=0)}});var v=l("ie")?function(a){var b=
a.style;b.width.length||"auto"!=c.get(a,"width")||(b.width="auto")}:function(){};p._fade=function(a){a.node=d.byId(a.node);var f=b({properties:{}},a);a=f.properties.opacity={};a.start="start"in f?f.start:function(){return+c.get(f.node,"opacity")||0};a.end=f.end;a=p.animateProperty(f);e.after(a,"beforeBegin",n.partial(v,f.node),!0);return a};p.fadeIn=function(a){return p._fade(b({end:1},a))};p.fadeOut=function(a){return p._fade(b({end:0},a))};p._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*
Math.PI)/2};var x=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof k&&(c.tempColor=new k)}};x.prototype.getValue=function(a){var b={},c;for(c in this._properties){var d=this._properties[c],e=d.start;e instanceof k?b[c]=k.blendColors(e,d.end,a,d.tempColor).toCss():n.isArray(e)||(b[c]=(d.end-e)*a+e+("opacity"!=c?d.units||"px":0))}return b};p.animateProperty=function(a){var f=a.node=d.byId(a.node);a.easing||(a.easing=g._defaultEasing);a=new u(a);e.after(a,"beforeBegin",n.hitch(a,
function(){var a={},d;for(d in this.properties){if("width"==d||"height"==d)this.node.display="block";var e=this.properties[d];n.isFunction(e)&&(e=e(f));e=a[d]=b({},n.isObject(e)?e:{end:e});n.isFunction(e.start)&&(e.start=e.start(f));n.isFunction(e.end)&&(e.end=e.end(f));var g=0<=d.toLowerCase().indexOf("color"),l=function(a,b){var d={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==d)return d;d=c.get(a,b);return"opacity"==b?+d:g?d:parseFloat(d)};"end"in e?"start"in e||(e.start=l(f,d)):e.end=
l(f,d);g?(e.start=new k(e.start),e.end=new k(e.end)):e.start="opacity"==d?+e.start:parseFloat(e.start)}this.curve=new x(a)}),!0);e.after(a,"onAnimate",n.hitch(c,"set",a.node),!0);return a};p.anim=function(a,b,c,d,e,f){return p.animateProperty({node:a,duration:c||u.prototype.duration,properties:b,easing:d,onEnd:e}).play(f||0)};l("extend-dojo")&&(b(g,p),g._Animation=u);return p});
define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(g,f,n,m){function k(c){var b=d[c.options.handleAs];c.data=b?b(c):c.data||c.text;return c}m.add("activex","undefined"!==typeof ActiveXObject);m.add("dom-parser",function(c){return"DOMParser"in c});var e;if(m("activex")){var l=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];e=function(c){var b=c.data;b&&m("dom-qsa2.1")&&!b.querySelectorAll&&m("dom-parser")&&
(b=(new DOMParser).parseFromString(c.text,"application/xml"));if(!b||!b.documentElement){var d=c.text;n.some(l,function(c){try{var e=new ActiveXObject(c);e.async=!1;e.loadXML(d);b=e}catch(a){return!1}return!0})}return b}}var d={javascript:function(c){return f.eval(c.text||"")},json:function(c){return g.parse(c.text||null)},xml:e};k.register=function(c,b){d[c]=b};return k});
define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(g,f,n,m,k){function e(a,b){var c=a.xhr;a.status=a.xhr.status;a.text=c.responseText;"xml"===a.options.handleAs&&(a.data=c.responseXML);if(!b)try{n(a)}catch(d){b=d}b?this.reject(b):m.checkStatus(c.status)?this.resolve(a):(b=new g("Unable to load "+a.url+" status: "+c.status,a),this.reject(b))}function l(a){return this.xhr.getResponseHeader(a)}function d(n,q,t){var y=m.parseArgs(n,m.deepCreate(a,q),k("native-formdata")&&
q&&q.data&&q.data instanceof FormData);n=y.url;q=y.options;var z,D=m.deferred(y,r,c,b,e,function(){z&&z()}),F=y.xhr=d._create();if(!F)return D.cancel(new g("XHR was not created")),t?D:D.promise;y.getHeader=l;p&&(z=p(F,D,y));var H=q.data,M=!q.sync,I=q.method;try{F.open(I,n,M,q.user||u,q.password||u);q.withCredentials&&(F.withCredentials=q.withCredentials);var J=q.headers;n="application/x-www-form-urlencoded";if(J)for(var K in J)"content-type"===K.toLowerCase()?n=J[K]:J[K]&&F.setRequestHeader(K,J[K]);
n&&!1!==n&&F.setRequestHeader("Content-Type",n);J&&"X-Requested-With"in J||F.setRequestHeader("X-Requested-With","XMLHttpRequest");m.notify&&m.notify.emit("send",y,D.promise.cancel);F.send(H)}catch(G){D.reject(G)}f(D);F=null;return t?D:D.promise}k.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});k.add("dojo-force-activex-xhr",function(){return k("activex")&&!document.addEventListener&&"file:"===window.location.protocol});k.add("native-xhr2",function(){if(k("native-xhr")){var a=
new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});k.add("native-formdata",function(){return"function"===typeof FormData});var c,b,p,r;k("native-xhr2")?(c=function(a){return!this.isFulfilled()},r=function(a,b){b.xhr.abort()},p=function(a,b,c){function d(a){b.handleResponse(c)}function e(a){a=new g("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,a)}function f(a){a.lengthComputable&&(c.loaded=a.loaded,
c.total=a.total,b.progress(c))}a.addEventListener("load",d,!1);a.addEventListener("error",e,!1);a.addEventListener("progress",f,!1);return function(){a.removeEventListener("load",d,!1);a.removeEventListener("error",e,!1);a.removeEventListener("progress",f,!1);a=null}}):(c=function(a){return a.xhr.readyState},b=function(a){return 4===a.xhr.readyState},r=function(a,b){var c=b.xhr,d=typeof c.abort;"function"!==d&&"object"!==d&&"unknown"!==d||c.abort()});var u,a={data:null,query:null,sync:!1,method:"GET"};
d._create=function(){throw Error("XMLHTTP not available");};if(k("native-xhr")&&!k("dojo-force-activex-xhr"))d._create=function(){return new XMLHttpRequest};else if(k("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),d._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(q){try{new ActiveXObject("Microsoft.XMLHTTP"),d._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(t){}}m.addCommonMethods(d);return d});
define(["./create","./RequestError"],function(g,f){return g("RequestTimeoutError",null,f,{dojoType:"timeout"})});define(["./create"],function(g){return g("RequestError",function(f,g){this.response=g})});
define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),function(g,f,n,m,k,e,l,d){function c(b){return p(b)}function b(b){return b.data||b.text}g.deepCopy=function(b,c){for(var a in c){var d=b[a],e=c[a];d!==e&&(d&&"object"===typeof d&&e&&"object"===typeof e?g.deepCopy(d,e):b[a]=e)}return b};g.deepCreate=function(b,c){c=c||{};var a=l.delegate(b),d,e;for(d in b)(e=b[d])&&"object"===typeof e&&(a[d]=g.deepCreate(e,
c[d]));return g.deepCopy(a,c)};var p=Object.freeze||function(b){return b};g.deferred=function(e,k,a,q,t,v){var x=new m(function(a){k&&k(x,e);return a&&(a instanceof f||a instanceof n)?a:new n("Request canceled",e)});x.response=e;x.isValid=a;x.isReady=q;x.handleResponse=t;a=x.then(c).otherwise(function(a){a.response=e;throw a;});g.notify&&a.then(l.hitch(g.notify,"emit","load"),l.hitch(g.notify,"emit","error"));q=a.then(b);t=new d;for(var C in q)q.hasOwnProperty(C)&&(t[C]=q[C]);t.response=a;p(t);v&&
x.then(function(a){v.call(x,a)},function(a){v.call(x,e,a)});x.promise=t;x.then=t.then;return x};g.addCommonMethods=function(b,c){e.forEach(c||["GET","POST","PUT","DELETE"],function(a){b[("DELETE"===a?"DEL":a).toLowerCase()]=function(c,d){d=l.delegate(d||{});d.method=a;return b(c,d)}})};g.parseArgs=function(b,c,a){var d=c.data,e=c.query;d&&!a&&"object"===typeof d&&(c.data=k.objectToQuery(d));e?("object"===typeof e&&(e=k.objectToQuery(e)),c.preventCache&&(e+=(e?"&":"")+"request.preventCache="+ +new Date)):
c.preventCache&&(e="request.preventCache="+ +new Date);b&&e&&(b+=(~b.indexOf("?")?"&":"?")+e);return{url:b,options:c,getHeader:function(a){return null}}};g.checkStatus=function(b){b=b||0;return 200<=b&&300>b||304===b||1223===b||!b}});
define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(g,f,n,m,k,e){function l(){for(var e=+new Date,g=0,k;g<b.length&&(k=b[g]);g++){var a=k.response,l=a.options;k.isCanceled&&k.isCanceled()||k.isValid&&!k.isValid(a)?(b.splice(g--,1),d._onAction&&d._onAction()):k.isReady&&k.isReady(a)?(b.splice(g--,1),k.handleResponse(a),d._onAction&&d._onAction()):k.startTime&&k.startTime+
(l.timeout||0)<e&&(b.splice(g--,1),k.cancel(new f("Timeout exceeded",a)),d._onAction&&d._onAction())}d._onInFlight&&d._onInFlight(k);b.length||(clearInterval(c),c=null)}function d(d){d.response.options.timeout&&(d.startTime=+new Date);d.isFulfilled()||(b.push(d),c||(c=setInterval(l,50)),d.response.options.sync&&l())}var c=null,b=[];d.cancelAll=function(){try{m.forEach(b,function(b){try{b.cancel(new n("All requests canceled."))}catch(c){}})}catch(c){}};k&&e&&k.doc.attachEvent&&e(k.global,"unload",
function(){d.cancelAll()});return d});
define(["./_base/lang","./dom","./io-query","./json"],function(g,f,n,m){var k={fieldToObject:function(e){var g=null;if(e=f.byId(e)){var d=e.name,c=(e.type||"").toLowerCase();if(d&&c&&!e.disabled)if("radio"==c||"checkbox"==c)e.checked&&(g=e.value);else if(e.multiple)for(g=[],e=[e.firstChild];e.length;)for(d=e.pop();d;d=d.nextSibling)if(1==d.nodeType&&"option"==d.tagName.toLowerCase())d.selected&&g.push(d.value);else{d.nextSibling&&e.push(d.nextSibling);d.firstChild&&e.push(d.firstChild);break}else g=
e.value}return g},toObject:function(e){var l={};e=f.byId(e).elements;for(var d=0,c=e.length;d<c;++d){var b=e[d],m=b.name,n=(b.type||"").toLowerCase();if(m&&n&&0>"file|submit|image|reset|button".indexOf(n)&&!b.disabled){var u=l,a=m,b=k.fieldToObject(b);if(null!==b){var q=u[a];"string"==typeof q?u[a]=[q,b]:g.isArray(q)?q.push(b):u[a]=b}"image"==n&&(l[m+".x"]=l[m+".y"]=l[m].x=l[m].y=0)}}return l},toQuery:function(e){return n.objectToQuery(k.toObject(e))},toJson:function(e,f){return m.stringify(k.toObject(e),
null,f?4:0)}};return k});
define(["./_base/lang"],function(g){var f={};return{objectToQuery:function(n){var m=encodeURIComponent,k=[],e;for(e in n){var l=n[e];if(l!=f[e]){var d=m(e)+"=";if(g.isArray(l))for(var c=0,b=l.length;c<b;++c)k.push(d+m(l[c]));else k.push(d+m(l))}}return k.join("&")},queryToObject:function(f){var m=decodeURIComponent;f=f.split("&");for(var k={},e,l,d=0,c=f.length;d<c;++d)if(l=f[d],l.length){var b=l.indexOf("=");0>b?(e=m(l),l=""):(e=m(l.slice(0,b)),l=m(l.slice(b+1)));"string"==typeof k[e]&&(k[e]=[k[e]]);
g.isArray(k[e])?k[e].push(l):k[e]=l}return k}}});
define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(g,f,n,m,k,e,l,d,c,b,p,r,u,a,q,t){g._xhrObj=q._create;var v=g.config;g.objectToQuery=m.objectToQuery;g.queryToObject=m.queryToObject;g.fieldToObject=e.fieldToObject;g.formToObject=e.toObject;g.formToQuery=e.toQuery;g.formToJson=e.toJson;g._blockAsync=!1;var x=g._contentHandlers=g.contentHandlers={text:function(a){return a.responseText},
json:function(a){return c.fromJson(a.responseText||null)},"json-comment-filtered":function(a){d.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");a=a.responseText;var b=a.indexOf("/*"),e=a.lastIndexOf("*/");if(-1==b||-1==e)throw Error("JSON was not comment filtered");
return c.fromJson(a.substring(b+2,e))},javascript:function(a){return g.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&f("dom-qsa2.1")&&!b.querySelectorAll&&f("dom-parser")&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(f("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];p.some(c,function(c){try{var d=new ActiveXObject(c);d.async=!1;d.loadXML(a.responseText);b=d}catch(e){return!1}return!0})}return b},
"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?x["json-comment-filtered"](a):x.json(a)}};g._ioSetArgs=function(a,c,d,f){var n={args:a,url:a.url},q=null;if(a.form){var q=k.byId(a.form),t=q.getAttributeNode("action");n.url=n.url||(t?t.value:null);q=e.toObject(q)}t=[{}];q&&t.push(q);a.content&&t.push(a.content);a.preventCache&&t.push({"dojo.preventCache":(new Date).valueOf()});n.query=m.objectToQuery(b.mixin.apply(null,t));n.handleAs=a.handleAs||"text";
var p=new l(function(a){a.canceled=!0;c&&c(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});p.addCallback(d);var r=a.load;r&&b.isFunction(r)&&p.addCallback(function(b){return r.call(a,b,n)});var u=a.error;u&&b.isFunction(u)&&p.addErrback(function(b){return u.call(a,b,n)});var x=a.handle;x&&b.isFunction(x)&&p.addBoth(function(b){return x.call(a,b,n)});p.addErrback(function(a){return f(a,p)});v.ioPublish&&g.publish&&!1!==n.args.ioPublish&&(p.addCallbacks(function(a){g.publish("/dojo/io/load",
[p,a]);return a},function(a){g.publish("/dojo/io/error",[p,a]);return a}),p.addBoth(function(a){g.publish("/dojo/io/done",[p,a]);return a}));p.ioArgs=n;return p};var C=function(a){a=x[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},y=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},z=function(a){0>=D&&(D=0,v.ioPublish&&g.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&g.publish("/dojo/io/stop"))},D=0;u.after(a,"_onAction",function(){D-=1});u.after(a,"_onInFlight",z);g._ioCancelAll=
a.cancelAll;g._ioNotifyStart=function(a){v.ioPublish&&g.publish&&!1!==a.ioArgs.args.ioPublish&&(D||g.publish("/dojo/io/start"),D+=1,g.publish("/dojo/io/send",[a]))};g._ioWatch=function(c,d,e,f){c.ioArgs.options=c.ioArgs.args;b.mixin(c,{response:c.ioArgs,isValid:function(a){return d(c)},isReady:function(a){return e(c)},handleResponse:function(a){return f(c)}});a(c);z(c)};g._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null)};g.xhr=function(a,
b,c){var d,e=g._ioSetArgs(b,function(a){d&&d.cancel()},C,y),f=e.ioArgs;"postData"in b?f.query=b.postData:"putData"in b?f.query=b.putData:"rawBody"in b?f.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&g._ioAddQueryToUrl(f);var k={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:f};"undefined"!==typeof b.headers&&(k.headers=b.headers);"undefined"!==typeof b.contentType&&(k.headers||(k.headers={}),k.headers["Content-Type"]=b.contentType);
"undefined"!==typeof f.query&&(k.data=f.query);"undefined"!==typeof b.sync&&(k.sync=b.sync);g._ioNotifyStart(e);try{d=q(f.url,k,!0)}catch(l){return e.cancel(),e}e.ioArgs.xhr=d.response.xhr;d.then(function(){e.resolve(e)}).otherwise(function(a){f.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);e.reject(a)});return e};g.xhrGet=function(a){return g.xhr("GET",a)};g.rawXhrPost=g.xhrPost=function(a){return g.xhr("POST",a,!0)};g.rawXhrPut=g.xhrPut=function(a){return g.xhr("PUT",
a,!0)};g.xhrDelete=function(a){return g.xhr("DELETE",a)};g._isDocumentOk=function(a){return t.checkStatus(a.status)};g._getText=function(a){var b;g.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};b.mixin(g.xhr,{_xhrObj:g._xhrObj,fieldToObject:e.fieldToObject,formToObject:e.toObject,objectToQuery:m.objectToQuery,formToQuery:e.toQuery,formToJson:e.toJson,queryToObject:m.queryToObject,contentHandlers:x,_ioSetArgs:g._ioSetArgs,_ioCancelAll:g._ioCancelAll,_ioNotifyStart:g._ioNotifyStart,_ioWatch:g._ioWatch,
_ioAddQueryToUrl:g._ioAddQueryToUrl,_isDocumentOk:g._isDocumentOk,_getText:g._getText,get:g.xhrGet,post:g.xhrPost,put:g.xhrPut,del:g.xhrDelete});return g.xhr});
define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(g,f,n,m,k,e,l,d,c){function b(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var p=function(a){return 1==a.length&&"string"==typeof a[0]},r=function(a){var b=a.parentNode;b&&b.removeChild(a)},u=f.NodeList,a=u._adaptWithCondition,q=u._adaptAsForEach,t=u._adaptAsMap;m.extend(u,{_normalize:function(a,
b){var c=!0===a.parse;if("string"==typeof a.template){var d=a.templateFunc||g.string&&g.string.substitute;a=d?d(a.template,a):a}d=typeof a;"string"==d||"number"==d?(a=e.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?m._toArray(a.childNodes):[a]):m.isArrayLike(a)?m.isArray(a)||(a=m._toArray(a)):a=[a];c&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,c,d){if(1==b.nodeType||"only"!=c)for(var f,k=a.length,l=k-1;0<=l;l--){var m=d?this._cloneNode(a[l]):a[l];
if(a._runParse&&g.parser&&g.parser.parse)for(f||(f=b.ownerDocument.createElement("div")),f.appendChild(m),g.parser.parse(f),m=f.firstChild;f.firstChild;)f.removeChild(f.firstChild);l==k-1?e.place(m,b,c):b.parentNode.insertBefore(m,b);b=m}},position:t(l.position),attr:a(b(d),p),style:a(b(c),p),addClass:q(k.add),removeClass:q(k.remove),toggleClass:q(k.toggle),replaceClass:q(k.replace),empty:q(e.empty),removeAttr:q(d.remove),marginBox:t(l.getMarginBox),place:function(a,b){var c=f(a)[0];return this.forEach(function(a){e.place(a,
c,b)})},orphan:function(a){return(a?f._filterResult(this,a):this).forEach(r)},adopt:function(a,b){return f(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new u;this.map(function(c){f(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=f._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(n.filter(c,b[d],b[d+1]),this)},addContent:function(a,b){a=
this._normalize(a,this[0]);for(var c=0,d;d=this[c];c++)a.length?this._place(a,d,b,0<c):e.empty(d);return this}});return u});
define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(g,f,n,m,k){var e=m.trim,l=n.forEach,d="BackCompat"==k.doc.compatMode,c=!1,b=function(){return!0},p=function(a){a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var b=function(b,c){return e(a.slice(b,c))},d=[],f=-1,g=-1,k=-1,l=-1,m=-1,n=-1,q=-1,t,p="",v="",r,u=0,s=a.length,x=null,C=null,y=function(){0<=n&&(x.id=b(n,u).replace(/\\/g,""),n=-1);if(0<=q){var a=q==u?null:b(q,u);x[0>">~+".indexOf(a)?"tag":"oper"]=a;
q=-1}0<=m&&(x.classes.push(b(m+1,u).replace(/\\/g,"")),m=-1)};p=v,v=a.charAt(u),u<s;u++)"\\"!=p&&(x||(r=u,x={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return c?this.otag:this.tag}},q=u),t?v==t&&(t=null):"'"==v||'"'==v?t=v:0<=f?"]"==v?(C.attr?C.matchFor=b(k||f+1,u):C.attr=b(f+1,u),!(f=C.matchFor)||'"'!=f.charAt(0)&&"'"!=f.charAt(0)||(C.matchFor=f.slice(1,-1)),C.matchFor&&(C.matchFor=C.matchFor.replace(/\\/g,"")),x.attrs.push(C),C=null,f=k=-1):"="==v&&(k=
0<="|~^$*".indexOf(p)?p:"",C.type=k+v,C.attr=b(f+1,u-k.length),k=u+1):0<=g?")"==v&&(0<=l&&(C.value=b(g+1,u)),l=g=-1):"#"==v?(y(),n=u+1):"."==v?(y(),m=u):":"==v?(y(),l=u):"["==v?(y(),f=u,C={}):"("==v?(0<=l&&(C={name:b(l+1,u),value:null},x.pseudos.push(C)),g=u):" "==v&&p!=v&&(y(),0<=l&&x.pseudos.push({name:b(l+1,u)}),x.loops=x.pseudos.length||x.attrs.length||x.classes.length,x.oquery=x.query=b(r,u),x.otag=x.tag=x.oper?null:x.tag||"*",x.tag&&(x.tag=x.tag.toUpperCase()),d.length&&d[d.length-1].oper&&
(x.infixOper=d.pop(),x.query=x.infixOper.query+" "+x.query),d.push(x),x=null));return d},r=function(a,b){return a?b?function(){return a.apply(window,arguments)&&b.apply(window,arguments)}:a:b},u=function(a,b){var c=b||[];a&&c.push(a);return c},a=function(a){return 1==a.nodeType},q=function(a,b){return a?"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(c?a.getAttribute(b):a.getAttribute(b,2))||"":""},t={"*=":function(a,b){return function(c){return 0<=q(c,a).indexOf(b)}},
"^=":function(a,b){return function(c){return 0==q(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+q(c,a);var d=c.lastIndexOf(b);return-1<d&&d==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+q(b,a)+" ").indexOf(c)}},"|=":function(a,b){var c=b+"-";return function(d){d=q(d,a);return d==b||0==d.indexOf(c)}},"=":function(a,b){return function(c){return q(c,a)==b}}},v="undefined"==typeof k.doc.firstChild.nextElementSibling,x=v?"nextSibling":"nextElementSibling",
C=v?"previousSibling":"previousElementSibling",y=v?a:b,z=function(a){for(;a=a[C];)if(y(a))return!1;return!0},D=function(a){for(;a=a[x];)if(y(a))return!1;return!0},F=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,d=b.children||b.childNodes,e=a._i||a.getAttribute("_i")||-1,g=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!d)return-1;d=d.length;if(g==d&&0<=e&&0<=g)return e;f("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",d):b._l=d;e=-1;for(b=
b.firstElementChild||b.firstChild;b;b=b[x])y(b)&&(f("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(e=c));return e},H=function(a){return!(F(a)%2)},M=function(a){return F(a)%2},I={checked:function(a,b){return function(a){return!("checked"in a?!a.checked:!a.selected)}},disabled:function(a,b){return function(a){return a.disabled}},enabled:function(a,b){return function(a){return!a.disabled}},"first-child":function(){return z},"last-child":function(){return D},"only-child":function(a,b){return function(a){return z(a)&&
D(a)}},empty:function(a,b){return function(a){var b=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=p(b)[0],d={el:1};"*"!=c.tag&&(d.tag=1);c.classes.length||(d.classes=1);var e=K(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return M;if("even"==
b)return H;if(-1!=b.indexOf("n")){var d=b.split("n",2),e=d[0]?"-"==d[0]?-1:c(d[0]):1,f=d[1]?c(d[1]):0,g=0,k=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(g=f-f%e),f%=e):0>e&&(e*=-1,0<f&&(k=f,f%=e));if(0<e)return function(a){a=F(a);return a>=g&&(0>k||a<=k)&&a%e==f};b=f}var l=c(b);return function(a){return F(a)==l}}},J=9>f("ie")||9==f("ie")&&f("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(d){return c?d.getAttribute(a):d[a]||d[b]}}:function(a){return function(b){return b&&
b.getAttribute&&b.hasAttribute(a)}},K=function(d,e){if(!d)return b;e=e||{};var f=null;"el"in e||(f=r(f,a));"tag"in e||"*"!=d.tag&&(f=r(f,function(a){return a&&(c?a.tagName:a.tagName.toUpperCase())==d.getTag()}));"classes"in e||l(d.classes,function(a,b,c){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");f=r(f,function(a){return d.test(a.className)});f.count=b});"pseudos"in e||l(d.pseudos,function(a){var b=a.name;I[b]&&(f=r(f,I[b](b,a.value)))});"attrs"in e||l(d.attrs,function(a){var b,c=a.attr;a.type&&t[a.type]?
b=t[a.type](c,a.matchFor):c.length&&(b=J(c));b&&(f=r(f,b))});"id"in e||d.id&&(f=r(f,function(a){return!!a&&a.id==d.id}));f||"default"in e||(f=b);return f},G=function(b){return function(c,d,e){for(;c=c[x];)if(!v||a(c)){e&&!ja(c,e)||!b(c)||d.push(c);break}return d}},S=function(a){return function(b,c,d){for(b=b[x];b;){if(y(b)){if(d&&!ja(b,d))break;a(b)&&c.push(b)}b=b[x]}return c}},O=function(a){a=a||b;return function(b,c,d){for(var e=0,f=b.children||b.childNodes;b=f[e++];)y(b)&&(!d||ja(b,d))&&a(b,e)&&
c.push(b);return c}},s={},T=function(a){var c=s[a.query];if(c)return c;var e=a.infixOper,e=e?e.oper:"",f=K(a,{el:1}),l="*"==a.tag,m=k.doc.getElementsByClassName;if(e)m={el:1},l&&(m.tag=1),f=K(a,m),"+"==e?c=G(f):"~"==e?c=S(f):">"==e&&(c=O(f));else if(a.id)f=!a.loops&&l?b:K(a,{el:1,id:1}),c=function(b,c){var d=g.byId(a.id,b.ownerDocument||b);if(d&&f(d)){if(9==b.nodeType)return u(d,c);for(var e=d.parentNode;e&&e!=b;)e=e.parentNode;if(e)return u(d,c)}};else if(m&&/\{\s*\[native code\]\s*\}/.test(String(m))&&
a.classes.length&&!d)var f=K(a,{el:1,classes:1,id:1}),n=a.classes.join(" "),c=function(a,b,c){b=u(0,b);for(var d,e=0,g=a.getElementsByClassName(n);d=g[e++];)f(d,a)&&ja(d,c)&&b.push(d);return b};else l||a.loops?(f=K(a,{el:1,tag:1,id:1}),c=function(b,c,d){c=u(0,c);for(var e,g=0,k=(e=a.getTag())?b.getElementsByTagName(e):[];e=k[g++];)f(e,b)&&ja(e,d)&&c.push(e);return c}):c=function(b,c,d){c=u(0,c);for(var e=0,f=a.getTag(),f=f?b.getElementsByTagName(f):[];b=f[e++];)ja(b,d)&&c.push(b);return c};return s[a.query]=
c},Q={},U={},N=function(a){var b=p(e(a));if(1==b.length){var c=T(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){a=u(a);for(var c,d,e=b.length,f,g,k=0;k<e;k++){g=[];c=b[k];d=a.length-1;0<d&&(f={},g.nozip=!0);d=T(c);for(var l=0;c=a[l];l++)d(c,g,f);if(!g.length)break;a=g}return g}},V=f("ie")?"commentStrip":"nozip",P=!!k.doc.querySelectorAll,aa=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,ea=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},ga=/([^[]*)([^\]]*])?/g,
na=function(a,b,c){return b.replace(aa,ea)+(c||"")},W=function(a,b){a=a.replace(ga,na);if(P){var c=U[a];if(c&&!b)return c}if(c=Q[a])return c;var c=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(b=!0);if(!P||b||-1!=">~+".indexOf(c)||f("ie")&&-1!=a.indexOf(":")||d&&0<=a.indexOf(".")||-1!=a.indexOf(":contains")||-1!=a.indexOf(":checked")||-1!=a.indexOf("|=")){var g=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return Q[a]=2>g.length?N(a):function(a){for(var b=0,c=[],d;d=g[b++];)c=
c.concat(N(d)(a));return c}}var k=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return U[a]=function(b){try{if(9!=b.nodeType&&!e)throw"";var c=b.querySelectorAll(k);c[V]=!0;return c}catch(d){return W(a,!0)(b)}}},Z=0,ca=f("ie")?function(a){return c?a.getAttribute("_uid")||a.setAttribute("_uid",++Z)||Z:a.uniqueID}:function(a){return a._uid||(a._uid=++Z)},ja=function(a,b){if(!b)return 1;var c=ca(a);return b[c]?0:b[c]=1},R=function(b){if(b&&b.nozip)return b;if(!b||!b.length)return[];if(2>b.length)return[b[0]];
var d=[];Z++;var e,g;if(f("ie")&&c){var k=Z+"";for(e=0;e<b.length;e++)(g=b[e])&&g.getAttribute("_zipIdx")!=k&&(d.push(g),g.setAttribute("_zipIdx",k))}else if(f("ie")&&b.commentStrip)try{for(e=0;e<b.length;e++)(g=b[e])&&a(g)&&d.push(g)}catch(l){}else for(e=0;e<b.length;e++)(g=b[e])&&g._zipIdx!=Z&&(d.push(g),g._zipIdx=Z);return d},ya=function(a,b){b=b||k.doc;c="div"===(b.ownerDocument||b).createElement("div").tagName;var d=W(a)(b);return d&&d.nozip?d:R(d)};ya.filter=function(a,b,c){for(var d=[],e=p(b),
e=1!=e.length||/[^\w#\.]/.test(b)?function(a){return-1!=n.indexOf(ya(b,g.byId(c)),a)}:K(e[0]),f=0,k;k=a[f];f++)e(k)&&d.push(k);return d};return ya});
define(["../has","require"],function(g,f){var n=document.createElement("div");g.add("dom-qsa2.1",!!n.querySelectorAll);g.add("dom-qsa3",function(){try{return n.innerHTML="<p class='TEST'></p>",1==n.querySelectorAll(".TEST:empty").length}catch(f){}});var m;return{load:function(k,e,l,d){d=f;k="default"==k?g("config-selectorEngine")||"css3":k;k="css2"==k||"lite"==k?"./lite":"css2.1"==k?g("dom-qsa2.1")?"./lite":"./acme":"css3"==k?g("dom-qsa3")?"./lite":"./acme":"acme"==k?"./acme":(d=e)&&k;if("?"==k.charAt(k.length-
1)){k=k.substring(0,k.length-1);var c=!0}if(c&&(g("dom-compliant-qsa")||m))return l(m);d([k],function(b){"./lite"!=k&&(m=b);l(b)})}}});
define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(g,f,n,m,k,e,l,d){function c(a,b){var c=function(c,d){if("string"==typeof d&&(d=n.byId(d),!d))return new b([]);var e="string"==typeof c?a(c,d):c?c.end&&c.on?c:[c]:[];return e.end&&e.on?e:new b(e)};c.matches=a.match||function(a,b,d){return 0<c.filter([a],b,d).length};c.filter=a.filter||function(a,b,d){return c(b,d).filter(function(b){return-1<k.indexOf(a,b)})};if("function"!=
typeof a){var d=a.search;a=function(a,b){return d(b||document,a)}}return c}f.add("array-extensible",function(){return 1==e.delegate([],{length:1}).length&&!f("bug-for-in-skips-shadowed")});var b=Array.prototype,p=b.slice,r=b.concat,u=k.forEach,a=function(a,b,c){b=[0].concat(p.call(b,0));c=c||g.global;return function(d){b[0]=d;return a.apply(c,b)}},q=function(a){var b=this instanceof t&&f("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var d=
b?this:[],g=d.length=c.length,k=0;k<g;k++)d[k]=c[k];if(b)return d;c=d}e._mixin(c,v);c._NodeListCtor=function(a){return t(a)};return c},t=q,v=t.prototype=f("array-extensible")?[]:{};t._wrap=v._wrap=function(a,b,c){a=new (c||this._NodeListCtor||t)(a);return b?a._stash(b):a};t._adaptAsMap=function(b,c){return function(){return this.map(a(b,arguments,c))}};t._adaptAsForEach=function(b,c){return function(){this.forEach(a(b,arguments,c));return this}};t._adaptAsFilter=function(b,c){return function(){return this.filter(a(b,
arguments,c))}};t._adaptWithCondition=function(b,c,d){return function(){var e=arguments,f=a(b,e,d);if(c.call(d||g.global,e))return this.map(f);this.forEach(f);return this}};u(["slice","splice"],function(a){var c=b[a];v[a]=function(){return this._wrap(c.apply(this,arguments),"slice"==a?this:null)}});u(["indexOf","lastIndexOf","every","some"],function(a){var b=k[a];v[a]=function(){return b.apply(g,[this].concat(p.call(arguments,0)))}});e.extend(q,{constructor:t,_NodeListCtor:t,toString:function(){return this.join(",")},
_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return m(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=p.call(this,0),c=k.map(arguments,function(a){return p.call(a,0)});return this._wrap(r.apply(b,c),this)},map:function(a,b){return this._wrap(k.map(this,a,b),this)},forEach:function(a,b){u(this,a,b);return this},filter:function(a){var b=
arguments,c=this,d=0;if("string"==typeof a){c=x._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(k.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=e.isFunction(a)?a:e.getObject(a);b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);u(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var x=c(d,q);g.query=c(d,function(a){return q(a)});x.load=function(a,
b,d){l.load(a,b,function(a){d(c(a,q))})};g._filterQueryResult=x._filterResult=function(a,b,c){return new q(x.filter(a,b,c))};g.NodeList=x.NodeList=q;return x});
define(["./kernel","../query","./array","./html","../NodeList-dom"],function(g,f,n){f=f.NodeList;var m=f.prototype;m.connect=f._adaptAsForEach(function(){return g.connect.apply(this,arguments)});m.coords=f._adaptAsMap(g.coords);f.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");n.forEach(f.events,function(f){var e="on"+f;m[e]=function(f,d){return this.connect(e,f,d)}});return g.NodeList=f});
define(["./_base/lang","./_base/array","./dom"],function(g,f,n){function m(c){if("string"==typeof c||c instanceof String){if(c&&!e.test(c))return l[0]=c,l;c=c.split(e);c.length&&!c[0]&&c.shift();c.length&&!c[c.length-1]&&c.pop();return c}return c?f.filter(c,function(b){return b}):[]}var k,e=/\s+/,l=[""],d={};return k={contains:function(c,b){return 0<=(" "+n.byId(c).className+" ").indexOf(" "+b+" ")},add:function(c,b){c=n.byId(c);b=m(b);var d=c.className,e,d=d?" "+d+" ":" ";e=d.length;for(var f=0,
a=b.length,g;f<a;++f)(g=b[f])&&0>d.indexOf(" "+g+" ")&&(d+=g+" ");e<d.length&&(c.className=d.substr(1,d.length-2))},remove:function(c,b){c=n.byId(c);var d;if(void 0!==b){b=m(b);d=" "+c.className+" ";for(var e=0,f=b.length;e<f;++e)d=d.replace(" "+b[e]+" "," ");d=g.trim(d)}else d="";c.className!=d&&(c.className=d)},replace:function(c,b,e){c=n.byId(c);d.className=c.className;k.remove(d,e);k.add(d,b);c.className!==d.className&&(c.className=d.className)},toggle:function(c,b,d){c=n.byId(c);if(void 0===
d){b=m(b);for(var e=0,f=b.length,a;e<f;++e)a=b[e],k[k.contains(c,a)?"remove":"add"](c,a)}else k[d?"add":"remove"](c,b);return d}}});
define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(g,f,n,m,k,e){function l(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}function d(a){if(a.canHaveChildren)try{a.innerHTML="";return}catch(b){}for(var d;d=a.lastChild;)c(d,a)}function c(a,b){a.firstChild&&d(a);b&&(n("ie")&&b.canHaveChildren&&"removeNode"in a?a.removeNode(!1):b.removeChild(a))}var b={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],
th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},p=/<\s*([\w\:]+)/,r={},u=0,a="__"+f._scopeName+"ToDomId",q;for(q in b)b.hasOwnProperty(q)&&(f=b[q],f.pre="option"==q?'<select multiple="multiple">':"<"+f.join("><")+">",f.post="</"+f.reverse().join("></")+">");var t;8>=n("ie")&&(t=function(a){a.__dojo_html5_tested="yes";var b=v("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
function(b){a.createElement(b)});x(b)});g.toDom=function(c,d){d=d||m.doc;var e=d[a];e||(d[a]=e=++u+"",r[e]=d.createElement("div"));8>=n("ie")&&!d.__dojo_html5_tested&&d.body&&t(d);c+="";var f=c.match(p),g=f?f[1].toLowerCase():"",e=r[e];if(f&&b[g])for(f=b[g],e.innerHTML=f.pre+c+f.post,f=f.length;f;--f)e=e.firstChild;else e.innerHTML=c;if(1==e.childNodes.length)return e.removeChild(e.firstChild);for(g=d.createDocumentFragment();f=e.firstChild;)g.appendChild(f);return g};g.place=function(a,b,c){b=k.byId(b);
"string"==typeof a&&(a=/^\s*</.test(a)?g.toDom(a,b.ownerDocument):k.byId(a));if("number"==typeof c){var d=b.childNodes;!d.length||d.length<=c?b.appendChild(a):l(a,d[0>c?0:c])}else switch(c){case "before":l(a,b);break;case "after":c=a;(d=b.parentNode)&&(d.lastChild==b?d.appendChild(c):d.insertBefore(c,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":g.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){l(a,b.firstChild);break}default:b.appendChild(a)}return a};
var v=g.create=function(a,b,c,d){var f=m.doc;c&&(c=k.byId(c),f=c.ownerDocument);"string"==typeof a&&(a=f.createElement(a));b&&e.set(a,b);c&&g.place(a,c,d);return a};g.empty=function(a){d(k.byId(a))};var x=g.destroy=function(a){(a=k.byId(a))&&c(a,a.parentNode)}});
define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(g,f,n,m,k,e,l,d){var c={},b=0,p=f._scopeName+"attrid";g.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};g.get=function(b,c){b=k.byId(b);var a=c.toLowerCase();return b[g.names[a]||c]};g.set=function(f,u,a){f=k.byId(f);if(2==arguments.length&&"string"!=typeof u){for(var q in u)g.set(f,
q,u[q]);return f}q=u.toLowerCase();q=g.names[q]||u;if("style"==q&&"string"!=typeof a)return e.set(f,a),f;if("innerHTML"==q)return n("ie")&&f.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(l.empty(f),f.appendChild(l.toDom(a,f.ownerDocument))):f[q]=a,f;if(m.isFunction(a)){var t=f[p];t||(t=b++,f[p]=t);c[t]||(c[t]={});var v=c[t][q];if(v)d.disconnect(v);else try{delete f[q]}catch(x){}a?c[t][q]=d.connect(f,q,a):f[q]=null;return f}f[q]=a;return f}});
define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(g,f,n,m,k,e){function l(b,c){var d=b.getAttributeNode&&b.getAttributeNode(c);return d&&d.specified}var d={innerHTML:1,className:1,htmlFor:f("ie"),value:1},c={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};g.has=function(b,f){var g=f.toLowerCase();return d[e.names[g]||f]||l(m.byId(b),c[g]||f)};g.get=function(b,f){b=m.byId(b);var g=f.toLowerCase(),k=e.names[g]||f,a=b[k];if(d[k]&&"undefined"!=
typeof a||"href"!=k&&("boolean"==typeof a||n.isFunction(a)))return a;g=c[g]||f;return l(b,g)?b.getAttribute(g):null};g.set=function(b,f,l){b=m.byId(b);if(2==arguments.length){for(var u in f)g.set(b,u,f[u]);return b}u=f.toLowerCase();var a=e.names[u]||f,q=d[a];if("style"==a&&"string"!=typeof l)return k.set(b,l),b;if(q||"boolean"==typeof l||n.isFunction(l))return e.set(b,f,l);b.setAttribute(c[u]||f,l);return b};g.remove=function(b,d){m.byId(b).removeAttribute(c[d.toLowerCase()]||d)};g.getNodeProp=function(b,
d){b=m.byId(b);var f=d.toLowerCase(),g=e.names[f]||d;if(g in b&&"href"!=g)return b[g];f=c[f]||d;return l(b,f)?b.getAttribute(f):null}});
define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(g,f,n,m,k,e,l,d){g.byId=f.byId;g.isDescendant=f.isDescendant;g.setSelectable=f.setSelectable;g.getAttr=m.get;g.setAttr=m.set;g.hasAttr=m.has;g.removeAttr=m.remove;g.getNodeProp=m.getNodeProp;g.attr=function(c,b,d){return 2==arguments.length?m["string"==typeof b?"get":"set"](c,b):m.set(c,b,d)};g.hasClass=e.contains;g.addClass=e.add;g.removeClass=e.remove;g.toggleClass=e.toggle;
g.replaceClass=e.replace;g._toDom=g.toDom=l.toDom;g.place=l.place;g.create=l.create;g.empty=function(c){l.empty(c)};g._destroyElement=g.destroy=function(c){l.destroy(c)};g._getPadExtents=g.getPadExtents=d.getPadExtents;g._getBorderExtents=g.getBorderExtents=d.getBorderExtents;g._getPadBorderExtents=g.getPadBorderExtents=d.getPadBorderExtents;g._getMarginExtents=g.getMarginExtents=d.getMarginExtents;g._getMarginSize=g.getMarginSize=d.getMarginSize;g._getMarginBox=g.getMarginBox=d.getMarginBox;g.setMarginBox=
d.setMarginBox;g._getContentBox=g.getContentBox=d.getContentBox;g.setContentSize=d.setContentSize;g._isBodyLtr=g.isBodyLtr=d.isBodyLtr;g._docScroll=g.docScroll=d.docScroll;g._getIeDocumentElementOffset=g.getIeDocumentElementOffset=d.getIeDocumentElementOffset;g._fixIeBiDiScrollLeft=g.fixIeBiDiScrollLeft=d.fixIeBiDiScrollLeft;g.position=d.position;g.marginBox=function(c,b){return b?d.setMarginBox(c,b):d.getMarginBox(c)};g.contentBox=function(c,b){return b?d.setContentSize(c,b):d.getContentBox(c)};
g.coords=function(c,b){g.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");c=f.byId(c);var e=n.getComputedStyle(c),e=d.getMarginBox(c,e),k=d.position(c,b);e.x=k.x;e.y=k.y;return e};g.getProp=k.get;g.setProp=k.set;g.prop=function(c,b,d){return 2==arguments.length?k["string"==typeof b?"get":"set"](c,b):k.set(c,b,d)};g.getStyle=n.get;g.setStyle=n.set;g.getComputedStyle=n.getComputedStyle;g.__toPixelValue=g.toPixelValue=n.toPixelValue;g.style=function(c,b,d){switch(arguments.length){case 1:return n.get(c);
case 2:return n["string"==typeof b?"get":"set"](c,b)}return n.set(c,b,d)};return g});define(["./kernel","./lang","../on"],function(g,f,n){var m=window,k={addOnWindowUnload:function(e,k){g.windowUnloaded||n(m,"unload",g.windowUnloaded=function(){});n(m,"unload",f.hitch(e,k))},addOnUnload:function(e,g){n(m,"beforeunload",f.hitch(e,g))}};g.addOnWindowUnload=k.addOnWindowUnload;g.addOnUnload=k.addOnUnload;return k});require.has&&require.has.add("config-selectorEngine","acme");
define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(g){return g});
define(["./kernel","./lang","./array","./config"],function(g,f,n,m){var k=g.Color=function(e){e&&this.setColor(e)};k.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:m.transparentColor||[0,0,0,0]};f.extend(k,{r:255,g:255,b:255,a:1,_set:function(e,f,d,c){this.r=
e;this.g=f;this.b=d;this.a=c},setColor:function(e){f.isString(e)?k.fromString(e,this):f.isArray(e)?k.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof k||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+n.map(["r","g","b"],function(e){e=this[e].toString(16);return 2>e.length?"0"+e:e},this).join("")},toCss:function(e){var f=this.r+", "+this.g+", "+
this.b;return(e?"rgba("+f+", "+this.a:"rgb("+f)+")"},toString:function(){return this.toCss(!0)}});k.blendColors=g.blendColors=function(e,f,d,c){var b=c||new k;n.forEach(["r","g","b","a"],function(c){b[c]=e[c]+(f[c]-e[c])*d;"a"!=c&&(b[c]=Math.round(b[c]))});return b.sanitize()};k.fromRgb=g.colorFromRgb=function(e,f){var d=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return d&&k.fromArray(d[1].split(/\s*,\s*/),f)};k.fromHex=g.colorFromHex=function(e,f){var d=f||new k,c=4==e.length?4:8,b=(1<<c)-
1;e=Number("0x"+e.substr(1));if(isNaN(e))return null;n.forEach(["b","g","r"],function(f){var g=e&b;e>>=c;d[f]=4==c?17*g:g});d.a=1;return d};k.fromArray=g.colorFromArray=function(e,f){var d=f||new k;d._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]));isNaN(d.a)&&(d.a=1);return d.sanitize()};k.fromString=g.colorFromString=function(e,f){var d=k.named[e];return d&&k.fromArray(d,f)||k.fromRgb(e,f)||k.fromHex(e,f)};return k});
define(["./has"],function(g){var f="undefined"!=typeof JSON;g.add("json-parse",f);g.add("json-stringify",f&&'{"a":1}'==JSON.stringify({a:0},function(f,g){return g||1}));if(g("json-stringify"))return JSON;var n=function(f){return('"'+f.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:g("json-parse")?JSON.parse:function(f,g){if(g&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(f))throw new SyntaxError("Invalid characters in JSON");
return eval("("+f+")")},stringify:function(f,g,e){function l(c,b,f){g&&(c=g(f,c));var m;m=typeof c;if("number"==m)return isFinite(c)?c+"":"null";if("boolean"==m)return c+"";if(null===c)return"null";if("string"==typeof c)return n(c);if("function"==m||"undefined"==m)return d;if("function"==typeof c.toJSON)return l(c.toJSON(f),b,f);if(c instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,d){a=c["getUTC"+b]()+(d?1:0);return 10>a?"0"+
a:a});if(c.valueOf()!==c)return l(c.valueOf(),b,f);var u=e?b+e:"",a=e?" ":"",q=e?"\n":"";if(c instanceof Array){var a=c.length,t=[];for(f=0;f<a;f++)m=l(c[f],u,f),"string"!=typeof m&&(m="null"),t.push(q+u+m);return"["+t.join(",")+q+b+"]"}t=[];for(f in c){var v;if(c.hasOwnProperty(f)){if("number"==typeof f)v='"'+f+'"';else if("string"==typeof f)v=n(f);else continue;m=l(c[f],u,f);"string"==typeof m&&t.push(q+u+v+":"+a+m)}}return"{"+t.join(",")+q+b+"}"}var d;"string"==typeof g&&(e=g,g=null);return l(f,
"","")}}});define(["./kernel","../json"],function(g,f){g.fromJson=function(f){return eval("("+f+")")};g._escapeString=f.stringify;g.toJsonIndentStr="\t";g.toJson=function(n,m){return f.stringify(n,function(f,e){if(e){var g=e.__json__||e.json;if("function"==typeof g)return g.call(e)}return e},m&&g.toJsonIndentStr)};return g});
define(["./Deferred","./promise/Promise"],function(g,f){return function(n,m,k,e){var l=n&&"function"===typeof n.then,d=l&&n instanceof f;if(!l)return 1<arguments.length?m?m(n):n:(new g).resolve(n);d||(l=new g(n.cancel),n.then(l.resolve,l.reject,l.progress),n=l.promise);return m||k||e?n.then(m,k,e):n}});
define(["../_base/lang","./Promise","../Evented"],function(g,f,n){function m(f){setTimeout(function(){e.apply(k,f)},0)}var k=new n,e=k.emit;k.emit=null;f.prototype.trace=function(){var e=g._toArray(arguments);this.then(function(d){m(["resolved",d].concat(e))},function(d){m(["rejected",d].concat(e))},function(d){m(["progress",d].concat(e))});return this};f.prototype.traceRejected=function(){var e=g._toArray(arguments);this.otherwise(function(d){m(["rejected",d].concat(e))});return this};return k});
define(["./tracer","../has","../_base/lang","../_base/array"],function(g,f,n,m){function k(b,c,a){var d="";b&&b.stack&&(d+=b.stack);c&&c.stack&&(d+="\n    ----------------------------------------\n    rejected"+c.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));a&&a.stack&&(d+="\n    ----------------------------------------\n"+a.stack);console.error(b,d)}function e(b,c,a,d){c||k(b,a,d)}function l(e,f,a,g){f?m.some(c,function(a,b){if(a.error===e)return c.splice(b,1),!0}):m.some(c,function(a){return a.error===
e})||c.push({error:e,rejection:a,deferred:g,timestamp:(new Date).getTime()});b||(b=setTimeout(d,p))}function d(){var e=(new Date).getTime(),f=e-p;c=m.filter(c,function(a){return a.timestamp<f?(k(a.error,a.rejection,a.deferred),!1):!0});b=c.length?setTimeout(d,c[0].timestamp+p-e):!1}var c=[],b=!1,p=1E3;return function(b){var c=f("config-useDeferredInstrumentation");if(c){g.on("resolved",n.hitch(console,"log","resolved"));g.on("rejected",n.hitch(console,"log","rejected"));g.on("progress",n.hitch(console,
"log","progress"));var a=[];"string"===typeof c&&(a=c.split(","),c=a.shift());if("report-rejections"===c)b.instrumentRejected=e;else if("report-unhandled-rejections"===c||!0===c||1===c)b.instrumentRejected=l,p=parseInt(a[0],10)||p;else throw Error("Unsupported instrumentation usage <"+c+">");}}});
define(["../_base/lang"],function(g){function f(){throw new TypeError("abstract");}return g.extend(function(){},{then:function(g,m,k){f()},cancel:function(g,m){f()},isResolved:function(){f()},isRejected:function(){f()},isFulfilled:function(){f()},isCanceled:function(){f()},always:function(f){return this.then(f,f)},otherwise:function(f){return this.then(null,f)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})});
define(["../_base/lang"],function(g){return function(f,n,m,k){m=m||Error;var e=function(f){if(m===Error){Error.captureStackTrace&&Error.captureStackTrace(this,e);var d=Error.call(this,f),c;for(c in d)d.hasOwnProperty(c)&&(this[c]=d[c]);this.message=f;this.stack=d.stack}else m.apply(this,arguments);n&&n.apply(this,arguments)};e.prototype=g.delegate(m.prototype,k);e.prototype.name=f;return e.prototype.constructor=e}});define(["./create"],function(g){return g("CancelError",null,null,{dojoType:"cancel"})});
define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(g,f,n,m,k){var e=Object.freeze||function(){},l=function(b,c,a,e,f){g("config-deferredInstrumentation")&&2===c&&p.instrumentRejected&&0===b.length&&p.instrumentRejected(a,!1,e,f);for(f=0;f<b.length;f++)d(b[f],c,a,e)},d=function(d,e,a,f){var k=d[e],l=d.deferred;if(k)try{var m=k(a);if(0===e)"undefined"!==typeof m&&b(l,e,m);else{if(m&&"function"===typeof m.then){d.cancel=
m.cancel;m.then(c(l,1),c(l,2),c(l,0));return}b(l,1,m)}}catch(n){b(l,2,n)}else b(l,e,a);g("config-deferredInstrumentation")&&2===e&&p.instrumentRejected&&p.instrumentRejected(a,!!k,f,l.promise)},c=function(c,d){return function(a){b(c,d,a)}},b=function(b,c,a){if(!b.isCanceled())switch(c){case 0:b.progress(a);break;case 1:b.resolve(a);break;case 2:b.reject(a)}},p=function(b){var c=this.promise=new m,a=this,f,k,v,x=!1,C=[];g("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(a,
p),Error.captureStackTrace(c,p));this.isResolved=c.isResolved=function(){return 1===f};this.isRejected=c.isRejected=function(){return 2===f};this.isFulfilled=c.isFulfilled=function(){return!!f};this.isCanceled=c.isCanceled=function(){return x};this.progress=function(b,d){if(f){if(!0===d)throw Error("This deferred has already been fulfilled.");return c}l(C,0,b,null,a);return c};this.resolve=function(b,d){if(f){if(!0===d)throw Error("This deferred has already been fulfilled.");return c}l(C,f=1,k=b,
null,a);C=null;return c};var y=this.reject=function(b,d){if(f){if(!0===d)throw Error("This deferred has already been fulfilled.");return c}g("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(v={},y);l(C,f=2,k=b,v,a);C=null;return c};this.then=c.then=function(a,b,e){var g=[e,a,b];g.cancel=c.cancel;g.deferred=new p(function(a){return g.cancel&&g.cancel(a)});f&&!C?d(g,f,k,v):C.push(g);return g.deferred.promise};this.cancel=c.cancel=function(a,c){if(!f){if(b){var d=b(a);
a="undefined"===typeof d?a:d}x=!0;if(!f)return"undefined"===typeof a&&(a=new n),y(a),a;if(2===f&&k===a)return a}else if(!0===c)throw Error("This deferred has already been fulfilled.");};e(c)};p.prototype.toString=function(){return"[object Deferred]"};k&&k(p);return p});
define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(g,f,n,m,k,e,l){var d=function(){},c=Object.freeze||function(){},b=g.Deferred=function(g){function l(b){if(q)throw Error("This deferred has already been resolved");a=b;q=!0;u()}function u(){for(var b;!b&&y;){var c=y;y=y.next;if(b=c.progress==d)q=!1;var g=x?c.error:c.resolved;k("config-useDeferredInstrumentation")&&x&&f.instrumentRejected&&f.instrumentRejected(a,!!g);if(g)try{var l=g(a);
l&&"function"===typeof l.then?l.then(e.hitch(c.deferred,"resolve"),e.hitch(c.deferred,"reject"),e.hitch(c.deferred,"progress")):(g=b&&void 0===l,b&&!g&&(x=l instanceof Error),c.deferred[g&&x?"reject":"resolve"](g?a:l))}catch(m){c.deferred.reject(m)}else x?c.deferred.reject(a):c.deferred.resolve(a)}}var a,q,t,v,x,C,y,z=this.promise=new n;this.isResolved=z.isResolved=function(){return 0==v};this.isRejected=z.isRejected=function(){return 1==v};this.isFulfilled=z.isFulfilled=function(){return 0<=v};this.isCanceled=
z.isCanceled=function(){return t};this.resolve=this.callback=function(a){this.fired=v=0;this.results=[a,null];l(a)};this.reject=this.errback=function(a){x=!0;this.fired=v=1;k("config-useDeferredInstrumentation")&&f.instrumentRejected&&f.instrumentRejected(a,!!y);l(a);this.results=[null,a]};this.progress=function(a){for(var b=y;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,d);return this};z.then=this.then=function(a,c,e){var f=e==d?this:new b(z.cancel);a={resolved:a,
error:c,progress:e,deferred:f};y?C=C.next=a:y=C=a;q&&u();return f.promise};var D=this;z.cancel=this.cancel=function(){if(!q){var a=g&&g(D);q||(a instanceof Error||(a=new m(a)),a.log=!1,D.reject(a))}t=!0};c(z)};e.extend(b,{addCallback:function(b){return this.addCallbacks(e.hitch.apply(g,arguments))},addErrback:function(b){return this.addCallbacks(null,e.hitch.apply(g,arguments))},addBoth:function(b){var c=e.hitch.apply(g,arguments);return this.addCallbacks(c,c)},fired:-1});b.when=g.when=l;return b});
define(["./_base/kernel","./sniff"],function(g,f){return g.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:f("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,
NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:f("mac")&&!f("air")?f("safari")?91:224:17}});
define(["./kernel","./lang","../sniff"],function(g,f,n){if(!n("host-browser"))return n;g._name="browser";f.mixin(g,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")});return n});
define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(g,f,n,m,k){function e(g,d){var c=function(b,c){return f(b,g,function(e){if(d)return d(e,c);if(!m.isDescendant(e.relatedTarget,b))return c.call(this,e)})};c.bubble=function(b){return e(g,function(c,d){var e=b(c.target),a=c.relatedTarget;if(e&&e!=(a&&1==a.nodeType&&b(a)))return d.call(e,c)})};return c}n.add("dom-quirks",k.doc&&"BackCompat"==k.doc.compatMode);n.add("events-mouseenter",k.doc&&"onmouseenter"in k.doc.createElement("div"));
n.add("events-mousewheel",k.doc&&"onmousewheel"in k.doc);k=n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,d){return e.button&d},isLeft:function(e){return e.button&1},isMiddle:function(e){return e.button&4},isRight:function(e){return e.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,d){return e.button==d},isLeft:function(e){return 0==e.button},isMiddle:function(e){return 1==e.button},isRight:function(e){return 2==e.button}};g.mouseButtons=
k;g=n("events-mousewheel")?"mousewheel":function(e,d){return f(e,"DOMMouseScroll",function(c){c.wheelDelta=-c.detail;d.call(this,c)})};return{_eventHandler:e,enter:e("mouseover"),leave:e("mouseout"),wheel:g,isLeft:k.isLeft,isMiddle:k.isMiddle,isRight:k.isRight}});
define(["./sniff","./dom"],function(g,f){function n(c,a,d){a=a.toLowerCase();if(g("ie")){if("auto"==d){if("height"==a)return c.offsetHeight;if("width"==a)return c.offsetWidth}if("fontweight"==a)switch(d){case 700:return"bold";default:return"normal"}}a in b||(b[a]=p.test(a));return b[a]?e(c,d):d}var m,k={};m=g("webkit")?function(b){var a;if(1==b.nodeType){var c=b.ownerDocument.defaultView;a=c.getComputedStyle(b,null);!a&&b.style&&(b.style.display="",a=c.getComputedStyle(b,null))}return a||{}}:g("ie")&&
(9>g("ie")||g("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){return 1==b.nodeType?b.ownerDocument.defaultView.getComputedStyle(b,null):{}};k.getComputedStyle=m;var e;e=g("ie")?function(b,a){if(!a)return 0;if("medium"==a)return 4;if(a.slice&&"px"==a.slice(-2))return parseFloat(a);var c=b.style,d=b.runtimeStyle,e=c.left,f=d.left;d.left=b.currentStyle.left;try{c.left=a,a=c.pixelLeft}catch(g){a=0}c.left=e;d.left=f;return a}:function(b,a){return parseFloat(a)||
0};k.toPixelValue=e;var l=function(b,a){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return a?{}:null}},d=9>g("ie")||10>g("ie")&&g("quirks")?function(b){try{return l(b).Opacity/100}catch(a){return 1}}:function(b){return m(b).opacity},c=9>g("ie")||10>g("ie")&&g("quirks")?function(b,a){""===a&&(a=1);var d=100*a;1===a?(b.style.zoom="",l(b)&&(b.style.filter=b.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(b.style.zoom=1,l(b)?l(b,1).Opacity=
d:b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+d+")",l(b,1).Enabled=!0);if("tr"==b.tagName.toLowerCase())for(d=b.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&c(d,a);return a}:function(b,a){return b.style.opacity=a},b={left:!0,top:!0},p=/margin|padding|width|height|max|min|offset/,r={cssFloat:1,styleFloat:1,"float":1};k.get=function(b,a){var c=f.byId(b),e=arguments.length;if(2==e&&"opacity"==a)return d(c);a=r[a]?"cssFloat"in c.style?"cssFloat":"styleFloat":a;var g=
k.getComputedStyle(c);return 1==e?g:n(c,a,g[a]||c.style[a])};k.set=function(b,a,d){var e=f.byId(b),g=arguments.length,l="opacity"==a;a=r[a]?"cssFloat"in e.style?"cssFloat":"styleFloat":a;if(3==g)return l?c(e,d):e.style[a]=d;for(var m in a)k.set(b,m,a[m]);return k.getComputedStyle(e)};return k});
define(["./sniff","./_base/window"],function(g,f){if(7>=g("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}var m={};g("ie")?m.byId=function(e,g){if("string"!=typeof e)return e;var d=g||f.doc,c=e&&d.getElementById(e);if(!c||c.attributes.id.value!=e&&c.id!=e){d=d.all[e];if(!d||d.nodeName)d=[d];for(var b=0;c=d[b++];)if(c.attributes&&c.attributes.id&&c.attributes.id.value==e||c.id==e)return c}else return c}:m.byId=function(e,g){return("string"==typeof e?(g||f.doc).getElementById(e):
e)||null};m.isDescendant=function(e,f){try{for(e=m.byId(e),f=m.byId(f);e;){if(e==f)return!0;e=e.parentNode}}catch(d){}return!1};g.add("css-user-select",function(e,f,d){if(!d)return!1;e=d.style;f=["Khtml","O","ms","Moz","Webkit"];d=f.length;var c="userSelect";do if("undefined"!==typeof e[c])return c;while(d--&&(c=f[d]+"UserSelect"));return!1});var k=g("css-user-select");m.setSelectable=k?function(e,f){m.byId(e).style[k]=f?"":"none"}:function(e,f){e=m.byId(e);var d=e.getElementsByTagName("*"),c=d.length;
if(f)for(e.removeAttribute("unselectable");c--;)d[c].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");c--;)d[c].setAttribute("unselectable","on")};return m});
define(["./kernel","./lang","../sniff"],function(g,f,n){var m={global:g.global,doc:this.document||null,body:function(f){f=f||g.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(f,e){g.global=m.global=f;g.doc=m.doc=e},withGlobal:function(f,e,l,d){var c=g.global;try{return g.global=m.global=f,m.withDoc.call(null,f.document,e,l,d)}finally{g.global=m.global=c}},withDoc:function(f,e,l,d){var c=m.doc,b=n("quirks"),p=n("ie"),r,u,a;try{return g.doc=m.doc=f,g.isQuirks=n.add("quirks",
"BackCompat"==g.doc.compatMode,!0,!0),n("ie")&&(a=f.parentWindow)&&a.navigator&&(r=parseFloat(a.navigator.appVersion.split("MSIE ")[1])||void 0,(u=f.documentMode)&&5!=u&&Math.floor(r)!=u&&(r=u),g.isIE=n.add("ie",r,!0,!0)),l&&"string"==typeof e&&(e=l[e]),e.apply(l,d||[])}finally{g.doc=m.doc=c,g.isQuirks=n.add("quirks",b,!0,!0),g.isIE=n.add("ie",p,!0,!0)}}};n("extend-dojo")&&f.mixin(g,m);return m});
define(["./sniff","./_base/window","./dom","./dom-style"],function(g,f,n,m){function k(b,c,d,e,a,f){f=f||"px";b=b.style;isNaN(c)||(b.left=c+f);isNaN(d)||(b.top=d+f);0<=e&&(b.width=e+f);0<=a&&(b.height=a+f)}function e(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function l(b){return"border-box"==d.boxModel||"table"==b.tagName.toLowerCase()||e(b)}var d={boxModel:"content-box"};g("ie")&&(d.boxModel="BackCompat"==document.compatMode?
"border-box":"content-box");d.getPadExtents=function(b,c){b=n.byId(b);var d=c||m.getComputedStyle(b),e=m.toPixelValue,a=e(b,d.paddingLeft),f=e(b,d.paddingTop),g=e(b,d.paddingRight),d=e(b,d.paddingBottom);return{l:a,t:f,r:g,b:d,w:a+g,h:f+d}};d.getBorderExtents=function(b,c){b=n.byId(b);var d=m.toPixelValue,e=c||m.getComputedStyle(b),a="none"!=e.borderLeftStyle?d(b,e.borderLeftWidth):0,f="none"!=e.borderTopStyle?d(b,e.borderTopWidth):0,g="none"!=e.borderRightStyle?d(b,e.borderRightWidth):0,d="none"!=
e.borderBottomStyle?d(b,e.borderBottomWidth):0;return{l:a,t:f,r:g,b:d,w:a+g,h:f+d}};d.getPadBorderExtents=function(b,c){b=n.byId(b);var e=c||m.getComputedStyle(b),f=d.getPadExtents(b,e),e=d.getBorderExtents(b,e);return{l:f.l+e.l,t:f.t+e.t,r:f.r+e.r,b:f.b+e.b,w:f.w+e.w,h:f.h+e.h}};d.getMarginExtents=function(b,c){b=n.byId(b);var d=c||m.getComputedStyle(b),e=m.toPixelValue,a=e(b,d.marginLeft),f=e(b,d.marginTop),g=e(b,d.marginRight),d=e(b,d.marginBottom);return{l:a,t:f,r:g,b:d,w:a+g,h:f+d}};d.getMarginBox=
function(b,c){b=n.byId(b);var e=c||m.getComputedStyle(b),f=d.getMarginExtents(b,e),a=b.offsetLeft-f.l,k=b.offsetTop-f.t,l=b.parentNode,v=m.toPixelValue;if(g("mozilla")){var x=parseFloat(e.left),e=parseFloat(e.top);isNaN(x)||isNaN(e)?l&&l.style&&(l=m.getComputedStyle(l),"visible"!=l.overflow&&(a+="none"!=l.borderLeftStyle?v(b,l.borderLeftWidth):0,k+="none"!=l.borderTopStyle?v(b,l.borderTopWidth):0)):(a=x,k=e)}else(g("opera")||8==g("ie")&&!g("quirks"))&&l&&(l=m.getComputedStyle(l),a-="none"!=l.borderLeftStyle?
v(b,l.borderLeftWidth):0,k-="none"!=l.borderTopStyle?v(b,l.borderTopWidth):0);return{l:a,t:k,w:b.offsetWidth+f.w,h:b.offsetHeight+f.h}};d.getContentBox=function(b,c){b=n.byId(b);var e=c||m.getComputedStyle(b),f=b.clientWidth,a=d.getPadExtents(b,e),k=d.getBorderExtents(b,e);f?(e=b.clientHeight,k.w=k.h=0):(f=b.offsetWidth,e=b.offsetHeight);g("opera")&&(a.l+=k.l,a.t+=k.t);return{l:a.l,t:a.t,w:f-a.w-k.w,h:e-a.h-k.h}};d.setContentSize=function(b,c,e){b=n.byId(b);var f=c.w;c=c.h;l(b)&&(e=d.getPadBorderExtents(b,
e),0<=f&&(f+=e.w),0<=c&&(c+=e.h));k(b,NaN,NaN,f,c)};var c={l:0,t:0,w:0,h:0};d.setMarginBox=function(b,f,r){b=n.byId(b);var u=r||m.getComputedStyle(b);r=f.w;var a=f.h,q=l(b)?c:d.getPadBorderExtents(b,u),u=d.getMarginExtents(b,u);if(g("webkit")&&e(b)){var t=b.style;0<=r&&!t.width&&(t.width="4px");0<=a&&!t.height&&(t.height="4px")}0<=r&&(r=Math.max(r-q.w-u.w,0));0<=a&&(a=Math.max(a-q.h-u.h,0));k(b,f.l,f.t,r,a)};d.isBodyLtr=function(b){b=b||f.doc;return"ltr"==(f.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};
d.docScroll=function(b){b=b||f.doc;var c=f.doc.parentWindow||f.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=g("quirks")?f.body(b):b.documentElement)&&{x:d.fixIeBiDiScrollLeft(c.scrollLeft||0,b),y:c.scrollTop||0}};g("ie")&&(d.getIeDocumentElementOffset=function(b){b=b||f.doc;b=b.documentElement;if(8>g("ie")){var c=b.getBoundingClientRect(),d=c.left,c=c.top;7>g("ie")&&(d+=b.clientLeft,c+=b.clientTop);return{x:0>d?0:d,y:0>c?0:c}}return{x:0,y:0}});d.fixIeBiDiScrollLeft=
function(b,c){c=c||f.doc;var e=g("ie");if(e&&!d.isBodyLtr(c)){var k=g("quirks"),a=k?f.body(c):c.documentElement,l=f.global;6==e&&!k&&l.frameElement&&a.scrollHeight>a.clientHeight&&(b+=a.clientLeft);return 8>e||k?b+a.clientWidth-a.scrollWidth:-b}return b};d.position=function(b,c){b=n.byId(b);var e=f.body(b.ownerDocument),k=b.getBoundingClientRect(),k={x:k.left,y:k.top,w:k.right-k.left,h:k.bottom-k.top};if(9>g("ie")){var a=d.getIeDocumentElementOffset(b.ownerDocument);k.x-=a.x+(g("quirks")?e.clientLeft+
e.offsetLeft:0);k.y-=a.y+(g("quirks")?e.clientTop+e.offsetTop:0)}c&&(e=d.docScroll(b.ownerDocument),k.x+=e.x,k.y+=e.y);return k};d.getMarginSize=function(b,c){b=n.byId(b);var e=d.getMarginExtents(b,c||m.getComputedStyle(b)),f=b.getBoundingClientRect();return{w:f.right-f.left+e.w,h:f.bottom-f.top+e.h}};d.normalizeEvent=function(b){"layerX"in b||(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!g("dom-addeventlistener")){var c=b.target,c=c&&c.ownerDocument||document,e=g("quirks")?c.body:c.documentElement,
f=d.getIeDocumentElementOffset(c);b.pageX=b.clientX+d.fixIeBiDiScrollLeft(e.scrollLeft||0,c)-f.x;b.pageY=b.clientY+(e.scrollTop||0)-f.y}};return d});
define(["./kernel","../on","../has","../dom-geometry"],function(g,f,n,m){if(f._fixEvent){var k=f._fixEvent;f._fixEvent=function(e,d){(e=k(e,d))&&m.normalizeEvent(e);return e}}var e={fix:function(e,d){return f._fixEvent?f._fixEvent(e,d):e},stop:function(e){n("dom-addeventlistener")||e&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e=e||window.event,e.cancelBubble=!0,f._preventDefault.call(e))}};n("extend-dojo")&&(g.fixEvent=e.fix,g.stopEvent=e.stop);return e});
define([],function(){function g(d,c,b,e){var f=d[c],g="around"==c,a;if(g){var k=b(function(){return f.advice(this,arguments)});a={remove:function(){k&&(k=d=b=null)},advice:function(a,b){return k?k.apply(a,b):f.advice(a,b)}}}else a={remove:function(){if(a.advice){var e=a.previous,f=a.next;f||e?(e?e.next=f:d[c]=f,f&&(f.previous=e)):delete d[c];d=b=a.advice=null}},id:m++,advice:b,receiveArguments:e};if(f&&!g)if("after"==c){for(;f.next&&(f=f.next););f.next=a;a.previous=f}else"before"==c&&(d[c]=a,a.next=
f,f.previous=a);else d[c]=a;return a}function f(d){return function(c,b,e,f){var k=c[b],a;k&&k.target==c||(c[b]=a=function(){for(var b=m,c=arguments,d=a.before;d;)c=d.advice.apply(this,c)||c,d=d.next;if(a.around)var e=a.around.advice(this,c);for(d=a.after;d&&d.id<b;){if(d.receiveArguments)var f=d.advice.apply(this,c),e=f===n?e:f;else e=d.advice.call(this,e,c);d=d.next}return e},k&&(a.around={advice:function(a,b){return k.apply(a,b)}}),a.target=c);c=g(a||k,d,e,f);e=null;return c}}var n,m=0,k=f("after"),
e=f("before"),l=f("around");return{before:e,around:l,after:k}});define(["./aspect","./on"],function(g,f){function n(){}var m=g.after;n.prototype={on:function(g,e){return f.parse(this,g,e,function(f,d){return m(f,"on"+d,e,!0)})},emit:function(g,e){var l=[this];l.push.apply(l,arguments);return f.emit.apply(f,l)}};return n});define(["./Evented"],function(g){var f=new g;return{publish:function(g,m){return f.emit.apply(f,arguments)},subscribe:function(g,m){return f.on.apply(f,arguments)}}});
define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(g,f,n){function m(b,e,f,g,k){if(g=e.match(/(.*):(.*)/))return e=g[2],g=g[1],d.selector(g,e).call(k,b,f);n("touch")&&(c.test(e)&&(f=F(f)),n("event-orientationchange")||"orientationchange"!=e||(e="resize",b=window,f=F(f)));a&&(f=a(f));if(b.addEventListener){var l=e in r,m=l?r[e]:e;b.addEventListener(m,f,l);return{remove:function(){b.removeEventListener(m,f,l)}}}if(x&&b.attachEvent)return x(b,"on"+e,f);throw Error("Target must be an event emitter");
}function k(){this.cancelable=!1;this.defaultPrevented=!0}function e(){this.bubbles=!1}if(n("dom")){var l=window.ScriptEngineMajorVersion;n.add("jscript",l&&l()+ScriptEngineMinorVersion()/10);n.add("event-orientationchange",n("touch")&&!n("android"));n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);n.add("event-focusin",function(a,b,c){return!!c.attachEvent})}var d=function(a,b,c,e){return"function"!=typeof a.on||"function"==
typeof b||a.nodeType?d.parse(a,b,c,m,e,this):a.on(b,c)};d.pausable=function(a,b,c,e){var f;a=d(a,b,function(){if(!f)return c.apply(this,arguments)},e);a.pause=function(){f=!0};a.resume=function(){f=!1};return a};d.once=function(a,b,c,e){var f=d(a,b,function(){f.remove();return c.apply(this,arguments)});return f};d.parse=function(a,b,c,d,e,f){if(b.call)return b.call(f,a,c);if(-1<b.indexOf(",")){b=b.split(/\s*,\s*/);for(var g=[],k=0,l;l=b[k++];)g.push(d(a,l,c,e,f));g.remove=function(){for(var a=0;a<
g.length;a++)g[a].remove()};return g}return d(a,b,c,e,f)};var c=/^touch/;d.selector=function(a,b,c){return function(e,g){function k(b){for(l=l&&l.matches?l:f.query;!l.matches(b,a,e);)if(b==e||!1===c||!(b=b.parentNode)||1!=b.nodeType)return;return b}var l="function"==typeof a?{matches:a}:this,m=b.bubble;return m?d(e,m(k),g):d(e,b,function(a){var b=k(a.target);return b&&g.call(b,a)})}};var b=[].slice,p=d.emit=function(a,c,d){var f=b.call(arguments,2),g="on"+c;if("parentNode"in a){var l=f[0]={},m;for(m in d)l[m]=
d[m];l.preventDefault=k;l.stopPropagation=e;l.target=a;l.type=c;d=l}do a[g]&&a[g].apply(a,f);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},r=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var u=function(){this.modified=this.immediatelyStopped=!0},a=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=u,a.apply(this,arguments)}};if(n("dom-addeventlistener"))d.emit=function(a,b,c){if(a.dispatchEvent&&
document.createEvent){var e=a.ownerDocument.createEvent("HTMLEvents");e.initEvent(b,!!c.bubbles,!!c.cancelable);for(var f in c)f in e||(e[f]=c[f]);return a.dispatchEvent(e)&&e}return p.apply(d,arguments)};else{d._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{q&&a.type==q.type&&a.srcElement==q.target&&(a=q)}catch(c){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),
"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=C,a.preventDefault=y),a.type){case "keypress":var d="charCode"in a?a.charCode:a.keyCode;10==d?(d=0,a.keyCode=13):13==d||27==d?d=0:3==d&&(d=99);a.charCode=d;d=a;d.keyChar=d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}return a};var q,t=function(a){this.handle=a};t.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var v=function(a){return function(b){b=d._fixEvent(b,
this);var c=a.call(this,b);b.modified&&(q||setTimeout(function(){q=null}),q=b);return c}},x=function(a,b,c){c=v(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>n("jscript"))&&!n("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var d=a[b];if(!d||!d.listeners){var e=d,d=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
d.listeners=[];a[b]=d;d.global=this;e&&d.listeners.push(_dojoIEListeners_.push(e)-1)}d.listeners.push(a=d.global._dojoIEListeners_.push(c)-1);return new t(a)}return g.after(a,b,c,!0)},C=function(){this.cancelBubble=!0},y=d._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(n("touch"))var z=function(){},D=window.orientation,F=function(a){return function(b){var c=b.corrected;if(!c){var d=
b.type;try{delete b.type}catch(e){}if(b.type){if(n("mozilla")){var c={},f;for(f in b)c[f]=b[f]}else z.prototype=b,c=new z;c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=b,c.type=d;b.corrected=c;if("resize"==d){if(D==window.orientation)return null;D=window.orientation;c.type="orientationchange";return a.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);var d=c.changedTouches[0],g;for(g in d)delete c[g],c[g]=d[g]}return a.call(this,c)}};
return d});
define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(g,f,n,m,k,e,l,d){function c(b,c,k,l,n){l=d.hitch(k,l);if(!b||!b.addEventListener&&!b.attachEvent)return m.after(b||g.global,c,l,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));b||(b=g.global);if(!n)switch(c){case "keypress":c=a;break;case "mouseenter":c=e.enter;break;case "mouseleave":c=e.leave}return f(b,c,l,n)}function b(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";
a.charOrCode=a.keyChar||a.keyCode}l.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!l("opera")});var p={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},r=l("mac")?"metaKey":"ctrlKey",u=function(a,c){var e=d.mixin({},a,c);b(e);e.preventDefault=function(){a.preventDefault()};e.stopPropagation=
function(){a.stopPropagation()};return e},a;a=l("events-keypress-typed")?function(a,b){var c=f(a,"keydown",function(a){var c=a.keyCode,d=13!=c&&32!=c&&(27!=c||!l("ie"))&&(48>c||90<c)&&(96>c||111<c)&&(186>c||192<c)&&(219>c||222<c)&&229!=c;if(d||a.ctrlKey){d=d?0:c;if(a.ctrlKey){if(3==c||13==c)return b.call(a.currentTarget,a);d=95<d&&106>d?d-48:!a.shiftKey&&65<=d&&90>=d?d+32:p[d]||d}c=u(a,{type:"keypress",faux:!0,charCode:d});b.call(a.currentTarget,c);if(l("ie"))try{a.keyCode=c.keyCode}catch(e){}}}),
d=f(a,"keypress",function(a){var c=a.charCode;a=u(a,{charCode:32<=c?c:0,faux:!0});return b.call(this,a)});return{remove:function(){c.remove();d.remove()}}}:l("opera")?function(a,b){return f(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,u(a,{charCode:c}))})}:function(a,c){return f(a,"keypress",function(a){b(a);return c.call(this,a)})};var q={_keypress:a,connect:function(a,b,d,e,f){var g=arguments,k=[],l=
0;k.push("string"==typeof g[0]?null:g[l++],g[l++]);var m=g[l+1];k.push("string"==typeof m||"function"==typeof m?g[l++]:null,g[l++]);for(m=g.length;l<m;l++)k.push(g[l]);return c.apply(this,k)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return n.subscribe(a,d.hitch(b,c))},publish:function(a,b){return n.publish.apply(n,[a].concat(b))},connectPublisher:function(a,b,c){var d=function(){q.publish(a,arguments)};return c?q.connect(b,c,d):q.connect(b,d)},isCopyKey:function(a){return a[r]}};
q.unsubscribe=q.disconnect;l("extend-dojo")&&d.mixin(g,q);return q});
define(["./kernel","../has","./lang"],function(g,f,n){function m(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function k(a,b,c){var d,e,f,g,k,l,n,q=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=b,b=c);c=0;g=a.callee;(d=d||g.nom)||m("can't deduce a name to call inherited()",this.declaredClass);k=this.constructor._meta;f=k.bases;n=q.p;if(d!=H){if(q.c!==g&&(n=0,l=f[0],k=l._meta,k.hidden[d]!==g)){(e=k.chains)&&"string"==typeof e[d]&&m("calling chained method with inherited: "+d,this.declaredClass);
do if(k=l._meta,e=l.prototype,k&&(e[d]===g&&e.hasOwnProperty(d)||k.hidden[d]===g))break;while(l=f[++n]);n=l?n:-1}if(l=f[++n])if(e=l.prototype,l._meta&&e.hasOwnProperty(d))c=e[d];else{g=y[d];do if(e=l.prototype,(c=e[d])&&(l._meta?e.hasOwnProperty(d):c!==g))break;while(l=f[++n])}c=l&&c||y[d]}else{if(q.c!==g&&(n=0,(k=f[0]._meta)&&k.ctor!==g)){for((e=k.chains)&&"manual"===e.constructor||m("calling chained constructor with inherited",this.declaredClass);(l=f[++n])&&(!(k=l._meta)||k.ctor!==g););n=l?n:-1}for(;(l=
f[++n])&&!(c=(k=l._meta)?k.ctor:l););c=l&&c}q.c=c;q.p=n;if(c)return!0===b?c:c.apply(this,b||a)}function e(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function l(a,b,c){var d=this.getInherited(a,b);if(d)return d.apply(this,c||b||a)}function d(a){for(var b=this.constructor._meta.bases,c=0,d=b.length;c<d;++c)if(b[c]===a)return!0;return this instanceof a}function c(a,b){for(var c in b)c!=H&&b.hasOwnProperty(c)&&(a[c]=b[c]);if(f("bug-for-in-skips-shadowed"))for(var d=
n._extraNames,e=d.length;e;)c=d[--e],c!=H&&b.hasOwnProperty(c)&&(a[c]=b[c])}function b(a){x.safeMixin(this.prototype,a);return this}function p(a,b){return x([this].concat(a),b||{})}function r(a,b){return function(){var c=arguments,d=c,e=c[0],f,g;g=a.length;var k;if(!(this instanceof c.callee))return v(c);if(b&&(e&&e.preamble||this.preamble))for(k=Array(a.length),k[0]=c,f=0;;){(e=c[0])&&(e=e.preamble)&&(c=e.apply(this,c)||c);e=a[f].prototype;(e=e.hasOwnProperty("preamble")&&e.preamble)&&(c=e.apply(this,
c)||c);if(++f==g)break;k[f]=c}for(f=g-1;0<=f;--f)e=a[f],(e=(g=e._meta)?g.ctor:e)&&e.apply(this,k?k[f]:c);(e=this.postscript)&&e.apply(this,d)}}function u(a,b){return function(){var c=arguments,d=c,e=c[0];if(!(this instanceof c.callee))return v(c);b&&(e&&(e=e.preamble)&&(d=e.apply(this,d)||d),(e=this.preamble)&&e.apply(this,d));a&&a.apply(this,c);(e=this.postscript)&&e.apply(this,c)}}function a(a){return function(){var b=arguments,c=0,d,e;if(!(this instanceof b.callee))return v(b);for(;d=a[c];++c)if(d=
(e=d._meta)?e.ctor:d){d.apply(this,b);break}(d=this.postscript)&&d.apply(this,b)}}function q(a,b,c){return function(){var d,e,f=0,g=1;c&&(f=b.length-1,g=-1);for(;d=b[f];f+=g)e=d._meta,(d=(e?e.hidden:d.prototype)[a])&&d.apply(this,arguments)}}function t(a){D.prototype=a.prototype;a=new D;D.prototype=null;return a}function v(a){var b=a.callee,c=t(b);b.apply(c,a);return c}function x(f,g,l){"string"!=typeof f&&(l=g,g=f,f="");l=l||{};var v,D,O,s,T,Q,U,N=1,V=g;if("[object Array]"==z.call(g)){N=f;O=[];s=
[{cls:0,refs:[]}];Q={};for(var P=1,aa=g.length,ea=0,ga,na,W,Z;ea<aa;++ea){(ga=g[ea])?"[object Function]"!=z.call(ga)&&m("mixin #"+ea+" is not a callable constructor.",N):m("mixin #"+ea+" is unknown. Did you use dojo.require to pull it in?",N);na=ga._meta?ga._meta.bases:[ga];W=0;for(ga=na.length-1;0<=ga;--ga)Z=na[ga].prototype,Z.hasOwnProperty("declaredClass")||(Z.declaredClass="uniqName_"+F++),Z=Z.declaredClass,Q.hasOwnProperty(Z)||(Q[Z]={count:0,refs:[],cls:na[ga]},++P),Z=Q[Z],W&&W!==Z&&(Z.refs.push(W),
++W.count),W=Z;++W.count;s[0].refs.push(W)}for(;s.length;){W=s.pop();O.push(W.cls);for(--P;D=W.refs,1==D.length;){W=D[0];if(!W||--W.count){W=0;break}O.push(W.cls);--P}if(W)for(ea=0,aa=D.length;ea<aa;++ea)W=D[ea],--W.count||s.push(W)}P&&m("can't build consistent linearization",N);ga=g[0];O[0]=ga?ga._meta&&ga===O[O.length-ga._meta.bases.length]?ga._meta.bases.length:1:0;Q=O;O=Q[0];N=Q.length-O;g=Q[N]}else Q=[0],g?"[object Function]"==z.call(g)?(O=g._meta,Q=Q.concat(O?O.bases:g)):m("base class is not a callable constructor.",
f):null!==g&&m("unknown base class. Did you use dojo.require to pull it in?",f);if(g)for(D=N-1;;--D){v=t(g);if(!D)break;O=Q[D];(O._meta?c:C)(v,O.prototype);s=new Function;s.superclass=g;s.prototype=v;g=v.constructor=s}else v={};x.safeMixin(v,l);O=l.constructor;O!==y.constructor&&(O.nom=H,v.constructor=O);for(D=N-1;D;--D)(O=Q[D]._meta)&&O.chains&&(U=C(U||{},O.chains));v["-chains-"]&&(U=C(U||{},v["-chains-"]));O=!U||!U.hasOwnProperty(H);Q[0]=s=U&&"manual"===U.constructor?a(Q):1==Q.length?u(l.constructor,
O):r(Q,O);s._meta={bases:Q,hidden:l,chains:U,parents:V,ctor:l.constructor};s.superclass=g&&g.prototype;s.extend=b;s.createSubclass=p;s.prototype=v;v.constructor=s;v.getInherited=e;v.isInstanceOf=d;v.inherited=M;v.__inherited=k;f&&(v.declaredClass=f,n.setObject(f,s));if(U)for(T in U)v[T]&&"string"==typeof U[T]&&T!=H&&(O=v[T]=q(T,Q,"after"===U[T]),O.nom=T);return s}var C=n.mixin,y=Object.prototype,z=y.toString,D=new Function,F=0,H="constructor",M=g.config.isDebug?l:k;g.safeMixin=x.safeMixin=function(a,
b){var c,d;for(c in b)d=b[c],d===y[c]&&c in y||c==H||("[object Function]"==z.call(d)&&(d.nom=c),a[c]=d);if(f("bug-for-in-skips-shadowed"))for(var e=n._extraNames,g=e.length;g;)c=e[--g],d=b[c],d===y[c]&&c in y||c==H||("[object Function]"==z.call(d)&&(d.nom=c),a[c]=d);return a};return g.declare=x});
define(["./has"],function(g){function f(a){c.push(a);d&&n()}function n(){if(!b){for(b=!0;c.length;)try{c.shift()(k)}catch(a){console.log("Error on domReady callback: "+a)}b=!1;f._onQEmpty()}}var m=this,k=document,e={loaded:1,complete:1},l="string"!=typeof k.readyState,d=!!e[k.readyState],c=[],b;f.load=function(a,b,c){f(c)};f._Q=c;f._onQEmpty=function(){};l&&(k.readyState="loading");if(!d){var p=[],r=function(a){a=a||m.event;d||"readystatechange"==a.type&&!e[k.readyState]||(l&&(k.readyState="complete"),
d=1,n())},u=function(a,b){a.addEventListener(b,r,!1);c.push(function(){a.removeEventListener(b,r,!1)})};if(!g("dom-addeventlistener")){var u=function(a,b){b="on"+b;a.attachEvent(b,r);c.push(function(){a.detachEvent(b,r)})},a=k.createElement("div");try{a.doScroll&&null===m.frameElement&&p.push(function(){try{return a.doScroll("left"),1}catch(b){}})}catch(q){}}u(k,"DOMContentLoaded");u(m,"load");"onreadystatechange"in k?u(k,"readystatechange"):l||p.push(function(){return e[k.readyState]});if(p.length){var t=
function(){if(!d){for(var a=p.length;a--;)if(p[a]()){r("poller");return}setTimeout(t,30)}};t()}}return f});
define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(g,f,n,m,k){var e=0,l=[],d=0,c=function(){e=1;g._postLoad=g.config.afterOnLoad=!0;b()},b=function(){if(!d){for(d=1;e&&(!m||0==m._Q.length)&&(n.idle?n.idle():1)&&l.length;){var b=l.shift();try{b()}catch(a){if(a.info=a.message,n.signal)n.signal("error",a);else throw a;}}d=0}};n.on&&n.on("idle",b);m&&(m._onQEmpty=b);var p=g.ready=g.addOnLoad=function(c,a,d){var e=k._toArray(arguments);"number"!=typeof c?
(d=a,a=c,c=1E3):e.shift();d=d?k.hitch.apply(g,e):function(){a()};d.priority=c;for(e=0;e<l.length&&c>=l[e].priority;e++);l.splice(e,0,d);b()};f.add("dojo-config-addOnLoad",1);if(f("dojo-config-addOnLoad")){var r=g.config.addOnLoad;if(r)p[k.isArray(r)?"apply":"call"](g,r)}f("dojo-sync-loader")&&g.config.parseOnLoad&&!g.isAsync&&p(99,function(){g.parser||(g.deprecated("Add explicit require(['dojo/parser']);","","2.0"),n(["dojo/parser"]))});m?m(c):c();return p});
define(["./kernel","../has","./lang"],function(g,f,n){function m(b){return l[b]=new Function("item","index","array",b)}function k(b){var c=!b;return function(d,e,a){var f=0,g=d&&d.length||0,k;g&&"string"==typeof d&&(d=d.split(""));"string"==typeof e&&(e=l[e]||m(e));if(a)for(;f<g;++f){if(k=!e.call(a,d[f],f,d),b^k)return!k}else for(;f<g;++f)if(k=!e(d[f],f,d),b^k)return!k;return c}}function e(b){var e=1,f=0,g=0;b||(e=f=g=-1);return function(a,k,l,m){if(m&&0<e)return c.lastIndexOf(a,k,l);m=a&&a.length||
0;var n=b?m+g:f;l===d?l=b?f:m+g:0>l?(l=m+l,0>l&&(l=f)):l=l>=m?m+g:l;for(m&&"string"==typeof a&&(a=a.split(""));l!=n;l+=e)if(a[l]==k)return l;return-1}}var l={},d,c={every:k(!1),some:k(!0),indexOf:e(!0),lastIndexOf:e(!1),forEach:function(b,c,d){var e=0,a=b&&b.length||0;a&&"string"==typeof b&&(b=b.split(""));"string"==typeof c&&(c=l[c]||m(c));if(d)for(;e<a;++e)c.call(d,b[e],e,b);else for(;e<a;++e)c(b[e],e,b)},map:function(b,c,d,e){var a=0,f=b&&b.length||0;e=new (e||Array)(f);f&&"string"==typeof b&&
(b=b.split(""));"string"==typeof c&&(c=l[c]||m(c));if(d)for(;a<f;++a)e[a]=c.call(d,b[a],a,b);else for(;a<f;++a)e[a]=c(b[a],a,b);return e},filter:function(b,c,d){var e=0,a=b&&b.length||0,f=[],g;a&&"string"==typeof b&&(b=b.split(""));"string"==typeof c&&(c=l[c]||m(c));if(d)for(;e<a;++e)g=b[e],c.call(d,g,e,b)&&f.push(g);else for(;e<a;++e)g=b[e],c(g,e,b)&&f.push(g);return f},clearCache:function(){l={}}};f("extend-dojo")&&n.mixin(g,c);return c});
define(["./kernel","../has","../sniff"],function(g,f){f.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var n=f("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],m=n.length,k=function(b,c,d){var e,a=0,f=g.global;if(!d)if(b.length){e=b[a++];try{d=g.scopeMap[e]&&g.scopeMap[e][1]}catch(k){}d=d||(e in f?f[e]:c?f[e]={}:void 0)}else return f;for(;d&&(e=b[a++]);)d=e in d?d[e]:
c?d[e]={}:void 0;return d},e=Object.prototype.toString,l=function(b,c,d){return(d||[]).concat(Array.prototype.slice.call(b,c||0))},d=/\{([^\}]+)\}/g,c={_extraNames:n,_mixin:function(b,c,d){var e,a,g,k={};for(e in c)a=c[e],e in b&&(b[e]===a||e in k&&k[e]===a)||(b[e]=d?d(a):a);if(f("bug-for-in-skips-shadowed")&&c)for(g=0;g<m;++g)e=n[g],a=c[e],e in b&&(b[e]===a||e in k&&k[e]===a)||(b[e]=d?d(a):a);return b},mixin:function(b,d){b||(b={});for(var e=1,f=arguments.length;e<f;e++)c._mixin(b,arguments[e]);
return b},setObject:function(b,c,d){var e=b.split(".");b=e.pop();return(d=k(e,!0,d))&&b?d[b]=c:void 0},getObject:function(b,c,d){return k(b.split("."),c,d)},exists:function(b,d){return void 0!==c.getObject(b,!1,d)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:function(b){return b&&(b instanceof Array||"array"==typeof b)},isFunction:function(b){return"[object Function]"===e.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||c.isArray(b)||
c.isFunction(b))},isArrayLike:function(b){return b&&void 0!==b&&!c.isString(b)&&!c.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(c.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!c.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,d){for(var e=1,f=arguments.length;e<f;e++)c._mixin(b.prototype,arguments[e]);return b},_hitchArgs:function(b,d){var e=c._toArray(arguments,2),f=c.isString(d);return function(){var a=c._toArray(arguments),k=f?(b||
g.global)[d]:d;return k&&k.apply(b||this,e.concat(a))}},hitch:function(b,d){if(2<arguments.length)return c._hitchArgs.apply(g,arguments);d||(d=b,b=null);if(c.isString(d)){b=b||g.global;if(!b[d])throw['lang.hitch: scope["',d,'"] is null (scope="',b,'")'].join("");return function(){return b[d].apply(b,arguments||[])}}return b?function(){return d.apply(b,arguments||[])}:d},delegate:function(){function b(){}return function(d,e){b.prototype=d;var f=new b;b.prototype=null;e&&c._mixin(f,e);return f}}(),
_toArray:f("ie")?function(){function b(b,c,d){d=d||[];for(c=c||0;c<b.length;c++)d.push(b[c]);return d}return function(c){return(c.item?b:l).apply(this,arguments)}}():l,partial:function(b){return c.hitch.apply(g,[null].concat(c._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||c.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var d,e,f;if(c.isArray(b))for(d=[],e=
0,f=b.length;e<f;++e)e in b&&d.push(c.clone(b[e]));else d=b.constructor?new b.constructor:{};return c._mixin(d,b,c.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,e,f){return b.replace(f||d,c.isFunction(e)?e:function(b,a){return c.getObject(a,!1,e)})}};f("extend-dojo")&&c.mixin(g,c);return c});
define(["./has"],function(g){if(g("host-browser")){var f=navigator,n=f.userAgent,f=f.appVersion,m=parseFloat(f);g.add("air",0<=n.indexOf("AdobeAIR"));g.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0);g.add("khtml",0<=f.indexOf("Konqueror")?m:void 0);g.add("webkit",parseFloat(n.split("WebKit/")[1])||void 0);g.add("chrome",parseFloat(n.split("Chrome/")[1])||void 0);g.add("safari",0<=f.indexOf("Safari")&&!g("chrome")?parseFloat(f.split("Version/")[1]):void 0);g.add("mac",0<=f.indexOf("Macintosh"));
g.add("quirks","BackCompat"==document.compatMode);if(n.match(/(iPhone|iPod|iPad)/)){var k=RegExp.$1.replace(/P/,"p"),e=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",e=parseFloat(e.replace(/_/,".").replace(/_/g,""));g.add(k,e);g.add("ios",e)}g.add("android",parseFloat(n.split("Android ")[1])||void 0);g.add("bb",(0<=n.indexOf("BlackBerry")||0<=n.indexOf("BB10"))&&parseFloat(n.split("Version/")[1])||void 0);g.add("svg","undefined"!==typeof SVGAngle);g("webkit")||(0<=n.indexOf("Opera")&&g.add("opera",9.8<=m?parseFloat(n.split("Version/")[1])||
m:m),0<=n.indexOf("Gecko")&&!g("khtml")&&!g("webkit")&&g.add("mozilla",m),g("mozilla")&&g.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!g("opera")&&(n=parseFloat(f.split("MSIE ")[1])||void 0,(f=document.documentMode)&&5!=f&&Math.floor(n)!=f&&(n=f),g.add("ie",n)),g.add("wii","undefined"!=typeof opera&&opera.wiiremote))}return g});
define(["../has","require"],function(g,f){var n={};if(g("dojo-config-api")){var m=f.rawConfig,k;for(k in m)n[k]=m[k]}else m=function(e,f,d){for(k in e)"has"!=k&&g.add(f+k,e[k],0,d)},n=g("dojo-loader")?f.rawConfig:this.dojoConfig||this.djConfig||{},m(n,"config",1),m(n.has,"",1);n.locale||"undefined"==typeof navigator||(n.locale=(navigator.language||navigator.userLanguage).toLowerCase());return n});
define(["../has","./config","require","module"],function(g,f,n,m){var k,e={},l={},d={config:f,global:this,dijit:e,dojox:l},e={dojo:["dojo",d],dijit:["dijit",e],dojox:["dojox",l]};m=n.map&&n.map[m.id.match(/[^\/]+/)[0]];for(k in m)e[k]?e[k][0]=m[k]:e[k]=[m[k],{}];for(k in e)m=e[k],m[1]._scopeName=m[0],f.noGlobals||(this[m[0]]=m[1]);d.scopeMap=e;d.baseUrl=d.config.baseUrl=n.baseUrl;d.isAsync=!g("dojo-loader")||n.async;d.locale=f.locale;m="$Rev: 43d05c6 $".match(/\d+/);d.version={major:1,minor:9,patch:1,
flag:"",revision:m?+m[0]:NaN,toString:function(){var b=d.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};g.add("extend-dojo",1);Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(d);g("host-rhino")?d.exit=function(b){quit(b)}:d.exit=function(){};g.add("dojo-guarantee-console",1);if(g("dojo-guarantee-console")){"undefined"!=typeof console||(console={});var e="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" "),
c;for(m=0;c=e[m++];)console[c]||function(){var b=c+"";console[b]="log"in console?function(){var c=Array.apply({},arguments);c.unshift(b+":");console.log(c.join(" "))}:function(){};console[b]._fake=!0}()}g.add("dojo-debug-messages",!!f.isDebug);d.deprecated=d.experimental=function(){};g("dojo-debug-messages")&&(d.deprecated=function(b,c,d){b="DEPRECATED: "+b;c&&(b+=" "+c);d&&(b+=" -- will be removed in version: "+d);console.warn(b)},d.experimental=function(b,c){var d="EXPERIMENTAL: "+b+" -- APIs subject to change without notice.";
c&&(d+=" "+c);console.warn(d)});g.add("dojo-modulePaths",1);if(g("dojo-modulePaths")&&f.modulePaths){d.deprecated("dojo.modulePaths","use paths configuration");m={};for(k in f.modulePaths)m[k.replace(/\./g,"/")]=f.modulePaths[k];n({paths:m})}g.add("dojo-moduleUrl",1);g("dojo-moduleUrl")&&(d.moduleUrl=function(b,c){d.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var e=null;b&&(e=n.toUrl(b.replace(/\./g,"/")+(c?"/"+c:"")+"/*.*").replace(/\/\*\.\*/,"")+(c?"":"/"));return e});d._hasResource=
{};return d});
define(["require","module"],function(g,f){var n=g.has||function(){};if(!n("dojo-has-api")){var m="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,k=this,e=m&&document,l=e&&e.createElement("DiV"),d=f.config&&f.config()||{},n=function(c){return"function"==typeof d[c]?d[c]=d[c](k,e,l):d[c]};n.cache=d;n.add=function(c,b,e,f){("undefined"==typeof d[c]||f)&&(d[c]=b);return e&&n(c)};n.add("host-browser",m);n.add("dom",
m);n.add("dojo-dom-ready-api",1);n.add("dojo-sniff",1)}n("host-browser")&&(n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||0<window.navigator.msMaxTouchPoints),n.add("device-width",screen.availWidth||innerWidth),m=document.createElement("form"),n.add("dom-attributes-explicit",0==m.attributes.length),n.add("dom-attributes-specified-flag",0<m.attributes.length&&40>m.attributes.length));n.clearElement=function(c){c.innerHTML="";return c};n.normalize=
function(c,b){var d=c.match(/[\?:]|[^:\?]*/g),e=0,f=function(a){var b=d[e++];if(":"==b)return 0;if("?"==d[e++]){if(!a&&n(b))return f();f(!0);return f(a)}return b||0};return(c=f())&&b(c)};n.load=function(c,b,d){c?b([c],d):d()};return n});
define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./has!host-browser?./_base/browser ./has!dojo-sync-loader?./_base/loader".split(" "),function(g,f,n,m,k,e,l,d){l.isDebug&&n(["./_firebug/firebug"]);f.add("dojo-config-require",1);if(f("dojo-config-require")){var c=l.require;c&&(c=e.map(k.isArray(c)?c:[c],function(b){return b.replace(/\./g,"/")}),
g.isAsync?n(c):d(1,function(){n(c)}))}return g});
CodeMirror.defineMode("javascript",function(g,f){function n(a,b){for(var c=!1,d;null!=(d=a.next());){if(d==b&&!c)return!1;c=!c&&"\\"==d}return c}function m(a,b,c){ya=a;Ha=c;return b}function k(a,b){var c=a.next();if('"'==c||"'"==c)return c=e(c),b.tokenize=c,c(a,b);if(/[\[\]{}\(\),;\:\.]/.test(c))return m(c);if("0"==c&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),m("number","number");if(/\d/.test(c)||"-"==c&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),m("number","number");if("/"==c){if(a.eat("*"))return c=
l,b.tokenize=c,c(a,b);if(a.eat("/"))return a.skipToEnd(),m("comment","comment");if("operator"==b.lastType||"keyword c"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType))return n(a,"/"),a.eatWhile(/[gimy]/),m("regexp","string-2");a.eatWhile(R);return m("operator",null,a.current())}if("#"==c)return a.skipToEnd(),m("error","error");if(R.test(c))return a.eatWhile(R),m("operator",null,a.current());a.eatWhile(/[\w\$_]/);var c=a.current(),d=ja.propertyIsEnumerable(c)&&ja[c];return d&&"."!=b.lastType?m(d.type,
d.style,c):m("variable","variable",c)}function e(a){return function(b,c){n(b,a)||(c.tokenize=k);return m("string","string")}}function l(a,b){for(var c=!1,d;d=a.next();){if("/"==d&&c){b.tokenize=k;break}c="*"==d}return m("comment","comment")}function d(a,b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function c(){for(var a=arguments.length-1;0<=a;a--)Y.cc.push(arguments[a])}function b(){c.apply(null,arguments);return!0}function p(a){function b(c){for(;c;c=
c.next)if(c.name==a)return!0;return!1}var c=Y.state;c.context?(Y.marked="def",b(c.localVars)||(c.localVars={name:a,next:c.localVars})):b(c.globalVars)||(c.globalVars={name:a,next:c.globalVars})}function r(){Y.state.context={prev:Y.state.context,vars:Y.state.localVars};Y.state.localVars=Ca}function u(){Y.state.localVars=Y.state.context.vars;Y.state.context=Y.state.context.prev}function a(a,b){var c=function(){var c=Y.state,e=c.indented;"stat"==c.lexical.type&&(e=c.lexical.indented);c.lexical=new d(e,
Y.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function q(){var a=Y.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function t(a){return function(d){return d==a?b():";"==a?c():b(arguments.callee)}}function v(d){return"var"==d?b(a("vardef"),T,t(";"),q):"keyword a"==d?b(a("form"),x,v,q):"keyword b"==d?b(a("form"),v,q):"{"==d?b(a("}"),S,q):";"==d?b():"if"==d?b(a("form"),x,v,q,U):"function"==d?b(ea):"for"==d?b(a("form"),t("("),a(")"),N,t(")"),
q,v,q):"variable"==d?b(a("stat"),M):"switch"==d?b(a("form"),x,a("}","switch"),t("{"),S,q,q):"case"==d?b(x,t(":")):"default"==d?b(t(":")):"catch"==d?b(a("form"),r,t("("),ga,t(")"),v,q,u):c(a("stat"),x,t(";"),q)}function x(a){return y(a,!1)}function C(a){return y(a,!0)}function y(c,d){var e=d?H:F;return va.hasOwnProperty(c)?b(e):"function"==c?b(ea):"keyword c"==c?b(d?D:z):"("==c?b(a(")"),z,t(")"),q,e):"operator"==c?b(d?C:x):"["==c?b(a("]"),G(C,"]"),q,e):"{"==c?b(a("}"),G(J,"}"),q,e):b()}function z(a){return a.match(/[;\}\)\],]/)?
c():c(x)}function D(a){return a.match(/[;\}\)\],]/)?c():c(C)}function F(a,c){return","==a?b(x):H(a,c,!1)}function H(c,d,e){var f=!1==e?F:H;e=!1==e?x:C;if("operator"==c)return/\+\+|--/.test(d)?b(f):"?"==d?b(x,t(":"),e):b(e);if(";"!=c){if("("==c)return b(a(")","call"),G(C,")"),q,f);if("."==c)return b(I,f);if("["==c)return b(a("]"),z,t("]"),q,f)}}function M(a){return":"==a?b(q,v):c(F,t(";"),q)}function I(a){if("variable"==a)return Y.marked="property",b()}function J(a,c){if("variable"==a){if(Y.marked=
"property","get"==c||"set"==c)return b(K)}else if("number"==a||"string"==a)Y.marked=a+" property";if(va.hasOwnProperty(a))return b(t(":"),C)}function K(a){if(":"==a)return b(x);if("variable"!=a)return b(t(":"),x);Y.marked="property";return b(ea)}function G(a,d){function e(c){return","==c?(c=Y.state.lexical,"call"==c.info&&(c.pos=(c.pos||0)+1),b(a,e)):c==d?b():b(t(d))}return function(f){return f==d?b():c(a,e)}}function S(a){return"}"==a?b():c(v,S)}function O(a){return":"==a?b(s):c()}function s(a){return"variable"==
a?(Y.marked="variable-3",b()):c()}function T(a,d){return"variable"==a?(p(d),ca?b(O,Q):b(Q)):c()}function Q(a,c){if("="==c)return b(C,Q);if(","==a)return b(T)}function U(c,d){if("keyword b"==c&&"else"==d)return b(a("form"),v,q)}function N(a){return"var"==a?b(T,t(";"),P):";"==a?b(P):"variable"==a?b(V):c(x,t(";"),P)}function V(a,c){return"in"==c?b(x):b(F,P)}function P(a,d){return";"==a?b(aa):"in"==d?b(x):c(x,t(";"),aa)}function aa(a){")"!=a&&b(x)}function ea(c,d){if("variable"==c)return p(d),b(ea);if("("==
c)return b(a(")"),r,G(ga,")"),q,v,u)}function ga(a,c){if("variable"==a)return p(c),ca?b(O):b()}var na=g.indentUnit,W=f.statementIndent,Z=f.json,ca=f.typescript,ja=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),
"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this")};if(ca){var c={type:"variable",style:"variable-3"},c={"interface":a("interface"),"class":a("class"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),"super":a("super"),string:c,number:c,bool:c,any:c},g;for(g in c)b[g]=
c[g]}return b}(),R=/[+\-*&%=<>!?|~^]/,ya,Ha,va={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},Y={state:null,column:null,marked:null,cc:null},Ca={name:"this",next:{name:"arguments"}};q.lex=!0;return{startState:function(a){return{tokenize:k,lastType:null,cc:[],lexical:new d((a||0)-na,0,"block",!1),localVars:f.localVars,globalVars:f.globalVars,context:f.localVars&&{vars:f.localVars},indented:0}},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=
a.indentation());if(b.tokenize!=l&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==ya)return c;b.lastType="operator"!=ya||"++"!=Ha&&"--"!=Ha?ya:"incdec";a:{var d=ya,e=Ha,f=b.cc;Y.state=b;Y.stream=a;Y.marked=null;Y.cc=f;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((f.length?f.pop():Z?x:v)(d,e)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(Y.marked){c=Y.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=!0;break b}d=void 0}if(d){c="variable-2";
break a}break a}c=void 0}return c},indent:function(a,b){if(a.tokenize==l)return CodeMirror.Pass;if(a.tokenize!=k)return 0;for(var c=b&&b.charAt(0),d=a.lexical,e=a.cc.length-1;0<=e;--e){var g=a.cc[e];if(g==q)d=d.prev;else if(g!=U||/^else\b/.test(b))break}"stat"==d.type&&"}"==c&&(d=d.prev);W&&")"==d.type&&"stat"==d.prev.type&&(d=d.prev);e=d.type;g=c==e;return"vardef"==e?d.indented+("operator"==a.lastType||","==a.lastType?4:0):"form"==e&&"{"==c?d.indented:"form"==e?d.indented+na:"stat"==e?d.indented+
("operator"==a.lastType||","==a.lastType?W||na:0):"switch"!=d.info||g||!1==f.doubleIndentSwitch?d.align?d.column+(g?0:1):d.indented+(g?0:na):d.indented+(/^(?:case|default)\b/.test(b)?na:2*na)},electricChars:":{}",blockCommentStart:Z?null:"/*",blockCommentEnd:Z?null:"*/",lineComment:Z?null:"//",fold:"brace",helperType:Z?"json":"javascript",jsonMode:Z}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");
CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});
window.CodeMirror=function(){function g(a,b){if(!(this instanceof g))return new g(a,b);this.options=b=b||{};for(var d in we)!b.hasOwnProperty(d)&&we.hasOwnProperty(d)&&(b[d]=we[d]);r(b);d=this.display=f(a,"string"==typeof b.value?0:b.value.first);d.wrapper.CodeMirror=this;c(this);b.autofocus&&!Fc&&Ta(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new be};l(this);b.lineWrapping&&(this.display.wrapper.className+=
" CodeMirror-wrap");var e=b.value;"string"==typeof e&&(e=new Mb(b.value,b.mode));Y(this,xc)(this,e);mb&&setTimeout(tc(rb,this,!0),20);ba(this);var k;try{k=document.activeElement==d.input}catch(m){}k||b.autofocus&&!Fc?setTimeout(tc(xa,this),20):sa(this);Y(this,function(){for(var a in nd)if(nd.propertyIsEnumerable(a))nd[a](this,b[a],xe);for(a=0;a<ye.length;++a)ye[a](this)})()}function f(a,b){var c={},d=c.input=oa("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");
jc?d.style.width="1000px":d.setAttribute("wrap","off");od&&(d.style.border="1px solid black");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck","false");c.inputDiv=oa("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");c.scrollbarH=oa("div",[oa("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");c.scrollbarV=oa("div",[oa("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");c.scrollbarFiller=oa("div",null,"CodeMirror-scrollbar-filler");
c.gutterFiller=oa("div",null,"CodeMirror-gutter-filler");c.lineDiv=oa("div",null,"CodeMirror-code");c.selectionDiv=oa("div",null,null,"position: relative; z-index: 1");c.cursor=oa("div","\u00a0","CodeMirror-cursor");c.otherCursor=oa("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");c.measure=oa("div",null,"CodeMirror-measure");c.lineSpace=oa("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none");c.mover=oa("div",[oa("div",[c.lineSpace],
"CodeMirror-lines")],null,"position: relative");c.sizer=oa("div",[c.mover],"CodeMirror-sizer");c.heightForcer=oa("div",null,null,"position: absolute; height: "+kc+"px; width: 1px;");c.gutters=oa("div",null,"CodeMirror-gutters");c.lineGutter=null;c.scroller=oa("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll");c.scroller.setAttribute("tabIndex","-1");c.wrapper=oa("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror");Zc&&(c.gutters.style.zIndex=
-1,c.scroller.style.paddingRight=0);a.appendChild?a.appendChild(c.wrapper):a(c.wrapper);od&&(d.style.width="0px");jc||(c.scroller.draggable=!0);ze?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):Zc&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px");c.viewOffset=c.lastSizeC=0;c.showingFrom=c.showingTo=b;c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null;c.prevInput="";c.alignWidgets=!1;c.pollingFast=!1;c.poll=new be;c.cachedCharWidth=c.cachedTextHeight=null;
c.measureLineCache=[];c.measureLineCachePos=0;c.inaccurateSelection=!1;c.maxLine=null;c.maxLineLength=0;c.maxLineChanged=!1;c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null;return c}function n(a){a.doc.mode=g.getMode(a.options,a.doc.modeOption);a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;S(a,100);a.state.modeGen++;a.curOp&&Da(a)}function m(a){var b=R(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/
ya(a.display)-3);return function(e){return E(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function k(a){var b=a.doc,c=m(a);b.iter(function(a){var b=c(a);b!=a.height&&ec(a,b)})}function e(a){var b=Gc[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:"");a.state.disableInput=b.disableInput}function l(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g,
" cm-s-");aa(a)}function d(a){c(a);Da(a);setTimeout(function(){q(a)},20)}function c(a){var b=a.display.gutters,c=a.options.gutters;ce(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(oa("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function b(a,b){if(0==b.height)return 0;for(var c=b.text.length,d,e=b;d=Wa(e,-1);)d=d.find(),e=ma(a,d.from.line),c+=d.from.ch-d.to.ch;for(e=b;d=
Tb(e);)d=d.find(),c-=e.text.length-d.from.ch,e=ma(a,d.to.line),c+=e.text.length-d.to.ch;return c}function p(a){var c=a.display,d=a.doc;c.maxLine=ma(d,d.first);c.maxLineLength=b(d,c.maxLine);c.maxLineChanged=!0;d.iter(function(a){var e=b(d,a);e>c.maxLineLength&&(c.maxLineLength=e,c.maxLine=a)})}function r(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function u(a){var b=
a.display,c=a.doc.height+(b.mover.offsetHeight-b.lineSpace.offsetHeight);b.sizer.style.minHeight=b.heightForcer.style.top=c+"px";b.gutters.style.height=Math.max(c,b.scroller.clientHeight-kc)+"px";var c=Math.max(c,b.scroller.scrollHeight),d=b.scroller.scrollWidth>b.scroller.clientWidth+1,e=c>b.scroller.clientHeight+1;e?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=d?Kd(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=c-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):
b.scrollbarV.style.display="";d?(b.scrollbarH.style.display="block",b.scrollbarH.style.right=e?Kd(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):b.scrollbarH.style.display="";d&&e?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=Kd(b.measure)+"px"):b.scrollbarFiller.style.display="";d&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(b.gutterFiller.style.display=
"block",b.gutterFiller.style.height=Kd(b.measure)+"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="";Se&&0===Kd(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=Te?"18px":"12px")}function a(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top);d=Math.floor(d-a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:Jd(b,d),to:Jd(b,a)}}function q(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&
a.options.fixedGutter){for(var c=x(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,k=f.alignable;g<k.length;++g)k[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function t(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=v(a.options,b.first+b.size-1);a=a.display;if(b.length!=a.lineNumChars){var c=a.measure.appendChild(oa("div",[oa("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),
d=c.firstChild.offsetWidth,c=c.offsetWidth-d;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-c);a.lineNumWidth=a.lineNumInnerWidth+c;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";return!0}return!1}function v(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function x(a){return nb(a.scroller).left-nb(a.sizer).left}function C(b,c,d,e){for(var f=b.display.showingFrom,g=b.display.showingTo,k,l=a(b.display,
b.doc,d);y(b,c,l,e);){e=!1;k=!0;J(b);u(b);d&&(d=Math.min(b.display.scroller.scrollHeight-b.display.scroller.clientHeight,"number"==typeof d?d:d.top));l=a(b.display,b.doc,d);if(l.from>=b.display.showingFrom&&l.to<=b.display.showingTo)break;c=[]}k&&(ac(b,"update",b),b.display.showingFrom==f&&b.display.showingTo==g||ac(b,"viewportChange",b,b.display.showingFrom,b.display.showingTo));return k}function y(a,b,c,d){var e=a.display,f=a.doc;if(!e.wrapper.clientWidth)e.showingFrom=e.showingTo=f.first,e.viewOffset=
0;else if(d||!(0==b.length&&c.from>e.showingFrom&&c.to<e.showingTo)){t(a)&&(b=[{from:f.first,to:f.first+f.size}]);var g=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?g:"0";g=Infinity;if(a.options.lineNumbers)for(var k=0;k<b.length;++k)if(b[k].diff){g=b[k].from;break}var k=f.first+f.size,l=Math.max(c.from-a.options.viewportMargin,f.first);c=Math.min(k,c.to+a.options.viewportMargin);e.showingFrom<l&&20>l-e.showingFrom&&(l=Math.max(f.first,e.showingFrom));
e.showingTo>c&&20>e.showingTo-c&&(c=Math.min(k,e.showingTo));if($c)for(l=ic(A(f,ma(f,l)));c<k&&E(f,ma(f,c));)++c;var m=[{from:Math.max(e.showingFrom,f.first),to:Math.min(e.showingTo,k)}],m=m[0].from>=m[0].to?[]:F(m,b);if($c)for(k=0;k<m.length;++k){b=m[k];for(var n;n=Tb(ma(f,b.to-1));)if(n=n.find().from.line,n>b.from)b.to=n;else{m.splice(k--,1);break}}for(k=f=0;k<m.length;++k)b=m[k],b.from<l&&(b.from=l),b.to>c&&(b.to=c),b.from>=b.to?m.splice(k--,1):f+=b.to-b.from;if(d||f!=c-l||l!=e.showingFrom||c!=
e.showingTo){m.sort(function(a,b){return a.from-b.from});try{var q=document.activeElement}catch(p){}f<0.7*(c-l)&&(e.lineDiv.style.display="none");M(a,l,c,m,g);e.lineDiv.style.display="";q&&document.activeElement!=q&&q.offsetHeight&&q.focus();if(l!=e.showingFrom||c!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight)e.lastSizeC=e.wrapper.clientHeight,S(a,400);e.showingFrom=l;e.showingTo=c;z(a);D(a);return!0}D(a)}}function z(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=a.lineDiv.firstChild,d;c;c=c.nextSibling)if(c.lineObj){if(Zc){var e=
c.offsetTop+c.offsetHeight;d=e-b;b=e}else d=nb(c),d=d.bottom-d.top;e=c.lineObj.height-d;2>d&&(d=R(a));if(0.001<e||-0.001>e)if(ec(c.lineObj,d),d=c.lineObj.widgets)for(e=0;e<d.length;++e)d[e].height=d[e].node.offsetHeight}}function D(a){var b=a.display.viewOffset=id(a,ma(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function F(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||0,k=0,l=a.length;k<l;++k){var m=a[k];e.to<=m.from&&e.diff?f.push({from:m.from+g,to:m.to+
g}):e.to<=m.from||e.from>=m.to?f.push(m):(e.from>m.from&&f.push({from:m.from,to:e.from}),e.to<m.to&&f.push({from:e.to+g,to:m.to+g}))}a=f}return a}function H(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:x(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function M(a,b,c,d,e){function f(b){var c=b.nextSibling;jc&&Hc&&
a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b);return c}var g=H(a),k=a.display,l=a.options.lineNumbers;d.length||jc&&a.display.currentWheelTarget||ce(k.lineDiv);var m=k.lineDiv,n=m.firstChild,q=d.shift(),t=b;for(a.doc.iter(b,c,function(b){q&&q.to==t&&(q=d.shift());if(E(a.doc,b)){if(0!=b.height&&ec(b,0),b.widgets&&n.previousSibling)for(var c=0;c<b.widgets.length;++c){var k=b.widgets[c];if(k.showIfHidden){var A=n.previousSibling;if(/pre/i.test(A.nodeName)){var p=
oa("div",null,null,"position: relative");A.parentNode.replaceChild(p,A);p.appendChild(A);A=p}p=A.appendChild(oa("div",[k.node],"CodeMirror-linewidget"));k.handleMouseEvents||(p.ignoreEvents=!0);I(k,p,A,g)}}}else if(q&&q.from<=t&&q.to>t){for(;n.lineObj!=b;)n=f(n);l&&e<=t&&n.lineNumber&&de(n.lineNumber,v(a.options,t));n=n.nextSibling}else{if(b.widgets)for(var p=0,sc=n;sc&&20>p;++p,sc=sc.nextSibling)if(sc.lineObj==b&&/div/i.test(sc.nodeName)){c=sc;break}var p=a,ve=t,r=c,sc=hb(p,b),s=b.gutterMarkers,
x=p.display;if(p.options.lineNumbers||s||b.bgClass||b.wrapClass||b.widgets){if(r){r.alignable=null;for(var L=!0,u=0,X=null,C=r.firstChild,y;C;C=y)if(y=C.nextSibling,/\bCodeMirror-linewidget\b/.test(C.className)){for(var da=0;da<b.widgets.length;++da){var z=b.widgets[da];if(z.node==C.firstChild){z.above||X||(X=C);I(z,C,r,g);++u;break}}if(da==b.widgets.length){L=!1;break}}else r.removeChild(C);r.insertBefore(sc,X);L&&u==b.widgets.length&&(k=r,r.className=b.wrapClass||"")}k||(k=oa("div",null,b.wrapClass,
"position: relative"),k.appendChild(sc));b.bgClass&&k.insertBefore(oa("div",null,b.bgClass+" CodeMirror-linebackground"),k.firstChild);if(p.options.lineNumbers||s)if(A=k.insertBefore(oa("div",null,null,"position: absolute; left: "+(p.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px"),k.firstChild),p.options.fixedGutter&&(k.alignable||(k.alignable=[])).push(A),!p.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(k.lineNumber=A.appendChild(oa("div",v(p.options,ve),"CodeMirror-linenumber CodeMirror-gutter-elt",
"left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+x.lineNumInnerWidth+"px"))),s)for(da=0;da<p.options.gutters.length;++da)z=p.options.gutters[da],(ve=s.hasOwnProperty(z)&&s[z])&&A.appendChild(oa("div",[ve],"CodeMirror-gutter-elt","left: "+g.gutterLeft[z]+"px; width: "+g.gutterWidth[z]+"px"));Zc&&(k.style.zIndex=2);if(b.widgets&&k!=r)for(da=0,r=b.widgets;da<r.length;++da)z=r[da],s=oa("div",[z.node],"CodeMirror-linewidget"),z.handleMouseEvents||(s.ignoreEvents=!0),I(z,s,k,g),z.above?k.insertBefore(s,
p.options.lineNumbers&&0!=b.height?A:sc):k.appendChild(s),ac(z,"redraw")}else k=sc;if(k!=c)m.insertBefore(k,n);else{for(;n!=c;)n=f(n);n=n.nextSibling}k.lineObj=b}++t});n;)n=f(n)}function I(a,b,c,d){a.noHScroll&&((c.alignable||(c.alignable=[])).push(b),c=d.wrapperWidth,b.style.left=d.fixedPos+"px",a.coverGutter||(c-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=c+"px");a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+
"px"))}function J(a){var b=a.display,c=ta(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting){var d=a.display,e=W(a,a.doc.sel.head,"div");d.cursor.style.left=e.left+"px";d.cursor.style.top=e.top+"px";d.cursor.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px";d.cursor.style.display="";e.other?(d.otherCursor.style.display="",d.otherCursor.style.left=e.other.left+"px",d.otherCursor.style.top=e.other.top+"px",d.otherCursor.style.height=0.85*(e.other.bottom-e.other.top)+
"px"):d.otherCursor.style.display="none"}else b.cursor.style.display=b.otherCursor.style.display="none";c?b.selectionDiv.style.display="none":K(a);a.options.moveInputWithCursor&&(a=W(a,a.doc.sel.head,"div"),c=nb(b.wrapper),d=nb(b.lineDiv),b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+d.top-c.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+d.left-c.left))+"px")}function K(a){function b(a,c,d,e){0>c&&(c=0);g.appendChild(oa("div",null,"CodeMirror-selected",
"position: absolute; left: "+a+"px; top: "+c+"px; width: "+(null==d?k-a:d)+"px; height: "+(e-c)+"px"))}function c(d,f,g){var m=ma(e,d),n=m.text.length,q,t;We($b(m),f||0,null==g?n:g,function(c,e,A){var p=na(a,ha(d,c),"div",m,"left"),v,E;c==e?(v=p,A=E=p.left):(v=na(a,ha(d,e-1),"div",m,"right"),"rtl"==A&&(A=p,p=v,v=A),A=p.left,E=v.right);null==f&&0==c&&(A=l);3<v.top-p.top&&(b(A,p.top,null,p.bottom),A=l,p.bottom<v.top&&b(A,p.bottom,null,v.top));null==g&&e==n&&(E=k);if(!q||p.top<q.top||p.top==q.top&&p.left<
q.left)q=p;if(!t||v.bottom>t.bottom||v.bottom==t.bottom&&v.right>t.right)t=v;A<l+1&&(A=l);b(A,v.top,E-A,v.bottom)});return{start:q,end:t}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),k=d.lineSpace.offsetWidth,l=lc(a.display.measure,oa("pre",null,null,"text-align: left")).appendChild(oa("span","x")).offsetLeft;if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var m=ma(e,f.from.line),n=ma(e,f.to.line),n=A(e,m)==A(e,n),m=c(f.from.line,f.from.ch,n?m.text.length:
null).end,f=c(f.to.line,n?0:null,f.to.ch).start;n&&(m.top<f.top-2?(b(m.right,m.top,null,m.bottom),b(l,f.top,f.left,f.bottom)):b(m.right,m.top,f.left-m.right,m.bottom));m.bottom<f.top&&b(l,m.bottom,null,f.top)}lc(d.selectionDiv,g);d.selectionDiv.style.display=""}function G(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="";b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?
"":"hidden"},a.options.cursorBlinkRate)}}function S(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,tc(O,a))}function O(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.showingTo)){var c=+new Date+a.options.workTime,d=gb(b.mode,T(a,b.frontier)),e=[],f;b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var k=g.styles;g.styles=Yc(a,g,d);for(var l=!k||k.length!=
g.styles.length,m=0;!l&&m<k.length;++m)l=k[m]!=g.styles[m];l&&(f&&f.end==b.frontier?f.end++:e.push(f={start:b.frontier,end:b.frontier+1}));g.stateAfter=gb(b.mode,d)}else Xb(a,g,d),g.stateAfter=0==b.frontier%5?gb(b.mode,d):null;++b.frontier;if(+new Date>c)return S(a,a.options.workDelay),!0});e.length&&Y(a,function(){for(var a=0;a<e.length;++a)Da(this,e[a].start,e[a].end)})()}}function s(a,b,c){var d,e,f=a.doc,g=b;for(b-=100;g>b;--g){if(g<=f.first)return f.first;var k=ma(f,g-1);if(k.stateAfter&&(!c||
g<=f.frontier))return g;k=rd(k.text,null,a.options.tabSize);if(null==e||d>k)e=g-1,d=k}return e}function T(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=s(a,b,c),g=f>d.first&&ma(d,f-1).stateAfter,g=g?gb(d.mode,g):qc(d.mode);d.iter(f,b,function(c){Xb(a,c,g);c.stateAfter=f==b-1||0==f%5||f>=e.showingFrom&&f<e.showingTo?gb(d.mode,g):null;++f});return g}function Q(a,b,c,d,e){var f=-1;d=d||V(a,b);for(a=c;;a+=f){var g=d[a];if(g)break;0>f&&0==a&&(f=1)}e=a>c?"left":a<c?"right":e;"left"==
e&&g.leftSide?g=g.leftSide:"right"==e&&g.rightSide&&(g=g.rightSide);return{left:a<c?g.right:g.left,right:a>c?g.left:g.right,top:g.top,bottom:g.bottom}}function U(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e}}function N(a,b){var c=U(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function V(a,b){var c=U(a,b);if(c)return c.measure;
var c=P(a,b),d=a.display.measureLineCache,e={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};16==d.length?d[++a.display.measureLineCachePos%16]=e:d.push(e);return c}function P(a,b){function c(a){var b=a.top-A.top,d=a.bottom-A.top;d>v&&(d=v);0>b&&(b=0);for(var e=p.length-2;0<=e;e-=2){var f=p[e],g=p[e+1];if(!(f>d||g<b)&&(f<=b&&g>=d||b<=f&&d>=g||Math.min(d,g)-Math.max(b,f)>=d-b>>1)){p[e]=Math.min(b,f);p[e+1]=Math.max(d,
g);break}}0>e&&(e=p.length,p.push(b,d));return{left:a.left-A.left,right:a.right-A.left,top:e,bottom:null}}function d(a){a.bottom=p[a.top+1];a.top=p[a.top]}var e=a.display,f=Xe(b.text.length),g=hb(a,b,f,!0);if(mb&&!Zc&&!a.options.lineWrapping&&100<g.childNodes.length){for(var k=document.createDocumentFragment(),l=g.childNodes.length,m=0,n=Math.ceil(l/10);m<n;++m){for(var q=oa("div",null,null,"display: inline-block"),t=0;10>t&&l;++t)q.appendChild(g.firstChild),--l;k.appendChild(q)}g.appendChild(k)}lc(e.measure,
g);var A=nb(e.lineDiv),p=[],k=Xe(b.text.length),v=g.offsetHeight;gc&&e.measure.first!=g&&lc(e.measure,g);for(m=0;m<f.length;++m)if(e=f[m])g=e,l=null,/\bCodeMirror-widget\b/.test(e.className)&&e.getClientRects&&(1==e.firstChild.nodeType&&(g=e.firstChild),n=g.getClientRects(),1<n.length&&(l=k[m]=c(n[0]),l.rightSide=c(n[n.length-1]))),l||(l=k[m]=c(nb(g))),e.measureRight&&(l.right=nb(e.measureRight).left),e.leftSide&&(l.leftSide=c(nb(e.leftSide)));for(m=0;m<k.length;++m)if(e=k[m])d(e),e.leftSide&&d(e.leftSide),
e.rightSide&&d(e.rightSide);return k}function aa(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0;a.display.cachedCharWidth=a.display.cachedTextHeight=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function ea(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Xc(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=id(a,b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;
if("page"==d||"window"==d)a=nb(a.display.lineSpace),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function ga(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):
"local"!=c&&c||(c=nb(a.display.sizer),d+=c.left,b+=c.top);a=nb(a.display.lineSpace);return{left:d-a.left,top:b-a.top}}function na(a,b,c,d,e){d||(d=ma(a.doc,b.line));return ea(a,d,Q(a,d,b.ch,null,e),c)}function W(a,b,c,d,e){function f(b,g){var k=Q(a,d,b,e,g?"right":"left");g?k.left=k.right:k.right=k.left;return ea(a,d,k,c)}function g(a,b){var c=k[b],d=c.level%2;a==Ae(c)&&b&&c.level<k[b-1].level?(c=k[--b],a=ee(c)-(c.level%2?0:1),d=!0):a==ee(c)&&b<k.length-1&&c.level<k[b+1].level&&(c=k[++b],a=Ae(c)-
c.level%2,d=!1);return d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||ma(a.doc,b.line);e||(e=V(a,d));var k=$b(d);b=b.ch;if(!k)return f(b);var l=Be(k,b),l=g(b,l);null!=Oc&&(l.other=g(b,Oc));return l}function Z(a,b,c,d){a=new ha(a,b);a.xRel=d;c&&(a.outside=!0);return a}function ca(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Z(d.first,0,!0,-1);var e=Jd(d,c),f=d.first+d.size-1;if(e>f)return Z(d.first+d.size-1,ma(d,f).text.length,!0,1);for(0>b&&(b=0);;){var f=ma(d,e),e=ja(a,f,e,b,c),g=(f=Tb(f))&&
f.find();if(f&&(e.ch>g.from.ch||e.ch==g.from.ch&&0<e.xRel))e=g.to.line;else return e}}function ja(a,b,c,d,e){function f(d){d=W(a,ha(c,d),"line",b,m);k=!0;if(g>d.bottom)return d.left-l;if(g<d.top)return d.left+l;k=!1;return d.left}var g=e-id(a,b),k=!1,l=2*a.display.wrapper.clientWidth,m=V(a,b),n=$b(b),q=b.text.length;e=sd(b);var t=td(b),A=f(e),p=k,v=f(t),E=k;if(d>v)return Z(c,t,E,1);for(;;){if(n?t==e||t==uc(b,e,1):1>=t-e){n=d<A||d-A<=v-d?e:t;for(d-=n==e?A:v;ud.test(b.text.charAt(n));)++n;return Z(c,
n,n==e?p:E,0>d?-1:d?1:0)}var r=Math.ceil(q/2),s=e+r;if(n)for(var s=e,x=0;x<r;++x)s=uc(b,s,1);x=f(s);if(x>d){t=s;v=x;if(E=k)v+=1E3;q=r}else e=s,A=x,p=k,q-=r}}function R(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Pc){Pc=oa("pre");for(var b=0;49>b;++b)Pc.appendChild(document.createTextNode("x")),Pc.appendChild(oa("br"));Pc.appendChild(document.createTextNode("x"))}lc(a.measure,Pc);b=Pc.offsetHeight/50;3<b&&(a.cachedTextHeight=b);ce(a.measure);return b||1}function ya(a){if(null!=
a.cachedCharWidth)return a.cachedCharWidth;var b=oa("span","x"),c=oa("pre",[b]);lc(a.measure,c);b=b.offsetWidth;2<b&&(a.cachedCharWidth=b);return b||10}function Ha(a){a.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Ld};Ac++||(Qc=[])}function va(a){var b=a.curOp,c=a.doc,d=a.display;a.curOp=null;b.updateMaxLine&&p(a);if(d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e;e=
d.maxLine;var f=!1;if(e.markedSpans)for(var g=0;g<e.markedSpans;++g){var k=e.markedSpans[g];!k.collapsed||null!=k.to&&k.to!=e.text.length||(f=!0)}(f=!f&&U(a,e))?e=Q(a,e,e.text.length,f.measure,"right").right:(e=hb(a,e,null,!0),f=e.appendChild(Md(a.display.measure)),lc(a.display.measure,e),e=nb(f).right-nb(a.display.lineDiv).left);d.sizer.style.minWidth=Math.max(0,e+3+kc)+"px";d.maxLineChanged=!1;e=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);e<c.scrollLeft&&!b.updateScrollPos&&
Pa(a,Math.min(d.scroller.scrollLeft,e),!0)}var l,m;b.updateScrollPos?l=b.updateScrollPos:b.selectionChanged&&d.scroller.clientHeight&&(l=W(a,c.sel.head),l=yc(a,l.left,l.top,l.left,l.bottom));if(b.changes.length||b.forceUpdate||l&&null!=l.scrollTop)m=C(a,b.changes,l&&l.scrollTop,b.forceUpdate),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop);!m&&b.selectionChanged&&J(a);if(b.updateScrollPos)d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=l.scrollTop,d.scroller.scrollLeft=
d.scrollbarH.scrollLeft=c.scrollLeft=l.scrollLeft,q(a),b.scrollToPos&&Jb(a,la(a.doc,b.scrollToPos),b.scrollToPosMargin);else if(l&&(c=Jb(a,a.doc.sel.head,a.options.cursorScrollMargin),a.state.focused&&(d=a.display,l=nb(d.sizer),m=null,0>c.top+l.top?m=!0:c.bottom+l.top>(window.innerHeight||document.documentElement.clientHeight)&&(m=!1),null!=m&&!Ce))){if(l="none"==d.cursor.style.display)d.cursor.style.display="",d.cursor.style.left=c.left+"px",d.cursor.style.top=c.top-d.viewOffset+"px";d.cursor.scrollIntoView(m);
l&&(d.cursor.style.display="none")}b.selectionChanged&&G(a);a.state.focused&&b.updateInput&&rb(a,b.userSelChange);c=b.maybeHiddenMarkers;d=b.maybeUnhiddenMarkers;if(c)for(m=0;m<c.length;++m)c[m].lines.length||Qb(c[m],"hide");if(d)for(m=0;m<d.length;++m)d[m].lines.length&&Qb(d[m],"unhide");var n;--Ac||(n=Qc,Qc=null);b.textChanged&&Qb(a,"change",a,b.textChanged);b.cursorActivity&&Qb(a,"cursorActivity",a);if(n)for(m=0;m<n.length;++m)n[m]()}function Y(a,b){return function(){var c=a||this,d=!c.curOp;d&&
Ha(c);try{var e=b.apply(c,arguments)}finally{d&&va(c)}return e}}function Ca(a){return function(){var b=this.cm&&!this.cm.curOp,c;b&&Ha(this.cm);try{c=a.apply(this,arguments)}finally{b&&va(this.cm)}return c}}function za(a,b){var c=!a.curOp,d;c&&Ha(a);try{d=b()}finally{c&&va(a)}return d}function Da(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);a.curOp.changes.push({from:b,to:c,diff:d})}function ra(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){Va(a);
a.state.focused&&ra(a)})}function Ea(a){function b(){Va(a)||c?(a.display.pollingFast=!1,ra(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function Va(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||De(b)||zb(a)||a.state.disableInput)return!1;var f=b.value;if(f==c&&ta(e.from,e.to))return!1;if(mb&&!gc&&a.display.inputHasSelection===f)return rb(a,!0),!1;var g=!a.curOp;g&&Ha(a);e.shift=!1;for(var k=0,l=Math.min(c.length,
f.length);k<l&&c.charCodeAt(k)==f.charCodeAt(k);)++k;l=e.from;e=e.to;k<c.length?l=ha(l.line,l.ch-(c.length-k)):a.state.overwrite&&ta(l,e)&&!a.state.pasteIncoming&&(e=ha(e.line,Math.min(ma(d,e.line).text.length,e.ch+(f.length-k))));c=a.curOp.updateInput;k={from:l,to:e,text:Ic(f.slice(k)),origin:a.state.pasteIncoming?"paste":"+input"};Ab(a.doc,k,"end");a.curOp.updateInput=c;ac(a,"inputRead",a,k);1E3<f.length||-1<f.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=f;g&&va(a);a.state.pasteIncoming=
!1;return!0}function rb(a,b){var c,d,e=a.doc;ta(e.sel.from,e.sel.to)?b&&(a.display.prevInput=a.display.input.value="",mb&&!gc&&(a.display.inputHasSelection=null)):(a.display.prevInput="",d=(c=fe&&(100<e.sel.to.line-e.sel.from.line||1E3<(d=a.getSelection()).length))?"-":d||a.getSelection(),a.display.input.value=d,a.state.focused&&Ye(a.display.input),mb&&!gc&&(a.display.inputHasSelection=d));a.display.inaccurateSelection=c}function Ta(a){"nocursor"==a.options.readOnly||Fc&&document.activeElement==a.display.input||
a.display.input.focus()}function zb(a){return a.options.readOnly||a.doc.cantEdit}function ba(a){function b(){a.state.focused&&setTimeout(tc(Ta,a),0)}function c(){null==k&&(k=setTimeout(function(){k=null;g.cachedCharWidth=g.cachedTextHeight=vd=null;aa(a);za(a,tc(Da,a))},100))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5E3):Bc(window,"resize",c)}function e(b){vc(a,b)||a.options.onDragEvent&&a.options.onDragEvent(a,Nd(b))||Od(b)}function f(){g.inaccurateSelection&&
(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Ye(g.input))}var g=a.display;Aa(g.scroller,"mousedown",Y(a,Ja));mb?Aa(g.scroller,"dblclick",Y(a,function(b){if(!vc(a,b)){var c=ua(a,b);!c||jb(a,b)||Ia(a.display,b)||(Db(b),b=Bb(ma(a.doc,c.line).text,c),Za(a.doc,b.from,b.to))}})):Aa(g.scroller,"dblclick",function(b){vc(a,b)||Db(b)});Aa(g.lineSpace,"selectstart",function(a){Ia(g,a)||Db(a)});Ee||Aa(g.scroller,"contextmenu",function(b){Nb(a,b)});Aa(g.scroller,"scroll",function(){g.scroller.clientHeight&&
(Fb(a,g.scroller.scrollTop),Pa(a,g.scroller.scrollLeft,!0),Qb(a,"scroll",a))});Aa(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&Fb(a,g.scrollbarV.scrollTop)});Aa(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&Pa(a,g.scrollbarH.scrollLeft)});Aa(g.scroller,"mousewheel",function(b){Ra(a,b)});Aa(g.scroller,"DOMMouseScroll",function(b){Ra(a,b)});Aa(g.scrollbarH,"mousedown",b);Aa(g.scrollbarV,"mousedown",b);Aa(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=
0});var k;Aa(window,"resize",c);setTimeout(d,5E3);Aa(g.input,"keyup",Y(a,function(b){vc(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,Nd(b))||16!=b.keyCode||(a.doc.sel.shift=!1)}));Aa(g.input,"input",tc(Ea,a));Aa(g.input,"keydown",Y(a,Xa));Aa(g.input,"keypress",Y(a,tb));Aa(g.input,"focus",tc(xa,a));Aa(g.input,"blur",tc(sa,a));a.options.dragDrop&&(Aa(g.scroller,"dragstart",function(b){var c=a;if(mb&&(!c.state.draggingText||100>+new Date-Fe))Od(b);else if(!vc(c,b)&&!Ia(c.display,b)){var d=c.getSelection();
b.dataTransfer.setData("Text",d);b.dataTransfer.setDragImage&&!Ge&&(d=oa("img",null,null,"position: fixed; left: 0; top: 0;"),mc&&(d.width=d.height=1,c.display.wrapper.appendChild(d),d._top=d.offsetTop),b.dataTransfer.setDragImage(d,0,0),mc&&d.parentNode.removeChild(d))}}),Aa(g.scroller,"dragenter",e),Aa(g.scroller,"dragover",e),Aa(g.scroller,"drop",Y(a,sb)));Aa(g.scroller,"paste",function(b){Ia(g,b)||(Ta(a),Ea(a))});Aa(g.input,"paste",function(){a.state.pasteIncoming=!0;Ea(a)});Aa(g.input,"cut",
f);Aa(g.input,"copy",f);ze&&Aa(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur();Ta(a)})}function Ia(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function ua(a,b,c){var d=a.display;if(!c&&(c=b.target||b.srcElement,c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller||c==d.gutterFiller))return null;var e,f,d=nb(d.lineSpace);try{e=
b.clientX,f=b.clientY}catch(g){return null}return ca(a,e-d.left,f-d.top)}function Ja(b){function c(a){if(!ta(v,a))if(v=a,"single"==q)Za(f.doc,la(k,m),a);else if(A=la(k,A),p=la(k,p),"double"==q){var b=Bb(ma(k,a.line).text,a);Fa(a,A)?Za(f.doc,b.from,p):Za(f.doc,A,b.to)}else"triple"==q&&(Fa(a,A)?Za(f.doc,p,la(k,ha(a.line,0))):Za(f.doc,A,la(k,ha(a.line+1,0))))}function d(b){var e=++r,l=ua(f,b,!0);if(l)if(ta(l,t)){var m=b.clientY<E.top?-20:b.clientY>E.bottom?20:0;m&&setTimeout(Y(f,function(){r==e&&(g.scroller.scrollTop+=
m,d(b))}),50)}else{f.state.focused||xa(f);t=l;c(l);var n=a(g,k);(l.line>=n.to||l.line<n.from)&&setTimeout(Y(f,function(){r==e&&d(b)}),150)}}function e(a){r=Infinity;Db(a);Ta(f);Bc(document,"mousemove",s);Bc(document,"mouseup",x)}if(!vc(this,b)){var f=this,g=f.display,k=f.doc,l=k.sel;l.shift=b.shiftKey;if(Ia(g,b))jc||(g.scroller.draggable=!1,setTimeout(function(){g.scroller.draggable=!0},100));else if(!jb(f,b)){var m=ua(f,b);switch(Ze(b)){case 3:Ee&&Nb.call(f,f,b);return;case 2:m&&Za(f.doc,m);setTimeout(tc(Ta,
f),20);Db(b);return}if(m){f.state.focused||xa(f);var n=+new Date,q="single";Pd&&Pd.time>n-400&&ta(Pd.pos,m)?(q="triple",Db(b),setTimeout(tc(Ta,f),20),fb(f,m.line)):wd&&wd.time>n-400&&ta(wd.pos,m)?(q="double",Pd={time:n,pos:m},Db(b),n=Bb(ma(k,m.line).text,m),Za(f.doc,n.from,n.to)):wd={time:n,pos:m};var t=m;if(!f.options.dragDrop||!Vb||zb(f)||ta(l.from,l.to)||Fa(m,l.from)||Fa(l.to,m)||"single"!=q){Db(b);"single"==q&&Za(f.doc,la(k,m));var A=l.from,p=l.to,v=m,E=nb(g.wrapper),r=0,s=Y(f,function(a){mb||
Ze(a)?d(a):e(a)}),x=Y(f,e);Aa(document,"mousemove",s);Aa(document,"mouseup",x)}else{var L=Y(f,function(a){jc&&(g.scroller.draggable=!1);f.state.draggingText=!1;Bc(document,"mouseup",L);Bc(g.scroller,"drop",L);10>Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)&&(Db(a),Za(f.doc,m),Ta(f))});jc&&(g.scroller.draggable=!0);f.state.draggingText=L;g.scroller.dragDrop&&g.scroller.dragDrop();Aa(document,"mouseup",L);Aa(g.scroller,"drop",L)}}else(b.target||b.srcElement)==g.scroller&&Db(b)}}}function jb(a,
b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(f){return!1}if(d>=Math.floor(nb(c.gutters).right))return!1;Db(b);if(!Jc(a,"gutterClick"))return!0;var g=nb(c.lineDiv);if(e>g.bottom)return!0;e-=g.top-c.viewOffset;for(g=0;g<a.options.gutters.length;++g){var k=c.gutters.childNodes[g];if(k&&nb(k).right>=d){c=Jd(a.doc,e);ac(a,"gutterClick",a,c,a.options.gutters[g],b);break}}return!0}function sb(a){var b=this;if(!(vc(b,a)||Ia(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Nd(a)))){Db(a);
mb&&(Fe=+new Date);var c=ua(b,a,!0),d=a.dataTransfer.files;if(c&&!zb(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var k=new FileReader;k.onload=function(){f[d]=k.result;++g==e&&(c=la(b.doc,c),Ab(b.doc,{from:c,to:c,text:Ic(f.join("\n")),origin:"paste"},"around"))};k.readAsText(a)};for(var k=0;k<e;++k)a(d[k],k)}else if(!b.state.draggingText||Fa(c,b.doc.sel.from)||Fa(b.doc.sel.to,c))try{if(f=a.dataTransfer.getData("Text")){var k=b.doc.sel.from,l=b.doc.sel.to;
vb(b.doc,c,c);b.state.draggingText&&db(b.doc,"",k,l,"paste");b.replaceSelection(f,null,"paste");Ta(b);xa(b)}}catch(m){}else b.state.draggingText(a),setTimeout(tc(Ta,b),20)}}function Fb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Rc||C(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Rc&&C(a,[]),S(a,100))}function Pa(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,
a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,q(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function Ra(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>
f.clientHeight){if(d&&Hc&&jc)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(!c||Rc||mc||null==nc){if(d&&null!=nc){var g=d*nc,k=a.doc.scrollTop,l=k+e.wrapper.clientHeight;0>g?k=Math.max(0,k+g-50):l=Math.min(a.doc.height,l+g+50);C(a,[],{top:k,bottom:l})}20>bd&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,
a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(nc=(nc*bd+a)/(bd+1),++bd)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}else d&&Fb(a,Math.max(0,Math.min(f.scrollTop+d*nc,f.scrollHeight-f.clientHeight))),Pa(a,Math.max(0,Math.min(f.scrollLeft+c*nc,f.scrollWidth-f.clientWidth))),Db(b),e.wheelStartX=null}}function hc(a,b,c){if("string"==typeof b&&(b=He[b],!b))return!1;a.display.pollingFast&&Va(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{zb(a)&&
(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=Qd}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function Sa(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function Wb(a,b){var c=Lb(a.options.keyMap),d=c.auto;clearTimeout(Ie);d&&!fc(b)&&(Ie=setTimeout(function(){Lb(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,e(a))},50));var f=Cb(b,!0),g=!1;if(!f)return!1;g=Sa(a);if(g=b.shiftKey?xb("Shift-"+f,
g,function(b){return hc(a,b,!0)})||xb(f,g,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return hc(a,b)}):xb(f,g,function(b){return hc(a,b)}))Db(b),G(a),gc&&(b.oldKeyCode=b.keyCode,b.keyCode=0),ac(a,"keyHandled",a,f,b);return g}function dc(a,b,c){var d=xb("'"+c+"'",Sa(a),function(b){return hc(a,b,!0)});d&&(Db(b),G(a),ac(a,"keyHandled",a,"'"+c+"'",b));return d}function Xa(a){this.state.focused||xa(this);mb&&27==a.keyCode&&(a.returnValue=!1);if(!(vc(this,a)||this.options.onKeyEvent&&
this.options.onKeyEvent(this,Nd(a)))){var b=a.keyCode;this.doc.sel.shift=16==b||a.shiftKey;var c=Wb(this,a);mc&&(ge=c?b:null,!c&&88==b&&!fe&&(Hc?a.metaKey:a.ctrlKey)&&this.replaceSelection(""))}}function tb(a){var b=this;if(!(vc(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Nd(a)))){var c=a.keyCode,d=a.charCode;mc&&c==ge?(ge=null,Db(a)):(mc&&(!a.which||10>a.which)||ze)&&Wb(b,a)||(c=String.fromCharCode(null==d?c:d),this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&
!zb(this)&&-1<this.doc.mode.electricChars.indexOf(c)&&setTimeout(Y(b,function(){La(b,b.doc.sel.to.line,"smart")}),75),dc(b,a,c)||(mb&&!gc&&(b.display.inputHasSelection=null),Ea(b)))}}function xa(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Qb(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),rb(a,!0)),ra(a),G(a))}function sa(a){a.state.focused&&(Qb(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=
a.display.wrapper.className.replace(" CodeMirror-focused",""));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Nb(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value=" "+(ta(f.from,f.to)?"":e.input.value);e.prevInput=" ";e.input.selectionStart=1;e.input.selectionEnd=a.length}}function d(){e.inputDiv.style.position="relative";e.input.style.cssText=l;gc&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=k);ra(a);if(null!=e.input.selectionStart){mb&&
!gc||c();clearTimeout(he);var b=0,f=function(){" "==e.prevInput&&0==e.input.selectionStart?Y(a,He.selectAll)(a):10>b++?he=setTimeout(f,500):rb(a)};he=setTimeout(f,200)}}if(!vc(a,b,"contextmenu")){var e=a.display,f=a.doc.sel;if(!Ia(e,b)){var g=ua(a,b),k=e.scroller.scrollTop;if(g&&!mc){(ta(f.from,f.to)||Fa(g,f.from)||!Fa(g,f.to))&&Y(a,vb)(a.doc,g,g);var l=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+
"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";Ta(a);rb(a,!0);ta(f.from,f.to)&&(e.input.value=e.prevInput=" ");mb&&!gc&&c();if(Ee){Od(b);var m=function(){Bc(window,"mouseup",m);setTimeout(d,20)};Aa(window,"mouseup",m)}else setTimeout(d,50)}}}}function Ka(a,b,c){if(!Fa(b.from,c))return la(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+
d)return b=c.line-d,d=a.first+a.size-1,b>d?ha(d,ma(a,d).text.length):Hb(c,ma(a,b).text.length);if(c.line==b.to.line+d)return Hb(c,bc(b.text).length+(1==b.text.length?b.from.ch:0)+ma(a,b.to.line).text.length-b.to.ch);a=c.line-b.from.line;return Hb(c,b.text[a].length+(a?0:b.from.ch))}function Gb(a,b,c){if(c&&"object"==typeof c)return{anchor:Ka(a,b,c.anchor),head:Ka(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=ie(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,
head:d};c=function(a){if(Fa(a,b.from))return a;if(!Fa(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;a.line==b.to.line&&(e+=d.ch-b.to.ch);return ha(c,e)};return{anchor:c(a.sel.anchor),head:c(a.sel.head)}}function eb(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=la(a,b));c&&(this.to=la(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});Qb(a,"beforeChange",a,b);a.cm&&
Qb(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Ab(a,b,c,d){if(a.cm){if(!a.cm.curOp)return Y(a.cm,Ab)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(Jc(a,"beforeChange")||a.cm&&Jc(a.cm,"beforeChange"))if(b=eb(a,b,!0),!b)return;if(d=Je&&!d&&Sb(a,b.from,b.to)){for(var e=d.length-1;1<=e;--e)Ya(a,{from:d[e].from,to:d[e].to,text:[""]});d.length&&Ya(a,{from:d[0].from,to:d[0].to,text:b.text},c)}else Ya(a,b,c)}function Ya(a,b,c){c=Gb(a,b,c);
Ke(a,b,c,a.cm?a.cm.curOp.id:NaN);Ob(a,b,c,ub(a,b));var d=[];Nc(a,function(a,c){c||-1!=Cc(d,a.history)||(Le(a.history,b),d.push(a.history));Ob(a,b,null,ub(a,b))})}function Na(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e);c.generation=d.generation||++c.maxGeneration;for(var f=
Jc(a,"beforeChange")||a.cm&&Jc(a.cm,"beforeChange"),g=d.changes.length-1;0<=g;--g){var k=d.changes[g];k.origin=b;if(f&&!eb(a,k,!1)){("undo"==b?c.done:c.undone).length=0;break}e.changes.push(pc(a,k));var l=g?Gb(a,k,null):{anchor:d.anchorBefore,head:d.headBefore};Ob(a,k,l,qb(a,k));var m=[];Nc(a,function(a,b){b||-1!=Cc(m,a.history)||(Le(a.history,k),m.push(a.history));Ob(a,k,null,qb(a,k))})}}}}function Yb(a,b){function c(a){return ha(a.line+b,a.ch)}a.first+=b;a.cm&&Da(a.cm,a.first,a.first,b);a.sel.head=
c(a.sel.head);a.sel.anchor=c(a.sel.anchor);a.sel.from=c(a.sel.from);a.sel.to=c(a.sel.to)}function Ob(a,b,c,d){if(a.cm&&!a.cm.curOp)return Y(a.cm,Ob)(a,b,c,d);if(b.to.line<a.first)Yb(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Yb(a,e);b={from:ha(a.first,0),to:ha(b.to.line+e,b.to.ch),text:[bc(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:ha(e,ma(a,e).text.length),text:[b.text[0]],
origin:b.origin});b.removed=$d(a,b.from,b.to);c||(c=Gb(a,b,null));a.cm?lb(a.cm,b,d,c):Zd(a,b,d,c)}}function lb(a,c,d,e){var f=a.doc,g=a.display,k=c.from,l=c.to,n=!1,q=k.line;a.options.lineWrapping||(q=ic(A(f,ma(f,k.line))),f.iter(q,l.line+1,function(a){if(a==g.maxLine)return n=!0}));Fa(f.sel.head,c.from)||Fa(c.to,f.sel.head)||(a.curOp.cursorActivity=!0);Zd(f,c,d,e,m(a));a.options.lineWrapping||(f.iter(q,k.line+c.text.length,function(a){var c=b(f,a);c>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=
c,g.maxLineChanged=!0,n=!1)}),n&&(a.curOp.updateMaxLine=!0));f.frontier=Math.min(f.frontier,k.line);S(a,400);Da(a,k.line,l.line+1,c.text.length-(l.line-k.line)-1);if(Jc(a,"change"))if(c={from:k,to:l,text:c.text,removed:c.removed,origin:c.origin},a.curOp.textChanged){for(a=a.curOp.textChanged;a.next;a=a.next);a.next=c}else a.curOp.textChanged=c}function db(a,b,c,d,e){d||(d=c);if(Fa(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=Ic(b));Ab(a,{from:c,to:d,text:b,origin:e},null)}function ha(a,b){if(!(this instanceof
ha))return new ha(a,b);this.line=a;this.ch=b}function ta(a,b){return a.line==b.line&&a.ch==b.ch}function Fa(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function ab(a){return ha(a.line,a.ch)}function la(a,b){if(b.line<a.first)return ha(a.first,0);var c=a.first+a.size-1;return b.line>c?ha(c,ma(a,c).text.length):Hb(b,ma(a,b.line).text.length)}function Hb(a,b){var c=a.ch;return null==c||c>b?ha(a.line,b):0>c?ha(a.line,0):a}function Zb(a,b){return b>=a.first&&b<a.first+a.size}function Za(a,b,c,
d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Fa(b,e);f!=Fa(c,e)?(e=b,b=c):f!=Fa(b,c)&&(b=c)}vb(a,e,b,d)}else vb(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function vb(a,b,c,d,e){if(!e&&Jc(a,"beforeSelectionChange")||a.cm&&Jc(a.cm,"beforeSelectionChange"))b={anchor:b,head:c},Qb(a,"beforeSelectionChange",a,b),a.cm&&Qb(a.cm,"beforeSelectionChange",a.cm,b),b.anchor=la(a,b.anchor),b.head=la(a,b.head),c=b.head,b=b.anchor;var f=a.sel;f.goalColumn=null;if(e||!ta(b,f.anchor))b=bb(a,
b,d,"push"!=e);if(e||!ta(c,f.head))c=bb(a,c,d,"push"!=e);ta(f.anchor,b)&&ta(f.head,c)||(f.anchor=b,f.head=c,d=Fa(c,b),f.from=d?c:b,f.to=d?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),ac(a,"cursorActivity",a))}function wb(a){vb(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function bb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var k=ma(a,f.line);if(k.markedSpans)for(var l=0;l<k.markedSpans.length;++l){var m=k.markedSpans[l],n=m.marker;if((null==
m.from||(n.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(n.inclusiveRight?m.to>=f.ch:m.to>f.ch))){if(d&&(Qb(n,"beforeCursorEnter"),n.explicitlyCleared))if(k.markedSpans){--l;continue}else break;if(n.atomic){l=n.find()[0>g?"from":"to"];if(ta(l,f)&&(l.ch+=g,0>l.ch?l=l.line>a.first?la(a,ha(l.line-1)):null:l.ch>k.text.length&&(l=l.line<a.first+a.size-1?ha(l.line+1,0):null),!l)){if(e){if(!d)return bb(a,b,c,!0);a.cantEdit=!0;return ha(a.first,0)}e=!0;l=b;g=-g}f=l;continue a}}}return f}}function Jb(a,
b,c){for(null==c&&(c=0);;){var d=!1,e=W(a,b),f=yc(a,e.left,e.top-c,e.left,e.bottom+c),g=a.doc.scrollTop,k=a.doc.scrollLeft;null!=f.scrollTop&&(Fb(a,f.scrollTop),1<Math.abs(a.doc.scrollTop-g)&&(d=!0));null!=f.scrollLeft&&(Pa(a,f.scrollLeft),1<Math.abs(a.doc.scrollLeft-k)&&(d=!0));if(!d)return e}}function yc(a,b,c,d,e){var f=a.display,g=R(a.display);0>c&&(c=0);var k=f.scroller.clientHeight-kc,l=f.scroller.scrollTop,m={};a=a.doc.height+(f.mover.offsetHeight-f.lineSpace.offsetHeight);var n=c<g,g=e>a-
g;c<l?m.scrollTop=n?0:c:e>l+k&&(c=Math.min(c,(g?a:e)-k),c!=l&&(m.scrollTop=c));l=f.scroller.clientWidth-kc;c=f.scroller.scrollLeft;b+=f.gutters.offsetWidth;d+=f.gutters.offsetWidth;f=f.gutters.offsetWidth;e=b<f+10;b<c+f||e?(e&&(b=0),m.scrollLeft=Math.max(0,b-10-f)):d>l+c-3&&(m.scrollLeft=d+10-l);return m}function Ba(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function ob(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,
scrollTop:a.doc.scrollTop});a=a.display.scroller;d.scrollTop=Math.max(0,Math.min(a.scrollHeight-a.clientHeight,d.scrollTop+c));d.scrollLeft=Math.max(0,Math.min(a.scrollWidth-a.clientWidth,d.scrollLeft+b))}function La(a,b,c,d){var e=a.doc;null==c&&(c="add");if("smart"==c)if(a.doc.mode.indent)var f=T(a,b);else c="prev";var g=a.options.tabSize,k=ma(e,b),l=rd(k.text,null,g),m=k.text.match(/^\s*/)[0],n;if("smart"==c&&(n=a.doc.mode.indent(f,k.text.slice(m.length),k.text),n==Qd)){if(!d)return;c="prev"}"prev"==
c?n=b>e.first?rd(ma(e,b-1).text,null,g):0:"add"==c?n=l+a.options.indentUnit:"subtract"==c?n=l-a.options.indentUnit:"number"==typeof c&&(n=l+c);n=Math.max(0,n);c="";d=0;if(a.options.indentWithTabs)for(e=Math.floor(n/g);e;--e)d+=g,c+="\t";d<n&&(c+=$e(n-d));c!=m&&db(a.doc,c,ha(b,0),ha(b,m.length),"+input");k.stateAfter=null}function Kb(a,b,c){var d=b,e=b,f=a.doc;"number"==typeof b?e=ma(f,Math.max(f.first,Math.min(b,f.first+f.size-1))):d=ic(b);if(null!=d&&c(e,d))Da(a,d,d+1);else return null;return e}
function Pb(a,b,c,d,e){function f(b){var d=(e?uc:af)(l,k,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=m=!1:(g=b,b=l=ma(a,b));if(b)k=e?(0>c?td:sd)(l):0>c?l.text.length:0;else return m=!1}else k=d;return!0}var g=b.line,k=b.ch;b=c;var l=ma(a,g),m=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var n=null;d="group"==d;for(var q=!0;!(0>c)||f(!q);q=!1){var t=l.text.charAt(k)||"\n",t=Rd(t)?"w":d?/\s/.test(t)?null:"p":null;if(n&&n!=t){0>c&&(c=1,f());break}t&&
(n=t);if(0<c&&!f(!q))break}}b=bb(a,ha(g,k),b,!0);m||(b.hitSide=!0);return b}function pb(a,b,c,d){var e=a.doc,f=b.left,g;"page"==d?(d=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(d-(0>c?1.5:0.5)*R(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){var k=ca(a,f,g);if(!k.outside)break;if(0>c?0>=g:g>=e.height){k.hitSide=!0;break}g+=5*c}return k}function Bb(a,b){var c=b.ch,d=b.ch;if(a){(0>b.xRel||d==a.length)&&c?--c:++d;for(var e=
a.charAt(c),e=Rd(e)?Rd:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Rd(a)};0<c&&e(a.charAt(c-1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:ha(b.line,c),to:ha(b.line,d)}}function fb(a,b){Za(a.doc,ha(b,0),la(a.doc,ha(b+1,0)))}function ia(a,b,c,d){g.defaults[a]=b;c&&(nd[a]=d?function(a,b,d){d!=xe&&c(a,b,d)}:c)}function gb(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=
e}return c}function qc(a,b,c){return a.startState?a.startState(b,c):!0}function Lb(a){return"string"==typeof a?Gc[a]:a}function xb(a,b,c){function d(b){b=Lb(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(var e=0,f=b.length;e<f;++e){var g=d(b[e]);if(g)return g}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}}function fc(a){a=
Sc[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function Cb(a,b){if(mc&&34==a.keyCode&&a["char"])return!1;var c=Sc[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(bf?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(bf?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c}function cb(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lastColumnPos=this.lastColumnValue=0}function Qa(a,b){this.lines=[];this.type=b;this.doc=a}function kb(a,b,c,d,e){if(d&&
d.shared)return fa(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return Y(a.cm,kb)(a,b,c,d,e);var f=new Qa(a,e);if("range"==e&&!Fa(b,c))return f;d&&je(d,f);f.replacedWith&&(f.collapsed=!0,f.replacedWith=oa("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.replacedWith.ignoreEvents=!0));f.collapsed&&($c=!0);f.addToHistory&&Ke(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var g=b.line,k=0,l,m,n=a.cm,q;a.iter(g,c.line+1,function(d){n&&f.collapsed&&!n.options.lineWrapping&&
A(a,d)==n.display.maxLine&&(q=!0);var e={from:null,to:null,marker:f};k+=d.text.length;g==b.line&&(e.from=b.ch,k-=b.ch);g==c.line&&(e.to=c.ch,k-=d.text.length-c.ch);f.collapsed&&(g==c.line&&(m=Wa(d,c.ch)),g==b.line?l=Wa(d,b.ch):ec(d,0));d.markedSpans=d.markedSpans?d.markedSpans.concat([e]):[e];e.marker.attachLine(d);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){E(a,b)&&ec(b,0)});f.clearOnEnter&&Aa(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(Je=!0,(a.history.done.length||a.history.undone.length)&&
a.clearHistory());if(f.collapsed){if(l!=m)throw Error("Inserting collapsed marker overlapping an existing one");f.size=k;f.atomic=!0}n&&(q&&(n.curOp.updateMaxLine=!0),(f.className||f.title||f.startStyle||f.endStyle||f.collapsed)&&Da(n,b.line,c.line+1),f.atomic&&wb(n));return f}function Oa(a,b){this.markers=a;this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Aa(a[c],"clear",function(){d.clear()})}function fa(a,b,c,d,e){d=je(d);d.shared=!1;var f=[kb(a,b,c,d,e)],g=f[0],k=d.replacedWith;
Nc(a,function(a){k&&(d.replacedWith=k.cloneNode(!0));f.push(kb(a,la(a,b),la(a,c),d,e));for(var l=0;l<a.linked.length;++l)if(a.linked[l].isParent)return;g=bc(f)});return new Oa(f,g)}function Ua(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function ub(a,b){var c=Zb(a,b.from.line)&&ma(a,b.from.line).markedSpans,d=Zb(a,b.to.line)&&ma(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=ta(b.from,b.to);if(c)for(var k=0,l;k<c.length;++k){var m=c[k],n=m.marker;
if(null==m.from||(n.inclusiveLeft?m.from<=e:m.from<e)||"bookmark"==n.type&&!(m.from!=e||g&&m.marker.insertLeft)){var q=null==m.to||(n.inclusiveRight?m.to>=e:m.to>e);(l||(l=[])).push({from:m.from,to:q?null:m.to,marker:n})}}c=l;if(d)for(var k=0,t;k<d.length;++k)if(l=d[k],m=l.marker,null==l.to||(m.inclusiveRight?l.to>=f:l.to>f)||"bookmark"==m.type&&l.from==f&&(!g||l.marker.insertLeft))n=null==l.from||(m.inclusiveLeft?l.from<=f:l.from<f),(t||(t=[])).push({from:n?null:l.from-f,to:null==l.to?null:l.to-
f,marker:m});d=t;g=1==b.text.length;t=bc(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(k=c[f],null==k.to)(l=Ua(d,k.marker),l)?g&&(k.to=null==l.to?null:l.to+t):k.to=e;if(d)for(f=0;f<d.length;++f)k=d[f],null!=k.to&&(k.to+=t),null==k.from?(l=Ua(c,k.marker),l||(k.from=t,g&&(c||(c=[])).push(k))):(k.from+=t,g&&(c||(c=[])).push(k));if(g&&c){for(f=0;f<c.length;++f)null!=c[f].from&&c[f].from==c[f].to&&"bookmark"!=c[f].marker.type&&c.splice(f--,1);c.length||(c=null)}e=[c];if(!g){var g=b.text.length-
2,A;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(A||(A=[])).push({from:null,to:null,marker:c[f].marker});for(f=0;f<g;++f)e.push(A);e.push(d)}return e}function qb(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(cd(c[d]));c=e}else c=null;d=ub(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var k=0;a:for(;k<g.length;++k){for(var l=g[k],m=0;m<f.length;++m)if(f[m].marker==l.marker)continue a;f.push(l)}}else g&&(c[e]=g)}return c}function Sb(a,
b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Cc(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(),f=0;f<a.length;++f){var g=a[f];if(!Fa(g.to,e.from)&&!Fa(e.to,g.from)){var k=[f,1];(Fa(g.from,e.from)||!c.inclusiveLeft&&ta(g.from,e.from))&&k.push({from:g.from,to:e.from});(Fa(e.to,g.to)||!c.inclusiveRight&&ta(g.to,e.to))&&k.push({from:e.to,
to:g.to});a.splice.apply(a,k);f+=k.length-1}}}return a}function Wa(a,b){var c=$c&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!d||d.width<e.marker.width)&&(d=e.marker);return d}function Tb(a){return Wa(a,a.text.length+1)}function A(a,b){for(var c;c=Wa(b,-1);)b=ma(a,c.find().from.line);return b}function E(a,b){var c=$c&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.replacedWith&&
0==d.from&&d.marker.inclusiveLeft&&L(a,b,d)))return!0}function L(a,b,c){if(null==c.to)return b=c.marker.find().to,b=ma(a,b.line),L(a,b,Ua(b.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.replacedWith&&d.from==c.to&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&L(a,b,d))return!0}function X(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);
a.markedSpans=null}}function da(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function wa(a){return function(){var b=!this.cm.curOp;b&&Ha(this.cm);try{var c=a.apply(this,arguments)}finally{b&&va(this.cm)}return c}}function Xc(a){if(null!=a.height)return a.height;a.node.parentNode&&1==a.node.parentNode.nodeType||lc(a.cm.display.measure,oa("div",[a.node],null,"position: relative"));return a.height=a.node.offsetHeight}function rc(a,b,c,d){var e=new ke(a,c,d);e.noHScroll&&
(a.display.alignWidgets=!0);Kb(a,b,function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;if(!E(a.doc,b)||e.showIfHidden)c=id(a,b)<a.doc.scrollTop,ec(b,b.height+Xc(e)),c&&ob(a,0,e.height);return!0});return e}function kd(a,b,c,d,e){var f=c.flattenSpans;null==f&&(f=a.options.flattenSpans);var g=0,k=null,l=new cb(b,a.options.tabSize),m;for(""==b&&c.blankLine&&c.blankLine(d);!l.eol();)l.pos>a.options.maxHighlightLength?
(f=!1,l.pos=Math.min(b.length,l.start+5E4),m=null):m=c.token(l,d),f&&k==m||(g<l.start&&e(l.start,k),g=l.start,k=m),l.start=l.pos;g<l.pos&&e(l.pos,k)}function Yc(a,b,c){var d=[a.state.modeGen];kd(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(c=0;c<a.state.overlays.length;++c){var e=a.state.overlays[c],f=1,g=0;kd(a,b.text,e.mode,!0,function(a,b){for(var c=f;g<a;){var k=d[f];k>a&&d.splice(f,1,a,d[f+1],k);f+=2;g=Math.min(a,k)}if(b)if(e.opaque)d.splice(c,f-c,a,b),f=c+2;else for(;c<f;c+=2)k=d[c+
1],d[c+1]=k?k+" "+b:b})}return d}function Id(a,b){b.styles&&b.styles[0]==a.state.modeGen||(b.styles=Yc(a,b,b.stateAfter=T(a,ic(b))));return b.styles}function Xb(a,b,c){var d=a.doc.mode,e=new cb(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,c),e.start=e.pos}function Ib(a){return a?xd[a]||(xd[a]="cm-"+a.replace(/ +/g," cm-")):null}function hb(a,b,c,d){for(var e,f=b,g=!0;e=Wa(f,-1);)f=ma(a.doc,e.find().from.line);d={pre:oa("pre"),
col:0,pos:0,measure:null,measuredSomething:!1,cm:a,copyWidgets:d};f.textClass&&(d.pre.className=f.textClass);do{f.text&&(g=!1);d.measure=f==b&&c;d.pos=0;d.addToken=d.measure?te:ld;(mb||jc)&&a.getOption("lineWrapping")&&(d.addToken=Xd(d.addToken));a:{e=d;var k=Id(a,f),l=f.markedSpans,m=f.text,n=0;if(l)for(var q=m.length,t=0,A=1,p="",v=void 0,r=0,s=void 0,x=void 0,L=void 0,u=void 0,X=void 0;;){if(r==t){for(var s=x=L=u="",X=null,r=Infinity,C=null,y=0;y<l.length;++y){var da=l[y],z=da.marker;da.from<=
t&&(null==da.to||da.to>t)?(null!=da.to&&r>da.to&&(r=da.to,x=""),z.className&&(s+=" "+z.className),z.startStyle&&da.from==t&&(L+=" "+z.startStyle),z.endStyle&&da.to==r&&(x+=" "+z.endStyle),z.title&&!u&&(u=z.title),z.collapsed&&(!X||X.marker.size<z.size)&&(X=da)):da.from>t&&r>da.from&&(r=da.from);"bookmark"==z.type&&da.from==t&&z.replacedWith&&(C=z)}if(X&&(X.from||0)==t&&(Yd(e,(null==X.to?q:X.to)-t,X.marker,null==X.from),null==X.to)){e=X.marker.find();break a}C&&!X&&Yd(e,0,C)}if(t>=q)break;for(C=Math.min(q,
r);;){if(p){y=t+p.length;X||(da=y>C?p.slice(0,C-t):p,e.addToken(e,da,v?v+s:s,L,t+da.length==r?x:"",u));if(y>=C){p=p.slice(C-t);t=C;break}t=y;L=""}p=m.slice(n,n=k[A++]);v=Ib(k[A++])}}else for(var A=1;A<k.length;A+=2)e.addToken(e,m.slice(n,n=k[A]),Ib(k[A+1]));e=void 0}c&&f==b&&!d.measuredSomething&&(c[0]=d.pre.appendChild(Md(a.display.measure)),d.measuredSomething=!0);e&&(f=ma(a.doc,e.to.line))}while(e);!c||d.measuredSomething||c[0]||(c[0]=d.pre.appendChild(g?oa("span","\u00a0"):Md(a.display.measure)));
d.pre.firstChild||E(a.doc,b)||d.pre.appendChild(document.createTextNode("\u00a0"));var wa;c&&mb&&(wa=$b(f))&&(g=wa.length-1,wa[g].from==wa[g].to&&--g,f=wa[g],wa=wa[g-1],f.from+1==f.to&&wa&&f.level<wa.level&&(c=c[d.pos-1])&&c.parentNode.insertBefore(c.measureRight=Md(a.display.measure),c.nextSibling));Qb(a,"renderLine",a,b,d.pre);return d.pre}function ld(a,b,c,d,e,f){if(b){if(Sd.test(b))for(var g=document.createDocumentFragment(),k=0;;){Sd.lastIndex=k;var l=Sd.exec(b),m=l?l.index-k:b.length-k;m&&(g.appendChild(document.createTextNode(b.slice(k,
k+m))),a.col+=m);if(!l)break;k+=m+1;"\t"==l[0]?(l=a.cm.options.tabSize,l-=a.col%l,g.appendChild(oa("span",$e(l),"cm-tab")),a.col+=l):(m=oa("span","\u2022","cm-invalidchar"),m.title="\\u"+l[0].charCodeAt(0).toString(16),g.appendChild(m),a.col+=1)}else{a.col+=b.length;var g=document.createTextNode(b)}if(c||d||e||a.measure)return b=c||"",d&&(b+=d),e&&(b+=e),m=oa("span",[g],b),f&&(m.title=f),a.pre.appendChild(m);a.pre.appendChild(g)}}function te(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var k=
b.charAt(g),l=0==g;"\ud800"<=k&&"\udbff">k&&g<b.length-1?(k=b.slice(g,g+2),++g):g&&f&&le(b,g)&&a.pre.appendChild(oa("wbr"));var m=a.measure[a.pos],l=a.measure[a.pos]=ld(a,k,c,l&&d,g==b.length-1&&e);m&&(l.leftSide=m.leftSide||m);mb&&f&&" "==k&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(l.style.whiteSpace="normal");a.pos+=k.length}b.length&&(a.measuredSomething=!0)}function Xd(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,
d,e,f,g,k){return a(c,d.replace(/ {3,}/,b),e,f,g,k)}}function Yd(a,b,c,d){if(d=!d&&c.replacedWith)if(a.copyWidgets&&(d=d.cloneNode(!0)),a.pre.appendChild(d),a.measure){if(b)a.measure[a.pos]=d;else{var e=a.measure[a.pos]=Md(a.cm.display.measure);"bookmark"!=c.type||c.insertLeft?a.pre.insertBefore(e,d):a.pre.appendChild(e)}a.measuredSomething=!0}a.pos+=b}function Zd(a,b,c,d,e){function f(a,c,d){var g=e;a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);
X(a);da(a,d);c=g?g(a):1;c!=a.height&&ec(a,c);ac(a,"change",a,b)}var g=b.from,k=b.to,l=b.text,m=ma(a,g.line),n=ma(a,k.line),q=bc(l),t=c?c[l.length-1]:null,A=k.line-g.line;if(0==g.ch&&0==k.ch&&""==q){for(var p=0,v=l.length-1,E=[];p<v;++p)E.push(new dd(l[p],c?c[p]:null,e));f(n,n.text,t);A&&a.remove(g.line,A);E.length&&a.insert(g.line,E)}else if(m==n)if(1==l.length)f(m,m.text.slice(0,g.ch)+q+m.text.slice(k.ch),t);else{E=[];p=1;for(v=l.length-1;p<v;++p)E.push(new dd(l[p],c?c[p]:null,e));E.push(new dd(q+
m.text.slice(k.ch),t,e));f(m,m.text.slice(0,g.ch)+l[0],c?c[0]:null);a.insert(g.line+1,E)}else if(1==l.length)f(m,m.text.slice(0,g.ch)+l[0]+n.text.slice(k.ch),c?c[0]:null),a.remove(g.line+1,A);else{f(m,m.text.slice(0,g.ch)+l[0],c?c[0]:null);f(n,q+n.text.slice(k.ch),t);p=1;v=l.length-1;for(E=[];p<v;++p)E.push(new dd(l[p],c?c[p]:null,e));1<A&&a.remove(g.line+1,A-1);a.insert(g.line+1,E)}ac(a,"change",a,b);vb(a,d.anchor,d.head,null,!0)}function Rb(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,
d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function Wc(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function Nc(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var k=a.linked[g];if(k.doc!=e){var l=f&&k.sharedHist;if(!c||l)b(k.doc,l),d(k.doc,a,l)}}}d(a,null,!0)}function xc(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;
k(a);n(a);a.options.lineWrapping||p(a);a.options.mode=b.modeOption;Da(a)}function ma(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function $d(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function ae(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function ec(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=
c}function ic(a){if(null==a.parent)return null;var b=a.parent;a=Cc(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Jd(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function id(a,b){b=A(a.doc,b);for(var c=0,d=b.parent,
e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;else c+=f.height}for(f=d.parent;f;d=f,f=d.parent)for(e=0;e<f.children.length;++e){var g=f.children[e];if(g==d)break;else c+=g.height}return c}function $b(a){var b=a.order;null==b&&(b=a.order=Kf(a.text));return b}function jd(a){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function ue(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,
d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function pc(a,b){var c={from:{line:b.from.line,ch:b.from.ch},to:ie(b),text:$d(a,b.from,b.to)};ue(a,c,b.from.line,b.to.line+1);Nc(a,function(a){ue(a,c,b.from.line,b.to.line+1)},!0);return c}function Ke(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=bc(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var k=
bc(g.changes);ta(b.from,b.to)&&ta(b.from,k.to)?k.to=ie(b):g.changes.push(pc(a,b));g.anchorAfter=c.anchor;g.headAfter=c.head}else for(g={changes:[pc(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g),e.generation=++e.maxGeneration;e.done.length>e.undoDepth;)e.done.shift();e.lastTime=f;e.lastOp=d;e.lastOrigin=b.origin}function cd(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,
b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Td(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(e=0;e<f.length;++e){var k=f[e],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var m in k)(l=m.match(/^spans_(\d+)$/))&&-1<Cc(b,Number(l[1]))&&(bc(g)[m]=k[m],delete k[m])}}return d}function me(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}
function Me(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,k=0;k<f.changes.length;++k){var l=f.changes[k];f.copied||(l.from=ab(l.from),l.to=ab(l.to));if(c<l.from.line)l.from.line+=d,l.to.line+=d;else if(b<=l.to.line){g=!1;break}}f.copied||(f.anchorBefore=ab(f.anchorBefore),f.headBefore=ab(f.headBefore),f.anchorAfter=ab(f.anchorAfter),f.readAfter=ab(f.headAfter),f.copied=!0);g?(me(f.anchorBefore),me(f.headBefore),me(f.anchorAfter),me(f.headAfter)):(a.splice(0,e+1),e=0)}}function Le(a,b){var c=
b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Me(a.done,c,d,e);Me(a.undone,c,d,e)}function Lf(){Od(this)}function Nd(a){a.stop||(a.stop=Lf);return a}function Db(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function cf(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Od(a){Db(a);cf(a)}function Ze(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Hc&&a.ctrlKey&&1==b&&(b=3);return b}function Aa(a,b,c){a.addEventListener?a.addEventListener(b,c,
!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))}function Bc(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}}function Qb(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function ac(a,b){function c(a){return function(){a.apply(null,
e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);Qc||(++Ac,Qc=[],setTimeout(Mf,0));for(var f=0;f<d.length;++f)Qc.push(c(d[f]))}}function vc(a,b,c){Qb(a,c||b.type,a,b);return(null!=b.defaultPrevented?b.defaultPrevented:!1==b.returnValue)||b.codemirrorIgnore}function Mf(){--Ac;var a=Qc;Qc=null;for(var b=0;b<a.length;++b)a[b]()}function Jc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function yd(a){a.prototype.on=function(a,b){Aa(this,a,b)};a.prototype.off=
function(a,b){Bc(this,a,b)}}function be(){this.id=null}function rd(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function $e(a){for(;ed.length<=a;)ed.push(bc(ed)+" ");return ed[a]}function bc(a){return a[a.length-1]}function Ye(a){if(od)a.selectionStart=0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function Cc(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;
return-1}function zd(a,b){function c(){}c.prototype=a;var d=new c;b&&je(b,d);return d}function je(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function Xe(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}function tc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Rd(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||ne.test(a))}function df(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}
function oa(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)de(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function ce(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function lc(a,b){return ce(a).appendChild(b)}function de(a,b){gc?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function nb(a){return a.getBoundingClientRect()}function le(){return!1}function Kd(a){if(null!=
vd)return vd;var b=oa("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");lc(a,b);b.offsetWidth&&(vd=b.offsetHeight-b.clientHeight);return vd||0}function Md(a){if(null==oe){var b=oa("span","\u200b");lc(a,oa("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(oe=1>=b.offsetWidth&&2<b.offsetHeight&&!Zc)}return oe?oa("span","\u200b"):oa("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function We(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=
!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function Ae(a){return a.level%2?a.to:a.from}function ee(a){return a.level%2?a.from:a.to}function sd(a){return(a=$b(a))?Ae(a[0]):0}function td(a){var b=$b(a);return b?ee(bc(b)):a.text.length}function Ud(a,b){var c=ma(a.doc,b),d=A(a.doc,c);d!=c&&(b=ic(d));d=(c=$b(d))?c[0].level%2?td(d):sd(d):0;return ha(b,d)}function Nf(a,b){for(var c,d;c=Tb(d=ma(a.doc,
b));)b=c.find().to.line;d=(c=$b(d))?c[0].level%2?sd(d):td(d):d.text.length;return ha(b,d)}function Be(a,b){for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return Oc=null,c;if(e.from==b||e.to==b)if(null==d)d=c;else{var e=e.level,f=a[d].level,g=a[0].level,e=e==g?!0:f==g?!1:e<f;if(e)return Oc=d,c;Oc=c;return d}}Oc=null;return d}function Ne(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&ud.test(a.text.charAt(b)));return b}function uc(a,b,c,d){var e=$b(a);if(!e)return af(a,b,c,d);var f=Be(e,
b),g=e[f];for(b=Ne(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(Be(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?Ne(a,g.to,-1,d):Ne(a,g.from,1,d)}}function af(a,b,c,d){b+=c;if(d)for(;0<b&&ud.test(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Rc=/gecko\/\d/i.test(navigator.userAgent),mb=/MSIE \d/.test(navigator.userAgent),Zc=mb&&(null==document.documentMode||8>document.documentMode),gc=mb&&
(null==document.documentMode||9>document.documentMode),jc=/WebKit\//.test(navigator.userAgent),Of=jc&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ef=/Chrome\//.test(navigator.userAgent),mc=/Opera\//.test(navigator.userAgent),Ge=/Apple Computer/.test(navigator.vendor),ze=/KHTML\//.test(navigator.userAgent),Se=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Te=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Ce=/PhantomJS/.test(navigator.userAgent),od=/AppleWebKit/.test(navigator.userAgent)&&
/Mobile\/\w+/.test(navigator.userAgent),Fc=od||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Hc=od||/Mac/.test(navigator.platform),Pf=/windows/i.test(navigator.platform),Kc=mc&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Kc&&(Kc=Number(Kc[1]));Kc&&15<=Kc&&(mc=!1,jc=!0);var bf=Hc&&(Of||mc&&(null==Kc||12.11>Kc)),Ee=Rc||mb&&!gc,Je=!1,$c=!1,Pc,Ld=0,wd,Pd,Fe=0,bd=0,nc=null;mb?nc=-0.53:Rc?nc=15:ef?nc=-0.7:Ge&&(nc=-1/3);var Ie,ge=null,he,ie=g.changeEnd=function(a){return a.text?
ha(a.from.line+a.text.length-1,bc(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};g.Pos=ha;g.prototype={constructor:g,focus:function(){window.focus();Ta(this);xa(this);Ea(this)},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,nd.hasOwnProperty(a)&&Y(this,nd[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,
c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:Y(null,function(a,b){var c=a.token?a:g.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;Da(this)}),removeOverlay:Y(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;
Da(this);break}}}),indentLine:Y(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");Zb(this.doc,a)&&La(this,a,b,c)}),indentSelection:Y(null,function(a){var b=this.doc.sel;if(ta(b.from,b.to))return La(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),b=b.from.line;b<=c;++b)La(this,b,a)}),getTokenAt:function(a,b){var c=this.doc;a=la(c,a);for(var d=T(this,a.line,b),e=this.doc.mode,c=ma(c,a.line),c=new cb(c.text,this.options.tabSize);c.pos<
a.ch&&!c.eol();){c.start=c.pos;var f=e.token(c,d)}return{start:c.start,end:c.pos,string:c.current(),className:f||null,type:f||null,state:d}},getTokenTypeAt:function(a){a=la(this.doc,a);var b=Id(this,ma(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)return b[2];for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else return b[2*e+2]}},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?g.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){if(Ad.hasOwnProperty(b)){var c=
Ad[b],d=this.getModeAt(a);return d[b]&&c[d[b]]||d.helperType&&c[d.helperType]||c[d.name]}},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return T(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel;c=null==a?c.head:"object"==typeof a?la(this.doc,a):a?c.from:c.to;return W(this,c,b||"page")},charCoords:function(a,b){return na(this,la(this.doc,a),b||"page")},coordsChar:function(a,b){a=ga(this,a,b||"page");return ca(this,
a.left,a.top)},lineAtHeight:function(a,b){a=ga(this,{top:a,left:0},b||"page").top;return Jd(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=ma(this.doc,a);return ea(this,ma(this.doc,a),{top:0,left:0},b||"page").top+(c?d.height:0)},defaultTextHeight:function(){return R(this.display)},defaultCharWidth:function(){return ya(this.display)},setGutterMarker:Y(null,function(a,b,c){return Kb(this,
a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&df(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:Y(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Da(b,d,d+1),df(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineClass:Y(null,function(a,b,c){return Kb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;
a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:Y(null,function(a,b,c){return Kb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),addLineWidget:Y(null,function(a,b,c){return rc(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==
typeof a){if(!Zb(this.doc,a))return null;var b=a;a=ma(this.doc,a);if(!a)return null}else if(b=ic(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=W(this,la(this.doc,a));var g=a.bottom,k=a.left;b.style.position="absolute";f.sizer.appendChild(b);
if("over"==d)g=a.top;else if("above"==d||"near"==d){var l=Math.max(f.wrapper.clientHeight,this.doc.height),m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>l)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=l&&(g=a.bottom);k+b.offsetWidth>m&&(k=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(k=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?k=0:"middle"==e&&(k=(f.sizer.clientWidth-b.offsetWidth)/
2),b.style.left=k+"px");c&&(a=yc(this,k,g,k+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&Fb(this,a.scrollTop),null!=a.scrollLeft&&Pa(this,a.scrollLeft))},triggerOnKeyDown:Y(null,Xa),execCommand:function(a){return He[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=la(this.doc,a);f<b&&(a=Pb(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:Y(null,function(a,b){var c=this.doc.sel,c=c.shift||c.extend||ta(c.from,c.to)?Pb(this.doc,c.head,a,b,this.options.rtlMoveVisually):
0>a?c.from:c.to;Za(this.doc,c,c,a)}),deleteH:Y(null,function(a,b){var c=this.doc.sel;ta(c.from,c.to)?db(this.doc,"",c.from,Pb(this.doc,c.head,a,b,!1),"+delete"):db(this.doc,"",c.from,c.to,"+delete");this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=la(this.doc,a);f<b&&(a=W(this,a,"div"),null==d?d=a.left:a.left=d,a=pb(this,a,e,c),!a.hitSide);++f);return a},moveV:Y(null,function(a,b){var c=this.doc.sel,d=W(this,c.head,"div");null!=c.goalColumn&&(d.left=
c.goalColumn);var e=pb(this,d,a,b);"page"==b&&ob(this,0,na(this,e,"div").top-d.top);Za(this.doc,e,e,a);c.goalColumn=d.left}),toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:Y(null,function(a,b){Ba(this,a,b)}),getScrollInfo:function(){var a=
this.display.scroller,b=kc;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:Y(null,function(a,b){"number"==typeof a&&(a=ha(a,0));b||(b=0);var c=a;a&&null==a.line||(this.curOp.scrollToPos=a?la(this.doc,a):this.doc.sel.head,this.curOp.scrollToPosMargin=b,c=W(this,this.curOp.scrollToPos));c=yc(this,c.left,c.top-b,c.right,c.bottom+b);Ba(this,c.scrollLeft,c.scrollTop)}),setSize:Y(null,function(a,
b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0);this.curOp.forceUpdate=!0}),operation:function(a){return za(this,a)},refresh:Y(null,function(){aa(this);Ba(this,this.doc.scrollLeft,this.doc.scrollTop);Da(this)}),swapDoc:Y(null,function(a){var b=this.doc;b.cm=null;xc(this,a);
aa(this);rb(this,!0);Ba(this,a.scrollLeft,a.scrollTop);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};yd(g);var nd=g.optionHandlers={},we=g.defaults={},xe=g.Init={toString:function(){return"CodeMirror.Init"}};ia("value","",function(a,b){a.setValue(b)},!0);ia("mode",null,function(a,b){a.doc.modeOption=b;n(a)},
!0);ia("indentUnit",2,n,!0);ia("indentWithTabs",!1);ia("smartIndent",!0);ia("tabSize",4,function(a){n(a);aa(a);Da(a)},!0);ia("electricChars",!0);ia("rtlMoveVisually",!Pf);ia("theme","default",function(a){l(a);d(a)},!0);ia("keyMap","default",e);ia("extraKeys",null);ia("onKeyEvent",null);ia("onDragEvent",null);ia("lineWrapping",!1,function(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",
""),p(a));k(a);Da(a);aa(a);setTimeout(function(){u(a)},100)},!0);ia("gutters",[],function(a){r(a.options);d(a)},!0);ia("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?x(a.display)+"px":"0";a.refresh()},!0);ia("coverGutterNextToScrollbar",!1,u,!0);ia("lineNumbers",!1,function(a){r(a.options);d(a)},!0);ia("firstLineNumber",1,d,!0);ia("lineNumberFormatter",function(a){return a},d,!0);ia("showCursorWhenSelecting",!1,J,!0);ia("readOnly",!1,function(a,b){"nocursor"==b?(sa(a),a.display.input.blur()):
b||rb(a,!0)});ia("dragDrop",!0);ia("cursorBlinkRate",530);ia("cursorScrollMargin",0);ia("cursorHeight",1);ia("workTime",100);ia("workDelay",100);ia("flattenSpans",!0);ia("pollInterval",100);ia("undoDepth",40,function(a,b){a.doc.history.undoDepth=b});ia("historyEventDelay",500);ia("viewportMargin",10,function(a){a.refresh()},!0);ia("maxHighlightLength",1E4,function(a){n(a);a.refresh()},!0);ia("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});
ia("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});ia("autofocus",null);var Oe=g.modes={},Bd=g.mimeModes={};g.defineMode=function(a,b){g.defaults.mode||"null"==a||(g.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}Oe[a]=b};g.defineMIME=function(a,b){Bd[a]=b};g.resolveMode=function(a){if("string"==typeof a&&Bd.hasOwnProperty(a))a=Bd[a];else if(a&&"string"==typeof a.name&&Bd.hasOwnProperty(a.name)){var b=Bd[a.name];
a=zd(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return g.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};g.getMode=function(a,b){b=g.resolveMode(b);var c=Oe[b.name];if(!c)return g.getMode(a,"text/plain");c=c(a,b);if(Cd.hasOwnProperty(b.name)){var d=Cd[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;return c};g.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});
g.defineMIME("text/plain","null");var Cd=g.modeExtensions={};g.extendMode=function(a,b){var c=Cd.hasOwnProperty(a)?Cd[a]:Cd[a]={};je(b,c)};g.defineExtension=function(a,b){g.prototype[a]=b};g.defineDocExtension=function(a,b){Mb.prototype[a]=b};g.defineOption=ia;var ye=[];g.defineInitHook=function(a){ye.push(a)};var Ad=g.helpers={};g.registerHelper=function(a,b,c){Ad.hasOwnProperty(a)||(Ad[a]=g[a]={});Ad[a][b]=c};g.isWordChar=Rd;g.copyState=gb;g.startState=qc;g.innerMode=function(a,b){for(;a.innerMode;){var c=
a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var He=g.commands={selectAll:function(a){a.setSelection(ha(a.firstLine(),0),ha(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!ta(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:ha(b.line),"+delete"):a.replaceRange("",b,ha(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",ha(b,0),ha(b),"+delete")},delLineLeft:function(a){var b=
a.getCursor();a.replaceRange("",ha(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(ha(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(ha(a.lastLine()))},goLineStart:function(a){a.extendSelection(Ud(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=Ud(a,b.line),d=a.getLineHandle(c.line),e=$b(d);e&&0!=e[0].level?a.extendSelection(c):(d=Math.max(0,d.text.search(/\S/)),a.extendSelection(ha(c.line,
b.line==c.line&&b.ch<=d&&b.ch?0:d)))},goLineEnd:function(a){a.extendSelection(Nf(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,
"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},
delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t",
"end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),ha(b.line,b.ch-1),ha(b.line,b.ch+1))},newlineAndIndent:function(a){Y(a,function(){a.replaceSelection("\n","end","+input");a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},Gc=g.keyMap={};Gc.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",
PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};Gc.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore",
"Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};Gc.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore",
"Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};Gc["default"]=Hc?Gc.macDefault:Gc.pcDefault;Gc.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart",
"Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};g.lookupKey=xb;g.isModifierKey=fc;g.keyName=Cb;g.fromTextArea=function(a,b){function c(){a.value=n.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=document.body;
try{d=document.activeElement}catch(e){}b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(Aa(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var f=a.form,k=f.submit;try{var l=f.submit=function(){c();f.submit=k;f.submit();f.submit=l}}catch(m){}}a.style.display="none";var n=g(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);n.save=c;n.getTextArea=function(){return a};n.toTextArea=function(){c();a.parentNode.removeChild(n.getWrapperElement());a.style.display="";
a.form&&(Bc(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=k))};return n};cb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););
return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=rd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue},
indentation:function(){return rd(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)}};g.StringStream=cb;g.TextMarker=Qa;yd(Qa);Qa.prototype.clear=function(){if(!this.explicitlyCleared){var a=
this.doc.cm,c=a&&!a.curOp;c&&Ha(a);if(Jc(this,"clear")){var d=this.find();d&&ac(this,"clear",d.from,d.to)}for(var e=d=null,f=0;f<this.lines.length;++f){var g=this.lines[f],k=Ua(g.markedSpans,this);null!=k.to&&(e=ic(g));for(var l=g,m=g.markedSpans,n=k,q=void 0,t=0;t<m.length;++t)m[t]!=n&&(q||(q=[])).push(m[t]);l.markedSpans=q;null!=k.from?d=ic(g):this.collapsed&&!E(this.doc,g)&&a&&ec(g,R(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(f=0;f<this.lines.length;++f)g=A(a.doc,this.lines[f]),
k=b(a.doc,g),k>a.display.maxLineLength&&(a.display.maxLine=g,a.display.maxLineLength=k,a.display.maxLineChanged=!0);null!=d&&a&&Da(a,d,e+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&wb(a));c&&va(a)}};Qa.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=Ua(d.markedSpans,this);if(null!=e.from||null!=e.to)d=ic(d),null!=e.from&&(a=ha(d,e.from)),null!=e.to&&(b=ha(d,e.to))}return"bookmark"==this.type?a:a&&
{from:a,to:b}};Qa.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){var c=ma(this.doc,a.from.line);N(b,c);if(a.from.line>=b.display.showingFrom&&a.from.line<b.display.showingTo){for(a=b.display.lineDiv.firstChild;a;a=a.nextSibling)if(a.lineObj==c){a.offsetHeight!=c.height&&ec(c,a.offsetHeight);break}za(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=b.curOp.updateMaxLine=!0})}}};Qa.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;
b.maybeHiddenMarkers&&-1!=Cc(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Qa.prototype.detachLine=function(a){this.lines.splice(Cc(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};g.SharedTextMarker=Oa;yd(Oa);Oa.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();
ac(this,"clear")}};Oa.prototype.find=function(){return this.primary.find()};var ke=g.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};yd(ke);ke.prototype.clear=wa(function(){var a=this.line.widgets,b=ic(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null);a=id(this.cm,this.line)<this.cm.doc.scrollTop;ec(this.line,Math.max(0,this.line.height-Xc(this)));a&&ob(this.cm,0,-this.height);
Da(this.cm,b,b+1)}});ke.prototype.changed=wa(function(){var a=this.height;this.height=null;if(a=Xc(this)-a)ec(this.line,this.line.height+a),a=ic(this.line),Da(this.cm,a,a+1)});var dd=g.Line=function(a,b,c){this.text=a;da(this,b);this.height=c?c(this):1};yd(dd);var xd={},Sd=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;Rb.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;
X(f);ac(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Wc.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],
e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(c=[],this.collapse(c),this.children=[new Rb(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],
g=f.chunkSize();if(a<=g){f.insertInner(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new Rb(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Wc(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Cc(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Wc(a.children),
c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){g=Math.min(b,g-a);if(f.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};var Qf=0,Mb=g.Doc=function(a,b,c){if(!(this instanceof Mb))return new Mb(a,b,c);null==c&&(c=0);Wc.call(this,[new Rb([new dd("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.history=
jd();this.cleanGeneration=1;this.frontier=c;c=ha(c,0);this.sel={from:c,to:c,head:c,anchor:c,shift:!1,extend:!1,goalColumn:null};this.id=++Qf;this.modeOption=b;"string"==typeof a&&(a=Ic(a));Zd(this,{from:c,to:c,text:a},null,{head:c,anchor:c})};Mb.prototype=zd(Wc.prototype,{constructor:Mb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,
b){this.removeInner(a-this.first,b)},getValue:function(a){var b=ae(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:function(a){var b=ha(this.first,0),c=this.first+this.size-1;Ab(this,{from:b,to:ha(c,ma(this,c).text.length),text:Ic(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=la(this,b);c=c?la(this,c):b;db(this,a,b,c,d)},getRange:function(a,b,c){a=$d(this,la(this,a),la(this,b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=
this.getLineHandle(a))&&a.text},setLine:function(a,b){Zb(this,a)&&db(this,b,ha(a,0),la(this,ha(a)))},removeLine:function(a){a?db(this,"",la(this,ha(a-1)),la(this,ha(a))):db(this,"",ha(0,0),la(this,ha(1,0)))},getLineHandle:function(a){if(Zb(this,a))return ma(this,a)},getLineNumber:function(a){return ic(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=ma(this,a));return A(this,a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+
this.size-1},clipPos:function(a){return la(this,a)},getCursor:function(a){var b=this.sel;return ab(null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||!1===a?b.to:b.from)},somethingSelected:function(){return!ta(this.sel.head,this.sel.anchor)},setCursor:Ca(function(a,b,c){a=la(this,"number"==typeof a?ha(a,b||0):a);c?Za(this,a):vb(this,a,a)}),setSelection:Ca(function(a,b){vb(this,la(this,a),la(this,b||a))}),extendSelection:Ca(function(a,b){Za(this,la(this,a),b&&la(this,b))}),getSelection:function(a){return this.getRange(this.sel.from,
this.sel.to,a)},replaceSelection:function(a,b,c){Ab(this,{from:this.sel.from,to:this.sel.to,text:Ic(a),origin:c},b||"around")},undo:Ca(function(){Na(this,"undo")}),redo:Ca(function(){Na(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=jd(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){this.history.lastOp=
this.history.lastOrigin=null;return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Td(this.history.done),undone:Td(this.history.undone)}},setHistory:function(a){var b=this.history=jd(this.history.maxGeneration);b.done=a.done.slice(0);b.undone=a.undone.slice(0)},markText:function(a,b,c){return kb(this,la(this,a),la(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:
b),insertLeft:b&&b.insertLeft};a=la(this,a);return kb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=la(this,a);var b=[],c=ma(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=
d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return la(this,ha(c,b))},indexFromPos:function(a){a=la(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new Mb(ae(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn};
a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Mb(ae(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];return b},unlinkDoc:function(a){a instanceof g&&(a=a.doc);if(this.linked)for(var b=
0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);break}if(a.history==this.history){var c=[a.id];Nc(a,function(a){c.push(a.id)},!0);a.history=jd();a.history.done=Td(this.history.done,c);a.history.undone=Td(this.history.undone,c)}},iterLinkedDocs:function(a){Nc(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});Mb.prototype.eachLine=Mb.prototype.iter;var ff=["iter","insert","remove","copy","getEditor"],Dd;for(Dd in Mb.prototype)Mb.prototype.hasOwnProperty(Dd)&&
0>Cc(ff,Dd)&&(g.prototype[Dd]=function(a){return function(){return a.apply(this.doc,arguments)}}(Mb.prototype[Dd]));yd(Mb);g.e_stop=Od;g.e_preventDefault=Db;g.e_stopPropagation=cf;var Qc,Ac=0;g.on=Aa;g.off=Bc;g.signal=Qb;var kc=30,Qd=g.Pass={toString:function(){return"CodeMirror.Pass"}};be.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};g.countColumn=rd;var ed=[""],ne=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ud=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;
g.replaceGetRect=function(a){nb=a};var Vb=function(){if(gc)return!1;var a=oa("div");return"draggable"in a||"dragDrop"in a}();Rc?le=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:Ge&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?le=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:jc&&!/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)&&(le=function(a,b){if(1<b&&45==a.charCodeAt(b-1)){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return!0;
if(2<b&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return!1}return/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-1,b+1))});var vd,oe,Ic=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};
g.splitLines=Ic;var De=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},fe=function(){var a=oa("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),Sc={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",
32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};g.keyNames=Sc;(function(){for(var a=0;10>a;a++)Sc[a+48]=String(a);for(a=65;90>=
a;a++)Sc[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Sc[a+111]=Sc[a+63235]="F"+a})();var Oc,Kf=function(){function a(d){return 255>=d?b.charAt(d):1424<=d&&1524>=d?"R":1536<=d&&1791>=d?c.charAt(d-1536):1792<=d&&2220>=d?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",
d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,k=/[1n]/;return function(b){if(!d.test(b))return!1;for(var c=b.length,l=[],m=0,n;m<c;++m)l.push(a(b.charCodeAt(m)));for(var m=0,q="L";m<c;++m)n=l[m],"m"==n?l[m]=q:q=n;m=0;for(q="L";m<c;++m)n=l[m],"1"==n&&"r"==q?l[m]="n":f.test(n)&&(q=n,"r"==n&&(l[m]="R"));m=1;for(q=l[0];m<c-1;++m)n=l[m],"+"==n&&"1"==q&&"1"==l[m+1]?l[m]="1":","!=n||q!=l[m+1]||"1"!=q&&"n"!=q||(l[m]=q),q=n;for(m=0;m<c;++m)if(n=l[m],","==n)l[m]="N";else if("%"==
n){for(q=m+1;q<c&&"%"==l[q];++q);var t=m&&"!"==l[m-1]||q<c-1&&"1"==l[q]?"1":"N";for(n=m;n<q;++n)l[n]=t;m=q-1}m=0;for(q="L";m<c;++m)n=l[m],"L"==q&&"1"==n?l[m]="L":f.test(n)&&(q=n);for(m=0;m<c;++m)if(e.test(l[m])){for(q=m+1;q<c&&e.test(l[q]);++q);n="L"==(q<c-1?l[q]:"L");t="L"==(m?l[m-1]:"L")||n?"L":"R";for(n=m;n<q;++n)l[n]=t;m=q-1}for(var q=[],A,m=0;m<c;)if(g.test(l[m])){n=m;for(++m;m<c&&g.test(l[m]);++m);q.push({from:n,to:m,level:0})}else{var p=m,t=q.length;for(++m;m<c&&"L"!=l[m];++m);for(n=p;n<m;)if(k.test(l[n])){p<
n&&q.splice(t,0,{from:p,to:n,level:1});p=n;for(++n;n<m&&k.test(l[n]);++n);q.splice(t,0,{from:p,to:n,level:2});p=n}else++n;p<m&&q.splice(t,0,{from:p,to:m,level:1})}1==q[0].level&&(A=b.match(/^\s+/))&&(q[0].from=A[0].length,q.unshift({from:0,to:A[0].length,level:0}));1==bc(q).level&&(A=b.match(/\s+$/))&&(bc(q).to-=A[0].length,q.push({from:c-A[0].length,to:c,level:0}));q[0].level!=bc(q).level&&q.push({from:c,to:c,level:q[0].level});return q}}();g.version="3.15.0";return g}();
CodeMirror.defineMode("pascal",function(){function g(g,d){var c=g.next();if("#"==c&&d.startOfLine)return g.skipToEnd(),"meta";if('"'==c||"'"==c)return d.tokenize=f(c),d.tokenize(g,d);if("("==c&&g.eat("*"))return d.tokenize=n,n(g,d);if(/[\[\]{}\(\),;\:\.]/.test(c))return null;if(/\d/.test(c))return g.eatWhile(/[\w\.]/),"number";if("/"==c&&g.eat("/"))return g.skipToEnd(),"comment";if(e.test(c))return g.eatWhile(e),"operator";g.eatWhile(/[\w\$_]/);c=g.current();return m.propertyIsEnumerable(c)?"keyword":
k.propertyIsEnumerable(c)?"atom":"variable"}function f(e){return function(d,c){for(var b=!1,f,g=!1;null!=(f=d.next());){if(f==e&&!b){g=!0;break}b=!b&&"\\"==f}if(g||!b)c.tokenize=null;return"string"}}function n(e,d){for(var c=!1,b;b=e.next();){if(")"==b&&c){d.tokenize=null;break}c="*"==b}return"comment"}var m=function(e){var d={};e=e.split(" ");for(var c=0;c<e.length;++c)d[e[c]]=!0;return d}("and array begin case const div do downto else end file for forward integer boolean char function goto if in label mod nil not of or packed procedure program record repeat set string then to type until var while with"),
k={"null":!0},e=/[+\-*&%=<>!?|\/]/;return{startState:function(){return{tokenize:null}},token:function(e,d){return e.eatSpace()?null:(d.tokenize||g)(e,d)},electricChars:"{}"}});CodeMirror.defineMIME("text/x-pascal","pascal");
define("FIRMOS.ChartingTheme",["dojox/charting/Theme","dojox/gfx/gradutils","dojox/charting/themes/common"],function(g,f,n){var m=g.generateGradient,k={type:"linear",space:"shape",x1:0,y1:0,x2:0,y2:100};n.Firmos=new g({chart:{fill:"#ffffff",titleFont:"'Source Sans Pro', sans-serif;",titleFontColor:"black"},plotarea:{fill:"#ffffff"},axis:{stroke:{color:"#000000",width:1},tick:{color:"#000000",position:"center",font:"normal normal normal 7pt Verdana, Arial, sans-serif",fontColor:"#000000"}},series:{stroke:{width:2.5,
color:"#fff"},outline:null,font:"normal normal normal 7pt Verdana, Arial, sans-serif",fontColor:"#131313"},marker:{stroke:{width:1.25,color:"#131313"},outline:{width:1.25,color:"#131313"},font:"normal normal normal 8pt Verdana, Arial, sans-serif",fontColor:"#131313"},seriesThemes:[{fill:m(k,"#2a6ead","#3a99f2")},{fill:m(k,"#613e04","#996106")},{fill:m(k,"#0e3961","#155896")},{fill:m(k,"#55aafa","#3f7fba")},{fill:m(k,"#ad7b2a","#db9b35")}],markerThemes:[{fill:"#2a6ead",stroke:{color:"#fff"}},{fill:"#613e04",
stroke:{color:"#fff"}},{fill:"#0e3961",stroke:{color:"#fff"}},{fill:"#55aafa",stroke:{color:"#fff"}},{fill:"#ad7b2a",stroke:{color:"#fff"}}]});n.Firmos.next=function(e,f,d){var c="line"==e;if(c||"area"==e){var b=this.seriesThemes[this._current%this.seriesThemes.length],k=this.markerThemes[this._current%this.markerThemes.length];b.fill.space="plot";c&&(b.stroke={width:4,color:b.fill.colors[0].color});k.outline={width:1.25,color:k.fill};c=g.prototype.next.apply(this,arguments);delete b.outline;delete b.stroke;
b.fill.space="shape";return c}return"candlestick"==e?(b=this.seriesThemes[this._current%this.seriesThemes.length],b.fill.space="plot",b.stroke={width:1,color:b.fill.colors[0].color},c=g.prototype.next.apply(this,arguments)):g.prototype.next.apply(this,arguments)};n.Firmos.post=function(e,k){e=g.prototype.post.apply(this,arguments);"slice"!=k&&"circle"!=k||!e.series.fill||"radial"!=e.series.fill.type||(e.series.fill=f.reverse(e.series.fill));return e};return n.Firmos});
require("dojo/_base/array dojo/dom-geometry dojo/aspect dgrid/OnDemandGrid dgrid/Grid dgrid/Selection dgrid/selector dgrid/tree dgrid/extensions/ColumnResizer dgrid/extensions/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/DijitRegistry dgrid/extensions/DnD dojox/form/CheckedMultiSelect dojox/form/FileInput dojox/form/Uploader dojox/form/uploader/FileList dojox/validate/web dojox/validate/check dojox/widget/Calendar dojox/gfx dojox/gfx/fx dojox/gfx/utils dojox/gfx/Moveable dojox/gesture/tap dojox/gesture/swipe dojox/html/styles dojo/dom-construct dojox/charting/widget/Chart dojox/charting/widget/Legend dojox/charting/axis2d/Default dojox/charting/plot2d/Lines dojox/charting/plot2d/Pie dojox/charting/plot2d/ClusteredColumns dijit/Menu dijit/Dialog dijit/Tree dijit/Toolbar dijit/ProgressBar dijit/Tooltip dijit/form/TextBox dijit/form/DateTextBox dijit/form/Form dijit/form/FilteringSelect dijit/form/Textarea dijit/form/NumberTextBox dijit/form/ComboBox dijit/form/TimeTextBox dijit/form/Select dijit/form/NumberSpinner dijit/form/HorizontalSlider dijit/layout/ContentPane dijit/layout/TabContainer dijit/layout/BorderContainer dijit/layout/AccordionContainer dojo/io/iframe".split(" "),function(g,
f,n,m,k,e,l,d,c,b,p,r,u){dojo.array=g;dojo.domGeo=f;dojo.aspect=n;dgrid={};dgrid.OnDemandGrid=m;dgrid.Grid=k;dgrid.Selection=e;dgrid.selector=l;dgrid.tree=d;dgrid.ColumnResizer=c;dgrid.ColumnHider=b;dgrid.ColumnReorder=p;dgrid.DijitRegistry=r;dgrid.DnD=u;dojo.declare("FIRMOS.wsConnectionHandler",null,{constructor:function(){this.ws=null;this.reqId=0;this.openReq={};this.updateId=null;this.docLoaded=!1;this._createWS();this._logLoadingError=!0},documentLoaded:function(){console.log("DOCUMENT ONLOAD");
new FIRMOS.Menu({contextMenuForWindow:!0});this.docLoaded=!0},_createWS:function(){this.ws=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-FREDB-NEW");this.ws.binaryType="arraybuffer";this.ws.onmessage=this.wsMessageListener.bind(this);this.ws.onclose=this.wsCloseListener.bind(this);this.ws.onerror=this.wsErrorListener.bind(this);this.ws.onopen=this.wsOpenListener.bind(this)},callServerFunction:function(a,
b,c,d,e,f,g){var k=G_UI_COM.beforeCallServerFunction(a,b,c,d);if(!k.abort)if(k.uidPath&&(c=k.uidPath),k.params&&(d=k.params),this.docLoaded)if(1!=this.ws.readyState)switch(this.ws.readyState){case 0:console.log("WS CONNECTING => WAIT");setTimeout(this.callServerFunction.bind(this,a,b,c,d,e,f,g),10);break;case 2:console.log("WS CLOSING => WAIT");setTimeout(this.callServerFunction.bind(this,a,b,c,d,e,f,g),100);break;case 3:console.log("WS CLOSED => RECREATE"),this._createWS()}else console.log("WS OK => CALL"),
console.log(a+" - "+b+" - "+c+" - "+JSON.stringify(d)+" - BLOB: "+("undefined"!=typeof g)+" - STATE: "+this.ws.readyState),a={cn:a,fn:b,uidPath:c,rId:this.reqId,rType:"S"},f&&(a.cId=f),d&&(a.params=d),d=dojo.toJson(a),e||(e=this.handleServerFunctionResponse.bind(this)),this.openReq[this.reqId]={fn:e,uiState:G_UI_COM.getUIState(),messageObj:a},"undefined"==typeof g?this.ws.send(this.encodeString2Message(d)):(e=this.encodeString2Message(d),d=new Uint8Array(4),f=e.length,d[3]=f>>24,d[2]=f>>16&255,d[1]=
f>>8&255,d[0]=f&255,this.ws.send(new Blob([d,e,g]))),G_UI_COM.clearUIState(),this.reqId++;else this._logLoadingError&&(console.log("DOCUMENT LOADING => WAIT"),this._logLoadingError=!1),setTimeout(this.callServerFunction.bind(this,a,b,c,d,e,f,g),10)},handleAsyncServerRequest:function(a){this.handleServerFunctionResponse({},!0,a,G_UI_COM.getUIState())},handleSyncServerRequest:function(a){this.handleServerFunctionResponse({},!0,a,G_UI_COM.getUIState());a=dojo.toJson({rId:a.rid,rType:"SR"});this.ws.send(this.encodeString2Message(a))},
handleServerFunctionResponse:function(a,b,c,d){if(b){if(""!=c.output)switch(b=dojo.fromJson(c.output),b.actiontype){case "jsupdate":case "jsexecute":G_UI_COM.restoreUIState(d);this.updateId="";a.cId&&(this.updateId=a.cId);"undefined"!=typeof b.updateid&&""!=b.updateid&&(this.updateId=b.updateid);G_UI_COM.clearUpdateArea(b.id);eval(b.action);break;default:console.error("Server Function Error => Unknown action type: "+b.actiontype)}}else console.error("Server Function Error => "+c.cn+"."+c.fn+": "+
c.error)},wsMessageListener:function(a){a=dojo.fromJson(this.decodeMessage2String(a.data));a.session&&this.storeSessionId(a.session);if(a.error)this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!1,a,this.openReq[a.rid].uiState);else switch(a.rtype){case "SR":this.openReq[a.rid]?(this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!0,a,this.openReq[a.rid].uiState),delete this.openReq[a.rid]):console.error(" Error => Got answer for unknown request id: "+a.rid);break;case "S":this.handleSyncServerRequest(a);
break;case "A":this.handleAsyncServerRequest(a);break;default:console.error(" Error => Unknown Server Request Type: "+a.rtype)}},wsCloseListener:function(a){console.log("WS CLOSE "+JSON.stringify(a))},wsErrorListener:function(a){console.log("WS ERROR "+JSON.stringify(a))},wsOpenListener:function(a){console.log("WS OPEN "+JSON.stringify(a));this.callServerFunction("FIRMOS","init")},encodeString2Message:function(a){return a},decodeMessage2String:function(a){return a},storeSessionId:function(a){sessionStorage.setItem("sessionId",
a)},getSessionId:function(){return sessionStorage.getItem("sessionId")}});dojo.declare("FIRMOS.uiHandler",null,{constructor:function(a){this.clearUIState();this.dialog_=[];this.uiState_={};this.showSectionPathInProgress=!1;this.stores_={};this.formDBOs_={};this.selDepFuncs_={views:{},classes:{}};this.liveCharts_={};this.msgProgress_={};this.createdCSSRules_={};this.serverCom=a;this.buttonClickStates_={};this.sitemap_=null;this.storeDepData={}},refreshView:function(a){a.isInstanceOf(FIRMOS.GridBase)?
a.refresh():a.isInstanceOf(FIRMOS.Tree)?a.refresh():console.error("REFRESH VIEW TYPE UNKNOWN")},refreshStore:function(a){a=G_UI_COM.getStoreById(a);for(var b=0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},setMenu:function(a){this.menu_=a},isDialogAction:function(){this.dialogAction_=!0},setGridDetailsId:function(a){this.gridDetailsId_=a},setDropCoords:function(a){this.dropCoords_=a},getUIState:function(){return{dialogAction:this.dialogAction_,dialog:this.dialog_,menu:this.menu_,gridDetailsId:this.gridDetailsId_,
dropCoords:this.dropCoords_}},clearUIState:function(){this.dialogAction_=!1;this.dropCoords_=this.gridDetailsId_=this.menu_=null},restoreUIState:function(a){this.uiState_=a},closeDialog:function(){0<this.uiState_.dialog.length&&0<this.dialog_.length&&this.uiState_.dialog[this.uiState_.dialog.length-1].id==this.dialog_[this.dialog_.length-1].id&&this.dialog_[this.dialog_.length-1].hide(!0)},dialogLoaded:function(a){this.uiState_.dialogAction&&this.closeDialog();this.dialog_.push(a);a.show()},dialogClosed:function(a){if(this.dialog_[this.dialog_.length]==
a)this.dialog_.pop();else{for(var b=[],c=0;c<this.dialog_.length;c++)this.dialog_[c].id!=a&&(b[b.length]=this.dialog_[c]);this.dialog_=b}},showMessage:function(a){a.show();this.dialog_.push(a)},setWinTitle:function(a){a&&""!=a&&(document.title=a)},clearContentArea:function(a){this.serverCom.updateId=a;this.clearUpdateArea("");this.contentLoaded(new dijit.layout.ContentPane({}))},clearUpdateArea:function(a){if(""!=a){var b=dijit.byId(a);""==this.serverCom.updateId&&b&&(this.serverCom.updateId=a)}if(""!=
this.serverCom.updateId)if("FirmOSViewport"==this.serverCom.updateId)for(var b=dojo.byId("FirmOSViewport"),b=dijit.findWidgets(b),c=0;c<b.length;c++)b[c].destroyRecursive();else if(b=dijit.byId(this.serverCom.updateId)){c=b.getParent();if(c.isInstanceOf(dijit.layout.TabContainer)||c.isTCElem)return;if(b._contentId)var d=b._contentId;else d=b.id,this.serverCom.updateId=c.id,b=c;if(c=dijit.byId(d))c.region&&(b.updatingRegion_=c.region,b.updatingStyle_=c.style),b.removeChild(c),c.destroyRecursive()}(b=
dijit.byId(a))&&b.destroyRecursive()},contentLoaded:function(a,b){this.setWinTitle(b);this.uiState_.dialogAction&&this.closeDialog();if("FirmOSViewport"==this.serverCom.updateId){var c=dojo.byId("FirmOSViewport");a.placeAt(c);a.startup()}else(c=dijit.byId(this.serverCom.updateId))?(c.getParent(),c.updatingRegion_&&(a.set("region",c.updatingRegion_),delete c.updatingRegion_,a.set("style",c.updatingStyle_),delete c.updatingStyle_),c.isInstanceOf(dijit.layout.ContentPane)?c.set("content",a):c.addChild(a),
c._contentId&&(c._contentId=a.id),a.startup()):(console.error("NO CONTENT AREA FOUND FOR "+a.id),a.destroyRecursive());this.serverCom.updateId=null},formProxyLoaded:function(a){console.error("IMPLEMENT ME")},menuLoaded:function(a){if(0<a.length)if(this.uiState_.menu)this.uiState_.menu.entriesLoaded(a);else if(this.uiState_.dropCoords){var b=new FIRMOS.Menu;b.setCoords(this.uiState_.dropCoords.x,this.uiState_.dropCoords.y);b.entriesLoaded(a)}},updateStore:function(a,b){var c=this.getStoreById(a);c&&
(b.updated&&c.store.updateItems(b.updated),b.deleted&&c.store.deleteItems(b.deleted),b["new"]&&c.store.newItems(b["new"]))},registerStore:function(a){this.stores_[a.id]?this.stores_[a.id].store=a:this.stores_[a.id]={store:a,views:[]}},unregisterStore:function(a){delete this.stores_[a.id]},registerFormDBOs:function(a,b){this.formDBOs_[a.id]?console.error("Form "+a.id+" already registered"):this.formDBOs_[a.id]={form:a,ids:b}},unregisterFormDBOs:function(a,b){this.formDBOs_[a]?(G_SERVER_COM.callServerFunction("FIRMOS",
"unregisterDBO",null,{ids:b}),delete this.formDBOs_[a]):console.error("Form "+a+" not registered")},updateFormDBO:function(a){for(var b in this.formDBOs_)for(var c=0;c<this.formDBOs_[b].ids.length;c++)if(this.formDBOs_[b].ids[c]==a.uid){this.formDBOs_[b].form.updateValues(a);break}},updateForm:function(a,b){var c=dijit.byId(a+"_form");c&&c.isInstanceOf(FIRMOS.Form)&&c.updateValues(b)},registerSelDepFunc:function(a,b,c){this.selDepFuncs_.views[c.id]=c;this.selDepFuncs_.classes[a]||(this.selDepFuncs_.classes[a]=
{});this.selDepFuncs_.classes[a][b]||(this.selDepFuncs_.classes[a][b]={viewIds:{}});this.selDepFuncs_.classes[a][b].viewIds[c.id]=!0},unregisterSelDepFunc:function(a,b,c){this.selDepFuncs_.classes[a]&&this.selDepFuncs_.classes[a][b]&&(delete this.selDepFuncs_.classes[a][b].viewIds[c.id],0==Object.keys(this.selDepFuncs_.classes[a][b].viewIds).length&&(delete this.selDepFuncs_.classes[a][b].viewIds,0==Object.keys(this.selDepFuncs_.classes[a][b]).length&&(delete this.selDepFuncs_.classes[a][b],0==Object.keys(this.selDepFuncs_.classes[a]).length&&
delete this.selDepFuncs_.classes[a])));delete this.selDepFuncs_.views[c.id]},beforeCallServerFunction:function(a,b,c,d){var e={};if(this.selDepFuncs_.classes[a]&&this.selDepFuncs_.classes[a][b]){var f=[],g;for(g in this.selDepFuncs_.classes[a][b].viewIds)a=this.selDepFuncs_.views[g],f=f.concat(a.getSelectedIds()),dojo.mixin(d,a.contentParmas);c||1==f.length?(e.uidPath=c||[f[0]],d.selected=f,e.params=d):((c=dijit.byId(this.parentId).getParent()._contentId)&&G_UI_COM.clearContentArea(c),e.abort=!0)}return e},
registerLiveChart:function(a){this.liveCharts_[a.id]=a},unregisterLiveChart:function(a){delete this.liveCharts_[a.id]},updateLiveChart:function(a,b,c){this.liveCharts_[a]?this.liveCharts_[a].setData(b,c):console.error("updateLiveChart: "+a+" chart not found")},redefineLiveChart:function(a,b){this.liveCharts_[a]?this.liveCharts_[a].redefine(b):console.error("redefineLiveChart: "+a+" chart not found")},registerMsgProgress:function(a,b){this.msgProgress_[a]=b},unregisterMsgProgress:function(a){delete this.msgProgress_[a]},
updateMsgProgress:function(a,b){this.msgProgress_[a]?this.msgProgress_[a].updateProgress(b):console.error("updateMsgProgress: "+a+" message progress not registered")},registerStoreView:function(a,b){if(this.getStoreById(a)){for(var c=!1,d=0;d<this.stores_[a].views.length;d++)this.stores_[a].views[d].id==b.id&&(c=!0,this.stores_[a].views[d]=b);c||(this.stores_[a].views[this.stores_[a].views.length]=b)}else console.error("registerStoreView: "+a+" store not registered")},unregisterStoreView:function(a,
b){if(this.getStoreById(a)){for(var c=0;c<this.stores_[a].views.length;c++)if(this.stores_[a].views[c].id==b.id){this.stores_[a].views.splice(c,1);break}0==this.stores_[a].views.length&&this.stores_[a].store.destroy()}},getStore:function(a,b){var c=G_UI_COM.getStoreById(a);if(c)return c.store;this.storeDepData[a]&&(b._dependency=this.storeDepData[a],delete this.storeDepData[a]);return new FIRMOS.Store(b)},setStoreDepData:function(a,b){this.storeDepData[a]=b},setStoreDependency:function(a,b,c,d,e){var f=
{};f.filterfieldname=b;f.filtervalues=d;f.filterfieldtype=c;e&&(f.numfiltertype=e);(c=this.getStoreById(a))?c.store.params_.dependency[b+"_ref"]=f:(this.storeDepData[a]||(this.storeDepData[a]={}),this.storeDepData[a][b+"_ref"]=f)},deleteStoreDependency:function(a,b){var c=this.getStoreById(a);c?delete c.store.params_.dependency[b+"_ref"]:this.storeDepData[a]&&(delete this.storeDepData[a][b+"_ref"],0==Object.keys(this.storeDepData[a]).length&&delete this.storeDepData[a])},getStoreById:function(a){return this.stores_[a]},
invalidateSessionData:function(a){for(var b=0;b<a.length;b++){var c=this.getStoreById(a[b].storeid).store;if(a[b].queryids){a[b].queryids instanceof Array||(a[b].queryids=[a[b].queryids]);for(var d=0;b<a[d].queryids.length;d++)c.invalidateObserver(a[b].queryids[d])}else c.invalidateAllObservers()}},sortFuncSubSecOrd:function(a,b){return a._subSecOrd<b._subSecOrd?-1:a._subSecOrd>b._subSecOrd?1:0},createCSSRule:function(a,b){this.createdCSSRules_[a]||(dojox.html.insertCssRule("."+a,b),this.createdCSSRules_[a]=
b)},removeCSSRule:function(a){this.createdCSSRules_[a]&&(dojox.html.removeCssRule("."+a,this.createdCSSRules_[a]),delete this.createdCSSRules_[a])},toggleFormGroupStatus:function(a,b){var c=dojo.byId(b+"_tl"),d=dojo.byId(b+"_tr");if(dojo.hasClass(c,"firmosFormGroupShowLeft")){var e="";dojo.removeClass(c,"firmosFormGroupShowLeft");dojo.removeClass(d,"firmosFormGroupShowRight");dojo.addClass(c,"firmosFormGroupHideLeft");dojo.addClass(d,"firmosFormGroupHideRight")}else e="none",dojo.removeClass(c,"firmosFormGroupHideLeft"),
dojo.removeClass(d,"firmosFormGroupHideRight"),dojo.addClass(c,"firmosFormGroupShowLeft"),dojo.addClass(d,"firmosFormGroupShowRight");c=dojo.byId(a);c=dojo.query('tr[firmosGroup~="'+b+'"]',c);for(d=0;d<c.length;d++)dojo.style(c[d],"display",e)},addMenuEntries:function(a,b,c){for(var d=!0,e=0;e<b.length;e++){var f={};f.label=b[e].caption;f.disabled=b[e].disabled||c;if(b[e].icon){var g=b[e].icon.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(g,"background-image: url('"+b[e].icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");
f.iconClass=g}if(b[e].menu){g={};b[e].id&&(g.id=b[e].id);g=new dijit.Menu(g);f.disabled=this.addMenuEntries(g,b[e].menu,f.disabled)||f.disabled;f.popup=g;var k=new dijit.PopupMenuItem(f);g._parentUIElement=k;a.addChild(k)}else b[e].id&&(f.id=b[e].id),b[e].action&&(f._action=b[e].action,f.onClick=function(){G_SERVER_COM.callServerFunction(this._action["class"],this._action.func,this._action.uidPath,this._action.params)}),b[e].downloadId&&(f._downloadId=b[e].downloadId,f.onClick=function(){dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),
this._downloadId,!0)}),a.addChild(new dijit.MenuItem(f));d=d&&f.disabled}return d},_handleTabContainer:function(a,b,c,d){c.shift();if(0<c.length)b=1==c.length,this.showSectionPath(a,c,d)||console.error("Could not resolve given sub section path: container: "+a.id+", sections: "+JSON.stringify(c)),b&&(G_UI_COM.showSectionPathInProgress=!1);else if(d&&(a=a.getChildren()[0])&&a.isInstanceOf(FIRMOS.MultiContentContainer))for(c=a.getChildren(),d=0;d<c.length;d++)if(c[d].id==a.selectedChildWidget.id){d==
c.length-1?a.selectChild(c[0].id):a.selectChild(c[d+1].id);break}},showSectionPath:function(a,b,c){if("string"==typeof a){if("FirmOSViewport"==a)var d=dojo.byId("FirmOSViewport"),d=dijit.byId(d.children[0].id);else d=dijit.byId(a);d||console.error('Base container "'+a+'" not found.')}else d=a;if(d.isInstanceOf(dijit.layout.ContentPane))return d.hasChildren()?this.showSectionPath(d.getChildren()[0],b,c):!1;if(d.isInstanceOf(dijit.layout.BorderContainer)){a=d.getChildren();for(d=0;d<a.length;d++)if(this.showSectionPath(a[d],
b,c))return!0;return!1}if(d.isInstanceOf(FIRMOS.TabContainer)){var e=d.getChild(b[0]);if(e)return c=c&&d.selectedChildWidget.id==b[0],d.selectChild(e,this._handleTabContainer.bind(this,e,a,b,c)),!0;d.selectDefault();return!1}},registerSitemap:function(a){this.sitemap_=a},unregisterSitemap:function(a){delete this.sitemap_},_updateElement:function(a,b){a.set("disabled",b);a._parentUIElement&&a._parentUIElement.set("disabled",b)},_updateChildElements:function(a,b){if(a.isInstanceOf(dijit.Menu)||a.isInstanceOf(dijit.DropDownMenu)||
a.isInstanceOf(dijit.PopupMenuItem))for(var c=a.isInstanceOf(dijit.PopupMenuItem)?a.popup.getChildren():a.getChildren(),d=0;d<c.length;d++)this._updateElement(c[d],b),this._updateChildElements(c[d],b)},_updateParent:function(a){a=a._parentUIElement?a._parentUIElement.getParent():a.getParent();if(a.isInstanceOf(dijit.Menu)||a.isInstanceOf(dijit.DropDownMenu)){for(var b=a.getChildren(),c=!0,d=0;d<b.length;d++)if(!b[d].get("disabled")){c=!1;break}a.get("disabled")!=c&&(this._updateElement(a,c),this._updateParent(a))}},
updateUIElement:function(a,b,c){if(a=dijit.byId(a))this._updateElement(a,b),""!=c&&a.set("label",c),this._updateChildElements(a,b),this._updateParent(a)},updateUIElementSubmenu:function(a,b){var c=dijit.byId(a);if(c){c.destroyDescendants();var d=G_UI_COM.addMenuEntries(c,b,c.get("disabled"));this._updateElement(c,d)}},openUrl:function(a,b){b?window.open(a)||alert(G_TEXTS.openWindow.error):document.location.href=a}});G_SERVER_COM=new FIRMOS.wsConnectionHandler;G_UI_COM=new FIRMOS.uiHandler(G_SERVER_COM);
dojo.declare("FIRMOS.Dialog",dijit.Dialog,{onShow:function(){this.closable||dojo.style(this.closeButtonNode,"display","none")},hide:function(a){if(this.closable||a)G_UI_COM.dialogClosed(this.id),this.destroyRecursive()}});dojo.declare("FIRMOS.Message",FIRMOS.Dialog,{texts:G_TEXTS.msg,closable:!1,destroy:function(){this.progressBarId&&G_UI_COM.unregisterMsgProgress(this.progressBarId);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a;switch(this.type){case "msg_error":case "msg_warning":case "msg_info":case "msg_confirm":case "msg_wait":a=
"Wait"}var b='<div class="firmosMessageIcon'+a+'"></div><div class="firmosMessage'+a+'">'+this.msg+"</div>";this.progressBarId&&(b=b+'<div class="firmosMessageProgressBar" id="'+this.id+'_pb"></div>');b=b+'<div class="firmosMessageButtons'+a+'" id="'+this.id+'_buttons"></div>';this.set("content",b);switch(this.type){case "msg_error":case "msg_warning":case "msg_info":a=new dijit.form.Button({type:"button",label:this.texts.ok,onClick:this._onClick.bind(this)});a.placeAt(dojo.byId(this.id+"_buttons"));
break;case "msg_confirm":a=new dijit.form.Button({type:"button",label:this.texts.yes,onClick:this._onClick.bind(this,!0)});a.placeAt(dojo.byId(this.id+"_buttons"));a=new dijit.form.Button({type:"button",label:this.texts.no,onClick:this._onClick.bind(this,!1)});a.placeAt(dojo.byId(this.id+"_buttons"));break;case "msg_wait":this.sfClassname&&(a=new dijit.form.Button({type:"button",label:this.texts.abort,onClick:this._onClick.bind(this)}),a.placeAt(dojo.byId(this.id+"_buttons")))}this.progressBarId&&
(G_UI_COM.registerMsgProgress(this.progressBarId,this),this._pb=new dijit.ProgressBar({style:"width: 100%"}),this._pb.set("value",0),this._pb.set("label","0%"),this._pb.placeAt(dojo.byId(this.id+"_pb")))},updateProgress:function(a){this._pb.set("value",a);this._pb.set("label",Math.round(a)+"%")},_onClick:function(a){this.hide(!0);if(this.sfClassname){var b=dojo.clone(this.sfParams);"boolean"==typeof a&&(b.confirmed=a);G_SERVER_COM.callServerFunction(this.sfClassname,this.sfFunctionname,this.sfUidPath,
b)}}});dojo.declare("FIRMOS.Store",null,{idAttribute:"uid",labelAttributes:["text","objname","uid"],constructor:function(a){this.params_={};a._dependency?(this.params_.dependency=a._dependency,delete a._dependency):this.params_.dependency={};for(var b in a)this[b]=a[b];this._index={};this._dirtyItems={};this._orgItems={};this.queryId_=0;this.queryResults_={};G_UI_COM.registerStore(this)},destroy:function(){this.destroyClassname&&G_SERVER_COM.callServerFunction(this.destroyClassname,this.destroyFunctionname,
this.destroyUidPath,this.destroyParams);G_UI_COM.unregisterStore(this);G_UI_COM.setStoreDepData(this.id,this.params_.dependency);this.inherited(arguments)},close:function(a){return a&&a.abort&&a.abort()},containsValue:function(a,b,c){return-1<dojo.array.indexOf(this.getValues(a,b),c)},mayHaveChildren:function(a){return a.children?!0:!1},_getChildrenCallback:function(a,b,c){a.children=c;for(c=0;c<a.children.length;c++)this._index[this.getIdentity(a.children[c])]=!0,a.children[c].children&&"UNCHECKED"==
a.children[c].children&&(a.children[c].children=[],a.children[c]._loadChildren=!0);b(a)},getChildren:function(a,b){var c="function"==typeof b,d={};c||(d=b);d=this._doQuery(d,a);c&&(d.addCallback(this._getChildrenCallback.bind(this,a,b)),d.addErrback(b.bind(this,Error("Error in function getChildren"))));return dojo.store.util.QueryResults(d)},query:function(a,b){b.query=a;var c=this._doQuery(b);return dojo.store.util.QueryResults(c)},_doQuery:function(a,b){var c=new dojo.Deferred,d=this.queryId_++;
this.queryResults_[d]={};this.queryResults_[d].query=a.query;this.queryResults_[d].queryArgs=a;this.queryResults_[d].dataIds=[];this.queryResults_[d].observer=[];this.queryResults_[d].observerInfo=[];var e=dojo.clone(this.getParams);dojo.mixin(e,this.params_);if(b){this.queryResults_[d].parentId=this.getIdentity(b);var f=this.getIdentity(b);e.parentid=f}if(b&&b._childrenfunc_)var f=b._funcclassname_||this.getClassname,g=b._childrenfunc_,k=b.uidpath?b.uidpath instanceof Array?b.uidpath:[b.uidpath]:
[b.uid];else this.queryResults_[d].parentId="",k=this.getUidPath,f=this.getClassname,g=this.getFunctionname;e.queryid=d;a.query&&(e.query=a.query);"undefined"!=typeof a.count&&(e.count=a.count);"undefined"!=typeof a.start&&(e.start=a.start);if(a.sort){e.sort=[];for(var l=0;l<a.sort.length;l++)e.sort[l]={},e.sort[l].property=a.sort[l].attribute,e.sort[l].ascending=!a.sort[l].descending}c.total=new dojo.Deferred;c.observe=this._observe.bind(this,d);d=function(a,b,d,e){if(d)if(b=dojo.fromJson(e.output),
b.actiontype&&"jsexecute"==b.actiontype)c.reject(),eval(b.action);else{c.total.resolve(b.total);if(this.queryResults_[a]){for(d=0;d<b.data.length;d++)this.queryResults_[a].dataIds.push(this.getIdentity(b.data[d]));0==this.queryResults_[a].observer.length&&setTimeout(this._deleteResultCache.bind(this,a),2E3)}c.resolve(b.data)}else c.reject(e.error)}.bind(this,d);G_SERVER_COM.callServerFunction(f,g,k,e,d);return c},_fetchTotalCountCallback:function(a,b,c){a.onBegin&&a.onBegin.call(b,c,a)},_fetchCallback:function(a,
b,c){for(var d=0;d<c.length;d++)this._index[this.getIdentity(c[d])]=!0;if(a.onItem)for(d=0;d<c.length;d++)a.onItem.call(b,c[d],a);a.onComplete&&a.onComplete.call(b,a.onItem?null:c,a)},fetch:function(a){a=a||{};var b=a.scope||this,c=this._doQuery(a);c.request=a;c.addCallback(this._fetchCallback.bind(this,a,b));c.total.addCallback(this._fetchTotalCountCallback.bind(this,a,b));a.onError&&c.addErrback(function(c){return a.onError.call(b,c,a)});a.abort=function(){c.cancel()};return a},getAttributes:function(a){var b=
[],c;for(c in a)!a.hasOwnProperty(c)||"_"==c.charAt(0)&&"_"==c.charAt(1)||b.push(c);return b},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0,"dojo.data.api.Write":!0,"dojo.data.api.Notification":!0}},getLabel:function(a){for(var b=0;b<this.labelAttributes.length;b++){var c=this.getValue(a,this.labelAttributes[b]);if(c)return c}for(b in a)return a[b]},getLabelAttributes:function(a){return this.labelAttributes},getValue:function(a,b,c){if(b in a)return a[b];if(!a._loadChildren||
"children"!=b)return c},getValues:function(a,b){var c=this.getValue(a,b);return c instanceof Array?c:void 0===c?[]:[c]},hasAttribute:function(a,b){return b in a},isItem:function(a){return"object"==typeof a&&a&&void 0!=this.getIdentity(a)},isItemLoaded:function(a){return a&&!a._loadChildren},_loadItemCallback:function(a,b){var c=a.scope||this;delete b._loadChildren;var d=b instanceof Error?a.onError:a.onItem;d&&d.call(c,b)},loadItem:function(a){var b=a.scope||this;a.item._loadChildren?this.getChildren(a.item,
this._loadItemCallback.bind(this,a)):a.onItem&&a.onItem.call(b,a.item)},deleteItem:function(a){console.error("STORE DELETE NOT IMPLEMENTED: "+JSON.stringify(a));return!0},isDirty:function(a){return this._dirtyItems[this.getIdentity(a)]?!0:!1},newItem:function(a,b){console.error("STORE NEW ITEM NOT IMPLEMENTED: "+JSON.stringify(a)+" - "+JSON.stringify(b));return a},revert:function(){for(var a in this._dirtyItems){for(var b in this._dirtyItems[a])if(this._orgItems[a][b]!=this._dirtyItems[a][b])this.onSet(this._orgItems[a],
b,this._dirtyItems[a][b],this._orgItems[a][b]);delete this._dirtyItems[a];delete this._orgItems[a]}},save:function(a){console.error("SAVE ITEM NOT IMPLEMENTED: "+JSON.stringify(a));var b=a.scope||this,c;for(c in this._dirtyItems)delete this._dirtyItems[c],delete this._orgItems[c];a.onComplete&&a.onComplete.call(b,a)},setValue:function(a,b,c){if(b==this.idAttribute)throw Error("Can not change the identity attribute for an item");var d=a[b];d!=c&&(this._orgItems[this.getIdentity(a)]||(this._orgItems[this.getIdentity(a)]=
dojo.clone(a)),c?a[b]=c:delete a[b],this._dirtyItems[this.getIdentity(a)]=a,this.onSet(a,b,d,c))},setValues:function(a,b,c){if(!lang.isArray(c))throw Error("setValues expects to be passed an Array object as its value");this.setValue(a,b,c)},unsetAttribute:function(a,b){this.setValue(a,b)},onSet:function(a,b,c,d){},onNew:function(a,b){},onDelete:function(a){},fetchItemByIdentity:function(a){return this.fetch({query:this.idAttribute+"="+a.identity,onComplete:a.onItem,onError:a.onError,scope:a.scope})},
getIdentity:function(a){return a[this.idAttribute]},getIdentityAttributes:function(a){return[this.idAttribute]},_observe:function(a,b,c,d){c={};c.listener=b;c.remove=c.cancel=this._removeObserver.bind(this,c);c.queryId=a;this.queryResults_[a].observer.push(b);this.queryResults_[a].observerInfo.push(d||"");return c},invalidateObserver:function(a){delete this.queryResults_[a]},invalidateAllObservers:function(){for(var a in this.queryResults_)delete this.queryResults_[a]},_removeObserver:function(a){if(this.queryResults_[a.queryId]){if(0==
this.queryResults_[a.queryId].dataIds.length)return;var b=dojo.array.indexOf(this.queryResults_[a.queryId].observer,a.listener);-1<b&&(this.queryResults_[a.queryId].observer.splice(b,1),this.queryResults_[a.queryId].observerInfo.splice(b,1))}this._deleteResultCache(a.queryId)},_deleteResultCache:function(a){if(this.queryResults_[a]&&0==this.queryResults_[a].observer.length){if(this.clearClassname){var b=this.clearParams;b.queryid=a;G_SERVER_COM.callServerFunction(this.clearClassname,this.clearFunctionname,
this.clearUidPath,b)}delete this.queryResults_[a]}},get:function(a){var b={};b[this.idAttribute]=a;return b},remove:function(a){if(this.dragClassname){var b=dojo.clone(this.dragParams);dojo.mixin(b,this.params_);b.selected=a;G_SERVER_COM.callServerFunction(this.dragClassname,this.dragFunctionname,this.dragUidPath,b)}},put:function(a,b){if(this.dropClassname){var c=dojo.clone(this.dropParams);dojo.mixin(c,this.params_);c.selected=[];for(var d=0;d<a.length;d++)c.selected.push(this.getIdentity(a[d]));
b.before&&(c.target=b.source?b.source.getIdentity(b.before):this.getIdentity(b.before));b.mousePos&&G_UI_COM.setDropCoords(b.mousePos);G_SERVER_COM.callServerFunction(this.dropClassname,this.dropFunctionname,this.dropUidPath,c)}},_findItemInResultSets:function(a){var b=[],c;for(c in this.queryResults_)for(var d=0;d<this.queryResults_[c].dataIds.length;d++)if(this.queryResults_[c].dataIds[d]==a){b.push({queryId:c,pos:d});break}return b},_findChildrenCallResultSets:function(a){var b=[],c;for(c in this.queryResults_)this.queryResults_[c].parentId==
a&&b.push({queryId:c});return b},_removeChildrenQuerys:function(a){for(var b in this.queryResults_)if(this.queryResults_[b].parentId==a){for(var c=0;c<this.queryResults_[b].dataIds.length;c++)this._removeChildrenQuerys(this.queryResults_[b].dataIds[c]);delete this.queryResults_[b]}},newItems:function(a){for(var b=0;b<a.length;b++){var c=this._findItemInResultSets(this.getIdentity(a[b].item));if(0<c||this._index[this.getIdentity(a[b].item)])console.error("NEW ITEMS: Item "+this.getIdentity(a[b].item)+
" already in store!");else if(0==this._findChildrenCallResultSets(a[b].parentid).length)console.error("NEW ITEMS: Parent "+a[b].parentid+" not found or no children retrieved yet!");else if(""!=a[b].revid){var d=!0,c=this._findItemInResultSets(a[b].revid);if(0<c.length)for(var e=0;e<c.length;e++)if(a[b].parentid==this.queryResults_[c[e].queryId].parentId)for(var d=!1,f=this.queryResults_[c[e].queryId].observer.length,g=0;g<f;g++)a[b].revisprev&&(c[e].pos+=1),this.queryResults_[c[e].queryId].dataIds.splice(c[e].pos,
0,this.getIdentity(a[b].item)),this.queryResults_[c[e].queryId].observer[g](a[b].item,-1,c[e].pos);this._index[a[b].revid]&&(d=!1,this._index[this.getIdentity(a[b].item)]=!0,this.onNew(a[b].item));d&&(""!=a[b].parentid?console.error("RevId "+a[b].revid+" not found in any query for parent item "+a[b].parentid):console.error("RevId "+a[b].revid+" not found in any query"))}else{for(e in this.queryResults_)if(a[b].parentid==this.queryResults_[e].parentId)for(g=0;g<this.queryResults_[e].observer.length;g++)this.queryResults_[e].dataIds.unshift(this.getIdentity(a[b].item)),
this.queryResults_[e].observer[g](a[b].item,-1,0);this._index[this.getIdentity(a[b].item)]=!0;this.onNew(a[b].item)}}},deleteItems:function(a){for(var b=0;b<a.length;b++){var c=!0,d={};d[this.idAttribute]=a[b];var e=this._findItemInResultSets(a[b]);if(0<e.length)for(var c=!1,f=0;f<e.length;f++){this._removeChildrenQuerys(a[b]);this.queryResults_[e[f].queryId].dataIds.splice(e[f].pos,1);for(var g=this.queryResults_[e[f].queryId].observer.length,k=0;k<g;k++)this.queryResults_[e[f].queryId].observer[k](d,
e[f].pos,-1)}this._index[a[b]]&&(noFound=!1,delete this._index[a[b]],this.onDelete(d));c&&console.error("DeleteId "+a[b]+" not found in any query")}},updateItems:function(a){for(var b=!0,c=[],d=0;d<a.length;d++){var e=this._findItemInResultSets(this.getIdentity(a[d]));if(0<e.length)for(var b=!1,f=0;f<e.length;f++)for(var g=this.queryResults_[e[f].queryId].observer.length,k=0;k<g;k++)if(this.queryResults_[e[f].queryId].observerInfo[k]){for(var l=G_UI_COM.getStoreById(this.id).views,m=0;m<l.length;m++)if(l[m].id==
this.queryResults_[e[f].queryId].observerInfo[k]){l=l[m].storeAdapters_;for(m=0;m<l.length;m++)if(l[m].series.name==this.queryResults_[e[f].queryId].query.sId){l[m].objects[e[f].pos].value=a[d].value;break}break}-1==dojo.array.indexOf(c,this.queryResults_[e[f].queryId].observer[k])&&c.push(this.queryResults_[e[f].queryId].observer[k])}else this.queryResults_[e[f].queryId].observer[k](a[d],e[f].pos,e[f].pos);if(this._index[this.getIdentity(a[d])]){var b=!1,n;for(n in a[d])if(n!=this.idAttribute)this.onSet(a[d],
n,"",a[d][n])}b&&console.error("UpdateId "+this.getIdentity(a[d])+" not found in any query")}for(d=0;d<c.length;d++)c[d]()}});dojo.declare("FIRMOS.Tree",dijit.Tree,{constructor:function(a){G_UI_COM.registerStoreView(a.model.store.id,this)},destroy:function(){G_UI_COM.unregisterStoreView(this.model.store.id,this);this.inherited(arguments)},postCreate:function(){this.watch("selectedItems",this.selectionChanged.bind(this));this.inherited(arguments)},getIconClass:function(a,b){if(a._icon_){var c=a._icon_.replace(/[\/\.]/g,
"");G_UI_COM.createCSSRule(c,"background-image: url('"+a._icon_+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");return c}return this.inherited(arguments)},selectionChanged:function(a,b,c){if(c&&0<c.length){if(c[0]._funcclassname_&&c[0]._contentfunc_){var d={};d.classname=c[0]._funcclassname_;d.functionname=c[0]._contentfunc_;d.uidPath=c[0].uidpath?c[0].uidpath instanceof Array?c[0].uidpath:[c[0].uidpath]:[c[0].uid]}d&&G_SERVER_COM.callServerFunction(d.classname,d.functionname,
d.uidPath,null,null,dijit.byId(this.parentId).getParent()._contentId||null)}},refresh:function(){this.dndController.selectNone();this.model.store.clearOnClose=!0;this.model.store.close();this._itemNodesMap={};this.rootNode.state="UNCHECKED";this.model.root.children=null;this.rootNode.destroyRecursive();this.model.constructor(this.model);this.model.root._loadChildren=!0;this.postMixInProperties();this._load()},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=sessionStorage.getItem(this.cookieName);
a&&dojo.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=dojo.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];var c=[],d;for(d in this._openedNodes)c.push(d);sessionStorage.setItem(this.cookieName,c.join(","))}});_ColumnDnDSource=dojo.declare("FIRMOS.ColumnDnDSource",dgrid.ColumnReorder.ColumnDndSource,
{onMouseDown:function(a){a.stopPropagation=function(){};this.inherited(arguments)}});dojo.declare("FIRMOS.ColumnReorder",dgrid.ColumnReorder,{columnDndConstructor:_ColumnDnDSource});_GridDnDSource=dojo.declare("FIRMOS.GridDnDSource",dgrid.DnD.GridSource,{allowNested:!0,checkAcceptance:function(a,b){for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},onMouseDown:function(a){a.stopPropagation=function(){};this.inherited(arguments)},
copyState:function(a,b){return!1},getSelectedNodes:function(){if(this.grid.dndDisabled)return[];var a=[];if(!this.current)return[];var b=new dojo.NodeList,c;for(c in this.grid.selection){var d=this.grid.row(c).data;this.grid.dragClasses_&&!(d.dndclass in this.grid.dragClasses_)||d._disabledrag_?a.push(d):b.push(this._selectedNodes[c])}if(0<a.length){b="";for(c=0;c<a.length;c++)b+=", "+this.grid.store.getLabel(a[c]);b=b.substr(2);console.log("Object(s) not dragable "+b);return[]}return b},onDrop:function(a,
b,c){var d=this,e=this._targetAnchor=this.targetAnchor,f=this.grid,g=f.store,e=e&&f.row(e);dojo.Deferred.when(e&&g.get(g.getIdentity(e.data)),function(e){if(d!=a)d.onDropExternal(a,b,c,e);else d.onDropInternal(b,c,e)})},onDropInternal:function(a,b,c){var d=this.grid.store,e=this,f=[];a.forEach(function(a){f.push(e.getObject(a))});d[b&&d.copy?"copy":"put"](f,{before:c,mousePos:this.mousePos_})},onDropExternal:function(a,b,c,d){var e=this.grid.store,f=a.grid,g=[];b.forEach(function(b,c){g.push(a.getObject(b))});
e[c&&e.copy?"copy":"put"](g,{source:f.store,before:d,mousePos:this.mousePos_})},getObject:function(a){return this.grid.row(a).data},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){dojo.dnd.Source.superclass.onMouseMove.call(this,a);var b=dojo.dnd.Manager.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(dojo.dnd.getCopyKeyState(a),
!0))}if(this.isDragging&&(this.mousePos_={x:a.pageX,y:a.pageY},c=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=dojo.domGeo.position(this.current,!0)),c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==dojo.domGeo.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||c!=this.before))if(this._markTargetAnchor(c),this.grid.dropClassesMultiple_||this.grid.dropClassesSimple_)if(this.current)if(a=
this.grid.row(this.current).data,(this.grid.dropClassesSingle_&&a.dndclass in this.grid.dropClassesSingle_&&1==this.grid.selection_.length||this.grid.dropClassesMultiple_&&a.dndclass in this.grid.dropClassesMultiple_)&&!a._disabledrop_){for(var c=!1,d=0;d<b.nodes.length;d++)if(b.source.grid.store.getIdentity(b.source.grid.row(b.nodes[d]))==this.grid.store.getIdentity(a)){c=!0;break}c?b.canDrop(!1):b.canDrop(!0)}else b.canDrop(!1);else b.canDrop(!1);else b.canDrop(!0)}}});dojo.declare("FIRMOS.GridDnD",
dgrid.DnD,{dndAcceptType:["dgrid-row"],dndConstructor:_GridDnDSource,postMixInProperties:function(){this.inherited(arguments);this.dndParams=dojo.mixin(this.dndParams,{accept:this.dndAcceptType})}});dojo.declare("FIRMOS.GridBase",null,{constructor:function(a){if(a.dragClasses){this.dragClasses_={};for(var b=0;b<a.dragClasses.length;b++)this.dragClasses_[a.dragClasses[b]]=!0;delete a.dragClasses}if(a.dropClassesMultiple){this.dropClassesMultiple_={};for(b=0;b<a.dropClassesMultiple.length;b++)this.dropClassesMultiple_[a.dropClassesMultiple[b]]=
!0;delete a.dropClassesMultiple}if(a.dropClassesSingle){this.dropClassesSingle_={};for(b=0;b<a.dropClassesSingle.length;b++)this.dropClassesSingle_[a.dropClassesSingle[b]]=!0;delete a.dropClassesSingle}this.depStores_=[];this.buttons_=[];this.storeRefreshHandler_={};this.selection_=[];this._events=[];G_UI_COM.registerStoreView(a.store.id,this);a.selDepClassname&&(this.id=a.id,G_UI_COM.registerSelDepFunc(a.selDepClassname,a.selDepFunctionname,this))},destroy:function(){G_UI_COM.unregisterStoreView(this.store.id,
this);this.selection={};this.notifyServer();this.selDepClassname&&G_UI_COM.unregisterSelDepFunc(this.selDepClassname,this.selDepFunctionname,this);for(var a=0;a<this.depStores_.length;a++)G_UI_COM.deleteStoreDependency(this.depStores_[a].storeId,this.depStores_[a].refId);for(;0<this._events.length;)this._events.pop().remove();this.inherited(arguments)},getObjectDndType:function(a){return[this.id]},postCreate:function(){this.inherited(arguments);this._events.push(this.on(".dgrid-row:contextmenu",this.onContextMenu.bind(this)));
this._events.push(this.on("dgrid-select",this.onSelect.bind(this)));this._events.push(this.on("dgrid-deselect",this.onDeselect.bind(this)));this._events.push(dojo.aspect.after(this,"expand",this._onExpand.bind(this),!0))},getSelectedIds:function(){var a=[],b;for(b in this.selection)a.push(b);return a},_onExpand:function(a,b,c){b=dojo.query(".firmosIconNode",a.element);for(c=0;c<b.length;c++)if(2==b.length){var d=a.element?a:this.row(a);this._expanded[d.id]?(dojo.style(b[0],"display","none"),dojo.style(b[1],
"display","")):(dojo.style(b[0],"display",""),dojo.style(b[1],"display","none"))}},_renderIconCell:function(a,b,c,d,e,f){c=document.createElement("div");e="<img src='"+a[e]+"' class='firmosIconNode'>";f&&""!=f&&(e=e+"<img src='"+a[f]+"' class='firmosIconNode' style='display:none;'>");c.innerHTML=e+"&nbsp;"+b;return c},_renderDate:function(a,b,c,d){a=document.createElement("div");b&&(a.innerHTML=dojo.date.locale.format(new Date(b),{formatLength:"short"}));return a},_renderIcons:function(a,b,c,d){a=
document.createElement("div");if(!b||""==b)return"";b=b.split(",");c="";for(d=0;d<b.length;d++)c=c+'<img src="'+b[d]+'">';a.innerHTML=c;return a},_selectionChanged:function(){var a=!1,b=this.getSelectedIds();if(b.length!=this.selection_.length)a=!0;else for(var c=0;c<b.length;c++)b[c]!=this.selection_[c]&&(a=!0);a&&(this.selection_=b);return a},onSelect:function(a){if(this._selectionChanged())this.onSelectionChanged(a,this.selection_)},onDeselect:function(a){if(this._selectionChanged())this.onSelectionChanged(a,
this.selection_)},onSelectionChanged:function(a,b){this.refreshDepStores(b);this.refreshButtons(b);this.notifyServer()},updateRow:function(a,b,c,d){if(!b||b.parentNode){b=d.start+c;c=this.id+"-row-"+(d.parentId?d.parentId+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++);var e=(c=dojo.byId(c))&&c.previousSibling;e&&this.adjustRowIndices(e);c.rowIndex=b;a=this.renderRow(a,d);dojo.destroy(c.childNodes[0]);dojo.place(a.childNodes[0],c);dojo.destroy(a);return c}},renderRow:function(a,
b){var c=this.inherited(arguments);if(this.showDetailsSection){var d={params:{}};a._detailsfunc_&&a._funcclassname_?(d.classname=a._funcclassname_,d.functionname=a._detailsfunc_):this.detailsClassname&&(d.classname=this.detailsClassname,d.functionname=this.detailsFunctionname,dojo.mixin(d.params,this.detailsParams),this.detailsUidPath&&(d.uidPath=this.detailsUidPath));if(d.classname){d.params.selected=a.uidpath?a.uidpath instanceof Array?a.uidpath:[a.uidpath]:[a.uid];d.uidPath||(d.uidPath=d.params.selected);
a._detailsfunc_=d;dojo.create("div",{"class":"firmosGridDetailsHidden",id:this.store.getIdentity(a)+"_details_hidden"},c);dojo.create("div",{"class":"firmosGridDetailsLoading",id:this.store.getIdentity(a)+"_details_loading",style:"display:none;"},c);dojo.create("div",{"class":"firmosGridDetails",id:this.store.getIdentity(a)+"_details",style:"display:none;"},c);this.row(a);d=dijit.byId(this.store.getIdentity(a)+"_cc");if(!d){var d=new dijit.layout.ContentPane({id:this.store.getIdentity(a)+"_cc"}),
e=new dijit.layout.ContentPane({id:this.store.getIdentity(a)+"_cp"});d.addChild(e)}dojo.place(d.domNode,c)}}return c},showDetails:function(a){rowId=this.store.getIdentity(a.data);G_UI_COM.setGridDetailsId(rowId);var b=dijit.byId(this.store.getIdentity(a.data)+"_cc");G_SERVER_COM.callServerFunction(a.data._detailsfunc_.classname,a.data._detailsfunc_.functionname,a.data._detailsfunc_.uidPath,a.data._detailsfunc_.params,this.detailsCallback.bind(this),b.getChildren()[0].id);a=dojo.byId(rowId+"_details_hidden");
b=dojo.byId(rowId+"_details_loading");dojo.style(a,"display","none");dojo.style(b,"display","")},detailsCallback:function(a,b,c,d){G_SERVER_COM.handleServerFunctionResponse(a,b,c,d);a=dojo.byId(d.gridDetailsId+"_details_loading");b=dojo.byId(d.gridDetailsId+"_details");dojo.style(a,"display","none");dojo.style(b,"display","");d=dijit.byId(d.gridDetailsId+"_cc");dojo.style(d.domNode,"display","")},hideDetails:function(a){rowId=this.store.getIdentity(a.data);a=dojo.byId(rowId+"_details_hidden");var b=
dojo.byId(rowId+"_details");dojo.style(a,"display","");dojo.style(b,"display","none");a=dijit.byId(rowId+"_cc");dojo.style(a.domNode,"display","none")},onContextMenu:function(a){var b=this.row(a);this.contextMenu._handleGridMenu(a,this,b.data)},_refreshDepStoreViews:function(a){delete this.storeRefreshHandler_[a.store.id];for(var b=0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},refreshDepStore:function(a,b,c){G_UI_COM.setStoreDependency(a,b,"G",c);if(b=G_UI_COM.getStoreById(a))this.storeRefreshHandler_[a]&&
(clearTimeout(this.storeRefreshHandler_[a]),delete this.storeRefreshHandler_[a]),this.storeRefreshHandler_[a]=setTimeout(this._refreshDepStoreViews.bind(this,b),200)},refreshDepStores:function(a){for(var b=0;b<this.depStores_.length;b++)this.refreshDepStore(this.depStores_[b].storeId,this.depStores_[b].refId,a)},refreshButtons:function(a){a=a.length;for(var b=0;b<this.buttons_.length;b++)switch(this.buttons_[b].bType){case "gbd_single":1==a?this.buttons_[b].button.set("disabled",!1):this.buttons_[b].button.set("disabled",
!0);break;case "gbd_multi":0==a?this.buttons_[b].button.set("disabled",!0):this.buttons_[b].button.set("disabled",!1)}},notifyServer:function(){this.selDepClassname&&G_SERVER_COM.callServerFunction(this.selDepClassname,this.selDepFunctionname,this.selDepUidPath,this.selDepParams,null,dijit.byId(this.parentId).getParent()._contentId||null)},registerDepStore:function(a,b){this.depStores_.push({storeId:a,refId:b});this.refreshDepStore(a,b,this.selection_)},registerButton:function(a,b){this.buttons_.push({button:a,
bType:b});a.setGrid(this)},doSearch:function(a){this.store.params_.fulltext=a;this.refresh()}});dojo.declare("FIRMOS.FormButton",dijit.form.Button,{onClick:function(a){a.preventDefault();dojo.stopEvent(a);this._getWidget(dijit.form.Form).disableAllButtons();switch(this.type){case "submit":this.handleTypeSubmit();break;case "button":this.handleTypeButton()}},_getWidget:function(a){for(var b=this.getParent();b&&!b.isInstanceOf(a);)b=b.getParent();return b},handleTypeButton:function(){if(this.closeDialog){var a=
this._getWidget(dijit.Dialog);a&&a.hide()}this.actionClassname&&G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,this.actionParams,this.sfCallback.bind(this));this.downloadId&&(dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),this.downloadId,!0),this.closeDialog||this._getWidget(dijit.form.Form).restoreAllButtons())},handleTypeSubmit:function(){var a=this._getWidget(dijit.form.Form),b=dojo.clone(this.actionParams);a.callServerFunction(this.actionClassname,
this.actionFunctionname,this.actionUidPath,b,this.hiddenFields,this.isDialog)},sfCallback:function(a,b,c,d){this._getWidget(dijit.form.Form).restoreAllButtons();G_SERVER_COM.handleServerFunctionResponse(a,b,c,d)}});dojo.declare("FIRMOS.GridButton",dijit.form.Button,{setGrid:function(a){this.grid_=a},onClick:function(){var a={},b=this.grid_.getSelectedIds(),c;a.dependency=this.grid_.store.params_.dependency;dojo.mixin(a,this.actionParams);a.selected=b;if(this.actionUidPath)c=this.actionUidPath;else if(0<
b.length){var d=this.grid_.row(b[0]);c=[b[0]];d.uidPath?c=d.uidPath:d.uid&&(c=[d.uid])}G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,c,a)}});dojo.declare("FIRMOS.DateTextBox",dijit.form.DateTextBox,{popupClass:"dojox.widget.Calendar",constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_setDisplayedValueAttr:function(a,b){isNaN(a)?this.inherited(arguments):0==Number(a)?this._setValueAttr("",
b,""):this._setValueAttr(new Date(Number(a)),b,new Date(Number(a)))},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.Recurrence",dijit.form._FormValueWidget,{texts:G_TEXTS.recurrence,_selectedRadioCSS:"dijitChecked dijitRadioChecked",_selectedStr:'aria-checked="true"',_rtypeStr:"",_rtypeDetailsStr:"",_startStr:"",
_endStr:"",rtypes:"once minute hour day week month quarter year".split(" "),days:"mo tu we th fr sa su".split(" "),minuteDetails:[{label:"1",value:"1"},{label:"5",value:"5"},{label:"10",value:"10"},{label:"15",value:"15"},{label:"30",value:"30"},{label:"45",value:"45"}],hourDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"6",value:"6"},{label:"12",value:"12"}],dayDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",
value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],monthDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"6",value:"6"}],rtypesVis:[],baseClass:"firmosRecurrenceInput",templateString:"",templateStart:'<div data-dojo-attach-point="wrapperDiv,focusNode" id="${id}" role="presentation">',templateEnd:"</div>",templateDivider:'<div class="firmosRecurrenceDividerContainer"><div class="firmosRecurrenceDivider"></div></div>',templateStartDate:'<div id="${id}_sd"></div><div id="${id}_st"></div>',
templateEndDate:'<div id="${id}_ed"></div><div id="${id}_et"></div>',templateCount:'<div id="${id}_count"></div>',templateCB:'<div data-dojo-attach-point="${value}Div" class="firmosRecurrenceInputItem" role="presentation"><div class="firmosRecurrenceCBContainer"><div class="dijit dijitReset dijitInline dojoxMultiSelectItemBox dijitRadio" role="presentation"><input class="dijitCheckBoxInput" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onclick:_onRadioClick, onmouseover: _onRadioMOver, onmouseout: _onRadioMOut" data-onclick="${onclick}" data-cbid="${value}" type="radio" "/></div><div class="dijitInline dojoxMultiSelectItemLabel" data-dojo-attach-event="onclick:${onclick}" data-cbid="${value}">${caption}</div></div>${details}</div>',
templateonceDetails:"",templateminuteDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_m_detail"></div></div>',templatehourDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_h_detail"></div></div>',templatedayDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_d_detail"></div></div>',
templateweekCB:'<div data-dojo-attach-point="${value}DayDiv" class="dijit dijitReset dijitInline dijitCheckBox" role="presentation"><input class="dijitReset dijitCheckBoxInput" data-onclick="_setWeekDetails" data-day="${value}" type="checkbox" data-dojo-attach-event="onclick:_onBoxClick, onmouseover: _onBoxMOver, onmouseout: _onBoxMOut" style="-moz-user-select: none;"></div>',templateweekDetails:'<div class="dijitInline" style="float:right;">${week_days}</div>',templatemonthDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_mo_detail"></div></div>',
templatequarterDetails:"",templateyearDetails:"",constructor:function(a){for(var b="",c=0;c<this.days.length;c++)b=b+this.templateweekCB.replace(/\$\{value\}/g,this.days[c])+this.texts[this.days[c]]+" ";this.templateweekDetails=this.templateweekDetails.replace(/\$\{week_days\}/g,b);this.templateString=this.templateStart;this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.startDate).replace(/\$\{value\}/g,"sd").replace(/\$\{details\}/g,this.templateStartDate).replace(/\$\{onclick\}/g,
"_onSTSelect");this.templateString+=this.templateDivider;for(c=0;c<this.rtypes.length;c++)a["ri"+this.rtypes[c]]&&(this.rtypesVis.push(this.rtypes[c]),this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts[this.rtypes[c]]).replace(/\$\{value\}/g,this.rtypes[c]).replace(/\$\{details\}/g,this["template"+this.rtypes[c]+"Details"].replace(/\$\{caption\}/g,this.texts.interval)).replace(/\$\{onclick\}/g,"_onRTSelect"));this.templateString+=this.templateDivider;this.templateString+=this.templateCB.replace(/\$\{caption\}/g,
this.texts.noEndDate).replace(/\$\{value\}/g,"ned").replace(/\$\{details\}/g,"").replace(/\$\{onclick\}/g,"_onETSelect");this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.endDate).replace(/\$\{value\}/g,"ed").replace(/\$\{details\}/g,this.templateEndDate).replace(/\$\{onclick\}/g,"_onETSelect");this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.count).replace(/\$\{value\}/g,"count").replace(/\$\{details\}/g,this.templateCount).replace(/\$\{onclick\}/g,
"_onETSelect");this.templateString+=this.templateEnd;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},startup:function(){this.inherited(arguments);this.startDate=new FIRMOS.DateTextBox({style:"float: right;",onChange:this._onSDTChange.bind(this)},this.id+"_sd");this.startTime=new dijit.form.TimeTextBox({style:"float: right;",onChange:this._onSDTChange.bind(this),constraints:{timePattern:"HH:mm",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",
visibleRange:"T01:00:00"}},this.id+"_st");this.endDate=new FIRMOS.DateTextBox({style:"float: right;",onChange:this._onEDTChange.bind(this)},this.id+"_ed");this.endTime=new dijit.form.TimeTextBox({style:"float: right;",onChange:this._onEDTChange.bind(this),constraints:{timePattern:"HH:mm",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T01:00:00"}},this.id+"_et");this.countSelect=new dijit.form.NumberSpinner({style:"float: right; width: 60px;",onChange:this._onCountChange.bind(this),
constraints:{min:1,places:0}},this.id+"_count");this.riminute&&(this.minuteCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setMinuteDetails.bind(this),options:this.minuteDetails},this.id+"_m_detail"),this._setMinuteDetailsUI(""));this.rihour&&(this.hourCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setHourDetails.bind(this),options:this.hourDetails},this.id+"_h_detail"),this._setHourDetailsUI(""));this.riday&&(this.dayCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setDayDetails.bind(this),
options:this.dayDetails},this.id+"_d_detail"),this._setDayDetailsUI(""));this.riweek&&this._setWeekDetailsUI("");this.rimonth&&(this.monthCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setMonthDetails.bind(this),options:this.monthDetails},this.id+"_mo_detail"),this._setMonthDetailsUI(""));this._selectRB(this.sdDiv);this._setValueUI(this.value||"")},_setValueUI:function(a){var b=[];""!=a&&(b=a.split("#"));for(var c=a=!0,d=0;d<b.length;d++)0==b[d].indexOf("DTSTART")?(this._setValueUIStart(b[d]),
a=!1):0==b[d].indexOf("RRULE")?(this._setValueUIRRule(b[d]),c=!1):console.error("Unknown part in recurrence rule definition: "+b[d]);a&&this._setValueUIStart("");c&&this._setValueUIRRule("")},_getChooserTime:function(a){switch(Math.round(a.getMinutes()/15)){case 0:a.setMinutes(0);break;case 1:a.setMinutes(15);break;case 2:a.setMinutes(30);break;case 3:a.setMinutes(45);break;case 4:a.setMinutes(0),a.setHours(a.getHours()+1)}return a},_setValueUIStart:function(a){""==a?(a=this._getChooserTime(new Date),
this.startDate.set("value",a),this.startTime.set("value",a)):(a=this._stringToDateTime(a.substring(8)),this.startDate.set("value",a.date),this.startTime.set("value",a.time))},_setValueUIRRule:function(a){""==a?(this._setRecurrenceTypeUI([]),this._setUntilUI(""),this._setCountUI("")):(a=a.substr(6).split(";"),1<a.length&&0==a[a.length-1].indexOf("UNTIL")?(this._setCountUI(""),this._setUntilUI(a[a.length-1]),a.pop()):(this._setUntilUI(""),1<a.length&&0==a[a.length-1].indexOf("COUNT")?(this._setCountUI(a[a.length-
1]),a.pop()):this._setCountUI("")),this._setRecurrenceTypeUI(a))},_setRecurrenceTypeUI:function(a){var b="";if(0<a.length)switch(a[0].substr(5)){case "MINUTELY":b="minute";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setMinuteDetailsUI(a[1]):this._setMinuteDetailsUI("");break;case "HOURLY":b="hour";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setHourDetailsUI(a[1]):this._setHourDetailsUI("");break;case "DAILY":b="day";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setDayDetailsUI(a[1]):this._setDayDetailsUI("");
break;case "WEEKLY":b="week";1<a.length&&0==a[1].indexOf("BYDAY")?this._setWeekDetailsUI(a[1]):this._setWeekDetailsUI("");break;case "MONTHLY":1<a.length&&"INTERVAL=3"==a[1]?b="quarter":(b="month",1<a.length&&0==a[1].indexOf("INTERVAL")?this._setMonthDetailsUI(a[1]):this._setMonthDetailsUI(""));break;case "YEARLY":b="year"}if(""==b||!this[b+"Div"])for(a=0;a<this.rtypes.length;a++)if(this[this.rtypes[a]+"Div"]){b=this.rtypes[a];break}for(a=0;a<this.rtypesVis.length;a++)this._unselectRB(this[this.rtypesVis[a]+
"Div"]);this._selectRB(this[b+"Div"]);this._setRecurrenceType(b)},_setUntilUI:function(a){""==a?(this._selectRB(this.nedDiv),this._unselectRB(this.edDiv),this._unselectRB(this.countDiv),a=new Date,a.setFullYear(a.getFullYear()+1),a=this._getChooserTime(a),this.endDate.set("value",a),this.endTime.set("value",a),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0)):(this._selectRB(this.edDiv),this._unselectRB(this.nedDiv),this._unselectRB(this.countDiv),a=this._stringToDateTime(a.substring(6)),
this.endDate.set("value",a.date),this.endTime.set("value",a.time),this.endDate.set("disabled",!1),this.endTime.set("disabled",!1));this.countSelect.set("disabled",!0)},_setCountUI:function(a){""==a?(this._selectRB(this.nedDiv),this._unselectRB(this.edDiv),this._unselectRB(this.countDiv),this.countSelect.set("value",1),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!0)):(this._selectRB(this.countDiv),this._unselectRB(this.nedDiv),this.countSelect.set("value",
Number(a.substring(6))),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!1))},_setForeverUI:function(){},_internalSetValue:function(){this.value=this._startStr;""!=this._rtypeStr&&(this.value=this.value+"#"+this._rtypeStr+this._rtypeDetailsStr+this._endStr)},_setRecurrenceType:function(a){this._disableDetails();this._rtypeDetailsStr="";if(a==this.rtypes[0])this._rtypeStr="",this._disableEndBlock(!0);else switch(this._disableEndBlock(!1),a){case this.rtypes[1]:this._disableMinuteDetails(!1);
this._setMinuteDetails();this._rtypeStr="RRULE:FREQ=MINUTELY";break;case this.rtypes[2]:this._disableHourDetails(!1);this._setHourDetails();this._rtypeStr="RRULE:FREQ=HOURLY";break;case this.rtypes[3]:this._disableDayDetails(!1);this._setDayDetails();this._rtypeStr="RRULE:FREQ=DAILY";break;case this.rtypes[4]:this._disableWeekDetails(!1);this._setWeekDetails();this._rtypeStr="RRULE:FREQ=WEEKLY";break;case this.rtypes[5]:this._disableMonthDetails(!1);this._setMonthDetails();this._rtypeStr="RRULE:FREQ=MONTHLY";
break;case this.rtypes[6]:this._rtypeStr="RRULE:FREQ=MONTHLY;INTERVAL=3";break;case this.rtypes[7]:this._rtypeStr="RRULE:FREQ=YEARLY"}this._internalSetValue()},_setMinuteDetailsUI:function(a){""==a?this.minuteCB.set("value",this.minuteDetails[0].id):(a=a.substr(9),this.minuteCB.set("value",a))},_setHourDetailsUI:function(a){""==a?this.hourCB.set("value",this.hourDetails[0].id):(a=a.substr(9),this.hourCB.set("value",a))},_setDayDetailsUI:function(a){""==a?this.dayCB.set("value",this.dayDetails[0].id):
(a=a.substr(9),this.dayCB.set("value",a))},_setWeekDetailsUI:function(a){for(var b=0;b<this.days.length;b++)this._unselectCB(this[this.days[b]+"DayDiv"]);if(""==a)b=(new Date).getDay(),0==b?b=6:b--,this._selectCB(this[this.days[b]+"DayDiv"]);else for(a=a.substr(6).split(","),b=0;b<a.length;b++)this._selectCB(this[a[b].toLowerCase()+"DayDiv"])},_setMonthDetailsUI:function(a){""==a?this.monthCB.set("value",this.monthDetails[0].id):(a=a.substr(9),this.monthCB.set("value",a))},_setMinuteDetails:function(){var a=
this.minuteCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setHourDetails:function(){var a=this.hourCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setDayDetails:function(){var a=this.dayCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setWeekDetails:function(){for(var a=[],b=0;b<this.days.length;b++)this._isSelectedCB(this[this.days[b]+"DayDiv"])&&a.push(this.days[b].toUpperCase());
this._rtypeDetailsStr=a.join(",");0<this._rtypeDetailsStr.length&&(this._rtypeDetailsStr=";BYDAY="+this._rtypeDetailsStr);this._internalSetValue()},_setMonthDetails:function(){var a=this.monthCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_disableDetails:function(){this._disableMinuteDetails(!0);this._disableHourDetails(!0);this._disableDayDetails(!0);this._disableWeekDetails(!0);this._disableMonthDetails(!0)},_disableMinuteDetails:function(a){this.minuteCB.set("disabled",
a)},_disableHourDetails:function(a){this.hourCB.set("disabled",a)},_disableDayDetails:function(a){this.dayCB.set("disabled",a)},_disableWeekDetails:function(a){if(a)for(a=0;a<this.days.length;a++)this._disableCB(this[this.days[a]+"DayDiv"]);else for(a=0;a<this.days.length;a++)this._enableCB(this[this.days[a]+"DayDiv"])},_disableMonthDetails:function(a){this.monthCB.set("disabled",a)},_disableEndBlock:function(a){a?(this._disableRB(this.edDiv),this._disableRB(this.nedDiv),this.endDate.set("disabled",
!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!0)):(this._enableRB(this.edDiv),this._enableRB(this.nedDiv),this._isSelectedRB(this.edDiv)&&(this.endDate.set("disabled",!1),this.endTime.set("disabled",!1)),this._isSelectedRB(this.countDiv)&&this.countSelect.set("disabled",!1))},_onCountChange:function(){this._endStr=";COUNT="+this.countSelect.get("value");this._internalSetValue()},_onEDTChange:function(){this._endStr=";UNTIL="+this._dateTimeToString(this.endDate.get("value"),
this.endTime.get("value"));this._internalSetValue()},_onSDTChange:function(){this._startStr="DTSTART:"+this._dateTimeToString(this.startDate.get("value"),this.startTime.get("value"));this._internalSetValue()},_stringToDateTime:function(a){var b={};a=a.split("T");b.date=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)));1<a.length&&(b.time=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)),Number(a[1].substr(0,2)),Number(a[1].substr(2,
2)),Number(a[1].substr(4,2))),7==a[1].length&&"Z"==a[6]&&b.time.setMinutes(b.time.getMinutes()+b.time.getTimezoneOffset()));return b},_dateTimeToString:function(a,b){var c=""+a.getFullYear();9>a.getMonth()&&(c+="0");c+=a.getMonth()+1;10>a.getDate()&&(c+="0");c+=a.getDate();c+="T";10>b.getHours()&&(c+="0");c+=b.getHours();10>b.getMinutes()&&(c+="0");c+=b.getMinutes();10>b.getSeconds()&&(c+="0");return c+=b.getSeconds()},_onSTSelect:function(a){},_onETSelect:function(a){switch(a.target.getAttribute("data-cbid")){case "ned":this._selectRB(this.nedDiv);
this._unselectRB(this.edDiv);this._unselectRB(this.countDiv);this._endStr="";this.endDate.set("disabled",!0);this.endTime.set("disabled",!0);this.countSelect.set("disabled",!0);break;case "ed":this._selectRB(this.edDiv);this._unselectRB(this.nedDiv);this._unselectRB(this.countDiv);this.endDate.set("disabled",!1);this.endTime.set("disabled",!1);this.countSelect.set("disabled",!0);this._endStr=";UNTIL="+this._dateTimeToString(this.endDate.get("value"),this.endTime.get("value"));break;case "count":this._selectRB(this.countDiv),
this._unselectRB(this.nedDiv),this._unselectRB(this.edDiv),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!1),this._endStr=";COUNT="+this.countSelect.get("value")}this._internalSetValue()},_onRTSelect:function(a){for(var b=0;b<this.rtypesVis.length;b++)this._unselectRB(this[this.rtypesVis[b]+"Div"]);this._selectRB(this[a.target.getAttribute("data-cbid")+"Div"]);this._setRecurrenceType(a.target.getAttribute("data-cbid"))},_disableRB:function(a){dojo.addClass(a.childNodes[0].childNodes[0],
"dijitDisabled");dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioDisabled");this._isSelectedRB(a)&&(dojo.addClass(a.childNodes[0].childNodes[0],"dijitCheckedDisabled"),dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioCheckedDisabled"))},_enableRB:function(a){dojo.removeClass(a.childNodes[0].childNodes[0],"dijitDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitCheckedDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],
"dijitRadioCheckedDisabled")},_unselectRB:function(a){dojo.removeClass(a.childNodes[0].childNodes[0],"dijitChecked");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioChecked")},_selectRB:function(a){dojo.addClass(a.childNodes[0].childNodes[0],"dijitChecked");dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioChecked");dojo.hasClass(a.childNodes[0].childNodes[0],"dijitHover")&&(dojo.addClass(a.childNodes[0].childNodes[0],"dijitCheckedHover"),dojo.addClass(a.childNodes[0].childNodes[0],
"dijitRadioCheckedHover"))},_isSelectedRB:function(a){return dojo.hasClass(a.childNodes[0].childNodes[0],"dijitChecked")},_disableCB:function(a){dojo.addClass(a,"dijitDisabled");dojo.addClass(a,"dijitCheckBoxDisabled");this._isSelectedCB(a)&&(dojo.addClass(a,"dijitCheckedDisabled"),dojo.addClass(a,"dijitCheckBoxCheckedDisabled"))},_enableCB:function(a){dojo.removeClass(a,"dijitDisabled");dojo.removeClass(a,"dijitCheckBoxDisabled");dojo.removeClass(a,"dijitCheckedDisabled");dojo.removeClass(a,"dijitCheckBoxCheckedDisabled")},
_unselectCB:function(a){dojo.removeClass(a,"dijitChecked");dojo.removeClass(a,"dijitCheckBoxChecked");dojo.removeClass(a,"dijitCheckedHover");dojo.removeClass(a,"dijitCheckBoxCheckedHover")},_selectCB:function(a){dojo.addClass(a,"dijitChecked");dojo.addClass(a,"dijitCheckBoxChecked");dojo.hasClass(a,"dijitHover")&&(dojo.addClass(a,"dijitCheckedHover"),dojo.addClass(a,"dijitCheckBoxCheckedHover"))},_isSelectedCB:function(a){return dojo.hasClass(a,"dijitChecked")},_onBoxClick:function(a){dojo.hasClass(a.target.parentNode,
"dijitDisabled")||("true"==a.target.getAttribute("aria-checked")?(a.target.setAttribute("aria-checked",!1),this._unselectCB(a.target.parentNode)):(a.target.setAttribute("aria-checked",!0),this._selectCB(a.target.parentNode)),this[a.target.getAttribute("data-onclick")](a))},_onBoxMOver:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.addClass(a.target.parentNode,"dijitHover"),dojo.addClass(a.target.parentNode,"dijitCheckBoxHover"),dojo.hasClass(a.target.parentNode,"dijitChecked")&&
(dojo.addClass(a.target.parentNode,"dijitCheckBoxCheckedHover"),dojo.addClass(a.target.parentNode,"dijitCheckedHover")))},_onBoxMOut:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.removeClass(a.target.parentNode,"dijitHover"),dojo.removeClass(a.target.parentNode,"dijitCheckBoxHover"),dojo.removeClass(a.target.parentNode,"dijitCheckBoxCheckedHover"),dojo.removeClass(a.target.parentNode,"dijitCheckedHover"))},_onRadioClick:function(a){if(!dojo.hasClass(a.target.parentNode,"dijitDisabled"))this[a.target.getAttribute("data-onclick")](a)},
_onRadioMOver:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.addClass(a.target.parentNode,"dijitHover"),dojo.addClass(a.target.parentNode,"dijitRadioHover"),dojo.hasClass(a.target.parentNode,"dijitChecked")&&(dojo.addClass(a.target.parentNode,"dijitRadioCheckedHover"),dojo.addClass(a.target.parentNode,"dijitRadioHover")))},_onRadioMOut:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.removeClass(a.target.parentNode,"dijitHover"),dojo.removeClass(a.target.parentNode,
"dijitRadioHover"),dojo.removeClass(a.target.parentNode,"dijitRadioCheckedHover"),dojo.removeClass(a.target.parentNode,"dijitRadioHover"))},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.FileUpload",dojox.form.Uploader,{required:!1,constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),
delete a.grouprequired):this.groupRequired=!1;a.disabled&&(setTimeout(this.set.bind(this,"disabled",!0),0),delete a.disabled)},_isEmpty:function(){return""==this.getValue()},isValid:function(a){return!this.required||!this._isEmpty()},validate:function(a){var b="",c=this.disabled||this.isValid(a);dojo.setAttr(this.focusNode,"aria-invalid",c?"false":"true");b=this.getErrorMessage(a);this.set("message",b);return c},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form",
"validate",this.lang)},getErrorMessage:function(a){return this.messages.missingMessage},_createInput:function(){this.inherited(arguments);"image"==this.usefilter&&dojo.setAttr(this.inputNode,"accept","image/*")},_onFocus:function(){this.focused=!0;this.displayMessage(this.message);this.inherited(arguments)},_onBlur:function(){this.focused=!1;this.displayMessage("");this.inherited(arguments)},displayMessage:function(a){a&&this.focused?dijit.Tooltip.show(a,this.titleNode):dijit.Tooltip.hide(this.titleNode)},
_setRequiredAttr:function(a){this._set("required",a);dojo.setAttr(this.focusNode,"aria-required",a)},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.FileUpload.Image",dojox.form.uploader._Base,{uploaderId:"",uploader:null,_upCheckCnt:0,
imgheight:100,imgwidth:100,imgabs:!1,templateString:'<div class="firmosUploaderImage"></div>',constructor:function(a){this._events=[]},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},postCreate:function(){this.inherited(arguments);this.setUploader();this.value?this._createImageTag(this.value):this.contentDiv=dojo.create("div",{"class":"firmosUploaderImageContent",style:"height:"+this.imgheight+"px; width:"+this.imgwidth+"px"},this.domNode)},_createImageTag:function(a){this.contentImg=
dojo.create("img",{"class":"firmosUploaderImageContent",style:this.imgabs?"height:"+this.imgheight+"px; width:"+this.imgwidth+"px":"max-height:"+this.imgheight+"px; max-width:"+this.imgwidth+"px",src:a},this.domNode)},setUploader:function(){if(this.uploaderId||this.uploader){if(this.uploaderId&&!this.uploader&&(this.uploader=dijit.byId(this.uploaderId),!this.uploader)){this._upCheckCnt++;5<this._upCheckCnt?console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload found with id "+this.uploaderId):
setTimeout(this.setUploader.bind(this),250);return}this._events.push(dojo.connect(this.uploader,"onChange",this.selectionChange.bind(this)));this._events.push(dojo.connect(this.uploader,"reset",this.selectionReset.bind(this)))}else console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload set.")},onloadCallback:function(a){this.contentImg?dojo.setAttr(this.contentImg,"src",a.target.result):(dojo.destroy(this.contentDiv),this._createImageTag(a.target.result))},selectionChange:function(){var a=new FileReader;
a.onload=this.onloadCallback.bind(this);a.readAsDataURL(this.uploader._files[0])},selectionReset:function(){console.log("selectionReset")}});dojo.declare("FIRMOS.Form",dijit.form.Form,{constructor:function(a){this.sendChanged=dojo.fromJson(a.sendchanged);this.displayOnly=dojo.fromJson(a.displayonly);delete a.sendchanged;this.groupRequiredFields={};a.dbos&&(this.id=a.id,G_UI_COM.registerFormDBOs(this,a.dbos));a.onChangeClassname&&(this._lastChange=new Date,this._sendChangesParams={},this.sendChangesDelay=
Number(a.onChangeDelay)||0)},destroy:function(){this.dbos&&G_UI_COM.unregisterFormDBOs(this.id,this.dbos);this.inherited(arguments)},onSubmit:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)if(a[b].isInstanceOf(FIRMOS.FormButton)&&"submit"==a[b].type){a[b].handleTypeSubmit();break}return!1},onShow:function(a){this.inherited(arguments);this.sendChanged&&(this.initialData=this.get("value"));for(var b=this.getChildren(),c=0;c<b.length;c++)if(b[c].name){this.displayOnly&&(b[c].isInstanceOf(FIRMOS.FormButton)||
b[c].set("disabled",!0));b[c].isInstanceOf(FIRMOS.BoolCheckBox)&&b[c].updateDepFields(b);b[c].isInstanceOf(FIRMOS.FilteringSelect)&&b[c].init();var d=b[c].name.split(".");d.pop();0==d.length?b[c].groupRequired&&(b[c].set("required",!0),d=dojo.byId(b[c].id+"_label"),dojo.removeClass(d,"firmosFormLabel"),dojo.addClass(d,"firmosFormLabelRequired")):(d=d.join("."),this.groupRequiredFields[d]||(this.groupRequiredFields[d]={},this.groupRequiredFields[d].grf=[],this.groupRequiredFields[d].required=!1,this.groupRequiredFields[d].fields=
[]),b[c].groupRequired&&this.groupRequiredFields[d].grf.push(b[c].id),this.groupRequiredFields[d].fields.push(b[c].id))}for(c in this.groupRequiredFields)if(0==this.groupRequiredFields[c].grf.length)delete this.groupRequiredFields[c];else for(b=0;b<this.groupRequiredFields[c].fields.length;b++)if(d=dijit.byId(this.groupRequiredFields[c].fields[b]),!d.isInstanceOf(FIRMOS.BoolCheckBox)&&(d=d.get("value"))&&""!=d){this._setGroupRequired(c,!0);break}},_setGroupRequired:function(a,b){for(var c=0;c<this.groupRequiredFields[a].grf.length;c++){dijit.byId(this.groupRequiredFields[a].grf[c]).set("required",
b);var d=dojo.byId(this.groupRequiredFields[a].grf[c]+"_label");b?(dojo.removeClass(d,"firmosFormLabel"),dojo.addClass(d,"firmosFormLabelRequired")):(dojo.removeClass(d,"firmosFormLabelRequired"),dojo.addClass(d,"firmosFormLabel"))}this.groupRequiredFields[a].required=b},checkGroupRequiredFields:function(a){if(!a.isInstanceOf(FIRMOS.BoolCheckBox)){var b=a.name.split(".");b.pop();if(0<b.length&&(b=b.join("."),this.groupRequiredFields[b]))if((newValue=a.get("value"))&&""!=newValue)this.groupRequiredFields[b].required||
this._setGroupRequired(b,!0);else{for(a=0;a<this.groupRequiredFields[b].fields.length;a++){var c=dijit.byId(this.groupRequiredFields[b].fields[a]);if(!c.isInstanceOf(FIRMOS.BoolCheckBox)&&(c=c.get("value"))&&""!=c)return}this._setGroupRequired(b,!1)}}},submitOnChange:function(a){if(this.onChangeClassname&&(!a||!a.get("disabled"))){var b=new Date;a&&(this._lastChange=b,this._sendChangesParams[a.name]=a.get("value"));a=b-this._lastChange;a>this.sendChangesDelay?(dojo.clone(this.onChangeParams),G_SERVER_COM.callServerFunction(this.onChangeClassname,
this.onChangeFunctionname,this.onChangeUidPath,this._sendChangesParams),this._sendChangesParams={}):(this._sendTimeout&&clearTimeout(this._sendTimeout),this._sendTimeout=setTimeout(this.submitOnChange.bind(this),this.sendChangesDelay-a))}},_clearObject:function(a,b){for(var c in a)if(a[c]instanceof Array){if(a[c].length==b[c].length){for(var d=!0,e=0;e<a[c].length;e++)if(a[c][e]!=b[c][e]){d=!1;break}d&&delete a[c]}}else if(a[c]instanceof Date||b[c]instanceof Date)a[c]instanceof Date&&b[c]instanceof
Date&&a[c].getTime()==b[c].getTime()&&delete a[c];else if("object"==typeof a[c]){this._clearObject(a[c],b[c]);d=!0;for(e in a[c]){d=!1;break}d&&delete a[c]}else a[c]==b[c]&&delete a[c]},_convertObjectData:function(a){for(var b in a)if(a[b]instanceof Array)for(var c=0;c<a[b].length;c++)a[b][c]instanceof Date&&(a[b][c]=a[b][c].getTime());else a[b]instanceof Date?a[b]=a[b].getTime():"object"==typeof a[b]&&this._convertObjectData(a[b])},_getValueAttr:function(){for(var a=this.inherited(arguments),b=this.getChildren(),
c=0;c<b.length;c++)b[c].name&&b[c]._ignore&&a[b[c].name]&&delete a[b[c].name];return a},_handleFiles:function(a,b,c,d,e,f){for(var g=this.getChildren(),k=[],l=0;l<g.length;l++)if(g[l].name&&g[l].isInstanceOf(FIRMOS.FileUpload)&&g[l]._files)for(var m=0;m<g[l]._files.length;m++)k.push({field:g[l].name,file:g[l]._files[m]});0<k.length?this._sendFiles(a,b,c,d,e,f,k):this._sendData(a,b,c,d,e,f)},_sendFilesCallback:function(a,b,c,d,e,f,g){0==g.length?this._sendData(a,b,c,d,e,f):this._sendFiles(a,b,c,d,
e,f,g)},_sendFiles:function(a,b,c,d,e,f,g){var k=g.pop(),l=k.file,m={data:{}};m.data.size=l.size;m.data.name=l.name;m.data.type=l.type;m.data.field=k.field;m.data.fieldIdx=0;m.data.chunksize=l.size;m.data.chunkIdx=0;a=this._sendFilesCallback.bind(this,a,b,c,d,e,f,g);G_SERVER_COM.callServerFunction("FIRMOS","binaryBulkTransfer",null,m,a,null,l)},_sendData:function(a,b,c,d,e,f){d.data=this.get("value");this.submitData=dojo.clone(d.data);this.sendChanged&&this._clearObject(d.data,this.initialData);this._convertObjectData(d.data);
dojo.mixin(d.data,e);f&&G_UI_COM.isDialogAction();G_SERVER_COM.callServerFunction(a,b,c,d,this.submitCallback.bind(this))},callServerFunction:function(a,b,c,d,e,f){if(!this.validate())return this.restoreAllButtons(),!1;this._handleFiles(a,b,c,d,e,f)},submitCallback:function(a,b,c,d){this.restoreAllButtons();G_SERVER_COM.handleServerFunctionResponse(a,b,c,d)},disableAllButtons:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b]._orgState=a[b].get("disabled"),
a[b].set("disabled",!0))},restoreAllButtons:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b].set("disabled",a[b]._orgState),delete a[b]._orgState)},_updateValues:function(a,b){for(var c in a)if("uid"!=c)if(c instanceof Object)if(c instanceof Array){var d=this._getInputById(b+c);d&&d.set("value",a[c])}else this._updateValues(a[c],b+c+".");else(d=this._getInputById(b+c))&&(d.isInstanceOf(FIRMOS.DateTextBox)?d.set("displayedValue",a[c]):d.set("value",
a[c]))},updateValues:function(a){this._updateValues(a,"")},_getInputById:function(a){for(var b=this.getChildren(),c=0;c<b.length;c++)if(b[c].name==a)return b[c];return null}});dojo.declare("FIRMOS.ToolbarButton",dijit.form.Button,{onClick:function(){this.downloadId&&dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),this.downloadId,!0);this.actionClassname&&G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,this.actionParams)}});dojo.declare("FIRMOS.Toolbar",
dijit.Toolbar,{constructor:function(a){},postCreate:function(){this.inherited(arguments);for(var a=0;a<this.menuDef.length;a++){if(this.menuDef[a].menu){var b={style:"display: none;"};this.menuDef[a].id&&(b.id=this.menuDef[a].id);var b=new dijit.DropDownMenu(b),c=G_UI_COM.addMenuEntries(b,this.menuDef[a].menu,this.menuDef[a].disabled);b.set("disabled",c);c={label:this.menuDef[a].caption,dropDown:b,disabled:c};c=new dijit.form.DropDownButton(c);b._parentUIElement=c}else{b=this.menuDef[a];c={};b.action&&
(c.actionClassname=b.action["class"],c.actionFunctionname=b.action.func,c.actionUidPath=b.action.uidPath,c.actionParams=b.action.params);b.downloadId&&(c.downloadId=b.downloadId);""==b.caption?c.showLabel=!1:c.label=b.caption;if(b.icon){var d=b.icon.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(d,"background-image: url('"+b.icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");c.iconClass=d}b.disabled&&(c.disabled=!0);b.id&&(c.id=b.id);c=new FIRMOS.ToolbarButton(c)}this.addChild(c)}}});
dojo.declare("FIRMOS.Menu",dijit.Menu,{_clearEntries:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)this.removeChild(a[b]),a[b].destroyRecursive()},setCoords:function(a,b){this._openMyselfArgs||(this._openMyselfArgs={});this._openMyselfArgs.coords={x:a,y:b}},entriesLoaded:function(a){this._clearEntries();G_UI_COM.addMenuEntries(this,a,!1);this.startup();this._openMyself(this._openMyselfArgs,!0)},_openMyself:function(a,b){if(b)this.inherited(arguments,[a]);else switch(this.cType){case "tree":this._openMyselfArgs=
a;this._handleTreeMenu(a);break;default:0<this.getChildren().length&&this.inherited(arguments)}},_handleTreeMenu:function(a){var b=dijit.getEnclosingWidget(a.target);a={};var c,d;if(b.isInstanceOf(dijit._TreeNode)){var e=b.item,f=b.tree;dojo.mixin(a,f.model.store.params_);b=e.uidpath?e.uidpath instanceof Array?e.uidpath:[e.uidpath]:[e.uid];e._menufunc_&&e._funcclassname_?(c=e._funcclassname_,d=e._menufunc_):this.treeItemClassname&&(c=this.treeItemClassname,d=this.treeItemFunctionname,dojo.mixin(a,
this.treeItemParams),this.treeItemUIDPath&&(b=this.treeItemUIDPath));if(0<b.length||f.model.store.getIdentity(e)!=b[0])a.selected=[f.model.store.getIdentity(e)]}else f=b,dojo.mixin(a,f.model.store.params_),c=this.treeClassname,d=this.treeFunctionname,b=this.treeUidPath,dojo.mixin(a,this.treeParams);if(c){for(;f&&!f.isInstanceOf(dijit.Tree);)f=f.getParent();G_UI_COM.setMenu(this);G_SERVER_COM.callServerFunction(c,d,b,a)}},_handleGridMenu:function(a,b,c){this._openMyselfArgs={target:a.target,coords:{x:a.pageX,
y:a.pageY}};a=dojo.clone(b.store.params_);var d={};d.uidPath=c.uidpath?c.uidpath instanceof Array?c.uidpath:[c.uidpath]:[c.uid];c._menufunc_&&c._funcclassname_?(d.classname=c._funcclassname_,d.functionname=c._menufunc_):this.gridClassname&&(d.classname=this.gridClassname,d.functionname=this.gridFunctionname,dojo.mixin(a,this.gridParams),this.gridUIDPath&&(d.uidPath=this.gridUIDPath));if(d&&d.classname){b=b.getSelectedIds();if(1<b.length||0<d.uidPath.length||b[0]!=d.uidPath[0])a.selected=b;G_UI_COM.setMenu(this);
G_SERVER_COM.callServerFunction(d.classname,d.functionname,d.uidPath,a)}}});dojo.declare("FIRMOS.FilteringSelect",dijit.form.FilteringSelect,{_hidden:!1,constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1;a.depGroup?(this.depGroup=dojo.fromJson(a.depGroup),delete a.depGroup):this.depGroup=[]},_updateDepField:function(a,b){var c=dojo.byId(a.inputId+"_tr");if(c){dijit.byId(a.inputId);for(var d=c.querySelectorAll("[widgetid]"),
e=[],f=0;f<d.length;f++)e[f]=dijit.byId(d[f].getAttribute("widgetid"));if(b||a.value!=this.value)for(dojo.style(c,"display","none"),f=0;f<e.length;f++)a.ignoreHidden&&(e[f]._ignore=!0,e[f].get("required")&&(e[f]._required=!0,e[f].set("required",!1))),e[f].isInstanceOf(FIRMOS.FilteringSelect)&&e[f].hide();else for(dojo.style(c,"display",""),f=0;f<e.length;f++)delete e[f]._ignore,e[f]._required&&(e[f].set("required",e[f]._required),delete e[f]._required),e[f].isInstanceOf(FIRMOS.FilteringSelect)&&e[f].unhide()}},
hide:function(){this._hidden=!0;this._hideAllDepFields()},unhide:function(){this._hidden=!1;this._updateDepGroup()},_updateDepGroup:function(){for(var a=0;a<this.depGroup.length;a++)this._updateDepField(this.depGroup[a])},_hideAllDepFields:function(){for(var a=0;a<this.depGroup.length;a++)this._updateDepField(this.depGroup[a],!0)},init:function(){""==this.value&&(this.required||this._required)&&0<this.store.data.length&&this.set("value",this.store.data[0].value);this._hidden?this._hideAllDepFields():
this._updateDepGroup()},onChange:function(a){this.inherited(arguments);this._hidden||this._updateDepGroup();for(var b=this.getParent();b&&!b.isInstanceOf(dijit.form.Form);)b=b.getParent();b&&b.isInstanceOf(FIRMOS.Form)&&(b.checkGroupRequiredFields(this),b.submitOnChange(this))}});dojo.declare("FIRMOS.BoolCheckBox",dijit.form.CheckBox,{constructor:function(a){a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),this.hasDepFields=!0,delete a.dependentfields):(this.hasDepFields=!1,this.depFields=
{});a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},updateDepFields:function(a){for(var b in this.depFields)for(var c=0;c<a.length;c++)if(b==a[c].name){"true"==this.get("value")&&this.depFields[b]||"false"==this.get("value")&&!this.depFields[b]?a[c].set("disabled",!0):a[c].set("disabled",!1);break}},onChange:function(){this.inherited(arguments);if(this.hasDepFields){for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();
this.updateDepFields(a.getChildren())}},_getValueAttr:function(){return this.checked?"true":"false"}});dojo.declare("FIRMOS.MultiValText",dijit.form.Textarea,{constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_getValueAttr:function(){var a=this.inherited(arguments);return""==a?[]:a.split("\n")},filter:function(a){var b="object"==typeof a?this.inherited(arguments,[a.join("\n")]):this.inherited(arguments),b=b.replace(/\n+/g,
"\n");b.lastIndexOf("\n")==b.length-1&&(b=b.substring(0,b.length-1));return b},_setBlurValue:function(){},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.ValidationTextBox",dijit.form.ValidationTextBox,{constructor:function(a){a.forbiddenchars?(this.regExpForbidden=eval(a.forbiddenchars),delete a.forbiddenchars):
this.regExpForbidden=null;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},isValid:function(a){if(this.confirms){var b=this.getParent()._getInputById(this.confirms);if(this.get("value")!=b.get("value"))return!1}return this.inherited(arguments)},validate:function(a){if(this.regExpForbidden){var b=this.textbox.selectionStart,c=this.textbox.value.length,d=this.textbox.value.replace(this.regExpForbidden,"");d.length<c&&(this.textbox.value=d,c-=d.length,
this.textbox.selectionStart=b-c,this.textbox.selectionEnd=b-c)}return this.inherited(arguments)},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.NumberTextBox",dijit.form.NumberTextBox,{constructor:function(a){a.constraints||(a.constraints={});this.regExpForbidden=a.constraints.places&&0==a.constraints.places?
/[^\d\-]/g:/[^\d\.\,\-]/g;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_setBlurValue:function(){},validate:function(a){var b=this.textbox.selectionStart,c=this.textbox.value.length,d=this.textbox.value.replace(this.regExpForbidden,"");d.length<c&&(this.textbox.value=d,c-=d.length,this.textbox.selectionStart=b-c,this.textbox.selectionEnd=b-c);return this.inherited(arguments)},_getValueAttr:function(){var a=this.inherited(arguments);isNaN(a)&&
(a="");return a},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.NumberSlider",dijit.form._FormValueWidget,{templateString:'<div data-dojo-attach-point="focusNode" id="${id}" role="presentation"><div id="${id}_number"></div><div id="${id}_slider"></div></div>',constructor:function(a){a.constraints=dojo.fromJson(a.constraints);
this.sliderParams={};this.sliderParams.minimum=a.constraints.min;this.sliderParams.maximum=a.constraints.max;a.constraints.steps&&(this.sliderParams.discreteValues=a.constraints.steps);this.sliderParams.value=a.value;this.sliderParams.intermediateChanges=a.intermediateChanges;a.showvalue&&(this.showvalue=eval(a.showvalue),delete a.showvalue);this.showvalue&&(this.sliderParams.style="width:75%;",this.numberParams={},this.numberParams.style="width:20%; float:right;",this.numberParams.value=a.value,
this.numberParams.places=a.constraints.places,this.numberParams.disabled=!0);this._multi=1;for(var b=0;b<a.constraints.places;b++)this._multi*=10},startup:function(){this.inherited(arguments);this.sliderParams.onChange=this._onSliderChange.bind(this);this.showvalue&&(this.number=new dijit.form.NumberTextBox(this.numberParams,this.id+"_number"));this.slider=new dijit.form.HorizontalSlider(this.sliderParams,this.id+"_slider")},_onSliderChange:function(){if(Math.round(this.slider.get("value")*this._multi)/
this._multi!=this.value){this.value=Math.round(this.slider.get("value")*this._multi)/this._multi;this.showvalue&&this.number.set("value",this.value);var a=this.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&a.submitOnChange(this)}}});dojo.declare("FIRMOS.TabContainer",dijit.layout.TabContainer,{constructor:function(){this.watch("selectedChildWidget",this.tabChange)},addTabs:function(a){a.sort(G_UI_COM.sortFuncSubSecOrd);for(var b=0;b<a.length;b++)this.addChild(a[b]),G_UI_COM.showSectionPathInProgress||
!a[b].selected||a[b]._fixContent||this.tabChange("",null,a[b])},contentLoadedCallback:function(a,b,c,d,e){G_SERVER_COM.handleServerFunctionResponse(b,c,d,e);a._loadedCallback&&(a._loadedCallback(),delete a._loadedCallback)},selectChild:function(a,b){b&&(a._fixContent?b():a._loadedCallback=b);!a._fixContent&&a.selected&&this.tabChange("",null,a);this.inherited(arguments)},selectDefault:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)if(a[b].selected){this.selectChild(a[b]);break}},tabChange:function(a,
b,c){if(c._fixContent){var d=[];this._getDescendants(c,d,"visibilityChange");for(a=0;a<d.length;a++)d[a].visibilityChange(!0)}else G_SERVER_COM.callServerFunction(c._contentFunc["class"],c._contentFunc.func,c._contentFunc.uidPath,c._contentFuncParams,this.contentLoadedCallback.bind(this,c),c._updateId);this.UIStateChangeClass&&(a=this.UIStateChangeParams,a.sectionId=c.id,G_SERVER_COM.callServerFunction(this.UIStateChangeClass,this.UIStateChangeFunc,this.UIStateChangeUidPath,a));if(b)if(b._fixContent)for(c=
[],this._getDescendants(b,c,"visibilityChange"),a=0;a<c.length;a++)c[a].visibilityChange(!1);else{c=[];this._getDescendants(b,c,"destroyNotify");if(0<c.length){d=[];for(a=0;a<c.length;a++)d.push(c[a].id);G_SERVER_COM.callServerFunction("FIRMOS","destroy",null,{ids:d})}c=null;if(b.isTCElem)for(b=b.getChildren(),a=0;a<b.length;a++){if(!b[a].isInstanceOf(FIRMOS.Toolbar)){b=b[a].getChildren();0<b.length&&(c=b[0]);break}}else c=b.getChildren()[0];c&&c.destroyRecursive()}},_getDescendants:function(a,b,
c){a[c]&&b.push(a);for(var d=a.getChildren(),e=0;e<d.length;e++)a.isInstanceOf(FIRMOS.TabContainer)&&!d[e].selected||this._getDescendants(d[e],b,c)},getChild:function(a){for(var b=this.getChildren(),c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null}});dojo.declare("FIRMOS.MultiContentTabController",null,{constructor:function(){this.domNode=dojo.create("div")},startup:function(){},destroy:function(){dojo.destroy(this.domNode)}});dojo.declare("FIRMOS.MultiContentContainer",FIRMOS.TabContainer,
{baseClass:"firmosMultiContentContainer",constructor:function(a){this.animationSpeed=20;this.animationStep=0.1;this.controllerWidget=FIRMOS.MultiContentTabController},addTabs:function(a){this.inherited(arguments);for(var b=0;b<a.length;b++)a[b].domNode.style.position="absolute"},_animateHideChild:function(a,b){0>b?(a.domNode.style.opacity=0,this.hideChildTO=null,this._hideChild(a,!0)):(a.domNode.style.opacity=b,this.hideChildTO=setTimeout(this._animateHideChild.bind(this,a,b-this.animationStep),this.animationSpeed))},
_hideChild:function(a,b){this.hideChildTO?(clearTimeout(this.hideChildTO),this.hideChildTO=null,this.inherited(this.hideArgs),this.hideArgs=arguments):this.hideArgs||(this.hideArgs=arguments);b?(this.inherited(this.hideArgs),this.hideArgs=null):this._animateHideChild(a,1)},_animateShowChild:function(a,b){1<b?(this.showChildTO=null,a.domNode.style.opacity=1):(a.domNode.style.opacity=b,this.showChildTO=setTimeout(this._animateShowChild.bind(this,a,b+this.animationStep),this.animationSpeed))},_showChild:function(a){this.showChildTO&&
(clearTimeout(this.showChildTO),this.showChildTO=null);this.inherited(arguments);a.domNode.style.opacity=0;this._animateShowChild(a,0)}});dojo.declare("FIRMOS.SplitContainer",dijit.layout.BorderContainer,{addChildren:function(a){var b;if(2<a.length){b=a.shift();b.region="top";var c=100-b._height;b.set("style","height: "+b._height+"%;");this.addChild(b);b=a.pop();b.region="bottom";c-=b._height;b.set("style","height: "+b._height+"%;");this.addChild(b);b=new FIRMOS.SplitContainer({id:this.id+"_child",
"class":"borderContainer",region:"center",gutters:!1});b.set("style","height: "+c+"%;");for(var d=0;d<a.length;d++)a[d]._height=a[d]._height/c*100;this.addChild(b);b.addChildren(a)}else 2==a.length&&(b=a.shift(),b.region="top",b.set("style","height: "+b._height+"%;"),this.addChild(b)),b=a.pop(),b.region="center",b.set("style","height: "+b._height+"%;"),this.addChild(b)}});dojo.declare("FIRMOS.GridFilter",null,{texts:G_TEXTS.gridfilter,renderHeader:function(){this.inherited(arguments);if(!this.filterDisabled)for(var a=
dojo.query(".dgrid-cell",this.headerNode),b=0;b<a.length;b++){var c=a[b].columnId;if(this.columns[c]&&this.columns[c].filterable&&this.columns[c].dataType&&"ICO"!=this.columns[c].dataType){var d=dijit.byId(this.id+"_"+c+"_ddb");if(!d){switch(this.columns[c].dataType){case "STR":var e=this.getStringFilterDialog(this.columns[c]),f="setStringFilter";break;case "DAT":e=this.getDateFilterDialog(this.columns[c]);f="setDateFilter";break;case "NUM":case "PRG":e=this.getNumberFilterDialog(this.columns[c]);
f="setNumberFilter";break;case "BOO":e=this.getBooleanFilterDialog(this.columns[c]);f="setBooleanFilter";break;default:console.error('Grid filter error: Unknown data type set for column "'+this.columns[c].label.replace(/"/g,'"')+'": '+this.columns[c].dataType)}var e='<form dojoType="dijit.form.Form" id="'+this.id+"_"+c+'" onsubmit="return false;"><table style="width:100%">'+e+'<tr><td colspan="2" class="firmosGridFilterDialogButtons"><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.'+
f+"('"+c+"',ttd.formValues); ttd.ddbutton.closeDropDown();\">"+this.texts.setButton+'</button><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].reset(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.clearFilter(\''+c+"'); ttd.ddbutton.closeDropDown();\">"+this.texts.clearButton+"</button></td></tr></table></form>",g=new dijit.TooltipDialog({id:this.id+"_"+c+"_td","class":"firmosGridFilterDialog"+
this.columns[c].dataType,content:e,onShow:function(a){this.formValues=this.getChildren()[0].get("value")},onOpen:function(a){this.getChildren()[0].set("value",this.formValues)},grid:this}),d=new dijit.form.DropDownButton({id:this.id+"_"+c+"_ddb",label:"",dropDown:g,"class":"firmosGridFilter",iconClass:"firmosGridFilterIconClass",onClick:function(a){a.preventDefault();dojo.stopEvent(a);return!1}});g.ddbutton=d}a[b].appendChild(d.domNode)}}},clearFilter:function(a){G_UI_COM.deleteStoreDependency(this.store.id,
a);a=dojo.query(".firmosGridFilter",this.column(a).headerNode);dojo.removeClass(a[0],"firmosGridFilterSet");this.refresh()},setStringFilter:function(a,b){""==b.filter?this.clearFilter(a):(G_UI_COM.setStoreDependency(this.store.id,a,"SS",[b.filter]),this.filterSet(a))},setNumberFilter:function(a,b){if(b.type==this.texts.numberOptions.gtlt){if(""==b.value1&&""==b.value2){this.clearFilter(a);return}}else if(""==b.value){this.clearFilter(a);return}switch(b.type){case this.texts.numberOptions.eq:G_UI_COM.setStoreDependency(this.store.id,
a,"R8",[b.value],"EX");break;case this.texts.numberOptions.lt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value],"LE");break;case this.texts.numberOptions.gt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value],"GT");break;case this.texts.numberOptions.gtlt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value1,b.value2],"REXB")}this.filterSet(a)},setDateFilter:function(a,b){if(b.type==this.texts.dateOptions.gtlt){if(!b.value1&&!b.value2){this.clearFilter(a);return}}else if(!b.value){this.clearFilter(a);
return}switch(b.type){case this.texts.dateOptions.eq:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"EX");break;case this.texts.dateOptions.lt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"LE");break;case this.texts.dateOptions.gt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"GT");break;case this.texts.dateOptions.gtlt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value1,b.value2],"REXB")}this.filterSet(a)},setIconFilter:function(a,b){this.filterSet(a)},
setBooleanFilter:function(a,b){G_UI_COM.setStoreDependency(this.store.id,a,"BO",[b.filter]);this.filterSet(a)},filterSet:function(a){a=dojo.query(".firmosGridFilter",this.column(a).headerNode);dojo.addClass(a[0],"firmosGridFilterSet");this.refresh()},getStringFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><label for="'+this.id+"_"+a.id+'_filter">'+this.texts.filterLabel+'</label></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="dijit.form.TextBox" id="'+
this.id+"_"+a.id+'_filter" name="filter" style="width:100%"></td></tr>'},numberFilterTypeChange:function(a,b,c){c=dijit.byId(b+"_value");var d=dijit.byId(b+"_value1");b=dijit.byId(b+"_value2");a==this.texts.numberOptions.gtlt?(dojo.style(c.domNode,"display","none"),dojo.style(d.domNode,"display",""),dojo.style(b.domNode,"display","")):(dojo.style(c.domNode,"display",""),dojo.style(d.domNode,"display","none"),dojo.style(b.domNode,"display","none"))},dateFilterTypeChange:function(a,b,c){c=dijit.byId(b+
"_value");var d=dijit.byId(b+"_value1");b=dijit.byId(b+"_value2");a==this.texts.dateOptions.gtlt?(dojo.style(c.domNode,"display","none"),dojo.style(d.domNode,"display",""),dojo.style(b.domNode,"display","")):(dojo.style(c.domNode,"display",""),dojo.style(d.domNode,"display","none"),dojo.style(b.domNode,"display","none"))},getNumberFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.numberFilterTypeChange(value,\''+
this.id+"_"+a.id+"',this);}\"><option>"+this.texts.numberOptions.eq+"</option><option>"+this.texts.numberOptions.lt+"</option><option>"+this.texts.numberOptions.gt+"</option><option>"+this.texts.numberOptions.gtlt+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+
this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},getDateFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.dateFilterTypeChange(value,\''+this.id+"_"+a.id+"',this);}\"><option>"+this.texts.dateOptions.eq+"</option><option>"+this.texts.dateOptions.lt+
"</option><option>"+this.texts.dateOptions.gt+"</option><option>"+this.texts.dateOptions.gtlt+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},
getIconFilterDialog:function(a){return""},getBooleanFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><label for="'+this.id+"_"+a.id+'_filter">'+this.texts.filterLabel+'</label></td><td class="firmosGridFilterFormInputTD"><select data-dojo-type="dojox.form.CheckedMultiSelect" style="width:100%" id="'+this.id+"_"+a.id+'_filter" name="filter" value="true"><option value="true">Yes</option><option value="false">No</option></select></td></tr>'}});dojo.declare("FIRMOS.StoreSeries",
null,{constructor:function(a,b,c,d){this.chartId=d;this.store=a;this.kwArgs=b;this.value=c?"function"==typeof c?c:"object"==typeof c?function(a){var b={},d;for(d in c)b[d]=a[c[d]];return b}:function(a){return a[c]}:function(a){return a.value};this.data=[];this._initialRendering=!1;this.fetch()},destroy:function(){this.observeHandle&&this.observeHandle.remove()},setSeriesObject:function(a){this.series=a},fetch:function(){function a(){b.data=dojo.array.map(b.objects,function(a){return b.value(a,b.store)});
b._pushDataChanges()}this.objects=[];var b=this;this.observeHandle&&this.observeHandle.remove();var c=this.store.query(this.kwArgs.query,this.kwArgs);dojo.Deferred.when(c,function(c){b.objects=c;a()});c.observe&&(this.observeHandle=c.observe(a,!0,this.chartId))},_pushDataChanges:function(){this.series&&(this.series.chart.updateSeries(this.series.name,this,this._initialRendering),this._initialRendering=!1,this.series.chart.delayedRender())}});dojo.declare("FIRMOS.D3Chart",dijit.layout.ContentPane,
{constructor:function(a){for(var b in a)this[b]=a[b];if(!this.seriesColor)for(this.seriesColor=[],b=0;b<this.seriesCount;b++)this.seriesColor[b]="000";G_UI_COM.createCSSRule("d3axis path, .axis line","fill: none;shape-rendering: crispedges;stroke: #000000;");this._events=[];this.scale_y=this.scale_x=this.chartCaption=this.clipPathRect=this.clipPath=this.svgMainG=this.svg=this.container=null;this.margin={top:20,right:20,bottom:20,left:40};this.axisYG=this.axisY=null;this.stopped=!0;this.axisXG=this.axisX=
null;this.axisXMargin=0;this.legend=this.axisYG=this.axisY=null;this.legendItems=[];this.legendSize=0;this.newLines=[];switch(a.type){case "lct_line":this.dataIdx=0;this.buffer=[];this._animationTime=this.updateInterval;this._animationStart_1=new Date;this._animationStart_2=new Date;this._oldAnimationTime_2=this._oldAnimationTime_1=this.updateInterval;this._dataToLate=this._doNotCalc=0;break;case "lct_column":this.data=[],this.rects=[]}this.dummyData=this.dataMin-this.dataMax;this.domainX=[];if("lct_line"==
a.type||"lct_sampledline"==a.type)this.interpolation="linear",this.path=[],this.line=[],this.data=[];G_UI_COM.registerLiveChart(this)},visibilityChange:function(a){a?this.start():this.stop()},destroy:function(){this.stop();G_UI_COM.unregisterLiveChart(this);for(this._removeSeriesCSS();0<this._events.length;)this._events.pop().remove();this.inherited(arguments)},redefine:function(a){var b=!1;a.caption&&this.caption!=a.caption&&(this.caption=a.caption,this.chartCaption.text(this.caption));a.dataLabels&&
(this.dataLabels=a.dataLabels);if(a.dataCount&&this.dataCount!=a.dataCount){switch(this.type){case "lct_line":this.domainX=[1,a.dataCount-2];for(var c=0;c<this.seriesCount;c++)if(a.dataCount>this.dataCount)for(var d=0;d<a.dataCount-this.dataCount;d++)this.data[c].unshift(this.dummyData);else for(d=0;d<this.dataCount-a.dataCount;d++)this.data[c].shift();break;case "lct_sampledline":this.domainX=[0,a.dataCount-1];break;case "lct_column":this.domainX=this.dataLabels?d3.range(a.dataCount).map(function(a){return this.dataLabels[a]}.bind(this)):
d3.range(a.dataCount).map(function(a){return a})}this.dataCount=a.dataCount;this.scale_x.domain(this.domainX)}if(a.dataLabels||a.dataCount&&this.dataCount!=a.dataCount)this.axisXG.call(this.axisX).selectAll("text").style("text-anchor","end"),this._adjustAxisX(),b=!0;(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)&&this._removeSeriesCSS();a.seriesColor&&(this.seriesColor=a.seriesColor);if(a.seriesCount&&this.seriesCount!=a.seriesCount){if(a.seriesCount>this.seriesColor.length)for(c=
this.seriesColor.length;c<a.seriesCount;c++)this.seriesColor[c]="000";else if(a.seriesCount<this.seriesColor.length)for(c=this.seriesColor.length-1;c>=a.seriesCount;c--)this.seriesColor.pop();if(a.seriesCount>this.seriesCount)for(c=this.seriesCount;c<a.seriesCount;c++){if("lct_line"==this.type){this.buffer[c]=[];for(var e=0==this.seriesCount?this.bufferSize+1:this.buffer[0].length,d=0;d<e;d++)this.buffer[c][d]=this.dummyData;0==this.seriesCount?setTimeout(this.updateData.bind(this,c),0):this.newLines.push(c)}if("lct_line"==
this.type||"lct_sampledline"==this.type)this.data[c]=d3.range(this.dataCount).map(function(){return this.dummyData}.bind(this)),this._createLine(c)}else for(c=this.seriesCount-1;c>=a.seriesCount;c--)if("lct_line"==this.type&&this.buffer.pop(),"lct_line"==this.type||"lct_sampledline"==this.type)this.data.pop(),this.line.pop(),this.path.pop().remove();this.seriesCount=a.seriesCount}(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)&&this._createSeriesCSS();if(this.legendLabels&&(a.seriesColor||
a.seriesCount&&this.seriesCount!=a.seriesCount)||a.legendLabels)this.legendLabels?this.legend.remove():(this.margin.bottom+=20,b=!0),a.legendLabels&&(this.legendLabels=a.legendLabels);b&&(this.height=dojo.position(this.container).h-this.margin.top-this.margin.bottom,this.clipPathRect.attr("height",this.height),this.scale_y.range([this.height,0]),this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")"));if(a.dataMin||a.dataMax)a.dataMin&&(this.dataMin=a.dataMin),a.dataMax&&(this.dataMax=
a.dataMax),this.scale_y.domain([this.dataMin,this.dataMax]),this.axisYG.call(this.axisY);(this.legendLabels&&(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)||a.legendLabels)&&this._paintLegend();this._paintData()},_removeSeriesCSS:function(){for(var a=0;a<this.seriesCount;a++)G_UI_COM.removeCSSRule("series"+this.id+"_"+a)},_createSeriesCSS:function(){if("lct_line"==this.type||"lct_sampledline"==this.type)for(var a=0;a<this.seriesCount;a++)G_UI_COM.createCSSRule("series"+this.id+"_"+
a,"fill: none; stroke: #"+this.seriesColor[a]+"; stroke-width: 1.5px;");if("lct_column"==this.type)for(a=0;a<this.seriesCount;a++)G_UI_COM.createCSSRule("series"+this.id+"_"+a,"fill: #"+this.seriesColor[a])},_paintData:function(){switch(this.type){case "lct_line":case "lct_sampledline":this.scale_x.range([0,this.width]);for(var a=0;a<this.seriesCount;a++)this.path[a].attr("d",this.line[a]);break;case "lct_column":this.scale_x.rangeRoundBands([0,this.width],0.1),this._paintColumns()}},applyScale:function(){var a=
dojo.position(this.container);this.width=a.w-this.margin.left-this.margin.right;this.height=a.h-this.margin.top-this.margin.bottom;this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom);this.clipPathRect.attr("width",this.width).attr("height",this.height);this.scale_y.range([this.height,0]);this.axisYG.call(this.axisY);this._paintData();this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")").call(this.axisX).selectAll("text").style("text-anchor",
"end");this.chartCaption&&this.chartCaption.attr("x",this.width/2).attr("y",-(this.margin.top-20))},postCreate:function(){this.inherited(arguments);this.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%;"></div>');this.set("style","overflow: hidden");setTimeout(this.createChart.bind(this),0)},stop:function(){this.stopped=!0;this.sfParams.action="stop";G_SERVER_COM.callServerFunction(this.sfClass,this.sfFunc,this.sfUidPath,this.sfParams)},start:function(){if(this.stopped){this.stopped=
!1;switch(this.type){case "lct_line":for(var a=0;a<this.seriesCount;a++)this._createLine(a);for(a=this.dataIdx=0;a<this.seriesCount;a++){this.buffer[a]=[];for(var b=0;b<=this.bufferSize;b++)this.buffer[a][b]=this.dummyData}break;case "lct_sampledline":for(a=0;a<this.seriesCount;a++)this._createLine(a)}this.initClass?G_SERVER_COM.callServerFunction(this.initClass,this.initFunc,this.initUidPath,this.initParams,this._initCallback.bind(this)):this._start()}},_initData:function(){for(var a=0;a<this.seriesCount;a++)this.data[a]=
d3.range(this.dataCount).map(function(){return this.dummyData}.bind(this))},_createLine:function(a){this.line[a]=d3.svg.line().interpolate(this.interpolation).x(function(a,b){return this.scale_x(b)}.bind(this)).y(function(a,b){return this.scale_y(a)}.bind(this));this.path[a]=this.svgMainG.append("g").attr("clip-path","url(#clip)").append("path").data([this.data[a]]).attr("class","series"+this.id+"_"+a).attr("d",this.line[a])},_initCallback:function(a,b,c,d){if(b){a=dojo.fromJson(c.output);switch(this.type){case "lct_line":for(b=
0;b<a.length;b++){c=this.bufferSize+1;d=!0;this.buffer[b]=[];for(var e=a[b].length-1;0<=e;e--)if(d)c--,this.buffer[b][c]=a[b][e],0==c&&(d=!1,c=this.dataCount);else if(c--,this.data[b][c]=a[b][e],0==c)break;if(d&&0<c)for(e=c-1;0<=e;e--)this.buffer[b][e]=this.dummyData;d&&(c=this.dataCount);if(0<c)for(e=c-1;0<=e;e--)this.data[b][e]=this.dummyData}if(this.seriesCount>a.length)for(b=a.length;b<this.seriesCount;b++)this._fillWithDummyData(b);break;case "lct_sampledline":case "lct_column":this.setData(a)}this._start()}else console.error("Server Function Error => "+
c.cn+"."+c.fn+": "+c.error)},_start:function(){this.sfParams.action="start";G_SERVER_COM.callServerFunction(this.sfClass,this.sfFunc,this.sfUidPath,this.sfParams);switch(this.type){case "lct_line":this._animationStart_1=new Date-this.updateInterval;this._animationStart_2=this._animationStart_1-this.updateInterval;this._oldAnimationTime_2=this._oldAnimationTime_1=this.updateInterval;for(var a=this._doNotCalc=0;a<this.seriesCount;a++)this.updateData(a)}},setData:function(a,b){if(!this.stopped)switch(this.type){case "lct_line":this._setLineData(a,
b);break;case "lct_sampledline":this._setSampledLineData(a);break;case "lct_column":this._setColumnData(a)}},_setSampledLineData:function(a){if(this._setCompleteData(a))for(a=0;a<this.seriesCount;a++)this.path[a].attr("d",this.line[a])},_setLineData:function(a,b){if(a.length!=this.seriesCount)console.error("Live Chart "+this.id+": received data points count ("+a.length+") does not match series count ("+this.seriesCount+")");else if(this.dataIdx==b){for(var c=0;c<this.seriesCount;c++)this.buffer[c].push(a[c]);
this.dataIdx++}else if(b<this.dataIdx)this._dataToLate=10*this.bufferSize;else for(c=0;c<this.seriesCount;c++){for(var d=0;d<b-this.dataIdx;d++)this.buffer[c].push(this.dummyData);this.buffer[c].push(a[c]);this.dataIdx=this.dataIdx+(b-this.dataIdx)+1}},_setColumnData:function(a){this._setCompleteData(a)&&this._paintColumns()},_setCompleteData:function(a){if(a.length!=this.seriesCount)return console.error("Live Chart "+this.id+": received data sets count ("+a.length+") does not match series count ("+
this.seriesCount+")"),!1;for(var b=0;b<this.seriesCount;b++)for(var c=0;c<a[b].length;c++){if(a[b].length!=this.dataCount)return console.error("Live Chart "+this.id+": received data count ("+a[b].length+") for set "+b+" does not match data count ("+this.dataCount+")"),!1;this.data[b][c]=a[b][c]}return!0},updateData:function(a){if(!this.stopped)if(this.seriesCount<=a)this._doNotCalc&&(this._doNotCalc=this._doNotClac-1);else{if(0==this.buffer[a].length){this.dataIdx++;for(var b=0;b<this.seriesCount;b++)this.buffer[b].push(this.dummyData)}this.data[a].push(this.buffer[a].shift());
if(this._doNotCalc)this._doNotCalc=this._doNotClac-1;else for(this._doNotCalc=this.seriesCount-1,this._animationTime=this.updateInterval-(this._animationStart_1-this._animationStart_2-this._oldAnimationTime_2),this._animationTime<this.updateInterval/2&&(this._animationTime=this.updateInterval/2),this.buffer[a].length>this.bufferSize&&(this._animationTime-=this.updateInterval/10),this.buffer[a].length<this.bufferSize&&(this._dataToLate=10),this._dataToLate&&(this._dataToLate-=1,this._animationTime+=
this.updateInterval/10),this._oldAnimationTime_2=this._oldAnimationTime_1,this._oldAnimationTime_1=this._animationTime,this._animationStart_2=this._animationStart_1,this._animationStart_1=new Date;0<this.newLines.length;)setTimeout(this.updateData.bind(this,this.newLines.pop()),0);this.path[a].attr("d",this.line[a]).attr("transform",null).transition().duration(this._animationTime).ease("linear").attr("transform","translate("+this.scale_x(0)+")").each("end",this.updateData.bind(this,a));this.data[a].shift()}},
createChart:function(){this.container=dojo.byId(this.id+"_container");this._initData();this._createSeriesCSS();""!=this.caption&&(this.margin.top+=20);this.legendLabels&&(this.margin.bottom+=20);var a=dojo.position(this.container);this.svg=d3.select(this.container).append("svg").attr("width",a.w).attr("height",a.h);this.svgMainG=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");this.width=a.w-this.margin.left-this.margin.right;""!=this.captiom&&(this.chartCaption=
this.svgMainG.append("text").attr("x",this.width/2).attr("y",-(this.margin.top-20)).attr("text-anchor","middle").attr("class","firmosLiveChartCaption").text(this.caption));switch(this.type){case "lct_line":this.domainX=[1,this.dataCount-2];this.scale_x=d3.scale.linear().domain(this.domainX).range([0,this.width]);break;case "lct_sampledline":this.domainX=[0,this.dataCount-1];this.scale_x=d3.scale.linear().domain(this.domainX).range([0,this.width]);break;case "lct_column":this.domainX=this.dataLabels?
d3.range(this.dataCount).map(function(a){return this.dataLabels[a]}.bind(this)):d3.range(this.dataCount).map(function(a){return a}),this.scale_x=d3.scale.ordinal().domain(this.domainX).rangeRoundBands([0,this.width],0.1)}this.dataLabels&&(this.axisX=d3.svg.axis().scale(this.scale_x).orient("bottom"),this.axisXG=this.svgMainG.append("g").attr("class","x d3axis").call(this.axisX),this._adjustAxisX());this.height=a.h-this.margin.top-this.margin.bottom;this.axisXG&&this.axisXG.attr("transform","translate(0,"+
this.height+")");this.legendLabels&&this._paintLegend();this.clipPath=this.svgMainG.append("defs").append("clipPath").attr("id","clip");this.clipPathRect=this.clipPath.append("rect").attr("width",this.width).attr("height",this.height);this.scale_y=d3.scale.linear().domain([this.dataMin,this.dataMax]).range([this.height,0]);this.axisY=d3.svg.axis().scale(this.scale_y).ticks(this.dataTickHint).orient("left");this.axisYG=this.svgMainG.append("g").attr("class","y d3axis").call(this.axisY);this.start();
this._events.push(dojo.connect(this,"resize",this.applyScale.bind(this)))},_adjustAxisX:function(){var a=0;this.axisXG.selectAll("text").style("text-anchor","end").attr("transform",function(a){return"rotate(-90)"}).attr("transform",function(b){b=this.getBoundingClientRect();ySpace=b.bottom-b.top;ySpace>a&&(a=ySpace);return"rotate(-90) translate(-5,"+(b.left-b.right)+")"});this.margin.bottom=this.margin.bottom-this.axisXMargin+a;this.axisXMargin=a},_paintLegend:function(){this.legendSize=0;this.legend=
this.svgMainG.append("g");for(var a=0;a<this.seriesCount;a++){this.legendItems[a]=this.legend.append("g").attr("class","legend");this.legendItems[a].append("rect").attr("x",this.legendSize).attr("y",-5).attr("width",18).attr("height",2).style("fill","#"+this.seriesColor[a]);this.legendSize+=25;var b=this.legendItems[a].append("text").attr("x",this.legendSize).text(this.legendLabels[a]);this.legendSize=this.legendSize+b[0][0].getBBox().width+20}this.legentSize=this.legendSize-20;this.legend.attr("transform",
"translate("+(this.width/2-this.legendSize/2)+","+(this.height+this.margin.top-10)+")")},_paintColumns:function(){for(var a=0;a<this.seriesCount;a++){var b=this.svgMainG.selectAll(".series"+this.id+"_"+a).data(this.data[a]);b.enter().append("rect").attr("class","series"+this.id+"_"+a);var c=0<this.dataMin?this.dataMin:0;b.attr("x",function(a,b){return this.scale_x(this.domainX[b])}.bind(this)).attr("width",this.scale_x.rangeBand()).attr("y",function(a,b){return this.scale_y(a)}.bind(this)).attr("height",
function(a,b){return a<this.dataMin?0:this.scale_y(c)-this.scale_y(a)}.bind(this));b.exit().remove()}}});dojo.declare("FIRMOS.Chart",dojox.charting.widget.Chart,{constructor:function(a){this.store_=a.store;this.type=a.type;this.seriesIds_=a.seriesids;this.title=a.title;this.storeAdapters_=[];if(a.labels){this.labels_=[];for(var b="ct_column"==this.type?1:0,c=0;c<a.labels.length;c++)this.labels_[c]={value:c+b,text:a.labels[c]}}G_UI_COM.registerStoreView(a.store.id,this)},destroy:function(){for(var a=
0;a<this.storeAdapters_.length;a++)this.storeAdapters_[a].destroy();G_UI_COM.unregisterStoreView(this.store.id,this);this.inherited(arguments);this.firstRenderListener_&&(this.firstRenderListener_.remove(),this.firstRenderListener_=null)},_getValueFunc:function(a){var b={};b.y=a.value;a.color&&(b.color=a.color);a.text&&(b.text=a.text);a.legend&&(b.legend=a.legend);return b},_addSeries:function(){this.chart.setTheme(dojox.charting.themes.Firmos);for(var a=0;a<this.seriesIds_.length;a++)this.storeAdapters_.push(new FIRMOS.StoreSeries(this.store_,
{query:{sId:this.seriesIds_[a]}},this._getValueFunc,this.id)),this.chart.addSeries(this.seriesIds_[a],this.storeAdapters_[this.storeAdapters_.length-1]);var a={},b={vertical:!0},c={markers:!0,gap:2};switch(this.type){case "ct_pie":c.type="Pie";break;case "ct_column":c.type="ClusteredColumns";this.labels_&&(a.dropLabels=!1,a.labels=this.labels_,a.rotation=90);a.dropLabels=!1;b.includeZero=!0;0<this.maxValue&&(b.max=this.maxValue);break;case "ct_line":c.type="Lines",this.labels_&&(a.labels=this.labels_),
b.includeZero=!0}this.chart.addAxis("x",a);this.chart.addAxis("y",b);this.chart.title=this.title;this.chart.addPlot("default",c);this.showlegend&&(this.firstRenderListener_=dojo.connect(this.chart,"render",this._showLegend.bind(this)))},_showLegend:function(){this.firstRenderListener_&&(this.firstRenderListener_.remove(),this.firstRenderListener_=null);this.getParent().getParent().getChildren()[1].content.refresh();this.getParent().getParent().layout()},buildRendering:function(){this.inherited(arguments);
setTimeout(this._addSeries.bind(this),0)}});dojo.declare("FIRMOS.TopMenu",dijit.layout.BorderContainer,{constructor:function(a){this._events=[]},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},postCreate:function(){this.inherited(arguments);var a=new dijit.layout.ContentPane({region:"top",splitter:!1,"class":"firmosTransparent"}),b;b='<div class="topMenu"><div class="topMenuLogoLeft"></div>';b+='<div class="topMenuLogoRight"></div>';b+='<div class="buttonListWrapper">';
for(var c,d,e=0;e<this.entries.length;e++)this.entries[e].isBig?(c="53",d="Big"):(c="38",d=""),G_UI_COM.createCSSRule("topMenu"+this.entries[e].entryId,"background: url("+this.entries[e].icon+"); background-repeat: no-repeat; background-size:"+c+"px "+c+"px; background-position: center;"),b=b+'<div class="buttonListItem"><div id="topMenu'+this.entries[e].entryId+'" class="menuButton'+d+'"><div class="base"><div class="shineTop"><div class="buttonIcon topMenu'+this.entries[e].entryId+'"><div class="shineBottom"></div></div></div></div><div class="captionContainer"><div class="buttonCaption">'+
this.entries[e].caption+"</div></div></div></div>";b+="</div></div>";a.set("content",b);this.addChild(a);setTimeout(this._registerButtons.bind(this),0)},_registerButtons:function(){this.layout();for(var a=0;a<this.entries.length;a++){var b=dojo.byId("topMenu"+this.entries[a].entryId);this._events.push(dojo.connect(b,dojox.gesture.tap,this.onClickHandler.bind(this,a)))}},onClickHandler:function(a,b){this.entries[a].isDialog?this.entries[a].isJira?window._showCollectorDialog?window._showCollectorDialog():
console.error("JIRA integration not included!"):G_SERVER_COM.callServerFunction(this.entries[a]["class"],this.entries[a].func,this.entries[a].uidpath,this.entries[a].params):G_UI_COM.showSectionPath(this.subSecsId,[this.entries[a].entryId],!0)}});dojo.declare("FIRMOS.Sitemap",dijit.layout.BorderContainer,{constructor:function(){this._events=[];this.mainEntriesBB=this.mainEntriesGroupGFX=this.mainEntriesSurface=this.mainEntriesContainer=this.detailsCP=this.mainEntriesCP=null;this.mainEntriesMoveCtrl=
!1;this.mainEntriesMoveCtrlDownGFX=this.mainEntriesMoveCtrlUpGFX=null;this.mainEntriesPos=0;this.detailsDim=this.detailsSurface=this.detailsContainer=null;this.detailsMinVisibleSection=100;this.animationRunning=!1;this.toggleAnimationDuration=500;this.focusElementAnimationDuration=250;this.minimizedScale=0.05;this.levelScale=0.6;this.moveFactor=0.2;this.lastMove_=(new Date).getTime();this.moving_=!1;this.mouseWheelDivisor=this.moveToClickTimeMin=100;this.pinchDivisor=5;G_UI_COM.registerSitemap(this)},
destroy:function(){for(G_UI_COM.unregisterSitemap(this);0<this._events.length;)this._events.pop().remove();this.inherited(arguments);this.mainEntriesMoveEndEvent&&(this.mainEntriesMoveEndEvent.remove(),this.mainEntriesMoveEndEvent=null)},postCreate:function(){this.inherited(arguments);this.mainEntriesCP=new dijit.layout.ContentPane({region:"left",splitter:!1,"class":"firmosTransparent"});this.mainEntriesCP.set("content",'<div id="'+this.id+'_me_gfx" style="width:100%; height:100%;"></div>');this.mainEntriesCP.set("style",
"width: 140px; overflow: hidden");this.detailsCP=new dijit.layout.ContentPane({region:"center",splitter:!1,"class":"firmosTransparent"});this.detailsCP.set("content",'<div id="'+this.id+'_d_gfx" style="width:100%; height:100%;"></div>');this.detailsCP.set("style","width: 100%; overflow: hidden");this.addChild(this.mainEntriesCP);this.addChild(this.detailsCP);setTimeout(this.buildSitemap.bind(this),0)},buildSitemap:function(){for(var a=this.getParent(),b=this;a;)a.isInstanceOf(FIRMOS.TabContainer)&&
(b._fixContent=!0),b=a,a=b.getParent();this.mainEntriesContainer=dojo.byId(this.id+"_me_gfx");this.mainEntriesSurface=dojox.gfx.createSurface(this.id+"_me_gfx","100%","100%");this.detailsContainer=dojo.byId(this.id+"_d_gfx");this.detailsSurface=dojox.gfx.createSurface(this.id+"_d_gfx","100%","100%");this.buildSVGDefs();b=!1;for(a=0;a<this.entries.length;a++)this.entries[a].entries?(this.entries[a].collapsed=b,b=!0):this.entries[a].collapsed=!0;if(1==this.entries.length)this.mainEntriesCP.set("style",
"display: none"),this._fixEntriesDataType(this.entries[0]);else for(this.mainEntriesGroupGFX=this.mainEntriesSurface.createGroup(),a=0;a<this.entries.length;a++)b=this.mainEntriesGroupGFX.createGroup(),this.entries[a].groupGFX=b,this.entries[a].x=80,this.entries[a].y=0==a?30:this.entries[a-1].y+this.entries[a-1].height+30,this.createEntry(b,this.entries[a],!1),this.entries[a].collapsed||(this.entries[a].elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryPressed"),this.entries[a].elementGFX.rawNode.childNodes[1].setAttribute("class",
"firmosSitemapEntryPressed2")),this.createShortcut(this.entries[a]);b=[];this.detailsDim=dojo.position(this.detailsContainer);for(a=0;a<this.entries.length;a++)if(this.entries[a].childrenGroupMoveGFX=this.detailsSurface.createGroup(),this.entries[a].childrenGroupGFX=this.entries[a].childrenGroupMoveGFX.createGroup(),this.entries[a].activeLevel=1,this.entries[a].levelScale=1,this.entries[a].maxLevel=1,this.entries[a].maxLevelScale=1,b[0]=a,0<this.entries[a].entries.length){this.buildDetails(this.entries[a],
b,null,this.entries[a].childrenGroupGFX);for(var c=1;c<this.entries[a].maxLevel;c++)this.entries[a].maxLevelScale/=this.levelScale;c=this.entries[a].childrenGroupGFX.getBoundingBox();this.entries[a].eventRect=this.entries[a].childrenGroupMoveGFX.createRect({x:c.x-this.detailsDim.w,y:c.y-this.detailsDim.h,width:c.width+2*this.detailsDim.w,height:c.height+2*this.detailsDim.h}).setFill([0,0,0,0]).moveToBack();c=dojox.gfx.Moveable(this.entries[a].childrenGroupMoveGFX);this._events.push(dojo.connect(c,
"onMoveStop",this._moveActionStop.bind(this)));this._events.push(dojo.connect(c,"onMove",this._moveAction.bind(this)));this._events.push(dojo.connect(this.entries[a].eventRect.getEventSource(),dojox.gesture.tap.doubletap,this.resetDisplay.bind(this,this.entries[a])));this._events.push(dojo.connect(this.entries[a].eventRect.getEventSource(),"gesturechange",this.gestureHandler.bind(this,this.entries[a])));c=dojo.isMozilla?"DOMMouseScroll":"onmousewheel";this._events.push(dojo.connect(this.entries[a].childrenGroupMoveGFX.getEventSource(),
"gesturechange",this.gestureHandler.bind(this,this.entries[a])));this._events.push(dojo.connect(this.entries[a].childrenGroupMoveGFX.getEventSource(),c,this.gestureHandler.bind(this,this.entries[a])))}else this.entries[a].path=dojo.clone(b);1<this.entries.length&&(this.mainEntriesBB=this.mainEntriesGroupGFX.getBoundingBox());this.resizeSVGHandler();this.layout();setTimeout(this._initialLayoutDetails.bind(this),0);this._events.push(dojo.connect(this,"resize",this.resizeSVGHandler.bind(this)))},gestureHandler:function(a,
b){if(this.animationRunning)setTimeout(this.gestureHandler.bind(this,a,b),100);else{if(b.scale)var c=1+(b.scale-1)/this.pinchDivisor;else c=b[dojo.isMozilla?"detail":"wheelDelta"]*(dojo.isMozilla?-1:1),c=1+c/this.mouseWheelDivisor;var d=a.levelScale*c;1>d&&(d=1,c=d/a.levelScale);d>a.maxLevelScale&&(d=a.maxLevelScale,c=d/a.levelScale);var e=dojo.position(this.domNode);a.levelScale=d;a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(c,e.w/2-this.detailsDim.x,e.h/2));for(var c=2,e=1,
f=1/this.levelScale;f<d;)e=f,f/=this.levelScale,c+=1;d-e<f-d&&(c-=1);d=a.activeLevel;a.activeLevel=c;this.highlightActiveLevel(a,d)}},_initialLayoutDetails:function(){for(var a=0;a<this.entries.length;a++)0<this.entries[a].entries.length&&this.layoutDetails(this.entries[a])},_moveAction:function(){this.moving_=!0},_moveActionStop:function(){this.moving_&&(this.lastMove_=(new Date).getTime(),this._checkDetailsVisibility());this.moving_=!1},_checkDetailsVisibility:function(){for(var a=0;a<this.entries.length;a++)if(!1==
this.entries[a].collapsed){var b=this.entries[a].childrenGroupGFX.getTransformedBoundingBox(),c=this.detailsMinVisibleSection-b[1].x,d=this.detailsDim.w-this.detailsMinVisibleSection-b[0].x,e=this.detailsMinVisibleSection-b[2].y,b=this.detailsDim.h-this.detailsMinVisibleSection-b[1].y,f=!1;0<c?f=!0:c=0;0>d?f=!0:d=0;0<e?f=!0:e=0;0>b?f=!0:b=0;f&&this.entries[a].childrenGroupMoveGFX.applyTransform(dojox.gfx.matrix.translate(c+d,e+b));break}},layoutDetails:function(a){this._centerGFX(a.childrenGroupMoveGFX,
a.entries[0].elementGFX);if(a.collapsed){var b=a.childrenGroupMoveGFX.getTransformedBoundingBox(),c=a.groupGFX.getTransformedBoundingBox(),d=dojo.position(this.mainEntriesContainer);c[0].x-=d.w;c[1].x-=d.w;a.childrenGroupMoveGFX.moveToBack();a.childrenGroupMoveGFX.applyTransform(dojox.gfx.matrix.translate(c[0].x+(c[1].x-c[0].x)/2-b[0].x-(b[1].x-b[0].x)/2,c[1].y+(c[2].y-c[1].y)/2-b[1].y-(b[2].y-b[1].y)/2));a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(this.minimizedScale,c[0].x+
(c[1].x-c[0].x)/2,c[1].y+(c[2].y-c[1].y)/2));a.childrenGroupMoveGFX.rawNode.style.display="none"}},buildDetails:function(a,b,c,d){a.path=dojo.clone(b);if(c)var e=a.elementGFX.getTransformedBoundingBox(),f=e[0].x+(e[1].x-e[0].x)/2,e=e[1].y+(e[2].y-e[1].y)/2;this.entries[b[0]].maxLevel=Math.max(this.entries[b[0]].maxLevel,b.length-1);for(var g=0;g<a.entries.length;g++){var k=d.createGroup();a.entries[g].groupGFX=k;this.createEntry(k,a.entries[g],1==a.path.length);var l=a.entries[g].groupGFX.getTransformedBoundingBox();
if(c){var m=a.entries[g].elementGFX.getTransformedBoundingBox(),n=m[0].x+(m[1].x-m[0].x)/2,m=m[1].y+(m[2].y-m[1].y)/2,p=d.createRect({x:0,y:0,width:0,height:0});a.entries[g].connector=p;p.rawNode.setAttribute("style",'fill: url("/#connectorgradient"); fill-opacity: 1;');this.repaintConnector(p,n,m,f,e,5)}b.push(g);this.buildDetails(a.entries[g],b,l,k);b.pop();c&&(k=(f-n)*this.moveFactor,l=(e-m)*this.moveFactor,a.entries[g].connector.applyLeftTransform(dojox.gfx.matrix.translate((f-n)*this.moveFactor,
(e-m)*this.moveFactor)),a.entries[g].connector.applyLeftTransform(dojox.gfx.matrix.scaleAt(1-this.moveFactor,n+(f-n)*this.moveFactor,m+(e-m)*this.moveFactor)),a.entries[g].groupGFX.applyTransform(dojox.gfx.matrix.translate(k,l)),a.entries[g].groupGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(this.levelScale,n+k,m+l)))}},repaintConnector:function(a,b,c,d,e,f){var g=d-b,k=e-c;e=b+g/2;c+=k/2;g=Math.sqrt(g*g+k*k);k=Math.asin(k/g);d<b&&(k=-k);a.setShape({x:e-g/2,y:c-f/2,width:g,height:f});a.applyTransform(dojox.gfx.matrix.rotateAt(k,
e,c)).moveToBack();a._originalTrans=a.getTransform()},_fixEntriesDataType:function(a){a.entries?a.entries instanceof Array||(a.entries=[a.entries]):a.entries=[]},createEntry:function(a,b,c){this._fixEntriesDataType(b);a=a.createGroup();b.elementGFX=a;b.width=100;b.height=b.icon?78:35;var d="";c&&(d="AL");c=a.createPath({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"});c.applyTransform(dojox.gfx.matrix.translate(b.x-
67.2,b.y));var e=a.createPath({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"});e.applyTransform(dojox.gfx.matrix.translate(b.x-67.2,b.y));var f=c.getTransformedBoundingBox();if(b.icon){a.createImage({x:f[0].x+(f[1].x-f[0].x)/2-24,y:f[1].y+5,width:48,height:48,src:b.icon,preserveAspectRatio:"meet"});var g=f[1].y+48+20}else g=
f[1].y+(f[2].y-f[1].y)/2+5;f=a.createText({x:f[0].x+(f[1].x-f[0].x)/2,y:g,text:b.caption,align:"center"}).setFont({family:"Arial",size:"10pt"}).setFill("white");f.applyTransform(dojox.gfx.matrix.translate(-f.getTextWidth()/2,0));f.getTextWidth()>b.width-10&&(f=f.getTextWidth()-b.width+10,b.width+=f,c.setShape({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"}),e.setShape({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+
(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"}),c.applyTransform(dojox.gfx.matrix.translate(f/2,0)),e.applyTransform(dojox.gfx.matrix.translate(f/2,0)));b.disabled?(c.rawNode.setAttribute("class","firmosSitemapEntryDisabled"+d),e.rawNode.setAttribute("class","firmosSitemapEntryDisabled2")):(c.rawNode.setAttribute("class","firmosSitemapEntry"+d),e.rawNode.setAttribute("class","firmosSitemapEntry2"));
d=a.getTransformedBoundingBox();a.createRect({x:d[0].x,y:d[1].y,width:d[1].x-d[0].x,height:d[2].y-d[1].y}).setFill([0,0,0,0]);this._events.push(dojo.connect(a.getEventSource(),dojox.gesture.tap,this.elementOnClick.bind(this,b,!1)));1!=b.scale&&(d=a.getTransformedBoundingBox(),a.applyLeftTransform(dojox.gfx.matrix.scaleAt(b.scale,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2)));this.createInfoUI(b)},createInfoUI:function(a){if(0<a.newscount)if(a.infoGFX){var b=0;if(99<a.newscount){var c=8;100>
a.newscount_old&&(b=-1)}else 99<a.newscount_old&&(b=1),c=10;delete a.newscount_old;var d=a.infoGFX.children[2],e=d.getTextWidth();d.setShape({text:a.newscount+""}).setFont({size:c+"pt"});d.applyTransform(dojox.gfx.matrix.translate(e/2-d.getTextWidth()/2,b))}else b=a.elementGFX.getBoundingBox(),e=a.groupGFX.createGroup(),e.createCircle({cx:b.x+b.width,cy:b.y,r:12}).setFill("white"),e.createCircle({cx:b.x+b.width,cy:b.y,r:10}).setFill("red"),c=99<a.newscount?8:10,d=e.createText({x:b.x+b.width+1,y:b.y+
c/2,text:a.newscount+""}).setFont({family:"Arial",size:c+"pt"}).setFill("white"),d.applyTransform(dojox.gfx.matrix.translate(-d.getTextWidth()/2,0)),1!=a.scale&&(e.applyLeftTransform(dojox.gfx.matrix.scaleAt(a.scale,b.x+b.width,b.y)),e.applyTransform(dojox.gfx.matrix.translate(-b.width*(1-a.scale)/2,b.height*(1-a.scale)/2))),a.infoGFX=e;else a.infoGFX&&(a.infoGFX.destroy(),delete a.infoGFX,delete a.newscount_old)},_isShortcutDisabled:function(a){if(!a.entries)return!0;for(var b=0;b<a.entries.length;b++)if(!a.entries[b].disabled||
this._isShortcutDisabled(a.entries[b]))return!1;return!0},createShortcut:function(a){var b=a.disabled||this._isShortcutDisabled(a),c=b?"firmosSMShortcutDisabled":"firmosSMShortcutEnabled",d=a.elementGFX.getBoundingBox(),e=a.groupGFX.createGroup(),f=e.createPath({path:"M19.158,32.64c-2.551,0-5.035-0.738-7.185-2.134c-2.961-1.922-4.995-4.882-5.729-8.334c-0.733-3.452-0.078-6.983,1.844-9.943c2.447-3.77,6.595-6.02,11.094-6.02c2.55,0,5.034,0.738,7.183,2.134c2.961,1.922,4.996,4.882,5.73,8.335c0.734,3.452,0.079,6.984-1.844,9.944C27.805,30.391,23.658,32.64,19.158,32.64z"});
f.rawNode.setAttribute("class",c+"1");f=e.createPath({path:"M19.184,5.709v1c2.453,0,4.842,0.71,6.91,2.053c2.849,1.85,4.807,4.698,5.513,8.02c0.706,3.321,0.076,6.72-1.774,9.568c-2.354,3.625-6.345,5.79-10.675,5.79c-2.454,0-4.844-0.71-6.913-2.053c-2.848-1.85-4.806-4.697-5.511-8.019c-0.706-3.321-0.076-6.719,1.774-9.567c2.354-3.626,6.345-5.792,10.674-5.792L19.184,5.709M19.183,5.709c-4.488,0-8.886,2.202-11.513,6.248C3.544,18.308,5.347,26.8,11.701,30.926c2.308,1.499,4.896,2.214,7.457,2.214c4.489,0,8.888-2.201,11.514-6.246c4.126-6.353,2.32-14.846-4.033-18.971C24.331,6.425,21.742,5.709,19.183,5.709L19.183,5.709z"});
f.rawNode.setAttribute("class",c+"2");f=e.createPath({path:"M0.2-20.001c-10.906,0-19.779,8.874-19.779,19.78c0,10.907,8.873,19.781,19.779,19.781c4.679,0,8.971-1.644,12.356-4.373l-9.806-8.48l25.828-3.813l-0.05,26.107l-9.07-7.845c-5.101,4.599-11.85,7.404-19.259,7.404c-15.894,0-28.779-12.887-28.779-28.781s12.886-28.78,28.779-28.78c12.468,0,23.081,7.928,27.08,19.016l-9.199,1.359C14.913-15.336,8.1-20.001,0.2-20.001z"});f.rawNode.setAttribute("class",c+"3");f.applyTransform({xx:-0.2177,yx:0.1947,xy:0.2037,
yy:0.2278,dx:19.4619,dy:18.75});e.applyTransform(dojox.gfx.matrix.translate(d.x+d.width-25,d.y+d.height-18));1!=a.scale&&(e.applyLeftTransform(dojox.gfx.matrix.scaleAt(a.scale,d.x+d.width,d.y)),e.applyTransform(dojox.gfx.matrix.translate(-d.width*(1-a.scale)/2,-d.height*(1-a.scale)/2)));a.scGFX=e;b||this._events.push(dojo.connect(e.getEventSource(),dojox.gesture.tap,this.elementOnClick.bind(this,a,!0)))},_getEntryByPath:function(a){for(var b,c=this;0<a.length;){var d=a.shift();b=!0;for(var e=0;e<
c.entries.length;e++)if(d==c.entries[e].id){c=c.entries[e];b=!1;break}if(b){console.error("_getEntryByPath: Child "+d+" not found");return}}return c},updateInfoUI:function(a,b){var c=this._getEntryByPath(a);c.newscount_old=c.newscount;c.newscount=b;this.createInfoUI(c)},_buildSVGDef:function(a){var b=dojo.doc.createElementNS("http://www.w3.org/2000/svg",a.tagname);if(a.attrs){a.attrs instanceof Array||(a.attrs=[a.attrs]);for(var c=0;c<a.attrs.length;c++)b.setAttribute(a.attrs[c].name,a.attrs[c].value)}if(a.elems)for(a.elems instanceof
Array||(a.elems=[a.elems]),c=0;c<a.elems.length;c++){var d=this._buildSVGDef(a.elems[c]);b.appendChild(d)}return b},buildSVGDefs:function(){for(var a=this.mainEntriesSurface.rawNode.getElementsByTagName("defs")[0],b=this.detailsSurface.rawNode.getElementsByTagName("defs")[0],c=0;c<this.defs.length;c++){var d=this._buildSVGDef(this.defs[c]);a.appendChild(d);b.appendChild(d)}},_createEventRects:function(){this.detailsDim=dojo.position(this.detailsContainer);for(var a=0;a<this.entries.length;a++)if(0<
this.entries[a].entries.length){var b=this.entries[a].childrenGroupGFX.getBoundingBox();this.entries[a].eventRect.setShape({x:b.x-this.detailsDim.w,y:b.y-this.detailsDim.h,width:b.width+2*this.detailsDim.w,height:b.height+2*this.detailsDim.h})}this._checkDetailsVisibility()},resizeSVGHandler:function(){if(1<this.entries.length)if(this.mainEntriesCP.set("style","width: "+(2*this.mainEntriesBB.x+this.mainEntriesBB.width-1)+"px; overflow: hidden;"),setTimeout(function(){this.mainEntriesCP.set("style",
"width: "+(2*this.mainEntriesBB.x+this.mainEntriesBB.width)+"px; overflow: hidden;")}.bind(this),0),this.mainEntriesContainerDim=dojo.position(this.mainEntriesContainer),this.mainEntriesBB.y+this.mainEntriesBB.height>this.mainEntriesContainerDim.h)if(this.mainEntriesMoveCtrl){var a=this.mainEntriesBB.y+this.mainEntriesBB.height+this.mainEntriesPos-this.mainEntriesContainerDim.h;0<a?(this._createMoveCtrlDown(),this._repositionMoveCtrlDown()):(this._removeMoveCtrlDown(),this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,
-a)),this.mainEntriesPos-=a)}else this.mainEntriesMoveCtrl=!0,this._createMoveCtrlDown();else this.mainEntriesMoveCtrl&&(this._removeMoveCtrlDown(),this._removeMoveCtrlUp(),this.mainEntriesMoveCtrl=!1,this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,-this.mainEntriesPos)),this.mainEntriesPos=0);setTimeout(this._createEventRects.bind(this),1)},_createMoveCtrlDown:function(){this.mainEntriesMoveCtrlDownGFX||(this.mainEntriesMoveCtrlDownGFX=this.mainEntriesSurface.createGroup(),this.mainEntriesMoveCtrlDownGFX.createRect({x:10,
y:this.mainEntriesContainerDim.h-30,width:this.mainEntriesContainerDim.w-20,height:30}).setFill("blue"),this.mainEntriesMoveCtrlDownGFX.createPolyline([{x:15,y:this.mainEntriesContainerDim.h-25},{x:this.mainEntriesContainerDim.w-15,y:this.mainEntriesContainerDim.h-25},{x:this.mainEntriesContainerDim.w/2,y:this.mainEntriesContainerDim.h-5},{x:15,y:this.mainEntriesContainerDim.h-25}]).setFill("white"),this._repositionMoveCtrlDown(),this._events.push(dojo.connect(this.mainEntriesMoveCtrlDownGFX.getEventSource(),
dojo.touch.press,this.mainEntriesMoveHandler.bind(this,-1))))},_createMoveCtrlUp:function(){this.mainEntriesMoveCtrlUpGFX||(this.mainEntriesMoveCtrlUpGFX=this.mainEntriesSurface.createGroup(),this.mainEntriesMoveCtrlUpGFX.createRect({x:10,y:0,width:this.mainEntriesContainerDim.w-20,height:30}).setFill("blue"),this.mainEntriesMoveCtrlUpGFX.createPolyline([{x:15,y:25},{x:this.mainEntriesContainerDim.w-15,y:25},{x:this.mainEntriesContainerDim.w/2,y:5},{x:15,y:25}]).setFill("white"),this._events.push(dojo.connect(this.mainEntriesMoveCtrlUpGFX.getEventSource(),
dojo.touch.press,this.mainEntriesMoveHandler.bind(this,1))))},_removeMoveCtrlUp:function(){this.mainEntriesMoveCtrlUpGFX&&(this.mainEntriesMoveCtrlUpGFX.destroy(),this.mainEntriesMoveCtrlUpGFX=null)},_removeMoveCtrlDown:function(){this.mainEntriesMoveCtrlDownGFX&&(this.mainEntriesMoveCtrlDownGFX.destroy(),this.mainEntriesMoveCtrlDownGFX=null)},_moveMainEntries:function(a){0>a?(this._createMoveCtrlUp(),this.mainEntriesBB.y+this.mainEntriesBB.height+this.mainEntriesPos==this.mainEntriesContainerDim.h&&
(this._removeMoveCtrlDown(),this.mainEntriesMoveEndHandler())):(this._createMoveCtrlDown(),0==this.mainEntriesPos&&(this._removeMoveCtrlUp(),this.mainEntriesMoveEndHandler()));this.mainEntriesMoveEndEvent&&(this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,a)),this.mainEntriesPos+=a,setTimeout(this._moveMainEntries.bind(this,a),10))},mainEntriesMoveHandler:function(a){this.mainEntriesMoveEndEvent&&this.mainEntriesMoveEndHandler();this.mainEntriesMoveEndEvent=dojo.connect(document,
dojo.touch.release,this.mainEntriesMoveEndHandler.bind(this));this._moveMainEntries(a)},mainEntriesMoveEndHandler:function(a){this.mainEntriesMoveEndEvent&&(this.mainEntriesMoveEndEvent.remove(),this.mainEntriesMoveEndEvent=null)},_repositionMoveCtrlDown:function(){if(this.mainEntriesMoveCtrlDownGFX){var a=this.mainEntriesMoveCtrlDownGFX.getTransformedBoundingBox()[2].y-this.mainEntriesContainerDim.h;0!=a&&this.mainEntriesMoveCtrlDownGFX.applyTransform(dojox.gfx.matrix.translate(0,-a))}},_centerGFX:function(a,
b){var c=dojo.position(this.domNode),d=b.getTransformedBoundingBox();a.applyLeftTransform(dojox.gfx.matrix.translate(c.w/2-this.detailsDim.x-(d[1].x-d[0].x)/2-d[0].x,c.h/2-(d[2].y-d[1].y)/2-d[1].y))},resetDisplay:function(a){if(!this.animationRunning){this.animationRunning=!0;var b=this._centerAndScale(a,a.levelScale),c=a.activeLevel;a.activeLevel=1;a.levelScale=1;this._events.push(dojo.connect(b,"onEnd",this.highlightActiveLevel.bind(this,a,c)));this._events.push(dojo.connect(b,"onEnd",this.animationEnd.bind(this,
a)))}},_centerAndScale:function(a,b){var c=dojo.position(this.domNode),d=a.entries[0].elementGFX.getTransformedBoundingBox();return(new dojox.gfx.fx.animateTransform({duration:this.toggleAnimationDuration,shape:a.childrenGroupMoveGFX,transform:[{name:"scaleAt",start:[1,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2],end:[1/b,c.w/2-this.detailsDim.x,c.h/2]},{name:"translate",start:[0,0],end:[c.w/2-this.detailsDim.x-d[0].x-(d[1].x-d[0].x)/2,c.h/2-d[1].y-(d[2].y-d[1].y)/2]},{name:"original"}]})).play()},
elementToggleCollapse:function(a){!this.animationRunning&&a.collapsed&&(this.animationRunning=!0,this._elementExpand(a,!0))},_elementExpand:function(a,b){a.childrenGroupMoveGFX.getTransformedBoundingBox();for(var c=0;c<this.entries.length;c++)this.entries[c].collapsed||this._elementCollapse(this.entries[c],!1);a.childrenGroupMoveGFX.rawNode.style.display="";c=this._centerAndScale(a,this.minimizedScale);a.collapsed=!1;b&&(this._events.push(dojo.connect(c,"onEnd",this.animationEnd.bind(this,a))),this._events.push(dojo.connect(c,
"onEnd",this.expandElementEnd.bind(this,a))))},_elementCollapse:function(a,b){var c=a.childrenGroupMoveGFX.getTransformedBoundingBox(),d=a.groupGFX.getTransformedBoundingBox(),e=dojo.position(this.mainEntriesContainer);d[0].x-=e.w;d[1].x-=e.w;c=(new dojox.gfx.fx.animateTransform({duration:this.toggleAnimationDuration,shape:a.childrenGroupMoveGFX,transform:[{name:"scaleAt",start:[1,c[0].x+(c[1].x-c[0].x)/2,c[1].y+(c[2].y-c[1].y)/2],end:[this.minimizedScale,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/
2]},{name:"translate",start:[0,0],end:[d[0].x+(d[1].x-d[0].x)/2-c[0].x-(c[1].x-c[0].x)/2,d[1].y+(d[2].y-d[1].y)/2-c[1].y-(c[2].y-c[1].y)/2]},{name:"original"}]})).play();a.collapsed=!0;this._events.push(dojo.connect(c,"onEnd",this.collapseElementEnd.bind(this,a)));b&&this._events.push(dojo.connect(c,"onEnd",this.animationEnd.bind(this,a)))},animationEnd:function(a){this.animationRunning=!1},collapseElementEnd:function(a){a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntry");
a.elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapEntry2")},expandElementEnd:function(a){a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryPressed");a.elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapEntryPressed2")},_highlightALRecursive:function(a,b,c,d){if(b<c||b<d)for(var e=0;e<a.entries.length;e++)this._highlightALRecursive(a.entries[e],b+1,c,d);b==c&&(a.disabled?a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryDisabledAL"):
a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryAL"));b==d&&(a.disabled?a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryDisabled"):a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntry"))},highlightActiveLevel:function(a,b){a.activeLevel!=b&&this._highlightALRecursive(a,0,a.activeLevel,b)},elementOnClick:function(a,b,c){if(!(this.moving_||(new Date).getTime()-this.lastMove_<this.moveToClickTimeMin))if(c.preventDefault(),dojo.stopEvent(c),
1!=a.path.length||b){var d=!0;if(1<a.path.length){var e=this.entries[a.path[0]],f=1,g=a.path.length-1,k=e.activeLevel;if(k!=g){d=!1;if(this.animationRunning){setTimeout(this.elementOnClick.bind(this,a,b,c),100);return}this.animationRunning=!0;if(e.activeLevel<g)for(b=e.activeLevel;b<g;b++)f/=this.levelScale;else for(b=e.activeLevel;b>g;b--)f*=this.levelScale;e.activeLevel=g;g=e.levelScale*f;1>g&&(g=1,f=g/e.levelScale);g>e.maxLevelScale&&(g=e.maxLevelScale,f=g/e.levelScale);e.levelScale=g;var l=a.elementGFX.getTransformedBoundingBox(),
g=e.childrenGroupMoveGFX.getTransform();b=l[0].x+(l[1].x-l[0].x)/2;l=l[1].y+(l[2].y-l[1].y)/2;f=dojox.gfx.matrix.scaleAt(f,b,l);if(c.clientX&&c.clientY){var m=c.clientX-this.detailsDim.x;c=c.clientY-this.detailsDim.y}else m=b,c=l;c=dojox.gfx.matrix.translate(m-b,c-l);c=(new dojox.gfx.fx.animateTransform({duration:this.focusElementAnimationDuration,shape:e.childrenGroupMoveGFX,transform:[{name:"matrix",start:g,end:dojox.gfx.matrix.multiply(c,f,g)}]})).play();this._events.push(dojo.connect(c,"onEnd",
this.animationEnd.bind(this,a)));this._events.push(dojo.connect(c,"onEnd",this.highlightActiveLevel.bind(this,e,k)))}}d&&!a.disabled&&(d=a.sectionpath.sectionids instanceof Array?dojo.clone(a.sectionpath.sectionids):[a.sectionpath.sectionids],G_UI_COM.showSectionPathInProgress=!0,G_UI_COM.showSectionPath(a.sectionpath.basecontainerid,d,!1)||console.error("Could not resolve given section path: "+JSON.stringify(a.sectionpath)))}else this.elementToggleCollapse(a)}});dojo.declare("FIRMOS.gridPBColumn",
null,{constructor:function(a){for(var b in a)this[b]=a[b]},renderCell:function(a,b,c,d,e){c=new dijit.ProgressBar({style:"width: 100%"});c.set("value",b/this.maxValue*100);this.labelId&&c.set("label",a[this.labelId]+"");return c.domNode}});dojo.declare("FIRMOS.gridDetailsColumn",null,{constructor:function(){this.label="";this.className="dgrid-details";this.unhidable=!0;this._events=[];return this},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},renderCell:function(a,b,
c,d,e){b=dojo.create("div");this.grid.detailsClassname||a._detailsfunc_&&a._funcclassname_?(b.className="dgrid-details-closed",b.innerHTML="+",a=a&&this.grid.row(a),a._detailsOpen=!1,this._events.push(dojo.connect(b,"onclick",this.toggleDetails.bind(this,b,a)))):b.className="dgrid-details-none";return b},toggleDetails:function(a,b){b._detailsOpen?(a.className="dgrid-details-closed",a.innerHTML="+",this.grid.hideDetails(b)):(a.className="dgrid-details-open",a.innerHTML="-",this.grid.showDetails(b));
b._detailsOpen=!b._detailsOpen},renderHeaderCell:function(a){return""}});dojo.declare("FIRMOS.OnDemandGrid",[dgrid.OnDemandGrid,FIRMOS.GridBase,dgrid.Selection,FIRMOS.GridFilter,dgrid.ColumnResizer,FIRMOS.ColumnReorder,dgrid.ColumnHider,FIRMOS.GridDnD,dgrid.DijitRegistry]);dojo.declare("FIRMOS.Editor",dijit.layout.BorderContainer,{texts:G_TEXTS.editor,_editorStarted:!1,_savedContent:"",constructor:function(a){switch(a.contentType){case "ct_html":this.editorType="aloha";this.startEditAHandler=this.startEditA.bind(this);
this.pauseEditAHandler=this.pauseEditA.bind(this);break;case "ct_javascript":case "ct_pascal":this.editorType="codemirror";this.startEditCMHandler=this.startEditCM.bind(this);this.pauseEditCMHandler=this.pauseEditCM.bind(this);break;default:console.error("Unknown content type "+a.contentType)}},destroy:function(){switch(this.editorType){case "aloha":$(Aloha,"body").unbind("aloha-editable-activated",this.startEditAHandler);$(Aloha,"body").unbind("aloha-editable-deactivated",this.pauseEditAHandler);
break;case "codemirror":this.cm.off("focus",this.startEditCMHandler),this.cm.off("blur",this.pauseEditCMHandler)}this.editableContent&&this.editableContent.destroy();this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.editorCP=new dijit.layout.ContentPane({region:"center",splitter:!1});this.editorCP.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%; background-color:#fff; overflow:hidden;" class="article"></div>');if(this.tbBottom){this.toolbar=
new dijit.Toolbar({region:"bottom"});var a=""}else this.toolbar=new dijit.Toolbar({region:"top"}),a="float:right;";this.saveButton=new dijit.form.Button({label:this.texts.saveButton,disabled:!0,onClick:this.save.bind(this),style:a});this.toolbar.addChild(this.saveButton);this.resetButton=new dijit.form.Button({label:this.texts.resetButton,disabled:!0,onClick:this.load.bind(this),style:a});this.toolbar.addChild(this.resetButton);this.addChild(this.toolbar);this.addChild(this.editorCP);setTimeout(this.startEditor.bind(this),
0)},startEditor:function(){switch(this.editorType){case "aloha":$("#"+this.id+"_container").aloha();this.editableContent=Aloha.getEditableById(this.id+"_container");Aloha.bind("aloha-editable-activated",this.startEditAHandler);Aloha.bind("aloha-editable-deactivated",this.pauseEditAHandler);break;case "codemirror":this.cm=CodeMirror(dojo.byId(this.id+"_container"),{lineNumbers:!0,mode:this.contentType.substring(3)});this.cm.on("focus",this.startEditCMHandler);this.cm.on("blur",this.pauseEditCMHandler);
break;default:return}this.load()},loadCallback:function(a,b,c,d){b&&""!=c.output&&(a=dojo.fromJson(c.output),this._savedContent=a.value,this.setValue(a.value))},getValue:function(){switch(this.editorType){case "aloha":return this.editableContent.getContents();case "codemirror":return this.cm.getValue()}},setValue:function(a){switch(this.editorType){case "aloha":this.editableContent&&this.editableContent.setContents(a);break;case "codemirror":this.cm.setValue(a)}},startEdit:function(){this._editorStarted||
(this.saveButton.set("disabled",!1),this.resetButton.set("disabled",!1),G_SERVER_COM.callServerFunction(this.startEditClass,this.startEditFunc,this.startEditUidPath,this.startEditParams),this._editorStarted=!0)},pauseEdit:function(){this._editorStarted&&this.getValue()==this._savedContent&&this.stopEdit()},startEditCM:function(a){this.startEdit()},pauseEditCM:function(a){this.pauseEdit()},startEditA:function(a,b){b.editable.getId()==this.id+"_container"&&this.startEdit()},pauseEditA:function(a,b){b.editable.getId()==
this.id+"_container"&&this.pauseEdit()},stopEdit:function(){this._editorStarted&&(G_SERVER_COM.callServerFunction(this.stopEditClass,this.stopEditFunc,this.stopEditUidPath,this.stopEditParams),this.saveButton.set("disabled",!0),this.resetButton.set("disabled",!0),this._editorStarted=!1)},save:function(){this.stopEdit();var a=dojo.clone,a=dojo.clone(this.saveParams);a.content=this.getValue();this._savedContent=a.content;G_SERVER_COM.callServerFunction(this.saveClass,this.saveFunc,this.saveUidPath,
a)},load:function(){this.stopEdit();G_SERVER_COM.callServerFunction(this.loadClass,this.loadFunc,this.loadUidPath,this.loadParams,this.loadCallback.bind(this))}});dojo.declare("FIRMOS.Shell",dijit.layout.ContentPane,{postCreate:function(){this.set("content",'<iframe id="'+this.id+'_frame" src="'+this.protocol+"://"+this.host+":"+this.port+this.path+'" style="width:100%; height:100%;">Iframe not supported.</iframe>');this.set("style","overflow: hidden;");this.inherited(arguments)}});dojo.declare("FIRMOS.VNC",
dijit.layout.BorderContainer,{texts:G_TEXTS.vnc,constructor:function(a){this.ws=null;this.state="disconnected";this.container=this.canvas=null;this.securityType=0;this.serverSettings={};this.tileImage=this.context=null;this.mouseButtonState=0;this.intervalId=this.mouseCoords=null;this.scale=1;this.isActive=!1;this._events=[]},destroy:function(){this.disconnect();this.inherited(arguments)},postCreate:function(){this.vncCP=new dijit.layout.ContentPane({region:"center",splitter:!1});this.vncCP.set("content",
'<div id="'+this.id+'_container" style="width:100%; height:100%;"><canvas  class="firmosVNCInactive" tabindex="0" id="'+this.id+'_vnc" style="width:0px; height:0px; cursor: none;">Canvas not supported.</canvas></div>');this.vncCP.set("style","overflow: hidden;");this.toolbar=new dijit.Toolbar({region:"top"});this.cadButton=new dijit.form.Button({label:this.texts.cadButton,onClick:this.sendCAD.bind(this)});this.toolbar.addChild(this.cadButton);this.wakeUpButton=new dijit.form.Button({label:this.texts.wakeUpButton,
disabled:!0,onClick:this.wakeUp.bind(this)});this.toolbar.addChild(this.wakeUpButton);this.mountButton=new dijit.form.Button({label:this.texts.mountButton,disabled:!0,onClick:this.mountISO.bind(this)});this.toolbar.addChild(this.mountButton);this.addChild(this.toolbar);this.addChild(this.vncCP);this.inherited(arguments);setTimeout(this.connect.bind(this),0)},sendCAD:function(){this.ws.send((new Uint8Array([4,1,0,0,0,0,255,227])).buffer);this.ws.send((new Uint8Array([4,1,0,0,0,0,255,233])).buffer);
this.ws.send((new Uint8Array([4,1,0,0,0,0,255,255])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,227])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,233])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,255])).buffer)},wakeUp:function(){},mountISO:function(){},stopEvent:function(a){dojo.stopEvent(a);a.preventDefault();a.stopPropagation();return!1},visibilityChange:function(a){a?this.connect():this.disconnect()},disconnect:function(){if("disconnected"!=this.state){this.canvas.style.width=
"0px";for(this.canvas.style.height="0px";0<this._events.length;)dojo.disconnect(this._events.pop());this.ws.onopen=null;this.ws.onmessage=null;this.ws.onerror=null;this.ws.close();this.ws=null;this.state="disconnected"}},connect:function(){this.state="connecting";this.ws=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-VC|"+this.host+"|"+this.port);this.ws.binaryType="arraybuffer";this.ws.onopen=this.wsOpenListener.bind(this);
this.ws.onmessage=this.wsMessageListener.bind(this);this.ws.onerror=this.wsErrorListener.bind(this);this.canvas=dojo.byId(this.id+"_vnc");this.container=dojo.byId(this.id+"_container");this.context=this.canvas.getContext("2d");this._events.push(dojo.connect(this.canvas,"onmousemove",this.mouseMoveListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmousedown",this.mouseDownListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseup",this.mouseUpListener.bind(this)));
this._events.push(dojo.connect(this.canvas,"onclick",this.mouseClickListener.bind(this)));this._events.push(dojo.connect(this.canvas,"oncontextmenu",this.contextMenuListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseenter",this.mouseEnter.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseout",this.mouseOut.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeydown",this.keyDownListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeyup",this.keyUpListener.bind(this)));
this._events.push(dojo.connect(this.canvas,"onkeypress",this.keyPressListener.bind(this)));this._events.push(dojo.connect(this,"resize",this.applyScale.bind(this)));this.intervalId&&window.clearInterval(this.intervalId);this.intervalId=window.setInterval(this.sendMouseCoords.bind(this),40);this.ws.onclose=this.wsCloseListener.bind(this)},decodeMessage2String:function(a){a=new Uint8Array(a);for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},encodeString2Message:function(a){for(var b=
new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer},byteArray2String:function(a,b,c){c=c||a.length;var d="";for(b=b||0;b<c;b++)d+=String.fromCharCode(a[b]);return d},applyScale:function(){var a=dojo.position(this.container);a.w-=2;a.h-=2;if(a.w<this.serverSettings.width||a.h<this.serverSettings.height)this.scale=this.serverSettings.width/this.serverSettings.height>a.w/a.h?a.w/this.serverSettings.width:a.h/this.serverSettings.height;this.canvas.style.width=Math.floor(this.serverSettings.width*
this.scale)+"px";this.canvas.style.height=Math.floor(this.serverSettings.height*this.scale)+"px"},wsMessageListener:function(a){switch(this.state){case "init":a=this.decodeMessage2String(a.data);switch(a){case "RFB 003.008\n":this.vncVersion=3.8;this.state="security";this.ws.send(this.encodeString2Message(a));break;default:console.error('Version "'+a+'" not supported'),this.ws.close()}break;case "security":var b=new Uint8Array(a.data);0==b[0]&&(console.error("Got no valid security type"),this.ws.close());
for(a=0;a<b[0];a++)1==b[a]&&(this.securityType=b[a]);switch(this.securityType){case 0:console.error("Got no valid security type");this.ws.close();break;case 1:this.state="securityResult";this.ws.send((new Uint8Array([this.securityType])).buffer);break;case 2:console.error("VNC Authentication not supported"),this.ws.close()}break;case "securityResult":a=new Uint8Array(a.data);0!=(a[0]||a[1]||a[2]||a[3])?(console.error("Security handshake failed"),this.ws.close()):(this.state="serverInit",this.ws.send((new Uint8Array([1])).buffer));
break;case "serverInit":a=new Uint8Array(a.data);this.serverSettings.width=256*a[0]+a[1];this.serverSettings.height=256*a[2]+a[3];this.applyScale();this.serverSettings.bitPerPixel=a[4];32!=this.serverSettings.bitPerPixel&&console.error("Only True Color supported");this.serverSettings.depth=a[5];this.serverSettings.bigEndianFlag=a[6];this.serverSettings.trueColorFlag=a[7];this.serverSettings.redMax=256*a[8]+a[9];this.serverSettings.greenMax=256*a[10]+a[11];this.serverSettings.blueMax=256*a[12]+a[13];
this.serverSettings.redShift=a[14];this.serverSettings.greenShift=a[15];this.serverSettings.blueShift=a[16];this.serverSettings.name=this.byteArray2String(a,24+256*(256*(256*a[20]+a[21])+a[22])+a[23]);this.state="connected";this.tileImage=this.context.createImageData(16,16);this.canvas.width=this.serverSettings.width;this.canvas.height=this.serverSettings.height;this.ws.send((new Uint8Array([0,0,0,0,32,24,0,1,0,255,0,255,0,255,16,8,0,0,0,0])).buffer);this.ws.send((new Uint8Array([2,0,0,3,0,0,0,1,
0,0,0,5,0,0,0,0])).buffer);this.ws.send((new Uint8Array([3,0,0,0,0,0,a[0],a[1],a[2],a[3]])).buffer);break;case "connected":b=new Uint8Array(a.data);switch(b[0]){case 0:var c=256*b[2]+b[3];if(0==c)break;var d=4;for(a=0;a<c;a++){var e=256*b[d]+b[d+1],f=256*b[d+2]+b[d+3],g=256*b[d+4]+b[d+5],k=256*b[d+6]+b[d+7],d=d+8,l=b[d+3],d=d+4;switch(l){case 0:d=this.handleRaw(b,e,f,g,k,d);break;case 1:d=this.handleCopyrect(b,e,f,g,k,d);break;case 5:d=this.handleHextile(b,e,f,g,k,d);break;case 252:d=this.handleTightPng(b,
e,f,g,k,d);break;default:console.error("Unknown Encoding "+b[12]+"-"+b[13]+"-"+b[14]+"-"+b[15])}}break;default:console.warn("Unknown Server Message "+b[0])}break;case "disconnected":break;default:console.error("State "+this.state+" not implemented")}},reconnect:function(){console.log("RECONNECT!!!");this.disconnect()},_getMouseXY:function(a){for(var b=this.canvas,c=[0,0];b.offsetParent;)c[0]=c[0]+b.offsetLeft-b.scrollLeft,c[1]=c[1]+b.offsetTop-b.scrollTop,b=b.offsetParent;c[0]=a.clientX+document.body.scrollLeft+
document.documentElement.scrollLeft-c[0];c[1]=a.clientY+document.body.scrollTop+document.documentElement.scrollTop-c[1];c[0]/=this.scale;c[1]/=this.scale;return c},sendMouseCoords:function(){this.mouseCoords&&(this.ws.send((new Uint8Array([5,this.mouseButtonState,this.mouseCoords[0]>>8,this.mouseCoords[0]&255,this.mouseCoords[1]>>8,this.mouseCoords[1]&255])).buffer),this.mouseCoords=null)},mouseEnter:function(a){this.canvas.focus();dojo.addClass(this.canvas,"firmosVNCActive");dojo.removeClass(this.canvas,
"firmosVNCInactive");this.isActive=!0},mouseOut:function(a){dojo.addClass(this.canvas,"firmosVNCInactive");dojo.removeClass(this.canvas,"firmosVNCActive");this.isActive=!1},mouseMoveListener:function(a){this.isActive||this.mouseEnter(a);this.mouseCoords=this._getMouseXY(a)},mouseDownListener:function(a){this.mouseButtonState|=1<<a.button;a=this._getMouseXY(a);this.ws.send((new Uint8Array([5,this.mouseButtonState,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.mouseCoords=null},mouseUpListener:function(a){this.mouseButtonState^=
1<<a.button;a=this._getMouseXY(a);this.ws.send((new Uint8Array([5,this.mouseButtonState,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.mouseCoords=null},mouseClickListener:function(a){return!1},contextMenuListener:function(a){return!1},getSpecialKeyCode:function(a){switch(a.keyCode){case 8:return 65288;case 9:return 65289;case 13:return 65293;case 27:return 65307;case 45:return 65379;case 46:return 65535;case 36:return 65360;case 35:return 65367;case 33:return 65365;case 34:return 65366;case 37:return 65361;
case 38:return 65362;case 39:return 65363;case 40:return 65364;case 112:return 65470;case 113:return 65471;case 114:return 65472;case 115:return 65473;case 116:return 65474;case 117:return 65475;case 118:return 65476;case 119:return 65477;case 120:return 65478;case 121:return 65479;case 122:return 65480;case 123:return 65481;case 16:return 65505;case 17:return 65507;case 18:return 65406}return 0},keyDownListener:function(a){if(this.isActive){var b=this.getSpecialKeyCode(a);0!=b&&(this.stopEvent(a),
this.ws.send((new Uint8Array([4,1,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},keyUpListener:function(a){if(this.isActive){var b=this.getSpecialKeyCode(a);b&&(this.stopEvent(a),this.ws.send((new Uint8Array([4,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},keyPressListener:function(a){if(this.isActive)return 0!=a.which&&0!=a.charCode&&(this.stopEvent(a),a=0<a.charCode?[a.charCode>>24&255,a.charCode>>16&255,a.charCode>>8&255,a.charCode&255]:[a.which>>24&255,a.which>>
16&255,a.which>>8&255,a.which&255],this.ws.send((new Uint8Array([4,1,0,0,a[0],a[1],a[2],a[3],4,0,0,0,a[0],a[1],a[2],a[3]])).buffer)),!1},handleCopyrect:function(a,b,c,d,e,f){var g=256*a[f]+a[f+1];f+=2;a=256*a[f]+a[f+1];f+=2;this.context.drawImage(this.canvas,g,a,d,e,b,c,d,e);return f},handleRaw:function(a,b,c,d,e,f){for(var g=this.context.createImageData(d,e),k,l,m=0;m<d*e;m++)k=4*m,l=k+f,g.data[k]=a[l+2],g.data[k+1]=a[l+1],g.data[k+2]=a[l],g.data[k+3]=255;this.context.putImageData(g,b,c);return l+
4},handleHextile:function(a,b,c,d,e,f){for(var g=Math.ceil(d/16),k=Math.ceil(e/16),l=[0,0,0,255],m=[0,0,0,255],n=[0,0,0,255],p,r=0;r<k;r++)for(var u=0;u<g;u++){p=a[f];f++;var K=16,n=16;r==k-1&&(n=16-(16*k-e));u==g-1&&(K=16-(16*g-d));var G=K*n;if(0==p)this.context.fillStyle="rgb("+l[2]+","+l[1]+","+l[0]+")",this.context.fillRect(b+16*u,c+16*r,K,n);else if(p&1){var S,O;p=256==G?this.tileImage:this.context.createImageData(K,n);for(K=0;K<G;K++)S=4*K,O=S+f,p.data[S]=a[O+2],p.data[S+1]=a[O+1],p.data[S+
2]=a[O],p.data[S+3]=255;this.context.putImageData(p,b+16*u,c+16*r);f=O+4}else if(p&2&&(l=[a[f],a[f+1],a[f+2],a[f+3]],f+=4),p&4&&(m=[a[f],a[f+1],a[f+2],a[f+3]],f+=4),G=b+16*u,S=c+16*r,this.context.fillStyle="rgb("+l[2]+","+l[1]+","+l[0]+")",this.context.fillRect(G,S,K,n),p&8){var s=a[f];f++;for(K=0;K<s;K++){p&16?(n=[a[f],a[f+1],a[f+2],a[f+3]],f+=4):n=m;var T=a[f]>>4,Q=a[f]&15;f++;var U=(a[f]>>4)+1,N=(a[f]&15)+1;f++;this.context.fillStyle="rgb("+n[2]+","+n[1]+","+n[0]+")";this.context.fillRect(G+T,
S+Q,U,N)}}}return f},wsErrorListener:function(a){console.error("wsError "+JSON.stringify(a));this.reconnect()},wsCloseListener:function(){this.state="disconnected";this.intervalId&&window.clearInterval(this.intervalId)},wsOpenListener:function(){this.state="init"}})});
d3=function(){function g(a){return null!=a&&!isNaN(a)}function f(a){return a.length}function n(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function m(){}function k(){}function e(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function l(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=ig.length;c<d;++c){var e=ig[c]+b;if(e in a)return e}}function d(a){for(var b=a.length,c=Array(b);b--;)c[b]=
a[b];return c}function c(){}function b(){}function p(a){function b(){for(var d=c,e=-1,f=d.length,g;++e<f;)(g=d[e].on)&&g.apply(this,arguments);return a}var c=[],d=new m;b.on=function(b,e){var f=d.get(b),g;if(2>arguments.length)return f&&f.on;f&&(f.on=null,c=c.slice(0,g=c.indexOf(f)).concat(c.slice(g+1)),d.remove(b));e&&c.push(d.set(b,{on:e}));return a};return b}function r(){B.event.preventDefault()}function u(){for(var a=B.event,b;b=a.sourceEvent;)a=b;return a}function a(a){for(var c=new b,d=0,e=
arguments.length;++d<e;)c[arguments[d]]=p(c);c.of=function(b,d){return function(e){try{var f=e.sourceEvent=B.event;e.target=a;B.event=e;c[e.type].apply(b,d)}finally{B.event=f}}};return c}function q(a){Ve(a,Ma);return a}function t(a){return"function"===typeof a?a:function(){return Hf(a,this)}}function v(a){return"function"===typeof a?a:function(){return If(a,this)}}function x(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,
b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function k(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=B.ns.qualify(a);return null==b?a.local?d:c:"function"===typeof b?a.local?k:g:a.local?f:e}function C(a){return a.trim().replace(/\s+/g," ")}function y(a){return RegExp("(?:^|\\s+)"+B.requote(a)+"(?:\\s+|$)","g")}function z(a,
b){function c(){for(var d=-1;++d<e;)a[d](this,b)}function d(){for(var c=-1,f=b.apply(this,arguments);++c<e;)a[c](this,f)}a=a.trim().split(/\s+/).map(D);var e=a.length;return"function"===typeof b?d:c}function D(a){var b=y(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",C(e+" "+a))):c.setAttribute("class",C(e.replace(b," ")))}}function F(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,
b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?f:e}function H(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"===typeof b?e:d}function M(a){return"function"===typeof a?a:(a=B.ns.qualify(a)).local?function(){return zc.createElementNS(a.space,a.local)}:function(){return zc.createElementNS(this.namespaceURI,
a)}}function I(a){return function(){return jg(this,a)}}function J(a){arguments.length||(a=B.ascending);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function K(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.length,k;f<g;f++)(k=e[f])&&b(k,f,c);return a}function G(a){Ve(a,ad);return a}function S(a){var b,c;return function(d,e,f){d=a[f].update;var g=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<g;);return e}}function O(a,b,d){function e(){var b=this[k];b&&(this.removeEventListener(a,
b,b.$),delete this[k])}function f(){var c=m(b,qd(arguments));e.call(this);this.addEventListener(a,this[k]=c,c.$=d);c._=b}function g(){var b=RegExp("^__on([^.]+)"+B.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var k="__on"+a,l=a.indexOf("."),m=s;0<l&&(a=a.substring(0,l));var n=Rf.get(a);n&&(a=n,m=T);return l?b?f:e:b?c:g}function s(a,b){return function(c){var d=B.event;B.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{B.event=
d}}}function T(a,b){var c=s(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||c.call(this,a)}}function Q(){var a=".dragsuppress-"+ ++Xg,b="touchmove"+a,c="selectstart"+a,d="dragstart"+a,e="click"+a,f=B.select(Ub).on(b,r).on(c,r).on(d,r),g=md.style,k=g[Sf];g[Sf]="none";return function(b){f.on(a,null);g[Sf]=k;if(b){var c=function(){f.on(e,null)};f.on(e,function(){r();c()},!0);setTimeout(c,0)}}}function U(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=
c.createSVGPoint();if(0>Tf&&(Ub.scrollX||Ub.scrollY)){var c=B.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();Tf=!(e.f||e.e);c.remove()}Tf?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function N(){}function V(a,b,c){return new P(a,b,c)}function P(a,
b,c){this.h=a;this.s=b;this.l=c}function aa(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;f=0.5>=c?c*(1+b):c+b-c*b;e=2*c-f;return ra(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function ea(a){return 1<a?0:-1>a?ka:Math.acos(a)}function ga(a){return 1<a?ka/2:-1>a?-ka/2:Math.asin(a)}function na(a){return(Math.exp(a)-Math.exp(-a))/
2}function W(a){return(a=Math.sin(a/2))*a}function Z(a,b,c){return new ca(a,b,c)}function ca(a,b,c){this.h=a;this.c=b;this.l=c}function ja(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return R(c,Math.cos(a*=pa)*b,Math.sin(a)*b)}function R(a,b,c){return new ya(a,b,c)}function ya(a,b,c){this.l=a;this.a=b;this.b=c}function Ha(a,b,c){a=(a+16)/116;c=a-c/200;b=Y(a+b/500)*lg;a=Y(a)*mg;c=Y(c)*ng;return ra(za(3.2404542*b-1.5371385*a-0.4985314*c),za(-0.969266*b+1.8760108*a+0.041556*c),za(0.0556434*b-0.2040259*a+
1.0572252*c))}function va(a,b,c){return 0<a?Z(Math.atan2(c,b)*$a,Math.sqrt(b*b+c*c),a):Z(NaN,NaN,a)}function Y(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Ca(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function za(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function Da(a){return ra(a>>16,a>>8&255,a&255)+""}function ra(a,b,c){return new Ea(a,b,c)}function Ea(a,b,c){this.r=a;this.g=b;this.b=c}function Va(a){return 16>a?"0"+Math.max(0,a).toString(16):
Math.min(255,a).toString(16)}function rb(a,b,c){var d=0,e=0,f=0,g,k;if(g=/([a-z]+)\((.*)\)/i.exec(a))switch(k=g[2].split(","),g[1]){case "hsl":return c(parseFloat(k[0]),parseFloat(k[1])/100,parseFloat(k[2])/100);case "rgb":return b(Ia(k[0]),Ia(k[1]),Ia(k[2]))}if(c=hf.get(a))return b(c.r,c.g,c.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,f=a.charAt(3),f+=f):7===a.length&&(d=a.substring(1,3),e=a.substring(3,5),f=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,
16),f=parseInt(f,16));return b(d,e,f)}function Ta(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,g=(e+d)/2;f?(d=0.5>g?f/(e+d):f/(2-e-d),a=60*(a==e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4)):(a=NaN,d=0<g&&1>g?0:a);return V(a,d,g)}function zb(a,b,c){a=ba(a);b=ba(b);c=ba(c);var d=Ca((0.4124564*a+0.3575761*b+0.1804375*c)/lg),e=Ca((0.2126729*a+0.7151522*b+0.072175*c)/mg);a=Ca((0.0193339*a+0.119192*b+0.9503041*c)/ng);return R(116*e-16,500*(d-e),200*(e-a))}function ba(a){return 0.04045>=
(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function Ia(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function ua(a){return"function"===typeof a?a:function(){return a}}function Ja(a){return a}function jb(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return sb(b,c,a,d)}}function sb(a,b,c,d){function e(){var a=l.status,b;if(!a&&l.responseText||200<=a&&300>a||304===a){try{b=c.call(f,l)}catch(d){g.error.call(f,d);return}g.load.call(f,
b)}else g.error.call(f,l)}var f={},g=B.dispatch("progress","load","error"),k={},l=new XMLHttpRequest,m=null;!Ub.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(a)||(l=new XDomainRequest);"onload"in l?l.onload=l.onerror=e:l.onreadystatechange=function(){3<l.readyState&&e()};l.onprogress=function(a){var b=B.event;B.event=a;try{g.progress.call(f,l)}finally{B.event=b}};f.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return k[a];null==b?delete k[a]:k[a]=b+"";return f};
f.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return f};f.responseType=function(a){if(!arguments.length)return m;m=a;return f};f.response=function(a){c=a;return f};["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(qd(arguments)))}});f.send=function(c,d,e){2===arguments.length&&"function"===typeof d&&(e=d,d=null);l.open(c,a,!0);null==b||"accept"in k||(k.accept=b+",*/*");if(l.setRequestHeader)for(var g in k)l.setRequestHeader(g,k[g]);null!=
b&&l.overrideMimeType&&l.overrideMimeType(b);null!=m&&(l.responseType=m);if(null!=e)f.on("error",e).on("load",function(a){e(null,a)});l.send(null==d?null:d);return f};f.abort=function(){l.abort();return f};B.rebind(f,g,"on");return null==d?f:f.get(Fb(d))}function Fb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Pa(){var a=hc(),a=Sa()-a;24<a?(isFinite(a)&&(clearTimeout(jf),jf=setTimeout(Pa,a)),kf=0):(kf=1,og(Pa))}function Ra(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());
Tc.callback=a;Tc.time=c+b}function hc(){var a=Date.now();for(Tc=lf;Tc;)a>=Tc.time&&(Tc.flush=Tc.callback(a-Tc.time)),Tc=Tc.next;return a}function Sa(){for(var a,b=lf,c=Infinity;b;)b.flush?b=a?a.next=b.next:lf=b.next:(b.time<c&&(c=b.time),b=(a=b).next);mf=a;return c}function Wb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function dc(a){return a+""}function Xa(){}function tb(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function xa(a,b){if(a&&pg.hasOwnProperty(a.type))pg[a.type](a,b)}function sa(a,
b,c){var d=-1;c=a.length-c;var e;for(b.lineStart();++d<c;)e=a[d],b.point(e[0],e[1]);b.lineEnd()}function Nb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)sa(a[c],b,1);b.polygonEnd()}function Ka(){function a(b,c){b*=pa;c=c*pa/2+ka/4;var g=b-d,k=Math.cos(c),l=Math.sin(c),m=f*l,n=e*k+m*Math.cos(g),g=m*Math.sin(g);Vd.add(Math.atan2(g,n));d=b;e=k;f=l}var b,c,d,e,f;wc.point=function(g,k){wc.point=a;d=(b=g)*pa;e=Math.cos(k=(c=k)*pa/2+ka/4);f=Math.sin(k)};wc.lineEnd=function(){a(b,c)}}function Gb(a){var b=
a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function eb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Ab(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Ya(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Na(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Yb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Ob(a){return[Math.atan2(a[1],a[0]),ga(a[2])]}function lb(a,b){return Math.abs(a[0]-b[0])<qa&&
Math.abs(a[1]-b[1])<qa}function db(a,b){a*=pa;var c=Math.cos(b*=pa);ha(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function ha(a,b,c){++Qe;fd+=(a-fd)/Qe;gd+=(b-gd)/Qe;Uc+=(c-Uc)/Qe}function ta(){function a(e,f){e*=pa;var g=Math.cos(f*=pa),k=g*Math.cos(e),g=g*Math.sin(e),l=Math.sin(f),m=Math.atan2(Math.sqrt((m=c*l-d*g)*m+(m=d*k-b*l)*m+(m=b*g-c*k)*m),b*k+c*g+d*l);qe+=m;Dc+=m*(b+(b=k));Ec+=m*(c+(c=g));oc+=m*(d+(d=l));ha(b,c,d)}var b,c,d;Lc.point=function(e,f){e*=pa;var g=Math.cos(f*=pa);b=g*Math.cos(e);
c=g*Math.sin(e);d=Math.sin(f);Lc.point=a;ha(b,c,d)}}function Fa(){Lc.point=db}function ab(){function a(b,c){b*=pa;var g=Math.cos(c*=pa),k=g*Math.cos(b),g=g*Math.sin(b),l=Math.sin(c),m=e*l-f*g,n=f*k-d*l,Ga=d*g-e*k,A=Math.sqrt(m*m+n*n+Ga*Ga),p=d*k+e*g+f*l,Eb=A&&-ea(p)/A,A=Math.atan2(A,p);Ed+=Eb*m;Fd+=Eb*n;Vc+=Eb*Ga;qe+=A;Dc+=A*(d+(d=k));Ec+=A*(e+(e=g));oc+=A*(f+(f=l));ha(d,e,f)}var b,c,d,e,f;Lc.point=function(g,k){b=g;c=k;Lc.point=a;g*=pa;var l=Math.cos(k*=pa);d=l*Math.cos(g);e=l*Math.sin(g);f=Math.sin(k);
ha(d,e,f)};Lc.lineEnd=function(){a(b,c);Lc.lineEnd=Fa;Lc.point=db}}function la(){return!0}function Hb(a,b,c,d,e){var f=[],g=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(lb(c,d)){e.lineStart();for(d=0;d<b;++d)e.point((c=a[d])[0],c[1]);e.lineEnd()}else a={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0},c={point:c,points:[c],other:a,visited:!1,entry:!1,subject:!1},a.other=c,f.push(a),g.push(c),a={point:d,points:[d],other:null,visited:!1,entry:!1,subject:!0},c=
{point:d,points:[d],other:a,visited:!1,entry:!0,subject:!1},a.other=c,f.push(a),g.push(c)}});g.sort(b);Zb(f);Zb(g);if(f.length){if(c)for(a=1,c=!c(g[0].point),b=g.length;a<b;++a)g[a].entry=c=!c;c=f[0];for(var k,l;;){for(b=c;b.visited;)if((b=b.next)===c)return;k=b.points;e.lineStart();do{b.visited=b.other.visited=!0;if(b.entry){if(b.subject)for(a=0;a<k.length;a++)e.point((l=k[a])[0],l[1]);else d(b.point,b.next.point,1,e);b=b.next}else{if(b.subject)for(k=b.prev.points,a=k.length;0<=--a;)e.point((l=k[a])[0],
l[1]);else d(b.point,b.prev.point,-1,e);b=b.prev}b=b.other;k=b.points}while(!b.visited);e.lineEnd()}}}function Zb(a){if(b=a.length){for(var b,c=0,d=a[0],e;++c<b;)d.next=e=a[c],e.prev=d,d=e;d.next=e=a[0];e.prev=d}}function Za(a,b,c,d){return function(e){function f(b,c){a(b,c)&&e.point(b,c)}function g(a,b){p.point(a,b)}function k(){E.point=g;p.lineStart()}function l(){E.point=f;p.lineEnd()}function m(a,b){s.point(a,b);L.push([a,b])}function n(){s.lineStart();L=[]}function A(){m(L[0][0],L[0][1]);s.lineEnd();
var a=s.clean(),b=r.buffer(),c=b.length;L.pop();t.push(L);L=null;if(c)if(a&1){var a=b[0],c=a.length-1,b=-1,d;for(e.lineStart();++b<c;)e.point((d=a[b])[0],d[1]);e.lineEnd()}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),q.push(b.filter(vb))}var p=b(e),E={point:f,lineStart:k,lineEnd:l,polygonStart:function(){E.point=m;E.lineStart=n;E.lineEnd=A;q=[];t=[];e.polygonStart()},polygonEnd:function(){E.point=f;E.lineStart=k;E.lineEnd=l;q=B.merge(q);q.length?Hb(q,bb,null,c,e):d(t)&&(e.lineStart(),c(null,null,
1,e),e.lineEnd());e.polygonEnd();q=t=null},sphere:function(){e.polygonStart();e.lineStart();c(null,null,1,e);e.lineEnd();e.polygonEnd()}},q,r=wb(),s=b(r),t,L;return E}}function vb(a){return 1<a.length}function wb(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,c){b.push([a,c])},lineEnd:c,buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function bb(a,b){return(0>(a=a.point)[0]?a[1]-ka/2-qa:ka/2-a[1])-(0>(b=b.point)[0]?
b[1]-ka/2-qa:ka/2-b[1])}function Jb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=!1,k=!1,l=0;Vd.reset();for(var m=0,n=b.length;m<n;++m){var A=b[m],p=A.length;if(p){for(var E=A[0],q=E[0],r=E[1]/2+ka/4,s=Math.sin(r),t=Math.cos(r),r=1;;){r===p&&(r=0);a=A[r];var L=a[0],u=a[1]/2+ka/4,X=Math.sin(u),v=Math.cos(u),x=L-q,da=Math.abs(x)>ka,s=s*X;Vd.add(Math.atan2(s*Math.sin(x),t*v+s*Math.cos(x)));Math.abs(u)<qa&&(k=!0);f+=da?x+(0<=x?2:-2)*ka:x;da^q>=c^L>=c&&(E=Ab(Gb(E),Gb(a)),Yb(E),E=Ab(e,E),
Yb(E),E=(da^0<=x?-1:1)*ga(E[2]),d>E&&(l+=da^0<=x?1:-1));if(!r++)break;q=L;s=X;t=v;E=a}Math.abs(f)>qa&&(g=!0)}}return(!k&&!g&&0>Vd||f<-qa)^l&1}function yc(a){function b(a,c){return Math.cos(a)*Math.cos(c)>e}function c(a,b,d){var f=Gb(a),g=Gb(b),k=[1,0,0],g=Ab(f,g),l=eb(g,g),f=g[0],m=l-f*f;if(!m)return!d&&a;l=e*l/m;m=-e*f/m;f=Ab(k,g);k=Na(k,l);g=Na(g,m);Ya(k,g);g=eb(k,f);l=eb(f,f);m=g*g-l*(eb(k,k)-1);if(!(0>m)){var n=Math.sqrt(m),m=Na(f,(-g-n)/l);Ya(m,k);m=Ob(m);if(!d)return m;d=a[0];var Ga=b[0];a=
a[1];b=b[1];var A;Ga<d&&(A=d,d=Ga,Ga=A);var p=Ga-d,Eb=Math.abs(p-ka)<qa,E=Eb||p<qa;!Eb&&b<a&&(A=a,a=b,b=A);if(E?Eb?0<a+b^m[1]<(Math.abs(m[0]-d)<qa?a:b):a<=m[1]&&m[1]<=b:p>ka^(d<=m[0]&&m[0]<=Ga))return b=Na(f,(-g+n)/l),Ya(b,k),[m,Ob(b)]}}function d(b,c){var e=f?a:ka-a,g=0;b<-e?g|=1:b>e&&(g|=2);c<-e?g|=4:c>e&&(g|=8);return g}var e=Math.cos(a),f=0<e,g=[a,0],k=Math.abs(e)>qa,l=Sb(a,6*pa);return Za(b,function(a){var e,g,l,m,n;return{lineStart:function(){m=l=!1;n=1},point:function(Ga,A){var p=[Ga,A],E,
q=b(Ga,A),r=f?q?0:d(Ga,A):q?d(Ga+(0>Ga?ka:-ka),A):0;!e&&(m=l=q)&&a.lineStart();q!==l&&(E=c(e,p),lb(e,E)||lb(p,E))&&(p[0]+=qa,p[1]+=qa,q=b(p[0],p[1]));if(q!==l)n=0,q?(a.lineStart(),E=c(p,e),a.point(E[0],E[1])):(E=c(e,p),a.point(E[0],E[1]),a.lineEnd()),e=E;else if(k&&e&&f^q){var s;r&g||!(s=c(p,e,!0))||(n=0,f?(a.lineStart(),a.point(s[0][0],s[0][1]),a.point(s[1][0],s[1][1]),a.lineEnd()):(a.point(s[1][0],s[1][1]),a.lineEnd(),a.lineStart(),a.point(s[0][0],s[0][1])))}!q||e&&lb(e,p)||a.point(p[0],p[1]);e=
p;l=q;g=r},lineEnd:function(){l&&a.lineEnd();e=null},clean:function(){return n|(m&&l)<<1}}},l,function(a){return Jb(g,a)})}function Ba(a,b,c,d){function e(d,f){return Math.abs(d[0]-a)<qa?0<f?0:3:Math.abs(d[0]-c)<qa?0<f?2:1:Math.abs(d[1]-b)<qa?0<f?1:0:0<f?3:2}function f(a,b){return g(a.point,b.point)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(k){function l(f){f=e(f,-1);return m([0===f||3===f?a:c,1<f?d:b])}function m(a){for(var b=
0,c=s.length,d=a[1],e=0;e<c;++e)for(var f=1,g=s[e],k=g.length,l=g[0],n;f<k;++f)n=g[f],l[1]<=d?n[1]>d&&0<(n[0]-l[0])*(a[1]-l[1])-(a[0]-l[0])*(n[1]-l[1])&&++b:n[1]<=d&&0>(n[0]-l[0])*(a[1]-l[1])-(a[0]-l[0])*(n[1]-l[1])&&--b,l=n;return 0!==b}function n(f,k,l,m){var A=0,p=0;if(null==f||(A=e(f,l))!==(p=e(k,l))||0>g(f,k)^0<l){do m.point(0===A||3===A?a:c,1<A?d:b);while((A=(A+l+4)%4)!==p)}else m.point(k[0],k[1])}function A(e,f){a<=e&&e<=c&&b<=f&&f<=d&&k.point(e,f)}function p(e,f){e=Math.max(-nf,Math.min(nf,
e));f=Math.max(-nf,Math.min(nf,f));var g=a<=e&&e<=c&&b<=f&&f<=d;s&&t.push([e,f]);if(z)u=e,X=f,v=g,z=!1,g&&(k.lineStart(),k.point(e,f));else if(g&&y)k.point(e,f);else{var l=[x,da],m=[e,f],n;n=m[0]-l[0];var A=m[1]-l[1],E=[0,1];Math.abs(n)<qa&&Math.abs(A)<qa?n=a<=l[0]&&l[0]<=c&&b<=l[1]&&l[1]<=d:ob(a-l[0],n,E)&&ob(l[0]-c,-n,E)&&ob(b-l[1],A,E)&&ob(l[1]-d,-A,E)?(1>E[1]&&(m[0]=l[0]+E[1]*n,m[1]=l[1]+E[1]*A),0<E[0]&&(l[0]+=E[0]*n,l[1]+=E[0]*A),n=!0):n=!1;n?(y||(k.lineStart(),k.point(l[0],l[1])),k.point(m[0],
m[1]),g||k.lineEnd()):g&&(k.lineStart(),k.point(e,f))}x=e;da=f;y=g}var E=k,q=wb(),r,s,t,L={point:A,lineStart:function(){L.point=p;s&&s.push(t=[]);z=!0;y=!1;x=da=NaN},lineEnd:function(){r&&(p(u,X),v&&y&&q.rejoin(),r.push(q.buffer()));L.point=A;y&&k.lineEnd()},polygonStart:function(){k=q;r=[];s=[]},polygonEnd:function(){k=E;(r=B.merge(r)).length?(k.polygonStart(),Hb(r,f,l,n,k),k.polygonEnd()):m([a,b])&&(k.polygonStart(),k.lineStart(),n(null,null,1,k),k.lineEnd(),k.polygonEnd());r=s=t=null}},u,X,v,x,
da,y,z;return L}}function ob(a,b,c){if(Math.abs(b)<qa)return 0>=a;a/=b;if(0<b){if(a>c[1])return!1;a>c[0]&&(c[0]=a)}else{if(a<c[0])return!1;a<c[1]&&(c[1]=a)}return!0}function La(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])});return c}function Kb(a){var b=0,c=ka/3,d=Qa(a);a=d(b,c);a.parallels=function(a){return arguments.length?d(b=a[0]*ka/180,c=a[1]*ka/180):[b/ka*180,c/ka*180]};return a}function Pb(a,b){function c(a,
b){var d=Math.sqrt(f-2*e*Math.sin(b))/e;return[d*Math.sin(a*=e),g-d*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ga((f-(a*a+c*c)*e*e)/(2*e))]};return c}function pb(){function a(b,c){of+=e*b-d*c;d=b;e=c}var b,c,d,e;Gd.point=function(f,g){Gd.point=a;b=d=f;c=e=g};Gd.lineEnd=function(){a(b,c)}}function Bb(){function a(b,c){g.push("M",b,",",c,f)}function b(a,d){g.push("M",a,",",d);k.point=c}function c(a,b){g.push("L",
a,",",b)}function d(){k.point=a}function e(){g.push("Z")}var f=fb(4.5),g=[],k={point:a,lineStart:function(){k.point=b},lineEnd:d,polygonStart:function(){k.lineEnd=e},polygonEnd:function(){k.lineEnd=d;k.point=a},pointRadius:function(a){f=fb(a);return k},result:function(){if(g.length){var a=g.join("");g=[];return a}}};return k}function fb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function ia(a,b){fd+=a;gd+=b;++Uc}function gb(){function a(d,e){var f=d-b,g=e-c,f=Math.sqrt(f*
f+g*g);Dc+=f*(b+d)/2;Ec+=f*(c+e)/2;oc+=f;ia(b=d,c=e)}var b,c;Mc.point=function(d,e){Mc.point=a;ia(b=d,c=e)}}function qc(){Mc.point=ia}function Lb(){function a(b,c){var f=b-d,g=c-e,f=Math.sqrt(f*f+g*g);Dc+=f*(d+b)/2;Ec+=f*(e+c)/2;oc+=f;f=e*b-d*c;Ed+=f*(d+b);Fd+=f*(e+c);Vc+=3*f;ia(d=b,e=c)}var b,c,d,e;Mc.point=function(f,g){Mc.point=a;ia(b=d=f,c=e=g)};Mc.lineEnd=function(){a(b,c)}}function xb(a){function b(c,d){a.moveTo(c,d);a.arc(c,d,k,0,2*ka)}function d(b,c){a.moveTo(b,c);l.point=e}function e(b,c){a.lineTo(b,
c)}function f(){l.point=b}function g(){a.closePath()}var k=4.5,l={point:b,lineStart:function(){l.point=d},lineEnd:f,polygonStart:function(){l.lineEnd=g},polygonEnd:function(){l.lineEnd=f;l.point=b},pointRadius:function(a){k=a;return l},result:c};return l}function fc(a){function b(d){function e(b,c){b=a(b,c);d.point(b[0],b[1])}function g(){L=NaN;v.point=k;d.lineStart()}function k(b,e){var g=Gb([b,e]),l=a(b,e);c(L,Pe,t,u,gf,X,L=l[0],Pe=l[1],t=b,u=g[0],gf=g[1],X=g[2],f,d);d.point(L,Pe)}function l(){v.point=
e;d.lineEnd()}function m(){g();v.point=n;v.lineEnd=A}function n(a,b){k(p=a,b);Eb=L;E=Pe;q=u;r=gf;s=X;v.point=k}function A(){c(L,Pe,t,u,gf,X,Eb,E,p,q,r,s,f,d);v.lineEnd=l;l()}var p,Eb,E,q,r,s,t,L,Pe,u,gf,X,v={point:e,lineStart:g,lineEnd:l,polygonStart:function(){d.polygonStart();v.lineStart=m},polygonEnd:function(){d.polygonEnd();v.lineStart=g}};return v}function c(b,f,g,k,l,m,n,A,p,Eb,E,q,r,s){var t=n-b,L=A-f,u=t*t+L*L;if(u>4*d&&r--){var pe=k+Eb,X=l+E,v=m+q,x=Math.sqrt(pe*pe+X*X+v*v),da=Math.asin(v/=
x),y=Math.abs(Math.abs(v)-1)<qa?(g+p)/2:Math.atan2(X,pe),z=a(y,da),da=z[0],z=z[1],B=da-b,wa=z-f,C=L*B-t*wa;if(C*C/u>d||0.3<Math.abs((t*B+L*wa)/u-0.5)||k*Eb+l*E+m*q<e)c(b,f,g,k,l,m,da,z,y,pe/=x,X/=x,v,r,s),s.point(da,z),c(da,z,y,pe,X,v,n,A,p,Eb,E,q,r,s)}}var d=0.5,e=Math.cos(30*pa),f=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(d);f=0<(d=a*a)&&16;return b};return b}function Cb(a){var b=fc(function(b,c){return a([b*$a,c*$a])});return function(a){a=b(a);return{point:function(b,c){a.point(b*
pa,c*pa)},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}}function cb(a){return Qa(function(){return a})()}function Qa(a){function b(a){a=k(a[0]*pa,a[1]*pa);return[a[0]*m+t,L-a[1]*m]}function c(a){return(a=k.invert((a[0]-t)/m,(L-a[1])/m))&&[a[0]*$a,a[1]*$a]}function d(){k=La(g=fa(q,r,s),f);var a=f(p,E);t=n-a[0]*m;L=A+a[1]*m;return e()}function e(){da&&(da.valid=!1,da=
null);return b}var f,g,k,l=fc(function(a,b){a=f(a,b);return[a[0]*m+t,L-a[1]*m]}),m=150,n=480,A=250,p=0,E=0,q=0,r=0,s=0,t,L,u=qg,X=Ja,v=null,x=null,da;b.stream=function(a){da&&(da.valid=!1);da=kb(g,u(l(X(a))));da.valid=!0;return da};b.clipAngle=function(a){if(!arguments.length)return v;u=null==a?(v=a,qg):yc((v=+a)*pa);return e()};b.clipExtent=function(a){if(!arguments.length)return x;x=a;X=null==a?Ja:Ba(a[0][0],a[0][1],a[1][0],a[1][1]);return e()};b.scale=function(a){if(!arguments.length)return m;
m=+a;return d()};b.translate=function(a){if(!arguments.length)return[n,A];n=+a[0];A=+a[1];return d()};b.center=function(a){if(!arguments.length)return[p*$a,E*$a];p=a[0]%360*pa;E=a[1]%360*pa;return d()};b.rotate=function(a){if(!arguments.length)return[q*$a,r*$a,s*$a];q=a[0]%360*pa;r=a[1]%360*pa;s=2<a.length?a[2]%360*pa:0;return d()};B.rebind(b,l,"precision");return function(){f=a.apply(this,arguments);b.invert=f.invert&&c;return d()}}function kb(a,b){return{point:function(c,d){d=a(c*pa,d*pa);c=d[0];
b.point(c>ka?c-2*ka:c<-ka?c+2*ka:c,d[1])},sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Oa(a,b){return[a,b]}function fa(a,b,c){return a?b||c?La(ub(a),qb(b,c)):ub(a):b||c?qb(b,c):Oa}function Ua(a){return function(b,c){return b+=a,[b>ka?b-2*ka:b<-ka?b+2*ka:b,c]}}function ub(a){var b=Ua(a);b.invert=Ua(-a);return b}function qb(a,b){function c(a,b){var k=Math.cos(b),
l=Math.cos(a)*k,k=Math.sin(a)*k,m=Math.sin(b),n=m*d+l*e;return[Math.atan2(k*f-n*g,l*d-m*e),ga(n*f+k*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),k=Math.cos(a)*c,c=Math.sin(a)*c,l=Math.sin(b),m=l*f-c*g;return[Math.atan2(c*f+l*g,k*d+m*e),ga(m*d-k*e)]};return c}function Sb(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,k){if(null!=e){if(e=Wa(c,e),f=Wa(c,f),0<g?e<f:e>f)e+=2*g*ka}else e=a+2*g*ka,f=a;for(var l,m=g*b;0<g?e>f:e<f;e-=
m)k.point((l=Ob([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],l[1])}}function Wa(a,b){var c=Gb(b);c[0]-=a;Yb(c);var d=ea(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-qa)%(2*Math.PI)}function Tb(a,b,c){var d=B.range(a,b-qa,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function A(a,b,c){var d=B.range(a,b-qa,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function E(a){return a.source}function L(a){return a.target}function X(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),
g=Math.cos(d),k=Math.sin(d),l=e*Math.cos(a),m=e*Math.sin(a),n=g*Math.cos(c),A=g*Math.sin(c),p=2*Math.asin(Math.sqrt(W(d-b)+e*g*W(c-a))),E=1/Math.sin(p);c=p?function(a){var b=Math.sin(a*=p)*E,c=Math.sin(p-a)*E;a=c*l+b*n;var d=c*m+b*A,b=c*f+b*k;return[Math.atan2(d,a)*$a,Math.atan2(b,Math.sqrt(a*a+d*d))*$a]}:function(){return[a*$a,b*$a]};c.distance=p;return c}function da(a,b){function c(b,d){var e=Math.cos(b),f=Math.cos(d),e=a(e*f);return[e*f*Math.sin(b),e*Math.sin(d)]}c.invert=function(a,c){var d=Math.sqrt(a*
a+c*c),e=b(d),f=Math.sin(e),e=Math.cos(e);return[Math.atan2(a*f,d*e),Math.asin(d&&c*f/d)]};return c}function wa(a,b){function c(a,b){var d=Math.abs(Math.abs(b)-ka/2)<qa?0:f/Math.pow(Math.tan(ka/4+b/2),e);return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(ka/4+b/2)/Math.tan(ka/4+a/2)),f=d*Math.pow(Math.tan(ka/4+a/2),e)/e;if(!e)return rc;c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/
e,2*Math.atan(Math.pow(f/d,1/e))-ka/2]};return c}function Xc(a,b){function c(a,b){var d=f-b;return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;if(Math.abs(e)<qa)return Oa;c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]};return c}function rc(a,b){return[a,Math.log(Math.tan(ka/4+b/2))]}function kd(a){var b=cb(a),c=b.scale,d=b.translate,e=b.clipExtent,f;b.scale=function(){var a=c.apply(b,arguments);
return a===b?f?b.clipExtent(null):b:a};b.translate=function(){var a=d.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.clipExtent=function(a){var g=e.apply(b,arguments);if(g===b){if(f=null==a){var k=ka*c(),l=d();e([[l[0]-k,l[1]-k],[l[0]+k,l[1]+k]])}}else f&&(g=null);return g};return b.clipExtent(null)}function Yc(a,b){var c=Math.cos(b)*Math.sin(a);return[Math.log((1+c)/(1-c))/2,Math.atan2(Math.tan(b),Math.cos(a))]}function Id(a){function b(g){function l(){m.push("M",f(a(n),k))}for(var m=
[],n=[],A=-1,p=g.length,Eb,E=ua(c),q=ua(d);++A<p;)e.call(this,Eb=g[A],A)?n.push([+E.call(this,Eb,A),+q.call(this,Eb,A)]):n.length&&(l(),n=[]);n.length&&l();return m.length?m.join(""):null}var c=Xb,d=Ib,e=la,f=hb,g=f.key,k=0.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return g;g="function"===typeof a?f=a:(f=Uf.get(a)||
hb).key;return b};b.tension=function(a){if(!arguments.length)return k;k=a;return b};return b}function Xb(a){return a[0]}function Ib(a){return a[1]}function hb(a){return a.join("L")}function ld(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function te(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Xd(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return hb(a);
var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],k=g,l=1;c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],l=2);if(1<b.length)for(k=b[1],f=a[l],l++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-k[0])+","+(f[1]-k[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,l++)f=a[l],k=b[e],d+="S"+(f[0]-k[0])+","+(f[1]-k[1])+","+f[0]+","+f[1];c&&(c=a[l],d+="Q"+(f[0]+2*k[0]/3)+","+(f[1]+2*k[1]/3)+","+c[0]+","+c[1]);return d}function Yd(a,b){for(var c=[],d=(1-b)/2,e,f=a[0],g=a[1],k=1,l=a.length;++k<
l;)e=f,f=g,g=a[k],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function Zd(a){if(3>a.length)return hb(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],k=[f,f,f,d[1]],e=[e,",",f,"L",Rb(Hd,g),",",Rb(Hd,k)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),k.shift(),k.push(d[1]),Wc(e,g,k);a.pop();e.push("L",d);return e.join("")}function Rb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Wc(a,b,c){a.push("C",Rb(rg,b),",",Rb(rg,c),",",Rb(sg,b),",",Rb(sg,c),",",Rb(Hd,
b),",",Rb(Hd,c))}function Nc(a,b){return(b[1]-a[1])/(b[0]-a[0])}function xc(a,b,c,d){var e,f,g;a=d[a];e=a[0];f=a[1];a=d[b];b=a[0];g=a[1];a=d[c];return 0<(a[1]-f)*(b-e)-(g-f)*(a[0]-e)}function ma(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function $d(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,k=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(k*(a-c)-d*(e-f))/(d*g-k*b);return[e+f*g,a+f*b]}function ae(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function ec(a,b){var c=a.map(function(a,
b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),d=null,e={list:[],leftEnd:null,rightEnd:null,init:function(){e.leftEnd=e.createHalfEdge(null,"l");e.rightEnd=e.createHalfEdge(null,"l");e.leftEnd.r=e.rightEnd;e.rightEnd.l=e.leftEnd;e.list.unshift(e.leftEnd,e.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a;b.r=a.r;a.r.l=b;a.r=b},leftBound:function(a){var b=e.leftEnd;do b=b.r;
while(b!=e.rightEnd&&f.rightOf(b,a));return b=b.l},del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?d:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?d:a.edge.region[Vf[a.side]]}},f={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y;c.c=a.x*d+a.y*e+0.5*(d*d+e*e);(0<d?d:-d)>(0<e?e:-e)?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e);return c},intersect:function(a,
b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;var e=c.a*d.b-c.b*d.a;if(1E-10>Math.abs(e))return null;var f=(c.c*d.b-d.c*c.b)/e,e=(d.c*c.a-c.c*d.a)/e,g=c.region.r,k=d.region.r;g.y<k.y||g.y==k.y&&g.x<k.x?g=a:(g=b,c=d);return(c=f>=c.region.r.x)&&"l"===g.side||!c&&"r"===g.side?null:{x:f,y:e}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===c.a){var f=b.y-d.y,g=b.x-d.x,k=0,l=0;!e&&0>c.b||e&&0<=c.b?l=k=f>=
c.b*g:(l=b.x+b.y*c.b>c.c,0>c.b&&(l=!l),l||(k=1));k||(d=d.x-c.region.l.x,l=c.b*(g*g-f*f)<d*f*(1+2*g/d+c.b*c.b),0>c.b&&(l=!l))}else g=c.c-c.a*b.x,c=b.y-g,f=b.x-d.x,d=g-d.y,l=c*c>f*f+d*d;return"l"===a.side?l:!l},endPoint:function(a,c,d){a.ep[c]=d;a.ep[Vf[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},g={list:[],insert:function(a,b,c){a.vertex=b;a.ystar=b.y+c;c=0;for(var d=g.list,e=d.length;c<e;c++){var f=d[c];if(!(a.ystar>f.ystar||a.ystar==f.ystar&&b.x>f.vertex.x))break}d.splice(c,
0,a)},del:function(a){for(var b=0,c=g.list,d=c.length;b<d&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===g.list.length},nextEvent:function(a){for(var b=0,c=g.list,d=c.length;b<d;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=g.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return g.list.shift()}};e.init();for(var d=c.shift(),k=c.shift(),l,m,n,A,p,E,q,r,s;;)if(g.empty()||(l=g.min()),k&&(g.empty()||k.y<l.y||k.y==l.y&&k.x<l.x)){m=e.leftBound(k);n=e.right(m);q=
e.rightRegion(m);s=f.bisect(q,k);E=e.createHalfEdge(s,"l");e.insert(m,E);if(r=f.intersect(m,E))g.del(m),g.insert(m,r,f.distance(r,k));m=E;E=e.createHalfEdge(s,"r");e.insert(m,E);(r=f.intersect(E,n))&&g.insert(E,r,f.distance(r,k));k=c.shift()}else if(g.empty())break;else{m=g.extractMin();A=e.left(m);n=e.right(m);p=e.right(n);q=e.leftRegion(m);E=e.rightRegion(n);r=m.vertex;f.endPoint(m.edge,m.side,r);f.endPoint(n.edge,n.side,r);e.del(m);g.del(n);e.del(n);m="l";q.y>E.y&&(m=q,q=E,E=m,m="r");s=f.bisect(q,
E);E=e.createHalfEdge(s,m);e.insert(A,E);f.endPoint(s,Vf[m],r);if(r=f.intersect(A,E))g.del(A),g.insert(A,r,f.distance(r,q));(r=f.intersect(E,p))&&g.insert(E,r,f.distance(r,q))}for(m=e.right(e.leftEnd);m!=e.rightEnd;m=e.right(m))b(m.edge)}function ic(a){return a.x}function Jd(a){return a.y}function id(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function $b(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=0.5*(c+e),k=0.5*(d+f);b=b.nodes;b[0]&&$b(a,b[0],c,d,g,k);b[1]&&$b(a,b[1],g,d,e,k);b[2]&&$b(a,b[2],
c,k,g,f);b[3]&&$b(a,b[3],g,k,e,f)}}function jd(a,b){a=B.rgb(a);b=B.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,k=b.b-e;return function(a){return"#"+Va(Math.round(c+f*a))+Va(Math.round(d+g*a))+Va(Math.round(e+k*a))}}function ue(a,b){var c={},d={},e;for(e in a)e in b?c[e]=cd(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function pc(a,b){b-=a=+a;return function(c){return a+b*c}}function Ke(a,b){var c,d,e=0,f=[],g=[],k,l;a+="";b+="";for(d=pf.lastIndex=
0;c=pf.exec(b);++d)c.index&&f.push(b.substring(e,c.index)),g.push({i:f.length,x:c[0]}),f.push(null),e=pf.lastIndex;e<b.length&&f.push(b.substring(e));d=0;for(k=g.length;(c=pf.exec(a))&&d<k;++d)if(l=g[d],l.x==c[0]){if(l.i)if(null==f[l.i+1])for(f[l.i-1]+=l.x,f.splice(l.i,1),c=d+1;c<k;++c)g[c].i--;else for(f[l.i-1]+=l.x+f[l.i+1],f.splice(l.i,2),c=d+1;c<k;++c)g[c].i-=2;else if(null==f[l.i+1])f[l.i]=l.x;else for(f[l.i]=l.x+f[l.i+1],f.splice(l.i+1,1),c=d+1;c<k;++c)g[c].i--;g.splice(d,1);k--;d--}else l.x=
pc(parseFloat(c[0]),parseFloat(l.x));for(;d<k;)l=g.pop(),null==f[l.i+1]?f[l.i]=l.x:(f[l.i]=l.x+f[l.i+1],f.splice(l.i+1,1)),k--;return 1===f.length?null==f[0]?(l=g[0].x,function(a){return l(a)+""}):function(){return b}:function(a){for(d=0;d<k;++d)f[(l=g[d]).i]=l.x(a);return f.join("")}}function cd(a,b){for(var c=B.interpolators.length,d;0<=--c&&!(d=B.interpolators[c](a,b)););return d}function Td(a,b){var c=[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length),k;for(k=0;k<g;++k)c.push(cd(a[k],
b[k]));for(;k<e;++k)d[k]=a[k];for(;k<f;++k)d[k]=b[k];return function(a){for(k=0;k<g;++k)d[k]=c[k](a);return d}}function me(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function Me(a){return function(b){return 1-a(1-b)}}function Le(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function Lf(a){return a*a}function Nd(a){return a*a*a}function Db(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(0.5>a?c:3*(a-b)+c-0.75)}function cf(a){return 1-Math.cos(a*ka/2)}function Od(a){return Math.pow(2,
10*(a-1))}function Ze(a){return 1-Math.sqrt(1-a*a)}function Aa(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Bc(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function Qb(a){var b=[a.a,a.b],c=[a.c,a.d],d=ac(b),e=b[0]*c[0]+b[1]*c[1],f=-e;c[0]+=f*b[0];c[1]+=f*b[1];f=ac(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*
$a;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*$a:0}function ac(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function vc(a,b){var c=[],d=[],e,f=B.transform(a),g=B.transform(b),k=f.translate,l=g.translate,m=f.rotate,n=g.rotate,A=f.skew,p=g.skew,f=f.scale,g=g.scale;k[0]!=l[0]||k[1]!=l[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:pc(k[0],l[0])},{i:3,x:pc(k[1],l[1])})):l[0]||l[1]?c.push("translate("+l+")"):c.push("");m!=n?(180<m-n?n+=360:
180<n-m&&(m+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:pc(m,n)})):n&&c.push(c.pop()+"rotate("+n+")");A!=p?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:pc(A,p)}):p&&c.push(c.pop()+"skewX("+p+")");f[0]!=g[0]||f[1]!=g[1]?(e=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:e-4,x:pc(f[0],g[0])},{i:e-2,x:pc(f[1],g[1])})):1==g[0]&&1==g[1]||c.push(c.pop()+"scale("+g+")");e=d.length;return function(a){for(var b=-1,f;++b<e;)c[(f=d[b]).i]=f.x(a);return c.join("")}}function Mf(a,b){b=b-(a=
+a)?1/(b-a):0;return function(c){return(c-a)*b}}function Jc(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function yd(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=be(b);for(var d=be(d),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function be(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function rd(a){a.fixed|=
2}function $e(a){a.fixed&=-7}function bc(a){a.fixed|=4;a.px=a.x;a.py=a.y}function Ye(a){a.fixed&=-5}function Cc(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,g=f.length,k=-1,l;++k<g;)l=f[k],null!=l&&(Cc(l,b,c),a.charge+=l.charge,d+=l.charge*l.cx,e+=l.charge*l.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function zd(a,b){B.rebind(a,b,"sort",
"children","value");a.nodes=a;a.links=Rd;return a}function je(a){return a.children}function Xe(a){return a.value}function tc(a,b){return b.value-a.value}function Rd(a){return B.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function df(a){return a.x}function oa(a){return a.y}function ce(a,b,c){a.y0=b;a.y=c}function lc(a){return B.range(a.length)}function de(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function nb(a){for(var b=1,c=0,d=
a[0][1],e,f=a.length;b<f;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function le(a){return a.reduce(Kd,0)}function Kd(a,b){return a+b[1]}function Md(a,b){return We(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function We(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Ae(a){return[B.min(a),B.max(a)]}function ee(a,b){return a.parent==b.parent?1:2}function sd(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function td(a){var b=a.children,c;return b&&(c=b.length)?
b[c-1]:a._tree.thread}function Ud(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)0<b(d=Ud(c[f],b),a)&&(a=d);return a}function Nf(a,b){return a.x-b.x}function Be(a,b){return b.x-a.x}function Ne(a,b){return a.depth-b.depth}function uc(a,b){function c(a,d){var e=a.children;if(e&&(l=e.length))for(var f,g=null,k=-1,l;++k<l;)f=e[k],c(f,g),g=f;b(a,d)}c(a,null)}function af(a,b){return a.value-b.value}function Rc(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=
b}function mb(a,b){a._pack_next=b;b._pack_prev=a}function Zc(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return 0.999*e*e>c*c+d*d}function gc(a){function b(a){d=Math.min(a.x-a.r,d);e=Math.max(a.x+a.r,e);f=Math.min(a.y-a.r,f);g=Math.max(a.y+a.r,g)}if((c=a.children)&&(E=c.length)){var c,d=Infinity,e=-Infinity,f=Infinity,g=-Infinity,k,l,m,n,A,p,E;c.forEach(jc);k=c[0];k.x=-k.r;k.y=0;b(k);if(1<E&&(l=c[1],l.x=l.r,l.y=0,b(l),2<E))for(m=c[2],mc(k,l,m),b(m),Rc(k,m),k._pack_prev=m,Rc(m,l),l=k._pack_next,n=3;n<E;n++){mc(k,
l,m=c[n]);var q=0,r=1,s=1;for(A=l._pack_next;A!==l;A=A._pack_next,r++)if(Zc(A,m)){q=1;break}if(1==q)for(p=k._pack_prev;p!==A._pack_prev&&!Zc(p,m);p=p._pack_prev,s++);q?(r<s||r==s&&l.r<k.r?mb(k,l=A):mb(k=p,l),n--):(Rc(k,m),l=m,b(m))}k=(d+e)/2;l=(f+g)/2;for(n=A=0;n<E;n++)m=c[n],m.x-=k,m.y-=l,A=Math.max(A,m.r+Math.sqrt(m.x*m.x+m.y*m.y));a.r=A;c.forEach(Of)}}function jc(a){a._pack_next=a._pack_prev=a}function Of(a){delete a._pack_next;delete a._pack_prev}function ef(a,b,c,d){var e=a.children;a.x=b+=d*
a.x;a.y=c+=d*a.y;a.r*=d;if(e){a=-1;for(var f=e.length;++a<f;)ef(e[a],b,c,d)}}function mc(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,k=e*e+f*f,g=g*g,d=d*d;b=0.5+(d-g)/(2*k);g=Math.sqrt(Math.max(0,2*g*(d+k)-(d-=k)*d-g*g))/(2*k);c.x=a.x+b*e+g*f;c.y=a.y+b*f-g*e}else c.x=a.x+d,c.y=a.y}function Ge(a){return 1+B.max(a,function(a){return a.y})}function ze(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Se(a){var b=a.children;return b&&b.length?Se(b[0]):a}function Te(a){var b=
a.children,c;return b&&(c=b.length)?Te(b[c-1]):a}function Ce(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function od(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];0>e&&(c+=e/2,e=0);0>f&&(d+=f/2,f=0);return{x:c,y:d,dx:e,dy:f}}function Fc(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function Hc(a){return a.rangeExtent?a.rangeExtent():Fc(a.range())}function Pf(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Kc(a,b){var c=0,d=a.length-1,e=a[c],
f=a[d],g;f<e&&(g=c,c=d,d=g,g=e,e=f,f=g);a[c]=b.floor(e);a[d]=b.ceil(f);return a}function bf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Yg}function Ee(a,b,c,d){var e=[],f=[],g=0,k=Math.min(a.length,b.length)-1;a[k]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++g<=k;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=B.bisect(a,b,1,k)-1;return f[c](e[c](b))}}function Je(a,b,c,d){function e(){var l=2<Math.min(a.length,
b.length)?Ee:Pf,m=d?Jc:Mf;g=l(a,b,m,c);k=l(b,a,m,cd);return f}function f(a){return g(a)}var g,k;f.invert=function(a){return k(a)};f.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return e()};f.range=function(a){if(!arguments.length)return b;b=a;return e()};f.rangeRound=function(a){return f.range(a).interpolate(Bc)};f.clamp=function(a){if(!arguments.length)return d;d=a;return e()};f.interpolate=function(a){if(!arguments.length)return c;c=a;return e()};f.ticks=function(b){return B.range.apply(B,
Ld(a,b))};f.tickFormat=function(b,c){return wd(a,b,c)};f.nice=function(b){Pc(a,b);return e()};f.copy=function(){return Je(a,b,c,d)};return e()}function $c(a,b){return B.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Pc(a,b){var c=bf,d;b?d=Ld(a,b)[2]:(d=Fc(a),d=Math.pow(10,Math.round(Math.log(d[1]-d[0])/Math.LN10)-1));return Kc(a,c(d))}function Ld(a,b){var c=Fc(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;0.15>=d?e*=10:0.35>=d?e*=5:0.75>=d&&(e*=2);c[0]=
Math.ceil(c[0]/e)*e;c[1]=Math.floor(c[1]/e)*e+0.5*e;c[2]=e;return c}function wd(a,b,c){var d=-Math.floor(Math.log(Ld(a,b)[2])/Math.LN10+0.01);return B.format(c?c.replace(tg,function(a,b,c,e,f,g,k,l,m,n){return[b,c,e,f,g,k,l,m||"."+(d-2*("%"===n)),n].join("")}):",."+d+"f")}function Pd(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}g.invert=function(b){return f(a.invert(b))};g.domain=
function(b){if(!arguments.length)return d;c=0<=b[0];a.domain((d=b.map(Number)).map(e));return g};g.base=function(c){if(!arguments.length)return b;b=+c;a.domain(d.map(e));return g};g.nice=function(){var b=Kc(d.map(e),c?Math:Zg);a.domain(b);d=b.map(f);return g};g.ticks=function(){var a=Fc(d),g=[],k=a[0],a=a[1],l=Math.floor(e(k)),m=Math.ceil(e(a)),n=b%1?2:b;if(isFinite(m-l)){if(c){for(;l<m;l++)for(var A=1;A<n;A++)g.push(f(l)*A);g.push(f(l))}else for(g.push(f(l));l++<m;)for(A=n-1;0<A;A--)g.push(f(l)*
A);for(l=0;g[l]<k;l++);for(m=g.length;g[m-1]>a;m--);g=g.slice(l,m)}return g};g.tickFormat=function(a,b){if(!arguments.length)return ug;2>arguments.length?b=ug:"function"!==typeof b&&(b=B.format(b));var d=Math.max(0.1,a/g.ticks().length),k=c?(l=1E-12,Math.ceil):(l=-1E-12,Math.floor),l;return function(a){return a/f(k(e(a)+l))<=d?b(a):""}};g.copy=function(){return Pd(a.copy(),b,c,d)};return $c(g,a)}function Fe(a,b,c){function d(b){return a(e(b))}var e=bd(b),f=bd(1/b);d.invert=function(b){return f(a.invert(b))};
d.domain=function(b){if(!arguments.length)return c;a.domain((c=b.map(Number)).map(e));return d};d.ticks=function(a){return B.range.apply(B,Ld(c,a))};d.tickFormat=function(a,b){return wd(c,a,b)};d.nice=function(a){return d.domain(Pc(c,a))};d.exponent=function(g){if(!arguments.length)return b;e=bd(b=g);f=bd(1/b);a.domain(c.map(e));return d};d.copy=function(){return Fe(a.copy(),b,c)};return $c(d,a)}function bd(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function nc(a,b){function c(b){return f[((e.get(b)||
e.set(b,a.push(b)))-1)%f.length]}function d(b,c){return B.range(a.length).map(function(a){return b+c*a})}var e,f,g;c.domain=function(d){if(!arguments.length)return a;a=[];e=new m;for(var f=-1,g=d.length,k;++f<g;)e.has(k=d[f])||e.set(k,a.push(k));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return f;f=a;g=0;b={t:"range",a:arguments};return c};c.rangePoints=function(e,k){2>arguments.length&&(k=0);var l=e[0],m=e[1],n=(m-l)/(Math.max(1,a.length-1)+k);f=d(2>a.length?(l+m)/2:l+n*
k/2,n);g=0;b={t:"rangePoints",a:arguments};return c};c.rangeBands=function(e,k,l){2>arguments.length&&(k=0);3>arguments.length&&(l=k);var m=e[1]<e[0],n=e[m-0],A=(e[1-m]-n)/(a.length-k+2*l);f=d(n+A*l,A);m&&f.reverse();g=A*(1-k);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(e,k,l){2>arguments.length&&(k=0);3>arguments.length&&(l=k);var m=e[1]<e[0],n=e[m-0],A=e[1-m],p=Math.floor((A-n)/(a.length-k+2*l));f=d(n+Math.round((A-n-(a.length-k)*p)/2),p);m&&f.reverse();g=Math.round(p*(1-
k));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return g};c.rangeExtent=function(){return Fc(b.a[0])};c.copy=function(){return nc(a,b)};return c.domain(a)}function Ie(a,b){function c(){var f=0,g=b.length;for(e=[];++f<g;)e[f-1]=B.quantile(a,f/g);return d}function d(a){if(!isNaN(a=+a))return b[B.bisect(e,a)]}var e;d.domain=function(b){if(!arguments.length)return a;a=b.filter(function(a){return!isNaN(a)}).sort(B.ascending);return c()};d.range=function(a){if(!arguments.length)return b;
b=a;return c()};d.quantiles=function(){return e};d.invertExtent=function(c){c=b.indexOf(c);return 0>c?[NaN,NaN]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]};d.copy=function(){return Ie(a,b)};return c()}function ge(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){f=c.length/(b-a);g=c.length-1;return d}var f,g;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};
d.invertExtent=function(b){b=c.indexOf(b);b=0>b?NaN:b/f+a;return[b,b+1/f]};d.copy=function(){return ge(a,b,c)};return e()}function he(a,b){function c(d){if(d<=d)return b[B.bisect(a,d)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return he(a,b)};return c}function ie(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;
a=c.map(b);return b};b.ticks=function(b){return B.range.apply(B,Ld(a,b))};b.tickFormat=function(b,c){return wd(a,b,c)};b.copy=function(){return ie(a)};return b}function nd(a){return a.innerRadius}function we(a){return a.outerRadius}function xe(a){return a.startAngle}function Oe(a){return a.endAngle}function Bd(a){for(var b,c=-1,d=a.length,e,f;++c<d;)b=a[c],e=b[0],f=b[1]+Wd,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function Cd(a){function b(l){function p(){E.push("M",k(a(r),A),n,m(a(q.reverse()),
A),"Z")}for(var E=[],q=[],r=[],s=-1,t=l.length,L,u=ua(c),Eb=ua(e),X=c===d?function(){return x}:ua(d),v=e===f?function(){return da}:ua(f),x,da;++s<t;)g.call(this,L=l[s],s)?(q.push([x=+u.call(this,L,s),da=+Eb.call(this,L,s)]),r.push([+X.call(this,L,s),+v.call(this,L,s)])):q.length&&(p(),q=[],r=[]);q.length&&p();return E.length?E.join(""):null}var c=Xb,d=Xb,e=0,f=Ib,g=la,k=hb,l=k.key,m=k,n="L",A=0.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;
c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return f;e=f=a;return b};b.y0=function(a){if(!arguments.length)return e;e=a;return b};b.y1=function(a){if(!arguments.length)return f;f=a;return b};b.defined=function(a){if(!arguments.length)return g;g=a;return b};b.interpolate=function(a){if(!arguments.length)return l;l="function"===typeof a?k=a:(k=Uf.get(a)||hb).key;m=k.reverse||k;n=k.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return A;
A=a;return b};return b}function ye(a){return a.radius}function Ad(a){return[a.x,a.y]}function He(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+Wd;return[c*Math.cos(b),c*Math.sin(b)]}}function Gc(){return 64}function ke(){return"circle"}function dd(a){a=Math.sqrt(a/ka);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function xd(a,b){Ve(a,yb);a.id=b;return a}function Sd(a,b,c,d){var e=a.id;return K(a,"function"===typeof c?function(a,f,g){a.__transition__[e].tween.set(b,
d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Qf(a){null==a&&(a="");return function(){this.textContent=a}}function Mb(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var g=d.time,f=e[c]={tween:new m,time:g,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;B.timer(function(d){function k(d){if(e.active>c)return m();e.active=c;f.event&&f.event.start.call(a,n,b);f.tween.forEach(function(c,d){(d=d.call(a,n,b))&&
q.push(d)});if(l(d))return 1;Ra(l,0,g)}function l(d){if(e.active!==c)return m();d=(d-p)/E;for(var g=A(d),k=q.length;0<k;)q[--k].call(a,g);if(1<=d)return m(),f.event&&f.event.end.call(a,n,b),1}function m(){--e.count?delete e[c]:delete a.__transition__;return 1}var n=a.__data__,A=f.ease,p=f.delay,E=f.duration,q=[];if(p<=d)return k(d);Ra(k,p,g)},0,g)}}function ff(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Dd(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+
")"})}function Qc(a,b,c){d=[];if(c&&1<b.length){a=Fc(a.domain());for(var d,e=-1,f=b.length,g=(b[1]-b[0])/++c,k,l;++e<f;)for(k=c;0<--k;)(l=+b[e]-k*g)>=a[0]&&d.push(l);--e;for(k=0;++k<c&&(l=+b[e]+k*g)<a[1];)d.push(l)}return d}function Ac(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function kc(a,b,c){function d(b){var c=a(b),e=f(c,1);return b-c<e-b?c:e}function e(c){b(c=a(new cc(c-1)),1);return c}function f(a,c){b(a=new cc(+a),c);return a}function g(a,d,f){a=e(a);
var k=[];if(1<f)for(;a<d;)c(a)%f||k.push(new Date(+a)),b(a,1);else for(;a<d;)k.push(new Date(+a)),b(a,1);return k}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var k=a.utc=Qd(a);k.floor=k;k.round=Qd(d);k.ceil=Qd(e);k.offset=Qd(f);k.range=function(a,b,c){try{cc=Ac;var d=new Ac;d._=a;return g(d,b,c)}finally{cc=Date}};return a}function Qd(a){return function(b,c){try{cc=Ac;var d=new Ac;d._=b;return a(d,c)._}finally{cc=Date}}}function ed(a,b,c,d){for(var e,f=0,g=b.length,k=c.length;f<g;){if(d>=k)return-1;
e=b.charCodeAt(f++);if(37===e){if(e=$g[b.charAt(f++)],!e||0>(d=e(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function ne(a){return RegExp("^(?:"+a.map(B.requote).join("|")+")","i")}function ud(a){for(var b=new m,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Vb(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function vd(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function oe(a,
b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Ic(a){return a.toISOString()}function De(a,b,c){function d(b){return a(b)}d.invert=function(b){return fe(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(fe);a.domain(b);return d};d.nice=function(a){return d.domain(Kc(d.domain(),a))};d.ticks=function(c,e){var f=Fc(d.domain());if("function"!==typeof c){var g=(f[1]-f[0])/c,k=B.bisect(qf,g);if(k==qf.length)return b.year(f,c);if(!k)return a.ticks(c).map(fe);
g/qf[k-1]<qf[k]/g&&--k;c=b[k];e=c[1];c=c[0].range}return c(f[0],new Date(+f[1]+1),e)};d.tickFormat=function(){return c};d.copy=function(){return De(a.copy(),b,c)};return $c(d,a)}function fe(a){return new Date(a)}function Sc(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function Oc(a){var b=new Date(a,0,1);b.setFullYear(a);return b}function Kf(a){var b=a.getFullYear(),c=Oc(b),d=Oc(b+1);return b+(a-c)/(d-c)}function Gf(a){var b=new Date(Date.UTC(a,0,1));b.setUTCFullYear(a);
return b}function sc(a){var b=a.getUTCFullYear(),c=Gf(b),d=Gf(b+1);return b+(a-c)/(d-c)}function ve(a){return JSON.parse(a.responseText)}function Rg(a){var b=zc.createRange();b.selectNode(zc.body);return b.createContextualFragment(a.responseText)}var B={version:"3.2.8"};Date.now||(Date.now=function(){return+new Date});var zc=document,md=zc.documentElement,Ub=window;try{zc.createElement("div").style.setProperty("opacity",0,"")}catch(Eh){var Ue=Ub.Element.prototype,Sg=Ue.setAttribute,Ug=Ue.setAttributeNS,
gg=Ub.CSSStyleDeclaration.prototype,Tg=gg.setProperty;Ue.setAttribute=function(a,b){Sg.call(this,a,b+"")};Ue.setAttributeNS=function(a,b,c){Ug.call(this,a,b,c+"")};gg.setProperty=function(a,b,c){Tg.call(this,a,b+"",c)}}B.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};B.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};B.min=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&e>f&&(e=f)}else{for(;++c<
d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&e>f&&(e=f)}return e};B.max=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&f>e&&(e=f)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&f>e&&(e=f)}return e};B.extent=function(a,b){var c=-1,d=a.length,e,f,g;if(1===arguments.length){for(;++c<d&&!(null!=(e=g=a[c])&&e<=e);)e=
g=void 0;for(;++c<d;)null!=(f=a[c])&&(e>f&&(e=f),g<f&&(g=f))}else{for(;++c<d&&!(null!=(e=g=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&(e>f&&(e=f),g<f&&(g=f))}return[e,g]};B.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(1===arguments.length)for(;++f<d;)isNaN(e=+a[f])||(c+=e);else for(;++f<d;)isNaN(e=+b.call(a,a[f],f))||(c+=e);return c};B.mean=function(a,b){var c=a.length,d,e=0,f=-1,k=0;if(1===arguments.length)for(;++f<c;)g(d=a[f])&&(e+=(d-e)/++k);else for(;++f<c;)g(d=
b.call(a,a[f],f))&&(e+=(d-e)/++k);return k?e:void 0};B.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};B.median=function(a,b){1<arguments.length&&(a=a.map(b));a=a.filter(g);return a.length?B.quantile(a.sort(B.ascending),0.5):void 0};B.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&
(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var fg=B.bisector(function(a){return a});B.bisectLeft=fg.left;B.bisect=B.bisectRight=fg.right;B.shuffle=function(a){for(var b=a.length,c,d;b;)d=Math.random()*b--|0,c=a[b],a[b]=a[d],a[d]=c;return a};B.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};B.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=B.min(arguments,f),c=Array(b);++a<b;)for(var d=-1,
e,g=c[a]=Array(e);++d<e;)g[d]=arguments[d][a];return c};B.transpose=function(a){return B.zip.apply(B,a)};B.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};B.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};B.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};B.merge=function(a){return Array.prototype.concat.apply([],a)};B.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");
var d=[],e;e=Math.abs(c);for(var f=1;e*f%1;)f*=10;e=f;var f=-1,g;a*=e;b*=e;c*=e;if(0>c)for(;(g=a+c*++f)>b;)d.push(g/e);else for(;(g=a+c*++f)<b;)d.push(g/e);return d};B.map=function(a){var b=new m;if(a instanceof m)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};n(m,{has:function(a){return pd+a in this},get:function(a){return this[pd+a]},set:function(a,b){return this[pd+a]=b},remove:function(a){a=pd+a;return a in this&&delete this[a]},keys:function(){var a=[];this.forEach(function(b){a.push(b)});
return a},values:function(){var a=[];this.forEach(function(b,c){a.push(c)});return a},entries:function(){var a=[];this.forEach(function(b,c){a.push({key:b,value:c})});return a},forEach:function(a){for(var b in this)b.charCodeAt(0)===hg&&a.call(this,b.substring(1),this[b])}});var pd="\x00",hg=pd.charCodeAt(0);B.nest=function(){function a(b,e,k){if(k>=d.length)return g?g.call(c,e):f?e.sort(f):e;for(var l=-1,n=e.length,A=d[k++],p,E,q=new m,r;++l<n;)(r=q.get(p=A(E=e[l])))?r.push(E):q.set(p,[E]);b?(E=
b(),e=function(c,d){E.set(c,a(b,d,k))}):(E={},e=function(c,d){E[c]=a(b,d,k)});q.forEach(e);return E}function b(a,c){if(c>=d.length)return a;var f=[],g=e[c++];a.forEach(function(a,d){f.push({key:a,values:b(d,c)})});return g?f.sort(function(a,b){return g(a.key,b.key)}):f}var c={},d=[],e=[],f,g;c.map=function(b,c){return a(c,b,0)};c.entries=function(c){return b(a(B.map,c,0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){e[d.length-1]=a;return c};c.sortValues=function(a){f=a;return c};
c.rollup=function(a){g=a;return c};return c};B.set=function(a){var b=new k;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};n(k,{has:function(a){return pd+a in this},add:function(a){this[pd+a]=!0;return a},remove:function(a){a=pd+a;return a in this&&delete this[a]},values:function(){var a=[];this.forEach(function(b){a.push(b)});return a},forEach:function(a){for(var b in this)b.charCodeAt(0)===hg&&a.call(this,b.substring(1))}});B.behavior={};B.rebind=function(a,b){for(var c=1,d=arguments.length,
f;++c<d;)a[f=arguments[c]]=e(a,b,b[f]);return a};var ig="webkit ms moz Moz o O".split(" "),qd=function(a){return Array.prototype.slice.call(a)};try{qd(md.childNodes)[0].nodeType}catch(Fh){qd=d}B.dispatch=function(){for(var a=new b,c=-1,d=arguments.length;++c<d;)a[arguments[c]]=p(a);return a};b.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<=c&&(d=a.substring(c+1),a=a.substring(0,c));if(a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,
null);return this}};B.event=null;B.requote=function(a){return a.replace(Vg,"\\$&")};var Vg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ve={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Hf=function(a,b){return b.querySelector(a)},If=function(a,b){return b.querySelectorAll(a)},Wg=md[l(md,"matchesSelector")],jg=function(a,b){return Wg.call(a,b)};"function"===typeof Sizzle&&(Hf=function(a,b){return Sizzle(a,b)[0]||null},If=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},
jg=Sizzle.matchesSelector);B.selection=function(){return kg};var Ma=B.selection.prototype=[];Ma.select=function(a){var b=[],c,d,e,f;a=t(a);for(var g=-1,k=this.length;++g<k;){b.push(c=[]);c.parentNode=(e=this[g]).parentNode;for(var l=-1,m=e.length;++l<m;)(f=e[l])?(c.push(d=a.call(f,f.__data__,l,g)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return q(b)};Ma.selectAll=function(a){var b=[],c,d;a=v(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],k=-1,l=g.length;++k<l;)if(d=g[k])b.push(c=
qd(a.call(d,d.__data__,k,e))),c.parentNode=d;return q(b)};var Jf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};B.ns={prefix:Jf,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&(c=a.substring(0,b),a=a.substring(b+1));return Jf.hasOwnProperty(c)?{space:Jf[c],local:a}:a}};Ma.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();
a=B.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(x(b,a[b]));return this}return this.each(x(a,b))};Ma.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!y(a[e]).test(b))return!1;return!0}for(b in a)this.each(z(b,a[b]));return this}return this.each(z(a,b))};Ma.style=
function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.each(F(c,a[c],b));return this}if(2>d)return Ub.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(F(a,b,c))};Ma.property=function(a,b){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(b in a)this.each(H(b,a[b]));return this}return this.each(H(a,b))};Ma.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,
arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};Ma.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};Ma.append=function(a){a=M(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};Ma.insert=function(a,
b){a=M(a);b=t(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments))})};Ma.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};Ma.data=function(a,b){function c(a,d){var e,f=a.length,g=d.length,A=Math.min(f,g),p=Array(g),E=Array(g),q=Array(f),Ga,r;if(b){var A=new m,s=new m,t=[],L;for(e=-1;++e<f;)L=b.call(Ga=a[e],Ga.__data__,e),A.has(L)?q[e]=Ga:A.set(L,Ga),t.push(L);for(e=-1;++e<g;)L=b.call(d,r=d[e],e),(Ga=
A.get(L))?(p[e]=Ga,Ga.__data__=r):s.has(L)||(E[e]={__data__:r}),s.set(L,r),A.remove(L);for(e=-1;++e<f;)A.has(t[e])&&(q[e]=a[e])}else{for(e=-1;++e<A;)Ga=a[e],r=d[e],Ga?(Ga.__data__=r,p[e]=Ga):E[e]={__data__:r};for(;e<g;++e)E[e]={__data__:d[e]};for(;e<f;++e)q[e]=a[e]}E.update=p;E.parentNode=p.parentNode=q.parentNode=a.parentNode;k.push(E);l.push(p);n.push(q)}var d=-1,e=this.length,f,g;if(!arguments.length){for(a=Array(e=(f=this[0]).length);++d<e;)if(g=f[d])a[d]=g.__data__;return a}var k=G([]),l=q([]),
n=q([]);if("function"===typeof a)for(;++d<e;)c(f=this[d],a.call(f,f.parentNode.__data__,d));else for(;++d<e;)c(f=this[d],a);l.enter=function(){return k};l.exit=function(){return n};return l};Ma.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};Ma.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=I(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);c.parentNode=(d=this[f]).parentNode;for(var k=0,l=d.length;k<l;k++)(e=d[k])&&a.call(e,e.__data__,
k)&&c.push(e)}return q(b)};Ma.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],f;0<=--d;)if(f=c[d])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};Ma.sort=function(a){a=J.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};Ma.each=function(a){return K(this,function(b,c,d){a.call(b,b.__data__,c,d)})};Ma.call=function(a){var b=qd(arguments);a.apply(b[0]=this,b);return this};Ma.empty=function(){return!this.node()};
Ma.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null};Ma.size=function(){var a=0;this.each(function(){++a});return a};var ad=[];B.selection.enter=G;B.selection.enter.prototype=ad;ad.append=Ma.append;ad.empty=Ma.empty;ad.node=Ma.node;ad.call=Ma.call;ad.size=Ma.size;ad.select=function(a){for(var b=[],c,d,e,f,g,k=-1,l=this.length;++k<l;){e=(f=this[k]).update;b.push(c=[]);c.parentNode=f.parentNode;for(var m=-1,n=f.length;++m<
n;)(g=f[m])?(c.push(e[m]=d=a.call(f.parentNode,g.__data__,m,k)),d.__data__=g.__data__):c.push(null)}return q(b)};ad.insert=function(a,b){2>arguments.length&&(b=S(this));return Ma.insert.call(this,a,b)};Ma.transition=function(){for(var a=Re||++vg,b=[],c,d,e=rf||{time:Date.now(),ease:Db,delay:0,duration:250},f=-1,g=this.length;++f<g;){b.push(c=[]);for(var k=this[f],l=-1,m=k.length;++l<m;)(d=k[l])&&Mb(d,l,a,e),c.push(d)}return xd(b,a)};B.select=function(a){a=["string"===typeof a?Hf(a,zc):a];a.parentNode=
md;return q([a])};B.selectAll=function(a){a=qd("string"===typeof a?If(a,zc):a);a.parentNode=md;return q([a])};var kg=B.select(md);Ma.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(O(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(O(a,b,c))};var Rf=B.map({mouseenter:"mouseover",mouseleave:"mouseout"});Rf.forEach(function(a){"on"+a in zc&&Rf.remove(a)});var Sf=l(md.style,"userSelect"),Xg=0;B.mouse=function(a){return U(a,
u())};var Tf=/WebKit/.test(Ub.navigator.userAgent)?-1:0;B.touches=function(a,b){2>arguments.length&&(b=u().touches);return b?qd(b).map(function(b){var c=U(a,b);c.identifier=b.identifier;return c}):[]};B.behavior.drag=function(){function b(){this.on("mousedown.drag",g).on("touchstart.drag",k)}function d(a,b,c,g){return function(){function d(){r.on(c+"."+A,null).on(g+"."+A,null);s(E&&B.event.target===m);l({type:"dragend"})}var k=this.parentNode,l=e.of(this,arguments),m=B.event.target,n=a(),A=null==
n?"drag":"drag-"+n,p=b(k,n),E=0,q,r=B.select(Ub).on(c+"."+A,function(){if(!k)return d();var a=b(k,n),c=a[0]-p[0],e=a[1]-p[1];E=E|c|e;p=a;l({type:"drag",x:a[0]+q[0],y:a[1]+q[1],dx:c,dy:e})}).on(g+"."+A,d),s=Q();f?(q=f.apply(this,arguments),q=[q.x-p[0],q.y-p[1]]):q=[0,0];l({type:"dragstart"})}}var e=a(b,"drag","dragstart","dragend"),f=null,g=d(c,B.mouse,"mousemove","mouseup"),k=d(function(){return B.event.changedTouches[0].identifier},function(a,b){return B.touches(a).filter(function(a){return a.identifier===
b})[0]},"touchmove","touchend");b.origin=function(a){if(!arguments.length)return f;f=a;return b};return B.rebind(b,e,"on")};B.behavior.zoom=function(){function b(){this.on(t,k).on(ah+".zoom",m).on(L,n).on("dblclick.zoom",A).on(X,l)}function c(a){return[(a[0]-p[0])/q,(a[1]-p[1])/q]}function d(a){q=Math.max(s[0],Math.min(s[1],a))}function e(a,b){b=[b[0]*q+p[0],b[1]*q+p[1]];p[0]+=a[0]-b[0];p[1]+=a[1]-b[1]}function f(){wa&&wa.domain(z.range().map(function(a){return(a-p[0])/q}).map(z.invert));D&&D.domain(C.range().map(function(a){return(a-
p[1])/q}).map(C.invert))}function g(a){f();a({type:"zoom",scale:q,translate:p})}function k(){var a=this,b=y.of(a,arguments),d=B.event.target,f=0,l=B.select(Ub).on(L,function(){f=1;e(B.mouse(a),m);g(b)}).on(u,function(){l.on(L,Ub===a?n:null).on(u,null);A(f&&B.event.target===d)}),m=c(B.mouse(a)),A=Q()}function l(){function a(){var b=B.touches(f);p=q;n={};b.forEach(function(a){n[a.identifier]=c(a)});return b}function b(){var c=Date.now(),f=a();if(1===f.length){if(500>c-da){var k=f[0],f=n[k.identifier];
d(2*q);e(k,f);r();g(m)}da=c}else 1<f.length&&(k=f[0],f=f[1],c=k[0]-f[0],k=k[1]-f[1],A=c*c+k*k)}var f=this,m=y.of(f,arguments),n,A=0,p,E=B.select(Ub).on(v,function(){var a=B.touches(f),b=a[0],c=n[b.identifier];if(a=a[1]){var k=n[a.identifier],l=B.event.scale;if(null==l)var E=(E=a[0]-b[0])*E+(E=a[1]-b[1])*E,l=A&&Math.sqrt(E/A);b=[(b[0]+a[0])/2,(b[1]+a[1])/2];c=[(c[0]+k[0])/2,(c[1]+k[1])/2];d(l*p)}da=null;e(b,c);g(m)}).on(x,function(){B.event.touches.length?a():(E.on(v,null).on(x,null),s.on(t,k).on(X,
l),Ga())}),s=B.select(f).on(t,null).on(X,b),Ga=Q();b()}function m(){r();E||(E=c(B.mouse(this)));d(Math.pow(2,0.002*sf())*q);e(B.mouse(this),E);g(y.of(this,arguments))}function n(){E=null}function A(){var a=B.mouse(this),b=c(a),f=Math.log(q)/Math.LN2;d(Math.pow(2,B.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1));e(a,b);g(y.of(this,arguments))}var p=[0,0],E,q=1,s=wg,t="mousedown.zoom",L="mousemove.zoom",u="mouseup.zoom",X="touchstart.zoom",v="touchmove.zoom",x="touchend.zoom",da,y=a(b,"zoom"),z,wa,
C,D;b.translate=function(a){if(!arguments.length)return p;p=a.map(Number);f();return b};b.scale=function(a){if(!arguments.length)return q;q=+a;f();return b};b.scaleExtent=function(a){if(!arguments.length)return s;s=null==a?wg:a.map(Number);return b};b.x=function(a){if(!arguments.length)return wa;wa=a;z=a.copy();p=[0,0];q=1;return b};b.y=function(a){if(!arguments.length)return D;D=a;C=a.copy();p=[0,0];q=1;return b};return B.rebind(b,y,"on")};var wg=[0,Infinity],sf,ah="onwheel"in zc?(sf=function(){return-B.event.deltaY*
(B.event.deltaMode?120:1)},"wheel"):"onmousewheel"in zc?(sf=function(){return B.event.wheelDelta},"mousewheel"):(sf=function(){return-B.event.detail},"MozMousePixelScroll");N.prototype.toString=function(){return this.rgb()+""};B.hsl=function(a,b,c){return 1===arguments.length?a instanceof P?V(a.h,a.s,a.l):rb(""+a,Ta,V):V(+a,+b,+c)};var Wf=P.prototype=new N;Wf.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);return V(this.h,this.s,this.l/a)};Wf.darker=function(a){a=Math.pow(0.7,arguments.length?
a:1);return V(this.h,this.s,a*this.l)};Wf.rgb=function(){return aa(this.h,this.s,this.l)};var ka=Math.PI,qa=1E-6,xg=qa*qa,pa=ka/180,$a=180/ka;B.hcl=function(a,b,c){return 1===arguments.length?a instanceof ca?Z(a.h,a.c,a.l):a instanceof ya?va(a.l,a.a,a.b):va((a=zb((a=B.rgb(a)).r,a.g,a.b)).l,a.a,a.b):Z(+a,+b,+c)};var Xf=ca.prototype=new N;Xf.brighter=function(a){return Z(this.h,this.c,Math.min(100,this.l+tf*(arguments.length?a:1)))};Xf.darker=function(a){return Z(this.h,this.c,Math.max(0,this.l-tf*
(arguments.length?a:1)))};Xf.rgb=function(){return ja(this.h,this.c,this.l).rgb()};B.lab=function(a,b,c){return 1===arguments.length?a instanceof ya?R(a.l,a.a,a.b):a instanceof ca?ja(a.l,a.c,a.h):zb((a=B.rgb(a)).r,a.g,a.b):R(+a,+b,+c)};var tf=18,lg=0.95047,mg=1,ng=1.08883,Yf=ya.prototype=new N;Yf.brighter=function(a){return R(Math.min(100,this.l+tf*(arguments.length?a:1)),this.a,this.b)};Yf.darker=function(a){return R(Math.max(0,this.l-tf*(arguments.length?a:1)),this.a,this.b)};Yf.rgb=function(){return Ha(this.l,
this.a,this.b)};B.rgb=function(a,b,c){return 1===arguments.length?a instanceof Ea?ra(a.r,a.g,a.b):rb(""+a,ra,aa):ra(~~a,~~b,~~c)};var uf=Ea.prototype=new N;uf.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return ra(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return ra(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))};uf.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return ra(~~(a*this.r),~~(a*this.g),
~~(a*this.b))};uf.hsl=function(){return Ta(this.r,this.g,this.b)};uf.toString=function(){return"#"+Va(this.r)+Va(this.g)+Va(this.b)};var hf=B.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,
darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,
fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,
lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,
navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,
slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});hf.forEach(function(a,b){hf.set(a,ra(b>>16,b>>8&255,b&255))});B.functor=ua;B.xhr=jb(Ja);B.dsv=function(a,b){function c(a,f,g){3>arguments.length&&(g=f,f=null);var k=B.xhr(a,b,g);k.row=function(a){return arguments.length?
k.response(null==(f=a)?d:e(a)):f};return k.row(f)}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return l.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var l=RegExp('["'+a+"\n]"),m=a.charCodeAt(0);c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");
d=b?function(a,c){return b(e(a),c)}:e})};c.parseRows=function(a,b){function c(){if(k>=g)return e;if(A)return A=!1,d;var b=k;if(34===a.charCodeAt(b)){for(var f=b;f++<g;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}k=f+2;var l=a.charCodeAt(f+1);13===l?(A=!0,10===a.charCodeAt(f+2)&&++k):10===l&&(A=!0);return a.substring(b+1,f).replace(/""/g,'"')}for(;k<g;){l=a.charCodeAt(k++);f=1;if(10===l)A=!0;else if(13===l)A=!0,10===a.charCodeAt(k)&&(++k,++f);else if(l!==m)continue;return a.substring(b,
k-f)}return a.substring(b)}for(var d={},e={},f=[],g=a.length,k=0,l=0,n,A;(n=c())!==e;){for(var p=[];n!==d&&n!==e;)p.push(n),n=c();b&&!(p=b(p,l++))||f.push(p)}return f};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new k,e=[];b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))});return[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(f).join("\n")};return c};B.csv=
B.dsv(",","text/csv");B.tsv=B.dsv("\t","text/tab-separated-values");var lf,mf,kf,jf,Tc,og=Ub[l(Ub,"requestAnimationFrame")]||function(a){setTimeout(a,17)};B.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={callback:a,time:c+b,next:null};mf?mf.next=d:lf=d;mf=d;kf||(jf=clearTimeout(jf),kf=1,og(Pa))};B.timer.flush=function(){hc();Sa()};var vf=[3,3],bh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:8<b?
function(a){return a/c}:function(a){return a*c},symbol:a}});B.formatPrefix=function(a,b){var c=0;a&&(0>a&&(a*=-1),b&&(a=B.round(a,Wb(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3))));return bh[8+c/3]};B.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};B.format=function(a){a=tg.exec(a);var b=a[1]||" ",c=a[2]||">",d=a[3]||"",e=a[4]||"",f=a[5],g=+a[6],k=a[7],l=a[8],m=a[9],n=1,A="",p=!1;l&&(l=+l.substring(1));
if(f||"0"===b&&"="===c)f=b="0",c="=",k&&(g-=Math.floor((g-1)/4));switch(m){case "n":k=!0;m="g";break;case "%":n=100;A="%";m="f";break;case "p":n=100;A="%";m="r";break;case "b":case "o":case "x":case "X":"#"===e&&(e="0"+m.toLowerCase());case "c":case "d":p=!0;l=0;break;case "s":n=-1,m="r"}"#"===e?e="":"$"===e&&(e="$");"r"!=m||l||(m="g");if(null!=l)if("g"==m)l=Math.max(1,Math.min(21,l));else if("e"==m||"f"==m)l=Math.max(0,Math.min(20,l));var m=ch.get(m)||dc,E=f&&k;return function(a){if(p&&a%1)return"";
var q=0>a||0===a&&0>1/a?(a=-a,"-"):d;if(0>n){var r=B.formatPrefix(a,l);a=r.scale(a);A=r.symbol}else a*=n;a=m(a,l);var s=a.lastIndexOf("."),r=0>s?a:a.substring(0,s);a=0>s?"":"."+a.substring(s+1);!f&&k&&(r=Zf(r));var s=e.length+r.length+a.length+(E?0:q.length),t=s<g?Array(s=g-s+1).join(b):"";E&&(r=Zf(t+r));q+=e;a=r+a;return("<"===c?q+a+t:">"===c?t+q+a:"^"===c?t.substring(0,s>>=1)+q+a+t.substring(s):q+(E?a:t+a))+A}};var tg=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ch=B.map({b:function(a){return a.toString(2)},
c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=B.round(a,Wb(a,b))).toFixed(Math.max(0,Math.min(20,Wb(a*(1+1E-15),b))))}}),Zf=Ja;if(vf)var dh=vf.length,Zf=function(a){for(var b=a.length,c=[],d=0,e=vf[0];0<b&&0<e;)c.push(a.substring(b-=
e,b+e)),e=vf[d=(d+1)%dh];return c.reverse().join(",")};B.geo={};Xa.prototype={s:0,t:0,add:function(a){tb(a,this.t,wf);tb(wf.s,this.s,this);this.s?this.t+=wf.t:this.s=wf.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var wf=new Xa;B.geo.stream=function(a,b){if(a&&yg.hasOwnProperty(a.type))yg[a.type](a,b);else xa(a,b)};var yg={Feature:function(a,b){xa(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)xa(c[d].geometry,b)}},pg={Sphere:function(a,
b){b.sphere()},Point:function(a,b){var c=a.coordinates;b.point(c[0],c[1])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length,f;++d<e;)f=c[d],b.point(f[0],f[1])},LineString:function(a,b){sa(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)sa(c[d],b,0)},Polygon:function(a,b){Nb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Nb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=
-1,e=c.length;++d<e;)xa(c[d],b)}};B.geo.area=function(a){re=0;B.geo.stream(a,wc);return re};var re,Vd=new Xa,wc={sphere:function(){re+=4*ka},point:c,lineStart:c,lineEnd:c,polygonStart:function(){Vd.reset();wc.lineStart=Ka},polygonEnd:function(){var a=2*Vd;re+=0>a?4*ka+a:a;wc.lineStart=wc.lineEnd=wc.point=c}};B.geo.bounds=function(){function a(b,c){u.push(X=[n=b,p=b]);c<A&&(A=c);c>E&&(E=c)}function b(c,d){var e=Gb([c*pa,d*pa]);if(t){var f=Ab(t,e),f=Ab([f[1],-f[0],0],f);Yb(f);var f=Ob(f),g=c-q,l=0<
g?1:-1,m=f[0]*$a*l,g=180<Math.abs(g);g^(l*q<m&&m<l*c)?(f=f[1]*$a,f>E&&(E=f)):(m=(m+360)%360-180,g^(l*q<m&&m<l*c))?(f=-f[1]*$a,f<A&&(A=f)):(d<A&&(A=d),d>E&&(E=d));g?c<q?k(n,c)>k(n,p)&&(p=c):k(c,p)>k(n,p)&&(n=c):p>=n?(c<n&&(n=c),c>p&&(p=c)):c>q?k(n,c)>k(n,p)&&(p=c):k(c,p)>k(n,p)&&(n=c)}else a(c,d);t=e;q=c}function c(){v.point=b}function d(){X[0]=n;X[1]=p;v.point=a;t=null}function e(a,c){if(t){var d=a-q;L+=180<Math.abs(d)?d+(0<d?360:-360):d}else r=a,s=c;wc.point(a,c);b(a,c)}function f(){wc.lineStart()}
function g(){e(r,s);wc.lineEnd();Math.abs(L)>qa&&(n=-(p=180));X[0]=n;X[1]=p;t=null}function k(a,b){return 0>(b-=a)?b+360:b}function l(a,b){return a[0]-b[0]}function m(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var n,A,p,E,q,r,s,t,L,u,X,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e;v.lineStart=f;v.lineEnd=g;L=0;wc.polygonStart()},polygonEnd:function(){wc.polygonEnd();v.point=a;v.lineStart=c;v.lineEnd=d;0>Vd?(n=-(p=180),A=-(E=90)):L>qa?E=90:L<-qa&&(A=-90);X[0]=n;X[1]=
p}};return function(a){E=p=-(n=A=Infinity);u=[];B.geo.stream(a,v);if(a=u.length){u.sort(l);for(var b=1,c=u[0],d,e=[c];b<a;++b)d=u[b],m(d[0],c)||m(d[1],c)?(k(c[0],d[1])>k(c[0],c[1])&&(c[1]=d[1]),k(d[0],c[1])>k(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var f=-Infinity,g;a=e.length-1;b=0;for(c=e[a];b<=a;c=d,++b)d=e[b],(g=k(c[1],d[0]))>f&&(f=g,n=d[0],p=c[1])}u=X=null;return Infinity===n||Infinity===A?[[NaN,NaN],[NaN,NaN]]:[[n,A],[p,E]]}}();B.geo.centroid=function(a){Qe=qe=fd=gd=Uc=Dc=Ec=oc=Ed=Fd=Vc=0;B.geo.stream(a,
Lc);a=Ed;var b=Fd,c=Vc,d=a*a+b*b+c*c;return d<xg&&(a=Dc,b=Ec,c=oc,qe<qa&&(a=fd,b=gd,c=Uc),d=a*a+b*b+c*c,d<xg)?[NaN,NaN]:[Math.atan2(b,a)*$a,ga(c/Math.sqrt(d))*$a]};var Qe,qe,fd,gd,Uc,Dc,Ec,oc,Ed,Fd,Vc,Lc={sphere:c,point:db,lineStart:ta,lineEnd:Fa,polygonStart:function(){Lc.lineStart=ab},polygonEnd:function(){Lc.lineStart=ta}},qg=Za(la,function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();e=1},point:function(f,g){var k=0<f?ka:-ka,l=Math.abs(f-b);if(Math.abs(l-ka)<qa)a.point(b,
c=0<(c+g)/2?ka/2:-ka/2),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(k,c),a.point(f,c),e=0;else if(d!==k&&l>=ka){Math.abs(b-d)<qa&&(b-=d*qa);Math.abs(f-k)<qa&&(f-=k*qa);var l=b,m=c,n=f,A,p,E=Math.sin(l-n);c=Math.abs(E)>qa?Math.atan((Math.sin(m)*(p=Math.cos(g))*Math.sin(n)-Math.sin(g)*(A=Math.cos(m))*Math.sin(l))/(A*p*E)):(m+g)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(k,c);e=0}a.point(b=f,c=g);d=k},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-e}}},function(a,b,c,d){null==
a?(c=c*ka/2,d.point(-ka,c),d.point(0,c),d.point(ka,c),d.point(ka,0),d.point(ka,-c),d.point(0,-c),d.point(-ka,-c),d.point(-ka,0),d.point(-ka,c)):Math.abs(a[0]-b[0])>qa?(a=(a[0]<b[0]?1:-1)*ka,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},function(a){return Jb(eh,a)}),eh=[-ka,0],nf=1E9;(B.geo.conicEqualArea=function(){return Kb(Pb)}).raw=Pb;B.geo.albers=function(){return B.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};B.geo.albersUsa=
function(){function a(b){var c=b[0];b=b[1];e=null;(g(c,b),e)||(k(c,b),e)||l(c,b);return e}var b=B.geo.albers(),c=B.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=B.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(a,b){e=[a,b]}},g,k,l;a.invert=function(a){var e=b.scale(),f=b.translate(),g=(a[0]-f[0])/e,e=(a[1]-f[1])/e;return(0.12<=e&&0.234>e&&-0.425<=g&&-0.214>g?c:0.166<=e&&0.234>e&&-0.214<=g&&-0.115>g?d:b).invert(a)};a.stream=
function(a){var e=b.stream(a),f=c.stream(a),g=d.stream(a);return{point:function(a,b){e.point(a,b);f.point(a,b);g.point(a,b)},sphere:function(){e.sphere();f.sphere();g.sphere()},lineStart:function(){e.lineStart();f.lineStart();g.lineStart()},lineEnd:function(){e.lineEnd();f.lineEnd();g.lineEnd()},polygonStart:function(){e.polygonStart();f.polygonStart();g.polygonStart()},polygonEnd:function(){e.polygonEnd();f.polygonEnd();g.polygonEnd()}}};a.precision=function(e){if(!arguments.length)return b.precision();
b.precision(e);c.precision(e);d.precision(e);return a};a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(0.35*e);d.scale(e);return a.translate(b.translate())};a.translate=function(e){if(!arguments.length)return b.translate();var m=b.scale(),n=+e[0],A=+e[1];g=b.translate(e).clipExtent([[n-0.455*m,A-0.238*m],[n+0.455*m,A+0.238*m]]).stream(f).point;k=c.translate([n-0.307*m,A+0.201*m]).clipExtent([[n-0.425*m+qa,A+0.12*m+qa],[n-0.214*m-qa,A+0.234*m-qa]]).stream(f).point;l=d.translate([n-
0.205*m,A+0.212*m]).clipExtent([[n-0.214*m+qa,A+0.166*m+qa],[n-0.115*m-qa,A+0.234*m-qa]]).stream(f).point;return a};return a.scale(1070)};var xf,of,Gd={point:c,lineStart:c,lineEnd:c,polygonStart:function(){of=0;Gd.lineStart=pb},polygonEnd:function(){Gd.lineStart=Gd.lineEnd=Gd.point=c;xf+=Math.abs(of/2)}},yf,zf,Af,Bf,fh={point:function(a,b){a<yf&&(yf=a);a>Af&&(Af=a);b<zf&&(zf=b);b>Bf&&(Bf=b)},lineStart:c,lineEnd:c,polygonStart:c,polygonEnd:c},Mc={point:ia,lineStart:gb,lineEnd:qc,polygonStart:function(){Mc.lineStart=
Lb},polygonEnd:function(){Mc.point=ia;Mc.lineStart=gb;Mc.lineEnd=qc}};B.geo.path=function(){function a(b){b&&("function"===typeof c&&g.pointRadius(+c.apply(this,arguments)),k&&k.valid||(k=f(g)),B.geo.stream(b,k));return g.result()}function b(){k=null;return a}var c=4.5,d,e,f,g,k;a.area=function(a){xf=0;B.geo.stream(a,f(Gd));return xf};a.centroid=function(a){fd=gd=Uc=Dc=Ec=oc=Ed=Fd=Vc=0;B.geo.stream(a,f(Mc));return Vc?[Ed/Vc,Fd/Vc]:oc?[Dc/oc,Ec/oc]:Uc?[fd/Uc,gd/Uc]:[NaN,NaN]};a.bounds=function(a){Af=
Bf=-(yf=zf=Infinity);B.geo.stream(a,f(fh));return[[yf,zf],[Af,Bf]]};a.projection=function(a){if(!arguments.length)return d;f=(d=a)?a.stream||Cb(a):Ja;return b()};a.context=function(a){if(!arguments.length)return e;g=null==(e=a)?new Bb:new xb(a);"function"!==typeof c&&g.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;c="function"===typeof b?b:(g.pointRadius(+b),+b);return a};return a.projection(B.geo.albersUsa()).context(null)};B.geo.projection=cb;B.geo.projectionMutator=
Qa;(B.geo.equirectangular=function(){return cb(Oa)}).raw=Oa.invert=Oa;B.geo.rotation=function(a){function b(c){c=a(c[0]*pa,c[1]*pa);return c[0]*=$a,c[1]*=$a,c}a=fa(a[0]%360*pa,a[1]*pa,2<a.length?a[2]*pa:0);b.invert=function(b){b=a.invert(b[0]*pa,b[1]*pa);return b[0]*=$a,b[1]*=$a,b};return b};B.geo.circle=function(){function a(){var c="function"===typeof b?b.apply(this,arguments):b,d=fa(-c[0]*pa,-c[1]*pa,0).invert,f=[];e(null,null,1,{point:function(a,b){f.push(a=d(a,b));a[0]*=$a;a[1]*=$a}});return{type:"Polygon",
coordinates:[f]}}var b=[0,0],c,d=6,e;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;e=Sb((c=+b)*pa,d*pa);return a};a.precision=function(b){if(!arguments.length)return d;e=Sb(c*pa,(d=+b)*pa);return a};return a.angle(90)};B.geo.distance=function(a,b){var c=(b[0]-a[0])*pa,d=a[1]*pa,e=b[1]*pa,f=Math.sin(c),c=Math.cos(c),g=Math.sin(d),d=Math.cos(d),k=Math.sin(e),e=Math.cos(e),l;return Math.atan2(Math.sqrt((l=e*f)*l+(l=d*k-g*e*c)*l),g*
k+d*e*c)};B.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return B.range(Math.ceil(f/E)*E,e,E).map(t).concat(B.range(Math.ceil(m/q)*q,l,q).map(L)).concat(B.range(Math.ceil(d/n)*n,c,n).filter(function(a){return Math.abs(a%E)>qa}).map(r)).concat(B.range(Math.ceil(k/p)*p,g,p).filter(function(a){return Math.abs(a%q)>qa}).map(s))}var c,d,e,f,g,k,l,m,n=10,p=n,E=90,q=360,r,s,t,L,u=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[t(f).concat(L(l).slice(1),t(e).reverse().slice(1),L(m).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[f,m],[e,l]];f=+b[0][0];e=+b[1][0];m=+b[0][1];l=+b[1][1];f>e&&(b=f,f=e,e=b);m>l&&(b=m,m=l,l=b);return a.precision(u)};a.minorExtent=function(b){if(!arguments.length)return[[d,k],[c,g]];d=+b[0][0];c=+b[1][0];
k=+b[0][1];g=+b[1][1];d>c&&(b=d,d=c,c=b);k>g&&(b=k,k=g,g=b);return a.precision(u)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[E,q];E=+b[0];q=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[n,p];n=+b[0];p=+b[1];return a};a.precision=function(b){if(!arguments.length)return u;u=+b;r=Tb(k,g,90);s=A(d,c,u);t=Tb(m,l,90);L=A(f,e,u);return a};return a.majorExtent([[-180,-90+qa],[180,90-qa]]).minorExtent([[-180,
-80-qa],[180,80+qa]])};B.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var b=E,c,d=L,e;a.distance=function(){return B.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;b=d;c="function"===typeof d?null:d;return a};a.target=function(b){if(!arguments.length)return d;d=b;e="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?
a:0};return a};B.geo.interpolate=function(a,b){return X(a[0]*pa,a[1]*pa,b[0]*pa,b[1]*pa)};B.geo.length=function(a){Cf=0;B.geo.stream(a,se);return Cf};var Cf,se={sphere:c,point:c,lineStart:function(){function a(c,f){var g=Math.sin(f*=pa),k=Math.cos(f),l=Math.abs((c*=pa)-b),m=Math.cos(l);Cf+=Math.atan2(Math.sqrt((l=k*Math.sin(l))*l+(l=e*g-d*k*m)*l),d*g+e*k*m);b=c;d=g;e=k}var b,d,e;se.point=function(c,f){b=c*pa;d=Math.sin(f*=pa);e=Math.cos(f);se.point=a};se.lineEnd=function(){se.point=se.lineEnd=c}},
lineEnd:c,polygonStart:c,polygonEnd:c},zg=da(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(B.geo.azimuthalEqualArea=function(){return cb(zg)}).raw=zg;var Ag=da(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},Ja);(B.geo.azimuthalEquidistant=function(){return cb(Ag)}).raw=Ag;(B.geo.conicConformal=function(){return Kb(wa)}).raw=wa;(B.geo.conicEquidistant=function(){return Kb(Xc)}).raw=Xc;var Bg=da(function(a){return 1/a},Math.atan);(B.geo.gnomonic=function(){return cb(Bg)}).raw=
Bg;rc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-ka/2]};(B.geo.mercator=function(){return kd(rc)}).raw=rc;var Cg=da(function(){return 1},Math.asin);(B.geo.orthographic=function(){return cb(Cg)}).raw=Cg;var Dg=da(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(B.geo.stereographic=function(){return cb(Dg)}).raw=Dg;Yc.invert=function(a,b){var c=Math.atan2(na(a),Math.cos(b)),d=Math.sin(b),e;e=(Math.exp(a)+Math.exp(-a))/2;return[c,ga(d/e)]};(B.geo.transverseMercator=function(){return kd(Yc)}).raw=
Yc;B.geom={};B.svg={};B.svg.line=function(){return Id(Ja)};var Uf=B.map({linear:hb,"linear-closed":function(a){return hb(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);1<c&&e.push("H",d[0]);return e.join("")},"step-before":ld,"step-after":te,basis:Zd,"basis-open":function(a){if(4>a.length)return hb(a);for(var b=[],c=-1,d=a.length,e,f=[0],g=[0];3>++c;)e=a[c],f.push(e[0]),g.push(e[1]);b.push(Rb(Hd,f)+","+Rb(Hd,g));for(--c;++c<
d;)e=a[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),Wc(b,f,g);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,f,g=[],k=[];4>++c;)f=a[c%d],g.push(f[0]),k.push(f[1]);b=[Rb(Hd,g),",",Rb(Hd,k)];for(--c;++c<e;)f=a[c%d],g.shift(),g.push(f[0]),k.shift(),k.push(f[1]),Wc(b,g,k);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,k=-1,l,m;++k<=c;)l=a[k],m=k/c,l[0]=b*l[0]+(1-b)*(d+m*f),l[1]=b*l[1]+(1-b)*(e+m*g);return Zd(a)},
cardinal:function(a,b){return 3>a.length?hb(a):a[0]+Xd(a,Yd(a,b))},"cardinal-open":function(a,b){return 4>a.length?hb(a):a[1]+Xd(a.slice(1,a.length-1),Yd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?hb(a):a[0]+Xd((a.push(a[0]),a),Yd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=hb(a);else{var b=a[0],c=[],d,e,f,g;d=0;e=a.length-1;var k=[];f=a[1];for(g=k[0]=Nc(a[0],f);++d<e;)k[d]=(g+(g=Nc(f,f=a[d+1])))/2;k[d]=g;for(var l=-1,m=a.length-1;++l<m;)d=Nc(a[l],a[l+
1]),1E-6>Math.abs(d)?k[l]=k[l+1]=0:(e=k[l]/d,f=k[l+1]/d,g=e*e+f*f,9<g&&(g=3*d/Math.sqrt(g),k[l]=g*e,k[l+1]=g*f));for(l=-1;++l<=m;)g=(a[Math.min(m,l+1)][0]-a[Math.max(0,l-1)][0])/(6*(1+k[l]*k[l])),c.push([g||0,k[l]*g||0]);a=b+Xd(a,c)}return a}});Uf.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var rg=[0,2/3,1/3,0],sg=[0,1/3,2/3,0],Hd=[0,1/6,2/3,1/6];B.geom.hull=function(a){function b(a){if(3>a.length)return[];var e=ua(c),f=ua(d),g=a.length,k,l=g-1,m=[],n=[],A,p,E=0,q,r,s,t;if(e===Xb&&
d===Ib)k=a;else for(p=0,k=[];p<g;++p)k.push([+e.call(this,A=a[p],p),+f.call(this,A,p)]);for(p=1;p<g;++p)if(k[p][1]<k[E][1]||k[p][1]==k[E][1]&&k[p][0]<k[E][0])E=p;for(p=0;p<g;++p)p!==E&&(f=k[p][1]-k[E][1],e=k[p][0]-k[E][0],m.push({angle:Math.atan2(f,e),index:p}));m.sort(function(a,b){return a.angle-b.angle});t=m[0].angle;s=m[0].index;r=0;for(p=1;p<l;++p){g=m[p].index;if(t==m[p].angle)if(e=k[s][0]-k[E][0],f=k[s][1]-k[E][1],A=k[g][0]-k[E][0],q=k[g][1]-k[E][1],e*e+f*f>=A*A+q*q){m[p].index=-1;continue}else m[r].index=
-1;t=m[p].angle;r=p;s=g}n.push(E);for(g=p=0;2>p;++g)-1<m[g].index&&(n.push(m[g].index),p++);for(p=n.length;g<l;++g)if(!(0>m[g].index)){for(;!xc(n[p-2],n[p-1],m[g].index,k);)--p;n[p++]=m[g].index}k=[];for(p-=1;0<=p;--p)k.push(a[n[p]]);return k}var c=Xb,d=Ib;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};b.y=function(a){return arguments.length?(d=a,b):d};return b};B.geom.polygon=function(a){Ve(a,Df);return a};var Df=B.geom.polygon.prototype=[];Df.area=function(){for(var a=
-1,b=this.length,c,d=this[b-1],e=0;++a<b;)c=d,d=this[a],e+=c[1]*d[0]-c[0]*d[1];return 0.5*e};Df.centroid=function(a){var b=-1,c=this.length,d=0,e=0,f,g=this[c-1],k;for(arguments.length||(a=-1/(6*this.area()));++b<c;)f=g,g=this[b],k=f[0]*g[1]-g[0]*f[1],d+=(f[0]+g[0])*k,e+=(f[1]+g[1])*k;return[d*a,e*a]};Df.clip=function(a){for(var b,c=ae(a),d=-1,e=this.length-ae(this),f,g,k=this[e-1],l,m,n;++d<e;){b=a.slice();a.length=0;l=this[d];m=b[(g=b.length-c)-1];for(f=-1;++f<g;)n=b[f],ma(n,k,l)?(ma(m,k,l)||a.push($d(m,
n,k,l)),a.push(n)):ma(m,k,l)&&a.push($d(m,n,k,l)),m=n;c&&a.push(a[0]);k=l}return a};B.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];ec(a,function(c){b[c.region.l.index].push(a[c.region.r.index])});b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)});b.sort(function(a,b){return a.angle-b.angle});for(var k=0,l=b.length-1;k<l;k++)c.push([e,b[k],b[k+1]])});return c};B.geom.voronoi=function(a){function b(a){var f,g=a.map(function(){return[]}),
k=ua(c),l=ua(d),m,n,A=a.length;if(k===Xb&&l===Ib)f=a;else for(f=Array(A),n=0;n<A;++n)f[n]=[+k.call(this,m=a[n],n),+l.call(this,m,n)];ec(f,function(a){var b,c,d,e;1===a.a&&0<=a.b?(b=a.ep.r,c=a.ep.l):(b=a.ep.l,c=a.ep.r);1===a.a?(d=b?b.y:-1E6,b=a.c-a.b*d,e=c?c.y:1E6,c=a.c-a.b*e):(b=b?b.x:-1E6,d=a.c-a.a*b,c=c?c.x:1E6,e=a.c-a.a*c);b=[b,d];c=[c,e];g[a.region.l.index].push(b,c);g[a.region.r.index].push(b,c)});g=g.map(function(a,b){var c=f[b][0],d=f[b][1],e=a.map(function(a){return Math.atan2(a[0]-c,a[1]-
d)}),g=B.range(a.length).sort(function(a,b){return e[a]-e[b]});return g.filter(function(a,b){return!b||e[a]-e[g[b-1]]>qa}).map(function(b){return a[b]})});g.forEach(function(a,b){var c=a.length;if(!c)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<c)){var d=f[b],e=a[0],g=a[1],c=d[0],d=d[1],k=e[0],e=e[1],l=g[0],m=g[1],n=Math.abs(l-k),g=m-e;Math.abs(g)<qa?(c=d<e?-1E6:1E6,a.push([-1E6,c],[1E6,c])):n<qa?(c=c<k?-1E6:1E6,a.push([c,-1E6],[c,1E6])):(c=(l-k)*(e-d)<(k-c)*(m-e)?1E6:-1E6,d=
Math.abs(g)-n,Math.abs(d)<qa?a.push([0>g?c:-c,c]):(0<d&&(c*=-1),a.push([-1E6,c],[1E6,c])))}});if(e)for(n=0;n<A;++n)e.clip(g[n]);for(n=0;n<A;++n)g[n].point=a[n];return g}var c=Xb,d=Ib,e=null;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};b.y=function(a){return arguments.length?(d=a,b):d};b.clipExtent=function(a){if(!arguments.length)return e&&[e[0],e[2]];if(null==a)e=null;else{var c=+a[0][0],d=+a[0][1],f=+a[1][0],g=+a[1][1];e=B.geom.polygon([[c,d],[c,g],[f,g],[f,
d]])}return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):e&&e[2]};b.links=function(a){var b,e=a.map(function(){return[]}),f=[],g=ua(c),k=ua(d),l,m,n=a.length;if(g===Xb&&k===Ib)b=a;else for(b=Array(n),m=0;m<n;++m)b[m]=[+g.call(this,l=a[m],m),+k.call(this,l,m)];ec(b,function(b){var c=b.region.l.index;b=b.region.r.index;e[c][b]||(e[c][b]=e[b][c]=!0,f.push({source:a[c],target:a[b]}))});return f};b.triangles=function(a){if(c===Xb&&d===Ib)return B.geom.delaunay(a);for(var b=
Array(l),e=ua(c),f=ua(d),g,k=-1,l=a.length;++k<l;)(b[k]=[+e.call(this,g=a[k],k),+f.call(this,g,k)]).data=g;return B.geom.delaunay(b).map(function(a){return a.map(function(a){return a.data})})};return b};var Vf={l:"r",r:"l"};B.geom.quadtree=function(a,b,c,d,e){function f(a){function m(a,b,c,d,e,f,g,k){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var l=a.x,A=a.y;if(null!=l){if(!(0.01>Math.abs(l-c)+Math.abs(A-d))){var p=a.point;a.x=a.y=a.point=null;n(a,p,l,A,e,f,g,k)}n(a,b,c,d,e,f,g,k)}else a.x=c,a.y=d,a.point=
b}else n(a,b,c,d,e,f,g,k)}function n(a,b,c,d,e,f,g,k){var l=0.5*(e+g),A=0.5*(f+k),p=c>=l,E=d>=A,q=(E<<1)+p;a.leaf=!1;a=a.nodes[q]||(a.nodes[q]=id());p?e=l:g=l;E?f=A:k=A;m(a,b,c,d,e,f,g,k)}var A,p=ua(g),E=ua(k),q,r,s,t,L,u,X,v;if(null!=b)L=b,u=c,X=d,v=e;else if(X=v=-(L=u=Infinity),q=[],r=[],t=a.length,l)for(s=0;s<t;++s)A=a[s],A.x<L&&(L=A.x),A.y<u&&(u=A.y),A.x>X&&(X=A.x),A.y>v&&(v=A.y),q.push(A.x),r.push(A.y);else for(s=0;s<t;++s){var Ga=+p(A=a[s],s);A=+E(A,s);Ga<L&&(L=Ga);A<u&&(u=A);Ga>X&&(X=Ga);A>
v&&(v=A);q.push(Ga);r.push(A)}Ga=X-L;A=v-u;Ga>A?v=u+Ga:X=L+A;var x=id();x.add=function(a){m(x,a,+p(a,++s),+E(a,s),L,u,X,v)};x.visit=function(a){$b(a,x,L,u,X,v)};s=-1;if(null==b){for(;++s<t;)m(x,a[s],q[s],r[s],L,u,X,v);--s}else a.forEach(x.add);q=r=a=A=null;return x}var g=Xb,k=Ib,l;if(l=arguments.length)return g=ic,k=Jd,3===l&&(e=c,d=b,c=b=0),f(a);f.x=function(a){return arguments.length?(g=a,f):g};f.y=function(a){return arguments.length?(k=a,f):k};f.extent=function(a){if(!arguments.length)return null==
b?null:[[b,c],[d,e]];null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]);return f};f.size=function(a){if(!arguments.length)return null==b?null:[d-b,e-c];null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]);return f};return f};B.interpolateRgb=jd;B.interpolateObject=ue;B.interpolateNumber=pc;B.interpolateString=Ke;var pf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;B.interpolate=cd;B.interpolators=[function(a,b){var c=typeof b;return("string"===c?hf.has(b)||/^(#|rgb\(|hsl\()/.test(b)?jd:Ke:
b instanceof N?jd:"object"===c?Array.isArray(b)?Td:ue:pc)(a,b)}];B.interpolateArray=Td;var Eg=function(){return Ja},gh=B.map({linear:Eg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Lf},cubic:function(){return Nd},sin:function(){return cf},exp:function(){return Od},circle:function(){return Ze},elastic:function(a,b){var c;2>arguments.length&&(b=0.45);arguments.length?c=b/(2*ka)*Math.asin(1/a):(a=1,c=b/4);return function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*
(d-c)*ka/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return Aa}}),hh=B.map({"in":Ja,out:Me,"in-out":Le,"out-in":function(a){return Le(Me(a))}});B.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",c=gh.get(c)||Eg,b=hh.get(b)||Ja;return me(b(c.apply(null,Array.prototype.slice.call(arguments,1))))};B.interpolateHcl=function(a,b){a=B.hcl(a);b=B.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,k=b.l-e;isNaN(g)&&
(g=0,d=isNaN(d)?b.c:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return ja(c+f*a,d+g*a,e+k*a)+""}};B.interpolateHsl=function(a,b){a=B.hsl(a);b=B.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,k=b.l-e;isNaN(g)&&(g=0,d=isNaN(d)?b.s:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return aa(c+f*a,d+g*a,e+k*a)+""}};B.interpolateLab=function(a,b){a=B.lab(a);b=B.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,k=b.b-e;return function(a){return Ha(c+
f*a,d+g*a,e+k*a)+""}};B.interpolateRound=Bc;B.transform=function(a){var b=zc.createElementNS(B.ns.prefix.svg,"g");return(B.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Qb(c?c.matrix:ih)})(a)};Qb.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ih={a:1,b:0,c:0,d:1,e:0,f:0};B.interpolateTransform=vc;B.layout={};B.layout.bundle=function(){return function(a){for(var b=
[],c=-1,d=a.length;++c<d;)b.push(yd(a[c]));return b}};B.layout.chord=function(){function a(){var c={},A=[],p=B.range(g),E=[],q,r,s,t,L;d=[];e=[];q=0;for(t=-1;++t<g;){r=0;for(L=-1;++L<g;)r+=f[t][L];A.push(r);E.push(B.range(g));q+=r}l&&p.sort(function(a,b){return l(A[a],A[b])});m&&E.forEach(function(a,b){a.sort(function(a,c){return m(f[b][a],f[b][c])})});q=(2*ka-k*g)/q;r=0;for(t=-1;++t<g;){s=r;for(L=-1;++L<g;){var u=p[t],X=E[u][L],v=f[u][X],x=r,da=r+=v*q;c[u+"-"+X]={index:u,subindex:X,startAngle:x,
endAngle:da,value:v}}e[u]={index:u,startAngle:s,endAngle:r,value:(r-s)/q};r+=k}for(t=-1;++t<g;)for(L=t-1;++L<g;)p=c[t+"-"+L],E=c[L+"-"+t],(p.value||E.value)&&d.push(p.value<E.value?{source:E,target:p}:{source:p,target:E});n&&b()}function b(){d.sort(function(a,b){return n((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,e,f,g,k=0,l,m,n;c.matrix=function(a){if(!arguments.length)return f;g=(f=a)&&f.length;d=e=null;return c};c.padding=function(a){if(!arguments.length)return k;
k=a;d=e=null;return c};c.sortGroups=function(a){if(!arguments.length)return l;l=a;d=e=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return m;m=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return n;n=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){e||a();return e};return c};B.layout.force=function(){function a(b){return function(a,c,d,e){if(a.point!==b){d=a.cx-b.x;var f=a.cy-b.y,g=1/Math.sqrt(d*d+f*f);if((e-c)*g<p)return c=a.charge*
g*g,b.px-=d*c,b.py-=f*c,!0;a.point&&isFinite(g)&&(c=a.pointCharge*g*g,b.px-=d*c,b.py-=f*c)}return!a.charge}}function b(a){a.px=B.event.x;a.py=B.event.y;c.resume()}var c={},d=B.dispatch("start","tick","end"),e=[1,1],f,g,k=0.9,l=jh,m=kh,n=-30,A=0.1,p=0.8,E=[],q=[],r,s,t;c.tick=function(){if(0.005>(g*=0.99))return d.end({type:"end",alpha:g=0}),!0;var b=E.length,c=q.length,f,l,m,p,L,u,X;for(f=0;f<c;++f)if(l=q[f],m=l.source,p=l.target,u=p.x-m.x,X=p.y-m.y,L=u*u+X*X)L=g*s[f]*((L=Math.sqrt(L))-r[f])/L,u*=
L,X*=L,p.x-=u*(L=m.weight/(p.weight+m.weight)),p.y-=X*L,m.x+=u*(L=1-L),m.y+=X*L;if(L=g*A)if(u=e[0]/2,X=e[1]/2,f=-1,L)for(;++f<b;)l=E[f],l.x+=(u-l.x)*L,l.y+=(X-l.y)*L;if(n)for(Cc(c=B.geom.quadtree(E),g,t),f=-1;++f<b;)(l=E[f]).fixed||c.visit(a(l));for(f=-1;++f<b;)l=E[f],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*k,l.y-=(l.py-(l.py=l.y))*k);d.tick({type:"tick",alpha:g})};c.nodes=function(a){if(!arguments.length)return E;E=a;return c};c.links=function(a){if(!arguments.length)return q;q=a;return c};
c.size=function(a){if(!arguments.length)return e;e=a;return c};c.linkDistance=function(a){if(!arguments.length)return l;l="function"===typeof a?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return m;m="function"===typeof a?a:+a;return c};c.friction=function(a){if(!arguments.length)return k;k=+a;return c};c.charge=function(a){if(!arguments.length)return n;n="function"===typeof a?a:+a;return c};c.gravity=function(a){if(!arguments.length)return A;A=+a;return c};
c.theta=function(a){if(!arguments.length)return p;p=+a;return c};c.alpha=function(a){if(!arguments.length)return g;a=+a;g?g=0<a?a:0:0<a&&(d.start({type:"start",alpha:g=a}),B.timer(c.tick));return c};c.start=function(){function a(c,e){var k;if(!p){p=[];for(d=0;d<f;++d)p[d]=[];for(d=0;d<g;++d)k=q[d],p[k.source.index].push(k.target),p[k.target.index].push(k.source)}k=p[b];for(var l=-1,m=k.length,n;++l<m;)if(!isNaN(n=k[l][c]))return n;return Math.random()*e}var b,d,f=E.length,g=q.length,k=e[0],A=e[1],
p,L;for(b=0;b<f;++b)(L=E[b]).index=b,L.weight=0;for(b=0;b<g;++b)L=q[b],"number"==typeof L.source&&(L.source=E[L.source]),"number"==typeof L.target&&(L.target=E[L.target]),++L.source.weight,++L.target.weight;for(b=0;b<f;++b)L=E[b],isNaN(L.x)&&(L.x=a("x",k)),isNaN(L.y)&&(L.y=a("y",A)),isNaN(L.px)&&(L.px=L.x),isNaN(L.py)&&(L.py=L.y);r=[];if("function"===typeof l)for(b=0;b<g;++b)r[b]=+l.call(this,q[b],b);else for(b=0;b<g;++b)r[b]=l;s=[];if("function"===typeof m)for(b=0;b<g;++b)s[b]=+m.call(this,q[b],
b);else for(b=0;b<g;++b)s[b]=m;t=[];if("function"===typeof n)for(b=0;b<f;++b)t[b]=+n.call(this,E[b],b);else for(b=0;b<f;++b)t[b]=n;return c.resume()};c.resume=function(){return c.alpha(0.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){f||(f=B.behavior.drag().origin(Ja).on("dragstart.force",rd).on("drag.force",b).on("dragend.force",$e));if(!arguments.length)return f;this.on("mouseover.force",bc).on("mouseout.force",Ye).call(f)};return B.rebind(c,d,"on")};var jh=20,kh=1;B.layout.hierarchy=
function(){function a(b,g,k){var l=e.call(c,b,g);b.depth=g;k.push(b);if(l&&(n=l.length)){var m=-1,n,A=b.children=[],p=0;g+=1;for(var E;++m<n;)E=a(l[m],g,k),E.parent=b,A.push(E),p+=E.value;d&&A.sort(d);f&&(b.value=p)}else f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,g=0;if(e&&(l=e.length))for(var k=-1,l,m=d+1;++k<l;)g+=b(e[k],m);else f&&(g=+f.call(c,a,d)||0);f&&(a.value=g);return g}function c(b){var d=[];a(b,0,d);return d}var d=tc,e=je,f=Xe;c.sort=function(a){if(!arguments.length)return d;
d=a;return c};c.children=function(a){if(!arguments.length)return e;e=a;return c};c.value=function(a){if(!arguments.length)return f;f=a;return c};c.revalue=function(a){b(a,0);return a};return c};B.layout.partition=function(){function a(b,c,d,e){var f=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(f&&(k=f.length)){var g=-1,k,l;for(d=b.value?d/b.value:0;++g<k;)a(l=f[g],c,b=l.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}
function c(f,g){var k=d.call(this,f,g);a(k[0],0,e[0],e[1]/b(k[0]));return k}var d=B.layout.hierarchy(),e=[1,1];c.size=function(a){if(!arguments.length)return e;e=a;return c};return zd(c,d)};B.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),k=+("function"===typeof d?d.apply(this,arguments):d),l=(("function"===typeof e?e.apply(this,arguments):e)-k)/B.sum(g),m=B.range(f.length);null!=c&&m.sort(c===Fg?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});
var n=[];m.forEach(function(a){var b;n[a]={data:f[a],value:b=g[a],startAngle:k,endAngle:k+=b*l}});return n}var b=Number,c=Fg,d=0,e=2*ka;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return e;e=b;return a};return a};var Fg={};B.layout.stack=function(){function a(k,l){var m=k.map(function(c,d){return b.call(a,
c,d)}),n=m.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),A=c.call(a,n,l),m=B.permute(m,A),n=B.permute(n,A),A=d.call(a,n,l),p=m.length,E=m[0].length,q,r,s;for(r=0;r<E;++r)for(e.call(a,m[0][r],s=A[r],n[0][r][1]),q=1;q<p;++q)e.call(a,m[q][r],s+=n[q-1][r][1],n[q][r][1]);return k}var b=Ja,c=lc,d=de,e=ce,f=df,g=oa;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c="function"===typeof b?b:lh.get(b)||lc;
return a};a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:mh.get(b)||de;return a};a.x=function(b){if(!arguments.length)return f;f=b;return a};a.y=function(b){if(!arguments.length)return g;g=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var lh=B.map({"inside-out":function(a){var b=a.length,c,d=a.map(nb),e=a.map(le),f=B.range(b).sort(function(a,b){return d[a]-d[b]}),g=0,k=0,l=[],m=[];for(a=0;a<b;++a)c=f[a],g<k?(g+=e[c],l.push(c)):(k+=
e[c],m.push(c));return m.reverse().concat(l)},reverse:function(a){return B.range(a.length).reverse()},"default":lc}),mh=B.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],e=0,f,g,k,l=[];for(g=0;g<c;++g){for(k=f=0;f<b;f++)k+=a[f][g][1];k>e&&(e=k);d.push(k)}for(g=0;g<c;++g)l[g]=(e-d[g])/2;return l},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,f,g,k,l,m,n,A,p,E=[];E[0]=A=p=0;for(f=1;f<d;++f){for(k=e=0;e<b;++e)k+=a[e][f][1];l=e=0;for(n=c[f][0]-c[f-1][0];e<b;++e){g=0;for(m=(a[e][f][1]-
a[e][f-1][1])/(2*n);g<e;++g)m+=(a[g][f][1]-a[g][f-1][1])/n;l+=m*a[e][f][1]}E[f]=A-=k?l/k*n:0;A<p&&(p=A)}for(f=0;f<d;++f)E[f]-=p;return E},expand:function(a){var b=a.length,c=a[0].length,d=1/b,e,f,g,k=[];for(f=0;f<c;++f){for(g=e=0;e<b;e++)g+=a[e][f][1];if(g)for(e=0;e<b;e++)a[e][f][1]/=g;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)k[f]=0;return k},zero:de});B.layout.histogram=function(){function a(f,g){var k=[],l=f.map(c,this),m=d.call(this,l,g),n=e.call(this,m,l,g),A;g=-1;for(var p=l.length,
E=n.length-1,q=b?1:1/p;++g<E;)A=k[g]=[],A.dx=n[g+1]-(A.x=n[g]),A.y=0;if(0<E)for(g=-1;++g<p;)A=l[g],A>=m[0]&&A<=m[1]&&(A=k[B.bisect(n,A,1,E)-1],A.y+=q,A.push(f[g]));return k}var b=!0,c=Number,d=Ae,e=Md;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=ua(b);return a};a.bins=function(b){if(!arguments.length)return e;e="number"===typeof b?function(a){return We(a,b)}:ua(b);return a};a.frequency=function(c){if(!arguments.length)return b;
b=!!c;return a};return a};B.layout.tree=function(){function a(f,g){function k(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,g=d[0],l,m=g,n,A=-1;++A<f;){n=d[A];k(n,l);var p=n;if(l){for(var E=p,q=p,r=p.parent.children[0],s=E._tree.mod,t=q._tree.mod,L=l._tree.mod,u=r._tree.mod,X=void 0;l=td(l),E=sd(E),l&&E;){r=sd(r);q=td(q);q._tree.ancestor=p;X=l._tree.prelim+L-E._tree.prelim-s+c(l,E);if(0<X){var v=l._tree.ancestor.parent==p.parent?l._tree.ancestor:m,x=p,da=X,v=v._tree,x=x._tree,y=da/
(x.number-v.number);v.change+=y;x.change-=y;x.shift+=da;x.prelim+=da;x.mod+=da;s+=X;t+=X}L+=l._tree.mod;s+=E._tree.mod;u+=r._tree.mod;t+=q._tree.mod}l&&!td(q)&&(q._tree.thread=l,q._tree.mod+=L-t);E&&!sd(r)&&(r._tree.thread=E,r._tree.mod+=s-u,m=p)}l=n}f=d=0;A=a.children;for(p=A.length;0<=--p;)m=A[p]._tree,m.prelim+=d,m.mod+=d,d+=m.shift+(f+=m.change);g=0.5*(g._tree.prelim+n._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-g):e.prelim=g}else b&&(e.prelim=b._tree.prelim+c(a,b))}function l(a,
b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(e=c.length)){var d=-1,e;for(b+=a._tree.mod;++d<e;)l(c[d],b)}}var m=b.call(this,f,g),n=m[0];uc(n,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});k(n);l(n,-n._tree.prelim);var A=Ud(n,Be),p=Ud(n,Nf),E=Ud(n,Ne),q=A.x-c(A,p)/2,r=p.x+c(p,A)/2,s=E.depth||1;uc(n,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-q)/(r-q)*d[0];a.y=a.depth/s*d[1];delete a._tree});return m}var b=B.layout.hierarchy().sort(null).value(null),
c=ee,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return zd(a,b)};B.layout.pack=function(){function a(f,g){var k=b.call(this,f,g),l=k[0],m=d[0],n=d[1],A=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};l.x=l.y=0;uc(l,function(a){a.r=+A(a.value)});uc(l,gc);if(c){var p=c*(e?1:Math.max(2*
l.r/m,2*l.r/n))/2;uc(l,function(a){a.r+=p});uc(l,gc);uc(l,function(a){a.r-=p})}ef(l,m/2,n/2,e?1:1/Math.max(2*l.r/m,2*l.r/n));return k}var b=B.layout.hierarchy().sort(af),c=0,d=[1,1],e;a.size=function(b){if(!arguments.length)return d;d=b;return a};a.radius=function(b){if(!arguments.length)return e;e=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return zd(a,b)};B.layout.cluster=function(){function a(f,g){var k=b.call(this,f,g),l=k[0],
m,n=0;uc(l,function(a){var b=a.children;b&&b.length?(a.x=ze(b),a.y=Ge(b)):(a.x=m?n+=c(a,m):0,a.y=0,m=a)});var A=Se(l),p=Te(l),E=A.x-c(A,p)/2,q=p.x+c(p,A)/2;uc(l,e?function(a){a.x=(a.x-l.x)*d[0];a.y=(l.y-a.y)*d[1]}:function(a){a.x=(a.x-E)/(q-E)*d[0];a.y=(1-(l.y?a.y/l.y:1))*d[1]});return k}var b=B.layout.hierarchy().sort(null).value(null),c=ee,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};
a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return zd(a,b)};B.layout.treemap=function(){function a(b,c){for(var d=-1,e=b.length,f,g;++d<e;)g=(f=b[d]).value*(0>c?0:c),f.area=isNaN(g)||0>=g?0:g}function b(c){var e=c.children;if(e&&e.length){var f=m(c),g=[],k=e.slice(),l=Infinity,n,A="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?c.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);a(k,f.dx*f.dy/c.value);for(g.area=0;0<(c=k.length);){g.push(c=k[c-1]);g.area+=c.area;if(!(c=
"squarify"!==p)){n=A;c=g.area;for(var q=void 0,r=0,s=Infinity,t=-1,L=g.length;++t<L;)if(q=g[t].area)q<s&&(s=q),q>r&&(r=q);c*=c;n*=n;c=(n=c?Math.max(n*r*E/c,c/(n*s*E)):Infinity)<=l}c?(k.pop(),l=n):(g.area-=g.pop().area,d(g,A,f,!1),A=Math.min(f.dx,f.dy),g.length=g.area=0,l=Infinity)}g.length&&(d(g,A,f,!0),g.length=g.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=m(b),g=e.slice(),k=[];a(g,f.dx*f.dy/b.value);for(k.area=0;b=g.pop();)k.push(b),k.area+=b.area,null!=b.z&&(d(k,
b.z?f.dx:f.dy,f,!g.length),k.length=k.area=0);e.forEach(c)}}function d(a,b,c,e){var f=-1,k=a.length,l=c.x,m=c.y,n=b?g(a.area/b):0,A;if(b==c.dx){if(e||n>c.dy)n=c.dy;for(;++f<k;)A=a[f],A.x=l,A.y=m,A.dy=n,l+=A.dx=Math.min(c.x+c.dx-l,n?g(A.area/n):0);A.z=!0;A.dx+=c.x+c.dx-l;c.y+=n;c.dy-=n}else{if(e||n>c.dx)n=c.dx;for(;++f<k;)A=a[f],A.x=l,A.y=m,A.dx=n,m+=A.dy=Math.min(c.y+c.dy-m,n?g(A.area/n):0);A.z=!1;A.dy+=c.y+c.dy-m;c.x+=n;c.dx-=n}}function e(d){d=A||f(d);var g=d[0];g.x=0;g.y=0;g.dx=k[0];g.dy=k[1];
A&&f.revalue(g);a([g],g.dx*g.dy/g.value);(A?c:b)(g);n&&(A=d);return d}var f=B.layout.hierarchy(),g=Math.round,k=[1,1],l=null,m=Ce,n=!1,A,p="squarify",E=0.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return k;k=a;return e};e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==d?Ce(c):od(c,"number"===typeof d?[d,d,d,d]:d)}function c(b){return od(b,a)}if(!arguments.length)return l;var d;m=null==(l=a)?Ce:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return e};
e.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return e};e.sticky=function(a){if(!arguments.length)return n;n=a;A=null;return e};e.ratio=function(a){if(!arguments.length)return E;E=a;return e};e.mode=function(a){if(!arguments.length)return p;p=a+"";return e};return zd(e,f)};B.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*
Math.log(d)/d)}},logNormal:function(){var a=B.random.normal.apply(B,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b/a}}};B.scale={};var Yg={floor:Ja,ceil:Ja};B.scale.linear=function(){return Je([0,1],[0,1],cd,!1)};B.scale.log=function(){return Pd(B.scale.linear().domain([0,1]),10,!0,[1,10])};var ug=B.format(".0e"),Zg={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};B.scale.pow=
function(){return Fe(B.scale.linear(),1,[0,1])};B.scale.sqrt=function(){return B.scale.pow().exponent(0.5)};B.scale.ordinal=function(){return nc([],{t:"range",a:[[]]})};B.scale.category10=function(){return B.scale.ordinal().range(nh)};B.scale.category20=function(){return B.scale.ordinal().range(oh)};B.scale.category20b=function(){return B.scale.ordinal().range(ph)};B.scale.category20c=function(){return B.scale.ordinal().range(qh)};var nh=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,
8355711,12369186,1556175].map(Da),oh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Da),ph=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Da),qh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,
13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Da);B.scale.quantile=function(){return Ie([],[])};B.scale.quantize=function(){return ge(0,1,[0,1])};B.scale.threshold=function(){return he([0.5],[0,1])};B.scale.identity=function(){return ie([0,1])};B.svg.arc=function(){function a(){var f=b.apply(this,arguments),g=c.apply(this,arguments),k=d.apply(this,arguments)+Wd,l=e.apply(this,arguments)+Wd,m=(l<k&&(m=k,k=l,l=m),l-k),n=m<ka?"0":"1",A=Math.cos(k),k=Math.sin(k),p=
Math.cos(l),l=Math.sin(l);return m>=rh?f?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":f?"M"+g*A+","+g*k+"A"+g+","+g+" 0 "+n+",1 "+g*p+","+g*l+"L"+f*p+","+f*l+"A"+f+","+f+" 0 "+n+",0 "+f*A+","+f*k+"Z":"M"+g*A+","+g*k+"A"+g+","+g+" 0 "+n+",1 "+g*p+","+g*l+"L0,0Z"}var b=nd,c=we,d=xe,e=Oe;a.innerRadius=function(c){if(!arguments.length)return b;b=ua(c);return a};
a.outerRadius=function(b){if(!arguments.length)return c;c=ua(b);return a};a.startAngle=function(b){if(!arguments.length)return d;d=ua(b);return a};a.endAngle=function(b){if(!arguments.length)return e;e=ua(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+Wd;return[Math.cos(f)*a,Math.sin(f)*a]};return a};var Wd=-ka/2,rh=2*ka-1E-6;B.svg.line.radial=function(){var a=Id(Bd);a.radius=a.x;delete a.x;a.angle=
a.y;delete a.y;return a};ld.reverse=te;te.reverse=ld;B.svg.area=function(){return Cd(Ja)};B.svg.area.radial=function(){var a=Cd(Bd);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};B.svg.chord=function(){function a(f,g){var k=b(this,d,f,g),l=b(this,e,f,g);return"M"+k.p0+c(k.r,k.p1,k.a1-k.a0)+(k.a0==l.a0&&k.a1==l.a1?"Q 0,0 "+k.p0:"Q 0,0 "+l.p0+c(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+
k.p0))+"Z"}function b(a,c,d,e){var l=c.call(a,d,e);c=f.call(a,l,e);d=g.call(a,l,e)+Wd;a=k.call(a,l,e)+Wd;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>ka)+",1 "+b}var d=E,e=L,f=ye,g=xe,k=Oe;a.radius=function(b){if(!arguments.length)return f;f=ua(b);return a};a.source=function(b){if(!arguments.length)return d;d=ua(b);return a};a.target=function(b){if(!arguments.length)return e;e=ua(b);return a};a.startAngle=function(b){if(!arguments.length)return g;
g=ua(b);return a};a.endAngle=function(b){if(!arguments.length)return k;k=ua(b);return a};return a};B.svg.diagonal=function(){function a(e,f){var g=b.call(this,e,f),k=c.call(this,e,f),l=(g.y+k.y)/2,g=[g,{x:g.x,y:l},{x:k.x,y:l},k],g=g.map(d);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=E,c=L,d=Ad;a.source=function(c){if(!arguments.length)return b;b=ua(c);return a};a.target=function(b){if(!arguments.length)return c;c=ua(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};
return a};B.svg.diagonal.radial=function(){var a=B.svg.diagonal(),b=Ad,c=a.projection;a.projection=function(a){return arguments.length?c(He(b=a)):b};return a};B.svg.symbol=function(){function a(d,e){return(Gg.get(b.call(this,d,e))||dd)(c.call(this,d,e))}var b=ke,c=Gc;a.type=function(c){if(!arguments.length)return b;b=ua(c);return a};a.size=function(b){if(!arguments.length)return c;c=ua(b);return a};return a};var Gg=B.map({circle:dd,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+
"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Hg));var b=a*Hg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Ef);var b=a*Ef/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Ef);var b=a*Ef/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});B.svg.symbolTypes=
Gg.keys();var Ef=Math.sqrt(3),Hg=Math.tan(30*pa),yb=[],vg=0,Re,rf;yb.call=Ma.call;yb.empty=Ma.empty;yb.node=Ma.node;yb.size=Ma.size;B.transition=function(a){return arguments.length?Re?a.transition():a:kg.transition()};B.transition.prototype=yb;yb.select=function(a){var b=this.id,c=[],d,e,f;a=t(a);for(var g=-1,k=this.length;++g<k;){c.push(d=[]);for(var l=this[g],m=-1,n=l.length;++m<n;)(f=l[m])&&(e=a.call(f,f.__data__,m,g))?("__data__"in f&&(e.__data__=f.__data__),Mb(e,m,b,f.__transition__[b]),d.push(e)):
d.push(null)}return xd(c,b)};yb.selectAll=function(a){var b=this.id,c=[],d,e,f,g;a=v(a);for(var k=-1,l=this.length;++k<l;)for(var m=this[k],n=-1,A=m.length;++n<A;)if(d=m[n]){g=d.__transition__[b];e=a.call(d,d.__data__,n,k);c.push(d=[]);for(var p=-1,E=e.length;++p<E;)(f=e[p])&&Mb(f,p,b,g),d.push(f)}return xd(c,b)};yb.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=I(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);d=this[f];for(var k=0,l=d.length;k<l;k++)(e=d[k])&&a.call(e,e.__data__,
k)&&c.push(e)}return xd(b,this.id)};yb.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):K(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};yb.attr=function(a,b){function c(){this.removeAttribute(k)}function d(){this.removeAttributeNS(k.space,k.local)}function e(a){return null==a?c:(a+="",function(){var b=this.getAttribute(k),c;return b!==a&&(c=g(b,a),function(a){this.setAttribute(k,
c(a))})})}function f(a){return null==a?d:(a+="",function(){var b=this.getAttributeNS(k.space,k.local),c;return b!==a&&(c=g(b,a),function(a){this.setAttributeNS(k.space,k.local,c(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?vc:cd,k=B.ns.qualify(a);return Sd(this,"attr."+a,b,k.local?f:e)};yb.attrTween=function(a,b){function c(a,d){var f=b.call(this,a,d,this.getAttribute(e));return f&&function(a){this.setAttribute(e,f(a))}}function d(a,c){var f=b.call(this,
a,c,this.getAttributeNS(e.space,e.local));return f&&function(a){this.setAttributeNS(e.space,e.local,f(a))}}var e=B.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};yb.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!==typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Sd(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d=Ub.getComputedStyle(this,null).getPropertyValue(a),e;return d!==b&&
(e=cd(d,b),function(b){this.style.setProperty(a,e(b),c)})})})};yb.styleTween=function(a,b,c){3>arguments.length&&(c="");return this.tween("style."+a,function(d,e){var f=b.call(this,d,e,Ub.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};yb.text=function(a){return Sd(this,"text",a,Qf)};yb.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};yb.ease=function(a){var b=
this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==typeof a&&(a=B.ease.apply(B,arguments));return K(this,function(c){c.__transition__[b].ease=a})};yb.delay=function(a){var b=this.id;return K(this,"function"===typeof a?function(c,d,e){c.__transition__[b].delay=a.call(c,c.__data__,d,e)|0}:(a|=0,function(c){c.__transition__[b].delay=a}))};yb.duration=function(a){var b=this.id;return K(this,"function"===typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,
a.call(c,c.__data__,d,e)|0)}:(a=Math.max(1,a|0),function(c){c.__transition__[b].duration=a}))};yb.each=function(a,b){var c=this.id;if(2>arguments.length){var d=rf,e=Re;Re=c;K(this,function(b,d,e){rf=b.__transition__[c];a.call(b,b.__data__,d,e)});rf=d;Re=e}else K(this,function(d){d=d.__transition__[c];(d.event||(d.event=B.dispatch("start","end"))).on(a,b)});return this};yb.transition=function(){for(var a=this.id,b=++vg,c=[],d,e,f,g,k=0,l=this.length;k<l;k++){c.push(d=[]);e=this[k];for(var m=0,n=e.length;m<
n;m++){if(f=e[m])g=Object.create(f.__transition__[a]),g.delay+=g.duration,Mb(f,m,b,g);d.push(f)}}return xd(c,b)};B.svg.axis=function(){function a(A){A.each(function(){var a=B.select(this),A=null==l?b.ticks?b.ticks.apply(b,k):b.domain():l,p=null==m?b.tickFormat?b.tickFormat.apply(b,k):String:m,E=Qc(b,A,n),q=a.selectAll(".tick.minor").data(E,String),E=q.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),r=B.transition(q.exit()).style("opacity",1E-6).remove(),q=B.transition(q).style("opacity",
1),s=a.selectAll(".tick.major").data(A,String),A=s.enter().insert("g",".domain").attr("class","tick major").style("opacity",1E-6),t=B.transition(s.exit()).style("opacity",1E-6).remove(),L=B.transition(s).style("opacity",1),u,X=Hc(b),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),B.transition(a)),v=b.copy(),x=this.__chart__||v;this.__chart__=v;A.append("line");A.append("text");var da=A.select("line"),y=L.select("line"),p=s.select("text").text(p),s=A.select("text"),
z=L.select("text");switch(c){case "bottom":u=ff;E.attr("y2",e);q.attr("x2",0).attr("y2",e);da.attr("y2",d);s.attr("y",Math.max(d,0)+g);y.attr("x2",0).attr("y2",d);z.attr("x",0).attr("y",Math.max(d,0)+g);p.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+X[0]+","+f+"V0H"+X[1]+"V"+f);break;case "top":u=ff;E.attr("y2",-e);q.attr("x2",0).attr("y2",-e);da.attr("y2",-d);s.attr("y",-(Math.max(d,0)+g));y.attr("x2",0).attr("y2",-d);z.attr("x",0).attr("y",-(Math.max(d,0)+g));p.attr("dy","0em").style("text-anchor",
"middle");a.attr("d","M"+X[0]+","+-f+"V0H"+X[1]+"V"+-f);break;case "left":u=Dd;E.attr("x2",-e);q.attr("x2",-e).attr("y2",0);da.attr("x2",-d);s.attr("x",-(Math.max(d,0)+g));y.attr("x2",-d).attr("y2",0);z.attr("x",-(Math.max(d,0)+g)).attr("y",0);p.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-f+","+X[0]+"H0V"+X[1]+"H"+-f);break;case "right":u=Dd,E.attr("x2",e),q.attr("x2",e).attr("y2",0),da.attr("x2",d),s.attr("x",Math.max(d,0)+g),y.attr("x2",d).attr("y2",0),z.attr("x",Math.max(d,0)+
g).attr("y",0),p.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+f+","+X[0]+"H0V"+X[1]+"H"+f)}if(b.rangeBand){var wa=v.rangeBand()/2,E=function(a){return v(a)+wa};A.call(u,E);L.call(u,E)}else A.call(u,x),L.call(u,v),t.call(u,v),E.call(u,x),q.call(u,v),r.call(u,v)})}var b=B.scale.linear(),c=Ig,d=6,e=6,f=6,g=3,k=[10],l=null,m,n=0;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b in sh?b+"":Ig;return a};a.ticks=function(){if(!arguments.length)return k;
k=arguments;return a};a.tickValues=function(b){if(!arguments.length)return l;l=b;return a};a.tickFormat=function(b){if(!arguments.length)return m;m=b;return a};a.tickSize=function(b,c){if(!arguments.length)return d;var g=arguments.length-1;d=+b;e=1<g?+c:d;f=0<g?+arguments[g]:d;return a};a.tickPadding=function(b){if(!arguments.length)return g;g=+b;return a};a.tickSubdivide=function(b){if(!arguments.length)return n;n=+b;return a};return a};var Ig="bottom",sh={top:1,right:1,bottom:1,left:1};B.svg.brush=
function(){function b(a){a.each(function(){var a=B.select(this),g=a.selectAll(".background").data([0]),n=a.selectAll(".extent").data([0]),A=a.selectAll(".resize").data(m,String);a.style("pointer-events","all").on("mousedown.brush",f).on("touchstart.brush",f);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");n.enter().append("rect").attr("class","extent").style("cursor","move");A.enter().append("g").attr("class",function(a){return"resize "+
a}).style("cursor",function(a){return th[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");A.style("display",b.empty()?"none":null);A.exit().remove();k&&(n=Hc(k),g.attr("x",n[0]).attr("width",n[1]-n[0]),d(a));l&&(n=Hc(l),g.attr("y",n[0]).attr("height",n[1]-n[0]),e(a));c(a)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+n[+/e$/.test(a)][0]+
","+n[+/^s/.test(a)][1]+")"})}function d(a){a.select(".extent").attr("x",n[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1][0]-n[0][0])}function e(a){a.select(".extent").attr("y",n[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",n[1][1]-n[0][1])}function f(){function a(){var b=B.event.changedTouches;return b?B.touches(s,b)[0]:B.mouse(s)}function m(){var b=a(),f=!1;C&&(b[0]+=C[0],b[1]+=C[1]);da||(B.event.altKey?(z||(z=[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),wa[0]=n[+(b[0]<
z[0])][0],wa[1]=n[+(b[1]<z[1])][1]):z=null);v&&E(b,k,0)&&(d(u),f=!0);x&&E(b,l,1)&&(e(u),f=!0);f&&(c(u),L({type:"brush",mode:da?"move":"resize"}))}function E(a,b,c){var d=Hc(b);b=d[0];var e=d[1],d=wa[c],f=n[1][c]-n[0][c];da&&(b-=d,e-=f+d);a=A[c]?Math.max(b,Math.min(e,a[c])):a[c];da?b=(a+=d)+f:(z&&(d=Math.max(b,Math.min(e,2*z[c]-a))),d<a?(b=a,a=d):b=d);if(n[0][c]!==a||n[1][c]!==b)return p=null,n[0][c]=a,n[1][c]=b,!0}function q(){m();u.style("pointer-events","all").selectAll(".resize").style("display",
b.empty()?"none":null);B.select("body").style("cursor",null);D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);y();L({type:"brushend"})}var s=this,t=B.select(B.event.target),L=g.of(s,arguments),u=B.select(s),X=t.datum(),v=!/^(n|s)$/.test(X)&&k,x=!/^(e|w)$/.test(X)&&l,da=t.classed("extent"),y=Q(),z,wa=a(),C,D=B.select(Ub).on("keydown.brush",function(){32==B.event.keyCode&&(da||(z=null,wa[0]-=n[1][0],
wa[1]-=n[1][1],da=2),r())}).on("keyup.brush",function(){32==B.event.keyCode&&2==da&&(wa[0]+=n[1][0],wa[1]+=n[1][1],da=0,r())});if(B.event.changedTouches)D.on("touchmove.brush",m).on("touchend.brush",q);else D.on("mousemove.brush",m).on("mouseup.brush",q);if(da)wa[0]=n[0][0]-wa[0],wa[1]=n[0][1]-wa[1];else if(X){var xc=+/w$/.test(X),X=+/^n/.test(X);C=[n[1-xc][0]-wa[0],n[1-X][1]-wa[1]];wa[0]=n[xc][0];wa[1]=n[X][1]}else B.event.altKey&&(z=wa.slice());u.style("pointer-events","none").selectAll(".resize").style("display",
null);B.select("body").style("cursor",t.style("cursor"));L({type:"brushstart"});m()}var g=a(b,"brushstart","brush","brushend"),k=null,l=null,m=$f[0],n=[[0,0],[0,0]],A=[!0,!0],p;b.x=function(a){if(!arguments.length)return k;k=a;m=$f[!k<<1|!l];return b};b.y=function(a){if(!arguments.length)return l;l=a;m=$f[!k<<1|!l];return b};b.clamp=function(a){if(!arguments.length)return k&&l?A:k||l?A[+!k]:null;if(k&&l)A=[!!a[0],!!a[1]];else if(k||l)A[+!k]=!!a;return b};b.extent=function(a){var c,d,e,f,g;if(!arguments.length)return a=
p||n,k&&(c=a[0][0],d=a[1][0],p||(c=n[0][0],d=n[1][0],k.invert&&(c=k.invert(c),d=k.invert(d)),d<c&&(g=c,c=d,d=g))),l&&(e=a[0][1],f=a[1][1],p||(e=n[0][1],f=n[1][1],l.invert&&(e=l.invert(e),f=l.invert(f)),f<e&&(g=e,e=f,f=g))),k&&l?[[c,e],[d,f]]:k?[c,d]:l&&[e,f];p=[[0,0],[0,0]];k&&(c=a[0],d=a[1],l&&(c=c[0],d=d[0]),p[0][0]=c,p[1][0]=d,k.invert&&(c=k(c),d=k(d)),d<c&&(g=c,c=d,d=g),n[0][0]=c|0,n[1][0]=d|0);l&&(e=a[0],f=a[1],k&&(e=e[1],f=f[1]),p[0][1]=e,p[1][1]=f,l.invert&&(e=l(e),f=l(f)),f<e&&(g=e,e=f,f=
g),n[0][1]=e|0,n[1][1]=f|0);return b};b.clear=function(){p=null;n[0][0]=n[0][1]=n[1][0]=n[1][1]=0;return b};b.empty=function(){return k&&n[0][0]===n[1][0]||l&&n[0][1]===n[1][1]};return B.rebind(b,g,"on")};var th={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$f=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]];B.time={};var cc=Date;Ac.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},
getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){hd.setUTCDate.apply(this._,arguments)},
setDay:function(){hd.setUTCDay.apply(this._,arguments)},setFullYear:function(){hd.setUTCFullYear.apply(this._,arguments)},setHours:function(){hd.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){hd.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){hd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){hd.setUTCMonth.apply(this._,arguments)},setSeconds:function(){hd.setUTCSeconds.apply(this._,arguments)},setTime:function(){hd.setTime.apply(this._,arguments)}};var hd=
Date.prototype,ag="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),bg="Sun Mon Tue Wed Thu Fri Sat".split(" "),cg="January February March April May June July August September October November December".split(" "),dg="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");B.time.year=kc(function(a){a=B.time.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});B.time.years=B.time.year.range;B.time.years.utc=B.time.year.utc.range;
B.time.day=kc(function(a){var b=new cc(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});B.time.days=B.time.day.range;B.time.days.utc=B.time.day.utc.range;B.time.dayOfYear=function(a){var b=B.time.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,b){a=a.toLowerCase();b=7-b;
var c=B.time[a]=kc(function(a){(a=B.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=B.time.year(a).getDay();return Math.floor((B.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});B.time[a+"s"]=c.range;B.time[a+"s"].utc=c.utc.range;B.time[a+"OfYear"]=function(a){var c=B.time.year(a).getDay();return Math.floor((B.time.dayOfYear(a)+(c+b)%7)/7)}});B.time.week=B.time.sunday;B.time.weeks=B.time.sunday.range;B.time.weeks.utc=B.time.sunday.utc.range;
B.time.weekOfYear=B.time.sundayOfYear;B.time.format=function(a){function b(d){for(var e=[],f=-1,g=0,k,l;++f<c;)if(37===a.charCodeAt(f)){e.push(a.substring(g,f));null!=(k=uh[g=a.charAt(++f)])&&(g=a.charAt(++f));if(l=Ff[g])g=l(d,null==k?"e"===g?" ":"0":k);e.push(g);g=f+1}e.push(a.substring(g,f));return e.join("")}var c=a.length;b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(ed(c,a,b,0)!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);b=new cc;"j"in c?b.setFullYear(c.y,0,c.j):"w"in c&&
("W"in c||"U"in c)?(b.setFullYear(c.y,0,1),b.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-(b.getDay()+5)%7:c.w+7*c.U-(b.getDay()+6)%7)):b.setFullYear(c.y,c.m,c.d);b.setHours(c.H,c.M,c.S,c.L);return b};b.toString=function(){return a};return b};var Jg=ne(ag),vh=ud(ag),Kg=ne(bg),wh=ud(bg),Lg=ne(cg),xh=ud(cg),Mg=ne(dg),yh=ud(dg),Ng=/^%/,uh={"-":"",_:" ",0:"0"},Ff={a:function(a){return bg[a.getDay()]},A:function(a){return ag[a.getDay()]},b:function(a){return dg[a.getMonth()]},B:function(a){return cg[a.getMonth()]},
c:B.time.format("%a %b %e %X %Y"),d:function(a,b){return Vb(a.getDate(),b,2)},e:function(a,b){return Vb(a.getDate(),b,2)},H:function(a,b){return Vb(a.getHours(),b,2)},I:function(a,b){return Vb(a.getHours()%12||12,b,2)},j:function(a,b){return Vb(1+B.time.dayOfYear(a),b,3)},L:function(a,b){return Vb(a.getMilliseconds(),b,3)},m:function(a,b){return Vb(a.getMonth()+1,b,2)},M:function(a,b){return Vb(a.getMinutes(),b,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,b){return Vb(a.getSeconds(),
b,2)},U:function(a,b){return Vb(B.time.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Vb(B.time.mondayOfYear(a),b,2)},x:B.time.format("%m/%d/%Y"),X:B.time.format("%H:%M:%S"),y:function(a,b){return Vb(a.getFullYear()%100,b,2)},Y:function(a,b){return Vb(a.getFullYear()%1E4,b,4)},Z:function(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(Math.abs(b)/60),b=Math.abs(b)%60;return a+Vb(c,"0",2)+Vb(b,"0",2)},"%":function(){return"%"}},$g={a:function(a,b,c){Kg.lastIndex=
0;return(b=Kg.exec(b.substring(c)))?(a.w=wh.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){Jg.lastIndex=0;return(b=Jg.exec(b.substring(c)))?(a.w=vh.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){Mg.lastIndex=0;return(b=Mg.exec(b.substring(c)))?(a.m=yh.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){Lg.lastIndex=0;return(b=Lg.exec(b.substring(c)))?(a.m=xh.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return ed(a,Ff.c.toString(),b,c)},d:vd,e:vd,
H:oe,I:oe,j:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1},L:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1},p:function(a,b,c){b=zh.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,
c)},S:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},U:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1},w:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+1)))?(a.w=+b[0],c+b[0].length):-1},W:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1},x:function(a,b,c){return ed(a,Ff.x.toString(),b,c)},X:function(a,b,c){return ed(a,Ff.X.toString(),b,c)},
y:function(a,b,c){ib.lastIndex=0;if(b=ib.exec(b.substring(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a},Y:function(a,b,c){ib.lastIndex=0;return(b=ib.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1},"%":function(a,b,c){Ng.lastIndex=0;return(a=Ng.exec(b.substring(c,c+1)))?c+a[0].length:-1}},ib=/^\s*\d+/,zh=B.map({am:0,pm:1});B.time.format.utc=function(a){function b(a){try{cc=Ac;var d=new cc;d._=a;return c(d)}finally{cc=Date}}var c=B.time.format(a);b.parse=function(a){try{cc=
Ac;var b=c.parse(a);return b&&b._}finally{cc=Date}};b.toString=c.toString;return b};var Og=B.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");B.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ic:Og;Ic.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Ic.toString=Og.toString;B.time.second=kc(function(a){return new cc(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});B.time.seconds=B.time.second.range;
B.time.seconds.utc=B.time.second.utc.range;B.time.minute=kc(function(a){return new cc(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});B.time.minutes=B.time.minute.range;B.time.minutes.utc=B.time.minute.utc.range;B.time.hour=kc(function(a){var b=a.getTimezoneOffset()/60;return new cc(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});B.time.hours=B.time.hour.range;
B.time.hours.utc=B.time.hour.utc.range;B.time.month=kc(function(a){a=B.time.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});B.time.months=B.time.month.range;B.time.months.utc=B.time.month.utc.range;var qf=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],eg=[[B.time.second,1],[B.time.second,5],[B.time.second,15],[B.time.second,30],[B.time.minute,1],[B.time.minute,5],[B.time.minute,15],[B.time.minute,
30],[B.time.hour,1],[B.time.hour,3],[B.time.hour,6],[B.time.hour,12],[B.time.day,1],[B.time.day,2],[B.time.week,1],[B.time.month,1],[B.time.month,3],[B.time.year,1]],Ah=[[B.time.format("%Y"),la],[B.time.format("%B"),function(a){return a.getMonth()}],[B.time.format("%b %d"),function(a){return 1!=a.getDate()}],[B.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[B.time.format("%I %p"),function(a){return a.getHours()}],[B.time.format("%I:%M"),function(a){return a.getMinutes()}],[B.time.format(":%S"),
function(a){return a.getSeconds()}],[B.time.format(".%L"),function(a){return a.getMilliseconds()}]],Pg=B.scale.linear(),Bh=Sc(Ah);eg.year=function(a,b){return Pg.domain(a.map(Kf)).ticks(b).map(Oc)};B.time.scale=function(){return De(B.scale.linear(),eg,Bh)};var Qg=eg.map(function(a){return[a[0].utc,a[1]]}),Ch=[[B.time.format.utc("%Y"),la],[B.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[B.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[B.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&
1!=a.getUTCDate()}],[B.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[B.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[B.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[B.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Dh=Sc(Ch);Qg.year=function(a,b){return Pg.domain(a.map(sc)).ticks(b).map(Gf)};B.time.scale.utc=function(){return De(B.scale.linear(),Qg,Dh)};B.text=jb(function(a){return a.responseText});B.json=function(a,b){return sb(a,
"application/json",ve,b)};B.html=function(a,b){return sb(a,"text/html",Rg,b)};B.xml=jb(function(a){return a.responseXML});return B}();
(function(g){function f(){var c,b,d=Aloha.settings.plugins&&Aloha.settings.plugins.load,e=Aloha.settings.baseUrl,f,a=/\/aloha.js(\?\S*)?$/,g=/\/[^\/]*\.js$/,k;if(!d||!e)for(c=document.getElementsByTagName("script"),k=0;k<c.length;k++){b=c[k];f=b.getAttribute("data-aloha-plugins");if(null!=f){d||(d=f);e||(e=b.src.replace(g,""));break}!e&&a.test(b.src)&&(e=b.src.replace(a,""))}"string"===typeof d&&""!==d&&(d=d.replace(/\s+/g,"").split(","));return{baseUrl:e,plugins:d||[]}}function n(){for(var c=document.getElementsByTagName("script"),
b=0;b<c.length;b++)if("true"===c[b].getAttribute("data-aloha-defer-init"))return!0;return!1}function m(c){var b={},d=[],e={},f={},a,g,k=Aloha.settings.basePath||"",l=Aloha.settings.bundles||{},m;for(m=0;m<c.length;m++){a=c[m].split("/");g=a[0];a=a[1];g=l[g]?k+l[g]:k+"../plugins/"+g;var n=b,y=g,z=a,D=["nls","css","vendor","res"],F=void 0,H=void 0;n[z]=y+"/"+z+"/lib";for(H=0;H<D.length;H++)F=D[H],n[z+"/"+F]=y+"/"+z+"/"+F;e[a]=g+"/"+a;d.push(a+"/"+a+"-plugin");f[a]={jquery:"aloha/jquery"}}return{paths:b,
entryPoints:d,baseUrlByName:e,names:[],map:f}}function k(){var c={},b=Array.prototype.slice.call(arguments),d,e,f;for(e=0;e<b.length;e++)for(d in f=b[e],f)f.hasOwnProperty(d)&&(c[d]=b[e][d]);return c}function e(c,b){define(c,function(){return b})}function l(){Aloha.features={};Aloha.defaults={};Aloha.settings=Aloha.settings||{};Aloha.initialize=d.start;var c=f(),b=m(c.plugins);Aloha.settings.baseUrl=c.baseUrl;Aloha.settings.loadedPlugins=b.names;Aloha.settings._pluginBaseUrlByName=b.baseUrlByName;
c=k({aloha:{jquery:"aloha/jquery"},"aloha/jquery":{jquery:"jquery"},jqueryui:{jquery:"aloha/jquery"},vendor:{jquery:"aloha/jquery"},util:{jquery:"aloha/jquery"},RepositoryBrowser:{jquery:"aloha/jquery"},jstree:{jquery:"aloha/jquery"},jqgrid:{jquery:"aloha/jquery"},"jqgrid-locale-en":{jquery:"aloha/jquery"},"jqgrid-locale-de":{jquery:"aloha/jquery"},"jquery-layout":{jquery:"aloha/jquery"}},b.map);c={config:{i18n:{locale:Aloha.settings.locale||"en"}},map:c};(g.__DEPS__||(g.__DEPS__={})).lang=c.locale;
var l=k(c,Aloha.settings.requireConfig);l.paths=k({jquery:"vendor/jquery-1.7.2",jqueryui:"vendor/jquery-ui-1.9.0.custom-aloha"},{PubSub:"vendor/pubsub/js/pubsub-unminified",Class:"vendor/class",RepositoryBrowser:"vendor/repository-browser/js/repository-browser-unminified",jstree:"vendor/jquery.jstree",jqgrid:"vendor/jquery.jqgrid","jquery-layout":"vendor/jquery.layout-1.3.0-rc30.7","jqgrid-locale-en":"vendor/grid.locale.en","jqgrid-locale-de":"vendor/grid.locale.de","repository-browser-i18n-de":"vendor/repository-browser/js/repository-browser-unminified",
"repository-browser-i18n-en":"vendor/repository-browser/js/repository-browser-unminified"},b.paths,l.paths);for(var n in l.paths)l.paths[n]="../../aloha/src/lib/"+l.paths[n];n=Aloha.settings.predefinedModules||{};Aloha.settings.jQuery&&(n.jquery=Aloha.settings.jQuery);for(var u in n)n.hasOwnProperty(u)&&(e(u,n[u]),delete l.paths[u]);var a=require;Aloha.require=function(b){return 1===arguments.length&&"function"===typeof b?a(["aloha"],b):a.apply(this,arguments)};Aloha.bind=function(a,b){Aloha.require(["aloha/jquery"],
function(c){Aloha.bind=function(a,b){switch(d.getReadiness(a)){case "deferred":var e=d.getPhaseByEvent(a);e.deferred||(e.deferred=c.Deferred());e.deferred.done(b);break;case "immediate":b();break;case "normal":c(Aloha,"body").bind(a,b);break;default:throw"Unknown readiness";}return this};Aloha.bind(a,b)});return this};Aloha.trigger=function(a,b){Aloha.require(["aloha/jquery"],function(c){Aloha.trigger=function(a,b){var e=d.getPhaseByEvent(a);e&&e.deferred&&(c(e.deferred.resolve),e.deferred=null);
c(Aloha,"body").trigger(a,b);return this};Aloha.trigger(a,b)});return this};Aloha.unbind=function(a){Aloha.require(["aloha/jquery"],function(b){Aloha.unbind=function(a){b(Aloha,"body").unbind(a)};Aloha.unbind(a)})};Aloha.ready=function(a){this.bind("aloha-ready",a);return this};var q=Aloha.settings.jQuery;define("aloha/jquery",["jquery"],function(a){return q||a});Aloha.jQuery=q;define("aloha","aloha/jquery util/json2 aloha/rangy-core util/class util/lang util/range util/dom aloha/core aloha/editable aloha/console aloha/markup aloha/plugin aloha/selection aloha/command aloha/jquery.aloha aloha/sidebar util/position aloha/repositorymanager aloha/repository aloha/repositoryobjects aloha/contenthandlermanager".split(" "),
function(a){Aloha.features.jquery=!0;Aloha.jQuery=a;Aloha.settings=a.extendObjects(!0,{},Aloha.defaults,Aloha.settings);return Aloha});require(l,["aloha","aloha/jquery"],function(a,c){require(l,b.entryPoints,function(){c(function(){window.rangy.init();a.init()})})})}var d={phases:[],completed:[],start:function(c,b){d.phases=d.phases.concat(c);d.proceed(0,c,b)},proceed:function(c,b,e){if(c<b.length){var f=b[c],g=function(){d.proceed(++c,b,e)},a=function(){d.completed.push(f);f.event&&Aloha.trigger(f.event)};
f.fn?f.fn(a,g):(a(),g())}else e&&e()},getPhaseByEvent:function(c){var b;for(b=0;b<d.phases.length;b++)if(c===d.phases[b].event)return d.phases[b];return null},getReadiness:function(c){var b;for(b=0;b<d.completed.length;b++)if(c===d.completed[b].event)return"immediate";return d.getPhaseByEvent(c)?"deferred":"normal"}};g.Aloha=g.Aloha||{};g.Aloha.deferInit||n()?g.Aloha.deferInit=l:(Aloha._load=l,l())})(window);
(function(g,f){function n(a){var b=T[a]={},c,d;a=a.split(/\s+/);c=0;for(d=a.length;c<d;c++)b[a[c]]=!0;return b}function m(a,b,c){if(c===f&&1===a.nodeType)if(c="data-"+b.replace(N,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:s.isNumeric(c)?+c:U.test(c)?s.parseJSON(c):c}catch(d){}s.data(a,b,c)}else c=f;return c}function k(a){for(var b in a)if(("data"!==b||!s.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function e(a,b,c){var d=
b+"defer",e=b+"queue",f=b+"mark",g=s._data(a,d);!g||"queue"!==c&&s._data(a,e)||"mark"!==c&&s._data(a,f)||setTimeout(function(){s._data(a,e)||s._data(a,f)||(s.removeData(a,d,!0),g.fire())},0)}function l(){return!1}function d(){return!0}function c(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function b(a,b,c){b=b||0;if(s.isFunction(b))return s.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return s.grep(a,function(a,d){return a===b===c});if("string"===typeof b){var d=s.grep(a,
function(a){return 1===a.nodeType});if(zb.test(b))return s.filter(b,d,!c);b=s.filter(b,d)}return s.grep(a,function(a,d){return 0<=s.inArray(a,b)===c})}function p(a){var b=Ja.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function r(a,b){return s.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function u(a,b){if(1===b.nodeType&&s.hasData(a)){var c,d,e;d=s._data(a);var f=s._data(b,
d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;d<e;d++)s.event.add(b,c,g[c][d]);f.data&&(f.data=s.extend({},f.data))}}function a(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==
a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(s.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function q(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function t(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function v(a){var b=(a.nodeName||"").toLowerCase();
"input"===b?t(a):"script"!==b&&"undefined"!==typeof a.getElementsByTagName&&s.grep(a.getElementsByTagName("input"),t)}function x(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?1:0;if(0<d){if("border"!==c)for(;4>e;e+=2)c||(d-=parseFloat(s.css(a,"padding"+lb[e]))||0),d="margin"===c?d+(parseFloat(s.css(a,c+lb[e]))||0):d-(parseFloat(s.css(a,"border"+lb[e]+"Width"))||0);return d+"px"}d=db(a,b);if(0>d||null==d)d=a.style[b];if(Ya.test(d))return d;d=parseFloat(d)||0;if(c)for(;4>e;e+=
2)d+=parseFloat(s.css(a,"padding"+lb[e]))||0,"padding"!==c&&(d+=parseFloat(s.css(a,"border"+lb[e]+"Width"))||0),"margin"===c&&(d+=parseFloat(s.css(a,c+lb[e]))||0);return d+"px"}function C(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");if(s.isFunction(c))for(var d=b.toLowerCase().split(Ba),e=0,f=d.length,g,k;e<f;e++)g=d[e],(k=/^\+/.test(g))&&(g=g.substr(1)||"*"),g=a[g]=a[g]||[],g[k?"unshift":"push"](c)}}function y(a,b,c,d,e,g){e=e||b.dataTypes[0];g=g||{};g[e]=!0;e=a[e];for(var k=0,l=e?e.length:
0,m=a===Pb,n;k<l&&(m||!n);k++)n=e[k](b,c,d),"string"===typeof n&&(!m||g[n]?n=f:(b.dataTypes.unshift(n),n=y(a,b,c,d,n,g)));!m&&n||g["*"]||(n=y(a,b,c,d,"*",g));return n}function z(a,b){var c,d,e=s.ajaxSettings.flatOptions||{};for(c in b)b[c]!==f&&((e[c]?a:d||(d={}))[c]=b[c]);d&&s.extend(!0,a,d)}function D(a,b,c,d){if(s.isArray(b))s.each(b,function(b,e){c||ab.test(a)?d(a,e):D(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==s.type(b))d(a,b);else for(var e in b)D(a+"["+e+"]",b[e],c,
d)}function F(){try{return new g.XMLHttpRequest}catch(a){}}function H(){setTimeout(M,0);return qb=s.now()}function M(){qb=f}function I(a,b){var c={};s.each(ub.concat.apply([],ub.slice(0,b)),function(){c[this]=a});return c}function J(a){if(!cb[a]){var b=G.body,c=s("<"+a+">").appendTo(b),d=c.css("display");c.remove();if("none"===d||""===d)Qa||(Qa=G.createElement("iframe"),Qa.frameBorder=Qa.width=Qa.height=0),b.appendChild(Qa),kb&&Qa.createElement||(kb=(Qa.contentWindow||Qa.contentDocument).document,
kb.write((s.support.boxModel?"<!doctype html>":"")+"<html><body>"),kb.close()),c=kb.createElement(a),kb.body.appendChild(c),d=s.css(c,"display"),b.removeChild(Qa);cb[a]=d}return cb[a]}function K(a){return s.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var G=g.document,S=g.navigator,O=g.location,s=function(){function a(){if(!b.isReady){try{G.documentElement.doScroll("left")}catch(c){setTimeout(a,1);return}b.ready()}}var b=function(a,c){return new b.fn.init(a,c,e)},c=g.jQuery,d=g.$,
e,k=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,m=/^\s+/,n=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,q=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,s=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,t=/(?:^|:|,)(?:\s*\[)+/g,u=/(webkit)[ \/]([\w.]+)/,v=/(opera)(?:.*version)?[ \/]([\w.]+)/,x=/(msie) ([\w.]+)/,y=/(mozilla)(?:.*? rv:([\w.]+))?/,z=/-([a-z]|[0-9])/ig,C=/^-ms-/,D=function(a,b){return(b+"").toUpperCase()},F=S.userAgent,xc,ma,H=Object.prototype.toString,I=Object.prototype.hasOwnProperty,
J=Array.prototype.push,K=Array.prototype.slice,M=String.prototype.trim,N=Array.prototype.indexOf,O={};b.fn=b.prototype={constructor:b,init:function(a,c,d){var e;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!c&&G.body)return this.context=G,this[0]=G.body,this.selector=a,this.length=1,this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:k.exec(a);if(!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);
if(e[1])return d=(c=c instanceof b?c[0]:c)?c.ownerDocument||c:G,(a=p.exec(a))?b.isPlainObject(c)?(a=[G.createElement(a[1])],b.fn.attr.call(a,c,!0)):a=[d.createElement(a[1])]:(a=b.buildFragment([e[1]],[d]),a=(a.cacheable?b.clone(a.fragment):a.fragment).childNodes),b.merge(this,a);if((c=G.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(a);this.length=1;this[0]=c}this.context=G;this.selector=a;return this}if(b.isFunction(a))return d.ready(a);a.selector!==f&&(this.selector=a.selector,
this.context=a.context);return b.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return K.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,c,d){var e=this.constructor();b.isArray(a)?J.apply(e,a):b.merge(e,a);e.prevObject=this;e.context=this.context;"find"===c?e.selector=this.selector+(this.selector?" ":"")+d:c&&(e.selector=this.selector+"."+c+"("+d+")");return e},each:function(a,
c){return b.each(this,a,c)},ready:function(a){b.bindReady();xc.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(K.apply(this,arguments),"slice",K.call(arguments).join(","))},map:function(a){return this.pushStack(b.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:[].sort,splice:[].splice};
b.fn.init.prototype=b.fn;b.extend=b.fn.extend=function(){var a,c,d,e,g,k=arguments[0]||{},l=1,m=arguments.length,n=!1;"boolean"===typeof k&&(n=k,k=arguments[1]||{},l=2);"object"===typeof k||b.isFunction(k)||(k={});m===l&&(k=this,--l);for(;l<m;l++)if(null!=(a=arguments[l]))for(c in a)d=k[c],e=a[c],k!==e&&(n&&e&&(b.isPlainObject(e)||(g=b.isArray(e)))?(g?(g=!1,d=d&&b.isArray(d)?d:[]):d=d&&b.isPlainObject(d)?d:{},k[c]=b.extend(n,d,e)):e!==f&&(k[c]=e));return k};b.extend({noConflict:function(a){g.$===
b&&(g.$=d);a&&g.jQuery===b&&(g.jQuery=c);return b},isReady:!1,readyWait:1,holdReady:function(a){a?b.readyWait++:b.ready(!0)},ready:function(a){if(!0===a&&!--b.readyWait||!0!==a&&!b.isReady){if(!G.body)return setTimeout(b.ready,1);b.isReady=!0;!0!==a&&0<--b.readyWait||(xc.fireWith(G,[b]),b.fn.trigger&&b(G).trigger("ready").off("ready"))}},bindReady:function(){if(!xc){xc=b.Callbacks("once memory");if("complete"===G.readyState)return setTimeout(b.ready,1);if(G.addEventListener)G.addEventListener("DOMContentLoaded",
ma,!1),g.addEventListener("load",b.ready,!1);else if(G.attachEvent){G.attachEvent("onreadystatechange",ma);g.attachEvent("onload",b.ready);var c=!1;try{c=null==g.frameElement}catch(d){}G.documentElement.doScroll&&c&&a()}}},isFunction:function(a){return"function"===b.type(a)},isArray:Array.isArray||function(a){return"array"===b.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):O[H.call(a)]||
"object"},isPlainObject:function(a){if(!a||"object"!==b.type(a)||a.nodeType||b.isWindow(a))return!1;try{if(a.constructor&&!I.call(a,"constructor")&&!I.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);return d===f||I.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(a){if("string"!==typeof a||!a)return null;a=b.trim(a);if(g.JSON&&g.JSON.parse)return g.JSON.parse(a);if(q.test(a.replace(r,
"@").replace(s,"]").replace(t,"")))return(new Function("return "+a))();b.error("Invalid JSON: "+a)},parseXML:function(a){if("string"!==typeof a||!a)return null;var c,d;try{g.DOMParser?(d=new DOMParser,c=d.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a))}catch(e){c=f}c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+a);return c},noop:function(){},globalEval:function(a){a&&l.test(a)&&(g.execScript||function(a){g.eval.call(g,
a)})(a)},camelCase:function(a){return a.replace(C,"ms-").replace(z,D)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,g=0,k=a.length,l=k===f||b.isFunction(a);if(d)if(l)for(e in a){if(!1===c.apply(a[e],d))break}else for(;g<k&&!1!==c.apply(a[g++],d););else if(l)for(e in a){if(!1===c.call(a[e],e,a[e]))break}else for(;g<k&&!1!==c.call(a[g],g,a[g++]););return a},trim:M?function(a){return null==a?"":M.call(a)}:function(a){return null==a?
"":a.toString().replace(m,"").replace(n,"")},makeArray:function(a,c){var d=c||[];if(null!=a){var e=b.type(a);null==a.length||"string"===e||"function"===e||"regexp"===e||b.isWindow(a)?J.call(d,a):b.merge(d,a)}return d},inArray:function(a,b,c){var d;if(b){if(N)return N.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=a.length,d=0;if("number"===typeof b.length)for(var e=b.length;d<e;d++)a[c++]=b[d];else for(;b[d]!==f;)a[c++]=
b[d++];a.length=c;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var e,g,k=[],l=0,m=a.length;if(a instanceof b||m!==f&&"number"===typeof m&&(0<m&&a[0]&&a[m-1]||0===m||b.isArray(a)))for(;l<m;l++)e=c(a[l],l,d),null!=e&&(k[k.length]=e);else for(g in a)e=c(a[g],g,d),null!=e&&(k[k.length]=e);return k.concat.apply([],k)},guid:1,proxy:function(a,c){if("string"===typeof c){var d=a[c];c=a;a=d}if(!b.isFunction(a))return f;
var e=K.call(arguments,2),d=function(){return a.apply(c,e.concat(K.call(arguments)))};d.guid=a.guid=a.guid||d.guid||b.guid++;return d},access:function(a,c,d,e,g,k,l){var m,n=null==d,A=0,p=a.length;if(d&&"object"===typeof d){for(A in d)b.access(a,c,A,d[A],1,k,e);g=1}else if(e!==f){m=l===f&&b.isFunction(e);n&&(m?(m=c,c=function(a,c,d){return m.call(b(a),d)}):(c.call(a,e),c=null));if(c)for(;A<p;A++)c(a[A],d,m?e.call(a[A],A,c(a[A],d)):e,l);g=1}return g?a:n?c.call(a):p?c(a[0],d):k},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=u.exec(a)||v.exec(a)||x.exec(a)||0>a.indexOf("compatible")&&y.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}b.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(d,e){e&&e instanceof b&&!(e instanceof a)&&(e=a(e));return b.fn.init.call(this,d,e,c)};a.fn.init.prototype=a.fn;var c=a(G);return a},browser:{}});b.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,b){O["[object "+b+"]"]=b.toLowerCase()});F=b.uaMatch(F);F.browser&&(b.browser[F.browser]=!0,b.browser.version=F.version);b.browser.webkit&&(b.browser.safari=!0);l.test("\u00a0")&&(m=/^[\s\xA0]+/,n=/[\s\xA0]+$/);e=b(G);G.addEventListener?ma=function(){G.removeEventListener("DOMContentLoaded",ma,!1);b.ready()}:G.attachEvent&&(ma=function(){"complete"===G.readyState&&(G.detachEvent("onreadystatechange",ma),b.ready())});return b}(),T={};s.Callbacks=function(a){a=a?T[a]||n(a):{};var b=[],c=
[],d,e,g,k,l,m,p=function(c){var d,e,f,g;d=0;for(e=c.length;d<e;d++)f=c[d],g=s.type(f),"array"===g?p(f):"function"===g&&(a.unique&&r.has(f)||b.push(f))},q=function(f,n){n=n||[];d=!a.memory||[f,n];g=e=!0;m=k||0;k=0;for(l=b.length;b&&m<l;m++)if(!1===b[m].apply(f,n)&&a.stopOnFalse){d=!0;break}g=!1;b&&(a.once?!0===d?r.disable():b=[]:c&&c.length&&(d=c.shift(),r.fireWith(d[0],d[1])))},r={add:function(){if(b){var a=b.length;p(arguments);g?l=b.length:d&&!0!==d&&(k=a,q(d[0],d[1]))}return this},remove:function(){if(b)for(var c=
arguments,d=0,e=c.length;d<e;d++)for(var f=0;f<b.length&&(c[d]!==b[f]||(g&&f<=l&&(l--,f<=m&&m--),b.splice(f--,1),!a.unique));f++);return this},has:function(a){if(b)for(var c=0,d=b.length;c<d;c++)if(a===b[c])return!0;return!1},empty:function(){b=[];return this},disable:function(){b=c=d=f;return this},disabled:function(){return!b},lock:function(){c=f;d&&!0!==d||r.disable();return this},locked:function(){return!c},fireWith:function(b,e){c&&(g?a.once||c.push([b,e]):a.once&&d||q(b,e));return this},fire:function(){r.fireWith(this,
arguments);return this},fired:function(){return!!e}};return r};var Q=[].slice;s.extend({Deferred:function(a){var b=s.Callbacks("once memory"),c=s.Callbacks("once memory"),d=s.Callbacks("memory"),e="pending",f={resolve:b,reject:c,notify:d},g={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){k.done(a).fail(b).progress(c);return this},always:function(){k.done.apply(k,arguments).fail.apply(k,arguments);return this},pipe:function(a,
b,c){return s.Deferred(function(d){s.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],f;if(s.isFunction(c))k[a](function(){if((f=c.apply(this,arguments))&&s.isFunction(f.promise))f.promise().then(d.resolve,d.reject,d.notify);else d[e+"With"](this===k?d:this,[f])});else k[a](d[e])})}).promise()},promise:function(a){if(null==a)a=g;else for(var b in g)a[b]=g[b];return a}},k=g.promise({}),l;for(l in f)k[l]=f[l].fire,k[l+"With"]=f[l].fireWith;k.done(function(){e=
"resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock);a&&a.call(k,k);return k},when:function(a){function b(a){return function(b){d[a]=1<arguments.length?Q.call(arguments,0):b;--k||l.resolveWith(l,d)}}function c(a){return function(b){g[a]=1<arguments.length?Q.call(arguments,0):b;l.notifyWith(m,g)}}var d=Q.call(arguments,0),e=0,f=d.length,g=Array(f),k=f,l=1>=f&&a&&s.isFunction(a.promise)?a:s.Deferred(),m=l.promise();if(1<f){for(;e<f;e++)d[e]&&d[e].promise&&s.isFunction(d[e].promise)?
d[e].promise().then(b(e),l.reject,c(e)):--k;k||l.resolveWith(l,d)}else l!==a&&l.resolveWith(l,f?[a]:[]);return m}});s.support=function(){var a,b,c,d,e,f,k,l,m=G.createElement("div");m.setAttribute("className","t");m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=m.getElementsByTagName("*");c=m.getElementsByTagName("a")[0];if(!b||!b.length||!c)return{};d=G.createElement("select");e=d.appendChild(G.createElement("option"));b=
m.getElementsByTagName("input")[0];a={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(c.getAttribute("style")),hrefNormalized:"/a"===c.getAttribute("href"),opacity:/^0.55/.test(c.style.opacity),cssFloat:!!c.style.cssFloat,checkOn:"on"===b.value,optSelected:e.selected,getSetAttribute:"t"!==m.className,enctype:!!G.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};s.boxModel=a.boxModel="CSS1Compat"===G.compatMode;b.checked=!0;a.noCloneChecked=b.cloneNode(!0).checked;d.disabled=!0;a.optDisabled=!e.disabled;try{delete m.test}catch(n){a.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){a.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),
m.clearAttributes&&m.clearAttributes());b=G.createElement("input");b.value="t";b.setAttribute("type","radio");a.radioValue="t"===b.value;b.setAttribute("checked","checked");b.setAttribute("name","t");m.appendChild(b);c=G.createDocumentFragment();c.appendChild(m.lastChild);a.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked;a.appendChecked=b.checked;c.removeChild(b);c.appendChild(m);if(m.attachEvent)for(k in{submit:1,change:1,focusin:1})b="on"+k,l=b in m,l||(m.setAttribute(b,"return;"),l=
"function"===typeof m[b]),a[k+"Bubbles"]=l;c.removeChild(m);c=d=e=m=b=null;s(function(){var b,c,d,e,k=G.getElementsByTagName("body")[0];k&&(b=G.createElement("div"),b.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",k.insertBefore(b,k.firstChild),m=G.createElement("div"),b.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",f=m.getElementsByTagName("td"),l=0===f[0].offsetHeight,
f[0].style.display="",f[1].style.display="none",a.reliableHiddenOffsets=l&&0===f[0].offsetHeight,g.getComputedStyle&&(m.innerHTML="",c=G.createElement("div"),c.style.width="0",c.style.marginRight="0",m.style.width="2px",m.appendChild(c),a.reliableMarginRight=0===(parseInt((g.getComputedStyle(c,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof m.style.zoom&&(m.innerHTML="",m.style.width=m.style.padding="1px",m.style.border=0,m.style.overflow="hidden",m.style.display="inline",m.style.zoom=
1,a.inlineBlockNeedsLayout=3===m.offsetWidth,m.style.display="block",m.style.overflow="visible",m.innerHTML="<div style='width:5px;'></div>",a.shrinkWrapBlocks=3!==m.offsetWidth),m.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",m.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
c=m.firstChild,d=c.firstChild,e=c.nextSibling.firstChild.firstChild,e={doesNotAddBorder:5!==d.offsetTop,doesAddBorderForTableAndCells:5===e.offsetTop},d.style.position="fixed",d.style.top="20px",e.fixedPosition=20===d.offsetTop||15===d.offsetTop,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",e.subtractsBorderForOverflowNotVisible=-5===d.offsetTop,e.doesNotIncludeMarginInBodyOffset=1!==k.offsetTop,g.getComputedStyle&&(m.style.marginTop="1%",a.pixelMargin="1%"!==
(g.getComputedStyle(m,null)||{marginTop:0}).marginTop),"undefined"!==typeof b.style.zoom&&(b.style.zoom=1),k.removeChild(b),m=null,s.extend(a,e))});return a}();var U=/^(?:\{.*\}|\[.*\])$/,N=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?s.cache[a[s.expando]]:a[s.expando];return!!a&&!k(a)},data:function(a,b,c,d){if(s.acceptData(a)){var e;
e=s.expando;var g="string"===typeof b,k=a.nodeType,l=k?s.cache:a,m=k?a[e]:a[e]&&e,n="events"===b;if(m&&l[m]&&(n||d||l[m].data)||!g||c!==f){m||(k?a[e]=m=++s.uuid:m=e);l[m]||(l[m]={},k||(l[m].toJSON=s.noop));if("object"===typeof b||"function"===typeof b)d?l[m]=s.extend(l[m],b):l[m].data=s.extend(l[m].data,b);e=a=l[m];d||(a.data||(a.data={}),a=a.data);c!==f&&(a[s.camelCase(b)]=c);if(n&&!a[b])return e.events;g?(c=a[b],null==c&&(c=a[s.camelCase(b)])):c=a;return c}}},removeData:function(a,b,c){if(s.acceptData(a)){var d,
e,f,g=s.expando,l=a.nodeType,m=l?s.cache:a,n=l?a[g]:g;if(m[n]){if(b&&(d=c?m[n]:m[n].data)){s.isArray(b)||(b in d?b=[b]:(b=s.camelCase(b),b=b in d?[b]:b.split(" ")));e=0;for(f=b.length;e<f;e++)delete d[b[e]];if(!(c?k:s.isEmptyObject)(d))return}if(!c&&(delete m[n].data,!k(m[n])))return;s.support.deleteExpando||!m.setInterval?delete m[n]:m[n]=null;l&&(s.support.deleteExpando?delete a[g]:a.removeAttribute?a.removeAttribute(g):a[g]=null)}}},_data:function(a,b,c){return s.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=
s.noData[a.nodeName.toLowerCase()];if(b)return!(!0===b||a.getAttribute("classid")!==b)}return!0}});s.fn.extend({data:function(a,b){var c,d,e,g,k,l=this[0],n=0,p=null;if(a===f){if(this.length&&(p=s.data(l),1===l.nodeType&&!s._data(l,"parsedAttrs"))){e=l.attributes;for(k=e.length;n<k;n++)g=e[n].name,0===g.indexOf("data-")&&(g=s.camelCase(g.substring(5)),m(l,g,p[g]));s._data(l,"parsedAttrs",!0)}return p}if("object"===typeof a)return this.each(function(){s.data(this,a)});c=a.split(".",2);c[1]=c[1]?"."+
c[1]:"";d=c[1]+"!";return s.access(this,function(b){if(b===f)return p=this.triggerHandler("getData"+d,[c[0]]),p===f&&l&&(p=s.data(l,a),p=m(l,a,p)),p===f&&c[1]?this.data(c[0]):p;c[1]=b;this.each(function(){var e=s(this);e.triggerHandler("setData"+d,c);s.data(this,a,b);e.triggerHandler("changeData"+d,c)})},null,b,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){s.removeData(this,a)})}});s.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",s._data(a,b,(s._data(a,b)||0)+
1))},_unmark:function(a,b,c){!0!==a&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark";(a=a?0:(s._data(b,d)||1)-1)?s._data(b,d,a):(s.removeData(b,d,!0),e(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=s._data(a,b),c&&(!d||s.isArray(c)?d=s._data(a,b,s.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=s.queue(a,b),d=c.shift(),f={};"inprogress"===d&&(d=c.shift());d&&("fx"===b&&c.unshift("inprogress"),s._data(a,b+".run",f),d.call(a,function(){s.dequeue(a,
b)},f));c.length||(s.removeData(a,b+"queue "+b+".run",!0),e(a,b,"queue"))}});s.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?s.queue(this[0],a):b===f?this:this.each(function(){var c=s.queue(this,a,b);"fx"===a&&"inprogress"!==c[0]&&s.dequeue(this,a)})},dequeue:function(a){return this.each(function(){s.dequeue(this,a)})},delay:function(a,b){a=s.fx?s.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){function c(){--k||d.resolveWith(e,[e])}"string"!==typeof a&&(b=a,a=f);a=a||"fx";for(var d=s.Deferred(),e=this,g=e.length,k=1,l=a+"defer",m=a+"queue",n=a+"mark",p;g--;)if(p=s.data(e[g],l,f,!0)||(s.data(e[g],m,f,!0)||s.data(e[g],n,f,!0))&&s.data(e[g],l,s.Callbacks("once memory"),!0))k++,p.add(c);c();return d.promise(b)}});var V=/[\n\t\r]/g,P=/\s+/,aa=/\r/g,ea=/^(?:button|input)$/i,ga=/^(?:button|input|object|select|textarea)$/i,
na=/^a(?:rea)?$/i,W=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Z=s.support.getSetAttribute,ca,ja,R;s.fn.extend({attr:function(a,b){return s.access(this,s.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){s.removeAttr(this,a)})},prop:function(a,b){return s.access(this,s.prop,a,b,1<arguments.length)},removeProp:function(a){a=s.propFix[a]||a;return this.each(function(){try{this[a]=f,delete this[a]}catch(b){}})},
addClass:function(a){var b,c,d,e,f,g,k;if(s.isFunction(a))return this.each(function(b){s(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(P),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){f=" "+e.className+" ";g=0;for(k=b.length;g<k;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=s.trim(f)}else e.className=a;return this},removeClass:function(a){var b,c,d,e,g,k,l;if(s.isFunction(a))return this.each(function(b){s(this).removeClass(a.call(this,
b,this.className))});if(a&&"string"===typeof a||a===f)for(b=(a||"").split(P),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType&&e.className)if(a){g=(" "+e.className+" ").replace(V," ");k=0;for(l=b.length;k<l;k++)g=g.replace(" "+b[k]+" "," ");e.className=s.trim(g)}else e.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return s.isFunction(a)?this.each(function(c){s(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===
c)for(var e,f=0,g=s(this),k=b,l=a.split(P);e=l[f++];)k=d?k:!g.hasClass(e),g[k?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&s._data(this,"__className__",this.className),this.className=this.className||!1===a?"":s._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&-1<(" "+this[b].className+" ").replace(V," ").indexOf(a))return!0;return!1},val:function(a){var b,c,d,e=this[0];if(arguments.length)return d=
s.isFunction(a),this.each(function(c){var e=s(this);1===this.nodeType&&(c=d?a.call(this,c,e.val()):a,null==c?c="":"number"===typeof c?c+="":s.isArray(c)&&(c=s.map(c,function(a){return null==a?"":a+""})),b=s.valHooks[this.type]||s.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&b.set(this,c,"value")!==f||(this.value=c))});if(e){if((b=s.valHooks[e.type]||s.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&(c=b.get(e,"value"))!==f)return c;c=e.value;return"string"===typeof c?c.replace(aa,""):null==
c?"":c}}});s.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.selectedIndex,e=[],f=a.options,g="select-one"===a.type;if(0>d)return null;a=g?d:0;for(c=g?d+1:f.length;a<c;a++)if(b=f[a],b.selected&&!((s.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&s.nodeName(b.parentNode,"optgroup"))){b=s(b).val();if(g)return b;e.push(b)}return g&&!e.length&&f.length?s(f[d]).val():
e},set:function(a,b){var c=s.makeArray(b);s(a).find("option").each(function(){this.selected=0<=s.inArray(s(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,b,c,d){var e,g,k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(d&&b in s.attrFn)return s(a)[b](c);if("undefined"===typeof a.getAttribute)return s.prop(a,b,c);if(d=1!==k||!s.isXMLDoc(a))b=b.toLowerCase(),g=s.attrHooks[b]||(W.test(b)?ja:ca);if(c!==f)if(null===
c)s.removeAttr(a,b);else{if(g&&"set"in g&&d&&(e=g.set(a,c,b))!==f)return e;a.setAttribute(b,""+c);return c}else{if(g&&"get"in g&&d&&null!==(e=g.get(a,b)))return e;e=a.getAttribute(b);return null===e?f:e}}},removeAttr:function(a,b){var c,d,e,f,g,k=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(P),f=d.length;k<f;k++)if(e=d[k])c=s.propFix[e]||e,(g=W.test(e))||s.attr(a,e,""),a.removeAttribute(Z?e:c),g&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(ea.test(a.nodeName)&&a.parentNode)s.error("type property can't be changed");
else if(!s.support.radioValue&&"radio"===b&&s.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return ca&&s.nodeName(a,"button")?ca.get(a,b):b in a?a.value:null},set:function(a,b,c){if(ca&&s.nodeName(a,"button"))return ca.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,b,c){var d,e,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!s.isXMLDoc(a))b=s.propFix[b]||b,e=s.propHooks[b];return c!==f?e&&"set"in e&&(d=e.set(a,c,b))!==f?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):ga.test(a.nodeName)||na.test(a.nodeName)&&a.href?0:f}}}});s.attrHooks.tabindex=
s.propHooks.tabIndex;ja={get:function(a,b){var c,d=s.prop(a,b);return!0===d||"boolean"!==typeof d&&(c=a.getAttributeNode(b))&&!1!==c.nodeValue?b.toLowerCase():f},set:function(a,b,c){!1===b?s.removeAttr(a,c):(b=s.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};Z||(R={name:!0,id:!0,coords:!0},ca=s.valHooks.button={get:function(a,b){var c;return(c=a.getAttributeNode(b))&&(R[b]?""!==c.nodeValue:c.specified)?c.nodeValue:f},set:function(a,b,c){var d=a.getAttributeNode(c);d||
(d=G.createAttribute(c),a.setAttributeNode(d));return d.nodeValue=b+""}},s.attrHooks.tabindex.set=ca.set,s.each(["width","height"],function(a,b){s.attrHooks[b]=s.extend(s.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),s.attrHooks.contenteditable={get:ca.get,set:function(a,b,c){""===b&&(b="false");ca.set(a,b,c)}});s.support.hrefNormalized||s.each(["href","src","width","height"],function(a,b){s.attrHooks[b]=s.extend(s.attrHooks[b],{get:function(a){a=a.getAttribute(b,
2);return null===a?f:a}})});s.support.style||(s.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||f},set:function(a,b){return a.style.cssText=""+b}});s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));s.support.enctype||(s.propFix.enctype="encoding");s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(a){return null===
a.getAttribute("value")?"on":a.value}}});s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(a,b){if(s.isArray(b))return a.checked=0<=s.inArray(s(a).val(),b)}})});var ya=/^(?:textarea|input|select)$/i,Ha=/^([^\.]*)?(?:\.(.+))?$/,va=/(?:^|\s)hover(\.\S+)?\b/,Y=/^key/,Ca=/^(?:mouse|contextmenu)|click/,za=/^(?:focusinfocus|focusoutblur)$/,Da=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ra=function(a){if(a=Da.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&RegExp("(?:^|\\s)"+
a[3]+"(?:\\s|$)");return a},Ea=function(a){return s.event.special.hover?a:a.replace(va,"mouseenter$1 mouseleave$1")};s.event={add:function(a,b,c,d,e){var g,k,l,m,n,p,q,r,t;if(3!==a.nodeType&&8!==a.nodeType&&b&&c&&(g=s._data(a))){c.handler&&(q=c,c=q.handler,e=q.selector);c.guid||(c.guid=s.guid++);l=g.events;l||(g.events=l={});k=g.handle;k||(g.handle=k=function(a){return"undefined"===typeof s||a&&s.event.triggered===a.type?f:s.event.dispatch.apply(k.elem,arguments)},k.elem=a);b=s.trim(Ea(b)).split(" ");
for(g=0;g<b.length;g++)m=Ha.exec(b[g])||[],n=m[1],p=(m[2]||"").split(".").sort(),t=s.event.special[n]||{},n=(e?t.delegateType:t.bindType)||n,t=s.event.special[n]||{},m=s.extend({type:n,origType:m[1],data:d,handler:c,guid:c.guid,selector:e,quick:e&&ra(e),namespace:p.join(".")},q),r=l[n],r||(r=l[n]=[],r.delegateCount=0,t.setup&&!1!==t.setup.call(a,d,p,k)||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),t.add&&(t.add.call(a,m),m.handler.guid||(m.handler.guid=c.guid)),
e?r.splice(r.delegateCount++,0,m):r.push(m),s.event.global[n]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f=s.hasData(a)&&s._data(a),g,k,l,m,n,p,q,r,t,u;if(f&&(q=f.events)){b=s.trim(Ea(b||"")).split(" ");for(g=0;g<b.length;g++)if(k=Ha.exec(b[g])||[],l=m=k[1],k=k[2],l){r=s.event.special[l]||{};l=(d?r.delegateType:r.bindType)||l;t=q[l]||[];n=t.length;k=k?RegExp("(^|\\.)"+k.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<t.length;p++)u=t[p],!e&&m!==u.origType||c&&c.guid!==
u.guid||k&&!k.test(u.namespace)||d&&!(d===u.selector||"**"===d&&u.selector)||(t.splice(p--,1),u.selector&&t.delegateCount--,r.remove&&r.remove.call(a,u));0===t.length&&n!==t.length&&(r.teardown&&!1!==r.teardown.call(a,k)||s.removeEvent(a,l,f.handle),delete q[l])}else for(l in q)s.event.remove(a,l+b[g],c,d,!0);if(s.isEmptyObject(q)){if(b=f.handle)b.elem=null;s.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(a,b,c,d){if(!c||3!==c.nodeType&&
8!==c.nodeType){var e=a.type||a,k=[],l,m,n,p,q;if(!za.test(e+s.event.triggered)&&(0<=e.indexOf("!")&&(e=e.slice(0,-1),l=!0),0<=e.indexOf(".")&&(k=e.split("."),e=k.shift(),k.sort()),c&&!s.event.customEvent[e]||s.event.global[e]))if(a="object"===typeof a?a[s.expando]?a:new s.Event(e,a):new s.Event(e),a.type=e,a.isTrigger=!0,a.exclusive=l,a.namespace=k.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+k.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=0>e.indexOf(":")?"on"+e:"",c){if(a.result=f,a.target||
(a.target=c),b=null!=b?s.makeArray(b):[],b.unshift(a),n=s.event.special[e]||{},!n.trigger||!1!==n.trigger.apply(c,b)){q=[[c,n.bindType||e]];if(!d&&!n.noBubble&&!s.isWindow(c)){p=n.delegateType||e;k=za.test(p+e)?c:c.parentNode;for(m=null;k;k=k.parentNode)q.push([k,p]),m=k;m&&m===c.ownerDocument&&q.push([m.defaultView||m.parentWindow||g,p])}for(m=0;m<q.length&&!a.isPropagationStopped();m++)k=q[m][0],a.type=q[m][1],(p=(s._data(k,"events")||{})[a.type]&&s._data(k,"handle"))&&p.apply(k,b),(p=l&&k[l])&&
s.acceptData(k)&&!1===p.apply(k,b)&&a.preventDefault();a.type=e;d||a.isDefaultPrevented()||n._default&&!1!==n._default.apply(c.ownerDocument,b)||"click"===e&&s.nodeName(c,"a")||!s.acceptData(c)||!l||!c[e]||("focus"===e||"blur"===e)&&0===a.target.offsetWidth||s.isWindow(c)||((m=c[l])&&(c[l]=null),s.event.triggered=e,c[e](),s.event.triggered=f,m&&(c[l]=m));return a.result}}else for(m in c=s.cache,c)c[m].events&&c[m].events[e]&&s.event.trigger(a,b,c[m].handle.elem,!0)}},dispatch:function(a){a=s.event.fix(a||
g.event);var b=(s._data(this,"events")||{})[a.type]||[],c=b.delegateCount,d=[].slice.call(arguments,0),e=!a.exclusive&&!a.namespace,k=s.event.special[a.type]||{},l=[],m,n,p,q,r,t,u;d[0]=a;a.delegateTarget=this;if(!k.preDispatch||!1!==k.preDispatch.call(this,a)){if(c&&(!a.button||"click"!==a.type))for(p=s(this),p.context=this.ownerDocument||this,n=a.target;n!=this;n=n.parentNode||this)if(!0!==n.disabled){r={};t=[];p[0]=n;for(m=0;m<c;m++){q=b[m];u=q.selector;if(r[u]===f){var v=r,x=u,y;if(q.quick){y=
q.quick;var z=n.attributes||{};y=(!y[1]||n.nodeName.toLowerCase()===y[1])&&(!y[2]||(z.id||{}).value===y[2])&&(!y[3]||y[3].test((z["class"]||{}).value))}else y=p.is(u);v[x]=y}r[u]&&t.push(q)}t.length&&l.push({elem:n,matches:t})}b.length>c&&l.push({elem:this,matches:b.slice(c)});for(m=0;m<l.length&&!a.isPropagationStopped();m++)for(c=l[m],a.currentTarget=c.elem,b=0;b<c.matches.length&&!a.isImmediatePropagationStopped();b++)if(q=c.matches[b],e||!a.namespace&&!q.namespace||a.namespace_re&&a.namespace_re.test(q.namespace))a.data=
q.data,a.handleObj=q,q=((s.event.special[q.origType]||{}).handle||q.handler).apply(c.elem,d),q!==f&&(a.result=q,!1===q&&(a.preventDefault(),a.stopPropagation()));k.postDispatch&&k.postDispatch.call(this,a);return a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&
(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e=b.button,g=b.fromElement;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||G,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&
c.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g);a.which||e===f||(a.which=e&1?1:e&2?3:e&4?2:0);return a}},fix:function(a){if(a[s.expando])return a;var b,c,d=a,e=s.event.fixHooks[a.type]||{},g=e.props?this.props.concat(e.props):this.props;a=s.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];a.target||(a.target=d.srcElement||G);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===f&&(a.metaKey=a.ctrlKey);return e.filter?e.filter(a,d):a},special:{ready:{setup:s.bindReady},
load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){s.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){a=s.extend(new s.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?s.event.trigger(a,null,b):s.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};s.event.handle=s.event.dispatch;s.removeEvent=G.removeEventListener?function(a,
b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};s.Event=function(a,b){if(!(this instanceof s.Event))return new s.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?d:l):this.type=a;b&&s.extend(this,b);this.timeStamp=a&&a.timeStamp||s.now();this[s.expando]=!0};s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
d;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=d;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d;this.stopPropagation()},isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l};s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){s.event.special[a]={delegateType:b,
bindType:b,handle:function(a){var c=a.relatedTarget,d=a.handleObj,e;if(!c||c!==this&&!s.contains(this,c))a.type=d.origType,e=d.handler.apply(this,arguments),a.type=b;return e}}});s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=s.nodeName(a,"input")||s.nodeName(a,"button")?a.form:f)&&!a._submit_attached&&(s.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),
a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&s.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}});s.support.changeBubbles||(s.event.special.change={setup:function(){if(ya.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)s.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),s.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,a,!0))});return!1}s.event.add(this,"beforeactivate._change",function(a){a=a.target;ya.test(a.nodeName)&&!a._change_attached&&(s.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||s.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){s.event.remove(this,"._change");return ya.test(this.nodeName)}});s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){s.event.simulate(b,a.target,s.event.fix(a),!0)};s.event.special[b]={setup:function(){0===c++&&G.addEventListener(a,d,!0)},teardown:function(){0===--c&&G.removeEventListener(a,d,!0)}}});s.fn.extend({on:function(a,
b,c,d,e){var g,k;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=f);for(k in a)this.on(k,b,c,a[k],e);return this}null==c&&null==d?(d=b,c=b=f):null==d&&("string"===typeof b?(d=c,c=f):(d=c,c=b,b=f));if(!1===d)d=l;else if(!d)return this;1===e&&(g=d,d=function(a){s().off(a);return g.apply(this,arguments)},d.guid=g.guid||(g.guid=s.guid++));return this.each(function(){s.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){if(a&&a.preventDefault&&a.handleObj){var d=
a.handleObj;s(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler);return this}if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=f;!1===c&&(c=l);return this.each(function(){s.event.remove(this,a,c,b)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){s(this.context).on(a,this.selector,b,c);return this},die:function(a,b){s(this.context).off(a,
this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){s.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return s.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||s.guid++,d=0,e=function(c){var e=(s._data(this,"lastToggle"+a.guid)||0)%d;s._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();
return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){s.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};
s.attrFn&&(s.attrFn[b]=!0);Y.test(b)&&(s.event.fixHooks[b]=s.event.keyHooks);Ca.test(b)&&(s.event.fixHooks[b]=s.event.mouseHooks)});(function(){function a(b,c,e,f,g,k){g=0;for(var l=f.length;g<l;g++){var m=f[g];if(m){for(var n=!1,m=m[b];m;){if(m[d]===e){n=f[m.sizset];break}1!==m.nodeType||k||(m[d]=e,m.sizset=g);if(m.nodeName.toLowerCase()===c){n=m;break}m=m[b]}f[g]=n}}}function b(a,c,e,f,g,k){g=0;for(var l=f.length;g<l;g++){var m=f[g];if(m){for(var n=!1,m=m[a];m;){if(m[d]===e){n=f[m.sizset];break}if(1===
m.nodeType)if(k||(m[d]=e,m.sizset=g),"string"!==typeof c){if(m===c){n=!0;break}}else if(0<q.filter(c,[m]).length){n=m;break}m=m[a]}f[g]=n}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,k=!1,l=!0,m=/\\/g,n=/\r\n/g,p=/\W/;[0,0].sort(function(){l=!1;return 0});var q=function(a,b,d,e){d=d||[];var f=b=b||G;if(1!==b.nodeType&&9!==
b.nodeType)return[];if(!a||"string"!==typeof a)return d;var k,l,m,n,p,A=!0,r=q.isXML(b),s=[],E=a;do if(c.exec(""),k=c.exec(E))if(E=k[3],s.push(k[1]),k[2]){n=k[3];break}while(k);if(1<s.length&&u.exec(a))if(2===s.length&&t.relative[s[0]])l=F(s[0]+s[1],b,e);else for(l=t.relative[s[0]]?[b]:q(s.shift(),b);s.length;)a=s.shift(),t.relative[a]&&(a+=s.shift()),l=F(a,l,e);else if(!e&&1<s.length&&9===b.nodeType&&!r&&t.match.ID.test(s[0])&&!t.match.ID.test(s[s.length-1])&&(k=q.find(s.shift(),b,r),b=k.expr?q.filter(k.expr,
k.set)[0]:k.set[0]),b)for(k=e?{expr:s.pop(),set:y(e)}:q.find(s.pop(),1!==s.length||"~"!==s[0]&&"+"!==s[0]||!b.parentNode?b:b.parentNode,r),l=k.expr?q.filter(k.expr,k.set):k.set,0<s.length?m=y(l):A=!1;s.length;)k=p=s.pop(),t.relative[p]?k=s.pop():p="",null==k&&(k=b),t.relative[p](m,k,r);else m=[];m||(m=l);m||q.error(p||a);if("[object Array]"===g.call(m))if(A)if(b&&1===b.nodeType)for(a=0;null!=m[a];a++)m[a]&&(!0===m[a]||1===m[a].nodeType&&q.contains(b,m[a]))&&d.push(l[a]);else for(a=0;null!=m[a];a++)m[a]&&
1===m[a].nodeType&&d.push(l[a]);else d.push.apply(d,m);else y(m,d);n&&(q(n,f,d,e),q.uniqueSort(d));return d};q.uniqueSort=function(a){if(C&&(k=l,a.sort(C),k))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};q.matches=function(a,b){return q(a,null,null,b)};q.matchesSelector=function(a,b){return 0<q(b,null,null,[a]).length};q.find=function(a,b,c){var d,e,f,g,k,l;if(!a)return[];e=0;for(f=t.order.length;e<f;e++)if(k=t.order[e],g=t.leftMatch[k].exec(a))if(l=g[1],g.splice(1,1),"\\"!==
l.substr(l.length-1)&&(g[1]=(g[1]||"").replace(m,""),d=t.find[k](g,b,c),null!=d)){a=a.replace(t.match[k],"");break}d||(d="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};q.filter=function(a,b,c,d){for(var e,g,k,l,m,n,p,A,r=a,s=[],u=b,E=b&&b[0]&&q.isXML(b[0]);a&&b.length;){for(k in t.filter)if(null!=(e=t.leftMatch[k].exec(a))&&e[2]&&(n=t.filter[k],m=e[1],g=!1,e.splice(1,1),"\\"!==m.substr(m.length-1))){u===s&&(s=[]);if(t.preFilter[k])if(e=t.preFilter[k](e,
u,c,s,d,E),!e)g=l=!0;else if(!0===e)continue;if(e)for(p=0;null!=(m=u[p]);p++)m&&(l=n(m,e,p,u),A=d^l,c&&null!=l?A?g=!0:u[p]=!1:A&&(s.push(m),g=!0));if(l!==f){c||(u=s);a=a.replace(t.match[k],"");if(!g)return[];break}}if(a===r)if(null==g)q.error(a);else break;r=a}return u};q.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var r=q.getText=function(a){var b,c;b=a.nodeType;var d="";if(b)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;if("string"===
typeof a.innerText)return a.innerText.replace(n,"");for(a=a.firstChild;a;a=a.nextSibling)d+=r(a)}else{if(3===b||4===b)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(d+=r(c));return d},t=q.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"===typeof b,d=c&&!p.test(b),
c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,f;d<e;d++)if(f=a[d]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[d]=c||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}c&&q.filter(b,a,!0)},">":function(a,b){var c,d="string"===typeof b,e=0,f=a.length;if(d&&!p.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&q.filter(b,a,!0)}},"":function(c,d,f){var g,k=e++,l=b;"string"!==
typeof d||p.test(d)||(g=d=d.toLowerCase(),l=a);l("parentNode",d,k,c,g,f)},"~":function(c,d,f){var g,k=e++,l=b;"string"!==typeof d||p.test(d)||(g=d=d.toLowerCase(),l=a);l("previousSibling",d,k,c,g,f)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);
return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(m,"")+" ";if(f)return a;f=0;for(var g;null!=(g=b[f]);f++)g&&(e^(g.className&&0<=(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(g):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(m,"")},TAG:function(a,b){return a[1].replace(m,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||
q.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&q.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(m,"");!f&&t.attrMap[b]&&(a[1]=t.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(m,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,d,e,f){if("not"===a[1])if(1<(c.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=
q(a[3],null,null,b);else return a=q.filter(a[3],b,d,1^f),d||e.push.apply(e,a),!1;else if(t.match.POS.test(a[0])||t.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,b,c){return!!q(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&
"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=t.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||r([a])||"").indexOf(b[3]);
if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}q.error(e)},CHILD:function(a,b){var c,e,f,g,k,l;c=b[1];l=a;switch(c){case "only":case "first":for(;l=l.previousSibling;)if(1===l.nodeType)return!1;if("first"===c)return!0;l=a;case "last":for(;l=l.nextSibling;)if(1===l.nodeType)return!1;return!0;case "nth":c=b[2];e=b[3];if(1===c&&0===e)return!0;f=b[0];if((g=a.parentNode)&&(g[d]!==f||!a.nodeIndex)){k=0;for(l=g.firstChild;l;l=l.nextSibling)1===l.nodeType&&(l.nodeIndex=++k);
g[d]=f}l=a.nodeIndex-e;return 0===c?0===l:0===l%c&&0<=l/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=q.attr?q.attr(a,c):t.attrHandle[c]?t.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return null==c?"!="===e:!e&&q.attr?null!=c:"="===e?
d===f:"*="===e?0<=d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):f?"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-f.length)===f:"|="===e?d===f||d.substr(0,f.length+1)===f+"-":!1:d&&!1!==c},POS:function(a,b,c,d){var e=t.setFilters[b[2]];if(e)return e(a,c,b,d)}}},u=t.match.POS,v=function(a,b){return"\\"+(b-0+1)},x;for(x in t.match)t.match[x]=RegExp(t.match[x].source+/(?![^\[]*\])(?![^\(]*\))/.source),t.leftMatch[x]=RegExp(/(^(?:.|\r|\n)*?)/.source+t.match[x].source.replace(/\\(\d+)/g,
v));t.match.globalPOS=u;var y=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(G.documentElement.childNodes,0)[0].nodeType}catch(z){y=function(a,b){var c=0,d=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(d,a);else if("number"===typeof a.length)for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var C,D;G.documentElement.compareDocumentPosition?C=function(a,b){return a===b?(k=!0,0):a.compareDocumentPosition&&
b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1}:(C=function(a,b){if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return D(a,b);if(!c)return-1;if(!d)return 1;for(;g;)e.unshift(g),g=g.parentNode;for(g=d;g;)f.unshift(g),g=g.parentNode;c=e.length;d=f.length;for(g=0;g<c&&g<d;g++)if(e[g]!==f[g])return D(e[g],f[g]);return g===c?D(a,f[g],-1):D(e[g],b,1)},
D=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var a=G.createElement("div"),b="script"+(new Date).getTime(),c=G.documentElement;a.innerHTML="<a name='"+b+"'/>";c.insertBefore(a,c.firstChild);G.getElementById(b)&&(t.find.ID=function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:f:[]},t.filter.ID=
function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});c.removeChild(a);c=a=null})();(function(){var a=G.createElement("div");a.appendChild(G.createComment(""));0<a.getElementsByTagName("*").length&&(t.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(t.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();G.querySelectorAll&&function(){var a=q,b=G.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){q=function(b,c,d,e){c=c||G;if(!e&&!q.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(1===c.nodeType||9===c.nodeType)){if(f[1])return y(c.getElementsByTagName(b),d);if(f[2]&&t.find.CLASS&&c.getElementsByClassName)return y(c.getElementsByClassName(f[2]),
d)}if(9===c.nodeType){if("body"===b&&c.body)return y([c.body],d);if(f&&f[3]){var g=c.getElementById(f[3]);if(g&&g.parentNode){if(g.id===f[3])return y([g],d)}else return y([],d)}try{return y(c.querySelectorAll(b),d)}catch(k){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var f=c,l=(g=c.getAttribute("id"))||"__sizzle__",m=c.parentNode,n=/^\s*[+~]/.test(b);g?l=l.replace(/'/g,"\\$&"):c.setAttribute("id",l);n&&m&&(c=c.parentNode);try{if(!n||m)return y(c.querySelectorAll("[id='"+l+"'] "+
b),d)}catch(p){}finally{g||f.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)q[c]=a[c];b=null}}();(function(){var a=G.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(G.createElement("div"),"div"),d=!1;try{b.call(G.documentElement,"[test!='']:sizzle")}catch(e){d=!0}q.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!q.isXML(a))try{if(d||!t.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,
e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return 0<q(e,null,null,[a]).length}}})();(function(){var a=G.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(t.order.splice(1,0,"CLASS"),t.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},
a=null))})();q.contains=G.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:G.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};q.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var F=function(a,b,c){var d,e=[],f="";for(b=b.nodeType?[b]:b;d=t.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(t.match.PSEUDO,"");a=t.relative[a]?a+"*":a;d=0;for(var g=b.length;d<g;d++)q(a,
b[d],e,c);return q.filter(f,e)};q.attr=s.attr;q.selectors.attrMap={};s.find=q;s.expr=q.selectors;s.expr[":"]=s.expr.filters;s.unique=q.uniqueSort;s.text=q.getText;s.isXMLDoc=q.isXML;s.contains=q.contains})();var Va=/Until$/,rb=/^(?:parents|prevUntil|prevAll)/,Ta=/,/,zb=/^.[^:#\[\.,]*$/,ba=Array.prototype.slice,Ia=s.expr.match.globalPOS,ua={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(a){var b=this,c,d;if("string"!==typeof a)return s(a).filter(function(){c=0;for(d=b.length;c<
d;c++)if(s.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,k;c=0;for(d=this.length;c<d;c++)if(f=e.length,s.find(a,this[c],e),0<c)for(g=f;g<e.length;g++)for(k=0;k<f;k++)if(e[k]===e[g]){e.splice(g--,1);break}return e},has:function(a){var b=s(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(s.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(b(this,a,!1),"not",a)},filter:function(a){return this.pushStack(b(this,a,!0),"filter",a)},is:function(a){return!!a&&
("string"===typeof a?Ia.test(a)?0<=s(a,this.context).index(this[0]):0<s.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){var c=[],d,e,f=this[0];if(s.isArray(a)){for(e=1;f&&f.ownerDocument&&f!==b;){for(d=0;d<a.length;d++)s(f).is(a[d])&&c.push({selector:a[d],elem:f,level:e});f=f.parentNode;e++}return c}var g=Ia.test(a)||"string"!==typeof a?s(a,b||this.context):0;d=0;for(e=this.length;d<e;d++)for(f=this[d];f;)if(g?-1<g.index(f):s.find.matchesSelector(f,a)){c.push(f);break}else if(f=
f.parentNode,!f||!f.ownerDocument||f===b||11===f.nodeType)break;c=1<c.length?s.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return a?"string"===typeof a?s.inArray(this[0],s(a)):s.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var d="string"===typeof a?s(a,b):s.makeArray(a&&a.nodeType?[a]:a),e=s.merge(this.get(),d);return this.pushStack(c(d[0])||c(e[0])?e:s.unique(e))},andSelf:function(){return this.add(this.prevObject)}});
s.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return s.dir(a,"parentNode")},parentsUntil:function(a,b,c){return s.dir(a,"parentNode",c)},next:function(a){return s.nth(a,2,"nextSibling")},prev:function(a){return s.nth(a,2,"previousSibling")},nextAll:function(a){return s.dir(a,"nextSibling")},prevAll:function(a){return s.dir(a,"previousSibling")},nextUntil:function(a,b,c){return s.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return s.dir(a,"previousSibling",
c)},siblings:function(a){return s.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return s.sibling(a.firstChild)},contents:function(a){return s.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:s.makeArray(a.childNodes)}},function(a,b){s.fn[a]=function(c,d){var e=s.map(this,b,c);Va.test(a)||(d=c);d&&"string"===typeof d&&(e=s.filter(d,e));e=1<this.length&&!ua[a]?s.unique(e):e;(1<this.length||Ta.test(d))&&rb.test(a)&&(e=e.reverse());return this.pushStack(e,a,ba.call(arguments).join(","))}});
s.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?s.find.matchesSelector(b[0],a)?[b[0]]:[]:s.find.matches(a,b)},dir:function(a,b,c){var d=[];for(a=a[b];a&&9!==a.nodeType&&(c===f||1!==a.nodeType||!s(a).is(c));)1===a.nodeType&&d.push(a),a=a[b];return d},nth:function(a,b,c,d){b=b||1;for(d=0;a&&(1!==a.nodeType||++d!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ja="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
jb=/ jQuery\d+="(?:\d+|null)"/g,sb=/^\s+/,Fb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Pa=/<([\w:]+)/,Ra=/<tbody/i,hc=/<|&#?\w+;/,Sa=/<(?:script|style)/i,Wb=/<(?:script|object|embed|option|style)/i,dc=RegExp("<(?:"+Ja+")[\\s/>]","i"),Xa=/checked\s*(?:[^=]|=\s*.checked.)/i,tb=/\/(java|ecma)script/i,xa=/^\s*<!(?:\[CDATA\[|\-\-)/,sa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Nb=p(G);sa.optgroup=sa.option;sa.tbody=sa.tfoot=sa.colgroup=sa.caption=sa.thead;sa.th=sa.td;s.support.htmlSerialize||(sa._default=[1,"div<div>","</div>"]);s.fn.extend({text:function(a){return s.access(this,function(a){return a===f?s.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(a))},
null,a,arguments.length)},wrapAll:function(a){if(s.isFunction(a))return this.each(function(b){s(this).wrapAll(a.call(this,b))});if(this[0]){var b=s(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return s.isFunction(a)?this.each(function(b){s(this).wrapInner(a.call(this,b))}):this.each(function(){var b=s(this),c=b.contents();
c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=s.isFunction(a);return this.each(function(c){s(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=s.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,s.clean(arguments));return a}},remove:function(a,
b){for(var c=0,d;null!=(d=this[c]);c++)if(!a||s.filter(a,[d]).length)b||1!==d.nodeType||(s.cleanData(d.getElementsByTagName("*")),s.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;null!=(b=this[a]);a++)for(1===b.nodeType&&s.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return s.clone(this,a,b)})},html:function(a){return s.access(this,
function(a){var b=this[0]||{},c=0,d=this.length;if(a===f)return 1===b.nodeType?b.innerHTML.replace(jb,""):null;if("string"===typeof a&&!(Sa.test(a)||!s.support.leadingWhitespace&&sb.test(a)||sa[(Pa.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Fb,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(s.cleanData(b.getElementsByTagName("*")),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(s.isFunction(a))return this.each(function(b){var c=
s(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==typeof a&&(a=s(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;s(this).remove();b?s(b).before(a):s(c).append(a)})}return this.length?this.pushStack(s(s.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){var d,e,g,k=a[0],l=[];if(!s.support.checkClone&&3===arguments.length&&"string"===typeof k&&Xa.test(k))return this.each(function(){s(this).domManip(a,
b,c,!0)});if(s.isFunction(k))return this.each(function(d){var e=s(this);a[0]=k.call(this,d,b?e.html():f);e.domManip(a,b,c)});if(this[0]){d=k&&k.parentNode;d=s.support.parentNode&&d&&11===d.nodeType&&d.childNodes.length===this.length?{fragment:d}:s.buildFragment(a,this,l);g=d.fragment;if(e=1===g.childNodes.length?g=g.firstChild:g.firstChild){b=b&&s.nodeName(e,"tr");for(var m=0,n=this.length,p=n-1;m<n;m++)c.call(b?r(this[m],e):this[m],d.cacheable||1<n&&m<p?s.clone(g,!0,!0):g)}l.length&&s.each(l,function(a,
b){b.src?s.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):s.globalEval((b.text||b.textContent||b.innerHTML||"").replace(xa,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)})}return this}});s.buildFragment=function(a,b,c){var d,e,f,g,k=a[0];b&&b[0]&&(g=b[0].ownerDocument||b[0]);g.createDocumentFragment||(g=G);1===a.length&&"string"===typeof k&&512>k.length&&g===G&&"<"===k.charAt(0)&&!(Wb.test(k)||!s.support.checkClone&&Xa.test(k)||!s.support.html5Clone&&dc.test(k))&&(e=!0,(f=
s.fragments[k])&&1!==f&&(d=f));d||(d=g.createDocumentFragment(),s.clean(a,g,d,c));e&&(s.fragments[k]=f?d:1);return{fragment:d,cacheable:e}};s.fragments={};s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){s.fn[a]=function(c){var d=[];c=s(c);var e=1===this.length&&this[0].parentNode;if(e&&11===e.nodeType&&1===e.childNodes.length&&1===c.length)return c[b](this[0]),this;for(var e=0,f=c.length;e<f;e++){var g=(0<e?this.clone(!0):
this).get();s(c[e])[b](g);d=d.concat(g)}return this.pushStack(d,a,c.selector)}});s.extend({clone:function(b,c,d){var e,f,g;s.support.html5Clone||s.isXMLDoc(b)||!dc.test("<"+b.nodeName+">")?e=b.cloneNode(!0):(e=G.createElement("div"),Nb.appendChild(e),e.innerHTML=b.outerHTML,e=e.firstChild);var k=e;if(!(s.support.noCloneEvent&&s.support.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||s.isXMLDoc(b)))for(a(b,k),e=q(b),f=q(k),g=0;e[g];++g)f[g]&&a(e[g],f[g]);if(c&&(u(b,k),d))for(e=q(b),f=q(k),g=0;e[g];++g)u(e[g],
f[g]);return k},clean:function(a,b,c,d){var e,f=[];b=b||G;"undefined"===typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||G);for(var g=0,k;null!=(k=a[g]);g++)if("number"===typeof k&&(k+=""),k){if("string"===typeof k)if(hc.test(k)){k=k.replace(Fb,"<$1></$2>");e=(Pa.exec(k)||["",""])[1].toLowerCase();var l=sa[e]||sa._default,m=l[0],n=b.createElement("div"),q=Nb.childNodes;b===G?Nb.appendChild(n):p(b).appendChild(n);for(n.innerHTML=l[1]+k+l[2];m--;)n=n.lastChild;if(!s.support.tbody)for(m=
Ra.test(k),l="table"!==e||m?"<table>"!==l[1]||m?[]:n.childNodes:n.firstChild&&n.firstChild.childNodes,e=l.length-1;0<=e;--e)s.nodeName(l[e],"tbody")&&!l[e].childNodes.length&&l[e].parentNode.removeChild(l[e]);!s.support.leadingWhitespace&&sb.test(k)&&n.insertBefore(b.createTextNode(sb.exec(k)[0]),n.firstChild);k=n.childNodes;n&&(n.parentNode.removeChild(n),0<q.length&&(n=q[q.length-1])&&n.parentNode&&n.parentNode.removeChild(n))}else k=b.createTextNode(k);var r;if(!s.support.appendChecked)if(k[0]&&
"number"===typeof(r=k.length))for(e=0;e<r;e++)v(k[e]);else v(k);k.nodeType?f.push(k):f=s.merge(f,k)}if(c)for(a=function(a){return!a.type||tb.test(a.type)},g=0;f[g];g++)b=f[g],d&&s.nodeName(b,"script")&&(!b.type||tb.test(b.type))?d.push(b.parentNode?b.parentNode.removeChild(b):b):(1===b.nodeType&&(k=s.grep(b.getElementsByTagName("script"),a),f.splice.apply(f,[g+1,0].concat(k))),c.appendChild(b));return f},cleanData:function(a){for(var b,c,d=s.cache,e=s.event.special,f=s.support.deleteExpando,g=0,k;null!=
(k=a[g]);g++)if(!k.nodeName||!s.noData[k.nodeName.toLowerCase()])if(c=k[s.expando]){if((b=d[c])&&b.events){for(var l in b.events)e[l]?s.event.remove(k,l):s.removeEvent(k,l,b.handle);b.handle&&(b.handle.elem=null)}f?delete k[s.expando]:k.removeAttribute&&k.removeAttribute(s.expando);delete d[c]}}});var Ka=/alpha\([^)]*\)/i,Gb=/opacity=([^)]*)/,eb=/([A-Z]|^ms)/g,Ab=/^[\-+]?(?:\d*\.)?\d+$/i,Ya=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Na=/^([\-+])=([\-+.\de]+)/,Yb=/^margin/,Ob={position:"absolute",visibility:"hidden",
display:"block"},lb=["Top","Right","Bottom","Left"],db,ha,ta;s.fn.css=function(a,b){return s.access(this,function(a,b,c){return c!==f?s.style(a,b,c):s.css(a,b)},a,b,1<arguments.length)};s.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=db(a,"opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&
3!==a.nodeType&&8!==a.nodeType&&a.style){var e,g=s.camelCase(b),k=a.style,l=s.cssHooks[g];b=s.cssProps[g]||g;if(c!==f){if(d=typeof c,"string"===d&&(e=Na.exec(c))&&(c=+(e[1]+1)*+e[2]+parseFloat(s.css(a,b)),d="number"),!(null==c||"number"===d&&isNaN(c)||("number"!==d||s.cssNumber[g]||(c+="px"),l&&"set"in l&&(c=l.set(a,c))===f)))try{k[b]=c}catch(m){}}else return l&&"get"in l&&(e=l.get(a,!1,d))!==f?e:k[b]}},css:function(a,b,c){var d,e;b=s.camelCase(b);e=s.cssHooks[b];b=s.cssProps[b]||b;"cssFloat"===b&&
(b="float");if(e&&"get"in e&&(d=e.get(a,!0,c))!==f)return d;if(db)return db(a,b)},swap:function(a,b,c){var d={},e;for(e in b)d[e]=a.style[e],a.style[e]=b[e];c=c.call(a);for(e in b)a.style[e]=d[e];return c}});s.curCSS=s.css;G.defaultView&&G.defaultView.getComputedStyle&&(ha=function(a,b){var c,d,e,f=a.style;b=b.replace(eb,"-$1").toLowerCase();(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""!==c||s.contains(a.ownerDocument.documentElement,a)||(c=s.style(a,
b)));!s.support.pixelMargin&&e&&Yb.test(b)&&Ya.test(c)&&(d=f.width,f.width=c,c=e.width,f.width=d);return c});G.documentElement.currentStyle&&(ta=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;null==e&&f&&(c=f[b])&&(e=c);if(Ya.test(e)){c=f.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===b?"1em":e;e=f.pixelLeft+"px";f.left=c;d&&(a.runtimeStyle.left=d)}return""===e?"auto":e});db=ha||ta;s.each(["height","width"],function(a,
b){s.cssHooks[b]={get:function(a,c,d){if(c)return 0!==a.offsetWidth?x(a,b,d):s.swap(a,Ob,function(){return x(a,b,d)})},set:function(a,b){return Ab.test(b)?b+"px":b}}});s.support.opacity||(s.cssHooks.opacity={get:function(a,b){return Gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=s.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&""===s.trim(f.replace(Ka,
""))&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=Ka.test(f)?f.replace(Ka,e):f+" "+e}});s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(a,b){return s.swap(a,{display:"inline-block"},function(){return b?db(a,"margin-right"):a.style.marginRight})}})});s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(a){var b=a.offsetHeight;return 0===a.offsetWidth&&0===b||!s.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||s.css(a,"display"))},
s.expr.filters.visible=function(a){return!s.expr.filters.hidden(a)});s.each({margin:"",padding:"",border:"Width"},function(a,b){s.cssHooks[a+b]={expand:function(c){var d="string"===typeof c?c.split(" "):[c],e={};for(c=0;4>c;c++)e[a+lb[c]+b]=d[c]||d[c-2]||d[0];return e}}});var Fa=/%20/g,ab=/\[\]$/,la=/\r?\n/g,Hb=/#.*$/,Zb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Za=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,vb=/^(?:GET|HEAD)$/,wb=/^\/\//,
bb=/\?/,Jb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,yc=/^(?:select|textarea)/i,Ba=/\s+/,ob=/([?&])_=[^&]*/,La=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Kb=s.fn.load,Pb={},pb={},Bb,fb,ia=["*/"]+["*"];try{Bb=O.href}catch(gb){Bb=G.createElement("a"),Bb.href="",Bb=Bb.href}fb=La.exec(Bb.toLowerCase())||[];s.fn.extend({load:function(a,b,c){if("string"!==typeof a&&Kb)return Kb.apply(this,arguments);if(!this.length)return this;var d=a.indexOf(" ");if(0<=d){var e=a.slice(d,a.length);a=
a.slice(0,d)}d="GET";b&&(s.isFunction(b)?(c=b,b=f):"object"===typeof b&&(b=s.param(b,s.ajaxSettings.traditional),d="POST"));var g=this;s.ajax({url:a,type:d,dataType:"html",data:b,complete:function(a,b,d){d=a.responseText;a.isResolved()&&(a.done(function(a){d=a}),g.html(e?s("<div>").append(d.replace(Jb,"")).find(e):d));c&&g.each(c,[d,b,a])}});return this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||yc.test(this.nodeName)||Za.test(this.type))}).map(function(a,b){var c=s(this).val();return null==c?null:s.isArray(c)?s.map(c,function(a,c){return{name:b.name,value:a.replace(la,"\r\n")}}):{name:b.name,value:c.replace(la,"\r\n")}}).get()}});s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){s.fn[b]=function(a){return this.on(b,a)}});s.each(["get","post"],function(a,b){s[b]=function(a,
c,d,e){s.isFunction(c)&&(e=e||d,d=c,c=f);return s.ajax({type:b,url:a,data:c,success:d,dataType:e})}});s.extend({getScript:function(a,b){return s.get(a,f,b,"script")},getJSON:function(a,b,c){return s.get(a,b,c,"json")},ajaxSetup:function(a,b){b?z(a,s.ajaxSettings):(b=a,a=s.ajaxSettings);z(a,b);return a},ajaxSettings:{url:Bb,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(fb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ia},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":g.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:C(Pb),ajaxTransport:C(pb),ajax:function(a,b){function c(a,b,p,q){if(2!==z){z=2;v&&clearTimeout(v);u=f;r=q||"";F.readyState=0<a?4:
0;var t,A,E;q=b;if(p){var x=d,y=F,L=x.contents,D=x.dataTypes,G=x.responseFields,H,I,J,K;for(I in G)I in p&&(y[G[I]]=p[I]);for(;"*"===D[0];)D.shift(),H===f&&(H=x.mimeType||y.getResponseHeader("content-type"));if(H)for(I in L)if(L[I]&&L[I].test(H)){D.unshift(I);break}if(D[0]in p)J=D[0];else{for(I in p){if(!D[0]||x.converters[I+" "+D[0]]){J=I;break}K||(K=I)}J=J||K}J?(J!==D[0]&&D.unshift(J),p=p[J]):p=void 0}else p=f;if(200<=a&&300>a||304===a){if(d.ifModified){if(H=F.getResponseHeader("Last-Modified"))s.lastModified[n]=
H;if(H=F.getResponseHeader("Etag"))s.etag[n]=H}if(304===a)q="notmodified",t=!0;else try{H=d;H.dataFilter&&(p=H.dataFilter(p,H.dataType));var M=H.dataTypes;I={};var N,O,P=M.length,Q,R=M[0],S,T,U,V,W;for(N=1;N<P;N++){if(1===N)for(O in H.converters)"string"===typeof O&&(I[O.toLowerCase()]=H.converters[O]);S=R;R=M[N];if("*"===R)R=S;else if("*"!==S&&S!==R){T=S+" "+R;U=I[T]||I["* "+R];if(!U)for(V in W=f,I)if(Q=V.split(" "),Q[0]===S||"*"===Q[0])if(W=I[Q[1]+" "+R]){V=I[V];!0===V?U=W:!0===W&&(U=V);break}U||
W||s.error("No conversion from "+T.replace(" "," to "));!0!==U&&(p=U?U(p):W(V(p)))}}A=p;q="success";t=!0}catch(Y){q="parsererror",E=Y}}else if(E=q,!q||a)q="error",0>a&&(a=0);F.status=a;F.statusText=""+(b||q);t?k.resolveWith(e,[A,q,F]):k.rejectWith(e,[F,q,E]);F.statusCode(m);m=f;C&&g.trigger("ajax"+(t?"Success":"Error"),[F,d,t?A:E]);l.fireWith(e,[F,q]);C&&(g.trigger("ajaxComplete",[F,d]),--s.active||s.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=f);b=b||{};var d=s.ajaxSetup({},b),e=d.context||
d,g=e!==d&&(e.nodeType||e instanceof s)?s(e):s.event,k=s.Deferred(),l=s.Callbacks("once memory"),m=d.statusCode||{},n,p={},q={},r,t,u,v,x,z=0,C,D,F={readyState:0,setRequestHeader:function(a,b){if(!z){var c=a.toLowerCase();a=q[c]=q[c]||a;p[a]=b}return this},getAllResponseHeaders:function(){return 2===z?r:null},getResponseHeader:function(a){var b;if(2===z){if(!t)for(t={};b=Zb.exec(r);)t[b[1].toLowerCase()]=b[2];b=t[a.toLowerCase()]}return b===f?null:b},overrideMimeType:function(a){z||(d.mimeType=a);
return this},abort:function(a){a=a||"abort";u&&u.abort(a);c(0,a);return this}};k.promise(F);F.success=F.done;F.error=F.fail;F.complete=l.add;F.statusCode=function(a){if(a){var b;if(2>z)for(b in a)m[b]=[m[b],a[b]];else b=a[F.status],F.then(b,b)}return this};d.url=((a||d.url)+"").replace(Hb,"").replace(wb,fb[1]+"//");d.dataTypes=s.trim(d.dataType||"*").toLowerCase().split(Ba);null==d.crossDomain&&(x=La.exec(d.url.toLowerCase()),d.crossDomain=!(!x||x[1]==fb[1]&&x[2]==fb[2]&&(x[3]||("http:"===x[1]?80:
443))==(fb[3]||("http:"===fb[1]?80:443))));d.data&&d.processData&&"string"!==typeof d.data&&(d.data=s.param(d.data,d.traditional));y(Pb,d,b,F);if(2===z)return!1;C=d.global;d.type=d.type.toUpperCase();d.hasContent=!vb.test(d.type);C&&0===s.active++&&s.event.trigger("ajaxStart");if(!d.hasContent&&(d.data&&(d.url+=(bb.test(d.url)?"&":"?")+d.data,delete d.data),n=d.url,!1===d.cache)){x=s.now();var G=d.url.replace(ob,"$1_="+x);d.url=G+(G===d.url?(bb.test(d.url)?"&":"?")+"_="+x:"")}(d.data&&d.hasContent&&
!1!==d.contentType||b.contentType)&&F.setRequestHeader("Content-Type",d.contentType);d.ifModified&&(n=n||d.url,s.lastModified[n]&&F.setRequestHeader("If-Modified-Since",s.lastModified[n]),s.etag[n]&&F.setRequestHeader("If-None-Match",s.etag[n]));F.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+ia+"; q=0.01":""):d.accepts["*"]);for(D in d.headers)F.setRequestHeader(D,d.headers[D]);if(d.beforeSend&&(!1===d.beforeSend.call(e,F,
d)||2===z))return F.abort(),!1;for(D in{success:1,error:1,complete:1})F[D](d[D]);if(u=y(pb,d,b,F)){F.readyState=1;C&&g.trigger("ajaxSend",[F,d]);d.async&&0<d.timeout&&(v=setTimeout(function(){F.abort("timeout")},d.timeout));try{z=1,u.send(p,c)}catch(H){if(2>z)c(-1,H);else throw H;}}else c(-1,"No Transport");return F},param:function(a,b){var c=[],d=function(a,b){b=s.isFunction(b)?b():b;c[c.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===f&&(b=s.ajaxSettings.traditional);if(s.isArray(a)||
a.jquery&&!s.isPlainObject(a))s.each(a,function(){d(this.name,this.value)});else for(var e in a)D(e,a[e],b,d);return c.join("&").replace(Fa,"+")}});s.extend({active:0,lastModified:{},etag:{}});var qc=s.now(),Lb=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+qc++}});s.ajaxPrefilter("json jsonp",function(a,b,c){b="string"===typeof a.data&&/^application\/x\-www\-form\-urlencoded/.test(a.contentType);if("jsonp"===a.dataTypes[0]||!1!==a.jsonp&&(Lb.test(a.url)||
b&&Lb.test(a.data))){var d,e=a.jsonpCallback=s.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,f=g[e],k=a.url,l=a.data,m="$1"+e+"$2";!1!==a.jsonp&&(k=k.replace(Lb,m),a.url===k&&(b&&(l=l.replace(Lb,m)),a.data===l&&(k+=(/\?/.test(k)?"&":"?")+a.jsonp+"="+e)));a.url=k;a.data=l;g[e]=function(a){d=[a]};c.always(function(){g[e]=f;if(d&&s.isFunction(f))g[e](d[0])});a.converters["script json"]=function(){d||s.error(e+" was not called");return d[0]};a.dataTypes[0]="json";return"script"}});s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){s.globalEval(a);return a}}});s.ajaxPrefilter("script",function(a){a.cache===f&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});s.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=G.head||G.getElementsByTagName("head")[0]||G.documentElement;return{send:function(d,e){b=G.createElement("script");b.async="async";a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,
d){if(d||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,c&&b.parentNode&&c.removeChild(b),b=f,d||e(200,"success")};c.insertBefore(b,c.firstChild)},abort:function(){if(b)b.onload(0,1)}}}});var xb=g.ActiveXObject?function(){for(var a in Cb)Cb[a](0,1)}:!1,fc=0,Cb;s.ajaxSettings.xhr=g.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&F()))a:{try{a=new g.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:F;(function(a){s.extend(s.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(s.ajaxSettings.xhr());s.support.ajax&&s.ajaxTransport(function(a){if(!a.crossDomain||s.support.cors){var b;return{send:function(c,d){var e=a.xhr(),k,l;a.username?e.open(a.type,a.url,a.async,a.username,a.password):e.open(a.type,a.url,a.async);if(a.xhrFields)for(l in a.xhrFields)e[l]=a.xhrFields[l];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");try{for(l in c)e.setRequestHeader(l,
c[l])}catch(m){}e.send(a.hasContent&&a.data||null);b=function(c,g){var l,m,n,p,q;try{if(b&&(g||4===e.readyState))if(b=f,k&&(e.onreadystatechange=s.noop,xb&&delete Cb[k]),g)4!==e.readyState&&e.abort();else{l=e.status;n=e.getAllResponseHeaders();p={};(q=e.responseXML)&&q.documentElement&&(p.xml=q);try{p.text=e.responseText}catch(r){}try{m=e.statusText}catch(t){m=""}l||!a.isLocal||a.crossDomain?1223===l&&(l=204):l=p.text?200:404}}catch(u){g||d(-1,u)}p&&d(l,m,p,n)};a.async&&4!==e.readyState?(k=++fc,xb&&
(Cb||(Cb={},s(g).unload(xb)),Cb[k]=b),e.onreadystatechange=b):b()},abort:function(){b&&b(0,1)}}}});var cb={},Qa,kb,Oa=/^(?:toggle|show|hide)$/,fa=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Ua,ub=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],qb;s.fn.extend({show:function(a,b,c){if(a||0===a)return this.animate(I("show",3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=a.style.display,s._data(a,
"olddisplay")||"none"!==b||(b=a.style.display=""),(""===b&&"none"===s.css(a,"display")||!s.contains(a.ownerDocument.documentElement,a))&&s._data(a,"olddisplay",J(a.nodeName)));for(c=0;c<d;c++)if(a=this[c],a.style&&(b=a.style.display,""===b||"none"===b))a.style.display=s._data(a,"olddisplay")||"";return this},hide:function(a,b,c){if(a||0===a)return this.animate(I("hide",3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=s.css(a,"display"),"none"===b||s._data(a,"olddisplay")||s._data(a,
"olddisplay",b));for(c=0;c<d;c++)this[c].style&&(this[c].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(a,b,c){var d="boolean"===typeof a;s.isFunction(a)&&s.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:s(this).is(":hidden");s(this)[b?"show":"hide"]()}):this.animate(I("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,
b,c,d){function e(){!1===f.queue&&s._mark(this);var b=s.extend({},f),c=1===this.nodeType,d=c&&s(this).is(":hidden"),g,k,l,m,n;b.animatedProperties={};for(l in a)if(g=s.camelCase(l),l!==g&&(a[g]=a[l],delete a[l]),(k=s.cssHooks[g])&&"expand"in k)for(l in m=k.expand(a[g]),delete a[g],m)l in a||(a[l]=m[l]);for(g in a){k=a[g];s.isArray(k)?(b.animatedProperties[g]=k[1],k=a[g]=k[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if("hide"===k&&d||"show"===k&&!d)return b.complete.call(this);
!c||"height"!==g&&"width"!==g||(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===s.css(this,"display")&&"none"===s.css(this,"float")&&(s.support.inlineBlockNeedsLayout&&"inline"!==J(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=b.overflow&&(this.style.overflow="hidden");for(l in a)if(c=new s.fx(this,b,l),k=a[l],Oa.test(k))if(g=s._data(this,"toggle"+l)||("toggle"===k?d?"show":"hide":0))s._data(this,"toggle"+l,"show"===g?"hide":"show"),
c[g]();else c[k]();else g=fa.exec(k),m=c.cur(),g?(k=parseFloat(g[2]),n=g[3]||(s.cssNumber[l]?"":"px"),"px"!==n&&(s.style(this,l,(k||1)+n),m*=(k||1)/c.cur(),s.style(this,l,m+n)),g[1]&&(k=("-="===g[1]?-1:1)*k+m),c.custom(m,k,n)):c.custom(m,k,"");return!0}var f=s.speed(b,c,d);if(s.isEmptyObject(a))return this.each(f.complete,[!1]);a=s.extend({},a);return!1===f.queue?this.each(e):this.queue(f.queue,e)},stop:function(a,b,c){"string"!==typeof a&&(c=b,b=a,a=f);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b,
d=!1,e=s.timers,f=s._data(this);c||s._unmark(!0,this);if(null==a)for(b in f){if(f[b]&&f[b].stop&&b.indexOf(".run")===b.length-4){var g=f[b];s.removeData(this,b,!0);g.stop(c)}}else f[b=a+".run"]&&f[b].stop&&(f=f[b],s.removeData(this,b,!0),f.stop(c));for(b=e.length;b--;)if(e[b].elem===this&&(null==a||e[b].queue===a)){if(c)e[b](!0);else e[b].saveState();d=!0;e.splice(b,1)}c&&d||s.dequeue(this,a)})}});s.each({slideDown:I("show",1),slideUp:I("hide",1),slideToggle:I("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){s.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});s.extend({speed:function(a,b,c){var d=a&&"object"===typeof a?s.extend({},a):{complete:c||!c&&b||s.isFunction(a)&&a,duration:a,easing:c&&b||b&&!s.isFunction(b)&&b};d.duration=s.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in s.fx.speeds?s.fx.speeds[d.duration]:s.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(a){s.isFunction(d.old)&&
d.old.call(this);d.queue?s.dequeue(this,d.queue):!1!==a&&s._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,b=s.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,b,c){function d(a){return e.step(a)}var e=this,g=s.fx;this.startTime=qb||H();this.end=b;this.now=this.start=a;this.pos=this.state=0;this.unit=c||this.unit||(s.cssNumber[this.prop]?"":"px");d.queue=this.options.queue;d.elem=this.elem;d.saveState=function(){s._data(e.elem,"fxshow"+e.prop)===f&&(e.options.hide?s._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&s._data(e.elem,"fxshow"+e.prop,e.end))};
d()&&s.timers.push(d)&&!Ua&&(Ua=setInterval(g.tick,g.interval))},show:function(){var a=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||s.style(this.elem,this.prop);this.options.show=!0;a!==f?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b,
c=qb||H(),d=!0,e=this.elem,f=this.options;if(a||c>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=!0;for(b in f.animatedProperties)!0!==f.animatedProperties[b]&&(d=!1);if(d){null==f.overflow||s.support.shrinkWrapBlocks||s.each(["","X","Y"],function(a,b){e.style["overflow"+b]=f.overflow[a]});f.hide&&s(e).hide();if(f.hide||f.show)for(b in f.animatedProperties)s.style(e,b,f.orig[b]),s.removeData(e,"fxshow"+b,!0),s.removeData(e,"toggle"+
b,!0);if(a=f.complete)f.complete=!1,a.call(e)}return!1}Infinity==f.duration?this.now=c:(a=c-this.startTime,this.state=a/f.duration,this.pos=s.easing[f.animatedProperties[this.prop]](this.state,a,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};s.extend(s.fx,{tick:function(){for(var a,b=s.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||s.fx.stop()},interval:13,stop:function(){clearInterval(Ua);Ua=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){s.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});s.each(ub.concat.apply([],ub),function(a,b){b.indexOf("margin")&&(s.fx.step[b]=function(a){s.style(a.elem,b,Math.max(0,a.now)+a.unit)})});s.expr&&s.expr.filters&&(s.expr.filters.animated=function(a){return s.grep(s.timers,function(b){return a===b.elem}).length});var Sb,Wa=/^t(?:able|d|h)$/i,Tb=/^(?:body|html)$/i;
Sb="getBoundingClientRect"in G.documentElement?function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!s.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};a=b.body;b=K(b);return{top:d.top+(b.pageYOffset||s.support.boxModel&&c.scrollTop||a.scrollTop)-(c.clientTop||a.clientTop||0),left:d.left+(b.pageXOffset||s.support.boxModel&&c.scrollLeft||a.scrollLeft)-(c.clientLeft||a.clientLeft||0)}}:function(a,b,c){var d,e=a.offsetParent,f=b.body;d=(b=b.defaultView)?b.getComputedStyle(a,
null):a.currentStyle;for(var g=a.offsetTop,k=a.offsetLeft;(a=a.parentNode)&&a!==f&&a!==c&&(!s.support.fixedPosition||"fixed"!==d.position);)d=b?b.getComputedStyle(a,null):a.currentStyle,g-=a.scrollTop,k-=a.scrollLeft,a===e&&(g+=a.offsetTop,k+=a.offsetLeft,!s.support.doesNotAddBorder||s.support.doesAddBorderForTableAndCells&&Wa.test(a.nodeName)||(g+=parseFloat(d.borderTopWidth)||0,k+=parseFloat(d.borderLeftWidth)||0),e=a.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&"visible"!==d.overflow&&
(g+=parseFloat(d.borderTopWidth)||0,k+=parseFloat(d.borderLeftWidth)||0);if("relative"===d.position||"static"===d.position)g+=f.offsetTop,k+=f.offsetLeft;s.support.fixedPosition&&"fixed"===d.position&&(g+=Math.max(c.scrollTop,f.scrollTop),k+=Math.max(c.scrollLeft,f.scrollLeft));return{top:g,left:k}};s.fn.offset=function(a){if(arguments.length)return a===f?this:this.each(function(b){s.offset.setOffset(this,a,b)});var b=this[0],c=b&&b.ownerDocument;return c?b===c.body?s.offset.bodyOffset(b):Sb(b,c,
c.documentElement):null};s.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;s.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(s.css(a,"marginTop"))||0,c+=parseFloat(s.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=s.css(a,"position");"static"===d&&(a.style.position="relative");var e=s(a),f=e.offset(),g=s.css(a,"top"),k=s.css(a,"left"),l={},m={};("absolute"===d||"fixed"===d)&&-1<s.inArray("auto",[g,k])?(m=e.position(),d=m.top,k=m.left):(d=parseFloat(g)||
0,k=parseFloat(k)||0);s.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(l.top=b.top-f.top+d);null!=b.left&&(l.left=b.left-f.left+k);"using"in b?b.using.call(a,l):e.css(l)}};s.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=Tb.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(s.css(a,"marginTop"))||0;c.left-=parseFloat(s.css(a,"marginLeft"))||0;d.top+=parseFloat(s.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(s.css(b[0],
"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||G.body;a&&!Tb.test(a.nodeName)&&"static"===s.css(a,"position");)a=a.offsetParent;return a})}});s.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);s.fn[a]=function(d){return s.access(this,function(a,d,e){var g=K(a);if(e===f)return g?b in g?g[b]:s.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:a[d];
g?g.scrollTo(c?s(g).scrollLeft():e,c?e:s(g).scrollTop()):a[d]=e},a,d,arguments.length,null)}});s.each({Height:"height",Width:"width"},function(a,b){var c="client"+a,d="scroll"+a,e="offset"+a;s.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(s.css(a,b,"padding")):this[b]():null};s.fn["outer"+a]=function(a){var c=this[0];return c?c.style?parseFloat(s.css(c,b,a?"margin":"border")):this[b]():null};s.fn[b]=function(a){return s.access(this,function(a,b,g){if(s.isWindow(a))return b=a.document,
a=b.documentElement[c],s.support.boxModel&&a||b.body&&b.body[c]||a;if(9===a.nodeType)return b=a.documentElement,b[c]>=b[d]?b[c]:Math.max(a.body[d],b[d],a.body[e],b[e]);if(g===f)return a=s.css(a,b),b=parseFloat(a),s.isNumeric(b)?b:a;s(a).css(b,g)},b,a,arguments.length,null)}});g.jQuery=g.$=s;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s});s.support.getSetAttribute||(s.removeAttr=function(a,b){"class"===b&&(b="className");a.removeAttribute(b)})})(window);
dojoConfig={paths:{aloha:"../../aloha/src/lib/aloha",i18n:"../../aloha/src/lib/i18n",util:"../../aloha/src/lib/util",vendor:"../../aloha/src/lib/vendor",PubSub:"../../aloha/src/lib/vendor/pubsub/js/pubsub-unminified",Class:"../../aloha/src/lib/vendor/class"}};Aloha={settings:{sidebar:{disabled:!0}}};
(function(g,f){var n=function(){},m=function(a){for(var b in a)return 0;return 1},k={}.toString,e=function(a){return"[object Function]"==k.call(a)},l=function(a){return"[object String]"==k.call(a)},d=function(a){return"[object Array]"==k.call(a)},c=function(a,b){if(a)for(var c=0;a[c];)b(a[c++])},b=function(a,b){for(var c in b)a[c]=b[c];return a},p=function(a,c){return b(Error(a),{src:"dojoLoader",info:c})},r=1,u=function(){return"_"+r++},a=function(b,c,d){return tb(b,c,d,0,a)},q=this,t=q.document,
v=t&&t.createElement("DiV"),x=a.has=function(a){return e(C[a])?C[a]=C[a](q,t,v):C[a]},C=x.cache=f.hasCache;x.add=function(a,b,c,d){(void 0===C[a]||d)&&(C[a]=b);return c&&x(a)};x.add("host-node",g.has&&"host-node"in g.has?g.has["host-node"]:"object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8);x("host-node")&&(require("./_base/configNode.js").config(f),f.loaderPatch.nodeRequire=require);x.add("host-rhino",g.has&&"host-rhino"in g.has?g.has["host-rhino"]:"function"==
typeof load&&("function"==typeof Packages||"object"==typeof Packages));if(x("host-rhino")){for(var y=g.baseUrl||".",z,D=this.arguments,F=0;F<D.length;)if(z=(D[F++]+"").split("="),"baseUrl"==z[0]){y=z[1];break}load(y+"/_base/configRhino.js");rhinoDojoConfig(f,y,D)}for(var H in g.has)x.add(H,g.has[H],0,1);var M=1,I=2,J=3,K=4,G=5;x("dojo-trace-api")&&(M="requested",I="arrived",J="not-a-module",K="executing",G="executed");var S=0,O=[],s=0,T=n,Q=n,U;if(x("dojo-sync-loader")){if(a.isXdUrl=n,a.initSyncLoader=
function(a,b,c){s||(s=a,T=b,Q=c);return{sync:"sync",requested:M,arrived:I,nonmodule:J,executing:K,executed:G,syncExecStack:O,modules:Y,execQ:sa,getModule:ta,injectModule:xb,setArrived:eb,signal:W,finishExec:Ba,execModule:La,dojoRequirePlugin:s,getLegacyMode:function(){return S},guardCheckComplete:Pb}},x("dom")){var N=location.protocol,V=location.host;a.isXdUrl=function(a){return/^\./.test(a)?!1:/^\/\//.test(a)?!0:(a=a.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(a[1]!=N||V&&a[2]!=V)};x.add("dojo-xhr-factory",
1);x.add("dojo-force-activex-xhr",x("host-browser")&&!t.addEventListener&&"file:"==window.location.protocol);x.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(x("native-xhr")&&!x("dojo-force-activex-xhr"))U=function(){return new XMLHttpRequest};else{for(var P=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],aa,F=0;3>F;)try{if(aa=P[F++],new ActiveXObject(aa))break}catch(ea){}U=function(){return new ActiveXObject(aa)}}a.getXhr=U;x.add("dojo-gettext-api",1);a.getText=function(a,b,
c){var d=U();d.open("GET",Bb(a),!1);d.send(null);if(200==d.status||!location.host&&!d.status)c&&c(d.responseText,b);else throw p("xhrFailed",d.status);return d.responseText}}}else a.async=1;var ga=new Function("return eval(arguments[0]);");a.eval=function(a,b){return ga(a+"\r\n////@ sourceURL="+b)};var na={},W=a.signal=function(a,b){var e=na[a];c(e&&e.slice(0),function(a){a.apply(null,d(b)?b:[b])})},Z=a.on=function(a,b){var c=na[a]||(na[a]=[]);c.push(b);return{remove:function(){for(var a=0;a<c.length;a++)if(c[a]===
b){c.splice(a,1);break}}}},ca=[],ja={},R=[],ya={},Ha=a.map={},va=[],Y={},Ca="",za={},Da={},ra={},Ea=0;if(x("dojo-config-api")){var Va=function(a){var b,c,d,e;for(b in Da)c=Da[b],(d=b.match(/^url\:(.+)/))?za["url:"+ab(d[1],a)]=c:"*now"==b?e=c:"*noref"!=b&&(d=lb(b,a),za[d.mid]=za["url:"+d.url]=c);e&&e(xa(a));Da={}},rb=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},Ta=function(a,b){b.splice(0,b.length);for(var c in a)b.push([c,a[c],RegExp("^"+rb(c)+"(/|$)"),c.length]);
b.sort(function(a,b){return b[3]-a[3]});return b},zb=function(a,b){c(a,function(a){b.push([l(a[0])?RegExp("^"+rb(a[0])+"$"):a[0],a[1]])})},ba=function(a){var c=a.name;c||(c=a,a={name:c});a=b({main:"main"},a);a.location=a.location?a.location:c;a.packageMap&&(Ha[c]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));ya[c]=a},Ia=[],ua=function(d,e,f){for(var g in d){"waitSeconds"==g&&(a.waitms=1E3*(d[g]||0));"cacheBust"==g&&(Ca=d[g]?l(d[g])?d[g]:(new Date).getTime()+"":"");if("baseUrl"==
g||"combo"==g)a[g]=d[g];if(x("dojo-sync-loader")&&"async"==g){var k=d[g];a.legacyMode=S=l(k)&&/sync|legacyAsync/.test(k)?k:k?!1:"sync";a.async=!S}d[g]!==C&&(a.rawConfig[g]=d[g],"has"!=g&&x.add("config-"+g,d[g],0,e))}a.baseUrl||(a.baseUrl="./");/\/$/.test(a.baseUrl)||(a.baseUrl+="/");for(g in d.has)x.add(g,d.has[g],0,e);c(d.packages,ba);for(y in d.packagePaths)c(d.packagePaths[y],function(a){var b=y+"/"+a;l(a)&&(a={name:a});a.location=b;ba(a)});Ta(b(Ha,d.map),va);c(va,function(a){a[1]=Ta(a[1],[]);
"*"==a[0]&&(va.star=a)});Ta(b(ja,d.paths),R);zb(d.aliases,ca);if(e)Ia.push({config:d.config});else for(g in d.config)e=ta(g,f),e.config=b(e.config||{},d.config[g]);d.cache&&(Va(),Da=d.cache,d.cache["*noref"]&&Va());W("config",[d,a.rawConfig])};if(x("dojo-cdn")||x("dojo-sniff"))for(var Ja=t.getElementsByTagName("script"),F=0,jb,sb,Fb,Pa;F<Ja.length;){jb=Ja[F++];(Fb=jb.getAttribute("src"))&&(Pa=Fb.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(sb=Pa[3]||"",f.baseUrl=f.baseUrl||sb,Ea=jb);if(Fb=jb.getAttribute("data-dojo-config")||
jb.getAttribute("djConfig"))ra=a.eval("({ "+Fb+" })","data-dojo-config"),Ea=jb;x("dojo-requirejs-api")&&(Fb=jb.getAttribute("data-main"))&&(ra.deps=ra.deps||[Fb])}if(x("dojo-test-sniff"))try{if(window.parent!=window&&window.parent.require){var Ra=window.parent.require("doh");Ra&&b(ra,Ra.testConfig)}}catch(hc){}a.rawConfig={};ua(f,1);x("dojo-cdn")&&((ya.dojo.location=sb)&&(sb+="/"),ya.dijit.location=sb+"../dijit/",ya.dojox.location=sb+"../dojox/");ua(g,1);ua(ra,1)}else ja=f.paths,R=f.pathsMapProg,
ya=f.packs,ca=f.aliases,va=f.mapProgs,Y=f.modules,za=f.cache,Ca=f.cacheBust,a.rawConfig=f;if(x("dojo-combo-api")){a.combo=a.combo||{add:n};var Sa=0,Wb=[],dc=null}var Xa=function(b){Pb(function(){c(b.deps,xb);x("dojo-combo-api")&&Sa&&!dc&&(dc=setTimeout(function(){Sa=0;dc=null;a.combo.done(function(b,c){Wb.push(b);gb=b;a.injectUrl(c,function(){Cb(0,b);pb()},b);gb=0},a)},0))})},tb=function(c,e,f,g,k){var m;if(l(c)){if((m=ta(c,g,!0))&&m.executed)return m.result;throw p("undefinedModule",c);}d(c)||(ua(c,
0,g),c=e,e=f);if(d(c))if(c.length){f="require*"+u();for(var q,r=[],s=0;s<c.length;)q=c[s++],r.push(ta(q,g));m=b(Yb("",f,0,""),{injected:I,deps:r,def:e||n,require:g?g.require:a,gc:1});Y[m.mid]=m;Xa(m);var t=Kb&&"sync"!=S;Pb(function(){La(m,t)});m.executed||sa.push(m);pb()}else e&&e();return k},xa=function(c){if(!c)return a;var d=c.require;d||(d=function(a,b,e){return tb(a,b,e,c,d)},c.require=b(d,a),d.module=c,d.toUrl=function(a){return ab(a,c)},d.toAbsMid=function(a){return Fa(a,c)},x("dojo-undef-api")&&
(d.undef=function(b){a.undef(b,c)}),x("dojo-sync-loader")&&(d.syncLoadNls=function(a){a=lb(a,c);var b=Y[a.mid];if(!b||!b.executed)if(ia=za[a.mid]||za["url:"+a.url])Lb(ia),b=Y[a.mid];return b&&b.executed&&b.result}));return d},sa=[],Nb=[],Ka={},Gb=function(a){a.injected=M;Ka[a.mid]=1;a.url&&(Ka[a.url]=a.pack||1);kb()},eb=function(a){a.injected=I;delete Ka[a.mid];a.url&&delete Ka[a.url];m(Ka)&&(Qa(),x("dojo-sync-loader")&&"xd"==S&&(S="sync"))},Ab=a.idle=function(){return!Nb.length&&m(Ka)&&!sa.length&&
!Kb},Ya=function(a,b){if(b)for(var c=0;c<b.length;c++)if(b[c][2].test(a))return b[c];return 0},Na=function(a){var b=[],c,d;for(a=a.replace(/\\/g,"/").split("/");a.length;)c=a.shift(),".."==c&&b.length&&".."!=d?(b.pop(),d=b[b.length-1]):"."!=c&&b.push(d=c);return b.join("/")},Yb=function(b,c,d,e){if(x("dojo-sync-loader")){var f=a.isXdUrl(e);return{pid:b,mid:c,pack:d,url:e,executed:0,def:0,isXd:f,isAmd:!!(f||ya[b]&&ya[b].isAmd)}}return{pid:b,mid:c,pack:d,url:e,executed:0,def:0}},Ob=function(a,b,d,f,
g,k,l,m,n){var q,r,s,t;t=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||t&&!b)return Yb(0,a,0,a);a=Na(t?b.mid+"/../"+a:a);if(/^\./.test(a))throw p("irrationalPath",a);b&&(s=Ya(b.mid,k));(s=(s=s||k.star)&&Ya(a,s[1]))&&(a=s[1]+a.substring(s[3]));b=(Pa=a.match(/^([^\/]+)(\/(.+))?$/))?Pa[1]:"";(q=d[b])?a=b+"/"+(r=Pa[3]||q.main):b="";var u=0;c(m,function(b){var c=a.match(b[0]);c&&0<c.length&&(u=e(b[1])?a.replace(b[0],b[1]):b[1])});if(u)return Ob(u,0,d,f,g,k,l,m,n);if(d=f[a])return n?Yb(d.pid,d.mid,d.pack,
d.url):f[a];f=(s=Ya(a,l))?s[1]+a.substring(s[3]):b?q.location+"/"+r:x("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(f)||(f=g+f);return Yb(b,a,q,Na(f+".js"))},lb=function(b,c){return Ob(b,c,ya,Y,a.baseUrl,va,R,ca)},db=function(a,b,c){return a.normalize?a.normalize(b,function(a){return Fa(a,c)}):Fa(b,c)},ha=0,ta=function(a,b,c){var d,e;(d=a.match(/^(.+?)\!(.*)$/))?(e=ta(d[1],b,c),x("dojo-sync-loader")&&"sync"==S&&!e.executed&&(xb(e),e.injected!==I||e.executed||Pb(function(){La(e)}),e.executed?
Jb(e):sa.unshift(e)),e.executed!==G||e.load||Jb(e),e.load?(d=db(e,d[2],b),a=e.mid+"!"+(e.dynamic?++ha+"!":"")+d):(d=d[2],a=e.mid+"!"+ ++ha+"!waitingForPlugin"),a={plugin:e,mid:a,req:xa(b),prid:d}):a=lb(a,b);return Y[a.mid]||!c&&(Y[a.mid]=a)},Fa=a.toAbsMid=function(a,b){return lb(a,b).mid},ab=a.toUrl=function(a,b){var c=lb(a+"/x",b),d=c.url;return Bb(0===c.pid?a:d.substring(0,d.length-5))},la={injected:I,executed:G,def:J,result:J},Hb=function(a){return Y[a]=b({mid:a},la)},Zb=Hb("require"),Za=Hb("exports"),
vb=Hb("module"),wb={},bb=0,Jb=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},yc=function(a){var d={};c(a.loadQ,function(c){var e=db(a,c.prid,c.req.module),f=a.dynamic?c.mid.replace(/waitingForPlugin$/,e):a.mid+"!"+e,e=b(b({},c),{mid:f,prid:e,injected:0});Y[f]||fb(Y[f]=e);d[c.mid]=Y[f];eb(c);delete Y[c.mid]});a.loadQ=0;var e=function(a){for(var b=a.deps||[],c=0;c<b.length;c++)(a=d[b[c].mid])&&(b[c]=a)},f;for(f in Y)e(Y[f]);c(sa,e)},Ba=function(b){a.trace("loader-finish-exec",
[b.mid]);b.executed=G;b.defOrder=bb++;x("dojo-sync-loader")&&c(b.provides,function(a){a()});b.loadQ&&(Jb(b),yc(b));for(F=0;F<sa.length;)sa[F]===b?sa.splice(F,1):F++;/^require\*/.test(b.mid)&&delete Y[b.mid]},ob=[],La=function(b,c){if(b.executed===K)return a.trace("loader-circular-dependency",[ob.concat(b.mid).join("->")]),!b.def||c?wb:b.cjs&&b.cjs.exports;if(!b.executed){if(!b.def)return wb;var d=b.mid,f=b.deps||[],g,k=[],l=0;x("dojo-trace-api")&&(ob.push(d),a.trace("loader-exec-module",["exec",ob.length,
d]));for(b.executed=K;g=f[l++];){g=g===Zb?xa(b):g===Za?b.cjs.exports:g===vb?b.cjs:La(g,c);if(g===wb)return b.executed=0,a.trace("loader-exec-module",["abort",d]),x("dojo-trace-api")&&ob.pop(),wb;k.push(g)}a.trace("loader-run-factory",[b.mid]);var d=b.def,m;x("dojo-sync-loader")&&O.unshift(b);if(x("config-dojo-loader-catches"))try{m=e(d)?d.apply(null,k):d}catch(n){W("error",b.result=p("factoryThrew",[b,n]))}else m=e(d)?d.apply(null,k):d;b.result=void 0===m&&b.cjs?b.cjs.exports:m;x("dojo-sync-loader")&&
O.shift(b);Ba(b);x("dojo-trace-api")&&ob.pop()}return b.result},Kb=0,Pb=function(a){try{Kb++,a()}finally{Kb--}Ab()&&W("idle",[])},pb=function(){Kb||Pb(function(){T();for(var a,b,c=0;c<sa.length;)a=bb,b=sa[c],La(b),a!=bb?(T(),c=0):c++})};x("dojo-undef-api")&&(a.undef=function(a,c){var d=ta(a,c);eb(d);b(d,{def:0,executed:0,injected:0,node:0})});if(x("dojo-inject-api")){void 0===x("dojo-loader-eval-hint-url")&&x.add("dojo-loader-eval-hint-url",1);var Bb=function(a){a+="";return a+(Ca?(/\?/.test(a)?"&":
"?")+Ca:"")},fb=function(a){var b=a.plugin;b.executed!==G||b.load||Jb(b);var c=function(b){a.result=b;eb(a);Ba(a);pb()};b.load?b.load(a.prid,a.req,c):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],sa.unshift(b),xb(b))},ia=0,gb=0,qc=0,Lb=function(b,c){x("config-stripStrict")&&(b=b.replace(/"use strict"/g,""));qc=1;if(x("config-dojo-loader-catches"))try{b===ia?ia.call(null):a.eval(b,x("dojo-loader-eval-hint-url")?c.url:c.mid)}catch(d){W("error",p("evalModuleThrew",c))}else b===ia?ia.call(null):a.eval(b,x("dojo-loader-eval-hint-url")?
c.url:c.mid);qc=0},xb=function(d){var e=d.mid,f=d.url;if(!(d.executed||d.injected||Ka[e]||d.url&&(d.pack&&Ka[d.url]===d.pack||1==Ka[d.url]))){Gb(d);if(x("dojo-combo-api")){var g=0;d.plugin&&d.plugin.isCombo?(a.combo.add(d.plugin.mid,d.prid,0,a),g=1):d.plugin||(g=a.combo.add(0,d.mid,d.url,a));if(g){Sa=1;return}}if(d.plugin)fb(d);else{var k=function(){Cb(d);if(d.injected!==I){if(x("dojo-enforceDefine")){W("error",p("noDefine",d));return}eb(d);b(d,la);a.trace("loader-define-nonmodule",[d.url])}x("dojo-sync-loader")&&
S?!O.length&&pb():pb()};if(ia=za[e]||za["url:"+d.url])a.trace("loader-inject",["cache",d.mid,f]),Lb(ia,d),k();else{if(x("dojo-sync-loader")&&S)if(d.isXd)"sync"==S&&(S="xd");else if(!d.isAmd||"sync"==S){g=function(b){if("sync"==S){O.unshift(d);Lb(b,d);O.shift();Cb(d);d.cjs||(eb(d),Ba(d));if(d.finish){b=e+"*finish";var g=d.finish;delete d.finish;ub(b,["dojo",("dojo/require!"+g.join(",")).replace(/\./g,"/")],function(a){c(g,function(b){a.require(b)})});sa.unshift(ta(b))}k()}else(b=Q(d,b))?(Lb(b,d),k()):
(gb=d,a.injectUrl(Bb(f),k,d),gb=0)};a.trace("loader-inject",["xhr",d.mid,f,"sync"!=S]);if(x("config-dojo-loader-catches"))try{a.getText(f,"sync"!=S,g)}catch(l){W("error",p("xhrInjectFailed",[d,l]))}else a.getText(f,"sync"!=S,g);return}a.trace("loader-inject",["script",d.mid,f]);gb=d;a.injectUrl(Bb(f),k,d);gb=0}}}},fc=function(c,d,f){a.trace("loader-define-module",[c.mid,d]);if(x("dojo-combo-api")&&c.plugin&&c.plugin.isCombo)return c.result=e(f)?f():f,eb(c),Ba(c),c;var g=c.mid;if(c.injected===I)return W("error",
p("multipleDefine",c)),c;b(c,{deps:d,def:f,cjs:{id:c.mid,uri:c.url,exports:c.result={},setExports:function(a){c.cjs.exports=a},config:function(){return c.config}}});for(var k=0;d[k];k++)d[k]=ta(d[k],c);x("dojo-sync-loader")&&S&&!Ka[g]&&(Xa(c),sa.push(c),pb());eb(c);e(f)||d.length||(c.result=f,Ba(c));return c},Cb=function(a,b){for(var d=[],e,f;Nb.length;)f=Nb.shift(),b&&(f[0]=b.shift()),e=f[0]&&ta(f[0])||a,d.push([e,f[1],f[2]]);Va(a);c(d,function(a){Xa(fc.apply(null,a))})}}var cb=0,Qa=n,kb=n;x("dojo-timeout-api")&&
(Qa=function(){cb&&clearTimeout(cb);cb=0},kb=function(){Qa();a.waitms&&(cb=window.setTimeout(function(){Qa();W("error",p("timeout",Ka))},a.waitms))});x("dom")&&x.add("ie-event-behavior",t.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));if(x("dom")&&(x("dojo-inject-api")||x("dojo-dom-ready-api"))){var Oa=function(a,b,c,d){if(x("ie-event-behavior"))return a.attachEvent(c,d),function(){a.detachEvent(c,d)};a.addEventListener(b,d,!1);return function(){a.removeEventListener(b,
d,!1)}},fa=Oa(window,"load","onload",function(){a.pageLoaded=1;"complete"!=t.readyState&&(t.readyState="complete");fa()});if(x("dojo-inject-api")){Ja=t.getElementsByTagName("script");for(F=0;!Ea;)/^dojo/.test((jb=Ja[F++])&&jb.type)||(Ea=jb);a.injectUrl=function(a,b,c){c=c.node=t.createElement("script");var d=Oa(c,"load","onreadystatechange",function(a){a=a||window.event;var c=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(c.readyState))d(),e(),b&&b()}),e=Oa(c,"error","onerror",
function(b){d();e();W("error",p("scriptError",[a,b]))});c.type="text/javascript";c.charset="utf-8";c.src=a;Ea.parentNode.insertBefore(c,Ea);return c}}}x("dojo-log-api")?a.log=function(){try{for(var a=0;a<arguments.length;a++)console.log(arguments[a])}catch(b){}}:a.log=n;if(x("dojo-trace-api")){var Ua=a.trace=function(b,c){if(Ua.on&&Ua.group[b]){W("trace",[b,c]);for(var d,e=[],f="trace:"+b+(c.length?":"+c[0]:""),g=1;g<c.length;)d=c[g++],l(d)?f+=", "+d:e.push(d);a.log(f);e.length&&e.push(".");a.log.apply(a,
e)}};b(Ua,{on:1,group:{},set:function(a,c){l(a)?Ua.group[a]=c:b(Ua.group,a)}});Ua.set(b(b(b({},f.trace),g.trace),ra.trace));Z("config",function(a){a.trace&&Ua.set(a.trace)})}else a.trace=n;var ub=function(b,c,f){var g=arguments.length,k=["require","exports","module"],m=[0,b,c];1==g?m=[0,e(b)?k:[],b]:2==g&&l(b)?m=[b,e(c)?k:[],c]:3==g&&(m=[b,c,f]);x("dojo-amd-factory-scan")&&m[1]===k&&m[2].toString().replace(/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,"").replace(/require\(["']([\w\!\-_\.\/]+)["']\)/g,function(a,
b){m[1].push(b)});a.trace("loader-define",m.slice(0,2));if((g=m[0]&&ta(m[0]))&&!Ka[g.mid])Xa(fc(g,m[1],m[2]));else if(x("ie-event-behavior")&&x("host-browser")&&!qc){g=g||gb;if(!g){for(b in Ka)if((k=Y[b])&&k.node&&"interactive"===k.node.readyState){g=k;break}if(x("dojo-combo-api")&&!g)for(var n=0;n<Wb.length;n++){g=Wb[n];if(g.node&&"interactive"===g.node.readyState)break;g=0}}x("dojo-combo-api")&&d(g)?(Xa(fc(ta(g.shift()),m[1],m[2])),g.length||Wb.splice(n,1)):g?(Va(g),Xa(fc(g,m[1],m[2]))):W("error",
p("ieDefineFailed",m[0]));pb()}else Nb.push(m)};ub.amd={vendor:"dojotoolkit.org"};x("dojo-requirejs-api")&&(a.def=ub);b(b(a,f.loaderPatch),g.loaderPatch);Z("error",function(a){try{if(console.error(a),a instanceof Error){for(var b in a)console.log(b+":",a[b]);console.log(".")}}catch(c){}});b(a,{uid:u,cache:za,packs:ya});x("dojo-publish-privates")&&b(a,{paths:ja,aliases:ca,modules:Y,legacyMode:S,execQ:sa,defQ:Nb,waiting:Ka,packs:ya,mapProgs:va,pathsMapProg:R,listenerQueues:na,computeMapProg:Ta,computeAliases:zb,
runMapProg:Ya,compactPath:Na,getModuleInfo:Ob});if(q.define)x("dojo-log-api")&&W("error",p("defineAlreadyDefined",0));else{q.define=ub;q.require=a;x("host-node")&&(require=a);if(x("dojo-combo-api")&&a.combo&&a.combo.plugins){var qb=a.combo.plugins,Sb;for(Sb in qb)b(b(ta(Sb),qb[Sb]),{isCombo:1,executed:"executed",load:1})}if(x("dojo-config-api")){c(Ia,function(a){ua(a)});var Wa=ra.deps||g.deps||f.deps,Tb=ra.callback||g.callback||f.callback;a.boot=Wa||Tb?[Wa||[],Tb]:0}x("dojo-built")||(!a.async&&a(["dojo"]),
a.boot&&a.apply(null,a.boot))}})(function(){return this.dojoConfig||this.djConfig||this.require||{}}(),{hasCache:{"host-browser":1,dom:1,"dojo-amd-factory-scan":1,"dojo-loader":1,"dojo-has-api":1,"dojo-inject-api":1,"dojo-timeout-api":1,"dojo-trace-api":1,"dojo-log-api":1,"dojo-dom-ready-api":1,"dojo-publish-privates":1,"dojo-config-api":1,"dojo-sniff":1,"dojo-sync-loader":1,"dojo-test-sniff":1,"config-deferredInstrumentation":1,"config-useDeferredInstrumentation":"report-unhandled-rejections","config-tlmSiblingOfDojo":1},
packages:[{name:"dojo",location:"."},{name:"tests",location:"./tests"},{name:"dijit",location:"../dijit"},{name:"build",location:"../util/build"},{name:"doh",location:"../util/doh"},{name:"dojox",location:"../dojox"},{name:"demos",location:"../demos"}],trace:{"loader-inject":0,"loader-define":0,"loader-exec-module":0,"loader-run-factory":0,"loader-finish-exec":0,"loader-define-module":0,"loader-circular-dependency":0,"loader-define-nonmodule":0},async:0,waitSeconds:15});
