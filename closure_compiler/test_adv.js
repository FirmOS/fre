require("dojo/_base/array dojo/dom-geometry dojo/aspect dgrid/OnDemandGrid dgrid/Grid dgrid/Selection dgrid/selector dgrid/tree dgrid/extensions/ColumnResizer dgrid/extensions/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/DijitRegistry dgrid/extensions/DnD dojox/form/CheckedMultiSelect dojox/form/FileInput dojox/form/Uploader dojox/form/uploader/FileList dojox/validate/web dojox/validate/check dojox/widget/Calendar dojox/gfx dojox/gfx/fx dojox/gfx/utils dojox/gfx/Moveable dojox/gesture/tap dojox/gesture/swipe dojox/html/styles dojo/dom-construct dojox/charting/widget/Chart dojox/charting/widget/Legend dojox/charting/axis2d/Default dojox/charting/plot2d/Lines dojox/charting/plot2d/Pie dojox/charting/plot2d/ClusteredColumns dijit/Menu dijit/Dialog dijit/Tree dijit/Toolbar dijit/ProgressBar dijit/Tooltip dijit/form/TextBox dijit/form/DateTextBox dijit/form/Form dijit/form/FilteringSelect dijit/form/Textarea dijit/form/NumberTextBox dijit/form/ComboBox dijit/form/TimeTextBox dijit/form/Select dijit/form/NumberSpinner dijit/form/HorizontalSlider dijit/layout/ContentPane dijit/layout/TabContainer dijit/layout/BorderContainer dijit/layout/AccordionContainer dojo/io/iframe".split(" "),
function(v,w,x,y,z,A,B,C,D,E,F,G,H){dojo.Nd=v;dojo.oi=w;dojo.Zk=x;dgrid={};dgrid.Oj=y;dgrid.gp=z;dgrid.Rj=A;dgrid.Yt=B;dgrid.Jo=C;dgrid.Jj=D;dgrid.Ij=E;dgrid.Je=F;dgrid.Kj=G;dgrid.xg=H;dojo.declare("FIRMOS.wsConnectionHandler",null,{constructor:function(){this.i=null;this.cg=0;this.ib={};this.pa=null;this.ni=!1;this.Mg();this.gh=!0},nr:function(){console.log("DOCUMENT ONLOAD");new FIRMOS.Bc({Sq:!0});this.ni=!0},Mg:function(){this.i=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+
window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-FREDB-NEW");this.i.binaryType="arraybuffer";this.i.onmessage=this.ug.bind(this);this.i.onclose=this.sg.bind(this);this.i.onerror=this.tg.bind(this);this.i.onopen=this.vg.bind(this)},n:function(a,b,c,d,e,f,g){var h=G_UI_COM.bl(a,b,c,d);if(!h.abort)if(h.P&&(c=h.P),h.Ca&&(d=h.Ca),this.ni)if(1!=this.i.readyState)switch(this.i.readyState){case 0:console.log("WS CONNECTING => WAIT");setTimeout(this.n.bind(this,a,b,c,d,e,f,g),10);
break;case 2:console.log("WS CLOSING => WAIT");setTimeout(this.n.bind(this,a,b,c,d,e,f,g),100);break;case 3:console.log("WS CLOSED => RECREATE"),this.Mg()}else console.log("WS OK => CALL"),console.log(a+" - "+b+" - "+c+" - "+JSON.stringify(d)+" - BLOB: "+("undefined"!=typeof g)+" - STATE: "+this.i.readyState),a={$h:a,Zc:b,P:c,yn:this.cg,zn:"S"},f&&(a.Uh=f),d&&(a.Ca=d),d=dojo.Ho(a),e||(e=this.Ub.bind(this)),this.ib[this.cg]={Zc:e,Cj:G_UI_COM.Nf(),Pi:a},"undefined"==typeof g?this.i.send(this.Wc(d)):
(e=this.Wc(d),d=new Uint8Array(4),f=e.length,d[3]=f>>24,d[2]=f>>16&255,d[1]=f>>8&255,d[0]=f&255,this.i.send(new Blob([d,e,g]))),G_UI_COM.Wh(),this.cg++;else this.gh&&(console.log("DOCUMENT LOADING => WAIT"),this.gh=!1),setTimeout(this.n.bind(this,a,b,c,d,e,f,g),10)},lm:function(a){this.Ub({},!0,a,G_UI_COM.Nf())},pm:function(a){this.Ub({},!0,a,G_UI_COM.Nf());a=dojo.Ho({yn:a.kb,zn:"SR"});this.i.send(this.Wc(a))},Ub:function(a,b,c,d){if(b){if(""!=c.hd)switch(b=dojo.eb(c.hd),b.sf){case "jsupdate":case "jsexecute":G_UI_COM.Sn(d);
this.pa="";a.Uh&&(this.pa=a.Uh);"undefined"!=typeof b.Fj&&""!=b.Fj&&(this.pa=b.Fj);G_UI_COM.Xh(b.id);eval(b.action);break;default:console.error("Server Function Error => Unknown action type: "+b.sf)}}else console.error("Server Function Error => "+c.$h+"."+c.Zc+": "+c.error)},ug:function(a){a=dojo.eb(this.wf(a.data));a.eo&&this.wo(a.eo);if(a.error)this.ib[a.kb].Zc(this.ib[a.kb].Pi,!1,a,this.ib[a.kb].Cj);else switch(a.Un){case "SR":this.ib[a.kb]?(this.ib[a.kb].Zc(this.ib[a.kb].Pi,!0,a,this.ib[a.kb].Cj),
delete this.ib[a.kb]):console.error(" Error => Got answer for unknown request id: "+a.kb);break;case "S":this.pm(a);break;case "A":this.lm(a);break;default:console.error(" Error => Unknown Server Request Type: "+a.Un)}},sg:function(a){console.log("WS CLOSE "+JSON.stringify(a))},tg:function(a){console.log("WS ERROR "+JSON.stringify(a))},vg:function(a){console.log("WS OPEN "+JSON.stringify(a));this.n("FIRMOS","init")},Wc:function(a){return a},wf:function(a){return a},wo:function(a){sessionStorage.setItem("sessionId",
a)},fs:function(){return sessionStorage.getItem("sessionId")}});dojo.declare("FIRMOS.uiHandler",null,{constructor:function(a){this.Wh();this.ba=[];this.Ia={};this.hg=!1;this.fa={};this.xb={};this.M={T:{},U:{}};this.qc={};this.ne={};this.Sc={};this.Sa=a;this.rj=null;this.Ga={}},fj:function(a){a.h(FIRMOS.Mj)?a.refresh():a.h(FIRMOS.Ag)?a.refresh():console.error("REFRESH VIEW TYPE UNKNOWN")},yt:function(a){a=G_UI_COM.Oa(a);for(var b=0;b<a.T.length;b++)G_UI_COM.fj(a.T[b])},mj:function(a){this.Oi=a},Em:function(){this.ki=
!0},jo:function(a){this.yi=a},ho:function(a){this.pi=a},Nf:function(){return{ji:this.ki,zf:this.ba,tc:this.Oi,Of:this.yi,Gf:this.pi}},Wh:function(){this.ki=!1;this.pi=this.yi=this.Oi=null},Sn:function(a){this.Ia=a},Td:function(){0<this.Ia.zf.length&&0<this.ba.length&&this.Ia.zf[this.Ia.zf.length-1].id==this.ba[this.ba.length-1].id&&this.ba[this.ba.length-1].nc(!0)},fr:function(a){this.Ia.ji&&this.Td();this.ba.push(a);a.show()},Jl:function(a){if(this.ba[this.ba.length]==a)this.ba.pop();else{for(var b=
[],c=0;c<this.ba.length;c++)this.ba[c].id!=a&&(b[b.length]=this.ba[c]);this.ba=b}},mu:function(a){a.show();this.ba.push(a)},lo:function(a){a&&""!=a&&(document.title=a)},jl:function(a){this.Sa.pa=a;this.Xh("");this.pl(new dijit.G.va({}))},Xh:function(a){if(""!=a){var b=dijit.b(a);""==this.Sa.pa&&b&&(this.Sa.pa=a)}if(""!=this.Sa.pa)if("FirmOSViewport"==this.Sa.pa)for(var b=dojo.b("FirmOSViewport"),b=dijit.Kr(b),c=0;c<b.length;c++)b[c].Pb();else if(b=dijit.b(this.Sa.pa)){c=b.getParent();if(c.h(dijit.G.Cc)||
c.Fm)return;if(b.dc)var d=b.dc;else d=b.id,this.Sa.pa=c.id,b=c;if(c=dijit.b(d))c.ja&&(b.mg=c.ja,b.Gj=c.style),b.removeChild(c),c.Pb()}(b=dijit.b(a))&&b.Pb()},pl:function(a,b){this.lo(b);this.Ia.ji&&this.Td();if("FirmOSViewport"==this.Sa.pa){var c=dojo.b("FirmOSViewport");a.jd(c);a.sd()}else(c=dijit.b(this.Sa.pa))?(c.getParent(),c.mg&&(a.set("region",c.mg),delete c.mg,a.set("style",c.Gj),delete c.Gj),c.h(dijit.G.va)?c.set("content",a):c.F(a),c.dc&&(c.dc=a.id),a.sd()):(console.error("NO CONTENT AREA FOUND FOR "+
a.id),a.Pb());this.Sa.pa=null},Lr:function(){console.error("IMPLEMENT ME")},Us:function(a){if(0<a.length)if(this.Ia.tc)this.Ia.tc.ri(a);else if(this.Ia.Gf){var b=new FIRMOS.Bc;b.fo(this.Ia.Gf.x,this.Ia.Gf.y);b.ri(a)}},cv:function(a,b){var c=this.Oa(a);c&&(b.Wo&&c.c.Uo(b.Wo),b.Fl&&c.c.El(b.Fl),b.Xm&&c.c.Ym(b.Xm))},Kn:function(a){this.fa[a.id]?this.fa[a.id].c=a:this.fa[a.id]={c:a,T:[]}},To:function(a){delete this.fa[a.id]},Fn:function(a,b){this.xb[a.id]?console.error("Form "+a.id+" already registered"):
this.xb[a.id]={form:a,ge:b}},Oo:function(a,b){this.xb[a]?(G_SERVER_COM.n("FIRMOS","unregisterDBO",null,{ge:b}),delete this.xb[a]):console.error("Form "+a+" not registered")},Xu:function(a){for(var b in this.xb)for(var c=0;c<this.xb[b].ge.length;c++)if(this.xb[b].ge[c]==a.uid){this.xb[b].form.Ej(a);break}},Wu:function(a,b){var c=dijit.b(a+"_form");c&&c.h(FIRMOS.I)&&c.Ej(b)},In:function(a,b,c){this.M.T[c.id]=c;this.M.U[a]||(this.M.U[a]={});this.M.U[a][b]||(this.M.U[a][b]={xd:{}});this.M.U[a][b].xd[c.id]=
!0},Ro:function(a,b,c){this.M.U[a]&&this.M.U[a][b]&&(delete this.M.U[a][b].xd[c.id],0==Object.keys(this.M.U[a][b].xd).length&&(delete this.M.U[a][b].xd,0==Object.keys(this.M.U[a][b]).length&&(delete this.M.U[a][b],0==Object.keys(this.M.U[a]).length&&delete this.M.U[a])));delete this.M.T[c.id]},bl:function(a,b,c,d){var e={};if(this.M.U[a]&&this.M.U[a][b]){var f=[],g;for(g in this.M.U[a][b].xd)a=this.M.T[g],f=f.concat(a.de()),dojo.sa(d,a.Rq);c||1==f.length?(e.P=c||[f[0]],d.selected=f,e.Ca=d):((c=dijit.b(this.Qa).getParent().dc)&&
G_UI_COM.jl(c),e.abort=!0)}return e},Gn:function(a){this.qc[a.id]=a},Po:function(a){delete this.qc[a.id]},Zu:function(a,b,c){this.qc[a]?this.qc[a].setData(b,c):console.error("updateLiveChart: "+a+" chart not found")},xt:function(a,b){this.qc[a]?this.qc[a].Cn(b):console.error("redefineLiveChart: "+a+" chart not found")},Hn:function(a,b){this.ne[a]=b},Qo:function(a){delete this.ne[a]},$u:function(a,b){this.ne[a]?this.ne[a].Vo(b):console.error("updateMsgProgress: "+a+" message progress not registered")},
bg:function(a,b){if(this.Oa(a)){for(var c=!1,d=0;d<this.fa[a].T.length;d++)this.fa[a].T[d].id==b.id&&(c=!0,this.fa[a].T[d]=b);c||(this.fa[a].T[this.fa[a].T.length]=b)}else console.error("registerStoreView: "+a+" store not registered")},lg:function(a,b){if(this.Oa(a)){for(var c=0;c<this.fa[a].T.length;c++)if(this.fa[a].T[c].id==b.id){this.fa[a].T.splice(c,1);break}0==this.fa[a].T.length&&this.fa[a].c.B()}},gs:function(a,b){var c=G_UI_COM.Oa(a);if(c)return c.c;this.Ga[a]&&(b.Te=this.Ga[a],delete this.Ga[a]);
return new FIRMOS.tp(b)},ko:function(a,b){this.Ga[a]=b},Fa:function(a,b,c,d,e){var f={};f.Hr=b;f.Jr=d;f.Ir=c;e&&(f.at=e);(c=this.Oa(a))?c.c.oa.lc[b+"_ref"]=f:(this.Ga[a]||(this.Ga[a]={}),this.Ga[a][b+"_ref"]=f)},gi:function(a,b){var c=this.Oa(a);c?delete c.c.oa.lc[b+"_ref"]:this.Ga[a]&&(delete this.Ga[a][b+"_ref"],0==Object.keys(this.Ga[a]).length&&delete this.Ga[a])},Oa:function(a){return this.fa[a]},Cs:function(a){for(var b=0;b<a.length;b++){var c=this.Oa(a[b].xu).c;if(a[b].ld){a[b].ld instanceof
Array||(a[b].ld=[a[b].ld]);for(var d=0;b<a[d].ld.length;d++)c.Cm(a[b].ld[d])}else c.Bm()}},qo:function(a,b){return a.qf<b.qf?-1:a.qf>b.qf?1:0},Mb:function(a,b){this.Sc[a]||(dojox.sm.As("."+a,b),this.Sc[a]=b)},Mn:function(a){this.Sc[a]&&(dojox.sm.Ct("."+a,this.Sc[a]),delete this.Sc[a])},Mu:function(a,b){var c=dojo.b(b+"_tl"),d=dojo.b(b+"_tr");if(dojo.ra(c,"firmosFormGroupShowLeft")){var e="";dojo.q(c,"firmosFormGroupShowLeft");dojo.q(d,"firmosFormGroupShowRight");dojo.p(c,"firmosFormGroupHideLeft");
dojo.p(d,"firmosFormGroupHideRight")}else e="none",dojo.q(c,"firmosFormGroupHideLeft"),dojo.q(d,"firmosFormGroupHideRight"),dojo.p(c,"firmosFormGroupShowLeft"),dojo.p(d,"firmosFormGroupShowRight");c=dojo.b(a);c=dojo.$('tr[firmosGroup~="'+b+'"]',c);for(d=0;d<c.length;d++)dojo.style(c[d],"display",e)},Kd:function(a,b,c){for(var d=!0,e=0;e<b.length;e++){var f={};f.label=b[e].caption;f.disabled=b[e].disabled||c;if(b[e].icon){var g=b[e].icon.replace(/[\/\.]/g,"");G_UI_COM.Mb(g,"background-image: url('"+
b[e].icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");f.Di=g}if(b[e].tc){g={};b[e].id&&(g.id=b[e].id);g=new dijit.Bc(g);f.disabled=this.Kd(g,b[e].tc,f.disabled)||f.disabled;f.tn=g;var h=new dijit.zg(f);g.Lc=h;a.F(h)}else b[e].id&&(f.id=b[e].id),b[e].action&&(f.zd=b[e].action,f.ia=function(){G_SERVER_COM.n(this.zd.xa,this.zd.Lf,this.zd.P,this.zd.Ca)}),b[e].vb&&(f.fk=b[e].vb,f.ia=function(){dojo.Fi.Ei.nj(dojo.b("FirmOSDownload"),this.fk,!0)}),a.F(new dijit.mp(f));
d=d&&f.disabled}return d},rk:function(a,b,c,d){c.shift();if(0<c.length)b=1==c.length,this.rd(a,c,d)||console.error("Could not resolve given sub section path: container: "+a.id+", sections: "+JSON.stringify(c)),b&&(G_UI_COM.hg=!1);else if(d&&(a=a.t()[0])&&a.h(FIRMOS.op))for(c=a.t(),d=0;d<c.length;d++)if(c[d].id==a.Xn.id){d==c.length-1?a.Ae(c[0].id):a.Ae(c[d+1].id);break}},rd:function(a,b,c){if("string"==typeof a){if("FirmOSViewport"==a)var d=dojo.b("FirmOSViewport"),d=dijit.b(d.children[0].id);else d=
dijit.b(a);d||console.error('Base container "'+a+'" not found.')}else d=a;if(d.h(dijit.G.va))return d.qs()?this.rd(d.t()[0],b,c):!1;if(d.h(dijit.G.Ac)){a=d.t();for(d=0;d<a.length;d++)if(this.rd(a[d],b,c))return!0;return!1}if(d.h(FIRMOS.Cc)){var e=d.$l(b[0]);if(e)return c=c&&d.Xn.id==b[0],d.Ae(e,this.rk.bind(this,e,a,b,c)),!0;d.Wn();return!1}},Jn:function(a){this.rj=a},So:function(){delete this.rj},Hd:function(a,b){a.set("disabled",b);a.Lc&&a.Lc.set("disabled",b)},Kh:function(a,b){if(a.h(dijit.Bc)||
a.h(dijit.yg)||a.h(dijit.zg))for(var c=a.h(dijit.zg)?a.tn.t():a.t(),d=0;d<c.length;d++)this.Hd(c[d],b),this.Kh(c[d],b)},Mh:function(a){a=a.Lc?a.Lc.getParent():a.getParent();if(a.h(dijit.Bc)||a.h(dijit.yg)){for(var b=a.t(),c=!0,d=0;d<b.length;d++)if(!b[d].get("disabled")){c=!1;break}a.get("disabled")!=c&&(this.Hd(a,c),this.Mh(a))}},dv:function(a,b,c){if(a=dijit.b(a))this.Hd(a,b),""!=c&&a.set("label",c),this.Kh(a,b),this.Mh(a)},ev:function(a,b){var c=dijit.b(a);if(c){c.$q();var d=G_UI_COM.Kd(c,b,c.get("disabled"));
this.Hd(c,d)}},mt:function(a,b){b?window.open(a)||alert(G_TEXTS.nt.error):document.location.href=a}});G_SERVER_COM=new FIRMOS.jv;G_UI_COM=new FIRMOS.Uu(G_SERVER_COM);dojo.declare("FIRMOS.Dialog",dijit.wg,{$i:function(){this.Zh||dojo.style(this.Mq,"display","none")},nc:function(a){if(this.Zh||a)G_UI_COM.Jl(this.id),this.Pb()}});dojo.declare("FIRMOS.Message",FIRMOS.wg,{j:G_TEXTS.Wm,Zh:!1,B:function(){this.ue&&G_UI_COM.Qo(this.ue);this.e(arguments)},Ra:function(){this.e(arguments);var a;switch(this.type){case "msg_error":case "msg_warning":case "msg_info":case "msg_confirm":case "msg_wait":a=
"Wait"}var b='<div class="firmosMessageIcon'+a+'"></div><div class="firmosMessage'+a+'">'+this.Wm+"</div>";this.ue&&(b=b+'<div class="firmosMessageProgressBar" id="'+this.id+'_pb"></div>');b=b+'<div class="firmosMessageButtons'+a+'" id="'+this.id+'_buttons"></div>';this.set("content",b);switch(this.type){case "msg_error":case "msg_warning":case "msg_info":a=new dijit.form.ua({type:"button",label:this.j.bt,ia:this.Dd.bind(this)});a.jd(dojo.b(this.id+"_buttons"));break;case "msg_confirm":a=new dijit.form.ua({type:"button",
label:this.j.mv,ia:this.Dd.bind(this,!0)});a.jd(dojo.b(this.id+"_buttons"));a=new dijit.form.ua({type:"button",label:this.j.Ys,ia:this.Dd.bind(this,!1)});a.jd(dojo.b(this.id+"_buttons"));break;case "msg_wait":this.pj&&(a=new dijit.form.ua({type:"button",label:this.j.abort,ia:this.Dd.bind(this)}),a.jd(dojo.b(this.id+"_buttons")))}this.ue&&(G_UI_COM.Hn(this.ue,this),this.Mc=new dijit.Pj({style:"width: 100%"}),this.Mc.set("value",0),this.Mc.set("label","0%"),this.Mc.jd(dojo.b(this.id+"_pb")))},Vo:function(a){this.Mc.set("value",
a);this.Mc.set("label",Math.round(a)+"%")},Dd:function(a){this.nc(!0);if(this.pj){var b=dojo.ka(this.Ce);"boolean"==typeof a&&(b.Pq=a);G_SERVER_COM.n(this.pj,this.ju,this.qj,b)}}});dojo.declare("FIRMOS.Store",null,{oc:"uid",Uf:["text","objname","uid"],constructor:function(a){this.oa={};a.Te?(this.oa.lc=a.Te,delete a.Te):this.oa.lc={};for(var b in a)this[b]=a[b];this.Va={};this.Hb={};this.Ed={};this.vn=0;this.g={};G_UI_COM.Kn(this)},B:function(){this.Gl&&G_SERVER_COM.n(this.Gl,this.ar,this.cr,this.br);
G_UI_COM.To(this);G_UI_COM.ko(this.id,this.oa.lc);this.e(arguments)},close:function(a){return a&&a.abort&&a.abort()},Qq:function(a,b,c){return-1<dojo.Nd.indexOf(this.im(a,b),c)},Ts:function(a){return a.children?!0:!1},mk:function(a,b,c){a.children=c;for(c=0;c<a.children.length;c++)this.Va[this.m(a.children[c])]=!0,a.children[c].children&&"UNCHECKED"==a.children[c].children&&(a.children[c].children=[],a.children[c].Ic=!0);b(a)},t:function(a,b){var c="function"==typeof b,d={};c||(d=b);d=this.Ve(d,a);
c&&(d.Oh(this.mk.bind(this,a,b)),d.Xk(b.bind(this,Error("Error in function getChildren"))));return dojo.c.Xo.Qj(d)},$:function(a,b){b.$=a;var c=this.Ve(b);return dojo.c.Xo.Qj(c)},Ve:function(a,b){var c=new dojo.Le,d=this.vn++;this.g[d]={};this.g[d].$=a.$;this.g[d].st=a;this.g[d].Za=[];this.g[d].ea=[];this.g[d].qe=[];var e=dojo.ka(this.es);dojo.sa(e,this.oa);b&&(this.g[d].Qa=this.m(b),e.wc=this.m(b));if(b&&b.Yj)var f=b.Ua||this.am,g=b.Yj,h=b.N?b.N instanceof Array?b.N:[b.N]:[b.uid];else this.g[d].Qa=
"",h=this.is,f=this.am,g=this.Yr;e.wn=d;a.$&&(e.$=a.$);"undefined"!=typeof a.count&&(e.count=a.count);"undefined"!=typeof a.start&&(e.start=a.start);if(a.sort){e.sort=[];for(var k=0;k<a.sort.length;k++)e.sort[k]={},e.sort[k].rt=a.sort[k].wq,e.sort[k].vq=!a.sort[k].Zq}c.total=new dojo.Le;c.observe=this.Bk.bind(this,d);G_SERVER_COM.n(f,g,h,e,function(a,b,d,e){if(d)if(b=dojo.eb(e.hd),b.sf&&"jsexecute"==b.sf)c.Ln(),eval(b.action);else{c.total.Rn(b.total);if(this.g[a]){for(d=0;d<b.data.length;d++)this.g[a].Za.push(this.m(b.data[d]));
0==this.g[a].ea.length&&setTimeout(this.Ng.bind(this,a),2E3)}c.Rn(b.data)}else c.Ln(e.error)}.bind(this,d));return c},kk:function(a,b,c){a.bn&&a.bn.call(b,c,a)},jk:function(a,b,c){for(var d=0;d<c.length;d++)this.Va[this.m(c[d])]=!0;if(a.vc)for(d=0;d<c.length;d++)a.vc.call(b,c[d],a);a.se&&a.se.call(b,a.vc?null:c,a)},Kf:function(a){a=a||{};var b=a.scope||this,c=this.Ve(a);c.Ft=a;c.Oh(this.jk.bind(this,a,b));c.total.Oh(this.kk.bind(this,a,b));a.te&&c.Xk(function(c){return a.te.call(b,c,a)});a.abort=
function(){c.cancel()};return a},Qr:function(a){var b=[],c;for(c in a)!a.hasOwnProperty(c)||"_"==c.charAt(0)&&"_"==c.charAt(1)||b.push(c);return b},Xr:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0,"dojo.data.api.Write":!0,"dojo.data.api.Notification":!0}},dm:function(a){for(var b=0;b<this.Uf.length;b++){var c=this.Sb(a,this.Uf[b]);if(c)return c}for(b in a)return a[b]},bs:function(){return this.Uf},Sb:function(a,b,c){if(b in a)return a[b];if(!a.Ic||"children"!=b)return c},im:function(a,
b){var c=this.Sb(a,b);return c instanceof Array?c:void 0===c?[]:[c]},hasAttribute:function(a,b){return b in a},Gs:function(a){return"object"==typeof a&&a&&void 0!=this.m(a)},Hs:function(a){return a&&!a.Ic},yk:function(a,b){var c=a.scope||this;delete b.Ic;var d=b instanceof Error?a.te:a.vc;d&&d.call(c,b)},Ns:function(a){var b=a.scope||this;a.item.Ic?this.t(a.item,this.yk.bind(this,a)):a.vc&&a.vc.call(b,a.item)},Yq:function(a){console.error("STORE DELETE NOT IMPLEMENTED: "+JSON.stringify(a));return!0},
Fs:function(a){return this.Hb[this.m(a)]?!0:!1},Xs:function(a,b){console.error("STORE NEW ITEM NOT IMPLEMENTED: "+JSON.stringify(a)+" - "+JSON.stringify(b));return a},Gt:function(){for(var a in this.Hb){for(var b in this.Hb[a]);delete this.Hb[a];delete this.Ed[a]}},save:function(a){console.error("SAVE ITEM NOT IMPLEMENTED: "+JSON.stringify(a));var b=a.scope||this,c;for(c in this.Hb)delete this.Hb[c],delete this.Ed[c];a.se&&a.se.call(b,a)},qd:function(a,b,c){if(b==this.oc)throw Error("Can not change the identity attribute for an item");
a[b]!=c&&(this.Ed[this.m(a)]||(this.Ed[this.m(a)]=dojo.ka(a)),c?a[b]=c:delete a[b],this.Hb[this.m(a)]=a)},iu:function(a,b,c){if(!lang.isArray(c))throw Error("setValues expects to be passed an Array object as its value");this.qd(a,b,c)},Vu:function(a,b){this.qd(a,b)},kt:function(){},it:function(){},gt:function(){},Dr:function(a){return this.Kf({$:this.oc+"="+a.us,se:a.vc,te:a.te,scope:a.scope})},m:function(a){return a[this.oc]},as:function(){return[this.oc]},Bk:function(a,b,c,d){c={};c.Lm=b;c.remove=
c.cancel=this.Jk.bind(this,c);c.H=a;this.g[a].ea.push(b);this.g[a].qe.push(d||"");return c},Cm:function(a){delete this.g[a]},Bm:function(){for(var a in this.g)delete this.g[a]},Jk:function(a){if(this.g[a.H]){if(0==this.g[a.H].Za.length)return;var b=dojo.Nd.indexOf(this.g[a.H].ea,a.Lm);-1<b&&(this.g[a.H].ea.splice(b,1),this.g[a.H].qe.splice(b,1))}this.Ng(a.H)},Ng:function(a){if(this.g[a]&&0==this.g[a].ea.length){if(this.il){var b=this.Kq;b.wn=a;G_SERVER_COM.n(this.il,this.Iq,this.Lq,b)}delete this.g[a]}},
get:function(a){var b={};b[this.oc]=a;return b},remove:function(a){if(this.Ol){var b=dojo.ka(this.qr);dojo.sa(b,this.oa);b.selected=a;G_SERVER_COM.n(this.Ol,this.pr,this.rr,b)}},put:function(a,b){if(this.Pl){var c=dojo.ka(this.ur);dojo.sa(c,this.oa);c.selected=[];for(var d=0;d<a.length;d++)c.selected.push(this.m(a[d]));b.Pc&&(c.target=b.source?b.source.m(b.Pc):this.m(b.Pc));b.Zf&&G_UI_COM.ho(b.Zf);G_SERVER_COM.n(this.Pl,this.tr,this.vr,c)}},Ad:function(a){var b=[],c;for(c in this.g)for(var d=0;d<
this.g[c].Za.length;d++)if(this.g[c].Za[d]==a){b.push({H:c,jb:d});break}return b},lk:function(a){var b=[],c;for(c in this.g)this.g[c].Qa==a&&b.push({H:c});return b},oh:function(a){for(var b in this.g)if(this.g[b].Qa==a){for(var c=0;c<this.g[b].Za.length;c++)this.oh(this.g[b].Za[c]);delete this.g[b]}},Ym:function(a){for(var b=0;b<a.length;b++){var c=this.Ad(this.m(a[b].item));if(0<c||this.Va[this.m(a[b].item)])console.error("NEW ITEMS: Item "+this.m(a[b].item)+" already in store!");else if(0==this.lk(a[b].wc).length)console.error("NEW ITEMS: Parent "+
a[b].wc+" not found or no children retrieved yet!");else if(""!=a[b].xe){var d=!0,c=this.Ad(a[b].xe);if(0<c.length)for(var e=0;e<c.length;e++)if(a[b].wc==this.g[c[e].H].Qa)for(var d=!1,f=this.g[c[e].H].ea.length,g=0;g<f;g++)a[b].Ht&&(c[e].jb+=1),this.g[c[e].H].Za.splice(c[e].jb,0,this.m(a[b].item)),this.g[c[e].H].ea[g](a[b].item,-1,c[e].jb);this.Va[a[b].xe]&&(d=!1,this.Va[this.m(a[b].item)]=!0);d&&(""!=a[b].wc?console.error("RevId "+a[b].xe+" not found in any query for parent item "+a[b].wc):console.error("RevId "+
a[b].xe+" not found in any query"))}else{for(e in this.g)if(a[b].wc==this.g[e].Qa)for(g=0;g<this.g[e].ea.length;g++)this.g[e].Za.unshift(this.m(a[b].item)),this.g[e].ea[g](a[b].item,-1,0);this.Va[this.m(a[b].item)]=!0}}},El:function(a){for(var b=0;b<a.length;b++){var c=!0,d={};d[this.oc]=a[b];var e=this.Ad(a[b]);if(0<e.length)for(var c=!1,f=0;f<e.length;f++){this.oh(a[b]);this.g[e[f].H].Za.splice(e[f].jb,1);for(var g=this.g[e[f].H].ea.length,h=0;h<g;h++)this.g[e[f].H].ea[h](d,e[f].jb,-1)}this.Va[a[b]]&&
(noFound=!1,delete this.Va[a[b]]);c&&console.error("DeleteId "+a[b]+" not found in any query")}},Uo:function(a){for(var b=!0,c=[],d=0;d<a.length;d++){var e=this.Ad(this.m(a[d]));if(0<e.length)for(var b=!1,f=0;f<e.length;f++)for(var g=this.g[e[f].H].ea.length,h=0;h<g;h++)if(this.g[e[f].H].qe[h]){for(var k=G_UI_COM.Oa(this.id).T,l=0;l<k.length;l++)if(k[l].id==this.g[e[f].H].qe[h]){k=k[l].yc;for(l=0;l<k.length;l++)if(k[l].pd.name==this.g[e[f].H].$.Vn){k[l].ag[e[f].jb].value=a[d].value;break}break}-1==
dojo.Nd.indexOf(c,this.g[e[f].H].ea[h])&&c.push(this.g[e[f].H].ea[h])}else this.g[e[f].H].ea[h](a[d],e[f].jb,e[f].jb);if(this.Va[this.m(a[d])]){var b=!1,m;for(m in a[d]);}b&&console.error("UpdateId "+this.m(a[d])+" not found in any query")}for(d=0;d<c.length;d++)c[d]()}});dojo.declare("FIRMOS.Tree",dijit.Ag,{constructor:function(a){G_UI_COM.bg(a.ta.c.id,this)},B:function(){G_UI_COM.lg(this.ta.c.id,this);this.e(arguments)},Ra:function(){this.watch("selectedItems",this.Zn.bind(this));this.e(arguments)},
Zr:function(a,b){if(a.$g){var c=a.$g.replace(/[\/\.]/g,"");G_UI_COM.Mb(c,"background-image: url('"+a.$g+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");return c}return this.e(arguments)},Zn:function(a,b,c){if(c&&0<c.length){if(c[0].Ua&&c[0].$j){var d={};d.Xa=c[0].Ua;d.Qb=c[0].$j;d.P=c[0].N?c[0].N instanceof Array?c[0].N:[c[0].N]:[c[0].uid]}d&&G_SERVER_COM.n(d.Xa,d.Qb,d.P,null,null,dijit.b(this.Qa).getParent().dc||null)}},refresh:function(){this.jr.Xt();this.ta.c.Jq=
!0;this.ta.c.close();this.Tn.state="UNCHECKED";this.ta.root.children=null;this.Tn.Pb();this.ta.constructor(this.ta);this.ta.root.Ic=!0;this.cj();this.Pp()},Mp:function(){this.Kc={};if(this.qn&&this.ci){var a=sessionStorage.getItem(this.ci);a&&dojo.forEach(a.split(","),function(a){this.Kc[a]=!0},this)}},nq:function(a,b){if(!this.qn)return!1;var c=dojo.map(a.hs(),function(a){return this.ta.m(a)},this).join("/");if(1===arguments.length)return this.Kc[c];b?this.Kc[c]=!0:delete this.Kc[c];var c=[],d;for(d in this.Kc)c.push(d);
sessionStorage.setItem(this.ci,c.join(","))}});_ColumnDnDSource=dojo.declare("FIRMOS.ColumnDnDSource",dgrid.Je.dp,{hn:function(a){a.stopPropagation=function(){};this.e(arguments)}});dojo.declare("FIRMOS.ColumnReorder",dgrid.Je,{Nq:_ColumnDnDSource});_GridDnDSource=dojo.declare("FIRMOS.GridDnDSource",dgrid.xg.jp,{tq:!0,Eq:function(a,b){for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},hn:function(a){a.stopPropagation=
function(){};this.e(arguments)},tl:function(){return!1},fm:function(){if(this.A.kr)return[];var a=[];if(!this.Nb)return[];var b=new dojo.pp,c;for(c in this.A.selection){var d=this.A.lb(c).data;this.A.Cf&&!(d.mi in this.A.Cf)||d.Ip?a.push(d):b.push(this.fq[c])}if(0<a.length){b="";for(c=0;c<a.length;c++)b+=", "+this.A.c.dm(a[c]);b=b.substr(2);console.log("Object(s) not dragable "+b);return[]}return b},ht:function(a,b,c){var d=this,e=this.wj,f=this.A,g=f.c,e=e&&f.lb(e);dojo.Le.ap(e&&g.get(g.m(e.data)),
function(e){d!=a?d.fn(a,b,c,e):d.gn(b,c,e)})},gn:function(a,b,c){var d=this.A.c,e=this,f=[];a.forEach(function(a){f.push(e.wi(a))});d[b&&d.sl?"copy":"put"](f,{Pc:c,Zf:this.Vi})},fn:function(a,b,c,d){var e=this.A.c,f=a.A,g=[];b.forEach(function(b){g.push(a.wi(b))});e[c&&e.sl?"copy":"put"](g,{source:f.c,Pc:d,Zf:this.Vi})},wi:function(a){return this.A.lb(a).data},jn:function(a){if(!this.Gi||"Disabled"!=this.Bu){dojo.li.rp.zu.jn.call(this,a);var b=dojo.li.lp.Qs();if(!this.Gi&&this.Ws&&this.Js&&(Math.abs(a.pageX-
this.Np)>this.Dl||Math.abs(a.pageY-this.Op)>this.Dl)){var c=this.fm();c.length&&b.ou(this,c,this.tl(dojo.li.Tr(a),!0))}if(this.Gi&&(this.Vi={x:a.pageX,y:a.pageY},c=!1,this.Nb&&(this.vd&&this.wj==this.Nb||(this.vd=dojo.oi.position(this.Nb,!0)),c=this.ss?a.pageX-this.vd.x<this.vd.w/2==dojo.oi.Es(this.Nb.ownerDocument):a.pageY-this.vd.y<this.vd.v/2),this.Nb!=this.wj||c!=this.Pc))if(this.Qp(c),this.A.$d||this.A.sr)if(this.Nb)if(a=this.A.lb(this.Nb).data,(this.A.Ff&&a.mi in this.A.Ff&&1==this.A.bc.length||
this.A.$d&&a.mi in this.A.$d)&&!a.Jp){for(var c=!1,d=0;d<b.Zm.length;d++)if(b.source.A.c.m(b.source.A.lb(b.Zm[d]))==this.A.c.m(a)){c=!0;break}c?b.Qd(!1):b.Qd(!0)}else b.Qd(!1);else b.Qd(!1);else b.Qd(!0)}}});dojo.declare("FIRMOS.GridDnD",dgrid.xg,{Ml:["dgrid-row"],ir:_GridDnDSource,cj:function(){this.e(arguments);this.Nl=dojo.sa(this.Nl,{accept:this.Ml})}});dojo.declare("FIRMOS.GridBase",null,{constructor:function(a){if(a.Bf){this.Cf={};for(var b=0;b<a.Bf.length;b++)this.Cf[a.Bf[b]]=!0;delete a.Bf}if(a.Df){this.$d=
{};for(b=0;b<a.Df.length;b++)this.$d[a.Df[b]]=!0;delete a.Df}if(a.Ef){this.Ff={};for(b=0;b<a.Ef.length;b++)this.Ff[a.Ef[b]]=!0;delete a.Ef}this.Ob=[];this.Jb=[];this.ud={};this.bc=[];this.d=[];G_UI_COM.bg(a.c.id,this);a.od&&(this.id=a.id,G_UI_COM.In(a.od,a.ij,this))},B:function(){G_UI_COM.lg(this.c.id,this);this.selection={};this.Xi();this.od&&G_UI_COM.Ro(this.od,this.ij,this);for(var a=0;a<this.Ob.length;a++)G_UI_COM.gi(this.Ob[a].vj,this.Ob[a].dj);for(;0<this.d.length;)this.d.pop().remove();this.e(arguments)},
ds:function(){return[this.id]},Ra:function(){this.e(arguments);this.d.push(this.re(".dgrid-row:contextmenu",this.dn.bind(this)));this.d.push(this.re("dgrid-select",this.kn.bind(this)));this.d.push(this.re("dgrid-deselect",this.en.bind(this)));this.d.push(dojo.Zk.sq(this,"expand",this.Dk.bind(this),!0))},de:function(){var a=[],b;for(b in this.selection)a.push(b);return a},Dk:function(a){for(var b=dojo.$(".firmosIconNode",a.element),c=0;c<b.length;c++)if(2==b.length){var d=a.element?a:this.lb(a);this.Kp[d.id]?
(dojo.style(b[0],"display","none"),dojo.style(b[1],"display","")):(dojo.style(b[0],"display",""),dojo.style(b[1],"display","none"))}},dq:function(a,b,c,d,e,f){c=document.createElement("div");e="<img src='"+a[e]+"' class='firmosIconNode'>";f&&""!=f&&(e=e+"<img src='"+a[f]+"' class='firmosIconNode' style='display:none;'>");c.innerHTML=e+"&nbsp;"+b;return c},cq:function(a,b){var c=document.createElement("div");b&&(c.innerHTML=dojo.uf.locale.Mr(new Date(b),{Nr:"short"}));return c},eq:function(a,b){var c=
document.createElement("div");if(!b||""==b)return"";for(var d=b.split(","),e="",f=0;f<d.length;f++)e=e+'<img src="'+d[f]+'">';c.innerHTML=e;return c},sh:function(){var a=!1,b=this.de();if(b.length!=this.bc.length)a=!0;else for(var c=0;c<b.length;c++)b[c]!=this.bc[c]&&(a=!0);a&&(this.bc=b);return a},kn:function(a){this.sh()&&this.Zi(a,this.bc)},en:function(a){this.sh()&&this.Zi(a,this.bc)},Zi:function(a,b){this.En(b);this.Dn(b);this.Xi()},av:function(a,b,c,d){if(!b||b.parentNode){b=d.start+c;c=this.id+
"-row-"+(d.Qa?d.Qa+"-":"")+(this.c&&this.c.m?this.c.m(a):this.Fp++);var e=(c=dojo.b(c))&&c.previousSibling;e&&this.rq(e);c.rowIndex=b;a=this.On(a,d);dojo.B(c.childNodes[0]);dojo.sn(a.childNodes[0],c);dojo.B(a);return c}},On:function(a,b){var c=this.e(arguments);if(this.ku){var d={Ca:{}};a.Gb&&a.Ua?(d.Xa=a.Ua,d.Qb=a.Gb):this.ii&&(d.Xa=this.ii,d.Qb=this.dr,dojo.sa(d.Ca,this.er),this.Il&&(d.P=this.Il));if(d.Xa){d.Ca.selected=a.N?a.N instanceof Array?a.N:[a.N]:[a.uid];d.P||(d.P=d.Ca.selected);a.Gb=d;
this.lb(a);d=dijit.b(this.c.m(a)+"_cc");if(!d){var d=new dijit.G.va({id:this.c.m(a)+"_cc"}),e=new dijit.G.va({id:this.c.m(a)+"_cp"});d.F(e)}dojo.sn(d.r,c)}}return c},po:function(a){rowId=this.c.m(a.data);G_UI_COM.jo(rowId);var b=dijit.b(this.c.m(a.data)+"_cc");G_SERVER_COM.n(a.data.Gb.Xa,a.data.Gb.Qb,a.data.Gb.P,a.data.Gb.Ca,this.Hl.bind(this),b.t()[0].id);a=dojo.b(rowId+"_details_hidden");b=dojo.b(rowId+"_details_loading");dojo.style(a,"display","none");dojo.style(b,"display","")},Hl:function(a,
b,c,d){G_SERVER_COM.Ub(a,b,c,d);a=dojo.b(d.Of+"_details_loading");b=dojo.b(d.Of+"_details");dojo.style(a,"display","none");dojo.style(b,"display","");d=dijit.b(d.Of+"_cc");dojo.style(d.r,"display","")},rm:function(a){rowId=this.c.m(a.data);a=dojo.b(rowId+"_details_hidden");var b=dojo.b(rowId+"_details");dojo.style(a,"display","");dojo.style(b,"display","none");a=dijit.b(rowId+"_cc");dojo.style(a.r,"display","none")},dn:function(a){var b=this.lb(a);this.contextMenu.qk(a,this,b.data)},Hk:function(a){delete this.ud[a.c.id];
for(var b=0;b<a.T.length;b++)G_UI_COM.fj(a.T[b])},ej:function(a,b,c){G_UI_COM.Fa(a,b,"G",c);if(b=G_UI_COM.Oa(a))this.ud[a]&&(clearTimeout(this.ud[a]),delete this.ud[a]),this.ud[a]=setTimeout(this.Hk.bind(this,b),200)},En:function(a){for(var b=0;b<this.Ob.length;b++)this.ej(this.Ob[b].vj,this.Ob[b].dj,a)},Dn:function(a){a=a.length;for(var b=0;b<this.Jb.length;b++)switch(this.Jb[b].$k){case "gbd_single":1==a?this.Jb[b].button.set("disabled",!1):this.Jb[b].button.set("disabled",!0);break;case "gbd_multi":0==
a?this.Jb[b].button.set("disabled",!0):this.Jb[b].button.set("disabled",!1)}},Xi:function(){this.od&&G_SERVER_COM.n(this.od,this.ij,this.Wt,this.Vt,null,dijit.b(this.Qa).getParent().dc||null)},At:function(a,b){this.Ob.push({vj:a,dj:b});this.ej(a,b,this.bc)},zt:function(a,b){this.Jb.push({button:a,$k:b});a.io(this)},lr:function(a){this.c.oa.Or=a;this.refresh()}});dojo.declare("FIRMOS.FormButton",dijit.form.ua,{ia:function(a){a.preventDefault();dojo.cc(a);this.Hc(dijit.form.I).Kl();switch(this.type){case "submit":this.zi();
break;case "button":this.qm()}},Hc:function(a){for(var b=this.getParent();b&&!b.h(a);)b=b.getParent();return b},qm:function(){if(this.Td){var a=this.Hc(dijit.wg);a&&a.nc()}this.hc&&G_SERVER_COM.n(this.hc,this.Id,this.Nc,this.Jd,this.mo.bind(this));this.vb&&(dojo.Fi.Ei.nj(dojo.b("FirmOSDownload"),this.vb,!0),this.Td||this.Hc(dijit.form.I).we())},zi:function(){var a=this.Hc(dijit.form.I),b=dojo.ka(this.Jd);a.n(this.hc,this.Id,this.Nc,b,this.rs,this.Dm)},mo:function(a,b,c,d){this.Hc(dijit.form.I).we();
G_SERVER_COM.Ub(a,b,c,d)}});dojo.declare("FIRMOS.GridButton",dijit.form.ua,{io:function(a){this.Pf=a},ia:function(){var a={},b=this.Pf.de(),c;a.lc=this.Pf.c.oa.lc;dojo.sa(a,this.Jd);a.selected=b;if(this.Nc)c=this.Nc;else if(0<b.length){var d=this.Pf.lb(b[0]);c=[b[0]];d.P?c=d.P:d.uid&&(c=[d.uid])}G_SERVER_COM.n(this.hc,this.Id,c,a)}});dojo.declare("FIRMOS.DateTextBox",dijit.form.Ke,{pt:"dojox.widget.Calendar",constructor:function(a){a.D?(this.W=eval(a.D),delete a.D):this.W=!1},iq:function(a,b){isNaN(a)?
this.e(arguments):0==Number(a)?this.Qk("",b,""):this.Qk(new Date(Number(a)),b,new Date(Number(a)))},Y:function(){this.e(arguments);for(var a=this.getParent();a&&!a.h(dijit.form.I);)a=a.getParent();a&&a.h(FIRMOS.I)&&(a.Kb(this),a.ob(this))}});dojo.declare("FIRMOS.Recurrence",dijit.form.Vj,{j:G_TEXTS.ut,gq:"dijitChecked dijitRadioChecked",hq:'aria-checked="true"',Ma:"",La:"",Gh:"",fc:"",Z:"once minute hour day week month quarter year".split(" "),ma:"mo tu we th fr sa su".split(" "),Ri:[{label:"1",value:"1"},
{label:"5",value:"5"},{label:"10",value:"10"},{label:"15",value:"15"},{label:"30",value:"30"},{label:"45",value:"45"}],Ci:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"6",value:"6"},{label:"12",value:"12"}],fi:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],Si:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"6",value:"6"}],
nd:[],al:"firmosRecurrenceInput",O:"",Co:'<div data-dojo-attach-point="wrapperDiv,focusNode" id="${id}" role="presentation">',Ao:"</div>",xj:'<div class="firmosRecurrenceDividerContainer"><div class="firmosRecurrenceDivider"></div></div>',Do:'<div id="${id}_sd"></div><div id="${id}_st"></div>',Bo:'<div id="${id}_ed"></div><div id="${id}_et"></div>',zo:'<div id="${id}_count"></div>',wd:'<div data-dojo-attach-point="${value}Div" class="firmosRecurrenceInputItem" role="presentation"><div class="firmosRecurrenceCBContainer"><div class="dijit dijitReset dijitInline dojoxMultiSelectItemBox dijitRadio" role="presentation"><input class="dijitCheckBoxInput" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onclick:_onRadioClick, onmouseover: _onRadioMOver, onmouseout: _onRadioMOut" data-onclick="${onclick}" data-cbid="${value}" type="radio" "/></div><div class="dijitInline dojoxMultiSelectItemLabel" data-dojo-attach-event="onclick:${onclick}" data-cbid="${value}">${caption}</div></div>${details}</div>',
Hu:"",Fu:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_m_detail"></div></div>',Eu:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_h_detail"></div></div>',Du:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_d_detail"></div></div>',Eo:'<div data-dojo-attach-point="${value}DayDiv" class="dijit dijitReset dijitInline dijitCheckBox" role="presentation"><input class="dijitReset dijitCheckBoxInput" data-onclick="_setWeekDetails" data-day="${value}" type="checkbox" data-dojo-attach-event="onclick:_onBoxClick, onmouseover: _onBoxMOver, onmouseout: _onBoxMOut" style="-moz-user-select: none;"></div>',
yj:'<div class="dijitInline" style="float:right;">${week_days}</div>',Gu:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_mo_detail"></div></div>',Iu:"",Ju:"",constructor:function(a){for(var b="",c=0;c<this.ma.length;c++)b=b+this.Eo.replace(/\$\{value\}/g,this.ma[c])+this.j[this.ma[c]]+" ";this.yj=this.yj.replace(/\$\{week_days\}/g,b);this.O=this.Co;this.O+=this.wd.replace(/\$\{caption\}/g,this.j.Fe).replace(/\$\{value\}/g,
"sd").replace(/\$\{details\}/g,this.Do).replace(/\$\{onclick\}/g,"_onSTSelect");this.O+=this.xj;for(c=0;c<this.Z.length;c++)a["ri"+this.Z[c]]&&(this.nd.push(this.Z[c]),this.O+=this.wd.replace(/\$\{caption\}/g,this.j[this.Z[c]]).replace(/\$\{value\}/g,this.Z[c]).replace(/\$\{details\}/g,this["template"+this.Z[c]+"Details"].replace(/\$\{caption\}/g,this.j.interval)).replace(/\$\{onclick\}/g,"_onRTSelect"));this.O+=this.xj;this.O+=this.wd.replace(/\$\{caption\}/g,this.j.Zs).replace(/\$\{value\}/g,"ned").replace(/\$\{details\}/g,
"").replace(/\$\{onclick\}/g,"_onETSelect");this.O+=this.wd.replace(/\$\{caption\}/g,this.j.ha).replace(/\$\{value\}/g,"ed").replace(/\$\{details\}/g,this.Bo).replace(/\$\{onclick\}/g,"_onETSelect");this.O+=this.wd.replace(/\$\{caption\}/g,this.j.count).replace(/\$\{value\}/g,"count").replace(/\$\{details\}/g,this.zo).replace(/\$\{onclick\}/g,"_onETSelect");this.O+=this.Ao;a.D?(this.W=eval(a.D),delete a.D):this.W=!1},sd:function(){this.e(arguments);this.Fe=new FIRMOS.Ke({style:"float: right;",Y:this.jh.bind(this)},
this.id+"_sd");this.startTime=new dijit.form.Sj({style:"float: right;",Y:this.jh.bind(this),ga:{Fo:"HH:mm",kl:"T00:15:00",Yo:"T01:00:00",Zo:"T01:00:00"}},this.id+"_st");this.ha=new FIRMOS.Ke({style:"float: right;",Y:this.ih.bind(this)},this.id+"_ed");this.na=new dijit.form.Sj({style:"float: right;",Y:this.ih.bind(this),ga:{Fo:"HH:mm",kl:"T00:15:00",Yo:"T01:00:00",Zo:"T01:00:00"}},this.id+"_et");this.qa=new dijit.form.qp({style:"float: right; width: 60px;",Y:this.Ck.bind(this),ga:{min:1,kd:0}},this.id+
"_count");this.Kt&&(this.ke=new dijit.form.Oe({style:"width: 60px;",Y:this.zh.bind(this),options:this.Ri},this.id+"_m_detail"),this.mf(""));this.Jt&&(this.fe=new dijit.form.Oe({style:"width: 60px;",Y:this.yh.bind(this),options:this.Ci},this.id+"_h_detail"),this.lf(""));this.It&&(this.Wd=new dijit.form.Oe({style:"width: 60px;",Y:this.xh.bind(this),options:this.fi},this.id+"_d_detail"),this.jf(""));this.Mt&&this.pf("");this.Lt&&(this.le=new dijit.form.Oe({style:"width: 60px;",Y:this.Ah.bind(this),options:this.Si},
this.id+"_mo_detail"),this.nf(""));this.Na(this.Tt);this.Rk(this.value||"")},Rk:function(a){var b=[];""!=a&&(b=a.split("#"));for(var c=a=!0,d=0;d<b.length;d++)0==b[d].indexOf("DTSTART")?(this.Eh(b[d]),a=!1):0==b[d].indexOf("RRULE")?(this.Dh(b[d]),c=!1):console.error("Unknown part in recurrence rule definition: "+b[d]);a&&this.Eh("");c&&this.Dh("")},Xg:function(a){switch(Math.round(a.getMinutes()/15)){case 0:a.setMinutes(0);break;case 1:a.setMinutes(15);break;case 2:a.setMinutes(30);break;case 3:a.setMinutes(45);
break;case 4:a.setMinutes(0),a.setHours(a.getHours()+1)}return a},Eh:function(a){""==a?(a=this.Xg(new Date),this.Fe.set("value",a),this.startTime.set("value",a)):(a=this.Hh(a.substring(8)),this.Fe.set("value",a.uf),this.startTime.set("value",a.time))},Dh:function(a){""==a?(this.Ch([]),this.of(""),this.Gd("")):(a=a.substr(6).split(";"),1<a.length&&0==a[a.length-1].indexOf("UNTIL")?(this.Gd(""),this.of(a[a.length-1]),a.pop()):(this.of(""),1<a.length&&0==a[a.length-1].indexOf("COUNT")?(this.Gd(a[a.length-
1]),a.pop()):this.Gd("")),this.Ch(a))},Ch:function(a){var b="";if(0<a.length)switch(a[0].substr(5)){case "MINUTELY":b="minute";1<a.length&&0==a[1].indexOf("INTERVAL")?this.mf(a[1]):this.mf("");break;case "HOURLY":b="hour";1<a.length&&0==a[1].indexOf("INTERVAL")?this.lf(a[1]):this.lf("");break;case "DAILY":b="day";1<a.length&&0==a[1].indexOf("INTERVAL")?this.jf(a[1]):this.jf("");break;case "WEEKLY":b="week";1<a.length&&0==a[1].indexOf("BYDAY")?this.pf(a[1]):this.pf("");break;case "MONTHLY":1<a.length&&
"INTERVAL=3"==a[1]?b="quarter":(b="month",1<a.length&&0==a[1].indexOf("INTERVAL")?this.nf(a[1]):this.nf(""));break;case "YEARLY":b="year"}if(""==b||!this[b+"Div"])for(a=0;a<this.Z.length;a++)if(this[this.Z[a]+"Div"]){b=this.Z[a];break}for(a=0;a<this.nd.length;a++)this.aa(this[this.nd[a]+"Div"]);this.Na(this[b+"Div"]);this.Bh(b)},of:function(a){""==a?(this.Na(this.Cb),this.aa(this.wb),this.aa(this.Lb),a=new Date,a.setFullYear(a.getFullYear()+1),a=this.Xg(a),this.ha.set("value",a),this.na.set("value",
a),this.ha.set("disabled",!0),this.na.set("disabled",!0)):(this.Na(this.wb),this.aa(this.Cb),this.aa(this.Lb),a=this.Hh(a.substring(6)),this.ha.set("value",a.uf),this.na.set("value",a.time),this.ha.set("disabled",!1),this.na.set("disabled",!1));this.qa.set("disabled",!0)},Gd:function(a){""==a?(this.Na(this.Cb),this.aa(this.wb),this.aa(this.Lb),this.qa.set("value",1),this.ha.set("disabled",!0),this.na.set("disabled",!0),this.qa.set("disabled",!0)):(this.Na(this.Lb),this.aa(this.Cb),this.qa.set("value",
Number(a.substring(6))),this.ha.set("disabled",!0),this.na.set("disabled",!0),this.qa.set("disabled",!1))},jq:function(){},Ka:function(){this.value=this.Gh;""!=this.Ma&&(this.value=this.value+"#"+this.Ma+this.La+this.fc)},Bh:function(a){this.dk();this.La="";if(a==this.Z[0])this.Ma="",this.Pg(!0);else switch(this.Pg(!1),a){case this.Z[1]:this.Rg(!1);this.zh();this.Ma="RRULE:FREQ=MINUTELY";break;case this.Z[2]:this.Qg(!1);this.yh();this.Ma="RRULE:FREQ=HOURLY";break;case this.Z[3]:this.Og(!1);this.xh();
this.Ma="RRULE:FREQ=DAILY";break;case this.Z[4]:this.Ug(!1);this.Sk();this.Ma="RRULE:FREQ=WEEKLY";break;case this.Z[5]:this.Sg(!1);this.Ah();this.Ma="RRULE:FREQ=MONTHLY";break;case this.Z[6]:this.Ma="RRULE:FREQ=MONTHLY;INTERVAL=3";break;case this.Z[7]:this.Ma="RRULE:FREQ=YEARLY"}this.Ka()},mf:function(a){""==a?this.ke.set("value",this.Ri[0].id):this.ke.set("value",a.substr(9))},lf:function(a){""==a?this.fe.set("value",this.Ci[0].id):this.fe.set("value",a.substr(9))},jf:function(a){""==a?this.Wd.set("value",
this.fi[0].id):this.Wd.set("value",a.substr(9))},pf:function(a){for(var b=0;b<this.ma.length;b++)this.Ih(this[this.ma[b]+"DayDiv"]);if(""==a)b=(new Date).getDay(),0==b?b=6:b--,this.gf(this[this.ma[b]+"DayDiv"]);else for(a=a.substr(6).split(","),b=0;b<a.length;b++)this.gf(this[a[b].toLowerCase()+"DayDiv"])},nf:function(a){""==a?this.le.set("value",this.Si[0].id):this.le.set("value",a.substr(9))},zh:function(){var a=this.ke.get("value");this.La="1"!=a?";INTERVAL="+a:"";this.Ka()},yh:function(){var a=
this.fe.get("value");this.La="1"!=a?";INTERVAL="+a:"";this.Ka()},xh:function(){var a=this.Wd.get("value");this.La="1"!=a?";INTERVAL="+a:"";this.Ka()},Sk:function(){for(var a=[],b=0;b<this.ma.length;b++)this.dh(this[this.ma[b]+"DayDiv"])&&a.push(this.ma[b].toUpperCase());this.La=a.join(",");0<this.La.length&&(this.La=";BYDAY="+this.La);this.Ka()},Ah:function(){var a=this.le.get("value");this.La="1"!=a?";INTERVAL="+a:"";this.Ka()},dk:function(){this.Rg(!0);this.Qg(!0);this.Og(!0);this.Ug(!0);this.Sg(!0)},
Rg:function(a){this.ke.set("disabled",a)},Qg:function(a){this.fe.set("disabled",a)},Og:function(a){this.Wd.set("disabled",a)},Ug:function(a){if(a)for(a=0;a<this.ma.length;a++)this.ck(this[this.ma[a]+"DayDiv"]);else for(a=0;a<this.ma.length;a++)this.ik(this[this.ma[a]+"DayDiv"])},Sg:function(a){this.le.set("disabled",a)},Pg:function(a){a?(this.Tg(this.wb),this.Tg(this.Cb),this.ha.set("disabled",!0),this.na.set("disabled",!0),this.qa.set("disabled",!0)):(this.Vg(this.wb),this.Vg(this.Cb),this.$e(this.wb)&&
(this.ha.set("disabled",!1),this.na.set("disabled",!1)),this.$e(this.Lb)&&this.qa.set("disabled",!1))},Ck:function(){this.fc=";COUNT="+this.qa.get("value");this.Ka()},ih:function(){this.fc=";UNTIL="+this.Se(this.ha.get("value"),this.na.get("value"));this.Ka()},jh:function(){this.Gh="DTSTART:"+this.Se(this.Fe.get("value"),this.startTime.get("value"));this.Ka()},Hh:function(a){var b={};a=a.split("T");b.uf=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)));1<a.length&&
(b.time=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)),Number(a[1].substr(0,2)),Number(a[1].substr(2,2)),Number(a[1].substr(4,2))),7==a[1].length&&"Z"==a[6]&&b.time.setMinutes(b.time.getMinutes()+b.time.getTimezoneOffset()));return b},Se:function(a,b){var c=""+a.getFullYear();9>a.getMonth()&&(c+="0");c+=a.getMonth()+1;10>a.getDate()&&(c+="0");c+=a.getDate();c+="T";10>b.getHours()&&(c+="0");c+=b.getHours();10>b.getMinutes()&&(c+="0");c+=b.getMinutes();10>b.getSeconds()&&
(c+="0");return c+=b.getSeconds()},aq:function(){},Vp:function(a){switch(a.target.getAttribute("data-cbid")){case "ned":this.Na(this.Cb);this.aa(this.wb);this.aa(this.Lb);this.fc="";this.ha.set("disabled",!0);this.na.set("disabled",!0);this.qa.set("disabled",!0);break;case "ed":this.Na(this.wb);this.aa(this.Cb);this.aa(this.Lb);this.ha.set("disabled",!1);this.na.set("disabled",!1);this.qa.set("disabled",!0);this.fc=";UNTIL="+this.Se(this.ha.get("value"),this.na.get("value"));break;case "count":this.Na(this.Lb),
this.aa(this.Cb),this.aa(this.wb),this.ha.set("disabled",!0),this.na.set("disabled",!0),this.qa.set("disabled",!1),this.fc=";COUNT="+this.qa.get("value")}this.Ka()},Xp:function(a){for(var b=0;b<this.nd.length;b++)this.aa(this[this.nd[b]+"Div"]);this.Na(this[a.target.getAttribute("data-cbid")+"Div"]);this.Bh(a.target.getAttribute("data-cbid"))},Tg:function(a){dojo.p(a.childNodes[0].childNodes[0],"dijitDisabled");dojo.p(a.childNodes[0].childNodes[0],"dijitRadioDisabled");this.$e(a)&&(dojo.p(a.childNodes[0].childNodes[0],
"dijitCheckedDisabled"),dojo.p(a.childNodes[0].childNodes[0],"dijitRadioCheckedDisabled"))},Vg:function(a){dojo.q(a.childNodes[0].childNodes[0],"dijitDisabled");dojo.q(a.childNodes[0].childNodes[0],"dijitRadioDisabled");dojo.q(a.childNodes[0].childNodes[0],"dijitCheckedDisabled");dojo.q(a.childNodes[0].childNodes[0],"dijitRadioCheckedDisabled")},aa:function(a){dojo.q(a.childNodes[0].childNodes[0],"dijitChecked");dojo.q(a.childNodes[0].childNodes[0],"dijitRadioChecked")},Na:function(a){dojo.p(a.childNodes[0].childNodes[0],
"dijitChecked");dojo.p(a.childNodes[0].childNodes[0],"dijitRadioChecked");dojo.ra(a.childNodes[0].childNodes[0],"dijitHover")&&(dojo.p(a.childNodes[0].childNodes[0],"dijitCheckedHover"),dojo.p(a.childNodes[0].childNodes[0],"dijitRadioCheckedHover"))},$e:function(a){return dojo.ra(a.childNodes[0].childNodes[0],"dijitChecked")},ck:function(a){dojo.p(a,"dijitDisabled");dojo.p(a,"dijitCheckBoxDisabled");this.dh(a)&&(dojo.p(a,"dijitCheckedDisabled"),dojo.p(a,"dijitCheckBoxCheckedDisabled"))},ik:function(a){dojo.q(a,
"dijitDisabled");dojo.q(a,"dijitCheckBoxDisabled");dojo.q(a,"dijitCheckedDisabled");dojo.q(a,"dijitCheckBoxCheckedDisabled")},Ih:function(a){dojo.q(a,"dijitChecked");dojo.q(a,"dijitCheckBoxChecked");dojo.q(a,"dijitCheckedHover");dojo.q(a,"dijitCheckBoxCheckedHover")},gf:function(a){dojo.p(a,"dijitChecked");dojo.p(a,"dijitCheckBoxChecked");dojo.ra(a,"dijitHover")&&(dojo.p(a,"dijitCheckedHover"),dojo.p(a,"dijitCheckBoxCheckedHover"))},dh:function(a){return dojo.ra(a,"dijitChecked")},Sp:function(a){dojo.ra(a.target.parentNode,
"dijitDisabled")||("true"==a.target.getAttribute("aria-checked")?(a.target.setAttribute("aria-checked",!1),this.Ih(a.target.parentNode)):(a.target.setAttribute("aria-checked",!0),this.gf(a.target.parentNode)),this[a.target.getAttribute("data-onclick")](a))},Up:function(a){dojo.ra(a.target.parentNode,"dijitDisabled")||(dojo.p(a.target.parentNode,"dijitHover"),dojo.p(a.target.parentNode,"dijitCheckBoxHover"),dojo.ra(a.target.parentNode,"dijitChecked")&&(dojo.p(a.target.parentNode,"dijitCheckBoxCheckedHover"),
dojo.p(a.target.parentNode,"dijitCheckedHover")))},Tp:function(a){dojo.ra(a.target.parentNode,"dijitDisabled")||(dojo.q(a.target.parentNode,"dijitHover"),dojo.q(a.target.parentNode,"dijitCheckBoxHover"),dojo.q(a.target.parentNode,"dijitCheckBoxCheckedHover"),dojo.q(a.target.parentNode,"dijitCheckedHover"))},Yp:function(a){if(!dojo.ra(a.target.parentNode,"dijitDisabled"))this[a.target.getAttribute("data-onclick")](a)},$p:function(a){dojo.ra(a.target.parentNode,"dijitDisabled")||(dojo.p(a.target.parentNode,
"dijitHover"),dojo.p(a.target.parentNode,"dijitRadioHover"),dojo.ra(a.target.parentNode,"dijitChecked")&&(dojo.p(a.target.parentNode,"dijitRadioCheckedHover"),dojo.p(a.target.parentNode,"dijitRadioHover")))},Zp:function(a){dojo.ra(a.target.parentNode,"dijitDisabled")||(dojo.q(a.target.parentNode,"dijitHover"),dojo.q(a.target.parentNode,"dijitRadioHover"),dojo.q(a.target.parentNode,"dijitRadioCheckedHover"),dojo.q(a.target.parentNode,"dijitRadioHover"))},Y:function(){this.e(arguments);for(var a=this.getParent();a&&
!a.h(dijit.form.I);)a=a.getParent();a&&a.h(FIRMOS.I)&&(a.Kb(this),a.ob(this))}});dojo.declare("FIRMOS.FileUpload",dojox.form.Bp,{required:!1,constructor:function(a){a.D?(this.W=eval(a.D),delete a.D):this.W=!1;a.disabled&&(setTimeout(this.set.bind(this,"disabled",!0),0),delete a.disabled)},xk:function(){return""==this.Sb()},Ii:function(){return!this.required||!this.xk()},ng:function(a){var b="";a=this.disabled||this.Ii(a);dojo.gg(this.focusNode,"aria-invalid",a?"false":"true");b=this.Qi.Nm;this.set("message",
b);return a},cj:function(){this.e(arguments);this.Qi=dojo.ts.cs("dijit.form","validate",this.lang)},Wr:function(){return this.Qi.Nm},Hp:function(){this.e(arguments);"image"==this.fv&&dojo.gg(this.zs,"accept","image/*")},Wp:function(){this.ti=!0;this.Af(this.message);this.e(arguments)},Rp:function(){this.ti=!1;this.Af("");this.e(arguments)},Af:function(a){a&&this.ti?dijit.Tj.show(a,this.Go):dijit.Tj.nc(this.Go)},lq:function(a){this.Lk("required",a);dojo.gg(this.focusNode,"aria-required",a)},kq:function(a){this.Lk("message",
a);this.Af(a)},Y:function(){this.e(arguments);for(var a=this.getParent();a&&!a.h(dijit.form.I);)a=a.getParent();a&&a.h(FIRMOS.I)&&(a.Kb(this),a.ob(this))}});dojo.declare("FIRMOS.FileUpload.Image",dojox.form.Fb.Dp,{He:"",Fb:null,Jh:0,Sf:100,Tf:100,tm:!1,O:'<div class="firmosUploaderImage"></div>',constructor:function(){this.d=[]},B:function(){for(;0<this.d.length;)this.d.pop().remove()},Ra:function(){this.e(arguments);this.oj();this.value?this.Kg(this.value):this.ol=dojo.create("div",{xa:"firmosUploaderImageContent",
style:"height:"+this.Sf+"px; width:"+this.Tf+"px"},this.r)},Kg:function(a){this.bi=dojo.create("img",{xa:"firmosUploaderImageContent",style:this.tm?"height:"+this.Sf+"px; width:"+this.Tf+"px":"max-height:"+this.Sf+"px; max-width:"+this.Tf+"px",src:a},this.r)},oj:function(){if(this.He||this.Fb){if(this.He&&!this.Fb&&(this.Fb=dijit.b(this.He),!this.Fb)){this.Jh++;5<this.Jh?console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload found with id "+this.He):setTimeout(this.oj.bind(this),250);return}this.d.push(dojo.l(this.Fb,
"onChange",this.Yn.bind(this)));this.d.push(dojo.l(this.Fb,"reset",this.$n.bind(this)))}else console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload set.")},ln:function(a){this.bi?dojo.gg(this.bi,"src",a.target.result):(dojo.B(this.ol),this.Kg(a.target.result))},Yn:function(){var a=new FileReader;a.onload=this.ln.bind(this);a.readAsDataURL(this.Fb.We[0])},$n:function(){console.log("selectionReset")}});dojo.declare("FIRMOS.Form",dijit.form.I,{constructor:function(a){this.jj=dojo.eb(a.co);this.Ll=
dojo.eb(a.hr);delete a.co;this.L={};a.vf&&(this.id=a.id,G_UI_COM.Fn(this,a.vf));a.Yi&&(this.fh=new Date,this.hf={},this.kj=Number(a.ct)||0)},B:function(){this.vf&&G_UI_COM.Oo(this.id,this.vf);this.e(arguments)},lt:function(){for(var a=this.t(),b=0;b<a.length;b++)if(a[b].h(FIRMOS.Ne)&&"submit"==a[b].type){a[b].zi();break}return!1},$i:function(a){this.e(arguments);this.jj&&(this.xm=this.get("value"));for(var b=this.t(),c=0;c<b.length;c++)if(b[c].name){this.Ll&&(b[c].h(FIRMOS.Ne)||b[c].set("disabled",
!0));b[c].h(FIRMOS.Ie)&&b[c].Dj(b);b[c].h(FIRMOS.Me)&&b[c].vm();var d=b[c].name.split(".");d.pop();0==d.length?b[c].W&&(b[c].set("required",!0),d=dojo.b(b[c].id+"_label"),dojo.q(d,"firmosFormLabel"),dojo.p(d,"firmosFormLabelRequired")):(d=d.join("."),this.L[d]||(this.L[d]={},this.L[d].ad=[],this.L[d].required=!1,this.L[d].Xc=[]),b[c].W&&this.L[d].ad.push(b[c].id),this.L[d].Xc.push(b[c].id))}for(c in this.L)if(0==this.L[c].ad.length)delete this.L[c];else for(b=0;b<this.L[c].Xc.length;b++)if(d=dijit.b(this.L[c].Xc[b]),
!d.h(FIRMOS.Ie)&&(d=d.get("value"))&&""!=d){this.kf(c,!0);break}},kf:function(a,b){for(var c=0;c<this.L[a].ad.length;c++){dijit.b(this.L[a].ad[c]).set("required",b);var d=dojo.b(this.L[a].ad[c]+"_label");b?(dojo.q(d,"firmosFormLabel"),dojo.p(d,"firmosFormLabelRequired")):(dojo.q(d,"firmosFormLabelRequired"),dojo.p(d,"firmosFormLabel"))}this.L[a].required=b},Kb:function(a){if(!a.h(FIRMOS.Ie)){var b=a.name.split(".");b.pop();if(0<b.length&&(b=b.join("."),this.L[b]))if((newValue=a.get("value"))&&""!=
newValue)this.L[b].required||this.kf(b,!0);else{for(a=0;a<this.L[b].Xc.length;a++){var c=dijit.b(this.L[b].Xc[a]);if(!c.h(FIRMOS.Ie)&&(c=c.get("value"))&&""!=c)return}this.kf(b,!1)}}},ob:function(a){if(this.Yi&&(!a||!a.get("disabled"))){var b=new Date;a&&(this.fh=b,this.hf[a.name]=a.get("value"));a=b-this.fh;a>this.kj?(dojo.ka(this.et),G_SERVER_COM.n(this.Yi,this.dt,this.ft,this.hf),this.hf={}):(this.vh&&clearTimeout(this.vh),this.vh=setTimeout(this.ob.bind(this),this.kj-a))}},Hg:function(a,b){for(var c in a)if(a[c]instanceof
Array){if(a[c].length==b[c].length){for(var d=!0,e=0;e<a[c].length;e++)if(a[c][e]!=b[c][e]){d=!1;break}d&&delete a[c]}}else if(a[c]instanceof Date||b[c]instanceof Date)a[c]instanceof Date&&b[c]instanceof Date&&a[c].getTime()==b[c].getTime()&&delete a[c];else if("object"==typeof a[c]){this.Hg(a[c],b[c]);d=!0;for(e in a[c]){d=!1;break}d&&delete a[c]}else a[c]==b[c]&&delete a[c]},Jg:function(a){for(var b in a)if(a[b]instanceof Array)for(var c=0;c<a[b].length;c++)a[b][c]instanceof Date&&(a[b][c]=a[b][c].getTime());
else a[b]instanceof Date?a[b]=a[b].getTime():"object"==typeof a[b]&&this.Jg(a[b])},Ze:function(){for(var a=this.e(arguments),b=this.t(),c=0;c<b.length;c++)b[c].name&&b[c].ah&&a[b[c].name]&&delete a[b[c].name];return a},pk:function(a,b,c,d,e,f){for(var g=this.t(),h=[],k=0;k<g.length;k++)if(g[k].name&&g[k].h(FIRMOS.ep)&&g[k].We)for(var l=0;l<g[k].We.length;l++)h.push({si:g[k].name,file:g[k].We[l]});0<h.length?this.uh(a,b,c,d,e,f,h):this.th(a,b,c,d,e,f)},Kk:function(a,b,c,d,e,f,g){0==g.length?this.th(a,
b,c,d,e,f):this.uh(a,b,c,d,e,f,g)},uh:function(a,b,c,d,e,f,g){var h=g.pop(),k=h.file,l={data:{}};l.data.size=k.size;l.data.name=k.name;l.data.type=k.type;l.data.si=h.si;l.data.Er=0;l.data.Gq=k.size;l.data.Fq=0;G_SERVER_COM.n("FIRMOS","binaryBulkTransfer",null,l,this.Kk.bind(this,a,b,c,d,e,f,g),null,k)},th:function(a,b,c,d,e,f){d.data=this.get("value");dojo.ka(d.data);this.jj&&this.Hg(d.data,this.xm);this.Jg(d.data);dojo.sa(d.data,e);f&&G_UI_COM.Em();G_SERVER_COM.n(a,b,c,d,this.yo.bind(this))},n:function(a,
b,c,d,e,f){if(!this.ng())return this.we(),!1;this.pk(a,b,c,d,e,f)},yo:function(a,b,c,d){this.we();G_SERVER_COM.Ub(a,b,c,d)},Kl:function(){for(var a=this.t(),b=0;b<a.length;b++)a[b].h(FIRMOS.Ne)&&(a[b].kh=a[b].get("disabled"),a[b].set("disabled",!0))},we:function(){for(var a=this.t(),b=0;b<a.length;b++)a[b].h(FIRMOS.Ne)&&(a[b].set("disabled",a[b].kh),delete a[b].kh)},Nh:function(a,b){for(var c in a)if("uid"!=c)if(c instanceof Object)if(c instanceof Array){var d=this.Xe(b+c);d&&d.set("value",a[c])}else this.Nh(a[c],
b+c+".");else(d=this.Xe(b+c))&&(d.h(FIRMOS.Ke)?d.set("displayedValue",a[c]):d.set("value",a[c]))},Ej:function(a){this.Nh(a,"")},Xe:function(a){for(var b=this.t(),c=0;c<b.length;c++)if(b[c].name==a)return b[c];return null}});dojo.declare("FIRMOS.ToolbarButton",dijit.form.ua,{ia:function(){this.vb&&dojo.Fi.Ei.nj(dojo.b("FirmOSDownload"),this.vb,!0);this.hc&&G_SERVER_COM.n(this.hc,this.Id,this.Nc,this.Jd)}});dojo.declare("FIRMOS.Toolbar",dijit.yd,{constructor:function(){},Ra:function(){this.e(arguments);
for(var a=0;a<this.Yb.length;a++){if(this.Yb[a].tc){var b={style:"display: none;"};this.Yb[a].id&&(b.id=this.Yb[a].id);var b=new dijit.yg(b),c=G_UI_COM.Kd(b,this.Yb[a].tc,this.Yb[a].disabled);b.set("disabled",c);c={label:this.Yb[a].caption,Ql:b,disabled:c};c=new dijit.form.Lj(c);b.Lc=c}else{b=this.Yb[a];c={};b.action&&(c.hc=b.action.xa,c.Id=b.action.Lf,c.Nc=b.action.P,c.Jd=b.action.Ca);b.vb&&(c.vb=b.vb);""==b.caption?c.lu=!1:c.label=b.caption;if(b.icon){var d=b.icon.replace(/[\/\.]/g,"");G_UI_COM.Mb(d,
"background-image: url('"+b.icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");c.Di=d}b.disabled&&(c.disabled=!0);b.id&&(c.id=b.id);c=new FIRMOS.wp(c)}this.F(c)}}});dojo.declare("FIRMOS.Menu",dijit.Bc,{Zj:function(){for(var a=this.t(),b=0;b<a.length;b++)this.removeChild(a[b]),a[b].Pb()},fo:function(a,b){this.Jc||(this.Jc={});this.Jc.coords={x:a,y:b}},ri:function(a){this.Zj();G_UI_COM.Kd(this,a,!1);this.sd();this.Fk(this.Jc,!0)},Fk:function(a,b){if(b)this.e(arguments,
[a]);else switch(this.Cq){case "tree":this.Jc=a;this.sk(a);break;default:0<this.t().length&&this.e(arguments)}},sk:function(a){var b=dijit.Vr(a.target);a={};var c,d;if(b.h(dijit.Ep)){var e=b.item,f=b.Jo;dojo.sa(a,f.ta.c.oa);b=e.N?e.N instanceof Array?e.N:[e.N]:[e.uid];e.bf&&e.Ua?(c=e.Ua,d=e.bf):this.Ko&&(c=this.Ko,d=this.Pu,dojo.sa(a,this.Qu),this.Lo&&(b=this.Lo));if(0<b.length||f.ta.c.m(e)!=b[0])a.selected=[f.ta.c.m(e)]}else f=b,dojo.sa(a,f.ta.c.oa),c=this.Nu,d=this.Ou,b=this.Su,dojo.sa(a,this.Ru);
if(c){for(;f&&!f.h(dijit.Ag);)f=f.getParent();G_UI_COM.mj(this);G_SERVER_COM.n(c,d,b,a)}},qk:function(a,b,c){this.Jc={target:a.target,coords:{x:a.pageX,y:a.pageY}};a=dojo.ka(b.c.oa);var d={};d.P=c.N?c.N instanceof Array?c.N:[c.N]:[c.uid];c.bf&&c.Ua?(d.Xa=c.Ua,d.Qb=c.bf):this.jm&&(d.Xa=this.jm,d.Qb=this.ls,dojo.sa(a,this.ms),this.km&&(d.P=this.km));if(d&&d.Xa){b=b.de();if(1<b.length||0<d.P.length||b[0]!=d.P[0])a.selected=b;G_UI_COM.mj(this);G_SERVER_COM.n(d.Xa,d.Qb,d.P,a)}}});dojo.declare("FIRMOS.FilteringSelect",
dijit.form.Me,{Cd:!1,constructor:function(a){a.D?(this.W=eval(a.D),delete a.D):this.W=!1;a.ub?(this.ub=dojo.eb(a.ub),delete a.ub):this.ub=[]},Lh:function(a,b){var c=dojo.b(a.ym+"_tr");if(c){dijit.b(a.ym);for(var d=c.querySelectorAll("[widgetid]"),e=[],f=0;f<d.length;f++)e[f]=dijit.b(d[f].getAttribute("widgetid"));if(b||a.value!=this.value)for(dojo.style(c,"display","none"),f=0;f<e.length;f++)a.vs&&(e[f].ah=!0,e[f].get("required")&&(e[f].Fd=!0,e[f].set("required",!1))),e[f].h(FIRMOS.Me)&&e[f].nc();
else for(dojo.style(c,"display",""),f=0;f<e.length;f++)delete e[f].ah,e[f].Fd&&(e[f].set("required",e[f].Fd),delete e[f].Fd),e[f].h(FIRMOS.Me)&&e[f].No()}},nc:function(){this.Cd=!0;this.Yg()},No:function(){this.Cd=!1;this.rf()},rf:function(){for(var a=0;a<this.ub.length;a++)this.Lh(this.ub[a])},Yg:function(){for(var a=0;a<this.ub.length;a++)this.Lh(this.ub[a],!0)},vm:function(){""==this.value&&(this.required||this.Fd)&&0<this.c.data.length&&this.set("value",this.c.data[0].value);this.Cd?this.Yg():
this.rf()},Y:function(a){this.e(arguments);this.Cd||this.rf();for(var b=this.getParent();b&&!b.h(dijit.form.I);)b=b.getParent();b&&b.h(FIRMOS.I)&&(b.Kb(this),b.ob(this))}});dojo.declare("FIRMOS.BoolCheckBox",dijit.form.cp,{constructor:function(a){a.hi?(this.Xd=dojo.eb(a.hi),this.Ai=!0,delete a.hi):(this.Ai=!1,this.Xd={});a.D?(this.W=eval(a.D),delete a.D):this.W=!1},Dj:function(a){for(var b in this.Xd)for(var c=0;c<a.length;c++)if(b==a[c].name){"true"==this.get("value")&&this.Xd[b]||"false"==this.get("value")&&
!this.Xd[b]?a[c].set("disabled",!0):a[c].set("disabled",!1);break}},Y:function(){this.e(arguments);if(this.Ai){for(var a=this.getParent();a&&!a.h(dijit.form.I);)a=a.getParent();this.Dj(a.t())}},Ze:function(){return this.checked?"true":"false"}});dojo.declare("FIRMOS.MultiValText",dijit.form.vp,{constructor:function(a){a.D?(this.W=eval(a.D),delete a.D):this.W=!1},Ze:function(){var a=this.e(arguments);return""==a?[]:a.split("\n")},filter:function(a){var b="object"==typeof a?this.e(arguments,[a.join("\n")]):
this.e(arguments),b=b.replace(/\n+/g,"\n");b.lastIndexOf("\n")==b.length-1&&(b=b.substring(0,b.length-1));return b},Mk:function(){},Y:function(){this.e(arguments);for(var a=this.getParent();a&&!a.h(dijit.form.I);)a=a.getParent();a&&a.h(FIRMOS.I)&&(a.Kb(this),a.ob(this))}});dojo.declare("FIRMOS.ValidationTextBox",dijit.form.Cp,{constructor:function(a){a.ui?(this.md=eval(a.ui),delete a.ui):this.md=null;a.D?(this.W=eval(a.D),delete a.D):this.W=!1},Ii:function(a){if(this.nl){var b=this.getParent().Xe(this.nl);
if(this.get("value")!=b.get("value"))return!1}return this.e(arguments)},ng:function(a){if(this.md){var b=this.Ha.selectionStart,c=this.Ha.value.length,d=this.Ha.value.replace(this.md,"");d.length<c&&(this.Ha.value=d,c-=d.length,this.Ha.selectionStart=b-c,this.Ha.selectionEnd=b-c)}return this.e(arguments)},Y:function(){this.e(arguments);for(var a=this.getParent();a&&!a.h(dijit.form.I);)a=a.getParent();a&&a.h(FIRMOS.I)&&(a.Kb(this),a.ob(this))}});dojo.declare("FIRMOS.NumberTextBox",dijit.form.Nj,{constructor:function(a){a.ga||
(a.ga={});this.md=a.ga.kd&&0==a.ga.kd?/[^\d\-]/g:/[^\d\.\,\-]/g;a.D?(this.W=eval(a.D),delete a.D):this.W=!1},Mk:function(){},ng:function(a){var b=this.Ha.selectionStart,c=this.Ha.value.length,d=this.Ha.value.replace(this.md,"");d.length<c&&(this.Ha.value=d,c-=d.length,this.Ha.selectionStart=b-c,this.Ha.selectionEnd=b-c);return this.e(arguments)},Ze:function(){var a=this.e(arguments);isNaN(a)&&(a="");return a},Y:function(){this.e(arguments);for(var a=this.getParent();a&&!a.h(dijit.form.I);)a=a.getParent();
a&&a.h(FIRMOS.I)&&(a.Kb(this),a.ob(this))}});dojo.declare("FIRMOS.NumberSlider",dijit.form.Vj,{O:'<div data-dojo-attach-point="focusNode" id="${id}" role="presentation"><div id="${id}_number"></div><div id="${id}_slider"></div></div>',constructor:function(a){a.ga=dojo.eb(a.ga);this.Db={};this.Db.Vs=a.ga.min;this.Db.Ss=a.ga.max;a.ga.vo&&(this.Db.gr=a.ga.vo);this.Db.value=a.value;this.Db.zm=a.zm;a.xc&&(this.xc=eval(a.xc),delete a.xc);this.xc&&(this.Db.style="width:75%;",this.gd={},this.gd.style="width:20%; float:right;",
this.gd.value=a.value,this.gd.kd=a.ga.kd,this.gd.disabled=!0);this.gc=1;for(var b=0;b<a.ga.kd;b++)this.gc*=10},sd:function(){this.e(arguments);this.Db.Y=this.Ek.bind(this);this.xc&&(this.$m=new dijit.form.Nj(this.gd,this.id+"_number"));this.sj=new dijit.form.kp(this.Db,this.id+"_slider")},Ek:function(){if(Math.round(this.sj.get("value")*this.gc)/this.gc!=this.value){this.value=Math.round(this.sj.get("value")*this.gc)/this.gc;this.xc&&this.$m.set("value",this.value);var a=this.getParent();a&&a.h(FIRMOS.I)&&
a.ob(this)}}});dojo.declare("FIRMOS.TabContainer",dijit.G.Cc,{constructor:function(){this.watch("selectedChildWidget",this.jg)},Yk:function(a){a.sort(G_UI_COM.qo);for(var b=0;b<a.length;b++)this.F(a[b]),G_UI_COM.hg||!a[b].selected||a[b].Gc||this.jg("",null,a[b])},ql:function(a,b,c,d,e){G_SERVER_COM.Ub(b,c,d,e);a.af&&(a.af(),delete a.af)},Ae:function(a,b){b&&(a.Gc?b():a.af=b);!a.Gc&&a.selected&&this.jg("",null,a);this.e(arguments)},Wn:function(){for(var a=this.t(),b=0;b<a.length;b++)if(a[b].selected){this.Ae(a[b]);
break}},jg:function(a,b,c){if(c.Gc){var d=[];this.Bd(c,d,"visibilityChange");for(a=0;a<d.length;a++)d[a].qg(!0)}else G_SERVER_COM.n(c.Ig.xa,c.Ig.Lf,c.Ig.P,c.Gp,this.ql.bind(this,c),c.oq);this.Uj&&(a=this.zp,a.Ut=c.id,G_SERVER_COM.n(this.Uj,this.yp,this.Ap,a));if(b)if(b.Gc)for(c=[],this.Bd(b,c,"visibilityChange"),a=0;a<c.length;a++)c[a].qg(!1);else{c=[];this.Bd(b,c,"destroyNotify");if(0<c.length){d=[];for(a=0;a<c.length;a++)d.push(c[a].id);G_SERVER_COM.n("FIRMOS","destroy",null,{ge:d})}c=null;if(b.Fm)for(b=
b.t(),a=0;a<b.length;a++){if(!b[a].h(FIRMOS.yd)){b=b[a].t();0<b.length&&(c=b[0]);break}}else c=b.t()[0];c&&c.Pb()}},Bd:function(a,b,c){a[c]&&b.push(a);for(var d=a.t(),e=0;e<d.length;e++)a.h(FIRMOS.Cc)&&!d[e].selected||this.Bd(d[e],b,c)},$l:function(a){for(var b=this.t(),c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null}});dojo.declare("FIRMOS.MultiContentTabController",null,{constructor:function(){this.r=dojo.create("div")},sd:function(){},B:function(){dojo.B(this.r)}});dojo.declare("FIRMOS.MultiContentContainer",
FIRMOS.Cc,{al:"firmosMultiContentContainer",constructor:function(){this.Qh=20;this.Rh=0.1},Yk:function(a){this.e(arguments);for(var b=0;b<a.length;b++)a[b].r.style.position="absolute"},Cg:function(a,b){0>b?(a.r.style.opacity=0,this.ee=null,this.tk(a,!0)):(a.r.style.opacity=b,this.ee=setTimeout(this.Cg.bind(this,a,b-this.Rh),this.Qh))},tk:function(a,b){this.ee?(clearTimeout(this.ee),this.ee=null,this.e(this.bd),this.bd=arguments):this.bd||(this.bd=arguments);b?(this.e(this.bd),this.bd=null):this.Cg(a,
1)},Dg:function(a,b){1<b?(this.De=null,a.r.style.opacity=1):(a.r.style.opacity=b,this.De=setTimeout(this.Dg.bind(this,a,b+this.Rh),this.Qh))},mq:function(a){this.De&&(clearTimeout(this.De),this.De=null);this.e(arguments);a.r.style.opacity=0;this.Dg(a,0)}});dojo.declare("FIRMOS.SplitContainer",dijit.G.Ac,{Wk:function(a){var b;if(2<a.length){b=a.shift();b.ja="top";var c=100-b.Ib;b.set("style","height: "+b.Ib+"%;");this.F(b);b=a.pop();b.ja="bottom";c-=b.Ib;b.set("style","height: "+b.Ib+"%;");this.F(b);
b=new FIRMOS.sp({id:this.id+"_child",xa:"borderContainer",ja:"center",os:!1});b.set("style","height: "+c+"%;");for(var d=0;d<a.length;d++)a[d].Ib=a[d].Ib/c*100;this.F(b);b.Wk(a)}else 2==a.length&&(b=a.shift(),b.ja="top",b.set("style","height: "+b.Ib+"%;"),this.F(b)),b=a.pop(),b.ja="center",b.set("style","height: "+b.Ib+"%;"),this.F(b)}});dojo.declare("FIRMOS.GridFilter",null,{j:G_TEXTS.ns,Dt:function(){this.e(arguments);if(!this.Fr)for(var a=dojo.$(".dgrid-cell",this.Bi),b=0;b<a.length;b++){var c=
a[b].Oq;if(this.ya[c]&&this.ya[c].Gr&&this.ya[c].dataType&&"ICO"!=this.ya[c].dataType){var d=dijit.b(this.id+"_"+c+"_ddb");if(!d){switch(this.ya[c].dataType){case "STR":var e=this.gm(this.ya[c]),f="setStringFilter";break;case "DAT":e=this.bm(this.ya[c]);f="setDateFilter";break;case "NUM":case "PRG":e=this.em(this.ya[c]);f="setNumberFilter";break;case "BOO":e=this.Zl(this.ya[c]);f="setBooleanFilter";break;default:console.error('Grid filter error: Unknown data type set for column "'+this.ya[c].label.replace(/"/g,
'"')+'": '+this.ya[c].dataType)}var e='<form dojoType="dijit.form.Form" id="'+this.id+"_"+c+'" onsubmit="return false;"><table style="width:100%">'+e+'<tr><td colspan="2" class="firmosGridFilterDialogButtons"><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.'+f+"('"+c+"',ttd.formValues); ttd.ddbutton.closeDropDown();\">"+this.j.au+'</button><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].reset(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.clearFilter(\''+
c+"'); ttd.ddbutton.closeDropDown();\">"+this.j.Hq+"</button></td></tr></table></form>",g=new dijit.xp({id:this.id+"_"+c+"_td",xa:"firmosGridFilterDialog"+this.ya[c].dataType,content:e,$i:function(){this.Yl=this.t()[0].get("value")},jt:function(){this.t()[0].set("value",this.Yl)},A:this}),d=new dijit.form.Lj({id:this.id+"_"+c+"_ddb",label:"",Ql:g,xa:"firmosGridFilter",Di:"firmosGridFilterIconClass",ia:function(a){a.preventDefault();dojo.cc(a);return!1}});g.Wq=d}a[b].appendChild(d.r)}}},Rc:function(a){G_UI_COM.gi(this.c.id,
a);a=dojo.$(".firmosGridFilter",this.ml(a).Bi);dojo.q(a[0],"firmosGridFilterSet");this.refresh()},gu:function(a,b){""==b.filter?this.Rc(a):(G_UI_COM.Fa(this.c.id,a,"SS",[b.filter]),this.Yc(a))},eu:function(a,b){if(b.type==this.j.hb.Tb){if(""==b.og&&""==b.pg){this.Rc(a);return}}else if(""==b.value){this.Rc(a);return}switch(b.type){case this.j.hb.If:G_UI_COM.Fa(this.c.id,a,"R8",[b.value],"EX");break;case this.j.hb.Wf:G_UI_COM.Fa(this.c.id,a,"R8",[b.value],"LE");break;case this.j.hb.Qf:G_UI_COM.Fa(this.c.id,
a,"R8",[b.value],"GT");break;case this.j.hb.Tb:G_UI_COM.Fa(this.c.id,a,"R8",[b.og,b.pg],"REXB")}this.Yc(a)},cu:function(a,b){if(b.type==this.j.bb.Tb){if(!b.og&&!b.pg){this.Rc(a);return}}else if(!b.value){this.Rc(a);return}switch(b.type){case this.j.bb.If:G_UI_COM.Fa(this.c.id,a,"DT",[b.value],"EX");break;case this.j.bb.Wf:G_UI_COM.Fa(this.c.id,a,"DT",[b.value],"LE");break;case this.j.bb.Qf:G_UI_COM.Fa(this.c.id,a,"DT",[b.value],"GT");break;case this.j.bb.Tb:G_UI_COM.Fa(this.c.id,a,"DT",[b.og,b.pg],
"REXB")}this.Yc(a)},du:function(a){this.Yc(a)},$t:function(a,b){G_UI_COM.Fa(this.c.id,a,"BO",[b.filter]);this.Yc(a)},Yc:function(a){a=dojo.$(".firmosGridFilter",this.ml(a).Bi);dojo.p(a[0],"firmosGridFilterSet");this.refresh()},gm:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><label for="'+this.id+"_"+a.id+'_filter">'+this.j.Wl+'</label></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="dijit.form.TextBox" id="'+this.id+"_"+a.id+'_filter" name="filter" style="width:100%"></td></tr>'},
$s:function(a,b){var c=dijit.b(b+"_value"),d=dijit.b(b+"_value1"),e=dijit.b(b+"_value2");a==this.j.hb.Tb?(dojo.style(c.r,"display","none"),dojo.style(d.r,"display",""),dojo.style(e.r,"display","")):(dojo.style(c.r,"display",""),dojo.style(d.r,"display","none"),dojo.style(e.r,"display","none"))},Vq:function(a,b){var c=dijit.b(b+"_value"),d=dijit.b(b+"_value1"),e=dijit.b(b+"_value2");a==this.j.bb.Tb?(dojo.style(c.r,"display","none"),dojo.style(d.r,"display",""),dojo.style(e.r,"display","")):(dojo.style(c.r,
"display",""),dojo.style(d.r,"display","none"),dojo.style(e.r,"display","none"))},em:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.numberFilterTypeChange(value,\''+this.id+"_"+a.id+"',this);}\"><option>"+this.j.hb.If+"</option><option>"+this.j.hb.Wf+"</option><option>"+this.j.hb.Qf+"</option><option>"+
this.j.hb.Tb+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},bm:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+
this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.dateFilterTypeChange(value,\''+this.id+"_"+a.id+"',this);}\"><option>"+this.j.bb.If+"</option><option>"+this.j.bb.Wf+"</option><option>"+this.j.bb.Qf+"</option><option>"+this.j.bb.Tb+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.DateTextBox" id="'+
this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},$r:function(){return""},Zl:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><label for="'+this.id+"_"+a.id+'_filter">'+this.j.Wl+'</label></td><td class="firmosGridFilterFormInputTD"><select data-dojo-type="dojox.form.CheckedMultiSelect" style="width:100%" id="'+
this.id+"_"+a.id+'_filter" name="filter" value="true"><option value="true">Yes</option><option value="false">No</option></select></td></tr>'}});dojo.declare("FIRMOS.StoreSeries",null,{constructor:function(a,b,c,d){this.gl=d;this.c=a;this.Ji=b;this.value=c?"function"==typeof c?c:"object"==typeof c?function(a){var b={},d;for(d in c)b[d]=a[c[d]];return b}:function(a){return a[c]}:function(a){return a.value};this.data=[];this.bh=!1;this.Kf()},B:function(){this.pe&&this.pe.remove()},fu:function(a){this.pd=
a},Kf:function(){function a(){b.data=dojo.Nd.map(b.ag,function(a){return b.value(a,b.c)});b.Gk()}this.ag=[];var b=this;this.pe&&this.pe.remove();var c=this.c.$(this.Ji.$,this.Ji);dojo.Le.ap(c,function(c){b.ag=c;a()});c.observe&&(this.pe=c.observe(a,!0,this.gl))},Gk:function(){this.pd&&(this.pd.rb.bv(this.pd.name,this,this.bh),this.bh=!1,this.pd.rb.Xq())}});dojo.declare("FIRMOS.D3Chart",dijit.G.va,{constructor:function(a){for(var b in a)this[b]=a[b];if(!this.S)for(this.S=[],b=0;b<this.f;b++)this.S[b]=
"000";G_UI_COM.Mb("d3axis path, .axis line","fill: none;shape-rendering: crispedges;stroke: #000000;");this.d=[];this.mb=this.Ea=this.Rd=this.tf=this.Yh=this.Eb=this.zc=this.sb=null;this.margin={top:20,right:20,bottom:20,left:40};this.Pd=this.Oc=null;this.td=!0;this.Wa=this.Od=null;this.Sh=0;this.Vb=this.Pd=this.Oc=null;this.Vf=[];this.zb=0;this.$f=[];switch(a.type){case "lct_line":this.$a=0;this.buffer=[];this.Ta=this.Ja;this.Dc=new Date;this.Pe=new Date;this.df=this.cf=this.Ja;this.Ec=this.ec=0;
break;case "lct_column":this.data=[]}this.cb=this.ab-this.kc;this.za=[];if("lct_line"==a.type||"lct_sampledline"==a.type)this.Am="linear",this.path=[],this.Wb=[],this.data=[];G_UI_COM.Gn(this)},qg:function(a){a?this.start():this.stop()},B:function(){this.stop();G_UI_COM.Po(this);for(this.qh();0<this.d.length;)this.d.pop().remove();this.e(arguments)},Cn:function(a){var b=!1;a.caption&&this.caption!=a.caption&&(this.caption=a.caption,this.Rd.text(this.caption));a.tb&&(this.tb=a.tb);if(a.u&&this.u!=
a.u){switch(this.type){case "lct_line":this.za=[1,a.u-2];for(var c=0;c<this.f;c++)if(a.u>this.u)for(var d=0;d<a.u-this.u;d++)this.data[c].unshift(this.cb);else for(d=0;d<this.u-a.u;d++)this.data[c].shift();break;case "lct_sampledline":this.za=[0,a.u-1];break;case "lct_column":this.za=this.tb?d3.Da(a.u).map(function(a){return this.tb[a]}.bind(this)):d3.Da(a.u).map(function(a){return a})}this.u=a.u;this.Ea.domain(this.za)}if(a.tb||a.u&&this.u!=a.u)this.Wa.call(this.Od).eg("text").style("text-anchor",
"end"),this.Bg(),b=!0;(a.S||a.f&&this.f!=a.f)&&this.qh();a.S&&(this.S=a.S);if(a.f&&this.f!=a.f){if(a.f>this.S.length)for(c=this.S.length;c<a.f;c++)this.S[c]="000";else if(a.f<this.S.length)for(c=this.S.length-1;c>=a.f;c--)this.S.pop();if(a.f>this.f)for(c=this.f;c<a.f;c++){if("lct_line"==this.type){this.buffer[c]=[];for(var e=0==this.f?this.Qc+1:this.buffer[0].length,d=0;d<e;d++)this.buffer[c][d]=this.cb;0==this.f?setTimeout(this.Ge.bind(this,c),0):this.$f.push(c)}if("lct_line"==this.type||"lct_sampledline"==
this.type)this.data[c]=d3.Da(this.u).map(function(){return this.cb}.bind(this)),this.Qe(c)}else for(c=this.f-1;c>=a.f;c--)if("lct_line"==this.type&&this.buffer.pop(),"lct_line"==this.type||"lct_sampledline"==this.type)this.data.pop(),this.Wb.pop(),this.path.pop().remove();this.f=a.f}(a.S||a.f&&this.f!=a.f)&&this.Lg();if(this.Pa&&(a.S||a.f&&this.f!=a.f)||a.Pa)this.Pa?this.Vb.remove():(this.margin.bottom+=20,b=!0),a.Pa&&(this.Pa=a.Pa);b&&(this.height=dojo.position(this.sb).v-this.margin.top-this.margin.bottom,
this.tf.k("height",this.height),this.mb.Da([this.height,0]),this.Wa&&this.Wa.k("transform","translate(0,"+this.height+")"));if(a.ab||a.kc)a.ab&&(this.ab=a.ab),a.kc&&(this.kc=a.kc),this.mb.domain([this.ab,this.kc]),this.Pd.call(this.Oc);(this.Pa&&(a.S||a.f&&this.f!=a.f)||a.Pa)&&this.nh();this.mh()},qh:function(){for(var a=0;a<this.f;a++)G_UI_COM.Mn("series"+this.id+"_"+a)},Lg:function(){if("lct_line"==this.type||"lct_sampledline"==this.type)for(var a=0;a<this.f;a++)G_UI_COM.Mb("series"+this.id+"_"+
a,"fill: none; stroke: #"+this.S[a]+"; stroke-width: 1.5px;");if("lct_column"==this.type)for(a=0;a<this.f;a++)G_UI_COM.Mb("series"+this.id+"_"+a,"fill: #"+this.S[a])},mh:function(){switch(this.type){case "lct_line":case "lct_sampledline":this.Ea.Da([0,this.width]);for(var a=0;a<this.f;a++)this.path[a].k("d",this.Wb[a]);break;case "lct_column":this.Ea.An([0,this.width],0.1),this.lh()}},Md:function(){var a=dojo.position(this.sb);this.width=a.w-this.margin.left-this.margin.right;this.height=a.v-this.margin.top-
this.margin.bottom;this.zc.k("width",this.width+this.margin.left+this.margin.right).k("height",this.height+this.margin.top+this.margin.bottom);this.tf.k("width",this.width).k("height",this.height);this.mb.Da([this.height,0]);this.Pd.call(this.Oc);this.mh();this.Wa&&this.Wa.k("transform","translate(0,"+this.height+")").call(this.Od).eg("text").style("text-anchor","end");this.Rd&&this.Rd.k("x",this.width/2).k("y",-(this.margin.top-20))},Ra:function(){this.e(arguments);this.set("content",'<div id="'+
this.id+'_container" style="width:100%; height:100%;"></div>');this.set("style","overflow: hidden");setTimeout(this.ul.bind(this),0)},stop:function(){this.td=!0;this.Ce.action="stop";G_SERVER_COM.n(this.no,this.oo,this.qj,this.Ce)},start:function(){if(this.td){this.td=!1;switch(this.type){case "lct_line":for(var a=0;a<this.f;a++)this.Qe(a);for(a=this.$a=0;a<this.f;a++){this.buffer[a]=[];for(var b=0;b<=this.Qc;b++)this.buffer[a][b]=this.cb}break;case "lct_sampledline":for(a=0;a<this.f;a++)this.Qe(a)}this.wm?
G_SERVER_COM.n(this.wm,this.ws,this.ys,this.xs,this.uk.bind(this)):this.Fh()}},vk:function(){for(var a=0;a<this.f;a++)this.data[a]=d3.Da(this.u).map(function(){return this.cb}.bind(this))},Qe:function(a){this.Wb[a]=d3.zc.Wb().Bs(this.Am).x(function(a,c){return this.Ea(c)}.bind(this)).y(function(a){return this.mb(a)}.bind(this));this.path[a]=this.Eb.append("g").k("clip-path","url(#clip)").append("path").data([this.data[a]]).k("class","series"+this.id+"_"+a).k("d",this.Wb[a])},uk:function(a,b,c){if(b){a=
dojo.eb(c.hd);switch(this.type){case "lct_line":for(b=0;b<a.length;b++){c=this.Qc+1;var d=!0;this.buffer[b]=[];for(var e=a[b].length-1;0<=e;e--)if(d)c--,this.buffer[b][c]=a[b][e],0==c&&(d=!1,c=this.u);else if(c--,this.data[b][c]=a[b][e],0==c)break;if(d&&0<c)for(e=c-1;0<=e;e--)this.buffer[b][e]=this.cb;d&&(c=this.u);if(0<c)for(e=c-1;0<=e;e--)this.data[b][e]=this.cb}if(this.f>a.length)for(b=a.length;b<this.f;b++)this.Lp(b);break;case "lct_sampledline":case "lct_column":this.setData(a)}this.Fh()}else console.error("Server Function Error => "+
c.$h+"."+c.Zc+": "+c.error)},Fh:function(){this.Ce.action="start";G_SERVER_COM.n(this.no,this.oo,this.qj,this.Ce);switch(this.type){case "lct_line":this.Dc=new Date-this.Ja;this.Pe=this.Dc-this.Ja;this.df=this.cf=this.Ja;for(var a=this.ec=0;a<this.f;a++)this.Ge(a)}},setData:function(a,b){if(!this.td)switch(this.type){case "lct_line":this.Ok(a,b);break;case "lct_sampledline":this.Pk(a);break;case "lct_column":this.Nk(a)}},Pk:function(a){if(this.wh(a))for(a=0;a<this.f;a++)this.path[a].k("d",this.Wb[a])},
Ok:function(a,b){if(a.length!=this.f)console.error("Live Chart "+this.id+": received data points count ("+a.length+") does not match series count ("+this.f+")");else if(this.$a==b){for(var c=0;c<this.f;c++)this.buffer[c].push(a[c]);this.$a++}else if(b<this.$a)this.Ec=10*this.Qc;else for(c=0;c<this.f;c++){for(var d=0;d<b-this.$a;d++)this.buffer[c].push(this.cb);this.buffer[c].push(a[c]);this.$a=this.$a+(b-this.$a)+1}},Nk:function(a){this.wh(a)&&this.lh()},wh:function(a){if(a.length!=this.f)return console.error("Live Chart "+
this.id+": received data sets count ("+a.length+") does not match series count ("+this.f+")"),!1;for(var b=0;b<this.f;b++)for(var c=0;c<a[b].length;c++){if(a[b].length!=this.u)return console.error("Live Chart "+this.id+": received data count ("+a[b].length+") for set "+b+" does not match data count ("+this.u+")"),!1;this.data[b][c]=a[b][c]}return!0},Ge:function(a){if(!this.td)if(this.f<=a)this.ec&&(this.ec=this.ek-1);else{if(0==this.buffer[a].length){this.$a++;for(var b=0;b<this.f;b++)this.buffer[b].push(this.cb)}this.data[a].push(this.buffer[a].shift());
if(this.ec)this.ec=this.ek-1;else for(this.ec=this.f-1,this.Ta=this.Ja-(this.Dc-this.Pe-this.df),this.Ta<this.Ja/2&&(this.Ta=this.Ja/2),this.buffer[a].length>this.Qc&&(this.Ta-=this.Ja/10),this.buffer[a].length<this.Qc&&(this.Ec=10),this.Ec&&(this.Ec-=1,this.Ta+=this.Ja/10),this.df=this.cf,this.cf=this.Ta,this.Pe=this.Dc,this.Dc=new Date;0<this.$f.length;)setTimeout(this.Ge.bind(this,this.$f.pop()),0);this.path[a].k("d",this.Wb[a]).k("transform",null).transition().duration(this.Ta).zr("linear").k("transform",
"translate("+this.Ea(0)+")").yr("end",this.Ge.bind(this,a));this.data[a].shift()}},ul:function(){this.sb=dojo.b(this.id+"_container");this.vk();this.Lg();""!=this.caption&&(this.margin.top+=20);this.Pa&&(this.margin.bottom+=20);var a=dojo.position(this.sb);this.zc=d3.select(this.sb).append("svg").k("width",a.w).k("height",a.v);this.Eb=this.zc.append("g").k("transform","translate("+this.margin.left+","+this.margin.top+")");this.width=a.w-this.margin.left-this.margin.right;""!=this.Dq&&(this.Rd=this.Eb.append("text").k("x",
this.width/2).k("y",-(this.margin.top-20)).k("text-anchor","middle").k("class","firmosLiveChartCaption").text(this.caption));switch(this.type){case "lct_line":this.za=[1,this.u-2];this.Ea=d3.scale.Li().domain(this.za).Da([0,this.width]);break;case "lct_sampledline":this.za=[0,this.u-1];this.Ea=d3.scale.Li().domain(this.za).Da([0,this.width]);break;case "lct_column":this.za=this.tb?d3.Da(this.u).map(function(a){return this.tb[a]}.bind(this)):d3.Da(this.u).map(function(a){return a}),this.Ea=d3.scale.ot().domain(this.za).An([0,
this.width],0.1)}this.tb&&(this.Od=d3.zc.axis().scale(this.Ea).mn("bottom"),this.Wa=this.Eb.append("g").k("class","x d3axis").call(this.Od),this.Bg());this.height=a.v-this.margin.top-this.margin.bottom;this.Wa&&this.Wa.k("transform","translate(0,"+this.height+")");this.Pa&&this.nh();this.Yh=this.Eb.append("defs").append("clipPath").k("id","clip");this.tf=this.Yh.append("rect").k("width",this.width).k("height",this.height);this.mb=d3.scale.Li().domain([this.ab,this.kc]).Da([this.height,0]);this.Oc=
d3.zc.axis().scale(this.mb).Lu(this.Uq).mn("left");this.Pd=this.Eb.append("g").k("class","y d3axis").call(this.Oc);this.start();this.d.push(dojo.l(this,"resize",this.Md.bind(this)))},Bg:function(){var a=0;this.Wa.eg("text").style("text-anchor","end").k("transform",function(){return"rotate(-90)"}).k("transform",function(){var b=this.getBoundingClientRect();ySpace=b.bottom-b.top;ySpace>a&&(a=ySpace);return"rotate(-90) translate(-5,"+(b.left-b.right)+")"});this.margin.bottom=this.margin.bottom-this.Sh+
a;this.Sh=a},nh:function(){this.zb=0;this.Vb=this.Eb.append("g");for(var a=0;a<this.f;a++){this.Vf[a]=this.Vb.append("g").k("class","legend");this.Vf[a].append("rect").k("x",this.zb).k("y",-5).k("width",18).k("height",2).style("fill","#"+this.S[a]);this.zb+=25;var b=this.Vf[a].append("text").k("x",this.zb).text(this.Pa[a]);this.zb=this.zb+b[0][0].Rr().width+20}this.Vb.k("transform","translate("+(this.width/2-this.zb/2)+","+(this.height+this.margin.top-10)+")")},lh:function(){for(var a=0;a<this.f;a++){var b=
this.Eb.eg(".series"+this.id+"_"+a).data(this.data[a]);b.Br().append("rect").k("class","series"+this.id+"_"+a);var c=0<this.ab?this.ab:0;b.k("x",function(a,b){return this.Ea(this.za[b])}.bind(this)).k("width",this.Ea.tt()).k("y",function(a){return this.mb(a)}.bind(this)).k("height",function(a){return a<this.ab?0:this.mb(c)-this.mb(a)}.bind(this));b.Cr().remove()}}});dojo.declare("FIRMOS.Chart",dojox.hl.iv.bp,{constructor:function(a){this.xo=a.c;this.type=a.type;this.fg=a.Zt;this.title=a.title;this.yc=
[];if(a.labels){this.ed=[];for(var b="ct_column"==this.type?1:0,c=0;c<a.labels.length;c++)this.ed[c]={value:c+b,text:a.labels[c]}}G_UI_COM.bg(a.c.id,this)},B:function(){for(var a=0;a<this.yc.length;a++)this.yc[a].B();G_UI_COM.lg(this.c.id,this);this.e(arguments);this.mc&&(this.mc.remove(),this.mc=null)},ok:function(a){var b={};b.y=a.value;a.color&&(b.color=a.color);a.text&&(b.text=a.text);a.Vb&&(b.Vb=a.Vb);return b},Wj:function(){this.rb.hu(dojox.hl.Ku.fp);for(var a=0;a<this.fg.length;a++)this.yc.push(new FIRMOS.up(this.xo,
{$:{Vn:this.fg[a]}},this.ok,this.id)),this.rb.qq(this.fg[a],this.yc[this.yc.length-1]);var a={},b={gv:!0},c={Rs:!0,Pr:2};switch(this.type){case "ct_pie":c.type="Pie";break;case "ct_column":c.type="ClusteredColumns";this.ed&&(a.Rl=!1,a.labels=this.ed,a.rotation=90);a.Rl=!1;b.um=!0;0<this.Ni&&(b.max=this.Ni);break;case "ct_line":c.type="Lines",this.ed&&(a.labels=this.ed),b.um=!0}this.rb.Vk("x",a);this.rb.Vk("y",b);this.rb.title=this.title;this.rb.pq("default",c);this.nu&&(this.mc=dojo.l(this.rb,"render",
this.Uk.bind(this)))},Uk:function(){this.mc&&(this.mc.remove(),this.mc=null);this.getParent().getParent().t()[1].content.refresh();this.getParent().getParent().G()},Bq:function(){this.e(arguments);setTimeout(this.Wj.bind(this),0)}});dojo.declare("FIRMOS.TopMenu",dijit.G.Ac,{constructor:function(){this.d=[]},B:function(){for(;0<this.d.length;)this.d.pop().remove()},Ra:function(){this.e(arguments);var a=new dijit.G.va({ja:"top",Ee:!1,xa:"firmosTransparent"}),b;b='<div class="topMenu"><div class="topMenuLogoLeft"></div>';
b+='<div class="topMenuLogoRight"></div>';b+='<div class="buttonListWrapper">';for(var c,d,e=0;e<this.a.length;e++)this.a[e].Ds?(c="53",d="Big"):(c="38",d=""),G_UI_COM.Mb("topMenu"+this.a[e].ae,"background: url("+this.a[e].icon+"); background-repeat: no-repeat; background-size:"+c+"px "+c+"px; background-position: center;"),b=b+'<div class="buttonListItem"><div id="topMenu'+this.a[e].ae+'" class="menuButton'+d+'"><div class="base"><div class="shineTop"><div class="buttonIcon topMenu'+this.a[e].ae+
'"><div class="shineBottom"></div></div></div></div><div class="captionContainer"><div class="buttonCaption">'+this.a[e].caption+"</div></div></div></div>";b+="</div></div>";a.set("content",b);this.F(a);setTimeout(this.Ik.bind(this),0)},Ik:function(){this.G();for(var a=0;a<this.a.length;a++){var b=dojo.b("topMenu"+this.a[a].ae);this.d.push(dojo.l(b,dojox.Mf.kg,this.cn.bind(this,a)))}},cn:function(a){this.a[a].Dm?this.a[a].Is?window.Tk?window.Tk():console.error("JIRA integration not included!"):G_SERVER_COM.n(this.a[a].xa,
this.a[a].Lf,this.a[a].N,this.a[a].Ca):G_UI_COM.rd(this.yu,[this.a[a].ae],!0)}});dojo.declare("FIRMOS.Sitemap",dijit.G.Ac,{constructor:function(){this.d=[];this.Aa=this.rc=this.fd=this.he=this.Yd=this.Xb=null;this.ie=!1;this.Ba=this.Ab=null;this.fb=0;this.R=this.yf=this.xf=null;this.Zd=100;this.pb=!1;this.Aj=500;this.Xl=250;this.Yf=0.05;this.X=0.6;this.$b=0.2;this.Ki=(new Date).getTime();this.me=!1;this.Um=this.Vm=100;this.rn=5;G_UI_COM.Jn(this)},B:function(){for(G_UI_COM.So(this);0<this.d.length;)this.d.pop().remove();
this.e(arguments);this.Bb&&(this.Bb.remove(),this.Bb=null)},Ra:function(){this.e(arguments);this.Xb=new dijit.G.va({ja:"left",Ee:!1,xa:"firmosTransparent"});this.Xb.set("content",'<div id="'+this.id+'_me_gfx" style="width:100%; height:100%;"></div>');this.Xb.set("style","width: 140px; overflow: hidden");this.Yd=new dijit.G.va({ja:"center",Ee:!1,xa:"firmosTransparent"});this.Yd.set("content",'<div id="'+this.id+'_d_gfx" style="width:100%; height:100%;"></div>');this.Yd.set("style","width: 100%; overflow: hidden");
this.F(this.Xb);this.F(this.Yd);setTimeout(this.el.bind(this),0)},el:function(){for(var a=this.getParent(),b=this;a;)a.h(FIRMOS.Cc)&&(b.Gc=!0),b=a,a=b.getParent();this.he=dojo.b(this.id+"_me_gfx");this.fd=dojox.o.yl(this.id+"_me_gfx","100%","100%");this.xf=dojo.b(this.id+"_d_gfx");this.yf=dojox.o.yl(this.id+"_d_gfx","100%","100%");this.dl();b=!1;for(a=0;a<this.a.length;a++)this.a[a].a?(this.a[a].collapsed=b,b=!0):this.a[a].collapsed=!0;if(1==this.a.length)this.Xb.set("style","display: none"),this.Wg(this.a[0]);
else for(this.rc=this.fd.Ya(),a=0;a<this.a.length;a++)b=this.rc.Ya(),this.a[a].yb=b,this.a[a].x=80,this.a[a].y=0==a?30:this.a[a-1].y+this.a[a-1].height+30,this.di(b,this.a[a],!1),this.a[a].collapsed||(this.a[a].V.J.childNodes[0].setAttribute("class","firmosSitemapEntryPressed"),this.a[a].V.J.childNodes[1].setAttribute("class","firmosSitemapEntryPressed2")),this.xl(this.a[a]);b=[];this.R=dojo.position(this.xf);for(a=0;a<this.a.length;a++)if(this.a[a].K=this.yf.Ya(),this.a[a].Sd=this.a[a].K.Ya(),this.a[a].wa=
1,this.a[a].X=1,this.a[a].Xf=1,this.a[a].sc=1,b[0]=a,0<this.a[a].a.length){this.Th(this.a[a],b,null,this.a[a].Sd);for(var c=1;c<this.a[a].Xf;c++)this.a[a].sc/=this.X;c=this.a[a].Sd.ce();this.a[a].Jf=this.a[a].K.Vd({x:c.x-this.R.w,y:c.y-this.R.v,width:c.width+2*this.R.w,height:c.height+2*this.R.v}).nb([0,0,0,0]).Wi();c=dojox.o.np(this.a[a].K);this.d.push(dojo.l(c,"onMoveStop",this.Ak.bind(this)));this.d.push(dojo.l(c,"onMove",this.zk.bind(this)));this.d.push(dojo.l(this.a[a].Jf.Rb(),dojox.Mf.kg.or,
this.Qn.bind(this,this.a[a])));this.d.push(dojo.l(this.a[a].Jf.Rb(),"gesturechange",this.be.bind(this,this.a[a])));c=dojo.Hi?"DOMMouseScroll":"onmousewheel";this.d.push(dojo.l(this.a[a].K.Rb(),"gesturechange",this.be.bind(this,this.a[a])));this.d.push(dojo.l(this.a[a].K.Rb(),c,this.be.bind(this,this.a[a])))}else this.a[a].path=dojo.ka(b);1<this.a.length&&(this.Aa=this.rc.ce());this.gj();this.G();setTimeout(this.wk.bind(this),0);this.d.push(dojo.l(this,"resize",this.gj.bind(this)))},be:function(a,
b){if(this.pb)setTimeout(this.be.bind(this,a,b),100);else{if(b.scale)var c=1+(b.scale-1)/this.rn;else c=b[dojo.Hi?"detail":"wheelDelta"]*(dojo.Hi?-1:1),c=1+c/this.Um;var d=a.X*c;1>d&&(d=1,c=d/a.X);d>a.sc&&(d=a.sc,c=d/a.X);var e=dojo.position(this.r);a.X=d;a.K.qb(dojox.o.s.ac(c,e.w/2-this.R.x,e.v/2));for(var c=2,e=1,f=1/this.X;f<d;)e=f,f/=this.X,c+=1;d-e<f-d&&(c-=1);d=a.wa;a.wa=c;this.Rf(a,d)}},wk:function(){for(var a=0;a<this.a.length;a++)0<this.a[a].a.length&&this.Km(this.a[a])},zk:function(){this.me=
!0},Ak:function(){this.me&&(this.Ki=(new Date).getTime(),this.Gg());this.me=!1},Gg:function(){for(var a=0;a<this.a.length;a++)if(!1==this.a[a].collapsed){var b=this.a[a].Sd.ca(),c=this.Zd-b[1].x,d=this.R.w-this.Zd-b[0].x,e=this.Zd-b[2].y,b=this.R.v-this.Zd-b[1].y,f=!1;0<c?f=!0:c=0;0>d?f=!0:d=0;0<e?f=!0:e=0;0>b?f=!0:b=0;f&&this.a[a].K.Q(dojox.o.s.translate(c+d,e+b));break}},Km:function(a){this.Xj(a.K,a.a[0].V);if(a.collapsed){var b=a.K.ca(),c=a.yb.ca(),d=dojo.position(this.he);c[0].x-=d.w;c[1].x-=
d.w;a.K.Wi();a.K.Q(dojox.o.s.translate(c[0].x+(c[1].x-c[0].x)/2-b[0].x-(b[1].x-b[0].x)/2,c[1].y+(c[2].y-c[1].y)/2-b[1].y-(b[2].y-b[1].y)/2));a.K.qb(dojox.o.s.ac(this.Yf,c[0].x+(c[1].x-c[0].x)/2,c[1].y+(c[2].y-c[1].y)/2));a.K.J.style.display="none"}},Th:function(a,b,c,d){a.path=dojo.ka(b);if(c)var e=a.V.ca(),f=e[0].x+(e[1].x-e[0].x)/2,e=e[1].y+(e[2].y-e[1].y)/2;this.a[b[0]].Xf=Math.max(this.a[b[0]].Xf,b.length-1);for(var g=0;g<a.a.length;g++){var h=d.Ya();a.a[g].yb=h;this.di(h,a.a[g],1==a.path.length);
var k=a.a[g].yb.ca();if(c){var l=a.a[g].V.ca(),m=l[0].x+(l[1].x-l[0].x)/2,l=l[1].y+(l[2].y-l[1].y)/2,n=d.Vd({x:0,y:0,width:0,height:0});a.a[g].ai=n;n.J.setAttribute("style",'fill: url("/#connectorgradient"); fill-opacity: 1;');this.Pn(n,m,l,f,e,5)}b.push(g);this.Th(a.a[g],b,k,h);b.pop();c&&(h=(f-m)*this.$b,k=(e-l)*this.$b,a.a[g].ai.qb(dojox.o.s.translate((f-m)*this.$b,(e-l)*this.$b)),a.a[g].ai.qb(dojox.o.s.ac(1-this.$b,m+(f-m)*this.$b,l+(e-l)*this.$b)),a.a[g].yb.Q(dojox.o.s.translate(h,k)),a.a[g].yb.qb(dojox.o.s.ac(this.X,
m+h,l+k)))}},Pn:function(a,b,c,d,e,f){var g=d-b,h=e-c;e=b+g/2;c+=h/2;g=Math.sqrt(g*g+h*h);h=Math.asin(h/g);d<b&&(h=-h);a.Be({x:e-g/2,y:c-f/2,width:g,height:f});a.Q(dojox.o.s.Nt(h,e,c)).Wi();a.bq=a.hm()},Wg:function(a){a.a?a.a instanceof Array||(a.a=[a.a]):a.a=[]},di:function(a,b,c){this.Wg(b);a=a.Ya();b.V=a;b.width=100;b.height=b.icon?78:35;var d="";c&&(d="AL");c=a.Ud({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+
"c1.161,0,2.103,0.896,2.103,2V49.496z"});c.Q(dojox.o.s.translate(b.x-67.2,b.y));var e=a.Ud({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"});e.Q(dojox.o.s.translate(b.x-67.2,b.y));var f=c.ca();if(b.icon){a.Tq({x:f[0].x+(f[1].x-f[0].x)/2-24,y:f[1].y+5,width:48,height:48,src:b.icon,qt:"meet"});var g=f[1].y+48+20}else g=f[1].y+(f[2].y-
f[1].y)/2+5;f=a.zl({x:f[0].x+(f[1].x-f[0].x)/2,y:g,text:b.caption,align:"center"}).lj({Vl:"Arial",size:"10pt"}).nb("white");f.Q(dojox.o.s.translate(-f.$c()/2,0));f.$c()>b.width-10&&(f=f.$c()-b.width+10,b.width+=f,c.Be({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"}),e.Be({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+
(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"}),c.Q(dojox.o.s.translate(f/2,0)),e.Q(dojox.o.s.translate(f/2,0)));b.disabled?(c.J.setAttribute("class","firmosSitemapEntryDisabled"+d),e.J.setAttribute("class","firmosSitemapEntryDisabled2")):(c.J.setAttribute("class","firmosSitemapEntry"+d),e.J.setAttribute("class","firmosSitemapEntry2"));d=a.ca();a.Vd({x:d[0].x,y:d[1].y,width:d[1].x-d[0].x,height:d[2].y-d[1].y}).nb([0,0,0,0]);this.d.push(dojo.l(a.Rb(),
dojox.Mf.kg,this.Hf.bind(this,b,!1)));1!=b.scale&&(d=a.ca(),a.qb(dojox.o.s.ac(b.scale,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2)));this.ei(b)},ei:function(a){if(0<a.uc)if(a.cd){var b=0;if(99<a.uc){var c=8;100>a.oe&&(b=-1)}else 99<a.oe&&(b=1),c=10;delete a.oe;var d=a.cd.children[2],e=d.$c();d.Be({text:a.uc+""}).lj({size:c+"pt"});d.Q(dojox.o.s.translate(e/2-d.$c()/2,b))}else b=a.V.ce(),e=a.yb.Ya(),e.vl({Al:b.x+b.width,Bl:b.y,xn:12}).nb("white"),e.vl({Al:b.x+b.width,Bl:b.y,xn:10}).nb("red"),
c=99<a.uc?8:10,d=e.zl({x:b.x+b.width+1,y:b.y+c/2,text:a.uc+""}).lj({Vl:"Arial",size:c+"pt"}).nb("white"),d.Q(dojox.o.s.translate(-d.$c()/2,0)),1!=a.scale&&(e.qb(dojox.o.s.ac(a.scale,b.x+b.width,b.y)),e.Q(dojox.o.s.translate(-b.width*(1-a.scale)/2,b.height*(1-a.scale)/2))),a.cd=e;else a.cd&&(a.cd.B(),delete a.cd,delete a.oe)},eh:function(a){if(!a.a)return!0;for(var b=0;b<a.a.length;b++)if(!a.a[b].disabled||this.eh(a.a[b]))return!1;return!0},xl:function(a){var b=a.disabled||this.eh(a),c=b?"firmosSMShortcutDisabled":
"firmosSMShortcutEnabled",d=a.V.ce(),e=a.yb.Ya(),f=e.Ud({path:"M19.158,32.64c-2.551,0-5.035-0.738-7.185-2.134c-2.961-1.922-4.995-4.882-5.729-8.334c-0.733-3.452-0.078-6.983,1.844-9.943c2.447-3.77,6.595-6.02,11.094-6.02c2.55,0,5.034,0.738,7.183,2.134c2.961,1.922,4.996,4.882,5.73,8.335c0.734,3.452,0.079,6.984-1.844,9.944C27.805,30.391,23.658,32.64,19.158,32.64z"});f.J.setAttribute("class",c+"1");f=e.Ud({path:"M19.184,5.709v1c2.453,0,4.842,0.71,6.91,2.053c2.849,1.85,4.807,4.698,5.513,8.02c0.706,3.321,0.076,6.72-1.774,9.568c-2.354,3.625-6.345,5.79-10.675,5.79c-2.454,0-4.844-0.71-6.913-2.053c-2.848-1.85-4.806-4.697-5.511-8.019c-0.706-3.321-0.076-6.719,1.774-9.567c2.354-3.626,6.345-5.792,10.674-5.792L19.184,5.709M19.183,5.709c-4.488,0-8.886,2.202-11.513,6.248C3.544,18.308,5.347,26.8,11.701,30.926c2.308,1.499,4.896,2.214,7.457,2.214c4.489,0,8.888-2.201,11.514-6.246c4.126-6.353,2.32-14.846-4.033-18.971C24.331,6.425,21.742,5.709,19.183,5.709L19.183,5.709z"});
f.J.setAttribute("class",c+"2");f=e.Ud({path:"M0.2-20.001c-10.906,0-19.779,8.874-19.779,19.78c0,10.907,8.873,19.781,19.779,19.781c4.679,0,8.971-1.644,12.356-4.373l-9.806-8.48l25.828-3.813l-0.05,26.107l-9.07-7.845c-5.101,4.599-11.85,7.404-19.259,7.404c-15.894,0-28.779-12.887-28.779-28.781s12.886-28.78,28.779-28.78c12.468,0,23.081,7.928,27.08,19.016l-9.199,1.359C14.913-15.336,8.1-20.001,0.2-20.001z"});f.J.setAttribute("class",c+"3");f.Q({kv:-0.2177,nv:0.1947,lv:0.2037,ov:0.2278,wr:19.4619,xr:18.75});
e.Q(dojox.o.s.translate(d.x+d.width-25,d.y+d.height-18));1!=a.scale&&(e.qb(dojox.o.s.ac(a.scale,d.x+d.width,d.y)),e.Q(dojox.o.s.translate(-d.width*(1-a.scale)/2,-d.height*(1-a.scale)/2)));a.St=e;b||this.d.push(dojo.l(e.Rb(),dojox.Mf.kg,this.Hf.bind(this,a,!0)))},nk:function(a){for(var b,c=this;0<a.length;){var d=a.shift();b=!0;for(var e=0;e<c.a.length;e++)if(d==c.a[e].id){c=c.a[e];b=!1;break}if(b){console.error("_getEntryByPath: Child "+d+" not found");return}}return c},Yu:function(a,b){var c=this.nk(a);
c.oe=c.uc;c.uc=b;this.ei(c)},Eg:function(a){var b=dojo.mr.createElementNS("http://www.w3.org/2000/svg",a.Au);if(a.ic){a.ic instanceof Array||(a.ic=[a.ic]);for(var c=0;c<a.ic.length;c++)b.setAttribute(a.ic[c].name,a.ic[c].value)}if(a.Vc)for(a.Vc instanceof Array||(a.Vc=[a.Vc]),c=0;c<a.Vc.length;c++){var d=this.Eg(a.Vc[c]);b.appendChild(d)}return b},dl:function(){for(var a=this.fd.J.getElementsByTagName("defs")[0],b=this.yf.J.getElementsByTagName("defs")[0],c=0;c<this.Cl.length;c++){var d=this.Eg(this.Cl[c]);
a.appendChild(d);b.appendChild(d)}},ak:function(){this.R=dojo.position(this.xf);for(var a=0;a<this.a.length;a++)if(0<this.a[a].a.length){var b=this.a[a].Sd.ce();this.a[a].Jf.Be({x:b.x-this.R.w,y:b.y-this.R.v,width:b.width+2*this.R.w,height:b.height+2*this.R.v})}this.Gg()},gj:function(){if(1<this.a.length)if(this.Xb.set("style","width: "+(2*this.Aa.x+this.Aa.width-1)+"px; overflow: hidden;"),setTimeout(function(){this.Xb.set("style","width: "+(2*this.Aa.x+this.Aa.width)+"px; overflow: hidden;")}.bind(this),
0),this.da=dojo.position(this.he),this.Aa.y+this.Aa.height>this.da.v)if(this.ie){var a=this.Aa.y+this.Aa.height+this.fb-this.da.v;0<a?(this.Re(),this.rh()):(this.ef(),this.rc.Q(dojox.o.s.translate(0,-a)),this.fb-=a)}else this.ie=!0,this.Re();else this.ie&&(this.ef(),this.ph(),this.ie=!1,this.rc.Q(dojox.o.s.translate(0,-this.fb)),this.fb=0);setTimeout(this.ak.bind(this),1)},Re:function(){this.Ba||(this.Ba=this.fd.Ya(),this.Ba.Vd({x:10,y:this.da.v-30,width:this.da.w-20,height:30}).nb("blue"),this.Ba.wl([{x:15,
y:this.da.v-25},{x:this.da.w-15,y:this.da.v-25},{x:this.da.w/2,y:this.da.v-5},{x:15,y:this.da.v-25}]).nb("white"),this.rh(),this.d.push(dojo.l(this.Ba.Rb(),dojo.Bj.un,this.Mi.bind(this,-1))))},bk:function(){this.Ab||(this.Ab=this.fd.Ya(),this.Ab.Vd({x:10,y:0,width:this.da.w-20,height:30}).nb("blue"),this.Ab.wl([{x:15,y:25},{x:this.da.w-15,y:25},{x:this.da.w/2,y:5},{x:15,y:25}]).nb("white"),this.d.push(dojo.l(this.Ab.Rb(),dojo.Bj.un,this.Mi.bind(this,1))))},ph:function(){this.Ab&&(this.Ab.B(),this.Ab=
null)},ef:function(){this.Ba&&(this.Ba.B(),this.Ba=null)},hh:function(a){0>a?(this.bk(),this.Aa.y+this.Aa.height+this.fb==this.da.v&&(this.ef(),this.je())):(this.Re(),0==this.fb&&(this.ph(),this.je()));this.Bb&&(this.rc.Q(dojox.o.s.translate(0,a)),this.fb+=a,setTimeout(this.hh.bind(this,a),10))},Mi:function(a){this.Bb&&this.je();this.Bb=dojo.l(document,dojo.Bj.Bt,this.je.bind(this));this.hh(a)},je:function(){this.Bb&&(this.Bb.remove(),this.Bb=null)},rh:function(){if(this.Ba){var a=this.Ba.ca()[2].y-
this.da.v;0!=a&&this.Ba.Q(dojox.o.s.translate(0,-a))}},Xj:function(a,b){var c=dojo.position(this.r),d=b.ca();a.qb(dojox.o.s.translate(c.w/2-this.R.x-(d[1].x-d[0].x)/2-d[0].x,c.v/2-(d[2].y-d[1].y)/2-d[1].y))},Qn:function(a){if(!this.pb){this.pb=!0;var b=this.Fg(a,a.X),c=a.wa;a.wa=1;a.X=1;this.d.push(dojo.l(b,"onEnd",this.Rf.bind(this,a,c)));this.d.push(dojo.l(b,"onEnd",this.Ld.bind(this,a)))}},Fg:function(a,b){var c=dojo.position(this.r),d=a.a[0].V.ca();return(new dojox.o.vi.Ph({duration:this.Aj,shape:a.K,
transform:[{name:"scaleAt",start:[1,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2],end:[1/b,c.w/2-this.R.x,c.v/2]},{name:"translate",start:[0,0],end:[c.w/2-this.R.x-d[0].x-(d[1].x-d[0].x)/2,c.v/2-d[1].y-(d[2].y-d[1].y)/2]},{name:"original"}]})).play()},Tl:function(a){!this.pb&&a.collapsed&&(this.pb=!0,this.hk(a,!0))},hk:function(a,b){a.K.ca();for(var c=0;c<this.a.length;c++)this.a[c].collapsed||this.gk(this.a[c],!1);a.K.J.style.display="";c=this.Fg(a,this.Yf);a.collapsed=!1;b&&(this.d.push(dojo.l(c,
"onEnd",this.Ld.bind(this,a))),this.d.push(dojo.l(c,"onEnd",this.Ul.bind(this,a))))},gk:function(a,b){var c=a.K.ca(),d=a.yb.ca(),e=dojo.position(this.he);d[0].x-=e.w;d[1].x-=e.w;c=(new dojox.o.vi.Ph({duration:this.Aj,shape:a.K,transform:[{name:"scaleAt",start:[1,c[0].x+(c[1].x-c[0].x)/2,c[1].y+(c[2].y-c[1].y)/2],end:[this.Yf,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2]},{name:"translate",start:[0,0],end:[d[0].x+(d[1].x-d[0].x)/2-c[0].x-(c[1].x-c[0].x)/2,d[1].y+(d[2].y-d[1].y)/2-c[1].y-(c[2].y-
c[1].y)/2]},{name:"original"}]})).play();a.collapsed=!0;this.d.push(dojo.l(c,"onEnd",this.ll.bind(this,a)));b&&this.d.push(dojo.l(c,"onEnd",this.Ld.bind(this,a)))},Ld:function(){this.pb=!1},ll:function(a){a.V.J.childNodes[0].setAttribute("class","firmosSitemapEntry");a.V.J.childNodes[1].setAttribute("class","firmosSitemapEntry2")},Ul:function(a){a.V.J.childNodes[0].setAttribute("class","firmosSitemapEntryPressed");a.V.J.childNodes[1].setAttribute("class","firmosSitemapEntryPressed2")},Zg:function(a,
b,c,d){if(b<c||b<d)for(var e=0;e<a.a.length;e++)this.Zg(a.a[e],b+1,c,d);b==c&&(a.disabled?a.V.J.childNodes[0].setAttribute("class","firmosSitemapEntryDisabledAL"):a.V.J.childNodes[0].setAttribute("class","firmosSitemapEntryAL"));b==d&&(a.disabled?a.V.J.childNodes[0].setAttribute("class","firmosSitemapEntryDisabled"):a.V.J.childNodes[0].setAttribute("class","firmosSitemapEntry"))},Rf:function(a,b){a.wa!=b&&this.Zg(a,0,a.wa,b)},Hf:function(a,b,c){if(!(this.me||(new Date).getTime()-this.Ki<this.Vm))if(c.preventDefault(),
dojo.cc(c),1!=a.path.length||b){var d=!0;if(1<a.path.length){var e=this.a[a.path[0]],f=1,g=a.path.length-1,h=e.wa;if(h!=g){d=!1;if(this.pb){setTimeout(this.Hf.bind(this,a,b,c),100);return}this.pb=!0;if(e.wa<g)for(b=e.wa;b<g;b++)f/=this.X;else for(b=e.wa;b>g;b--)f*=this.X;e.wa=g;g=e.X*f;1>g&&(g=1,f=g/e.X);g>e.sc&&(g=e.sc,f=g/e.X);e.X=g;var k=a.V.ca(),g=e.K.hm();b=k[0].x+(k[1].x-k[0].x)/2;k=k[1].y+(k[2].y-k[1].y)/2;f=dojox.o.s.ac(f,b,k);if(c.clientX&&c.clientY){var l=c.clientX-this.R.x;c=c.clientY-
this.R.y}else l=b,c=k;c=dojox.o.s.translate(l-b,c-k);c=(new dojox.o.vi.Ph({duration:this.Xl,shape:e.K,transform:[{name:"matrix",start:g,end:dojox.o.s.multiply(c,f,g)}]})).play();this.d.push(dojo.l(c,"onEnd",this.Ld.bind(this,a)));this.d.push(dojo.l(c,"onEnd",this.Rf.bind(this,e,h)))}}d&&!a.disabled&&(d=a.ze.hj instanceof Array?dojo.ka(a.ze.hj):[a.ze.hj],G_UI_COM.hg=!0,G_UI_COM.rd(a.ze.xq,d,!1)||console.error("Could not resolve given section path: "+JSON.stringify(a.ze)))}else this.Tl(a)}});dojo.declare("FIRMOS.gridPBColumn",
null,{constructor:function(a){for(var b in a)this[b]=a[b]},Nn:function(a,b){var c=new dijit.Pj({style:"width: 100%"});c.set("value",b/this.Ni*100);this.Jm&&c.set("label",a[this.Jm]+"");return c.r}});dojo.declare("FIRMOS.gridDetailsColumn",null,{constructor:function(){this.label="";this.className="dgrid-details";this.d=[];return this},B:function(){for(;0<this.d.length;)this.d.pop().remove()},Nn:function(a){var b=dojo.create("div");this.A.ii||a.Gb&&a.Ua?(b.className="dgrid-details-closed",b.innerHTML=
"+",a=a&&this.A.lb(a),a.Ue=!1,this.d.push(dojo.l(b,"onclick",this.Io.bind(this,b,a)))):b.className="dgrid-details-none";return b},Io:function(a,b){b.Ue?(a.className="dgrid-details-closed",a.innerHTML="+",this.A.rm(b)):(a.className="dgrid-details-open",a.innerHTML="-",this.A.po(b));b.Ue=!b.Ue},Et:function(){return""}});dojo.declare("FIRMOS.OnDemandGrid",[dgrid.Oj,FIRMOS.Mj,dgrid.Rj,FIRMOS.ip,dgrid.Jj,FIRMOS.Je,dgrid.Ij,FIRMOS.hp,dgrid.Kj]);dojo.declare("FIRMOS.Editor",dijit.G.Ac,{j:G_TEXTS.Ar,Fc:!1,
ff:"",constructor:function(a){switch(a.contentType){case "ct_html":this.Uc="aloha";this.so=this.ro.bind(this);this.on=this.nn.bind(this);break;case "ct_javascript":case "ct_pascal":this.Uc="codemirror";this.uj=this.to.bind(this);this.bj=this.pn.bind(this);break;default:console.error("Unknown content type "+a.contentType)}},B:function(){switch(this.Uc){case "aloha":$(Aloha,"body").Mo("aloha-editable-activated",this.so);$(Aloha,"body").Mo("aloha-editable-deactivated",this.on);break;case "codemirror":this.jc.an("focus",
this.uj),this.jc.an("blur",this.bj)}this.Tc&&this.Tc.B();this.e(arguments)},Ra:function(){this.e(arguments);this.qi=new dijit.G.va({ja:"center",Ee:!1});this.qi.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%; background-color:#fff; overflow:hidden;" class="article"></div>');if(this.Cu){this.toolbar=new dijit.yd({ja:"bottom"});var a=""}else this.toolbar=new dijit.yd({ja:"top"}),a="float:right;";this.ye=new dijit.form.ua({label:this.j.ye,disabled:!0,ia:this.save.bind(this),
style:a});this.toolbar.F(this.ye);this.ve=new dijit.form.ua({label:this.j.ve,disabled:!0,ia:this.load.bind(this),style:a});this.toolbar.F(this.ve);this.F(this.toolbar);this.F(this.qi);setTimeout(this.uo.bind(this),0)},uo:function(){switch(this.Uc){case "aloha":$("#"+this.id+"_container").uq();this.Tc=Aloha.Ur(this.id+"_container");break;case "codemirror":this.jc=CodeMirror(dojo.b(this.id+"_container"),{Ks:!0,mode:this.contentType.substring(3)});this.jc.re("focus",this.uj);this.jc.re("blur",this.bj);
break;default:return}this.load()},Mm:function(a,b,c){b&&""!=c.hd&&(a=dojo.eb(c.hd),this.ff=a.value,this.qd(a.value))},Sb:function(){switch(this.Uc){case "aloha":return this.Tc.Sr();case "codemirror":return this.jc.Sb()}},qd:function(a){switch(this.Uc){case "aloha":this.Tc&&this.Tc.bu(a);break;case "codemirror":this.jc.qd(a)}},tj:function(){this.Fc||(this.ye.set("disabled",!1),this.ve.set("disabled",!1),G_SERVER_COM.n(this.pu,this.qu,this.su,this.ru),this.Fc=!0)},aj:function(){this.Fc&&this.Sb()==
this.ff&&this.ig()},to:function(){this.tj()},pn:function(){this.aj()},ro:function(a,b){b.Sl.cm()==this.id+"_container"&&this.tj()},nn:function(a,b){b.Sl.cm()==this.id+"_container"&&this.aj()},ig:function(){this.Fc&&(G_SERVER_COM.n(this.tu,this.uu,this.wu,this.vu),this.ye.set("disabled",!0),this.ve.set("disabled",!0),this.Fc=!1)},save:function(){this.ig();var a=dojo.ka,a=dojo.ka(this.Qt);a.content=this.Sb();this.ff=a.content;G_SERVER_COM.n(this.Ot,this.Pt,this.Rt,a)},load:function(){this.ig();G_SERVER_COM.n(this.Ls,
this.Ms,this.Ps,this.Os,this.Mm.bind(this))}});dojo.declare("FIRMOS.Shell",dijit.G.va,{Ra:function(){this.set("content",'<iframe id="'+this.id+'_frame" src="'+this.protocol+"://"+this.host+":"+this.port+this.path+'" style="width:100%; height:100%;">Iframe not supported.</iframe>');this.set("style","overflow: hidden;");this.e(arguments)}});dojo.declare("FIRMOS.VNC",dijit.G.Ac,{j:G_TEXTS.hv,constructor:function(){this.i=null;this.state="disconnected";this.sb=this.canvas=null;this.dg=0;this.C={};this.zj=
this.la=null;this.Zb=0;this.dd=this.gb=null;this.scale=1;this.pc=!1;this.d=[]},B:function(){this.disconnect();this.e(arguments)},Ra:function(){this.rg=new dijit.G.va({ja:"center",Ee:!1});this.rg.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%;"><canvas  class="firmosVNCInactive" tabindex="0" id="'+this.id+'_vnc" style="width:0px; height:0px; cursor: none;">Canvas not supported.</canvas></div>');this.rg.set("style","overflow: hidden;");this.toolbar=new dijit.yd({ja:"top"});
this.Vh=new dijit.form.ua({label:this.j.Vh,ia:this.ao.bind(this)});this.toolbar.F(this.Vh);this.Hj=new dijit.form.ua({label:this.j.Hj,disabled:!0,ia:this.$o.bind(this)});this.toolbar.F(this.Hj);this.Ti=new dijit.form.ua({label:this.j.Ti,disabled:!0,ia:this.Om.bind(this)});this.toolbar.F(this.Ti);this.F(this.toolbar);this.F(this.rg);this.e(arguments);setTimeout(this.l.bind(this),0)},ao:function(){this.i.send((new Uint8Array([4,1,0,0,0,0,255,227])).buffer);this.i.send((new Uint8Array([4,1,0,0,0,0,255,
233])).buffer);this.i.send((new Uint8Array([4,1,0,0,0,0,255,255])).buffer);this.i.send((new Uint8Array([4,0,0,0,0,0,255,227])).buffer);this.i.send((new Uint8Array([4,0,0,0,0,0,255,233])).buffer);this.i.send((new Uint8Array([4,0,0,0,0,0,255,255])).buffer)},$o:function(){},Om:function(){},cc:function(a){dojo.cc(a);a.preventDefault();a.stopPropagation();return!1},qg:function(a){a?this.l():this.disconnect()},disconnect:function(){if("disconnected"!=this.state){this.canvas.style.width="0px";for(this.canvas.style.height=
"0px";0<this.d.length;)dojo.disconnect(this.d.pop());this.i.onopen=null;this.i.onmessage=null;this.i.onerror=null;this.i.close();this.i=null;this.state="disconnected"}},l:function(){this.state="connecting";this.i=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-VC|"+this.host+"|"+this.port);this.i.binaryType="arraybuffer";this.i.onopen=this.vg.bind(this);this.i.onmessage=this.ug.bind(this);this.i.onerror=
this.tg.bind(this);this.canvas=dojo.b(this.id+"_vnc");this.sb=dojo.b(this.id+"_container");this.la=this.canvas.getContext("2d");this.d.push(dojo.l(this.canvas,"onmousemove",this.Rm.bind(this)));this.d.push(dojo.l(this.canvas,"onmousedown",this.Qm.bind(this)));this.d.push(dojo.l(this.canvas,"onmouseup",this.Tm.bind(this)));this.d.push(dojo.l(this.canvas,"onclick",this.Pm.bind(this)));this.d.push(dojo.l(this.canvas,"oncontextmenu",this.rl.bind(this)));this.d.push(dojo.l(this.canvas,"onmouseenter",this.Ui.bind(this)));
this.d.push(dojo.l(this.canvas,"onmouseout",this.Sm.bind(this)));this.d.push(dojo.l(this.canvas,"onkeydown",this.Gm.bind(this)));this.d.push(dojo.l(this.canvas,"onkeyup",this.Im.bind(this)));this.d.push(dojo.l(this.canvas,"onkeypress",this.Hm.bind(this)));this.d.push(dojo.l(this,"resize",this.Md.bind(this)));this.dd&&window.clearInterval(this.dd);this.dd=window.setInterval(this.bo.bind(this),40);this.i.onclose=this.sg.bind(this)},wf:function(a){a=new Uint8Array(a);for(var b="",c=0;c<a.length;c++)b+=
String.fromCharCode(a[c]);return b},Wc:function(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer},fl:function(a,b,c){c=c||a.length;var d="";for(b=b||0;b<c;b++)d+=String.fromCharCode(a[b]);return d},Md:function(){var a=dojo.position(this.sb);a.w-=2;a.v-=2;if(a.w<this.C.width||a.v<this.C.height)this.scale=this.C.width/this.C.height>a.w/a.v?a.w/this.C.width:a.v/this.C.height;this.canvas.style.width=Math.floor(this.C.width*this.scale)+"px";this.canvas.style.height=
Math.floor(this.C.height*this.scale)+"px"},ug:function(a){switch(this.state){case "init":a=this.wf(a.data);switch(a){case "RFB 003.008\n":this.state="security";this.i.send(this.Wc(a));break;default:console.error('Version "'+a+'" not supported'),this.i.close()}break;case "security":var b=new Uint8Array(a.data);0==b[0]&&(console.error("Got no valid security type"),this.i.close());for(a=0;a<b[0];a++)1==b[a]&&(this.dg=b[a]);switch(this.dg){case 0:console.error("Got no valid security type");this.i.close();
break;case 1:this.state="securityResult";this.i.send((new Uint8Array([this.dg])).buffer);break;case 2:console.error("VNC Authentication not supported"),this.i.close()}break;case "securityResult":a=new Uint8Array(a.data);0!=(a[0]||a[1]||a[2]||a[3])?(console.error("Security handshake failed"),this.i.close()):(this.state="serverInit",this.i.send((new Uint8Array([1])).buffer));break;case "serverInit":a=new Uint8Array(a.data);this.C.width=256*a[0]+a[1];this.C.height=256*a[2]+a[3];this.Md();this.C.cl=a[4];
32!=this.C.cl&&console.error("Only True Color supported");this.C.depth=a[5];this.C.yq=a[6];this.C.Tu=a[7];this.C.vt=256*a[8]+a[9];this.C.js=256*a[10]+a[11];this.C.zq=256*a[12]+a[13];this.C.wt=a[14];this.C.ks=a[15];this.C.Aq=a[16];this.C.name=this.fl(a,24+256*(256*(256*a[20]+a[21])+a[22])+a[23]);this.state="connected";this.zj=this.la.createImageData(16,16);this.canvas.width=this.C.width;this.canvas.height=this.C.height;this.i.send((new Uint8Array([0,0,0,0,32,24,0,1,0,255,0,255,0,255,16,8,0,0,0,0])).buffer);
this.i.send((new Uint8Array([2,0,0,3,0,0,0,1,0,0,0,5,0,0,0,0])).buffer);this.i.send((new Uint8Array([3,0,0,0,0,0,a[0],a[1],a[2],a[3]])).buffer);break;case "connected":b=new Uint8Array(a.data);switch(b[0]){case 0:var c=256*b[2]+b[3];if(0==c)break;var d=4;for(a=0;a<c;a++){var e=256*b[d]+b[d+1],f=256*b[d+2]+b[d+3],g=256*b[d+4]+b[d+5],h=256*b[d+6]+b[d+7],d=d+8,k=b[d+3],d=d+4;switch(k){case 0:d=this.om(b,e,f,g,h,d);break;case 1:d=this.mm(b,e,f,g,h,d);break;case 5:d=this.nm(b,e,f,g,h,d);break;case 252:d=
this.ps(b,e,f,g,h,d);break;default:console.error("Unknown Encoding "+b[12]+"-"+b[13]+"-"+b[14]+"-"+b[15])}}break;default:console.warn("Unknown Server Message "+b[0])}break;case "disconnected":break;default:console.error("State "+this.state+" not implemented")}},Bn:function(){console.log("RECONNECT!!!");this.disconnect()},Ye:function(a){for(var b=this.canvas,c=[0,0];b.offsetParent;)c[0]=c[0]+b.offsetLeft-b.scrollLeft,c[1]=c[1]+b.offsetTop-b.scrollTop,b=b.offsetParent;c[0]=a.clientX+document.body.scrollLeft+
document.documentElement.scrollLeft-c[0];c[1]=a.clientY+document.body.scrollTop+document.documentElement.scrollTop-c[1];c[0]/=this.scale;c[1]/=this.scale;return c},bo:function(){this.gb&&(this.i.send((new Uint8Array([5,this.Zb,this.gb[0]>>8,this.gb[0]&255,this.gb[1]>>8,this.gb[1]&255])).buffer),this.gb=null)},Ui:function(){this.canvas.focus();dojo.p(this.canvas,"firmosVNCActive");dojo.q(this.canvas,"firmosVNCInactive");this.pc=!0},Sm:function(){dojo.p(this.canvas,"firmosVNCInactive");dojo.q(this.canvas,
"firmosVNCActive");this.pc=!1},Rm:function(a){this.pc||this.Ui(a);this.gb=this.Ye(a)},Qm:function(a){this.Zb|=1<<a.button;a=this.Ye(a);this.i.send((new Uint8Array([5,this.Zb,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.gb=null},Tm:function(a){this.Zb^=1<<a.button;a=this.Ye(a);this.i.send((new Uint8Array([5,this.Zb,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.gb=null},Pm:function(){return!1},rl:function(){return!1},xi:function(a){switch(a.keyCode){case 8:return 65288;case 9:return 65289;
case 13:return 65293;case 27:return 65307;case 45:return 65379;case 46:return 65535;case 36:return 65360;case 35:return 65367;case 33:return 65365;case 34:return 65366;case 37:return 65361;case 38:return 65362;case 39:return 65363;case 40:return 65364;case 112:return 65470;case 113:return 65471;case 114:return 65472;case 115:return 65473;case 116:return 65474;case 117:return 65475;case 118:return 65476;case 119:return 65477;case 120:return 65478;case 121:return 65479;case 122:return 65480;case 123:return 65481;
case 16:return 65505;case 17:return 65507;case 18:return 65406}return 0},Gm:function(a){if(this.pc){var b=this.xi(a);0!=b&&(this.cc(a),this.i.send((new Uint8Array([4,1,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},Im:function(a){if(this.pc){var b=this.xi(a);b&&(this.cc(a),this.i.send((new Uint8Array([4,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},Hm:function(a){if(this.pc)return 0!=a.which&&0!=a.charCode&&(this.cc(a),a=0<a.charCode?[a.charCode>>24&255,a.charCode>>
16&255,a.charCode>>8&255,a.charCode&255]:[a.which>>24&255,a.which>>16&255,a.which>>8&255,a.which&255],this.i.send((new Uint8Array([4,1,0,0,a[0],a[1],a[2],a[3],4,0,0,0,a[0],a[1],a[2],a[3]])).buffer)),!1},mm:function(a,b,c,d,e,f){var g=256*a[f]+a[f+1];f+=2;a=256*a[f]+a[f+1];f+=2;this.la.drawImage(this.canvas,g,a,d,e,b,c,d,e);return f},om:function(a,b,c,d,e,f){for(var g=this.la.createImageData(d,e),h,k,l=0;l<d*e;l++)h=4*l,k=h+f,g.data[h]=a[k+2],g.data[h+1]=a[k+1],g.data[h+2]=a[k],g.data[h+3]=255;this.la.putImageData(g,
b,c);return k+4},nm:function(a,b,c,d,e,f){for(var g=Math.ceil(d/16),h=Math.ceil(e/16),k=[0,0,0,255],l=[0,0,0,255],m=[0,0,0,255],n,r=0;r<h;r++)for(var s=0;s<g;s++){n=a[f];f++;var p=16,m=16;r==h-1&&(m=16-(16*h-e));s==g-1&&(p=16-(16*g-d));var t=p*m;if(0==n)this.la.fillStyle="rgb("+k[2]+","+k[1]+","+k[0]+")",this.la.fillRect(b+16*s,c+16*r,p,m);else if(n&1){var q,u;n=256==t?this.zj:this.la.createImageData(p,m);for(p=0;p<t;p++)q=4*p,u=q+f,n.data[q]=a[u+2],n.data[q+1]=a[u+1],n.data[q+2]=a[u],n.data[q+3]=
255;this.la.putImageData(n,b+16*s,c+16*r);f=u+4}else if(n&2&&(k=[a[f],a[f+1],a[f+2],a[f+3]],f+=4),n&4&&(l=[a[f],a[f+1],a[f+2],a[f+3]],f+=4),t=b+16*s,q=c+16*r,this.la.fillStyle="rgb("+k[2]+","+k[1]+","+k[0]+")",this.la.fillRect(t,q,p,m),n&8){var v=a[f];f++;for(p=0;p<v;p++){n&16?(m=[a[f],a[f+1],a[f+2],a[f+3]],f+=4):m=l;var w=a[f]>>4,x=a[f]&15;f++;var y=(a[f]>>4)+1,z=(a[f]&15)+1;f++;this.la.fillStyle="rgb("+m[2]+","+m[1]+","+m[0]+")";this.la.fillRect(t+w,q+x,y,z)}}}return f},tg:function(a){console.error("wsError "+
JSON.stringify(a));this.Bn()},sg:function(){this.state="disconnected";this.dd&&window.clearInterval(this.dd)},vg:function(){this.state="init"}})});
