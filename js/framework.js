!function(){function q(a){return null!=a&&!isNaN(a)}function t(a){return a.length}function r(a,c){try{for(var b in c)Object.defineProperty(a.prototype,b,{value:c[b],enumerable:!1})}catch(g){a.prototype=c}}function s(){}function l(a){return Td+a in this}function b(){var a=[];return this.forEach(function(c){a.push(c)}),a}function p(){var a=0,c;for(c in this)c.charCodeAt(0)===kf&&++a;return a}function m(){for(var a in this)if(a.charCodeAt(0)===kf)return!1;return!0}function f(){}function d(a,c,b){return function(){var g=
b.apply(c,arguments);return g===c?a:g}}function k(a,c){if(c in a)return c;c=c.charAt(0).toUpperCase()+c.substring(1);for(var b=0,g=Ig.length;g>b;++b){var d=Ig[b]+c;if(d in a)return d}}function e(){}function n(){}function a(a){function c(){for(var g,d=b,e=-1,k=d.length;++e<k;)(g=d[e].on)&&g.apply(this,arguments);return a}var b=[],g=new s;return c.on=function(c,d){var e,k=g.get(c);return 2>arguments.length?k&&k.on:(k&&(k.on=null,b=b.slice(0,e=b.indexOf(k)).concat(b.slice(e+1)),g.remove(c)),d&&b.push(g.set(c,
{on:d})),a)},c}function c(){E.event.preventDefault()}function g(){for(var a,c=E.event;a=c.sourceEvent;)c=a;return c}function v(c){for(var b=new n,g=0,d=arguments.length;++g<d;)b[arguments[g]]=a(b);return b.of=function(a,g){return function(d){try{var e=d.sourceEvent=E.event;d.target=c;E.event=d;b[d.type].apply(a,g)}finally{E.event=e}}},b}function u(a){return lf(a,Ma),a}function z(a){return"function"==typeof a?a:function(){return bg(a,this)}}function A(a){return"function"==typeof a?a:function(){return cg(a,
this)}}function y(a,c){function b(){this.removeAttribute(a)}function g(){this.removeAttributeNS(a.space,a.local)}function d(){this.setAttribute(a,c)}function e(){this.setAttributeNS(a.space,a.local,c)}function k(){var b=c.apply(this,arguments);null==b?this.removeAttribute(a):this.setAttribute(a,b)}function n(){var b=c.apply(this,arguments);null==b?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,b)}return a=E.ns.qualify(a),null==c?a.local?g:b:"function"==typeof c?a.local?
n:k:a.local?e:d}function C(a){return a.trim().replace(/\s+/g," ")}function D(a){return RegExp("(?:^|\\s+)"+E.requote(a)+"(?:\\s+|$)","g")}function B(a,c){function b(){for(var g=-1;++g<d;)a[g](this,c)}function g(){for(var b=-1,e=c.apply(this,arguments);++b<d;)a[b](this,e)}a=a.trim().split(/^|\s+/).map(G);var d=a.length;return"function"==typeof c?g:b}function G(a){var c=D(a);return function(b,g){if(d=b.classList)return g?d.add(a):d.remove(a);var d=b.getAttribute("class")||"";g?(c.lastIndex=0,c.test(d)||
b.setAttribute("class",C(d+" "+a))):b.setAttribute("class",C(d.replace(c," ")))}}function J(a,c,b){function g(){this.style.removeProperty(a)}function d(){this.style.setProperty(a,c,b)}function e(){var g=c.apply(this,arguments);null==g?this.style.removeProperty(a):this.style.setProperty(a,g,b)}return null==c?g:"function"==typeof c?e:d}function M(a,c){function b(){delete this[a]}function g(){this[a]=c}function d(){var b=c.apply(this,arguments);null==b?delete this[a]:this[a]=b}return null==c?b:"function"==
typeof c?d:g}function F(a){return"function"==typeof a?a:(a=E.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function H(a){return function(){return Jg(this,a)}}function S(a){return arguments.length||(a=E.ascending),function(c,b){return c&&b?a(c.__data__,b.__data__):!c-!b}}function K(a,c){for(var b=0,g=a.length;g>b;b++)for(var d,e=a[b],k=0,n=e.length;n>k;k++)(d=e[k])&&c(d,k,b);return a}
function x(a){return lf(a,$c),a}function L(a){var c,b;return function(g,d,e){g=a[e].update;var k=g.length;e!=b&&(b=e,c=0);for(d>=c&&(c=d+1);!(d=g[c])&&++c<k;);return d}}function I(){var a=this.__transition__;a&&++a.active}function T(a,c,b){function g(){var c=this[n];c&&(this.removeEventListener(a,c,c.$),delete this[n])}function d(){var e=m(c,od(arguments));g.call(this);this.addEventListener(a,this[n]=e,e.$=b);e._=c}function k(){var c,b=RegExp("^__on([^.]+)"+E.requote(a)+"$"),g;for(g in this)if(c=
g.match(b)){var d=this[g];this.removeEventListener(c[1],d,d.$);delete this[g]}}var n="__on"+a,f=a.indexOf("."),m=N;0<f&&(a=a.substring(0,f));var v=dg.get(a);return v&&(a=v,m=W),f?c?d:g:c?e:k}function N(a,c){return function(b){var g=E.event;E.event=b;c[0]=this.__data__;try{a.apply(this,c)}finally{E.event=g}}}function W(a,c){var b=N(a,c);return function(a){var c=a.relatedTarget;c&&(c===this||8&c.compareDocumentPosition(this))||b.call(this,a)}}function Z(){var a=".dragsuppress-"+ ++zh,b="click"+a,g=
E.select(Nb).on("touchmove"+a,c).on("dragstart"+a,c).on("selectstart"+a,c);if(Re){var d=pd.style,e=d[Re];d[Re]="none"}return function(k){function n(){g.on(b,null)}g.on(a,null);Re&&(d[Re]=e);k&&(g.on(b,function(){c();n()},!0),setTimeout(n,0))}}function V(a,c){c.changedTouches&&(c=c.changedTouches[0]);var b=a.ownerSVGElement||a;if(b.createSVGPoint){var g=b.createSVGPoint();if(0>eg&&(Nb.scrollX||Nb.scrollY)){var b=E.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,
border:"none"},"important"),d=b[0][0].getScreenCTM();eg=!(d.f||d.e);b.remove()}return eg?(g.x=c.pageX,g.y=c.pageY):(g.x=c.clientX,g.y=c.clientY),g=g.matrixTransform(a.getScreenCTM().inverse()),[g.x,g.y]}b=a.getBoundingClientRect();return[c.clientX-b.left-a.clientLeft,c.clientY-b.top-a.clientTop]}function Q(a,c,b){return(c[0]-a[0])*(b[1]-a[1])-(c[1]-a[1])*(b[0]-a[0])}function R(a){return 1<a?0:-1>a?za:Math.acos(a)}function O(a){return 1<a?ac:-1>a?-ac:Math.asin(a)}function ca(a){return((a=Math.exp(a))+
1/a)/2}function aa(a){return(a=Math.sin(a/2))*a}function ma(){}function da(a,c,b){return new qa(a,c,b)}function qa(a,c,b){this.h=a;this.s=c;this.l=b}function la(a,c,b){function g(a){return 360<a?a-=360:0>a&&(a+=360),60>a?d+(e-d)*a/60:180>a?e:240>a?d+(e-d)*(240-a)/60:d}var d,e;return a=isNaN(a)?0:0>(a%=360)?a+360:a,c=isNaN(c)?0:0>c?0:1<c?1:c,b=0>b?0:1<b?1:b,e=0.5>=b?b*(1+c):b+c-b*c,d=2*b-e,ra(Math.round(255*g(a+120)),Math.round(255*g(a)),Math.round(255*g(a-120)))}function ia(a,c,b){return new ka(a,
c,b)}function ka(a,c,b){this.h=a;this.c=c;this.l=b}function Aa(a,c,b){return isNaN(a)&&(a=0),isNaN(c)&&(c=0),P(b,Math.cos(a*=wa)*c,Math.sin(a)*c)}function P(a,c,b){return new na(a,c,b)}function na(a,c,b){this.l=a;this.a=c;this.b=b}function Va(a,c,b){a=(a+16)/116;c=a+c/500;b=a-b/200;return c=Fa(c)*Kg,a=Fa(a)*Lg,b=Fa(b)*Mg,ra(Na(3.2404542*c-1.5371385*a-0.4985314*b),Na(-0.969266*c+1.8760108*a+0.041556*b),Na(0.0556434*c-0.2040259*a+1.0572252*b))}function La(a,c,b){return 0<a?ia(Math.atan2(b,c)*Ya,Math.sqrt(c*
c+b*b),a):ia(0/0,0/0,a)}function Fa(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Wa(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Na(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function db(a){return ra(a>>16,255&a>>8,255&a)+""}function ra(a,c,b){return new ea(a,c,b)}function ea(a,c,b){this.r=a;this.g=c;this.b=b}function Ia(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ib(a,c,b){var g,d,e,k=0,n=0,f=0;
if(g=/([a-z]+)\((.*)\)/i.exec(a))switch(d=g[2].split(","),g[1]){case "hsl":return b(parseFloat(d[0]),parseFloat(d[1])/100,parseFloat(d[2])/100);case "rgb":return c(xa(d[0]),xa(d[1]),xa(d[2]))}return(e=mf.get(a))?c(e.r,e.g,e.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(k=a.charAt(1),k+=k,n=a.charAt(2),n+=n,f=a.charAt(3),f+=f):7===a.length&&(k=a.substring(1,3),n=a.substring(3,5),f=a.substring(5,7)),k=parseInt(k,16),n=parseInt(n,16),f=parseInt(f,16)),c(k,n,f))}function ya(a,c,b){var g,d,e=Math.min(a/=
255,c/=255,b/=255),k=Math.max(a,c,b),n=k-e,f=(k+e)/2;return n?(d=0.5>f?n/(k+e):n/(2-k-e),g=a==k?(c-b)/n+(b>c?6:0):c==k?(b-a)/n+2:(a-c)/n+4,g*=60):(g=0/0,d=0<f&&1>f?0:g),da(g,d,f)}function oa(a,c,b){a=Y(a);c=Y(c);b=Y(b);var g=Wa((0.4124564*a+0.3575761*c+0.1804375*b)/Kg),d=Wa((0.2126729*a+0.7151522*c+0.072175*b)/Lg);a=Wa((0.0193339*a+0.119192*c+0.9503041*b)/Mg);return P(116*d-16,500*(g-d),200*(d-a))}function Y(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function xa(a){var c=parseFloat(a);
return"%"===a.charAt(a.length-1)?Math.round(2.55*c):c}function ta(a){return"function"==typeof a?a:function(){return a}}function Ca(a){return a}function jb(a){return function(c,b,g){return 2===arguments.length&&"function"==typeof b&&(g=b,b=null),eb(c,b,a,g)}}function eb(a,c,b,g){function d(){var a,c=f.status;if(!c&&f.responseText||200<=c&&300>c||304===c){try{a=b.call(e,f)}catch(g){return k.error.call(e,g),void 0}k.load.call(e,a)}else k.error.call(e,f)}var e={},k=E.dispatch("beforesend","progress",
"load","error"),n={},f=new XMLHttpRequest,m=null;return!Nb.XDomainRequest||"withCredentials"in f||!/^(http(s)?:)?\/\//.test(a)||(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=d:f.onreadystatechange=function(){3<f.readyState&&d()},f.onprogress=function(a){var c=E.event;E.event=a;try{k.progress.call(e,f)}finally{E.event=c}},e.header=function(a,c){return a=(a+"").toLowerCase(),2>arguments.length?n[a]:(null==c?delete n[a]:n[a]=c+"",e)},e.mimeType=function(a){return arguments.length?(c=null==a?
null:a+"",e):c},e.responseType=function(a){return arguments.length?(m=a,e):m},e.response=function(a){return b=a,e},["get","post"].forEach(function(a){e[a]=function(){return e.send.apply(e,[a].concat(od(arguments)))}}),e.send=function(b,g,d){if(2===arguments.length&&"function"==typeof g&&(d=g,g=null),f.open(b,a,!0),null==c||"accept"in n||(n.accept=c+",*/*"),f.setRequestHeader)for(var v in n)f.setRequestHeader(v,n[v]);return null!=c&&f.overrideMimeType&&f.overrideMimeType(c),null!=m&&(f.responseType=
m),null!=d&&e.on("error",d).on("load",function(a){d(null,a)}),k.beforesend.call(e,f),f.send(null==g?null:g),e},e.abort=function(){return f.abort(),e},E.rebind(e,k,"on"),null==g?e:e.get(Ab(g))}function Ab(a){return 1===a.length?function(c,b){a(null==c?b:null)}:a}function ja(){var a=Pa(),a=Jb()-a;24<a?(isFinite(a)&&(clearTimeout(nf),nf=setTimeout(ja,a)),of=0):(of=1,Ng(ja))}function Pa(){var a=Date.now();for(ad=pf;ad;)a>=ad.t&&(ad.f=ad.c(a-ad.t)),ad=ad.n;return a}function Jb(){for(var a,c=pf,b=1/0;c;)c.f?
c=a?a.n=c.n:pf=c.n:(c.t<b&&(b=c.t),c=(a=c).n);return qf=a,b}function Sa(a,c){return c-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function kb(a){var c=a.decimal,b=a.thousands,g=a.grouping,d=a.currency,e=g?function(a){for(var c=a.length,d=[],e=0,k=g[0];0<c&&0<k;)d.push(a.substring(c-=k,c+k)),k=g[e=(e+1)%g.length];return d.reverse().join(b)}:Ca;return function(a){a=Og.exec(a);var b=a[1]||" ",g=a[2]||">",k=a[3]||"",n=a[4]||"",f=a[5],m=+a[6],v=a[7],l=a[8],u=a[9],y=1,p="",z="",A=!1;switch(l&&(l=+l.substring(1)),
(f||"0"===b&&"="===g)&&(f=b="0",g="=",v&&(m-=Math.floor((m-1)/4))),u){case "n":v=!0;u="g";break;case "%":y=100;z="%";u="f";break;case "p":y=100;z="%";u="r";break;case "b":case "o":case "x":case "X":"#"===n&&(p="0"+u.toLowerCase());case "c":case "d":A=!0;l=0;break;case "s":y=-1,u="r"}"$"===n&&(p=d[0],z=d[1]);"r"!=u||l||(u="g");null!=l&&("g"==u?l=Math.max(1,Math.min(21,l)):("e"==u||"f"==u)&&(l=Math.max(0,Math.min(20,l))));var u=Ah.get(u)||qb,oc=f&&v;return function(a){if(A&&a%1)return"";var d=0>a||
0===a&&0>1/a?(a=-a,"-"):k;if(0>y){var n=E.formatPrefix(a,l);a=n.scale(a);z=n.symbol}else a*=y;a=u(a,l);var U=a.lastIndexOf("."),n=0>U?a:a.substring(0,U),U=0>U?"":c+a.substring(U+1);!f&&v&&(n=e(n));var C=p.length+n.length+U.length+(oc?0:d.length),B=m>C?Array(C=m-C+1).join(b):"";return oc&&(n=e(B+n)),d+=p,a=n+U,("<"===g?d+a+B:">"===g?B+d+a:"^"===g?B.substring(0,C>>=1)+d+a+B.substring(C):d+(oc?a:B+a))+z}}}function qb(a){return a+""}function Oa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,
arguments):arguments[0])}function Za(a,c,b){function g(c){var b=a(c),d=e(b,1);return d-c>c-b?b:d}function d(b){return c(b=a(new Ob(b-1)),1),b}function e(a,b){return c(a=new Ob(+a),b),a}function k(a,g,e){a=d(a);var n=[];if(1<e)for(;g>a;)b(a)%e||n.push(new Date(+a)),c(a,1);else for(;g>a;)n.push(new Date(+a)),c(a,1);return n}a.floor=a;a.round=g;a.ceil=d;a.offset=e;a.range=k;var n=a.utc=Ga(a);return n.floor=n,n.round=Ga(g),n.ceil=Ga(d),n.offset=Ga(e),n.range=function(a,c,b){try{Ob=Oa;var g=new Oa;return g._=
a,k(g,c,b)}finally{Ob=Date}},a}function Ga(a){return function(c,b){try{Ob=Oa;var g=new Oa;return g._=c,a(g,b)._}finally{Ob=Date}}}function $a(a){function c(a){function g(c){for(var b,e,k,n=[],f=-1,m=0;++f<d;)37===a.charCodeAt(f)&&(n.push(a.substring(m,f)),null!=(e=Pg[b=a.charAt(++f)])&&(b=a.charAt(++f)),(k=D[b])&&(b=k(c,null==e?"e"===b?" ":"0":e)),n.push(b),m=f+1);return n.push(a.substring(m,f)),n.join("")}var d=a.length;return g.parse=function(c){var g={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(b(g,
a,c,0)!=c.length)return null;"p"in g&&(g.H=g.H%12+12*g.p);c=null!=g.Z&&Ob!==Oa;var d=new (c?Oa:Ob);return"j"in g?d.setFullYear(g.y,0,g.j):"w"in g&&("W"in g||"U"in g)?(d.setFullYear(g.y,0,1),d.setFullYear(g.y,0,"W"in g?(g.w+6)%7+7*g.W-(d.getDay()+5)%7:g.w+7*g.U-(d.getDay()+6)%7)):d.setFullYear(g.y,g.m,g.d),d.setHours(g.H+Math.floor(g.Z/100),g.M+g.Z%100,g.S,g.L),c?d._:d},g.toString=function(){return a},g}function b(a,c,g,d){for(var e,k,n,f=0,m=c.length,v=g.length;m>f;){if(d>=v)return-1;if(e=c.charCodeAt(f++),
37===e){if(n=c.charAt(f++),k=G[n in Pg?c.charAt(f++):n],!k||0>(d=k(a,g,d)))return-1}else if(e!=g.charCodeAt(d++))return-1}return d}var g=a.dateTime,d=a.date,e=a.time,k=a.periods,n=a.days,f=a.shortDays,m=a.months,v=a.shortMonths;c.utc=function(a){function b(a){try{Ob=Oa;var c=new Ob;return c._=a,g(c)}finally{Ob=Date}}var g=c(a);return b.parse=function(a){try{Ob=Oa;var c=g.parse(a);return c&&c._}finally{Ob=Date}},b.toString=g.toString,b};c.multi=c.utc.multi=ab;var l=E.map(),u=lb(n),y=Eb(n),p=lb(f),
z=Eb(f),A=lb(m),U=Eb(m),C=lb(v),B=Eb(v);k.forEach(function(a,c){l.set(a.toLowerCase(),c)});var D={a:function(a){return f[a.getDay()]},A:function(a){return n[a.getDay()]},b:function(a){return v[a.getMonth()]},B:function(a){return m[a.getMonth()]},c:c(g),d:function(a,c){return Xa(a.getDate(),c,2)},e:function(a,c){return Xa(a.getDate(),c,2)},H:function(a,c){return Xa(a.getHours(),c,2)},I:function(a,c){return Xa(a.getHours()%12||12,c,2)},j:function(a,c){return Xa(1+ga.dayOfYear(a),c,3)},L:function(a,
c){return Xa(a.getMilliseconds(),c,3)},m:function(a,c){return Xa(a.getMonth()+1,c,2)},M:function(a,c){return Xa(a.getMinutes(),c,2)},p:function(a){return k[+(12<=a.getHours())]},S:function(a,c){return Xa(a.getSeconds(),c,2)},U:function(a,c){return Xa(ga.sundayOfYear(a),c,2)},w:function(a){return a.getDay()},W:function(a,c){return Xa(ga.mondayOfYear(a),c,2)},x:c(d),X:c(e),y:function(a,c){return Xa(a.getFullYear()%100,c,2)},Y:function(a,c){return Xa(a.getFullYear()%1E4,c,4)},Z:rb,"%":function(){return"%"}},
G={a:function(a,c,b){p.lastIndex=0;return(c=p.exec(c.substring(b)))?(a.w=z.get(c[0].toLowerCase()),b+c[0].length):-1},A:function(a,c,b){u.lastIndex=0;return(c=u.exec(c.substring(b)))?(a.w=y.get(c[0].toLowerCase()),b+c[0].length):-1},b:function(a,c,b){C.lastIndex=0;return(c=C.exec(c.substring(b)))?(a.m=B.get(c[0].toLowerCase()),b+c[0].length):-1},B:function(a,c,b){A.lastIndex=0;return(c=A.exec(c.substring(b)))?(a.m=U.get(c[0].toLowerCase()),b+c[0].length):-1},c:function(a,c,g){return b(a,D.c.toString(),
c,g)},d:Ea,e:Ea,H:ob,I:ob,j:Ka,L:Bb,m:ha,M:sb,p:function(a,c,b){c=l.get(c.substring(b,b+=2).toLowerCase());return null==c?-1:(a.p=c,b)},S:pa,U:Fb,w:Kb,W:bb,x:function(a,c,g){return b(a,D.x.toString(),c,g)},X:function(a,c,g){return b(a,D.X.toString(),c,g)},y:hc,Y:Qa,Z:Xb,"%":Ra};return c}function Xa(a,c,b){var g=0>a?"-":"";a=(g?-a:a)+"";var d=a.length;return g+(b>d?Array(b-d+1).join(c)+a:a)}function lb(a){return RegExp("^(?:"+a.map(E.requote).join("|")+")","i")}function Eb(a){for(var c=new s,b=-1,
g=a.length;++b<g;)c.set(a[b].toLowerCase(),b);return c}function Kb(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b,b+1)))?(a.w=+c[0],b+c[0].length):-1}function Fb(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b)))?(a.U=+c[0],b+c[0].length):-1}function bb(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b)))?(a.W=+c[0],b+c[0].length):-1}function Qa(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b,b+4)))?(a.y=+c[0],b+c[0].length):-1}function hc(a,c,b){mb.lastIndex=0;if(c=mb.exec(c.substring(b,
b+2))){var g=+c[0];a=(a.y=g+(68<g?1900:2E3),b+c[0].length)}else a=-1;return a}function Xb(a,c,b){return/^[+-]\d{4}$/.test(c=c.substring(b,b+5))?(a.Z=+c,b+5):-1}function ha(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b,b+2)))?(a.m=c[0]-1,b+c[0].length):-1}function Ea(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b,b+2)))?(a.d=+c[0],b+c[0].length):-1}function Ka(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b,b+3)))?(a.j=+c[0],b+c[0].length):-1}function ob(a,c,b){mb.lastIndex=0;return(c=
mb.exec(c.substring(b,b+2)))?(a.H=+c[0],b+c[0].length):-1}function sb(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b,b+2)))?(a.M=+c[0],b+c[0].length):-1}function pa(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b,b+2)))?(a.S=+c[0],b+c[0].length):-1}function Bb(a,c,b){mb.lastIndex=0;return(c=mb.exec(c.substring(b,b+3)))?(a.L=+c[0],b+c[0].length):-1}function rb(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var b=~~(Ba(c)/60),c=Ba(c)%60;return a+Xa(b,"0",2)+Xa(c,"0",2)}function Ra(a,c,b){Qg.lastIndex=
0;return(a=Qg.exec(c.substring(b,b+1)))?b+a[0].length:-1}function ab(a){for(var c=a.length,b=-1;++b<c;)a[b][0]=this(a[b][0]);return function(c){for(var b=0,g=a[b];!g[1](c);)g=a[++b];return g[0](c)}}function cb(){}function Gb(a,c,b){var g=b.s=a+c,d=g-a;b.t=a-(g-d)+(c-d)}function bc(a,c){a&&Rg.hasOwnProperty(a.type)&&Rg[a.type](a,c)}function Ja(a,c,b){var g=-1,d=a.length-b;for(c.lineStart();++g<d;)b=a[g],c.point(b[0],b[1],b[2]);c.lineEnd()}function tb(a,c){var b=-1,g=a.length;for(c.polygonStart();++b<
g;)Ja(a[b],c,1);c.polygonEnd()}function Ta(){function a(c,b){c*=wa;b=b*wa/2+za/4;var k=c-g,n=Math.cos(b),f=Math.sin(b),m=e*f,v=d*n+m*Math.cos(k),k=m*Math.sin(k);Ud.add(Math.atan2(k,v));g=c;d=n;e=f}var c,b,g,d,e;pc.point=function(k,n){pc.point=a;g=(c=k)*wa;d=Math.cos(n=(b=n)*wa/2+za/4);e=Math.sin(n)};pc.lineEnd=function(){a(c,b)}}function fb(a){var c=a[0];a=a[1];var b=Math.cos(a);return[b*Math.cos(c),b*Math.sin(c),Math.sin(a)]}function xb(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}function nb(a,c){return[a[1]*
c[2]-a[2]*c[1],a[2]*c[0]-a[0]*c[2],a[0]*c[1]-a[1]*c[0]]}function yc(a,c){a[0]+=c[0];a[1]+=c[1];a[2]+=c[2]}function ub(a,c){return[a[0]*c,a[1]*c,a[2]*c]}function Ua(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=c;a[1]/=c;a[2]/=c}function ua(a){return[Math.atan2(a[1],a[0]),O(a[2])]}function cc(a,c){return Ba(a[0]-c[0])<fa&&Ba(a[1]-c[1])<fa}function dc(a,c){a*=wa;var b=Math.cos(c*=wa);Pb(b*Math.cos(a),b*Math.sin(a),Math.sin(c))}function Pb(a,c,b){++Se;bd+=(a-bd)/Se;cd+=(c-cd)/Se;Sc+=(b-Sc)/
Se}function vb(){function a(d,e){d*=wa;var k=Math.cos(e*=wa),n=k*Math.cos(d),k=k*Math.sin(d),f=Math.sin(e),m=Math.atan2(Math.sqrt((m=b*f-g*k)*m+(m=g*n-c*f)*m+(m=c*k-b*n)*m),c*n+b*k+g*f);qe+=m;zc+=m*(c+(c=n));Ac+=m*(b+(b=k));ic+=m*(g+(g=f));Pb(c,b,g)}var c,b,g;Hc.point=function(d,e){d*=wa;var k=Math.cos(e*=wa);c=k*Math.cos(d);b=k*Math.sin(d);g=Math.sin(e);Hc.point=a;Pb(c,b,g)}}function Qb(){Hc.point=dc}function dd(){function a(c,b){c*=wa;var k=Math.cos(b*=wa),n=k*Math.cos(c),k=k*Math.sin(c),f=Math.sin(b),
m=d*f-e*k,v=e*n-g*f,l=g*k-d*n,u=Math.sqrt(m*m+v*v+l*l),y=g*n+d*k+e*f,p=u&&-R(y)/u,u=Math.atan2(u,y);qd+=p*m;rd+=p*v;Tc+=p*l;qe+=u;zc+=u*(g+(g=n));Ac+=u*(d+(d=k));ic+=u*(e+(e=f));Pb(g,d,e)}var c,b,g,d,e;Hc.point=function(k,n){c=k;b=n;Hc.point=a;k*=wa;var f=Math.cos(n*=wa);g=f*Math.cos(k);d=f*Math.sin(k);e=Math.sin(n);Pb(g,d,e)};Hc.lineEnd=function(){a(c,b);Hc.lineEnd=Qb;Hc.point=dc}}function Yb(){return!0}function wb(a,c,b,g,d){var e=[],k=[];if(a.forEach(function(a){if(!(0>=(c=a.length-1))){var c,
b=a[0],g=a[c];if(cc(b,g)){d.lineStart();for(g=0;c>g;++g)d.point((b=a[g])[0],b[1]);return d.lineEnd(),void 0}c=new ba(b,a,null,!0);b=new ba(b,null,c,!1);c.o=b;e.push(c);k.push(b);c=new ba(g,a,null,!1);b=new ba(g,null,c,!0);c.o=b;e.push(c);k.push(b)}}),k.sort(c),gb(e),gb(k),e.length){a=0;c=b;for(b=k.length;b>a;++a)k[a].e=c=!c;for(var n,f=e[0];;){for(var m=f,v=!0;m.v;)if((m=m.n)===f)return;c=m.z;d.lineStart();do{if(m.v=m.o.v=!0,m.e){if(v)for(a=0,b=c.length;b>a;++a)d.point((n=c[a])[0],n[1]);else g(m.x,
m.n.x,1,d);m=m.n}else{if(v)for(c=m.p.z,a=c.length-1;0<=a;--a)d.point((n=c[a])[0],n[1]);else g(m.x,m.p.x,-1,d);m=m.p}m=m.o;c=m.z;v=!v}while(!m.v);d.lineEnd()}}}function gb(a){if(c=a.length){for(var c,b,g=0,d=a[0];++g<c;)d.n=b=a[g],b.p=d,d=b;d.n=b=a[0];b.p=d}}function ba(a,c,b,g){this.x=a;this.z=c;this.o=b;this.e=g;this.v=!1;this.n=this.p=null}function jc(a,c,b,g){return function(d,e){function k(c,b){var g=d(c,b);a(c=g[0],b=g[1])&&e.point(c,b)}function n(a,c){var b=d(a,c);A.point(b[0],b[1])}function f(){C.point=
n;A.lineStart()}function m(){C.point=k;A.lineEnd()}function v(a,c){z.push([a,c]);var b=d(a,c);D.point(b[0],b[1])}function l(){D.lineStart();z=[]}function u(){v(z[0][0],z[0][1]);D.lineEnd();var a;a=D.clean();var c=B.buffer(),b=c.length;if(z.pop(),p.push(z),z=null,b){if(1&a){a=c[0];var g,b=a.length-1,c=-1;for(e.lineStart();++c<b;)e.point((g=a[c])[0],g[1]);return e.lineEnd(),void 0}1<b&&2&a&&c.push(c.pop().concat(c.shift()));y.push(c.filter(kc))}}var y,p,z,A=c(e),U=d.invert(g[0],g[1]),C={point:k,lineStart:f,
lineEnd:m,polygonStart:function(){C.point=v;C.lineStart=l;C.lineEnd=u;y=[];p=[];e.polygonStart()},polygonEnd:function(){C.point=k;C.lineStart=f;C.lineEnd=m;y=E.merge(y);var a,c=U;a=p;var g=c[0],d=c[1],n=[Math.sin(g),-Math.cos(g),0],v=0,l=0;Ud.reset();for(var u=0,z=a.length;z>u;++u){var A=a[u],B=A.length;if(B)for(var oc=A[0],D=oc[0],c=oc[1]/2+za/4,G=Math.sin(c),J=Math.cos(c),X=1;;){X===B&&(X=0);var c=A[X],F=c[0],q=c[1]/2+za/4,x=Math.sin(q),q=Math.cos(q),H=F-D,s=Ba(H)>za,G=G*x;if(Ud.add(Math.atan2(G*
Math.sin(H),J*q+G*Math.cos(H))),v+=s?H+(0<=H?lc:-lc):H,s^D>=g^F>=g)oc=nb(fb(oc),fb(c)),Ua(oc),D=nb(n,oc),Ua(D),D=(s^0<=H?-1:1)*O(D[2]),(d>D||d===D&&(oc[0]||oc[1]))&&(l+=s^0<=H?1:-1);if(!X++)break;D=F;G=x;J=q;oc=c}}a=(-fa>v||fa>v&&0>Ud)^1&l;y.length?wb(y,ed,a,b,e):a&&(e.lineStart(),b(null,null,1,e),e.lineEnd());e.polygonEnd();y=p=null},sphere:function(){e.polygonStart();e.lineStart();b(null,null,1,e);e.lineEnd();e.polygonEnd()}},B=Lb(),D=c(B);return C}}function kc(a){return 1<a.length}function Lb(){var a,
c=[];return{lineStart:function(){c.push(a=[])},point:function(c,b){a.push([c,b])},lineEnd:e,buffer:function(){var b=c;return c=[],a=null,b},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function ed(a,c){return(0>(a=a.x)[0]?a[1]-ac-fa:ac-a[1])-(0>(c=c.x)[0]?c[1]-ac-fa:ac-c[1])}function Rb(a){function c(a,b){return Math.cos(a)*Math.cos(b)>d}function b(a,c,g){var e=fb(a),k=fb(c),n=[1,0,0],k=nb(e,k),f=xb(k,k),e=k[0],m=f-e*e;if(!m)return!g&&a;f=d*f/m;m=-d*e/m;e=nb(n,k);n=ub(n,f);k=
ub(k,m);yc(n,k);k=xb(n,e);f=xb(e,e);m=k*k-f*(xb(n,n)-1);if(!(0>m)){var v=Math.sqrt(m),m=ub(e,(-k-v)/f);if(yc(m,n),m=ua(m),!g)return m;var l;g=a[0];var u=c[0];a=a[1];c=c[1];g>u&&(l=g,g=u,u=l);var y=u-g,p=Ba(y-za)<fa,z=p||fa>y;if(!p&&a>c&&(l=a,a=c,c=l),z?p?0<a+c^m[1]<(Ba(m[0]-g)<fa?a:c):a<=m[1]&&m[1]<=c:y>za^(g<=m[0]&&m[0]<=u))return l=ub(e,(-k+v)/f),yc(l,n),[m,ua(l)]}}function g(c,b){var d=e?a:za-a,k=0;return-d>c?k|=1:c>d&&(k|=2),-d>b?k|=4:b>d&&(k|=8),k}var d=Math.cos(a),e=0<d,k=Ba(d)>fa,n=Uc(a,6*
wa);return jc(c,function(a){var d,n,f,m,v;return{lineStart:function(){m=f=!1;v=1},point:function(l,u){var y,p=[l,u],z=c(l,u),A=e?z?0:g(l,u):z?g(l+(0>l?za:-za),u):0;if(!d&&(m=f=z)&&a.lineStart(),z!==f&&(y=b(d,p),(cc(d,y)||cc(p,y))&&(p[0]+=fa,p[1]+=fa,z=c(p[0],p[1]))),z!==f)v=0,z?(a.lineStart(),y=b(p,d),a.point(y[0],y[1])):(y=b(d,p),a.point(y[0],y[1]),a.lineEnd()),d=y;else if(k&&d&&e^z){var U;A&n||!(U=b(p,d,!0))||(v=0,e?(a.lineStart(),a.point(U[0][0],U[0][1]),a.point(U[1][0],U[1][1]),a.lineEnd()):(a.point(U[1][0],
U[1][1]),a.lineEnd(),a.lineStart(),a.point(U[0][0],U[0][1])))}!z||d&&cc(d,p)||a.point(p[0],p[1]);d=p;f=z;n=A},lineEnd:function(){f&&a.lineEnd();d=null},clean:function(){return v|(m&&f)<<1}}},n,e?[0,-a]:[-za,a-za])}function sd(a,c,b,g){return function(d){var e,k=d.a,n=d.b,f=k.x,k=k.y,m=0,v=1,l=n.x-f,n=n.y-k;if(e=a-f,l||!(0<e)){if(e/=l,0>l){if(m>e)return;v>e&&(v=e)}else if(0<l){if(e>v)return;e>m&&(m=e)}if(e=b-f,l||!(0>e)){if(e/=l,0>l){if(e>v)return;e>m&&(m=e)}else if(0<l){if(m>e)return;v>e&&(v=e)}if(e=
c-k,n||!(0<e)){if(e/=n,0>n){if(m>e)return;v>e&&(v=e)}else if(0<n){if(e>v)return;e>m&&(m=e)}if(e=g-k,n||!(0>e)){if(e/=n,0>n){if(e>v)return;e>m&&(m=e)}else if(0<n){if(m>e)return;v>e&&(v=e)}return 0<m&&(d.a={x:f+m*l,y:k+m*n}),1>v&&(d.b={x:f+v*l,y:k+v*n}),d}}}}}}function td(a,c,b,g){function d(g,e){return Ba(g[0]-a)<fa?0<e?0:3:Ba(g[0]-b)<fa?0<e?2:1:Ba(g[1]-c)<fa?0<e?1:0:0<e?3:2}function e(a,c){return k(a.x,c.x)}function k(a,c){var b=d(a,1),g=d(c,1);return b!==g?b-g:0===b?c[1]-a[1]:1===b?a[0]-c[0]:2===
b?a[1]-c[1]:c[0]-a[0]}return function(n){function f(e,n,m,v){var l=0,u=0;if(null==e||(l=d(e,m))!==(u=d(n,m))||0>k(e,n)^0<m){do v.point(0===l||3===l?a:b,1<l?g:c);while((l=(l+m+4)%4)!==u)}else v.point(n[0],n[1])}function m(d,e){d>=a&&b>=d&&e>=c&&g>=e&&n.point(d,e)}function v(d,e){d=Math.max(-rf,Math.min(rf,d));e=Math.max(-rf,Math.min(rf,e));var k=d>=a&&b>=d&&e>=c&&g>=e;if(u&&y.push([d,e]),D)p=d,z=e,A=k,D=!1,k&&(n.lineStart(),n.point(d,e));else if(k&&B)n.point(d,e);else{var f={a:{x:U,y:C},b:{x:d,y:e}};
F(f)?(B||(n.lineStart(),n.point(f.a.x,f.a.y)),n.point(f.b.x,f.b.y),k||n.lineEnd(),G=!1):k&&(n.lineStart(),n.point(d,e),G=!1)}U=d;C=e;B=k}var l,u,y,p,z,A,U,C,B,D,G,J=n,X=Lb(),F=sd(a,c,b,g),q={point:m,lineStart:function(){q.point=v;u&&u.push(y=[]);D=!0;B=!1;U=C=0/0},lineEnd:function(){l&&(v(p,z),A&&B&&X.rejoin(),l.push(X.buffer()));q.point=m;B&&n.lineEnd()},polygonStart:function(){n=X;l=[];u=[];G=!0},polygonEnd:function(){n=J;l=E.merge(l);var c;c=[a,g];for(var b=0,d=u.length,k=c[1],m=0;d>m;++m)for(var v,
p=1,z=u[m],A=z.length,U=z[0];A>p;++p)v=z[p],U[1]<=k?v[1]>k&&0<Q(U,v,c)&&++b:v[1]<=k&&0>Q(U,v,c)&&--b,U=v;c=0!==b;b=G&&c;d=l.length;(b||d)&&(n.polygonStart(),b&&(n.lineStart(),f(null,null,1,n),n.lineEnd()),d&&wb(l,e,c,f,n),n.polygonEnd());l=u=y=null}};return q}}function Bc(a,c){function b(g,d){return g=a(g,d),c(g[0],g[1])}return a.invert&&c.invert&&(b.invert=function(b,g){return b=c.invert(b,g),b&&a.invert(b[0],b[1])}),b}function Da(a){var c=0,b=za/3,g=Vd(a);a=g(c,b);return a.parallels=function(a){return arguments.length?
g(c=a[0]*za/180,b=a[1]*za/180):[c/za*180,b/za*180]},a}function Wd(a,c){function b(a,c){var g=Math.sqrt(e-2*d*Math.sin(c))/d;return[g*Math.sin(a*=d),k-g*Math.cos(a)]}var g=Math.sin(a),d=(g+Math.sin(c))/2,e=1+g*(2*d-g),k=Math.sqrt(e)/d;return b.invert=function(a,c){var b=k-c;return[Math.atan2(a,b)/d,O((e-(a*a+b*b)*d*d)/(2*d))]},b}function qc(){function a(c,b){sf+=d*c-g*b;g=c;d=b}var c,b,g,d;ud.point=function(e,k){ud.point=a;c=g=e;b=d=k};ud.lineEnd=function(){a(c,b)}}function Ic(){function a(c,b){k.push("M",
c,",",b,e)}function c(a,g){k.push("M",a,",",g);n.point=b}function b(a,c){k.push("L",a,",",c)}function g(){n.point=a}function d(){k.push("Z")}var e=vd(4.5),k=[],n={point:a,lineStart:function(){n.point=c},lineEnd:g,polygonStart:function(){n.lineEnd=d},polygonEnd:function(){n.lineEnd=g;n.point=a},pointRadius:function(a){return e=vd(a),n},result:function(){if(k.length){var a=k.join("");return k=[],a}}};return n}function vd(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}
function Sb(a,c){bd+=a;cd+=c;++Sc}function wd(){function a(g,d){var e=g-c,k=d-b,e=Math.sqrt(e*e+k*k);zc+=e*(c+g)/2;Ac+=e*(b+d)/2;ic+=e;Sb(c=g,b=d)}var c,b;Jc.point=function(g,d){Jc.point=a;Sb(c=g,b=d)}}function xd(){Jc.point=Sb}function yd(){function a(c,b){var e=c-g,k=b-d,e=Math.sqrt(e*e+k*k);zc+=e*(g+c)/2;Ac+=e*(d+b)/2;ic+=e;e=d*c-g*b;qd+=e*(g+c);rd+=e*(d+b);Tc+=3*e;Sb(g=c,d=b)}var c,b,g,d;Jc.point=function(e,k){Jc.point=a;Sb(c=g=e,b=d=k)};Jc.lineEnd=function(){a(c,b)}}function re(a){function c(b,
g){a.moveTo(b,g);a.arc(b,g,n,0,lc)}function b(c,d){a.moveTo(c,d);f.point=g}function g(c,b){a.lineTo(c,b)}function d(){f.point=c}function k(){a.closePath()}var n=4.5,f={point:c,lineStart:function(){f.point=b},lineEnd:d,polygonStart:function(){f.lineEnd=k},polygonEnd:function(){f.lineEnd=d;f.point=c},pointRadius:function(a){return n=a,f},result:e};return f}function Cc(a){function c(a){return(n?g:b)(a)}function b(c){return fd(c,function(b,g){b=a(b,g);c.point(b[0],b[1])})}function g(c){function b(g,d){g=
a(g,d);c.point(g[0],g[1])}function e(){B=0/0;F.point=k;c.lineStart()}function k(b,g){var e=fb([b,g]),f=a(b,g);d(B,D,C,G,J,X,B=f[0],D=f[1],C=b,G=e[0],J=e[1],X=e[2],n,c);c.point(B,D)}function f(){F.point=b;c.lineEnd()}function m(){e();F.point=v;F.lineEnd=l}function v(a,c){k(u=a,c);y=B;p=D;z=G;A=J;U=X;F.point=k}function l(){d(B,D,C,G,J,X,y,p,u,z,A,U,n,c);F.lineEnd=f;f()}var u,y,p,z,A,U,C,B,D,G,J,X,F={point:b,lineStart:e,lineEnd:f,polygonStart:function(){c.polygonStart();F.lineStart=m},polygonEnd:function(){c.polygonEnd();
F.lineStart=e}};return F}function d(c,b,g,n,f,m,v,l,u,y,p,z,A,U){var C=v-c,B=l-b,D=C*C+B*B;if(D>4*e&&A--){var G=n+y,J=f+p,X=m+z,F=Math.sqrt(G*G+J*J+X*X),q=Math.asin(X/=F),x=Ba(Ba(X)-1)<fa||Ba(g-u)<fa?(g+u)/2:Math.atan2(J,G),H=a(x,q),q=H[0],H=H[1],s=q-c,r=H-b,M=B*s-C*r;(M*M/D>e||0.3<Ba((C*s+B*r)/D-0.5)||k>n*y+f*p+m*z)&&(d(c,b,g,n,f,m,q,H,x,G/=F,J/=F,X,A,U),U.point(q,H),d(q,H,x,G,J,X,v,l,u,y,p,z,A,U))}}var e=0.5,k=Math.cos(30*wa),n=16;return c.precision=function(a){return arguments.length?(n=0<(e=a*
a)&&16,c):Math.sqrt(e)},c}function Kc(a){var c=Cc(function(c,b){return a([c*Ya,b*Ya])});return function(a){return mc(c(a))}}function Xd(a){this.stream=a}function fd(a,c){return{point:c,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Cb(a){return Vd(function(){return a})()}function Vd(a){function c(a){return a=n(a[0]*wa,a[1]*wa),[a[0]*u+f,m-a[1]*u]}function b(a){return a=
n.invert((a[0]-f)/u,(m-a[1])/u),a&&[a[0]*Ya,a[1]*Ya]}function g(){n=Bc(k=se(U,C,B),e);var a=e(z,A);return f=y-a[0]*u,m=p+a[1]*u,d()}function d(){return v&&(v.valid=!1,v=null),c}var e,k,n,f,m,v,l=Cc(function(a,c){return a=e(a,c),[a[0]*u+f,m-a[1]*u]}),u=150,y=480,p=250,z=0,A=0,U=0,C=0,B=0,D=Sg,G=Ca,J=null,X=null;return c.stream=function(a){return v&&(v.valid=!1),v=mc(D(k,l(G(a)))),v.valid=!0,v},c.clipAngle=function(a){return arguments.length?(D=null==a?(J=a,Sg):Rb((J=+a)*wa),d()):J},c.clipExtent=function(a){return arguments.length?
(X=a,G=a?td(a[0][0],a[0][1],a[1][0],a[1][1]):Ca,d()):X},c.scale=function(a){return arguments.length?(u=+a,g()):u},c.translate=function(a){return arguments.length?(y=+a[0],p=+a[1],g()):[y,p]},c.center=function(a){return arguments.length?(z=a[0]%360*wa,A=a[1]%360*wa,g()):[z*Ya,A*Ya]},c.rotate=function(a){return arguments.length?(U=a[0]%360*wa,C=a[1]%360*wa,B=2<a.length?a[2]%360*wa:0,g()):[U*Ya,C*Ya,B*Ya]},E.rebind(c,l,"precision"),function(){return e=a.apply(this,arguments),c.invert=e.invert&&b,g()}}
function mc(a){return fd(a,function(c,b){a.point(c*wa,b*wa)})}function Lc(a,c){return[a,c]}function tf(a,c){return[a>za?a-lc:-za>a?a+lc:a,c]}function se(a,c,b){return a?c||b?Bc(Yd(a),zd(c,b)):Yd(a):c||b?zd(c,b):tf}function te(a){return function(c,b){return c+=a,[c>za?c-lc:-za>c?c+lc:c,b]}}function Yd(a){var c=te(a);return c.invert=te(-a),c}function zd(a,c){function b(a,c){var n=Math.cos(c),f=Math.cos(a)*n,n=Math.sin(a)*n,m=Math.sin(c),v=m*g+f*d;return[Math.atan2(n*e-v*k,f*g-m*d),O(v*e+n*k)]}var g=
Math.cos(a),d=Math.sin(a),e=Math.cos(c),k=Math.sin(c);return b.invert=function(a,c){var b=Math.cos(c),n=Math.cos(a)*b,b=Math.sin(a)*b,f=Math.sin(c),m=f*e-b*k;return[Math.atan2(b*e+f*k,n*g+m*d),O(m*g-n*d)]},b}function Uc(a,c){var b=Math.cos(a),g=Math.sin(a);return function(d,e,k,n){var f=k*c;null!=d?(d=Te(b,d),e=Te(b,e),(0<k?e>d:d>e)&&(d+=k*lc)):(d=a+k*lc,e=a-0.5*f);for(var m;0<k?d>e:e>d;d-=f)n.point((m=ua([b,-g*Math.cos(d),-g*Math.sin(d)]))[0],m[1])}}function Te(a,c){var b=fb(c);b[0]-=a;Ua(b);var g=
R(-b[1]);return((0>-b[2]?-g:g)+2*Math.PI-fa)%(2*Math.PI)}function va(a,c,b){var g=E.range(a,c-fa,b).concat(c);return function(a){return g.map(function(c){return[a,c]})}}function ue(a,c,b){var g=E.range(a,c-fa,b).concat(c);return function(a){return g.map(function(c){return[c,a]})}}function Zd(a){return a.source}function ec(a){return a.target}function fc(a,c,b,g){var d=Math.cos(c),e=Math.sin(c),k=Math.cos(g),n=Math.sin(g),f=d*Math.cos(a),m=d*Math.sin(a),v=k*Math.cos(b),l=k*Math.sin(b),u=2*Math.asin(Math.sqrt(aa(g-
c)+d*k*aa(b-a))),y=1/Math.sin(u);b=u?function(a){var c=Math.sin(a*=u)*y,b=Math.sin(u-a)*y;a=b*f+c*v;var g=b*m+c*l,c=b*e+c*n;return[Math.atan2(g,a)*Ya,Math.atan2(c,Math.sqrt(a*a+g*g))*Ya]}:function(){return[a*Ya,c*Ya]};return b.distance=u,b}function Mc(a,c){function b(c,g){var d=Math.cos(c),e=Math.cos(g),d=a(d*e);return[d*e*Math.sin(c),d*Math.sin(g)]}return b.invert=function(a,b){var g=Math.sqrt(a*a+b*b),d=c(g),e=Math.sin(d),d=Math.cos(d);return[Math.atan2(a*e,g*d),Math.asin(g&&b*e/g)]},b}function Ad(a,
c){function b(a,c){var g=Ba(Ba(c)-ac)<fa?0:e/Math.pow(Math.tan(za/4+c/2),d);return[g*Math.sin(d*a),e-g*Math.cos(d*a)]}var g=Math.cos(a),d=a===c?Math.sin(a):Math.log(g/Math.cos(c))/Math.log(Math.tan(za/4+c/2)/Math.tan(za/4+a/2)),e=g*Math.pow(Math.tan(za/4+a/2),d)/d;return d?(b.invert=function(a,c){var b=e-c,g=(0<d?1:0>d?-1:0)*Math.sqrt(a*a+b*b);return[Math.atan2(a,b)/d,2*Math.atan(Math.pow(e/g,1/d))-ac]},b):gd}function rc(a,c){function b(a,c){var g=e-c;return[g*Math.sin(d*a),e-g*Math.cos(d*a)]}var g=
Math.cos(a),d=a===c?Math.sin(a):(g-Math.cos(c))/(c-a),e=g/d+a;return Ba(d)<fa?Lc:(b.invert=function(a,c){var b=e-c;return[Math.atan2(a,b)/d,e-(0<d?1:0>d?-1:0)*Math.sqrt(a*a+b*b)]},b)}function gd(a,c){return[a,Math.log(Math.tan(za/4+c/2))]}function Ue(a){var c,b=Cb(a),g=b.scale,d=b.translate,e=b.clipExtent;return b.scale=function(){var a=g.apply(b,arguments);return a===b?c?b.clipExtent(null):b:a},b.translate=function(){var a=d.apply(b,arguments);return a===b?c?b.clipExtent(null):b:a},b.clipExtent=
function(a){var k=e.apply(b,arguments);if(k===b){if(c=null==a){var n=za*g(),f=d();e([[f[0]-n,f[1]-n],[f[0]+n,f[1]+n]])}}else c&&(k=null);return k},b.clipExtent(null)}function $d(a,c){return[Math.log(Math.tan(za/4+c/2)),-a]}function hd(a){return a[0]}function ae(a){return a[1]}function be(a){for(var c=a.length,b=[0,1],g=2,d=2;c>d;d++){for(;1<g&&0>=Q(a[b[g-2]],a[b[g-1]],a[d]);)--g;b[g++]=d}return b.slice(0,g)}function ve(a,c){return a[0]-c[0]||a[1]-c[1]}function we(a,c,b){return(b[0]-c[0])*(a[1]-c[1])<
(b[1]-c[1])*(a[0]-c[0])}function Ve(a,c,b,g){var d=a[0],e=b[0],k=c[0]-d,n=g[0]-e;a=a[1];b=b[1];c=c[1]-a;g=g[1]-b;e=(n*(a-b)-g*(d-e))/(g*k-n*c);return[d+e*k,a+e*c]}function uf(a){var c=a[0];a=a[a.length-1];return!(c[0]-a[0]||c[1]-a[1])}function ce(){de(this);this.edge=this.site=this.circle=null}function yb(a){var c=Tg.pop()||new ce;return c.site=a,c}function xe(a){pb(a);ye.remove(a);Tg.push(a);de(a)}function ze(a,c){var b=a.site,g=b.x,d=b.y,e=d-c;if(!e)return g;var k=a.P;if(!k)return-1/0;var b=k.site,
k=b.x,b=b.y,n=b-c;if(!n)return k;var f=k-g,m=1/e-1/n,v=f/n;return m?(-v+Math.sqrt(v*v-2*m*(f*f/(-2*n)-b+n/2+d-e/2)))/m+g:(g+k)/2}function Bd(a){this.site=a;this.edges=[]}function We(a,c){return c.angle-a.angle}function Ha(){de(this);this.x=this.y=this.arc=this.site=this.cy=null}function Zb(a){var c=a.P,b=a.N;if(c&&b){var g=c.site,c=a.site,d=b.site;if(g!==d){var b=c.x,e=c.y,k=g.x-b,n=g.y-e,g=d.x-b,d=d.y-e,f=2*(k*d-n*g);if(!(f>=-fg)){var m=k*k+n*n,v=g*g+d*d,n=(d*m-n*v)/f,k=(k*v-g*m)/f,d=k+e,e=Ug.pop()||
new Ha;e.arc=a;e.site=c;e.x=n+b;e.y=d+Math.sqrt(n*n+k*k);e.cy=d;a.circle=e;a=null;for(c=Xe._;c;)if(e.y<c.y||e.y===c.y&&e.x<=c.x){if(!c.L){a=c.P;break}c=c.L}else{if(!c.R){a=c;break}c=c.R}Xe.insert(a,e);a||(gg=e)}}}}function pb(a){var c=a.circle;c&&(c.P||(gg=c.N),Xe.remove(c),Ug.push(c),de(c),a.circle=null)}function Tb(a,c){var b=a.b;if(b)return!0;var g,d,e=a.a,b=c[0][0],k=c[1][0],n=c[0][1],f=c[1][1],m=a.l,v=a.r,l=m.x,m=m.y,u=v.x,v=v.y;d=(l+u)/2;if(v===m){if(b>d||d>=k)return;if(l>u){if(e){if(e.y>=f)return}else e=
{x:d,y:n};b={x:d,y:f}}else{if(e){if(e.y<n)return}else e={x:d,y:f};b={x:d,y:n}}}else if(g=(l-u)/(v-m),d=(m+v)/2-g*d,-1>g||1<g)if(l>u){if(e){if(e.y>=f)return}else e={x:(n-d)/g,y:n};b={x:(f-d)/g,y:f}}else{if(e){if(e.y<n)return}else e={x:(f-d)/g,y:f};b={x:(n-d)/g,y:n}}else if(v>m){if(e){if(e.x>=k)return}else e={x:b,y:g*b+d};b={x:k,y:g*k+d}}else{if(e){if(e.x<b)return}else e={x:k,y:g*k+d};b={x:b,y:g*b+d}}return a.a=e,a.b=b,!0}function sc(a,c){this.l=a;this.r=c;this.a=this.b=null}function ee(a,c,b,g){var d=
new sc(a,c);return Ae.push(d),b&&Nc(d,a,c,b),g&&Nc(d,c,a,g),fe[a.i].edges.push(new Cd(d,a,c)),fe[c.i].edges.push(new Cd(d,c,a)),d}function Dc(a,c,b){a=new sc(a,null);return a.a=c,a.b=b,Ae.push(a),a}function Nc(a,c,b,g){a.a||a.b?a.l===b?a.b=g:a.a=g:(a.a=g,a.l=c,a.r=b)}function Cd(a,c,b){var g=a.a,d=a.b;this.edge=a;this.site=c;this.angle=b?Math.atan2(b.y-c.y,b.x-c.x):a.l===c?Math.atan2(d.x-g.x,g.y-d.y):Math.atan2(g.x-d.x,d.y-g.y)}function Ec(){this._=null}function de(a){a.U=a.C=a.L=a.R=a.P=a.N=null}
function Db(a,c){var b=c.R,g=c.U;g?g.L===c?g.L=b:g.R=b:a._=b;b.U=g;c.U=b;c.R=b.L;c.R&&(c.R.U=c);b.L=c}function Dd(a,c){var b=c.L,g=c.U;g?g.L===c?g.L=b:g.R=b:a._=b;b.U=g;c.U=b;c.L=b.R;c.L&&(c.L.U=c);b.R=c}function nc(a){for(;a.L;)a=a.L;return a}function Be(a,c){var b,g,d,e=a.sort(Ce).pop();Ae=[];fe=Array(a.length);ye=new Ec;for(Xe=new Ec;;)if(d=gg,e&&(!d||e.y<d.y||e.y===d.y&&e.x<d.x)){if(e.x!==b||e.y!==g){fe[e.i]=new Bd(e);b=e;for(var k=g=void 0,n=void 0,f=void 0,m=b.x,v=b.y,l=ye._;l;)if(n=ze(l,v)-
m,n>fa)l=l.L;else{var u=m,y;var p=l;y=v;var z=p.N;z?y=ze(z,y):(p=p.site,y=p.y===y?p.x:1/0);if(f=u-y,!(f>fa)){n>-fa?(g=l.P,k=l):f>-fa?(g=l,k=l.N):g=k=l;break}if(!l.R){g=l;break}l=l.R}n=yb(b);if(ye.insert(g,n),g||k)if(g===k)pb(g),k=yb(g.site),ye.insert(n,k),n.edge=k.edge=ee(g.site,n.site),Zb(g),Zb(k);else if(k){pb(g);pb(k);f=g.site;v=f.x;l=f.y;u=b.x-v;y=b.y-l;var m=k.site,p=m.x-v,z=m.y-l,A=2*(u*z-y*p),U=u*u+y*y,C=p*p+z*z,v={x:(z*U-y*C)/A+v,y:(u*C-p*U)/A+l};Nc(k.edge,f,m,v);n.edge=ee(f,b,null,v);k.edge=
ee(b,m,null,v);Zb(g);Zb(k)}else n.edge=ee(g.site,n.site);b=e.x;g=e.y}e=a.pop()}else{if(!d)break;m=d.arc;k=m.circle;f=k.x;v=k.cy;k={x:f,y:v};u=m.P;l=m.N;n=[m];xe(m);for(m=u;m.circle&&Ba(f-m.circle.x)<fa&&Ba(v-m.circle.cy)<fa;)u=m.P,n.unshift(m),xe(m),m=u;n.unshift(m);pb(m);for(u=l;u.circle&&Ba(f-u.circle.x)<fa&&Ba(v-u.circle.cy)<fa;)l=u.N,n.push(u),xe(u),u=l;n.push(u);pb(u);f=void 0;v=n.length;for(f=1;v>f;++f)u=n[f],m=n[f-1],Nc(u.edge,m.site,u.site,k);m=n[0];u=n[v-1];u.edge=ee(m.site,u.site,null,k);
Zb(m);Zb(u)}if(c){e=Ae;b=sd(c[0][0],c[0][1],c[1][0],c[1][1]);for(g=e.length;g--;)d=e[g],(!Tb(d,c)||!b(d)||Ba(d.a.x-d.b.x)<fa&&Ba(d.a.y-d.b.y)<fa)&&(d.a=d.b=null,e.splice(g,1));var B,m=c[0][0],v=c[1][0],l=c[0][1],u=c[1][1];y=fe;for(p=y.length;p--;)if(B=y[p],B&&B.prepare())for(k=B.edges,n=k.length,g=0;n>g;)f=k[g].end(),e=f.x,b=f.y,z=k[++g%n].start(),d=z.x,z=z.y,(Ba(e-d)>fa||Ba(b-z)>fa)&&(k.splice(g,0,new Cd(Dc(B.site,f,Ba(e-m)<fa&&u-b>fa?{x:m,y:Ba(d-m)<fa?z:u}:Ba(b-u)<fa&&v-e>fa?{x:Ba(z-u)<fa?d:v,y:u}:
Ba(e-v)<fa&&b-l>fa?{x:v,y:Ba(d-v)<fa?z:l}:Ba(b-l)<fa&&e-m>fa?{x:Ba(z-l)<fa?d:m,y:l}:null),B.site,null)),++n)}B={cells:fe,edges:Ae};return ye=Xe=Ae=fe=null,B}function Ce(a,c){return c.y-a.y||c.x-a.x}function vf(a){return a.x}function tc(a){return a.y}function Ed(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Fd(a,c,b,g,d,e){if(!a(c,b,g,d,e)){var k=0.5*(b+d),n=0.5*(g+e);c=c.nodes;c[0]&&Fd(a,c[0],b,g,k,n);c[1]&&Fd(a,c[1],k,g,d,n);c[2]&&Fd(a,c[2],b,n,k,e);c[3]&&Fd(a,c[3],k,n,d,e)}}function Gd(a,
c){a=E.rgb(a);c=E.rgb(c);var b=a.r,g=a.g,d=a.b,e=c.r-b,k=c.g-g,n=c.b-d;return function(a){return"#"+Ia(Math.round(b+e*a))+Ia(Math.round(g+k*a))+Ia(Math.round(d+n*a))}}function sa(a,c){var b,g={},d={};for(b in a)b in c?g[b]=Vc(a[b],c[b]):d[b]=a[b];for(b in c)b in a||(d[b]=c[b]);return function(a){for(b in g)d[b]=g[b](a);return d}}function gc(a,c){return c-=a=+a,function(b){return a+c*b}}function uc(a,c){var b,g,d,e,k=0,n=[],f=[];a+="";c+="";for(g=wf.lastIndex=0;b=wf.exec(c);++g)b.index&&n.push(c.substring(k,
b.index)),f.push({i:n.length,x:b[0]}),n.push(null),k=wf.lastIndex;k<c.length&&n.push(c.substring(k));g=0;for(d=f.length;(b=wf.exec(a))&&d>g;++g)if(e=f[g],e.x==b[0]){if(e.i)if(null==n[e.i+1])for(n[e.i-1]+=e.x,n.splice(e.i,1),b=g+1;d>b;++b)f[b].i--;else for(n[e.i-1]+=e.x+n[e.i+1],n.splice(e.i,2),b=g+1;d>b;++b)f[b].i-=2;else if(null==n[e.i+1])n[e.i]=e.x;else for(n[e.i]=e.x+n[e.i+1],n.splice(e.i+1,1),b=g+1;d>b;++b)f[b].i--;f.splice(g,1);d--;g--}else e.x=gc(parseFloat(b[0]),parseFloat(e.x));for(;d>g;)e=
f.pop(),null==n[e.i+1]?n[e.i]=e.x:(n[e.i]=e.x+n[e.i+1],n.splice(e.i+1,1)),d--;return 1===n.length?null==n[0]?(e=f[0].x,function(a){return e(a)+""}):function(){return c}:function(a){for(g=0;d>g;++g)n[(e=f[g]).i]=e.x(a);return n.join("")}}function Vc(a,c){for(var b,g=E.interpolators.length;0<=--g&&!(b=E.interpolators[g](a,c)););return b}function hb(a,c){var b,g=[],d=[],e=a.length,k=c.length,n=Math.min(a.length,c.length);for(b=0;n>b;++b)g.push(Vc(a[b],c[b]));for(;e>b;++b)d[b]=a[b];for(;k>b;++b)d[b]=
c[b];return function(a){for(b=0;n>b;++b)d[b]=g[b](a);return d}}function ge(a){return function(c){return 0>=c?0:1<=c?1:a(c)}}function Hd(a){return function(c){return 1-a(1-c)}}function Id(a){return function(c){return 0.5*(0.5>c?a(2*c):2-a(2-2*c))}}function hg(a){return a*a}function Ye(a){return a*a*a}function Ze(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,b=c*a;return 4*(0.5>a?b:3*(a-c)+b-0.75)}function De(a){return 1-Math.cos(a*ac)}function Ee(a){return Math.pow(2,10*(a-1))}function xf(a){return 1-
Math.sqrt(1-a*a)}function ig(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Fe(a,c){return c-=a,function(b){return Math.round(a+c*b)}}function Ge(a){var c=[a.a,a.b],b=[a.c,a.d],g=He(c),d=c[0]*b[0]+c[1]*b[1],e;e=-d;e=(b[0]+=e*c[0],b[1]+=e*c[1],b);e=He(e)||0;c[0]*b[1]<b[0]*c[1]&&(c[0]*=-1,c[1]*=-1,g*=-1,d*=-1);this.rotate=(g?Math.atan2(c[1],c[0]):Math.atan2(-b[0],b[1]))*Ya;this.translate=[a.e,a.f];
this.scale=[g,e];this.skew=e?Math.atan2(d,e)*Ya:0}function He(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return c&&(a[0]/=c,a[1]/=c),c}function $e(a,c){var b,g=[],d=[],e=E.transform(a),k=E.transform(c),n=e.translate,f=k.translate,m=e.rotate,v=k.rotate,l=e.skew,u=k.skew,e=e.scale,k=k.scale;return n[0]!=f[0]||n[1]!=f[1]?(g.push("translate(",null,",",null,")"),d.push({i:1,x:gc(n[0],f[0])},{i:3,x:gc(n[1],f[1])})):f[0]||f[1]?g.push("translate("+f+")"):g.push(""),m!=v?(180<m-v?v+=360:180<v-m&&(m+=360),d.push({i:g.push(g.pop()+
"rotate(",null,")")-2,x:gc(m,v)})):v&&g.push(g.pop()+"rotate("+v+")"),l!=u?d.push({i:g.push(g.pop()+"skewX(",null,")")-2,x:gc(l,u)}):u&&g.push(g.pop()+"skewX("+u+")"),e[0]!=k[0]||e[1]!=k[1]?(b=g.push(g.pop()+"scale(",null,",",null,")"),d.push({i:b-4,x:gc(e[0],k[0])},{i:b-2,x:gc(e[1],k[1])})):(1!=k[0]||1!=k[1])&&g.push(g.pop()+"scale("+k+")"),b=d.length,function(a){for(var c,e=-1;++e<b;)g[(c=d[e]).i]=c.x(a);return g.join("")}}function Jd(a,c){return c=c-(a=+a)?1/(c-a):0,function(b){return(b-a)*c}}
function Ub(a,c){return c=c-(a=+a)?1/(c-a):0,function(b){return Math.max(0,Math.min(1,(b-a)*c))}}function Kd(a){var c=a.source;a=a.target;var b;var g=a;if(c===g)b=c;else{b=Vb(c);for(var g=Vb(g),d=b.pop(),e=g.pop(),k=null;d===e;)k=d,d=b.pop(),e=g.pop();b=k}for(g=[c];c!==b;)c=c.parent,g.push(c);for(c=g.length;a!==b;)g.splice(c,0,a),a=a.parent;return g}function Vb(a){for(var c=[],b=a.parent;null!=b;)c.push(a),a=b,b=b.parent;return c.push(a),c}function jg(a){a.fixed|=2}function Wc(a){a.fixed&=-7}function Mb(a){a.fixed|=
4;a.px=a.x;a.py=a.y}function kg(a){a.fixed&=-5}function yf(a,c,b){var g=0,d=0;if(a.charge=0,!a.leaf)for(var e,k=a.nodes,n=k.length,f=-1;++f<n;)e=k[f],null!=e&&(yf(e,c,b),a.charge+=e.charge,g+=e.charge*e.cx,d+=e.charge*e.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),c*=b[a.point.index],a.charge+=a.pointCharge=c,g+=c*a.point.x,d+=c*a.point.y);a.cx=g/a.charge;a.cy=d/a.charge}function Wb(a,c){return E.rebind(a,c,"sort","children","value"),a.nodes=a,a.links=lg,a}function af(a){return a.children}
function bf(a){return a.value}function mg(a,c){return c.value-a.value}function lg(a){return E.merge(a.map(function(a){return(a.children||[]).map(function(c){return{source:a,target:c}})}))}function ng(a){return a.x}function he(a){return a.y}function cf(a,c,b){a.y0=c;a.y=b}function Xc(a){return E.range(a.length)}function df(a){var c=-1;a=a[0].length;for(var b=[];++c<a;)b[c]=0;return b}function id(a){for(var c,b=1,g=0,d=a[0][1],e=a.length;e>b;++b)(c=a[b][1])>d&&(g=b,d=c);return g}function zf(a){return a.reduce(ef,
0)}function ef(a,c){return a+c[1]}function Af(a,c){return jd(a,Math.ceil(Math.log(c.length)/Math.LN2+1))}function jd(a,c){for(var b=-1,g=+a[0],d=(a[1]-g)/c,e=[];++b<=c;)e[b]=d*b+g;return e}function kd(a){return[E.min(a),E.max(a)]}function Bf(a,c){return a.parent==c.parent?1:2}function Ld(a){var c=a.children;return c&&c.length?c[0]:a._tree.thread}function Md(a){var c,b=a.children;return b&&(c=b.length)?b[c-1]:a._tree.thread}function ie(a,c){var b=a.children;if(b&&(d=b.length))for(var g,d,e=-1;++e<
d;)0<c(g=ie(b[e],c),a)&&(a=g);return a}function Ie(a,c){return a.x-c.x}function vc(a,c){return c.x-a.x}function Cf(a,c){return a.depth-c.depth}function wc(a,c){function b(a,g){var d=a.children;if(d&&(k=d.length))for(var e,k,n=null,f=-1;++f<k;)e=d[f],b(e,n),n=e;c(a,g)}b(a,null)}function ff(a,c){return a.value-c.value}function je(a,c){var b=a._pack_next;a._pack_next=c;c._pack_prev=a;c._pack_next=b;b._pack_prev=c}function ld(a,c){a._pack_next=c;c._pack_prev=a}function Je(a,c){var b=c.x-a.x,g=c.y-a.y,
d=a.r+c.r;return 0.999*d*d>b*b+g*g}function gf(a){function c(a){v=Math.min(a.x-a.r,v);l=Math.max(a.x+a.r,l);u=Math.min(a.y-a.r,u);y=Math.max(a.y+a.r,y)}if((b=a.children)&&(m=b.length)){var b,g,d,e,k,n,f,m,v=1/0,l=-1/0,u=1/0,y=-1/0;if(b.forEach(Df),g=b[0],g.x=-g.r,g.y=0,c(g),1<m&&(d=b[1],d.x=d.r,d.y=0,c(d),2<m))for(e=b[2],Ke(g,d,e),c(e),je(g,e),g._pack_prev=e,je(e,d),d=g._pack_next,k=3;m>k;k++){Ke(g,d,e=b[k]);var p=0,z=1,A=1;for(n=d._pack_next;n!==d;n=n._pack_next,z++)if(Je(n,e)){p=1;break}if(1==p)for(f=
g._pack_prev;f!==n._pack_prev&&!Je(f,e);f=f._pack_prev,A++);p?(A>z||z==A&&d.r<g.r?ld(g,d=n):ld(g=f,d),k--):(je(g,e),d=e,c(e))}g=(v+l)/2;d=(u+y)/2;for(k=n=0;m>k;k++)e=b[k],e.x-=g,e.y-=d,n=Math.max(n,e.r+Math.sqrt(e.x*e.x+e.y*e.y));a.r=n;b.forEach(ke)}}function Df(a){a._pack_next=a._pack_prev=a}function ke(a){delete a._pack_next;delete a._pack_prev}function Nd(a,c,b,g){var d=a.children;if(a.x=c+=g*a.x,a.y=b+=g*a.y,a.r*=g,d){a=-1;for(var e=d.length;++a<e;)Nd(d[a],c,b,g)}}function Ke(a,c,b){var g=a.r+
b.r,d=c.x-a.x,e=c.y-a.y;if(g&&(d||e)){var k=c.r+b.r,n=d*d+e*e,k=k*k,g=g*g;c=0.5+(g-k)/(2*n);k=Math.sqrt(Math.max(0,2*k*(g+n)-(g-=n)*g-k*k))/(2*n);b.x=a.x+c*d+k*e;b.y=a.y+c*e-k*d}else b.x=a.x+g,b.y=a.y}function md(a){return 1+E.max(a,function(a){return a.y})}function Le(a){return a.reduce(function(a,c){return a+c.x},0)/a.length}function Fc(a){var c=a.children;return c&&c.length?Fc(c[0]):a}function Ef(a){var c,b=a.children;return b&&(c=b.length)?Ef(b[c-1]):a}function Od(a){return{x:a.x,y:a.y,dx:a.dx,
dy:a.dy}}function Oc(a,c){var b=a.x+c[3],g=a.y+c[0],d=a.dx-c[1]-c[3],e=a.dy-c[0]-c[2];return 0>d&&(b+=d/2,d=0),0>e&&(g+=e/2,e=0),{x:b,y:g,dx:d,dy:e}}function Pd(a){var c=a[0];a=a[a.length-1];return a>c?[c,a]:[a,c]}function Me(a){return a.rangeExtent?a.rangeExtent():Pd(a.range())}function og(a,c,b,g){var d=b(a[0],a[1]),e=g(c[0],c[1]);return function(a){return e(d(a))}}function Hb(a,c){var b,g=0,d=a.length-1,e=a[g],k=a[d];return e>k&&(b=g,g=d,d=b,b=e,e=k,k=b),a[g]=c.floor(e),a[d]=c.ceil(k),a}function Ff(a){return a?
{floor:function(c){return Math.floor(c/a)*a},ceil:function(c){return Math.ceil(c/a)*a}}:Bh}function le(a,c,b,g){var d=[],e=[],k=0,n=Math.min(a.length,c.length)-1;for(a[n]<a[0]&&(a=a.slice().reverse(),c=c.slice().reverse());++k<=n;)d.push(b(a[k-1],a[k])),e.push(g(c[k-1],c[k]));return function(c){var b=E.bisect(a,c,1,n)-1;return e[b](d[b](c))}}function Pc(a,c,b,g){function d(){var f=2<Math.min(a.length,c.length)?le:og,m=g?Ub:Jd;return k=f(a,c,m,b),n=f(c,a,m,Vc),e}function e(a){return k(a)}var k,n;return e.invert=
function(a){return n(a)},e.domain=function(c){return arguments.length?(a=c.map(Number),d()):a},e.range=function(a){return arguments.length?(c=a,d()):c},e.rangeRound=function(a){return e.range(a).interpolate(Fe)},e.clamp=function(a){return arguments.length?(g=a,d()):g},e.interpolate=function(a){return arguments.length?(b=a,d()):b},e.ticks=function(c){return E.range.apply(E,$b(a,c))},e.tickFormat=function(c,b){return Ne(a,c,b)},e.nice=function(c){return Hb(a,Ff($b(a,c)[2])),d()},e.copy=function(){return Pc(a,
c,b,g)},d()}function Qd(a,c){return E.rebind(a,c,"range","rangeRound","interpolate","clamp")}function $b(a,c){null==c&&(c=10);var b=Pd(a),g=b[1]-b[0],d=Math.pow(10,Math.floor(Math.log(g/c)/Math.LN10)),g=c/g*d;return 0.15>=g?d*=10:0.35>=g?d*=5:0.75>=g&&(d*=2),b[0]=Math.ceil(b[0]/d)*d,b[1]=Math.floor(b[1]/d)*d+0.5*d,b[2]=d,b}function Ne(a,c,b){var g=$b(a,c);return E.format(b?b.replace(Og,function(a,c,b,d,e,k,n,f,m,v){return[c,b,d,e,k,n,f,m||"."+pg(v,g),v].join("")}):",."+Rd(g[2])+"f")}function Rd(a){return-Math.floor(Math.log(a)/
Math.LN10+0.01)}function pg(a,c){var b=Rd(c[2]);return a in Ch?Math.abs(b-Rd(Math.max(Math.abs(c[0]),Math.abs(c[1]))))+ +("e"!==a):b-2*("%"===a)}function Gf(a,c,b,g){function d(a){return(b?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(c)}function e(a){return b?Math.pow(c,a):-Math.pow(c,-a)}function k(c){return a(d(c))}return k.invert=function(c){return e(a.invert(c))},k.domain=function(c){return arguments.length?(b=0<=c[0],a.domain((g=c.map(Number)).map(d)),k):g},k.base=function(b){return arguments.length?
(c=+b,a.domain(g.map(d)),k):c},k.nice=function(){var c=Hb(g.map(d),b?Math:Dh);return a.domain(c),g=c.map(e),k},k.ticks=function(){var a=Pd(g),k=[],n=a[0],a=a[1],f=Math.floor(d(n)),m=Math.ceil(d(a)),v=c%1?2:c;if(isFinite(m-f)){if(b){for(;m>f;f++)for(var l=1;v>l;l++)k.push(e(f)*l);k.push(e(f))}else for(k.push(e(f));f++<m;)for(l=v-1;0<l;l--)k.push(e(f)*l);for(f=0;k[f]<n;f++);for(m=k.length;k[m-1]>a;m--);k=k.slice(f,m)}return k},k.tickFormat=function(a,c){if(!arguments.length)return Vg;2>arguments.length?
c=Vg:"function"!=typeof c&&(c=E.format(c));var g,n=Math.max(0.1,a/k.ticks().length),f=b?(g=1E-12,Math.ceil):(g=-1E-12,Math.floor);return function(a){return a/e(f(d(a)+g))<=n?c(a):""}},k.copy=function(){return Gf(a.copy(),c,b,g)},Qd(k,a)}function Hf(a,c,b){function g(c){return a(d(c))}var d=Yc(c),e=Yc(1/c);return g.invert=function(c){return e(a.invert(c))},g.domain=function(c){return arguments.length?(a.domain((b=c.map(Number)).map(d)),g):b},g.ticks=function(a){return E.range.apply(E,$b(b,a))},g.tickFormat=
function(a,c){return Ne(b,a,c)},g.nice=function(a){return g.domain(Hb(b,Ff($b(b,a)[2])))},g.exponent=function(k){return arguments.length?(d=Yc(c=k),e=Yc(1/c),a.domain(b.map(d)),g):c},g.copy=function(){return Hf(a.copy(),c,b)},Qd(g,a)}function Yc(a){return function(c){return 0>c?-Math.pow(-c,a):Math.pow(c,a)}}function Oe(a,c){function b(g){return e[((d.get(g)||"range"===c.t&&d.set(g,a.push(g)))-1)%e.length]}function g(c,b){return E.range(a.length).map(function(a){return c+b*a})}var d,e,k;return b.domain=
function(g){if(!arguments.length)return a;a=[];d=new s;for(var e,k=-1,n=g.length;++k<n;)d.has(e=g[k])||d.set(e,a.push(e));return b[c.t].apply(b,c.a)},b.range=function(a){return arguments.length?(e=a,k=0,c={t:"range",a:arguments},b):e},b.rangePoints=function(d,n){2>arguments.length&&(n=0);var f=d[0],m=d[1],v=(m-f)/(Math.max(1,a.length-1)+n);return e=g(2>a.length?(f+m)/2:f+v*n/2,v),k=0,c={t:"rangePoints",a:arguments},b},b.rangeBands=function(d,n,f){2>arguments.length&&(n=0);3>arguments.length&&(f=n);
var m=d[1]<d[0],v=d[m-0],l=(d[1-m]-v)/(a.length-n+2*f);return e=g(v+l*f,l),m&&e.reverse(),k=l*(1-n),c={t:"rangeBands",a:arguments},b},b.rangeRoundBands=function(d,n,f){2>arguments.length&&(n=0);3>arguments.length&&(f=n);var m=d[1]<d[0],v=d[m-0],l=d[1-m],u=Math.floor((l-v)/(a.length-n+2*f));return e=g(v+Math.round((l-v-(a.length-n)*u)/2),u),m&&e.reverse(),k=Math.round(u*(1-n)),c={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return k},b.rangeExtent=function(){return Pd(c.a[0])},b.copy=
function(){return Oe(a,c)},b.domain(a)}function Zc(a,c){function b(){var e=0,k=c.length;for(d=[];++e<k;)d[e-1]=E.quantile(a,e/k);return g}function g(a){return isNaN(a=+a)?void 0:c[E.bisect(d,a)]}var d;return g.domain=function(c){return arguments.length?(a=c.filter(function(a){return!isNaN(a)}).sort(E.ascending),b()):a},g.range=function(a){return arguments.length?(c=a,b()):c},g.quantiles=function(){return d},g.invertExtent=function(b){return b=c.indexOf(b),0>b?[0/0,0/0]:[0<b?d[b-1]:a[0],b<d.length?
d[b]:a[a.length-1]]},g.copy=function(){return Zc(a,c)},b()}function If(a,c,b){function g(c){return b[Math.max(0,Math.min(k,Math.floor(e*(c-a))))]}function d(){return e=b.length/(c-a),k=b.length-1,g}var e,k;return g.domain=function(b){return arguments.length?(a=+b[0],c=+b[b.length-1],d()):[a,c]},g.range=function(a){return arguments.length?(b=a,d()):b},g.invertExtent=function(c){return c=b.indexOf(c),c=0>c?0/0:c/e+a,[c,c+1/e]},g.copy=function(){return If(a,c,b)},d()}function hf(a,c){function b(g){return g>=
g?c[E.bisect(a,g)]:void 0}return b.domain=function(c){return arguments.length?(a=c,b):a},b.range=function(a){return arguments.length?(c=a,b):c},b.invertExtent=function(b){return b=c.indexOf(b),[a[b-1],a[b]]},b.copy=function(){return hf(a,c)},b}function Qc(a){function c(a){return+a}return c.invert=c,c.domain=c.range=function(b){return arguments.length?(a=b.map(c),c):a},c.ticks=function(c){return E.range.apply(E,$b(a,c))},c.tickFormat=function(c,b){return Ne(a,c,b)},c.copy=function(){return Qc(a)},
c}function me(a){return a.innerRadius}function qg(a){return a.outerRadius}function U(a){return a.startAngle}function X(a){return a.endAngle}function Ib(a){function c(k){function f(){v.push("M",e(a(l),n))}for(var m,v=[],l=[],u=-1,y=k.length,p=ta(b),z=ta(g);++u<y;)d.call(this,m=k[u],u)?l.push([+p.call(this,m,u),+z.call(this,m,u)]):l.length&&(f(),l=[]);return l.length&&f(),v.length?v.join(""):null}var b=hd,g=ae,d=Yb,e=xc,k=e.key,n=0.7;return c.x=function(a){return arguments.length?(b=a,c):b},c.y=function(a){return arguments.length?
(g=a,c):g},c.defined=function(a){return arguments.length?(d=a,c):d},c.interpolate=function(a){return arguments.length?(k="function"==typeof a?e=a:(e=rg.get(a)||xc).key,c):k},c.tension=function(a){return arguments.length?(n=a,c):n},c}function xc(a){return a.join("L")}function sg(a){for(var c=0,b=a.length,g=a[0],d=[g[0],",",g[1]];++c<b;)d.push("V",(g=a[c])[1],"H",g[0]);return d.join("")}function tg(a){for(var c=0,b=a.length,g=a[0],d=[g[0],",",g[1]];++c<b;)d.push("H",(g=a[c])[0],"V",g[1]);return d.join("")}
function Jf(a,c){if(1>c.length||a.length!=c.length&&a.length!=c.length+2)return xc(a);var b=a.length!=c.length,g="",d=a[0],e=a[1],k=c[0],n=k,f=1;if(b&&(g+="Q"+(e[0]-2*k[0]/3)+","+(e[1]-2*k[1]/3)+","+e[0]+","+e[1],d=a[1],f=2),1<c.length)for(n=c[1],e=a[f],f++,g+="C"+(d[0]+k[0])+","+(d[1]+k[1])+","+(e[0]-n[0])+","+(e[1]-n[1])+","+e[0]+","+e[1],d=2;d<c.length;d++,f++)e=a[f],n=c[d],g+="S"+(e[0]-n[0])+","+(e[1]-n[1])+","+e[0]+","+e[1];b&&(b=a[f],g+="Q"+(e[0]+2*n[0]/3)+","+(e[1]+2*n[1]/3)+","+b[0]+","+b[1]);
return g}function ug(a,c){for(var b,g=[],d=(1-c)/2,e=a[0],k=a[1],n=1,f=a.length;++n<f;)b=e,e=k,k=a[n],g.push([d*(k[0]-b[0]),d*(k[1]-b[1])]);return g}function Wg(a){if(3>a.length)return xc(a);var c=1,b=a.length,g=a[0],d=g[0],e=g[1],k=[d,d,d,(g=a[1])[0]],n=[e,e,e,g[1]],d=[d,",",e,"L",Gc(Sd,k),",",Gc(Sd,n)];for(a.push(a[b-1]);++c<=b;)g=a[c],k.shift(),k.push(g[0]),n.shift(),n.push(g[1]),vg(d,k,n);return a.pop(),d.push("L",g),d.join("")}function Gc(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]}function vg(a,
c,b){a.push("C",Gc(Xg,c),",",Gc(Xg,b),",",Gc(Yg,c),",",Gc(Yg,b),",",Gc(Sd,c),",",Gc(Sd,b))}function wg(a,c){return(c[1]-a[1])/(c[0]-a[0])}function Zg(a){for(var c,b,g,d=-1,e=a.length;++d<e;)c=a[d],b=c[0],g=c[1]+ne,c[0]=b*Math.cos(g),c[1]=b*Math.sin(g);return a}function $g(a){function c(f){function u(){A.push("M",n(a(C),l),v,m(a(U.reverse()),l),"Z")}for(var y,p,z,A=[],U=[],C=[],B=-1,D=f.length,G=ta(b),J=ta(d),X=b===g?function(){return p}:ta(g),F=d===e?function(){return z}:ta(e);++B<D;)k.call(this,
y=f[B],B)?(U.push([p=+G.call(this,y,B),z=+J.call(this,y,B)]),C.push([+X.call(this,y,B),+F.call(this,y,B)])):U.length&&(u(),U=[],C=[]);return U.length&&u(),A.length?A.join(""):null}var b=hd,g=hd,d=0,e=ae,k=Yb,n=xc,f=n.key,m=n,v="L",l=0.7;return c.x=function(a){return arguments.length?(b=g=a,c):g},c.x0=function(a){return arguments.length?(b=a,c):b},c.x1=function(a){return arguments.length?(g=a,c):g},c.y=function(a){return arguments.length?(d=e=a,c):e},c.y0=function(a){return arguments.length?(d=a,c):
d},c.y1=function(a){return arguments.length?(e=a,c):e},c.defined=function(a){return arguments.length?(k=a,c):k},c.interpolate=function(a){return arguments.length?(f="function"==typeof a?n=a:(n=rg.get(a)||xc).key,m=n.reverse||n,v=n.closed?"M":"L",c):f},c.tension=function(a){return arguments.length?(l=a,c):l},c}function Eh(a){return a.radius}function ah(a){return[a.x,a.y]}function Fh(a){return function(){var c=a.apply(this,arguments),b=c[0],c=c[1]+ne;return[b*Math.cos(c),b*Math.sin(c)]}}function Gh(){return 64}
function Hh(){return"circle"}function bh(a){a=Math.sqrt(a/za);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function jf(a,c){return lf(a,zb),a.id=c,a}function xg(a,c,b,g){var d=a.id;return K(a,"function"==typeof b?function(a,e,k){a.__transition__[d].tween.set(c,g(b.call(a,a.__data__,e,k)))}:(b=g(b),function(a){a.__transition__[d].tween.set(c,b)}))}function Ih(a){return null==a&&(a=""),function(){this.textContent=a}}function Kf(a,c,b,g){var d=a.__transition__||(a.__transition__=
{active:0,count:0}),e=d[b];if(!e){var k=g.time,e=d[b]={tween:new s,time:k,ease:g.ease,delay:g.delay,duration:g.duration};++d.count;E.timer(function(g){function n(g){return d.active>b?m():(d.active=b,e.event&&e.event.start.call(a,v,c),e.tween.forEach(function(b,g){(g=g.call(a,v,c))&&z.push(g)}),E.timer(function(){return p.c=f(g||1)?Yb:f,1},0,k),void 0)}function f(g){if(d.active!==b)return m();g/=y;for(var k=l(g),n=z.length;0<n;)z[--n].call(a,k);return 1<=g?(e.event&&e.event.end.call(a,v,c),m()):void 0}
function m(){return--d.count?delete d[b]:delete a.__transition__,1}var v=a.__data__,l=e.ease,u=e.delay,y=e.duration,p=ad,z=[];return p.t=u+k,g>=u?n(g-u):(p.c=n,void 0)},0,k)}}function ch(a,c){a.attr("transform",function(a){return"translate("+c(a)+",0)"})}function dh(a,c){a.attr("transform",function(a){return"translate(0,"+c(a)+")"})}function yg(a){return a.toISOString()}function zg(a,c,b){function g(c){return a(c)}function d(a,b){var g=(a[1]-a[0])/b,e=E.bisect(Lf,g);return e==Lf.length?[c.year,$b(a.map(function(a){return a/
31536E6}),b)[2]]:e?c[g/Lf[e-1]<Lf[e]/g?e-1:e]:[Jh,$b(a,b)[2]]}return g.invert=function(c){return oe(a.invert(c))},g.domain=function(c){return arguments.length?(a.domain(c),g):a.domain().map(oe)},g.nice=function(a,c){function b(g){return!isNaN(g)&&!a.range(g,oe(+g+1),c).length}var e=g.domain(),k=Pd(e),k=null==a?d(k,10):"number"==typeof a&&d(k,a);return k&&(a=k[0],c=k[1]),g.domain(Hb(e,1<c?{floor:function(c){for(;b(c=a.floor(c));)c=oe(c-1);return c},ceil:function(c){for(;b(c=a.ceil(c));)c=oe(+c+1);
return c}}:a))},g.ticks=function(a,c){var b=Pd(g.domain()),e=null==a?d(b,10):"number"==typeof a?d(b,a):!a.range&&[{range:a},c];return e&&(a=e[0],c=e[1]),a.range(b[0],oe(+b[1]+1),1>c?1:c)},g.tickFormat=function(){return b},g.copy=function(){return zg(a.copy(),c,b)},Qd(g,a)}function oe(a){return new Date(a)}function Kh(a){return JSON.parse(a.responseText)}function Lh(a){var c=Rc.createRange();return c.selectNode(Rc.body),c.createContextualFragment(a.responseText)}var E={version:"3.4.1"};Date.now||(Date.now=
function(){return+new Date});var eh=[].slice,od=function(a){return eh.call(a)},Rc=document,pd=Rc.documentElement,Nb=window;try{od(pd.childNodes)[0].nodeType}catch(ki){od=function(a){for(var c=a.length,b=Array(c);c--;)b[c]=a[c];return b}}try{Rc.createElement("div").style.setProperty("opacity",0,"")}catch(li){var Mf=Nb.Element.prototype,Mh=Mf.setAttribute,Nh=Mf.setAttributeNS,fh=Nb.CSSStyleDeclaration.prototype,Oh=fh.setProperty;Mf.setAttribute=function(a,c){Mh.call(this,a,c+"")};Mf.setAttributeNS=
function(a,c,b){Nh.call(this,a,c,b+"")};fh.setProperty=function(a,c,b){Oh.call(this,a,c+"",b)}}E.ascending=function(a,c){return c>a?-1:a>c?1:a>=c?0:0/0};E.descending=function(a,c){return a>c?-1:c>a?1:c>=a?0:0/0};E.min=function(a,c){var b,g,d=-1,e=a.length;if(1===arguments.length){for(;++d<e&&!(null!=(b=a[d])&&b>=b);)b=void 0;for(;++d<e;)null!=(g=a[d])&&b>g&&(b=g)}else{for(;++d<e&&!(null!=(b=c.call(a,a[d],d))&&b>=b);)b=void 0;for(;++d<e;)null!=(g=c.call(a,a[d],d))&&b>g&&(b=g)}return b};E.max=function(a,
c){var b,g,d=-1,e=a.length;if(1===arguments.length){for(;++d<e&&!(null!=(b=a[d])&&b>=b);)b=void 0;for(;++d<e;)null!=(g=a[d])&&g>b&&(b=g)}else{for(;++d<e&&!(null!=(b=c.call(a,a[d],d))&&b>=b);)b=void 0;for(;++d<e;)null!=(g=c.call(a,a[d],d))&&g>b&&(b=g)}return b};E.extent=function(a,c){var b,g,d,e=-1,k=a.length;if(1===arguments.length){for(;++e<k&&!(null!=(b=d=a[e])&&b>=b);)b=d=void 0;for(;++e<k;)null!=(g=a[e])&&(b>g&&(b=g),g>d&&(d=g))}else{for(;++e<k&&!(null!=(b=d=c.call(a,a[e],e))&&b>=b);)b=void 0;
for(;++e<k;)null!=(g=c.call(a,a[e],e))&&(b>g&&(b=g),g>d&&(d=g))}return[b,d]};E.sum=function(a,c){var b,g=0,d=a.length,e=-1;if(1===arguments.length)for(;++e<d;)isNaN(b=+a[e])||(g+=b);else for(;++e<d;)isNaN(b=+c.call(a,a[e],e))||(g+=b);return g};E.mean=function(a,c){var b,g=a.length,d=0,e=-1,k=0;if(1===arguments.length)for(;++e<g;)q(b=a[e])&&(d+=(b-d)/++k);else for(;++e<g;)q(b=c.call(a,a[e],e))&&(d+=(b-d)/++k);return k?d:void 0};E.quantile=function(a,c){var b=(a.length-1)*c+1,g=Math.floor(b),d=+a[g-
1];return(b-=g)?d+b*(a[g]-d):d};E.median=function(a,c){return 1<arguments.length&&(a=a.map(c)),a=a.filter(q),a.length?E.quantile(a.sort(E.ascending),0.5):void 0};E.bisector=function(a){return{left:function(c,b,g,d){3>arguments.length&&(g=0);for(4>arguments.length&&(d=c.length);d>g;){var e=g+d>>>1;a.call(c,c[e],e)<b?g=e+1:d=e}return g},right:function(c,b,g,d){3>arguments.length&&(g=0);for(4>arguments.length&&(d=c.length);d>g;){var e=g+d>>>1;b<a.call(c,c[e],e)?d=e:g=e+1}return g}}};var gh=E.bisector(function(a){return a});
E.bisectLeft=gh.left;E.bisect=E.bisectRight=gh.right;E.shuffle=function(a){for(var c,b,g=a.length;g;)b=0|Math.random()*g--,c=a[g],a[g]=a[b],a[b]=c;return a};E.permute=function(a,c){for(var b=c.length,g=Array(b);b--;)g[b]=a[c[b]];return g};E.pairs=function(a){for(var c=0,b=a.length-1,g=a[0],d=Array(0>b?0:b);b>c;)d[c]=[g,g=a[++c]];return d};E.zip=function(){if(!(g=arguments.length))return[];for(var a=-1,c=E.min(arguments,t),b=Array(c);++a<c;)for(var g,d=-1,e=b[a]=Array(g);++d<g;)e[d]=arguments[d][a];
return b};E.transpose=function(a){return E.zip.apply(E,a)};E.keys=function(a){var c=[],b;for(b in a)c.push(b);return c};E.values=function(a){var c=[],b;for(b in a)c.push(a[b]);return c};E.entries=function(a){var c=[],b;for(b in a)c.push({key:b,value:a[b]});return c};E.merge=function(a){var c,b,g,d=a.length;c=-1;for(var e=0;++c<d;)e+=a[c].length;for(b=Array(e);0<=--d;)for(g=a[d],c=g.length;0<=--c;)b[--e]=g[c];return b};var Ba=Math.abs;E.range=function(a,c,b){if(3>arguments.length&&(b=1,2>arguments.length&&
(c=a,a=0)),1/0===(c-a)/b)throw Error("infinite range");var g,d=[],e;g=Ba(b);for(e=1;g*e%1;)e*=10;var k=-1;if(a*=e,c*=e,b*=e,0>b)for(;(g=a+b*++k)>c;)d.push(g/e);else for(;(g=a+b*++k)<c;)d.push(g/e);return d};E.map=function(a){var c=new s;if(a instanceof s)a.forEach(function(a,b){c.set(a,b)});else for(var b in a)c.set(b,a[b]);return c};r(s,{has:l,get:function(a){return this[Td+a]},set:function(a,c){return this[Td+a]=c},remove:function(a){return a=Td+a,a in this&&delete this[a]},keys:b,values:function(){var a=
[];return this.forEach(function(c,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(c,b){a.push({key:c,value:b})}),a},size:p,empty:m,forEach:function(a){for(var c in this)c.charCodeAt(0)===kf&&a.call(this,c.substring(1),this[c])}});var Td="\x00",kf=Td.charCodeAt(0);E.nest=function(){function a(c,k,n){if(n>=e.length)return g?g.call(d,k):b?k.sort(b):k;for(var f,m,v,l,u=-1,y=k.length,p=e[n++],z=new s;++u<y;)(l=z.get(f=p(m=k[u])))?l.push(m):z.set(f,[m]);return c?(m=c(),v=function(b,
g){m.set(b,a(c,g,n))}):(m={},v=function(b,g){m[b]=a(c,g,n)}),z.forEach(v),m}function c(a,b){if(b>=e.length)return a;var g=[],d=k[b++];return a.forEach(function(a,d){g.push({key:a,values:c(d,b)})}),d?g.sort(function(a,c){return d(a.key,c.key)}):g}var b,g,d={},e=[],k=[];return d.map=function(c,b){return a(b,c,0)},d.entries=function(b){return c(a(E.map,b,0),0)},d.key=function(a){return e.push(a),d},d.sortKeys=function(a){return k[e.length-1]=a,d},d.sortValues=function(a){return b=a,d},d.rollup=function(a){return g=
a,d},d};E.set=function(a){var c=new f;if(a)for(var b=0,g=a.length;g>b;++b)c.add(a[b]);return c};r(f,{has:l,add:function(a){return this[Td+a]=!0,a},remove:function(a){return a=Td+a,a in this&&delete this[a]},values:b,size:p,empty:m,forEach:function(a){for(var c in this)c.charCodeAt(0)===kf&&a.call(this,c.substring(1))}});E.behavior={};E.rebind=function(a,c){for(var b,g=1,e=arguments.length;++g<e;)a[b=arguments[g]]=d(a,c,c[b]);return a};var Ig="webkit ms moz Moz o O".split(" ");E.dispatch=function(){for(var c=
new n,b=-1,g=arguments.length;++b<g;)c[arguments[b]]=a(c);return c};n.prototype.on=function(a,c){var b=a.indexOf("."),g="";if(0<=b&&(g=a.substring(b+1),a=a.substring(0,b)),a)return 2>arguments.length?this[a].on(g):this[a].on(g,c);if(2===arguments.length){if(null==c)for(a in this)this.hasOwnProperty(a)&&this[a].on(g,null);return this}};E.event=null;E.requote=function(a){return a.replace(Ph,"\\$&")};var Ph=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,lf={}.__proto__?function(a,c){a.__proto__=c}:function(a,c){for(var b in c)a[b]=
c[b]},bg=function(a,c){return c.querySelector(a)},cg=function(a,c){return c.querySelectorAll(a)},Qh=pd[k(pd,"matchesSelector")],Jg=function(a,c){return Qh.call(a,c)};"function"==typeof Sizzle&&(bg=function(a,c){return Sizzle(a,c)[0]||null},cg=function(a,c){return Sizzle.uniqueSort(Sizzle(a,c))},Jg=Sizzle.matchesSelector);E.selection=function(){return hh};var Ma=E.selection.prototype=[];Ma.select=function(a){var c,b,g,d,e=[];a=z(a);for(var k=-1,n=this.length;++k<n;){e.push(c=[]);c.parentNode=(g=this[k]).parentNode;
for(var f=-1,m=g.length;++f<m;)(d=g[f])?(c.push(b=a.call(d,d.__data__,f,k)),b&&"__data__"in d&&(b.__data__=d.__data__)):c.push(null)}return u(e)};Ma.selectAll=function(a){var c,b,g=[];a=A(a);for(var d=-1,e=this.length;++d<e;)for(var k=this[d],n=-1,f=k.length;++n<f;)(b=k[n])&&(g.push(c=od(a.call(b,b.__data__,n,d))),c.parentNode=b);return u(g)};var Ag={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",
xmlns:"http://www.w3.org/2000/xmlns/"};E.ns={prefix:Ag,qualify:function(a){var c=a.indexOf(":"),b=a;return 0<=c&&(b=a.substring(0,c),a=a.substring(c+1)),Ag.hasOwnProperty(b)?{space:Ag[b],local:a}:a}};Ma.attr=function(a,c){if(2>arguments.length){if("string"==typeof a){var b=this.node();return a=E.ns.qualify(a),a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(c in a)this.each(y(c,a[c]));return this}return this.each(y(a,c))};Ma.classed=function(a,c){if(2>arguments.length){if("string"==
typeof a){var b=this.node(),g=(a=a.trim().split(/^|\s+/)).length,d=-1;if(c=b.classList)for(;++d<g;){if(!c.contains(a[d]))return!1}else for(c=b.getAttribute("class");++d<g;)if(!D(a[d]).test(c))return!1;return!0}for(c in a)this.each(B(c,a[c]));return this}return this.each(B(a,c))};Ma.style=function(a,c,b){var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(b in a)this.each(J(b,a[b],c));return this}if(2>g)return Nb.getComputedStyle(this.node(),null).getPropertyValue(a);b=""}return this.each(J(a,
c,b))};Ma.property=function(a,c){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(c in a)this.each(M(c,a[c]));return this}return this.each(M(a,c))};Ma.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=a.apply(this,arguments);this.textContent=null==c?"":c}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};Ma.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var c=
a.apply(this,arguments);this.innerHTML=null==c?"":c}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};Ma.append=function(a){return a=F(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};Ma.insert=function(a,c){return a=F(a),c=z(c),this.select(function(){return this.insertBefore(a.apply(this,arguments),c.apply(this,arguments)||null)})};Ma.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};
Ma.data=function(a,c){function b(a,g){var d,e,k,v=a.length,l=g.length,u=Math.min(v,l),y=Array(l),p=Array(l),z=Array(v);if(c){var A=new s,U=new s,C=[];for(d=-1;++d<v;)u=c.call(e=a[d],e.__data__,d),A.has(u)?z[d]=e:A.set(u,e),C.push(u);for(d=-1;++d<l;)u=c.call(g,k=g[d],d),(e=A.get(u))?(y[d]=e,e.__data__=k):U.has(u)||(p[d]={__data__:k}),U.set(u,k),A.remove(u);for(d=-1;++d<v;)A.has(C[d])&&(z[d]=a[d])}else{for(d=-1;++d<u;)e=a[d],k=g[d],e?(e.__data__=k,y[d]=e):p[d]={__data__:k};for(;l>d;++d)p[d]={__data__:g[d]};
for(;v>d;++d)z[d]=a[d]}p.update=y;p.parentNode=y.parentNode=z.parentNode=a.parentNode;n.push(p);f.push(y);m.push(z)}var g,d,e=-1,k=this.length;if(!arguments.length){for(a=Array(k=(g=this[0]).length);++e<k;)(d=g[e])&&(a[e]=d.__data__);return a}var n=x([]),f=u([]),m=u([]);if("function"==typeof a)for(;++e<k;)b(g=this[e],a.call(g,g.parentNode.__data__,e));else for(;++e<k;)b(g=this[e],a);return f.enter=function(){return n},f.exit=function(){return m},f};Ma.datum=function(a){return arguments.length?this.property("__data__",
a):this.property("__data__")};Ma.filter=function(a){var c,b,g,d=[];"function"!=typeof a&&(a=H(a));for(var e=0,k=this.length;k>e;e++){d.push(c=[]);c.parentNode=(b=this[e]).parentNode;for(var n=0,f=b.length;f>n;n++)(g=b[n])&&a.call(g,g.__data__,n,e)&&c.push(g)}return u(d)};Ma.order=function(){for(var a=-1,c=this.length;++a<c;)for(var b,g=this[a],d=g.length-1,e=g[d];0<=--d;)(b=g[d])&&(e&&e!==b.nextSibling&&e.parentNode.insertBefore(b,e),e=b);return this};Ma.sort=function(a){a=S.apply(this,arguments);
for(var c=-1,b=this.length;++c<b;)this[c].sort(a);return this.order()};Ma.each=function(a){return K(this,function(c,b,g){a.call(c,c.__data__,b,g)})};Ma.call=function(a){var c=od(arguments);return a.apply(c[0]=this,c),this};Ma.empty=function(){return!this.node()};Ma.node=function(){for(var a=0,c=this.length;c>a;a++)for(var b=this[a],g=0,d=b.length;d>g;g++){var e=b[g];if(e)return e}return null};Ma.size=function(){var a=0;return this.each(function(){++a}),a};var $c=[];E.selection.enter=x;E.selection.enter.prototype=
$c;$c.append=Ma.append;$c.empty=Ma.empty;$c.node=Ma.node;$c.call=Ma.call;$c.size=Ma.size;$c.select=function(a){for(var c,b,g,d,e,k=[],n=-1,f=this.length;++n<f;){g=(d=this[n]).update;k.push(c=[]);c.parentNode=d.parentNode;for(var m=-1,v=d.length;++m<v;)(e=d[m])?(c.push(g[m]=b=a.call(d.parentNode,e.__data__,m,n)),b.__data__=e.__data__):c.push(null)}return u(k)};$c.insert=function(a,c){return 2>arguments.length&&(c=L(this)),Ma.insert.call(this,a,c)};Ma.transition=function(){for(var a,c,b=pe||++ih,g=
[],d=Nf||{time:Date.now(),ease:Ze,delay:0,duration:250},e=-1,k=this.length;++e<k;){g.push(a=[]);for(var n=this[e],f=-1,m=n.length;++f<m;)(c=n[f])&&Kf(c,f,b,d),a.push(c)}return jf(g,b)};Ma.interrupt=function(){return this.each(I)};E.select=function(a){a=["string"==typeof a?bg(a,Rc):a];return a.parentNode=pd,u([a])};E.selectAll=function(a){a=od("string"==typeof a?cg(a,Rc):a);return a.parentNode=pd,u([a])};var hh=E.select(pd);Ma.on=function(a,c,b){var g=arguments.length;if(3>g){if("string"!=typeof a){2>
g&&(c=!1);for(b in a)this.each(T(b,a[b],c));return this}if(2>g)return(g=this.node()["__on"+a])&&g._;b=!1}return this.each(T(a,c,b))};var dg=E.map({mouseenter:"mouseover",mouseleave:"mouseout"});dg.forEach(function(a){"on"+a in Rc&&dg.remove(a)});var Re="onselectstart"in Rc?null:k(pd.style,"userSelect"),zh=0;E.mouse=function(a){return V(a,g())};var eg=/WebKit/.test(Nb.navigator.userAgent)?-1:0;E.touches=function(a,c){return 2>arguments.length&&(c=g().touches),c?od(c).map(function(c){var b=V(a,c);return b.identifier=
c.identifier,b}):[]};E.behavior.drag=function(){function a(){this.on("mousedown.drag",d).on("touchstart.drag",k)}function c(a,d,e,k){return function(){var c,n=this.parentNode,f=b.of(this,arguments),m=E.event.target,v=a(),l=null==v?"drag":"drag-"+v,u=d(n,v),y=0,p=E.select(Nb).on(e+"."+l,function(){var a=d(n,v),b=a[0]-u[0],g=a[1]-u[1];y=y|b|g;u=a;f({type:"drag",x:a[0]+c[0],y:a[1]+c[1],dx:b,dy:g})}).on(k+"."+l,function(){p.on(e+"."+l,null).on(k+"."+l,null);z(y&&E.event.target===m);f({type:"dragend"})}),
z=Z();g?(c=g.apply(this,arguments),c=[c.x-u[0],c.y-u[1]]):c=[0,0];f({type:"dragstart"})}}var b=v(a,"drag","dragstart","dragend"),g=null,d=c(e,E.mouse,"mousemove","mouseup"),k=c(function(){return E.event.changedTouches[0].identifier},function(a,c){return E.touches(a).filter(function(a){return a.identifier===c})[0]},"touchmove","touchend");return a.origin=function(c){return arguments.length?(g=c,a):g},E.rebind(a,b,"on")};var za=Math.PI,lc=2*za,ac=za/2,fa=1E-6,fg=fa*fa,wa=za/180,Ya=180/za,Of=Math.SQRT2,
Bg=2;E.interpolateZoom=function(a,c){function b(a){var c=a*p;if(y){a=ca(u);var k=e/(Bg*v),m,l=Of*c+u;m=((l=Math.exp(2*l))-1)/(l+1);m*=a;var z=u,l=((z=Math.exp(z))-1/z)/2,k=k*(m-l);return[g+k*n,d+k*f,e*a/ca(Of*c+u)]}return[g+a*n,d+a*f,e*Math.exp(Of*c)]}var g=a[0],d=a[1],e=a[2],k=c[2],n=c[0]-g,f=c[1]-d,m=n*n+f*f,v=Math.sqrt(m),l=(k*k-e*e+4*m)/(2*e*Bg*v),m=(k*k-e*e-4*m)/(2*k*Bg*v),u=Math.log(Math.sqrt(l*l+1)-l),y=Math.log(Math.sqrt(m*m+1)-m)-u,p=(y||Math.log(k/e))/Of;return b.duration=1E3*p,b};E.behavior.zoom=
function(){function a(c){c.on(H,m).on(Rh+".zoom",u).on(x,y).on("dblclick.zoom",p).on(r,l)}function b(a){return[(a[0]-X.x)/X.k,(a[1]-X.y)/X.k]}function g(a){X.k=Math.max(q[0],Math.min(q[1],a))}function d(a,c){c=[c[0]*X.k+X.x,c[1]*X.k+X.y];X.x+=a[0]-c[0];X.y+=a[1]-c[1]}function e(){D&&D.domain(B.range().map(function(a){return(a-X.x)/X.k}).map(B.invert));J&&J.domain(G.range().map(function(a){return(a-X.y)/X.k}).map(G.invert))}function k(a){a({type:"zoomstart"})}function n(a){e();a({type:"zoom",scale:X.k,
translate:[X.x,X.y]})}function f(a){a({type:"zoomend"})}function m(){var a=this,c=M.of(a,arguments),g=E.event.target,e=0,v=E.select(Nb).on(x,function(){e=1;d(E.mouse(a),l);n(c)}).on(s,function(){v.on(x,Nb===a?y:null).on(s,null);u(e&&E.event.target===g);f(c)}),l=b(E.mouse(a)),u=Z();I.call(a);k(c)}function l(){function a(){var c=E.touches(u);return v=X.k,c.forEach(function(a){a.identifier in p&&(p[a.identifier]=b(a))}),c}function e(){for(var b=E.event.changedTouches,k=0,f=b.length;f>k;++k)p[b[k].identifier]=
null;f=a();k=Date.now();1===f.length?(500>k-C&&(b=f[0],f=p[b.identifier],g(2*X.k),d(b,f),c(),n(y)),C=k):1<f.length&&(b=f[0],f=f[1],k=b[0]-f[0],b=b[1]-f[1],z=k*k+b*b)}var v,u=this,y=M.of(u,arguments),p={},z=0,A=E.event.changedTouches[0].identifier,U="touchmove.zoom-"+A,B="touchend.zoom-"+A,D=E.select(Nb).on(U,function(){for(var a,c,b,e,k=E.touches(u),f=0,m=k.length;m>f;++f,e=null)if(b=k[f],e=p[b.identifier]){if(c)break;a=b;c=e}if(e){var l=(l=b[0]-a[0])*l+(l=b[1]-a[1])*l,k=z&&Math.sqrt(l/z);a=[(a[0]+
b[0])/2,(a[1]+b[1])/2];c=[(c[0]+e[0])/2,(c[1]+e[1])/2];g(k*v)}C=null;d(a,c);n(y)}).on(B,function(){if(E.event.touches.length){for(var c=E.event.changedTouches,b=0,g=c.length;g>b;++b)delete p[c[b].identifier];for(var d in p)return void a()}D.on(U,null).on(B,null);G.on(H,m).on(r,l);J();f(y)}),G=E.select(u).on(H,null).on(r,e),J=Z();I.call(u);e();k(y)}function u(){var a=M.of(this,arguments);U?clearTimeout(U):(I.call(this),k(a));U=setTimeout(function(){U=null;f(a)},50);c();var e=A||E.mouse(this);z||(z=
b(e));g(Math.pow(2,0.002*Pf())*X.k);d(e,z);n(a)}function y(){z=null}function p(){var a=M.of(this,arguments),c=E.mouse(this),e=b(c),m=Math.log(X.k)/Math.LN2;k(a);g(Math.pow(2,E.event.shiftKey?Math.ceil(m)-1:Math.floor(m)+1));d(c,e);n(a);f(a)}var z,A,U,C,B,D,G,J,X={x:0,y:0,k:1},F=[960,500],q=jh,H="mousedown.zoom",x="mousemove.zoom",s="mouseup.zoom",r="touchstart.zoom",M=v(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=M.of(this,arguments),c=X;pe?E.select(this).transition().each("start.zoom",
function(){X=this.__chart__||{x:0,y:0,k:1};k(a)}).tween("zoom:zoom",function(){var b=F[0],g=b/2,d=F[1]/2,e=E.interpolateZoom([(g-X.x)/X.k,(d-X.y)/X.k,b/X.k],[(g-c.x)/c.k,(d-c.y)/c.k,b/c.k]);return function(c){c=e(c);var k=b/c[2];this.__chart__=X={x:g-c[0]*k,y:d-c[1]*k,k:k};n(a)}}).each("end.zoom",function(){f(a)}):(this.__chart__=X,k(a),n(a),f(a))})},a.translate=function(c){return arguments.length?(X={x:+c[0],y:+c[1],k:X.k},e(),a):[X.x,X.y]},a.scale=function(c){return arguments.length?(X={x:X.x,y:X.y,
k:+c},e(),a):X.k},a.scaleExtent=function(c){return arguments.length?(q=null==c?jh:[+c[0],+c[1]],a):q},a.center=function(c){return arguments.length?(A=c&&[+c[0],+c[1]],a):A},a.size=function(c){return arguments.length?(F=c&&[+c[0],+c[1]],a):F},a.x=function(c){return arguments.length?(D=c,B=c.copy(),X={x:0,y:0,k:1},a):D},a.y=function(c){return arguments.length?(J=c,G=c.copy(),X={x:0,y:0,k:1},a):J},E.rebind(a,M,"on")};var Pf,jh=[0,1/0],Rh="onwheel"in Rc?(Pf=function(){return-E.event.deltaY*(E.event.deltaMode?
120:1)},"wheel"):"onmousewheel"in Rc?(Pf=function(){return E.event.wheelDelta},"mousewheel"):(Pf=function(){return-E.event.detail},"MozMousePixelScroll");ma.prototype.toString=function(){return this.rgb()+""};E.hsl=function(a,c,b){return 1===arguments.length?a instanceof qa?da(a.h,a.s,a.l):ib(""+a,ya,da):da(+a,+c,+b)};var Cg=qa.prototype=new ma;Cg.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),da(this.h,this.s,this.l/a)};Cg.darker=function(a){return a=Math.pow(0.7,arguments.length?
a:1),da(this.h,this.s,a*this.l)};Cg.rgb=function(){return la(this.h,this.s,this.l)};E.hcl=function(a,c,b){return 1===arguments.length?a instanceof ka?ia(a.h,a.c,a.l):a instanceof na?La(a.l,a.a,a.b):La((a=oa((a=E.rgb(a)).r,a.g,a.b)).l,a.a,a.b):ia(+a,+c,+b)};var Dg=ka.prototype=new ma;Dg.brighter=function(a){return ia(this.h,this.c,Math.min(100,this.l+Qf*(arguments.length?a:1)))};Dg.darker=function(a){return ia(this.h,this.c,Math.max(0,this.l-Qf*(arguments.length?a:1)))};Dg.rgb=function(){return Aa(this.h,
this.c,this.l).rgb()};E.lab=function(a,c,b){return 1===arguments.length?a instanceof na?P(a.l,a.a,a.b):a instanceof ka?Aa(a.l,a.c,a.h):oa((a=E.rgb(a)).r,a.g,a.b):P(+a,+c,+b)};var Qf=18,Kg=0.95047,Lg=1,Mg=1.08883,Eg=na.prototype=new ma;Eg.brighter=function(a){return P(Math.min(100,this.l+Qf*(arguments.length?a:1)),this.a,this.b)};Eg.darker=function(a){return P(Math.max(0,this.l-Qf*(arguments.length?a:1)),this.a,this.b)};Eg.rgb=function(){return Va(this.l,this.a,this.b)};E.rgb=function(a,c,b){return 1===
arguments.length?a instanceof ea?ra(a.r,a.g,a.b):ib(""+a,ra,la):ra(~~a,~~c,~~b)};var Rf=ea.prototype=new ma;Rf.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,b=this.g,g=this.b;return c||b||g?(c&&30>c&&(c=30),b&&30>b&&(b=30),g&&30>g&&(g=30),ra(Math.min(255,~~(c/a)),Math.min(255,~~(b/a)),Math.min(255,~~(g/a)))):ra(30,30,30)};Rf.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),ra(~~(a*this.r),~~(a*this.g),~~(a*this.b))};Rf.hsl=function(){return ya(this.r,this.g,
this.b)};Rf.toString=function(){return"#"+Ia(this.r)+Ia(this.g)+Ia(this.b)};var mf=E.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,
springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});mf.forEach(function(a,c){mf.set(a,ra(c>>16,255&c>>8,255&c))});E.functor=ta;E.xhr=jb(Ca);E.dsv=function(a,c){function b(a,e,k){3>arguments.length&&(k=e,e=null);var n=eb(a,c,null==e?g:d(e),k);return n.row=function(a){return arguments.length?n.response(null==(e=a)?g:d(a)):e},n}function g(a){return b.parse(a.responseText)}
function d(a){return function(c){return b.parse(c.responseText,a)}}function e(c){return c.map(k).join(a)}function k(a){return n.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var n=RegExp('["'+a+"\n]"),m=a.charCodeAt(0);return b.parse=function(a,c){var g;return b.parseRows(a,function(a,b){if(g)return g(a,b-1);var d=new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}");g=c?function(a,b){return c(d(a),b)}:d})},b.parseRows=function(a,c){function b(){if(v>=f)return k;
if(d)return d=!1,e;var c=v;if(34===a.charCodeAt(c)){for(var g=c;g++<f;)if(34===a.charCodeAt(g)){if(34!==a.charCodeAt(g+1))break;++g}v=g+2;var n=a.charCodeAt(g+1);return 13===n?(d=!0,10===a.charCodeAt(g+2)&&++v):10===n&&(d=!0),a.substring(c+1,g).replace(/""/g,'"')}for(;f>v;){n=a.charCodeAt(v++);g=1;if(10===n)d=!0;else if(13===n)d=!0,10===a.charCodeAt(v)&&(++v,++g);else if(n!==m)continue;return a.substring(c,v-g)}return a.substring(c)}for(var g,d,e={},k={},n=[],f=a.length,v=0,l=0;(g=b())!==k;){for(var u=
[];g!==e&&g!==k;)u.push(g),g=b();c&&!(u=c(u,l++))||n.push(u)}return n},b.format=function(c){if(Array.isArray(c[0]))return b.formatRows(c);var g=new f,d=[];return c.forEach(function(a){for(var c in a)g.has(c)||d.push(g.add(c))}),[d.map(k).join(a)].concat(c.map(function(c){return d.map(function(a){return k(c[a])}).join(a)})).join("\n")},b.formatRows=function(a){return a.map(e).join("\n")},b};E.csv=E.dsv(",","text/csv");E.tsv=E.dsv("\t","text/tab-separated-values");var pf,qf,of,nf,ad,Ng=Nb[k(Nb,"requestAnimationFrame")]||
function(a){setTimeout(a,17)};E.timer=function(a,c,b){var g=arguments.length;2>g&&(c=0);3>g&&(b=Date.now());g={c:a,t:b+c,f:!1,n:null};qf?qf.n=g:pf=g;qf=g;of||(nf=clearTimeout(nf),of=1,Ng(ja))};E.timer.flush=function(){Pa();Jb()};E.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};var Sh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,c){var b=Math.pow(10,3*Ba(8-c));return{scale:8<c?function(a){return a/b}:function(a){return a*b},symbol:a}});E.formatPrefix=
function(a,c){var b=0;return a&&(0>a&&(a*=-1),c&&(a=E.round(a,Sa(a,c))),b=1+Math.floor(1E-12+Math.log(a)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((0>=b?b+1:b-1)/3)))),Sh[8+b/3]};var Og=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ah=E.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,c){return a.toPrecision(c)},
e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=E.round(a,Sa(a,c))).toFixed(Math.max(0,Math.min(20,Sa(a*(1+1E-15),c))))}}),ga=E.time={},Ob=Date;Oa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},
getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){nd.setUTCDate.apply(this._,arguments)},setDay:function(){nd.setUTCDay.apply(this._,arguments)},setFullYear:function(){nd.setUTCFullYear.apply(this._,arguments)},setHours:function(){nd.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){nd.setUTCMilliseconds.apply(this._,
arguments)},setMinutes:function(){nd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){nd.setUTCMonth.apply(this._,arguments)},setSeconds:function(){nd.setUTCSeconds.apply(this._,arguments)},setTime:function(){nd.setTime.apply(this._,arguments)}};var nd=Date.prototype;ga.year=Za(function(a){return a=ga.day(a),a.setMonth(0,1),a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});ga.years=ga.year.range;ga.years.utc=ga.year.utc.range;ga.day=Za(function(a){var c=
new Ob(2E3,0);return c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});ga.days=ga.day.range;ga.days.utc=ga.day.utc.range;ga.dayOfYear=function(a){var c=ga.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,c){c=7-c;var b=ga[a]=Za(function(a){return(a=ga.day(a)).setDate(a.getDate()-(a.getDay()+
c)%7),a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var b=ga.year(a).getDay();return Math.floor((ga.dayOfYear(a)+(b+c)%7)/7)-(b!==c)});ga[a+"s"]=b.range;ga[a+"s"].utc=b.utc.range;ga[a+"OfYear"]=function(a){var b=ga.year(a).getDay();return Math.floor((ga.dayOfYear(a)+(b+c)%7)/7)}});ga.week=ga.sunday;ga.weeks=ga.sunday.range;ga.weeks.utc=ga.sunday.utc.range;ga.weekOfYear=ga.sundayOfYear;var Pg={"-":"",_:" ",0:"0"},mb=/^\s*\d+/,Qg=/^%/;E.locale=function(a){return{numberFormat:kb(a),
timeFormat:$a(a)}};var kh=E.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});E.format=kh.numberFormat;
E.geo={};cb.prototype={s:0,t:0,add:function(a){Gb(a,this.t,Sf);Gb(Sf.s,this.s,this);this.s?this.t+=Sf.t:this.s=Sf.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Sf=new cb;E.geo.stream=function(a,c){a&&lh.hasOwnProperty(a.type)?lh[a.type](a,c):bc(a,c)};var lh={Feature:function(a,c){bc(a.geometry,c)},FeatureCollection:function(a,c){for(var b=a.features,g=-1,d=b.length;++g<d;)bc(b[g].geometry,c)}},Rg={Sphere:function(a,c){c.sphere()},Point:function(a,c){a=a.coordinates;c.point(a[0],
a[1],a[2])},MultiPoint:function(a,c){for(var b=a.coordinates,g=-1,d=b.length;++g<d;)a=b[g],c.point(a[0],a[1],a[2])},LineString:function(a,c){Ja(a.coordinates,c,0)},MultiLineString:function(a,c){for(var b=a.coordinates,g=-1,d=b.length;++g<d;)Ja(b[g],c,0)},Polygon:function(a,c){tb(a.coordinates,c)},MultiPolygon:function(a,c){for(var b=a.coordinates,g=-1,d=b.length;++g<d;)tb(b[g],c)},GeometryCollection:function(a,c){for(var b=a.geometries,g=-1,d=b.length;++g<d;)bc(b[g],c)}};E.geo.area=function(a){return Pe=
0,E.geo.stream(a,pc),Pe};var Pe,Ud=new cb,pc={sphere:function(){Pe+=4*za},point:e,lineStart:e,lineEnd:e,polygonStart:function(){Ud.reset();pc.lineStart=Ta},polygonEnd:function(){var a=2*Ud;Pe+=0>a?4*za+a:a;pc.lineStart=pc.lineEnd=pc.point=e}};E.geo.bounds=function(){function a(c,b){B.push(D=[v=c,u=c]);l>b&&(l=b);b>y&&(y=b)}function c(b,g){var d=fb([b*wa,g*wa]);if(U){var e=nb(U,d),e=nb([e[1],-e[0],0],e);Ua(e);var e=ua(e),k=b-p,f=0<k?1:-1,m=e[0]*Ya*f,k=180<Ba(k);k^(m>f*p&&f*b>m)?(e=e[1]*Ya,e>y&&(y=
e)):(m=(m+360)%360-180,k^(m>f*p&&f*b>m))?(e=-e[1]*Ya,l>e&&(l=e)):(l>g&&(l=g),g>y&&(y=g));k?p>b?n(v,b)>n(v,u)&&(u=b):n(b,u)>n(v,u)&&(v=b):u>=v?(v>b&&(v=b),b>u&&(u=b)):b>p?n(v,b)>n(v,u)&&(u=b):n(b,u)>n(v,u)&&(v=b)}else a(b,g);U=d;p=b}function b(){G.point=c}function g(){D[0]=v;D[1]=u;G.point=a;U=null}function d(a,b){if(U){var g=a-p;C+=180<Ba(g)?g+(0<g?360:-360):g}else z=a,A=b;pc.point(a,b);c(a,b)}function e(){pc.lineStart()}function k(){d(z,A);pc.lineEnd();Ba(C)>fa&&(v=-(u=180));D[0]=v;D[1]=u;U=null}
function n(a,c){return 0>(c-=a)?c+360:c}function f(a,c){return a[0]-c[0]}function m(a,c){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}var v,l,u,y,p,z,A,U,C,B,D,G={point:a,lineStart:b,lineEnd:g,polygonStart:function(){G.point=d;G.lineStart=e;G.lineEnd=k;C=0;pc.polygonStart()},polygonEnd:function(){pc.polygonEnd();G.point=a;G.lineStart=b;G.lineEnd=g;0>Ud?(v=-(u=180),l=-(y=90)):C>fa?y=90:-fa>C&&(l=-90);D[0]=v;D[1]=u}};return function(a){y=u=-(v=l=1/0);B=[];E.geo.stream(a,G);if(a=B.length){B.sort(f);
for(var c,b=1,g=B[0],d=[g];a>b;++b)c=B[b],m(c[0],g)||m(c[1],g)?(n(g[0],c[1])>n(g[0],g[1])&&(g[1]=c[1]),n(c[0],g[1])>n(g[0],g[1])&&(g[0]=c[0])):d.push(g=c);var e,k=-1/0;a=d.length-1;b=0;for(g=d[a];a>=b;g=c,++b)c=d[b],(e=n(g[1],c[0]))>k&&(k=e,v=c[0],u=g[1])}return B=D=null,1/0===v||1/0===l?[[0/0,0/0],[0/0,0/0]]:[[v,l],[u,y]]}}();E.geo.centroid=function(a){Se=qe=bd=cd=Sc=zc=Ac=ic=qd=rd=Tc=0;E.geo.stream(a,Hc);a=qd;var c=rd,b=Tc,g=a*a+c*c+b*b;return fg>g&&(a=zc,c=Ac,b=ic,fa>qe&&(a=bd,c=cd,b=Sc),g=a*a+
c*c+b*b,fg>g)?[0/0,0/0]:[Math.atan2(c,a)*Ya,O(b/Math.sqrt(g))*Ya]};var Se,qe,bd,cd,Sc,zc,Ac,ic,qd,rd,Tc,Hc={sphere:e,point:dc,lineStart:vb,lineEnd:Qb,polygonStart:function(){Hc.lineStart=dd},polygonEnd:function(){Hc.lineStart=vb}},Sg=jc(Yb,function(a){var c,b=0/0,g=0/0,d=0/0;return{lineStart:function(){a.lineStart();c=1},point:function(e,k){var n=0<e?za:-za,f=Ba(e-b);if(Ba(f-za)<fa)a.point(b,g=0<(g+k)/2?ac:-ac),a.point(d,g),a.lineEnd(),a.lineStart(),a.point(n,g),a.point(e,g),c=0;else if(d!==n&&f>=
za){Ba(b-d)<fa&&(b-=d*fa);Ba(e-n)<fa&&(e-=n*fa);var f=b,m=g,v=e,l,u,y=Math.sin(f-v);g=Ba(y)>fa?Math.atan((Math.sin(m)*(u=Math.cos(k))*Math.sin(v)-Math.sin(k)*(l=Math.cos(m))*Math.sin(f))/(l*u*y)):(m+k)/2;a.point(d,g);a.lineEnd();a.lineStart();a.point(n,g);c=0}a.point(b=e,g=k);d=n},lineEnd:function(){a.lineEnd();b=g=0/0},clean:function(){return 2-c}}},function(a,c,b,g){null==a?(b*=ac,g.point(-za,b),g.point(0,b),g.point(za,b),g.point(za,0),g.point(za,-b),g.point(0,-b),g.point(-za,-b),g.point(-za,0),
g.point(-za,b)):Ba(a[0]-c[0])>fa?(a=a[0]<c[0]?za:-za,b=b*a/2,g.point(-a,b),g.point(0,b),g.point(a,b)):g.point(c[0],c[1])},[-za,-za/2]),rf=1E9;E.geo.clipExtent=function(){var a,c,b,g,d,e,k={stream:function(a){return d&&(d.valid=!1),d=e(a),d.valid=!0,d},extent:function(n){return arguments.length?(e=td(a=+n[0][0],c=+n[0][1],b=+n[1][0],g=+n[1][1]),d&&(d.valid=!1,d=null),k):[[a,c],[b,g]]}};return k.extent([[0,0],[960,500]])};(E.geo.conicEqualArea=function(){return Da(Wd)}).raw=Wd;E.geo.albers=function(){return E.geo.conicEqualArea().rotate([96,
0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};E.geo.albersUsa=function(){function a(e){var k=e[0];e=e[1];return c=null,b(k,e),c||(g(k,e),c)||d(k,e),c}var c,b,g,d,e=E.geo.albers(),k=E.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),n=E.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(a,b){c=[a,b]}};return a.invert=function(a){var c=e.scale(),b=e.translate(),g=(a[0]-b[0])/c,c=(a[1]-b[1])/c;return(0.12<=c&&0.234>c&&-0.425<=
g&&-0.214>g?k:0.166<=c&&0.234>c&&-0.214<=g&&-0.115>g?n:e).invert(a)},a.stream=function(a){var c=e.stream(a),b=k.stream(a),g=n.stream(a);return{point:function(a,d){c.point(a,d);b.point(a,d);g.point(a,d)},sphere:function(){c.sphere();b.sphere();g.sphere()},lineStart:function(){c.lineStart();b.lineStart();g.lineStart()},lineEnd:function(){c.lineEnd();b.lineEnd();g.lineEnd()},polygonStart:function(){c.polygonStart();b.polygonStart();g.polygonStart()},polygonEnd:function(){c.polygonEnd();b.polygonEnd();
g.polygonEnd()}}},a.precision=function(c){return arguments.length?(e.precision(c),k.precision(c),n.precision(c),a):e.precision()},a.scale=function(c){return arguments.length?(e.scale(c),k.scale(0.35*c),n.scale(c),a.translate(e.translate())):e.scale()},a.translate=function(c){if(!arguments.length)return e.translate();var m=e.scale(),v=+c[0],l=+c[1];return b=e.translate(c).clipExtent([[v-0.455*m,l-0.238*m],[v+0.455*m,l+0.238*m]]).stream(f).point,g=k.translate([v-0.307*m,l+0.201*m]).clipExtent([[v-0.425*
m+fa,l+0.12*m+fa],[v-0.214*m-fa,l+0.234*m-fa]]).stream(f).point,d=n.translate([v-0.205*m,l+0.212*m]).clipExtent([[v-0.214*m+fa,l+0.166*m+fa],[v-0.115*m-fa,l+0.234*m-fa]]).stream(f).point,a},a.scale(1070)};var Tf,sf,Uf,Vf,Wf,Xf,ud={point:e,lineStart:e,lineEnd:e,polygonStart:function(){sf=0;ud.lineStart=qc},polygonEnd:function(){ud.lineStart=ud.lineEnd=ud.point=e;Tf+=Ba(sf/2)}},Th={point:function(a,c){Uf>a&&(Uf=a);a>Wf&&(Wf=a);Vf>c&&(Vf=c);c>Xf&&(Xf=c)},lineStart:e,lineEnd:e,polygonStart:e,polygonEnd:e},
Jc={point:Sb,lineStart:wd,lineEnd:xd,polygonStart:function(){Jc.lineStart=yd},polygonEnd:function(){Jc.point=Sb;Jc.lineStart=wd;Jc.lineEnd=xd}};E.geo.path=function(){function a(c){return c&&("function"==typeof k&&d.pointRadius(+k.apply(this,arguments)),e&&e.valid||(e=g(d)),E.geo.stream(c,e)),d.result()}var c,b,g,d,e,k=4.5;return a.area=function(a){return Tf=0,E.geo.stream(a,g(ud)),Tf},a.centroid=function(a){return bd=cd=Sc=zc=Ac=ic=qd=rd=Tc=0,E.geo.stream(a,g(Jc)),Tc?[qd/Tc,rd/Tc]:ic?[zc/ic,Ac/ic]:
Sc?[bd/Sc,cd/Sc]:[0/0,0/0]},a.bounds=function(a){return Wf=Xf=-(Uf=Vf=1/0),E.geo.stream(a,g(Th)),[[Uf,Vf],[Wf,Xf]]},a.projection=function(b){return arguments.length?(g=(c=b)?b.stream||Kc(b):Ca,e=null,a):c},a.context=function(c){return arguments.length?(d=null==(b=c)?new Ic:new re(c),"function"!=typeof k&&d.pointRadius(k),e=null,a):b},a.pointRadius=function(c){return arguments.length?(k="function"==typeof c?c:(d.pointRadius(+c),+c),a):k},a.projection(E.geo.albersUsa()).context(null)};E.geo.transform=
function(a){return{stream:function(c){c=new Xd(c);for(var b in a)c[b]=a[b];return c}}};Xd.prototype={point:function(a,c){this.stream.point(a,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};E.geo.projection=Cb;E.geo.projectionMutator=Vd;(E.geo.equirectangular=function(){return Cb(Lc)}).raw=Lc.invert=Lc;E.geo.rotation=
function(a){function c(b){return b=a(b[0]*wa,b[1]*wa),b[0]*=Ya,b[1]*=Ya,b}return a=se(a[0]%360*wa,a[1]*wa,2<a.length?a[2]*wa:0),c.invert=function(c){return c=a.invert(c[0]*wa,c[1]*wa),c[0]*=Ya,c[1]*=Ya,c},c};tf.invert=Lc;E.geo.circle=function(){function a(){var c="function"==typeof g?g.apply(this,arguments):g,d=se(-c[0]*wa,-c[1]*wa,0).invert,e=[];return b(null,null,1,{point:function(a,c){e.push(a=d(a,c));a[0]*=Ya;a[1]*=Ya}}),{type:"Polygon",coordinates:[e]}}var c,b,g=[0,0],d=6;return a.origin=function(c){return arguments.length?
(g=c,a):g},a.angle=function(g){return arguments.length?(b=Uc((c=+g)*wa,d*wa),a):c},a.precision=function(g){return arguments.length?(b=Uc(c*wa,(d=+g)*wa),a):d},a.angle(90)};E.geo.distance=function(a,c){var b,g=(c[0]-a[0])*wa,d=a[1]*wa,e=c[1]*wa,k=Math.sin(g),g=Math.cos(g),n=Math.sin(d),d=Math.cos(d),f=Math.sin(e),e=Math.cos(e);return Math.atan2(Math.sqrt((b=e*k)*b+(b=d*f-n*e*g)*b),n*f+d*e*g)};E.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return E.range(Math.ceil(e/
A)*A,d,A).map(u).concat(E.range(Math.ceil(m/U)*U,f,U).map(y)).concat(E.range(Math.ceil(g/p)*p,b,p).filter(function(a){return Ba(a%A)>fa}).map(v)).concat(E.range(Math.ceil(n/z)*z,k,z).filter(function(a){return Ba(a%U)>fa}).map(l))}var b,g,d,e,k,n,f,m,v,l,u,y,p=10,z=p,A=90,U=360,C=2.5;return a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[u(e).concat(y(f).slice(1),u(d).reverse().slice(1),y(m).reverse().slice(1))]}},
a.extent=function(c){return arguments.length?a.majorExtent(c).minorExtent(c):a.minorExtent()},a.majorExtent=function(c){return arguments.length?(e=+c[0][0],d=+c[1][0],m=+c[0][1],f=+c[1][1],e>d&&(c=e,e=d,d=c),m>f&&(c=m,m=f,f=c),a.precision(C)):[[e,m],[d,f]]},a.minorExtent=function(c){return arguments.length?(g=+c[0][0],b=+c[1][0],n=+c[0][1],k=+c[1][1],g>b&&(c=g,g=b,b=c),n>k&&(c=n,n=k,k=c),a.precision(C)):[[g,n],[b,k]]},a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()},
a.majorStep=function(c){return arguments.length?(A=+c[0],U=+c[1],a):[A,U]},a.minorStep=function(c){return arguments.length?(p=+c[0],z=+c[1],a):[p,z]},a.precision=function(c){return arguments.length?(C=+c,v=va(n,k,90),l=ue(g,b,C),u=va(m,f,90),y=ue(e,d,C),a):C},a.majorExtent([[-180,-90+fa],[180,90-fa]]).minorExtent([[-180,-80-fa],[180,80+fa]])};E.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||g.apply(this,arguments),b||d.apply(this,arguments)]}}var c,b,g=Zd,d=ec;return a.distance=
function(){return E.geo.distance(c||g.apply(this,arguments),b||d.apply(this,arguments))},a.source=function(b){return arguments.length?(g=b,c="function"==typeof b?null:b,a):g},a.target=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.precision=function(){return arguments.length?a:0},a};E.geo.interpolate=function(a,c){return fc(a[0]*wa,a[1]*wa,c[0]*wa,c[1]*wa)};E.geo.length=function(a){return Yf=0,E.geo.stream(a,Qe),Yf};var Yf,Qe={sphere:e,point:e,lineStart:function(){function a(d,
e){var k=Math.sin(e*=wa),n=Math.cos(e),f=Ba((d*=wa)-c),m=Math.cos(f);Yf+=Math.atan2(Math.sqrt((f=n*Math.sin(f))*f+(f=g*k-b*n*m)*f),b*k+g*n*m);c=d;b=k;g=n}var c,b,g;Qe.point=function(d,e){c=d*wa;b=Math.sin(e*=wa);g=Math.cos(e);Qe.point=a};Qe.lineEnd=function(){Qe.point=Qe.lineEnd=e}},lineEnd:e,polygonStart:e,polygonEnd:e},mh=Mc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(E.geo.azimuthalEqualArea=function(){return Cb(mh)}).raw=mh;var nh=Mc(function(a){return(a=Math.acos(a))&&
a/Math.sin(a)},Ca);(E.geo.azimuthalEquidistant=function(){return Cb(nh)}).raw=nh;(E.geo.conicConformal=function(){return Da(Ad)}).raw=Ad;(E.geo.conicEquidistant=function(){return Da(rc)}).raw=rc;var oh=Mc(function(a){return 1/a},Math.atan);(E.geo.gnomonic=function(){return Cb(oh)}).raw=oh;gd.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-ac]};(E.geo.mercator=function(){return Ue(gd)}).raw=gd;var ph=Mc(function(){return 1},Math.asin);(E.geo.orthographic=function(){return Cb(ph)}).raw=ph;var qh=
Mc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(E.geo.stereographic=function(){return Cb(qh)}).raw=qh;$d.invert=function(a,c){return[-c,2*Math.atan(Math.exp(a))-ac]};(E.geo.transverseMercator=function(){var a=Ue($d),c=a.center,b=a.rotate;return a.center=function(a){return a?c([-a[1],a[0]]):(a=c(),[-a[1],a[0]])},a.rotate=function(a){return a?b([a[0],a[1],2<a.length?a[2]+90:90]):(a=b(),[a[0],a[1],a[2]-90])},a.rotate([0,0])}).raw=$d;E.geom={};E.geom.hull=function(a){function c(a){if(3>
a.length)return[];var d,e=ta(b),k=ta(g),n=a.length,f=[],m=[];for(d=0;n>d;d++)f.push([+e.call(this,a[d],d),+k.call(this,a[d],d),d]);f.sort(ve);for(d=0;n>d;d++)m.push([f[d][0],-f[d][1]]);var e=be(f),m=be(m),k=m[0]===e[0],n=m[m.length-1]===e[e.length-1],v=[];for(d=e.length-1;0<=d;--d)v.push(a[f[e[d]][2]]);for(d=+k;d<m.length-n;++d)v.push(a[f[m[d]][2]]);return v}var b=hd,g=ae;return arguments.length?c(a):(c.x=function(a){return arguments.length?(b=a,c):b},c.y=function(a){return arguments.length?(g=a,
c):g},c)};E.geom.polygon=function(a){return lf(a,Zf),a};var Zf=E.geom.polygon.prototype=[];Zf.area=function(){for(var a,c=-1,b=this.length,g=this[b-1],d=0;++c<b;)a=g,g=this[c],d+=a[1]*g[0]-a[0]*g[1];return 0.5*d};Zf.centroid=function(a){var c,b,g=-1,d=this.length,e=0,k=0,n=this[d-1];for(arguments.length||(a=-1/(6*this.area()));++g<d;)c=n,n=this[g],b=c[0]*n[1]-n[0]*c[1],e+=(c[0]+n[0])*b,k+=(c[1]+n[1])*b;return[e*a,k*a]};Zf.clip=function(a){for(var c,b,g,d,e,k,n=uf(a),f=-1,m=this.length-uf(this),v=
this[m-1];++f<m;){c=a.slice();a.length=0;d=this[f];e=c[(g=c.length-n)-1];for(b=-1;++b<g;)k=c[b],we(k,v,d)?(we(e,v,d)||a.push(Ve(e,k,v,d)),a.push(k)):we(e,v,d)&&a.push(Ve(e,k,v,d)),e=k;n&&a.push(a[0]);v=d}return a};var Ae,fe,ye,gg,Xe,Tg=[],Ug=[];Bd.prototype.prepare=function(){for(var a,c=this.edges,b=c.length;b--;)a=c[b].edge,a.b&&a.a||c.splice(b,1);return c.sort(We),c.length};Cd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===
this.site?this.edge.b:this.edge.a}};Ec.prototype={insert:function(a,c){var b,g,d;if(a){if(c.P=a,c.N=a.N,a.N&&(a.N.P=c),a.N=c,a.R){for(a=a.R;a.L;)a=a.L;a.L=c}else a.R=c;b=a}else this._?(a=nc(this._),c.P=null,c.N=a,a.P=a.L=c,b=a):(c.P=c.N=null,this._=c,b=null);c.L=c.R=null;c.U=b;c.C=!0;for(a=c;b&&b.C;)g=b.U,b===g.L?(d=g.R,d&&d.C?(b.C=d.C=!1,g.C=!0,a=g):(a===b.R&&(Db(this,b),a=b,b=a.U),b.C=!1,g.C=!0,Dd(this,g))):(d=g.L,d&&d.C?(b.C=d.C=!1,g.C=!0,a=g):(a===b.L&&(Dd(this,b),a=b,b=a.U),b.C=!1,g.C=!0,Db(this,
g))),b=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var c,b,g,d=a.U,e=a.L,k=a.R;if(b=e?k?nc(k):e:k,d?d.L===a?d.L=b:d.R=b:this._=b,e&&k?(g=b.C,b.C=a.C,b.L=e,e.U=b,b!==k?(d=b.U,b.U=a.U,a=b.R,d.L=a,b.R=k,k.U=b):(b.U=d,d=b,a=b.R)):(g=a.C,a=b),a&&(a.U=d),!g){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===d.L){if(c=d.R,c.C&&(c.C=!1,d.C=!0,Db(this,d),c=d.R),c.L&&c.L.C||c.R&&c.R.C){c.R&&c.R.C||(c.L.C=!1,c.C=!0,Dd(this,c),c=d.R);c.C=d.C;d.C=c.R.C=!1;Db(this,
d);a=this._;break}}else if(c=d.L,c.C&&(c.C=!1,d.C=!0,Dd(this,d),c=d.L),c.L&&c.L.C||c.R&&c.R.C){c.L&&c.L.C||(c.R.C=!1,c.C=!0,Db(this,c),c=d.L);c.C=d.C;d.C=c.L.C=!1;Dd(this,d);a=this._;break}c.C=!0;a=d;d=d.U}while(!a.C);a&&(a.C=!1)}}};E.geom.voronoi=function(a){function c(a){var g=Array(a.length),d=n[0][0],e=n[0][1],k=n[1][0],f=n[1][1];return Be(b(a),n).cells.forEach(function(c,b){var n=c.edges,m=c.site;(g[b]=n.length?n.map(function(a){a=a.start();return[a.x,a.y]}):m.x>=d&&m.x<=k&&m.y>=e&&m.y<=f?[[d,
f],[k,f],[k,e],[d,e]]:[]).point=a[b]}),g}function b(a){return a.map(function(a,c){return{x:Math.round(e(a,c)/fa)*fa,y:Math.round(k(a,c)/fa)*fa,i:c}})}var g=hd,d=ae,e=g,k=d,n=$f;return a?c(a):(c.links=function(a){return Be(b(a)).edges.filter(function(a){return a.l&&a.r}).map(function(c){return{source:a[c.l.i],target:a[c.r.i]}})},c.triangles=function(a){var c=[];return Be(b(a)).cells.forEach(function(b,g){for(var d,e=b.site,k=b.edges.sort(We),n=-1,f=k.length,m=k[f-1].edge,m=m.l===e?m.r:m.l;++n<f;)d=
m,m=k[n].edge,m=m.l===e?m.r:m.l,g<d.i&&g<m.i&&0>(e.x-m.x)*(d.y-e.y)-(e.x-d.x)*(m.y-e.y)&&c.push([a[g],a[d.i],a[m.i]])}),c},c.x=function(a){return arguments.length?(e=ta(g=a),c):g},c.y=function(a){return arguments.length?(k=ta(d=a),c):d},c.clipExtent=function(a){return arguments.length?(n=null==a?$f:a,c):n===$f?null:n},c.size=function(a){return arguments.length?c.clipExtent(a&&[[0,0],a]):n===$f?null:n&&n[1]},c)};var $f=[[-1E6,-1E6],[1E6,1E6]];E.geom.delaunay=function(a){return E.geom.voronoi().triangles(a)};
E.geom.quadtree=function(a,c,b,g,d){function e(a){function m(a,c,b,g,d,e,k,n){if(!isNaN(b)&&!isNaN(g))if(a.leaf){var f=a.x,l=a.y;if(null!=f){if(!(0.01>Ba(f-b)+Ba(l-g))){var u=a.point;a.x=a.y=a.point=null;v(a,u,f,l,d,e,k,n)}v(a,c,b,g,d,e,k,n)}else a.x=b,a.y=g,a.point=c}else v(a,c,b,g,d,e,k,n)}function v(a,c,b,g,d,e,k,n){var f=0.5*(d+k),l=0.5*(e+n),u=b>=f,y=g>=l,p=(y<<1)+u;a.leaf=!1;a=a.nodes[p]||(a.nodes[p]=Ed());u?d=f:k=f;y?e=l:n=l;m(a,c,b,g,d,e,k,n)}var l,u,y,p,z,A,U,C,B,D=ta(n),G=ta(f);if(null!=
c)A=c,U=b,C=g,B=d;else if(C=B=-(A=U=1/0),u=[],y=[],z=a.length,k)for(p=0;z>p;++p)l=a[p],l.x<A&&(A=l.x),l.y<U&&(U=l.y),l.x>C&&(C=l.x),l.y>B&&(B=l.y),u.push(l.x),y.push(l.y);else for(p=0;z>p;++p){var J=+D(l=a[p],p);l=+G(l,p);A>J&&(A=J);U>l&&(U=l);J>C&&(C=J);l>B&&(B=l);u.push(J);y.push(l)}J=C-A;l=B-U;J>l?B=U+J:C=A+l;var X=Ed();if(X.add=function(a){m(X,a,+D(a,++p),+G(a,p),A,U,C,B)},X.visit=function(a){Fd(a,X,A,U,C,B)},p=-1,null==c){for(;++p<z;)m(X,a[p],u[p],y[p],A,U,C,B);--p}else a.forEach(X.add);return u=
y=a=l=null,X}var k,n=hd,f=ae;return(k=arguments.length)?(n=vf,f=tc,3===k&&(d=b,g=c,b=c=0),e(a)):(e.x=function(a){return arguments.length?(n=a,e):n},e.y=function(a){return arguments.length?(f=a,e):f},e.extent=function(a){return arguments.length?(null==a?c=b=g=d=null:(c=+a[0][0],b=+a[0][1],g=+a[1][0],d=+a[1][1]),e):null==c?null:[[c,b],[g,d]]},e.size=function(a){return arguments.length?(null==a?c=b=g=d=null:(c=b=0,g=+a[0],d=+a[1]),e):null==c?null:[g-c,d-b]},e)};E.interpolateRgb=Gd;E.interpolateObject=
sa;E.interpolateNumber=gc;E.interpolateString=uc;var wf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;E.interpolate=Vc;E.interpolators=[function(a,c){var b=typeof c;return("string"===b?mf.has(c)||/^(#|rgb\(|hsl\()/.test(c)?Gd:uc:c instanceof ma?Gd:"object"===b?Array.isArray(c)?hb:sa:gc)(a,c)}];E.interpolateArray=hb;var rh=function(){return Ca},Uh=E.map({linear:rh,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return hg},cubic:function(){return Ye},sin:function(){return De},
exp:function(){return Ee},circle:function(){return xf},elastic:function(a,c){var b;return 2>arguments.length&&(c=0.45),arguments.length?b=c/lc*Math.asin(1/a):(a=1,b=c/4),function(g){return 1+a*Math.pow(2,-10*g)*Math.sin((g-b)*lc/c)}},back:function(a){return a||(a=1.70158),function(c){return c*c*((a+1)*c-a)}},bounce:function(){return ig}}),Vh=E.map({"in":Ca,out:Hd,"in-out":Id,"out-in":function(a){return Id(Hd(a))}});E.ease=function(a){var c=a.indexOf("-"),b=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+
1):"in";return b=Uh.get(b)||rh,c=Vh.get(c)||Ca,ge(c(b.apply(null,eh.call(arguments,1))))};E.interpolateHcl=function(a,c){a=E.hcl(a);c=E.hcl(c);var b=a.h,g=a.c,d=a.l,e=c.h-b,k=c.c-g,n=c.l-d;return isNaN(k)&&(k=0,g=isNaN(g)?c.c:g),isNaN(e)?(e=0,b=isNaN(b)?c.h:b):180<e?e-=360:-180>e&&(e+=360),function(a){return Aa(b+e*a,g+k*a,d+n*a)+""}};E.interpolateHsl=function(a,c){a=E.hsl(a);c=E.hsl(c);var b=a.h,g=a.s,d=a.l,e=c.h-b,k=c.s-g,n=c.l-d;return isNaN(k)&&(k=0,g=isNaN(g)?c.s:g),isNaN(e)?(e=0,b=isNaN(b)?
c.h:b):180<e?e-=360:-180>e&&(e+=360),function(a){return la(b+e*a,g+k*a,d+n*a)+""}};E.interpolateLab=function(a,c){a=E.lab(a);c=E.lab(c);var b=a.l,g=a.a,d=a.b,e=c.l-b,k=c.a-g,n=c.b-d;return function(a){return Va(b+e*a,g+k*a,d+n*a)+""}};E.interpolateRound=Fe;E.transform=function(a){var c=Rc.createElementNS(E.ns.prefix.svg,"g");return(E.transform=function(a){if(null!=a){c.setAttribute("transform",a);var b=c.transform.baseVal.consolidate()}return new Ge(b?b.matrix:Wh)})(a)};Ge.prototype.toString=function(){return"translate("+
this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Wh={a:1,b:0,c:0,d:1,e:0,f:0};E.interpolateTransform=$e;E.layout={};E.layout.bundle=function(){return function(a){for(var c=[],b=-1,g=a.length;++b<g;)c.push(Kd(a[b]));return c}};E.layout.chord=function(){function a(){var m,l,u,y,p,z={},A=[],U=E.range(e),C=[];b=[];g=[];m=0;for(y=-1;++y<e;){l=0;for(p=-1;++p<e;)l+=d[y][p];A.push(l);C.push(E.range(e));m+=l}k&&U.sort(function(a,c){return k(A[a],A[c])});n&&C.forEach(function(a,
c){a.sort(function(a,b){return n(d[c][a],d[c][b])})});m=(lc-v*e)/m;l=0;for(y=-1;++y<e;){u=l;for(p=-1;++p<e;){var B=U[y],D=C[B][p],G=d[B][D],J=l,X=l+=G*m;z[B+"-"+D]={index:B,subindex:D,startAngle:J,endAngle:X,value:G}}g[B]={index:B,startAngle:u,endAngle:l,value:(l-u)/m};l+=v}for(y=-1;++y<e;)for(p=y-1;++p<e;)m=z[y+"-"+p],l=z[p+"-"+y],(m.value||l.value)&&b.push(m.value<l.value?{source:l,target:m}:{source:m,target:l});f&&c()}function c(){b.sort(function(a,c){return f((a.source.value+a.target.value)/2,
(c.source.value+c.target.value)/2)})}var b,g,d,e,k,n,f,m={},v=0;return m.matrix=function(a){return arguments.length?(e=(d=a)&&d.length,b=g=null,m):d},m.padding=function(a){return arguments.length?(v=a,b=g=null,m):v},m.sortGroups=function(a){return arguments.length?(k=a,b=g=null,m):k},m.sortSubgroups=function(a){return arguments.length?(n=a,b=null,m):n},m.sortChords=function(a){return arguments.length?(f=a,b&&c(),m):f},m.chords=function(){return b||a(),b},m.groups=function(){return g||a(),g},m};E.layout.force=
function(){function a(c){return function(a,b,g,d){if(a.point!==c){g=a.cx-c.x;var e=a.cy-c.y;b=d-b;d=g*g+e*e;if(d>b*b/A)return p>d&&(b=a.charge/d,c.px-=g*b,c.py-=e*b),!0;a.point&&d&&p>d&&(b=a.pointCharge/d,c.px-=g*b,c.py-=e*b)}return!a.charge}}function c(a){a.px=E.event.x;a.py=E.event.y;n.resume()}var b,g,d,e,k,n={},f=E.dispatch("start","tick","end"),m=[1,1],v=0.9,l=Xh,u=Yh,y=-30,p=Zh,z=0.1,A=0.64,U=[],C=[];return n.tick=function(){if(0.005>(g*=0.99))return f.end({type:"end",alpha:g=0}),!0;var c,b,
n,l,u,p,A,B,D=U.length,G=C.length;for(b=0;G>b;++b)n=C[b],c=n.source,l=n.target,A=l.x-c.x,B=l.y-c.y,(u=A*A+B*B)&&(u=g*e[b]*((u=Math.sqrt(u))-d[b])/u,A*=u,B*=u,l.x-=A*(p=c.weight/(l.weight+c.weight)),l.y-=B*p,c.x+=A*(p=1-p),c.y+=B*p);if((p=g*z)&&(A=m[0]/2,B=m[1]/2,b=-1,p))for(;++b<D;)n=U[b],n.x+=(A-n.x)*p,n.y+=(B-n.y)*p;if(y)for(yf(c=E.geom.quadtree(U),g,k),b=-1;++b<D;)(n=U[b]).fixed||c.visit(a(n));for(b=-1;++b<D;)n=U[b],n.fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*v,n.y-=(n.py-(n.py=n.y))*v);
f.tick({type:"tick",alpha:g})},n.nodes=function(a){return arguments.length?(U=a,n):U},n.links=function(a){return arguments.length?(C=a,n):C},n.size=function(a){return arguments.length?(m=a,n):m},n.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,n):l},n.distance=n.linkDistance,n.linkStrength=function(a){return arguments.length?(u="function"==typeof a?a:+a,n):u},n.friction=function(a){return arguments.length?(v=+a,n):v},n.charge=function(a){return arguments.length?(y="function"==
typeof a?a:+a,n):y},n.chargeDistance=function(a){return arguments.length?(p=a*a,n):Math.sqrt(p)},n.gravity=function(a){return arguments.length?(z=+a,n):z},n.theta=function(a){return arguments.length?(A=a*a,n):Math.sqrt(A)},n.alpha=function(a){return arguments.length?(a=+a,g?g=0<a?a:0:0<a&&(f.start({type:"start",alpha:g=a}),E.timer(n.tick)),n):g},n.start=function(){function a(g,d){if(!b){b=Array(f);for(n=0;f>n;++n)b[n]=[];for(n=0;m>n;++n){var e=C[n];b[e.source.index].push(e.target);b[e.target.index].push(e.source)}}for(var k=
b[c],n=-1,m=k.length;++n<m;)if(!isNaN(e=k[n][g]))return e;return Math.random()*d}var c,b,g,f=U.length,v=C.length,p=m[0],z=m[1];for(c=0;f>c;++c)(g=U[c]).index=c,g.weight=0;for(c=0;v>c;++c)g=C[c],"number"==typeof g.source&&(g.source=U[g.source]),"number"==typeof g.target&&(g.target=U[g.target]),++g.source.weight,++g.target.weight;for(c=0;f>c;++c)g=U[c],isNaN(g.x)&&(g.x=a("x",p)),isNaN(g.y)&&(g.y=a("y",z)),isNaN(g.px)&&(g.px=g.x),isNaN(g.py)&&(g.py=g.y);if(d=[],"function"==typeof l)for(c=0;v>c;++c)d[c]=
+l.call(this,C[c],c);else for(c=0;v>c;++c)d[c]=l;if(e=[],"function"==typeof u)for(c=0;v>c;++c)e[c]=+u.call(this,C[c],c);else for(c=0;v>c;++c)e[c]=u;if(k=[],"function"==typeof y)for(c=0;f>c;++c)k[c]=+y.call(this,U[c],c);else for(c=0;f>c;++c)k[c]=y;return n.resume()},n.resume=function(){return n.alpha(0.1)},n.stop=function(){return n.alpha(0)},n.drag=function(){return b||(b=E.behavior.drag().origin(Ca).on("dragstart.force",jg).on("drag.force",c).on("dragend.force",Wc)),arguments.length?(this.on("mouseover.force",
Mb).on("mouseout.force",kg).call(b),void 0):b},E.rebind(n,f,"on")};var Xh=20,Yh=1,Zh=1/0;E.layout.hierarchy=function(){function a(c,k,n){var f=d.call(b,c,k);if(c.depth=k,n.push(c),f&&(m=f.length)){for(var m,v=-1,l=c.children=Array(m),u=0,y=k+1;++v<m;)k=l[v]=a(f[v],y,n),k.parent=c,u+=k.value;g&&l.sort(g);e&&(c.value=u)}else delete c.children,e&&(c.value=+e.call(b,c,k)||0);return c}function c(a,g){var d=a.children,k=0;if(d&&(n=d.length))for(var n,f=-1,m=g+1;++f<n;)k+=c(d[f],m);else e&&(k=+e.call(b,
a,g)||0);return e&&(a.value=k),k}function b(c){var g=[];return a(c,0,g),g}var g=mg,d=af,e=bf;return b.sort=function(a){return arguments.length?(g=a,b):g},b.children=function(a){return arguments.length?(d=a,b):d},b.value=function(a){return arguments.length?(e=a,b):e},b.revalue=function(a){return c(a,0),a},b};E.layout.partition=function(){function a(c,b,g,d){var e=c.children;if(c.x=b,c.y=c.depth*d,c.dx=g,c.dy=d,e&&(k=e.length)){var k,n,f=-1;for(g=c.value?g/c.value:0;++f<k;)a(n=e[f],b,c=n.value*g,d),
b+=c}}function c(a){a=a.children;var b=0;if(a&&(g=a.length))for(var g,d=-1;++d<g;)b=Math.max(b,c(a[d]));return 1+b}function b(e,k){var n=g.call(this,e,k);return a(n[0],0,d[0],d[1]/c(n[0])),n}var g=E.layout.hierarchy(),d=[1,1];return b.size=function(a){return arguments.length?(d=a,b):d},Wb(b,g)};E.layout.pie=function(){function a(e){var k=e.map(function(b,g){return+c.call(a,b,g)}),n=+("function"==typeof g?g.apply(this,arguments):g),f=(("function"==typeof d?d.apply(this,arguments):d)-n)/E.sum(k),m=
E.range(e.length);null!=b&&m.sort(b===sh?function(a,c){return k[c]-k[a]}:function(a,c){return b(e[a],e[c])});var v=[];return m.forEach(function(a){var c;v[a]={data:e[a],value:c=k[a],startAngle:n,endAngle:n+=c*f}}),v}var c=Number,b=sh,g=0,d=lc;return a.value=function(b){return arguments.length?(c=b,a):c},a.sort=function(c){return arguments.length?(b=c,a):b},a.startAngle=function(c){return arguments.length?(g=c,a):g},a.endAngle=function(c){return arguments.length?(d=c,a):d},a};var sh={};E.layout.stack=
function(){function a(n,f){var m=n.map(function(b,g){return c.call(a,b,g)}),v=m.map(function(c){return c.map(function(c,b){return[e.call(a,c,b),k.call(a,c,b)]})}),l=b.call(a,v,f),m=E.permute(m,l),v=E.permute(v,l),u,y,p=g.call(a,v,f),z=m.length,A=m[0].length;for(u=0;A>u;++u)for(d.call(a,m[0][u],y=p[u],v[0][u][1]),l=1;z>l;++l)d.call(a,m[l][u],y+=v[l-1][u][1],v[l][u][1]);return n}var c=Ca,b=Xc,g=df,d=cf,e=ng,k=he;return a.values=function(b){return arguments.length?(c=b,a):c},a.order=function(c){return arguments.length?
(b="function"==typeof c?c:$h.get(c)||Xc,a):b},a.offset=function(c){return arguments.length?(g="function"==typeof c?c:ai.get(c)||df,a):g},a.x=function(c){return arguments.length?(e=c,a):e},a.y=function(c){return arguments.length?(k=c,a):k},a.out=function(c){return arguments.length?(d=c,a):d},a};var $h=E.map({"inside-out":function(a){var c,b=a.length,g=a.map(id),d=a.map(zf),e=E.range(b).sort(function(a,c){return g[a]-g[c]}),k=0,n=0,f=[],m=[];for(a=0;b>a;++a)c=e[a],n>k?(k+=d[c],f.push(c)):(n+=d[c],m.push(c));
return m.reverse().concat(f)},reverse:function(a){return E.range(a.length).reverse()},"default":Xc}),ai=E.map({silhouette:function(a){var c,b,g,d=a.length,e=a[0].length,k=[],n=0,f=[];for(b=0;e>b;++b){for(g=c=0;d>c;c++)g+=a[c][b][1];g>n&&(n=g);k.push(g)}for(b=0;e>b;++b)f[b]=(n-k[b])/2;return f},wiggle:function(a){var c,b,g,d,e,k,n,f,m,v=a.length,l=a[0],u=l.length,y=[];y[0]=f=m=0;for(b=1;u>b;++b){for(d=c=0;v>c;++c)d+=a[c][b][1];e=c=0;for(n=l[b][0]-l[b-1][0];v>c;++c){g=0;for(k=(a[c][b][1]-a[c][b-1][1])/
(2*n);c>g;++g)k+=(a[g][b][1]-a[g][b-1][1])/n;e+=k*a[c][b][1]}y[b]=f-=d?e/d*n:0;m>f&&(m=f)}for(b=0;u>b;++b)y[b]-=m;return y},expand:function(a){var c,b,g,d=a.length,e=a[0].length,k=1/d,n=[];for(b=0;e>b;++b){for(g=c=0;d>c;c++)g+=a[c][b][1];if(g)for(c=0;d>c;c++)a[c][b][1]/=g;else for(c=0;d>c;c++)a[c][b][1]=k}for(b=0;e>b;++b)n[b]=0;return n},zero:df});E.layout.histogram=function(){function a(e,k){var n,f,m=[],v=e.map(b,this),l=g.call(this,v,k),u=d.call(this,l,v,k);k=-1;for(var y=v.length,p=u.length-1,
z=c?1:1/y;++k<p;)n=m[k]=[],n.dx=u[k+1]-(n.x=u[k]),n.y=0;if(0<p)for(k=-1;++k<y;)f=v[k],f>=l[0]&&f<=l[1]&&(n=m[E.bisect(u,f,1,p)-1],n.y+=z,n.push(e[k]));return m}var c=!0,b=Number,g=kd,d=Af;return a.value=function(c){return arguments.length?(b=c,a):b},a.range=function(c){return arguments.length?(g=ta(c),a):g},a.bins=function(c){return arguments.length?(d="number"==typeof c?function(a){return jd(a,c)}:ta(c),a):d},a.frequency=function(b){return arguments.length?(c=!!b,a):c},a};E.layout.tree=function(){function a(e,
k){function n(a,c){var g=a.children,d=a._tree;if(g&&(e=g.length)){for(var e,k,f,m=g[0],v=m,l=-1;++l<e;){f=g[l];n(f,k);var u=f;if(k){for(var y=void 0,p=u,z=u,A=u.parent.children[0],U=p._tree.mod,C=z._tree.mod,B=k._tree.mod,D=A._tree.mod;k=Md(k),p=Ld(p),k&&p;){A=Ld(A);z=Md(z);z._tree.ancestor=u;y=k._tree.prelim+B-p._tree.prelim-U+b(k,p);if(0<y){var G=k._tree.ancestor.parent==u.parent?k._tree.ancestor:v,J=u,X=y,G=G._tree,J=J._tree,F=X/(J.number-G.number);G.change+=F;J.change-=F;J.shift+=X;J.prelim+=
X;J.mod+=X;U+=y;C+=y}B+=k._tree.mod;U+=p._tree.mod;D+=A._tree.mod;C+=z._tree.mod}k&&!Md(z)&&(z._tree.thread=k,z._tree.mod+=B-C);p&&!Ld(A)&&(A._tree.thread=p,A._tree.mod+=U-D,v=u)}k=f}l=e=0;u=a.children;for(v=u.length;0<=--v;)g=u[v]._tree,g.prelim+=e,g.mod+=e,e+=g.shift+(l+=g.change);f=0.5*(m._tree.prelim+f._tree.prelim);c?(d.prelim=c._tree.prelim+b(a,c),d.mod=d.prelim-f):d.prelim=f}else c&&(d.prelim=c._tree.prelim+b(a,c))}function f(a,c){a.x=a._tree.prelim+c;var b=a.children;if(b&&(g=b.length)){var g,
d=-1;for(c+=a._tree.mod;++d<g;)f(b[d],c)}}var m=c.call(this,e,k),v=m[0];wc(v,function(a,c){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:c?c._tree.number+1:0}});n(v);f(v,-v._tree.prelim);var l=ie(v,vc),u=ie(v,Ie),y=ie(v,Cf),p=l.x-b(l,u)/2,z=u.x+b(u,l)/2,A=y.depth||1;return wc(v,d?function(a){a.x*=g[0];a.y=a.depth*g[1];delete a._tree}:function(a){a.x=(a.x-p)/(z-p)*g[0];a.y=a.depth/A*g[1];delete a._tree}),m}var c=E.layout.hierarchy().sort(null).value(null),b=Bf,g=[1,1],d=!1;return a.separation=
function(c){return arguments.length?(b=c,a):b},a.size=function(c){return arguments.length?(d=null==(g=c),a):d?null:g},a.nodeSize=function(c){return arguments.length?(d=null!=(g=c),a):d?g:null},Wb(a,c)};E.layout.pack=function(){function a(e,k){var n=b.call(this,e,k),f=n[0],m=d[0],v=d[1],l=null==c?Math.sqrt:"function"==typeof c?c:function(){return c};if(f.x=f.y=0,wc(f,function(a){a.r=+l(a.value)}),wc(f,gf),g){var u=g*(c?1:Math.max(2*f.r/m,2*f.r/v))/2;wc(f,function(a){a.r+=u});wc(f,gf);wc(f,function(a){a.r-=
u})}return Nd(f,m/2,v/2,c?1:1/Math.max(2*f.r/m,2*f.r/v)),n}var c,b=E.layout.hierarchy().sort(ff),g=0,d=[1,1];return a.size=function(c){return arguments.length?(d=c,a):d},a.radius=function(b){return arguments.length?(c=null==b||"function"==typeof b?b:+b,a):c},a.padding=function(c){return arguments.length?(g=+c,a):g},Wb(a,b)};E.layout.cluster=function(){function a(e,k){var n,f=c.call(this,e,k),m=f[0],v=0;wc(m,function(a){var c=a.children;c&&c.length?(a.x=Le(c),a.y=md(c)):(a.x=n?v+=b(a,n):0,a.y=0,n=
a)});var l=Fc(m),u=Ef(m),y=l.x-b(l,u)/2,p=u.x+b(u,l)/2;return wc(m,d?function(a){a.x=(a.x-m.x)*g[0];a.y=(m.y-a.y)*g[1]}:function(a){a.x=(a.x-y)/(p-y)*g[0];a.y=(1-(m.y?a.y/m.y:1))*g[1]}),f}var c=E.layout.hierarchy().sort(null).value(null),b=Bf,g=[1,1],d=!1;return a.separation=function(c){return arguments.length?(b=c,a):b},a.size=function(c){return arguments.length?(d=null==(g=c),a):d?null:g},a.nodeSize=function(c){return arguments.length?(d=null!=(g=c),a):d?g:null},Wb(a,c)};E.layout.treemap=function(){function a(c,
b){for(var g,d,e=-1,k=c.length;++e<k;)d=(g=c[e]).value*(0>b?0:b),g.area=isNaN(d)||0>=d?0:d}function c(b){var d=b.children;if(d&&d.length){var e,k=v(b),n=[],f=d.slice(),m=1/0,l="slice"===u?k.dx:"dice"===u?k.dy:"slice-dice"===u?1&b.depth?k.dy:k.dx:Math.min(k.dx,k.dy);a(f,k.dx*k.dy/b.value);for(n.area=0;0<(b=f.length);){n.push(b=f[b-1]);n.area+=b.area;var p;if(!(p="squarify"!==u)){b=l;e=void 0;var z=n.area;p=0;for(var A=1/0,U=-1,C=n.length;++U<C;)(e=n[U].area)&&(A>e&&(A=e),e>p&&(p=e));p=(e=(z*=z,b*=
b,z?Math.max(b*p*y/z,z/(b*A*y)):1/0))<=m}p?(f.pop(),m=e):(n.area-=n.pop().area,g(n,l,k,!1),l=Math.min(k.dx,k.dy),n.length=n.area=0,m=1/0)}n.length&&(g(n,l,k,!0),n.length=n.area=0);d.forEach(c)}}function b(c){var d=c.children;if(d&&d.length){var e=v(c),k=d.slice(),n=[];a(k,e.dx*e.dy/c.value);for(n.area=0;c=k.pop();)n.push(c),n.area+=c.area,null!=c.z&&(g(n,c.z?e.dx:e.dy,e,!k.length),n.length=n.area=0);d.forEach(b)}}function g(a,c,b,d){var e,k=-1,f=a.length,m=b.x,v=b.y,l=c?n(a.area/c):0;if(c==b.dx){for((d||
l>b.dy)&&(l=b.dy);++k<f;)e=a[k],e.x=m,e.y=v,e.dy=l,m+=e.dx=Math.min(b.x+b.dx-m,l?n(e.area/l):0);e.z=!0;e.dx+=b.x+b.dx-m;b.y+=l;b.dy-=l}else{for((d||l>b.dx)&&(l=b.dx);++k<f;)e=a[k],e.x=m,e.y=v,e.dx=l,v+=e.dy=Math.min(b.y+b.dy-v,l?n(e.area/l):0);e.z=!1;e.dy+=b.y+b.dy-v;b.x+=l;b.dx-=l}}function d(g){g=e||k(g);var n=g[0];return n.x=0,n.y=0,n.dx=f[0],n.dy=f[1],e&&k.revalue(n),a([n],n.dx*n.dy/n.value),(e?b:c)(n),l&&(e=g),g}var e,k=E.layout.hierarchy(),n=Math.round,f=[1,1],m=null,v=Od,l=!1,u="squarify",
y=0.5*(1+Math.sqrt(5));return d.size=function(a){return arguments.length?(f=a,d):f},d.padding=function(a){function c(b){var g=a.call(d,b,b.depth);return null==g?Od(b):Oc(b,"number"==typeof g?[g,g,g,g]:g)}function b(c){return Oc(c,a)}if(!arguments.length)return m;var g;return v=null==(m=a)?Od:"function"==(g=typeof a)?c:"number"===g?(a=[a,a,a,a],b):b,d},d.round=function(a){return arguments.length?(n=a?Math.round:Number,d):n!=Number},d.sticky=function(a){return arguments.length?(l=a,e=null,d):l},d.ratio=
function(a){return arguments.length?(y=a,d):y},d.mode=function(a){return arguments.length?(u=a+"",d):u},Wb(d,k)};E.random={normal:function(a,c){var b=arguments.length;return 2>b&&(c=1),1>b&&(a=0),function(){var b,g;do b=2*Math.random()-1,g=2*Math.random()-1,g=b*b+g*g;while(!g||1<g);return a+c*b*Math.sqrt(-2*Math.log(g)/g)}},logNormal:function(){var a=E.random.normal.apply(E,arguments);return function(){return Math.exp(a())}},bates:function(a){var c=E.random.irwinHall(a);return function(){return c()/
a}},irwinHall:function(a){return function(){for(var c=0,b=0;a>b;b++)c+=Math.random();return c}}};E.scale={};var Bh={floor:Ca,ceil:Ca};E.scale.linear=function(){return Pc([0,1],[0,1],Vc,!1)};var Ch={s:1,g:1,p:1,r:1,e:1};E.scale.log=function(){return Gf(E.scale.linear().domain([0,1]),10,!0,[1,10])};var Vg=E.format(".0e"),Dh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};E.scale.pow=function(){return Hf(E.scale.linear(),1,[0,1])};E.scale.sqrt=function(){return E.scale.pow().exponent(0.5)};
E.scale.ordinal=function(){return Oe([],{t:"range",a:[[]]})};E.scale.category10=function(){return E.scale.ordinal().range(bi)};E.scale.category20=function(){return E.scale.ordinal().range(ci)};E.scale.category20b=function(){return E.scale.ordinal().range(di)};E.scale.category20c=function(){return E.scale.ordinal().range(ei)};var bi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(db),ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,
9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(db),di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(db),ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(db);E.scale.quantile=
function(){return Zc([],[])};E.scale.quantize=function(){return If(0,1,[0,1])};E.scale.threshold=function(){return hf([0.5],[0,1])};E.scale.identity=function(){return Qc([0,1])};E.svg={};E.svg.arc=function(){function a(){var e=c.apply(this,arguments),k=b.apply(this,arguments),n=g.apply(this,arguments)+ne,f=d.apply(this,arguments)+ne,m=(n>f&&(m=n,n=f,f=m),f-n),v=za>m?"0":"1",l=Math.cos(n),n=Math.sin(n),u=Math.cos(f),f=Math.sin(f);return m>=fi?e?"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+
k+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"Z":e?"M"+k*l+","+k*n+"A"+k+","+k+" 0 "+v+",1 "+k*u+","+k*f+"L"+e*u+","+e*f+"A"+e+","+e+" 0 "+v+",0 "+e*l+","+e*n+"Z":"M"+k*l+","+k*n+"A"+k+","+k+" 0 "+v+",1 "+k*u+","+k*f+"L0,0Z"}var c=me,b=qg,g=U,d=X;return a.innerRadius=function(b){return arguments.length?(c=ta(b),a):c},a.outerRadius=function(c){return arguments.length?(b=ta(c),a):b},a.startAngle=function(c){return arguments.length?
(g=ta(c),a):g},a.endAngle=function(c){return arguments.length?(d=ta(c),a):d},a.centroid=function(){var a=(c.apply(this,arguments)+b.apply(this,arguments))/2,e=(g.apply(this,arguments)+d.apply(this,arguments))/2+ne;return[Math.cos(e)*a,Math.sin(e)*a]},a};var ne=-ac,fi=lc-fa;E.svg.line=function(){return Ib(Ca)};var rg=E.map({linear:xc,"linear-closed":function(a){return xc(a)+"Z"},step:function(a){for(var c=0,b=a.length,g=a[0],d=[g[0],",",g[1]];++c<b;)d.push("H",(g[0]+(g=a[c])[0])/2,"V",g[1]);return 1<
b&&d.push("H",g[0]),d.join("")},"step-before":sg,"step-after":tg,basis:Wg,"basis-open":function(a){if(4>a.length)return xc(a);for(var c,b=[],g=-1,d=a.length,e=[0],k=[0];3>++g;)c=a[g],e.push(c[0]),k.push(c[1]);b.push(Gc(Sd,e)+","+Gc(Sd,k));for(--g;++g<d;)c=a[g],e.shift(),e.push(c[0]),k.shift(),k.push(c[1]),vg(b,e,k);return b.join("")},"basis-closed":function(a){for(var c,b,g=-1,d=a.length,e=d+4,k=[],n=[];4>++g;)b=a[g%d],k.push(b[0]),n.push(b[1]);c=[Gc(Sd,k),",",Gc(Sd,n)];for(--g;++g<e;)b=a[g%d],k.shift(),
k.push(b[0]),n.shift(),n.push(b[1]),vg(c,k,n);return c.join("")},bundle:function(a,c){var b=a.length-1;if(b)for(var g,d,e=a[0][0],k=a[0][1],n=a[b][0]-e,f=a[b][1]-k,m=-1;++m<=b;)g=a[m],d=m/b,g[0]=c*g[0]+(1-c)*(e+d*n),g[1]=c*g[1]+(1-c)*(k+d*f);return Wg(a)},cardinal:function(a,c){return 3>a.length?xc(a):a[0]+Jf(a,ug(a,c))},"cardinal-open":function(a,c){return 4>a.length?xc(a):a[1]+Jf(a.slice(1,a.length-1),ug(a,c))},"cardinal-closed":function(a,c){return 3>a.length?xc(a):a[0]+Jf((a.push(a[0]),a),ug([a[a.length-
2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>a.length)a=xc(a);else{var c=a[0],b,g,d,e,k=[],n;b=0;n=a.length-1;for(var f=[],m=a[1],v=f[0]=wg(a[0],m);++b<n;)f[b]=(v+(v=wg(m,m=a[b+1])))/2;n=(f[b]=v,f);f=-1;for(m=a.length-1;++f<m;)b=wg(a[f],a[f+1]),Ba(b)<fa?n[f]=n[f+1]=0:(g=n[f]/b,d=n[f+1]/b,e=g*g+d*d,9<e&&(e=3*b/Math.sqrt(e),n[f]=e*g,n[f+1]=e*d));for(f=-1;++f<=m;)e=(a[Math.min(m,f+1)][0]-a[Math.max(0,f-1)][0])/(6*(1+n[f]*n[f])),k.push([e||0,n[f]*e||0]);a=c+Jf(a,k)}return a}});rg.forEach(function(a,
c){c.key=a;c.closed=/-closed$/.test(a)});var Xg=[0,2/3,1/3,0],Yg=[0,1/3,2/3,0],Sd=[0,1/6,2/3,1/6];E.svg.line.radial=function(){var a=Ib(Zg);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};sg.reverse=tg;tg.reverse=sg;E.svg.area=function(){return $g(Ca)};E.svg.area.radial=function(){var a=$g(Zg);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};E.svg.chord=function(){function a(e,
k){var n=c(this,g,e,k),f=c(this,d,e,k);return"M"+n.p0+b(n.r,n.p1,n.a1-n.a0)+(n.a0==f.a0&&n.a1==f.a1?"Q 0,0 "+n.p0:"Q 0,0 "+f.p0+b(f.r,f.p1,f.a1-f.a0)+("Q 0,0 "+n.p0))+"Z"}function c(a,b,g,d){var f=b.call(a,g,d);b=e.call(a,f,d);g=k.call(a,f,d)+ne;a=n.call(a,f,d)+ne;return{r:b,a0:g,a1:a,p0:[b*Math.cos(g),b*Math.sin(g)],p1:[b*Math.cos(a),b*Math.sin(a)]}}function b(a,c,g){return"A"+a+","+a+" 0 "+ +(g>za)+",1 "+c}var g=Zd,d=ec,e=Eh,k=U,n=X;return a.radius=function(c){return arguments.length?(e=ta(c),a):
e},a.source=function(c){return arguments.length?(g=ta(c),a):g},a.target=function(c){return arguments.length?(d=ta(c),a):d},a.startAngle=function(c){return arguments.length?(k=ta(c),a):k},a.endAngle=function(c){return arguments.length?(n=ta(c),a):n},a};E.svg.diagonal=function(){function a(d,e){var k=c.call(this,d,e),n=b.call(this,d,e),f=(k.y+n.y)/2,k=[k,{x:k.x,y:f},{x:n.x,y:f},n];return k=k.map(g),"M"+k[0]+"C"+k[1]+" "+k[2]+" "+k[3]}var c=Zd,b=ec,g=ah;return a.source=function(b){return arguments.length?
(c=ta(b),a):c},a.target=function(c){return arguments.length?(b=ta(c),a):b},a.projection=function(c){return arguments.length?(g=c,a):g},a};E.svg.diagonal.radial=function(){var a=E.svg.diagonal(),c=ah,b=a.projection;return a.projection=function(a){return arguments.length?b(Fh(c=a)):c},a};E.svg.symbol=function(){function a(g,d){return(th.get(c.call(this,g,d))||bh)(b.call(this,g,d))}var c=Hh,b=Gh;return a.type=function(b){return arguments.length?(c=ta(b),a):c},a.size=function(c){return arguments.length?
(b=ta(c),a):b},a};var th=E.map({circle:bh,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*uh));var c=a*uh;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/ag);var c=a*ag/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=
Math.sqrt(a/ag);var c=a*ag/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});E.svg.symbolTypes=th.keys();var pe,Nf,ag=Math.sqrt(3),uh=Math.tan(30*wa),zb=[],ih=0;zb.call=Ma.call;zb.empty=Ma.empty;zb.node=Ma.node;zb.size=Ma.size;E.transition=function(a){return arguments.length?pe?a.transition():a:hh.transition()};E.transition.prototype=zb;zb.select=function(a){var c,b,g,d=this.id,e=[];a=z(a);for(var k=-1,n=this.length;++k<n;){e.push(c=[]);for(var f=this[k],m=-1,v=f.length;++m<v;)(g=f[m])&&(b=a.call(g,
g.__data__,m,k))?("__data__"in g&&(b.__data__=g.__data__),Kf(b,m,d,g.__transition__[d]),c.push(b)):c.push(null)}return jf(e,d)};zb.selectAll=function(a){var c,b,g,d,e=this.id,k=[];a=A(a);for(var n=-1,f=this.length;++n<f;)for(var m=this[n],v=-1,l=m.length;++v<l;)if(c=m[v]){d=c.__transition__[e];b=a.call(c,c.__data__,v,n);k.push(c=[]);for(var u=-1,y=b.length;++u<y;)(g=b[u])&&Kf(g,u,e,d),c.push(g)}return jf(k,e)};zb.filter=function(a){var c,b,g,d=[];"function"!=typeof a&&(a=H(a));for(var e=0,k=this.length;k>
e;e++){d.push(c=[]);b=this[e];for(var n=0,f=b.length;f>n;n++)(g=b[n])&&a.call(g,g.__data__,n,e)&&c.push(g)}return jf(d,this.id)};zb.tween=function(a,c){var b=this.id;return 2>arguments.length?this.node().__transition__[b].tween.get(a):K(this,null==c?function(c){c.__transition__[b].tween.remove(a)}:function(g){g.__transition__[b].tween.set(a,c)})};zb.attr=function(a,c){function b(){this.removeAttribute(n)}function g(){this.removeAttributeNS(n.space,n.local)}function d(a){return null==a?b:(a+="",function(){var c,
b=this.getAttribute(n);return b!==a&&(c=k(b,a),function(a){this.setAttribute(n,c(a))})})}function e(a){return null==a?g:(a+="",function(){var c,b=this.getAttributeNS(n.space,n.local);return b!==a&&(c=k(b,a),function(a){this.setAttributeNS(n.space,n.local,c(a))})})}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var k="transform"==a?$e:Vc,n=E.ns.qualify(a);return xg(this,"attr."+a,c,n.local?e:d)};zb.attrTween=function(a,c){function b(a,g){var e=c.call(this,a,g,this.getAttribute(d));
return e&&function(a){this.setAttribute(d,e(a))}}function g(a,b){var e=c.call(this,a,b,this.getAttributeNS(d.space,d.local));return e&&function(a){this.setAttributeNS(d.space,d.local,e(a))}}var d=E.ns.qualify(a);return this.tween("attr."+a,d.local?g:b)};zb.style=function(a,c,b){function g(){this.style.removeProperty(a)}var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(c="");for(b in a)this.style(b,a[b],c);return this}b=""}return xg(this,"style."+a,c,function(c){return null==c?g:(c+="",function(){var g,
d=Nb.getComputedStyle(this,null).getPropertyValue(a);return d!==c&&(g=Vc(d,c),function(c){this.style.setProperty(a,g(c),b)})})})};zb.styleTween=function(a,c,b){return 3>arguments.length&&(b=""),this.tween("style."+a,function(g,d){var e=c.call(this,g,d,Nb.getComputedStyle(this,null).getPropertyValue(a));return e&&function(c){this.style.setProperty(a,e(c),b)}})};zb.text=function(a){return xg(this,"text",a,Ih)};zb.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&
(a=this.parentNode)&&a.removeChild(this)})};zb.ease=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].ease:("function"!=typeof a&&(a=E.ease.apply(E,arguments)),K(this,function(b){b.__transition__[c].ease=a}))};zb.delay=function(a){var c=this.id;return K(this,"function"==typeof a?function(b,g,d){b.__transition__[c].delay=+a.call(b,b.__data__,g,d)}:(a=+a,function(b){b.__transition__[c].delay=a}))};zb.duration=function(a){var c=this.id;return K(this,"function"==typeof a?
function(b,g,d){b.__transition__[c].duration=Math.max(1,a.call(b,b.__data__,g,d))}:(a=Math.max(1,a),function(b){b.__transition__[c].duration=a}))};zb.each=function(a,c){var b=this.id;if(2>arguments.length){var g=Nf,d=pe;pe=b;K(this,function(c,g,d){Nf=c.__transition__[b];a.call(c,c.__data__,g,d)});Nf=g;pe=d}else K(this,function(g){g=g.__transition__[b];(g.event||(g.event=E.dispatch("start","end"))).on(a,c)});return this};zb.transition=function(){for(var a,c,b,g,d=this.id,e=++ih,k=[],n=0,f=this.length;f>
n;n++){k.push(a=[]);c=this[n];for(var m=0,v=c.length;v>m;m++)(b=c[m])&&(g=Object.create(b.__transition__[d]),g.delay+=g.duration,Kf(b,m,e,g)),a.push(b)}return jf(k,e)};E.svg.axis=function(){function a(m){m.each(function(){var a,m=E.select(this),v=this.__chart__||b,l=this.__chart__=b.copy(),u=null==f?l.ticks?l.ticks.apply(l,n):l.domain():f,y=null==c?l.tickFormat?l.tickFormat.apply(l,n):Ca:c,p=m.selectAll(".tick").data(u,l),u=p.enter().insert("g",".domain").attr("class","tick").style("opacity",fa),
z=E.transition(p.exit()).style("opacity",fa).remove(),A=E.transition(p).style("opacity",1),U=Me(l),m=m.selectAll(".domain").data([0]),m=(m.enter().append("path").attr("class","domain"),E.transition(m));u.append("line");u.append("text");var C=u.select("line"),B=A.select("line"),y=p.select("text").text(y),p=u.select("text"),D=A.select("text");switch(g){case "bottom":a=ch;C.attr("y2",d);p.attr("y",Math.max(d,0)+k);B.attr("x2",0).attr("y2",d);D.attr("x",0).attr("y",Math.max(d,0)+k);y.attr("dy",".71em").style("text-anchor",
"middle");m.attr("d","M"+U[0]+","+e+"V0H"+U[1]+"V"+e);break;case "top":a=ch;C.attr("y2",-d);p.attr("y",-(Math.max(d,0)+k));B.attr("x2",0).attr("y2",-d);D.attr("x",0).attr("y",-(Math.max(d,0)+k));y.attr("dy","0em").style("text-anchor","middle");m.attr("d","M"+U[0]+","+-e+"V0H"+U[1]+"V"+-e);break;case "left":a=dh;C.attr("x2",-d);p.attr("x",-(Math.max(d,0)+k));B.attr("x2",-d).attr("y2",0);D.attr("x",-(Math.max(d,0)+k)).attr("y",0);y.attr("dy",".32em").style("text-anchor","end");m.attr("d","M"+-e+","+
U[0]+"H0V"+U[1]+"H"+-e);break;case "right":a=dh,C.attr("x2",d),p.attr("x",Math.max(d,0)+k),B.attr("x2",d).attr("y2",0),D.attr("x",Math.max(d,0)+k).attr("y",0),y.attr("dy",".32em").style("text-anchor","start"),m.attr("d","M"+e+","+U[0]+"H0V"+U[1]+"H"+e)}if(l.rangeBand)var G=l,J=G.rangeBand()/2,v=l=function(a){return G(a)+J};else v.rangeBand?v=l:z.call(a,l);u.call(a,v);A.call(a,l)})}var c,b=E.scale.linear(),g=vh,d=6,e=6,k=3,n=[10],f=null;return a.scale=function(c){return arguments.length?(b=c,a):b},
a.orient=function(c){return arguments.length?(g=c in gi?c+"":vh,a):g},a.ticks=function(){return arguments.length?(n=arguments,a):n},a.tickValues=function(c){return arguments.length?(f=c,a):f},a.tickFormat=function(b){return arguments.length?(c=b,a):c},a.tickSize=function(c){var b=arguments.length;return b?(d=+c,e=+arguments[b-1],a):d},a.innerTickSize=function(c){return arguments.length?(d=+c,a):d},a.outerTickSize=function(c){return arguments.length?(e=+c,a):e},a.tickPadding=function(c){return arguments.length?
(k=+c,a):k},a.tickSubdivide=function(){return arguments.length&&a},a};var vh="bottom",gi={top:1,right:1,bottom:1,left:1};E.svg.brush=function(){function a(c){c.each(function(){var c=E.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),k=c.selectAll(".background").data([0]);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");c.selectAll(".extent").data([0]).enter().append("rect").attr("class",
"extent").style("cursor","move");var n=c.selectAll(".resize").data(A,Ca);n.exit().remove();n.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return hi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");n.style("display",a.empty()?"none":null);var f,c=E.transition(c),k=E.transition(k);m&&(f=Me(m),k.attr("x",f[0]).attr("width",
f[1]-f[0]),g(c));l&&(f=Me(l),k.attr("y",f[0]).attr("height",f[1]-f[0]),d(c));b(c)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+u[+/e$/.test(a)]+","+y[+/^s/.test(a)]+")"})}function g(a){a.select(".extent").attr("x",u[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function d(a){a.select(".extent").attr("y",y[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",y[1]-y[0])}function e(){function v(){var a=E.mouse(D),c=!1;B&&(a[0]+=B[0],
a[1]+=B[1]);x||(E.event.altKey?(C||(C=[(u[0]+u[1])/2,(y[0]+y[1])/2]),r[0]=u[+(a[0]<C[0])],r[1]=y[+(a[1]<C[1])]):C=null);q&&A(a,m,0)&&(g(X),c=!0);H&&A(a,l,1)&&(d(X),c=!0);c&&(b(X),J({type:"brush",mode:x?"move":"resize"}))}function A(a,c,b){var g,d,e=Me(c);c=e[0];var e=e[1],f=r[b],m=b?y:u,v=m[1]-m[0];return x&&(c-=f,e-=v+f),g=(b?z:p)?Math.max(c,Math.min(e,a[b])):a[b],x?d=(g+=f)+v:(C&&(f=Math.max(c,Math.min(e,2*C[b]-g))),g>f?(d=g,g=f):d=f),m[0]!=g||m[1]!=d?(b?n=null:k=null,m[0]=g,m[1]=d,!0):void 0}function U(){v();
X.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);E.select("body").style("cursor",null);M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);s();J({type:"brushend"})}var C,B,D=this,G=E.select(E.event.target),J=f.of(D,arguments),X=E.select(D),F=G.datum(),q=!/^(n|s)$/.test(F)&&m,H=!/^(e|w)$/.test(F)&&l,x=G.classed("extent"),s=Z(),r=E.mouse(D),M=E.select(Nb).on("keydown.brush",
function(){32==E.event.keyCode&&(x||(C=null,r[0]-=u[1],r[1]-=y[1],x=2),c())}).on("keyup.brush",function(){32==E.event.keyCode&&2==x&&(r[0]+=u[1],r[1]+=y[1],x=0,c())});if(E.event.changedTouches?M.on("touchmove.brush",v).on("touchend.brush",U):M.on("mousemove.brush",v).on("mouseup.brush",U),X.interrupt().selectAll("*").interrupt(),x)r[0]=u[0]-r[0],r[1]=y[0]-r[1];else if(F){var fd=+/w$/.test(F),F=+/^n/.test(F);B=[u[1-fd]-r[0],y[1-F]-r[1]];r[0]=u[fd];r[1]=y[F]}else E.event.altKey&&(C=r.slice());X.style("pointer-events",
"none").selectAll(".resize").style("display",null);E.select("body").style("cursor",G.style("cursor"));J({type:"brushstart"});v()}var k,n,f=v(a,"brushstart","brush","brushend"),m=null,l=null,u=[0,0],y=[0,0],p=!0,z=!0,A=Fg[0];return a.event=function(a){a.each(function(){var a=f.of(this,arguments),c={x:u,y:y,i:k,j:n},b=this.__chart__||c;this.__chart__=c;pe?E.select(this).transition().each("start.brush",function(){k=b.i;n=b.j;u=b.x;y=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=hb(u,
c.x),g=hb(y,c.y);return k=n=null,function(d){u=c.x=b(d);y=c.y=g(d);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){k=c.i;n=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(c){return arguments.length?(m=c,A=Fg[!m<<1|!l],a):m},a.y=function(c){return arguments.length?(l=c,A=Fg[!m<<1|!l],a):l},a.clamp=function(c){return arguments.length?(m&&l?(p=!!c[0],z=!!c[1]):m?p=!!c:l&&(z=!!c),a):
m&&l?[p,z]:m?p:l?z:null},a.extent=function(c){var b,g,d,e,f;return arguments.length?(m&&(b=c[0],g=c[1],l&&(b=b[0],g=g[0]),k=[b,g],m.invert&&(b=m(b),g=m(g)),b>g&&(f=b,b=g,g=f),(b!=u[0]||g!=u[1])&&(u=[b,g])),l&&(d=c[0],e=c[1],m&&(d=d[1],e=e[1]),n=[d,e],l.invert&&(d=l(d),e=l(e)),d>e&&(f=d,d=e,e=f),(d!=y[0]||e!=y[1])&&(y=[d,e])),a):(m&&(k?(b=k[0],g=k[1]):(b=u[0],g=u[1],m.invert&&(b=m.invert(b),g=m.invert(g)),b>g&&(f=b,b=g,g=f))),l&&(n?(d=n[0],e=n[1]):(d=y[0],e=y[1],l.invert&&(d=l.invert(d),e=l.invert(e)),
d>e&&(f=d,d=e,e=f))),m&&l?[[b,d],[g,e]]:m?[b,g]:l&&[d,e])},a.clear=function(){return a.empty()||(u=[0,0],y=[0,0],k=n=null),a},a.empty=function(){return!!m&&u[0]==u[1]||!!l&&y[0]==y[1]},E.rebind(a,f,"on")};var hi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fg=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Gg=ga.format=kh.timeFormat,wh=Gg.utc,xh=wh("%Y-%m-%dT%H:%M:%S.%LZ");Gg.iso=Date.prototype.toISOString&&
+new Date("2000-01-01T00:00:00.000Z")?yg:xh;yg.parse=function(a){a=new Date(a);return isNaN(a)?null:a};yg.toString=xh.toString;ga.second=Za(function(a){return new Ob(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});ga.seconds=ga.second.range;ga.seconds.utc=ga.second.utc.range;ga.minute=Za(function(a){return new Ob(6E4*Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+6E4*Math.floor(c))},function(a){return a.getMinutes()});ga.minutes=
ga.minute.range;ga.minutes.utc=ga.minute.utc.range;ga.hour=Za(function(a){var c=a.getTimezoneOffset()/60;return new Ob(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});ga.hours=ga.hour.range;ga.hours.utc=ga.hour.utc.range;ga.month=Za(function(a){return a=ga.day(a),a.setDate(1),a},function(a,c){a.setMonth(a.getMonth()+c)},function(a){return a.getMonth()});ga.months=ga.month.range;ga.months.utc=ga.month.utc.range;var Lf=[1E3,
5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Hg=[[ga.second,1],[ga.second,5],[ga.second,15],[ga.second,30],[ga.minute,1],[ga.minute,5],[ga.minute,15],[ga.minute,30],[ga.hour,1],[ga.hour,3],[ga.hour,6],[ga.hour,12],[ga.day,1],[ga.day,2],[ga.week,1],[ga.month,1],[ga.month,3],[ga.year,1]],ii=Gg.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],
["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Yb]]),Jh={range:function(a,c,b){return E.range(+a,+c,b).map(oe)},floor:Ca,ceil:Ca};Hg.year=ga.year;ga.scale=function(){return zg(E.scale.linear(),Hg,ii)};var yh=Hg.map(function(a){return[a[0].utc,a[1]]}),ji=wh.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],
["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Yb]]);yh.year=ga.year.utc;ga.scale.utc=function(){return zg(E.scale.linear(),yh,ji)};E.text=jb(function(a){return a.responseText});E.json=function(a,c){return eb(a,"application/json",Kh,c)};E.html=function(a,c){return eb(a,"text/html",Lh,c)};E.xml=jb(function(a){return a.responseXML});"function"==
typeof define&&define.amd?define(E):"object"==typeof module&&module.exports?module.exports=E:this.d3=E}();dojoConfig={baseUrl:"js/dojo/dojo/"};Aloha={settings:{sidebar:{disabled:!0}}};/*
 RequireJS 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var requirejs,require,define;
(function(q){function t(a){return"[object Function]"===H.call(a)}function r(a){return"[object Array]"===H.call(a)}function s(a,c){if(a){var b;for(b=0;b<a.length&&(!a[b]||!c(a[b],b,a));b+=1);}}function l(a,c){if(a){var b;for(b=a.length-1;-1<b&&(!a[b]||!c(a[b],b,a));b-=1);}}function b(a,c){for(var b in a)if(a.hasOwnProperty(b)&&c(a[b],b))break}function p(a,c,g,d){c&&b(c,function(c,b){if(g||!S.call(a,b))d&&"string"!==typeof c?(a[b]||(a[b]={}),p(a[b],c,g,d)):a[b]=c});return a}function m(a,c){return function(){return c.apply(a,
arguments)}}function f(a){if(!a)return a;var c=q;s(a.split("."),function(a){c=c[a]});return c}function d(a,c,b){return function(){var g=K.call(arguments,0),d;b&&t(d=g[g.length-1])&&(d.__requireJsBuild=!0);g.push(c);return a.apply(null,g)}}function k(a,c,b){s([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(g){var e=g[1]||g[0];a[g[0]]=c?d(c[e],b):function(){var a=Z[N];return a[e].apply(a,arguments)}})}function e(a,c,b,g){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+
a);c.requireType=a;c.requireModules=g;b&&(c.originalError=b);return c}function n(a){function g(a,c,b){var d,e,k,n,f,m,v,l=c&&c.split("/");d=l;var u=ya.map,y=u&&u["*"];if(a&&"."===a.charAt(0))if(c){d=ya.pkgs[c]?l=[c]:l.slice(0,l.length-1);c=a=d.concat(a.split("/"));for(d=0;c[d];d+=1)if(e=c[d],"."===e)c.splice(d,1),d-=1;else if(".."===e)if(1!==d||".."!==c[2]&&".."!==c[0])0<d&&(c.splice(d-1,2),d-=2);else break;d=ya.pkgs[c=a[0]];a=a.join("/");d&&a===c+"/"+d.main&&(a=c)}else 0===a.indexOf("./")&&(a=a.substring(2));
if(b&&(l||y)&&u){c=a.split("/");for(d=c.length;0<d;d-=1){k=c.slice(0,d).join("/");if(l)for(e=l.length;0<e;e-=1)if(b=u[l.slice(0,e).join("/")])if(b=b[k]){n=b;f=d;break}if(n)break;!m&&y&&y[k]&&(m=y[k],v=d)}!n&&m&&(n=m,f=v);n&&(c.splice(0,f,n),a=c.join("/"))}return a}function n(a){L&&s(document.getElementsByTagName("script"),function(c){if(c.getAttribute("data-requiremodule")===a&&c.getAttribute("data-requirecontext")===ea.contextName)return c.parentNode.removeChild(c),!0})}function v(a){var c=ya.paths[a];
if(c&&r(c)&&1<c.length)return n(a),c.shift(),ea.undef(a),ea.require([a]),!0}function l(a,c,b,d){var e,k,n=a?a.indexOf("!"):-1,f=null,m=c?c.name:null,v=a,u=!0,y="";a||(u=!1,a="_@r"+(jb+=1));-1!==n&&(f=a.substring(0,n),a=a.substring(n+1,a.length));f&&(f=g(f,m,d),k=ta[f]);a&&(f?y=k&&k.normalize?k.normalize(a,function(a){return g(a,m,d)}):g(a,m,d):(y=g(a,m,d),e=ea.nameToUrl(y)));a=!f||k||b?"":"_unnormalized"+(eb+=1);return{prefix:f,name:y,parentMap:c,unnormalized:!!a,url:e,originalName:v,isDefine:u,id:(f?
f+"!"+y:y)+a}}function u(a){var c=a.id,b=oa[c];b||(b=oa[c]=new ea.Module(a));return b}function z(a,c,b){var g=a.id,d=oa[g];if(!S.call(ta,g)||d&&!d.defineEmitComplete)u(a).on(c,b);else"defined"===c&&b(ta[g])}function A(a,b){var g=a.requireModules,d=!1;if(b)b(a);else if(s(g,function(c){if(c=oa[c])c.error=a,c.events.error&&(d=!0,c.emit("error",a))}),!d)c.onError(a)}function C(){Q.length&&(x.apply(xa,[xa.length-1,0].concat(Q)),Q=[])}function B(a,c,b){a=a&&a.map;c=d(b||ea.require,a,c);k(c,ea,a);c.isBrowser=
L;return c}function D(a){delete oa[a];s(Ab,function(c,b){if(c.map.id===a)return Ab.splice(b,1),c.defined||(ea.waitCount-=1),!0})}function G(a,c){var b=a.map.id,g=a.depMaps,d;if(a.inited){if(c[b])return a;c[b]=!0;s(g,function(a){if(a=oa[a.id])return a.inited&&a.enabled?d=G(a,p({},c)):(d=null,delete c[b],!0)});return d}}function J(a,c,b){var g=a.map.id,d=a.depMaps;if(a.inited&&a.map.isDefine){if(c[g])return ta[g];c[g]=a;s(d,function(d){d=d.id;var e=oa[d];!Ia[d]&&e&&(e.inited&&e.enabled?(e=J(e,c,b),
b[d]||a.defineDepById(d,e)):b[g]=!0)});a.check(!0);return ta[g]}}function H(a){a.check()}function K(){var a,c,g,d,k=(g=1E3*ya.waitSeconds)&&ea.startTime+g<(new Date).getTime(),f=[],m=!1,l=!0;if(!V){V=!0;b(oa,function(b){a=b.map;c=a.id;if(b.enabled&&!b.error)if(!b.inited&&k)v(c)?m=d=!0:(f.push(c),n(c));else if(!b.inited&&b.fetched&&a.isDefine&&(m=!0,!a.prefix))return l=!1});if(k&&f.length)return g=e("timeout","Load timeout for modules: "+f,null,f),g.contextName=ea.contextName,A(g);l&&(s(Ab,function(a){if(!a.defined){a=
G(a,{});var c={};a&&(J(a,c,{}),b(c,H))}}),b(oa,H));k&&!d||!m||!L&&!I||ib||(ib=setTimeout(function(){ib=0;K()},50));V=!1}}function N(a){u(l(a[0],null,!0)).init(a[1],a[2])}function Z(a){a=a.currentTarget||a.srcElement;var c=ea.onScriptLoad;a.detachEvent&&!W?a.detachEvent("onreadystatechange",c):a.removeEventListener("load",c,!1);c=ea.onScriptError;a.detachEvent&&!W||a.removeEventListener("error",c,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}var V,ra,ea,Ia,ib,ya={waitSeconds:7,baseUrl:"./",
paths:{},pkgs:{},shim:{}},oa={},Y={},xa=[],ta={},Ca={},jb=1,eb=1,Ab=[];Ia={require:function(a){return B(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=ta[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return ya.config&&ya.config[a.map.id]||{}},exports:ta[a.map.id]}}};ra=function(a){this.events=Y[a.id]||{};this.map=a;this.shim=ya.shim[a.id];this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=
0};ra.prototype={init:function(a,c,b,g){g=g||{};if(!this.inited){this.factory=c;if(b)this.on("error",b);else this.events.error&&(b=m(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.depMaps.rjsSkipMap=a.rjsSkipMap;this.errback=b;this.inited=!0;this.ignore=g.ignore;g.enabled||this.enabled?this.enable():this.check()}},defineDepById:function(a,c){var b;s(this.depMaps,function(c,g){if(c.id===a)return b=g,!0});return this.defineDep(b,c)},defineDep:function(a,c){this.depMatched[a]||
(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=c)},fetch:function(){if(!this.fetched){this.fetched=!0;ea.startTime=(new Date).getTime();var a=this.map;if(this.shim)B(this,!0)(this.shim.deps||[],m(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;Ca[a]||(Ca[a]=!0,ea.load(this.map.id,a))},check:function(a){if(this.enabled&&!this.enabling){var b,g,d=this.map.id;g=this.depExports;var e=this.exports,
k=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(t(k)){if(this.events.error)try{e=ea.execCb(d,k,g,e)}catch(n){b=n}else e=ea.execCb(d,k,g,e);this.map.isDefine&&((g=this.module)&&void 0!==g.exports&&g.exports!==this.exports?e=g.exports:void 0===e&&this.usingExports&&(e=this.exports));if(b)return b.requireMap=this.map,b.requireModules=[this.map.id],b.requireType="define",A(this.error=
b)}else e=k;this.exports=e;if(this.map.isDefine&&!this.ignore&&(ta[d]=e,c.onResourceLoad))c.onResourceLoad(ea,this.map,this.depMaps);delete oa[d];this.defined=!0;ea.waitCount-=1;0===ea.waitCount&&(Ab=[])}this.defining=!1;a||!this.defined||this.defineEmitted||(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}},callPlugin:function(){var a=this.map,d=a.id,e=l(a.prefix,null,!1,!0);z(e,"defined",m(this,function(e){var k;k=this.map.name;var n=this.map.parentMap?this.map.parentMap.name:
null;if(this.map.unnormalized){if(e.normalize&&(k=e.normalize(k,function(a){return g(a,n,!0)})||""),e=l(a.prefix+"!"+k,this.map.parentMap,!1,!0),z(e,"defined",m(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),e=oa[e.id]){if(this.events.error)e.on("error",m(this,function(a){this.emit("error",a)}));e.enable()}}else k=m(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),k.error=m(this,function(a){this.inited=!0;this.error=a;a.requireModules=[d];
b(oa,function(a){0===a.map.id.indexOf(d+"_unnormalized")&&D(a.map.id)});A(a)}),k.fromText=function(a,b){var g=R;g&&(R=!1);u(l(a));c.exec(b);g&&(R=!0);ea.completeLoad(a)},e.load(a.name,B(a.parentMap,!0,function(a,c,b){a.rjsSkipMap=!0;return ea.require(a,c,b)}),k,ya)}));ea.enable(e,this);this.pluginMaps[e.id]=e},enable:function(){this.enabled=!0;this.waitPushed||(Ab.push(this),ea.waitCount+=1,this.waitPushed=!0);this.enabling=!0;s(this.depMaps,m(this,function(a,c){var b,g;if("string"===typeof a){a=
l(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.depMaps.rjsSkipMap);this.depMaps[c]=a;if(b=Ia[a.id]){this.depExports[c]=b(this);return}this.depCount+=1;z(a,"defined",m(this,function(a){this.defineDep(c,a);this.check()}));this.errback&&z(a,"error",this.errback)}b=a.id;g=oa[b];Ia[b]||!g||g.enabled||ea.enable(a,this)}));b(this.pluginMaps,m(this,function(a){var c=oa[a.id];c&&!c.enabled&&ea.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,c){var b=this.events[a];b||(b=this.events[a]=
[]);b.push(c)},emit:function(a,c){s(this.events[a],function(a){a(c)});"error"===a&&delete this.events[a]}};return ea={config:ya,contextName:a,registry:oa,defined:ta,urlFetched:Ca,waitCount:0,defQueue:xa,Module:ra,makeModuleMap:l,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var c=ya.pkgs,g=ya.shim,d=ya.paths,e=ya.map;p(ya,a,!0);ya.paths=p(d,a.paths,!0);a.map&&(ya.map=p(e||{},a.map,!0,!0));a.shim&&(b(a.shim,function(a,c){r(a)&&(a={deps:a});a.exports&&
!a.exports.__buildReady&&(a.exports=ea.makeShimExports(a.exports));g[c]=a}),ya.shim=g);a.packages&&(s(a.packages,function(a){a="string"===typeof a?{name:a}:a;c[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(F,"").replace(M,"")}}),ya.pkgs=c);b(oa,function(a,c){a.inited||a.map.unnormalized||(a.map=l(c))});(a.deps||a.callback)&&ea.require(a.deps||[],a.callback)},makeShimExports:function(a){var c;return"string"===typeof a?(c=function(){return f(a)},c.exports=a,c):function(){return a.apply(q,
arguments)}},requireDefined:function(a,c){var b=l(a,c,!1,!0).id;return S.call(ta,b)},requireSpecified:function(a,c){a=l(a,c,!1,!0).id;return S.call(ta,a)||S.call(oa,a)},require:function(b,g,d,k){var n;if("string"===typeof b){if(t(g))return A(e("requireargs","Invalid require call"),d);if(c.get)return c.get(ea,b,g);b=l(b,g,!1,!0);b=b.id;return S.call(ta,b)?ta[b]:A(e("notloaded",'Module name "'+b+'" has not been loaded yet for context: '+a))}d&&!t(d)&&(k=d,d=void 0);g&&!t(g)&&(k=g,g=void 0);for(C();xa.length;){n=
xa.shift();if(null===n[0])return A(e("mismatch","Mismatched anonymous define() module: "+n[n.length-1]));N(n)}u(l(null,k)).init(b,g,d,{enabled:!0});K();return ea.require},undef:function(a){C();var c=l(a,null,!0),b=oa[a];delete ta[a];delete Ca[c.url];delete Y[a];b&&(b.events.defined&&(Y[a]=b.events),D(a))},enable:function(a,c){oa[a.id]&&u(a).enable()},completeLoad:function(a){var c,b,g=ya.shim[a]||{},d=g.exports&&g.exports.exports;for(C();xa.length;){b=xa.shift();if(null===b[0]){b[0]=a;if(c)break;
c=!0}else b[0]===a&&(c=!0);N(b)}b=oa[a];if(!c&&!ta[a]&&b&&!b.inited)if(!ya.enforceDefine||d&&f(d))N([a,g.deps||[],g.exports]);else return v(a)?void 0:A(e("nodefine","No define call for "+a,null,[a]));K()},toUrl:function(a,c){var b=a.lastIndexOf("."),d=null;-1!==b&&(d=a.substring(b,a.length),a=a.substring(0,b));return ea.nameToUrl(g(a,c&&c.id,!0),d)},nameToUrl:function(a,b){var g,d,e,k,n,f;if(c.jsExtRegExp.test(a))k=a+(b||"");else{g=ya.paths;d=ya.pkgs;k=a.split("/");for(n=k.length;0<n;n-=1)if(f=k.slice(0,
n).join("/"),e=d[f],f=g[f]){r(f)&&(f=f[0]);k.splice(0,n,f);break}else if(e){g=a===e.name?e.location+"/"+e.main:e.location;k.splice(0,n,g);break}k=k.join("/");k+=b||(/\?/.test(k)?"":".js");k=("/"===k.charAt(0)||k.match(/^[\w\+\.\-]+:/)?"":ya.baseUrl)+k}return ya.urlArgs?k+((-1===k.indexOf("?")?"?":"&")+ya.urlArgs):k},load:function(a,b){c.load(ea,a,b)},execCb:function(a,c,b,g){return c.apply(g,b)},onScriptLoad:function(a){if("load"===a.type||T.test((a.currentTarget||a.srcElement).readyState))y=null,
a=Z(a),ea.completeLoad(a.id)},onScriptError:function(a){var c=Z(a);if(!v(c.id))return A(e("scripterror","Script error",a,[c.id]))}}}function a(){if(y&&"interactive"===y.readyState)return y;l(document.getElementsByTagName("script"),function(a){if("interactive"===a.readyState)return y=a});return y}var c,g,v,u,z,A,y,C,D,B,G=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,J=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,M=/\.js$/,F=/^\.\//;g=Object.prototype;var H=g.toString,S=g.hasOwnProperty;g=Array.prototype;
var K=g.slice,x=g.splice,L=!("undefined"===typeof window||!navigator||!document),I=!L&&"undefined"!==typeof importScripts,T=L&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,N="_",W="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),Z={},V={},Q=[],R=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(t(requirejs))return;V=requirejs;requirejs=void 0}"undefined"===typeof require||t(require)||(V=require,require=void 0);c=requirejs=function(a,
b,g,d){var e,k=N;r(a)||"string"===typeof a||(e=a,r(b)?(a=b,b=g,g=d):a=[]);e&&e.context&&(k=e.context);(d=Z[k])||(d=Z[k]=c.s.newContext(k));e&&d.configure(e);return d.require(a,b,g)};c.config=function(a){return c(a)};require||(require=c);c.version="2.0.5";c.jsExtRegExp=/^\/|:|\?|\.js$/;c.isBrowser=L;g=c.s={contexts:Z,newContext:n};c({});k(c);L&&(v=g.head=document.getElementsByTagName("head")[0],u=document.getElementsByTagName("base")[0])&&(v=g.head=u.parentNode);c.onError=function(a){throw a;};c.load=
function(a,c,b){var g=a&&a.config||{},d;if(L)return d=g.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),d.type=g.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",c),!d.attachEvent||d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code")||W?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,
!1)):(R=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=b,C=d,u?v.insertBefore(d,u):v.appendChild(d),C=null,d;I&&(importScripts(b),a.completeLoad(c))};L&&l(document.getElementsByTagName("script"),function(a){v||(v=a.parentNode);if(z=a.getAttribute("data-main"))return V.baseUrl||(A=z.split("/"),D=A.pop(),B=A.length?A.join("/")+"/":"./",V.baseUrl=B,z=D),z=z.replace(M,""),V.deps=V.deps?V.deps.concat(z):[z],!0});define=function(c,b,g){var d,e;"string"!==typeof c&&(g=b,b=c,c=null);r(b)||(g=
b,b=[]);!b.length&&t(g)&&g.length&&(g.toString().replace(G,"").replace(J,function(a,c){b.push(c)}),b=(1===g.length?["require"]:["require","exports","module"]).concat(b));R&&(d=C||a())&&(c||(c=d.getAttribute("data-requiremodule")),e=Z[d.getAttribute("data-requirecontext")]);(e?e.defQueue:Q).push([c,b,g])};define.amd={jQuery:!0};c.exec=function(a){return eval(a)};c(V)}})(this);(function(q,t){function r(a){var c=L[a]={},b,g;a=a.split(/\s+/);b=0;for(g=a.length;b<g;b++)c[a[b]]=!0;return c}function s(a,c,b){if(b===t&&1===a.nodeType)if(b="data-"+c.replace(N,"-$1").toLowerCase(),b=a.getAttribute(b),"string"===typeof b){try{b="true"===b?!0:"false"===b?!1:"null"===b?null:x.isNumeric(b)?+b:T.test(b)?x.parseJSON(b):b}catch(g){}x.data(a,c,b)}else b=t;return b}function l(a){for(var c in a)if(("data"!==c||!x.isEmptyObject(a[c]))&&"toJSON"!==c)return!1;return!0}function b(a,c,b){var g=
c+"defer",d=c+"queue",e=c+"mark",k=x._data(a,g);!k||"queue"!==b&&x._data(a,d)||"mark"!==b&&x._data(a,e)||setTimeout(function(){x._data(a,d)||x._data(a,e)||(x.removeData(a,g,!0),k.fire())},0)}function p(){return!1}function m(){return!0}function f(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function d(a,c,b){c=c||0;if(x.isFunction(c))return x.grep(a,function(a,g){return!!c.call(a,g,a)===b});if(c.nodeType)return x.grep(a,function(a,g){return a===c===b});if("string"===typeof c){var g=x.grep(a,
function(a){return 1===a.nodeType});if(ra.test(c))return x.filter(c,g,!b);c=x.filter(c,g)}return x.grep(a,function(a,g){return 0<=x.inArray(a,c)===b})}function k(a){var c=ya.split("|");a=a.createDocumentFragment();if(a.createElement)for(;c.length;)a.createElement(c.pop());return a}function e(a,c){return x.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a,c){if(1===c.nodeType&&x.hasData(a)){var b,g,d;g=x._data(a);var e=x._data(c,
g),k=g.events;if(k)for(b in delete e.handle,e.events={},k)for(g=0,d=k[b].length;g<d;g++)x.event.add(c,b,k[b][g]);e.data&&(e.data=x.extend({},e.data))}}function a(a,c){var b;1===c.nodeType&&(c.clearAttributes&&c.clearAttributes(),c.mergeAttributes&&c.mergeAttributes(a),b=c.nodeName.toLowerCase(),"object"===b?c.outerHTML=a.outerHTML:"input"!==b||"checkbox"!==a.type&&"radio"!==a.type?"option"===b?c.selected=a.defaultSelected:"input"===b||"textarea"===b?c.defaultValue=a.defaultValue:"script"===b&&c.text!==
a.text&&(c.text=a.text):(a.checked&&(c.defaultChecked=c.checked=a.checked),c.value!==a.value&&(c.value=a.value)),c.removeAttribute(x.expando),c.removeAttribute("_submit_attached"),c.removeAttribute("_change_attached"))}function c(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function g(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function v(a){var c=(a.nodeName||"").toLowerCase();
"input"===c?g(a):"script"!==c&&"undefined"!==typeof a.getElementsByTagName&&x.grep(a.getElementsByTagName("input"),g)}function u(a,c,b){var g="width"===c?a.offsetWidth:a.offsetHeight,d="width"===c?1:0;if(0<g){if("border"!==b)for(;4>d;d+=2)b||(g-=parseFloat(x.css(a,"padding"+Fb[d]))||0),g="margin"===b?g+(parseFloat(x.css(a,b+Fb[d]))||0):g-(parseFloat(x.css(a,"border"+Fb[d]+"Width"))||0);return g+"px"}g=bb(a,c);if(0>g||null==g)g=a.style[c];if(Xa.test(g))return g;g=parseFloat(g)||0;if(b)for(;4>d;d+=
2)g+=parseFloat(x.css(a,"padding"+Fb[d]))||0,"padding"!==b&&(g+=parseFloat(x.css(a,"border"+Fb[d]+"Width"))||0),"margin"===b&&(g+=parseFloat(x.css(a,b+Fb[d]))||0);return g+"px"}function z(a){return function(c,b){"string"!==typeof c&&(b=c,c="*");if(x.isFunction(b))for(var g=c.toLowerCase().split(cb),d=0,e=g.length,k,n;d<e;d++)k=g[d],(n=/^\+/.test(k))&&(k=k.substr(1)||"*"),k=a[k]=a[k]||[],k[n?"unshift":"push"](b)}}function A(a,c,b,g,d,e){d=d||c.dataTypes[0];e=e||{};e[d]=!0;d=a[d];for(var k=0,n=d?d.length:
0,f=a===tb,m;k<n&&(f||!m);k++)m=d[k](c,b,g),"string"===typeof m&&(!f||e[m]?m=t:(c.dataTypes.unshift(m),m=A(a,c,b,g,m,e)));!f&&m||e["*"]||(m=A(a,c,b,g,"*",e));return m}function y(a,c){var b,g,d=x.ajaxSettings.flatOptions||{};for(b in c)c[b]!==t&&((d[b]?a:g||(g={}))[b]=c[b]);g&&x.extend(!0,a,g)}function C(a,c,b,g){if(x.isArray(c))x.each(c,function(c,d){b||ha.test(a)?g(a,d):C(a+"["+("object"===typeof d?c:"")+"]",d,b,g)});else if(b||"object"!==x.type(c))g(a,c);else for(var d in c)C(a+"["+d+"]",c[d],b,
g)}function D(){try{return new q.XMLHttpRequest}catch(a){}}function B(){setTimeout(G,0);return ba=x.now()}function G(){ba=t}function J(a,c){var b={};x.each(gb.concat.apply([],gb.slice(0,c)),function(){b[this]=a});return b}function M(a){if(!Pb[a]){var c=H.body,b=x("<"+a+">").appendTo(c),g=b.css("display");b.remove();if("none"===g||""===g)vb||(vb=H.createElement("iframe"),vb.frameBorder=vb.width=vb.height=0),c.appendChild(vb),Qb&&vb.createElement||(Qb=(vb.contentWindow||vb.contentDocument).document,
Qb.write((x.support.boxModel?"<!doctype html>":"")+"<html><body>"),Qb.close()),b=Qb.createElement(a),Qb.body.appendChild(b),g=x.css(b,"display"),c.removeChild(vb);Pb[a]=g}return Pb[a]}function F(a){return x.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var H=q.document,S=q.navigator,K=q.location,x=function(){function a(){if(!c.isReady){try{H.documentElement.doScroll("left")}catch(b){setTimeout(a,1);return}c.ready()}}var c=function(a,b){return new c.fn.init(a,b,d)},b=q.jQuery,g=q.$,
d,e=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=/\S/,n=/^\s+/,f=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,v=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,u=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,p=/(webkit)[ \/]([\w.]+)/,z=/(opera)(?:.*version)?[ \/]([\w.]+)/,A=/(msie) ([\w.]+)/,C=/(mozilla)(?:.*? rv:([\w.]+))?/,B=/-([a-z]|[0-9])/ig,D=/^-ms-/,G=function(a,c){return(c+"").toUpperCase()},J=S.userAgent,F,x,r=Object.prototype.toString,s=Object.prototype.hasOwnProperty,
M=Array.prototype.push,K=Array.prototype.slice,L=String.prototype.trim,da=Array.prototype.indexOf,I={};c.fn=c.prototype={constructor:c,init:function(a,b,g){var d;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!b&&H.body)return this.context=H,this[0]=H.body,this.selector=a,this.length=1,this;if("string"===typeof a){d="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:e.exec(a);if(!d||!d[1]&&b)return!b||b.jquery?(b||g).find(a):this.constructor(b).find(a);
if(d[1])return g=(b=b instanceof c?b[0]:b)?b.ownerDocument||b:H,(a=m.exec(a))?c.isPlainObject(b)?(a=[H.createElement(a[1])],c.fn.attr.call(a,b,!0)):a=[g.createElement(a[1])]:(a=c.buildFragment([d[1]],[g]),a=(a.cacheable?c.clone(a.fragment):a.fragment).childNodes),c.merge(this,a);if((b=H.getElementById(d[2]))&&b.parentNode){if(b.id!==d[2])return g.find(a);this.length=1;this[0]=b}this.context=H;this.selector=a;return this}if(c.isFunction(a))return g.ready(a);a.selector!==t&&(this.selector=a.selector,
this.context=a.context);return c.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return K.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,g){var d=this.constructor();c.isArray(a)?M.apply(d,a):c.merge(d,a);d.prevObject=this;d.context=this.context;"find"===b?d.selector=this.selector+(this.selector?" ":"")+g:b&&(d.selector=this.selector+"."+b+"("+g+")");return d},each:function(a,
b){return c.each(this,a,b)},ready:function(a){c.bindReady();F.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(K.apply(this,arguments),"slice",K.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,function(c,b){return a.call(c,b,c)}))},end:function(){return this.prevObject||this.constructor(null)},push:M,sort:[].sort,splice:[].splice};
c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a,b,g,d,e,k=arguments[0]||{},n=1,f=arguments.length,m=!1;"boolean"===typeof k&&(m=k,k=arguments[1]||{},n=2);"object"===typeof k||c.isFunction(k)||(k={});f===n&&(k=this,--n);for(;n<f;n++)if(null!=(a=arguments[n]))for(b in a)g=k[b],d=a[b],k!==d&&(m&&d&&(c.isPlainObject(d)||(e=c.isArray(d)))?(e?(e=!1,g=g&&c.isArray(g)?g:[]):g=g&&c.isPlainObject(g)?g:{},k[b]=c.extend(m,g,d)):d!==t&&(k[b]=d));return k};c.extend({noConflict:function(a){q.$===
c&&(q.$=g);a&&q.jQuery===c&&(q.jQuery=b);return c},isReady:!1,readyWait:1,holdReady:function(a){a?c.readyWait++:c.ready(!0)},ready:function(a){if(!0===a&&!--c.readyWait||!0!==a&&!c.isReady){if(!H.body)return setTimeout(c.ready,1);c.isReady=!0;!0!==a&&0<--c.readyWait||(F.fireWith(H,[c]),c.fn.trigger&&c(H).trigger("ready").off("ready"))}},bindReady:function(){if(!F){F=c.Callbacks("once memory");if("complete"===H.readyState)return setTimeout(c.ready,1);if(H.addEventListener)H.addEventListener("DOMContentLoaded",
x,!1),q.addEventListener("load",c.ready,!1);else if(H.attachEvent){H.attachEvent("onreadystatechange",x);q.attachEvent("onload",c.ready);var b=!1;try{b=null==q.frameElement}catch(g){}H.documentElement.doScroll&&b&&a()}}},isFunction:function(a){return"function"===c.type(a)},isArray:Array.isArray||function(a){return"array"===c.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):I[r.call(a)]||
"object"},isPlainObject:function(a){if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!s.call(a,"constructor")&&!s.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var g in a);return g===t||s.call(a,g)},isEmptyObject:function(a){for(var c in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(a){if("string"!==typeof a||!a)return null;a=c.trim(a);if(q.JSON&&q.JSON.parse)return q.JSON.parse(a);if(v.test(a.replace(l,
"@").replace(u,"]").replace(y,"")))return(new Function("return "+a))();c.error("Invalid JSON: "+a)},parseXML:function(a){if("string"!==typeof a||!a)return null;var b,g;try{q.DOMParser?(g=new DOMParser,b=g.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=t}b&&b.documentElement&&!b.getElementsByTagName("parsererror").length||c.error("Invalid XML: "+a);return b},noop:function(){},globalEval:function(a){a&&k.test(a)&&(q.execScript||function(a){q.eval.call(q,
a)})(a)},camelCase:function(a){return a.replace(D,"ms-").replace(B,G)},nodeName:function(a,c){return a.nodeName&&a.nodeName.toUpperCase()===c.toUpperCase()},each:function(a,b,g){var d,e=0,k=a.length,n=k===t||c.isFunction(a);if(g)if(n)for(d in a){if(!1===b.apply(a[d],g))break}else for(;e<k&&!1!==b.apply(a[e++],g););else if(n)for(d in a){if(!1===b.call(a[d],d,a[d]))break}else for(;e<k&&!1!==b.call(a[e],e,a[e++]););return a},trim:L?function(a){return null==a?"":L.call(a)}:function(a){return null==a?
"":a.toString().replace(n,"").replace(f,"")},makeArray:function(a,b){var g=b||[];if(null!=a){var d=c.type(a);null==a.length||"string"===d||"function"===d||"regexp"===d||c.isWindow(a)?M.call(g,a):c.merge(g,a)}return g},inArray:function(a,c,b){var g;if(c){if(da)return da.call(c,a,b);g=c.length;for(b=b?0>b?Math.max(0,g+b):b:0;b<g;b++)if(b in c&&c[b]===a)return b}return-1},merge:function(a,c){var b=a.length,g=0;if("number"===typeof c.length)for(var d=c.length;g<d;g++)a[b++]=c[g];else for(;c[g]!==t;)a[b++]=
c[g++];a.length=b;return a},grep:function(a,c,b){var g=[],d;b=!!b;for(var e=0,k=a.length;e<k;e++)d=!!c(a[e],e),b!==d&&g.push(a[e]);return g},map:function(a,b,g){var d,e,k=[],n=0,f=a.length;if(a instanceof c||f!==t&&"number"===typeof f&&(0<f&&a[0]&&a[f-1]||0===f||c.isArray(a)))for(;n<f;n++)d=b(a[n],n,g),null!=d&&(k[k.length]=d);else for(e in a)d=b(a[e],e,g),null!=d&&(k[k.length]=d);return k.concat.apply([],k)},guid:1,proxy:function(a,b){if("string"===typeof b){var g=a[b];b=a;a=g}if(!c.isFunction(a))return t;
var d=K.call(arguments,2),g=function(){return a.apply(b,d.concat(K.call(arguments)))};g.guid=a.guid=a.guid||g.guid||c.guid++;return g},access:function(a,b,g,d,e,k,n){var f,m=null==g,v=0,l=a.length;if(g&&"object"===typeof g){for(v in g)c.access(a,b,v,g[v],1,k,d);e=1}else if(d!==t){f=n===t&&c.isFunction(d);m&&(f?(f=b,b=function(a,b,g){return f.call(c(a),g)}):(b.call(a,d),b=null));if(b)for(;v<l;v++)b(a[v],g,f?d.call(a[v],v,b(a[v],g)):d,n);e=1}return e?a:m?b.call(a):l?b(a[0],g):k},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=p.exec(a)||z.exec(a)||A.exec(a)||0>a.indexOf("compatible")&&C.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(c,b){return new a.fn.init(c,b)}c.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(g,d){d&&d instanceof c&&!(d instanceof a)&&(d=a(d));return c.fn.init.call(this,g,d,b)};a.fn.init.prototype=a.fn;var b=a(H);return a},browser:{}});c.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,c){I["[object "+c+"]"]=c.toLowerCase()});J=c.uaMatch(J);J.browser&&(c.browser[J.browser]=!0,c.browser.version=J.version);c.browser.webkit&&(c.browser.safari=!0);k.test("\u00a0")&&(n=/^[\s\xA0]+/,f=/[\s\xA0]+$/);d=c(H);H.addEventListener?x=function(){H.removeEventListener("DOMContentLoaded",x,!1);c.ready()}:H.attachEvent&&(x=function(){"complete"===H.readyState&&(H.detachEvent("onreadystatechange",x),c.ready())});return c}(),L={};x.Callbacks=function(a){a=a?L[a]||r(a):{};var c=[],b=[],g,
d,e,k,n,f,m=function(b){var g,d,e,k;g=0;for(d=b.length;g<d;g++)e=b[g],k=x.type(e),"array"===k?m(e):"function"===k&&(a.unique&&l.has(e)||c.push(e))},v=function(m,v){v=v||[];g=!a.memory||[m,v];e=d=!0;f=k||0;k=0;for(n=c.length;c&&f<n;f++)if(!1===c[f].apply(m,v)&&a.stopOnFalse){g=!0;break}e=!1;c&&(a.once?!0===g?l.disable():c=[]:b&&b.length&&(g=b.shift(),l.fireWith(g[0],g[1])))},l={add:function(){if(c){var a=c.length;m(arguments);e?n=c.length:g&&!0!==g&&(k=a,v(g[0],g[1]))}return this},remove:function(){if(c)for(var b=
arguments,g=0,d=b.length;g<d;g++)for(var k=0;k<c.length&&(b[g]!==c[k]||(e&&k<=n&&(n--,k<=f&&f--),c.splice(k--,1),!a.unique));k++);return this},has:function(a){if(c)for(var b=0,g=c.length;b<g;b++)if(a===c[b])return!0;return!1},empty:function(){c=[];return this},disable:function(){c=b=g=t;return this},disabled:function(){return!c},lock:function(){b=t;g&&!0!==g||l.disable();return this},locked:function(){return!b},fireWith:function(c,d){b&&(e?a.once||b.push([c,d]):a.once&&g||v(c,d));return this},fire:function(){l.fireWith(this,
arguments);return this},fired:function(){return!!d}};return l};var I=[].slice;x.extend({Deferred:function(a){var c=x.Callbacks("once memory"),b=x.Callbacks("once memory"),g=x.Callbacks("memory"),d="pending",e={resolve:c,reject:b,notify:g},k={done:c.add,fail:b.add,progress:g.add,state:function(){return d},isResolved:c.fired,isRejected:b.fired,then:function(a,c,b){n.done(a).fail(c).progress(b);return this},always:function(){n.done.apply(n,arguments).fail.apply(n,arguments);return this},pipe:function(a,
c,b){return x.Deferred(function(g){x.each({done:[a,"resolve"],fail:[c,"reject"],progress:[b,"notify"]},function(a,c){var b=c[0],d=c[1],e;if(x.isFunction(b))n[a](function(){if((e=b.apply(this,arguments))&&x.isFunction(e.promise))e.promise().then(g.resolve,g.reject,g.notify);else g[d+"With"](this===n?g:this,[e])});else n[a](g[d])})}).promise()},promise:function(a){if(null==a)a=k;else for(var c in k)a[c]=k[c];return a}},n=k.promise({}),f;for(f in e)n[f]=e[f].fire,n[f+"With"]=e[f].fireWith;n.done(function(){d=
"resolved"},b.disable,g.lock).fail(function(){d="rejected"},c.disable,g.lock);a&&a.call(n,n);return n},when:function(a){function c(a){return function(c){g[a]=1<arguments.length?I.call(arguments,0):c;--n||f.resolveWith(f,g)}}function b(a){return function(c){k[a]=1<arguments.length?I.call(arguments,0):c;f.notifyWith(m,k)}}var g=I.call(arguments,0),d=0,e=g.length,k=Array(e),n=e,f=1>=e&&a&&x.isFunction(a.promise)?a:x.Deferred(),m=f.promise();if(1<e){for(;d<e;d++)g[d]&&g[d].promise&&x.isFunction(g[d].promise)?
g[d].promise().then(c(d),f.reject,b(d)):--n;n||f.resolveWith(f,g)}else f!==a&&f.resolveWith(f,e?[a]:[]);return m}});x.support=function(){var a,c,b,g,d,e,k,n,f=H.createElement("div");f.setAttribute("className","t");f.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";c=f.getElementsByTagName("*");b=f.getElementsByTagName("a")[0];if(!c||!c.length||!b)return{};g=H.createElement("select");d=g.appendChild(H.createElement("option"));c=
f.getElementsByTagName("input")[0];a={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(b.getAttribute("style")),hrefNormalized:"/a"===b.getAttribute("href"),opacity:/^0.55/.test(b.style.opacity),cssFloat:!!b.style.cssFloat,checkOn:"on"===c.value,optSelected:d.selected,getSetAttribute:"t"!==f.className,enctype:!!H.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==H.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};x.boxModel=a.boxModel="CSS1Compat"===H.compatMode;c.checked=!0;a.noCloneChecked=c.cloneNode(!0).checked;g.disabled=!0;a.optDisabled=!d.disabled;try{delete f.test}catch(m){a.deleteExpando=!1}!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",function(){a.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick"),
f.clearAttributes&&f.clearAttributes());c=H.createElement("input");c.value="t";c.setAttribute("type","radio");a.radioValue="t"===c.value;c.setAttribute("checked","checked");c.setAttribute("name","t");f.appendChild(c);b=H.createDocumentFragment();b.appendChild(f.lastChild);a.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;a.appendChecked=c.checked;b.removeChild(c);b.appendChild(f);if(f.attachEvent)for(k in{submit:1,change:1,focusin:1})c="on"+k,n=c in f,n||(f.setAttribute(c,"return;"),n=
"function"===typeof f[c]),a[k+"Bubbles"]=n;b.removeChild(f);b=g=d=f=c=null;x(function(){var c,b,g,d,k=H.getElementsByTagName("body")[0];k&&(c=H.createElement("div"),c.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",k.insertBefore(c,k.firstChild),f=H.createElement("div"),c.appendChild(f),f.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",e=f.getElementsByTagName("td"),n=0===e[0].offsetHeight,
e[0].style.display="",e[1].style.display="none",a.reliableHiddenOffsets=n&&0===e[0].offsetHeight,q.getComputedStyle&&(f.innerHTML="",b=H.createElement("div"),b.style.width="0",b.style.marginRight="0",f.style.width="2px",f.appendChild(b),a.reliableMarginRight=0===(parseInt((q.getComputedStyle(b,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof f.style.zoom&&(f.innerHTML="",f.style.width=f.style.padding="1px",f.style.border=0,f.style.overflow="hidden",f.style.display="inline",f.style.zoom=
1,a.inlineBlockNeedsLayout=3===f.offsetWidth,f.style.display="block",f.style.overflow="visible",f.innerHTML="<div style='width:5px;'></div>",a.shrinkWrapBlocks=3!==f.offsetWidth),f.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",f.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
b=f.firstChild,g=b.firstChild,d=b.nextSibling.firstChild.firstChild,d={doesNotAddBorder:5!==g.offsetTop,doesAddBorderForTableAndCells:5===d.offsetTop},g.style.position="fixed",g.style.top="20px",d.fixedPosition=20===g.offsetTop||15===g.offsetTop,g.style.position=g.style.top="",b.style.overflow="hidden",b.style.position="relative",d.subtractsBorderForOverflowNotVisible=-5===g.offsetTop,d.doesNotIncludeMarginInBodyOffset=1!==k.offsetTop,q.getComputedStyle&&(f.style.marginTop="1%",a.pixelMargin="1%"!==
(q.getComputedStyle(f,null)||{marginTop:0}).marginTop),"undefined"!==typeof c.style.zoom&&(c.style.zoom=1),k.removeChild(c),f=null,x.extend(a,d))});return a}();var T=/^(?:\{.*\}|\[.*\])$/,N=/([A-Z])/g;x.extend({cache:{},uuid:0,expando:"jQuery"+(x.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?x.cache[a[x.expando]]:a[x.expando];return!!a&&!l(a)},data:function(a,c,b,g){if(x.acceptData(a)){var d;
d=x.expando;var e="string"===typeof c,k=a.nodeType,n=k?x.cache:a,f=k?a[d]:a[d]&&d,m="events"===c;if(f&&n[f]&&(m||g||n[f].data)||!e||b!==t){f||(k?a[d]=f=++x.uuid:f=d);n[f]||(n[f]={},k||(n[f].toJSON=x.noop));if("object"===typeof c||"function"===typeof c)g?n[f]=x.extend(n[f],c):n[f].data=x.extend(n[f].data,c);d=a=n[f];g||(a.data||(a.data={}),a=a.data);b!==t&&(a[x.camelCase(c)]=b);if(m&&!a[c])return d.events;e?(b=a[c],null==b&&(b=a[x.camelCase(c)])):b=a;return b}}},removeData:function(a,c,b){if(x.acceptData(a)){var g,
d,e,k=x.expando,n=a.nodeType,f=n?x.cache:a,m=n?a[k]:k;if(f[m]){if(c&&(g=b?f[m]:f[m].data)){x.isArray(c)||(c in g?c=[c]:(c=x.camelCase(c),c=c in g?[c]:c.split(" ")));d=0;for(e=c.length;d<e;d++)delete g[c[d]];if(!(b?l:x.isEmptyObject)(g))return}if(!b&&(delete f[m].data,!l(f[m])))return;x.support.deleteExpando||!f.setInterval?delete f[m]:f[m]=null;n&&(x.support.deleteExpando?delete a[k]:a.removeAttribute?a.removeAttribute(k):a[k]=null)}}},_data:function(a,c,b){return x.data(a,c,b,!0)},acceptData:function(a){if(a.nodeName){var c=
x.noData[a.nodeName.toLowerCase()];if(c)return!(!0===c||a.getAttribute("classid")!==c)}return!0}});x.fn.extend({data:function(a,c){var b,g,d,e,k,n=this[0],f=0,m=null;if(a===t){if(this.length&&(m=x.data(n),1===n.nodeType&&!x._data(n,"parsedAttrs"))){d=n.attributes;for(k=d.length;f<k;f++)e=d[f].name,0===e.indexOf("data-")&&(e=x.camelCase(e.substring(5)),s(n,e,m[e]));x._data(n,"parsedAttrs",!0)}return m}if("object"===typeof a)return this.each(function(){x.data(this,a)});b=a.split(".",2);b[1]=b[1]?"."+
b[1]:"";g=b[1]+"!";return x.access(this,function(c){if(c===t)return m=this.triggerHandler("getData"+g,[b[0]]),m===t&&n&&(m=x.data(n,a),m=s(n,a,m)),m===t&&b[1]?this.data(b[0]):m;b[1]=c;this.each(function(){var d=x(this);d.triggerHandler("setData"+g,b);x.data(this,a,c);d.triggerHandler("changeData"+g,b)})},null,c,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){x.removeData(this,a)})}});x.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",x._data(a,c,(x._data(a,c)||0)+
1))},_unmark:function(a,c,g){!0!==a&&(g=c,c=a,a=!1);if(c){g=g||"fx";var d=g+"mark";(a=a?0:(x._data(c,d)||1)-1)?x._data(c,d,a):(x.removeData(c,d,!0),b(c,g,"mark"))}},queue:function(a,c,b){var g;if(a)return c=(c||"fx")+"queue",g=x._data(a,c),b&&(!g||x.isArray(b)?g=x._data(a,c,x.makeArray(b)):g.push(b)),g||[]},dequeue:function(a,c){c=c||"fx";var g=x.queue(a,c),d=g.shift(),e={};"inprogress"===d&&(d=g.shift());d&&("fx"===c&&g.unshift("inprogress"),x._data(a,c+".run",e),d.call(a,function(){x.dequeue(a,
c)},e));g.length||(x.removeData(a,c+"queue "+c+".run",!0),b(a,c,"queue"))}});x.fn.extend({queue:function(a,c){var b=2;"string"!==typeof a&&(c=a,a="fx",b--);return arguments.length<b?x.queue(this[0],a):c===t?this:this.each(function(){var b=x.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&x.dequeue(this,a)})},dequeue:function(a){return this.each(function(){x.dequeue(this,a)})},delay:function(a,c){a=x.fx?x.fx.speeds[a]||a:a;return this.queue(c||"fx",function(c,b){var g=setTimeout(c,a);b.stop=function(){clearTimeout(g)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function b(){--k||g.resolveWith(d,[d])}"string"!==typeof a&&(c=a,a=t);a=a||"fx";for(var g=x.Deferred(),d=this,e=d.length,k=1,n=a+"defer",f=a+"queue",m=a+"mark",v;e--;)if(v=x.data(d[e],n,t,!0)||(x.data(d[e],f,t,!0)||x.data(d[e],m,t,!0))&&x.data(d[e],n,x.Callbacks("once memory"),!0))k++,v.add(b);b();return g.promise(c)}});var W=/[\n\t\r]/g,Z=/\s+/,V=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,
O=/^a(?:rea)?$/i,ca=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,aa=x.support.getSetAttribute,ma,da,qa;x.fn.extend({attr:function(a,c){return x.access(this,x.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){x.removeAttr(this,a)})},prop:function(a,c){return x.access(this,x.prop,a,c,1<arguments.length)},removeProp:function(a){a=x.propFix[a]||a;return this.each(function(){try{this[a]=t,delete this[a]}catch(c){}})},
addClass:function(a){var c,b,g,d,e,k,n;if(x.isFunction(a))return this.each(function(c){x(this).addClass(a.call(this,c,this.className))});if(a&&"string"===typeof a)for(c=a.split(Z),b=0,g=this.length;b<g;b++)if(d=this[b],1===d.nodeType)if(d.className||1!==c.length){e=" "+d.className+" ";k=0;for(n=c.length;k<n;k++)~e.indexOf(" "+c[k]+" ")||(e+=c[k]+" ");d.className=x.trim(e)}else d.className=a;return this},removeClass:function(a){var c,b,g,d,e,k,n;if(x.isFunction(a))return this.each(function(c){x(this).removeClass(a.call(this,
c,this.className))});if(a&&"string"===typeof a||a===t)for(c=(a||"").split(Z),b=0,g=this.length;b<g;b++)if(d=this[b],1===d.nodeType&&d.className)if(a){e=(" "+d.className+" ").replace(W," ");k=0;for(n=c.length;k<n;k++)e=e.replace(" "+c[k]+" "," ");d.className=x.trim(e)}else d.className="";return this},toggleClass:function(a,c){var b=typeof a,g="boolean"===typeof c;return x.isFunction(a)?this.each(function(b){x(this).toggleClass(a.call(this,b,this.className,c),c)}):this.each(function(){if("string"===
b)for(var d,e=0,k=x(this),n=c,f=a.split(Z);d=f[e++];)n=g?n:!k.hasClass(d),k[n?"addClass":"removeClass"](d);else if("undefined"===b||"boolean"===b)this.className&&x._data(this,"__className__",this.className),this.className=this.className||!1===a?"":x._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var c=0,b=this.length;c<b;c++)if(1===this[c].nodeType&&-1<(" "+this[c].className+" ").replace(W," ").indexOf(a))return!0;return!1},val:function(a){var c,b,g,d=this[0];if(arguments.length)return g=
x.isFunction(a),this.each(function(b){var d=x(this);1===this.nodeType&&(b=g?a.call(this,b,d.val()):a,null==b?b="":"number"===typeof b?b+="":x.isArray(b)&&(b=x.map(b,function(a){return null==a?"":a+""})),c=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,b,"value")!==t||(this.value=b))});if(d){if((c=x.valHooks[d.type]||x.valHooks[d.nodeName.toLowerCase()])&&"get"in c&&(b=c.get(d,"value"))!==t)return b;b=d.value;return"string"===typeof b?b.replace(V,""):null==
b?"":b}}});x.extend({valHooks:{option:{get:function(a){var c=a.attributes.value;return!c||c.specified?a.value:a.text}},select:{get:function(a){var c,b,g=a.selectedIndex,d=[],e=a.options,k="select-one"===a.type;if(0>g)return null;a=k?g:0;for(b=k?g+1:e.length;a<b;a++)if(c=e[a],c.selected&&!((x.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&x.nodeName(c.parentNode,"optgroup"))){c=x(c).val();if(k)return c;d.push(c)}return k&&!d.length&&e.length?x(e[g]).val():
d},set:function(a,c){var b=x.makeArray(c);x(a).find("option").each(function(){this.selected=0<=x.inArray(x(this).val(),b)});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,b,g){var d,e,k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(g&&c in x.attrFn)return x(a)[c](b);if("undefined"===typeof a.getAttribute)return x.prop(a,c,b);if(g=1!==k||!x.isXMLDoc(a))c=c.toLowerCase(),e=x.attrHooks[c]||(ca.test(c)?da:ma);if(b!==
t)if(null===b)x.removeAttr(a,c);else{if(e&&"set"in e&&g&&(d=e.set(a,b,c))!==t)return d;a.setAttribute(c,""+b);return b}else{if(e&&"get"in e&&g&&null!==(d=e.get(a,c)))return d;d=a.getAttribute(c);return null===d?t:d}}},removeAttr:function(a,c){var b,g,d,e,k,n=0;if(c&&1===a.nodeType)for(g=c.toLowerCase().split(Z),e=g.length;n<e;n++)if(d=g[n])b=x.propFix[d]||d,(k=ca.test(d))||x.attr(a,d,""),a.removeAttribute(aa?d:b),k&&b in a&&(a[b]=!1)},attrHooks:{type:{set:function(a,c){if(Q.test(a.nodeName)&&a.parentNode)x.error("type property can't be changed");
else if(!x.support.radioValue&&"radio"===c&&x.nodeName(a,"input")){var b=a.value;a.setAttribute("type",c);b&&(a.value=b);return c}}},value:{get:function(a,c){return ma&&x.nodeName(a,"button")?ma.get(a,c):c in a?a.value:null},set:function(a,c,b){if(ma&&x.nodeName(a,"button"))return ma.set(a,c,b);a.value=c}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,b){var g,d,e;e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(e=1!==e||!x.isXMLDoc(a))c=x.propFix[c]||c,d=x.propHooks[c];return b!==t?d&&"set"in d&&(g=d.set(a,b,c))!==t?g:a[c]=b:d&&"get"in d&&null!==(g=d.get(a,c))?g:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||O.test(a.nodeName)&&a.href?0:t}}}});x.attrHooks.tabindex=
x.propHooks.tabIndex;da={get:function(a,c){var b,g=x.prop(a,c);return!0===g||"boolean"!==typeof g&&(b=a.getAttributeNode(c))&&!1!==b.nodeValue?c.toLowerCase():t},set:function(a,c,b){!1===c?x.removeAttr(a,b):(c=x.propFix[b]||b,c in a&&(a[c]=!0),a.setAttribute(b,b.toLowerCase()));return b}};aa||(qa={name:!0,id:!0,coords:!0},ma=x.valHooks.button={get:function(a,c){var b;return(b=a.getAttributeNode(c))&&(qa[c]?""!==b.nodeValue:b.specified)?b.nodeValue:t},set:function(a,c,b){var g=a.getAttributeNode(b);
g||(g=H.createAttribute(b),a.setAttributeNode(g));return g.nodeValue=c+""}},x.attrHooks.tabindex.set=ma.set,x.each(["width","height"],function(a,c){x.attrHooks[c]=x.extend(x.attrHooks[c],{set:function(a,b){if(""===b)return a.setAttribute(c,"auto"),b}})}),x.attrHooks.contenteditable={get:ma.get,set:function(a,c,b){""===c&&(c="false");ma.set(a,c,b)}});x.support.hrefNormalized||x.each(["href","src","width","height"],function(a,c){x.attrHooks[c]=x.extend(x.attrHooks[c],{get:function(a){a=a.getAttribute(c,
2);return null===a?t:a}})});x.support.style||(x.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||t},set:function(a,c){return a.style.cssText=""+c}});x.support.optSelected||(x.propHooks.selected=x.extend(x.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));x.support.enctype||(x.propFix.enctype="encoding");x.support.checkOn||x.each(["radio","checkbox"],function(){x.valHooks[this]={get:function(a){return null===
a.getAttribute("value")?"on":a.value}}});x.each(["radio","checkbox"],function(){x.valHooks[this]=x.extend(x.valHooks[this],{set:function(a,c){if(x.isArray(c))return a.checked=0<=x.inArray(x(a).val(),c)}})});var la=/^(?:textarea|input|select)$/i,ia=/^([^\.]*)?(?:\.(.+))?$/,ka=/(?:^|\s)hover(\.\S+)?\b/,Aa=/^key/,P=/^(?:mouse|contextmenu)|click/,na=/^(?:focusinfocus|focusoutblur)$/,Va=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,La=function(a){if(a=Va.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&RegExp("(?:^|\\s)"+
a[3]+"(?:\\s|$)");return a},Fa=function(a){return x.event.special.hover?a:a.replace(ka,"mouseenter$1 mouseleave$1")};x.event={add:function(a,c,b,g,d){var e,k,n,f,m,v,l,u,y;if(3!==a.nodeType&&8!==a.nodeType&&c&&b&&(e=x._data(a))){b.handler&&(l=b,b=l.handler,d=l.selector);b.guid||(b.guid=x.guid++);n=e.events;n||(e.events=n={});k=e.handle;k||(e.handle=k=function(a){return"undefined"===typeof x||a&&x.event.triggered===a.type?t:x.event.dispatch.apply(k.elem,arguments)},k.elem=a);c=x.trim(Fa(c)).split(" ");
for(e=0;e<c.length;e++)f=ia.exec(c[e])||[],m=f[1],v=(f[2]||"").split(".").sort(),y=x.event.special[m]||{},m=(d?y.delegateType:y.bindType)||m,y=x.event.special[m]||{},f=x.extend({type:m,origType:f[1],data:g,handler:b,guid:b.guid,selector:d,quick:d&&La(d),namespace:v.join(".")},l),u=n[m],u||(u=n[m]=[],u.delegateCount=0,y.setup&&!1!==y.setup.call(a,g,v,k)||(a.addEventListener?a.addEventListener(m,k,!1):a.attachEvent&&a.attachEvent("on"+m,k))),y.add&&(y.add.call(a,f),f.handler.guid||(f.handler.guid=b.guid)),
d?u.splice(u.delegateCount++,0,f):u.push(f),x.event.global[m]=!0;a=null}},global:{},remove:function(a,c,b,g,d){var e=x.hasData(a)&&x._data(a),k,n,f,m,v,l,u,y,p,z;if(e&&(u=e.events)){c=x.trim(Fa(c||"")).split(" ");for(k=0;k<c.length;k++)if(n=ia.exec(c[k])||[],f=m=n[1],n=n[2],f){y=x.event.special[f]||{};f=(g?y.delegateType:y.bindType)||f;p=u[f]||[];v=p.length;n=n?RegExp("(^|\\.)"+n.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(l=0;l<p.length;l++)z=p[l],!d&&m!==z.origType||b&&b.guid!==
z.guid||n&&!n.test(z.namespace)||g&&!(g===z.selector||"**"===g&&z.selector)||(p.splice(l--,1),z.selector&&p.delegateCount--,y.remove&&y.remove.call(a,z));0===p.length&&v!==p.length&&(y.teardown&&!1!==y.teardown.call(a,n)||x.removeEvent(a,f,e.handle),delete u[f])}else for(f in u)x.event.remove(a,f+c[k],b,g,!0);if(x.isEmptyObject(u)){if(c=e.handle)c.elem=null;x.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(a,c,b,g){if(!b||3!==b.nodeType&&
8!==b.nodeType){var d=a.type||a,e=[],k,n,f,m,v;if(!na.test(d+x.event.triggered)&&(0<=d.indexOf("!")&&(d=d.slice(0,-1),k=!0),0<=d.indexOf(".")&&(e=d.split("."),d=e.shift(),e.sort()),b&&!x.event.customEvent[d]||x.event.global[d]))if(a="object"===typeof a?a[x.expando]?a:new x.Event(d,a):new x.Event(d),a.type=d,a.isTrigger=!0,a.exclusive=k,a.namespace=e.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+e.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,k=0>d.indexOf(":")?"on"+d:"",b){if(a.result=t,a.target||
(a.target=b),c=null!=c?x.makeArray(c):[],c.unshift(a),f=x.event.special[d]||{},!f.trigger||!1!==f.trigger.apply(b,c)){v=[[b,f.bindType||d]];if(!g&&!f.noBubble&&!x.isWindow(b)){m=f.delegateType||d;e=na.test(m+d)?b:b.parentNode;for(n=null;e;e=e.parentNode)v.push([e,m]),n=e;n&&n===b.ownerDocument&&v.push([n.defaultView||n.parentWindow||q,m])}for(n=0;n<v.length&&!a.isPropagationStopped();n++)e=v[n][0],a.type=v[n][1],(m=(x._data(e,"events")||{})[a.type]&&x._data(e,"handle"))&&m.apply(e,c),(m=k&&e[k])&&
x.acceptData(e)&&!1===m.apply(e,c)&&a.preventDefault();a.type=d;g||a.isDefaultPrevented()||f._default&&!1!==f._default.apply(b.ownerDocument,c)||"click"===d&&x.nodeName(b,"a")||!x.acceptData(b)||!k||!b[d]||("focus"===d||"blur"===d)&&0===a.target.offsetWidth||x.isWindow(b)||((n=b[k])&&(b[k]=null),x.event.triggered=d,b[d](),x.event.triggered=t,n&&(b[k]=n));return a.result}}else for(n in b=x.cache,b)b[n].events&&b[n].events[d]&&x.event.trigger(a,c,b[n].handle.elem,!0)}},dispatch:function(a){a=x.event.fix(a||
q.event);var c=(x._data(this,"events")||{})[a.type]||[],b=c.delegateCount,g=[].slice.call(arguments,0),d=!a.exclusive&&!a.namespace,e=x.event.special[a.type]||{},k=[],n,f,m,v,l,u,y;g[0]=a;a.delegateTarget=this;if(!e.preDispatch||!1!==e.preDispatch.call(this,a)){if(b&&(!a.button||"click"!==a.type))for(m=x(this),m.context=this.ownerDocument||this,f=a.target;f!=this;f=f.parentNode||this)if(!0!==f.disabled){l={};u=[];m[0]=f;for(n=0;n<b;n++){v=c[n];y=v.selector;if(l[y]===t){var p=l,z=y,A;if(v.quick){A=
v.quick;var C=f.attributes||{};A=(!A[1]||f.nodeName.toLowerCase()===A[1])&&(!A[2]||(C.id||{}).value===A[2])&&(!A[3]||A[3].test((C["class"]||{}).value))}else A=m.is(y);p[z]=A}l[y]&&u.push(v)}u.length&&k.push({elem:f,matches:u})}c.length>b&&k.push({elem:this,matches:c.slice(b)});for(n=0;n<k.length&&!a.isPropagationStopped();n++)for(b=k[n],a.currentTarget=b.elem,c=0;c<b.matches.length&&!a.isImmediatePropagationStopped();c++)if(v=b.matches[c],d||!a.namespace&&!v.namespace||a.namespace_re&&a.namespace_re.test(v.namespace))a.data=
v.data,a.handleObj=v,v=((x.event.special[v.origType]||{}).handle||v.handler).apply(b.elem,g),v!==t&&(a.result=v,!1===v&&(a.preventDefault(),a.stopPropagation()));e.postDispatch&&e.postDispatch.call(this,a);return a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,c){null==a.which&&
(a.which=null!=c.charCode?c.charCode:c.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var b,g,d=c.button,e=c.fromElement;null==a.pageX&&null!=c.clientX&&(b=a.target.ownerDocument||H,g=b.documentElement,b=b.body,a.pageX=c.clientX+(g&&g.scrollLeft||b&&b.scrollLeft||0)-(g&&g.clientLeft||b&&b.clientLeft||0),a.pageY=c.clientY+(g&&g.scrollTop||b&&b.scrollTop||0)-(g&&g.clientTop||b&&
b.clientTop||0));!a.relatedTarget&&e&&(a.relatedTarget=e===a.target?c.toElement:e);a.which||d===t||(a.which=d&1?1:d&2?3:d&4?2:0);return a}},fix:function(a){if(a[x.expando])return a;var c,b,g=a,d=x.event.fixHooks[a.type]||{},e=d.props?this.props.concat(d.props):this.props;a=x.Event(g);for(c=e.length;c;)b=e[--c],a[b]=g[b];a.target||(a.target=g.srcElement||H);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===t&&(a.metaKey=a.ctrlKey);return d.filter?d.filter(a,g):a},special:{ready:{setup:x.bindReady},
load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,c,b){x.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,c){this.onbeforeunload===c&&(this.onbeforeunload=null)}}},simulate:function(a,c,b,g){a=x.extend(new x.Event,b,{type:a,isSimulated:!0,originalEvent:{}});g?x.event.trigger(a,null,c):x.event.dispatch.call(c,a);a.isDefaultPrevented()&&b.preventDefault()}};x.event.handle=x.event.dispatch;x.removeEvent=H.removeEventListener?function(a,
c,b){a.removeEventListener&&a.removeEventListener(c,b,!1)}:function(a,c,b){a.detachEvent&&a.detachEvent("on"+c,b)};x.Event=function(a,c){if(!(this instanceof x.Event))return new x.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?m:p):this.type=a;c&&x.extend(this,c);this.timeStamp=a&&a.timeStamp||x.now();this[x.expando]=!0};x.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
m;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=m;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=m;this.stopPropagation()},isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p};x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,c){x.event.special[a]={delegateType:c,
bindType:c,handle:function(a){var b=a.relatedTarget,g=a.handleObj,d;if(!b||b!==this&&!x.contains(this,b))a.type=g.origType,d=g.handler.apply(this,arguments),a.type=c;return d}}});x.support.submitBubbles||(x.event.special.submit={setup:function(){if(x.nodeName(this,"form"))return!1;x.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=x.nodeName(a,"input")||x.nodeName(a,"button")?a.form:t)&&!a._submit_attached&&(x.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),
a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&x.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(x.nodeName(this,"form"))return!1;x.event.remove(this,"._submit")}});x.support.changeBubbles||(x.event.special.change={setup:function(){if(la.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)x.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),x.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,x.event.simulate("change",this,a,!0))});return!1}x.event.add(this,"beforeactivate._change",function(a){a=a.target;la.test(a.nodeName)&&!a._change_attached&&(x.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||x.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var c=a.target;if(this!==c||a.isSimulated||
a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){x.event.remove(this,"._change");return la.test(this.nodeName)}});x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(a,c){var b=0,g=function(a){x.event.simulate(c,a.target,x.event.fix(a),!0)};x.event.special[c]={setup:function(){0===b++&&H.addEventListener(a,g,!0)},teardown:function(){0===--b&&H.removeEventListener(a,g,!0)}}});x.fn.extend({on:function(a,
c,b,g,d){var e,k;if("object"===typeof a){"string"!==typeof c&&(b=b||c,c=t);for(k in a)this.on(k,c,b,a[k],d);return this}null==b&&null==g?(g=c,b=c=t):null==g&&("string"===typeof c?(g=b,b=t):(g=b,b=c,c=t));if(!1===g)g=p;else if(!g)return this;1===d&&(e=g,g=function(a){x().off(a);return e.apply(this,arguments)},g.guid=e.guid||(e.guid=x.guid++));return this.each(function(){x.event.add(this,a,g,b,c)})},one:function(a,c,b,g){return this.on(a,c,b,g,1)},off:function(a,c,b){if(a&&a.preventDefault&&a.handleObj){var g=
a.handleObj;x(a.delegateTarget).off(g.namespace?g.origType+"."+g.namespace:g.origType,g.selector,g.handler);return this}if("object"===typeof a){for(g in a)this.off(g,c,a[g]);return this}if(!1===c||"function"===typeof c)b=c,c=t;!1===b&&(b=p);return this.each(function(){x.event.remove(this,a,b,c)})},bind:function(a,c,b){return this.on(a,null,c,b)},unbind:function(a,c){return this.off(a,null,c)},live:function(a,c,b){x(this.context).on(a,this.selector,c,b);return this},die:function(a,c){x(this.context).off(a,
this.selector||"**",c);return this},delegate:function(a,c,b,g){return this.on(c,a,b,g)},undelegate:function(a,c,b){return 1==arguments.length?this.off(a,"**"):this.off(c,a,b)},trigger:function(a,c){return this.each(function(){x.event.trigger(a,c,this)})},triggerHandler:function(a,c){if(this[0])return x.event.trigger(a,c,this[0],!0)},toggle:function(a){var c=arguments,b=a.guid||x.guid++,g=0,d=function(b){var d=(x._data(this,"lastToggle"+a.guid)||0)%g;x._data(this,"lastToggle"+a.guid,d+1);b.preventDefault();
return c[d].apply(this,arguments)||!1};for(d.guid=b;g<c.length;)c[g++].guid=b;return this.click(d)},hover:function(a,c){return this.mouseenter(a).mouseleave(c||a)}});x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,c){x.fn[c]=function(a,b){null==b&&(b=a,a=null);return 0<arguments.length?this.on(c,null,a,b):this.trigger(c)};
x.attrFn&&(x.attrFn[c]=!0);Aa.test(c)&&(x.event.fixHooks[c]=x.event.keyHooks);P.test(c)&&(x.event.fixHooks[c]=x.event.mouseHooks)});(function(){function a(c,b,d,e,k,n){k=0;for(var f=e.length;k<f;k++){var m=e[k];if(m){for(var v=!1,m=m[c];m;){if(m[g]===d){v=e[m.sizset];break}1!==m.nodeType||n||(m[g]=d,m.sizset=k);if(m.nodeName.toLowerCase()===b){v=m;break}m=m[c]}e[k]=v}}}function c(a,b,d,e,k,n){k=0;for(var f=e.length;k<f;k++){var m=e[k];if(m){for(var v=!1,m=m[a];m;){if(m[g]===d){v=e[m.sizset];break}if(1===
m.nodeType)if(n||(m[g]=d,m.sizset=k),"string"!==typeof b){if(m===b){v=!0;break}}else if(0<l.filter(b,[m]).length){v=m;break}m=m[a]}e[k]=v}}}var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,g="sizcache"+(Math.random()+"").replace(".",""),d=0,e=Object.prototype.toString,k=!1,n=!0,f=/\\/g,m=/\r\n/g,v=/\W/;[0,0].sort(function(){n=!1;return 0});var l=function(a,c,g,d){g=g||[];var k=c=c||H;if(1!==c.nodeType&&9!==
c.nodeType)return[];if(!a||"string"!==typeof a)return g;var n,f,m,v,u,z=!0,A=l.isXML(c),B=[],D=a;do if(b.exec(""),n=b.exec(D))if(D=n[3],B.push(n[1]),n[2]){v=n[3];break}while(n);if(1<B.length&&p.exec(a))if(2===B.length&&y.relative[B[0]])f=J(B[0]+B[1],c,d);else for(f=y.relative[B[0]]?[c]:l(B.shift(),c);B.length;)a=B.shift(),y.relative[a]&&(a+=B.shift()),f=J(a,f,d);else if(!d&&1<B.length&&9===c.nodeType&&!A&&y.match.ID.test(B[0])&&!y.match.ID.test(B[B.length-1])&&(n=l.find(B.shift(),c,A),c=n.expr?l.filter(n.expr,
n.set)[0]:n.set[0]),c)for(n=d?{expr:B.pop(),set:C(d)}:l.find(B.pop(),1!==B.length||"~"!==B[0]&&"+"!==B[0]||!c.parentNode?c:c.parentNode,A),f=n.expr?l.filter(n.expr,n.set):n.set,0<B.length?m=C(f):z=!1;B.length;)n=u=B.pop(),y.relative[u]?n=B.pop():u="",null==n&&(n=c),y.relative[u](m,n,A);else m=[];m||(m=f);m||l.error(u||a);if("[object Array]"===e.call(m))if(z)if(c&&1===c.nodeType)for(a=0;null!=m[a];a++)m[a]&&(!0===m[a]||1===m[a].nodeType&&l.contains(c,m[a]))&&g.push(f[a]);else for(a=0;null!=m[a];a++)m[a]&&
1===m[a].nodeType&&g.push(f[a]);else g.push.apply(g,m);else C(m,g);v&&(l(v,k,g,d),l.uniqueSort(g));return g};l.uniqueSort=function(a){if(D&&(k=n,a.sort(D),k))for(var c=1;c<a.length;c++)a[c]===a[c-1]&&a.splice(c--,1);return a};l.matches=function(a,c){return l(a,null,null,c)};l.matchesSelector=function(a,c){return 0<l(c,null,null,[a]).length};l.find=function(a,c,b){var g,d,e,k,n,m;if(!a)return[];d=0;for(e=y.order.length;d<e;d++)if(n=y.order[d],k=y.leftMatch[n].exec(a))if(m=k[1],k.splice(1,1),"\\"!==
m.substr(m.length-1)&&(k[1]=(k[1]||"").replace(f,""),g=y.find[n](k,c,b),null!=g)){a=a.replace(y.match[n],"");break}g||(g="undefined"!==typeof c.getElementsByTagName?c.getElementsByTagName("*"):[]);return{set:g,expr:a}};l.filter=function(a,c,b,g){for(var d,e,k,n,f,m,v,u,p=a,z=[],A=c,C=c&&c[0]&&l.isXML(c[0]);a&&c.length;){for(k in y.filter)if(null!=(d=y.leftMatch[k].exec(a))&&d[2]&&(m=y.filter[k],f=d[1],e=!1,d.splice(1,1),"\\"!==f.substr(f.length-1))){A===z&&(z=[]);if(y.preFilter[k])if(d=y.preFilter[k](d,
A,b,z,g,C),!d)e=n=!0;else if(!0===d)continue;if(d)for(v=0;null!=(f=A[v]);v++)f&&(n=m(f,d,v,A),u=g^n,b&&null!=n?u?e=!0:A[v]=!1:u&&(z.push(f),e=!0));if(n!==t){b||(A=z);a=a.replace(y.match[k],"");if(!e)return[];break}}if(a===p)if(null==e)l.error(a);else break;p=a}return A};l.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var u=l.getText=function(a){var c,b;c=a.nodeType;var g="";if(c)if(1===c||9===c||11===c){if("string"===typeof a.textContent)return a.textContent;if("string"===
typeof a.innerText)return a.innerText.replace(m,"");for(a=a.firstChild;a;a=a.nextSibling)g+=u(a)}else{if(3===c||4===c)return a.nodeValue}else for(c=0;b=a[c];c++)8!==b.nodeType&&(g+=u(b));return g},y=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,c){var b="string"===typeof c,g=b&&!v.test(c),
b=b&&!g;g&&(c=c.toLowerCase());for(var g=0,d=a.length,e;g<d;g++)if(e=a[g]){for(;(e=e.previousSibling)&&1!==e.nodeType;);a[g]=b||e&&e.nodeName.toLowerCase()===c?e||!1:e===c}b&&l.filter(c,a,!0)},">":function(a,c){var b,g="string"===typeof c,d=0,e=a.length;if(g&&!v.test(c))for(c=c.toLowerCase();d<e;d++){if(b=a[d])b=b.parentNode,a[d]=b.nodeName.toLowerCase()===c?b:!1}else{for(;d<e;d++)(b=a[d])&&(a[d]=g?b.parentNode:b.parentNode===c);g&&l.filter(c,a,!0)}},"":function(b,g,e){var k,n=d++,f=c;"string"!==
typeof g||v.test(g)||(k=g=g.toLowerCase(),f=a);f("parentNode",g,n,b,k,e)},"~":function(b,g,e){var k,n=d++,f=c;"string"!==typeof g||v.test(g)||(k=g=g.toLowerCase(),f=a);f("previousSibling",g,n,b,k,e)}},find:{ID:function(a,c,b){if("undefined"!==typeof c.getElementById&&!b)return(a=c.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,c){if("undefined"!==typeof c.getElementsByName){for(var b=[],g=c.getElementsByName(a[1]),d=0,e=g.length;d<e;d++)g[d].getAttribute("name")===a[1]&&b.push(g[d]);
return 0===b.length?null:b}},TAG:function(a,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,b,g,d,e){a=" "+a[1].replace(f,"")+" ";if(e)return a;e=0;for(var k;null!=(k=c[e]);e++)k&&(d^(k.className&&0<=(" "+k.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?b||g.push(k):b&&(c[e]=!1));return!1},ID:function(a){return a[1].replace(f,"")},TAG:function(a,c){return a[1].replace(f,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||
l.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var c=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}else a[2]&&l.error(a[0]);a[0]=d++;return a},ATTR:function(a,c,b,g,d,e){c=a[1]=a[1].replace(f,"");!e&&y.attrMap[c]&&(a[1]=y.attrMap[c]);a[4]=(a[4]||a[5]||"").replace(f,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,c,g,d,e){if("not"===a[1])if(1<(b.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=
l(a[3],null,null,c);else return a=l.filter(a[3],c,g,1^e),g||d.push.apply(d,a),!1;else if(y.match.POS.test(a[0])||y.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,c,b){return!!l(b[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var c=a.getAttribute("type"),b=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===b&&(c===b||null===c)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&
"password"===a.type},submit:function(a){var c=a.nodeName.toLowerCase();return("input"===c||"button"===c)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var c=a.nodeName.toLowerCase();return("input"===c||"button"===c)&&"reset"===a.type},button:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&"button"===a.type||"button"===c},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,c){return 0===c},last:function(a,c,b,g){return c===g.length-1},even:function(a,c){return 0===c%2},odd:function(a,c){return 1===c%2},lt:function(a,c,b){return c<b[3]-0},gt:function(a,c,b){return c>b[3]-0},nth:function(a,c,b){return b[3]-0===c},eq:function(a,c,b){return b[3]-0===c}},filter:{PSEUDO:function(a,c,b,g){var d=c[1],e=y.filters[d];if(e)return e(a,b,c,g);if("contains"===d)return 0<=(a.textContent||a.innerText||u([a])||"").indexOf(c[3]);
if("not"===d){c=c[3];b=0;for(g=c.length;b<g;b++)if(c[b]===a)return!1;return!0}l.error(d)},CHILD:function(a,c){var b,d,e,k,n,f;b=c[1];f=a;switch(b){case "only":case "first":for(;f=f.previousSibling;)if(1===f.nodeType)return!1;if("first"===b)return!0;f=a;case "last":for(;f=f.nextSibling;)if(1===f.nodeType)return!1;return!0;case "nth":b=c[2];d=c[3];if(1===b&&0===d)return!0;e=c[0];if((k=a.parentNode)&&(k[g]!==e||!a.nodeIndex)){n=0;for(f=k.firstChild;f;f=f.nextSibling)1===f.nodeType&&(f.nodeIndex=++n);
k[g]=e}f=a.nodeIndex-d;return 0===b?0===f:0===f%b&&0<=f/b}},ID:function(a,c){return 1===a.nodeType&&a.getAttribute("id")===c},TAG:function(a,c){return"*"===c&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===c},CLASS:function(a,c){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)},ATTR:function(a,c){var b=c[1],b=l.attr?l.attr(a,b):y.attrHandle[b]?y.attrHandle[b](a):null!=a[b]?a[b]:a.getAttribute(b),g=b+"",d=c[2],e=c[4];return null==b?"!="===d:!d&&l.attr?null!=b:"="===d?
g===e:"*="===d?0<=g.indexOf(e):"~="===d?0<=(" "+g+" ").indexOf(e):e?"!="===d?g!==e:"^="===d?0===g.indexOf(e):"$="===d?g.substr(g.length-e.length)===e:"|="===d?g===e||g.substr(0,e.length+1)===e+"-":!1:g&&!1!==b},POS:function(a,c,b,g){var d=y.setFilters[c[2]];if(d)return d(a,b,c,g)}}},p=y.match.POS,z=function(a,c){return"\\"+(c-0+1)},A;for(A in y.match)y.match[A]=RegExp(y.match[A].source+/(?![^\[]*\])(?![^\(]*\))/.source),y.leftMatch[A]=RegExp(/(^(?:.|\r|\n)*?)/.source+y.match[A].source.replace(/\\(\d+)/g,
z));y.match.globalPOS=p;var C=function(a,c){a=Array.prototype.slice.call(a,0);return c?(c.push.apply(c,a),c):a};try{Array.prototype.slice.call(H.documentElement.childNodes,0)[0].nodeType}catch(B){C=function(a,c){var b=0,g=c||[];if("[object Array]"===e.call(a))Array.prototype.push.apply(g,a);else if("number"===typeof a.length)for(var d=a.length;b<d;b++)g.push(a[b]);else for(;a[b];b++)g.push(a[b]);return g}}var D,G;H.documentElement.compareDocumentPosition?D=function(a,c){return a===c?(k=!0,0):a.compareDocumentPosition&&
c.compareDocumentPosition?a.compareDocumentPosition(c)&4?-1:1:a.compareDocumentPosition?-1:1}:(D=function(a,c){if(a===c)return k=!0,0;if(a.sourceIndex&&c.sourceIndex)return a.sourceIndex-c.sourceIndex;var b,g,d=[],e=[];b=a.parentNode;g=c.parentNode;var n=b;if(b===g)return G(a,c);if(!b)return-1;if(!g)return 1;for(;n;)d.unshift(n),n=n.parentNode;for(n=g;n;)e.unshift(n),n=n.parentNode;b=d.length;g=e.length;for(n=0;n<b&&n<g;n++)if(d[n]!==e[n])return G(d[n],e[n]);return n===b?G(a,e[n],-1):G(d[n],c,1)},
G=function(a,c,b){if(a===c)return b;for(a=a.nextSibling;a;){if(a===c)return-1;a=a.nextSibling}return 1});(function(){var a=H.createElement("div"),c="script"+(new Date).getTime(),b=H.documentElement;a.innerHTML="<a name='"+c+"'/>";b.insertBefore(a,b.firstChild);H.getElementById(c)&&(y.find.ID=function(a,c,b){if("undefined"!==typeof c.getElementById&&!b)return(c=c.getElementById(a[1]))?c.id===a[1]||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===a[1]?[c]:t:[]},y.filter.ID=
function(a,c){var b="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&b&&b.nodeValue===c});b.removeChild(a);b=a=null})();(function(){var a=H.createElement("div");a.appendChild(H.createComment(""));0<a.getElementsByTagName("*").length&&(y.find.TAG=function(a,c){var b=c.getElementsByTagName(a[1]);if("*"===a[1]){for(var g=[],d=0;b[d];d++)1===b[d].nodeType&&g.push(b[d]);b=g}return b});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(y.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();H.querySelectorAll&&function(){var a=l,c=H.createElement("div");c.innerHTML="<p class='TEST'></p>";if(!c.querySelectorAll||0!==c.querySelectorAll(".TEST").length){l=function(c,b,g,d){b=b||H;if(!d&&!l.isXML(b)){var e=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(c);if(e&&(1===b.nodeType||9===b.nodeType)){if(e[1])return C(b.getElementsByTagName(c),g);if(e[2]&&y.find.CLASS&&b.getElementsByClassName)return C(b.getElementsByClassName(e[2]),
g)}if(9===b.nodeType){if("body"===c&&b.body)return C([b.body],g);if(e&&e[3]){var k=b.getElementById(e[3]);if(k&&k.parentNode){if(k.id===e[3])return C([k],g)}else return C([],g)}try{return C(b.querySelectorAll(c),g)}catch(n){}}else if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){var e=b,f=(k=b.getAttribute("id"))||"__sizzle__",m=b.parentNode,v=/^\s*[+~]/.test(c);k?f=f.replace(/'/g,"\\$&"):b.setAttribute("id",f);v&&m&&(b=b.parentNode);try{if(!v||m)return C(b.querySelectorAll("[id='"+f+"'] "+
c),g)}catch(u){}finally{k||e.removeAttribute("id")}}}return a(c,b,g,d)};for(var b in a)l[b]=a[b];c=null}}();(function(){var a=H.documentElement,c=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(c){var b=!c.call(H.createElement("div"),"div"),g=!1;try{c.call(H.documentElement,"[test!='']:sizzle")}catch(d){g=!0}l.matchesSelector=function(a,d){d=d.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!l.isXML(a))try{if(g||!y.match.PSEUDO.test(d)&&!/!=/.test(d)){var e=c.call(a,
d);if(e||!b||a.document&&11!==a.document.nodeType)return e}}catch(k){}return 0<l(d,null,null,[a]).length}}})();(function(){var a=H.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(y.order.splice(1,0,"CLASS"),y.find.CLASS=function(a,c,b){if("undefined"!==typeof c.getElementsByClassName&&!b)return c.getElementsByClassName(a[1])},
a=null))})();l.contains=H.documentElement.contains?function(a,c){return a!==c&&(a.contains?a.contains(c):!0)}:H.documentElement.compareDocumentPosition?function(a,c){return!!(a.compareDocumentPosition(c)&16)}:function(){return!1};l.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var J=function(a,c,b){var g,d=[],e="";for(c=c.nodeType?[c]:c;g=y.match.PSEUDO.exec(a);)e+=g[0],a=a.replace(y.match.PSEUDO,"");a=y.relative[a]?a+"*":a;g=0;for(var k=c.length;g<k;g++)l(a,
c[g],d,b);return l.filter(e,d)};l.attr=x.attr;l.selectors.attrMap={};x.find=l;x.expr=l.selectors;x.expr[":"]=x.expr.filters;x.unique=l.uniqueSort;x.text=l.getText;x.isXMLDoc=l.isXML;x.contains=l.contains})();var Wa=/Until$/,Na=/^(?:parents|prevUntil|prevAll)/,db=/,/,ra=/^.[^:#\[\.,]*$/,ea=Array.prototype.slice,Ia=x.expr.match.globalPOS,ib={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(a){var c=this,b,g;if("string"!==typeof a)return x(a).filter(function(){b=0;for(g=c.length;b<
g;b++)if(x.contains(c[b],this))return!0});var d=this.pushStack("","find",a),e,k,n;b=0;for(g=this.length;b<g;b++)if(e=d.length,x.find(a,this[b],d),0<b)for(k=e;k<d.length;k++)for(n=0;n<e;n++)if(d[n]===d[k]){d.splice(k--,1);break}return d},has:function(a){var c=x(a);return this.filter(function(){for(var a=0,b=c.length;a<b;a++)if(x.contains(this,c[a]))return!0})},not:function(a){return this.pushStack(d(this,a,!1),"not",a)},filter:function(a){return this.pushStack(d(this,a,!0),"filter",a)},is:function(a){return!!a&&
("string"===typeof a?Ia.test(a)?0<=x(a,this.context).index(this[0]):0<x.filter(a,this).length:0<this.filter(a).length)},closest:function(a,c){var b=[],g,d,e=this[0];if(x.isArray(a)){for(d=1;e&&e.ownerDocument&&e!==c;){for(g=0;g<a.length;g++)x(e).is(a[g])&&b.push({selector:a[g],elem:e,level:d});e=e.parentNode;d++}return b}var k=Ia.test(a)||"string"!==typeof a?x(a,c||this.context):0;g=0;for(d=this.length;g<d;g++)for(e=this[g];e;)if(k?-1<k.index(e):x.find.matchesSelector(e,a)){b.push(e);break}else if(e=
e.parentNode,!e||!e.ownerDocument||e===c||11===e.nodeType)break;b=1<b.length?x.unique(b):b;return this.pushStack(b,"closest",a)},index:function(a){return a?"string"===typeof a?x.inArray(this[0],x(a)):x.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,c){var b="string"===typeof a?x(a,c):x.makeArray(a&&a.nodeType?[a]:a),g=x.merge(this.get(),b);return this.pushStack(f(b[0])||f(g[0])?g:x.unique(g))},andSelf:function(){return this.add(this.prevObject)}});
x.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return x.dir(a,"parentNode")},parentsUntil:function(a,c,b){return x.dir(a,"parentNode",b)},next:function(a){return x.nth(a,2,"nextSibling")},prev:function(a){return x.nth(a,2,"previousSibling")},nextAll:function(a){return x.dir(a,"nextSibling")},prevAll:function(a){return x.dir(a,"previousSibling")},nextUntil:function(a,c,b){return x.dir(a,"nextSibling",b)},prevUntil:function(a,c,b){return x.dir(a,"previousSibling",
b)},siblings:function(a){return x.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return x.sibling(a.firstChild)},contents:function(a){return x.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:x.makeArray(a.childNodes)}},function(a,c){x.fn[a]=function(b,g){var d=x.map(this,c,b);Wa.test(a)||(g=b);g&&"string"===typeof g&&(d=x.filter(g,d));d=1<this.length&&!ib[a]?x.unique(d):d;(1<this.length||db.test(g))&&Na.test(a)&&(d=d.reverse());return this.pushStack(d,a,ea.call(arguments).join(","))}});
x.extend({filter:function(a,c,b){b&&(a=":not("+a+")");return 1===c.length?x.find.matchesSelector(c[0],a)?[c[0]]:[]:x.find.matches(a,c)},dir:function(a,c,b){var g=[];for(a=a[c];a&&9!==a.nodeType&&(b===t||1!==a.nodeType||!x(a).is(b));)1===a.nodeType&&g.push(a),a=a[c];return g},nth:function(a,c,b,g){c=c||1;for(g=0;a&&(1!==a.nodeType||++g!==c);a=a[b]);return a},sibling:function(a,c){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&a!==c&&b.push(a);return b}});var ya="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
oa=/ jQuery\d+="(?:\d+|null)"/g,Y=/^\s+/,xa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,ta=/<([\w:]+)/,Ca=/<tbody/i,jb=/<|&#?\w+;/,eb=/<(?:script|style)/i,Ab=/<(?:script|object|embed|option|style)/i,ja=RegExp("<(?:"+ya+")[\\s/>]","i"),Pa=/checked\s*(?:[^=]|=\s*.checked.)/i,Jb=/\/(java|ecma)script/i,Sa=/^\s*<!(?:\[CDATA\[|\-\-)/,kb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},qb=k(H);kb.optgroup=kb.option;kb.tbody=kb.tfoot=kb.colgroup=kb.caption=kb.thead;kb.th=kb.td;x.support.htmlSerialize||(kb._default=[1,"div<div>","</div>"]);x.fn.extend({text:function(a){return x.access(this,function(a){return a===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||H).createTextNode(a))},
null,a,arguments.length)},wrapAll:function(a){if(x.isFunction(a))return this.each(function(c){x(this).wrapAll(a.call(this,c))});if(this[0]){var c=x(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return x.isFunction(a)?this.each(function(c){x(this).wrapInner(a.call(this,c))}):this.each(function(){var c=x(this),b=c.contents();
b.length?b.wrapAll(a):c.append(a)})},wrap:function(a){var c=x.isFunction(a);return this.each(function(b){x(this).wrapAll(c?a.call(this,b):a)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=x.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,x.clean(arguments));return a}},remove:function(a,
c){for(var b=0,g;null!=(g=this[b]);b++)if(!a||x.filter(a,[g]).length)c||1!==g.nodeType||(x.cleanData(g.getElementsByTagName("*")),x.cleanData([g])),g.parentNode&&g.parentNode.removeChild(g);return this},empty:function(){for(var a=0,c;null!=(c=this[a]);a++)for(1===c.nodeType&&x.cleanData(c.getElementsByTagName("*"));c.firstChild;)c.removeChild(c.firstChild);return this},clone:function(a,c){a=null==a?!1:a;c=null==c?a:c;return this.map(function(){return x.clone(this,a,c)})},html:function(a){return x.access(this,
function(a){var c=this[0]||{},b=0,g=this.length;if(a===t)return 1===c.nodeType?c.innerHTML.replace(oa,""):null;if("string"===typeof a&&!(eb.test(a)||!x.support.leadingWhitespace&&Y.test(a)||kb[(ta.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(xa,"<$1></$2>");try{for(;b<g;b++)c=this[b]||{},1===c.nodeType&&(x.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(d){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(x.isFunction(a))return this.each(function(c){var b=
x(this),g=b.html();b.replaceWith(a.call(this,c,g))});"string"!==typeof a&&(a=x(a).detach());return this.each(function(){var c=this.nextSibling,b=this.parentNode;x(this).remove();c?x(c).before(a):x(b).append(a)})}return this.length?this.pushStack(x(x.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,b){var g,d,k,n=a[0],f=[];if(!x.support.checkClone&&3===arguments.length&&"string"===typeof n&&Pa.test(n))return this.each(function(){x(this).domManip(a,
c,b,!0)});if(x.isFunction(n))return this.each(function(g){var d=x(this);a[0]=n.call(this,g,c?d.html():t);d.domManip(a,c,b)});if(this[0]){g=n&&n.parentNode;g=x.support.parentNode&&g&&11===g.nodeType&&g.childNodes.length===this.length?{fragment:g}:x.buildFragment(a,this,f);k=g.fragment;if(d=1===k.childNodes.length?k=k.firstChild:k.firstChild){c=c&&x.nodeName(d,"tr");for(var m=0,v=this.length,l=v-1;m<v;m++)b.call(c?e(this[m],d):this[m],g.cacheable||1<v&&m<l?x.clone(k,!0,!0):k)}f.length&&x.each(f,function(a,
c){c.src?x.ajax({type:"GET",global:!1,url:c.src,async:!1,dataType:"script"}):x.globalEval((c.text||c.textContent||c.innerHTML||"").replace(Sa,"/*$0*/"));c.parentNode&&c.parentNode.removeChild(c)})}return this}});x.buildFragment=function(a,c,b){var g,d,e,k,n=a[0];c&&c[0]&&(k=c[0].ownerDocument||c[0]);k.createDocumentFragment||(k=H);1===a.length&&"string"===typeof n&&512>n.length&&k===H&&"<"===n.charAt(0)&&!(Ab.test(n)||!x.support.checkClone&&Pa.test(n)||!x.support.html5Clone&&ja.test(n))&&(d=!0,(e=
x.fragments[n])&&1!==e&&(g=e));g||(g=k.createDocumentFragment(),x.clean(a,k,g,b));d&&(x.fragments[n]=e?g:1);return{fragment:g,cacheable:d}};x.fragments={};x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){x.fn[a]=function(b){var g=[];b=x(b);var d=1===this.length&&this[0].parentNode;if(d&&11===d.nodeType&&1===d.childNodes.length&&1===b.length)return b[c](this[0]),this;for(var d=0,e=b.length;d<e;d++){var k=(0<d?this.clone(!0):
this).get();x(b[d])[c](k);g=g.concat(k)}return this.pushStack(g,a,b.selector)}});x.extend({clone:function(b,g,d){var e,k,f;x.support.html5Clone||x.isXMLDoc(b)||!ja.test("<"+b.nodeName+">")?e=b.cloneNode(!0):(e=H.createElement("div"),qb.appendChild(e),e.innerHTML=b.outerHTML,e=e.firstChild);var m=e;if(!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||x.isXMLDoc(b)))for(a(b,m),e=c(b),k=c(m),f=0;e[f];++f)k[f]&&a(e[f],k[f]);if(g&&(n(b,m),d))for(e=c(b),k=c(m),f=0;e[f];++f)n(e[f],
k[f]);return m},clean:function(a,c,b,g){var d,e=[];c=c||H;"undefined"===typeof c.createElement&&(c=c.ownerDocument||c[0]&&c[0].ownerDocument||H);for(var n=0,f;null!=(f=a[n]);n++)if("number"===typeof f&&(f+=""),f){if("string"===typeof f)if(jb.test(f)){f=f.replace(xa,"<$1></$2>");d=(ta.exec(f)||["",""])[1].toLowerCase();var m=kb[d]||kb._default,l=m[0],u=c.createElement("div"),y=qb.childNodes;c===H?qb.appendChild(u):k(c).appendChild(u);for(u.innerHTML=m[1]+f+m[2];l--;)u=u.lastChild;if(!x.support.tbody)for(l=
Ca.test(f),m="table"!==d||l?"<table>"!==m[1]||l?[]:u.childNodes:u.firstChild&&u.firstChild.childNodes,d=m.length-1;0<=d;--d)x.nodeName(m[d],"tbody")&&!m[d].childNodes.length&&m[d].parentNode.removeChild(m[d]);!x.support.leadingWhitespace&&Y.test(f)&&u.insertBefore(c.createTextNode(Y.exec(f)[0]),u.firstChild);f=u.childNodes;u&&(u.parentNode.removeChild(u),0<y.length&&(u=y[y.length-1])&&u.parentNode&&u.parentNode.removeChild(u))}else f=c.createTextNode(f);var p;if(!x.support.appendChecked)if(f[0]&&
"number"===typeof(p=f.length))for(d=0;d<p;d++)v(f[d]);else v(f);f.nodeType?e.push(f):e=x.merge(e,f)}if(b)for(a=function(a){return!a.type||Jb.test(a.type)},n=0;e[n];n++)c=e[n],g&&x.nodeName(c,"script")&&(!c.type||Jb.test(c.type))?g.push(c.parentNode?c.parentNode.removeChild(c):c):(1===c.nodeType&&(f=x.grep(c.getElementsByTagName("script"),a),e.splice.apply(e,[n+1,0].concat(f))),b.appendChild(c));return e},cleanData:function(a){for(var c,b,g=x.cache,d=x.event.special,e=x.support.deleteExpando,k=0,n;null!=
(n=a[k]);k++)if(!n.nodeName||!x.noData[n.nodeName.toLowerCase()])if(b=n[x.expando]){if((c=g[b])&&c.events){for(var f in c.events)d[f]?x.event.remove(n,f):x.removeEvent(n,f,c.handle);c.handle&&(c.handle.elem=null)}e?delete n[x.expando]:n.removeAttribute&&n.removeAttribute(x.expando);delete g[b]}}});var Oa=/alpha\([^)]*\)/i,Za=/opacity=([^)]*)/,Ga=/([A-Z]|^ms)/g,$a=/^[\-+]?(?:\d*\.)?\d+$/i,Xa=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,lb=/^([\-+])=([\-+.\de]+)/,Eb=/^margin/,Kb={position:"absolute",visibility:"hidden",
display:"block"},Fb=["Top","Right","Bottom","Left"],bb,Qa,hc;x.fn.css=function(a,c){return x.access(this,function(a,c,b){return b!==t?x.style(a,c,b):x.css(a,c)},a,c,1<arguments.length)};x.extend({cssHooks:{opacity:{get:function(a,c){if(c){var b=bb(a,"opacity");return""===b?"1":b}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":x.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,b,g){if(a&&
3!==a.nodeType&&8!==a.nodeType&&a.style){var d,e=x.camelCase(c),k=a.style,n=x.cssHooks[e];c=x.cssProps[e]||e;if(b!==t){if(g=typeof b,"string"===g&&(d=lb.exec(b))&&(b=+(d[1]+1)*+d[2]+parseFloat(x.css(a,c)),g="number"),!(null==b||"number"===g&&isNaN(b)||("number"!==g||x.cssNumber[e]||(b+="px"),n&&"set"in n&&(b=n.set(a,b))===t)))try{k[c]=b}catch(f){}}else return n&&"get"in n&&(d=n.get(a,!1,g))!==t?d:k[c]}},css:function(a,c,b){var g,d;c=x.camelCase(c);d=x.cssHooks[c];c=x.cssProps[c]||c;"cssFloat"===c&&
(c="float");if(d&&"get"in d&&(g=d.get(a,!0,b))!==t)return g;if(bb)return bb(a,c)},swap:function(a,c,b){var g={},d;for(d in c)g[d]=a.style[d],a.style[d]=c[d];b=b.call(a);for(d in c)a.style[d]=g[d];return b}});x.curCSS=x.css;H.defaultView&&H.defaultView.getComputedStyle&&(Qa=function(a,c){var b,g,d,e=a.style;c=c.replace(Ga,"-$1").toLowerCase();(g=a.ownerDocument.defaultView)&&(d=g.getComputedStyle(a,null))&&(b=d.getPropertyValue(c),""!==b||x.contains(a.ownerDocument.documentElement,a)||(b=x.style(a,
c)));!x.support.pixelMargin&&d&&Eb.test(c)&&Xa.test(b)&&(g=e.width,e.width=b,b=d.width,e.width=g);return b});H.documentElement.currentStyle&&(hc=function(a,c){var b,g,d=a.currentStyle&&a.currentStyle[c],e=a.style;null==d&&e&&(b=e[c])&&(d=b);if(Xa.test(d)){b=e.left;if(g=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;e.left="fontSize"===c?"1em":d;d=e.pixelLeft+"px";e.left=b;g&&(a.runtimeStyle.left=g)}return""===d?"auto":d});bb=Qa||hc;x.each(["height","width"],function(a,
c){x.cssHooks[c]={get:function(a,b,g){if(b)return 0!==a.offsetWidth?u(a,c,g):x.swap(a,Kb,function(){return u(a,c,g)})},set:function(a,c){return $a.test(c)?c+"px":c}}});x.support.opacity||(x.cssHooks.opacity={get:function(a,c){return Za.test((c&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(a,c){var b=a.style,g=a.currentStyle,d=x.isNumeric(c)?"alpha(opacity="+100*c+")":"",e=g&&g.filter||b.filter||"";b.zoom=1;if(1<=c&&""===x.trim(e.replace(Oa,
""))&&(b.removeAttribute("filter"),g&&!g.filter))return;b.filter=Oa.test(e)?e.replace(Oa,d):e+" "+d}});x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(a,c){return x.swap(a,{display:"inline-block"},function(){return c?bb(a,"margin-right"):a.style.marginRight})}})});x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(a){var c=a.offsetHeight;return 0===a.offsetWidth&&0===c||!x.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||x.css(a,"display"))},
x.expr.filters.visible=function(a){return!x.expr.filters.hidden(a)});x.each({margin:"",padding:"",border:"Width"},function(a,c){x.cssHooks[a+c]={expand:function(b){var g="string"===typeof b?b.split(" "):[b],d={};for(b=0;4>b;b++)d[a+Fb[b]+c]=g[b]||g[b-2]||g[0];return d}}});var Xb=/%20/g,ha=/\[\]$/,Ea=/\r?\n/g,Ka=/#.*$/,ob=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,sb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,pa=/^(?:GET|HEAD)$/,Bb=/^\/\//,
rb=/\?/,Ra=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ab=/^(?:select|textarea)/i,cb=/\s+/,Gb=/([?&])_=[^&]*/,bc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Ja=x.fn.load,tb={},Ta={},fb,xb,nb=["*/"]+["*"];try{fb=K.href}catch(yc){fb=H.createElement("a"),fb.href="",fb=fb.href}xb=bc.exec(fb.toLowerCase())||[];x.fn.extend({load:function(a,c,b){if("string"!==typeof a&&Ja)return Ja.apply(this,arguments);if(!this.length)return this;var g=a.indexOf(" ");if(0<=g){var d=a.slice(g,a.length);a=
a.slice(0,g)}g="GET";c&&(x.isFunction(c)?(b=c,c=t):"object"===typeof c&&(c=x.param(c,x.ajaxSettings.traditional),g="POST"));var e=this;x.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,c,g){g=a.responseText;a.isResolved()&&(a.done(function(a){g=a}),e.html(d?x("<div>").append(g.replace(Ra,"")).find(d):g));b&&e.each(b,[g,c,a])}});return this},serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?x.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ab.test(this.nodeName)||sb.test(this.type))}).map(function(a,c){var b=x(this).val();return null==b?null:x.isArray(b)?x.map(b,function(a,b){return{name:c.name,value:a.replace(Ea,"\r\n")}}):{name:c.name,value:b.replace(Ea,"\r\n")}}).get()}});x.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){x.fn[c]=function(a){return this.on(c,a)}});x.each(["get","post"],function(a,c){x[c]=function(a,
b,g,d){x.isFunction(b)&&(d=d||g,g=b,b=t);return x.ajax({type:c,url:a,data:b,success:g,dataType:d})}});x.extend({getScript:function(a,c){return x.get(a,t,c,"script")},getJSON:function(a,c,b){return x.get(a,c,b,"json")},ajaxSetup:function(a,c){c?y(a,x.ajaxSettings):(c=a,a=x.ajaxSettings);y(a,c);return a},ajaxSettings:{url:fb,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(xb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":nb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":q.String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:z(tb),ajaxTransport:z(Ta),ajax:function(a,c){function b(a,c,v,l){if(2!==B){B=2;z&&clearTimeout(z);p=t;u=l||"";J.readyState=0<a?4:
0;var y,A,C;l=c;if(v){var G=g,F=J,q=G.contents,H=G.dataTypes,r=G.responseFields,s,M,Cb,K;for(M in r)M in v&&(F[r[M]]=v[M]);for(;"*"===H[0];)H.shift(),s===t&&(s=G.mimeType||F.getResponseHeader("content-type"));if(s)for(M in q)if(q[M]&&q[M].test(s)){H.unshift(M);break}if(H[0]in v)Cb=H[0];else{for(M in v){if(!H[0]||G.converters[M+" "+H[0]]){Cb=M;break}K||(K=M)}Cb=Cb||K}Cb?(Cb!==H[0]&&H.unshift(Cb),v=v[Cb]):v=void 0}else v=t;if(200<=a&&300>a||304===a){if(g.ifModified){if(s=J.getResponseHeader("Last-Modified"))x.lastModified[m]=
s;if(s=J.getResponseHeader("Etag"))x.etag[m]=s}if(304===a)l="notmodified",y=!0;else try{s=g;s.dataFilter&&(v=s.dataFilter(v,s.dataType));var S=s.dataTypes;M={};var L,da,I=S.length,N,mc=S[0],Q,Lc,oa,R,W;for(L=1;L<I;L++){if(1===L)for(da in s.converters)"string"===typeof da&&(M[da.toLowerCase()]=s.converters[da]);Q=mc;mc=S[L];if("*"===mc)mc=Q;else if("*"!==Q&&Q!==mc){Lc=Q+" "+mc;oa=M[Lc]||M["* "+mc];if(!oa)for(R in W=t,M)if(N=R.split(" "),N[0]===Q||"*"===N[0])if(W=M[N[1]+" "+mc]){R=M[R];!0===R?oa=W:
!0===W&&(oa=R);break}oa||W||x.error("No conversion from "+Lc.replace(" "," to "));!0!==oa&&(v=oa?oa(v):W(R(v)))}}A=v;l="success";y=!0}catch(ma){l="parsererror",C=ma}}else if(C=l,!l||a)l="error",0>a&&(a=0);J.status=a;J.statusText=""+(c||l);y?k.resolveWith(d,[A,l,J]):k.rejectWith(d,[J,l,C]);J.statusCode(f);f=t;D&&e.trigger("ajax"+(y?"Success":"Error"),[J,g,y?A:C]);n.fireWith(d,[J,l]);D&&(e.trigger("ajaxComplete",[J,g]),--x.active||x.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=t);c=c||{};
var g=x.ajaxSetup({},c),d=g.context||g,e=d!==g&&(d.nodeType||d instanceof x)?x(d):x.event,k=x.Deferred(),n=x.Callbacks("once memory"),f=g.statusCode||{},m,v={},l={},u,y,p,z,C,B=0,D,G,J={readyState:0,setRequestHeader:function(a,c){if(!B){var b=a.toLowerCase();a=l[b]=l[b]||a;v[a]=c}return this},getAllResponseHeaders:function(){return 2===B?u:null},getResponseHeader:function(a){var c;if(2===B){if(!y)for(y={};c=ob.exec(u);)y[c[1].toLowerCase()]=c[2];c=y[a.toLowerCase()]}return c===t?null:c},overrideMimeType:function(a){B||
(g.mimeType=a);return this},abort:function(a){a=a||"abort";p&&p.abort(a);b(0,a);return this}};k.promise(J);J.success=J.done;J.error=J.fail;J.complete=n.add;J.statusCode=function(a){if(a){var c;if(2>B)for(c in a)f[c]=[f[c],a[c]];else c=a[J.status],J.then(c,c)}return this};g.url=((a||g.url)+"").replace(Ka,"").replace(Bb,xb[1]+"//");g.dataTypes=x.trim(g.dataType||"*").toLowerCase().split(cb);null==g.crossDomain&&(C=bc.exec(g.url.toLowerCase()),g.crossDomain=!(!C||C[1]==xb[1]&&C[2]==xb[2]&&(C[3]||("http:"===
C[1]?80:443))==(xb[3]||("http:"===xb[1]?80:443))));g.data&&g.processData&&"string"!==typeof g.data&&(g.data=x.param(g.data,g.traditional));A(tb,g,c,J);if(2===B)return!1;D=g.global;g.type=g.type.toUpperCase();g.hasContent=!pa.test(g.type);D&&0===x.active++&&x.event.trigger("ajaxStart");if(!g.hasContent&&(g.data&&(g.url+=(rb.test(g.url)?"&":"?")+g.data,delete g.data),m=g.url,!1===g.cache)){C=x.now();var F=g.url.replace(Gb,"$1_="+C);g.url=F+(F===g.url?(rb.test(g.url)?"&":"?")+"_="+C:"")}(g.data&&g.hasContent&&
!1!==g.contentType||c.contentType)&&J.setRequestHeader("Content-Type",g.contentType);g.ifModified&&(m=m||g.url,x.lastModified[m]&&J.setRequestHeader("If-Modified-Since",x.lastModified[m]),x.etag[m]&&J.setRequestHeader("If-None-Match",x.etag[m]));J.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+nb+"; q=0.01":""):g.accepts["*"]);for(G in g.headers)J.setRequestHeader(G,g.headers[G]);if(g.beforeSend&&(!1===g.beforeSend.call(d,J,
g)||2===B))return J.abort(),!1;for(G in{success:1,error:1,complete:1})J[G](g[G]);if(p=A(Ta,g,c,J)){J.readyState=1;D&&e.trigger("ajaxSend",[J,g]);g.async&&0<g.timeout&&(z=setTimeout(function(){J.abort("timeout")},g.timeout));try{B=1,p.send(v,b)}catch(q){if(2>B)b(-1,q);else throw q;}}else b(-1,"No Transport");return J},param:function(a,c){var b=[],g=function(a,c){c=x.isFunction(c)?c():c;b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)};c===t&&(c=x.ajaxSettings.traditional);if(x.isArray(a)||
a.jquery&&!x.isPlainObject(a))x.each(a,function(){g(this.name,this.value)});else for(var d in a)C(d,a[d],c,g);return b.join("&").replace(Xb,"+")}});x.extend({active:0,lastModified:{},etag:{}});var ub=x.now(),Ua=/(\=)\?(&|$)|\?\?/i;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return x.expando+"_"+ub++}});x.ajaxPrefilter("json jsonp",function(a,c,b){c="string"===typeof a.data&&/^application\/x\-www\-form\-urlencoded/.test(a.contentType);if("jsonp"===a.dataTypes[0]||!1!==a.jsonp&&(Ua.test(a.url)||
c&&Ua.test(a.data))){var g,d=a.jsonpCallback=x.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,e=q[d],k=a.url,n=a.data,f="$1"+d+"$2";!1!==a.jsonp&&(k=k.replace(Ua,f),a.url===k&&(c&&(n=n.replace(Ua,f)),a.data===n&&(k+=(/\?/.test(k)?"&":"?")+a.jsonp+"="+d)));a.url=k;a.data=n;q[d]=function(a){g=[a]};b.always(function(){q[d]=e;if(g&&x.isFunction(e))q[d](g[0])});a.converters["script json"]=function(){g||x.error(d+" was not called");return g[0]};a.dataTypes[0]="json";return"script"}});x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){x.globalEval(a);return a}}});x.ajaxPrefilter("script",function(a){a.cache===t&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});x.ajaxTransport("script",function(a){if(a.crossDomain){var c,b=H.head||H.getElementsByTagName("head")[0]||H.documentElement;return{send:function(g,d){c=H.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,
g){if(g||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,b&&c.parentNode&&b.removeChild(c),c=t,g||d(200,"success")};b.insertBefore(c,b.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var ua=q.ActiveXObject?function(){for(var a in dc)dc[a](0,1)}:!1,cc=0,dc;x.ajaxSettings.xhr=q.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&D()))a:{try{a=new q.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}a=void 0}return a}:D;(function(a){x.extend(x.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(x.ajaxSettings.xhr());x.support.ajax&&x.ajaxTransport(function(a){if(!a.crossDomain||x.support.cors){var c;return{send:function(b,g){var d=a.xhr(),e,k;a.username?d.open(a.type,a.url,a.async,a.username,a.password):d.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)d[k]=a.xhrFields[k];a.mimeType&&d.overrideMimeType&&d.overrideMimeType(a.mimeType);a.crossDomain||b["X-Requested-With"]||(b["X-Requested-With"]="XMLHttpRequest");try{for(k in b)d.setRequestHeader(k,
b[k])}catch(n){}d.send(a.hasContent&&a.data||null);c=function(b,k){var n,f,m,v,l;try{if(c&&(k||4===d.readyState))if(c=t,e&&(d.onreadystatechange=x.noop,ua&&delete dc[e]),k)4!==d.readyState&&d.abort();else{n=d.status;m=d.getAllResponseHeaders();v={};(l=d.responseXML)&&l.documentElement&&(v.xml=l);try{v.text=d.responseText}catch(u){}try{f=d.statusText}catch(y){f=""}n||!a.isLocal||a.crossDomain?1223===n&&(n=204):n=v.text?200:404}}catch(p){k||g(-1,p)}v&&g(n,f,v,m)};a.async&&4!==d.readyState?(e=++cc,ua&&
(dc||(dc={},x(q).unload(ua)),dc[e]=c),d.onreadystatechange=c):c()},abort:function(){c&&c(0,1)}}}});var Pb={},vb,Qb,dd=/^(?:toggle|show|hide)$/,Yb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,wb,gb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],ba;x.fn.extend({show:function(a,c,b){if(a||0===a)return this.animate(J("show",3),a,c,b);b=0;for(var g=this.length;b<g;b++)a=this[b],a.style&&(c=a.style.display,x._data(a,
"olddisplay")||"none"!==c||(c=a.style.display=""),(""===c&&"none"===x.css(a,"display")||!x.contains(a.ownerDocument.documentElement,a))&&x._data(a,"olddisplay",M(a.nodeName)));for(b=0;b<g;b++)if(a=this[b],a.style&&(c=a.style.display,""===c||"none"===c))a.style.display=x._data(a,"olddisplay")||"";return this},hide:function(a,c,b){if(a||0===a)return this.animate(J("hide",3),a,c,b);b=0;for(var g=this.length;b<g;b++)a=this[b],a.style&&(c=x.css(a,"display"),"none"===c||x._data(a,"olddisplay")||x._data(a,
"olddisplay",c));for(b=0;b<g;b++)this[b].style&&(this[b].style.display="none");return this},_toggle:x.fn.toggle,toggle:function(a,c,b){var g="boolean"===typeof a;x.isFunction(a)&&x.isFunction(c)?this._toggle.apply(this,arguments):null==a||g?this.each(function(){var c=g?a:x(this).is(":hidden");x(this)[c?"show":"hide"]()}):this.animate(J("toggle",3),a,c,b);return this},fadeTo:function(a,c,b,g){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},a,b,g)},animate:function(a,
c,b,g){function d(){!1===e.queue&&x._mark(this);var c=x.extend({},e),b=1===this.nodeType,g=b&&x(this).is(":hidden"),k,n,f,m,v;c.animatedProperties={};for(f in a)if(k=x.camelCase(f),f!==k&&(a[k]=a[f],delete a[f]),(n=x.cssHooks[k])&&"expand"in n)for(f in m=n.expand(a[k]),delete a[k],m)f in a||(a[f]=m[f]);for(k in a){n=a[k];x.isArray(n)?(c.animatedProperties[k]=n[1],n=a[k]=n[0]):c.animatedProperties[k]=c.specialEasing&&c.specialEasing[k]||c.easing||"swing";if("hide"===n&&g||"show"===n&&!g)return c.complete.call(this);
!b||"height"!==k&&"width"!==k||(c.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===x.css(this,"display")&&"none"===x.css(this,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==M(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=c.overflow&&(this.style.overflow="hidden");for(f in a)if(b=new x.fx(this,c,f),n=a[f],dd.test(n))if(k=x._data(this,"toggle"+f)||("toggle"===n?g?"show":"hide":0))x._data(this,"toggle"+f,"show"===k?"hide":"show"),
b[k]();else b[n]();else k=Yb.exec(n),m=b.cur(),k?(n=parseFloat(k[2]),v=k[3]||(x.cssNumber[f]?"":"px"),"px"!==v&&(x.style(this,f,(n||1)+v),m*=(n||1)/b.cur(),x.style(this,f,m+v)),k[1]&&(n=("-="===k[1]?-1:1)*n+m),b.custom(m,n,v)):b.custom(m,n,"");return!0}var e=x.speed(c,b,g);if(x.isEmptyObject(a))return this.each(e.complete,[!1]);a=x.extend({},a);return!1===e.queue?this.each(d):this.queue(e.queue,d)},stop:function(a,c,b){"string"!==typeof a&&(b=c,c=a,a=t);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var c,
g=!1,d=x.timers,e=x._data(this);b||x._unmark(!0,this);if(null==a)for(c in e){if(e[c]&&e[c].stop&&c.indexOf(".run")===c.length-4){var k=e[c];x.removeData(this,c,!0);k.stop(b)}}else e[c=a+".run"]&&e[c].stop&&(e=e[c],x.removeData(this,c,!0),e.stop(b));for(c=d.length;c--;)if(d[c].elem===this&&(null==a||d[c].queue===a)){if(b)d[c](!0);else d[c].saveState();g=!0;d.splice(c,1)}b&&g||x.dequeue(this,a)})}});x.each({slideDown:J("show",1),slideUp:J("hide",1),slideToggle:J("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){x.fn[a]=function(a,b,g){return this.animate(c,a,b,g)}});x.extend({speed:function(a,c,b){var g=a&&"object"===typeof a?x.extend({},a):{complete:b||!b&&c||x.isFunction(a)&&a,duration:a,easing:b&&c||c&&!x.isFunction(c)&&c};g.duration=x.fx.off?0:"number"===typeof g.duration?g.duration:g.duration in x.fx.speeds?x.fx.speeds[g.duration]:x.fx.speeds._default;if(null==g.queue||!0===g.queue)g.queue="fx";g.old=g.complete;g.complete=function(a){x.isFunction(g.old)&&
g.old.call(this);g.queue?x.dequeue(this,g.queue):!1!==a&&x._unmark(this)};return g},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,c,b){this.options=c;this.elem=a;this.prop=b;c.orig=c.orig||{}}});x.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(x.fx.step[this.prop]||x.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,c=x.css(this.elem,this.prop);return isNaN(a=parseFloat(c))?c&&"auto"!==c?c:0:a},custom:function(a,c,b){function g(a){return d.step(a)}var d=this,e=x.fx;this.startTime=ba||B();this.end=c;this.now=this.start=a;this.pos=this.state=0;this.unit=b||this.unit||(x.cssNumber[this.prop]?"":"px");g.queue=this.options.queue;g.elem=this.elem;g.saveState=function(){x._data(d.elem,"fxshow"+d.prop)===t&&(d.options.hide?x._data(d.elem,"fxshow"+d.prop,d.start):d.options.show&&x._data(d.elem,"fxshow"+d.prop,d.end))};
g()&&x.timers.push(g)&&!wb&&(wb=setInterval(e.tick,e.interval))},show:function(){var a=x._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||x.style(this.elem,this.prop);this.options.show=!0;a!==t?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());x(this.elem).show()},hide:function(){this.options.orig[this.prop]=x._data(this.elem,"fxshow"+this.prop)||x.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var c,
b=ba||B(),g=!0,d=this.elem,e=this.options;if(a||b>=e.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();e.animatedProperties[this.prop]=!0;for(c in e.animatedProperties)!0!==e.animatedProperties[c]&&(g=!1);if(g){null==e.overflow||x.support.shrinkWrapBlocks||x.each(["","X","Y"],function(a,c){d.style["overflow"+c]=e.overflow[a]});e.hide&&x(d).hide();if(e.hide||e.show)for(c in e.animatedProperties)x.style(d,c,e.orig[c]),x.removeData(d,"fxshow"+c,!0),x.removeData(d,"toggle"+
c,!0);if(a=e.complete)e.complete=!1,a.call(d)}return!1}Infinity==e.duration?this.now=b:(a=b-this.startTime,this.state=a/e.duration,this.pos=x.easing[e.animatedProperties[this.prop]](this.state,a,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};x.extend(x.fx,{tick:function(){for(var a,c=x.timers,b=0;b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||x.fx.stop()},interval:13,stop:function(){clearInterval(wb);wb=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){x.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});x.each(gb.concat.apply([],gb),function(a,c){c.indexOf("margin")&&(x.fx.step[c]=function(a){x.style(a.elem,c,Math.max(0,a.now)+a.unit)})});x.expr&&x.expr.filters&&(x.expr.filters.animated=function(a){return x.grep(x.timers,function(c){return a===c.elem}).length});var jc,kc=/^t(?:able|d|h)$/i,Lb=/^(?:body|html)$/i;
jc="getBoundingClientRect"in H.documentElement?function(a,c,b,g){try{g=a.getBoundingClientRect()}catch(d){}if(!g||!x.contains(b,a))return g?{top:g.top,left:g.left}:{top:0,left:0};a=c.body;c=F(c);return{top:g.top+(c.pageYOffset||x.support.boxModel&&b.scrollTop||a.scrollTop)-(b.clientTop||a.clientTop||0),left:g.left+(c.pageXOffset||x.support.boxModel&&b.scrollLeft||a.scrollLeft)-(b.clientLeft||a.clientLeft||0)}}:function(a,c,b){var g,d=a.offsetParent,e=c.body;g=(c=c.defaultView)?c.getComputedStyle(a,
null):a.currentStyle;for(var k=a.offsetTop,n=a.offsetLeft;(a=a.parentNode)&&a!==e&&a!==b&&(!x.support.fixedPosition||"fixed"!==g.position);)g=c?c.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,n-=a.scrollLeft,a===d&&(k+=a.offsetTop,n+=a.offsetLeft,!x.support.doesNotAddBorder||x.support.doesAddBorderForTableAndCells&&kc.test(a.nodeName)||(k+=parseFloat(g.borderTopWidth)||0,n+=parseFloat(g.borderLeftWidth)||0),d=a.offsetParent),x.support.subtractsBorderForOverflowNotVisible&&"visible"!==g.overflow&&
(k+=parseFloat(g.borderTopWidth)||0,n+=parseFloat(g.borderLeftWidth)||0);if("relative"===g.position||"static"===g.position)k+=e.offsetTop,n+=e.offsetLeft;x.support.fixedPosition&&"fixed"===g.position&&(k+=Math.max(b.scrollTop,e.scrollTop),n+=Math.max(b.scrollLeft,e.scrollLeft));return{top:k,left:n}};x.fn.offset=function(a){if(arguments.length)return a===t?this:this.each(function(c){x.offset.setOffset(this,a,c)});var c=this[0],b=c&&c.ownerDocument;return b?c===b.body?x.offset.bodyOffset(c):jc(c,b,
b.documentElement):null};x.offset={bodyOffset:function(a){var c=a.offsetTop,b=a.offsetLeft;x.support.doesNotIncludeMarginInBodyOffset&&(c+=parseFloat(x.css(a,"marginTop"))||0,b+=parseFloat(x.css(a,"marginLeft"))||0);return{top:c,left:b}},setOffset:function(a,c,b){var g=x.css(a,"position");"static"===g&&(a.style.position="relative");var d=x(a),e=d.offset(),k=x.css(a,"top"),n=x.css(a,"left"),f={},m={};("absolute"===g||"fixed"===g)&&-1<x.inArray("auto",[k,n])?(m=d.position(),g=m.top,n=m.left):(g=parseFloat(k)||
0,n=parseFloat(n)||0);x.isFunction(c)&&(c=c.call(a,b,e));null!=c.top&&(f.top=c.top-e.top+g);null!=c.left&&(f.left=c.left-e.left+n);"using"in c?c.using.call(a,f):d.css(f)}};x.fn.extend({position:function(){if(!this[0])return null;var a=this[0],c=this.offsetParent(),b=this.offset(),g=Lb.test(c[0].nodeName)?{top:0,left:0}:c.offset();b.top-=parseFloat(x.css(a,"marginTop"))||0;b.left-=parseFloat(x.css(a,"marginLeft"))||0;g.top+=parseFloat(x.css(c[0],"borderTopWidth"))||0;g.left+=parseFloat(x.css(c[0],
"borderLeftWidth"))||0;return{top:b.top-g.top,left:b.left-g.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||H.body;a&&!Lb.test(a.nodeName)&&"static"===x.css(a,"position");)a=a.offsetParent;return a})}});x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var b=/Y/.test(c);x.fn[a]=function(g){return x.access(this,function(a,g,d){var e=F(a);if(d===t)return e?c in e?e[c]:x.support.boxModel&&e.document.documentElement[g]||e.document.body[g]:a[g];
e?e.scrollTo(b?x(e).scrollLeft():d,b?d:x(e).scrollTop()):a[g]=d},a,g,arguments.length,null)}});x.each({Height:"height",Width:"width"},function(a,c){var b="client"+a,g="scroll"+a,d="offset"+a;x.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(x.css(a,c,"padding")):this[c]():null};x.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(x.css(b,c,a?"margin":"border")):this[c]():null};x.fn[c]=function(a){return x.access(this,function(a,c,e){if(x.isWindow(a))return c=a.document,
a=c.documentElement[b],x.support.boxModel&&a||c.body&&c.body[b]||a;if(9===a.nodeType)return c=a.documentElement,c[b]>=c[g]?c[b]:Math.max(a.body[g],c[g],a.body[d],c[d]);if(e===t)return a=x.css(a,c),c=parseFloat(a),x.isNumeric(c)?c:a;x(a).css(c,e)},c,a,arguments.length,null)}});q.jQuery=q.$=x;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return x});x.support.getSetAttribute||(x.removeAttr=function(a,c){"class"===c&&(c="className");a.removeAttribute(c)})})(window);/*
 Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Copyright 2011, Tim Down
 Licensed under the MIT license.
 Version: 1.2.1
 Build date: 8 October 2011
 2011 Benjamin Arthur Lupton {@link http://balupton.com}
 @license MIT License {@link http://creativecommons.org/licenses/MIT/}
 @return {String} outerHtml
 RequireJS i18n 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/i18n for details
*/
(function(){function q(l,b){var p;p=l||{};this.jQuery=b||{};this.config={};this.config.elements=p.elements?p.elements:[];this.config.attributes=p.attributes?p.attributes:{};this.config.attributes[q.ALL]=this.config.attributes[q.ALL]?this.config.attributes[q.ALL]:[];this.config.allow_comments=p.allow_comments?p.allow_comments:!1;this.allowed_elements={};this.config.protocols=p.protocols?p.protocols:{};this.config.add_attributes=p.add_attributes?p.add_attributes:{};this.dom=p.dom?p.dom:document;for(var m=
0,f=this.config.elements.length;m<f;m++)this.allowed_elements[this.config.elements[m]]=!0;this.config.remove_element_contents={};this.config.remove_all_contents=!1;if(p.remove_contents)if(p.remove_contents instanceof Array)for(var d=this.config.remove_element_contents,m=0,f=p.remove_contents.length;m<f;m++)d[p.remove_contents[m]]=!0;else this.config.remove_all_contents=!0;this.transformers=p.transformers?p.transformers:[];this.filters=p.filters?p.filters:[]}function t(){this.Diff_Timeout=1;this.Diff_EditCost=
4;this.Match_Threshold=0.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}function r(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0}var s;s||(s={});(function(){function l(a){return 10>a?"0"+a:a}function b(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var b=e[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function p(a,c){var g,e,f,m,l=d,y,C=c[a];C&&"object"===
typeof C&&"function"===typeof C.toJSON&&(C=C.toJSON(a));"function"===typeof n&&(C=n.call(c,a,C));switch(typeof C){case "string":return b(C);case "number":return isFinite(C)?String(C):"null";case "boolean":case "null":return String(C);case "object":if(!C)return"null";d+=k;y=[];if("[object Array]"===Object.prototype.toString.apply(C)){m=C.length;for(g=0;g<m;g+=1)y[g]=p(g,C)||"null";f=0===y.length?"[]":d?"[\n"+d+y.join(",\n"+d)+"\n"+l+"]":"["+y.join(",")+"]";d=l;return f}if(n&&"object"===typeof n)for(m=
n.length,g=0;g<m;g+=1)"string"===typeof n[g]&&(e=n[g],(f=p(e,C))&&y.push(b(e)+(d?": ":":")+f));else for(e in C)Object.prototype.hasOwnProperty.call(C,e)&&(f=p(e,C))&&y.push(b(e)+(d?": ":":")+f);f=0===y.length?"{}":d?"{\n"+d+y.join(",\n"+d)+"\n"+l+"}":"{"+y.join(",")+"}";d=l;return f}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+
":"+l(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,k,e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof s.stringify&&
(s.stringify=function(a,c,b){var e;k=d="";if("number"===typeof b)for(e=0;e<b;e+=1)k+=" ";else"string"===typeof b&&(k=b);if((n=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return p("",{"":a})});"function"!==typeof s.parse&&(s.parse=function(a,c){function b(a,d){var e,k,n=a[d];if(n&&"object"===typeof n)for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(k=b(n,e),void 0!==k?n[e]=k:delete n[e]);return c.call(a,d,n)}var d;a=String(a);m.lastIndex=
0;m.test(a)&&(a=a.replace(m,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof c?b({"":d},""):d;throw new SyntaxError("JSON.parse");})})();define("util/json2",[],function(){return s});(function(){var l=function(){function b(b,g){var d=typeof b[g];
return d==c||!(d!=a||!b[g])||"unknown"==d}function l(c,b){return!(typeof c[b]!=a||!c[b])}function m(a,c){return typeof a[c]!=g}function f(a){return function(c,b){for(var g=b.length;g--;)if(!a(c,b[g]))return!1;return!0}}function d(a){return a&&y(a,A)&&D(a,z)}function k(a){window.alert("Rangy not supported in your browser. Reason: "+a);B.initialized=!0;B.supported=!1}function e(){if(!B.initialized){var a,c=!1,g=!1;b(document,"createRange")&&(a=document.createRange(),y(a,u)&&D(a,v)&&(c=!0),a.detach());
(a=l(document,"body")?document.body:document.getElementsByTagName("body")[0])&&b(a,"createTextRange")&&(a=a.createTextRange(),d(a)&&(g=!0));c||g||k("Neither Range nor TextRange are implemented");B.initialized=!0;B.features={implementsDomRange:c,implementsTextRange:g};c=J.concat(G);g=0;for(a=c.length;g<a;++g)try{c[g](B)}catch(e){l(window,"console")&&b(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",e)}}}function n(a){this.name=a;this.supported=this.initialized=
!1}var a="object",c="function",g="undefined",v="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer START_TO_START START_TO_END END_TO_START END_TO_END".split(" "),u="setStart setStartBefore setStartAfter setEnd setEndBefore setEndAfter collapse selectNode selectNodeContents compareBoundaryPoints deleteContents extractContents cloneContents insertNode surroundContents cloneRange toString detach".split(" "),z="boundingHeight boundingLeft boundingTop boundingWidth htmlText text".split(" "),
A="collapse compareEndPoints duplicate getBookmark moveToBookmark moveToElementText parentElement pasteHTML select setEndPoint getBoundingClientRect".split(" "),y=f(b),C=f(l),D=f(m),B={version:"1.2.1",initialized:!1,supported:!0,util:{isHostMethod:b,isHostObject:l,isHostProperty:m,areHostMethods:y,areHostObjects:C,areHostProperties:D,isTextRange:d},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};B.fail=k;B.warn=function(a){a="Rangy warning: "+a;B.config.alertOnWarn?window.alert(a):
typeof window.console!=g&&typeof window.console.log!=g&&window.console.log(a)};({}).hasOwnProperty?B.util.extend=function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])}:k("hasOwnProperty not supported");var G=[],J=[];B.init=e;B.addInitListener=function(a){B.initialized?a(B):G.push(a)};var q=[];B.addCreateMissingNativeApiListener=function(a){q.push(a)};B.createMissingNativeApi=function(a){a=a||window;e();for(var c=0,b=q.length;c<b;++c)q[c](a)};n.prototype.fail=function(a){this.initialized=!0;
this.supported=!1;throw Error("Module '"+this.name+"' failed to load: "+a);};n.prototype.warn=function(a){B.warn("Module "+this.name+": "+a)};n.prototype.createError=function(a){return Error("Error in Rangy "+this.name+" module: "+a)};B.createModule=function(a,c){var b=new n(a);B.modules[a]=b;J.push(function(a){c(a,b);b.initialized=!0;b.supported=!0})};B.requireModules=function(a){for(var c=0,b=a.length,g,d;c<b;++c){d=a[c];g=B.modules[d];if(!(g&&g instanceof n))throw Error("Module '"+d+"' not found");
if(!g.supported)throw Error("Module '"+d+"' not supported");}};var F=!1,C=function(a){F||(F=!0,B.initialized||e())};if(typeof window==g)k("No window found");else if(typeof document==g)k("No document found");else return b(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",C,!1),b(window,"addEventListener")?window.addEventListener("load",C,!1):b(window,"attachEvent")?window.attachEvent("onload",C):k("Window does not have required addEventListener or attachEvent method"),B}();
l.createModule("DomUtil",function(b,l){function m(a){for(var c=0;a=a.previousSibling;)c++;return c}function f(a,c){var b=[],g;for(g=a;g;g=g.parentNode)b.push(g);for(g=c;g;g=g.parentNode)if(C(b,g))return g;return null}function d(a,c,b){for(b=b?a:a.parentNode;b;){a=b.parentNode;if(a===c)return b;b=a}return null}function k(a){a=a.nodeType;return 3==a||4==a||8==a}function e(a,c){var b=c.nextSibling,g=c.parentNode;b?g.insertBefore(a,b):g.appendChild(a);return a}function n(a){if(9==a.nodeType)return a;
if(typeof a.ownerDocument!=z)return a.ownerDocument;if(typeof a.document!=z)return a.document;if(a.parentNode)return n(a.parentNode);throw Error("getDocument: no document found for node");}function a(a){if(a)return a.previousSibling?a.previousSibling.nextSibling:a.nextSibling?a.nextSibling.previousSibling:a.parentNode?a.parentNode.firstChild:a}function c(a){return a?k(a)?'"'+a.data+'"':1==a.nodeType?"<"+a.nodeName+(a.id?' id="'+a.id+'"':"")+">["+a.childNodes.length+"]":a.nodeName:"[No node]"}function g(a){this._next=
this.root=a}function v(a,c){this.node=a;this.offset=c}function u(a){this.code=this[a];this.codeName=a;this.message="DOMException: "+this.codeName}var z="undefined",A=b.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||l.fail("document missing a Node creation method");A.isHostMethod(document,"getElementsByTagName")||l.fail("document missing getElementsByTagName method");var y=document.createElement("div");A.areHostMethods(y,["insertBefore","appendChild","cloneNode"])||
l.fail("Incomplete Element implementation");A.isHostProperty(y,"innerHTML")||l.fail("Element is missing innerHTML property");y=document.createTextNode("test");A.areHostMethods(y,["splitText","deleteData","insertData","appendData","cloneNode"])||l.fail("Incomplete Text Node implementation");var C=function(a,c){for(var b=a.length;b--;)if(a[b]===c)return!0;return!1};g.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next,c;if(this._current){c=
a.firstChild;if(!c)for(c=null;a!==this.root&&!(c=a.nextSibling);)a=a.parentNode;this._next=c}return this._current},detach:function(){this._current=this._next=this.root=null}};v.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+c(this.node)+":"+this.offset+")]"}};u.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};u.prototype.toString=
function(){return this.message};b.dom={arrayContains:C,isHtmlNamespace:function(a){var c;return typeof a.namespaceURI==z||null===(c=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==c},parentElement:function(a){a=a.parentNode;return 1==a.nodeType?a:null},getNodeIndex:m,getNodeLength:function(a){var c;return k(a)?a.length:(c=a.childNodes)?c.length:0},getCommonAncestor:f,isAncestorOf:function(a,c,b){for(c=b?c:c.parentNode;c;){if(c===a)return!0;c=c.parentNode}return!1},getClosestAncestorIn:d,isCharacterDataNode:k,
insertAfter:e,splitDataNode:function(a,c){var b=a.cloneNode(!1);b.deleteData(0,c);a.deleteData(c,a.length-c);e(b,a);return b},getDocument:n,getWindow:function(a){a=n(a);if(typeof a.defaultView!=z)return a.defaultView;if(typeof a.parentWindow!=z)return a.parentWindow;throw Error("Cannot get a window object for node");},getIframeWindow:function(a){if(typeof a.contentWindow!=z)return a.contentWindow;if(typeof a.contentDocument!=z)return a.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element");
},getIframeDocument:function(a){if(typeof a.contentDocument!=z)return a.contentDocument;if(typeof a.contentWindow!=z)return a.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element");},getBody:function(a){return A.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]},getRootContainer:function(a){for(var c;c=a.parentNode;)a=c;return a},comparePoints:function(c,b,g,e){c=a(c);g=a(g);var k;if(c==g)return b===e?0:b<e?-1:1;if(k=d(g,c,!0))return b<=m(k)?
-1:1;if(k=d(c,g,!0))return m(k)<e?-1:1;b=f(c,g);c=c===b?b:d(c,b,!0);g=g===b?b:d(g,b,!0);if(c===g)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(b=b.firstChild;b;){if(b===c)return-1;if(b===g)return 1;b=b.nextSibling}throw Error("Should not be here!");},inspectNode:c,fragmentFromNodeChildren:function(a){for(var c=n(a).createDocumentFragment(),b;b=a.firstChild;)c.appendChild(b);return c},createIterator:function(a){return new g(a)},DomPosition:v};b.DOMException=u});
l.createModule("DomRange",function(b,l){function m(a,c){return 3!=a.nodeType&&(O.isAncestorOf(a,c.startContainer,!0)||O.isAncestorOf(a,c.endContainer,!0))}function f(a){return O.getDocument(a.startContainer)}function d(a,c,b){if(c=a._listeners[c])for(var g=0,d=c.length;g<d;++g)c[g].call(a,{target:a,args:b})}function k(a){return new ca(a.parentNode,O.getNodeIndex(a))}function e(a){return new ca(a.parentNode,O.getNodeIndex(a)+1)}function n(a,c,b){var g=11==a.nodeType?a.firstChild:a;O.isCharacterDataNode(c)?
b==c.length?O.insertAfter(a,c):c.parentNode.insertBefore(a,0==b?c:O.splitDataNode(c,b)):b>=c.childNodes.length?c.appendChild(a):c.insertBefore(a,c.childNodes[b]);return g}function a(c){for(var b,g,d=f(c.range).createDocumentFragment();g=c.next();){b=c.isPartiallySelectedSubtree();g=g.cloneNode(!b);b&&(b=c.getSubtreeIterator(),g.appendChild(a(b)),b.detach(!0));if(10==g.nodeType)throw new aa("HIERARCHY_REQUEST_ERR");d.appendChild(g)}return d}function c(a,b,g){var d,e;for(g=g||{stop:!1};d=a.next();)if(a.isPartiallySelectedSubtree())if(!1===
b(d)){g.stop=!0;break}else{if(d=a.getSubtreeIterator(),c(d,b,g),d.detach(!0),g.stop)break}else for(d=O.createIterator(d);e=d.next();)if(!1===b(e)){g.stop=!0;return}}function g(a){for(var c;a.next();)a.isPartiallySelectedSubtree()?(c=a.getSubtreeIterator(),g(c),c.detach(!0)):a.remove()}function v(a){for(var c,b=f(a.range).createDocumentFragment(),g;c=a.next();){a.isPartiallySelectedSubtree()?(c=c.cloneNode(!1),g=a.getSubtreeIterator(),c.appendChild(v(g)),g.detach(!0)):a.remove();if(10==c.nodeType)throw new aa("HIERARCHY_REQUEST_ERR");
b.appendChild(c)}return b}function u(a,b,g){var d=!(!b||!b.length),e,k=!!g;d&&(e=RegExp("^("+b.join("|")+")$"));var n=[];c(new A(a,!1),function(a){d&&!e.test(a.nodeType)||k&&!g(a)||n.push(a)});return n}function z(a){return"["+("undefined"==typeof a.getName?"Range":a.getName())+"("+O.inspectNode(a.startContainer)+":"+a.startOffset+", "+O.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function A(a,c){this.range=a;this.clonePartiallySelectedTextNodes=c;if(!a.collapsed){this.sc=a.startContainer;this.so=
a.startOffset;this.ec=a.endContainer;this.eo=a.endOffset;var b=a.commonAncestorContainer;this.sc===this.ec&&O.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==b||O.isCharacterDataNode(this.sc)?O.getClosestAncestorIn(this.sc,b,!0):this.sc.childNodes[this.so],this._last=this.ec!==b||O.isCharacterDataNode(this.ec)?O.getClosestAncestorIn(this.ec,b,!0):this.ec.childNodes[this.eo-1])}}function y(a){this.code=this[a];
this.codeName=a;this.message="RangeException: "+this.codeName}function C(a,c,b){this.nodes=u(a,c,b);this._next=this.nodes[0];this._position=0}function D(a){return function(c,b){for(var g,d=b?c:c.parentNode;d;){g=d.nodeType;if(O.arrayContains(a,g))return d;d=d.parentNode}return null}}function B(a,c){if(P(a,c))throw new y("INVALID_NODE_TYPE_ERR");}function G(a){if(!a.startContainer)throw new aa("INVALID_STATE_ERR");}function J(a,c){if(!O.arrayContains(c,a.nodeType))throw new y("INVALID_NODE_TYPE_ERR");
}function q(a,c){if(0>c||c>(O.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new aa("INDEX_SIZE_ERR");}function F(a,c){if(ka(a,!0)!==ka(c,!0))throw new aa("WRONG_DOCUMENT_ERR");}function s(a){if(Aa(a,!0))throw new aa("NO_MODIFICATION_ALLOWED_ERR");}function r(a,c){if(!a)throw new aa(c);}function t(a){return!O.arrayContains(da,a.nodeType)&&!ka(a,!0)}function x(a,c){return c<=(O.isCharacterDataNode(a)?a.length:a.childNodes.length)}function L(a){G(a);if(t(a.startContainer)||t(a.endContainer)||
!x(a.startContainer,a.startOffset)||!x(a.endContainer,a.endOffset))throw Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")");}function I(){}function T(a){a.START_TO_START=Wa;a.START_TO_END=Na;a.END_TO_END=db;a.END_TO_START=ra;a.NODE_BEFORE=ea;a.NODE_AFTER=Ia;a.NODE_BEFORE_AND_AFTER=ib;a.NODE_INSIDE=ya}function N(a){T(a);T(a.prototype)}function W(a,b){return function(){L(this);var g=this.startContainer,d=this.startOffset,k=this.commonAncestorContainer,n=new A(this,!0);
g!==k&&(g=O.getClosestAncestorIn(g,k,!0),d=e(g),g=d.node,d=d.offset);c(n,s);n.reset();k=a(n);n.detach();b(this,g,d,g,d);return k}}function Z(a,c,d){function n(a,c){return function(b){G(this);J(b,ma);J(ia(b),da);b=(a?k:e)(b);(c?f:l)(this,b.node,b.offset)}}function f(a,b,g){var d=a.endContainer,e=a.endOffset;if(b!==a.startContainer||g!==this.startOffset){if(ia(b)!=ia(d)||1==O.comparePoints(b,g,d,e))d=b,e=g;c(a,b,g,d,e)}}function l(a,b,g){var d=a.startContainer,e=a.startOffset;if(b!==a.endContainer||
g!==this.endOffset){if(ia(b)!=ia(d)||-1==O.comparePoints(b,g,d,e))d=b,e=g;c(a,d,e,b,g)}}function u(a,b,g){b===a.startContainer&&g===this.startOffset&&b===a.endContainer&&g===this.endOffset||c(a,b,g,b,g)}a.prototype=new I;b.util.extend(a.prototype,{setStart:function(a,c){G(this);B(a,!0);q(a,c);f(this,a,c)},setEnd:function(a,c){G(this);B(a,!0);q(a,c);l(this,a,c)},setStartBefore:n(!0,!0),setStartAfter:n(!1,!0),setEndBefore:n(!0,!1),setEndAfter:n(!1,!1),collapse:function(a){L(this);a?c(this,this.startContainer,
this.startOffset,this.startContainer,this.startOffset):c(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){G(this);B(a,!0);c(this,a,0,a,O.getNodeLength(a))},selectNode:function(a){G(this);B(a,!1);J(a,ma);var b=k(a);a=e(a);c(this,b.node,b.offset,a.node,a.offset)},extractContents:W(v,c),deleteContents:W(g,c),canSurroundContents:function(){L(this);s(this.startContainer);s(this.endContainer);var a=new A(this,!0),c=a._first&&m(a._first,this)||a._last&&
m(a._last,this);a.detach();return!c},detach:function(){d(this)},splitBoundaries:function(){L(this);var a=this.startContainer,b=this.startOffset,g=this.endContainer,d=this.endOffset,e=a===g;O.isCharacterDataNode(g)&&0<d&&d<g.length&&O.splitDataNode(g,d);O.isCharacterDataNode(a)&&0<b&&b<a.length&&(a=O.splitDataNode(a,b),e?(d-=b,g=a):g==a.parentNode&&d>=O.getNodeIndex(a)&&d++,b=0);c(this,a,b,g,d)},normalizeBoundaries:function(){L(this);var a=this.startContainer,b=this.startOffset,g=this.endContainer,
d=this.endOffset,e=function(a){var c=a.nextSibling;c&&c.nodeType==a.nodeType&&(g=a,d=a.length,a.appendData(c.data),c.parentNode.removeChild(c))},k=function(c){var e=c.previousSibling;if(e&&e.nodeType==c.nodeType){a=c;var k=c.length;b=e.length;c.insertData(0,e.data);e.parentNode.removeChild(e);a==g?(d+=b,g=a):g==c.parentNode&&(e=O.getNodeIndex(c),d==e?(g=c,d=k):d>e&&d--)}},n=!0;O.isCharacterDataNode(g)?g.length==d&&e(g):(0<d&&(n=g.childNodes[d-1])&&O.isCharacterDataNode(n)&&e(n),n=!this.collapsed);
n?O.isCharacterDataNode(a)?0==b&&k(a):b<a.childNodes.length&&(e=a.childNodes[b])&&O.isCharacterDataNode(e)&&k(e):(a=g,b=d);c(this,a,b,g,d)},collapseToPoint:function(a,c){G(this);B(a,!0);q(a,c);u(this,a,c)}});N(a)}function V(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;a.commonAncestorContainer=a.collapsed?a.startContainer:O.getCommonAncestor(a.startContainer,a.endContainer)}function Q(a,c,b,g,e){var k=a.startContainer!==c||a.startOffset!==b,n=a.endContainer!==g||a.endOffset!==
e;a.startContainer=c;a.startOffset=b;a.endContainer=g;a.endOffset=e;V(a);d(a,"boundarychange",{startMoved:k,endMoved:n})}function R(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};V(this)}b.requireModules(["DomUtil"]);var O=b.dom,ca=O.DomPosition,aa=b.DOMException;A.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},
next:function(){var a=this._current=this._next;a&&(this._next=a!==this._last?a.nextSibling:null,O.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so)));return a},remove:function(){var a=this._current,c,b;!O.isCharacterDataNode(a)||a!==this.sc&&a!==this.ec?a.parentNode&&a.parentNode.removeChild(a):(c=a===this.sc?this.so:0,b=a===this.ec?this.eo:a.length,
c!=b&&a.deleteData(c,b-c))},isPartiallySelectedSubtree:function(){return m(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new R(f(this.range));var c=this._current,b=c,g=0,d=c,e=O.getNodeLength(c);O.isAncestorOf(c,this.sc,!0)&&(b=this.sc,g=this.so);O.isAncestorOf(c,this.ec,!0)&&(d=this.ec,e=this.eo);Q(a,b,g,d,e)}return new A(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach();
this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};y.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};y.prototype.toString=function(){return this.message};C.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var ma=[1,3,4,5,7,8,10],da=[2,9,11],qa=[1,3,4,5,7,8,10,11],
la=[1,3,4,5,7,8],ia=O.getRootContainer,ka=D([9,11]),Aa=D([5,6,10,12]),P=D([6,10,12]),na=document.createElement("style"),Va=!1;try{na.innerHTML="<b>x</b>",Va=3==na.firstChild.nodeType}catch(La){}b.features.htmlParsingConforms=Va;var Fa="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer".split(" "),Wa=0,Na=1,db=2,ra=3,ea=0,Ia=1,ib=2,ya=3;I.prototype={attachListener:function(a,c){this._listeners[a].push(c)},compareBoundaryPoints:function(a,c){L(this);F(this.startContainer,
c.startContainer);var b=a==ra||a==Wa?"start":"end",g=a==Na||a==Wa?"start":"end";return O.comparePoints(this[b+"Container"],this[b+"Offset"],c[g+"Container"],c[g+"Offset"])},insertNode:function(a){L(this);J(a,qa);s(this.startContainer);if(O.isAncestorOf(a,this.startContainer,!0))throw new aa("HIERARCHY_REQUEST_ERR");a=n(a,this.startContainer,this.startOffset);this.setStartBefore(a)},cloneContents:function(){L(this);var c,b;if(this.collapsed)return f(this).createDocumentFragment();if(this.startContainer===
this.endContainer&&O.isCharacterDataNode(this.startContainer))return c=this.startContainer.cloneNode(!0),c.data=c.data.slice(this.startOffset,this.endOffset),b=f(this).createDocumentFragment(),b.appendChild(c),b;b=new A(this,!0);c=a(b);b.detach();return c},canSurroundContents:function(){L(this);s(this.startContainer);s(this.endContainer);var a=new A(this,!0),c=a._first&&m(a._first,this)||a._last&&m(a._last,this);a.detach();return!c},surroundContents:function(a){J(a,la);if(!this.canSurroundContents())throw new y("BAD_BOUNDARYPOINTS_ERR");
var c=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);n(a,this.startContainer,this.startOffset);a.appendChild(c);this.selectNode(a)},cloneRange:function(){L(this);for(var a=new R(f(this)),c=Fa.length,b;c--;)b=Fa[c],a[b]=this[b];return a},toString:function(){L(this);var a=this.startContainer;if(a===this.endContainer&&O.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],a=new A(this,!0);c(a,function(a){3!=
a.nodeType&&4!=a.nodeType||b.push(a.data)});a.detach();return b.join("")},compareNode:function(a){L(this);var c=a.parentNode,b=O.getNodeIndex(a);if(!c)throw new aa("NOT_FOUND_ERR");a=this.comparePoint(c,b);c=this.comparePoint(c,b+1);return 0>a?0<c?ib:ea:0<c?Ia:ya},comparePoint:function(a,c){L(this);r(a,"HIERARCHY_REQUEST_ERR");F(a,this.startContainer);return 0>O.comparePoints(a,c,this.startContainer,this.startOffset)?-1:0<O.comparePoints(a,c,this.endContainer,this.endOffset)?1:0},createContextualFragment:Va?
function(a){var c=this.startContainer,b=O.getDocument(c);if(!c)throw new aa("INVALID_STATE_ERR");var g=null;1==c.nodeType?g=c:O.isCharacterDataNode(c)&&(g=O.parentElement(c));g=null===g||"HTML"==g.nodeName&&O.isHtmlNamespace(O.getDocument(g).documentElement)&&O.isHtmlNamespace(g)?b.createElement("body"):g.cloneNode(!1);g.innerHTML=a;return O.fragmentFromNodeChildren(g)}:function(a){G(this);var c=f(this).createElement("body");c.innerHTML=a;return O.fragmentFromNodeChildren(c)},toHtml:function(){L(this);
var a=f(this).createElement("div");a.appendChild(this.cloneContents());return a.innerHTML},intersectsNode:function(a,c){L(this);r(a,"NOT_FOUND_ERR");if(O.getDocument(a)!==f(this))return!1;var b=a.parentNode,g=O.getNodeIndex(a);r(b,"NOT_FOUND_ERR");var d=O.comparePoints(b,g,this.endContainer,this.endOffset),b=O.comparePoints(b,g+1,this.startContainer,this.startOffset);return c?0>=d&&0<=b:0>d&&0<b},isPointInRange:function(a,c){L(this);r(a,"HIERARCHY_REQUEST_ERR");F(a,this.startContainer);return 0<=
O.comparePoints(a,c,this.startContainer,this.startOffset)&&0>=O.comparePoints(a,c,this.endContainer,this.endOffset)},intersectsRange:function(a,c){L(this);if(f(a)!=f(this))throw new aa("WRONG_DOCUMENT_ERR");var b=O.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),g=O.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return c?0>=b&&0<=g:0>b&&0<g},intersection:function(a){if(this.intersectsRange(a)){var c=O.comparePoints(this.startContainer,
this.startOffset,a.startContainer,a.startOffset),b=O.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),g=this.cloneRange();-1==c&&g.setStart(a.startContainer,a.startOffset);1==b&&g.setEnd(a.endContainer,a.endOffset);return g}return null},union:function(a){if(this.intersectsRange(a,!0)){var c=this.cloneRange();-1==O.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&c.setStart(a.startContainer,a.startOffset);1==O.comparePoints(a.endContainer,
a.endOffset,this.endContainer,this.endOffset)&&c.setEnd(a.endContainer,a.endOffset);return c}throw new y("Ranges do not intersect");},containsNode:function(a,c){return c?this.intersectsNode(a,!1):this.compareNode(a)==ya},containsNodeContents:function(a){return 0<=this.comparePoint(a,0)&&0>=this.comparePoint(a,O.getNodeLength(a))},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var c=this.cloneRange();c.selectNode(a);var b=c.getNodes([3]);return 0<b.length?
(c.setStart(b[0],0),a=b.pop(),c.setEnd(a,a.length),a=this.containsRange(c),c.detach(),a):this.containsNodeContents(a)},createNodeIterator:function(a,c){L(this);return new C(this,a,c)},getNodes:function(a,c){L(this);return u(this,a,c)},getDocument:function(){return f(this)},collapseBefore:function(a){G(this);this.setEndBefore(a);this.collapse(!1)},collapseAfter:function(a){G(this);this.setStartAfter(a);this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return R.rangesEqual(this,
a)},inspect:function(){return z(this)}};Z(R,Q,function(a){G(a);a.startContainer=a.startOffset=a.endContainer=a.endOffset=null;a.collapsed=a.commonAncestorContainer=null;d(a,"detach",null);a._listeners=null});b.rangePrototype=I.prototype;R.rangeProperties=Fa;R.RangeIterator=A;R.copyComparisonConstants=N;R.createPrototypeRange=Z;R.inspect=z;R.getRangeDocument=f;R.rangesEqual=function(a,c){return a.startContainer===c.startContainer&&a.startOffset===c.startOffset&&a.endContainer===c.endContainer&&a.endOffset===
c.endOffset};b.DomRange=R;b.RangeException=y});l.createModule("WrappedRange",function(b,l){function m(a,b,d,n){var f=a.duplicate();f.collapse(d);var m=f.parentElement();k.isAncestorOf(b,m,!0)||(m=b);if(!m.canHaveHTML)return new e(m.parentNode,k.getNodeIndex(m));b=k.getDocument(m).createElement("span");b.parentNode&&b.parentNode.removeChild(b);var l,p=d?"StartToStart":"StartToEnd";do m.insertBefore(b,b.previousSibling),f.moveToElementText(b);while(0<(l=f.compareEndPoints(p,a))&&b.previousSibling);
p=b.nextSibling;if(-1==l&&p&&k.isCharacterDataNode(p)){f.setEndPoint(d?"EndToStart":"EndToEnd",a);if(/[\r\n]/.test(p.data))for(f=f.duplicate(),m=f.text.replace(/\r\n/g,"\r").length,m=f.moveStart("character",m);-1==f.compareEndPoints("StartToEnd",f);)m++,f.moveStart("character",1);else if(m=f.text.replace(/\u00a0/g," "),d=p.data.replace(/\u00a0/g," "),0!==d.indexOf(m)){for(;0<m.length&&0!==d.indexOf(m);)m=m.substr(1);m=m.length}else m=f.text.length;p=new e(p,m)}else p=(n||!d)&&b.previousSibling,p=
(f=(n||d)&&b.nextSibling)&&k.isCharacterDataNode(f)?new e(f,0):p&&k.isCharacterDataNode(p)?new e(p,p.length):new e(m,k.getNodeIndex(b));b.parentNode.removeChild(b);return p}function f(a,b){var d,e,n=a.offset,f=k.getDocument(a.node),m=f.body.createTextRange(),l=k.isCharacterDataNode(a.node);l?(d=a.node,e=d.parentNode):(d=a.node.childNodes,d=n<d.length?d[n]:null,e=a.node);f=f.createElement("span");f.innerHTML="&#feff;";d?e.insertBefore(f,d):e.appendChild(f);try{m.moveToElementText(f),m.collapse(!b)}catch(p){}e.removeChild(f);
if(l)m[b?"moveStart":"moveEnd"]("character",n);return m}b.requireModules(["DomUtil","DomRange"]);var d,k=b.dom,e=k.DomPosition,n=b.DomRange;if(b.features.implementsDomRange&&(!b.features.implementsTextRange||!b.config.preferTextRange))(function(){function a(c){for(var b=e.length,g;b--;)g=e[b],c[g]=c.nativeRange[g]}var g,e=n.rangeProperties,f;d=function(b){if(!b)throw Error("Range must be specified");this.nativeRange=b;a(this)};n.createPrototypeRange(d,function(a,c,b,g,d){var e=a.endContainer!==g||
a.endOffset!=d;if(a.startContainer!==c||a.startOffset!=b||e)a.setEnd(g,d),a.setStart(c,b)},function(a){a.nativeRange.detach();a.detached=!0;for(var c=e.length,b;c--;)b=e[c],a[b]=null});g=d.prototype;g.selectNode=function(b){this.nativeRange.selectNode(b);a(this)};g.deleteContents=function(){this.nativeRange.deleteContents();a(this)};g.extractContents=function(){var b=this.nativeRange.extractContents();a(this);return b};g.cloneContents=function(){return this.nativeRange.cloneContents()};g.surroundContents=
function(b){this.nativeRange.surroundContents(b);a(this)};g.collapse=function(b){this.nativeRange.collapse(b);a(this)};g.cloneRange=function(){return new d(this.nativeRange.cloneRange())};g.refresh=function(){a(this)};g.toString=function(){return this.nativeRange.toString()};var m=document.createTextNode("test");k.getBody(document).appendChild(m);var l=document.createRange();l.setStart(m,0);l.setEnd(m,0);try{l.setStart(m,1),g.setStart=function(b,g){this.nativeRange.setStart(b,g);a(this)},g.setEnd=
function(b,g){this.nativeRange.setEnd(b,g);a(this)},f=function(b){return function(g){this.nativeRange[b](g);a(this)}}}catch(y){g.setStart=function(b,g){try{this.nativeRange.setStart(b,g)}catch(d){this.nativeRange.setEnd(b,g),this.nativeRange.setStart(b,g)}a(this)},g.setEnd=function(b,g){try{this.nativeRange.setEnd(b,g)}catch(d){this.nativeRange.setStart(b,g),this.nativeRange.setEnd(b,g)}a(this)},f=function(b,g){return function(d){try{this.nativeRange[b](d)}catch(e){this.nativeRange[g](d),this.nativeRange[b](d)}a(this)}}}g.setStartBefore=
f("setStartBefore","setEndBefore");g.setStartAfter=f("setStartAfter","setEndAfter");g.setEndBefore=f("setEndBefore","setStartBefore");g.setEndAfter=f("setEndAfter","setStartAfter");l.selectNodeContents(m);g.selectNodeContents=l.startContainer==m&&l.endContainer==m&&0==l.startOffset&&l.endOffset==m.length?function(b){this.nativeRange.selectNodeContents(b);a(this)}:function(a){this.setStart(a,0);this.setEnd(a,n.getEndOffset(a))};l.selectNodeContents(m);l.setEnd(m,3);f=document.createRange();f.selectNodeContents(m);
f.setEnd(m,4);f.setStart(m,2);-1==l.compareBoundaryPoints(l.START_TO_END,f)&1==l.compareBoundaryPoints(l.END_TO_START,f)?g.compareBoundaryPoints=function(a,c){c=c.nativeRange||c;a==c.START_TO_END?a=c.END_TO_START:a==c.END_TO_START&&(a=c.START_TO_END);return this.nativeRange.compareBoundaryPoints(a,c)}:g.compareBoundaryPoints=function(a,c){return this.nativeRange.compareBoundaryPoints(a,c.nativeRange||c)};b.util.isHostMethod(l,"createContextualFragment")&&(g.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)});
k.getBody(document).removeChild(m);l.detach();f.detach()})(),b.createNativeRange=function(a){a=a||document;return a.createRange()};else if(b.features.implementsTextRange){d=function(a){this.textRange=a;this.refresh()};d.prototype=new n(document);d.prototype.refresh=function(){var a,b,d=this.textRange;a=d.parentElement();var e=d.duplicate();e.collapse(!0);b=e.parentElement();e=d.duplicate();e.collapse(!1);d=e.parentElement();b=b==d?b:k.getCommonAncestor(b,d);b=b==a?b:k.getCommonAncestor(a,b);a=this.textRange;
0==a.compareEndPoints("StartToEnd",a)?b=a=m(this.textRange,b,!0,!0):(a=m(this.textRange,b,!0,!1),b=m(this.textRange,b,!1,!1));this.setStart(a.node,a.offset);this.setEnd(b.node,b.offset)};n.copyComparisonConstants(d);var a=function(){return this}();"undefined"==typeof a.Range&&(a.Range=d);b.createNativeRange=function(a){a=a||document;return a.body.createTextRange()}}b.features.implementsTextRange&&(d.rangeToTextRange=function(a){if(a.collapsed)return f(new e(a.startContainer,a.startOffset),!0);var b=
f(new e(a.startContainer,a.startOffset),!0),d=f(new e(a.endContainer,a.endOffset),!1);a=k.getDocument(a.startContainer).body.createTextRange();a.setEndPoint("StartToStart",b);a.setEndPoint("EndToEnd",d);return a});d.prototype.getName=function(){return"WrappedRange"};b.WrappedRange=d;b.createRange=function(a){a=a||document;return new d(b.createNativeRange(a))};b.createRangyRange=function(a){a=a||document;return new n(a)};b.createIframeRange=function(a){return b.createRange(k.getIframeDocument(a))};
b.createIframeRangyRange=function(a){return b.createRangyRange(k.getIframeDocument(a))};b.addCreateMissingNativeApiListener(function(a){a=a.document;"undefined"==typeof a.createRange&&(a.createRange=function(){return b.createRange(this)});a=a=null})});l.createModule("WrappedSelection",function(b,l){function m(a){return(a||window).getSelection()}function f(a){return(a||window).document.selection}function d(a,c,b){var g=b?"end":"start";b=b?"start":"end";a.anchorNode=c[g+"Container"];a.anchorOffset=
c[g+"Offset"];a.focusNode=c[b+"Container"];a.focusOffset=c[b+"Offset"]}function k(a){a.anchorNode=a.focusNode=null;a.anchorOffset=a.focusOffset=0;a.rangeCount=0;a.isCollapsed=!0;a._ranges.length=0}function e(a){var c;a instanceof D?(c=a._selectionNativeRange,c||(c=b.createNativeRange(y.getDocument(a.startContainer)),c.setEnd(a.endContainer,a.endOffset),c.setStart(a.startContainer,a.startOffset),a._selectionNativeRange=c,a.attachListener("detach",function(){this._selectionNativeRange=null}))):a instanceof
B?c=a.nativeRange:b.features.implementsDomRange&&a instanceof y.getWindow(a.startContainer).Range&&(c=a);return c}function n(a){var c=a.getNodes(),b;a:if(c.length&&1==c[0].nodeType){b=1;for(var g=c.length;b<g;++b)if(!y.isAncestorOf(c[0],c[b])){b=!1;break a}b=!0}else b=!1;if(!b)throw Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function a(a,c){var b=new B(c);a._ranges=[b];d(a,b,!1);a.rangeCount=1;a.isCollapsed=b.collapsed}function c(c){c._ranges.length=
0;if("None"==c.docSelection.type)k(c);else{var g=c.docSelection.createRange();if(g&&"undefined"!=typeof g.text)a(c,g);else{c.rangeCount=g.length;for(var e,n=y.getDocument(g.item(0)),f=0;f<c.rangeCount;++f)e=b.createRange(n),e.selectNode(g.item(f)),c._ranges.push(e);c.isCollapsed=1==c.rangeCount&&c._ranges[0].collapsed;d(c,c._ranges[c.rangeCount-1],!1)}}}function g(a,b){for(var g=a.docSelection.createRange(),d=n(b),e=y.getDocument(g.item(0)),e=y.getBody(e).createControlRange(),k=0,f=g.length;k<f;++k)e.add(g.item(k));
try{e.add(d)}catch(m){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}e.select();c(a)}function v(a,c,b){this.nativeSelection=a;this.docSelection=c;this._ranges=[];this.win=b;this.refresh()}function u(a,b){for(var g=y.getDocument(b[0].startContainer),g=y.getBody(g).createControlRange(),d=0,e;d<rangeCount;++d){e=n(b[d]);try{g.add(e)}catch(k){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)");
}}g.select();c(a)}function z(a,c){if(a.anchorNode&&y.getDocument(a.anchorNode)!==y.getDocument(c))throw new G("WRONG_DOCUMENT_ERR");}function A(a){var c=[],b=new J(a.anchorNode,a.anchorOffset),g=new J(a.focusNode,a.focusOffset),d="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var e=0,k=a.rangeCount;e<k;++e)c[e]=D.inspect(a.getRangeAt(e));return"["+d+"(Ranges: "+c.join(", ")+")(anchor: "+b.inspect()+", focus: "+g.inspect()+"]"}b.requireModules(["DomUtil",
"DomRange","WrappedRange"]);b.config.checkSelectionRanges=!0;var y=b.dom,C=b.util,D=b.DomRange,B=b.WrappedRange,G=b.DOMException,J=y.DomPosition,q,F,s=b.util.isHostMethod(window,"getSelection"),r=b.util.isHostObject(document,"selection"),t=r&&(!s||b.config.preferTextRange);t?(q=f,b.isSelectionValid=function(a){a=(a||window).document;var c=a.selection;return"None"!=c.type||y.getDocument(c.createRange().parentElement())==a}):s?(q=m,b.isSelectionValid=function(){return!0}):l.fail("Neither document.selection or window.getSelection() detected.");
b.getNativeSelection=q;var s=q(),x=b.createNativeRange(document),L=y.getBody(document),I=C.areHostObjects(s,C.areHostProperties(s,["anchorOffset","focusOffset"]));b.features.selectionHasAnchorAndFocus=I;var T=C.isHostMethod(s,"extend");b.features.selectionHasExtend=T;var N="number"==typeof s.rangeCount;b.features.selectionHasRangeCount=N;var W=!1,Z=!0;C.areHostMethods(s,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof s.rangeCount&&b.features.implementsDomRange&&function(){var a=document.createElement("iframe");
L.appendChild(a);var c=y.getIframeDocument(a);c.open();c.write("<html><head></head><body>12</body></html>");c.close();var b=y.getIframeWindow(a).getSelection(),g=c.documentElement.lastChild.firstChild,c=c.createRange();c.setStart(g,1);c.collapse(!0);b.addRange(c);Z=1==b.rangeCount;b.removeAllRanges();var d=c.cloneRange();c.setStart(g,0);d.setEnd(g,2);b.addRange(c);b.addRange(d);W=2==b.rangeCount;c.detach();d.detach();L.removeChild(a)}();b.features.selectionSupportsMultipleRanges=W;b.features.collapsedNonEditableSelectionsSupported=
Z;var V=!1,Q;L&&C.isHostMethod(L,"createControlRange")&&(Q=L.createControlRange(),C.areHostProperties(Q,["item","add"])&&(V=!0));b.features.implementsControlRange=V;F=I?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var R;C.isHostMethod(s,"getRangeAt")?R=function(a,c){try{return a.getRangeAt(c)}catch(b){return null}}:I&&(R=function(a){var c=y.getDocument(a.anchorNode),c=b.createRange(c);c.setStart(a.anchorNode,
a.anchorOffset);c.setEnd(a.focusNode,a.focusOffset);c.collapsed!==this.isCollapsed&&(c.setStart(a.focusNode,a.focusOffset),c.setEnd(a.anchorNode,a.anchorOffset));return c});b.getSelection=function(a){a=a||window;var c=a._rangySelection,b=q(a),g=r?f(a):null;c?(c.nativeSelection=b,c.docSelection=g,c.refresh(a)):(c=new v(b,g,a),a._rangySelection=c);return c};b.getIframeSelection=function(a){return b.getSelection(y.getIframeWindow(a))};Q=v.prototype;if(!t&&I&&C.areHostMethods(s,["removeAllRanges","addRange"])){Q.removeAllRanges=
function(){this.nativeSelection.removeAllRanges();k(this)};var O=function(a,c){var g=D.getRangeDocument(c),g=b.createRange(g);g.collapseToPoint(c.endContainer,c.endOffset);a.nativeSelection.addRange(e(g));a.nativeSelection.extend(c.startContainer,c.startOffset);a.refresh()};Q.addRange=N?function(a,c){if(V&&r&&"Control"==this.docSelection.type)g(this,a);else if(c&&T)O(this,a);else{var k;W?k=this.rangeCount:(this.removeAllRanges(),k=0);this.nativeSelection.addRange(e(a));this.rangeCount=this.nativeSelection.rangeCount;
this.rangeCount==k+1?(b.config.checkSelectionRanges&&(k=R(this.nativeSelection,this.rangeCount-1))&&!D.rangesEqual(k,a)&&(a=new B(k)),this._ranges[this.rangeCount-1]=a,d(this,a,ma(this.nativeSelection)),this.isCollapsed=F(this)):this.refresh()}}:function(a,c){c&&T?O(this,a):(this.nativeSelection.addRange(e(a)),this.refresh())};Q.setRanges=function(a){if(V&&1<a.length)u(this,a);else{this.removeAllRanges();for(var c=0,b=a.length;c<b;++c)this.addRange(a[c])}}}else if(C.isHostMethod(s,"empty")&&C.isHostMethod(x,
"select")&&V&&t)Q.removeAllRanges=function(){try{var a=jQuery.browser.msie&&8>jQuery.browser.version&&"undefined"===typeof document.documentMode;a||this.docSelection.empty();"None"!=this.docSelection.type&&a&&this.docSelection.empty()}catch(c){}k(this)},Q.addRange=function(a){if("Control"==this.docSelection.type)g(this,a);else try{B.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,d(this,a,!1)}catch(c){}},Q.setRanges=function(a){this.removeAllRanges();
var c=a.length;1<c?u(this,a):c&&this.addRange(a[0])};else return l.fail("No means of selecting a Range or TextRange was found"),!1;Q.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new G("INDEX_SIZE_ERR");return this._ranges[a]};var ca;if(t)ca=function(g){var d;b.isSelectionValid(g.win)?d=g.docSelection.createRange():(d=y.getBody(g.win.document).createTextRange(),d.collapse(!0));"Control"==g.docSelection.type?c(g):d&&"undefined"!=typeof d.text?a(g,d):k(g)};else if(C.isHostMethod(s,"getRangeAt")&&
"number"==typeof s.rangeCount)ca=function(a){if(V&&r&&"Control"==a.docSelection.type)c(a);else if(a._ranges.length=a.rangeCount=a.nativeSelection.rangeCount,a.rangeCount){for(var g=0,e=a.rangeCount;g<e;++g)a._ranges[g]=new b.WrappedRange(a.nativeSelection.getRangeAt(g));d(a,a._ranges[a.rangeCount-1],ma(a.nativeSelection));a.isCollapsed=F(a)}else k(a)};else if(I&&"boolean"==typeof s.isCollapsed&&"boolean"==typeof x.collapsed&&b.features.implementsDomRange)ca=function(a){var c;c=a.nativeSelection;c.anchorNode?
(c=R(c,0),a._ranges=[c],a.rangeCount=1,c=a.nativeSelection,a.anchorNode=c.anchorNode,a.anchorOffset=c.anchorOffset,a.focusNode=c.focusNode,a.focusOffset=c.focusOffset,a.isCollapsed=F(a)):k(a)};else return l.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;Q.refresh=function(a){var c=a?this._ranges.slice(0):null;ca(this);if(a){a=c.length;if(a!=this._ranges.length)return!1;for(;a--;)if(!D.rangesEqual(c[a],this._ranges[a]))return!1;return!0}};var aa=function(a,
c){var b=a.getAllRanges(),g=!1;a.removeAllRanges();for(var d=0,e=b.length;d<e;++d)g||c!==b[d]?a.addRange(b[d]):g=!0;a.rangeCount||k(a)};Q.removeRange=V?function(a){if("Control"==this.docSelection.type){var b=this.docSelection.createRange();a=n(a);for(var g=y.getDocument(b.item(0)),g=y.getBody(g).createControlRange(),d,e=!1,k=0,f=b.length;k<f;++k)d=b.item(k),d!==a||e?g.add(b.item(k)):e=!0;g.select();c(this)}else aa(this,a)}:function(a){aa(this,a)};var ma;!t&&I&&b.features.implementsDomRange?(ma=function(a){var c=
!1;a.anchorNode&&(c=1==y.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset));return c},Q.isBackwards=function(){return ma(this)}):ma=Q.isBackwards=function(){return!1};Q.toString=function(){for(var a=[],c=0,b=this.rangeCount;c<b;++c)a[c]=""+this._ranges[c];return a.join("")};Q.collapse=function(a,c){z(this,a);var g=b.createRange(y.getDocument(a));g.collapseToPoint(a,c);this.removeAllRanges();this.addRange(g);this.isCollapsed=!0};Q.collapseToStart=function(){if(this.rangeCount){var a=
this._ranges[0];this.collapse(a.startContainer,a.startOffset)}else throw new G("INVALID_STATE_ERR");};Q.collapseToEnd=function(){if(this.rangeCount){var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)}else throw new G("INVALID_STATE_ERR");};Q.selectAllChildren=function(a){z(this,a);var c=b.createRange(y.getDocument(a));c.selectNodeContents(a);this.removeAllRanges();this.addRange(c)};Q.deleteFromDocument=function(){if(V&&r&&"Control"==this.docSelection.type){for(var a=this.docSelection.createRange(),
c;a.length;)c=a.item(0),a.remove(c),c.parentNode.removeChild(c);this.refresh()}else if(this.rangeCount){a=this.getAllRanges();this.removeAllRanges();c=0;for(var b=a.length;c<b;++c)a[c].deleteContents();this.addRange(a[b-1])}};Q.getAllRanges=function(){return this._ranges.slice(0)};Q.setSingleRange=function(a){this.setRanges([a])};Q.containsNode=function(a,c){for(var b=0,g=this._ranges.length;b<g;++b)if(this._ranges[b].containsNode(a,c))return!0;return!1};Q.toHtml=function(){var a="";if(this.rangeCount){for(var a=
D.getRangeDocument(this._ranges[0]).createElement("div"),c=0,b=this._ranges.length;c<b;++c)a.appendChild(this._ranges[c].cloneContents());a=a.innerHTML}return a};Q.getName=function(){return"WrappedSelection"};Q.inspect=function(){return A(this)};Q.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null};v.inspect=A;b.Selection=v;b.selectionPrototype=Q;b.addCreateMissingNativeApiListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return b.getSelection(this)});
a=null})});window.rangy=l})();define("vendor/rangy-core",function(){});define("aloha/rangy-core",["jquery","vendor/rangy-core"],function(l){return window.rangy});define("util/class",[],function(){var l=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){function p(){!l&&this._constructor&&this._constructor.apply(this,arguments)}var m=this.prototype;l=!0;var f=new this;l=!1;for(var d=0;d<arguments.length;d++){var k=arguments[d],e;for(e in k)f[e]="function"==
typeof k[e]&&"function"==typeof m[e]&&b.test(k[e])?function(b,a){return function(){var c=this._super;this._super=m[b];var g=a.apply(this,arguments);this._super=c;return g}}(e,k[e]):k[e]}p.prototype=f;p.constructor=p;p.extend=arguments.callee;return p};return this.Class});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/lang",[],function(){});(function(l){var b=l.GENTICS;b.Utils.applyProperties=function(b,m){for(var f in m)m.hasOwnProperty(f)&&(b[f]=m[f])};
b.Utils.uniqeString4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};b.Utils.guid=function(){var l=b.Utils.uniqeString4;return l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()}})(window);define("aloha/ecma5shims",[],function(){function l(b){var d=null;if(b){do d=b;while(null!=(b=b.parentNode))}return d}function b(b,d){return(b.contains(d)&&16)+(d.contains(b)&&8)+(0<=b.sourceIndex&&0<=d.sourceIndex?(b.sourceIndex<d.sourceIndex&&4)+(b.sourceIndex>d.sourceIndex&&2):1)}function p(b){return null!=
b.sourceIndex?b:b.parentNode.insertBefore(document.createComment(""),b)}var m,f={bind:function(b){var d=this.obj||this,n=Function.prototype.bind,a=Array.prototype.slice.call(arguments,1);return n?n.apply(d,arguments):function(){return d.apply(b,0===arguments.length?a:a.concat(Array.prototype.slice.call(arguments)))}},trim:function(){var b=this.obj||this,d=String.prototype.trim;return d?d.call(b):b.replace(/^\s+/,"").replace(/\s+$/,"")},indexOf:function(b,d){var n=this.obj||this,a=Array.prototype.indexOf;
if(a)return a.call(n,b,d);void 0===d&&(d=0);0>d&&(d+=n.length);0>d&&(d=0);for(a=n.length;d<a;d++)if(void 0!==n[d]&&n[d]===b)return d;return-1},forEach:function(b,d){var n=this.obj||this,a=Array.prototype.forEach;if(a)return a.call(n,b,d);var c,a=0;for(c=n.length;a<c;a++)void 0!==n[a]&&b.call(d,n[a],a,n)},map:function(b,d,n){var a=this.obj||this,c=Array.prototype.map,g="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,f=[];if(c)f=c.call(a,b,d);else{var c=[],l,f=
0;for(l=a.length;f<l;f++)void 0!==a[f]&&(c[f]=b.call(d,a[f],f,a));f=c}return g?m(f):f},filter:function(b,d,n){var a=this.obj||this,c=Array.prototype.filter,g="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,f=[];if(c)f=c.call(a,b,d);else{var c=[],l,p,f=0;for(p=a.length;f<p;f++)void 0!==a[f]&&b.call(d,l=a[f],f,a)&&c.push(l);f=c}return g?m(f):f},every:function(b,d){var n=this.obj||this,a=Array.prototype.every;if(a)return a.call(n,b,d);var c,a=0;for(c=n.length;a<
c;a++)if(void 0!==n[a]&&!b.call(d,n[a],a,n))return!1;return!0},some:function(b,d){var n=this.obj||this,a=Array.prototype.some;if(a)return a.call(n,b,d);var c,a=0;for(c=n.length;a<c;a++)if(void 0!==n[a]&&b.call(d,n[a],a,n))return!0;return!1},hasAttribute:function(b){var d=this.obj||this;return d.hasAttribute?d.hasAttribute(b):!!d.getAttribute(b)}};m=function(b){var d=function(){};d.prototype=f;d=new d;d.obj=b;return d};for(var d in f)f.hasOwnProperty(d)&&(m[d]=f[d]);m.Node="undefined"!=typeof window.Node?
window.Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32};m.compareDocumentPosition=function(d,e){if(document.documentElement.compareDocumentPosition)return d.compareDocumentPosition(e);
if(!document.documentElement.contains)throw"neither compareDocumentPosition nor contains is supported by this browser.";if(d==e)return 0;if(l(d)!=l(e))return 1;if(null!=d.sourceIndex&&null!=e.sourceIndex)return b(d,e);if(d==document)return 20;if(e==document)return 10;var n=p(d),a=p(e),c=b(n,a);d!=n&&n.parentNode.removeChild(n);e!=a&&a.parentNode.removeChild(a);return c};m.getComputedStyle=function(b,d){return window.getComputedStyle?window.getComputedStyle(b,d):b.currentStyle?b.currentStyle:null};
return m});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/dom",["jquery","util/class","aloha/ecma5shims"],function(l,b,p){function m(a){if(!a)return-1;var c,b=a.parentNode.childNodes,g=b.length;for(c=0;c<g;c++)if(b[c]===a)return c;return-1}function f(a){if(1===a.nodeType){var c=0;for(a=a.firstChild;a;)c+=1,a=a.nextSibling;return c}return 3===a.nodeType?a.length:0}function d(a,b){if(!a)return null;if(b(a))return a;var g=a.firstChild||a.nextSibling||a.parentNode&&
!c.Utils.Dom.isEditingHost(a.parentNode)&&a.parentNode.nextSibling;return g?d(g,b):null}function k(a){if(!a)return!0;if("BR"===a.nodeName)return!1;if(a.nodeType===g.TEXT_NODE)return-1===a.data.search(/\S/)||1===a.data.length&&8192<=a.data.charCodeAt(0)?!0:!1;var c=f(a);if(0===c)return!0;a=a.childNodes;var b;for(b=0;b<c;b++)if(!k(a[b]))return!1;return!0}function e(a){return!k(a)}function n(a){var c;(c=k(a))||(c="aloha-editing-p"===a.className&&1===f(a)&&"BR"===a.children[0].nodeName&&"aloha-end-br"===
a.children[0].className);return c}function a(a,c){a.nodeType!==g.TEXT_NODE&&n(a)?l(a).replaceWith(c):l(a).after(c)}var c=window.GENTICS,g={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,
DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32},v={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,LI:!0};b=b.extend({getIndexInParent:m,wordRegex:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
nonWordRegex:/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
mergeableTags:"b code del em i ins strong sub sup #text".split(" "),nonWordBoundaryTags:"a b code del em i ins span strong sub sup #text".split(" "),nonEmptyTags:["br"],tags:{flow:"a abbr address area article aside audio b bdi bdo blockquote br button canvas cite code command datalist del details dfn div dl em embed fieldset figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr i iframe img input ins kbd keygen label map mark math menu meter nav noscript object ol output p pre progress q ruby s samp script section select small span strong style sub sup svg table textarea time u ul var video wbr #text".split(" "),
phrasing:"a abbr area audio b bdi bdo br button canvas cite code command datalist del dfn em embed i iframe img input ins kbd keygen label map mark math meter noscript object output progress q ruby samp script select small span strong sub sup svg textarea time u var video wbr #text".split(" ")},children:{a:"phrasing",abbr:"phrasing",address:"flow",area:"empty",article:"flow",aside:"flow",audio:"source",b:"phrasing",base:"empty",bdo:"phrasing",blockquote:"phrasing",body:"flow",br:"empty",button:"phrasing",
canvas:"phrasing",caption:"flow",cite:"phrasing",code:"phrasing",col:"empty",colgroup:"col",command:"empty",datalist:["phrasing","option"],dd:"flow",del:"phrasing",div:"flow",details:["summary","flow"],dfn:"flow",dl:["dt","dd"],dt:"phrasing",em:"phrasing",embed:"empty",fieldset:["legend","flow"],figcaption:"flow",figure:["figcaption","flow"],footer:"flow",form:"flow",h1:"phrasing",h2:"phrasing",h3:"phrasing",h4:"phrasing",h5:"phrasing",h6:"phrasing",header:"flow",hgroup:"h1 h2 h3 h4 h5 h6".split(" "),
hr:"empty",i:"phrasing",iframe:"#text",img:"empty",input:"empty",ins:"phrasing",kbd:"phrasing",keygen:"empty",label:"phrasing",legend:"phrasing",li:"flow",link:"empty",map:"area",mark:"phrasing",menu:["li","flow"],meta:"empty",meter:"phrasing",nav:"flow",noscript:"phrasing",object:"param",ol:"li",optgroup:"option",option:"#text",output:"phrasing",p:"phrasing",param:"empty",pre:"phrasing",progress:"phrasing",q:"phrasing",rp:"phrasing",rt:"phrasing",ruby:["phrasing","rt","rp"],s:"phrasing",samp:"pharsing",
script:"#script",section:"flow",select:["option","optgroup"],small:"phrasing",source:"empty",span:"phrasing",strong:"phrasing",style:"phrasing",sub:"phrasing",summary:"phrasing",sup:"phrasing",table:"caption colgroup thead tbody tfoot tr".split(" "),tbody:"tr",td:"flow",textarea:"#text",tfoot:"tr",th:"phrasing",thead:"tr",time:"phrasing",title:"#text",tr:["th","td"],track:"empty",u:"phrasing",ul:"li","var":"phrasing",video:"source",wbr:"empty"},blockLevelElements:"p h1 h2 h3 h4 h5 h6 blockquote div pre".split(" "),
listElements:["li","ol","ul"],split:function(a,c,b){var g=l(a.startContainer),d=a.startOffset,e,k,n,f,m,v,p,q,s;b&&(g=l(a.endContainer),d=a.endOffset);1>c.length&&(c=l(document.body));b=!a.isCollapsed()&&!b;k=g.parents().get();k.unshift(g.get(0));l.each(k,function(a,b){if(c.filter(function(){return this==b}).length)return 0<a&&(e=k.slice(0,a)),!1});if(!e)return!0;e=e.reverse();g=0;for(v=e.length;g<v;++g)if(p=e[g],g===v-1)3===p.nodeType?(m=document.createTextNode(p.data.substring(d,p.data.length)),
p.data=p.data.substring(0,d),this.isEmpty(m)&&0===l("br",n).length&&(m=l("<br/>").addClass("aloha-end-br"))):(q=l(p),m=q.contents(),q=q.clone(!1).empty(),m=q.append(m.slice(d,m.length)).get(0),l(m).addClass("aloha-editing-p"),1===m.childNodes.length&&"br"===m.childNodes.item(0).nodeName.toLowerCase()&&l(m.childNodes.item(0)).addClass("aloha-end-br")),b&&a.endContainer===p&&(a.endContainer=m,a.endOffset-=d,a.clearCaches()),f?f.prepend(m):l(p).after(m);else{q=l(p).clone(!1).empty();n?f.prepend(q):n=
q;for(f=q;;){s=e[g+1].nextSibling;if(!s)break;f.append(s)}if(b&&a.endContainer===p){a.endContainer=q.get(0);p=e[g+1];for(q=0;;){p=p.previousSibling;if(!p)break;q++}a.endOffset-=q;a.clearCaches()}}l(e[0]).after(n);return l([e[0],n?n.get(0):m])},allowsNesting:function(a,c){if(!(a&&a.nodeName&&c&&c.nodeName))return!1;var b=a.nodeName.toLowerCase(),g=c.nodeName.toLowerCase();return this.children[b]?this.children[b]==g||l.isArray(this.children[b])&&0<=l.inArray(g,this.children[b])||l.isArray(this.tags[this.children[b]])&&
0<=l.inArray(g,this.tags[this.children[b]])?!0:!1:!1},addMarkup:function(a,c,b){3===a.startContainer.nodeType&&0<a.startOffset&&a.startOffset<a.startContainer.data.length&&this.split(a,l(a.startContainer).parent(),!1);3===a.endContainer.nodeType&&0<a.endOffset&&a.endOffset<a.endContainer.data.length&&this.split(a,l(a.endContainer).parent(),!0);var g=a.getRangeTree();this.recursiveAddMarkup(g,c,a,b);this.doCleanup({merge:!0,removeempty:!0},a)},recursiveAddMarkup:function(a,b,g,d){var e,k;g=0;for(k=
a.length;g<k;++g)"full"==a[g].type&&this.allowsNesting(b.get(0),a[g].domobj)?!d&&a[g].domobj.nodeName==b.get(0).nodeName||3===a[g].domobj.nodeType&&0===l.trim(a[g].domobj.data).length||(l(a[g].domobj).wrap(b),d||3===a[g].domobj.nodeType||(e=new c.Utils.RangeObject,e.startContainer=e.endContainer=a[g].domobj.parentNode,e.startOffset=0,e.endOffset=e.endContainer.childNodes.length,this.removeMarkup(e,b,l(a[g].domobj.parentNode)))):(d||a[g].domobj&&a[g].domobj.nodeName!==b.get(0).nodeName)&&a[g].children&&
0<a[g].children.length&&this.recursiveAddMarkup(a[g].children,b)},findHighestElement:function(a,c,b){c=c.toLowerCase();var g,d=a;for(a=b?function(){return b.filter(function(){return d==this}).length}:function(){return!1};!a()&&d;)d.nodeName.toLowerCase()===c&&(g=d),d=d.parentNode;return g},removeMarkup:function(a,c,b){var g=c.get(0).nodeName,d=this.findHighestElement(a.startContainer,g,b),e=this.findHighestElement(a.endContainer,g,b),k=!1;d&&0<a.startOffset&&(this.split(a,l(d).parent(),!1),k=!0);
e&&(3===a.endContainer.nodeType&&a.endOffset<a.endContainer.data.length&&(this.split(a,l(e).parent(),!0),k=!0),1===a.endContainer.nodeType&&a.endOffset<a.endContainer.childNodes.length&&(this.split(a,l(e).parent(),!0),k=!0));k&&a.correctRange();if(b=(b=this.findHighestElement(a.getCommonAncestorContainer(),g,b))?b.parentNode:a.getCommonAncestorContainer())g=a.getRangeTree(b),this.recursiveRemoveMarkup(g,c),this.doCleanup({merge:!0,removeempty:!0},a,b)},recursiveRemoveMarkup:function(a,c){var b,g,
d;b=0;for(g=a.length;b<g;++b)"full"==a[b].type&&a[b].domobj.nodeName==c.get(0).nodeName&&(d=l(a[b].domobj).contents(),0<d.length?d.first().unwrap():l(a[b].domobj).remove()),a[b].children&&this.recursiveRemoveMarkup(a[b].children,c)},doCleanup:function(a,b,g){var d=this,e,k,n,f,v;"undefined"===typeof a&&(a={});"undefined"===typeof a.merge&&(a.merge=!1);"undefined"===typeof a.removeempty&&(a.removeempty=!1);"undefined"===typeof g&&b&&(g=b.getCommonAncestorContainer());k=e=!1;n=l(g);f=b.startOffset;
v=b.endOffset;n.contents().each(function(){var g;try{g=this.nodeType}catch(p){return}switch(g){case 1:g=this.nodeName;if(e&&e.nodeName===g)b.startContainer===n&&f>m(this)&&(b.startOffset-=1,k=!0),b.endContainer===n&&v>m(this)&&(b.endOffset-=1,k=!0),l(e).append(l(this).contents()),k|=d.doCleanup(a,b,e),l(this).remove();else{k|=d.doCleanup(a,b,this);var A=!1;a.removeempty&&(c.Utils.Dom.isBlockLevelElement(this)&&0===this.childNodes.length&&(A=!0),0<=l.inArray(g.toLowerCase(),d.mergeableTags)&&0===l(this).text().length&&
0===this.childNodes.length&&(A=!0));A?(b.startContainer===this.parentNode&&f>m(this)&&(b.startOffset-=1,k=!0),b.endContainer===this.parentNode&&v>m(this)&&(b.endOffset-=1,k=!0),l(this).remove()):e=(a.mergeable?a.mergeable(this):0<=l.inArray(g.toLowerCase(),d.mergeableTags))?this:!1}break;case 3:if(e&&3===e.nodeType&&a.merge)g=e.nodeValue.length,b.startContainer===this?(b.startContainer=e,b.startOffset+=g,k=!0):b.startContainer===e.parentNode&&b.startOffset===m(e)+1&&(b.startContainer=e,b.startOffset=
g,k=!0),b.endContainer===this?(b.endContainer=e,b.endOffset+=g,k=!0):b.endContainer===e.parentNode&&b.endOffset===m(e)+1&&(b.endContainer=e,b.endOffset=g,k=!0),e.data+=this.data;else if(""!==this.nodeValue||!a.removeempty){e=this;break}b.startContainer===this.parentNode&&b.startOffset>m(this)&&(b.startOffset-=1,k=!0);b.endContainer===this.parentNode&&b.endOffset>m(this)&&(b.endOffset-=1,k=!0);l(this).remove();g=e.nextSibling;if(e&&(!g||3!==g.nodeType)){var A=e.data,q=A.length;for(g=q-1;0<=g&&1<q;g--)"\u200b"===
A.charAt(g)&&(e.deleteData(g,1),b.startContainer===e&&b.startOffset>g&&(b.startOffset--,k=!0),b.endContainer===e&&b.endOffset>g&&(b.endOffset--,k=!0))}}});k&&b.clearCaches();return k},isBlockLevelElement:function(a){return a?1===a.nodeType&&0<=l.inArray(a.nodeName.toLowerCase(),this.blockLevelElements)?!0:!1:!1},isLineBreakElement:function(a){return a?1===a.nodeType&&"br"==a.nodeName.toLowerCase():!1},isListElement:function(a){return a?1===a.nodeType&&0<=l.inArray(a.nodeName.toLowerCase(),this.listElements):
!1},isSplitObject:function(a){return 1===a.nodeType&&v.hasOwnProperty(a.nodeName)},searchAdjacentTextNode:function(a,c,b,g){if(!a||1!==a.nodeType||0>c||c>a.childNodes.length)return!1;"undefined"===typeof g&&(g={blocklevel:!0,list:!0,linebreak:!0});"undefined"===typeof g.blocklevel&&(g.blocklevel=!0);"undefined"===typeof g.list&&(g.list=!0);"undefined"===typeof g.linebreak&&(g.linebreak=!0);"undefined"===typeof b&&(b=!0);var d,e=a;b&&0<c&&(d=a.childNodes[c-1]);for(!b&&c<a.childNodes.length&&(d=a.childNodes[c]);e;)if(d){if(3===
d.nodeType&&0<l.trim(d.data).length)return d;if(g.blocklevel&&this.isBlockLevelElement(d)||g.linebreak&&this.isLineBreakElement(d)||g.list&&this.isListElement(d))return!1;3===d.nodeType?d=b?d.previousSibling:d.nextSibling:(e=d,d=b?d.lastChild:d.firstChild)}else{if(g.blocklevel&&this.isBlockLevelElement(e)||g.list&&this.isListElement(e))return!1;d=b?e.previousSibling:e.nextSibling;e=e.parentNode}},insertIntoDOM:function(c,b,g,k,f){var m=b.getContainerParents(g,k),v=this,p;g||(g=l(document.body));0===
m.length?p=g.get(0):l.each(m,function(a,b){if(v.allowsNesting(b,c.get(0)))return p=b,!1});"undefined"===typeof p&&0<g.length&&(p=g.get(0));if(!this.allowsNesting(p,c.get(0))&&!f)return!1;if("undefined"!==typeof p){g=this.split(b,l(p),k);if(!0===g){g=b.startContainer;f=b.startOffset;k&&(g=b.endContainer,f=b.endOffset);if(0===f)return b=l(g).contents(),0<b.length?b.eq(0).before(c):l(g).append(c),!0;l(g).contents().eq(f-1).after(c);return!0}if(g)return b=g[1],a(g[0],c),n(b)&&d(b.nextSibling||b.parentNode&&
b.parentNode.nextSibling,e)&&l(b).remove(),!0}return!1},removeFromDOM:function(a,c,b){if(b){b=m(a);var g=l(a).contents().length,d=a.parentNode;c.startContainer==d&&c.startOffset>b?c.startOffset+=g-1:c.startContainer==a&&(c.startContainer=d,c.startOffset=b+c.startOffset);c.endContainer==d&&c.endOffset>b?c.endOffset+=g-1:c.endContainer==a&&(c.endContainer=d,c.endOffset=b+c.endOffset);l(a).contents().unwrap();this.doCleanup({merge:!0},c,d)}},removeRange:function(a){if(!a||a.isCollapsed())return!1;3==
a.startContainer.nodeType&&0<a.startOffset&&a.startOffset<a.startContainer.data.length&&this.split(a,l(a.startContainer).parent(),!1);3==a.endContainer.nodeType&&0<a.endOffset&&a.endOffset<a.endContainer.data.length&&this.split(a,l(a.endContainer).parent(),!0);var c=a.getRangeTree();a.endContainer=a.startContainer;a.endOffset=a.startOffset;this.recursiveRemoveRange(c,a);this.doCleanup({merge:!0},a);a.clearCaches()},recursiveRemoveRange:function(a,c){var b;for(b=0;b<a.length;++b)"full"==a[b].type?
(0<l(c.startContainer).parents().andSelf().filter(a[b].domobj).length&&(c.startContainer=c.endContainer=a[b].domobj.parentNode,c.startOffset=c.endOffset=m(a[b].domobj)),l(a[b].domobj).remove()):"partial"==a[b].type&&a[b].children&&this.recursiveRemoveRange(a[b].children,c)},extendToWord:function(a,c){var b=this.searchWordBoundary(a.startContainer,a.startOffset,!0),g=this.searchWordBoundary(a.endContainer,a.endOffset,!1);if(c||!(a.startContainer==b.container&&a.startOffset==b.offset||a.endContainer==
g.container&&a.endOffset==g.offset))a.startContainer=b.container,a.startOffset=b.offset,a.endContainer=g.container,a.endOffset=g.offset,a.correctRange(),a.clearCaches()},isWordBoundaryElement:function(a){return a&&a.nodeName?-1==l.inArray(a.nodeName.toLowerCase(),this.nonWordBoundaryTags):!1},searchWordBoundary:function(a,c,b){"undefined"===typeof b&&(b=!0);for(var g=!1,d,e;!g;){var k=m(a);if(3===a.nodeType)if(b){for(e=d=a.data.substring(0,c).search(this.nonWordRegex);-1!=e;)d=e,e=a.data.substring(d+
1,c).search(this.nonWordRegex),-1!=e&&(e=e+d+1);-1!=d?(c=d+1,g=!0):(c=k,a=a.parentNode)}else d=a.data.substring(c).search(this.nonWordRegex),-1!=d?(c+=d,g=!0):(c=k+1,a=a.parentNode);else 1===a.nodeType&&(b?0<c?this.isWordBoundaryElement(a.childNodes[c-1])?g=!0:(a=a.childNodes[c-1],c=3===a.nodeType?a.data.length:a.childNodes.length):this.isWordBoundaryElement(a)?g=!0:(c=k,a=a.parentNode):c<a.childNodes.length?this.isWordBoundaryElement(a.childNodes[c])?g=!0:(a=a.childNodes[c],c=0):this.isWordBoundaryElement(a)?
g=!0:(c=k+1,a=a.parentNode))}3!==a.nodeType&&(g=this.searchAdjacentTextNode(a,c,!b))&&(a=g,c=b?0:a.data.length);return{container:a,offset:c}},isEmpty:function(a){if(!a)return!0;if(-1!=l.inArray(a.nodeName.toLowerCase(),this.nonEmptyTags))return!1;if(3===a.nodeType)return-1==a.data.search(/\S/)||1===a.data.length&&8192<=a.data.charCodeAt(0)?!0:!1;var c,b;c=0;for(b=a.childNodes.length;c<b;++c)if(!this.isEmpty(a.childNodes[c]))return!1;return!0},setCursorAfter:function(a){var b=new c.Utils.RangeObject;
m(a);var g;3==a.nodeType?(g=a,a=g.nodeValue.length):a.nextSibling&&3==a.nextSibling.nodeType?(g=a.nextSibling,a=0):(g=a.parentNode,a=m(a)+1);b.startContainer=b.endContainer=g;b.startOffset=b.endOffset=a;b.select();return b},selectDomNode:function(a){var b=new c.Utils.RangeObject;b.startContainer=b.endContainer=a.parentNode;b.startOffset=m(a);b.endOffset=b.startOffset+1;b.select()},setCursorInto:function(a){var b=new c.Utils.RangeObject;b.startContainer=b.endContainer=a;b.startOffset=b.endOffset=0;
b.select()},isEditingHost:function(a){return a&&1==a.nodeType&&("true"==a.contentEditable||a.parentNode&&9==a.parentNode.nodeType&&"on"==a.parentNode.designMode)},isEditable:function(a){return a&&!this.isEditingHost(a)&&(1!=a.nodeType||"false"!=a.contentEditable)&&(this.isEditingHost(a.parentNode)||this.isEditable(a.parentNode))},getEditingHostOf:function(a){if(this.isEditingHost(a))return a;if(this.isEditable(a)){for(a=a.parentNode;!this.isEditingHost(a);)a=a.parentNode;return a}return null},inSameEditingHost:function(a,
c){return this.getEditingHostOf(a)&&this.getEditingHostOf(a)==this.getEditingHostOf(c)},isBlockNode:function(a){return a&&(a.nodeType==p.Node.ELEMENT_NODE&&-1==p(["inline","inline-block","inline-table","none"]).indexOf(p.getComputedStyle(a).display)||a.nodeType==p.Node.DOCUMENT_NODE||a.nodeType==p.Node.DOCUMENT_FRAGMENT_NODE)},getFirstVisibleChild:function(a,c){if(!a||a.nodeType==p.Node.TEXT_NODE&&this.isEmpty(a)||a.nodeType==p.Node.ELEMENT_NODE&&0==a.offsetHeight&&-1===l.inArray(a.nodeName.toLowerCase(),
this.nonEmptyTags))return null;if(a.nodeType==p.Node.TEXT_NODE||a.nodeType==p.Node.ELEMENT_NODE&&0==a.childNodes.length||!l(a).contentEditable())return c?a:null;var b;for(b=0;b<a.childNodes.length;++b){var g=this.getFirstVisibleChild(a.childNodes[b],!0);if(null!=g)return g}return null},getLastVisibleChild:function(a,c){if(!a||a.nodeType==p.Node.TEXT_NODE&&this.isEmpty(a)||a.nodeType==p.Node.ELEMENT_NODE&&0==a.offsetHeight&&-1===l.inArray(a.nodeName.toLowerCase(),this.nonEmptyTags))return null;if(a.nodeType==
p.Node.TEXT_NODE||a.nodeType==p.Node.ELEMENT_NODE&&0==a.childNodes.length||!l(a).contentEditable())return c?a:null;var b;for(b=a.childNodes.length-1;0<=b;--b){var g=this.getLastVisibleChild(a.childNodes[b],!0);if(null!=g)return g}return null}});c.Utils.Dom=new b;return c.Utils.Dom});define("aloha/pluginmanager",["jquery","util/class"],function(l,b){function p(b,d){if(0===b.length)d&&d();else{var k=b.length,e=function(){0===--k&&d&&d()},n,a;for(n=0;n<b.length;n++)a=b[n],a.settings=a.settings||{},"undefined"===
typeof a.settings.enabled&&(a.settings.enabled=!0),a.settings.enabled&&a.checkDependencies()?(a=a.init())&&"function"===typeof a.done?a.done(e):e():e()}}var m=window.Aloha;return new (b.extend({plugins:{},init:function(b,d){var k=this.plugins,e=m&&m.settings&&m.settings.plugins,n;for(n in e)e.hasOwnProperty(n)&&k[n]&&(k[n].settings=e[n]||{});var a;if(k&&0===d.length)for(a in d=[],k)k.hasOwnProperty(a)&&d.push(a);e=d;n=[];var c;for(c=0;c<e.length;c++)(a=k[e[c]])&&n.push(a);p(n,b)},register:function(b){if(!b.name)throw Error("Plugin does not have an name.");
if(this.plugins[b.name])throw Error('Already registered the plugin "'+b.name+'"!');this.plugins[b.name]=b},makeClean:function(b){for(var d in this.plugins)this.plugins.hasOwnProperty(d)&&(m.Log.isDebugEnabled()&&m.Log.debug(this,"Passing contents of HTML Element with id { "+b.attr("id")+" } for cleaning to plugin { "+d+" }"),this.plugins[d].makeClean(b))},toString:function(){return"pluginmanager"}}))});define("aloha/core",["jquery","aloha/pluginmanager"],function(l,b){function p(){var b=l.browser,
d=b.version;return!(b.webkit&&532.5>parseFloat(d)||b.mozilla&&1.9>parseFloat(d)||b.msie&&7>d||b.opera&&11>d)}function m(){l("html").mousedown(function(b){var d;if(d=f.activeEditable)if(d=!f.eventHandled)b=l(b.target),d=!(b.is(".aloha-dialog")||b.closest(".aloha").length);d&&f.deactivateEditable()}).mouseup(function(){f.eventHandled=!1})}var f=window.Aloha,d=[{fn:null,event:null,deferred:null},{fn:function(b,d){if(p())l.browser.webkit?l("html").addClass("aloha-webkit"):l.browser.opera?l("html").addClass("aloha-opera"):
l.browser.msie?l("html").addClass("aloha-ie"+parseInt(l.browser.version,10)):l.browser.mozilla&&l("html").addClass("aloha-mozilla"),-1!==navigator.appVersion.indexOf("Win")?f.OSName="Win":-1!==navigator.appVersion.indexOf("Mac")?f.OSName="Mac":-1!==navigator.appVersion.indexOf("X11")?f.OSName="Unix":-1!==navigator.appVersion.indexOf("Linux")&&(f.OSName="Linux"),m(),f.settings.base=f.getAlohaUrl(),f.Log.init(),f.settings.errorhandling&&(window.onerror=function(a,b,d){f.Log.error(f,"Error message: "+
a+"\nURL: "+b+"\nLine Number: "+d);return!0}),b(),d();else{var n=window.console;if(n){var a=n.error?"error":n.log?"log":null;if(a)n[a]("This browser is not supported")}}},event:null,deferred:null},{fn:function(b,d){f.RepositoryManager.init();b();d()},event:null,deferred:null},{fn:function(d,e){if(0===f.loadedPlugins.length){var n=b.plugins,a;for(a in n)n.hasOwnProperty(a)&&f.loadedPlugins.push(a)}var c=!1;b.init(function(){c||(d(),c=!0);e()},f.loadedPlugins);c||(d(),c=!0)},event:"aloha-plugins-loaded",
deferred:null},{fn:function(b,d){var n;for(n=0;n<f.editables.length;n++)f.editables[n].ready||f.editables[n].init();b();d()},event:null,deferred:null},{fn:null,event:"aloha-ready",deferred:null}];l.extend(!0,f,{version:"${version}",editables:[],activeEditable:null,settings:{},defaults:{},ui:{},OSName:"Unknown",loadedPlugins:[],_pluginBaseUrlByName:{},init:function(){f.initialize(d)},getLoadedPlugins:function(){return this.loadedPlugins},isPluginLoaded:function(b){var d=!1;l.each(this.loadedPlugins,
function(n,a){if(b===a.toString())return d=!0,!1});return d},activateEditable:function(b){var d=f.editables,n;for(n=0;n<d.length;n++)d[n]!==b&&d[n].isActive&&d[n].blur();f.activeEditable=b},getActiveEditable:function(){return f.activeEditable},deactivateEditable:function(){f.activeEditable&&(f.activeEditable.blur(),f.activeEditable=null)},getEditableById:function(b){var d=l("#"+b);d.length&&"textarea"===d[0].nodeName.toLowerCase()&&(b+="-aloha");for(d=0;d<f.editables.length;d++)if(f.editables[d].getId()===
b)return f.editables[d];return null},isEditable:function(b){var d,n;d=0;for(n=f.editables.length;d<n;d++)if(f.editables[d].originalObj.get(0)===b)return!0;return!1},getEditableHost:function(){var b=function(b){var d;for(d=0;d<f.editables.length;d++)if(f.editables[d].originalObj[0]===b)return f.editables[d];return null};return function(d){if(!d||0===d.length)return null;var n=b(d[0]);n||d.parents().each(function(a,c){if(n=b(c))return!1});return n}}(),log:function(b,d,n){"undefined"!==typeof f.Log&&
f.Log.log(b,d,n)},registerEditable:function(b){f.editables.push(b)},unregisterEditable:function(b){b=l.inArray(b,f.editables);-1!==b&&f.editables.splice(b,1)},isModified:function(){var b;for(b=0;b<f.editables.length;b++)if(f.editables[b].isModified&&f.editables[b].isModified())return!0;return!1},getAlohaUrl:function(b){return f.settings.baseUrl||""},getPluginUrl:function(b){if(!b)return null;(b=f.settings._pluginBaseUrlByName[b])&&(b.match("^(/|http[s]?:).*")||(b=f.getAlohaUrl()+"/"+b));return b},
disableObjectResizing:function(){try{var b;try{b=document.queryCommandSupported("enableObjectResizing")}catch(d){b=!1,f.Log.log("enableObjectResizing is not supported.")}b&&(document.execCommand("enableObjectResizing",!1,!1),f.Log.log("enableObjectResizing disabled."))}catch(n){f.Log.error(n,"Could not disable enableObjectResizing")}},toString:function(){return"Aloha"}});return f});define("aloha/console",["aloha/core","util/class","jquery"],function(l,b,p){b=b.extend({init:function(){"undefined"!==
typeof l.settings.logLevels&&l.settings.logLevels||(l.settings.logLevels={error:!0,warn:!0});"undefined"!==typeof l.settings.logHistory&&l.settings.logHistory||(l.settings.logHistory={});l.settings.logHistory.maxEntries||(l.settings.logHistory.maxEntries=100);l.settings.logHistory.highWaterMark||(l.settings.logHistory.highWaterMark=90);l.settings.logHistory.levels||(l.settings.logHistory.levels={error:!0,warn:!0});this.flushLogHistory();l.trigger("aloha-logger-ready")},logHistory:[],highWaterMarkReached:!1,
log:function(b,f,d){"undefined"===typeof f&&(d=b);"string"!==typeof f&&f&&f.toString&&(f=f.toString());"undefined"===typeof d&&(d=f,f=void 0);"undefined"!==typeof b&&b||(b="log");b=b.toLowerCase();if("undefined"!==typeof l.settings.logLevels&&l.settings.logLevels[b]){f=f||"Unkown Aloha Component";this.addToLogHistory({level:b,component:f,message:d,date:new Date});var k=window.console;switch(b){case "error":window.console&&k.error&&(f||d?k.error(f+": "+d):k.error("Error occured without message and component"));
break;case "warn":window.console&&k.warn&&k.warn(f+": "+d);break;case "info":window.console&&k.info&&k.info(f+": "+d);break;case "debug":window.console&&k.log&&k.log(f+" ["+b+"]: "+d);break;default:window.console&&k.log&&k.log(f+" ["+b+"]: "+d)}}},error:function(b,f){this.log("error",b,f)},warn:function(b,f){this.log("warn",b,f)},info:function(b,f){this.log("info",b,f)},debug:function(b,f){this.log("debug",b,f)},deprecated:function(b,f){this.log("warn",b,f);if(l.settings.logLevels.deprecated)throw Error(f);
},isLogLevelEnabled:function(b){return l.settings&&l.settings.logLevels&&l.settings.logLevels[b]},isErrorEnabled:function(){return this.isLogLevelEnabled("error")},isWarnEnabled:function(){return this.isLogLevelEnabled("warn")},isInfoEnabled:function(){return this.isLogLevelEnabled("info")},isDebugEnabled:function(){return this.isLogLevelEnabled("debug")},addToLogHistory:function(b){l.settings.logHistory||this.init();if(!(0>=l.settings.logHistory.maxEntries)&&l.settings.logHistory.levels[b.level])for(this.logHistory.push(b),
!this.highWaterMarkReached&&this.logHistory.length>=l.settings.logHistory.maxEntries*l.settings.logHistory.highWaterMark/100&&(l.trigger("aloha-log-full"),this.highWaterMarkReached=!0);this.logHistory.length>l.settings.logHistory.maxEntries;)this.logHistory.shift()},getLogHistory:function(){return this.logHistory},flushLogHistory:function(){this.logHistory=[];this.highWaterMarkReached=!1}});b=new b;return l.Log=l.Console=b});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||
{};define("util/range",["jquery","util/dom","util/class","aloha/console","aloha/rangy-core"],function(l,b,p,m,f){function d(a,c){var b=[],d;for(d=1===a.nodeType?a:a.parentNode;d&&d!==c&&9!==d.nodeType;)1===d.nodeType&&b.push(d),d=d.parentNode;return b}function k(a,c,b){var d,e,n=a.length;for(e=0;e<n;e++)d=a[e],"none"!==d.type&&"collapsed"!==d.type&&(d.domobj.nodeName===c&&b.push(d.domobj),0<d.children.length&&k(d.children,c,b))}var e=window.GENTICS,n=window.Aloha;e.Utils.RangeObject=p.extend({_constructor:function(a){"object"===
typeof a?("undefined"!==typeof a.startContainer&&(this.startContainer=a.startContainer),"undefined"!==typeof a.startOffset&&(this.startOffset=a.startOffset),"undefined"!==typeof a.endContainer&&(this.endContainer=a.endContainer),"undefined"!==typeof a.endOffset&&(this.endOffset=a.endOffset)):!0===a&&this.initializeFromUserSelection()},startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0,deleteContents:function(){b.removeRange(this)},log:function(a){m.deprecated("Utils.RangeObject",
'log() is deprecated. use console.log() from module "aloha/console" instead: '+a)},isCollapsed:function(){return!this.endContainer||this.startContainer===this.endContainer&&this.startOffset===this.endOffset},getCommonAncestorContainer:function(){if(this.commonAncestorContainer)return this.commonAncestorContainer;this.updateCommonAncestorContainer();return this.commonAncestorContainer},getContainerParents:function(a,c){var b=c?this.endContainer:this.startContainer;return b?l(d(b,a?a[0]:null)):!1},
getStartContainerParents:function(a){return this.getContainerParents(a,!1)},getEndContainerParents:function(a){return this.getContainerParents(a,!0)},updateCommonAncestorContainer:function(a){if(a)this.commonAncestorContainer=a;else{var c=this.getStartContainerParents(),b=this.getEndContainerParents(),d;if(!(0<c.length&&0<b.length))return m.warn("aloha/range","could not find commonAncestorContainer"),!1;for(d=0;d<c.length;d++)if(-1!=b.index(c[d])){this.commonAncestorContainer=c[d];break}}m.debug(a?
"commonAncestorContainer was set successfully":"commonAncestorContainer was calculated successfully");return!0},getCollapsedIERange:function(a,c){var b=document.body.createTextRange(),d,e,k;k=this.searchElementToLeft(a,c);k.element?(d=document.body.createTextRange(),d.moveToElementText(k.element),b.setEndPoint("StartToEnd",d),0!==k.characters?b.moveStart("character",k.characters):(b.moveStart("character",1),b.moveStart("character",-1))):(this.searchElementToRight(a,c),e=3==a.nodeType?a.parentNode:
a,d=document.body.createTextRange(),d.moveToElementText(e),b.setEndPoint("StartToStart",d),0!==k.characters&&b.moveStart("character",k.characters));b.collapse();return b},select:function(){var a;if("undefined"===typeof this.startContainer||"undefined"===typeof this.endContainer)return m.warn("can not select an empty range"),!1;a=f.createRange();a.setStart(this.startContainer,this.startOffset);a.setEnd(this.endContainer,this.endOffset);f.getSelection().setSingleRange(a)},searchElementToLeft:function(a,
c){var b,d=0;3===a.nodeType?(d=c,b=a.previousSibling):0<c&&(b=a.childNodes[c-1]);for(;b&&3===b.nodeType;)d+=b.data.length,b=b.previousSibling;return{element:b,characters:d}},searchElementToRight:function(a,c){var b,d=0;3===a.nodeType?(d=a.data.length-c,b=a.nextSibling):c<a.childNodes.length&&(b=a.childNodes[c]);for(;b&&3===b.nodeType;)d+=b.data.length,b=b.nextSibling;return{element:b,characters:d}},update:function(a){m.debug("now updating rangeObject");this.initializeFromUserSelection(a);this.updateCommonAncestorContainer()},
initializeFromUserSelection:function(a){a=f.getSelection();if(!a||!a.rangeCount)return!1;a=a.getRangeAt(0);if(!a)return!1;this.startContainer=a.startContainer;this.endContainer=a.endContainer;this.startOffset=a.startOffset;this.endOffset=a.endOffset;this.correctRange()},correctRange:function(){var a,c;this.clearCaches();if(this.isCollapsed()){if(1===this.startContainer.nodeType){if(0<this.startOffset&&3===this.startContainer.childNodes[this.startOffset-1].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset-
1];this.startOffset=this.startContainer.data.length;this.endContainer=this.startContainer;this.endOffset=this.startOffset;return}if(0<this.startOffset&&1===this.startContainer.childNodes[this.startOffset-1].nodeType){if(a=e.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!0)){this.startContainer=this.endContainer=a;this.startOffset=this.endOffset=a.data.length;return}if(a=e.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!1)){this.startContainer=this.endContainer=
a;this.startOffset=this.endOffset=0;return}}if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset];this.startOffset=0;this.endContainer=this.startContainer;this.endOffset=0;return}}3===this.startContainer.nodeType&&0===this.startOffset&&(a=e.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,e.Utils.Dom.getIndexInParent(this.startContainer),!0))&&0<l(a).closest(n.activeEditable.obj).length&&
(this.startContainer=this.endContainer=a,this.startOffset=this.endOffset=a.data.length)}else{if(1===this.startContainer.nodeType)if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType)this.startContainer=this.startContainer.childNodes[this.startOffset],this.startOffset=0;else if(this.startOffset<this.startContainer.childNodes.length&&1===this.startContainer.childNodes[this.startOffset].nodeType){a=!1;for(c=this.startContainer.childNodes[this.startOffset];!1===
a&&c.childNodes&&0<c.childNodes.length;)c=c.childNodes[0],3===c.nodeType&&(a=c);!1!==a&&(this.startContainer=a,this.startOffset=0)}3===this.startContainer.nodeType&&this.startOffset===this.startContainer.data.length&&(a=e.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,e.Utils.Dom.getIndexInParent(this.startContainer)+1,!1))&&(this.startContainer=a,this.startOffset=0);if(3===this.endContainer.nodeType&&0===this.endOffset)if(this.endContainer.previousSibling&&3===this.endContainer.previousSibling.nodeType)this.endContainer=
this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length;else if(this.endContainer.previousSibling&&1===this.endContainer.previousSibling.nodeType&&this.endContainer.parentNode){a=this.endContainer.parentNode;for(c=0;c<a.childNodes.length;++c)if(a.childNodes[c]==this.endContainer){this.endOffset=c;break}this.endContainer=a}1==this.endContainer.nodeType&&0===this.endOffset&&this.endContainer.previousSibling&&(3===this.endContainer.previousSibling.nodeType?(this.endContainer=this.endContainer.previousSibling,
this.endOffset=this.endContainer.data.length):1===this.endContainer.previousSibling.nodeType&&this.endContainer.previousSibling.childNodes&&0<this.endContainer.previousSibling.childNodes.length&&(this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.childNodes.length));if(1==this.endContainer.nodeType)if(0<this.endOffset&&3===this.endContainer.childNodes[this.endOffset-1].nodeType)this.endContainer=this.endContainer.childNodes[this.endOffset-1],this.endOffset=this.endContainer.data.length;
else if(0<this.endOffset&&1===this.endContainer.childNodes[this.endOffset-1].nodeType){a=!1;for(c=this.endContainer.childNodes[this.endOffset-1];!1===a&&c.childNodes&&0<c.childNodes.length;)c=c.childNodes[c.childNodes.length-1],3===c.nodeType&&(a=c);!1!==a&&(this.endContainer=a,this.endOffset=this.endContainer.data.length)}}},clearCaches:function(){this.commonAncestorContainer=void 0},getRangeTree:function(a){"undefined"===typeof a&&(a=this.getCommonAncestorContainer());this.inselection=!1;return this.recursiveGetRangeTree(a)},
recursiveGetRangeTree:function(a){var c=0,b=this,d=[];l(a).contents().each(function(k){var n="none",f=!1,m=!1,l=!1,p=!1,B=!1,G=!1;b.isCollapsed()&&a===b.startContainer&&b.startOffset===k&&(d[c]=new e.Utils.RangeTree,d[c].type="collapsed",d[c].domobj=void 0,b.inselection=!1,l=!0,c++);if(!b.inselection&&!l)switch(this.nodeType){case 3:this===b.startContainer&&(b.inselection=!0,n=0<b.startOffset?"partial":"full",f=b.startOffset,m=this.length);break;case 1:this===b.startContainer&&0===b.startOffset&&
(b.inselection=!0,n="full"),a===b.startContainer&&b.startOffset===k&&(b.inselection=!0,n="full")}if(b.inselection&&!l){"none"==n&&(n="full");switch(this.nodeType){case 3:this===b.endContainer&&(b.inselection=!1,b.endOffset<this.length&&(n="partial"),!1===f&&(f=0),m=b.endOffset);break;case 1:this===b.endContainer&&0===b.endOffset&&(b.inselection=!1)}a===b.endContainer&&b.endOffset<=k&&(b.inselection=!1,n="none")}d[c]=new e.Utils.RangeTree;d[c].domobj=this;d[c].type=n;"partial"==n&&(d[c].startOffset=
f,d[c].endOffset=m);d[c].children=b.recursiveGetRangeTree(this);if(0<d[c].children.length){for(k=0;k<d[c].children.length;++k)switch(d[c].children[k].type){case "none":p=!0;break;case "full":G=!0;break;case "partial":B=!0}B||G&&p?d[c].type="partial":!G||B||p||(d[c].type="full")}c++});this.isCollapsed()&&a===this.startContainer&&this.startOffset==a.childNodes.length&&(d[c]=new e.Utils.RangeTree,d[c].type="collapsed",d[c].domobj=void 0);return d},findMarkup:function(a,c,b){b=b?this.endContainer:this.startContainer;
var e;c=c?c[0]:null;if(b){c=d(b,c);b=0;for(e=c.length;b<e;b++)if(a.apply(c[b]))return c[b];return!1}},findAllMarkupByTagName:function(a,c){var b=c.getRangeTree(),d=[];a=a.toUpperCase();k(b,a,d);return d},getText:function(){return this.isCollapsed()?"":this.recursiveGetText(this.getRangeTree())},recursiveGetText:function(a){if(!a)return"";var c=this,b="";l.each(a,function(){"full"==this.type?b+=l(this.domobj).text():"partial"==this.type&&3===this.domobj.nodeType?b+=l(this.domobj).text().substring(this.startOffset,
this.endOffset):"partial"==this.type&&1===this.domobj.nodeType&&this.children&&(b+=c.recursiveGetText(this.children))});return b}});e.Utils.RangeTree=p.extend({domobj:{},type:null,children:[]});return e.Utils.RangeObject});define("util/functions",[],function(){return{identity:function(l){return l},noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1},complement:function(l){return function(){return!l.apply(this,arguments)}}}});define("util/arrays",["util/functions"],function(l){function b(b,
d){var a,c,g=[];a=0;for(c=b.length;a<c;a++)g.push(d(b[a]));return g}function p(b,d){return b.map(d)}function m(b,d){var a,c,g,k=[];a=0;for(c=b.length;a<c;a++)g=b[a],d(g)&&k.push(g);return k}function f(b,d){var a,c;a=0;for(c=b.length;a<c;a++)if(d===b[a])return a;return-1}function d(b,d){return-1!==f(b,d)}function k(b,d){var a,c;a=0;for(c=b.length;a<c;a++)if(d(b[a]))return!0;return!1}return{filter:m,indexOf:f,reduce:function(b,d,a){var c,g;c=0;for(g=b.length;c<g;c++)d=a(d,b[c]);return d},forEach:function(b,
d){var a,c;a=0;for(c=b.length;a<c;a++)d(b[a],a,b)},some:k,every:function(b,d){return!k(b,l.complement(d))},map:Array.prototype.map?p:b,contains:d,equal:function(b,d,a){var c,g=b.length;if(g!==d.length)return!1;if(a)for(c=0;c<g;c++){if(!a(b[c],d[c]))return!1}else for(c=0;c<g;c++)if(b[c]!==d[c])return!1;return!0},applyNotNull:function(b,d){return null==b?null:d(b)},sortUnique:function(b,d){var a;if(d)for(b.sort(d),a=1;a<b.length;a++)0===d(b[a],b[a-1])&&b.splice(a--,1);else for(b.sort(),a=1;a<b.length;a++)b[a]==
b[a-1]&&b.splice(a--,1);return b},intersect:function(b,k){return m(b,function(a){return d(k,a)})},subtract:function(b,k){return m(b,function(a){return!d(k,a)})},second:function(b){return b[1]},last:function(b){return b.length?b[b.length-1]:null}}});define("util/strings",["jquery"],function(l){var b=/\s+/;return{words:function(l){l=l.split(b);l.length&&""===l[0]&&l.shift();l.length&&""===l[l.length-1]&&l.pop();return l},dashesToCamelCase:function(b){return b.replace(/[\-]([a-z])/gi,function(b,f){return f.toUpperCase()})},
camelCaseToDashes:function(b){return b.replace(/[A-Z]/g,function(b){return"-"+b.toLowerCase()})},splitIncl:function(b,m){for(var f=[],d=0,k;null!=(k=m.exec(b));)d<k.index&&(f.push(b.substring(d,k.index)),d=k.index),d+=k[0].length,f.push(k[0]);d<b.length&&f.push(b.substring(d,b.length));return f},empty:function(b){return""===b||null==b}}});define("PubSub",[],function(){var l={},b={},p=0;return{sub:function(m,f){if("function"!==typeof f)return-1;var d=l[m];d||(d=l[m]=[]);d.push(++p);b[p]={channel:m,
callback:f};return p},unsub:function(m){if(-1===m||!b[m])return!1;var f=b[m]&&l[b[m].channel];delete b[m];for(var d=f.length;d;)if(f[--d]===m)return f.splice(d,1),!0;return!1},pub:function(m,f){var d=m.split("."),k,e=d.length,n="",a=0;for(k=0;k<e;++k){var n=n+((0===k?"":".")+d[k]),c;var g=n;c=f;if(l[g]){c?"object"!==typeof c&&(c={data:c}):c={};c.channel=g;for(var g=l[g].slice(),v=void 0,v=0;v<g.length;++v)b[g[v]].callback(c);c=v}else c=0;a+=c}return a}}});define("util/maps",[],function(){return{isEmpty:function(l){for(var b in l)if(l.hasOwnProperty(b))return!1;
return!0},fillTuples:function(l,b){for(var p=b.length,m;p--;)m=b[p],l[m[0]]=m[1];return l},fillKeys:function(l,b,p){for(var m=b.length;m--;)l[b[m]]=p;return l},keys:function(l){var b=[],p;for(p in l)l.hasOwnProperty(p)&&b.push(p);return b},forEach:function(l,b){for(var p in l)l.hasOwnProperty(p)&&b(l[p],p,l)}}});define("util/html",["jquery","util/dom","util/maps","util/arrays"],function(l,b,p,m){function f(a){return g.test(a)||z.test(a)}function d(a){return 3===a.nodeType&&f(a.data)}function k(a){return C[a.nodeName]}
function e(a){return 3===a.nodeType&&!a.length}var n={A:!0,B:!0,EM:!0,FONT:!0,I:!0,S:!0,SPAN:!0,STRIKE:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0},a="address article aside audio blockquote canvas dd div dl fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr noscript ol output p pre section table tfoot ul video".split(" "),c=["\\u200B","\\u200C","\\u200D","\\uFEFF"],g=RegExp("^[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+$"),
v=RegExp("^[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+"),u=RegExp("[\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]+$"),z=RegExp("["+c.join("")+"]+"),A=RegExp("^["+c.join("")+"]+"),y=RegExp("["+c.join("")+"]+$"),C={};p.fillKeys(C,
a,!0);p.fillKeys(C,m.map(a,function(a){return a.toUpperCase()}),!0);return{BLOCKLEVEL_ELEMENTS:a,VOID_ELEMENTS:"area base br col command embed hr img input keygen link meta param source track wbr".split(" "),TEXT_LEVEL_SEMANTIC_ELEMENTS:"a abbr b bdi bdo cite code del dfn em i ins kbd mark q rp rt ruby s samp small strong sub sup time u var".split(" "),isBlock:k,isIgnorableWhitespace:e,isInlineFormattable:function(a){return n[a.nodeName]},isProppedBlock:function(a){if(!C[a.nodeName])return!1;var c=
!1;a=a.children;var b=a.length,g;for(g=0;g<b;g++)if(!c&&"br"===a[g].nodeName.toLowerCase())c=!0;else if(!e(a[g]))return!1;return c},isEditingHost:function(a){return 1===a.nodeType&&"true"===a.contentEditable},findNodeLeft:function(a,c){for(;a&&!c(a);)a=a.nextSibling;return a},findNodeRight:function(a,c){for(;a&&!c(a);)a=a.previousSibling;return a},allowNestedParagraph:function(a){return a.obj[0]&&b.allowsNesting(a.obj[0],l("<p>")[0])?!0:!1},trimWhitespaceCharacters:function(a){return a.replace(v,
"").replace(u,"").replace(A,"").replace(y,"")},isWSPorZWSPNode:d,isWSPorZWSPText:f,isUnrenderedNode:function(a){return 3===a.nodeType&&0===a.data.length||a===a.parentNode.lastChild&&k(a.parentNode)&&"BR"===a.nodeName?!0:d(a)}}});define("aloha/engine","aloha/core aloha/ecma5shims util/maps util/html util/dom jquery".split(" "),function(l,b,p,m,f,d){function k(a,c){return a.hasAttribute?a.hasAttribute(c):"undefined"!==typeof a.attributes[c]}function e(a,c){var b=a.cloneNode(!1);b.deleteData(0,c);a.deleteData(c,
a.length-c);var g=a.nextSibling,d=a.parentNode;g?d.insertBefore(b,g):d.appendChild(b);return b}function n(a){return null===a||!a||a===Yb}function a(a,c){"string"==typeof c&&(c=[c]);"object"==typeof c&&(c=b(c).map(function(a){return a.toUpperCase()}));return a&&1==a.nodeType&&n(a.namespaceURI)&&("undefined"==typeof c||-1!=b(c).indexOf(a.tagName))}function c(a){return a&&1==a.nodeType&&n(a.namespaceURI)}function g(a,c){return a&&1==a.nodeType&&n(a.namespaceURI)&&c.toUpperCase()===a.nodeName}function v(a,
c){var b;if(b=a)if(b=1==a.nodeType)if(b=n(a.namespaceURI))a:{b=a.nodeName;var g,d;b=b.toUpperCase();g=0;for(d=c.length;g<d;g++)if(c[g].toUpperCase()===b){b=!0;break a}b=!1}return b}function u(a,c){return a&&1==a.nodeType&&n(a.namespaceURI)&&c[a.nodeName]}function z(a){var c,b=0;if(!a||!a.style)return 0;if("undefined"!==typeof a.style.length)return a.style.length;for(c in a.style)a.style[c]&&0!==a.style[c]&&"false"!==a.style[c]&&b++;return b}function A(a){if(!a)return null;var c=[],b;for(b=a.length>>>
0;b--;)c[b]=a[b];return c}function y(a){for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function C(a){return a.hasChildNodes()?a.firstChild:y(a)}function D(a){if(a.previousSibling){for(a=a.previousSibling;a.hasChildNodes();)a=a.lastChild;return a}return a.parentNode&&a.parentNode.nodeType==b.Node.ELEMENT_NODE?a.parentNode:null}function B(a,c){return a&&c&&Boolean(b.compareDocumentPosition(a,c)&b.Node.DOCUMENT_POSITION_CONTAINED_BY)}function G(a,c){return(a||c)&&(a==c||B(a,c))}function J(a,
c){return c&&a&&Boolean(b.compareDocumentPosition(c,a)&b.Node.DOCUMENT_POSITION_CONTAINED_BY)}function q(a,c){return Boolean(b.compareDocumentPosition(a,c)&b.Node.DOCUMENT_POSITION_FOLLOWING)}function F(a){for(var c=[];a.parentNode;)c.unshift(a.parentNode),a=a.parentNode;return c}function s(a){for(var c=[],b=y(a);null!=(a=C(a))&&a!=b;)c.push(a);return c}function r(a){return{"xx-small":1,small:2,medium:3,large:4,"x-large":5,"xx-large":6,"xxx-large":7}[a]}function t(a){return"ltr"==a.dir?"ltr":"rtl"==
a.dir?"rtl":c(a.parentNode)?t(a.parentNode):"ltr"}function x(a){switch(a.nodeType){case b.Node.PROCESSING_INSTRUCTION_NODE:case b.Node.DOCUMENT_TYPE_NODE:return 0;case b.Node.TEXT_NODE:case b.Node.COMMENT_NODE:return a.length;default:return a.childNodes.length}}function L(a,c,g,d){if(a==g){if(c==d)return"equal";if(c<d)return"before";if(c>d)return"after"}var e=b.compareDocumentPosition(g,a);if(e&b.Node.DOCUMENT_POSITION_FOLLOWING){d=L(g,d,a,c);if("before"==d)return"after";if("after"==d)return"before"}if(e&
b.Node.DOCUMENT_POSITION_CONTAINS){for(;g.parentNode!=a;)g=g.parentNode;if(f.getIndexInParent(g)<c)return"after"}return"before"}function I(a){for(;null!=a.parentNode;)a=a.parentNode;return a}function T(a,c){return"after"!==L(a,0,c.startContainer,c.startOffset)||"before"!==L(a,x(a),c.endContainer,c.endOffset)?!1:I(a)==I(c.startContainer)}function N(a,c){"undefined"==typeof c&&(c=function(){return!0});for(var b=a.startContainer,b=b.hasChildNodes()&&a.startOffset<b.childNodes.length?b.childNodes[a.startOffset]:
a.startOffset==x(b)?y(b):C(b),g=a.endContainer,g=g.hasChildNodes()&&a.endOffset<g.childNodes.length?g.childNodes[a.endOffset]:y(g),d=[];q(b,g);)T(b,a)&&c(b)?(d.push(b),b=y(b)):b=C(b);return d}function W(a,c){"undefined"==typeof c&&(c=function(){return!0});for(var b=a.startContainer,b=b.hasChildNodes()&&a.startOffset<b.childNodes.length?b.childNodes[a.startOffset]:a.startOffset==x(b)?y(b):C(b),g=a.endContainer,g=g.hasChildNodes()&&a.endOffset<g.childNodes.length?g.childNodes[a.endOffset]:y(g),d=[];q(b,
g);)T(b,a)&&c(b)&&d.push(b),b=C(b);return d}function Z(a){if("currentcolor"==a.toLowerCase())return null;var c=document.createElement("span");document.body.appendChild(c);c.style.color="black";var g=document.createElement("span");c.appendChild(g);g.style.color=a;a=b.getComputedStyle(g).color;if("rgb(0, 0, 0)"==a&&(c.color="white",a=b.getComputedStyle(g).color,"rgb(0, 0, 0)"!=a))return null;document.body.removeChild(c);return/^rgba\([0-9]+, [0-9]+, [0-9]+, 1\)$/.test(a)?a.replace("rgba","rgb").replace(", 1)",
")"):"transparent"==a?"rgba(0, 0, 0, 0)":a}function V(a){a=a.toLowerCase();if(-1!=b("aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkgrey darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkslategrey darkturquoise darkviolet deeppink deepskyblue dimgray dimgrey dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray green greenyellow grey honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightgrey lightpink lightsalmon lightseagreen lightskyblue lightslategray lightslategrey lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray slategrey snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" ")).indexOf(a))return a;
a=Z(a);var c=/^rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)$/.exec(a);return c?"#"+parseInt(c[1],10).toString(16).replace(/^.$/,"0$&")+parseInt(c[2],10).toString(16).replace(/^.$/,"0$&")+parseInt(c[3],10).toString(16).replace(/^.$/,"0$&"):/^#[abcdef0123456789]+$/i.exec(a)?a:null}function Q(a){a=b(a).trim();if(/^[\-+]?[0-9]+(\.[0-9]+)?([eE][\-+]?[0-9]+)?$/.test(a)){var c;"+"==a[0]?(a=a.slice(1),c="relative-plus"):"-"==a[0]?(a=a.slice(1),c="relative-minus"):c="absolute";a=parseInt(a,10);"relative-plus"==c&&
(a+=3);"relative-minus"==c&&(a=3-a);1>a&&(a=1);7<a&&(a=7);a={1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[a]}return a}function R(a){a=Q(a);if(-1==d.inArray(a,"xx-small x-small small medium large x-large xx-large xxx-large".split(" "))&&!/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc|px)$/.test(a))return null;var c=document.createElement("font");document.body.appendChild(c);"xxx-large"==a?c.size=7:c.style.fontSize=a;a=parseInt(b.getComputedStyle(c).fontSize,10);document.body.removeChild(c);
for(var g=1;7>g;){c=document.createElement("font");c.size=g;document.body.appendChild(c);var e=parseInt(b.getComputedStyle(c).fontSize,10);c.size=1+g;var k=parseInt(b.getComputedStyle(c).fontSize,10);document.body.removeChild(c);if(a<(k+e)/2)return String(g);g++}return"7"}function O(a,c,b,g){var d;0===Bc&&(gb=b);Bc++;try{d=g()}catch(e){throw Bc--,e;}Bc--;return d}function ca(a,c){a=a.toLowerCase();return O(a,"action",c,function(a){return function(){return-1!=d.inArray(a,"copy cut paste selectall stylewithcss usecss".split(" "))||
null!==c}}(a))}function aa(a){var c=new window.GENTICS.Utils.RangeObject;c.startContainer=a.startContainer;c.startOffset=a.startOffset;c.endContainer=a.endContainer;c.endOffset=a.endOffset;c.select()}function ma(a,c,b,g){var d=a.toLowerCase(),e=c,k=b;if(1==arguments.length||4<=arguments.length&&"undefined"==typeof e)e=!1;if(2>=arguments.length||4<=arguments.length&&"undefined"==typeof k)k="";return O(d,"action",g,function(a,c,b){return function(){if(!ca(a))return!1;ba[a].action(b,g);aa(g);return!0}}(d,
e,k))}function da(a,c){a=a.toLowerCase();return O(a,"state",c,function(a){return function(){return ca(a,c)?"undefined"!=typeof jc(a,c)?jc(a,c):ba[a].state(c):!1}}(a))}function qa(a,c){a=a.toLowerCase();return O(a,"value",c,function(){return ba.hasOwnProperty(a)&&ba[a].hasOwnProperty("value")?"fontsize"==a&&void 0!==Rb("fontsize",c)?R(Rb("fontsize",c)):"undefined"!=typeof Rb(a,c)?Rb(a,c):ba[a].value(c):""})}function la(a){return u(a,Da)}function ia(a){return a&&(a.nodeType==b.Node.ELEMENT_NODE&&!Wd[b.getComputedStyle(a).display]||
a.nodeType==b.Node.DOCUMENT_NODE||a.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE)}function ka(a){return a&&!ia(a)}function Aa(a){return a&&a.nodeType==b.Node.ELEMENT_NODE&&("true"==a.contentEditable||a.parentNode&&a.parentNode.nodeType==b.Node.DOCUMENT_NODE&&"on"==a.parentNode.designMode)}function P(a){return a&&!Aa(a)&&(a.nodeType!=b.Node.ELEMENT_NODE||"false"!=a.contentEditable||d(a).hasClass("aloha-table-wrapper"))&&(Aa(a.parentNode)||P(a.parentNode))}function na(a){var c;for(c=0;c<a.childNodes.length;c++)if(P(a.childNodes[c])||
na(a.childNodes[c]))return!0;return!1}function Va(a){if(Aa(a))return a;if(P(a)){for(a=a.parentNode;!Aa(a);)a=a.parentNode;return a}return null}function La(a,c){return Va(a)&&Va(a)==Va(c)}function Fa(a){if(!g(a,"br"))return!1;for(var c=a.parentNode;"inline"==b.getComputedStyle(c).display;)c=c.parentNode;var e=c.style.height,k=c.style.maxHeight,n=c.style.minHeight;c.style.height="auto";c.style.maxHeight="none";d.browser.msie&&8>d.browser.version||(c.style.minHeight="0");var f=document.createTextNode("\u200b"),
m=c.offsetHeight;if(0==m)throw"isCollapsedLineBreak: original height is zero, bug?";a.parentNode.insertBefore(f,a.nextSibling);a=c.offsetHeight;f.parentNode.removeChild(f);c.style.height=e;c.style.maxHeight=k;d.browser.msie&&8>d.browser.version||(c.style.minHeight=n);return m<a-5}function Wa(a){if(!g(a,"br")||g(a.parentNode,"li")&&1==a.parentNode.childNodes.length)return!1;for(var c=a.parentNode;"inline"==b.getComputedStyle(c).display;)c=c.parentNode;var e=c.style.height,k=c.style.maxHeight,n=c.style.minHeight,
f=c.contentEditable;c.style.height="auto";c.style.maxHeight="none";c.style.minHeight="0";d.browser.msie&&7>=d.browser.version&&(c.contentEditable="false");var m=c.offsetHeight;if(0==m)throw"isExtraneousLineBreak: original height is zero, bug?";var v=a.style.display;a.style.display="none";var l=c.offsetHeight;c.style.height=e;c.style.maxHeight=k;c.style.minHeight=n;d.browser.msie&&7>=d.browser.version&&(c.contentEditable=f);a.style.display=v;return m==l}function Na(a){var c=b.Node;if(a&&a.nodeType===
c.TEXT_NODE){var g=a.parentNode;a=a.data;if(0===d.trim(a).length)return!0;if(g&&/^[\t\n\r ]+$/.test(a))if(g.nodeType===c.ELEMENT_NODE){if(-1!==d.inArray(b.getComputedStyle(g).whiteSpace,["normal","nowrap"])||"pre-line"===b.getComputedStyle(g).whiteSpace)return!0}else if(g.nodeType===c.DOCUMENT_FRAGMENT_NODE)return!0}return!1}function db(a){if(!Na(a))return!1;if(""==a.data)return!0;var c=a.parentNode;if(!c||b(F(a)).some(function(a){return a.nodeType==b.Node.ELEMENT_NODE&&"none"==b.getComputedStyle(a).display}))return!0;
for(;!ia(c)&&c.parentNode;)c=c.parentNode;for(var d=a;d!=c;){d=D(d);if(ia(d)||g(d,"br"))return!0;if(d.nodeType==b.Node.TEXT_NODE&&!Na(d)||g(d,"img"))break}d=a;for(a=y(c);d!=a;){d=C(d);if(ia(d)||g(d,"br"))return!0;if(d&&d.nodeType==b.Node.TEXT_NODE&&!Na(d)||g(d,"img"))break}return!1}function ra(a){var c;if(!a||b(F(a).concat(a)).filter(function(a){return a.nodeType==b.Node.ELEMENT_NODE},!0).some(function(a){return"none"==b.getComputedStyle(a).display}))return!1;if(ia(a)||a.nodeType==b.Node.TEXT_NODE&&
!db(a)||g(a,"img")||g(a,"br")&&!Wa(a))return!0;for(c=0;c<a.childNodes.length;c++)if(ra(a.childNodes[c]))return!0;return!1}function ea(a){return a&&!ra(a)}function Ia(a){var c;if(Fa(a)&&!Wa(a))return!0;if(!ka(a)||a.nodeType!=b.Node.ELEMENT_NODE)return!1;var g=!1;for(c=0;c<a.childNodes.length;c++){if(!ea(a.childNodes[c])&&!Ia(a.childNodes[c]))return!1;Ia(a.childNodes[c])&&(g=!0)}return g}function ib(a){var c;if(a&&a.nodeType!==b.Node.TEXT_NODE)c=!1;else{c=0;a=a.data;for(var g=a.length;c<g&&"\u200b"===
a.charAt(c);)c++;c=c===g}return!c}function ya(a){var c;if(c=a)(c=!a.hasChildNodes())||(c=m.isBlock(a)?(c=m.findNodeRight(a.lastChild,ra))&&"br"===c.nodeName.toLowerCase()&&!m.findNodeRight(c.previousSibling,ra):!1,c=c||!m.findNodeRight(a.lastChild,ib)),c=c&&Aa(a.parentNode)&&!a.previousSibling&&!a.nextSibling;return c}function oa(a){var c=a.parentNode,b=f.getIndexInParent(a);c.removeChild(a);return{node:c,offset:b}}function Y(){var a;if(gb)a=gb;else if(l.getSelection().rangeCount)a=l.getSelection().getRangeAt(0);
else return null;if(-1==d.inArray(a.startContainer.nodeType,[b.Node.TEXT_NODE,b.Node.ELEMENT_NODE])||-1==d.inArray(a.endContainer.nodeType,[b.Node.TEXT_NODE,b.Node.ELEMENT_NODE])||!(a.startContainer.ownerDocument&&a.endContainer.ownerDocument&&J(a.startContainer,a.startContainer.ownerDocument)&&J(a.endContainer,a.endContainer.ownerDocument)))throw"Invalid active range; test bug?";return a}function xa(a,c,g,d){-1==g&&(g=c.childNodes.length);var e=a.parentNode,k=f.getIndexInParent(a),n,m=[d];for(n=
0;n<l.getSelection().rangeCount;n++)m.push(l.getSelection().getRangeAt(n));var v=[];b(m).forEach(function(a){v.push([a.startContainer,a.startOffset]);v.push([a.endContainer,a.endOffset])});b(v).forEach(function(a){a[0]==c&&a[1]>g&&a[1]++;a[0]!=e||a[1]!=k&&a[1]!=k+1||(a[0]=c,a[1]+=g-k);a[0]==e&&a[1]>k+1&&a[1]--});c.childNodes.length==g?c.appendChild(a):c.insertBefore(a,c.childNodes[g]);var u=null;if(v[0][1]>v[0][0].childNodes.length&&v[1][1]>v[1][0].childNodes.length)d.setStart(a,0),d.setEnd(a,0);
else{d.setStart(v[0][0],v[0][1]);d.setEnd(v[1][0],v[1][1]);l.getSelection().removeAllRanges();for(n=1;n<m.length;n++)u=l.createRange(),u.setStart(v[2*n][0],v[2*n][1]),u.setEnd(v[2*n+1][0],v[2*n+1][1]),l.getSelection().addRange(u);u&&(d=u)}}function ta(a,c){d.browser.msie&&7<=d.browser.version&&"undefined"!==typeof a.attributes[d.expando]&&d(a).removeAttr(d.expando);var b=a.attributes,g;for(g=0;g<b.length;g++){var e=b[g];if("undefined"===typeof e.specified||e.specified)"function"===typeof c.setAttributeNS?
c.setAttributeNS(e.namespaceURI,e.name,e.value):c.setAttribute(e.name,e.value)}}function Ca(a,c,b){if(g(a,c)||!a.parentNode)return a;c=a.ownerDocument.createElement(c);a.parentNode.insertBefore(c,a);for(ta(a,c);a.childNodes.length;)xa(a.firstChild,c,c.childNodes.length,b);a.parentNode.removeChild(a);b.startContainer===a&&(b.startContainer=c);b.endContainer===a&&(b.endContainer=c);return c}function jb(a){var c=a.previousSibling;if(c){for(;c.hasChildNodes();)c=c.lastChild;for(;ea(c)&&!Wa(c)&&c!=a.parentNode;)c=
D(c);P(c)&&Wa(c)&&c.parentNode.removeChild(c)}}function eb(a){for(var c=a;c.hasChildNodes();)c=c.lastChild;for(;ea(c)&&!Wa(c)&&c!=a;)c=D(c);P(c)&&Wa(c)&&c.parentNode.removeChild(c)}function Ab(a){jb(a);eb(a)}function ja(a,c,b,d){var e;"undefined"==typeof c&&(c=function(){return!1});"undefined"==typeof b&&(b=function(){return null});if(!a.length||!P(a[0]))return null;ka(a[a.length-1])&&!g(a[a.length-1],"br")&&g(a[a.length-1].nextSibling,"br")&&a.push(a[a.length-1].nextSibling);b=P(a[0].previousSibling)&&
c(a[0].previousSibling)?a[0].previousSibling:P(a[a.length-1].nextSibling)&&c(a[a.length-1].nextSibling)?a[a.length-1].nextSibling:b();if(!b)return null;if(!b.parentNode){a[0].parentNode.insertBefore(b,a[0]);e=d.startContainer;var k=d.startOffset,n=d.endContainer,m=d.endOffset,v=f.getIndexInParent(b);k>=v&&e==b.parentNode&&d.setStart(e,k+1);m>=v&&n==b.parentNode&&d.setEnd(n,m+1);gb&&gb!==d&&(e=gb.startContainer,k=gb.startOffset,n=gb.endContainer,m=gb.endOffset,e==b.parentNode&&k>=v&&gb.setStart(e,
k+1),n==b.parentNode&&m>=v&&gb.setEnd(n,m+1))}k=a[0].parentNode;if(q(b,a[0]))for(!ka(b)&&ka(b.lastChild)&&ka(a[0])&&!g(b.lastChild,"BR")&&b.appendChild(b.ownerDocument.createElement("br")),e=0;e<a.length;e++)xa(a[e],b,-1,d);else for(!ka(b)&&ka(b.firstChild)&&ka(a[a.length-1])&&!g(a[a.length-1],"BR")&&b.insertBefore(b.ownerDocument.createElement("br"),b.firstChild),e=a.length-1;0<=e;e--)xa(a[e],b,0,d);P(k)&&!k.hasChildNodes()&&k.parentNode.removeChild(k);if(P(b.nextSibling)&&c(b.nextSibling)){for(!ka(b)&&
ka(b.lastChild)&&ka(b.nextSibling.firstChild)&&!g(b.lastChild,"BR")&&b.appendChild(b.ownerDocument.createElement("br"));b.nextSibling.hasChildNodes();)xa(b.nextSibling.firstChild,b,-1,d);b.parentNode.removeChild(b.nextSibling)}Ab(b);return b}function Pa(a,e){if((Ic[e]||v(e,"colgroup table tbody tfoot thead tr".split(" ")))&&"object"==typeof a&&a.nodeType==b.Node.TEXT_NODE&&!/^[ \t\n\f\r]*$/.test(a.data)||(vd[e]||v(e,["script","style","plaintext","xmp"]))&&("object"!=typeof a||a.nodeType!=b.Node.TEXT_NODE)||
"object"==typeof a&&(a.nodeType==b.Node.DOCUMENT_NODE||a.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE||a.nodeType==b.Node.DOCUMENT_TYPE_NODE))return!1;c(a)&&(a=a.tagName.toLowerCase());if("string"!=typeof a)return!0;if(c(e)){for(var k=e;k;){if("a"==a&&g(k,"a")||Da[a.toUpperCase()]&&u(k,qc)||/^h[1-6]$/.test(a)&&c(k)&&/^H[1-6]$/.test(k.tagName))return!1;k=k.parentNode}e=e.tagName.toLowerCase()}if("object"==typeof e&&(e.nodeType==b.Node.ELEMENT_NODE||e.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE))return!0;if("string"!=
typeof e)return!1;switch(e){case "colgroup":return"col"==a;case "table":return-1!=d.inArray(a,"caption col colgroup tbody td tfoot th thead tr".split(" "));case "tbody":case "thead":case "tfoot":return-1!=d.inArray(a,["td","th","tr"]);case "tr":return-1!=d.inArray(a,["td","th"]);case "dl":return-1!=d.inArray(a,["dt","dd"]);case "dir":case "ol":case "ul":return-1!=d.inArray(a,["dir","li","ol","ul"]);case "hgroup":return/^h[1-6]$/.test(a)}return-1!=d.inArray(a,"body caption col colgroup frame frameset head html tbody td tfoot th thead tr".split(" "))||
-1!=d.inArray(a,["dd","dt"])&&"dl"!=e||"li"==a&&"ol"!=e&&"ul"!=e?!1:(k=yd[e.toUpperCase()])&&k[a.toUpperCase()]?!1:!0}function Jb(a,c){return c.collapsed?!1:T(a,c)||a==c.startContainer&&a.nodeType==b.Node.TEXT_NODE&&x(a)!=c.startOffset||a==c.endContainer&&a.nodeType==b.Node.TEXT_NODE&&0!=c.endOffset||a.hasChildNodes()&&b(a.childNodes).every(function(a){return Jb(a,c)})&&!(J(c.startContainer,a)&&c.startContainer.nodeType==b.Node.TEXT_NODE&&0!=c.startOffset||J(c.endContainer,a)&&c.endContainer.nodeType==
b.Node.TEXT_NODE&&c.endOffset!=x(c.endContainer))?!0:!1}function Sa(a,c){"undefined"==typeof c&&(c=function(){return!0});for(var b=a.startContainer;Jb(b.parentNode,a);)b=b.parentNode;for(var g=y(a.endContainer),d=[];q(b,g);)Jb(b,a)&&c(b)&&d.push(b),b=C(b);return d}function kb(a){if(!c(a))return!1;if(-1!=d.inArray(a.tagName,"B EM I S SPAN STRIKE STRONG SUB SUP U".split(" "))&&(0==a.attributes.length||1==a.attributes.length&&k(a,"style")))return!0;if("FONT"==a.tagName||"A"==a.tagName){var b=a.attributes.length;
k(a,"style")&&b--;"FONT"==a.tagName&&(k(a,"color")&&b--,k(a,"face")&&b--,k(a,"size")&&b--);"A"==a.tagName&&k(a,"href")&&b--;if(0==b)return!0}return!1}function qb(a){return c(a)&&-1!=d.inArray(a.tagName,"A B EM FONT I S SPAN STRIKE STRONG SUB SUP U".split(" "))?0==a.attributes.length?!0:1<a.attributes.length?!1:k(a,"style")&&0==z(a)||"A"==a.tagName&&k(a,"href")||"FONT"==a.tagName&&(k(a,"color")||k(a,"face")||k(a,"size"))||("B"==a.tagName||"STRONG"==a.tagName)&&k(a,"style")&&1==z(a)&&""!=a.style.fontWeight||
("I"==a.tagName||"EM"==a.tagName)&&k(a,"style")&&1==z(a)&&""!=a.style.fontStyle||("A"==a.tagName||"FONT"==a.tagName||"SPAN"==a.tagName)&&k(a,"style")&&1==z(a)&&""==a.style.textDecoration||-1!=d.inArray(a.tagName,"A FONT S SPAN STRIKE U".split(" "))&&k(a,"style")&&1==z(a)&&("line-through"==a.style.textDecoration||"underline"==a.style.textDecoration||"overline"==a.style.textDecoration||"none"==a.style.textDecoration)?!0:!1:!1}function Oa(a,c,b){return null===c&&null===b||"string"==typeof c&&"string"==
typeof b&&c==b&&!ba[a].hasOwnProperty("equivalentValues")||"string"==typeof c&&"string"==typeof b&&ba[a].hasOwnProperty("equivalentValues")&&ba[a].equivalentValues(c,b)?!0:!1}function Za(a,c,g){if(Oa(a,c,g))return!0;if("fontsize"!=a||"string"!=typeof c||"string"!=typeof g)return!1;var d=Za;if(void 0===d.sizeMap){d.sizeMap={};var e=document.createElement("font");document.body.appendChild(e);b("xx-small small medium large x-large xx-large xxx-large".split(" ")).forEach(function(a){e.size=r(a);d.sizeMap[a]=
b.getComputedStyle(e).fontSize});document.body.removeChild(e)}return c===d.sizeMap[g]||g===d.sizeMap[c]}function Ga(a,d){if(a.nodeType!=b.Node.ELEMENT_NODE&&(!a.parentNode||a.parentNode.nodeType!=b.Node.ELEMENT_NODE))return null;if(a.nodeType!=b.Node.ELEMENT_NODE)return Ga(a.parentNode,d);if("createlink"==d||"unlink"==d){for(;a&&(!c(a)||"A"!=a.tagName||!k(a,"href"));)a=a.parentNode;return a?a.getAttribute("href"):null}if("backcolor"==d||"hilitecolor"==d){for(;("rgba(0, 0, 0, 0)"==b.getComputedStyle(a).backgroundColor||
""===b.getComputedStyle(a).backgroundColor||"transparent"==b.getComputedStyle(a).backgroundColor)&&a.parentNode&&a.parentNode.nodeType==b.Node.ELEMENT_NODE;)a=a.parentNode;return"rgba(0, 0, 0, 0)"==b.getComputedStyle(a).backgroundColor||""===b.getComputedStyle(a).backgroundColor||"transparent"==b.getComputedStyle(a).backgroundColor?"rgb(255, 255, 255)":b.getComputedStyle(a).backgroundColor}if("subscript"==d||"superscript"==d){for(var e=!1,n=!1;ka(a);)b.getComputedStyle(a),g(a,"sub")?e=!0:g(a,"sup")&&
(n=!0),a=a.parentNode;return e&&n?"mixed":e?"subscript":n?"superscript":null}if("strikethrough"==d){do{if(-1!=b.getComputedStyle(a).textDecoration.indexOf("line-through"))return"line-through";a=a.parentNode}while(a&&a.nodeType==b.Node.ELEMENT_NODE);return null}if("underline"==d){do{if(-1!=b.getComputedStyle(a).textDecoration.indexOf("underline"))return"underline";a=a.parentNode}while(a&&a.nodeType==b.Node.ELEMENT_NODE);return null}if(!ba[d].hasOwnProperty("relevantCssProperty"))throw"Bug: no relevantCssProperty for "+
d+" in getEffectiveCommandValue";return b.getComputedStyle(a)[ba[d].relevantCssProperty].toString()}function $a(a,d){if(("backcolor"==d||"hilitecolor"==d)&&"inline"!=b.getComputedStyle(a).display)return null;if("createlink"==d||"unlink"==d)return c(a)&&"A"==a.tagName&&k(a,"href")?a.getAttribute("href"):null;if("subscript"==d||"superscript"==d)return g(a,"sup")?"superscript":g(a,"sub")?"subscript":null;if("strikethrough"==d&&""!=a.style.textDecoration)return-1!=a.style.textDecoration.indexOf("line-through")?
"line-through":null;if("strikethrough"==d&&v(a,["S","STRIKE"]))return"line-through";if("underline"==d&&""!=a.style.textDecoration)return-1!=a.style.textDecoration.indexOf("underline")?"underline":null;if("underline"==d&&g(a,"U"))return"underline";var e=ba[d].relevantCssProperty;if(null===e)return null;if(""!=a.style[e])return a.style[e];if(n(a.namespaceURI)&&"FONT"==a.tagName){if("color"==e&&k(a,"color"))return a.color;if("fontFamily"==e&&k(a,"face"))return a.face;if("fontSize"==e&&k(a,"size"))return e=
parseInt(a.size,10),1>e&&(e=1),7<e&&(e=7),{1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[e]}return"fontWeight"!=e||"B"!=a.tagName&&"STRONG"!=a.tagName?"fontStyle"!=e||"I"!=a.tagName&&"EM"!=a.tagName?null:"italic":"bold"}function Xa(a,c,b,g){for(var d=a;kb(d)&&1==d.childNodes.length&&kb(d.firstChild)&&(!qb(d)||!Oa(c,$a(d,c),b));)d=d.firstChild;if(d!=a&&qb(d)&&Oa(c,$a(d,c),b)&&Za(c,Ga(d,c),b)){for(;d.hasChildNodes();)xa(d.firstChild,d.parentNode,f.getIndexInParent(d),
g);a.parentNode.insertBefore(d,a.nextSibling);xa(a,d,-1,g)}}function lb(a){var c=[];a=d.makeArray(a);var b,g,e,k,n,f;for(b=0;b<a.length;b++)for(e=a[b],g=0;g<re.length;g++){k=re[g];n=e;1!=n.nodeType&&(n=n.parentNode);for(f=null;n&&1==n.nodeType&&null===(f=$a(n,k));)n=n.parentNode;c.push([e,k,f])}return c}function Eb(a,c,b){if(!P(a)||null===$a(a,c))return[];if(qb(a)){c=Array.prototype.slice.call(A(a.childNodes));var d;for(d=0;d<c.length;d++)xa(c[d],a.parentNode,f.getIndexInParent(a),b);a.parentNode.removeChild(a);
return c}"strikethrough"==c&&-1!=a.style.textDecoration.indexOf("line-through")&&(a.style.textDecoration="line-through"==a.style.textDecoration?"":a.style.textDecoration.replace("line-through",""),""==a.getAttribute("style")&&a.removeAttribute("style"));"underline"==c&&-1!=a.style.textDecoration.indexOf("underline")&&(a.style.textDecoration="underline"==a.style.textDecoration?"":a.style.textDecoration.replace("underline",""),""==a.getAttribute("style")&&a.removeAttribute("style"));null!==ba[c].relevantCssProperty&&
(a.style[ba[c].relevantCssProperty]="",""==a.getAttribute("style")&&a.removeAttribute("style"));n(a.namespaceURI)&&"FONT"==a.tagName&&("forecolor"==c&&a.removeAttribute("color"),"fontname"==c&&a.removeAttribute("face"),"fontsize"==c&&a.removeAttribute("size"));!g(a,"A")||"createlink"!=c&&"unlink"!=c||a.removeAttribute("href");return null===$a(a,c)?[]:[Ca(a,"span",b)]}function Kb(a,c,e,k){var n=[],m,v;if(a.parentNode&&null!==e&&(Pa(a,"span")&&(Xa(a.previousSibling,c,e,k),Xa(a.nextSibling,c,e,k),ja([a],
function(a){return qb(a)&&Oa(c,$a(a,c),e)&&Za(c,Ga(a,c),e)},function(){return null},k)),!Za(c,Ga(a,c),e)))if(!Pa(a,"span")){for(m=0;m<a.childNodes.length;m++){if(a.childNodes[m].nodeType==b.Node.ELEMENT_NODE&&(v=$a(a.childNodes[m],c),null!==v&&!Oa(c,e,v)))continue;n.push(a.childNodes[m])}for(m=0;m<n.length;m++)Kb(n[m],c,e,k)}else if(!Za(c,Ga(a,c),e)){n=null;wb||("bold"!=c||"bold"!=e&&"700"!=e||(n=a.ownerDocument.createElement("b")),"italic"==c&&"italic"==e&&(n=a.ownerDocument.createElement("i")),
"strikethrough"==c&&"line-through"==e&&(n=a.ownerDocument.createElement("s")),"underline"==c&&"underline"==e&&(n=a.ownerDocument.createElement("u")),"forecolor"==c&&V(e)&&(n=a.ownerDocument.createElement("span"),d(n).css("color",V(e))),"fontname"==c&&(n=a.ownerDocument.createElement("font"),n.face=e));if("createlink"==c||"unlink"==c)for(n=a.ownerDocument.createElement("a"),n.setAttribute("href",e),m=a.parentNode;m;)g(m,"A")&&(m=Ca(m,"span",k)),m=m.parentNode;"fontsize"!=c||-1==d.inArray(e,"xx-small small medium large x-large xx-large xxx-large".split(" "))||
wb&&"xxx-large"!=e||(n=a.ownerDocument.createElement("font"),n.size=r(e));"subscript"!=c&&"superscript"!=c||"subscript"!=e||(n=a.ownerDocument.createElement("sub"));"subscript"!=c&&"superscript"!=c||"superscript"!=e||(n=a.ownerDocument.createElement("sup"));n||(n=a.ownerDocument.createElement("span"));a.parentNode.insertBefore(n,a);m=ba[c].relevantCssProperty;null===m||Za(c,Ga(n,c),e)||(n.style[m]=e);"strikethrough"==c&&"line-through"==e&&"line-through"!=Ga(n,"strikethrough")&&(n.style.textDecoration=
"line-through");"underline"==c&&"underline"==e&&"underline"!=Ga(n,"underline")&&(n.style.textDecoration="underline");xa(a,n,n.childNodes.length,k);if(a.nodeType==b.Node.ELEMENT_NODE&&!Oa(c,Ga(a,c),e)){xa(a,n.parentNode,f.getIndexInParent(n),k);n.parentNode.removeChild(n);n=[];for(m=0;m<a.childNodes.length;m++){if(a.childNodes[m].nodeType==b.Node.ELEMENT_NODE&&(v=$a(a.childNodes[m],c),null!==v&&!Oa(c,e,v)))continue;n.push(a.childNodes[m])}for(m=0;m<n.length;m++)Kb(n[m],c,e,k)}}}function Fb(a,c,g,d){if(a.parentNode&&
a.parentNode.nodeType==b.Node.ELEMENT_NODE&&!Za(c,Ga(a,c),g)){for(var e=a.parentNode,k=[];P(e)&&e.nodeType==b.Node.ELEMENT_NODE&&!Za(c,Ga(e,c),g);)k.push(e),e=e.parentNode;if(k.length){var n=$a(k[k.length-1],c);if(null!==n||n==g)if(null===g||Za(c,Ga(k[k.length-1].parentNode,c),g))for(;k.length;)for(e=k.pop(),null!==$a(e,c)&&(n=$a(e,c)),g=Array.prototype.slice.call(A(e.childNodes)),null!==$a(e,c)&&Eb(e,c,d),e=0;e<g.length;e++){var f=g[e];f!=a&&(f.nodeType!=b.Node.ELEMENT_NODE||null===$a(f,c)||Oa(c,
n,$a(f,c)))&&f!=k[k.length-1]&&Kb(f,c,n,d)}}}}function bb(a,c){b(a).forEach(function(a){var g=a[0],d=a[1];a=a[2];var e=g;e&&e.nodeType==b.Node.ELEMENT_NODE||(e=e.parentNode);for(;e&&e.nodeType==b.Node.ELEMENT_NODE&&null===$a(e,d);)e=e.parentNode;null===a&&e&&e.nodeType==b.Node.ELEMENT_NODE?Fb(g,d,null,c):(e&&e.nodeType==b.Node.ELEMENT_NODE&&!Oa(d,$a(e,d),a)||(!e||e.nodeType!=b.Node.ELEMENT_NODE)&&null!==a)&&Kb(g,d,a,c)})}function Qa(a,c,g){g=g||Y();if(b(Sa(g)).filter(function(a){return a.nodeType==
b.Node.TEXT_NODE},!0).some(P)){if(P(g.startContainer)&&g.startContainer.nodeType==b.Node.TEXT_NODE&&0!=g.startOffset&&g.startOffset!=x(g.startContainer)){var d=e(g.startContainer,g.startOffset),k=l.createRange();if(g.startContainer==g.endContainer){var n=g.endOffset-g.startOffset;k.setEnd(d,n);g.setEnd(d,n)}k.setStart(d,0);l.getSelection().removeAllRanges();l.getSelection().addRange(k);g.setStart(d,0)}P(g.endContainer)&&g.endContainer.nodeType==b.Node.TEXT_NODE&&0!=g.endOffset&&g.endOffset!=x(g.endContainer)&&
(d=g,k=[d.startContainer,d.startOffset],n=[d.endContainer,d.endOffset],e(d.endContainer,d.endOffset),d.setStart(k[0],k[1]),d.setEnd(n[0],n[1]),l.getSelection().removeAllRanges(),l.getSelection().addRange(d));b(Sa(Y(),function(a){return P(a)&&a.nodeType==b.Node.ELEMENT_NODE})).forEach(function(c){Eb(c,a,g)});b(Sa(g,P)).forEach(function(b){Fb(b,a,c,g);Kb(b,a,c,g)})}else ba[a].hasOwnProperty("inlineCommandActivatedValues")&&kc(a,-1!=b(ba[a].inlineCommandActivatedValues).indexOf(c),g),"subscript"==a&&
ed("superscript",g),"superscript"==a&&ed("subscript",g),null===c?td(a,g):ba[a].hasOwnProperty("value")&&sd(a,c,g)}function hc(a,c){var g;if(a.nodeType===b.Node.TEXT_NODE&&c<a.length)for(g=c;g<a.length;g++)if("\t"!==a.data.charAt(g)&&"\r"!==a.data.charAt(g)&&"\n"!==a.data.charAt(g)||160===a.data.charCodeAt(g))return!1;if(a.nextSibling&&a.nextSibling.className&&0<=a.nextSibling.className.indexOf("aloha-table-wrapper"))return a.nextSibling;if(a.parentNode&&a.parentNode.nextSibling&&a.parentNode.nextSibling.className&&
0<=a.parentNode.nextSibling.className.indexOf("aloha-table-wrapper"))return a.parentNode.nextSibling;if(a.parentNode&&a.parentNode.nextSibling&&Na(a.parentNode.nextSibling)&&a.parentNode.nextSibling.nextSibling&&a.parentNode.nextSibling.nextSibling.className&&0<=a.parentNode.nextSibling.nextSibling.className.indexOf("aloha-table-wrapper"))return a.parentNode.nextSibling.nextSibling}function Xb(a,c){var g;if(a.nodeType===b.Node.TEXT_NODE&&0<c)for(g=c-1;0<=g;g--)if("\t"!==a.data.charAt(g)&&"\r"!==a.data.charAt(g)&&
"\n"!==a.data.charAt(g)||160===a.data.charCodeAt(g))return!1;return a.previousSibling&&a.previousSibling.className&&0<=a.previousSibling.className.indexOf("aloha-table-wrapper")?a.previousSibling:a.parentNode&&a.parentNode.previousSibling&&a.parentNode.previousSibling.className&&0<=a.parentNode.previousSibling.className.indexOf("aloha-table-wrapper")?a.parentNode.previousSibling:a.parentNode&&a.parentNode.previousSibling&&Na(a.parentNode.previousSibling)&&a.parentNode.previousSibling.previousSibling&&
a.parentNode.previousSibling.previousSibling.className&&0<=a.parentNode.previousSibling.previousSibling.className.indexOf("aloha-table-wrapper")?a.parentNode.previousSibling.previousSibling:!1}function ha(a,c){return!a.parentNode&&0==c||0<=c-1&&c-1<a.childNodes.length&&ra(a.childNodes[c-1])&&(ia(a.childNodes[c-1])||g(a.childNodes[c-1],"br"))}function Ea(a,c){return!a.parentNode&&c==x(a)||c<a.childNodes.length&&ra(a.childNodes[c])&&ia(a.childNodes[c])}function Ka(a,c){return ha(a,c)||Ea(a,c)}function ob(a){for(var c=
0;!Ka(a,c);){if(0<=c-1&&c-1<a.childNodes.length&&ra(a.childNodes[c-1]))return!1;0!=c&&a.hasChildNodes()?(a=a.childNodes[c-1],c=x(a)):(c=f.getIndexInParent(a),a=a.parentNode)}return!0}function sb(a){for(var c=x(a);!Ka(a,c);){if(c<a.childNodes.length&&ra(a.childNodes[c]))return!1;c!=x(a)&&a.hasChildNodes()?(a=a.childNodes[c],c=0):(c=1+f.getIndexInParent(a),a=a.parentNode)}return!0}function pa(a,c){var b,e=a[0].parentNode;if(P(e)&&e.parentNode){-1!=d.inArray(e.firstChild,a)&&jb(e);b=-1!=d.inArray(e.firstChild,
a);var k=-1!=d.inArray(e.lastChild,a),n=b&&ob(e),m=k&&sb(e);if(!b&&k){for(b=a.length-1;0<=b;b--)xa(a[b],e.parentNode,1+f.getIndexInParent(e),c);m&&!sb(a[a.length-1])&&a[a.length-1].parentNode.insertBefore(document.createElement("br"),a[a.length-1].nextSibling);eb(e)}else{if(!b)for(b=e.cloneNode(!1),e.removeAttribute("id"),e.parentNode.insertBefore(b,e);a[0].previousSibling;)xa(e.firstChild,b,b.childNodes.length,c);for(b=0;b<a.length;b++)xa(a[b],e.parentNode,f.getIndexInParent(e),c);n&&!ob(a[0])&&
a[0].parentNode.insertBefore(document.createElement("br"),a[0]);ka(a[a.length-1])&&!g(a[a.length-1],"br")&&g(e.firstChild,"br")&&!ka(e)&&e.removeChild(e.firstChild);e.hasChildNodes()?jb(e):(e.parentNode===c.startContainer&&e.parentNode===c.endContainer&&c.startContainer===c.endContainer&&c.startOffset===c.endOffset&&e.parentNode.childNodes.length===c.startOffset&&(c.startOffset=e.parentNode.childNodes.length-1,c.endOffset=c.startOffset),e.parentNode.removeChild(e),m&&!sb(a[a.length-1])&&a[a.length-
1].parentNode.insertBefore(document.createElement("br"),a[a.length-1].nextSibling));!a[a.length-1].nextSibling&&a[a.length-1].parentNode&&eb(a[a.length-1].parentNode)}}}function Bb(a){return v(a,"address div h1 h2 h3 h4 h5 h6 listing p pre xmp".split(" "))}function rb(a){return Bb(a)||v(a,["li","dt","dd"])}function Ra(){return document.createElement("br")}function ab(a){a&&(Aa(a)||g(a.lastChild,"br")||b(a.childNodes).some(ra)||(d.browser.msie?d.browser.msie&&7>=d.browser.version&&v(a,"p h1 h2 h3 h4 h5 h6 pre blockquote".split(" "))&&
(a.firstChild||a.appendChild(document.createTextNode("\u200b"))):a.appendChild(Ra())))}function cb(c,e){var k;if(P(c))if(b(F(c)).every(function(a){return!La(c,a)||!Pa(c,a)})&&!a(c,Cc))if(v(c,["dd","dt"]))ja([c],function(a){return g(a,"dl")&&!a.attributes.length},function(){return document.createElement("dl")},e);else{if(la(c)){c=Ca(c,Cc,e);ab(c);cb(c,e);var n=s(c);for(k=0;k<n.length;k++)cb(n[k],e)}}else{for(var n=lb([c]),m;!Pa(c,c.parentNode);){for(k=c.parentNode.childNodes.length-1;0<=k;--k)3==c.parentNode.childNodes[k].nodeType&&
0==c.parentNode.childNodes[k].data.length&&(c.parentNode.removeChild(c.parentNode.childNodes[k]),e.startContainer==c.parentNode&&e.startOffset>k&&e.startOffset--,e.endContainer==c.parentNode&&e.endOffset>k&&e.endOffset--);if(1==c.parentNode.childNodes.length){k=e.startOffset;m=e.endOffset;e.startContainer===c.parentNode&&e.startOffset>f.getIndexInParent(c)&&(k=e.startOffset+(d(c).contents().length-1));e.endContainer===c.parentNode&&e.endOffset>f.getIndexInParent(c)&&(m=e.endOffset+(d(c).contents().length-
1));d(c).contents().unwrap();e.startOffset=k;e.endOffset=m;break}else if(k=c.parentNode,pa([c],e),k===c.parentNode){k=e.startOffset;m=e.endOffset;e.startContainer===c.parentNode&&e.startOffset>f.getIndexInParent(c)&&(k=e.startOffset+(d(c).contents().length-1));e.endContainer===c.parentNode&&e.endOffset>f.getIndexInParent(c)&&(m=e.endOffset+(d(c).contents().length-1));d(c).contents().unwrap();e.startOffset=k;e.endOffset=m;break}}bb(n,e)}}function Gb(a,c){function d(a){return v(a,["OL","UL"])}if(g(a,
"LI")&&P(a)&&P(a.parentNode))for(var e=null;b(a.childNodes).some(d);){var k=a.lastChild;v(k,["OL","UL"])||!e&&k.nodeType==b.Node.TEXT_NODE&&/^[ \t\n\f\r]*$/.test(k.data)?(e=null,xa(k,a.parentNode,1+f.getIndexInParent(a),c)):(e||(e=a.ownerDocument.createElement("li"),a.parentNode.insertBefore(e,a.nextSibling)),xa(k,e,0,c))}}function bc(a,c){v(a,["OL","UL"])&&P(a)&&d(a).children("ol,ul").each(function(a,b){g(b.previousSibling,"LI")&&xa(b,b.previousSibling,b.previousSibling.childNodes.length,c)})}function Ja(a){var c=
a.startContainer,d=a.startOffset,e=a.endContainer;a=a.endOffset;var k=b(F(c).concat(c)).filter(function(a){return g(a,"li")}).slice(-1);k.length&&(d=f.getIndexInParent(k[0]),c=k[0].parentNode);if(!ha(c,d)){do 0==d?(d=f.getIndexInParent(c),c=c.parentNode):d--;while(!Ka(c,d))}for(;0==d&&c.parentNode;)d=f.getIndexInParent(c),c=c.parentNode;k=b(F(e).concat(e)).filter(function(a){return g(a,"li")}).slice(-1);k.length&&(a=1+f.getIndexInParent(k[0]),e=k[0].parentNode);if(!Ea(e,a)){do a==x(e)?(a=1+f.getIndexInParent(e),
e=e.parentNode):a++;while(!Ka(e,a))}for(;a==x(e)&&e.parentNode;)a=1+f.getIndexInParent(e),e=e.parentNode;k=l.createRange();k.setStart(c,d);k.setEnd(e,a);return k}function tb(){var a=Ja(Y()),c=N(a,function(a){return P(a)&&(v(a,["ol","ul"])||v(a.parentNode,["ol","ul"])||Pa(a,"li"))});if(!c.length)return"none";if(b(c).every(function(a){return g(a,"ol")||g(a.parentNode,"ol")||g(a.parentNode,"li")&&g(a.parentNode.parentNode,"ol")})&&!b(c).some(function(a){return g(a,"ul")||a.querySelector&&a.querySelector("ul")}))return"ol";
if(b(c).every(function(a){return g(a,"ul")||g(a.parentNode,"ul")||g(a.parentNode,"li")&&g(a.parentNode.parentNode,"ul")})&&!b(c).some(function(a){return g(a,"ol")||a.querySelector&&a.querySelector("ol")}))return"ul";a=b(c).some(function(a){return g(a,"ol")||g(a.parentNode,"ol")||a.querySelector&&a.querySelector("ol")||g(a.parentNode,"li")&&g(a.parentNode.parentNode,"ol")});c=b(c).some(function(a){return g(a,"ul")||g(a.parentNode,"ul")||a.querySelector&&a.querySelector("ul")||g(a.parentNode,"li")&&
g(a.parentNode.parentNode,"ul")});return a&&c?"mixed":a?"mixed ol":c?"mixed ul":"none"}function Ta(a){for(;a&&a.nodeType!=b.Node.ELEMENT_NODE||a.nodeType==b.Node.ELEMENT_NODE&&-1!=d.inArray(b.getComputedStyle(a).display,["inline","none"]);)a=a.parentNode;if(!a||a.nodeType!=b.Node.ELEMENT_NODE)return"left";var c=b.getComputedStyle(a).textAlign.replace(/^-(moz|webkit)-/,"").replace(/^auto$/,"start");return"start"==c?"ltr"==t(a)?"left":"right":"end"==c?"ltr"==t(a)?"right":"left":-1!=d.inArray(c,["center",
"justify","left","right"])?c:"left"}function fb(a){var c=[];void 0!==Rb("createlink",a)&&c.push(["createlink",Rb("createlink",a)]);b("bold italic strikethrough subscript superscript underline".split(" ")).forEach(function(b){void 0!==jc(b,a)&&c.push([b,jc(b,a)])});b(["fontname","fontsize","forecolor","hilitecolor"]).forEach(function(b){void 0!==Rb(b,a)&&c.push([b,Rb(b,a)])});return c}function xb(a){var c=[],g=b(Sa(a)).filter(function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE})[0];if(!g)return c;
c.push(["createlink",ba.createlink.value(a)]);b("bold italic strikethrough subscript superscript underline".split(" ")).forEach(function(a){-1!=b(ba[a].inlineCommandActivatedValues).indexOf(Ga(g,a))?c.push([a,!0]):c.push([a,!1])});b(["fontname","fontsize","forecolor","hilitecolor"]).forEach(function(b){c.push([b,ba[b].value(a)])});c.push(["fontsize",Ga(g,"fontsize")]);return c}function nb(a,c){function g(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE}var d,e,k,n=b(Sa(c)).filter(function(a){return P(a)&&
a.nodeType==b.Node.TEXT_NODE})[0];if(n)for(d=0;d<a.length;d++){e=a[d][0];k=a[d][1];if("boolean"==typeof k&&da(e,c)!=k)ma(e,!1,k,c);else if("string"!=typeof k||"fontsize"==e||Oa(e,qa(e,c),k))if("string"==typeof k&&"fontsize"==e&&(void 0!==Rb("fontsize",c)&&Rb("fontsize",c)!==k||void 0===Rb("fontsize",c)&&!Za(e,Ga(n,"fontsize"),k)))ma("fontsize",!1,k,c);else continue;else ma(e,!1,k,c);n=b(Sa(c)).filter(g)[0]||n}else for(d=0;d<a.length;d++)e=a[d][0],k=a[d][1],"boolean"==typeof k&&kc(e,k,c),"string"==
typeof k&&sd(e,k,c)}function yc(a,c,b){if(0==a)return"";if(1==a&&!c&&!b)return" ";if(1==a)return"\u00a0";var g="",d;for(d=c?"\u00a0 ":" \u00a0";3<a;)g+=d,a-=2;return 3==a?g+(c||b?c&&!b?"\u00a0\u00a0 ":!c&&b?" \u00a0\u00a0":c&&b?"\u00a0 \u00a0":"impossible":" \u00a0 "):g+(c||b?c&&!b?"\u00a0 ":!c&&b?" \u00a0":c&&b?"\u00a0\u00a0":"impossible":"\u00a0 ")}function ub(a,c){if(P(a)||Aa(a)){for(var g=a,e=c;;)if(0<=e-1&&La(g,g.childNodes[e-1]))g=g.childNodes[e-1],e=x(g);else if(0==e&&!ob(g)&&La(g,g.parentNode))e=
f.getIndexInParent(g),g=g.parentNode;else if(g.nodeType==b.Node.TEXT_NODE&&-1==d.inArray(b.getComputedStyle(g.parentNode).whiteSpace,["pre","pre-wrap"])&&0!=e&&/[ \xa0]/.test(g.data[e-1]))e--;else break;for(var k=g,n=e,m=0,v=!1;;)if(n<k.childNodes.length&&La(k,k.childNodes[n]))k=k.childNodes[n],n=0;else if(n==x(k)&&!sb(k)&&La(k,k.parentNode))n=1+f.getIndexInParent(k),k=k.parentNode;else if(k.nodeType==b.Node.TEXT_NODE&&-1==d.inArray(b.getComputedStyle(k.parentNode).whiteSpace,["pre","pre-wrap"])&&
n!=x(k)&&/[ \xa0]/.test(k.data[n]))v&&" "==k.data[n]?k.deleteData(n,1):(v=" "==k.data[n],n++,m++);else break;for(m=yc(m,0==e&&ob(g),n==x(k)&&sb(k));"before"==L(g,e,k,n);)e<g.childNodes.length?(g=g.childNodes[e],e=0):g.nodeType!=b.Node.TEXT_NODE||e==x(g)?(e=1+f.getIndexInParent(g),g=g.parentNode):(v=m[0],m=m.slice(1),v!=g.data[e]&&(g.insertData(e,v),g.deleteData(e+1,1)),e++)}}function Ua(a,c,d,e,k){var n,m={},u;3>arguments.length?n=a:(n=l.createRange(),n.setStart(a,c),n.setEnd(d,e));2==arguments.length&&
(m=c);5==arguments.length&&(m=k);var y=null!=m.blockMerging?!!m.blockMerging:!0,p=null!=m.stripWrappers?!!m.stripWrappers:!0;if(n){var z=n.startContainer;u=n.startOffset;for(var C=n.endContainer,D=n.endOffset,G;z.hasChildNodes();)if(u==x(z)&&La(z,z.parentNode)&&ka(z))u=1+f.getIndexInParent(z),z=z.parentNode;else{if(u==x(z))break;G=z.childNodes[u];if(ia(G)||G.nodeType==b.Node.ELEMENT_NODE&&!G.hasChildNodes()||G.nodeType!=b.Node.ELEMENT_NODE&&G.nodeType!=b.Node.TEXT_NODE)break;z=G;u=0}for(;C.hasChildNodes();)if(0==
D&&La(C,C.parentNode)&&ka(C))D=f.getIndexInParent(C),C=C.parentNode;else{if(0==D)break;G=C.childNodes[D-1];if(ia(G)||G.nodeType==b.Node.ELEMENT_NODE&&!G.hasChildNodes()||G.nodeType!=b.Node.ELEMENT_NODE&&G.nodeType!=b.Node.TEXT_NODE)break;C=G;D=x(G)}if("after"!==L(C,D,z,u))return n.setEnd(n.startContainer,n.startOffset),n;C.nodeType==b.Node.TEXT_NODE&&D==x(C)&&z!=C&&(D=1+f.getIndexInParent(C),C=C.parentNode);n.setStart(z,u);n.setEnd(C,D);for(var q=n.startContainer;La(q,q.parentNode)&&ka(q);)q=q.parentNode;
if(!ia(q)&&!Aa(q)||!Pa("span",q)||v(q,["td","th"]))q=null;for(var F=n.endContainer;La(F,F.parentNode)&&ka(F);)F=F.parentNode;if(!ia(F)&&!Aa(F)||!Pa("span",F)||v(F,["td","th"]))F=null;m=xb(n);if(z==C&&P(z)&&z.nodeType==b.Node.TEXT_NODE)return G=z.parentNode,z.deleteData(u,D-u),0<u&&" "===z.data.substr(u-1,1)&&u<z.data.length&&" "===z.data.substr(u,1)&&z.replaceData(u-1,1,"\u00a0"),ub(z,u),n.setStart(n.startContainer,n.startOffset),n.setEnd(n.startContainer,n.startOffset),nb(m,n),!P(G)&&!Aa(G)||ka(G)||
ab(G),n;P(z)&&z.nodeType==b.Node.TEXT_NODE&&z.deleteData(u,x(z)-u);var s=N(n,function(a){return P(a)&&!v(a,"thead tbody tfoot tr th td".split(" "))});for(u=0;u<s.length;u++){var r=s[u];G=r.parentNode;G.removeChild(r);if(p||!B(G,z)&&G!=z)for(;P(G)&&ka(G)&&0==x(G);)r=G.parentNode,r.removeChild(G),G=r;!P(G)&&!Aa(G)||ka(G)||ab(G)}P(C)&&C.nodeType==b.Node.TEXT_NODE&&C.deleteData(0,D);ub(n.startContainer,n.startOffset);ub(n.endContainer,n.endOffset);if(!(y&&q&&F&&La(q,F)&&q!=F))return n.setEnd(n.startContainer,
n.startOffset),F=q||F,ya(F)&&(F=oa(F),n.setStart(F.node,F.offset),n.setEnd(F.node,F.offset)),nb(m,n),n;1==q.children.length&&Ia(q.firstChild)&&q.removeChild(q.firstChild);1==F.children.length&&Ia(F.firstChild)&&F.removeChild(F.firstChild);if(B(q,F)){for(G=F;G.parentNode!=q;)G=G.parentNode;n.setStart(q,f.getIndexInParent(G));n.setEnd(q,f.getIndexInParent(G));if(!F.hasChildNodes()){for(;P(F)&&1==F.parentNode.childNodes.length&&F.parentNode!=q;)G=F,G.removeChild(F),F=G;P(F)&&!ka(F)&&ka(F.previousSibling)&&
ka(F.nextSibling)&&F.parentNode.insertBefore(document.createElement("br"),F.nextSibling);P(F)&&F.parentNode.removeChild(F);nb(m,n);return n}if(!ka(F.firstChild))return nb(m,n),n;p=[];for(p.push(F.firstChild);!g(p[p.length-1],"br")&&ka(p[p.length-1].nextSibling);)p.push(p[p.length-1].nextSibling);for(y=lb(p);p[0].parentNode!=q;)pa(p,n);P(p[0].previousSibling)&&g(p[0].previousSibling,"br")&&p[0].parentNode.removeChild(p[0].previousSibling)}else if(J(q,F)){n.setStart(q,x(q));n.setEnd(q,x(q));for(G=q;G.parentNode!=
F;)G=G.parentNode;ka(G.nextSibling)&&g(q.lastChild,"br")&&q.removeChild(q.lastChild);F=[];!G.nextSibling||g(G.nextSibling,"br")||ia(G.nextSibling)||F.push(G.nextSibling);F.length&&F[F.length-1].nextSibling&&!g(F[F.length-1].nextSibling,"br")&&!ia(F[F.length-1].nextSibling)&&F.push(F[F.length-1].nextSibling);y=lb(F);b(F).forEach(function(a){xa(a,q,-1,n)});g(G.nextSibling,"br")&&G.parentNode.removeChild(G.nextSibling)}else{n.setStart(q,x(q));n.setEnd(q,x(q));ka(F.firstChild)&&g(q.lastChild,"br")&&q.removeChild(q.lastChild);
for(y=lb([].slice.call(A(F.childNodes)));F.hasChildNodes();)xa(F.firstChild,q,-1,n);for(;!F.hasChildNodes();)G=F.parentNode,G.removeChild(F),F=G}bb(y,n);ya(q)&&(F=oa(q),n.setStart(F.node,F.offset),n.setEnd(F.node,F.offset),q=F.node);ab(q);nb(m,n);return n}}function ua(a,c){a.hasChildNodes()?pa([].slice.call(A(a.childNodes)),c):a.parentNode.removeChild(a)}function cc(a,c){a&&d(a).find("ul,ol,li").each(function(){d(this).contents().each(function(){if(Na(this)){var a=f.getIndexInParent(this);c.startContainer===
this.parentNode&&c.startOffset>a?c.startOffset--:c.startContainer===this&&(c.startContainer=this.parentNode,c.startOffset=a);c.endContainer===this.parentNode&&c.endOffset>a?c.endOffset--:c.endContainer===this&&(c.endContainer=this.parentNode,c.endOffset=a);d(this).remove()}})})}function dc(c,b){if(c.length){var g=c[0];if(v(g.parentNode,["OL","UL"])){var d=g.parentNode.tagName;ja(c,function(c){return a(c,d)},function(){return g.ownerDocument.createElement(d)},b)}else{var e=ja(c,function(a){return!1},
function(){return g.ownerDocument.createElement("blockquote")},b);cb(e,b)}}}function Pb(a,c){if(P(a)){for(var g=a.parentNode,d=[];P(g)&&g.nodeType==b.Node.ELEMENT_NODE&&!v(g,["ol","ul"]);)d.push(g),g=g.parentNode;P(g);g=a.parentNode;for(d=[];P(g)&&g.nodeType==b.Node.ELEMENT_NODE&&!v(g,["ol","ul"]);)d.push(g),g=g.parentNode;if(!v(a,["OL","UL"])||P(g)&&0)P(g);else for(a.removeAttribute("reversed"),a.removeAttribute("start"),a.removeAttribute("type"),g=[].slice.call(A(a.childNodes)),a.attributes.length&&
!v(a.parentNode,["OL","UL"])?Ca(a,"div",c):(d=lb([].slice.call(A(a.childNodes))),ua(a,c),bb(d,c)),d=0;d<g.length;d++)cb(g[d],c)}}function vb(c,d){function e(){return document.createElement("li")}function k(a){return v(a,["ol","ul"])}function n(c){return function(b){return a(b,c)}}function f(a){return function(){return document.createElement(a)}}function m(a,c,b){return function(){P(c[0].parentNode);return document.createElement(a)}}var l=tb()==c?"disable":"enable";c=c.toUpperCase();var u="OL"==c?
"UL":"OL",y=[];(function(){var a;for(a=d.endContainer;a!=d.commonAncestorContainer;a=a.parentNode)g(a,"li")&&y.unshift(a);for(a=d.startContainer;a;a=a.parentNode)g(a,"li")&&y.unshift(a)})();b(y).forEach(function(a){Gb(a,d)});var p=Ja(d);"enable"==l&&b(W(p,function(c){return P(c)&&a(c,u)})).forEach(function(b){if(P(b.previousSibling)&&a(b.previousSibling,c)||P(b.nextSibling)&&a(b.nextSibling,c)){b=[].slice.call(A(b.childNodes));var g=lb(b);pa(b,d);ja(b,function(b){return a(b,c)},function(){return null},
d);bb(g,d)}else Ca(b,c,d)});p=N(p,function(a){return P(a)&&(v(a,["OL","UL"])||v(a.parentNode,["OL","UL"])||Pa(a,"li"))});"enable"==l&&(p=b(p).filter(function(a){return!v(a,["ol","ul"])||v(a.parentNode,["ol","ul"])}));var z;if("disable"==l)for(;p.length;)if(l=[],l.push(p.shift()),a(l[0],c))Pb(l[0],d);else{for(;p.length&&p[0]==l[l.length-1].nextSibling&&!a(p[0],c);)l.push(p.shift());z=lb(l);pa(l,d);var B;for(B=0;B<l.length;B++)cb(l[B],d);bb(z,d)}else for(;p.length;){for(l=[];!l.length||p.length&&p[0]==
l[l.length-1].nextSibling;)if(v(p[0],["p","div"]))l.push(Ca(p[0],"li",d)),p.shift();else if(v(p[0],["li","ol","ul"]))l.push(p.shift());else{for(z=[];!z.length||p.length&&p[0]==z[z.length-1].nextSibling&&ka(p[0])&&ka(z[z.length-1])&&!g(z[z.length-1],"br");)z.push(p.shift());l.push(ja(z,void 0,e,d))}a(l[0].parentNode,c)||b(l).every(k)||(a(l[0].parentNode,u)?(z=lb(l),pa(l,d),ja(l,n(c),f(c),d),bb(z,d)):cb(ja(l,n(c),m(c,l,d),d),d))}}function Qb(a,c){function d(a){return function(c){return g(c,"div")&&
b(c.attributes).every(function(b){return"align"==b.name&&b.value.toLowerCase()==a||"style"==b.name&&1==z(c)&&c.style.textAlign==a})}}function e(a){return function(){var c=document.createElement("div");c.setAttribute("style","text-align: "+a);return c}}for(var n=Ja(c),f=W(n,function(a){return a.nodeType==b.Node.ELEMENT_NODE&&P(a)&&(k(a,"align")||""!=a.style.textAlign||g(a,"center"))}),n=0;n<f.length;n++){var m=f[n];m.removeAttribute("align");m.style.textAlign="";""==m.getAttribute("style")&&m.removeAttribute("style");
v(m,["div","span","center"])&&!m.attributes.length&&ua(m,c);g(m,"center")&&m.attributes.length&&Ca(m,"div",c)}n=Ja(gb);f=[];for(f=N(n,function(c){return P(c)&&Pa(c,"div")&&Ta(c)!=a});f.length;){n=[];for(n.push(f.shift());f.length&&f[0]==n[n.length-1].nextSibling;)n.push(f.shift());ja(n,d(a),e(a),c)}}function dd(a,c){var g;if(a.collapsed){g=a.startOffset;if(c){if(a.startContainer&&a.startContainer.nodeType===b.Node.TEXT_NODE)for(;g<a.startContainer.data.length&&"\u200b"===a.startContainer.data.charAt(g);)g++}else if(a.startContainer&&
a.startContainer.nodeType===b.Node.TEXT_NODE)for(;0<g&&"\u200b"===a.startContainer.data.charAt(g-1);)g--;g!==a.startOffset&&(a.setStart(a.startContainer,g),a.setEnd(a.startContainer,g))}}var Yb="http://www.w3.org/1999/xhtml",wb=!1,gb=null,ba={},jc,kc,Lb,ed,Rb,sd,td,Bc=0,Da={ADDRESS:!0,ARTICLE:!0,ASIDE:!0,BLOCKQUOTE:!0,CAPTION:!0,CENTER:!0,COL:!0,COLGROUP:!0,DD:!0,DETAILS:!0,DIR:!0,DIV:!0,DL:!0,DT:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,
HGROUP:!0,HR:!0,LI:!0,LISTING:!0,MENU:!0,NAV:!0,OL:!0,P:!0,PLAINTEXT:!0,PRE:!0,SECTION:!0,SUMMARY:!0,TABLE:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0,UL:!0,XMP:!0},Wd={inline:!0,"inline-block":!0,"inline-table":!0,none:!0};(function(){var a={},c={},b=null;Lb=function(g){if(!b||b.startContainer!=g.startContainer||b.endContainer!=g.endContainer||b.startOffset!=g.startOffset||b.endOffset!=g.endOffset)if(b={startContainer:g.startContainer,endContainer:g.endContainer,startOffset:g.startOffset,endOffset:g.endOffset},
!p.isEmpty(a)||!p.isEmpty(c))return a={},c={},!0;return!1};jc=function(c,b){Lb(b);return a[c]};kc=function(c,b,g){Lb(g);a[c]=b};ed=function(c,b){Lb(b);delete a[c]};Rb=function(a,b){Lb(b);return c[a]};sd=function(a,b,g){Lb(g);c[a]=b;"backcolor"==a?c.hilitecolor=b:"hilitecolor"==a&&(c.backcolor=b)};td=function(a,b){Lb(b);delete c[a];"backcolor"==a?delete c.hilitecolor:"hilitecolor"==a&&delete c.backcolor}})();var qc={A:!0,ABBR:!0,B:!0,BDI:!0,BDO:!0,CITE:!0,CODE:!0,DFN:!0,EM:!0,H1:!0,H2:!0,H3:!0,H4:!0,
H5:!0,H6:!0,I:!0,KBD:!0,MARK:!0,P:!0,PRE:!0,Q:!0,RP:!0,RT:!0,RUBY:!0,S:!0,SAMP:!0,SMALL:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0,VAR:!0,ACRONYM:!0,LISTING:!0,STRIKE:!0,XMP:!0,BIG:!0,BLINK:!0,FONT:!0,MARQUEE:!0,NOBR:!0,TT:!0},Ic={colgroup:!0,table:!0,tbody:!0,tfoot:!0,thead:!0,tr:!0},vd={script:!0,style:!0,plaintext:!0,xmp:!0},Sb=d.extend({H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0},Da),wd={CAPTION:!0,COL:!0,COLGROUP:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0},xd={DD:!0,DT:!0},yd={A:d.extend({A:!0},Da),
DD:xd,DT:xd,LI:{LI:!0},NOBR:d.extend({NOBR:!0},Da),H1:Sb,H2:Sb,H3:Sb,H4:Sb,H5:Sb,H6:Sb,TD:wd,TH:wd,ABBR:Da,B:Da,BDI:Da,BDO:Da,CITE:Da,CODE:Da,DFN:Da,EM:Da,I:Da,KBD:Da,MARK:Da,P:Da,PRE:Da,Q:Da,RP:Da,RT:Da,RUBY:Da,S:Da,SAMP:Da,SMALL:Da,SPAN:Da,STRONG:Da,SUB:Da,SUP:Da,U:Da,VAR:Da,ACRONYM:Da,LISTING:Da,STRIKE:Da,XMP:Da,BIG:Da,BLINK:Da,FONT:Da,MARQUEE:Da,TT:Da},re="subscript bold fontname fontsize forecolor hilitecolor italic strikethrough underline".split(" ");ba.backcolor={action:function(a,c){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&
(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||V(a)||"transparent"==a.toLowerCase())&&Qa("backcolor",a,c)},standardInlineValueCommand:!0,relevantCssProperty:"backgroundColor",equivalentValues:function(a,c){return Z(a)===Z(c)}};ba.bold={action:function(a,c){da("bold",c)?Qa("bold","normal",c):Qa("bold","bold",c)},inlineCommandActivatedValues:["bold","600","700","800","900"],relevantCssProperty:"fontWeight",equivalentValues:function(a,c){return a==c||"bold"==a&&"700"==c||"700"==a&&"bold"==c||"normal"==
a&&"400"==c||"400"==a&&"normal"==c}};ba.createlink={action:function(a,c){""!==a&&(b(Sa(Y())).forEach(function(c){b(F(c)).forEach(function(c){P(c)&&g(c,"a")&&k(c,"href")&&c.setAttribute("href",a)})}),Qa("createlink",a,c))},standardInlineValueCommand:!0};ba.fontname={action:function(a,c){Qa("fontname",a,c)},standardInlineValueCommand:!0,relevantCssProperty:"fontFamily"};ba.fontsize={action:function(a,c){""!==a&&(a=Q(a),(-1!=d.inArray(a,"xx-small x-small small medium large x-large xx-large xxx-large".split(" "))||
/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc)$/.test(a))&&Qa("fontsize",a,c))},indeterm:function(){return 2<=b(Sa(Y(),function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE})).map(function(a){return Ga(a,"fontsize")},!0).filter(function(a,c,g){return-1==b(g.slice(0,c)).indexOf(a)}).length},value:function(a){var c=Sa(a,function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE})[0];void 0===c&&(c=a.startContainer);a=Ga(c,"fontsize");return R(a)},relevantCssProperty:"fontSize"};ba.forecolor={action:function(a,c){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&
(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||V(a)||"transparent"==a.toLowerCase())&&Qa("forecolor",a,c)},standardInlineValueCommand:!0,relevantCssProperty:"color",equivalentValues:function(a,c){return Z(a)===Z(c)}};ba.hilitecolor={action:function(a,c){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||V(a)||"transparent"==a.toLowerCase())&&Qa("hilitecolor",a,c)},indeterm:function(){return 2<=b(Sa(Y(),function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE})).map(function(a){return Ga(a,
"hilitecolor")},!0).filter(function(a,c,g){return-1==b(g.slice(0,c)).indexOf(a)}).length},standardInlineValueCommand:!0,relevantCssProperty:"backgroundColor",equivalentValues:function(a,c){return Z(a)===Z(c)}};ba.italic={action:function(a,c){da("italic",c)?Qa("italic","normal",c):Qa("italic","italic",c)},inlineCommandActivatedValues:["italic","oblique"],relevantCssProperty:"fontStyle"};ba.removeformat={action:function(a,c){function g(a){return P(a)&&v(a,"abbr acronym b bdi bdo big blink cite code dfn em font i ins kbd mark nobr q s samp small span strike strong sub sup tt u var".split(" "))}
var d,k;d=Sa(Y(),g);b(d).forEach(function(a){for(;a.hasChildNodes();)xa(a.firstChild,a.parentNode,f.getIndexInParent(a),Y());a.parentNode.removeChild(a)});P(Y().startContainer)&&Y().startContainer.nodeType==b.Node.TEXT_NODE&&0!=Y().startOffset&&Y().startOffset!=x(Y().startContainer)&&(Y().startContainer==Y().endContainer?(d=Y().endOffset-Y().startOffset,k=e(Y().startContainer,Y().startOffset),Y().setStart(k,0),Y().setEnd(k,d)):Y().setStart(e(Y().startContainer,Y().startOffset),0));P(Y().endContainer)&&
Y().endContainer.nodeType==b.Node.TEXT_NODE&&0!=Y().endOffset&&Y().endOffset!=x(Y().endContainer)&&(k=[Y().startContainer,Y().startOffset],d=[Y().endContainer,Y().endOffset],Y().setEnd(document.documentElement,0),e(d[0],d[1]),Y().setStart(k[0],k[1]),Y().setEnd(d[0],d[1]));b(Sa(Y(),P)).forEach(function(a){for(;g(a.parentNode)&&La(a.parentNode,a);)pa([a],Y())});b("subscript bold fontname fontsize forecolor hilitecolor italic strikethrough underline".split(" ")).forEach(function(a){Qa(a,null,c)})}};
ba.strikethrough={action:function(a,c){da("strikethrough",c)?Qa("strikethrough",null,c):Qa("strikethrough","line-through",c)},inlineCommandActivatedValues:["line-through"]};ba.subscript={action:function(a,c){var b=da("subscript",c);Qa("subscript",null,c);b||Qa("subscript","subscript",c)},indeterm:function(){var a=Sa(Y(),function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE});return b(a).some(function(a){return"subscript"==Ga(a,"subscript")})&&b(a).some(function(a){return"subscript"!=Ga(a,"subscript")})||
b(a).some(function(a){return"mixed"==Ga(a,"subscript")})},inlineCommandActivatedValues:["subscript"]};ba.superscript={action:function(a,c){var b=da("superscript",c);Qa("superscript",null,c);b||Qa("superscript","superscript",c)},indeterm:function(){var a=Sa(Y(),function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE});return b(a).some(function(a){return"superscript"==Ga(a,"superscript")})&&b(a).some(function(a){return"superscript"!=Ga(a,"superscript")})||b(a).some(function(a){return"mixed"==Ga(a,"superscript")})},
inlineCommandActivatedValues:["superscript"]};ba.underline={action:function(a,c){da("underline",c)?Qa("underline",null,c):Qa("underline","underline",c)},inlineCommandActivatedValues:["underline"]};ba.unlink={action:function(){var a=Y(),c=[],b;for(b=a.startContainer;b;b=b.parentNode)g(b,"A")&&k(b,"href")&&c.unshift(b);for(b=a.startContainer;b!=y(a.endContainer);b=C(b))g(b,"A")&&k(b,"href")&&(T(b,a)||B(b,a.endContainer)||b==a.endContainer)&&c.push(b);for(b=0;b<c.length;b++)Eb(c[b],"unlink",a)},standardInlineValueCommand:!0};
var Cc="p";ba["delete"]={action:function(a,c){var e;d.browser.msie&&7>=d.browser.version&&dd(c,!1);if(c.collapsed){ub(c.startContainer,c.startOffset);for(var k=c.startContainer,n=c.startOffset,m=e=!1;;)if(0<n&&(e=g(k.childNodes[n-1],"br")||!1,m=g(k.childNodes[n-1],"hr")||!1),0==n&&P(k.previousSibling)&&ea(k.previousSibling))k.parentNode.removeChild(k.previousSibling);else if(0<=n-1&&n-1<k.childNodes.length&&P(k.childNodes[n-1])&&(ea(k.childNodes[n-1])||e||m)){if(k.removeChild(k.childNodes[n-1]),n--,
e||m){c.setStart(k,n);c.setEnd(k,n);return}}else if(0==n&&ka(k)||ea(k))n=f.getIndexInParent(k),k=k.parentNode;else{if(0<=n-1&&n-1<k.childNodes.length&&P(k.childNodes[n-1])&&g(k.childNodes[n-1],"a")){ua(k.childNodes[n-1],c);return}if(0<=n-1&&n-1<k.childNodes.length&&!ia(k.childNodes[n-1])&&!v(k.childNodes[n-1],["br","img"]))k=k.childNodes[n-1],n=x(k);else break}if(e=Xb(k,n))e.parentNode.removeChild(e);else if(k.nodeType==b.Node.TEXT_NODE&&0!=n)c.setStart(k,n-1),c.setEnd(k,n-1),Ua(k,n-1,k,n);else if(k.nodeType==
b.Node.TEXT_NODE&&0==n&&d.browser.msie)n=1,c.setStart(k,n),c.setEnd(k,n),c.startOffset=0,Ua(c);else if(!ka(k))if(0<=n-1&&n-1<k.childNodes.length&&v(k.childNodes[n-1],["br","hr","img"]))c.setStart(k,n),c.setEnd(k,n),Ua(c);else if(v(k,["li","dt","dd"])&&k==k.parentNode.firstChild&&0==n){n=[];for(e=k.parentNode;e;e=e.parentNode)g(e,"li")&&n.unshift(e);for(e=0;e<n.length;e++)Gb(n[e],c);e=lb([k]);pa([k],c);bb(e,c);v(k,["dd","dt"])&&b(F(k)).every(function(a){return!La(k,a)||!Pa(k,a)})&&(k=Ca(k,Cc,c));cb(k,
c);for(e=0;e<n.length;e++)bc(n[e].parentNode,c)}else{e=k;for(m=n;;)if(0==m)m=f.getIndexInParent(e),e=e.parentNode;else if(0<=m-1&&m-1<e.childNodes.length&&P(e.childNodes[m-1])&&ea(e.childNodes[m-1]))e.removeChild(e.childNodes[m-1]),m--;else break;if(0==n&&b(F(k).concat(k)).filter(function(a){return P(a)&&La(a,k)&&!1}).length)for(n=l.createRange(),n.setStart(k,0),n.setEnd(k,0),n=Ja(n),n=N(n,function(a){return P(a)&&!na(a)}),e=0;e<n.length;e++)Pb(n[e],c);else if(!g(e.childNodes[m],"table"))if(0<=m-
1&&m-1<e.childNodes.length&&g(e.childNodes[m-1],"table"))c.setStart(e,m-1),c.setEnd(e,m);else if(0==n&&(g(e.childNodes[m-1],"hr")||g(e.childNodes[m-1],"br")&&(g(e.childNodes[m-1].previousSibling,"br")||!ka(e.childNodes[m-1].previousSibling))))c.setStart(k,n),c.setEnd(k,n),Ua(e,m-1,e,m);else{if(v(e.childNodes[m],["li","dt","dd"])&&ka(e.childNodes[m].firstChild)&&0!=m){var u=e.childNodes[m-1];ka(u.lastChild)&&!g(u.lastChild,"br")&&u.appendChild(document.createElement("br"));ka(u.lastChild)&&u.appendChild(document.createElement("br"))}if(v(e.childNodes[m],
["li","dt","dd"])&&v(e.childNodes[m-1],["li","dt","dd"]))e=e.childNodes[m-1],m=x(e),k=e.nextSibling,n=0;else for(;0<=m-1&&m-1<e.childNodes.length;)P(e.childNodes[m-1])&&ea(e.childNodes[m-1])?(e.removeChild(e.childNodes[m-1]),m--):(e=e.childNodes[m-1],m=x(e));u=l.createRange();u.setStart(e,m);u.setEnd(k,n);Ua(u);G(document.body,c.startContainer)||(u.startContainer.hasChildNodes()||u.startContainer.nodeType==b.Node.TEXT_NODE||Aa(u.startContainer)?(c.setStart(u.startContainer,u.startOffset),c.setEnd(u.startContainer,
u.startOffset)):(c.setStart(u.startContainer.parentNode,f.getIndexInParent(u.startContainer)),c.setEnd(u.startContainer.parentNode,f.getIndexInParent(u.startContainer))))}}}else Ua(c)}};var Kc="address dd div dt h1 h2 h3 h4 h5 h6 p pre".split(" ");ba.formatblock={action:function(c){function e(c){return function(g){return P(g)&&La(g,c)&&a(g,Kc)&&!b(s(g)).some(la)}}function k(c){return function(b){return a(b,c)&&!b.attributes.length}}function n(){return!1}function f(a){return function(){return document.createElement(a)}}
var m;/^<.*>$/.test(c)&&(c=c.slice(1,-1));c=c.toLowerCase();if(-1!=b(Kc).indexOf(c)){var l=Ja(Y()),u=N(l,function(a){return P(a)&&(Bb(a)||Pa(a,"p")||v(a,["dd","dt"]))&&!b(s(a)).some(la)}),y=lb(u);for(m=0;m<u.length;m++)for(var p=u[m];b(F(p)).some(e(p));)pa([p],l);for(bb(y,l);u.length;){if(rb(u[0]))m=[].slice.call(A(u[0].childNodes)),y=lb(m),ua(u[0],l),bb(y,l),u.shift();else for(m=[],m.push(u.shift());u.length&&u[0]==m[m.length-1].nextSibling&&!rb(u[0])&&!g(m[m.length-1],"BR");)m.push(u.shift());cb(ja(m,
-1==d.inArray(c,["div","p"])?k(c):n,f(c),l),l)}}},indeterm:function(){var c=Ja(Y()),c=W(c,function(a){return ra(a)&&P(a)&&!a.hasChildNodes()});if(!c.length)return!1;var g=null,d;for(d=0;d<c.length;d++){for(var e=c[d];P(e.parentNode)&&La(e,e.parentNode)&&!a(e,Kc);)e=e.parentNode;var k="";P(e)&&a(e,Kc)&&!b(s(e)).some(la)&&(k=e.tagName);if(null===g)g=k;else if(g!=k)return!0}return!1},value:function(){var c=Ja(Y()),c=W(c,function(a){return ra(a)&&P(a)&&!a.hasChildNodes()});if(!c.length)return"";for(c=
c[0];P(c.parentNode)&&La(c,c.parentNode)&&!a(c,Kc);)c=c.parentNode;return P(c)&&a(c,Kc)&&!b(s(c)).some(la)?c.tagName.toLowerCase():""}};ba.forwarddelete={action:function(a,c){d.browser.msie&&7>=d.browser.version&&dd(c,!0);if(c.collapsed){ub(c.startContainer,c.startOffset);for(var e=c.startContainer,k=c.startOffset;;)if(k==x(e)&&P(e.nextSibling)&&ea(e.nextSibling))e.parentNode.removeChild(e.nextSibling);else if(k<e.childNodes.length&&P(e.childNodes[k])&&ea(e.childNodes[k]))e.removeChild(e.childNodes[k]);
else if(k<e.childNodes.length&&Ia(e.childNodes[k]))k++;else if(k==x(e)&&ka(e)||ea(e))k=1+f.getIndexInParent(e),e=e.parentNode;else if(k<e.childNodes.length&&!ia(e.childNodes[k])&&!v(e.childNodes[k],["br","img"]))e=e.childNodes[k],k=0;else break;ub(c.startContainer,c.startOffset);var n=hc(e,k);if(n)n.parentNode.removeChild(n);else if(e.nodeType==b.Node.TEXT_NODE&&k!=x(e)){c.setStart(e,k);c.setEnd(e,k);for(n=k+1;n!=e.length&&/^[\u0300-\u036f\u0591-\u05bd\u05c1\u05c2]$/.test(e.data[n]);)n++;Ua(e,k,e,
n)}else if(!ka(e))if(k<e.childNodes.length&&v(e.childNodes[k],["br","hr","img"]))c.setStart(e,k),c.setEnd(e,k),Ua(e,k,e,k+1);else{for(var m=e,n=k;;)if(n==x(m))n=1+f.getIndexInParent(m),m=m.parentNode;else if(n<m.childNodes.length&&P(m.childNodes[n])&&ea(m.childNodes[n]))m.removeChild(m.childNodes[n]);else break;if(!g(m.childNodes[n-1],"table"))if(g(m.childNodes[n],"table"))c.setStart(m,n),c.setEnd(m,n+1);else if(k==x(e)&&v(m.childNodes[n],["br","hr"]))c.setStart(e,k),c.setEnd(e,k),Ua(m,n,m,n+1);else{for(;n<
m.childNodes.length;)P(m.childNodes[n])&&ea(m.childNodes[n])?m.removeChild(m.childNodes[n]):(m=m.childNodes[n],n=0);e=Ua(e,k,m,n);c.setStart(e.startContainer,e.startOffset);c.setEnd(e.endContainer,e.endOffset)}}}else Ua(c)}};ba.indent={action:function(){var a=[],c;for(c=Y().endContainer;c!=Y().commonAncestorContainer;c=c.parentNode)g(c,"LI")&&a.unshift(c);for(c=Y().startContainer;c!=Y().commonAncestorContainer;c=c.parentNode)g(c,"LI")&&a.unshift(c);for(c=Y().commonAncestorContainer;c;c=c.parentNode)g(c,
"LI")&&a.unshift(c);for(c=0;c<a.length;c++)Gb(a[c],Y());a=Ja(Y());c=[];c=N(a,function(a){return P(a)&&(Pa(a,"div")||Pa(a,"ol"))});for(c.length&&g(c[0],"LI")&&v(c[0].parentNode,["OL","UL"])&&g(c[0].previousSibling,"LI")&&Gb(c[0].previousSibling,a);c.length;){var b=[];for(b.push(c.shift());c.length&&c[0]==b[b.length-1].nextSibling;)b.push(c.shift());dc(b,a)}}};ba.inserthorizontalrule={action:function(a,c){for(;0==c.startOffset&&c.startContainer.parentNode;)c.setStart(c.startContainer.parentNode,f.getIndexInParent(c.startContainer));
for(;c.endOffset==x(c.endContainer)&&c.endContainer.parentNode;)c.setEnd(c.endContainer.parentNode,1+f.getIndexInParent(c.endContainer));Ua(c,{blockMerging:!1});if(P(Y().startContainer)||Aa(Y().startContainer)){Y().startContainer.nodeType==b.Node.TEXT_NODE&&0==Y().startOffset&&(Y().setStart(Y().startContainer.parentNode,f.getIndexInParent(Y().startContainer)),Y().collapse(!0));Y().startContainer.nodeType==b.Node.TEXT_NODE&&Y().startOffset==x(Y().startContainer)&&(Y().setStart(Y().startContainer.parentNode,
1+f.getIndexInParent(Y().startContainer)),Y().collapse(!0));var g=document.createElement("hr");c.insertNode(g);cb(g,c);c.setStart(g.parentNode,1+f.getIndexInParent(g));c.setEnd(g.parentNode,1+f.getIndexInParent(g));l.getSelection().removeAllRanges();l.getSelection().addRange(c)}}};ba.inserthtml={action:function(a,c){Ua(c);if(P(c.startContainer)||Aa(c.startContainer)){var g=c.createContextualFragment(a),d=g.lastChild;if(d){var e=s(g);ia(c.startContainer)&&b(c.startContainer.childNodes).filter(function(a,
c){return P(a)&&Ia(a)&&f.getIndexInParent(a)>=c.startOffset},!0).forEach(function(a){a.parentNode.removeChild(a)});c.insertNode(g);ia(c.startContainer)&&ab(c.startContainer);c.setStart(d.parentNode,1+f.getIndexInParent(d));c.setEnd(d.parentNode,1+f.getIndexInParent(d));for(g=0;g<e.length;g++)cb(e[g],c);aa(c)}}}};ba.insertimage={action:function(a){if(""!==a){var c=Y();Ua(c,{stripWrappers:!1});if(P(Y().startContainer)||Aa(Y().startContainer)){ia(c.startContainer)&&1==c.startContainer.childNodes.length&&
g(c.startContainer.firstChild,"br")&&0==c.startOffset&&c.startContainer.removeChild(c.startContainer.firstChild);var b=document.createElement("img");b.setAttribute("src",a);c.insertNode(b);c.setStart(b.parentNode,1+f.getIndexInParent(b));c.setEnd(b.parentNode,1+f.getIndexInParent(b));l.getSelection().removeAllRanges();l.getSelection().addRange(c);b.removeAttribute("width");b.removeAttribute("height")}}}};ba.insertlinebreak={action:function(a,c){Ua(c,{stripWrappers:!1});if(P(c.startContainer)||Aa(c.startContainer))if(c.startContainer.nodeType!=
b.Node.ELEMENT_NODE||Pa("br",c.startContainer))if(c.startContainer.nodeType==b.Node.ELEMENT_NODE||Pa("br",c.startContainer.parentNode)){var g,e;c.startContainer.nodeType==b.Node.TEXT_NODE&&0==c.startOffset&&(g=c.startContainer.parentNode,e=f.getIndexInParent(c.startContainer),l.getSelection().collapse(g,e),c.setStart(g,e),c.setEnd(g,e));c.startContainer.nodeType==b.Node.TEXT_NODE&&c.startOffset==x(c.startContainer)&&(g=c.startContainer.parentNode,e=1+f.getIndexInParent(c.startContainer),l.getSelection().collapse(g,
e),c.setStart(g,e),c.setEnd(g,e));g=document.createElement("br");c.insertNode(g);l.getSelection().collapse(g.parentNode,1+f.getIndexInParent(g));c.setStart(g.parentNode,1+f.getIndexInParent(g));c.setEnd(g.parentNode,1+f.getIndexInParent(g));Fa(g)&&(c.insertNode(Ra()),l.getSelection().collapse(g.parentNode,1+f.getIndexInParent(g)),c.setStart(g.parentNode,1+f.getIndexInParent(g)),c.setEnd(g.parentNode,1+f.getIndexInParent(g)));d.browser.msie&&8>d.browser.version&&g.parentNode.removeAttribute("style")}}};
ba.insertorderedlist={action:function(a,c){vb("ol",c)},indeterm:function(){return/^mixed( ol)?$/.test(tb())},state:function(){return"ol"==tb()}};var Xd={LI:!0,DT:!0,DD:!0};ba.insertparagraph={action:function(a,c){var k;Ua(c);cc(Va(c.startContainer),c);if(P(c.startContainer)||Aa(c.startContainer)){var n=c.startContainer,m=c.startOffset;n.nodeType==b.Node.TEXT_NODE&&0!=m&&m!=x(n)&&e(n,m);n.nodeType==b.Node.TEXT_NODE&&m==x(n)&&(m=1+f.getIndexInParent(n),n=n.parentNode);if(n.nodeType==b.Node.TEXT_NODE||
n.nodeType==b.Node.COMMENT_NODE)m=f.getIndexInParent(n),n=n.parentNode;l.getSelection().collapse(n,m);c.setStart(n,m);c.setEnd(n,m);for(var u=n;!rb(u)&&P(u.parentNode)&&La(n,u.parentNode);)u=u.parentNode;if(!P(u)||!La(u,n)||!rb(u)){var y=Cc;k=Ja(c);k=N(k,function(a){return Pa(a,"p")}).slice(0,1);if(!k.length){if(!Pa(y,c.startContainer))return;u=document.createElement(y);c.insertNode(u);u.appendChild(Ra());l.getSelection().collapse(u,0);c.setStart(u,0);c.setEnd(u,0);return}for(;k[k.length-1].nextSibling&&
Pa(k[k.length-1].nextSibling,"p");)k.push(k[k.length-1].nextSibling);u=ja(k,function(){return!1},function(){return document.createElement(y)},c)}if(u){var p;if("ADDRESS"==u.tagName||"LISTING"==u.tagName||"PRE"==u.tagName){var z=document.createElement("br");k=u.offsetHeight;c.insertNode(z);p=u.offsetHeight;l.getSelection().collapse(n,m+1);c.setStart(n,m+1);c.setEnd(n,m+1);k!=p||J(C(z),u)||(c.insertNode(Ra()),l.getSelection().collapse(n,m+1),c.setEnd(n,m+1))}else if(Xd[u.tagName]&&(!u.hasChildNodes()||
1==u.childNodes.length&&g(u.firstChild,"br"))){if(pa([u],c),v(u,["dd","dt"])&&b(F(u)).every(function(a){return!La(u,a)||!Pa(u,a)})&&(u=Ca(u,Cc,c)),cb(u,c),g(u,"li")&&g(u.nextSibling,"li")&&v(u.nextSibling.firstChild,["ol","ul"])){n=u.nextSibling;m=u.nextSibling.childNodes.length;for(k=0;k<m;k++)u.appendChild(n.childNodes[0]);n.parentNode.removeChild(n)}}else if(g(u,"p")&&g(u.parentNode,"blockquote")&&!u.nextSibling&&(!u.hasChildNodes()||1===u.childNodes.length&&g(u.firstChild,"br")))d(u.parentNode).after(u);
else{m=l.createRange();m.setStart(c.startContainer,c.startOffset);for(m.setEnd(u,x(u));0==m.startOffset&&m.startContainer!=u;)m.setStart(m.startContainer.parentNode,f.getIndexInParent(m.startContainer));for(;m.startOffset==x(m.startContainer)&&m.startContainer!=u;)m.setStart(m.startContainer.parentNode,1+f.getIndexInParent(m.startContainer));n=N(m);n=!n.length||1==n.length&&g(n[0],"br");n=/^H[1-6]$/.test(u.tagName)&&n?Cc:"DT"==u.tagName&&n?"dd":"DD"==u.tagName&&n?"dt":u.tagName.toLowerCase();n=document.createElement(n);
ta(u,n);n.removeAttribute("id");u.parentNode.insertBefore(n,u.nextSibling);p=W(m);m=m.extractContents();z=s(m);for(k=0;k<z.length;k++)z[k].nodeType==b.Node.ELEMENT_NODE&&-1==b(p).indexOf(z[k])&&z[k].removeAttribute("id");k=[];if(p=m.firstChild){do Na(p)||k.push(p);while(null!=(p=p.nextSibling))}g(n,"li")&&k.length&&v(k[0],["ul","ol"])&&(k=n.offsetHeight,z=Ra(),n.appendChild(z),p=n.offsetHeight,k!==p&&n.removeChild(z));n.appendChild(m);ab(u);ab(n);l.getSelection().collapse(n,0);c.setStart(n,0);c.setEnd(n,
0)}}}}};ba.inserttext={action:function(a,c){var g;Ua(c,{stripWrappers:!1});if(P(c.startContainer)||Aa(c.startContainer))if(1<a.length)for(g=0;g<a.length;g++)ba.inserttext.action(a[g],c);else if(""!=a)if("\n"==a)ba.insertparagraph.action("",c);else{g=c.startContainer;var e=c.startOffset;0<=e-1&&e-1<g.childNodes.length&&g.childNodes[e-1].nodeType==b.Node.TEXT_NODE&&(g=g.childNodes[e-1],e=x(g));0<=e&&e<g.childNodes.length&&g.childNodes[e].nodeType==b.Node.TEXT_NODE&&(g=g.childNodes[e],e=0);var k=g.nodeType==
b.Node.ELEMENT_NODE?g:g.parentNode;" "==a&&k.nodeType==b.Node.ELEMENT_NODE&&-1==d.inArray(b.getComputedStyle(k).whiteSpace,["pre","pre-wrap"])&&(a="\u00a0");k=fb(c);g.nodeType==b.Node.TEXT_NODE?(g.insertData(e,a),l.getSelection().collapse(g,e),c.setStart(g,e),l.getSelection().extend(g,e+1),c.setEnd(g,e+1)):(1==g.childNodes.length&&Fa(g.firstChild)&&g.removeChild(g.firstChild),g=document.createTextNode(a),c.insertNode(g),l.getSelection().collapse(g,0),c.setStart(g,0),l.getSelection().extend(g,1),c.setEnd(g,
1));nb(k,c);ub(c.startContainer,c.startOffset);ub(c.endContainer,c.endOffset);l.getSelection().collapseToEnd();c.collapse(!1)}}};ba.insertunorderedlist={action:function(a,c){vb("ul",c)},indeterm:function(){return/^mixed( ul)?$/.test(tb())},state:function(){return"ul"==tb()}};ba.justifycenter={action:function(a,c){Qb("center",c)},indeterm:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"center"==Ta(a)})&&b(a).some(function(a){return"center"!=
Ta(a)})},state:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"center"==Ta(a)})},value:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return a.length?Ta(a[0]):"left"}};ba.justifyfull={action:function(a,c){Qb("justify",c)},indeterm:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"justify"==Ta(a)})&&b(a).some(function(a){return"justify"!=
Ta(a)})},state:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"justify"==Ta(a)})},value:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return a.length?Ta(a[0]):"left"}};ba.justifyleft={action:function(a,c){Qb("left",c)},indeterm:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"left"==Ta(a)})&&b(a).some(function(a){return"left"!=
Ta(a)})},state:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"left"==Ta(a)})},value:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return a.length?Ta(a[0]):"left"}};ba.justifyright={action:function(a,c){Qb("right",c)},indeterm:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"right"==Ta(a)})&&b(a).some(function(a){return"right"!=
Ta(a)})},state:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"right"==Ta(a)})},value:function(){var a=W(Ja(Y()),function(a){return P(a)&&ra(a)&&!a.hasChildNodes()});return a.length?Ta(a[0]):"left"}};ba.outdent={action:function(){var a=[];(function(){var c;for(c=Y().endContainer;c!=Y().commonAncestorContainer;c=c.parentNode)g(c,"li")&&a.unshift(c);for(c=Y().startContainer;c;c=c.parentNode)g(c,"li")&&a.unshift(c)})();b(a).forEach(function(a){Gb(a,
Y())});for(var c=Ja(Y()),d=N(c,function(a){return P(a)&&(!b(s(a)).some(P)||v(a,["ol","ul"])||g(a,"li")&&v(a.parentNode,["ol","ul"]))});d.length;){for(;d.length&&(v(d[0],["OL","UL"])||!v(d[0].parentNode,["OL","UL"]));)Pb(d.shift(),c);if(!d.length)break;var e=[];for(e.push(d.shift());d.length&&d[0]==e[e.length-1].nextSibling&&!v(d[0],["OL","UL"]);)e.push(d.shift());var k=lb(e);pa(e,c);b(e).forEach(cb);bb(k,c)}}};ba.selectall={action:function(){var a=document.body;a||(a=document.documentElement);a?l.getSelection().selectAllChildren(a):
l.getSelection().removeAllRanges()}};ba.stylewithcss={action:function(a){wb="false"!=String(a).toLowerCase()},state:function(){return wb}};ba.usecss={action:function(a){wb="false"==String(a).toLowerCase()}};(function(){var a=[],c;for(c in ba)ba.hasOwnProperty(c)&&a.push(c);b(a).forEach(function(a){null==ba[a].relevantCssProperty&&(ba[a].relevantCssProperty=null);null!=ba[a].inlineCommandActivatedValues&&null==ba[a].indeterm&&(ba[a].indeterm=function(c){c=b(Sa(c,function(a){return P(a)&&a.nodeType==
b.Node.TEXT_NODE})).map(function(c){return Ga(c,a)});var g=b(c).filter(function(c){return-1!=b(ba[a].inlineCommandActivatedValues).indexOf(c)});return 1<=g.length&&1<=c.length-g.length});null!=ba[a].inlineCommandActivatedValues&&(ba[a].state=function(c){var g=Sa(c,function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE});return 0==g.length?-1!=b(ba[a].inlineCommandActivatedValues).indexOf(Ga(c.startContainer,a)):b(g).every(function(c){return-1!=b(ba[a].inlineCommandActivatedValues).indexOf(Ga(c,a))})});
null!=ba[a].standardInlineValueCommand&&(ba[a].indeterm=function(){var c=b(Sa(Y())).filter(function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE},!0).map(function(c){return Ga(c,a)}),g;for(g=1;g<c.length;g++)if(c[g]!=c[g-1])return!0;return!1},ba[a].value=function(c){var g=Sa(c,function(a){return P(a)&&a.nodeType==b.Node.TEXT_NODE})[0];"undefined"==typeof g&&(g=c.startContainer);return Ga(g,a)})})})();return{commands:ba,execCommand:ma,queryCommandIndeterm:function(a,c){a=a.toLowerCase();return O(a,
"indeterm",c,function(a){return function(){return ca(a,c)?ba[a].indeterm(c):!1}}(a))},queryCommandState:da,queryCommandValue:qa,queryCommandEnabled:ca,queryCommandSupported:function(a){a=a.toLowerCase();return ba.hasOwnProperty(a)},copyAttributes:ta,createEndBreak:Ra,isEndBreak:function(a){return g(a,"br")&&a.parentNode.lastChild===a},ensureContainerEditable:ab,isEditingHost:Aa,isEditable:P,getStateOverride:jc,setStateOverride:kc,resetOverrides:Lb,unsetStateOverride:ed}});define("aloha/selection",
"aloha/core jquery util/class util/range util/arrays util/strings aloha/console PubSub aloha/engine aloha/ecma5shims aloha/rangy-core".split(" "),function(l,b,p,m,f,d,k,e,n,a){function c(a,c){var g=l.activeEditable?l.activeEditable.obj.parent()[0]:null,g=b(a).parentsUntil(g).get(),d;d=[];var e,k,n;1===a.nodeType&&"BODY"!==a.nodeName&&"HTML"!==a.nodeName?d.push(a.cloneNode(!1).outerHTML):d.push("#"+a.nodeType);n=0;for(k=g.length;n<k;n++){e=g[n];if("BODY"===e.nodeName||"HTML"===e.nodeName)break;d.push(e.cloneNode(!1).outerHTML)}d=
d.join("");return c&&a===c.node&&f.equal(c.parents,g)&&d===c.html?null:{node:a,parents:g,html:d}}function g(a){var c;b.browser.msie&&a.startContainer===a.endContainer&&a.startOffset===a.endOffset&&3==a.startContainer.nodeType&&a.startOffset==a.startContainer.data.length&&a.startContainer.nextSibling&&(c=a.startContainer.nextSibling,"OL"===c.nodeName||"UL"===c.nodeName)&&(" "==a.startContainer.data[a.startContainer.data.length-1]?a.startOffset=a.endOffset=a.startOffset-1:a.startContainer.data+=" ")}
var v=window.GENTICS,u=null,z=null;m=p.extend({_constructor:function(){this.rangeObject={};this.preventSelectionChangedFlag=!1;this.tagHierarchy={textNode:{},abbr:{textNode:!0},b:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0,strong:!0},pre:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0},blockquote:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,
a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0,p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0},ins:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,u:!0,p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0},ul:{li:!0},ol:{li:!0},li:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,ul:!0,ol:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,del:!0,ins:!0,u:!0,a:!0},tr:{td:!0,th:!0},table:{tr:!0},div:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,ul:!0,ol:!0,table:!0,h1:!0,
h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,del:!0,ins:!0,u:!0,p:!0,div:!0,pre:!0,blockquote:!0,a:!0},h1:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0}};this.tagHierarchy={textNode:this.tagHierarchy.textNode,abbr:this.tagHierarchy.abbr,br:this.tagHierarchy.textNode,img:this.tagHierarchy.textNode,b:this.tagHierarchy.b,strong:this.tagHierarchy.b,code:this.tagHierarchy.b,q:this.tagHierarchy.b,blockquote:this.tagHierarchy.blockquote,cite:this.tagHierarchy.b,i:this.tagHierarchy.b,
em:this.tagHierarchy.b,sup:this.tagHierarchy.b,sub:this.tagHierarchy.b,span:this.tagHierarchy.b,del:this.tagHierarchy.del,ins:this.tagHierarchy.ins,u:this.tagHierarchy.b,p:this.tagHierarchy.b,pre:this.tagHierarchy.pre,a:this.tagHierarchy.b,ul:this.tagHierarchy.ul,ol:this.tagHierarchy.ol,li:this.tagHierarchy.li,td:this.tagHierarchy.li,div:this.tagHierarchy.div,h1:this.tagHierarchy.h1,h2:this.tagHierarchy.h1,h3:this.tagHierarchy.h1,h4:this.tagHierarchy.h1,h5:this.tagHierarchy.h1,h6:this.tagHierarchy.h1,
table:this.tagHierarchy.table};this.replacingElements={h1:{p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,pre:!0,blockquote:!0}};this.replacingElements={h1:this.replacingElements.h1,h2:this.replacingElements.h1,h3:this.replacingElements.h1,h4:this.replacingElements.h1,h5:this.replacingElements.h1,h6:this.replacingElements.h1,pre:this.replacingElements.h1,p:this.replacingElements.h1,blockquote:this.replacingElements.h1};this.allowedToStealElements={h1:{textNode:!0}};this.allowedToStealElements={h1:this.allowedToStealElements.h1,
h2:this.allowedToStealElements.h1,h3:this.allowedToStealElements.h1,h4:this.allowedToStealElements.h1,h5:this.allowedToStealElements.h1,h6:this.allowedToStealElements.h1,p:this.tagHierarchy.b}},SelectionTree:function(){this.domobj={};this.selection=void 0;this.children=[]},onChange:function(a,c,g,d){this.updateSelectionTimeout&&window.clearTimeout(this.updateSelectionTimeout);var e=this;this.updateSelectionTimeout=window.setTimeout(function(){var k=new l.Selection.SelectionRange(!0);if(k.startContainer&&
"HTML"!==k.startContainer.nodeName&&"BODY"!==k.startContainer.nodeName)b.browser.msie&&d&&k.select(),l.Selection._updateSelection(c,k);else if(!this.updateSelectionTimeout)e.onChange(a,c,10+2*(g||5))},g||5)},preventSelectionChanged:function(){this.preventSelectionChangedFlag=!0},isSelectionChangedPrevented:function(){var a=this.preventSelectionChangedFlag;this.preventSelectionChangedFlag=!1;return a},isSelectionEditable:function(){return this.rangeObject.commonAncestorContainer&&b(this.rangeObject.commonAncestorContainer).contentEditable()},
isFloatingMenuVisible:function(){var a=b(l.Selection.rangeObject.commonAncestorContainer).attr("data-aloha-floatingmenu-visible");return"undefined"!==a&&"true"===a?!0:!1},updateSelection:function(a){return this._updateSelection(a,null)},_updateSelection:function(a,g){if(a&&a.originalEvent&&!0===a.originalEvent.stopSelectionUpdate||"undefined"===typeof g)return!1;if((this.rangeObject=g=g||new l.Selection.SelectionRange(!0))&&g.startContainer&&"HR"===g.startContainer.nodeName&&g.endContainer&&"HR"===
g.endContainer.nodeName)return l.getSelection().removeAllRanges(),!0;g.update();if(g&&g.startContainer&&g.endContainer&&0<b(g.commonAncestorContainer).closest(".aloha-editable").length){var d=!(3===g.startContainer.nodeType&&!b(g.startContainer.parentNode).contentEditable()),n=!(3===g.endContainer.nodeType&&!b(g.endContainer.parentNode).contentEditable());if(!d||!n)return l.getSelection().removeAllRanges(),!0}if(this.isSelectionChangedPrevented())return!0;l.trigger("aloha-selection-changed-before",
[this.rangeObject,a]);l.trigger("aloha-selection-changed",[this.rangeObject,a]);var d=this.rangeObject,f=d.startContainer,n=d.endContainer;if(f&&n){if(f=c(f,u),n=c(n,z),f||n)u=f,z=n,e.pub("aloha.selection.context-change",{range:d,event:a})}else k.warn("aloha/selection","encountered range object without start or end container");l.trigger("aloha-selection-changed-after",[this.rangeObject,a]);return!0},getSelectionTree:function(a){if(!a)return this.rangeObject.getSelectionTree();if(!a.commonAncestorContainer)return l.Log.error(this,
"the rangeObject is missing the commonAncestorContainer"),!1;this.inselection=!1;v.Utils.Dom.doCleanup({merge:!0},a)&&(a.update(),a.select());return this.recursiveGetSelectionTree(a,a.commonAncestorContainer)},recursiveGetSelectionTree:function(a,c){var g=0,d=this,e=[];b(c).contents().each(function(b){var k="none",n=!1,f=!1,m=!1,v=!1,u=!1,p=!1;a.isCollapsed()&&c===a.startContainer&&a.startOffset==b&&(e[g]=new l.Selection.SelectionTree,e[g].selection="collapsed",e[g].domobj=void 0,d.inselection=!1,
m=!0,g++);if(!d.inselection&&!m){var z;try{z=this.nodeType}catch(A){return}switch(z){case 3:this===a.startContainer&&(d.inselection=!0,k=0<a.startOffset?"partial":"full",n=a.startOffset,f=this.length);break;case 1:this===a.startContainer&&0===a.startOffset&&(d.inselection=!0,k="full"),c===a.startContainer&&a.startOffset===b&&(d.inselection=!0,k="full")}}if(d.inselection&&!m){"none"==k&&(k="full");switch(this.nodeType){case 3:this===a.endContainer&&(d.inselection=!1,a.endOffset<this.length&&(k="partial"),
!1===n&&(n=0),f=a.endOffset);break;case 1:this===a.endContainer&&0===a.endOffset&&(d.inselection=!1)}c===a.endContainer&&a.endOffset<=b&&(d.inselection=!1,k="none")}e[g]=new l.Selection.SelectionTree;e[g].domobj=this;e[g].selection=k;"partial"==k&&(e[g].startOffset=n,e[g].endOffset=f);e[g].children=d.recursiveGetSelectionTree(a,this);k=e[g].children.length;if(0<k){for(b=0;b<k;++b)switch(e[g].children[b].selection){case "none":v=!0;break;case "full":p=!0;break;case "partial":u=!0}u||p&&v?e[g].selection=
"partial":!p||u||v||(e[g].selection="full")}g++});a.isCollapsed()&&c===a.startContainer&&a.startOffset==c.childNodes.length&&(e[g]=new l.Selection.SelectionTree,e[g].selection="collapsed",e[g].domobj=void 0);return e},getRangeObject:function(){return this.rangeObject},isRangeObjectWithinMarkup:function(a,c,g,d,e){var k=this;a=b(c?a.endContainer:a.startContainer).parents();var n=!1,f=-1;"undefined"!==typeof d&&"function"!==typeof d&&l.Log.error(this,"parameter tagComparator is not a function");"undefined"===
typeof d&&(d=function(a,c){return k.standardTextLevelSemanticsComparator(a,c)});0<a.length&&a.each(function(){if(this===e)return l.Log.debug(k,"reached limit dom obj"),!1;if(d(this,g))return!1===n&&(n=[]),l.Log.debug(k,"reached object equal to markup"),f++,n[f]=this,!0});return n},standardSectionsAndGroupingContentComparator:function(a,c){if(1!==a.nodeType)return l.Log.debug(this,"only element nodes (nodeType == 1) can be compared"),!1;if(!c[0].nodeName)return!1;var b=l.Selection.replacingElements[a.nodeName.toLowerCase()];
return b&&b[c[0].nodeName.toLowerCase()]},standardTagNameComparator:function(a,c){if(1===a.nodeType)return a.nodeName!=c[0].nodeName?!1:!0;l.Log.debug(this,"only element nodes (nodeType == 1) can be compared");return!1},standardTextLevelSemanticsComparator:function(a,c){if(1===a.nodeType)return a.nodeName==c[0].nodeName&&this.standardAttributesComparator(a,c)?!0:!1;l.Log.debug(this,"only element nodes (nodeType == 1) can be compared");return!1},standardAttributesComparator:function(a,c){var b=d.words(a&&
a.className||""),g=d.words(c.length&&c[0].className||"");f.sortUnique(b);f.sortUnique(g);return f.equal(b,g)},changeMarkup:function(c,g,d){var e=g[0].tagName.toLowerCase(),k,f,m=this.isRangeObjectWithinMarkup(c,!1,g,d,k),v=this.isRangeObjectWithinMarkup(c,!0,g,d,k),u,p,z,A;if(this.replacingElements[e])f=c,c=new this.SelectionRange(c),e=l.activeEditable?l.activeEditable.obj.get(0):b("body"),c.update(e),g.isReplacingElement=!0;else if(c.isCollapsed())return l.Log.debug(this,"early returning from applying markup because nothing is currently selected"),
!1;k=l.activeEditable?l.activeEditable.obj[0]:b("body");g.isReplacingElement||0!==c.startOffset||null!=(z=this.getTextNodeSibling(!1,c.commonAncestorContainer.parentNode,c.startContainer))&&(A=this.isRangeObjectWithinMarkup({startContainer:z,startOffset:0},!1,g,d,k));g.isReplacingElement||c.endOffset!==c.endContainer.length||null!=(u=this.getTextNodeSibling(!0,c.commonAncestorContainer.parentNode,c.endContainer))&&(p=this.isRangeObjectWithinMarkup({startContainer:u,startOffset:0},!1,g,d,k));if(!g.isReplacingElement&&
m&&!v)l.Log.info(this,"markup 2 non-markup"),this.prepareForRemoval(c.getSelectionTree(),g,d),b(m).addClass("preparedForRemoval"),this.insertCroppedMarkups(m,c,!1,d);else if(!g.isReplacingElement&&m&&v)l.Log.info(this,"markup 2 markup"),this.prepareForRemoval(c.getSelectionTree(),g,d),this.splitRelevantMarkupObject(m,v,c,d);else if(!g.isReplacingElement&&(!m&&v||p||A))l.Log.info(this,"non-markup 2 markup OR with next2markup"),A&&p?(m=new l.Selection.SelectionRange(c),m.startContainer=b(A[A.length-
1]).textNodes()[0],m.startOffset=0,m.endContainer=b(p[p.length-1]).textNodes().last()[0],m.endOffset=m.endContainer.length,m.update(),this.applyMarkup(m.getSelectionTree(),c,g,d),l.Log.info(this,"double extending previous markup(previous and after selection), actually wrapping it ...")):!A||p||v?A&&!p&&v?(m=new l.Selection.SelectionRange(c),m.startContainer=b(A[A.length-1]).textNodes()[0],m.startOffset=0,m.endContainer=b(v[v.length-1]).textNodes().last()[0],m.endOffset=m.endContainer.length,m.update(),
this.applyMarkup(m.getSelectionTree(),c,g,d),l.Log.info(this,"double extending previous markup(previous and relevant at the end), actually wrapping it ...")):!A&&p?(this.extendExistingMarkupWithSelection(p,c,!0,d),l.Log.info(this,"extending following markup backwards")):this.extendExistingMarkupWithSelection(v,c,!0,d):(this.extendExistingMarkupWithSelection(A,c,!1,d),l.Log.info(this,"extending previous markup"));else if(g.isReplacingElement||!(m||v||A||p)){l.Log.info(this,"non-markup 2 non-markup");
c.startContainer!==c.endContainer?v=!1:1!=c.startContainer.nodeType?v=!1:(v=c.startContainer.firstChild,v=!v||!v.nextSibling&&"BR"==v.nodeName);if(v){g=g.clone();d=c.startContainer!==c.endContainer?!1:1!=c.startContainer.nodeType?!1:n.isEndBreak(c.startContainer);d&&g[0].appendChild(n.createEndBreak());l.activeEditable&&b.browser.mozilla&&l.activeEditable.obj.focus();n.isEditable(c.startContainer)?(n.copyAttributes(c.startContainer,g[0]),b(c.startContainer).after(g[0]).remove()):n.isEditingHost(c.startContainer)&&
(b(c.startContainer).append(g[0]),n.ensureContainerEditable(g[0]));f.startContainer=g[0];f.endContainer=g[0];f.startOffset=0;f.endOffset=0;return}this.applyMarkup(c.getSelectionTree(),c,g,d,{setRangeObject2NewMarkup:!0});f.startContainer=c.startContainer;f.endContainer=c.endContainer;f.startOffset=c.startOffset;f.endOffset=c.endOffset}g.isReplacingElement&&(f&&f.startContainer.className&&-1<f.startContainer.className.indexOf("preparedForRemoval")&&(d=b(f.startContainer).parents(g[0].tagName).get(0),
f.startContainer=d,c.startContainer=d),f&&f.endContainer.className&&-1<f.endContainer.className.indexOf("preparedForRemoval")&&(d=b(f.endContainer).parents(g[0].tagName).get(0),f.endContainer=d,c.endContainer=d));b(".preparedForRemoval").zap();g.isReplacingElement?(a.Node.ELEMENT_NODE===f.startContainer.nodeType&&f.startContainer.childNodes&&f.startContainer.childNodes.length<f.startOffset&&(f.startOffset=f.startContainer.childNodes.length,c.startOffset=f.startContainer.childNodes.length),a.Node.ELEMENT_NODE===
f.endContainer.nodeType&&f.endContainer.childNodes&&f.endContainer.childNodes.length<f.endOffset&&(f.endOffset=f.endContainer.childNodes.length,c.endOffset=f.endContainer.childNodes.length),c.endContainer=f.endContainer,c.endOffset=f.endOffset,c.startContainer=f.startContainer,c.startOffset=f.startOffset,f.update(),f.select()):(c.update(),c.select())},areMarkupObjectsAsLongAsRangeObject:function(a,c,g){var d,e,k;if(0!==g.startOffset)return!1;d=0;for(k=a.length;d<k;d++)if(e=b(a[d]),e.textNodes().first()[0]!==
g.startContainer)return!1;d=0;for(a=c.length;d<a;d++)if(e=b(c[d]),e=e.textNodes().last()[0],e!==g.endContainer||e.length!=g.endOffset)return!1;return!0},splitRelevantMarkupObject:function(a,c,g,d){b(a).addClass("preparedForRemoval");b(c).addClass("preparedForRemoval");if(this.areMarkupObjectsAsLongAsRangeObject(a,c,g))return!0;var e=this.intersectRelevantMarkupObjects(a,c);e?(this.insertCroppedMarkups([e],g,!1,d),this.insertCroppedMarkups([e],g,!0,d)):(this.insertCroppedMarkups(a,g,!1,d),this.insertCroppedMarkups(c,
g,!0,d));return!0},intersectRelevantMarkupObjects:function(a,c){var b=!1,g,d,e,k,n,f;if(!a||!c)return b;n=a.length;f=c.length;for(g=0;g<n;g++)for(d=a[g],e=0;e<f;e++)k=c[e],d===k&&(b=d);return b},extendExistingMarkupWithSelection:function(a,c,g,d){var e,k,n,f,m,v,l;g||(e=!0);g&&(k=!0);g=[];n=0;for(f=a.length;n<f;n++)g[n]=new this.SelectionRange,m=a[n],k&&!e&&(g[n].startContainer=c.startContainer,g[n].startOffset=c.startOffset,v=b(m).textNodes(!0),l=v.length-1,g[n].endContainer=v[l],g[n].endOffset=
v[l].length,g[n].update(),this.applyMarkup(g[n].getSelectionTree(),c,this.getClonedMarkup4Wrapping(m),d,{setRangeObject2NewMarkup:!0})),!k&&e&&(v=b(m).textNodes(!0),g[n].startContainer=v[0],g[n].startOffset=0,g[n].endContainer=c.endContainer,g[n].endOffset=c.endOffset,g[n].update(),this.applyMarkup(g[n].getSelectionTree(),c,this.getClonedMarkup4Wrapping(m),d,{setRangeObject2NewMarkup:!0}));return!0},getClonedMarkup4Wrapping:function(a){a=b(a.outerHTML).removeClass("preparedForRemoval").empty();0===
a.attr("class").length&&a.removeAttr("class");return a},insertCroppedMarkups:function(a,c,g,d){var e,k,n,f,m;g?k=!0:e=!0;g=[];for(f=0;f<a.length;f++){g[f]=new this.SelectionRange;m=a[f];if(e&&!k){n=b(m).textNodes(!0);g[f].startContainer=n[0];g[f].startOffset=0;if(g[f].startContainer===c.startContainer&&g[f].startOffset===c.startOffset)continue;0===c.startOffset?(g[f].endContainer=this.getTextNodeSibling(!1,m,c.startContainer),g[f].endOffset=g[f].endContainer.length):(g[f].endContainer=c.startContainer,
g[f].endOffset=c.startOffset);g[f].update();this.applyMarkup(g[f].getSelectionTree(),c,this.getClonedMarkup4Wrapping(m),d,{setRangeObject2NextSibling:!0})}!e&&k&&(g[f].startContainer=c.endContainer,g[f].startOffset=c.endOffset,n=b(m).textNodes(!0),g[f].endContainer=n[n.length-1],g[f].endOffset=n[n.length-1].length,g[f].update(),this.applyMarkup(g[f].getSelectionTree(),c,this.getClonedMarkup4Wrapping(m),d,{setRangeObject2PreviousSibling:!0}))}return!0},changeMarkupOnSelection:function(a){var c=this.getRangeObject();
this.changeMarkup(c,a,this.getStandardTagComparator(a));v.Utils.Dom.doCleanup({merge:!0},c);c.update();c.select();this.rangeObject=c},applyMarkup:function(a,c,b,g,d){var e,k;d=d||{};this.prepareForRemoval(a,b,g);a=this.optimizeSelectionTree4Markup(a,b,g);for(e=0;e<a.length;e++)k=a[e],k.wrappable?this.wrapMarkupAroundSelectionTree(k.elements,c,b,g,d):(l.Log.debug(this,"dive further into non-wrappable object"),this.applyMarkup(k.element.children,c,b,g,d))},getMarkupType:function(a){var c=b(a)[0].nodeName.toLowerCase();
a.outerHtml&&l.Log.debug(this,"Node name detected: "+c+" for: "+a.outerHtml());if("#text"==c)return"textNode";if(this.replacingElements[c])return"sectionOrGroupingContent";if(this.tagHierarchy[c])return"textLevelSemantics";l.Log.warn(this,"unknown markup passed to this.getMarkupType(...): "+a.outerHtml())},getStandardTagComparator:function(a){var c=this;switch(this.getMarkupType(a)){case "textNode":a=function(a,c){return!1};break;case "sectionOrGroupingContent":a=function(a,b){return c.standardSectionsAndGroupingContentComparator(a,
b)};break;default:a=function(a,b){return c.standardTextLevelSemanticsComparator(a,b)}}return a},prepareForRemoval:function(a,c,g){var d,e;"undefined"!==typeof g&&"function"!==typeof g&&l.Log.error(this,"parameter tagComparator is not a function");"undefined"===typeof g&&(g=this.getStandardTagComparator(c));for(d=0;d<a.length;d++)e=a[d],e.domobj&&("full"==e.selection||"partial"==e.selection&&c.isReplacingElement)&&1===e.domobj.nodeType&&g(e.domobj,c)&&(l.Log.debug(this,"Marking for removal: "+e.domobj.nodeName),
b(e.domobj).addClass("preparedForRemoval")),"none"!=e.selection&&0<e.children.length&&this.prepareForRemoval(e.children,c,g)},wrapMarkupAroundSelectionTree:function(a,c,g,d,e){var k=[],n=-1,f="",m="",v,u,p;l.Log.debug(this,"The formatting <"+g[0].tagName+"> will be wrapped around the selection");for(v=0;v<a.length;v++)if(u=a[v],u.domobj&&!this.canTag1WrapTag2(u.domobj.parentNode.tagName.toLowerCase(),g[0].tagName.toLowerCase()))l.Log.info(this,"Skipping the wrapping of <"+g[0].tagName.toLowerCase()+
"> because this tag is not allowed inside <"+u.domobj.parentNode.tagName.toLowerCase()+">");else if(!u.domobj||3!==u.domobj.nodeType||0!==b.trim(u.domobj.nodeValue).length){if(u.domobj&&"partial"==u.selection&&!g.isReplacingElement)if(void 0!==u.startOffset&&void 0===u.endOffset)n++,f+=u.domobj.data.substr(0,u.startOffset),u.domobj.data=u.domobj.data.substr(u.startOffset,u.domobj.data.length-u.startOffset),k[n]=u.domobj;else if(void 0!==u.endOffset&&void 0===u.startOffset)n++,m+=u.domobj.data.substr(u.endOffset,
u.domobj.data.length-u.endOffset),u.domobj.data=u.domobj.data.substr(0,u.endOffset),k[n]=u.domobj;else if(void 0!==u.endOffset&&void 0!==u.startOffset){if(u.startOffset==u.endOffset){l.Log.debug(this,"skipping empty selection");continue}n++;f+=u.domobj.data.substr(0,u.startOffset);p=u.domobj.data.substr(u.startOffset,u.endOffset-u.startOffset);m+=u.domobj.data.substr(u.endOffset,u.domobj.data.length-u.endOffset);u.domobj.data=p;k[n]=u.domobj}else l.Log.debug(this,"diving into object"),this.applyMarkup(u.children,
c,g,d,e);u.domobj&&("full"==u.selection||"partial"==u.selection&&g.isReplacingElement)&&(n++,k[n]=u.domobj)}0<k.length&&(k=b(k),b.each(k,function(a,c){b.browser.msie&&3==c.nodeType&&!c.nextSibling&&!c.previousSibling&&c.parentNode&&"li"==c.parentNode.nodeName.toLowerCase()&&(c.data=b.trim(c.data))}),a=k.wrapAll(g).parent(),a.before(f).after(m),e.setRangeObject2NewMarkup&&(f=k.textNodes(),-1!=f.index(c.startContainer)&&(c.startOffset=0),-1!=f.index(c.endContainer)&&(c.endOffset=c.endContainer.length)),
e.setRangeObject2NextSibling&&(f=!0,m=a.textNodes(!0).last()[0],-1!=k.index(c.startContainer)&&(c.startContainer=this.getTextNodeSibling(f,a.parent(),m),c.startOffset=0),-1!=k.index(c.endContainer)&&(c.endContainer=this.getTextNodeSibling(f,a.parent(),m),c.endOffset-=m.length)),e.setRangeObject2PreviousSibling&&(f=!1,m=a.textNodes(!0).first()[0],-1!=k.index(c.startContainer)&&(c.startContainer=this.getTextNodeSibling(f,a.parent(),m),c.startOffset=0),-1!=k.index(c.endContainer)&&(c.endContainer=this.getTextNodeSibling(f,
a.parent(),m),c.endOffset=c.endContainer.length)))},getTextNodeSibling:function(a,c,g){c=b(c).textNodes(!0);g=c.index(g);return-1==g?!1:c[g+(a?1:-1)]||!1},optimizeSelectionTree4Markup:function(a,c,g){var d=[],e=0,k=0,n=this,f,m,v,l;"undefined"===typeof g&&(g=function(a,c){return n.standardTextLevelSemanticsComparator(c)});for(f=0;f<a.length;f++)if(a[f].domobj&&"none"!=a[f].selection)if(c.isReplacingElement&&g(c[0],b(a[f].domobj)))void 0!==d[e]&&e++,d[e]={},d[e].wrappable=!0,d[e].elements=[],d[e].elements[k]=
a[f],e++;else if(this.canMarkupBeApplied2ElementAsWhole([a[f]],c))if(void 0===d[e]&&(d[e]={},d[e].wrappable=!0,d[e].elements=[]),c.isReplacingElement){l=f;for(m=f-1;0<=m;m--)if(this.canMarkupBeApplied2ElementAsWhole([a[m]],c)&&this.isMarkupAllowedToStealSelectionTreeElement(a[m],c))l=m;else break;v=f;for(m=f+1;m<a.length;m++)if(this.canMarkupBeApplied2ElementAsWhole([a[m]],c)&&this.isMarkupAllowedToStealSelectionTreeElement(a[m],c))v=m;else break;k=0;for(m=l;m<=v;m++)d[e].elements[k]=a[m],d[e].elements[k].selection=
"full",k++;k=0}else d[e].elements[k]=a[f],k++;else void 0!==d[e]&&e++,d[e]={},d[e].wrappable=!1,d[e].element=a[f],k=0,e++;return d},isMarkupAllowedToStealSelectionTreeElement:function(a,c){if(!a.domobj)return!1;var b=a.domobj.nodeName.toLowerCase(),b="#text"==b?"textNode":b,g=c[0].nodeName.toLowerCase();return(g=this.allowedToStealElements[g])&&g[b]},canMarkupBeApplied2ElementAsWhole:function(a,c){var b,g,d;c.jquery&&(b=c[0].tagName);c.tagName&&(b=c.tagName);for(g=0;g<a.length;g++)if(d=a[g],d.domobj&&
("none"!=d.selection||c.isReplacingElement)&&(!this.canTag1WrapTag2(b,d.domobj.nodeName)||0<d.children.length&&!this.canMarkupBeApplied2ElementAsWhole(d.children,c)))return!1;return!0},canTag1WrapTag2:function(a,c){a="#text"==a?"textNode":a.toLowerCase();c="#text"==c?"textNode":c.toLowerCase();var b=this.tagHierarchy[a];return b&&this.tagHierarchy[c]?b[c]:!0},mayInsertTag:function(a){var c;if("object"==typeof this.rangeObject.unmodifiableMarkupAtStart){for(c=0;c<this.rangeObject.unmodifiableMarkupAtStart.length;++c)if(!this.canTag1WrapTag2(this.rangeObject.unmodifiableMarkupAtStart[c].nodeName,
a))return!1;return!0}l.Log.warn(this,"Unable to determine whether tag "+a+" may be inserted");return!0},toString:function(){return"Aloha.Selection"},SelectionRange:v.Utils.RangeObject.extend({_constructor:function(a){this._super(a);a&&(a.commonAncestorContainer&&(this.commonAncestorContainer=a.commonAncestorContainer),a.selectionTree&&(this.selectionTree=a.selectionTree),a.limitObject&&(this.limitObject=a.limitObject),a.markupEffectiveAtStart&&(this.markupEffectiveAtStart=a.markupEffectiveAtStart),
a.unmodifiableMarkupAtStart&&(this.unmodifiableMarkupAtStart=a.unmodifiableMarkupAtStart),a.splitObject&&(this.splitObject=a.splitObject))},commonAncestorContainer:void 0,selectionTree:void 0,markupEffectiveAtStart:[],unmodifiableMarkupAtStart:[],limitObject:void 0,splitObject:void 0,select:function(){this._super();l.Selection.updateSelection()},update:function(a){this.updatelimitObject();this.updateMarkupEffectiveAtStart();this.updateCommonAncestorContainer(a);this.selectionTree=void 0},getSelectionTree:function(){this.selectionTree||
(this.selectionTree=l.Selection.getSelectionTree(this));return this.selectionTree},getSelectedSiblings:function(a){var c=this.getSelectionTree();return this.recursionGetSelectedSiblings(a,c)},recursionGetSelectedSiblings:function(a,c){var b=!1,g=!1,d;for(d=0;d<c.length;++d)if(c[d].domobj===a)g=!0,b=[];else if(!g&&c[d].children){if(b=this.recursionGetSelectedSiblings(a,c[d].children),!1!==b)break}else if(g&&c[d].domobj&&"collapsed"!=c[d].selection&&"none"!=c[d].selection)b.push(c[d].domobj);else if(g&&
"none"==c[d].selection)break;return b},updateMarkupEffectiveAtStart:function(){this.markupEffectiveAtStart=[];this.unmodifiableMarkupAtStart=[];var a=this.getStartContainerParents(),c=!1,b,g,d;for(g=0;g<a.length;g++)d=a[g],c||d===this.limitObject?(c=!0,this.unmodifiableMarkupAtStart.push(d)):(this.markupEffectiveAtStart[g]=d,!b&&v.Utils.Dom.isSplitObject(d)&&(b=!0,this.splitObject=d));b||(this.splitObject=!1)},updatelimitObject:function(){if(l.editables&&0<l.editables.length){var a=this.getStartContainerParents(),
c=l.editables,g,d,e,k;for(g=0;g<a.length;g++)for(d=a[g],e=0;e<c.length;e++)if(k=c[e].obj[0],d===k)return this.limitObject=d,!0}this.limitObject=b("body");return!0},toString:function(a){return a?"Aloha.Selection.SelectionRange {start ["+this.startContainer.nodeValue+"] offset "+this.startOffset+", end ["+this.endContainer.nodeValue+"] offset "+this.endOffset+"}":"Aloha.Selection.SelectionRange"}})});var A=p.extend({_constructor:function(a){this._nativeSelection=a;this.ranges=[];this.preventChange=
!1},anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0,isCollapsed:!1,rangeCount:0,collapse:function(a,c){this._nativeSelection.collapse(a,c)},collapseToStart:function(){throw"NOT_IMPLEMENTED";},extend:function(a,c){},modify:function(a,c,b){},collapseToEnd:function(){this._nativeSelection.collapseToEnd()},selectAllChildren:function(a){throw"NOT_IMPLEMENTED";},deleteFromDocument:function(){throw"NOT_IMPLEMENTED";},getRangeAt:function(a){a=this._nativeSelection.getRangeAt(a);g(a);return a},
addRange:function(a){this._nativeSelection.addRange(a);var c=this._nativeSelection._ranges;g(a);c[0]=a;l.Selection.updateSelection()},removeRange:function(a){this._nativeSelection.removeRange()},removeAllRanges:function(){this._nativeSelection.removeAllRanges()},refresh:function(a){},toString:function(){return"Aloha.Selection"},getRangeCount:function(){return this._nativeSelection.rangeCount}});l.getSelection=function(a){a=a!==document||a!==window?window:a;return new A(window.rangy.getSelection(a))};
l.createRange=function(a){return window.rangy.createRange(a)};p=new m;return l.Selection=p});define("aloha/block-jump",["aloha/core","jquery","aloha/console"],function(l,b,p){function m(d,e){d.deleteData(0,d.length);""!==e&&(d.nextSibling&&3===d.nextSibling.nodeType?d.nextSibling.insertData(0,e):d.previousSibling&&3===d.previousSibling.nodeType?d.previousSibling.insertData(d.previousSibling.length,e):d.insertData(0,e));setTimeout(function(){0===d.length&&b(d).remove()},0)}function f(){if(d){var b=
d.nodeValue.replace(/\u200b/,"");b===d.nodeValue&&p.warn("Expected to remove the zero width text node fix, but couldn't find it");m(d,b);d=null}}var d=null;return{removeZeroWidthTextNodeFix:f,insertZeroWidthTextNodeFix:function(k,e){f();d=document.createTextNode("\u200b");e?b(k).after(d):b(k).before(d);l.bind("aloha-selection-changed",function(b){f();l.unbind(b)});return d}}});define("aloha/markup","aloha/core util/class util/html jquery aloha/ecma5shims aloha/console aloha/block-jump".split(" "),
function(l,b,p,m,f,d,k){function e(a){return"false"===m(a).attr("contenteditable")}function n(a){return a&&3===a.nodeType}function a(a){return a?n(a)?a.length:a.childNodes.length:0}function c(a){return a?a.nextSibling?n(a.nextSibling)&&!(0<a.nextSibling.data.replace(/\s+/g,"").length)||"BR"===a.nextSibling.nodeName&&a.nextSibling===a.parentNode.lastChild||""===a.nextSibling.innerHTML&&!e(a.nextSibling)?c(a.nextSibling):a.nextSibling:a.parentNode?c(a.parentNode):null:null}function g(a){return a?a.previousSibling?
!n(a.previousSibling)||0<a.previousSibling.data.replace(/\s+/g,"").length?""!==a.previousSibling.innerHTML||e(a.previousSibling)?a.previousSibling:g(a.previouSibling):g(a.previousSibling):a.parentNode?g(a.parentNode):null:null}function v(a,c){return 0===c||c<=a.data.length-a.data.replace(/^\s+/,"").length}function u(c,b){var g=a(c);if(g===b)return!0;var d=n(c);return d&&c.data.replace(/\s+$/,"").length===b?!0:1!==g||d?!1:"BR"===c.childNodes[0].nodeName}function z(a,c){return B?f.compareDocumentPosition(a,
c)&16:0<m(a).find(c).length}function A(a){var c;if(c=window.$_alohaPlaceholder){c=a.startContainer;a=a.endContainer;var b=window.$_alohaPlaceholder;c=!(b.is(c)||b.is(a)||z(b[0],c)||z(b[0],a))}c&&(0===window.$_alohaPlaceholder.html().replace(/^(&nbsp;)*$/,"").length&&window.$_alohaPlaceholder.remove(),window.$_alohaPlaceholder=null)}function y(a,c){var b;if(a.parentNode){for(b=0;b<c.length;b++)if(c[b]===a.parentNode.nodeName)return!0;return y(a.parentNode,c)}return!1}function C(a,c){if(!a.parentNode)return!0;
var b=3===a.nodeType&&a.parentNode.firstChild===a||a.parentNode.children[0]===a,g="TR"===a.nodeName&&-1!==a.parentNode.children[0].className.indexOf("aloha-table-selectcolumn"),g=("TD"===a.nodeName&&-1!==a.parentNode.children[0].className.indexOf("aloha-table-selectrow")||g)&&a.parentNode.children[1]===a;return b||g?a.parentNode.nodeName===c?!0:C(a.parentNode,c):!1}var D=window.GENTICS,B=!!(m.browser.msie&&9>parseInt(m.browser.version,10)),G=function(){return function(a,c){if(!a.parentNode)return!0;
var b;a:{b=a.parentNode;var g,d;for(d=b.childNodes.length-1;-1<d;d--)if(g=b.childNodes[d],"CAPTION"!==g.nodeName&&(3!==g.nodeType||!/^[\t\n\r ]+$/.test(g.data))){b=g;break a}b=b.lastChild}return b===a?a.parentNode.nodeName===c?!0:G(a.parentNode,c):!1}}();l.Markup=b.extend({keyHandlers:{},addKeyHandler:function(a,c){this.keyHandlers[a]||(this.keyHandlers[a]=[]);this.keyHandlers[a].push(c)},removeKeyHandler:function(a){this.keyHandlers[a]&&(this.keyHandlers[a]=null)},insertBreak:function(){var a=l.Selection.rangeObject,
c,b,g;a.isCollapsed()||this.removeSelectedMarkup();g=m("<br/>");D.Utils.Dom.insertIntoDOM(g,a,l.activeEditable.obj);if(b=D.Utils.Dom.searchAdjacentTextNode(g.parent().get(0),D.Utils.Dom.getIndexInParent(g.get(0))+1,!1))c=b.data.search(/\S/),0<c&&(b.data=b.data.substring(c));a.startContainer=a.endContainer=g.get(0).parentNode;a.startOffset=a.endOffset=D.Utils.Dom.getIndexInParent(g.get(0))+1;a.correctRange();a.clearCaches();a.select()},preProcessKeyStrokes:function(a){if("keydown"!==a.type)return!1;
var c,b;if(this.keyHandlers[a.keyCode])for(c=this.keyHandlers[a.keyCode],b=0;b<c.length;++b)if(!c[b](a))return!1;return 37===a.keyCode||39===a.keyCode?l.getSelection().getRangeCount()&&(c=l.getSelection().getRangeAt(0),this.processCursor(c,a.keyCode))?(A(l.Selection.rangeObject),!0):!1:38===a.keyCode||40===a.keyCode?l.getSelection().getRangeCount()&&(c=l.getSelection().getRangeAt(0),this.processCursorUpDown(c,a.keyCode))?!1:!0:8===a.keyCode?(a.preventDefault(),l.execCommand("delete",!1),!1):46===
a.keyCode?(l.execCommand("forwarddelete",!1),!1):13===a.keyCode?(!a.shiftKey&&p.allowNestedParagraph(l.activeEditable)?l.execCommand("insertparagraph",!1):l.execCommand("insertlinebreak",!1),!1):!0},processCursorUpDown:function(a,c){if(!a.collapsed)return!1;var b=a.startContainer;if(38===c&&v(b,a.startOffset)&&y(b,["TD","TH"])&&C(b,"TABLE")){b=m(b).parents("div.aloha-table-wrapper").get(0);if(!b)return!1;for(b=b.previousElementSibling?b.previousElementSibling:b.previousSibling;3!==b.nodeType;)if(b=
b.lastChild,null===b)return!1;l.Selection.rangeObject.startContainer=b;l.Selection.rangeObject.endContainer=b;l.Selection.rangeObject.startOffset=b.length;l.Selection.rangeObject.endOffset=b.length;l.Selection.rangeObject.select();l.activeEditable&&m.browser.mozilla&&l.activeEditable.obj.focus();return!0}if(40===c&&u(b,a.startOffset)&&y(b,["TD","TH"])&&G(b,"TABLE")){b=m(b).parents("div.aloha-table-wrapper").get(0);if(!b)return!1;for(b=b.nextElementSibling?b.nextElementSibling:b.nextSibling;3!==b.nodeType;)if(b=
b.firstChild,null===b)return!1;l.Selection.rangeObject.startContainer=b;l.Selection.rangeObject.endContainer=b;l.Selection.rangeObject.startOffset=0;l.Selection.rangeObject.endOffset=0;l.Selection.rangeObject.select();l.activeEditable&&m.browser.mozilla&&l.activeEditable.obj.focus();return!0}return!1},processCursor:function(b,d){if(!b.collapsed)return!0;k.removeZeroWidthTextNodeFix();var f=b.startContainer,p=l.getSelection();if(!f)return!0;var y,z;if(m.browser.msie&&7>=parseInt(m.browser.version,
10)&&n(f))if(37==d){for(z=b.startOffset;0<z&&"\u200b"===f.data.charAt(z-1);)z--;z!=b.startOffset&&(b.setStart(b.startContainer,z),b.setEnd(b.startContainer,z),p=l.getSelection(),p.removeAllRanges(),p.addRange(b))}else if(39==d){for(z=b.startOffset;z<f.data.length&&"\u200b"===f.data.charAt(z);)z++;z!=b.startOffset&&(b.setStart(b.startContainer,z),b.setEnd(b.startContainer,z),p.removeAllRanges(),p.addRange(b))}if(B&&!m(f).contentEditable()&&(p=m(f).parents("[contenteditable=false]"),0<p.length))if(p.parent().hasClass("aloha-editable"))y=
p[0];else return!0;var C;if(!y){C=37===d||38===d;z=b.startOffset;if(n(f))if(C){if(1!==z&&!v(f,z))return!0}else{if(!u(f,z))return!0}else f=f.childNodes[z===a(f)?z-1:z];y=C?g(f):c(f)}return e(y)?(f=y,y=new D.Utils.RangeObject,p=C?g(f):c(f),!p||e(p)?(p=m("<div>&nbsp;</div>"),C?m(f).before(p):m(f).after(p),y.startContainer=y.endContainer=p[0],y.startOffset=y.endOffset=0,A(y),window.$_alohaPlaceholder=p):(3===b.startContainer.nodeType&&b.startContainer===b.endContainer&&""!==b.startContainer.nodeValue&&
(C?1===b.startOffset:b.endOffset+1===b.endContainer.length)||1===b.startContainer.nodeType&&(!b.startOffset||b.startContainer.childNodes[b.startOffset]&&1===b.startContainer.childNodes[b.startOffset].nodeType)?(p=k.insertZeroWidthTextNodeFix(f,C),y.startContainer=y.endContainer=p,y.startOffset=y.endOffset=C?1:0):(y.startContainer=y.endContainer=p,y.startOffset=y.endOffset=C?a(p):0,C||k.insertZeroWidthTextNodeFix(f,!0)),A(y)),y.select(),l.trigger("aloha-block-selected",f),l.Selection.preventSelectionChanged(),
!1):!0},processShiftEnter:function(a){this.insertHTMLBreak(a.getSelectionTree(),a)},processEnter:function(a){a.splitObject?this.splitRangeObject(a):this.insertHTMLBreak(a.getSelectionTree(),a)},insertHTMLCode:function(a){var c=l.Selection.rangeObject;this.insertHTMLBreak(c.getSelectionTree(),c,m(a))},insertHTMLBreak:function(a,c,b){var g,d,e,k,n;b=b||m("<br/>");g=0;for(d=a.length;g<d;++g)if(e=a[g],k=e.domobj?m(e.domobj):void 0,"none"!==e.selection)if("collapsed"==e.selection)0<g?(e=m(a[g-1].domobj),
e.after(b)):(e=m(a[1].domobj),e.before(b)),c.startContainer=c.endContainer=b[0].parentNode,c.startOffset=c.endOffset=D.Utils.Dom.getIndexInParent(b[0])+1,c.correctRange();else if(e.domobj&&3===e.domobj.nodeType){e.domobj.nextSibling&&1==e.domobj.nextSibling.nodeType&&l.Selection.replacingElements[e.domobj.nextSibling.nodeName.toLowerCase()]&&k.after("<br/>");if(this.needEndingBreak()){for(n=e.domobj;n;)if(n.nextSibling)n=!1;else{n=n.parentNode;if(D.Utils.Dom.isBlockLevelElement(n)||D.Utils.Dom.isListElement(n))break;
n===c.limitObject&&(n=!1)}n&&m(n).append('<br class="aloha-cleanme" />')}k.between(b,e.startOffset);k=0;for(e=b[0];e;)e=e.previousSibling,++k;c.startContainer=b[0].parentNode;c.endContainer=b[0].parentNode;c.startOffset=k;c.endOffset=k;c.correctRange()}else e.domobj&&1===e.domobj.nodeType&&(0===k.parent().find("br.aloha-ephemera").length&&(m(c.limitObject).find("br.aloha-ephemera").remove(),m(c.commonAncestorContainer).append(this.getFillUpElement(c.splitObject))),k.after(b),c.startContainer=c.commonAncestorContainer,
c.endContainer=c.startContainer,c.startOffset=g+2,c.endOffset=g+2,c.update());c.select()},needEndingBreak:function(){return!m.browser.msie},getSelectedText:function(){var a=l.Selection.rangeObject;return a.isCollapsed()?!1:this.getFromSelectionTree(a.getSelectionTree(),!0)},getFromSelectionTree:function(a,c){var b="",g,d,e,k;g=0;for(d=a.length;g<d;g++)e=a[g],"partial"==e.selection?3===e.domobj.nodeType?b+=e.domobj.data.substring(e.startOffset,e.endOffset):1===e.domobj.nodeType&&e.children&&(c?b+=
this.getFromSelectionTree(e.children,c):(k=m(e.domobj.outerHTML).empty(),k.html(this.getFromSelectionTree(e.children,c)),b+=k.outerHTML())):"full"==e.selection&&(3===e.domobj.nodeType?b+=m(e.domobj).text():1===e.domobj.nodeType&&e.children&&(b+=c?m(e.domobj).text():m(e.domobj).outerHTML()));return b},getSelectedMarkup:function(){var a=l.Selection.rangeObject;return a.isCollapsed()?null:this.getFromSelectionTree(a.getSelectionTree(),!1)},removeSelectedMarkup:function(){var a=l.Selection.rangeObject,
c;a.isCollapsed()||(c=new l.Selection.SelectionRange,this.removeFromSelectionTree(a.getSelectionTree(),c),c.update(),D.Utils.Dom.doCleanup({merge:!0,removeempty:!0},l.Selection.rangeObject),l.Selection.rangeObject=c,c.correctRange(),c.update(),c.select(),l.Selection.updateSelection())},removeFromSelectionTree:function(a,c){var b,g,d,e,k;d=0;for(k=a.length;d<k;d++)e=a[d],"partial"==e.selection?3===e.domobj.nodeType?(g="",0<e.startOffset&&(g+=e.domobj.data.substring(0,e.startOffset)),e.endOffset<e.domobj.data.length&&
(g+=e.domobj.data.substring(e.endOffset,e.domobj.data.length)),e.domobj.data=g,c.startContainer||(c.startContainer=c.endContainer=e.domobj,c.startOffset=c.endOffset=e.startOffset)):1===e.domobj.nodeType&&e.children&&(this.removeFromSelectionTree(e.children,c),b?b.nodeName==e.domobj.nodeName&&(m(b).append(m(e.domobj).contents()),m(e.domobj).remove()):b=e.domobj):"full"==e.selection&&(c.startContainer||((g=D.Utils.Dom.searchAdjacentTextNode(e.domobj.parentNode,D.Utils.Dom.getIndexInParent(e.domobj)+
1,!1,{blocklevel:!1}))?(c.startContainer=c.endContainer=g,c.startOffset=c.endOffset=0):(c.startContainer=c.endContainer=e.domobj.parentNode,c.startOffset=c.endOffset=D.Utils.Dom.getIndexInParent(e.domobj)+1)),m(e.domobj).remove())},splitRangeObject:function(a,c){m(a.splitObject);var b,g;a.update(a.splitObject);b=a.getSelectionTree();g=this.getSplitFollowUpContainer(a);this.splitRangeObjectHelper(b,a,g);g.hasClass("preparedForRemoval")&&g.removeClass("preparedForRemoval");b=this.getInsertAfterObject(a,
g);m(g).insertAfter(b);"li"!==a.splitObject.nodeName.toLowerCase()||l.Selection.standardTextLevelSemanticsComparator(a.splitObject,g)||m(a.splitObject).remove();a.startContainer=null;b=g.contents();0<b.length&&1==b.get(0).nodeType&&"br"===b.get(0).nodeName.toLowerCase()&&(a.startContainer=g.get(0));a.startContainer||(a.startContainer=g.textNodes(!0,!0).first().get(0));a.startContainer||(a.startContainer=g.textNodes(!1).first().parent().get(0));a.startContainer?(a.endContainer=a.startContainer,a.startOffset=
0,a.endOffset=0):(a.startContainer=a.endContainer=g.parent().get(0),a.startOffset=a.endOffset=D.Utils.Dom.getIndexInParent(g.get(0)));a.update();a.select()},getInsertAfterObject:function(a,c){var b,g,d;for(g=0;g<a.markupEffectiveAtStart.length;g++)if(d=a.markupEffectiveAtStart[g],d===a.splitObject&&(b=!0),b&&l.Selection.canTag1WrapTag2(m(d).parent()[0].nodeName,c[0].nodeName))return d;return!1},getFillUpElement:function(a){return m.browser.msie?!1:m('<br class="aloha-cleanme"/>')},removeElementContentWhitespaceObj:function(a){var c=
0,b=[],g,d;for(g=0;g<a.length;++g)d=a[g],d.isElementContentWhitespace&&(b[b.length]=g);for(g=0;g<b.length;++g)d=b[g],a.splice(d-c,1),++c},splitRangeObjectHelper:function(a,c,b,g){b||l.Log.warn(this,"no followUpContainer, no inBetweenMarkup, nothing to do...");var d=this.getFillUpElement(c.splitObject),e=m(c.splitObject),k=!1,n,f,v,u,p;if(0<a.length)for(v=b.contents(),v.length!==a.length&&this.removeElementContentWhitespaceObj(v),f=0,p=a.length;f<p;++f)n=a[f],"none"===n.selection&&!1===k||n.domobj&&
3===n.domobj.nodeType&&n===a[a.length-1]&&n.startOffset===n.domobj.data.length?1<b.textNodes().length||1===n.domobj.nodeType&&0===n.children.length?v.eq(f).remove():D.Utils.Dom.isSplitObject(b[0])?d?b.html(d):b.empty():(b.empty(),b.addClass("preparedForRemoval")):"none"!==n.selection?(n.domobj&&3===n.domobj.nodeType&&void 0!==n.startOffset&&(k=n.domobj.data,0<n.startOffset?n.domobj.data=k.substr(0,n.startOffset):1<a.length?m(n.domobj).remove():(u=m(n.domobj).parent(),D.Utils.Dom.isSplitObject(u[0])?
d?u.html(d):u.empty():u.remove()),0<k.length-n.startOffset?v[f].data=k.substr(n.startOffset,k.length):1<v.length?v.eq(f).remove():D.Utils.Dom.isBlockLevelElement(b[0])?d?b.html(d):b.empty():(b.empty(),b.addClass("preparedForRemoval"))),k=!0,0<n.children.length&&this.splitRangeObjectHelper(n.children,c,v.eq(f),g)):"none"===n.selection&&!0===k&&m(n.domobj).remove();else l.Log.error(this,"can not split splitObject due to an empty selection tree");e.find("br.aloha-ephemera:gt(0)").remove();b.find("br.aloha-ephemera:gt(0)").remove();
e.find(".preparedForRemoval").remove();b.find(".preparedForRemoval").remove();0===e.contents().length&&D.Utils.Dom.isSplitObject(e[0])&&d&&e.html(d);0===b.contents().length&&D.Utils.Dom.isSplitObject(b[0])&&d&&b.html(d)},getSplitFollowUpContainer:function(a){var c;switch(a.splitObject.nodeName.toLowerCase()){case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":if((c=m(a.splitObject).textNodes(":not(.aloha-cleanme)").last()[0])&&a.startContainer===c&&a.startOffset===c.length)return c=m("<p></p>"),
a=m(a.splitObject.outerHTML).contents(),c.append(a),c;break;case "li":if("br"===a.startContainer.nodeName.toLowerCase()&&m(a.startContainer).hasClass("aloha-ephemera"))return c=m("<p></p>"),a=m(a.splitObject.outerHTML).contents(),c.append(a),c;if(!a.splitObject.nextSibling&&0===m.trim(m(a.splitObject).text()).length)return c=m("<p></p>")}return m(a.splitObject.outerHTML)},transformDomObject:function(a,c,b){var g=m(a);c=m("<"+c+">");var d,e=g[0].cloneNode(!1).attributes;if(e)for(d=0;d<e.length;++d)("undefined"===
typeof e[d].specified||e[d].specified)&&c.attr(e[d].nodeName,e[d].nodeValue);g[0].style&&g[0].style.cssText&&(c[0].style.cssText=g[0].style.cssText);g.contents().appendTo(c);g.replaceWith(c);b&&(b.startContainer==a&&(b.startContainer=c.get(0)),b.endContainer==a&&(b.endContainer=c.get(0)));return c},toString:function(){return"Aloha.Markup"}});l.Markup=new l.Markup;return l.Markup});define("aloha/observable",["jquery"],function(l){return{_eventHandlers:null,bind:function(b,l,m){this._eventHandlers=
this._eventHandlers||{};this._eventHandlers[b]||(this._eventHandlers[b]=[]);this._eventHandlers[b].push({handler:l,scope:m||window})},unbind:function(b,p){this._eventHandlers=this._eventHandlers||{};this._eventHandlers[b]&&(this._eventHandlers[b]=p?l.grep(this._eventHandlers[b],function(b){return b.handler===p?!1:!0}):[])},trigger:function(b){this._eventHandlers=this._eventHandlers||{};if(this._eventHandlers[b]){var p=[];l.each(arguments,function(b,f){0<b&&p.push(f)});l.each(this._eventHandlers[b],
function(b,f){f.handler.apply(f.scope,p)})}},unbindAll:function(){this._eventHandlers=null}}});define("aloha/registry",["jquery","aloha/observable","util/class"],function(l,b,p){return p.extend(b,{_entries:null,_ids:null,_constructor:function(){this._entries={};this._ids=[]},register:function(b,f){this._entries[b]=f;this._ids.push(b);this.trigger("register",f,b)},unregister:function(b){var f,d=this._entries[b];delete this._entries[b];for(f in this._ids)if(this._ids.hasOwnProperty(f)&&this._ids[f]===
b){this._ids.splice(f,1);break}this.trigger("unregister",d,b)},get:function(b){return this._entries[b]},has:function(b){return this._entries[b]?!0:!1},getEntries:function(){return l.extend({},this._entries)},getIds:function(){return l.extend([],this._ids)}})});define("aloha/contenthandlermanager",["aloha/core","aloha/registry","util/class"],function(l,b,p){return new (b.extend({createHandler:function(b){if("function"!==typeof b.handleContent)throw"ContentHandler has no function handleContent().";
return new (p.extend({handleContent:function(b){}},b))},handleContent:function(b,f,d){var k=f?f.contenthandler:this.getIds();if(!k)return b;var e,n;for(e=0;e<k.length&&((n=this.get(k[e]))&&(b=n.handleContent(b,f,d||l.activeEditable)),null!==b);e++);return b}}))});define("util/trees",["jquery"],function(l){function b(a,c,b){var d=l.type(a),e,k,n;if("array"===d){d=b?a:[];n=e=0;for(k=a.length;n<k;n++)b=c(a[n]),b.length&&(d[e++]=b[0]);e!==d.length&&(d=d.slice(0,e))}else if("object"===d)for(e in d=b?a:
{},a)a.hasOwnProperty(e)&&(b=c(a[e]),b.length?d[e]=b[0]:delete d[e]);else d=a;return d}function p(a,c){return b(a,c,!0)}function m(a,c){var b,d,e;if(1===a.nodeType)for(d=a.firstChild;d;)b=c(d),e=d.nextSibling,b.length?b[0]!==d&&a.replaceChild(b[0],d):a.removeChild(d),d=e;return a}function f(a,c,b,d){return[b(c(d),a)]}function d(a,c,b,d){return[c(b(d,a))]}function k(a,c,b,d){return c(d)?[]:[b(d,a)]}function e(a,c,b,d){a=b(d,a);return c(a)?[]:[a]}function n(a,c,b,d){function e(d){return a(e,c,b,d)}
return e(d)[0]}function a(a){a=l.type(a);return"object"!==a&&"array"!==a}function c(c,d,e){function k(c){return a(c)?[d(c)]:[n(c,k)]}var n=e?p:b;return k(c)[0]}return{prewalk:function(a,c,d){return n(f,c,d?p:b,a)},postwalk:function(a,c,e){return n(d,c,e?p:b,a)},preprune:function(a,c,d){return n(k,c,d?p:b,a)},postprune:function(a,c,d){return n(e,c,d?p:b,a)},prewalkDom:function(a,c,b){return n(f,c,m,b?a:a.cloneNode(!0))},postwalkDom:function(a,c,b){return n(d,c,m,b?a:a.cloneNode(!0))},prepruneDom:function(a,
c,b){return n(k,c,m,b?a:a.cloneNode(!0))},postpruneDom:function(a,c,b){return n(e,c,m,b?a:a.cloneNode(!0))},isLeaf:a,leaves:c,clone:function(a){function c(a){return[b(a,c)]}return c(a)[0]},flatten:function(a){var b=[];c(a,function(a){b.push(a);return a},!0);return b},walk:b,walkInplace:p,walkDomInplace:m}});define("util/browser",["jquery"],function(l){return{ie7:l.browser.msie&&8>parseInt(l.browser.version,10),ie8:l.browser.msie&&9>parseInt(l.browser.version,10),ie:l.browser.msie,mozilla:l.browser.mozilla}});
define("util/dom2","aloha/core jquery util/functions util/maps util/arrays util/strings util/browser util/dom util/range".split(" "),function(l,b,p,m,f,d,k,e,n){function a(a,c,b){for(;c;){var g=c.nextSibling;a.insertBefore(c,b);c=g}}function c(a){var c=a.outerHTML;if("undefined"!==typeof c)return c;try{return aa?aa.serializeToString(a):a.xml}catch(b){return a.xml}}function g(a){var b=[];a=c(a.cloneNode(!1));for(var g;null!=(g=ca.exec(a));)b.push(g[1]);return b}function v(a,c){var b={},g,e,k,n,f,m,
v;m=0;for(f=a.length;m<f;m++)if(k=a[m],k.className)for(e=d.words(k.className),v=0;v<e.length;v++)n=e[v],c[n]&&((g=b[n])?g.push(k):b[n]=[k]);return b}function u(a){for(var c=0;a.previousSibling;)c++,a=a.previousSibling;return c}function z(a){var c=0;for(a=a.firstChild;a;)c+=1,a=a.nextSibling;return c}function A(a,c){return 1===a.nodeType&&c>=z(a)||3===a.nodeType&&c===a.length&&!a.nextSibling}function y(a,c){1===a.nodeType&&c<z(a)?a=a.childNodes[c]:3===a.nodeType&&c===a.length&&(a=a.nextSibling||a.parentNode);
return a}function C(a,c,b){b?c.appendChild(a):c.parentNode.insertBefore(a,c)}function D(a,c){this.node=a;this.atEnd=c}function B(a,c){return new D(a,c)}function G(a,c){return B(y(a,c),A(a,c))}function q(a,c){for(var b=[],g=a.parentNode;g&&!c(g);)b.push(g),g=g.parentNode;return b}function s(a,c){var b=q(a,c),g=b.length?b[b.length-1]:a;g.parentNode&&b.push(g.parentNode);return b}function r(a,c){if(c(a))return[];var b=q(a,c);b.unshift(a);return b}function t(a,c){if(c(a))return[a];var b=s(a,c);b.unshift(a);
return b}function S(a,c){var b=a.parentNode,g=a.nodeValue;if(0===c||c>=g.length)return a;var d=document.createTextNode(g.substring(0,c)),g=document.createTextNode(g.substring(c,g.length));b.insertBefore(d,a);b.insertBefore(g,a);b.removeChild(a);return d}function K(a,c,b,g,d,e){c===d&&(d=e.length,0===b?(c=e.parentNode,b=u(e)):b<d?c=e:b===d?(c=e.parentNode,b=u(e)+1):(c=e.nextSibling,b-=d),a[g].call(a,c,b))}function x(a,c,b){if(3===a.nodeType){var g=b.startContainer,d=b.startOffset,e=b.endContainer,
k=b.endOffset;c=S(a,c);K(b,g,d,"setStart",a,c);K(b,e,k,"setEnd",a,c)}}function L(a,c,b,g){for(;a&&!b(a,g);){var d=a.nextSibling;c(a,g);a=d}}function I(a,c,b){L(a,c,p.returnFalse,b)}function T(a,c,b){1===a.nodeType&&I(a.firstChild,function(a){T(a,c,b)});c(a,b)}function N(a){a&&(this.startContainer=a.startContainer,this.startOffset=a.startOffset,this.endContainer=a.endContainer,this.endOffset=a.endOffset,this.commonAncestorContainer=a.commonAncestorContainer,this.collapsed=a.collapsed)}function W(a,
c){c.atEnd?a.setStart(c.node,z(c.node)):a.setStart(c.node.parentNode,u(c.node))}function Z(a,c){c.atEnd?a.setEnd(c.node,z(c.node)):a.setEnd(c.node.parentNode,u(c.node))}function V(a,c){a.setStart(c.startContainer,c.startOffset);a.setEnd(c.endContainer,c.endOffset)}function Q(a,c,b){if(!a.collapsed){for(var g=G(a.startContainer,a.startOffset),d=G(a.endContainer,a.endOffset),e=!1;!g.equals(d)&&c(g)&&g.next();)e=!0;b=b||c;c=!1;for(3===a.endContainer.nodeType&&0<a.endOffset&&a.endOffset<a.endContainer.length&&
d.next()&&b(d)&&d.prev();!d.equals(g)&&b(d)&&d.prev();)c=!0;e&&W(a,g);c&&Z(a,d)}}function R(a){if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a&&a.nextSibling}function O(a){for(var c=a.previousSibling;c&&c.lastChild;)c=c.lastChild;return c||a.parentNode}var ca=/\s([^\/<>\s=]+)(?:=(?:"[^"]*"|'[^']*'|[^>\/\s]+))?/g,aa=window.XMLSerializer&&new window.XMLSerializer;D.prototype.next=function(){var a=this.node,c;if(this.atEnd||1!==a.nodeType){if(c=a.nextSibling)this.atEnd=
!1;else{c=a.parentNode;if(!c)return!1;this.atEnd=!0}this.node=c}else(c=a.firstChild)?this.node=c:this.atEnd=!0;return!0};D.prototype.prev=function(){var a=this.node,c;if(this.atEnd)(c=a.lastChild)?this.node=c:this.atEnd=!1;else{if(c=a.previousSibling)1===a.nodeType&&(this.atEnd=!0);else if(c=a.parentNode,!c)return!1;this.node=c}return!0};D.prototype.equals=function(a){return a.node===this.node&&a.atEnd===this.atEnd};D.prototype.clone=function(a){return a(a.node,a.atEnd)};D.prototype.insert=function(a){return C(a,
this.node,this.atEnd)};N.prototype.update=function(){if(this.startContainer&&this.endContainer){this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset;var a=r(this.startContainer,p.returnFalse),c=r(this.endContainer,p.returnFalse);this.commonAncestorContainer=f.intersect(a,c)[0]}};N.prototype.setStart=function(a,c){this.startContainer=a;this.startOffset=c;this.update()};N.prototype.setEnd=function(a,c){this.endContainer=a;this.endOffset=c;this.update()};return{backward:O,
forward:R,findForward:function(a,c,b){for(;a&&!b(a);){if(c(a))return a;a=R(a)}return null},findBackward:function(a,c,b){for(;a&&!b(a);){if(c(a))return a;a=O(a)}return null},moveNextAll:a,attrNames:g,attrs:function(a){var c=[],d=g(a),e,k;e=0;for(k=d.length;e<k;e++){var n=d[e],f=b.attr(a,n),f=null==f?"":f.toString();c.push([n,f])}return c},indexByClass:function(a,c){var g;g=k.ie7?a.getElementsByTagName("*"):b(a).find("."+m.keys(c).join(",."));return v(g,c)},indexByName:function(a,c){var g,d={},e;g=
0;for(e=c.length;g<e;g++){var k=c[g];d[k]=b.makeArray(a.getElementsByTagName(k))}return d},indexByClassHaveList:v,outerHtml:c,removeShallow:function(c){var b=c.parentNode;a(b,c.firstChild,c);b.removeChild(c)},wrap:function(a,c){a.parentNode.replaceChild(c,a);c.appendChild(a)},insert:C,cursor:B,cursorFromBoundaryPoint:G,nodeAtOffset:y,isAtEnd:A,parentsUntil:q,parentsUntilIncl:s,childAndParentsUntil:r,childAndParentsUntilIncl:t,childAndParentsUntilNode:function(a,c){return r(a,function(a){return a===
c})},childAndParentsUntilInclNode:function(a,c){return t(a,function(a){return a===c})},next:function(a,c,b){for(;a&&!c(a,b);)a=a.nextSibling;return a},parent:function(a,c,b){for(;a&&!c(a,b);)a=a.parentNode;return a},isTextNode:function(a){return 3===a.nodeType},nodeIndex:u,splitTextNode:S,splitTextContainers:function(a){x(a.startContainer,a.startOffset,a);x(a.endContainer,a.endOffset,a)},walk:I,walkRec:T,walkUntil:L,walkUntilNode:function(a,c,b,g){L(a,c,function(a){return a===b},g)},stableRange:function(a){return new N(a)},
trimRange:Q,trimRangeClosingOpening:function(a,c,b){b=b||c;Q(a,function(a){return a.atEnd||c(a.node)},function(a){a=a.atEnd?a.node.lastChild:a.node.previousSibling;return!a||b(a)})},setRangeFromRef:V,setRangeStartFromCursor:W,setRangeEndFromCursor:Z,splitTextNodeAdjustRange:x,insertSelectText:function(a,c){if(a.length){x(c.startContainer,c.startOffset,c);var b=y(c.startContainer,c.startOffset),g=A(c.startContainer,c.startOffset);if(g||3!==b.nodeType){var d;(d=g?b.lastChild:b.previousSibling)&&3===
d.nodeType?(d.insertData(d.length,a),c.setStart(d,d.length-a.length)):(d=document.createTextNode(a),C(d,b,g),c.setStart(d,0));c.setEnd(d,d.length)}else b.insertData(0,a),c.setStart(b,0),c.setEnd(b,a.length)}},areRangesEq:function(a,c){return a.startContainer===c.startContainer&&a.startOffset===c.startOffset&&a.endContainer===c.endContainer&&a.endOffset===c.endOffset},collapseToEnd:function(a){a.setStart(a.endContainer,a.endOffset)},extendToWord:function(a){var c=new n(a);e.extendToWord(c);V(a,c)},
rangeFromRangeObject:function(a){var c=l.createRange();c.setStart(a.startContainer,a.startOffset);c.setEnd(a.endContainer,a.endOffset);return c},cloneShallow:function(a){return a.cloneNode(!1)},setStyle:function(a,c,g){b(a).css(c,null==g?"":g)},getStyle:function(a,c){c=d.dashesToCamelCase(c);return 1===a.nodeType?a.style[c]:null},getComputedStyle:function(a,c){if(a.currentStyle)return a.currentStyle[c];var b=a.ownerDocument;return b.defaultView&&b.defaultView.getComputedStyle&&(b=b.defaultView.getComputedStyle(a,
null))?b[c]||b.getPropertyValue(c):null},nodeLength:function(a){return 1===a.nodeType?z(a):3===a.nodeType?a.length:0}}});define("util/misc",[],function(){return{anyRx:function(l,b){var p,m;p=0;for(m=l.length;p<m;p++)if(l[p].test(b))return!0;return!1}}});define("aloha/ephemera","jquery aloha/core aloha/console util/strings util/trees util/arrays util/maps util/dom2 util/functions util/misc util/browser PubSub".split(" "),function(l,b,p,m,f,d,k,e,n,a,c,g){function v(a){a=l(a);var b=a.attr("data-aloha-ephemera-attr"),
g;c.ie7||a.removeAttr("data-aloha-ephemera-attr");if("string"===typeof b)for(g=m.words(b),b=0;b<g.length;b++)a.removeAttr(g[b])}function u(c,b,g,e){g=g[b];return!g||!0!==g&&-1===d.indexOf(g,c.nodeName)?a.anyRx(e,b):!0}function z(a,c){var b=null,g=e.attrNames(a),d,k,n;k=0;for(n=g.length;k<n;k++)d=g[k],u(a,d,c.attrMap,c.attrRxs)&&(b=b||l(a),b.removeAttr(d))}function A(a,c){var b=a.className;if(b&&-1!==b.indexOf(C)){b=m.words(b);if(-1!==d.indexOf(b,"aloha-cleanme")||-1!==d.indexOf(b,"aloha-ephemera"))return l.removeData(a),
!1;if(-1!==d.indexOf(b,"aloha-ephemera-wrapper")||-1!==d.indexOf(b,"aloha-ephemera-filler"))return e.moveNextAll(a.parentNode,a.firstChild,a.nextSibling),l.removeData(a),!1;-1!==d.indexOf(b,"aloha-ephemera-attr")&&v(a);var g=d.filter(b,function(a){return!c.classMap[a]});g.length!==b.length&&(0===g.length?l(a).removeAttr("class"):a.className=g.join(" "))}z(a,c);return!0}var y={classMap:{"aloha-ephemera-wrapper":!0,"aloha-ephemera-filler":!0,"aloha-ephemera-attr":!0,"aloha-ephemera":!0,"aloha-cleanme":!0},
attrMap:{hidefocus:!0,hideFocus:!0,tabindex:!0,tabIndex:!0,contenteditable:["TABLE"],contentEditable:["TABLE"]},attrRxs:[/^(?:nodeIndex|sizcache|sizset|jquery)[\w\d]*$/i],pruneFns:[]},C="aloha-";return{ephemera:function(a){a&&(y=a);g.pub("aloha.ephemera",{ephemera:y});return y},classes:function(){var a=Array.prototype.slice.call(arguments);k.fillKeys(y.classMap,a,!0);var c=a,b,d;b=0;for(d=c.length;b<d;b++)-1===c[b].indexOf(C)&&(p.warn('Class "'+c[b]+'" was set to be ephemeral,which hurts peformance. Add the common substring "'+
C+'" to the class to fix this problem.'),C="");g.pub("aloha.ephemera.classes",{ephemera:y,newClasses:a})},attributes:function(){var a=Array.prototype.slice.call(arguments);k.fillKeys(y.attrMap,a,!0);g.pub("aloha.ephemera.attributes",{ephemera:y,newAttributes:a})},markElement:function(a){l(a).addClass("aloha-ephemera")},markAttr:function(a,c){a=l(a);var b=a.attr("data-aloha-ephemera-attr");null==b||""===b?b=c:-1===d.indexOf(m.words(b),c)&&(b+=" "+c);a.attr("data-aloha-ephemera-attr",b);a.addClass("aloha-ephemera-attr")},
markWrapper:function(a){l(a).addClass("aloha-ephemera-wrapper")},markFiller:function(a){l(a).addClass("aloha-ephemera-filler")},prune:function(a,c){function b(a){var g;a:{g=c;var e=b;if(1===a.nodeType){if(!A(a,g)){g=[];break a}a=f.walkDomInplace(a,e)}g=(a=d.reduce(g.pruneFns,a,d.applyNotNull))?[a]:[]}return g}c=c||y;return b(a)[0]},isAttrEphemeral:u}});define("aloha/copypaste",["jquery","aloha/core"],function(l,b){function p(m){var f=b.createRange(),d=b.getSelection();f.setStart(m.startContainer,
m.startOffset);f.setEnd(m.endContainer,m.endOffset);d.removeAllRanges();d.addRange(f)}return{getEditableAt:function(m){if(!m||!m.commonAncestorContainer)return null;m=l(m.commonAncestorContainer);return m.length?b.getEditableHost(m):null},getRange:function(){var m=b.getSelection();return m.getRangeCount()?m.getRangeAt(0):null},selectAllOf:function(b){p({startContainer:b,endContainer:b,startOffset:0,endOffset:b.childNodes?b.childNodes.length:b.length});l(b).focus()},setSelectionAt:p}});define("aloha/command",
["aloha/core","aloha/registry","aloha/engine","util/dom","aloha/contenthandlermanager"],function(l,b,p,m,f){var d={execCommand:function(b,d,n,a){var c={commandId:b,preventDefault:!1};l.trigger("aloha-command-will-execute",c);if(!0!==c.preventDefault){c=l.getSelection();if(!a){if(!c.getRangeCount())return;a=c.getRangeAt(0)}"inserthtml"===b.toLowerCase()&&(n=f.handleContent(n,{contenthandler:l.settings.contentHandler.insertHtml,command:"insertHtml"}));p.execCommand(b,d,n,a);"insertparagraph"!==b.toLowerCase()&&
c.getRangeCount()&&(a=c.getRangeAt(0),d=a.commonAncestorContainer,d.parentNode&&(d=d.parentNode),n=new window.GENTICS.Utils.RangeObject,n.startContainer=a.startContainer,n.startOffset=a.startOffset,n.endContainer=a.endContainer,n.endOffset=a.endOffset,m.doCleanup({merge:!0,removeempty:!1},n,d),n.select());l.trigger("aloha-command-executed",b)}},queryCommandEnabled:function(b,d){if(!d){if(!l.getSelection().getRangeCount())return;d=l.getSelection().getRangeAt(0)}return p.queryCommandEnabled(b,d)},queryCommandIndeterm:function(b,
d){if(!d){if(!l.getSelection().getRangeCount())return;d=l.getSelection().getRangeAt(0)}return p.queryCommandIndeterm(b,d)},queryCommandState:function(b,d){if(!d){if(!l.getSelection().getRangeCount())return;d=l.getSelection().getRangeAt(0)}return p.queryCommandState(b,d)},queryCommandSupported:function(b){return p.queryCommandSupported(b)},queryCommandValue:function(b,d){if(!d){if(!l.getSelection().getRangeCount())return;d=l.getSelection().getRangeAt(0)}return p.queryCommandValue(b,d)},querySupportedCommands:function(){var b=
[],d;for(d in p.commands)p.commands.hasOwnProperty(d)&&b.push(d);return b},getStateOverride:p.getStateOverride,setStateOverride:p.setStateOverride,resetOverrides:p.resetOverrides,unsetStateOverride:p.unsetStateOverride},d=new (b.extend(d));l.execCommand=d.execCommand;l.queryCommandEnabled=d.queryCommandEnabled;l.queryCommandIndeterm=d.queryCommandIndeterm;l.queryCommandState=d.queryCommandState;l.queryCommandSupported=d.queryCommandSupported;l.queryCommandValue=d.queryCommandValue;l.querySupportedCommands=
d.querySupportedCommands;return d});define("aloha/state-override","aloha/core jquery aloha/command util/dom2 util/maps util/range PubSub".split(" "),function(l,b,p,m,f,d,k){function e(){c=g=null}function n(b,d,e){a&&(g=d,c=c||{},c[b]=e)}var a=!1!==l.settings.stateOverride,c=null,g=null;l.bind("aloha-selection-changed",function(a,c){g&&!m.areRangesEq(g,c)&&(e(),k.pub("aloha.selection.context-change",{range:c,event:a}))});return{enabled:function(c){null!=c&&(a=c);return a},keyPressHandler:function(a){if(c&&
!a.altKey&&!a.ctrlKey&&a.which){var b=l.getSelection();if(b.getRangeCount()){var g=String.fromCharCode(a.which),d=b.getRangeAt(0);m.insertSelectText(g,d);f.forEach(c,function(a,c){a(c,d)});m.collapseToEnd(d);b.removeAllRanges();b.addRange(d);a.preventDefault()}}},setWithRangeObject:function(c,b,g){a&&(n(c,m.rangeFromRangeObject(b),function(a,c){var b=new d(c);g(a,b);m.setRangeFromRef(c,b)}),b.select())},set:n,clear:e}});define("aloha/editable","aloha/core util/class jquery aloha/pluginmanager aloha/selection aloha/markup aloha/contenthandlermanager aloha/console aloha/block-jump aloha/ephemera util/dom2 PubSub aloha/copypaste aloha/command aloha/state-override".split(" "),
function(l,b,p,m,f,d,k,e,n,a,c,g,v,u,z){function A(a){return k.handleContent(a.getContents(),{contenthandler:l.settings.contentHandler.smartContentChange},a)}function y(a){var c=a.obj;c.mousedown(function(b){if(!l.eventHandled){l.eventHandled=!0;if(null==l.activeEditable||"undefined"===typeof l.activeEditable||c[0]!==l.activeEditable.obj[0])l.mouseEventChangedEditable=!0;return a.activate(b)}});c.mouseup(function(a){l.eventHandled=!1});c.focus(function(c){return a.activate(c)});c.keydown(function(c){var b=
d.preProcessKeyStrokes(c);a.keyCode=c.which;b||a.smartContentChange(c);return b});c.keypress(z.keyPressHandler);c.keypress(function(a){l.activeEditable.smartContentChange(a)});c.keyup(function(a){if(27===a.keyCode)return l.deactivateEditable(),!1});c.contentEditableSelectionChange(function(a){f.onChange(c,a,0,l.mouseEventChangedEditable);l.mouseEventChangedEditable&&(l.mouseEventChangedEditable=!1);return c})}var C=window.unescape,D=window.GENTICS,B=!1,q={};l.defaults.contentHandler={};l.defaults.contentHandler.initEditable=
["blockelement","sanitize"];l.defaults.contentHandler.getContents=["blockelement","sanitize","basic"];"undefined"===typeof l.settings.contentHandler&&(l.settings.contentHandler={});var s=function(a){return p(a).html()},r={65:"a"},F={"ctrl+a":function(){var a=v.getEditableAt(v.getRange());if(a)return v.selectAllOf(a.obj[0]),!1}};p(document).keydown(function(a){if(l.activeEditable){var c=r[a.which];if(c){var b=a.altKey?"alt":a.ctrlKey?"ctrl":a.shiftKey?"shift":null,c=(b?b+"+":"")+c;if(F[c])return F[c](a)}}});
l.Editable=b.extend({_constructor:function(a){a.attr("id")||a.attr("id",D.Utils.guid());this.originalObj=this.obj=a;this.ready=!1;this.sccDelimiters=[":",";",".","!","?",",",C("%u0009"),C("%u0020"),C("%u0008"),C("%u007F"),"Enter"];this.sccIdle=5E3;this.sccDelay=500;this.sccTimerDelay=this.sccTimerIdle=!1;this.keyCodeMap={93:"Apps",18:"Alt",20:"CapsLock",17:"Control",40:"Down",35:"End",13:"Enter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",
36:"Home",45:"Insert",37:"Left",224:"Meta",34:"PageDown",33:"PageUp",19:"Pause",44:"PrintScreen",39:"Right",145:"Scroll",16:"Shift",38:"Up",91:"Win",92:"Win"};this.placeholderClass="aloha-placeholder";l.registerEditable(this)},init:function(){var a=this;(this.settings=l.settings)&&l.settings.smartContentChange&&(l.settings.smartContentChange.delimiters&&(this.sccDelimiters=l.settings.smartContentChange.delimiters),l.settings.smartContentChange.idle&&(this.sccIdle=l.settings.smartContentChange.idle),
l.settings.smartContentChange.delay&&(this.sccDelay=l.settings.smartContentChange.delay));if(this.check(this.obj)){"undefined"===typeof l.settings.contentHandler.getContents&&(l.settings.contentHandler.getContents=l.defaults.contentHandler.getContents);"undefined"===typeof l.settings.contentHandler.initEditable&&(l.settings.contentHandler.initEditable=l.defaults.contentHandler.initEditable);var c=a.obj.html(),c=k.handleContent(c,{contenthandler:l.settings.contentHandler.initEditable,command:"initEditable"},
a);a.obj.html(c);l.bind("aloha-plugins-loaded",function(){a.obj.addClass("aloha-editable").contentEditable(!0);y(a);a.setUnmodified();a.snapshotContent=a.getContents();a.initPlaceholder();a.ready=!0;window.setTimeout(function(){l.disableObjectResizing()},20);l.trigger("aloha-editable-created",[a]);g.pub("aloha.editable.created",{data:a})})}else this.destroy()},isActive:!1,originalContent:null,range:void 0,check:function(){var a=this,c=this.obj,b=c.get(0).nodeName.toLowerCase(),g="a abbr address article aside b bdo blockquote cite code command del details dfn div dl em footer h1 h2 h3 h4 h5 h6 header i ins menu nav p pre q ruby section small span strong sub sup var".split(" "),
d;for(d=0;d<g.length;++d)if(b===g[d])return!0;switch(b){case "textarea":case "input":return b=p('<div id="'+this.getId()+'-aloha" class="aloha-'+b+'" />').insertAfter(c),b.height(c.height()).width(c.width()).html(c.val()),c.hide(),c.parents("form:first").submit(function(){c.val(a.getContents())}),this.obj=b,!0}return!1},initPlaceholder:function(){l.settings.placeholder&&this.isEmpty()&&this.addPlaceholder()},isEmpty:function(){var a=p.trim(this.getContents());return 0===a.length||("<br>"===a?!0:!1)},
addPlaceholder:function(){var a=p("<div>"),c=p("<span>"),b,g=this.obj;b=D.Utils.Dom.allowsNesting(g[0],a[0])?a:c;0===p("."+this.placeholderClass,g).length&&(p.each(l.settings.placeholder,function(a,c){g.is(a)&&b.html(c)}),b.is(":empty")||(b.addClass(this.placeholderClass).addClass("aloha-ephemera"),p(g).append(b)),p("br",g).remove())},removePlaceholder:function(a,c){var b=this.placeholderClass,g;0!==p("."+this.placeholderClass,a).length&&(!0===c?window.setTimeout(function(){g=new f.SelectionRange;
g.startContainer=g.endContainer=a.get(0);g.startOffset=g.endOffset=0;p("."+b,a).remove();g.select()},100):p("."+b,a).remove())},destroy:function(){this===l.getActiveEditable()&&this.blur();switch(this.originalObj.get(0).nodeName.toLowerCase()){case "textarea":case "input":this.originalObj.val(this.getContents()),this.obj.remove(),this.originalObj.show()}this.ready=!1;this.removePlaceholder(this.obj);this.obj.removeClass("aloha-editable").contentEditable(!1).unbind("mousedown click dblclick focus keydown keypress keyup");
l.trigger("aloha-editable-destroyed",[this]);g.pub("aloha.editable.destroyed",{data:this});l.unregisterEditable(this)},setUnmodified:function(){this.originalContent=this.getContents()},isModified:function(){return this.originalContent!==this.getContents()},toString:function(){return"Aloha.Editable"},isDisabled:function(){return!this.obj.contentEditable()||"false"===this.obj.contentEditable()},disable:function(){return this.isDisabled()||this.obj.contentEditable(!1)},enable:function(){return this.isDisabled()&&
this.obj.contentEditable(!0)},activate:function(a){var c=l.getActiveEditable();B?B=!1:a&&"focus"===a.type&&null!==c&&c.obj.parent().get(0)===a.currentTarget||this.isActive||this.isDisabled()||(this.obj.addClass("aloha-editable-active"),l.activateEditable(this),B=!0,this.removePlaceholder(this.obj,!0),B=!1,this.isActive=!0,l.trigger("aloha-editable-activated",{oldActive:c,editable:this}),g.pub("aloha.editable.activated",{data:{old:c,editable:this}}))},blur:function(){this.obj.blur();this.isActive=
!1;this.initPlaceholder();this.obj.removeClass("aloha-editable-active");l.trigger("aloha-editable-deactivated",{editable:this});g.pub("aloha.editable.deactivated",{data:{editable:this}});l.activeEditable.smartContentChange({type:"blur"},null)},empty:function(a){return null===a||""===p.trim(a)||"<br/>"===a},getContents:function(c){var b=this.obj.html(),g=q[this.getId()];if(!g||b!==g.raw){n.removeZeroWidthTextNodeFix();var d=this.obj.clone(!1);this.removePlaceholder(d);d=p(a.prune(d[0]));m.makeClean(d);
d=p("<div>"+k.handleContent(d.html(),{contenthandler:l.settings.contentHandler.getContents,command:"getContents"},this)+"</div>");g=q[this.getId()]={};g.raw=b;g.element=d}if(c)return g.element.clone().contents();null==g.serialized&&(g.serialized=s(g.element[0]));return g.serialized},setContents:function(a,c){var b=null;l.getActiveEditable()===this&&(l.deactivateEditable(),b=this);this.obj.html(a);null!==b&&b.activate();this.smartContentChange({type:"set-contents"});return c?this.obj.contents():s(this.obj[0])},
getId:function(){return this.obj.attr("id")},smartContentChange:function(a){function c(){null==k&&(k=b.getSnapshotContent());return k}var b=this,g=null,d;if(a&&(a.metaKey||a.crtlKey||a.altKey))return!1;a&&a.originalEvent&&(d=/U\+(\w{4})/,d.exec(a.originalEvent.keyIdentifier),g=this.keyCodeMap[this.keyCode]||String.fromCharCode(a.which)||"unknown");var k=null;0<=p.inArray(g,this.sccDelimiters)?(clearTimeout(this.sccTimerIdle),clearTimeout(this.sccTimerDelay),this.sccTimerDelay=window.setTimeout(function(){l.trigger("aloha-smart-content-changed",
{editable:b,keyIdentifier:a.originalEvent.keyIdentifier,keyCode:a.keyCode,"char":g,triggerType:"keypress",getSnapshotContent:c});A(b);e.debug("Aloha.Editable","smartContentChanged: event type keypress triggered")},this.sccDelay)):a&&"paste"===a.type?(l.trigger("aloha-smart-content-changed",{editable:b,keyIdentifier:null,keyCode:null,"char":null,triggerType:"paste",getSnapshotContent:c}),A(b)):a&&"blur"===a.type?(l.trigger("aloha-smart-content-changed",{editable:b,keyIdentifier:null,keyCode:null,"char":null,
triggerType:"blur",getSnapshotContent:c}),A(b)):a&&"block-change"===a.type?(l.trigger("aloha-smart-content-changed",{editable:b,keyIdentifier:null,keyCode:null,"char":null,triggerType:"block-change",getSnapshotContent:c}),A(b)):null!==g&&(clearTimeout(this.sccTimerDelay),clearTimeout(this.sccTimerIdle),this.sccTimerIdle=window.setTimeout(function(){l.trigger("aloha-smart-content-changed",{editable:b,keyIdentifier:null,keyCode:null,"char":null,triggerType:"idle",getSnapshotContent:c});A(b)},this.sccIdle))},
getSnapshotContent:function(){var a=this.snapshotContent;this.snapshotContent=this.getContents();return a}});l.Editable.setContentSerializer=function(a){s=a};l.Editable.getContentSerializer=function(){return s};l.Editable.registerEvents=y});define("aloha/plugin",["aloha/core","jquery","util/class","aloha/pluginmanager","aloha/console"],function(l,b,p,m,f){var d=p.extend({name:null,defaults:{},settings:{},dependencies:[],_constructor:function(b){"string"!==typeof b?f.error("Cannot initialise unnamed plugin, skipping"):
this.name=b},checkDependencies:function(){var d=this,e=!0;b.each(d.dependencies,function(b,a){if(!l.isPluginLoaded(a.toString()))return e=!1,f.error("plugin."+d.name,'Required plugin "'+a+'" not found.'),!1});return e},init:function(){},getEditableConfig:function(d){var e=null,n=!1,a=this;this.settings.editables&&b.each(this.settings.editables,function(c,g){var f;if(d.is(c))if(n=!0,g instanceof Array)e=[],e=b.merge(e,g);else if("object"===typeof g)for(f in e={},e["aloha-editable-selector"]=c,g)g.hasOwnProperty(f)&&
(g[f]instanceof Array?e[f]=g[f]:"object"===typeof g[f]?(e[f]={},e[f]=b.extend(!0,e[f],a.config[f],g[f])):e[f]=g[f]);else e=g});n||(e="undefined"!==typeof this.settings.config&&this.settings.config?this.settings.config:this.config);return e},makeClean:function(b){},getUID:function(b){f.deprecated("plugin","getUID() is deprecated. Use plugin.name instead.");return this.name},toString:function(){return this.name},log:function(b,d){f.deprecated("plugin","log() is deprecated. Use Aloha.console instead.");
f.log(b,this,d)}});d.create=function(k,e){var n=new (d.extend(e))(k);n.settings=b.extendObjects(!0,n.defaults,l.settings[k]);m.register(n);return n};return d});define("aloha/jquery.aloha",["aloha/core","aloha/selection","jquery","aloha/console"],function(l,b,p,m){function f(b,d,a,c){if(d===c.target||!/textarea|input|select/i.test(c.target.nodeName)&&"text"!==c.target.type)return b.apply(d,a)}function d(b){var d,a,c,g;if("string"===typeof b.data){d=b.handler;a=b.data.toLowerCase().split(" ");c={};
for(g=0;g<a.length;g++)c[a[g]]=!0;b.handler=function(a){if(this===a.target){var b="keypress"!==a.type&&p.hotkeys.specialKeys[a.which],g="";a.altKey&&"alt"!==b&&(g+="alt+");a.ctrlKey&&"ctrl"!==b&&(g+="ctrl+");a.metaKey&&!a.ctrlKey&&"meta"!==b&&(g+="meta+");a.shiftKey&&"shift"!==b&&(g+="shift+");if(b){if(c[g+b])return f(d,this,arguments,a)}else if(b=String.fromCharCode(a.which).toLowerCase(),c[g+b]||c[g+p.hotkeys.shiftNums[b]]||"shift+"===g&&c[p.hotkeys.shiftNums[b]])return f(d,this,arguments,a)}}}}
var k=window.XMLSerializer;p.fn.between=function(b,d){var a;3!==this[0].nodeType?(a=this.children().size(),d>a&&(d=a),0>=d?this.prepend(b):this.children().eq(d-1).after(b)):0>=d?this.before(b):(d>=this[0].length||(a=this[0].data,this[0].data=a.substring(0,d),this.after(a.substring(d,a.length))),this.after(b))};p.fn.contentEditable=function(b){var d=p(this),a="contenteditable";p.browser.msie&&7==parseInt(p.browser.version,10)&&(a="contentEditable");if("undefined"===typeof b){if("undefined"===typeof d[0]){m.warn("The jquery object did not contain any valid elements.");
return}return"undefined"===typeof d[0].isContentEditable?(m.warn("Could not determine whether the is editable or not. I assume it is."),!0):d[0].isContentEditable}""===b?d.removeAttr(a):d.attr(a,b&&"false"!==b?"true":"false");return d};p.fn.aloha=function(){var b=this;l.bind("aloha-plugins-loaded",function(){b.each(function(b,a){l.isEditable(a)||(new l.Editable(p(a))).init()})});return b};p.fn.mahalo=function(){return this.each(function(){l.isEditable(this)&&l.getEditableById(p(this).attr("id")).destroy()})};
p.fn.alohaText=function(){return this.each(function(){l.isEditable(this)&&l.getEditableById(p(this).attr("id")).getContents()})};p.fn.contentEditableSelectionChange=function(d){var k=this;this.keyup(function(a){b.getRangeObject();d(a)});this.dblclick(function(a){d(a)});this.mousedown(function(a){k.selectionStarted=!0});p(document).mouseup(function(a){b.eventOriginalTarget=k;k.selectionStarted&&d(a);b.eventOriginalTarget=!1;k.selectionStarted=!1});return this};p.fn.outerHtml=p.fn.outerHtml||function(){var b=
p(this).get(0);if("undefined"!=typeof b.outerHTML)return b.outerHTML;try{return(new k).serializeToString(b)}catch(d){try{return b.xml}catch(a){}}};p.fn.zap=function(){return this.each(function(){p(this.childNodes).insertBefore(this)}).remove()};p.fn.textNodes=function(b,d){var a=[],c=function(g){var k,f;if(3===g.nodeType&&p.trim(g.data)&&!d||3===g.nodeType&&d||"BR"==g.nodeName&&!b)a.push(g);else for(k=0,f=g.childNodes.length;k<f;++k)c(g.childNodes[k])};c(this[0]);return p(a)};p.extendObjects=p.fn.extendObjects=
function(b,d){var a,c,g,k,f;a=1;var m=b||{},l=arguments.length,y=!1,C;"boolean"===typeof m&&(y=m,m=d||{},a=2);"object"===typeof m||p.isFunction(m)||(m={});l===a&&(m=this,--a);for(C=a;C<l;C++)if(null!=(a=arguments[C]))for(c in a)a.hasOwnProperty(c)&&(g=m[c],k=a[c],m!==k&&(y&&k&&(p.isPlainObject(k)||!0===(f=p.isArray(k)))?(f?(f=!1,g=g&&p.isArray(g)?g:[]):g=g&&p.isPlainObject(g)?g:{},p.isArray(k)?m[c]=k:m[c]=p.extendObjects(y,g,k)):void 0!==k&&(m[c]=k)));return m};p.hotkeys={version:"0.8",specialKeys:{8:"backspace",
9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta"},shiftNums:{"`":"~",
1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};p.each(["keydown","keyup","keypress"],function(){p.event.special[this]={add:d}})});define("aloha/sidebar",["aloha/core","jquery","aloha/selection","PubSub"],function(l,b,p,m){var f=+new Date;b.easing.easeOutExpo||b.extend(b.easing,{easeOutExpo:function(a,b,d,e,k){return b==k?d+e:e*(-Math.pow(2,-10*b/k)+1)+d},easeOutElastic:function(a,b,d,e,k){a=Math;var n=1.70158,f=0,m=e;
if(!b)return d;if(1==(b/=k))return d+e;f||(f=0.3*k);m<a.abs(e)?(m=e,n=f/4):n=f/(2*a.PI)*a.asin(e/m);return m*a.pow(2,-10*b)*a.sin(2*(b*k-n)*a.PI/f)+e+d}});var d=function(a){this.id=null;this.folds={};this.button=null;this.title=b('<div class="aloha-sidebar-panel-title"><span class="aloha-sidebar-panel-title-arrow"></span><span class="aloha-sidebar-panel-title-text">Untitled</span></div>');this.content=b('<div class="aloha-sidebar-panel-content"><div class="aloha-sidebar-panel-content-inner"><div class="aloha-sidebar-panel-content-inner-text"></div></div></div>');
this.effectiveElement=this.element=null;this.expanded=!1;this.isActive=!0;this.init(a)},k=function(a){var g=this;this.id="aloha-sidebar-"+ ++f;this.panels={};this.container=b('<div class="aloha-ui aloha-sidebar-bar"><div class="aloha-sidebar-handle"><span class="aloha-sidebar-handle-icon"></span></div><div class="aloha-sidebar-inner"><ul class="aloha-sidebar-panels"></ul></div></div>');this.width=300;this.isCompletelyOpen=this.isOpen=this.opened=!1;this.settings={rotateIcons:!b.browser.msie,overlayPage:!0};
b(function(){"undefined"!==typeof l.settings.sidebar&&l.settings.sidebar.disabled||g.init(a)})},e=null,n=null;b.extend(k.prototype,{init:function(a){var g=this,d;"object"===typeof a&&(d=a.panels,delete a.panels);b.extend(this,a);"object"===typeof d&&b.each(d,function(){g.addPanel(this,!0)});a=this.container;"right"===this.position&&a.addClass("aloha-sidebar-right");a.hide().appendTo(b("body")).click(function(){g.barClicked.apply(g,arguments)}).find(".aloha-sidebar-panels").width(this.width);a.width(this.width);
this.width=a.width();this.updateHeight();this.initToggler();this.container.css("right"===this.position?"marginRight":"marginLeft",-this.width);this.opened&&this.open(0);this.toggleHandleIcon(this.isOpen);this.subscribeToEvents();b(window).resize(function(){g.updateHeight();g.correctHeight()});this.correctHeight()},show:function(){this.container.css("display","block");return this},hide:function(){this.container.css("display","none");return this},checkActivePanels:function(a){var g=[];if("undefined"!==
typeof a&&"undefined"!==typeof a.markupEffectiveAtStart){var d=a.markupEffectiveAtStart.length,e;for(e=0;e<d;++e)g.push(b(a.markupEffectiveAtStart[e]))}var k=this;b.each(this.panels,function(){k.showActivePanel(this,g)});this.correctHeight()},subscribeToEvents:function(){var a=this;m.sub("aloha.selection.context-change",function(b){a.isOpen&&a.checkActivePanels(b.range);a.lastRange=b.range});l.bind("aloha-editable-deactivated",function(b,d){a.isOpen&&a.checkActivePanels();a.lastRange=null});this.container.mousedown(function(a){a.originalEvent.stopSelectionUpdate=
!0;l.eventHandled=!0});this.container.mouseup(function(a){a.originalEvent.stopSelectionUpdate=!0;l.eventHandled=!1})},correctHeight:function(){if(this.isOpen)if(this.isCompletelyOpen){var a=b(window).height(),g=[],d=[],k;for(k in this.panels)this.panels.hasOwnProperty(k)&&this.panels[k].isActive&&(d.push(this.panels[k]),g.push(k));if(0!==d.length&&(g=g.sort().join(","),n!==g||e!==a)){e=a;n=g;for(var a=this.container.find(".aloha-sidebar-inner").height()-(d[0].title.outerHeight()+10)*d.length,f,m,
l,p=0,D=Math,B;0<d.length&&0<a;){a+=p;p=0;l=[];for(B=d.length-1;0<=B;--B)g=d[B],f=g.content.find(".aloha-sidebar-panel-content-inner"),k=D.min(f.height("auto").height(),D.floor(a/(B+1))),f.height(k),a-=k,m=f.find(".aloha-sidebar-panel-content-inner-text"),m.height()>k?(l.push(g),p+=k,f.css({"overflow-x":"hidden","overflow-y":"scroll"})):f.css("overflow-y","hidden"),g.expanded&&g.expand();d=l}}}else this.correctHeightWhenCompletelyOpen=!0},showActivePanel:function(a,g){g.push(null);a.content.parent("li");
var d=a.activeOn,e=b(),k=0,n=g.length,f;for(f=0;f<n;++f)d(g[f])&&(++k,g[f]&&b.merge(e,g[f]));k?a.activate(e):a.deactivate()},initToggler:function(){var a=this,g=this.container,d=g.find(".aloha-sidebar-handle-icon"),e,k="right"===this.position;this.opened&&this.rotateHandleArrow(k?0:180,0);b(function(){"undefined"!==typeof l.settings.sidebar&&l.settings.sidebar.handle&&l.settings.sidebar.handle.top&&(b(g.find(".aloha-sidebar-handle"))[0].style.top=l.settings.sidebar.handle.top)});g.find(".aloha-sidebar-handle").click(function(){e&&
clearInterval(e);d.stop().css("marginLeft",4);a.isOpen?(b(this).removeClass("aloha-sidebar-toggled"),a.close(),a.isOpen=!1):(b(this).addClass("aloha-sidebar-toggled"),a.open(),a.isOpen=!0)}).hover(function(){var g=a.isOpen?-1:1;e&&clearInterval(e);d.stop();b(this).stop().animate(k?{marginLeft:"-="+5*g}:{marginRight:"-="+5*g},200);e=setInterval(function(){g*=-1;d.animate(k?{left:"-="+4*g}:{right:"-="+4*g},300)},300)},function(){e&&clearInterval(e);d.stop().css(k?"left":"right",5);b(this).stop().animate(k?
{marginLeft:0}:{marginRight:0},600,"easeOutElastic")})},roundCorners:function(){var a=this.container,b=a.find(".aloha-sidebar-panels>li:not(.aloha-sidebar-deactivated)");a.find(".aloha-sidebar-panel-top, .aloha-sidebar-panel-bottom").removeClass("aloha-sidebar-panel-top").removeClass("aloha-sidebar-panel-bottom");b.first().find(".aloha-sidebar-panel-title").addClass("aloha-sidebar-panel-top");b.last().find(".aloha-sidebar-panel-content").addClass("aloha-sidebar-panel-bottom")},updateHeight:function(){var a=
b(window).height();this.container.height(a).find(".aloha-sidebar-inner").height(a)},barClicked:function(a){this.handleBarclick(b(a.target))},handleBarclick:function(a){a.hasClass("aloha-sidebar-panel-title")?this.togglePanel(a):a.hasClass("aloha-sidebar-panel-content")||a.hasClass("aloha-sidebar-handle")||a.hasClass("aloha-sidebar-bar")||this.handleBarclick(a.parent())},getPanelById:function(a){return this.panels[a]},getPanelByElement:function(a){a="LI"===a[0].tagName?a:a.parent("li");return this.getPanelById(a[0].id)},
togglePanel:function(a){this.getPanelByElement(a).toggle()},rotateHandleIcon:function(a,b){var d=this.container.find(".aloha-sidebar-handle-icon");d.animate({angle:a},{duration:"number"===typeof b||"string"===typeof b?b:500,easing:"easeOutExpo",step:function(a,c){d.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},toggleHandleIcon:function(a){a^="right"===this.position;if(this.settings.rotateIcons)this.rotateHandleIcon(a?
180:0,0);else{var b=this.container.find(".aloha-sidebar-handle-icon");a?b.addClass("aloha-sidebar-handle-icon-left"):b.removeClass("aloha-sidebar-handle-icon-left")}},open:function(a,g){if(this.isOpen)return this;var d="right"===this.position,e=d?{marginRight:0}:{marginLeft:0},k=this;this.toggleHandleIcon(!0);this.container.animate(e,"number"===typeof a||"string"===typeof a?a:500,"easeOutExpo");this.settings.overlayPage||b("body").animate(d?{marginRight:"+="+this.width}:{marginLeft:"+="+this.width},
500,"easeOutExpo",function(){k.isCompletelyOpen=!0;k.correctHeightWhenCompletelyOpen&&k.correctHeight()});this.isOpen=!0;this.correctHeight();this.lastRange&&this.checkActivePanels(this.lastRange);b("body").trigger("aloha-sidebar-opened",this);return this},close:function(a,g){if(!this.isOpen)return this;var d="right"===this.position,e=d?{marginRight:-this.width}:{marginLeft:-this.width};this.toggleHandleIcon(!1);this.container.animate(e,"number"===typeof a||"string"===typeof a?a:500,"easeOutExpo");
this.settings.overlayPage||b("body").animate(d?{marginRight:"-="+this.width}:{marginLeft:"-="+this.width},500,"easeOutExpo");this.isCompletelyOpen=this.isOpen=!1;return this},activatePanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));a&&a.activate(b);this.roundCorners();return this},expandPanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));a&&a.expand(b);return this},collapsePanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));a&&a.collapse(b);return this},
addPanel:function(a,b){a instanceof d||(a.width||(a.width=this.width),a.sidebar=this,a=new d(a));this.panels[a.id]=a;this.container.find(".aloha-sidebar-panels").append(a.element);this.checkActivePanels(p.getRangeObject());return a}});b.extend(d.prototype,{init:function(a){this.setTitle(a.title).setContent(a.content);delete a.title;delete a.content;b.extend(this,a);this.id||(this.id="aloha-sidebar-"+ ++f);this.element=b('<li id="'+this.id+'">').append(this.title,this.content);this.expanded&&this.content.height("auto");
this.toggleTitleIcon(this.expanded);this.coerceActiveOn();this.title.attr("unselectable","on").css("-moz-user-select","none").each(function(){this.onselectstart=function(){return!1}});"function"===typeof this.onInit&&this.onInit.apply(this)},toggleTitleIcon:function(a){if(this.sidebar.settings.rotateIcons)this.rotateTitleIcon(a?90:0);else{var b=this.title.find(".aloha-sidebar-panel-title-arrow");a?b.addClass("aloha-sidebar-panel-title-arrow-down"):b.removeClass("aloha-sidebar-panel-title-arrow-down")}},
coerceActiveOn:function(){if("function"!==typeof this.activeOn){var a=this.activeOn;this.activeOn=function(){var b=typeof a;return"boolean"===b?function(){return a}:"undefined"===b?function(){return!0}:"string"===b?function(b){return b?b.is(a):!1}:function(){return!1}}()}},activate:function(a){this.isActive=!0;this.content.parent("li").show().removeClass("aloha-sidebar-deactivated");this.effectiveElement=a;"function"===typeof this.onActivate&&this.onActivate.call(this,a)},deactivate:function(){this.isActive&&
(this.isActive=!1,this.content.parent("li").hide().addClass("aloha-sidebar-deactivated"),this.effectiveElement=null)},toggle:function(){this.expanded?this.collapse():this.expand()},expand:function(a){var b=this,d=this.content,e=d.height(),k=d.height("auto").height();d.height(e).stop().animate({height:k},500,"easeOutExpo",function(){"function"===typeof a&&a.call(b)});this.element.removeClass("collapsed");this.toggleTitleIcon(!0);this.expanded=!0;return this},collapse:function(a,b){var d=this;this.element.addClass("collapsed");
this.content.stop().animate({height:3},250,"easeOutExpo",function(){"function"===typeof b&&b.call(d)});this.toggleTitleIcon(!1);this.expanded=!1;return this},setTitle:function(a){this.title.find(".aloha-sidebar-panel-title-text").html(a);return this},setContent:function(a){a&&""!==a||(a="&nbsp;");this.content.find(".aloha-sidebar-panel-content-inner-text").html(a);return this},rotateTitleIcon:function(a,b){var d=this.title.find(".aloha-sidebar-panel-title-arrow");d.animate({angle:a},{duration:"number"===
typeof b?b:500,easing:"easeOutExpo",step:function(a,c){d.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},renderEffectiveParents:function(a,g){for(var d=a.first(),e=[],k=[],n=this.activeOn,f,m;0<d.length&&!d.is(".aloha-editable");){if(n(d)){k.push("<span>"+d[0].tagName.toLowerCase()+"</span>");f=k.length;for(m=[];f--;)m.push(k[f]);e.push('<div class="aloha-sidebar-panel-parent"><div class="aloha-sidebar-panel-parent-path">'+
m.join("")+'</div><div class="aloha-sidebar-panel-parent-contentaloha-sidebar-opened">'+("function"===typeof g?g(d):"----")+"</div></div>")}d=d.parent()}this.setContent(e.join(""));b(".aloha-sidebar-panel-parent-path").click(function(){var a=b(this).parent().find(".aloha-sidebar-panel-parent-content");a.hasClass("aloha-sidebar-opened")?a.hide().removeClass("aloha-sidebar-opened"):a.show().addClass("aloha-sidebar-opened")});this.content.height("auto").find(".aloha-sidebar-panel-content-inner").height("auto")}});
var a=new k({position:"left",width:250}),k=new k({position:"right",width:250});l.Sidebar={left:a,right:k};return l.Sidebar});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/position",["jquery"],function(l){var b=window.GENTICS;b.Utils.Position={};b.Utils.Position.w=l(window);b.Utils.Position.Scroll={top:0,left:0,isScrolling:!1};b.Utils.Position.ScrollCorrection={top:100,left:50};b.Utils.Position.Mouse={x:0,y:0,oldX:0,oldY:0,isMoving:!1,triggeredMouseStop:!0};
b.Utils.Position.mouseStopCallbacks=[];b.Utils.Position.mouseMoveCallbacks=[];b.Utils.Position.update=function(){var b=this.w.scrollTop(),m=this.w.scrollLeft();if(this.Scroll.isScrolling)this.Scroll.top==b&&this.Scroll.left==m&&(this.Scroll.isScrolling=!1);else if(this.Scroll.top!=b||this.Scroll.left!=m)this.Scroll.isScrolling=!0;this.Scroll.top=b;this.Scroll.left=m;if(this.Mouse.x==this.Mouse.oldX&&this.Mouse.y==this.Mouse.oldY){if(this.Mouse.isMoving=!1,!this.Mouse.triggeredMouseStop)for(this.Mouse.triggeredMouseStop=
!0,b=0;b<this.mouseStopCallbacks.length;b++)this.mouseStopCallbacks[b].call()}else for(this.Mouse.isMoving=!0,this.Mouse.triggeredMouseStop=!1,b=0;b<this.mouseMoveCallbacks.length;b++)this.mouseMoveCallbacks[b].call();this.Mouse.oldX=this.Mouse.x;this.Mouse.oldY=this.Mouse.y};b.Utils.Position.addMouseStopCallback=function(b){this.mouseStopCallbacks.push(b);return this.mouseStopCallbacks.length-1};b.Utils.Position.addMouseMoveCallback=function(b){this.mouseMoveCallbacks.push(b);return this.mouseMoveCallbacks.length-
1};l(function(){window.setInterval(function(){b.Utils.Position.update()},500)});l("html").mousemove(function(l){b.Utils.Position.Mouse.x=l.pageX;b.Utils.Position.Mouse.y=l.pageY})});define("aloha/repositoryobjects",["aloha/core","util/class"],function(l,b){var p=window.GENTICS;l.RepositoryObject=function(){};l.RepositoryDocument=b.extend({_constructor:function(b){this.type="document";b.id&&b.name&&b.repositoryId&&(p.Utils.applyProperties(this,b),this.baseType="document")}});l.RepositoryFolder=b.extend({_constructor:function(b){this.type=
"folder";b.id&&b.name&&b.repositoryId&&(p.Utils.applyProperties(this,b),this.baseType="folder")}})});define("aloha/repositorymanager",["jquery","util/class","aloha/core","aloha/console","aloha/repositoryobjects"],function(l,b,p,m,f){function d(a,c){var b={items:a,results:a.length};c&&(b.numItems=c.numItems,b.hasMoreItems=c.hasMoreItems,b.timeout=c.timeout);return b}function k(a,c){a(c)}var e=function(a){return a?function(a,c){return a.filter(c)}:function(a,c){var b=[],g,d=a.length;for(g=0;g<d;g++)c(a[g])&&
b.push(a[g]);return b}}(Array.prototype.hasOwnProperty("filter")),n=function(a){return"function"===typeof a.query},a=function(a){return"function"===typeof a.getChildren},c=function(a){return"function"===typeof a.getSelectedFolder};b=b.extend({repositories:[],settings:p.settings&&p.settings.repositories||{},initialized:!1,init:function(){"undefined"===typeof this.settings.timeout&&(this.settings.timeout=5E3);var a;for(a=0;a<this.repositories.length;a++)this.initRepository(this.repositories[a]);this.initialized=
!0},register:function(a){this.getRepository(a.repositoryId)?m.warn(this,'A repository with name "'+a.repositoryId+'" already registerd. Ignoring this.'):(this.repositories.push(a),this.initialized&&this.initRepository(a))},initRepository:function(a){a.settings||(a.settings={});this.settings[a.repositoryId]&&l.extend(a.settings,this.settings[a.repositoryId]);a.init()},getRepository:function(a){var c;for(c=0;c<this.repositories.length;c++)if(this.repositories[c].repositoryId===a)return this.repositories[c];
return null},query:function(a,c){var b=this,f,p=[],y={numItems:0,hasMoreItems:!1},C,D=a.timeout&&parseInt(a.timeout,10)||b.settings.timeout,B=window.setTimeout(function(){y=y||{};y.timeout=!0;0<C&&(m.warn(b,C+" repositories did not return before the configured timeout of "+D+"ms."),C=0);clearTimeout(B);var a=d(p,y);c(a)},D),q=function(a,g){if(0!==C){if(a&&a.length){if(!a[0].repositoryId){var e=this.repositoryId,k;for(k=0;k<a.length;k++)a[k].repositoryId=e}l.merge(p,a)}g&&y?(y.numItems=l.isNumeric(g.numItems)&&
l.isNumeric(y.numItems)?y.numItems+g.numItems:void 0,y.hasMoreItems="boolean"===typeof g.hasMoreItems&&"boolean"===typeof y.hasMoreItems?y.hasMoreItems||g.hasMoreItems:void 0,g.timeout&&(y.timeout=!0)):y=void 0;m.debug(b,"The repository "+this.repositoryId+"returned with "+a.length+" results.");0===--C&&(clearTimeout(B),e=d(p,y),c(e))}};f=a.repositoryId?[b.getRepository(a.repositoryId)]:b.repositories;var s=e(f,n);if(0===s.length)clearTimeout(B),k(c,d(p,y));else{var r=function(a){return function(){q.apply(a,
arguments)}};C=s.length;for(f=0;f<s.length;f++)s[f].query(a,r(s[f]))}},getChildren:function(c,b){var d=this,k,n=[],f=0,C=c.timeout&&parseInt(c.timeout,10)||d.settings.timeout,D=window.setTimeout(function(){0<f&&(m.warn(d,f+" repositories did not respond before the configured timeout of "+C+"ms."),f=0);clearTimeout(D);b(n)},C),B=function(a){0!==f&&(a&&l.merge(n,a),0===--f&&(clearTimeout(D),b(n)))},q=c.repositoryId?[d.getRepository(c.repositoryId)]:d.repositories;c.repositoryFilter&&c.repositoryFilter.length&&
(q=e(q,function(a){return-1<l.inArray(a.repositoryId,c.repositoryFilter)}));if("aloha"===c.inFolderId){for(k=0;k<q.length;k++)n.push(new p.RepositoryFolder({id:q[k].repositoryId,name:q[k].repositoryName,repositoryId:q[k].repositoryId,type:"repository",hasMoreItems:!0}));clearTimeout(D);b(n)}else if(q=e(q,a),0===q.length)clearTimeout(D),b(n);else for(f=q.length,k=0;k<q.length;k++)q[k].getChildren(c,B)},makeClean:function(a){var c=this,b={},d=0,e=c.repositories.length;a.find("[data-gentics-aloha-repository="+
this.prefix+"]").each(function(){for(;d<e;)b.makeClean(a),d+=1;m.debug(c,"Passing contents of HTML Element with id { "+this.attr("id")+" } for cleaning to repository { "+b.repositoryId+" }");b.makeClean(this)})},markObject:function(a,c){if(a)if(c){var b=this.getRepository(c.repositoryId);b?(l(a).attr({"data-gentics-aloha-repository":c.repositoryId,"data-gentics-aloha-object-id":c.id}),b.markObject(a,c)):m.error(this,'Trying to apply a repository "'+c.name+'" to an object, but item has no repositoryId.')}else l(a).removeAttr("data-gentics-aloha-repository").removeAttr("data-gentics-aloha-object-id")},
getObject:function(a,c){var b=l(a),d=b.attr("data-gentics-aloha-object-id"),b=b.attr("data-gentics-aloha-repository"),e=this.getRepository(b);if(e&&d){this.itemCache||(this.itemCache=[]);var k=this.itemCache[b];k||(k=this.itemCache[b]=[]);k[d]?c([k[d]]):e.getObjectById(d,function(a){k[d]=a[0];c(a)})}},folderOpened:function(a){var c=this.getRepository(a.repositoryId);"function"===typeof c.folderOpened&&c.folderOpened(a)},folderClosed:function(a){var c=this.getRepository(a.repositoryId);"function"===
typeof c.folderClosed&&c.folderClosed(a)},folderSelected:function(a){var c=this.getRepository(a.repositoryId);"function"===typeof c.folderSelected&&c.folderSelected(a)},getSelectedFolder:function(){var a=e(this.repositories,c),b,d;for(b=0;b<a.length;b++)if(d=a[b].getSelectedFolder())return d;return null},toString:function(){return"repositorymanager"}});p.RepositoryManager=new b;return p.RepositoryManager});define("aloha/repository",["aloha/core","util/class","aloha/repositorymanager"],function(l,
b,p){b=b.extend({_constructor:function(b,f){this.repositoryId=b;this.settings={};this.repositoryName=f||b;p.register(this)},init:function(){},query:null,getChildren:null,makeClean:function(b){},markObject:function(b,f){},setTemplate:function(b){this.template=b?b:null},hasTemplate:function(){return this.template?!0:!1},getTemplate:function(){return this.template},getObjectById:function(b,f){return!0}});return l.AbstractRepository=b});(function(l){function b(){var b,a,c=Aloha.settings.plugins&&Aloha.settings.plugins.load,
g=Aloha.settings.baseUrl,d,e=/\/aloha.js(\?\S*)?$/,k=/\/[^\/]*\.js$/,f;if(!c||!g)for(b=document.getElementsByTagName("script"),f=0;f<b.length;f++){a=b[f];d=a.getAttribute("data-aloha-plugins");if(null!=d){c||(c=d);g||(g=a.src.replace(k,""));break}!g&&e.test(a.src)&&(g=a.src.replace(e,""))}"string"===typeof c&&""!==c&&(c=c.replace(/\s+/g,"").split(","));return{baseUrl:g,plugins:c||[]}}function p(){for(var b=document.getElementsByTagName("script"),a=0;a<b.length;a++)if("true"===b[a].getAttribute("data-aloha-defer-init"))return!0;
return!1}function m(b){var a={},c=[],g={},d={},e,k,f=Aloha.settings.basePath||"",m=Aloha.settings.bundles||{},l;for(l=0;l<b.length;l++){e=b[l].split("/");k=e[0];e=e[1];k=m[k]?f+m[k]:f+"../plugins/"+k;var p=a,B=k,q=e,s=["nls","css","vendor","res"],r=void 0,F=void 0;p[q]=B+"/"+q+"/lib";for(F=0;F<s.length;F++)r=s[F],p[q+"/"+r]=B+"/"+q+"/"+r;g[e]=k+"/"+e;c.push(e+"/"+e+"-plugin");d[e]={jquery:"aloha/jquery"}}return{paths:a,entryPoints:c,baseUrlByName:g,names:[],map:d}}function f(){var b={},a=Array.prototype.slice.call(arguments),
c,g,d;for(g=0;g<a.length;g++)for(c in d=a[g],d)d.hasOwnProperty(c)&&(b[c]=a[g][c]);return b}function d(b,a){define(b,function(){return a})}function k(){Aloha.features={};Aloha.defaults={};Aloha.settings=Aloha.settings||{};Aloha.initialize=e.start;var k=b(),a=m(k.plugins);Aloha.settings.baseUrl=k.baseUrl;Aloha.settings.loadedPlugins=a.names;Aloha.settings._pluginBaseUrlByName=a.baseUrlByName;k=f({aloha:{jquery:"aloha/jquery"},"aloha/jquery":{jquery:"jquery"},jqueryui:{jquery:"aloha/jquery"},vendor:{jquery:"aloha/jquery"},
util:{jquery:"aloha/jquery"},RepositoryBrowser:{jquery:"aloha/jquery"},jstree:{jquery:"aloha/jquery"},jqgrid:{jquery:"aloha/jquery"},"jqgrid-locale-en":{jquery:"aloha/jquery"},"jqgrid-locale-de":{jquery:"aloha/jquery"},"jquery-layout":{jquery:"aloha/jquery"}},a.map);k={config:{i18n:{locale:Aloha.settings.locale||"en"}},map:k};(l.__DEPS__||(l.__DEPS__={})).lang=k.config.i18n.locale;var c=f(k,Aloha.settings.requireConfig);c.paths=f({jquery:"vendor/jquery-1.7.2",jqueryui:"vendor/jquery-ui-1.9.0.custom-aloha"},
{PubSub:"vendor/pubsub/js/pubsub-unminified",Class:"vendor/class",RepositoryBrowser:"vendor/repository-browser/js/repository-browser-unminified",jstree:"vendor/jquery.jstree",jqgrid:"vendor/jquery.jqgrid","jquery-layout":"vendor/jquery.layout-1.3.0-rc30.7","jqgrid-locale-en":"vendor/grid.locale.en","jqgrid-locale-de":"vendor/grid.locale.de","repository-browser-i18n-de":"vendor/repository-browser/js/repository-browser-unminified","repository-browser-i18n-en":"vendor/repository-browser/js/repository-browser-unminified"},
a.paths,c.paths);for(var g in c.paths)c.paths[g]="../../aloha/src/lib/"+c.paths[g];g=Aloha.settings.predefinedModules||{};Aloha.settings.jQuery&&(g.jquery=Aloha.settings.jQuery);for(var v in g)g.hasOwnProperty(v)&&(d(v,g[v]),delete c.paths[v]);var u=require;Aloha.require=function(a){return 1===arguments.length&&"function"===typeof a?u(["aloha"],a):u.apply(this,arguments)};Aloha.bind=function(a,c){Aloha.require(["aloha/jquery"],function(b){Aloha.bind=function(a,c){switch(e.getReadiness(a)){case "deferred":var g=
e.getPhaseByEvent(a);g.deferred||(g.deferred=b.Deferred());g.deferred.done(c);break;case "immediate":c();break;case "normal":b(Aloha,"body").bind(a,c);break;default:throw"Unknown readiness";}return this};Aloha.bind(a,c)});return this};Aloha.trigger=function(a,c){Aloha.require(["aloha/jquery"],function(b){Aloha.trigger=function(a,c){var g=e.getPhaseByEvent(a);g&&g.deferred&&(b(g.deferred.resolve),g.deferred=null);b(Aloha,"body").trigger(a,c);return this};Aloha.trigger(a,c)});return this};Aloha.unbind=
function(a){Aloha.require(["aloha/jquery"],function(c){Aloha.unbind=function(a){c(Aloha,"body").unbind(a)};Aloha.unbind(a)})};Aloha.ready=function(a){this.bind("aloha-ready",a);return this};var p=Aloha.settings.jQuery;define("aloha/jquery",["jquery"],function(a){return p||a});Aloha.jQuery=p;define("aloha","aloha/jquery util/json2 aloha/rangy-core util/class util/lang util/range util/dom aloha/core aloha/editable aloha/console aloha/markup aloha/plugin aloha/selection aloha/command aloha/jquery.aloha aloha/sidebar util/position aloha/repositorymanager aloha/repository aloha/repositoryobjects aloha/contenthandlermanager".split(" "),
function(a){Aloha.features.jquery=!0;Aloha.jQuery=a;Aloha.settings=a.extendObjects(!0,{},Aloha.defaults,Aloha.settings);return Aloha});require(c,["aloha","aloha/jquery"],function(b,g){require(c,a.entryPoints,function(){g(function(){window.rangy.init();b.init()})})})}var e={phases:[],completed:[],start:function(b,a){e.phases=e.phases.concat(b);e.proceed(0,b,a)},proceed:function(b,a,c){if(b<a.length){var g=a[b],d=function(){e.proceed(++b,a,c)},k=function(){e.completed.push(g);g.event&&Aloha.trigger(g.event)};
g.fn?g.fn(k,d):(k(),d())}else c&&c()},getPhaseByEvent:function(b){var a;for(a=0;a<e.phases.length;a++)if(b===e.phases[a].event)return e.phases[a];return null},getReadiness:function(b){var a;for(a=0;a<e.completed.length;a++)if(b===e.completed[a].event)return"immediate";return e.getPhaseByEvent(b)?"deferred":"normal"}};l.Aloha=l.Aloha||{};l.Aloha.deferInit||p()?l.Aloha.deferInit=k:Aloha._load=k})(window);define("ui/context",["aloha","jquery","util/class"],function(l,b,p){var m;m=b("#aloha-ui-context");
m.length||(m=b("<div>",{"class":"aloha",id:"aloha-ui-context"}),b(function(){m.appendTo("body")}));l=p.extend({surfaces:[],containers:[]});b.extend(l,{selector:"#aloha-ui-context",element:m});return l});define("ui/scopes",["jquery","PubSub","util/maps"],function(l,b,p){function m(a,c){if(f.hasOwnProperty(c))for(var b=f[c],d=0;d<b.length;d++){var e=b[d];a.push(e);m(a,e)}}var f={"Aloha.empty":[],"Aloha.global":["Aloha.empty"],"Aloha.continuoustext":["Aloha.global"]},d=[],k={},e=!1;Aloha.bind("aloha-selection-changed-before",
function(){e=!1});Aloha.bind("aloha-selection-changed-after",function(a,c,b){"undefined"===typeof b||e||n.setScope("Aloha.continuoustext")});var n={enterScope:function(a,c){c=c||"_globalCounter";var g=k[a];g||(g=k[a]={});var d=g[c]||0;g[c]=d+1;d||b.pub("aloha.ui.scope.change")},leaveScope:function(a,c,g){c=c||"_globalCounter";var d=k[a];if(d){var e=d[c];e&&((e-=1)&&!g?d[c]=e:(delete d[c],p.isEmpty(d)&&delete k[a],b.pub("aloha.ui.scope.change")))}},isActiveScope:function(a){return k[a]||-1!==l.inArray(a,
d)?!0:!1},getPrimaryScope:function(){return d[0]},setScope:function(a){e=!0;d[0]!=a&&(d=[a],m(d,a),b.pub("aloha.ui.scope.change"))},createScope:function(a,c){c?"string"===typeof c&&(c=[c]):c=["Aloha.empty"];f[a]=c}};return n});define("ui/container",["jquery","util/class","ui/scopes"],function(l,b,p){function m(b,n){switch(l.type(n)){case "function":return n;case "object":if(n.scope)return d[n.scope]?d[n.scope]:d[n.scope]=function(){return p.isActiveScope(n.scope)};throw"Invalid showOn configuration";
default:return k}}var f=0,d={},k=function(){return!0};b=b.extend({element:null,_constructor:function(b,d){var a=m(this,d.showOn),c;a.showOnId||(a.showOnId=++f);c=a.showOnId;var g=b.containers[c];this.context=b;g||(g=b.containers[c]={shouldShow:a,containers:[]});g.containers.push(this)},show:function(){},hide:function(){},focus:function(){},foreground:function(){},childVisible:function(b,d){},childFocus:function(b){},childForeground:function(b){}});l.extend(b,{showContainersForContext:function(b,d){var a,
c,g;if(b.containers)for(c in g=b.containers,g)if(g.hasOwnProperty(c)){a=g[c];var k=a.containers;a=a.shouldShow(d)?"show":"hide";for(var f=void 0,f=0;f<k.length;f++)k[f][a]()}}});return b});define("ui/surface",["aloha/core","jquery","util/class","ui/container"],function(l,b,p,m){var f=p.extend({_constructor:function(b){b.surfaces.push(this)},isActive:function(){return!0}});b.extend(f,{range:null,show:function(d){b.each(d.surfaces,function(b,d){d.show()})},hide:function(d){b.each(d.surfaces,function(b,
d){d.hide()})},trackRange:function(b){b.bind("mousedown",function(b){b.originalEvent.stopSelectionUpdate=!0;l.eventHandled=!0;f.suppressHide=!0;l.activeEditable&&(b=l.getSelection(),f.range=0<b.getRangeCount()?b.getRangeAt(0):null)});b.bind("mouseup",function(b){b.originalEvent.stopSelectionUpdate=!0;l.eventHandled=!1;f.suppressHide=!1})}});return f});define("ui/component",["aloha/core","jquery","util/class"],function(l,b,p){var m=0;return p.extend({id:0,isInstance:!0,container:null,type:null,visible:!0,
_constructor:function(){this.id=m++;this.init()},adoptParent:function(b){this.container=b},init:function(){},isVisible:function(){return this.visible},show:function(b){!1===b?this.hide():this.visible||(this.visible=!0,this.element.show(),this.container&&this.container.childVisible(this,!0))},hide:function(){this.visible&&(this.visible=!1,this.element.hide(),this.container&&this.container.childVisible(this,!1))},focus:function(){this.element.focus();this.container&&this.container.childFocus(this)},
foreground:function(){this.container&&this.container.childForeground(this)},enable:function(b){},disable:function(){}})});define("jqueryui",["jquery"],function(l){(function(b,l){function m(d,k){var a,c;a=d.nodeName.toLowerCase();if("area"===a){a=d.parentNode;c=a.name;if(!d.href||!c||"map"!==a.nodeName.toLowerCase())return!1;a=b("img[usemap=#"+c+"]")[0];return!!a&&f(a)}return(/input|select|textarea|button|object/.test(a)?!d.disabled:"a"===a?d.href||k:k)&&f(d)}function f(d){return!b(d).parents().andSelf().filter(function(){return"hidden"===
b.css(this,"visibility")||b.expr.filters.hidden(this)}).length}var d=0,k=/^ui-id-\d+$/;b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),b.fn.extend({_focus:b.fn.focus,focus:function(d,k){return"number"===typeof d?this.each(function(){var a=
this;setTimeout(function(){b(a).focus();k&&k.call(a)},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var d;d=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+
b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!d.length?b(document):d},zIndex:function(d){if(d!==l)return this.css("zIndex",d);if(this.length){d=b(this[0]);for(var k;d.length&&d[0]!==document;){k=d.css("position");if("absolute"===k||"relative"===k||"fixed"===k)if(k=parseInt(d.css("zIndex"),10),!isNaN(k)&&0!==k)return k;d=d.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})},removeUniqueId:function(){return this.each(function(){k.test(this.id)&&
b(this).removeAttr("id")})}}),b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(d,k){function a(a,g,d,e){b.each(c,function(){g-=parseFloat(b.css(a,"padding"+this))||0;d&&(g-=parseFloat(b.css(a,"border"+this+"Width"))||0);e&&(g-=parseFloat(b.css(a,"margin"+this))||0)});return g}var c="Width"===k?["Left","Right"]:["Top","Bottom"],g=k.toLowerCase(),f={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+k]=function(c){return c===
l?f["inner"+k].call(this):this.each(function(){b(this).css(g,a(this,c)+"px")})};b.fn["outer"+k]=function(c,d){return"number"!==typeof c?f["outer"+k].call(this,c):this.each(function(){b(this).css(g,a(this,c,!0,d)+"px")})}}),b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(d){return function(k){return!!b.data(k,d)}}):function(d,k,a){return!!b.data(d,a[3])},focusable:function(d){return m(d,!isNaN(b.attr(d,"tabindex")))},tabbable:function(d){var k=b.attr(d,"tabindex"),a=isNaN(k);
return(a||0<=k)&&m(d,!a)}}),b(function(){var d=document.body,k=d.appendChild(k=document.createElement("div"));k.offsetHeight;b.extend(k.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===k.offsetHeight;b.support.selectstart="onselectstart"in k;d.removeChild(k).style.display="none"}),b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),
b.extend(b.ui,{plugin:{add:function(d,k,a){var c;d=b.ui[d].prototype;for(c in a)d.plugins[c]=d.plugins[c]||[],d.plugins[c].push([k,a[c]])},call:function(b,d,a){var c=b.plugins[d];if(c&&b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType)for(d=0;d<c.length;d++)b.options[c[d][0]]&&c[d][1].apply(b.element,a)}},contains:b.contains,hasScroll:function(d,k){if("hidden"===b(d).css("overflow"))return!1;var a=k&&"left"===k?"scrollLeft":"scrollTop",c=!1;if(0<d[a])return!0;d[a]=1;c=0<d[a];d[a]=0;return c},
isOverAxis:function(b,d,a){return b>d&&b<d+a},isOver:function(d,k,a,c,g,f){return b.ui.isOverAxis(d,a,g)&&b.ui.isOverAxis(k,c,f)}}))})(l);(function(b,l){var m=0,f=Array.prototype.slice,d=b.cleanData;b.cleanData=function(k){for(var e=0,n;null!=(n=k[e]);e++)try{b(n).triggerHandler("remove")}catch(a){}d(k)};b.widget=function(d,e,n){var a,c,g,f,m=d.split(".")[0];d=d.split(".")[1];a=m+"-"+d;n||(n=e,e=b.Widget);b.expr[":"][a.toLowerCase()]=function(c){return!!b.data(c,a)};b[m]=b[m]||{};c=b[m][d];g=b[m][d]=
function(a,c){if(!this._createWidget)return new g(a,c);arguments.length&&this._createWidget(a,c)};b.extend(g,c,{version:n.version,_proto:b.extend({},n),_childConstructors:[]});f=new e;f.options=b.widget.extend({},f.options);b.each(n,function(a,c){b.isFunction(c)&&(n[a]=function(){var b=function(){return e.prototype[a].apply(this,arguments)},g=function(c){return e.prototype[a].apply(this,c)};return function(){var a=this._super,d=this._superApply,e;this._super=b;this._superApply=g;e=c.apply(this,arguments);
this._super=a;this._superApply=d;return e}}())});g.prototype=b.widget.extend(f,{widgetEventPrefix:d},n,{constructor:g,namespace:m,widgetName:d,widgetBaseClass:a,widgetFullName:a});c?(b.each(c._childConstructors,function(a,c){var d=c.prototype;b.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete c._childConstructors):e._childConstructors.push(g);b.widget.bridge(d,g)};b.widget.extend=function(d){for(var e=f.call(arguments,1),n=0,a=e.length,c,g;n<a;n++)for(c in e[n])g=e[n][c],e[n].hasOwnProperty(c)&&
g!==l&&(d[c]=b.isPlainObject(g)?b.widget.extend({},d[c],g):g);return d};b.widget.bridge=function(d,e){var n=e.prototype.widgetFullName;b.fn[d]=function(a){var c="string"===typeof a,g=f.call(arguments,1),m=this;a=!c&&g.length?b.widget.extend.apply(null,[a].concat(g)):a;c?this.each(function(){var c,e=b.data(this,n);if(!e)return b.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+a+"'");if(!b.isFunction(e[a])||"_"===a.charAt(0))return b.error("no such method '"+
a+"' for "+d+" widget instance");c=e[a].apply(e,g);if(c!==e&&c!==l)return m=c&&c.jquery?m.pushStack(c.get()):c,!1}):this.each(function(){var c=b.data(this,n);c?c.option(a||{})._init():new e(a,this)});return m}};b.Widget=function(b,d){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(d,e){e=b(e||this.defaultElement||this)[0];this.element=b(e);this.uuid=m++;this.eventNamespace=
"."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),d);this.bindings=b();this.hoverable=b();this.focusable=b();e!==this&&(b.data(e,this.widgetName,this),b.data(e,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=b(e.style?e.ownerDocument:e.document||e),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,
_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:b.noop,widget:function(){return this.element},option:function(d,e){var n=d,a,c,g;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof d)if(n={},a=d.split("."),d=a.shift(),a.length){c=n[d]=b.widget.extend({},this.options[d]);for(g=0;g<a.length-1;g++)c[a[g]]=c[a[g]]||{},c=c[a[g]];d=a.pop();if(e===l)return c[d]===l?null:c[d];c[d]=e}else{if(e===l)return this.options[d]===l?null:this.options[d];n[d]=e}this._setOptions(n);return this},_setOptions:function(b){for(var d in b)this._setOption(d,
b[d]);return this},_setOption:function(b,d){this.options[b]=d;"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!d).attr("aria-disabled",d),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(d,e){e?(d=b(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element);var n=this;b.each(e,
function(a,c){function g(){if(!0!==n.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof c?n[c]:c).apply(n,arguments)}"string"!==typeof c&&(g.guid=c.guid=c.guid||g.guid||b.guid++);var e=a.match(/^(\w+)\s*(.*)$/),f=e[1]+n.eventNamespace;(e=e[2])?n.widget().delegate(e,f,g):d.bind(f,g)})},_off:function(b,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(d).undelegate(d)},_delay:function(b,d){var n=this;return setTimeout(function(){return("string"===
typeof b?n[b]:b).apply(n,arguments)},d||0)},_hoverable:function(d){this.hoverable=this.hoverable.add(d);this._on(d,{mouseenter:function(d){b(d.currentTarget).addClass("ui-state-hover")},mouseleave:function(d){b(d.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(d){this.focusable=this.focusable.add(d);this._on(d,{focusin:function(d){b(d.currentTarget).addClass("ui-state-focus")},focusout:function(d){b(d.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(d,e,n){var a,
c=this.options[d];n=n||{};e=b.Event(e);e.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();e.target=this.element[0];if(d=e.originalEvent)for(a in d)a in e||(e[a]=d[a]);this.element.trigger(e,n);return!(b.isFunction(c)&&!1===c.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(d,e){b.Widget.prototype["_"+d]=function(n,a,c){"string"===typeof a&&(a={effect:a});var g,f=a?!0===a||"number"===typeof a?e:a.effect||e:d;a=
a||{};"number"===typeof a&&(a={duration:a});g=!b.isEmptyObject(a);a.complete=c;a.delay&&n.delay(a.delay);if(g&&b.effects&&(b.effects.effect[f]||!1!==b.uiBackCompat&&b.effects[f]))n[d](a);else if(f!==d&&n[f])n[f](a.duration,a.easing,c);else n.queue(function(a){b(this)[d]();c&&c.call(n[0]);a()})}});!1!==b.uiBackCompat&&(b.Widget.prototype._getCreateOptions=function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]})})(l);(function(b,l){var m=!1;b(document).mouseup(function(b){m=
!1});b.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(b){return f._mouseDown(b)}).bind("click."+this.widgetName,function(d){if(!0===b.data(d.target,f.widgetName+".preventClickEvent"))return b.removeData(d.target,f.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);
this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(f){if(!m){this._mouseStarted&&this._mouseUp(f);this._mouseDownEvent=f;var d=this,k=1===f.which,e="string"===typeof this.options.cancel&&f.target.nodeName?b(f.target).closest(this.options.cancel).length:!1;if(!k||e||!this._mouseCapture(f))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)&&(this._mouseStarted=!1!==this._mouseStart(f),!this._mouseStarted))return f.preventDefault(),!0;!0===b.data(f.target,this.widgetName+".preventClickEvent")&&b.removeData(f.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return d._mouseMove(b)};this._mouseUpDelegate=function(b){return d._mouseUp(b)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);f.preventDefault();return m=!0}},_mouseMove:function(f){if(b.browser.msie&&!(9<=document.documentMode||f.button))return this._mouseUp(f);if(this._mouseStarted)return this._mouseDrag(f),f.preventDefault();this._mouseDistanceMet(f)&&this._mouseDelayMet(f)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,f))?this._mouseDrag(f):this._mouseUp(f));return!this._mouseStarted},_mouseUp:function(f){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,f.target===this._mouseDownEvent.target&&b.data(f.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(f));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return!0}})})(l);
(function(b,p){function m(a,c,b){return[parseInt(a[0],10)*(v.test(a[0])?c/100:1),parseInt(a[1],10)*(v.test(a[1])?b/100:1)]}b.ui=b.ui||{};var f,d=Math.max,k=Math.abs,e=Math.round,n=/left|center|right/,a=/top|center|bottom/,c=/[\+\-]\d+%?/,g=/^\w+/,v=/%$/,u=b.fn.position;b.position={scrollbarWidth:function(){if(f!==p)return f;var a,c,g=b("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");c=g.children()[0];b("body").append(g);a=c.offsetWidth;
g.css("overflow","scroll");c=c.offsetWidth;a===c&&(c=g[0].clientWidth);g.remove();return f=a-c},getScrollInfo:function(a){var c=a.isWindow?"":a.element.css("overflow-x"),g=a.isWindow?"":a.element.css("overflow-y"),g="scroll"===g||"auto"===g&&a.height<a.element[0].scrollHeight;return{width:"scroll"===c||"auto"===c&&a.width<a.element[0].scrollWidth?b.position.scrollbarWidth():0,height:g?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=b(a||window);var c=b.isWindow(a[0]);return{element:a,
isWindow:c,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}};b.fn.position=function(f){if(!f||!f.of)return u.apply(this,arguments);f=b.extend({},f);var l,v,p,D,B,q=b(f.of),s=b.position.getWithinInfo(f.within),r=b.position.getScrollInfo(s),F=q[0],t=(f.collision||"flip").split(" "),S={};9===F.nodeType?(v=q.width(),p=q.height(),D={top:0,left:0}):b.isWindow(F)?(v=q.width(),p=q.height(),D={top:q.scrollTop(),
left:q.scrollLeft()}):F.preventDefault?(f.at="left top",v=p=0,D={top:F.pageY,left:F.pageX}):(v=q.outerWidth(),p=q.outerHeight(),D=q.offset());B=b.extend({},D);b.each(["my","at"],function(){var b=(f[this]||"").split(" "),d,e;1===b.length&&(b=n.test(b[0])?b.concat(["center"]):a.test(b[0])?["center"].concat(b):["center","center"]);b[0]=n.test(b[0])?b[0]:"center";b[1]=a.test(b[1])?b[1]:"center";d=c.exec(b[0]);e=c.exec(b[1]);S[this]=[d?d[0]:0,e?e[0]:0];f[this]=[g.exec(b[0])[0],g.exec(b[1])[0]]});1===t.length&&
(t[1]=t[0]);"right"===f.at[0]?B.left+=v:"center"===f.at[0]&&(B.left+=v/2);"bottom"===f.at[1]?B.top+=p:"center"===f.at[1]&&(B.top+=p/2);l=m(S.at,v,p);B.left+=l[0];B.top+=l[1];return this.each(function(){var a,c,g=b(this),n=g.outerWidth(),u=g.outerHeight(),F=parseInt(b.css(this,"marginLeft"),10)||0,W=parseInt(b.css(this,"marginTop"),10)||0,Z=n+F+(parseInt(b.css(this,"marginRight"),10)||0)+r.width,V=u+W+(parseInt(b.css(this,"marginBottom"),10)||0)+r.height,Q=b.extend({},B),R=m(S.my,g.outerWidth(),g.outerHeight());
"right"===f.my[0]?Q.left-=n:"center"===f.my[0]&&(Q.left-=n/2);"bottom"===f.my[1]?Q.top-=u:"center"===f.my[1]&&(Q.top-=u/2);Q.left+=R[0];Q.top+=R[1];b.support.offsetFractions||(Q.left=e(Q.left),Q.top=e(Q.top));a={marginLeft:F,marginTop:W};b.each(["left","top"],function(c,d){if(b.ui.position[t[c]])b.ui.position[t[c]][d](Q,{targetWidth:v,targetHeight:p,elemWidth:n,elemHeight:u,collisionPosition:a,collisionWidth:Z,collisionHeight:V,offset:[l[0]+R[0],l[1]+R[1]],my:f.my,at:f.at,within:s,elem:g})});b.fn.bgiframe&&
g.bgiframe();f.using&&(c=function(a){var c=D.left-Q.left,b=c+v-n,e=D.top-Q.top,m=e+p-u,l={target:{element:q,left:D.left,top:D.top,width:v,height:p},element:{element:g,left:Q.left,top:Q.top,width:n,height:u},horizontal:0>b?"left":0<c?"right":"center",vertical:0>m?"top":0<e?"bottom":"middle"};v<n&&k(c+b)<v&&(l.horizontal="center");p<u&&k(e+m)<p&&(l.vertical="middle");d(k(c),k(b))>d(k(e),k(m))?l.important="horizontal":l.important="vertical";f.using.call(this,a,l)});g.offset(b.extend(Q,{using:c}))})};
b.ui.position={fit:{left:function(a,c){var b=c.within,g=b.isWindow?b.scrollLeft:b.offset.left,e=b.width,k=a.left-c.collisionPosition.marginLeft,b=g-k,n=k+c.collisionWidth-e-g;c.collisionWidth>e?0<b&&0>=n?(g=a.left+b+c.collisionWidth-e-g,a.left+=b-g):a.left=0<n&&0>=b?g:b>n?g+e-c.collisionWidth:g:a.left=0<b?a.left+b:0<n?a.left-n:d(a.left-k,a.left)},top:function(a,c){var b=c.within,g=b.isWindow?b.scrollTop:b.offset.top,e=c.within.height,k=a.top-c.collisionPosition.marginTop,b=g-k,n=k+c.collisionHeight-
e-g;c.collisionHeight>e?0<b&&0>=n?(g=a.top+b+c.collisionHeight-e-g,a.top+=b-g):a.top=0<n&&0>=b?g:b>n?g+e-c.collisionHeight:g:a.top=0<b?a.top+b:0<n?a.top-n:d(a.top-k,a.top)}},flip:{left:function(a,c){var b=c.within,g=b.offset.left+b.scrollLeft,d=b.width,e=b.isWindow?b.scrollLeft:b.offset.left,n=a.left-c.collisionPosition.marginLeft,b=n-e,f=n+c.collisionWidth-d-e,n="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,m="left"===c.at[0]?c.targetWidth:"right"===c.at[0]?-c.targetWidth:0,l=-2*
c.offset[0];if(0>b){if(g=a.left+n+m+l+c.collisionWidth-d-g,0>g||g<k(b))a.left+=n+m+l}else 0<f&&(g=a.left-c.collisionPosition.marginLeft+n+m+l-e,0<g||k(g)<f)&&(a.left+=n+m+l)},top:function(a,c){var b=c.within,g=b.offset.top+b.scrollTop,d=b.height,e=b.isWindow?b.scrollTop:b.offset.top,n=a.top-c.collisionPosition.marginTop,b=n-e,f=n+c.collisionHeight-d-e,n="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,m="top"===c.at[1]?c.targetHeight:"bottom"===c.at[1]?-c.targetHeight:0,l=-2*c.offset[1];
0>b?(g=a.top+n+m+l+c.collisionHeight-d-g,a.top+n+m+l>b&&(0>g||g<k(b))&&(a.top+=n+m+l)):0<f&&(g=a.top-c.collisionPosition.marginTop+n+m+l-e,a.top+n+m+l>f&&(0<g||k(g)<f)&&(a.top+=n+m+l))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,c,g,d,e=document.getElementsByTagName("body")[0];g=document.createElement("div");
a=document.createElement(e?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};e&&b.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(d in c)a.style[d]=c[d];a.appendChild(g);c=e||document.documentElement;c.insertBefore(a,c.firstChild);g.style.cssText="position: absolute; left: 10.7432222px;";g=b(g).offset().left;b.support.offsetFractions=10<g&&11>g;a.innerHTML="";c.removeChild(a)})();!1!==b.uiBackCompat&&function(a){var c=a.fn.position;a.fn.position=
function(b){if(!b||!b.offset)return c.call(this,b);var g=b.offset.split(" "),d=b.at.split(" ");1===g.length&&(g[1]=g[0]);/^\d/.test(g[0])&&(g[0]="+"+g[0]);/^\d/.test(g[1])&&(g[1]="+"+g[1]);1===d.length&&(/left|center|right/.test(d[0])?d[1]="center":(d[1]=d[0],d[0]="center"));return c.call(this,a.extend(b,{at:d[0]+g[0]+" "+d[1]+g[1],offset:p}))}}(l)})(l);(function(b,l){b.widget("ui.draggable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,
containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&
this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(m){var f=this.options;if(this.helper||f.disabled||b(m.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(m);if(!this.handle)return!1;b(!0===f.iframeFix?"iframe":f.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return!0},_mouseStart:function(m){var f=this.options;this.helper=this._createHelper(m);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();b.ui.ddmanager&&(b.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset=
{top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:m.pageX-this.offset.left,top:m.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(m);this.originalPageX=m.pageX;this.originalPageY=m.pageY;f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt);f.containment&&this._setContainment();if(!1===this._trigger("start",m))return this._clear(),!1;this._cacheHelperProportions();
b.ui.ddmanager&&!f.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,m);this._mouseDrag(m,!0);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,m);return!0},_mouseDrag:function(m,f){this.position=this._generatePosition(m);this.positionAbs=this._convertPositionTo("absolute");if(!f){var d=this._uiHash();if(!1===this._trigger("drag",m,d))return this._mouseUp({}),!1;this.position=d.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==
this.options.axis||(this.helper[0].style.top=this.position.top+"px");b.ui.ddmanager&&b.ui.ddmanager.drag(this,m);return!1},_mouseStop:function(m){var f=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(f=b.ui.ddmanager.drop(this,m));this.dropped&&(f=this.dropped,this.dropped=!1);for(var d=this.element[0],k=!1;d&&(d=d.parentNode);)d==document&&(k=!0);if(!k&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!f||"valid"==this.options.revert&&f||!0===this.options.revert||b.isFunction(this.options.revert)&&
this.options.revert.call(this.element,f)){var e=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",m)&&e._clear()})}else!1!==this._trigger("stop",m)&&this._clear();return!1},_mouseUp:function(m){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,m);return b.ui.mouse.prototype._mouseUp.call(this,m)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(m){var f=this.options.handle&&b(this.options.handle,this.element).length?!1:!0;b(this.options.handle,this.element).find("*").andSelf().each(function(){this==m.target&&(f=!0)});return f},_createHelper:function(m){var f=this.options;m=b.isFunction(f.helper)?b(f.helper.apply(this.element[0],[m])):"clone"==f.helper?this.element.clone().removeAttr("id"):this.element;m.parents("body").length||m.appendTo("parent"==f.appendTo?this.element[0].parentNode:
f.appendTo);m[0]==this.element[0]||/(fixed|absolute)/.test(m.css("position"))||m.css("position","absolute");return m},_adjustOffsetFromHelper:function(m){"string"==typeof m&&(m=m.split(" "));b.isArray(m)&&(m={left:+m[0],top:+m[1]||0});"left"in m&&(this.offset.click.left=m.left+this.margins.left);"right"in m&&(this.offset.click.left=this.helperProportions.width-m.right+this.margins.left);"top"in m&&(this.offset.click.top=m.top+this.margins.top);"bottom"in m&&(this.offset.click.top=this.helperProportions.height-
m.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var m=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(m.left+=this.scrollParent.scrollLeft(),m.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)m={top:0,left:0};return{top:m.top+(parseInt(this.offsetParent.css("borderTopWidth"),
10)||0),left:m.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),
10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var m=this.options;"parent"==m.containment&&(m.containment=this.helper[0].parentNode);if("document"==m.containment||"window"==m.containment)this.containment=["document"==m.containment?0:b(window).scrollLeft()-this.offset.relative.left-
this.offset.parent.left,"document"==m.containment?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==m.containment?0:b(window).scrollLeft())+b("document"==m.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==m.containment?0:b(window).scrollTop())+(b("document"==m.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(m.containment)||
m.containment.constructor==Array)m.containment.constructor==Array&&(this.containment=m.containment);else{var m=b(m.containment),f=m[0];if(f){m.offset();var d="hidden"!=b(f).css("overflow");this.containment=[(parseInt(b(f).css("borderLeftWidth"),10)||0)+(parseInt(b(f).css("paddingLeft"),10)||0),(parseInt(b(f).css("borderTopWidth"),10)||0)+(parseInt(b(f).css("paddingTop"),10)||0),(d?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(b(f).css("borderLeftWidth"),10)||0)-(parseInt(b(f).css("paddingRight"),
10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(b(f).css("borderTopWidth"),10)||0)-(parseInt(b(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=m}}},_convertPositionTo:function(m,f){f||(f=this.position);var d="absolute"==m?1:-1,k="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])?
this.scrollParent:this.offsetParent,e=/(html|body)/i.test(k[0].tagName);return{top:f.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:k.scrollTop())*d,left:f.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:k.scrollLeft())*d}},_generatePosition:function(m){var f=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],
this.offsetParent[0])?this.scrollParent:this.offsetParent,k=/(html|body)/i.test(d[0].tagName),e=m.pageX,n=m.pageY;if(this.originalPosition){var a;this.containment&&(this.relative_container?(a=this.relative_container.offset(),a=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):a=this.containment,m.pageX-this.offset.click.left<a[0]&&(e=a[0]+this.offset.click.left),m.pageY-this.offset.click.top<a[1]&&(n=a[1]+this.offset.click.top),m.pageX-this.offset.click.left>
a[2]&&(e=a[2]+this.offset.click.left),m.pageY-this.offset.click.top>a[3]&&(n=a[3]+this.offset.click.top));f.grid&&(n=f.grid[1]?this.originalPageY+Math.round((n-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY,n=a?n-this.offset.click.top<a[1]||n-this.offset.click.top>a[3]?n-this.offset.click.top<a[1]?n+f.grid[1]:n-f.grid[1]:n:n,e=f.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX,e=a?e-this.offset.click.left<a[0]||e-this.offset.click.left>
a[2]?e-this.offset.click.left<a[0]?e+f.grid[0]:e-f.grid[0]:e:e)}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():k?0:d.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():k?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||
this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(m,f,d){d=d||this._uiHash();b.ui.plugin.call(this,m,[f,d]);"drag"==m&&(this.positionAbs=this._convertPositionTo("absolute"));return b.Widget.prototype._trigger.call(this,m,f,d)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(m,f){var d=b(this).data("draggable"),
k=d.options,e=b.extend({},f,{item:d.element});d.sortables=[];b(k.connectToSortable).each(function(){var k=b.data(this,"sortable");k&&!k.options.disabled&&(d.sortables.push({instance:k,shouldRevert:k.options.revert}),k.refreshPositions(),k._trigger("activate",m,e))})},stop:function(m,f){var d=b(this).data("draggable"),k=b.extend({},f,{item:d.element});b.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&
(this.instance.options.revert=!0),this.instance._mouseStop(m),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",m,k))})},drag:function(m,f){var d=b(this).data("draggable"),k=this;b.each(d.sortables,function(e){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;
this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(k).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return f.helper[0]},m.target=this.instance.currentItem[0],this.instance._mouseCapture(m,!0),this.instance._mouseStart(m,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=
d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",m),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(m)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",
m,this.instance._uiHash(this.instance)),this.instance._mouseStop(m,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",m),d.dropped=!1)})}});b.ui.plugin.add("draggable","cursor",{start:function(m,f){var d=b("body"),k=b(this).data("draggable").options;d.css("cursor")&&(k._cursor=d.css("cursor"));d.css("cursor",k.cursor)},stop:function(m,f){var d=b(this).data("draggable").options;
d._cursor&&b("body").css("cursor",d._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(m,f){var d=b(f.helper),k=b(this).data("draggable").options;d.css("opacity")&&(k._opacity=d.css("opacity"));d.css("opacity",k.opacity)},stop:function(m,f){var d=b(this).data("draggable").options;d._opacity&&b(f.helper).css("opacity",d._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(m,f){var d=b(this).data("draggable");d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName&&
(d.overflowOffset=d.scrollParent.offset())},drag:function(m,f){var d=b(this).data("draggable"),k=d.options,e=!1;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(k.axis&&"x"==k.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-m.pageY<k.scrollSensitivity?d.scrollParent[0].scrollTop=e=d.scrollParent[0].scrollTop+k.scrollSpeed:m.pageY-d.overflowOffset.top<k.scrollSensitivity&&(d.scrollParent[0].scrollTop=e=d.scrollParent[0].scrollTop-k.scrollSpeed)),k.axis&&"y"==k.axis||(d.overflowOffset.left+
d.scrollParent[0].offsetWidth-m.pageX<k.scrollSensitivity?d.scrollParent[0].scrollLeft=e=d.scrollParent[0].scrollLeft+k.scrollSpeed:m.pageX-d.overflowOffset.left<k.scrollSensitivity&&(d.scrollParent[0].scrollLeft=e=d.scrollParent[0].scrollLeft-k.scrollSpeed))):(k.axis&&"x"==k.axis||(m.pageY-b(document).scrollTop()<k.scrollSensitivity?e=b(document).scrollTop(b(document).scrollTop()-k.scrollSpeed):b(window).height()-(m.pageY-b(document).scrollTop())<k.scrollSensitivity&&(e=b(document).scrollTop(b(document).scrollTop()+
k.scrollSpeed))),k.axis&&"y"==k.axis||(m.pageX-b(document).scrollLeft()<k.scrollSensitivity?e=b(document).scrollLeft(b(document).scrollLeft()-k.scrollSpeed):b(window).width()-(m.pageX-b(document).scrollLeft())<k.scrollSensitivity&&(e=b(document).scrollLeft(b(document).scrollLeft()+k.scrollSpeed))));!1!==e&&b.ui.ddmanager&&!k.dropBehaviour&&b.ui.ddmanager.prepareOffsets(d,m)}});b.ui.plugin.add("draggable","snap",{start:function(m,f){var d=b(this).data("draggable"),k=d.options;d.snapElements=[];b(k.snap.constructor!=
String?k.snap.items||":data(draggable)":k.snap).each(function(){var e=b(this),k=e.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:k.top,left:k.left})})},drag:function(m,f){for(var d=b(this).data("draggable"),k=d.options,e=k.snapTolerance,n=f.offset.left,a=n+d.helperProportions.width,c=f.offset.top,g=c+d.helperProportions.height,l=d.snapElements.length-1;0<=l;l--){var u=d.snapElements[l].left,p=u+d.snapElements[l].width,A=d.snapElements[l].top,
y=A+d.snapElements[l].height;if(u-e<n&&n<p+e&&A-e<c&&c<y+e||u-e<n&&n<p+e&&A-e<g&&g<y+e||u-e<a&&a<p+e&&A-e<c&&c<y+e||u-e<a&&a<p+e&&A-e<g&&g<y+e){if("inner"!=k.snapMode){var C=Math.abs(A-g)<=e,q=Math.abs(y-c)<=e,B=Math.abs(u-a)<=e,s=Math.abs(p-n)<=e;C&&(f.position.top=d._convertPositionTo("relative",{top:A-d.helperProportions.height,left:0}).top-d.margins.top);q&&(f.position.top=d._convertPositionTo("relative",{top:y,left:0}).top-d.margins.top);B&&(f.position.left=d._convertPositionTo("relative",{top:0,
left:u-d.helperProportions.width}).left-d.margins.left);s&&(f.position.left=d._convertPositionTo("relative",{top:0,left:p}).left-d.margins.left)}var r=C||q||B||s;"outer"!=k.snapMode&&(C=Math.abs(A-c)<=e,q=Math.abs(y-g)<=e,B=Math.abs(u-n)<=e,s=Math.abs(p-a)<=e,C&&(f.position.top=d._convertPositionTo("relative",{top:A,left:0}).top-d.margins.top),q&&(f.position.top=d._convertPositionTo("relative",{top:y-d.helperProportions.height,left:0}).top-d.margins.top),B&&(f.position.left=d._convertPositionTo("relative",
{top:0,left:u}).left-d.margins.left),s&&(f.position.left=d._convertPositionTo("relative",{top:0,left:p-d.helperProportions.width}).left-d.margins.left));!d.snapElements[l].snapping&&(C||q||B||s||r)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,m,b.extend(d._uiHash(),{snapItem:d.snapElements[l].item}));d.snapElements[l].snapping=C||q||B||s||r}else d.snapElements[l].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,m,b.extend(d._uiHash(),{snapItem:d.snapElements[l].item})),
d.snapElements[l].snapping=!1}}});b.ui.plugin.add("draggable","stack",{start:function(m,f){var d=b(this).data("draggable").options,d=b.makeArray(b(d.stack)).sort(function(d,k){return(parseInt(b(d).css("zIndex"),10)||0)-(parseInt(b(k).css("zIndex"),10)||0)});if(d.length){var k=parseInt(d[0].style.zIndex)||0;b(d).each(function(b){this.style.zIndex=k+b});this[0].style.zIndex=k+d.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(m,f){var d=b(f.helper),k=b(this).data("draggable").options;
d.css("zIndex")&&(k._zIndex=d.css("zIndex"));d.css("zIndex",k.zIndex)},stop:function(m,f){var d=b(this).data("draggable").options;d._zIndex&&b(f.helper).css("zIndex",d._zIndex)}})})(l);(function(b,l){b.widget("ui.droppable",{version:"1.9.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var m=this.options,f=m.accept;this.isover=0;this.isout=1;this.accept=b.isFunction(f)?f:function(b){return b.is(f)};
this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};b.ui.ddmanager.droppables[m.scope]=b.ui.ddmanager.droppables[m.scope]||[];b.ui.ddmanager.droppables[m.scope].push(this);m.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var m=b.ui.ddmanager.droppables[this.options.scope],f=0;f<m.length;f++)m[f]==this&&m.splice(f,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(m,f){"accept"==m&&(this.accept=b.isFunction(f)?
f:function(b){return b.is(f)});b.Widget.prototype._setOption.apply(this,arguments)},_activate:function(m){var f=b.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);f&&this._trigger("activate",m,this.ui(f))},_deactivate:function(m){var f=b.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);f&&this._trigger("deactivate",m,this.ui(f))},_over:function(m){var f=b.ui.ddmanager.current;f&&(f.currentItem||f.element)[0]!=
this.element[0]&&this.accept.call(this.element[0],f.currentItem||f.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",m,this.ui(f)))},_out:function(m){var f=b.ui.ddmanager.current;f&&(f.currentItem||f.element)[0]!=this.element[0]&&this.accept.call(this.element[0],f.currentItem||f.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",m,this.ui(f)))},_drop:function(m,f){var d=f||b.ui.ddmanager.current;
if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var k=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=b.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==d.options.scope&&e.accept.call(e.element[0],d.currentItem||d.element)&&b.ui.intersect(d,b.extend(e,{offset:e.element.offset()}),e.options.tolerance))return k=!0,!1});return k?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&
this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",m,this.ui(d)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});b.ui.intersect=function(m,f,d){if(!f.offset)return!1;var k=(m.positionAbs||m.position.absolute).left,e=k+m.helperProportions.width,n=(m.positionAbs||m.position.absolute).top,a=n+m.helperProportions.height,
c=f.offset.left,g=c+f.proportions.width,l=f.offset.top,u=l+f.proportions.height;switch(d){case "fit":return c<=k&&e<=g&&l<=n&&a<=u;case "intersect":return c<k+m.helperProportions.width/2&&e-m.helperProportions.width/2<g&&l<n+m.helperProportions.height/2&&a-m.helperProportions.height/2<u;case "pointer":return b.ui.isOver((m.positionAbs||m.position.absolute).top+(m.clickOffset||m.offset.click).top,(m.positionAbs||m.position.absolute).left+(m.clickOffset||m.offset.click).left,l,c,f.proportions.height,
f.proportions.width);case "touch":return(n>=l&&n<=u||a>=l&&a<=u||n<l&&a>u)&&(k>=c&&k<=g||e>=c&&e<=g||k<c&&e>g);default:return!1}};b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(m,f){var d=b.ui.ddmanager.droppables[m.options.scope]||[],k=f?f.type:null,e=(m.currentItem||m.element).find(":data(droppable)").andSelf(),n=0;a:for(;n<d.length;n++)if(!(d[n].options.disabled||m&&!d[n].accept.call(d[n].element[0],m.currentItem||m.element))){for(var a=0;a<e.length;a++)if(e[a]==
d[n].element[0]){d[n].proportions.height=0;continue a}d[n].visible="none"!=d[n].element.css("display");d[n].visible&&("mousedown"==k&&d[n]._activate.call(d[n],f),d[n].offset=d[n].element.offset(),d[n].proportions={width:d[n].element[0].offsetWidth,height:d[n].element[0].offsetHeight})}},drop:function(m,f){var d=!1;b.each(b.ui.ddmanager.droppables[m.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&b.ui.intersect(m,this,this.options.tolerance)&&(d=this._drop.call(this,
f)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],m.currentItem||m.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,f)))});return d},dragStart:function(m,f){m.element.parentsUntil("body").bind("scroll.droppable",function(){m.options.refreshPositions||b.ui.ddmanager.prepareOffsets(m,f)})},drag:function(m,f){m.options.refreshPositions&&b.ui.ddmanager.prepareOffsets(m,f);b.each(b.ui.ddmanager.droppables[m.options.scope]||[],function(){if(!this.options.disabled&&
!this.greedyChild&&this.visible){var d=b.ui.intersect(m,this,this.options.tolerance);if(d=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout"){var k;if(this.options.greedy){var e=this.options.scope,n=this.element.parents(":data(droppable)").filter(function(){return b.data(this,"droppable").options.scope===e});n.length&&(k=b.data(n[0],"droppable"),k.greedyChild="isover"==d?1:0)}k&&"isover"==d&&(k.isover=0,k.isout=1,k._out.call(k,f));this[d]=1;this["isout"==d?"isover":"isout"]=0;this["isover"==
d?"_over":"_out"].call(this,f);k&&"isout"==d&&(k.isout=0,k.isover=1,k._over.call(k,f))}}})},dragStop:function(m,f){m.element.parentsUntil("body").unbind("scroll.droppable");m.options.refreshPositions||b.ui.ddmanager.prepareOffsets(m,f)}}})(l);(function(b,l){b.widget("ui.resizable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,
maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var d=this,k=this.options;this.element.addClass("ui-resizable");b.extend(this,{_aspectRatio:!!k.aspectRatio,aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,
marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=k.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",
sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var e=this.handles.split(",");this.handles={};for(var n=0;n<e.length;n++){var a=b.trim(e[n]),c=b('<div class="ui-resizable-handle ui-resizable-'+a+'"></div>');c.css({zIndex:k.zIndex});"se"==a&&c.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[a]=".ui-resizable-"+a;this.element.append(c)}}this._renderAxis=function(a){a=
a||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=b(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=b(this.handles[c],this.element),e=0,e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");a.css(d,e);this._proportionallyResize()}b(this.handles[c])}};
this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!d.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);d.axis=a&&a[1]?a[1]:"se"}});k.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){k.disabled||(b(this).removeClass("ui-resizable-autohide"),d._handles.show())}).mouseleave(function(){k.disabled||d.resizing||(b(this).addClass("ui-resizable-autohide"),
d._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var d=function(d){b(d).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var k=this.element;k.after(this.originalElement.css({position:k.css("position"),width:k.outerWidth(),height:k.outerHeight(),top:k.css("top"),left:k.css("left")})).remove()}this.originalElement.css("resize",
this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(d){var k=!1,e;for(e in this.handles)b(this.handles[e])[0]==d.target&&(k=!0);return!this.options.disabled&&k},_mouseStart:function(d){var k=this.options,e=this.element.position(),n=this.element;this.resizing=!0;this.documentScroll={top:b(document).scrollTop(),left:b(document).scrollLeft()};(n.is(".ui-draggable")||/absolute/.test(n.css("position")))&&n.css({position:"absolute",top:e.top,left:e.left});this._renderProxy();
var e=m(this.helper.css("left")),a=m(this.helper.css("top"));k.containment&&(e+=b(k.containment).scrollLeft()||0,a+=b(k.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:e,top:a};this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()};this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()};this.originalPosition={left:e,top:a};this.sizeDiff={width:n.outerWidth()-
n.width(),height:n.outerHeight()-n.height()};this.originalMousePosition={left:d.pageX,top:d.pageY};this.aspectRatio="number"==typeof k.aspectRatio?k.aspectRatio:this.originalSize.width/this.originalSize.height||1;k=b(".ui-resizable-"+this.axis).css("cursor");b("body").css("cursor","auto"==k?this.axis+"-resize":k);n.addClass("ui-resizable-resizing");this._propagate("start",d);return!0},_mouseDrag:function(b){var k=this.helper,e=this.originalMousePosition,n=this._change[this.axis];if(!n)return!1;e=
n.apply(this,[b,b.pageX-e.left||0,b.pageY-e.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)e=this._updateRatio(e,b);e=this._respectSize(e,b);this._propagate("resize",b);k.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(e);this._trigger("resize",b,this.ui());return!1},_mouseStop:function(d){this.resizing=
!1;var k=this.options;if(this._helper){var e=this._proportionallyResizeElements,n=e.length&&/textarea/i.test(e[0].nodeName),e=n&&b.ui.hasScroll(e[0],"left")?0:this.sizeDiff.height,n=n?0:this.sizeDiff.width,n={width:this.helper.width()-n,height:this.helper.height()-e},e=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,a=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;k.animate||this.element.css(b.extend(n,{top:a,left:e}));
this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!k.animate&&this._proportionallyResize()}b("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",d);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var k=this.options,e,n,a,k={minWidth:f(k.minWidth)?k.minWidth:0,maxWidth:f(k.maxWidth)?k.maxWidth:Infinity,minHeight:f(k.minHeight)?k.minHeight:0,maxHeight:f(k.maxHeight)?k.maxHeight:Infinity};
if(this._aspectRatio||b)b=k.minHeight*this.aspectRatio,n=k.minWidth/this.aspectRatio,e=k.maxHeight*this.aspectRatio,a=k.maxWidth/this.aspectRatio,b>k.minWidth&&(k.minWidth=b),n>k.minHeight&&(k.minHeight=n),e<k.maxWidth&&(k.maxWidth=e),a<k.maxHeight&&(k.maxHeight=a);this._vBoundaries=k},_updateCache:function(b){this.offset=this.helper.offset();f(b.left)&&(this.position.left=b.left);f(b.top)&&(this.position.top=b.top);f(b.height)&&(this.size.height=b.height);f(b.width)&&(this.size.width=b.width)},_updateRatio:function(b,
k){var e=this.position,n=this.size,a=this.axis;f(b.height)?b.width=b.height*this.aspectRatio:f(b.width)&&(b.height=b.width/this.aspectRatio);"sw"==a&&(b.left=e.left+(n.width-b.width),b.top=null);"nw"==a&&(b.top=e.top+(n.height-b.height),b.left=e.left+(n.width-b.width));return b},_respectSize:function(b,k){var e=this._vBoundaries,n=this.axis,a=f(b.width)&&e.maxWidth&&e.maxWidth<b.width,c=f(b.height)&&e.maxHeight&&e.maxHeight<b.height,g=f(b.width)&&e.minWidth&&e.minWidth>b.width,m=f(b.height)&&e.minHeight&&
e.minHeight>b.height;g&&(b.width=e.minWidth);m&&(b.height=e.minHeight);a&&(b.width=e.maxWidth);c&&(b.height=e.maxHeight);var l=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height,A=/sw|nw|w/.test(n),n=/nw|ne|n/.test(n);g&&A&&(b.left=l-e.minWidth);a&&A&&(b.left=l-e.maxWidth);m&&n&&(b.top=p-e.minHeight);c&&n&&(b.top=p-e.maxHeight);(e=!b.width&&!b.height)&&!b.left&&b.top?b.top=null:e&&!b.top&&b.left&&(b.left=null);return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var d=
this.helper||this.element,k=0;k<this._proportionallyResizeElements.length;k++){var e=this._proportionallyResizeElements[k];if(!this.borderDif){var n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],a=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=b.map(n,function(c,b){var d=parseInt(c,10)||0,e=parseInt(a[b],10)||0;return d+e})}e.css({height:d.height()-this.borderDif[0]-this.borderDif[2]||
0,width:d.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var d=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||b('<div style="overflow:hidden;"></div>');var k=b.browser.msie&&7>b.browser.version,e=k?1:0,k=k?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+k,height:this.element.outerHeight()+k,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++d.zIndex});
this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,k,e){return{width:this.originalSize.width+k}},w:function(b,k,e){return{left:this.originalPosition.left+k,width:this.originalSize.width-k}},n:function(b,k,e){return{top:this.originalPosition.top+e,height:this.originalSize.height-e}},s:function(b,k,e){return{height:this.originalSize.height+e}},se:function(d,k,e){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,k,e]))},
sw:function(d,k,e){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,k,e]))},ne:function(d,k,e){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,k,e]))},nw:function(d,k,e){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,k,e]))}},_propagate:function(d,k){b.ui.plugin.call(this,d,[k,this.ui()]);"resize"!=d&&this._trigger(d,k,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","alsoResize",{start:function(d,k){var e=b(this).data("resizable").options,n=function(a){b(a).each(function(){var a=b(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?
n(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],n(e.alsoResize)):b.each(e.alsoResize,function(a){n(a)})},resize:function(d,k){var e=b(this).data("resizable"),n=e.options,a=e.originalSize,c=e.originalPosition,g={height:e.size.height-a.height||0,width:e.size.width-a.width||0,top:e.position.top-c.top||0,left:e.position.left-c.left||0},f=function(a,c){b(a).each(function(){var a=b(this),d=b(this).data("resizable-alsoresize"),e={},n=c&&c.length?c:a.parents(k.originalElement[0]).length?
["width","height"]:["width","height","top","left"];b.each(n,function(a,c){var b=(d[c]||0)+(g[c]||0);b&&0<=b&&(e[c]=b||null)});a.css(e)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?f(n.alsoResize):b.each(n.alsoResize,function(a,c){f(a,c)})},stop:function(d,k){b(this).removeData("resizable-alsoresize")}});b.ui.plugin.add("resizable","animate",{stop:function(d,k){var e=b(this).data("resizable"),n=e.options,a=e._proportionallyResizeElements,c=a.length&&/textarea/i.test(a[0].nodeName),g=c&&
b.ui.hasScroll(a[0],"left")?0:e.sizeDiff.height,c={width:e.size.width-(c?0:e.sizeDiff.width),height:e.size.height-g},g=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,f=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(b.extend(c,f&&g?{top:f,left:g}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var c={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),
10),left:parseInt(e.element.css("left"),10)};a&&a.length&&b(a[0]).css({width:c.width,height:c.height});e._updateCache(c);e._propagate("resize",d)}})}});b.ui.plugin.add("resizable","containment",{start:function(d,k){var e=b(this).data("resizable"),n=e.element,a=e.options.containment;if(n=a instanceof b?a.get(0):/parent/.test(a)?n.parent().get(0):a)if(e.containerElement=b(n),/document/.test(a)||a==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:b(document),
left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight};else{var c=b(n),g=[];b(["Top","Right","Left","Bottom"]).each(function(a,b){g[a]=m(c.css("padding"+b))});e.containerOffset=c.offset();e.containerPosition=c.position();e.containerSize={height:c.innerHeight()-g[3],width:c.innerWidth()-g[1]};var a=e.containerOffset,f=e.containerSize.height,l=e.containerSize.width,l=b.ui.hasScroll(n,"left")?n.scrollWidth:l,f=b.ui.hasScroll(n)?n.scrollHeight:f;e.parentData=
{element:n,left:a.left,top:a.top,width:l,height:f}}},resize:function(d,k){var e=b(this).data("resizable"),n=e.options,a=e.containerOffset,c=e.position,g=e._aspectRatio||d.shiftKey,f={top:0,left:0},m=e.containerElement;m[0]!=document&&/static/.test(m.css("position"))&&(f=a);c.left<(e._helper?a.left:0)&&(e.size.width+=e._helper?e.position.left-a.left:e.position.left-f.left,g&&(e.size.height=e.size.width/e.aspectRatio),e.position.left=n.helper?a.left:0);c.top<(e._helper?a.top:0)&&(e.size.height+=e._helper?
e.position.top-a.top:e.position.top,g&&(e.size.width=e.size.height*e.aspectRatio),e.position.top=e._helper?a.top:0);e.offset.left=e.parentData.left+e.position.left;e.offset.top=e.parentData.top+e.position.top;n=Math.abs(e.offset.left-f.left+e.sizeDiff.width);a=Math.abs((e._helper?e.offset.top-f.top:e.offset.top-a.top)+e.sizeDiff.height);f=e.containerElement.get(0)==e.element.parent().get(0);c=/relative|absolute/.test(e.containerElement.css("position"));f&&c&&(n-=e.parentData.left);n+e.size.width>=
e.parentData.width&&(e.size.width=e.parentData.width-n,g&&(e.size.height=e.size.width/e.aspectRatio));a+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-a,g&&(e.size.width=e.size.height*e.aspectRatio))},stop:function(d,k){var e=b(this).data("resizable"),n=e.options,a=e.containerOffset,c=e.containerPosition,g=e.containerElement,f=b(e.helper),m=f.offset(),l=f.outerWidth()-e.sizeDiff.width,f=f.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(g.css("position"))&&
b(this).css({left:m.left-c.left-a.left,width:l,height:f});e._helper&&!n.animate&&/static/.test(g.css("position"))&&b(this).css({left:m.left-c.left-a.left,width:l,height:f})}});b.ui.plugin.add("resizable","ghost",{start:function(d,k){var e=b(this).data("resizable"),n=e.options,a=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:0.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?
n.ghost:"");e.ghost.appendTo(e.helper)},resize:function(d,k){var e=b(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(d,k){var e=b(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}});b.ui.plugin.add("resizable","grid",{resize:function(d,k){var e=b(this).data("resizable"),n=e.options,a=e.size,c=e.originalSize,g=e.originalPosition,f=e.axis;n.grid="number"==typeof n.grid?[n.grid,n.grid]:n.grid;
var m=Math.round((a.width-c.width)/(n.grid[0]||1))*(n.grid[0]||1),n=Math.round((a.height-c.height)/(n.grid[1]||1))*(n.grid[1]||1);/^(se|s|e)$/.test(f)?(e.size.width=c.width+m,e.size.height=c.height+n):/^(ne)$/.test(f)?(e.size.width=c.width+m,e.size.height=c.height+n,e.position.top=g.top-n):(/^(sw)$/.test(f)?(e.size.width=c.width+m,e.size.height=c.height+n):(e.size.width=c.width+m,e.size.height=c.height+n,e.position.top=g.top-n),e.position.left=g.left-m)}});var m=function(b){return parseInt(b,10)||
0},f=function(b){return!isNaN(parseInt(b,10))}})(l);(function(b,l){b.widget("ui.selectable",b.ui.mouse,{version:"1.9.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var m=this;this.element.addClass("ui-selectable");this.dragged=!1;var f;this.refresh=function(){f=b(m.options.filter,m.element[0]);f.addClass("ui-selectee");f.each(function(){var d=b(this),k=d.offset();b.data(this,"selectable-item",{element:this,$element:d,left:k.left,top:k.top,right:k.left+
d.outerWidth(),bottom:k.top+d.outerHeight(),startselected:!1,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=b("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(m){var f=
this;this.opos=[m.pageX,m.pageY];if(!this.options.disabled){var d=this.options;this.selectees=b(d.filter,this.element[0]);this._trigger("start",m);b(d.appendTo).append(this.helper);this.helper.css({left:m.clientX,top:m.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var d=b.data(this,"selectable-item");d.startselected=!0;m.metaKey||m.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=
!0,f._trigger("unselecting",m,{unselecting:d.element}))});b(m.target).parents().andSelf().each(function(){var d=b.data(this,"selectable-item");if(d){var e=!m.metaKey&&!m.ctrlKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");d.unselecting=!e;d.selecting=e;(d.selected=e)?f._trigger("selecting",m,{selecting:d.element}):f._trigger("unselecting",m,{unselecting:d.element});return!1}})}},_mouseDrag:function(m){var f=
this;this.dragged=!0;if(!this.options.disabled){var d=this.options,k=this.opos[0],e=this.opos[1],n=m.pageX,a=m.pageY;if(k>n)var c=n,n=k,k=c;e>a&&(c=a,a=e,e=c);this.helper.css({left:k,top:e,width:n-k,height:a-e});this.selectees.each(function(){var c=b.data(this,"selectable-item");if(c&&c.element!=f.element[0]){var l=!1;"touch"==d.tolerance?l=!(c.left>n||c.right<k||c.top>a||c.bottom<e):"fit"==d.tolerance&&(l=c.left>k&&c.right<n&&c.top>e&&c.bottom<a);l?(c.selected&&(c.$element.removeClass("ui-selected"),
c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,f._trigger("selecting",m,{selecting:c.element}))):(c.selecting&&((m.metaKey||m.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),f._trigger("unselecting",
m,{unselecting:c.element}))),!c.selected||m.metaKey||m.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,f._trigger("unselecting",m,{unselecting:c.element})))}});return!1}},_mouseStop:function(m){var f=this;this.dragged=!1;b(".ui-unselecting",this.element[0]).each(function(){var d=b.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=!1;f._trigger("unselected",m,{unselected:d.element})});
b(".ui-selecting",this.element[0]).each(function(){var d=b.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;f._trigger("selected",m,{selected:d.element})});this._trigger("stop",m);this.helper.remove();return!1}})})(l);(function(b,l){b.widget("ui.sortable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,
forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===b.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=
this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(m,f){"disabled"===m?(this.options[m]=f,this.widget().toggleClass("ui-sortable-disabled",!!f)):b.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(m,f){var d=this;if(this.reverting||this.options.disabled||
"static"==this.options.type)return!1;this._refreshItems(m);var k=null;b(m.target).parents().each(function(){if(b.data(this,d.widgetName+"-item")==d)return k=b(this),!1});b.data(m.target,d.widgetName+"-item")==d&&(k=b(m.target));if(!k)return!1;if(this.options.handle&&!f){var e=!1;b(this.options.handle,k).find("*").andSelf().each(function(){this==m.target&&(e=!0)});if(!e)return!1}this.currentItem=k;this._removeCurrentsFromItems();return!0},_mouseStart:function(m,f,d){f=this.options;this.currentContainer=
this;this.refreshPositions();this.helper=this._createHelper(m);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:m.pageX-this.offset.left,top:m.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=
this.helper.css("position");this.originalPosition=this._generatePosition(m);this.originalPageX=m.pageX;this.originalPageY=m.pageY;f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();f.containment&&this._setContainment();f.cursor&&(b("body").css("cursor")&&(this._storedCursor=b("body").css("cursor")),b("body").css("cursor",f.cursor));
f.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",f.opacity));f.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",f.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",m,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-
1;0<=d;d--)this.containers[d]._trigger("activate",m,this._uiHash(this));b.ui.ddmanager&&(b.ui.ddmanager.current=this);b.ui.ddmanager&&!f.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,m);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(m);return!0},_mouseDrag:function(m){this.position=this._generatePosition(m);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var f=this.options,d=
!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-m.pageY<f.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+f.scrollSpeed:m.pageY-this.overflowOffset.top<f.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-f.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-m.pageX<f.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+
f.scrollSpeed:m.pageX-this.overflowOffset.left<f.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-f.scrollSpeed)):(m.pageY-b(document).scrollTop()<f.scrollSensitivity?d=b(document).scrollTop(b(document).scrollTop()-f.scrollSpeed):b(window).height()-(m.pageY-b(document).scrollTop())<f.scrollSensitivity&&(d=b(document).scrollTop(b(document).scrollTop()+f.scrollSpeed)),m.pageX-b(document).scrollLeft()<f.scrollSensitivity?d=b(document).scrollLeft(b(document).scrollLeft()-
f.scrollSpeed):b(window).width()-(m.pageX-b(document).scrollLeft())<f.scrollSensitivity&&(d=b(document).scrollLeft(b(document).scrollLeft()+f.scrollSpeed)));!1!==d&&b.ui.ddmanager&&!f.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,m)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(f=this.items.length-
1;0<=f;f--){var d=this.items[f],k=d.item[0],e=this._intersectsWithPointer(d);if(e&&d.instance===this.currentContainer&&k!=this.currentItem[0]&&this.placeholder[1==e?"next":"prev"]()[0]!=k&&!b.contains(this.placeholder[0],k)&&("semi-dynamic"==this.options.type?!b.contains(this.element[0],k):1)){this.direction=1==e?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(d))this._rearrange(m,d);else break;this._trigger("change",m,this._uiHash());break}}this._contactContainers(m);
b.ui.ddmanager&&b.ui.ddmanager.drag(this,m);this._trigger("sort",m,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(m,f){if(m){b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,m);if(this.options.revert){var d=this,k=this.placeholder.offset();this.reverting=!0;b(this.helper).animate({left:k.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:k.top-this.offset.parent.top-this.margins.top+
(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(m)})}else this._clear(m,f);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var m=this.containers.length-1;0<=m;m--)this.containers[m]._trigger("deactivate",null,this._uiHash(this)),this.containers[m].containerCache.over&&
(this.containers[m]._trigger("out",null,this._uiHash(this)),this.containers[m].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem));
return this},serialize:function(m){var f=this._getItemsAsjQuery(m&&m.connected),d=[];m=m||{};b(f).each(function(){var k=(b(m.item||this).attr(m.attribute||"id")||"").match(m.expression||/(.+)[-=_](.+)/);k&&d.push((m.key||k[1]+"[]")+"="+(m.key&&m.expression?k[1]:k[2]))});!d.length&&m.key&&d.push(m.key+"=");return d.join("&")},toArray:function(m){var f=this._getItemsAsjQuery(m&&m.connected),d=[];m=m||{};f.each(function(){d.push(b(m.item||this).attr(m.attribute||"id")||"")});return d},_intersectsWith:function(b){var f=
this.positionAbs.left,d=f+this.helperProportions.width,k=this.positionAbs.top,e=k+this.helperProportions.height,n=b.left,a=n+b.width,c=b.top,g=c+b.height,l=this.offset.click.top,u=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?k+l>c&&k+l<g&&f+u>n&&f+u<a:n<f+this.helperProportions.width/2&&d-this.helperProportions.width/
2<a&&c<k+this.helperProportions.height/2&&e-this.helperProportions.height/2<g},_intersectsWithPointer:function(m){var f="x"===this.options.axis||b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,m.top,m.height);m="y"===this.options.axis||b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,m.left,m.width);f=f&&m;m=this._getDragVerticalDirection();var d=this._getDragHorizontalDirection();return f?this.floating?d&&"right"==d||"down"==m?2:1:m&&("down"==m?2:1):!1},_intersectsWithSides:function(m){var f=
b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,m.top+m.height/2,m.height);m=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,m.left+m.width/2,m.width);var d=this._getDragVerticalDirection(),k=this._getDragHorizontalDirection();return this.floating&&k?"right"==k&&m||"left"==k&&!m:d&&("down"==d&&f||"up"==d&&!f)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!=b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=
this.positionAbs.left-this.lastPositionAbs.left;return 0!=b&&(0<b?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(m){var f=[],d=[],k=this._connectWith();if(k&&m)for(m=k.length-1;0<=m;m--)for(var e=b(k[m]),n=e.length-1;0<=n;n--){var a=b.data(e[n],this.widgetName);a&&a!=this&&!a.options.disabled&&d.push([b.isFunction(a.options.items)?
a.options.items.call(a.element):b(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}d.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(m=d.length-1;0<=m;m--)d[m][0].each(function(){f.push(this)});return b(f)},_removeCurrentsFromItems:function(){for(var b=this.currentItem.find(":data("+
this.widgetName+"-item)"),f=0;f<this.items.length;f++)for(var d=0;d<b.length;d++)b[d]==this.items[f].item[0]&&this.items.splice(f,1)},_refreshItems:function(m){this.items=[];this.containers=[this];var f=this.items,d=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],m,{item:this.currentItem}):b(this.options.items,this.element),this]],k=this._connectWith();if(k&&this.ready)for(var e=k.length-1;0<=e;e--)for(var n=b(k[e]),a=n.length-1;0<=a;a--){var c=b.data(n[a],this.widgetName);
c&&c!=this&&!c.options.disabled&&(d.push([b.isFunction(c.options.items)?c.options.items.call(c.element[0],m,{item:this.currentItem}):b(c.options.items,c.element),c]),this.containers.push(c))}for(e=d.length-1;0<=e;e--)for(m=d[e][1],k=d[e][0],a=0,n=k.length;a<n;a++)c=b(k[a]),c.data(this.widgetName+"-item",m),f.push({item:c,instance:m,width:0,height:0,left:0,top:0})},refreshPositions:function(m){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var f=this.items.length-
1;0<=f;f--){var d=this.items[f];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var k=this.options.toleranceElement?b(this.options.toleranceElement,d.item):d.item;m||(d.width=k.outerWidth(),d.height=k.outerHeight());k=k.offset();d.left=k.left;d.top=k.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(f=this.containers.length-1;0<=f;f--)k=this.containers[f].element.offset(),this.containers[f].containerCache.left=
k.left,this.containers[f].containerCache.top=k.top,this.containers[f].containerCache.width=this.containers[f].element.outerWidth(),this.containers[f].containerCache.height=this.containers[f].element.outerHeight();return this},_createPlaceholder:function(m){m=m||this;var f=m.options;if(!f.placeholder||f.placeholder.constructor==String){var d=f.placeholder;f.placeholder={element:function(){var k=b(document.createElement(m.currentItem[0].nodeName)).addClass(d||m.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
d||(k.style.visibility="hidden");return k},update:function(b,e){if(!d||f.forcePlaceholderSize)e.height()||e.height(m.currentItem.innerHeight()-parseInt(m.currentItem.css("paddingTop")||0,10)-parseInt(m.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(m.currentItem.innerWidth()-parseInt(m.currentItem.css("paddingLeft")||0,10)-parseInt(m.currentItem.css("paddingRight")||0,10))}}}m.placeholder=b(f.placeholder.element.call(m.element,m.currentItem));m.currentItem.after(m.placeholder);f.placeholder.update(m,
m.placeholder)},_contactContainers:function(m){for(var f=null,d=null,k=this.containers.length-1;0<=k;k--)b.contains(this.currentItem[0],this.containers[k].element[0])||(this._intersectsWith(this.containers[k].containerCache)?f&&b.contains(this.containers[k].element[0],f.element[0])||(f=this.containers[k],d=k):this.containers[k].containerCache.over&&(this.containers[k]._trigger("out",m,this._uiHash(this)),this.containers[k].containerCache.over=0));if(f)if(1===this.containers.length)this.containers[d]._trigger("over",
m,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1E4,k=null,e=this.positionAbs[this.containers[d].floating?"left":"top"],n=this.items.length-1;0<=n;n--)if(b.contains(this.containers[d].element[0],this.items[n].item[0])){var a=this.containers[d].floating?this.items[n].item.offset().left:this.items[n].item.offset().top;Math.abs(a-e)<f&&(f=Math.abs(a-e),k=this.items[n],this.direction=0<a-e?"down":"up")}if(k||this.options.dropOnEmpty)this.currentContainer=
this.containers[d],k?this._rearrange(m,k,null,!0):this._rearrange(m,null,this.containers[d].element,!0),this._trigger("change",m,this._uiHash()),this.containers[d]._trigger("change",m,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",m,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(m){var f=this.options;m=b.isFunction(f.helper)?b(f.helper.apply(this.element[0],[m,this.currentItem])):
"clone"==f.helper?this.currentItem.clone():this.currentItem;m.parents("body").length||b("parent"!=f.appendTo?f.appendTo:this.currentItem[0].parentNode)[0].appendChild(m[0]);m[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==m[0].style.width||f.forceHelperSize)&&m.width(this.currentItem.width());(""==m[0].style.height||
f.forceHelperSize)&&m.height(this.currentItem.height());return m},_adjustOffsetFromHelper:function(m){"string"==typeof m&&(m=m.split(" "));b.isArray(m)&&(m={left:+m[0],top:+m[1]||0});"left"in m&&(this.offset.click.left=m.left+this.margins.left);"right"in m&&(this.offset.click.left=this.helperProportions.width-m.right+this.margins.left);"top"in m&&(this.offset.click.top=m.top+this.margins.top);"bottom"in m&&(this.offset.click.top=this.helperProportions.height-m.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var m=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(m.left+=this.scrollParent.scrollLeft(),m.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)m={top:0,left:0};return{top:m.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:m.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var m=this.options;"parent"==m.containment&&(m.containment=this.helper[0].parentNode);if("document"==m.containment||"window"==m.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b("document"==m.containment?document:window).width()-this.helperProportions.width-this.margins.left,(b("document"==m.containment?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(m.containment)){var f=b(m.containment)[0],m=b(m.containment).offset(),d="hidden"!=b(f).css("overflow");this.containment=[m.left+(parseInt(b(f).css("borderLeftWidth"),10)||0)+(parseInt(b(f).css("paddingLeft"),10)||0)-this.margins.left,m.top+(parseInt(b(f).css("borderTopWidth"),10)||0)+(parseInt(b(f).css("paddingTop"),10)||0)-this.margins.top,m.left+(d?Math.max(f.scrollWidth,
f.offsetWidth):f.offsetWidth)-(parseInt(b(f).css("borderLeftWidth"),10)||0)-(parseInt(b(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,m.top+(d?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(b(f).css("borderTopWidth"),10)||0)-(parseInt(b(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(m,f){f||(f=this.position);var d="absolute"==m?1:-1,k="absolute"!=this.cssPosition||this.scrollParent[0]!=
document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(k[0].tagName);return{top:f.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:k.scrollTop())*d,left:f.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:k.scrollLeft())*d}},_generatePosition:function(m){var f=this.options,d="absolute"!=this.cssPosition||
this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,k=/(html|body)/i.test(d[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var e=m.pageX,n=m.pageY;this.originalPosition&&(this.containment&&(m.pageX-this.offset.click.left<this.containment[0]&&(e=this.containment[0]+this.offset.click.left),m.pageY-this.offset.click.top<
this.containment[1]&&(n=this.containment[1]+this.offset.click.top),m.pageX-this.offset.click.left>this.containment[2]&&(e=this.containment[2]+this.offset.click.left),m.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),f.grid&&(n=this.originalPageY+Math.round((n-this.originalPageY)/f.grid[1])*f.grid[1],n=this.containment?n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3]?n-this.offset.click.top<this.containment[1]?
n+f.grid[1]:n-f.grid[1]:n:n,e=this.originalPageX+Math.round((e-this.originalPageX)/f.grid[0])*f.grid[0],e=this.containment?e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2]?e-this.offset.click.left<this.containment[0]?e+f.grid[0]:e-f.grid[0]:e:e));return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():k?0:d.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():k?0:d.scrollLeft())}},_rearrange:function(b,f,d,k){d?d[0].appendChild(this.placeholder[0]):f.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?f.item[0]:f.item[0].nextSibling);var e=this.counter=this.counter?++this.counter:1;this._delay(function(){e==this.counter&&this.refreshPositions(!k)})},_clear:function(m,f){this.reverting=!1;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&
this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var k in this._storedCSS)if("auto"==this._storedCSS[k]||"static"==this._storedCSS[k])this._storedCSS[k]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!f&&d.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&
this.domPosition.parent==this.currentItem.parent()[0]||f||d.push(function(b){this._trigger("update",b,this._uiHash())});this===this.currentContainer||f||(d.push(function(b){this._trigger("remove",b,this._uiHash())}),d.push(function(b){return function(d){b._trigger("receive",d,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(b){return function(d){b._trigger("update",d,this._uiHash(this))}}.call(this,this.currentContainer)));for(k=this.containers.length-1;0<=k;k--)f||d.push(function(b){return function(d){b._trigger("deactivate",
d,this._uiHash(this))}}.call(this,this.containers[k])),this.containers[k].containerCache.over&&(d.push(function(b){return function(d){b._trigger("out",d,this._uiHash(this))}}.call(this,this.containers[k])),this.containers[k].containerCache.over=0);this._storedCursor&&b("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!f){this._trigger("beforeStop",
m,this._uiHash());for(k=0;k<d.length;k++)d[k].call(this,m);this._trigger("stop",m,this._uiHash())}return this.fromOutside=!1}f||this._trigger("beforeStop",m,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!f){for(k=0;k<d.length;k++)d[k].call(this,m);this._trigger("stop",m,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===b.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(m){var f=m||this;return{helper:f.helper,placeholder:f.placeholder||b([]),position:f.position,originalPosition:f.originalPosition,offset:f.positionAbs,item:f.currentItem,sender:m?m.element:null}}})})(l);(function(b,p){var m=0,f={},d={};f.height=f.paddingTop=f.paddingBottom=f.borderTopWidth=f.borderBottomWidth="hide";d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="show";b.widget("ui.accordion",{version:"1.9.0",options:{active:0,animate:{},
collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var d=this.accordionId="ui-accordion-"+(this.element.attr("id")||++m),e=this.options;this.prevShow=this.prevHide=b();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(e.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();e.collapsible||!1!==e.active||(e.active=0);0>e.active&&(e.active+=this.headers.length);this.active=this._findActive(e.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.originalHeight=
this.element[0].style.height;this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(e){var a=b(this),c=a.attr("id"),g=a.next(),f=g.attr("id");c||(c=d+"-header-"+e,a.attr("id",c));f||(f=d+"-panel-"+e,g.attr("id",f));a.attr("aria-controls",f);g.attr("aria-labelledby",c)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?
this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(e.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():b()}},_createIcons:function(){var d=this.options.icons;d&&(b("<span>").addClass("ui-accordion-header-icon ui-icon "+d.header).prependTo(this.headers),
this.active.children(".ui-accordion-header-icon").removeClass(d.header).addClass(d.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();b=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&(this.element.css("height",this.originalHeight),b.css("height",
""))},_setOption:function(b,d){"active"===b?this._activate(d):("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(b,d),"collapsible"!==b||d||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),d&&this._createIcons()),"disabled"===b&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!d))},_keydown:function(d){if(!d.altKey&&!d.ctrlKey){var e=b.ui.keyCode,n=this.headers.length,a=this.headers.index(d.target),
c=!1;switch(d.keyCode){case e.RIGHT:case e.DOWN:c=this.headers[(a+1)%n];break;case e.LEFT:case e.UP:c=this.headers[(a-1+n)%n];break;case e.SPACE:case e.ENTER:this._eventHandler(d);break;case e.HOME:c=this.headers[0];break;case e.END:c=this.headers[n-1]}c&&(b(d.target).attr("tabIndex",-1),b(c).attr("tabIndex",0),c.focus(),d.preventDefault())}},_panelKeyDown:function(d){d.keyCode===b.ui.keyCode.UP&&d.ctrlKey&&b(d.currentTarget).prev().focus()},refresh:function(){var d,e,n=this.options.heightStyle,a=
this.element.parent();this.element.css("height",this.originalHeight);"fill"===n?(b.support.minHeight||(e=a.css("overflow"),a.css("overflow","hidden")),d=a.height(),this.element.siblings(":visible").each(function(){var a=b(this),g=a.css("position");"absolute"!==g&&"fixed"!==g&&(d-=a.outerHeight(!0))}),e&&a.css("overflow",e),this.headers.each(function(){d-=b(this).outerHeight(!0)}),this.headers.next().each(function(){b(this).height(Math.max(0,d-b(this).innerHeight()+b(this).height()))}).css("overflow",
"auto")):"auto"===n&&(d=0,this.headers.next().each(function(){d=Math.max(d,b(this).height("").height())}).height(d));"content"!==n&&this.element.height(this.element.height())},_activate:function(d){d=this._findActive(d)[0];d!==this.active[0]&&(d=d||this.active[0],this._eventHandler({target:d,currentTarget:d,preventDefault:b.noop}))},_findActive:function(d){return"number"===typeof d?this.headers.eq(d):b()},_setupEvents:function(d){var e={};d&&(b.each(d.split(" "),function(b,a){e[a]="_eventHandler"}),
this._on(this.headers,e))},_eventHandler:function(d){var e=this.options,n=this.active,a=b(d.currentTarget),c=a[0]===n[0],g=c&&e.collapsible,f=g?b():a.next(),m=n.next(),f={oldHeader:n,oldPanel:m,newHeader:g?b():a,newPanel:f};d.preventDefault();c&&!e.collapsible||!1===this._trigger("beforeActivate",d,f)||(e.active=g?!1:this.headers.index(a),this.active=c?b():a,this._toggle(f),n.removeClass("ui-accordion-header-active ui-state-active"),e.icons&&n.children(".ui-accordion-header-icon").removeClass(e.icons.activeHeader).addClass(e.icons.header),
c||(a.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),e.icons&&a.children(".ui-accordion-header-icon").removeClass(e.icons.header).addClass(e.icons.activeHeader),a.next().addClass("ui-accordion-content-active")))},_toggle:function(d){var e=d.newPanel,n=this.prevShow.length?this.prevShow:d.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=e;this.prevHide=n;this.options.animate?this._animate(e,n,d):(n.hide(),e.show(),this._toggleComplete(d));
n.attr({"aria-expanded":"false","aria-hidden":"true"});n.prev().attr("aria-selected","false");e.length&&n.length?n.prev().attr("tabIndex",-1):e.length&&this.headers.filter(function(){return 0===b(this).attr("tabIndex")}).attr("tabIndex",-1);e.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(b,e,n){var a,c,g,m=this,l=0,p=b.length&&(!e.length||b.index()<e.index()),A=this.options.animate||{},p=p&&A.down||A,y=function(){m._toggleComplete(n)};
"number"===typeof p&&(g=p);"string"===typeof p&&(c=p);c=c||p.easing||A.easing;g=g||p.duration||A.duration;if(!e.length)return b.animate(d,g,c,y);if(!b.length)return e.animate(f,g,c,y);a=b.show().outerHeight();e.animate(f,{duration:g,easing:c,step:function(a,c){c.now=Math.round(a)}});b.hide().animate(d,{duration:g,easing:c,complete:y,step:function(c,b){b.now=Math.round(c);"height"!==b.prop?l+=b.now:"content"!==m.options.heightStyle&&(b.now=Math.round(a-e.outerHeight()-l),l=0)}})},_toggleComplete:function(b){var d=
b.oldPanel;d.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");d.length&&(d.parent()[0].className=d.parent()[0].className);this._trigger("activate",null,b)}});!1!==b.uiBackCompat&&(function(b,d){b.extend(d.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=d._create;d._create=function(){if(this.options.navigation){var a=this,c=this.element.find(this.options.header),d=c.next(),
e=c.add(d).find("a").filter(this.options.navigationFilter)[0];e&&c.add(d).each(function(c){if(b.contains(this,e))return a.options.active=Math.floor(c/2),!1})}n.call(this)}}(l,l.ui.accordion.prototype),function(b,d){b.extend(d.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=d._create,a=d._setOption;b.extend(d,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();n.call(this)},_setOption:function(c,b){if("autoHeight"===c||"clearStyle"===
c||"fillSpace"===c)this.options.heightStyle=this._mergeHeightStyle();a.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(l,l.ui.accordion.prototype),function(b,d){b.extend(d.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=d._createIcons;d._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);
n.call(this)}}(l,l.ui.accordion.prototype),function(b,d){d.activate=d._activate;var n=d._findActive;d._findActive=function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));return n.call(this,a)}}(l,l.ui.accordion.prototype),l.ui.accordion.prototype.resize=l.ui.accordion.prototype.refresh,function(b,d){b.extend(d.options,{change:null,changestart:null});var n=d._trigger;d._trigger=function(a,c,b){var d=n.apply(this,arguments);if(!d)return!1;"beforeActivate"===
a?d=n.call(this,"changestart",c,{oldHeader:b.oldHeader,oldContent:b.oldPanel,newHeader:b.newHeader,newContent:b.newPanel}):"activate"===a&&(d=n.call(this,"change",c,{oldHeader:b.oldHeader,oldContent:b.oldPanel,newHeader:b.newHeader,newContent:b.newPanel}));return d}}(l,l.ui.accordion.prototype),function(b,d){b.extend(d.options,{animate:null,animated:"slide"});var n=d._create;d._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?
{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);n.call(this)}}(l,l.ui.accordion.prototype))})(l);(function(b,l){var m=0;b.widget("ui.autocomplete",{version:"1.9.0",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var f,d,k;this.isMultiLine=this._isMultiLine();
this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on({keydown:function(e){if(this.element.prop("readOnly"))d=k=f=!0;else{d=k=f=!1;var n=b.ui.keyCode;switch(e.keyCode){case n.PAGE_UP:f=!0;this._move("previousPage",e);break;case n.PAGE_DOWN:f=!0;this._move("nextPage",e);break;case n.UP:f=!0;this._keyEvent("previous",e);break;case n.DOWN:f=!0;this._keyEvent("next",e);break;case n.ENTER:case n.NUMPAD_ENTER:this.menu.active&&
(f=!0,e.preventDefault(),this.menu.select(e));break;case n.TAB:this.menu.active&&this.menu.select(e);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:d=!0,this._searchTimeout(e)}}},keypress:function(e){if(f)f=!1,e.preventDefault();else if(!d){var k=b.ui.keyCode;switch(e.keyCode){case k.PAGE_UP:this._move("previousPage",e);break;case k.PAGE_DOWN:this._move("nextPage",e);break;case k.UP:this._keyEvent("previous",e);break;case k.DOWN:this._keyEvent("next",
e)}}},input:function(b){k?(k=!1,b.preventDefault()):this._searchTimeout(b)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(b),this._change(b))}});this._initSource();this.menu=b("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:b(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,
{mousedown:function(d){d.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var k=this.menu.element[0];b(d.target).closest(".ui-menu-item").length||this._delay(function(){var a=this;this.document.one("mousedown",function(c){c.target===a.element[0]||c.target===k||b.contains(k,c.target)||a.close()})})},menufocus:function(d,k){if(this.isNewMenu&&(this.isNewMenu=!1,d.originalEvent&&/^mouse/.test(d.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){b(d.target).trigger(d.originalEvent)});
return}var a=k.item.data("ui-autocomplete-item")||k.item.data("item.autocomplete");!1!==this._trigger("focus",d,{item:a})?d.originalEvent&&/^key/.test(d.originalEvent.type)&&this._value(a.value):this.liveRegion.text(a.value)},menuselect:function(b,d){var a=d.item.data("ui-autocomplete-item")||d.item.data("item.autocomplete"),c=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c;this.selectedItem=a}));!1!==this._trigger("select",
b,{item:a})&&this._value(a.value);this.term=this._value();this.close(b);this.selectedItem=a}});this.liveRegion=b("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);b.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();
this.liveRegion.remove()},_setOption:function(b,d){this._super(b,d);"source"===b&&this._initSource();"appendTo"===b&&this.menu.element.appendTo(this.document.find(d||"body")[0]);"disabled"===b&&d&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var f,d,k=this;b.isArray(this.options.source)?(f=this.options.source,this.source=function(d,k){k(b.ui.autocomplete.filter(f,
d.term))}):"string"===typeof this.options.source?(d=this.options.source,this.source=function(e,n){k.xhr&&k.xhr.abort();k.xhr=b.ajax({url:d,data:e,dataType:"json",success:function(a,c){n(a)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(b){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,b))},this.options.delay)},search:function(b,d){b=null!=b?b:this._value();this.term=this._value();
if(b.length<this.options.minLength)return this.close(d);if(!1!==this._trigger("search",d))return this._search(b)},_search:function(b){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:b},this._response())},_response:function(){var b=this,d=++m;return function(k){d===m&&b.__response(k);b.pending--;b.pending||b.element.removeClass("ui-autocomplete-loading")}},__response:function(b){b&&(b=this._normalize(b));this._trigger("response",null,{content:b});
!this.options.disabled&&b&&b.length&&!this.cancelSearch?(this._suggest(b),this._trigger("open")):this._close()},close:function(b){this.cancelSearch=!0;this._close(b)},_close:function(b){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",b))},_change:function(b){this.previous!==this._value()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(f){return f.length&&f[0].label&&f[0].value?f:b.map(f,function(d){return"string"===
typeof d?{label:d,value:d}:b.extend({label:d.label||d.value,value:d.value||d.label},d)})},_suggest:function(f){var d=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(d,f);this.menu.refresh();d.show();this._resizeMenu();d.position(b.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(f,d){var k=
this;b.each(d,function(b,d){k._renderItemData(f,d)})},_renderItemData:function(b,d){return this._renderItem(b,d).data("ui-autocomplete-item",d)},_renderItem:function(f,d){return b("<li>").append(b("<a>").text(d.label)).appendTo(f)},_move:function(b,d){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(b)||this.menu.isLastItem()&&/^next/.test(b))this._value(this.term),this.menu.blur();else this.menu[b](d);else this.search(null,d)},widget:function(){return this.menu.element},
_value:function(b){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(b,d){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(b,d),d.preventDefault()}});b.extend(b.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(f,d){var k=RegExp(b.ui.autocomplete.escapeRegex(d),"i");return b.grep(f,function(b){return k.test(b.label||b.value||b)})}});b.widget("ui.autocomplete",b.ui.autocomplete,{options:{messages:{noResults:"No search results.",
results:function(b){return b+(1<b?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var d;this._superApply(arguments);this.options.disabled||this.cancelSearch||(d=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.text(d))}})})(l);(function(b,l){var m,f,d,k,e=function(){var a=b(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},n=function(a){var c=a.name,d=a.form,e=b([]);
c&&(e=d?b(d).find("[name='"+c+"']"):b("[name='"+c+"']",a.ownerDocument).filter(function(){return!this.form}));return e};b.widget("ui.button",{version:"1.9.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,e);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",
this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,g="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(g?"":" ui-state-active");null===c.label&&(c.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){c.disabled||(b(this).addClass("ui-state-hover"),
this===m&&b(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){c.disabled||b(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){c.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass("ui-state-focus")});g&&(this.element.bind("change"+this.eventNamespace,function(){k||
a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){c.disabled||(k=!1,f=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){c.disabled||f===a.pageX&&d===a.pageY||(k=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(c.disabled||k)return!1;b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,
function(){if(c.disabled||k)return!1;b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");var d=a.element[0];n(d).not(d).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(c.disabled)return!1;b(this).addClass("ui-state-active");m=this;a.document.one("mouseup",function(){m=null})}).bind("mouseup"+this.eventNamespace,function(){if(c.disabled)return!1;
b(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(c.disabled)return!1;a.keyCode!==b.ui.keyCode.SPACE&&a.keyCode!==b.ui.keyCode.ENTER||b(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){var a,
c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),c="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(c),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(c),this.buttonElement.length||(this.buttonElement=a.find(c))),this.element.addClass("ui-helper-hidden-accessible"),
(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,c){this._super(a,c);"disabled"===a?c?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?n(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=b("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,k=[];d.primary||d.secondary?(this.options.text&&k.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(k.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||a.attr("title",b.trim(c)))):k.push("ui-button-text-only");a.addClass(k.join(" "))}}});b.widget("ui.buttonset",{version:"1.9.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,c){"disabled"===a&&this.buttons.button("option",a,c);this._super(a,c)},refresh:function(){var a=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(l);
(function(b,l){function m(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};b.extend(this._defaults,this.regional[""]);this.dpDiv=f(b('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function f(d){return d.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){b(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&b(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&b(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){b.datepicker._isDisabledDatepicker(e.inline?d.parent()[0]:e.input[0])||(b(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
b(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&b(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&b(this).addClass("ui-datepicker-next-hover"))})}function d(d,a){b.extend(d,a);for(var c in a)if(null==a[c]||a[c]==l)d[c]=a[c];return d}b.extend(b.ui,{datepicker:{version:"1.9.0"}});var k=(new Date).getTime(),e;b.extend(m.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){d(this._defaults,b||{});return this},_attachDatepicker:function(d,a){var c=null,g;for(g in this._defaults){var e=d.getAttribute("date:"+g);if(e){c=c||{};try{c[g]=eval(e)}catch(k){c[g]=e}}}g=d.nodeName.toLowerCase();e="div"==g||"span"==g;d.id||(this.uuid+=1,d.id="dp"+this.uuid);var f=this._newInst(b(d),e);f.settings=b.extend({},a||{},c||{});"input"==g?this._connectDatepicker(d,f):e&&this._inlineDatepicker(d,f)},_newInst:function(d,
a){return{id:d[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:d,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?f(b('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(d,a){var c=b(d);a.append=b([]);a.trigger=b([]);c.hasClass(this.markerClassName)||(this._attachments(c,a),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(c,b,d){a.settings[b]=d}).bind("getData.datepicker",function(c,b){return this._get(a,b)}),this._autoSize(a),b.data(d,"datepicker",a),a.settings.disabled&&this._disableDatepicker(d))},_attachments:function(d,a){var c=this._get(a,"appendText"),g=this._get(a,"isRTL");a.append&&a.append.remove();c&&(a.append=b('<span class="'+this._appendClass+'">'+c+"</span>"),d[g?"before":"after"](a.append));d.unbind("focus",this._showDatepicker);a.trigger&&a.trigger.remove();c=this._get(a,"showOn");"focus"!=
c&&"both"!=c||d.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(a,"buttonText"),e=this._get(a,"buttonImage");a.trigger=b(this._get(a,"buttonImageOnly")?b("<img/>").addClass(this._triggerClass).attr({src:e,alt:c,title:c}):b('<button type="button"></button>').addClass(this._triggerClass).html(""==e?c:b("<img/>").attr({src:e,alt:c,title:c})));d[g?"before":"after"](a.trigger);a.trigger.click(function(){b.datepicker._datepickerShowing&&b.datepicker._lastInput==d[0]?b.datepicker._hideDatepicker():
(b.datepicker._datepickerShowing&&b.datepicker._lastInput!=d[0]&&b.datepicker._hideDatepicker(),b.datepicker._showDatepicker(d[0]));return!1})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var a=new Date(2009,11,20),c=this._get(b,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var c=0,b=0,d=0;d<a.length;d++)a[d].length>c&&(c=a[d].length,b=d);return b};a.setMonth(d(this._get(b,c.match(/MM/)?"monthNames":"monthNamesShort")));a.setDate(d(this._get(b,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-a.getDay())}b.input.attr("size",this._formatDate(b,a).length)}},_inlineDatepicker:function(d,a){var c=b(d);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(a.dpDiv).bind("setData.datepicker",function(c,b,d){a.settings[b]=d}).bind("getData.datepicker",function(c,b){return this._get(a,b)}),b.data(d,"datepicker",a),this._setDate(a,this._getDefaultDate(a),!0),this._updateDatepicker(a),this._updateAlternate(a),a.settings.disabled&&this._disableDatepicker(d),
a.dpDiv.css("display","block"))},_dialogDatepicker:function(e,a,c,g,k){e=this._dialogInst;e||(this.uuid+=1,this._dialogInput=b('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),b("body").append(this._dialogInput),e=this._dialogInst=this._newInst(this._dialogInput,!1),e.settings={},b.data(this._dialogInput[0],"datepicker",e));d(e.settings,g||{});a=a&&a.constructor==Date?this._formatDate(e,a):a;this._dialogInput.val(a);
this._pos=k?k.length?k:[k.pageX,k.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");e.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);b.blockUI&&b.blockUI(this.dpDiv);
b.data(this._dialogInput[0],"datepicker",e);return this},_destroyDatepicker:function(d){var a=b(d),c=b.data(d,"datepicker");if(a.hasClass(this.markerClassName)){var g=d.nodeName.toLowerCase();b.removeData(d,"datepicker");"input"==g?(c.append.remove(),c.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=g&&"span"!=g||a.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(d){var a=b(d),c=b.data(d,"datepicker");if(a.hasClass(this.markerClassName)){var g=d.nodeName.toLowerCase();if("input"==g)d.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==g||"span"==g)a=a.children("."+this._inlineClass),a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=b.map(this._disabledInputs,
function(a){return a==d?null:a})}},_disableDatepicker:function(d){var a=b(d),c=b.data(d,"datepicker");if(a.hasClass(this.markerClassName)){var g=d.nodeName.toLowerCase();if("input"==g)d.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==g||"span"==g)a=a.children("."+this._inlineClass),a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=b.map(this._disabledInputs,function(a){return a==d?null:a});this._disabledInputs[this._disabledInputs.length]=d}},_isDisabledDatepicker:function(b){if(!b)return!1;for(var a=0;a<this._disabledInputs.length;a++)if(this._disabledInputs[a]==b)return!0;return!1},_getInst:function(d){try{return b.data(d,"datepicker")}catch(a){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(e,a,c){var g=this._getInst(e);if(2==arguments.length&&"string"==typeof a)return"defaults"==
a?b.extend({},b.datepicker._defaults):g?"all"==a?b.extend({},g.settings):this._get(g,a):null;var k=a||{};"string"==typeof a&&(k={},k[a]=c);if(g){this._curInst==g&&this._hideDatepicker();var f=this._getDateDatepicker(e,!0),m=this._getMinMaxDate(g,"min"),A=this._getMinMaxDate(g,"max");d(g.settings,k);null!==m&&k.dateFormat!==l&&k.minDate===l&&(g.settings.minDate=this._formatDate(g,m));null!==A&&k.dateFormat!==l&&k.maxDate===l&&(g.settings.maxDate=this._formatDate(g,A));this._attachments(b(e),g);this._autoSize(g);
this._setDate(g,f);this._updateAlternate(g);this._updateDatepicker(g)}},_changeDatepicker:function(b,a,c){this._optionDatepicker(b,a,c)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,a){var c=this._getInst(b);c&&(this._setDate(c,a),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(b,a){var c=this._getInst(b);c&&!c.inline&&this._setDateFromField(c,a);return c?this._getDate(c):null},_doKeyDown:function(d){var a=
b.datepicker._getInst(d.target),c=!0,g=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=!0;if(b.datepicker._datepickerShowing)switch(d.keyCode){case 9:b.datepicker._hideDatepicker();c=!1;break;case 13:return c=b("td."+b.datepicker._dayOverClass+":not(."+b.datepicker._currentClass+")",a.dpDiv),c[0]&&b.datepicker._selectDay(d.target,a.selectedMonth,a.selectedYear,c[0]),(d=b.datepicker._get(a,"onSelect"))?(c=b.datepicker._formatDate(a),d.apply(a.input?a.input[0]:null,[c,a])):b.datepicker._hideDatepicker(),
!1;case 27:b.datepicker._hideDatepicker();break;case 33:b.datepicker._adjustDate(d.target,d.ctrlKey?-b.datepicker._get(a,"stepBigMonths"):-b.datepicker._get(a,"stepMonths"),"M");break;case 34:b.datepicker._adjustDate(d.target,d.ctrlKey?+b.datepicker._get(a,"stepBigMonths"):+b.datepicker._get(a,"stepMonths"),"M");break;case 35:(d.ctrlKey||d.metaKey)&&b.datepicker._clearDate(d.target);c=d.ctrlKey||d.metaKey;break;case 36:(d.ctrlKey||d.metaKey)&&b.datepicker._gotoToday(d.target);c=d.ctrlKey||d.metaKey;
break;case 37:(d.ctrlKey||d.metaKey)&&b.datepicker._adjustDate(d.target,g?1:-1,"D");c=d.ctrlKey||d.metaKey;d.originalEvent.altKey&&b.datepicker._adjustDate(d.target,d.ctrlKey?-b.datepicker._get(a,"stepBigMonths"):-b.datepicker._get(a,"stepMonths"),"M");break;case 38:(d.ctrlKey||d.metaKey)&&b.datepicker._adjustDate(d.target,-7,"D");c=d.ctrlKey||d.metaKey;break;case 39:(d.ctrlKey||d.metaKey)&&b.datepicker._adjustDate(d.target,g?-1:1,"D");c=d.ctrlKey||d.metaKey;d.originalEvent.altKey&&b.datepicker._adjustDate(d.target,
d.ctrlKey?+b.datepicker._get(a,"stepBigMonths"):+b.datepicker._get(a,"stepMonths"),"M");break;case 40:(d.ctrlKey||d.metaKey)&&b.datepicker._adjustDate(d.target,7,"D");c=d.ctrlKey||d.metaKey;break;default:c=!1}else 36==d.keyCode&&d.ctrlKey?b.datepicker._showDatepicker(this):c=!1;c&&(d.preventDefault(),d.stopPropagation())},_doKeyPress:function(d){var a=b.datepicker._getInst(d.target);if(b.datepicker._get(a,"constrainInput")){var a=b.datepicker._possibleChars(b.datepicker._get(a,"dateFormat")),c=String.fromCharCode(d.charCode==
l?d.keyCode:d.charCode);return d.ctrlKey||d.metaKey||" ">c||!a||-1<a.indexOf(c)}},_doKeyUp:function(d){d=b.datepicker._getInst(d.target);if(d.input.val()!=d.lastVal)try{b.datepicker.parseDate(b.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,b.datepicker._getFormatConfig(d))&&(b.datepicker._setDateFromField(d),b.datepicker._updateAlternate(d),b.datepicker._updateDatepicker(d))}catch(a){b.datepicker.log(a)}return!0},_showDatepicker:function(e){e=e.target||e;"input"!=e.nodeName.toLowerCase()&&
(e=b("input",e.parentNode)[0]);if(!b.datepicker._isDisabledDatepicker(e)&&b.datepicker._lastInput!=e){var a=b.datepicker._getInst(e);b.datepicker._curInst&&b.datepicker._curInst!=a&&(b.datepicker._curInst.dpDiv.stop(!0,!0),a&&b.datepicker._datepickerShowing&&b.datepicker._hideDatepicker(b.datepicker._curInst.input[0]));var c=b.datepicker._get(a,"beforeShow"),c=c?c.apply(e,[e,a]):{};if(!1!==c){d(a.settings,c);a.lastVal=null;b.datepicker._lastInput=e;b.datepicker._setDateFromField(a);b.datepicker._inDialog&&
(e.value="");b.datepicker._pos||(b.datepicker._pos=b.datepicker._findPos(e),b.datepicker._pos[1]+=e.offsetHeight);var g=!1;b(e).parents().each(function(){g|="fixed"==b(this).css("position");return!g});c={left:b.datepicker._pos[0],top:b.datepicker._pos[1]};b.datepicker._pos=null;a.dpDiv.empty();a.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});b.datepicker._updateDatepicker(a);c=b.datepicker._checkOffset(a,c,g);a.dpDiv.css({position:b.datepicker._inDialog&&b.blockUI?"static":g?"fixed":
"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!a.inline){var c=b.datepicker._get(a,"showAnim"),k=b.datepicker._get(a,"duration"),f=function(){var c=a.dpDiv.find("iframe.ui-datepicker-cover");if(c.length){var d=b.datepicker._getBorders(a.dpDiv);c.css({left:-d[0],top:-d[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()})}};a.dpDiv.zIndex(b(e).zIndex()+1);b.datepicker._datepickerShowing=!0;if(b.effects&&(b.effects.effect[c]||b.effects[c]))a.dpDiv.show(c,b.datepicker._get(a,
"showOptions"),k,f);else a.dpDiv[c||"show"](c?k:null,f);c&&k||f();a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus();b.datepicker._curInst=a}}}},_updateDatepicker:function(d){this.maxRows=4;var a=b.datepicker._getBorders(d.dpDiv);e=d;d.dpDiv.empty().append(this._generateHTML(d));this._attachHandlers(d);var c=d.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-a[0],top:-a[1],width:d.dpDiv.outerWidth(),height:d.dpDiv.outerHeight()});d.dpDiv.find("."+this._dayOverClass+" a").mouseover();
a=this._getNumberOfMonths(d);c=a[1];d.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&d.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");d.dpDiv[(1!=a[0]||1!=a[1]?"add":"remove")+"Class"]("ui-datepicker-multi");d.dpDiv[(this._get(d,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");d==b.datepicker._curInst&&b.datepicker._datepickerShowing&&d.input&&d.input.is(":visible")&&!d.input.is(":disabled")&&d.input[0]!=document.activeElement&&
d.input.focus();if(d.yearshtml){var g=d.yearshtml;setTimeout(function(){g===d.yearshtml&&d.yearshtml&&d.dpDiv.find("select.ui-datepicker-year:first").replaceWith(d.yearshtml);g=d.yearshtml=null},0)}},_getBorders:function(b){var a=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(a(b.css("border-left-width"))),parseFloat(a(b.css("border-top-width")))]},_checkOffset:function(d,a,c){var g=d.dpDiv.outerWidth(),e=d.dpDiv.outerHeight(),k=d.input?d.input.outerWidth():0,f=d.input?d.input.outerHeight():
0,m=document.documentElement.clientWidth+(c?0:b(document).scrollLeft()),l=document.documentElement.clientHeight+(c?0:b(document).scrollTop());a.left-=this._get(d,"isRTL")?g-k:0;a.left-=c&&a.left==d.input.offset().left?b(document).scrollLeft():0;a.top-=c&&a.top==d.input.offset().top+f?b(document).scrollTop():0;a.left-=Math.min(a.left,a.left+g>m&&m>g?Math.abs(a.left+g-m):0);a.top-=Math.min(a.top,a.top+e>l&&l>e?Math.abs(e+f):0);return a},_findPos:function(d){for(var a=this._getInst(d),a=this._get(a,
"isRTL");d&&("hidden"==d.type||1!=d.nodeType||b.expr.filters.hidden(d));)d=d[a?"previousSibling":"nextSibling"];d=b(d).offset();return[d.left,d.top]},_hideDatepicker:function(d){var a=this._curInst;if(a&&(!d||a==b.data(d,"datepicker"))&&this._datepickerShowing){d=this._get(a,"showAnim");var c=this._get(a,"duration"),g=function(){b.datepicker._tidyDialog(a)};if(b.effects&&(b.effects.effect[d]||b.effects[d]))a.dpDiv.hide(d,b.datepicker._get(a,"showOptions"),c,g);else a.dpDiv["slideDown"==d?"slideUp":
"fadeIn"==d?"fadeOut":"hide"](d?c:null,g);d||g();this._datepickerShowing=!1;(d=this._get(a,"onClose"))&&d.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(d){if(b.datepicker._curInst){d=
b(d.target);var a=b.datepicker._getInst(d[0]);(d[0].id!=b.datepicker._mainDivId&&0==d.parents("#"+b.datepicker._mainDivId).length&&!(d.hasClass(b.datepicker.markerClassName)||d.closest("."+b.datepicker._triggerClass).length||!b.datepicker._datepickerShowing||b.datepicker._inDialog&&b.blockUI)||d.hasClass(b.datepicker.markerClassName)&&b.datepicker._curInst!=a)&&b.datepicker._hideDatepicker()}},_adjustDate:function(d,a,c){d=b(d);var g=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(g,
a+("M"==c?this._get(g,"showCurrentAtPos"):0),c),this._updateDatepicker(g))},_gotoToday:function(d){d=b(d);var a=this._getInst(d[0]);if(this._get(a,"gotoCurrent")&&a.currentDay)a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear;else{var c=new Date;a.selectedDay=c.getDate();a.drawMonth=a.selectedMonth=c.getMonth();a.drawYear=a.selectedYear=c.getFullYear()}this._notifyChange(a);this._adjustDate(d)},_selectMonthYear:function(d,a,c){d=b(d);var g=
this._getInst(d[0]);g["selected"+("M"==c?"Month":"Year")]=g["draw"+("M"==c?"Month":"Year")]=parseInt(a.options[a.selectedIndex].value,10);this._notifyChange(g);this._adjustDate(d)},_selectDay:function(d,a,c,g){var e=b(d);b(g).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(e=this._getInst(e[0]),e.selectedDay=e.currentDay=b("a",g).html(),e.selectedMonth=e.currentMonth=a,e.selectedYear=e.currentYear=c,this._selectDate(d,this._formatDate(e,e.currentDay,e.currentMonth,e.currentYear)))},
_clearDate:function(d){d=b(d);this._getInst(d[0]);this._selectDate(d,"")},_selectDate:function(d,a){var c=b(d),c=this._getInst(c[0]);a=null!=a?a:this._formatDate(c);c.input&&c.input.val(a);this._updateAlternate(c);var g=this._get(c,"onSelect");g?g.apply(c.input?c.input[0]:null,[a,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=null)},_updateAlternate:function(d){var a=
this._get(d,"altField");if(a){var c=this._get(d,"altFormat")||this._get(d,"dateFormat"),g=this._getDate(d),e=this.formatDate(c,g,this._getFormatConfig(d));b(a).each(function(){b(this).val(e)})}},noWeekends:function(b){b=b.getDay();return[0<b&&6>b,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1},parseDate:function(d,a,c){if(null==d||null==a)throw"Invalid arguments";
a="object"==typeof a?a.toString():a+"";if(""==a)return null;for(var g=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,g="string"!=typeof g?g:(new Date).getFullYear()%100+parseInt(g,10),e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,k=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,m=(c?c.monthNames:null)||this._defaults.monthNames,l=c=-1,p=-1,q=-1,B=!1,s=function(a){(a=S+1<d.length&&d.charAt(S+1)==a)&&S++;return a},r=function(c){var b=
s(c);c=RegExp("^\\d{1,"+("@"==c?14:"!"==c?20:"y"==c&&b?4:"o"==c?3:2)+"}");c=a.substring(H).match(c);if(!c)throw"Missing number at position "+H;H+=c[0].length;return parseInt(c[0],10)},t=function(c,d,g){c=b.map(s(c)?g:d,function(a,c){return[[c,a]]}).sort(function(a,c){return-(a[1].length-c[1].length)});var e=-1;b.each(c,function(c,b){var d=b[1];if(a.substr(H,d.length).toLowerCase()==d.toLowerCase())return e=b[0],H+=d.length,!1});if(-1!=e)return e+1;throw"Unknown name at position "+H;},F=function(){if(a.charAt(H)!=
d.charAt(S))throw"Unexpected literal at position "+H;H++},H=0,S=0;S<d.length;S++)if(B)"'"!=d.charAt(S)||s("'")?F():B=!1;else switch(d.charAt(S)){case "d":p=r("d");break;case "D":t("D",e,k);break;case "o":q=r("o");break;case "m":l=r("m");break;case "M":l=t("M",f,m);break;case "y":c=r("y");break;case "@":var K=new Date(r("@"));c=K.getFullYear();l=K.getMonth()+1;p=K.getDate();break;case "!":K=new Date((r("!")-this._ticksTo1970)/1E4);c=K.getFullYear();l=K.getMonth()+1;p=K.getDate();break;case "'":s("'")?
F():B=!0;break;default:F()}if(H<a.length&&(e=a.substr(H),!/^\s+/.test(e)))throw"Extra/unparsed characters found in date: "+e;-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=g?0:-100));if(-1<q){l=1;p=q;do{g=this._getDaysInMonth(c,l-1);if(p<=g)break;l++;p-=g}while(1)}K=this._daylightSavingAdjust(new Date(c,l-1,p));if(K.getFullYear()!=c||K.getMonth()+1!=l||K.getDate()!=p)throw"Invalid date";return K},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(b,a,c){if(!a)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,k=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var f=
function(a){(a=B+1<b.length&&b.charAt(B+1)==a)&&B++;return a},m=function(a,c,b){c=""+c;if(f(a))for(;c.length<b;)c="0"+c;return c},l=function(a,c,b,d){return f(a)?d[c]:b[c]},p="",q=!1;if(a)for(var B=0;B<b.length;B++)if(q)"'"!=b.charAt(B)||f("'")?p+=b.charAt(B):q=!1;else switch(b.charAt(B)){case "d":p+=m("d",a.getDate(),2);break;case "D":p+=l("D",a.getDay(),d,e);break;case "o":p+=m("o",Math.round(((new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime()-(new Date(a.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":p+=m("m",a.getMonth()+1,2);break;case "M":p+=l("M",a.getMonth(),k,c);break;case "y":p+=f("y")?a.getFullYear():(10>a.getYear()%100?"0":"")+a.getYear()%100;break;case "@":p+=a.getTime();break;case "!":p+=1E4*a.getTime()+this._ticksTo1970;break;case "'":f("'")?p+="'":q=!0;break;default:p+=b.charAt(B)}return p},_possibleChars:function(b){for(var a="",c=!1,d=function(a){(a=e+1<b.length&&b.charAt(e+1)==a)&&e++;return a},e=0;e<b.length;e++)if(c)"'"!=b.charAt(e)||d("'")?a+=b.charAt(e):
c=!1;else switch(b.charAt(e)){case "d":case "m":case "y":case "@":a+="0123456789";break;case "D":case "M":return null;case "'":d("'")?a+="'":c=!0;break;default:a+=b.charAt(e)}return a},_get:function(b,a){return b.settings[a]!==l?b.settings[a]:this._defaults[a]},_setDateFromField:function(b,a){if(b.input.val()!=b.lastVal){var c=this._get(b,"dateFormat"),d=b.lastVal=b.input?b.input.val():null,e,k;e=k=this._getDefaultDate(b);var f=this._getFormatConfig(b);try{e=this.parseDate(c,d,f)||k}catch(m){this.log(m),
d=a?"":d}b.selectedDay=e.getDate();b.drawMonth=b.selectedMonth=e.getMonth();b.drawYear=b.selectedYear=e.getFullYear();b.currentDay=d?e.getDate():0;b.currentMonth=d?e.getMonth():0;b.currentYear=d?e.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(d,a,c){var g=function(a){var c=new Date;c.setDate(c.getDate()+a);return c},e=function(a){try{return b.datepicker.parseDate(b.datepicker._get(d,
"dateFormat"),a,b.datepicker._getFormatConfig(d))}catch(c){}for(var g=(a.toLowerCase().match(/^c/)?b.datepicker._getDate(d):null)||new Date,e=g.getFullYear(),k=g.getMonth(),g=g.getDate(),f=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,m=f.exec(a);m;){switch(m[2]||"d"){case "d":case "D":g+=parseInt(m[1],10);break;case "w":case "W":g+=7*parseInt(m[1],10);break;case "m":case "M":k+=parseInt(m[1],10);g=Math.min(g,b.datepicker._getDaysInMonth(e,k));break;case "y":case "Y":e+=parseInt(m[1],10),g=Math.min(g,b.datepicker._getDaysInMonth(e,
k))}m=f.exec(a)}return new Date(e,k,g)};if(a=(a=null==a||""===a?c:"string"==typeof a?e(a):"number"==typeof a?isNaN(a)?c:g(a):new Date(a.getTime()))&&"Invalid Date"==a.toString()?c:a)a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);return this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(b){if(!b)return null;b.setHours(12<b.getHours()?b.getHours()+2:0);return b},_setDate:function(b,a,c){var d=!a,e=b.selectedMonth,k=b.selectedYear;a=this._restrictMinMax(b,this._determineDate(b,
a,new Date));b.selectedDay=b.currentDay=a.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=a.getMonth();b.drawYear=b.selectedYear=b.currentYear=a.getFullYear();e==b.selectedMonth&&k==b.selectedYear||c||this._notifyChange(b);this._adjustInstDate(b);b.input&&b.input.val(d?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&""==b.input.val()?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_attachHandlers:function(d){var a=this._get(d,
"stepMonths"),c="#"+d.id.replace(/\\\\/g,"\\");d.dpDiv.find("[data-handler]").map(function(){b(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+k].datepicker._adjustDate(c,-a,"M")},next:function(){window["DP_jQuery_"+k].datepicker._adjustDate(c,+a,"M")},hide:function(){window["DP_jQuery_"+k].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+k].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+k].datepicker._selectDay(c,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+k].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+k].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(d){var a=new Date,a=this._daylightSavingAdjust(new Date(a.getFullYear(),a.getMonth(),a.getDate())),c=this._get(d,"isRTL"),g=this._get(d,"showButtonPanel"),e=this._get(d,"hideIfNoPrevNext"),k=this._get(d,
"navigationAsDateFormat"),f=this._getNumberOfMonths(d),m=this._get(d,"showCurrentAtPos"),l=this._get(d,"stepMonths"),p=1!=f[0]||1!=f[1],q=this._daylightSavingAdjust(d.currentDay?new Date(d.currentYear,d.currentMonth,d.currentDay):new Date(9999,9,9)),B=this._getMinMaxDate(d,"min"),s=this._getMinMaxDate(d,"max"),m=d.drawMonth-m,r=d.drawYear;0>m&&(m+=12,r--);if(s)for(var t=this._daylightSavingAdjust(new Date(s.getFullYear(),s.getMonth()-f[0]*f[1]+1,s.getDate())),t=B&&t<B?B:t;this._daylightSavingAdjust(new Date(r,
m,1))>t;)m--,0>m&&(m=11,r--);d.drawMonth=m;d.drawYear=r;var t=this._get(d,"prevText"),t=k?this.formatDate(t,this._daylightSavingAdjust(new Date(r,m-l,1)),this._getFormatConfig(d)):t,t=this._canAdjustMonth(d,-1,r,m)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+t+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+t+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+t+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+t+"</span></a>",F=this._get(d,"nextText"),F=k?this.formatDate(F,this._daylightSavingAdjust(new Date(r,m+l,1)),this._getFormatConfig(d)):F,e=this._canAdjustMonth(d,1,r,m)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+F+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":
"e")+'">'+F+"</span></a>",l=this._get(d,"currentText"),F=this._get(d,"gotoCurrent")&&d.currentDay?q:a,l=k?this.formatDate(l,F,this._getFormatConfig(d)):l,k=d.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(d,"closeText")+"</button>",g=g?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?k:"")+(this._isInRange(d,F)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
l+"</button>":"")+(c?"":k)+"</div>":"",k=parseInt(this._get(d,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(d,"showWeek"),F=this._get(d,"dayNames");this._get(d,"dayNamesShort");var H=this._get(d,"dayNamesMin"),S=this._get(d,"monthNames"),K=this._get(d,"monthNamesShort"),x=this._get(d,"beforeShowDay"),L=this._get(d,"showOtherMonths"),I=this._get(d,"selectOtherMonths");this._get(d,"calculateWeek");for(var T=this._getDefaultDate(d),N="",W=0;W<f[0];W++){var Z="";this.maxRows=4;for(var V=0;V<f[1];V++){var Q=
this._daylightSavingAdjust(new Date(r,m,d.selectedDay)),R=" ui-corner-all",O="";if(p){O+='<div class="ui-datepicker-group';if(1<f[1])switch(V){case 0:O+=" ui-datepicker-group-first";R=" ui-corner-"+(c?"right":"left");break;case f[1]-1:O+=" ui-datepicker-group-last";R=" ui-corner-"+(c?"left":"right");break;default:O+=" ui-datepicker-group-middle",R=""}O+='">'}for(var O=O+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&0==W?c?e:t:"")+(/all|right/.test(R)&&
0==W?c?t:e:"")+this._generateMonthYearHeader(d,m,r,B,s,0<W||0<V,S,K)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),ca=l?'<th class="ui-datepicker-week-col">'+this._get(d,"weekHeader")+"</th>":"",R=0;7>R;R++)var aa=(R+k)%7,ca=ca+("<th"+(5<=(R+k+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+F[aa]+'">'+H[aa]+"</span></th>");O+=ca+"</tr></thead><tbody>";ca=this._getDaysInMonth(r,m);r==d.selectedYear&&m==d.selectedMonth&&(d.selectedDay=Math.min(d.selectedDay,ca));R=(this._getFirstDayOfMonth(r,
m)-k+7)%7;ca=Math.ceil((R+ca)/7);this.maxRows=ca=p?this.maxRows>ca?this.maxRows:ca:ca;for(var aa=this._daylightSavingAdjust(new Date(r,m,1-R)),ma=0;ma<ca;ma++){for(var O=O+"<tr>",da=l?'<td class="ui-datepicker-week-col">'+this._get(d,"calculateWeek")(aa)+"</td>":"",R=0;7>R;R++){var qa=x?x.apply(d.input?d.input[0]:null,[aa]):[!0,""],la=aa.getMonth()!=m,ia=la&&!I||!qa[0]||B&&aa<B||s&&aa>s,da=da+('<td class="'+(5<=(R+k+6)%7?" ui-datepicker-week-end":"")+(la?" ui-datepicker-other-month":"")+(aa.getTime()==
Q.getTime()&&m==d.selectedMonth&&d._keyEvent||T.getTime()==aa.getTime()&&T.getTime()==Q.getTime()?" "+this._dayOverClass:"")+(ia?" "+this._unselectableClass+" ui-state-disabled":"")+(la&&!L?"":" "+qa[1]+(aa.getTime()==q.getTime()?" "+this._currentClass:"")+(aa.getTime()==a.getTime()?" ui-datepicker-today":""))+'"'+(la&&!L||!qa[2]?"":' title="'+qa[2]+'"')+(ia?"":' data-handler="selectDay" data-event="click" data-month="'+aa.getMonth()+'" data-year="'+aa.getFullYear()+'"')+">"+(la&&!L?"&#xa0;":ia?'<span class="ui-state-default">'+
aa.getDate()+"</span>":'<a class="ui-state-default'+(aa.getTime()==a.getTime()?" ui-state-highlight":"")+(aa.getTime()==q.getTime()?" ui-state-active":"")+(la?" ui-priority-secondary":"")+'" href="#">'+aa.getDate()+"</a>")+"</td>");aa.setDate(aa.getDate()+1);aa=this._daylightSavingAdjust(aa)}O+=da+"</tr>"}m++;11<m&&(m=0,r++);O+="</tbody></table>"+(p?"</div>"+(0<f[0]&&V==f[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");Z+=O}N+=Z}N+=g+(b.browser.msie&&7>parseInt(b.browser.version,10)&&!d.inline?
'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");d._keyEvent=!1;return N},_generateMonthYearHeader:function(b,a,c,d,e,k,f,m){var l=this._get(b,"changeMonth"),p=this._get(b,"changeYear"),q=this._get(b,"showMonthAfterYear"),B='<div class="ui-datepicker-title">',s="";if(k||!l)s+='<span class="ui-datepicker-month">'+f[a]+"</span>";else{f=d&&d.getFullYear()==c;for(var r=e&&e.getFullYear()==c,s=s+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
t=0;12>t;t++)(!f||t>=d.getMonth())&&(!r||t<=e.getMonth())&&(s+='<option value="'+t+'"'+(t==a?' selected="selected"':"")+">"+m[t]+"</option>");s+="</select>"}q||(B+=s+(!k&&l&&p?"":"&#xa0;"));if(!b.yearshtml)if(b.yearshtml="",k||!p)B+='<span class="ui-datepicker-year">'+c+"</span>";else{m=this._get(b,"yearRange").split(":");var F=(new Date).getFullYear();f=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?F+parseInt(a,10):parseInt(a,10);return isNaN(a)?F:a};a=f(m[0]);
m=Math.max(a,f(m[1]||""));a=d?Math.max(a,d.getFullYear()):a;m=e?Math.min(m,e.getFullYear()):m;for(b.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';a<=m;a++)b.yearshtml+='<option value="'+a+'"'+(a==c?' selected="selected"':"")+">"+a+"</option>";b.yearshtml+="</select>";B+=b.yearshtml;b.yearshtml=null}B+=this._get(b,"yearSuffix");q&&(B+=(!k&&l&&p?"":"&#xa0;")+s);return B+"</div>"},_adjustInstDate:function(b,a,c){var d=b.drawYear+("Y"==c?a:0),e=b.drawMonth+
("M"==c?a:0);a=Math.min(b.selectedDay,this._getDaysInMonth(d,e))+("D"==c?a:0);d=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(d,e,a)));b.selectedDay=d.getDate();b.drawMonth=b.selectedMonth=d.getMonth();b.drawYear=b.selectedYear=d.getFullYear();"M"!=c&&"Y"!=c||this._notifyChange(b)},_restrictMinMax:function(b,a){var c=this._getMinMaxDate(b,"min"),d=this._getMinMaxDate(b,"max"),c=c&&a<c?c:a;return d&&c>d?d:c},_notifyChange:function(b){var a=this._get(b,"onChangeMonthYear");a&&a.apply(b.input?
b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(b,a){return this._determineDate(b,this._get(b,a+"Date"),null)},_getDaysInMonth:function(b,a){return 32-this._daylightSavingAdjust(new Date(b,a,32)).getDate()},_getFirstDayOfMonth:function(b,a){return(new Date(b,a,1)).getDay()},_canAdjustMonth:function(b,a,c,d){var e=this._getNumberOfMonths(b);c=this._daylightSavingAdjust(new Date(c,
d+(0>a?a:e[0]*e[1]),1));0>a&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(b,c)},_isInRange:function(b,a){var c=this._getMinMaxDate(b,"min"),d=this._getMinMaxDate(b,"max");return(!c||a.getTime()>=c.getTime())&&(!d||a.getTime()<=d.getTime())},_getFormatConfig:function(b){var a=this._get(b,"shortYearCutoff"),a="string"!=typeof a?a:(new Date).getFullYear()%100+parseInt(a,10);return{shortYearCutoff:a,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,
"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,a,c,d){a||(b.currentDay=b.selectedDay,b.currentMonth=b.selectedMonth,b.currentYear=b.selectedYear);a=a?"object"==typeof a?a:this._daylightSavingAdjust(new Date(d,c,a)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,"dateFormat"),a,this._getFormatConfig(b))}});b.fn.datepicker=function(d){if(!this.length)return this;
b.datepicker.initialized||(b(document).mousedown(b.datepicker._checkExternalClick).find(document.body).append(b.datepicker.dpDiv),b.datepicker.initialized=!0);var a=Array.prototype.slice.call(arguments,1);return"string"==typeof d&&("isDisabled"==d||"getDate"==d||"widget"==d)||"option"==d&&2==arguments.length&&"string"==typeof arguments[1]?b.datepicker["_"+d+"Datepicker"].apply(b.datepicker,[this[0]].concat(a)):this.each(function(){"string"==typeof d?b.datepicker["_"+d+"Datepicker"].apply(b.datepicker,
[this].concat(a)):b.datepicker._attachDatepicker(this,d)})};b.datepicker=new m;b.datepicker.initialized=!1;b.datepicker.uuid=(new Date).getTime();b.datepicker.version="1.9.0";window["DP_jQuery_"+k]=b})(l);(function(b,l){var m={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},f={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};b.widget("ui.dialog",{version:"1.9.0",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,
height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var k=b(this).css(d).offset().top;0>k&&b(this).css("top",d.top-k)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.options.title=this.options.title||this.originalTitle;var d=this,k=this.options,e=k.title||"&#160;",f=(this.uiDialog=b("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+k.dialogClass).css({display:"none",outline:0,zIndex:k.zIndex}).attr("tabIndex",-1).keydown(function(a){k.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===b.ui.keyCode.ESCAPE&&(d.close(a),a.preventDefault())}).mousedown(function(a){d.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f);
var a=(this.uiDialogTitlebar=b("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(f),c=b("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();d.close(a)}).appendTo(a);(this.uiDialogTitlebarCloseText=b("<span>")).addClass("ui-icon ui-icon-closethick").text(k.closeText).appendTo(c);var e=b("<span>").uniqueId().addClass("ui-dialog-title").html(e).prependTo(a),g=(this.uiDialogButtonPane=
b("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=b("<div>")).addClass("ui-dialog-buttonset").appendTo(g);f.attr({role:"dialog","aria-labelledby":e.attr("id")});a.find("*").add(a).disableSelection();this._hoverable(c);this._focusable(c);k.draggable&&b.fn.draggable&&this._makeDraggable();k.resizable&&b.fn.resizable&&this._makeResizable();this._createButtons(k.buttons);this._isOpen=!1;b.fn.bgiframe&&f.bgiframe();this._on(f,{keydown:function(a){if(k.modal&&
a.keyCode===b.ui.keyCode.TAB){var c=b(":tabbable",f),d=c.filter(":first"),c=c.filter(":last");if(a.target===c[0]&&!a.shiftKey)return d.focus(1),!1;if(a.target===d[0]&&a.shiftKey)return c.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var b,k=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",
this.originalTitle);b=k.parent.children().eq(k.index);b.length&&b[0]!==this.element[0]?b.before(this.element):k.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(d){var k=this,e,f;if(this._isOpen&&!1!==this._trigger("beforeClose",d))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this.uiDialog.hide(this.options.hide,function(){k._trigger("close",d)}):(this.uiDialog.hide(),this._trigger("close",d)),b.ui.dialog.overlay.resize(),this.options.modal&&
(e=0,b(".ui-dialog").each(function(){this!==k.uiDialog[0]&&(f=b(this).css("z-index"),isNaN(f)||(e=Math.max(e,f)))}),b.ui.dialog.maxZ=e),this},isOpen:function(){return this._isOpen},moveToTop:function(d,k){var e=this.options;if(e.modal&&!d||!e.stack&&!e.modal)return this._trigger("focus",k);e.zIndex>b.ui.dialog.maxZ&&(b.ui.dialog.maxZ=e.zIndex);this.overlay&&(b.ui.dialog.maxZ+=1,b.ui.dialog.overlay.maxZ=b.ui.dialog.maxZ,this.overlay.$el.css("z-index",b.ui.dialog.overlay.maxZ));e={scrollTop:this.element.scrollTop(),
scrollLeft:this.element.scrollLeft()};b.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",b.ui.dialog.maxZ);this.element.attr(e);this._trigger("focus",k);return this},open:function(){if(!this._isOpen){var d;d=this.options;var k=this.uiDialog;this._size();this._position(d.position);k.show(d.show);this.overlay=d.modal?new b.ui.dialog.overlay(this):null;this.moveToTop(!0);d=this.element.find(":tabbable");d.length||(d=this.uiDialogButtonPane.find(":tabbable"),d.length||(d=k));d.eq(0).focus();this._isOpen=
!0;this._trigger("open");return this}},_createButtons:function(d){var k=this,e=!1;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();"object"===typeof d&&null!==d&&b.each(d,function(){return!(e=!0)});e?(b.each(d,function(d,a){a=b.isFunction(a)?{click:a,text:d}:a;var c=b("<button type='button'>").attr(a,!0).unbind("click").click(function(){a.click.apply(k.element[0],arguments)}).appendTo(k.uiButtonSet);b.fn.button&&c.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):
this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function d(b){return{position:b.position,offset:b.offset}}var k=this,e=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,a){b(this).addClass("ui-dialog-dragging");k._trigger("dragStart",e,d(a))},drag:function(b,a){k._trigger("drag",b,d(a))},stop:function(f,a){e.position=[a.position.left-k.document.scrollLeft(),a.position.top-
k.document.scrollTop()];b(this).removeClass("ui-dialog-dragging");k._trigger("dragStop",f,d(a));b.ui.dialog.overlay.resize()}})},_makeResizable:function(d){function k(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}d=d===l?this.options.resizable:d;var e=this,f=this.options,a=this.uiDialog.css("position");d="string"===typeof d?d:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,
maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:this._minHeight(),handles:d,start:function(a,d){b(this).addClass("ui-dialog-resizing");e._trigger("resizeStart",a,k(d))},resize:function(a,b){e._trigger("resize",a,k(b))},stop:function(a,d){b(this).removeClass("ui-dialog-resizing");f.height=b(this).height();f.width=b(this).width();e._trigger("resizeStop",a,k(d));b.ui.dialog.overlay.resize()}}).css("position",a).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},
_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(d){var k=[],e=[0,0],f;if(d){if("string"===typeof d||"object"===typeof d&&"0"in d)k=d.split?d.split(" "):[d[0],d[1]],1===k.length&&(k[1]=k[0]),b.each(["left","top"],function(a,c){+k[a]===k[a]&&(e[a]=k[a],k[a]=c)}),d={my:k.join(" "),at:k.join(" "),offset:e.join(" ")};d=b.extend({},b.ui.dialog.prototype.options.position,d)}else d=b.ui.dialog.prototype.options.position;(f=this.uiDialog.is(":visible"))||
this.uiDialog.show();this.uiDialog.position(d);f||this.uiDialog.hide()},_setOptions:function(d){var k=this,e={},n=!1;b.each(d,function(a,c){k._setOption(a,c);a in m&&(n=!0);a in f&&(e[a]=c)});n&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(d,k){var e,f=this.uiDialog;switch(d){case "buttons":this._createButtons(k);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+k);break;case "dialogClass":f.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
k);break;case "disabled":k?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case "draggable":(e=f.is(":data(draggable)"))&&!k&&f.draggable("destroy");!e&&k&&this._makeDraggable();break;case "position":this._position(k);break;case "resizable":(e=f.is(":data(resizable)"))&&!k&&f.resizable("destroy");e&&"string"===typeof k&&f.resizable("option","handles",k);e||!1===k||this._makeResizable(k);break;case "title":b(".ui-dialog-title",this.uiDialogTitlebar).html(""+(k||"&#160;"))}this._super(d,
k)},_size:function(){var d,k,e=this.options,f=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});e.minWidth>e.width&&(e.width=e.minWidth);d=this.uiDialog.css({height:"auto",width:e.width}).outerHeight();k=Math.max(0,e.minHeight-d);"auto"===e.height?b.support.minHeight?this.element.css({minHeight:k,height:"auto"}):(this.uiDialog.show(),d=this.element.css("height","auto").height(),f||this.uiDialog.hide(),this.element.height(Math.max(d,k))):this.element.height(Math.max(e.height-
d,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});b.extend(b.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(b){b=b.attr("id");b||(b=this.uuid+=1);return"ui-dialog-title-"+b},overlay:function(d){this.$el=b.ui.dialog.overlay.create(d)}});b.extend(b.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:b.map("focus mousedown mouseup keydown keypress click".split(" "),function(b){return b+".dialog-overlay"}).join(" "),create:function(d){0===
this.instances.length&&(setTimeout(function(){b.ui.dialog.overlay.instances.length&&b(document).bind(b.ui.dialog.overlay.events,function(d){if(b(d.target).zIndex()<b.ui.dialog.overlay.maxZ)return!1})},1),b(window).bind("resize.dialog-overlay",b.ui.dialog.overlay.resize));var k=this.oldInstances.pop()||b("<div>").addClass("ui-widget-overlay");b(document).bind("keydown.dialog-overlay",function(e){var f=b.ui.dialog.overlay.instances;0!==f.length&&f[f.length-1]===k&&d.options.closeOnEscape&&!e.isDefaultPrevented()&&
e.keyCode&&e.keyCode===b.ui.keyCode.ESCAPE&&(d.close(e),e.preventDefault())});k.appendTo(document.body).css({width:this.width(),height:this.height()});b.fn.bgiframe&&k.bgiframe();this.instances.push(k);return k},destroy:function(d){var k=b.inArray(d,this.instances),e=0;-1!==k&&this.oldInstances.push(this.instances.splice(k,1)[0]);0===this.instances.length&&b([document,window]).unbind(".dialog-overlay");d.height(0).width(0).remove();b.each(this.instances,function(){e=Math.max(e,this.css("z-index"))});
this.maxZ=e},height:function(){var d,k;return b.browser.msie?(d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),k=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),d<k?b(window).height()+"px":d+"px"):b(document).height()+"px"},width:function(){var d,k;return b.browser.msie?(d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),k=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),d<k?b(window).width()+"px":
d+"px"):b(document).width()+"px"},resize:function(){var d=b([]);b.each(b.ui.dialog.overlay.instances,function(){d=d.add(this)});d.css({width:0,height:0}).css({width:b.ui.dialog.overlay.width(),height:b.ui.dialog.overlay.height()})}});b.extend(b.ui.dialog.overlay.prototype,{destroy:function(){b.ui.dialog.overlay.destroy(this.$el)}})})(l);(function(b,l){var m=!1;b.widget("ui.menu",{version:"1.9.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",
at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,b.proxy(function(b){this.options.disabled&&b.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");
this._on({"mousedown .ui-menu-item > a":function(b){b.preventDefault()},"click .ui-state-disabled > a":function(b){b.preventDefault()},"click .ui-menu-item:has(a)":function(f){var d=b(f.target).closest(".ui-menu-item");!m&&d.not(".ui-state-disabled").length&&(m=!0,this.select(f),d.has(".ui-menu").length?this.expand(f):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(f){var d=
b(f.currentTarget);d.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(f,d)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,d){var k=this.active||this.element.children(".ui-menu-item").eq(0);d||this.focus(b,k)},blur:function(f){this._delay(function(){b.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(f)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(f){b(f.target).closest(".ui-menu").length||
this.collapseAll(f);m=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var f=
b(this);f.data("ui-menu-submenu-carat")&&f.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(f){function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var k,e,n,a,c=!0;switch(f.keyCode){case b.ui.keyCode.PAGE_UP:this.previousPage(f);break;case b.ui.keyCode.PAGE_DOWN:this.nextPage(f);break;case b.ui.keyCode.HOME:this._move("first","first",f);break;case b.ui.keyCode.END:this._move("last","last",f);break;case b.ui.keyCode.UP:this.previous(f);
break;case b.ui.keyCode.DOWN:this.next(f);break;case b.ui.keyCode.LEFT:this.collapse(f);break;case b.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(f);break;case b.ui.keyCode.ENTER:case b.ui.keyCode.SPACE:this._activate(f);break;case b.ui.keyCode.ESCAPE:this.collapse(f);break;default:c=!1,k=this.previousFilter||"",e=String.fromCharCode(f.keyCode),n=!1,clearTimeout(this.filterTimer),e===k?n=!0:e=k+e,a=RegExp("^"+d(e),"i"),k=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(b(this).children("a").text())}),
k=n&&-1!==k.index(this.active.next())?this.active.nextAll(".ui-menu-item"):k,k.length||(e=String.fromCharCode(f.keyCode),a=RegExp("^"+d(e),"i"),k=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(b(this).children("a").text())})),k.length?(this.focus(f,k),1<k.length?(this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}c&&f.preventDefault()},_activate:function(b){this.active.is(".ui-state-disabled")||
(this.active.children("a[aria-haspopup='true']").length?this.expand(b):this.select(b))},refresh:function(){var f,d=this.options.icons.submenu,k=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});f=k.add(this.element);f.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});f.children(":not(.ui-menu-item)").each(function(){var d=b(this);/[^\-\u2014\u2013\s]/.test(d.text())||d.addClass("ui-widget-content ui-menu-divider")});f.children(".ui-state-disabled").attr("aria-disabled","true");k.each(function(){var e=b(this),k=e.prev("a"),a=b("<span>").addClass("ui-menu-icon ui-icon "+d).data("ui-menu-submenu-carat",!0);k.attr("aria-haspopup","true").prepend(a);e.attr("aria-labelledby",k.attr("id"))});this.active&&!b.contains(this.element[0],this.active[0])&&
this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(b,d){var k;this.blur(b,b&&"focus"===b.type);this._scrollIntoView(d);this.active=d.first();k=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",k.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},
this.delay);k=d.children(".ui-menu");k.length&&/^mouse/.test(b.type)&&this._startOpening(k);this.activeMenu=d.parent();this._trigger("focus",b,{item:d})},_scrollIntoView:function(f){var d,k,e;this._hasScroll()&&(d=parseFloat(b.css(this.activeMenu[0],"borderTopWidth"))||0,k=parseFloat(b.css(this.activeMenu[0],"paddingTop"))||0,d=f.offset().top-this.activeMenu.offset().top-d-k,k=this.activeMenu.scrollTop(),e=this.activeMenu.height(),f=f.height(),0>d?this.activeMenu.scrollTop(k+d):d+f>e&&this.activeMenu.scrollTop(k+
d-e+f))},blur:function(b,d){d||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(f){var d=b.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(f.parents(".ui-menu")).hide().attr("aria-hidden",
"true");f.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(d)},collapseAll:function(f,d){clearTimeout(this.timer);this.timer=this._delay(function(){var k=d?this.element:b(f&&f.target).closest(this.element.find(".ui-menu"));k.length||(k=this.element);this._close(k);this.blur(f);this.activeMenu=k},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element);b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},
collapse:function(b){var d=this.active&&this.active.parent().closest(".ui-menu-item",this.element);d&&d.length&&(this._close(),this.focus(b,d))},expand:function(b){var d=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();d&&d.length&&(this._open(d.parent()),this._delay(function(){this.focus(b,d)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},
isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(b,d,k){var e;this.active&&(e="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[b+"All"](".ui-menu-item").eq(0));e&&e.length&&this.active||(e=this.activeMenu.children(".ui-menu-item")[d]());this.focus(k,e)},nextPage:function(f){var d,k,e;this.active?this.isLastItem()||(this._hasScroll()?(k=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){d=
b(this);return 0>d.offset().top-k-e}),this.focus(f,d)):this.focus(f,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(f)},previousPage:function(f){var d,k,e;this.active?this.isFirstItem()||(this._hasScroll()?(k=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){d=b(this);return 0<d.offset().top-k+e}),this.focus(f,d)):this.focus(f,this.activeMenu.children(".ui-menu-item").first())):this.next(f)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(f){this.active=this.active||b(f.target).closest(".ui-menu-item");var d={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(f,!0);this._trigger("select",f,d)}})})(l);(function(b,l){b.widget("ui.progressbar",{version:"1.9.0",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,
"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(b){if(b===l)return this._value();this._setOption("value",
b);return this},_setOption:function(b,f){"value"===b&&(this.options.value=f,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(b,f)},_value:function(){var b=this.options.value;"number"!==typeof b&&(b=0);return Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var b=this.value(),f=this._percentage();this.oldValue!==b&&(this.oldValue=b,this._trigger("change"));this.valueDiv.toggle(b>
this.min).toggleClass("ui-corner-right",b===this.options.max).width(f.toFixed(0)+"%");this.element.attr("aria-valuenow",b)}})})(l);(function(b,l){b.widget("ui.slider",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var m,f=this.options,d=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),k=f.values&&f.values.length||1,e=[];this._mouseSliding=
this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(f.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);f.range&&(!0===f.range&&(f.values||(f.values=[this._valueMin(),this._valueMin()]),f.values.length&&2!==f.values.length&&(f.values=[f.values[0],f.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+
("min"===f.range||"max"===f.range?" ui-slider-range-"+f.range:"")));for(m=d.length;m<k;m++)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=d.add(b(e.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).mouseenter(function(){f.disabled||b(this).addClass("ui-state-hover")}).mouseleave(function(){b(this).removeClass("ui-state-hover")}).focus(function(){f.disabled?
b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(d){b(this).data("ui-slider-handle-index",d)});this._on(this.handles,{keydown:function(d){var a,c,g,e=b(d.target).data("ui-slider-handle-index");switch(d.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(d.preventDefault(),
!this._keySliding&&(this._keySliding=!0,b(d.target).addClass("ui-state-active"),a=this._start(d,e),!1===a))return}g=this.options.step;a=this.options.values&&this.options.values.length?c=this.values(e):c=this.value();switch(d.keyCode){case b.ui.keyCode.HOME:c=this._valueMin();break;case b.ui.keyCode.END:c=this._valueMax();break;case b.ui.keyCode.PAGE_UP:c=this._trimAlignValue(a+(this._valueMax()-this._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:c=this._trimAlignValue(a-(this._valueMax()-this._valueMin())/
5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(a===this._valueMax())return;c=this._trimAlignValue(a+g);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(a===this._valueMin())return;c=this._trimAlignValue(a-g)}this._slide(d,e,c)},keyup:function(d){var a=b(d.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(d,a),this._change(d,a),b(d.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();
this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(m){var f,d,k,e,n,a=this;n=this.options;if(n.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();f=this._normValueFromMouse({x:m.pageX,y:m.pageY});d=this._valueMax()-this._valueMin()+1;this.handles.each(function(c){var g=
Math.abs(f-a.values(c));d>g&&(d=g,k=b(this),e=c)});!0===n.range&&this.values(1)===n.min&&(e+=1,k=b(this.handles[e]));if(!1===this._start(m,e))return!1;this._mouseSliding=!0;this._handleIndex=e;k.addClass("ui-state-active").focus();n=k.offset();this._clickOffset=b(m.target).parents().andSelf().is(".ui-slider-handle")?{left:m.pageX-n.left-k.width()/2,top:m.pageY-n.top-k.height()/2-(parseInt(k.css("borderTopWidth"),10)||0)-(parseInt(k.css("borderBottomWidth"),10)||0)+(parseInt(k.css("marginTop"),10)||
0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(m,e,f);return this._animateOff=!0},_mouseStart:function(b){return!0},_mouseDrag:function(b){var f=this._normValueFromMouse({x:b.pageX,y:b.pageY});this._slide(b,this._handleIndex,f);return!1},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation=
"vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var f;"horizontal"===this.orientation?(f=this.elementSize.width,b=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(f=this.elementSize.height,b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));f=b/f;1<f&&(f=1);0>f&&(f=0);"vertical"===this.orientation&&(f=1-f);b=this._valueMax()-this._valueMin();f=this._valueMin()+f*b;return this._trimAlignValue(f)},_start:function(b,
f){var d={handle:this.handles[f],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(f),d.values=this.values());return this._trigger("start",b,d)},_slide:function(b,f,d){var k;this.options.values&&this.options.values.length?(k=this.values(f?0:1),2===this.options.values.length&&!0===this.options.range&&(0===f&&d>k||1===f&&d<k)&&(d=k),d!==this.values(f)&&(k=this.values(),k[f]=d,b=this._trigger("slide",b,{handle:this.handles[f],value:d,values:k}),this.values(f?0:
1),!1!==b&&this.values(f,d,!0))):d!==this.value()&&(b=this._trigger("slide",b,{handle:this.handles[f],value:d}),!1!==b&&this.value(d))},_stop:function(b,f){var d={handle:this.handles[f],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(f),d.values=this.values());this._trigger("stop",b,d)},_change:function(b,f){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[f],value:this.value()};this.options.values&&this.options.values.length&&(d.value=
this.values(f),d.values=this.values());this._trigger("change",b,d)}},value:function(b){if(arguments.length)this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);else return this._value()},values:function(m,f){var d,k,e;if(1<arguments.length)this.options.values[m]=this._trimAlignValue(f),this._refreshValue(),this._change(null,m);else if(arguments.length)if(b.isArray(arguments[0])){d=this.options.values;k=arguments[0];for(e=0;e<d.length;e+=1)d[e]=this._trimAlignValue(k[e]),
this._change(null,e);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(m):this.value();else return this._values()},_setOption:function(m,f){var d,k=0;b.isArray(this.options.values)&&(k=this.options.values.length);b.Widget.prototype._setOption.apply(this,arguments);switch(m){case "disabled":f?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",
!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<k;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},
_values:function(b){var f,d;if(arguments.length)return f=this.options.values[b],f=this._trimAlignValue(f);f=this.options.values.slice();for(d=0;d<f.length;d+=1)f[d]=this._trimAlignValue(f[d]);return f},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var f=0<this.options.step?this.options.step:1,d=(b-this._valueMin())%f;b-=d;2*Math.abs(d)>=f&&(b+=0<d?f:-f);return parseFloat(b.toFixed(5))},_valueMin:function(){return this.options.min},
_valueMax:function(){return this.options.max},_refreshValue:function(){var m,f,d,k,e,n=this.options.range,a=this.options,c=this,g=this._animateOff?!1:a.animate,l={};if(this.options.values&&this.options.values.length)this.handles.each(function(d,e){f=(c.values(d)-c._valueMin())/(c._valueMax()-c._valueMin())*100;l["horizontal"===c.orientation?"left":"bottom"]=f+"%";b(this).stop(1,1)[g?"animate":"css"](l,a.animate);if(!0===c.options.range)if("horizontal"===c.orientation){if(0===d)c.range.stop(1,1)[g?
"animate":"css"]({left:f+"%"},a.animate);if(1===d)c.range[g?"animate":"css"]({width:f-m+"%"},{queue:!1,duration:a.animate})}else{if(0===d)c.range.stop(1,1)[g?"animate":"css"]({bottom:f+"%"},a.animate);if(1===d)c.range[g?"animate":"css"]({height:f-m+"%"},{queue:!1,duration:a.animate})}m=f});else{d=this.value();k=this._valueMin();e=this._valueMax();f=e!==k?(d-k)/(e-k)*100:0;l["horizontal"===this.orientation?"left":"bottom"]=f+"%";this.handle.stop(1,1)[g?"animate":"css"](l,a.animate);if("min"===n&&"horizontal"===
this.orientation)this.range.stop(1,1)[g?"animate":"css"]({width:f+"%"},a.animate);if("max"===n&&"horizontal"===this.orientation)this.range[g?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:a.animate});if("min"===n&&"vertical"===this.orientation)this.range.stop(1,1)[g?"animate":"css"]({height:f+"%"},a.animate);if("max"===n&&"vertical"===this.orientation)this.range[g?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:a.animate})}}})})(l);(function(b){function l(b){return function(){var f=
this.element.val();b.apply(this,arguments);this._refresh();f!==this.element.val()&&this._trigger("change")}}b.widget("ui.spinner",{version:"1.9.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",
this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var m={},f=this.element;b.each(["min","max","step"],function(b,k){var e=f.attr(k);void 0!==e&&e.length&&(m[k]=e)});return m},_events:{keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");
this.previous=this.element.val()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.uiSpinner.removeClass("ui-state-active"),this.previous!==this.element.val()&&this._trigger("change",b))},mousewheel:function(b,f){if(f){if(!this.spinning&&!this._start(b))return!1;this._spin((0<f?1:-1)*this.options.step,b);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(b)},100);b.preventDefault()}},"mousedown .ui-spinner-button":function(m){function f(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();m.preventDefault();f.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;f.call(this)});!1!==this._start(m)&&this._repeat(null,b(m.currentTarget).hasClass("ui-spinner-up")?1:-1,m)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(m){if(b(m.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(m))return!1;this._repeat(null,b(m.currentTarget).hasClass("ui-spinner-up")?1:-1,m)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var b=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(b);this.element.attr("role","spinbutton");this.buttons=b.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(0.5*
b.height())&&0<b.height()&&b.height(b.height());this.options.disabled&&this.disable()},_keydown:function(m){var f=this.options,d=b.ui.keyCode;switch(m.keyCode){case d.UP:return this._repeat(null,1,m),!0;case d.DOWN:return this._repeat(null,-1,m),!0;case d.PAGE_UP:return this._repeat(null,f.page,m),!0;case d.PAGE_DOWN:return this._repeat(null,-f.page,m),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(b){if(!this.spinning&&!1===this._trigger("start",b))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(b,f,d){b=b||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,f,d)},b);this._spin(f*this.options.step,d)},_spin:function(b,f){var d=this.value()||0;this.counter||
(this.counter=1);d=this._adjustValue(d+b*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",f,{value:d})||(this._value(d),this.counter++)},_increment:function(m){var f=this.options.incremental;return f?b.isFunction(f)?f(m):Math.floor(m*m*m/5E4-m*m/500+17*m/200+1):1},_precision:function(){var b=this._precisionOf(this.options.step);null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min)));return b},_precisionOf:function(b){b=b.toString();var f=b.indexOf(".");
return-1===f?0:b.length-f-1},_adjustValue:function(b){var f,d=this.options;f=null!==d.min?d.min:0;b=Math.round((b-f)/d.step)*d.step;b=f+b;b=parseFloat(b.toFixed(this._precision()));return null!==d.max&&b>d.max?d.max:null!==d.min&&b<d.min?d.min:b},_stop:function(b){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",b))},_setOption:function(b,f){if("culture"===b||"numberFormat"===b){var d=this._parse(this.element.val());this.options[b]=
f;this.element.val(this._format(d))}else"max"!==b&&"min"!==b&&"step"!==b||"string"!==typeof f||(f=this._parse(f)),this._super(b,f),"disabled"===b&&(f?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:l(function(b){this._super(b);this._value(this.element.val())}),_parse:function(b){"string"===typeof b&&""!==b&&(b=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(b,10,this.options.culture):
+b);return""===b||isNaN(b)?null:b},_format:function(b){return""===b?"":window.Globalize&&this.options.numberFormat?Globalize.format(b,this.options.numberFormat,this.options.culture):b},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(b,f){var d;""!==b&&(d=this._parse(b),null!==d&&(f||(d=this._adjustValue(d)),b=this._format(d)));this.element.val(b);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:l(function(b){this._stepUp(b)}),_stepUp:function(b){this._spin((b||1)*this.options.step)},stepDown:l(function(b){this._stepDown(b)}),_stepDown:function(b){this._spin((b||1)*-this.options.step)},pageUp:l(function(b){this._stepUp((b||1)*this.options.page)}),pageDown:l(function(b){this._stepDown((b||1)*this.options.page)}),
value:function(b){if(!arguments.length)return this._parse(this.element.val());l(this._value).call(this,b)},widget:function(){return this.uiSpinner}})})(l);(function(b,l){function m(b){b=b.cloneNode(!1);return 1<b.hash.length&&b.href.replace(d,"")===location.href.replace(d,"")}var f=0,d=/#.*$/;b.widget("ui.tabs",{version:"1.9.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var d=
this,e=this.options,f=e.active;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",e.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){b(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){b(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===f&&(location.hash&&this.anchors.each(function(a,
c){if(c.hash===location.hash)return f=a,!1}),null===f&&(f=this.tabs.filter(".ui-tabs-active").index()),null===f||-1===f)&&(f=this.tabs.length?0:!1);!1!==f&&(f=this.tabs.index(this.tabs.eq(f)),-1===f&&(f=e.collapsible?!1:0));e.active=f;!e.collapsible&&!1===e.active&&this.anchors.length&&(e.active=0);b.isArray(e.disabled)&&(e.disabled=b.unique(e.disabled.concat(b.map(this.tabs.filter(".ui-state-disabled"),function(a){return d.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?
this._findActive(this.options.active):b();this._refresh();this.active.length&&this.load(e.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):b()}},_tabKeydown:function(d){var e=b(this.document[0].activeElement).closest("li"),f=this.tabs.index(e),a=!0;if(!this._handlePageNav(d)){switch(d.keyCode){case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:f++;break;case b.ui.keyCode.UP:case b.ui.keyCode.LEFT:a=!1;f--;break;case b.ui.keyCode.END:f=
this.anchors.length-1;break;case b.ui.keyCode.HOME:f=0;break;case b.ui.keyCode.SPACE:d.preventDefault();clearTimeout(this.activating);this._activate(f);return;case b.ui.keyCode.ENTER:d.preventDefault();clearTimeout(this.activating);this._activate(f===this.options.active?!1:f);return;default:return}d.preventDefault();clearTimeout(this.activating);f=this._focusNextTab(f,a);d.ctrlKey||(e.attr("aria-selected","false"),this.tabs.eq(f).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",
f)},this.delay))}},_panelKeydown:function(d){!this._handlePageNav(d)&&d.ctrlKey&&d.keyCode===b.ui.keyCode.UP&&(d.preventDefault(),this.active.focus())},_handlePageNav:function(d){if(d.altKey&&d.keyCode===b.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(d.altKey&&d.keyCode===b.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(d,e){function f(){d>a&&(d=0);0>d&&(d=a);return d}for(var a=this.tabs.length-
1;-1!==b.inArray(f(),this.options.disabled);)d=e?d+1:d-1;return d},_focusNextTab:function(b,d){b=this._findNextTab(b,d);this.tabs.eq(b).focus();return b},_setOption:function(b,d){"active"===b?this._activate(d):"disabled"===b?this._setupDisabled(d):(this._super(b,d),"collapsible"===b&&(this.element.toggleClass("ui-tabs-collapsible",d),d||!1!==this.options.active||this._activate(0)),"event"===b&&this._setupEvents(d),"heightStyle"===b&&this._setupHeightStyle(d))},_tabId:function(b){return b.attr("aria-controls")||
"ui-tabs-"+ ++f},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var d=this.options,e=this.tablist.children(":has(a[href])");d.disabled=b.map(e.filter(".ui-state-disabled"),function(b){return e.index(b)});this._processTabs();!1!==d.active&&this.anchors.length?this.active.length&&!b.contains(this.tablist[0],this.active[0])?this.tabs.length===d.disabled.length?(d.active=!1,this.active=b()):this._activate(this._findNextTab(Math.max(0,
d.active-1),!1)):d.active=this.tabs.index(this.active):(d.active=!1,this.active=b());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",
tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var d=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return b("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",
tabIndex:-1});this.panels=b();this.anchors.each(function(e,f){var a,c,g,l=b(f).uniqueId().attr("id"),p=b(f).closest("li"),z=p.attr("aria-controls");m(f)?(a=f.hash,c=d.element.find(d._sanitizeSelector(a))):(g=d._tabId(p),a="#"+g,c=d.element.find(a),c.length||(c=d._createPanel(g),c.insertAfter(d.panels[e-1]||d.tablist)),c.attr("aria-live","polite"));c.length&&(d.panels=d.panels.add(c));z&&p.data("ui-tabs-aria-controls",z);p.attr({"aria-controls":a.substring(1),"aria-labelledby":l});c.attr("aria-labelledby",
l)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(d){return b("<div>").attr("id",d).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(d){b.isArray(d)&&(d.length?d.length===this.anchors.length&&(d=!0):d=!1);for(var e=0,f;f=this.tabs[e];e++)!0===d||-1!==b.inArray(e,d)?b(f).addClass("ui-state-disabled").attr("aria-disabled",
"true"):b(f).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=d},_setupEvents:function(d){var e={click:function(b){b.preventDefault()}};d&&b.each(d.split(" "),function(b,a){e[a]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,e);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(d){var e,f,a=this.element.parent();
"fill"===d?(b.support.minHeight||(f=a.css("overflow"),a.css("overflow","hidden")),e=a.height(),this.element.siblings(":visible").each(function(){var a=b(this),d=a.css("position");"absolute"!==d&&"fixed"!==d&&(e-=a.outerHeight(!0))}),f&&a.css("overflow",f),this.element.children().not(this.panels).each(function(){e-=b(this).outerHeight(!0)}),this.panels.each(function(){b(this).height(Math.max(0,e-b(this).innerHeight()+b(this).height()))}).css("overflow","auto")):"auto"===d&&(e=0,this.panels.each(function(){e=
Math.max(e,b(this).height("").height())}).height(e))},_eventHandler:function(d){var e=this.options,f=this.active,a=b(d.currentTarget).closest("li"),c=a[0]===f[0],g=c&&e.collapsible,m=g?b():this._getPanelForTab(a),l=f.length?this._getPanelForTab(f):b(),f={oldTab:f,oldPanel:l,newTab:g?b():a,newPanel:m};d.preventDefault();a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||c&&!e.collapsible||!1===this._trigger("beforeActivate",d,f)||(e.active=g?!1:this.tabs.index(a),this.active=
c?b():a,this.xhr&&this.xhr.abort(),l.length||m.length||b.error("jQuery UI Tabs: Mismatching fragment identifier."),m.length&&this.load(this.tabs.index(a),d),this._toggle(d,f))},_toggle:function(d,e){function f(){c.running=!1;c._trigger("activate",d,e)}function a(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&c.options.show?c._show(g,c.options.show,f):(g.show(),f())}var c=this,g=e.newPanel,m=e.oldPanel;this.running=!0;m.length&&this.options.hide?this._hide(m,this.options.hide,
function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");a()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),m.hide(),a());m.attr({"aria-expanded":"false","aria-hidden":"true"});e.oldTab.attr("aria-selected","false");g.length&&m.length?e.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===b(this).attr("tabIndex")}).attr("tabIndex",-1);g.attr({"aria-expanded":"true","aria-hidden":"false"});e.newTab.attr({"aria-selected":"true",
tabIndex:0})},_activate:function(d){d=this._findActive(d);d[0]!==this.active[0]&&(d.length||(d=this.active),d=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:d,currentTarget:d,preventDefault:b.noop}))},_findActive:function(d){return!1===d?b():this.tabs.eq(d)},_getIndex:function(b){"string"===typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();this.tabs.add(this.panels).each(function(){b.data(this,"ui-tabs-destroy")?b(this).remove():b(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var d=b(this),e=d.data("ui-tabs-aria-controls");e?d.attr("aria-controls",e):d.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(d){var e=this.options.disabled;!1!==e&&(d===l?e=!1:(d=this._getIndex(d),e=b.isArray(e)?b.map(e,function(b){return b!==d?b:null}):b.map(this.tabs,function(b,a){return a!==d?a:null})),this._setupDisabled(e))},disable:function(d){var e=this.options.disabled;if(!0!==e){if(d===l)e=!0;else{d=
this._getIndex(d);if(-1!==b.inArray(d,e))return;e=b.isArray(e)?b.merge([d],e).sort():[d]}this._setupDisabled(e)}},load:function(d,e){d=this._getIndex(d);var f=this,a=this.tabs.eq(d),c=a.find(".ui-tabs-anchor"),g=this._getPanelForTab(a),l={tab:a,panel:g};m(c[0])||(this.xhr=b.ajax(this._ajaxSettings(c,e,l)))&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a);f._trigger("load",e,l)},1)}).complete(function(c,
b){setTimeout(function(){"abort"===b&&f.panels.stop(!1,!0);a.removeClass("ui-tabs-loading");g.removeAttr("aria-busy");c===f.xhr&&delete f.xhr},1)}))},_ajaxSettings:function(d,e,f){var a=this;return{url:d.attr("href"),beforeSend:function(c,d){return a._trigger("beforeLoad",e,b.extend({jqXHR:c,ajaxSettings:d},f))}}},_getPanelForTab:function(d){d=b(d).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+d))}});!1!==b.uiBackCompat&&(b.ui.tabs.prototype._ui=function(b,d){return{tab:b,
panel:d,index:this.anchors.index(b)}},b.widget("ui.tabs",b.ui.tabs,{url:function(b,d){this.anchors.eq(b).attr("href",d)}}),b.widget("ui.tabs",b.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var d=this;this._on({tabsbeforeload:function(e,f){b.data(f.tab[0],"cache.tabs")?e.preventDefault():f.jqXHR.success(function(){d.options.cache&&b.data(f.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(d,e,f){var a=this.options.ajaxOptions;return b.extend({},a,{error:function(c,
b,d){try{a.error(c,b,f.tab.closest("li").index(),f.tab[0])}catch(e){}}},this._superApply(arguments))},_setOption:function(b,d){"cache"===b&&!1===d&&this.anchors.removeData("cache.tabs");this._super(b,d)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(b,d){this.anchors.eq(b).removeData("cache.tabs");this._superApply(arguments)}}),b.widget("ui.tabs",b.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),b.widget("ui.tabs",b.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},
_create:function(){this._super();this._on({tabsbeforeload:function(b,d){if(b.target===this.element[0]&&this.options.spinner){var f=d.tab.find("span"),a=f.html();f.html(this.options.spinner);d.jqXHR.complete(function(){f.html(a)})}}})}}),b.widget("ui.tabs",b.ui.tabs,{options:{enable:null,disable:null},enable:function(d){var e=this.options,f;if(d&&!0===e.disabled||b.isArray(e.disabled)&&-1!==b.inArray(d,e.disabled))f=!0;this._superApply(arguments);f&&this._trigger("enable",null,this._ui(this.anchors[d],
this.panels[d]))},disable:function(d){var e=this.options,f;if(d&&!1===e.disabled||b.isArray(e.disabled)&&-1===b.inArray(d,e.disabled))f=!0;this._superApply(arguments);f&&this._trigger("disable",null,this._ui(this.anchors[d],this.panels[d]))}}),b.widget("ui.tabs",b.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(d,e,f){f===l&&(f=this.anchors.length);var a,c=this.options;e=b(c.tabTemplate.replace(/#\{href\}/g,d).replace(/#\{label\}/g,
e));var g=d.indexOf("#")?this._tabId(e):d.replace("#","");e.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);e.attr("aria-controls",g);d=f>=this.tabs.length;a=this.element.find("#"+g);a.length||(a=this._createPanel(g),d?0<f?a.insertAfter(this.panels.eq(-1)):a.appendTo(this.element):a.insertBefore(this.panels[f]));a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();d?e.appendTo(this.tablist):e.insertBefore(this.tabs[f]);c.disabled=b.map(c.disabled,function(a){return a>=
f?++a:a});this.refresh();1===this.tabs.length&&!1===c.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[f],this.panels[f]));return this},remove:function(d){d=this._getIndex(d);var e=this.options,f=this.tabs.eq(d).remove(),a=this._getPanelForTab(f).remove();f.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(d+(d+1<this.anchors.length?1:-1));e.disabled=b.map(b.grep(e.disabled,function(a){return a!==d}),function(a){return a>=d?--a:a});this.refresh();this._trigger("remove",
null,this._ui(f.find("a")[0],a[0]));return this}}),b.widget("ui.tabs",b.ui.tabs,{length:function(){return this.anchors.length}}),b.widget("ui.tabs",b.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(d){d=d.is("li")?d.find("a[href]"):d;d=d[0];return b(d).closest("li").attr("aria-controls")||d.title&&d.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++f}}),b.widget("ui.tabs",b.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(d){return b(this.options.panelTemplate).attr("id",
d).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),b.widget("ui.tabs",b.ui.tabs,{_create:function(){var b=this.options;null===b.active&&b.selected!==l&&(b.active=-1===b.selected?!1:b.selected);this._super();b.selected=b.active;!1===b.selected&&(b.selected=-1)},_setOption:function(b,d){if("selected"!==b)return this._super(b,d);var f=this.options;this._super("active",-1===d?!1:d);f.selected=f.active;!1===f.selected&&(f.selected=-1)},_eventHandler:function(b){this._superApply(arguments);
this.options.selected=this.options.active;!1===this.options.selected&&(this.options.selected=-1)}}),b.widget("ui.tabs",b.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(b,d,f){var a=this._superApply(arguments);if(!a)return!1;"beforeActivate"===b&&f.newTab.length?a=this._super("select",d,{tab:f.newTab.find(".ui-tabs-anchor")[0],
panel:f.newPanel[0],index:f.newTab.closest("li").index()}):"activate"===b&&f.newTab.length&&(a=this._super("show",d,{tab:f.newTab.find(".ui-tabs-anchor")[0],panel:f.newPanel[0],index:f.newTab.closest("li").index()}));return a}}),b.widget("ui.tabs",b.ui.tabs,{select:function(b){b=this._getIndex(b);if(-1===b)if(this.options.collapsible&&-1!==this.options.selected)b=this.options.selected;else return;this.anchors.eq(b).trigger(this.options.event+this.eventNamespace)}}),function(){var d=0;b.widget("ui.tabs",
b.ui.tabs,{options:{cookie:null},_create:function(){var b=this.options,d;null==b.active&&b.cookie&&(d=parseInt(this._cookie(),10),-1===d&&(d=!1),b.active=d);this._super()},_cookie:function(e){var f=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++d)];arguments.length&&(f.push(!1===e?-1:e),f.push(this.options.cookie));return b.cookie.apply(null,f)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(b){this._superApply(arguments);
this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),b.widget("ui.tabs",b.ui.tabs,{_trigger:function(d,e,f){f=b.extend({},f);"load"===d&&(f.panel=f.panel[0],f.tab=f.tab.find(".ui-tabs-anchor")[0]);return this._super(d,e,f)}}),b.widget("ui.tabs",b.ui.tabs,{options:{fx:null},_getFx:function(){var d,e,f=this.options.fx;f&&(b.isArray(f)?(d=f[0],e=f[1]):d=e=f);return f?{show:e,hide:d}:
null},_toggle:function(b,d){function f(){c.running=!1;c._trigger("activate",b,d)}function a(){d.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&l.show?g.animate(l.show,l.show.duration,function(){f()}):(g.show(),f())}var c=this,g=d.newPanel,m=d.oldPanel,l=this._getFx();if(!l)return this._super(b,d);c.running=!0;m.length&&l.hide?m.animate(l.hide,l.hide.duration,function(){d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");a()}):(d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
m.hide(),a())}}))})(l);(function(b){function l(d,k){var e=(d.attr("aria-describedby")||"").split(/\s+/);e.push(k);d.data("ui-tooltip-id",k).attr("aria-describedby",b.trim(e.join(" ")))}function m(d){var k=d.data("ui-tooltip-id"),e=(d.attr("aria-describedby")||"").split(/\s+/),k=b.inArray(k,e);-1!==k&&e.splice(k,1);d.removeData("ui-tooltip-id");(e=b.trim(e.join(" ")))?d.attr("aria-describedby",e):d.removeAttr("aria-describedby")}var f=0;b.widget("ui.tooltip",{version:"1.9.0",options:{content:function(){return b(this).attr("title")},
hide:!0,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={}},_setOption:function(d,k){var e=this;"disabled"===d?(this[k?"_disable":"_enable"](),this.options[d]=k):(this._super(d,k),"content"===d&&b.each(this.tooltips,function(b,a){e._updateContent(a)}))},_disable:function(){var d=this;b.each(this.tooltips,function(k,e){var f=
b.Event("blur");f.target=f.currentTarget=e[0];d.close(f,!0)});this.element.find(this.options.items).andSelf().each(function(){var d=b(this);d.is("[title]")&&d.data("ui-tooltip-title",d.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var d=b(this);d.data("ui-tooltip-title")&&d.attr("title",d.data("ui-tooltip-title"))})},open:function(d){var k=b(d?d.target:this.element).closest(this.options.items);k.length&&(this.options.track&&k.data("ui-tooltip-id")?
(this._find(k).position(b.extend({of:k},this.options.position)),this._off(this.document,"mousemove")):(k.attr("title")&&k.data("ui-tooltip-title",k.attr("title")),k.data("tooltip-open",!0),this._updateContent(k,d)))},_updateContent:function(b,k){var e;e=this.options.content;var f=this;if("string"===typeof e)return this._open(k,b,e);(e=e.call(b[0],function(a){b.data("tooltip-open")&&f._delay(function(){this._open(k,b,a)})}))&&this._open(k,b,e)},_open:function(d,k,e){function f(b){c.of=b;a.position(c)}
var a,c;e&&(a=this._find(k),a.length?a.find(".ui-tooltip-content").html(e):(k.is("[title]")&&(d&&"mouseover"===d.type?k.attr("title",""):k.removeAttr("title")),a=this._tooltip(k),l(k,a.attr("id")),a.find(".ui-tooltip-content").html(e),this.options.track&&d&&/^mouse/.test(d.originalEvent.type)?(c=b.extend({},this.options.position),this._on(this.document,{mousemove:f}),f(d)):a.position(b.extend({of:k},this.options.position)),a.hide(),this._show(a,this.options.show),this._trigger("open",d,{tooltip:a}),
this._on(k,{mouseleave:"close",focusout:"close",keyup:function(a){a.keyCode===b.ui.keyCode.ESCAPE&&(a=b.Event(a),a.currentTarget=k[0],this.close(a,!0))}})))},close:function(d,k){var e=this,f=b(d?d.currentTarget:this.element),a=this._find(f);this.closing||!k&&d&&"focusout"!==d.type&&this.document[0].activeElement===f[0]||(f.data("ui-tooltip-title")&&f.attr("title",f.data("ui-tooltip-title")),m(f),a.stop(!0),this._hide(a,this.options.hide,function(){b(this).remove();delete e.tooltips[this.id]}),f.removeData("tooltip-open"),
this._off(f,"mouseleave focusout keyup"),this._off(this.document,"mousemove"),this.closing=!0,this._trigger("close",d,{tooltip:a}),this.closing=!1)},_tooltip:function(d){var k="ui-tooltip-"+f++,e=b("<div>").attr({id:k,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));b("<div>").addClass("ui-tooltip-content").appendTo(e);e.appendTo(this.document[0].body);b.fn.bgiframe&&e.bgiframe();this.tooltips[k]=d;return e},_find:function(d){return(d=
d.data("ui-tooltip-id"))?b("#"+d):b()},_destroy:function(){var d=this;b.each(this.tooltips,function(k,e){var f=b.Event("blur");f.target=f.currentTarget=e[0];d.close(f,!0);b("#"+k).remove();e.data("ui-tooltip-title")&&(e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))})}})})(l);l.effects||function(b,p){var m=!1!==b.uiBackCompat;b.effects={effect:{}};(function(f,d){function k(a,c,b){var d=l[c.type]||{};if(null==a)return b||!c.def?null:c.def;a=d.floor?~~a:parseFloat(a);return isNaN(a)?
c.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a}function e(a){var b=g(),d=b._rgba=[];a=a.toLowerCase();C(c,function(c,g){var e,k=g.re.exec(a);e=k&&g.parse(k);k=g.space||"rgba";if(e)return e=b[k](e),b[m[k].cache]=e[m[k].cache],d=b._rgba=e._rgba,!1});return d.length?("0,0,0,0"===d.join()&&f.extend(d,y.transparent),b):y[a]}function n(a,c,b){b=(b+1)%1;return 1>6*b?a+(c-a)*b*6:1>2*b?c:2>3*b?a+(c-a)*(2/3-b)*6:a}var a=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],g=f.Color=function(a,c,b,d){return new f.Color.fn.parse(a,c,b,d)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=g.support={},A=f("<p>")[0],y,C=f.each;A.style.cssText="background-color:rgba(1,1,1,.5)";
p.rgba=-1<A.style.backgroundColor.indexOf("rgba");C(m,function(a,c){c.cache="_"+a;c.props.alpha={idx:3,type:"percent",def:1}});g.fn=f.extend(g.prototype,{parse:function(a,c,n,l){if(a===d)return this._rgba=[null,null,null,null],this;if(a.jquery||a.nodeType)a=f(a).css(c),c=d;var p=this,u=f.type(a),z=this._rgba=[];c!==d&&(a=[a,c,n,l],u="array");if("string"===u)return this.parse(e(a)||y._default);if("array"===u)return C(m.rgba.props,function(c,b){z[b.idx]=k(a[b.idx],b)}),this;if("object"===u)return a instanceof
g?C(m,function(c,b){a[b.cache]&&(p[b.cache]=a[b.cache].slice())}):C(m,function(c,d){var g=d.cache;C(d.props,function(c,b){if(!p[g]&&d.to){if("alpha"===c||null==a[c])return;p[g]=d.to(p._rgba)}p[g][b.idx]=k(a[c],b,!0)});p[g]&&0>b.inArray(null,p[g].slice(0,3))&&(p[g][3]=1,d.from&&(p._rgba=d.from(p[g])))}),this},is:function(a){var c=g(a),b=!0,d=this;C(m,function(a,g){var e,k=c[g.cache];k&&(e=d[g.cache]||g.to&&g.to(d._rgba)||[],C(g.props,function(a,c){if(null!=k[c.idx])return b=k[c.idx]===e[c.idx]}));
return b});return b},_space:function(){var a=[],c=this;C(m,function(b,d){c[d.cache]&&a.push(b)});return a.pop()},transition:function(a,c){var b=g(a),d=b._space(),e=m[d],f=0===this.alpha()?g("transparent"):this,n=f[e.cache]||e.to(f._rgba),p=n.slice(),b=b[e.cache];C(e.props,function(a,d){var g=d.idx,e=n[g],f=b[g],m=l[d.type]||{};null!==f&&(null===e?p[g]=f:(m.mod&&(f-e>m.mod/2?e+=m.mod:e-f>m.mod/2&&(e-=m.mod)),p[g]=k((f-e)*c+e,d)))});return this[d](p)},blend:function(a){if(1===this._rgba[3])return this;
var c=this._rgba.slice(),b=c.pop(),d=g(a)._rgba;return g(f.map(c,function(a,c){return(1-b)*d[c]+b*a}))},toRgbaString:function(){var a="rgba(",c=f.map(this._rgba,function(a,c){return null==a?2<c?1:0:a});1===c[3]&&(c.pop(),a="rgb(");return a+c.join()+")"},toHslaString:function(){var a="hsla(",c=f.map(this.hsla(),function(a,c){null==a&&(a=2<c?1:0);c&&3>c&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),a="hsl(");return a+c.join()+")"},toHexString:function(a){var c=this._rgba.slice(),b=c.pop();
a&&c.push(~~(255*b));return"#"+f.map(c,function(a,c){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});g.fn.parse.prototype=g.fn;m.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var c=a[0]/255,b=a[1]/255,d=a[2]/255;a=a[3];var g=Math.max(c,b,d),e=Math.min(c,b,d),k=g-e,f=g+e,n=0.5*f,f=0===n||1===n?n:0.5>=n?k/f:k/(2-f);return[Math.round(e===g?0:c===g?60*(b-d)/k+360:b===
g?60*(d-c)/k+120:60*(c-b)/k+240)%360,f,n,null==a?1:a]};m.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var c=a[0]/360,b=a[1],d=a[2];a=a[3];b=0.5>=d?d*(1+b):d+b-d*b;d=2*d-b;return[Math.round(255*n(d,b,c+1/3)),Math.round(255*n(d,b,c)),Math.round(255*n(d,b,c-1/3)),a]};C(m,function(c,b){var e=b.props,n=b.cache,m=b.to,l=b.from;g.fn[c]=function(a){m&&!this[n]&&(this[n]=m(this._rgba));if(a===d)return this[n].slice();var c,b=f.type(a),v="array"===b||"object"===b?
a:arguments,p=this[n].slice();C(e,function(a,c){var d=v["object"===b?a:c.idx];null==d&&(d=p[c.idx]);p[c.idx]=k(d,c)});return l?(c=g(l(p)),c[n]=p,c):g(p)};C(e,function(b,d){g.fn[b]||(g.fn[b]=function(g){var e=f.type(g),k="alpha"===b?this._hsla?"hsla":"rgba":c,n=this[k](),m=n[d.idx];if("undefined"===e)return m;"function"===e&&(g=g.call(this,m),e=f.type(g));if(null==g&&d.empty)return this;"string"===e&&(e=a.exec(g))&&(g=m+parseFloat(e[2])*("+"===e[1]?1:-1));n[d.idx]=g;return this[k](n)})})});C("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),
function(a,c){f.cssHooks[c]={set:function(a,b){var d,k="";if("string"!==f.type(b)||(d=e(b))){b=g(d||b);if(!p.rgba&&1!==b._rgba[3]){for(d="backgroundColor"===c?a.parentNode:a;(""===k||"transparent"===k)&&d&&d.style;)try{k=f.css(d,"backgroundColor"),d=d.parentNode}catch(n){}b=b.blend(k&&"transparent"!==k?k:"_default")}b=b.toRgbaString()}try{a.style[c]=b}catch(m){}}};f.fx.step[c]=function(a){a.colorInit||(a.start=g(a.elem,c),a.end=g(a.end),a.colorInit=!0);f.cssHooks[c].set(a.elem,a.start.transition(a.end,
a.pos))}});f.cssHooks.borderColor={expand:function(a){var c={};C(["Top","Right","Bottom","Left"],function(b,d){c["border"+d+"Color"]=a});return c}};y=f.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(l);(function(){function f(){var d=
this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,k={},a,c;if(d&&d.length&&d[0]&&d[d[0]])for(c=d.length;c--;)a=d[c],"string"===typeof d[a]&&(k[b.camelCase(a)]=d[a]);else for(a in d)"string"===typeof d[a]&&(k[a]=d[a]);return k}var d=["add","remove","toggle"],k={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};b.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],
function(d,k){b.fx.step[k]=function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)l.style(a.elem,k,a.end),a.setAttr=!0}});b.effects.animateClass=function(e,n,a,c){var g=b.speed(n,a,c);return this.queue(function(){var a=b(this),c=a.attr("class")||"",n,m=g.children?a.find("*").andSelf():a,m=m.map(function(){return{el:b(this),start:f.call(this)}});n=function(){b.each(d,function(c,b){if(e[b])a[b+"Class"](e[b])})};n();m=m.map(function(){this.end=f.call(this.el[0]);var a=this.start,c=this.end,
d={},g,e;for(g in c)e=c[g],a[g]===e||k[g]||!b.fx.step[g]&&isNaN(parseFloat(e))||(d[g]=e);this.diff=d;return this});a.attr("class",c);m=m.map(function(){var a=this,c=b.Deferred(),d=l.extend({},g,{queue:!1,complete:function(){c.resolve(a)}});this.el.animate(this.diff,d);return c.promise()});b.when.apply(b,m.get()).done(function(){n();b.each(arguments,function(){var a=this.el;b.each(this.diff,function(c){a.css(c,"")})});g.complete.call(a[0])})})};b.fn.extend({_addClass:b.fn.addClass,addClass:function(d,
k,a,c){return k?b.effects.animateClass.call(this,{add:d},k,a,c):this._addClass(d)},_removeClass:b.fn.removeClass,removeClass:function(d,k,a,c){return k?b.effects.animateClass.call(this,{remove:d},k,a,c):this._removeClass(d)},_toggleClass:b.fn.toggleClass,toggleClass:function(d,k,a,c,g){return"boolean"===typeof k||k===p?a?b.effects.animateClass.call(this,k?{add:d}:{remove:d},a,c,g):this._toggleClass(d,k):b.effects.animateClass.call(this,{toggle:d},k,a,c)},switchClass:function(d,k,a,c,g){return b.effects.animateClass.call(this,
{add:k,remove:d},a,c,g)}})})();(function(){function f(d,e,f,a){b.isPlainObject(d)&&(e=d,d=d.effect);d={effect:d};e===p&&(e={});b.isFunction(e)&&(a=e,f=null,e={});if("number"===typeof e||b.fx.speeds[e])a=f,f=e,e={};b.isFunction(f)&&(a=f,f=null);e&&b.extend(d,e);f=f||e.duration;d.duration=b.fx.off?0:"number"===typeof f?f:f in b.fx.speeds?b.fx.speeds[f]:b.fx.speeds._default;d.complete=a||e.complete;return d}function d(d){return!d||"number"===typeof d||b.fx.speeds[d]?!0:"string"!==typeof d||b.effects.effect[d]?
!1:m&&b.effects[d]?!1:!0}b.extend(b.effects,{version:"1.9.0",save:function(b,d){for(var f=0;f<d.length;f++)null!==d[f]&&b.data("ui-effects-"+d[f],b[0].style[d[f]])},restore:function(b,d){var f,a;for(a=0;a<d.length;a++)null!==d[a]&&(f=b.data("ui-effects-"+d[a]),f===p&&(f=""),b.css(d[a],f))},setMode:function(b,d){"toggle"===d&&(d=b.is(":hidden")?"show":"hide");return d},getBaseline:function(b,d){var f,a;switch(b[0]){case "top":f=0;break;case "middle":f=0.5;break;case "bottom":f=1;break;default:f=b[0]/
d.height}switch(b[1]){case "left":a=0;break;case "center":a=0.5;break;case "right":a=1;break;default:a=b[1]/d.width}return{x:a,y:f}},createWrapper:function(d){if(d.parent().is(".ui-effects-wrapper"))return d.parent();var e={width:d.outerWidth(!0),height:d.outerHeight(!0),"float":d.css("float")},f=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:d.width(),height:d.height()},c=document.activeElement;try{c.id}catch(g){c=
document.body}d.wrap(f);(d[0]===c||b.contains(d[0],c))&&b(c).focus();f=d.parent();"static"===d.css("position")?(f.css({position:"relative"}),d.css({position:"relative"})):(b.extend(e,{position:d.css("position"),zIndex:d.css("z-index")}),b.each(["top","left","bottom","right"],function(a,c){e[c]=d.css(c);isNaN(parseInt(e[c],10))&&(e[c]="auto")}),d.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));d.css(a);return f.css(e).show()},removeWrapper:function(d){var e=document.activeElement;
d.parent().is(".ui-effects-wrapper")&&(d.parent().replaceWith(d),(d[0]===e||b.contains(d[0],e))&&b(e).focus());return d},setTransition:function(d,e,f,a){a=a||{};b.each(e,function(c,b){var e=d.cssUnit(b);0<e[0]&&(a[b]=e[0]*f+e[1])});return a}});b.fn.extend({effect:function(d,e,n,a){function c(a){function c(){b.isFunction(e)&&e.call(d[0]);b.isFunction(a)&&a()}var d=b(this),e=g.complete,k=g.mode;(d.is(":hidden")?"hide"===k:"show"===k)?c():z.call(d[0],g,c)}var g=f.apply(this,arguments),l=g.mode,p=g.queue,
z=b.effects.effect[g.effect],A=!z&&m&&b.effects[g.effect];return b.fx.off||!z&&!A?l?this[l](g.duration,g.complete):this.each(function(){g.complete&&g.complete.call(this)}):z?!1===p?this.each(c):this.queue(p||"fx",c):A.call(this,{options:g,duration:g.duration,callback:g.complete,mode:g.mode})},_show:b.fn.show,show:function(b){if(d(b))return this._show.apply(this,arguments);var e=f.apply(this,arguments);e.mode="show";return this.effect.call(this,e)},_hide:b.fn.hide,hide:function(b){if(d(b))return this._hide.apply(this,
arguments);var e=f.apply(this,arguments);e.mode="hide";return this.effect.call(this,e)},__toggle:b.fn.toggle,toggle:function(k){if(d(k)||"boolean"===typeof k||b.isFunction(k))return this.__toggle.apply(this,arguments);var e=f.apply(this,arguments);e.mode="toggle";return this.effect.call(this,e)},cssUnit:function(d){var e=this.css(d),f=[];b.each(["em","px","%","pt"],function(a,c){0<e.indexOf(c)&&(f=[parseFloat(e),c])});return f}})})();(function(){var f={};b.each(["Quad","Cubic","Quart","Quint","Expo"],
function(b,k){f[k]=function(e){return Math.pow(e,b+2)}});b.extend(f,{Sine:function(b){return 1-Math.cos(b*Math.PI/2)},Circ:function(b){return 1-Math.sqrt(1-b*b)},Elastic:function(b){return 0===b||1===b?b:-Math.pow(2,8*(b-1))*Math.sin((80*(b-1)-7.5)*Math.PI/15)},Back:function(b){return b*b*(3*b-2)},Bounce:function(b){for(var k,e=4;b<((k=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*k-2)/22-b,2)}});b.each(f,function(d,k){b.easing["easeIn"+d]=k;b.easing["easeOut"+d]=function(b){return 1-
k(1-b)};b.easing["easeInOut"+d]=function(b){return 0.5>b?k(2*b)/2:1-k(-2*b+2)/2}})})()}(l);(function(b,l){var m=/up|down|vertical/,f=/up|left|vertical|horizontal/;b.effects.effect.blind=function(d,k){var e=b(this),n="position top bottom left right height width".split(" "),a=b.effects.setMode(e,d.mode||"hide"),c=d.direction||"up",g=m.test(c),l=g?"height":"width",p=g?"top":"left",c=f.test(c),z={},A="show"===a,y,C,q;e.parent().is(".ui-effects-wrapper")?b.effects.save(e.parent(),n):b.effects.save(e,n);
e.show();y=b.effects.createWrapper(e).css({overflow:"hidden"});C=y[l]();q=parseFloat(y.css(p))||0;z[l]=A?C:0;c||(e.css(g?"bottom":"right",0).css(g?"top":"left","auto").css({position:"absolute"}),z[p]=A?q:C+q);A&&(y.css(l,0),c||y.css(p,q+C));y.animate(z,{duration:d.duration,easing:d.easing,queue:!1,complete:function(){"hide"===a&&e.hide();b.effects.restore(e,n);b.effects.removeWrapper(e);k()}})}})(l);(function(b,l){b.effects.effect.bounce=function(m,f){var d=b(this),k="position top bottom left right height width".split(" "),
e=b.effects.setMode(d,m.mode||"effect"),n="hide"===e,a="show"===e,c=m.direction||"up",e=m.distance,g=m.times||5,l=2*g+(a||n?1:0),p=m.duration/l,z=m.easing,A="up"===c||"down"===c?"top":"left",c="up"===c||"left"===c,y,C,q=d.queue(),B=q.length;(a||n)&&k.push("opacity");b.effects.save(d,k);d.show();b.effects.createWrapper(d);e||(e=d["top"===A?"outerHeight":"outerWidth"]()/3);a&&(C={opacity:1},C[A]=0,d.css("opacity",0).css(A,c?2*-e:2*e).animate(C,p,z));n&&(e/=Math.pow(2,g-1));C={};for(a=C[A]=0;a<g;a++)y=
{},y[A]=(c?"-=":"+=")+e,d.animate(y,p,z).animate(C,p,z),e=n?2*e:e/2;n&&(y={opacity:0},y[A]=(c?"-=":"+=")+e,d.animate(y,p,z));d.queue(function(){n&&d.hide();b.effects.restore(d,k);b.effects.removeWrapper(d);f()});1<B&&q.splice.apply(q,[1,0].concat(q.splice(B,l+1)));d.dequeue()}})(l);(function(b,l){b.effects.effect.clip=function(m,f){var d=b(this),k="position top bottom left right height width".split(" "),e="show"===b.effects.setMode(d,m.mode||"hide"),n="vertical"===(m.direction||"vertical"),a=n?"height":
"width",n=n?"top":"left",c={},g,l;b.effects.save(d,k);d.show();g=b.effects.createWrapper(d).css({overflow:"hidden"});g="IMG"===d[0].tagName?g:d;l=g[a]();e&&(g.css(a,0),g.css(n,l/2));c[a]=e?l:0;c[n]=e?0:l/2;g.animate(c,{queue:!1,duration:m.duration,easing:m.easing,complete:function(){e||d.hide();b.effects.restore(d,k);b.effects.removeWrapper(d);f()}})}})(l);(function(b,l){b.effects.effect.drop=function(m,f){var d=b(this),k="position top bottom left right opacity height width".split(" "),e=b.effects.setMode(d,
m.mode||"hide"),n="show"===e,a=m.direction||"left",c="up"===a||"down"===a?"top":"left",a="up"===a||"left"===a?"pos":"neg",g={opacity:n?1:0},l;b.effects.save(d,k);d.show();b.effects.createWrapper(d);l=m.distance||d["top"===c?"outerHeight":"outerWidth"](!0)/2;n&&d.css("opacity",0).css(c,"pos"===a?-l:l);g[c]=(n?"pos"===a?"+=":"-=":"pos"===a?"-=":"+=")+l;d.animate(g,{queue:!1,duration:m.duration,easing:m.easing,complete:function(){"hide"===e&&d.hide();b.effects.restore(d,k);b.effects.removeWrapper(d);
f()}})}})(l);(function(b,l){b.effects.effect.explode=function(m,f){function d(){p.push(this);p.length===k*e&&(n.css({visibility:"visible"}),b(p).remove(),a||n.hide(),f())}var k=m.pieces?Math.round(Math.sqrt(m.pieces)):3,e=k,n=b(this),a="show"===b.effects.setMode(n,m.mode||"hide"),c=n.show().css("visibility","hidden").offset(),g=Math.ceil(n.outerWidth()/e),l=Math.ceil(n.outerHeight()/k),p=[],z,A,y,C,q,B;for(z=0;z<k;z++)for(C=c.top+z*l,B=z-(k-1)/2,A=0;A<e;A++)y=c.left+A*g,q=A-(e-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-A*g,top:-z*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:l,left:y+(a?q*g:0),top:C+(a?B*l:0),opacity:a?0:1}).animate({left:y+(a?0:q*g),top:C+(a?0:B*l),opacity:a?1:0},m.duration||500,m.easing,d)}})(l);(function(b,l){b.effects.effect.fade=function(m,f){var d=b(this),k=b.effects.setMode(d,m.mode||"toggle");d.animate({opacity:k},{queue:!1,duration:m.duration,easing:m.easing,complete:f})}})(l);(function(b,l){b.effects.effect.fold=
function(m,f){var d=b(this),k="position top bottom left right height width".split(" "),e=b.effects.setMode(d,m.mode||"hide"),n="show"===e,a="hide"===e,e=m.size||15,c=/([0-9]+)%/.exec(e),g=!!m.horizFirst,l=n!==g,p=l?["width","height"]:["height","width"],z=m.duration/2,A,y={},C={};b.effects.save(d,k);d.show();A=b.effects.createWrapper(d).css({overflow:"hidden"});l=l?[A.width(),A.height()]:[A.height(),A.width()];c&&(e=parseInt(c[1],10)/100*l[a?0:1]);n&&A.css(g?{height:0,width:e}:{height:e,width:0});
y[p[0]]=n?l[0]:e;C[p[1]]=n?l[1]:0;A.animate(y,z,m.easing).animate(C,z,m.easing,function(){a&&d.hide();b.effects.restore(d,k);b.effects.removeWrapper(d);f()})}})(l);(function(b,l){b.effects.effect.highlight=function(m,f){var d=b(this),k=["backgroundImage","backgroundColor","opacity"],e=b.effects.setMode(d,m.mode||"show"),n={backgroundColor:d.css("backgroundColor")};"hide"===e&&(n.opacity=0);b.effects.save(d,k);d.show().css({backgroundImage:"none",backgroundColor:m.color||"#ffff99"}).animate(n,{queue:!1,
duration:m.duration,easing:m.easing,complete:function(){"hide"===e&&d.hide();b.effects.restore(d,k);f()}})}})(l);(function(b,l){b.effects.effect.pulsate=function(m,f){var d=b(this),k=b.effects.setMode(d,m.mode||"show"),e="show"===k,n="hide"===k,k=2*(m.times||5)+(e||"hide"===k?1:0),a=m.duration/k,c=0,g=d.queue(),l=g.length;if(e||!d.is(":visible"))d.css("opacity",0).show(),c=1;for(e=1;e<k;e++)d.animate({opacity:c},a,m.easing),c=1-c;d.animate({opacity:c},a,m.easing);d.queue(function(){n&&d.hide();f()});
1<l&&g.splice.apply(g,[1,0].concat(g.splice(l,k+1)));d.dequeue()}})(l);(function(b,l){b.effects.effect.puff=function(m,f){var d=b(this),k=b.effects.setMode(d,m.mode||"hide"),e="hide"===k,n=parseInt(m.percent,10)||150,a=n/100,c={height:d.height(),width:d.width()};b.extend(m,{effect:"scale",queue:!1,fade:!0,mode:k,complete:f,percent:e?n:100,from:e?c:{height:c.height*a,width:c.width*a}});d.effect(m)};b.effects.effect.scale=function(m,f){var d=b(this),k=b.extend(!0,{},m),e=b.effects.setMode(d,m.mode||
"effect"),n=parseInt(m.percent,10)||(0===parseInt(m.percent,10)?0:"hide"===e?0:100),a=m.direction||"both",c=m.origin,g={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},l="horizontal"!==a?n/100:1,n="vertical"!==a?n/100:1;k.effect="size";k.queue=!1;k.complete=f;"effect"!==e&&(k.origin=c||["middle","center"],k.restore=!0);k.from=m.from||("show"===e?{height:0,width:0}:g);k.to={height:g.height*l,width:g.width*n,outerHeight:g.outerHeight*l,outerWidth:g.outerWidth*
n};k.fade&&("show"===e&&(k.from.opacity=0,k.to.opacity=1),"hide"===e&&(k.from.opacity=1,k.to.opacity=0));d.effect(k)};b.effects.effect.size=function(m,f){var d,k,e,n,a=b(this),c="position top bottom left right width height overflow opacity".split(" "),g="position top bottom left right overflow opacity".split(" "),l=["width","height","overflow"],p=["fontSize"],z=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],A=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
y=b.effects.setMode(a,m.mode||"effect"),C=m.restore||"effect"!==y,q=m.scale||"both",B=m.origin||["middle","center"],s,r=a.css("position");"show"===y&&a.show();s={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()};a.from=m.from||s;a.to=m.to||s;e=a.from.height/s.height;n=a.from.width/s.width;d=a.to.height/s.height;k=a.to.width/s.width;if("box"===q||"both"===q)e!==d&&(c=c.concat(z),a.from=b.effects.setTransition(a,z,e,a.from),a.to=b.effects.setTransition(a,z,d,a.to)),
n!==k&&(c=c.concat(A),a.from=b.effects.setTransition(a,A,n,a.from),a.to=b.effects.setTransition(a,A,k,a.to));"content"!==q&&"both"!==q||e===d||(c=c.concat(p),a.from=b.effects.setTransition(a,p,e,a.from),a.to=b.effects.setTransition(a,p,d,a.to));b.effects.save(a,C?c:g);a.show();b.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);B&&(B=b.effects.getBaseline(B,s),a.from.top=(s.outerHeight-a.outerHeight())*B.y,a.from.left=(s.outerWidth-a.outerWidth())*B.x,a.to.top=(s.outerHeight-a.to.outerHeight)*
B.y,a.to.left=(s.outerWidth-a.to.outerWidth)*B.x);a.css(a.from);if("content"===q||"both"===q)z=z.concat(["marginTop","marginBottom"]).concat(p),A=A.concat(["marginLeft","marginRight"]),l=c.concat(z).concat(A),a.find("*[width]").each(function(){var a=b(this),c=a.height(),g=a.width();C&&b.effects.save(a,l);a.from={height:c*e,width:g*n};a.to={height:c*d,width:g*k};e!==d&&(a.from=b.effects.setTransition(a,z,e,a.from),a.to=b.effects.setTransition(a,z,d,a.to));n!==k&&(a.from=b.effects.setTransition(a,A,
n,a.from),a.to=b.effects.setTransition(a,A,k,a.to));a.css(a.from);a.animate(a.to,m.duration,m.easing,function(){C&&b.effects.restore(a,l)})});a.animate(a.to,{queue:!1,duration:m.duration,easing:m.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity);"hide"===y&&a.hide();b.effects.restore(a,C?c:g);C||("static"===r?a.css({position:"relative",top:a.to.top,left:a.to.left}):b.each(["top","left"],function(c,b){a.css(b,function(b,d){var g=parseInt(d,10),e=c?a.to.left:a.to.top;return"auto"===
d?e+"px":g+e+"px"})}));b.effects.removeWrapper(a);f()}})}})(l);(function(b,l){b.effects.effect.shake=function(m,f){var d=b(this),k="position top bottom left right height width".split(" "),e=b.effects.setMode(d,m.mode||"effect"),n=m.direction||"left",a=m.distance||20,c=m.times||3,g=2*c+1,l=Math.round(m.duration/g),p="up"===n||"down"===n?"top":"left",z="up"===n||"left"===n,n={},A={},y={},C=d.queue(),q=C.length;b.effects.save(d,k);d.show();b.effects.createWrapper(d);n[p]=(z?"-=":"+=")+a;A[p]=(z?"+=":
"-=")+2*a;y[p]=(z?"-=":"+=")+2*a;d.animate(n,l,m.easing);for(a=1;a<c;a++)d.animate(A,l,m.easing).animate(y,l,m.easing);d.animate(A,l,m.easing).animate(n,l/2,m.easing).queue(function(){"hide"===e&&d.hide();b.effects.restore(d,k);b.effects.removeWrapper(d);f()});1<q&&C.splice.apply(C,[1,0].concat(C.splice(q,g+1)));d.dequeue()}})(l);(function(b,l){b.effects.effect.slide=function(m,f){var d=b(this),k="position top bottom left right width height".split(" "),e=b.effects.setMode(d,m.mode||"show"),n="show"===
e,a=m.direction||"left",c="up"===a||"down"===a?"top":"left",a="up"===a||"left"===a,g,l={};b.effects.save(d,k);d.show();g=m.distance||d["top"===c?"outerHeight":"outerWidth"](!0);b.effects.createWrapper(d).css({overflow:"hidden"});n&&d.css(c,a?isNaN(g)?"-"+g:-g:g);l[c]=(n?a?"+=":"-=":a?"-=":"+=")+g;d.animate(l,{queue:!1,duration:m.duration,easing:m.easing,complete:function(){"hide"===e&&d.hide();b.effects.restore(d,k);b.effects.removeWrapper(d);f()}})}})(l);(function(b,l){b.effects.effect.transfer=
function(m,f){var d=b(this),k=b(m.to),e="fixed"===k.css("position"),n=b("body"),a=e?n.scrollTop():0,n=e?n.scrollLeft():0,c=k.offset(),k={top:c.top-a,left:c.left-n,height:k.innerHeight(),width:k.innerWidth()},c=d.offset(),g=b('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(m.className).css({top:c.top-a,left:c.left-n,height:d.innerHeight(),width:d.innerWidth(),position:e?"fixed":"absolute"}).animate(k,m.duration,m.easing,function(){g.remove();f()})}})(l)});define("ui/tab",
"aloha/core jquery ui/container ui/component PubSub jqueryui".split(" "),function(l,b,p,m,f){var d=0,k={};l=p.extend({_elemBySlot:null,_groupBySlot:null,_groupByComponent:null,_constructor:function(e,k,a){var c,g,f,m,l;this._elemBySlot={};this._groupBySlot={};this._groupByComponent={};this._slotsList=[];this._super(e,k);this.container=k.container;this.list=this.container.data("list");this.panels=this.container.data("panels");this.id="tab-ui-container-"+ ++d;this.panel=b("<div>",{id:this.id,unselectable:"on"});
this.handle=b('<li><a href="'+location.href.replace(/#.*$/,"")+"#"+this.id+'">'+k.label+"</a></li>");for(e=0;e<a.length;e++)if("string"===typeof a[e])1===a[e].length&&10===a[e].charCodeAt(0)?this.panel.append("<div>",{unselectable:"on"}):(g=b("<span>",{unselectable:"on"}),this._elemBySlot[a[e]]=g,this.panel.append(g));else for(m=b("<div>",{"class":"aloha-ui-component-group aloha-ui-hidden",unselectable:"on"}).appendTo(this.panel),l={element:m,visibleCounter:0},f=a[e],c=0;c<f.length;c++)this._groupBySlot[f[c]]=
l,f[c]&&1===f[c].length&&10===f[c].charCodeAt(0)?m.append(b("<div>",{unselectable:"on"})):(g=b("<span>",{unselectable:"on"}),this._elemBySlot[f[c]]=g,m.append(g));this.panel.append(b("<div>",{"class":"aloha-ui-clear",unselectable:"on"}));this.handle.appendTo(this.list);this.panel.appendTo(this.panels);this.container.tabs("refresh");k=k.container.data("aloha-tabs");this.index=k.length;k.push(this)},adoptInto:function(b,d){var a=this._elemBySlot[b];if(!a)return!1;k[b]=d;d.adoptParent(this);a.append(d.element);
a=this._groupBySlot[b];this._slotsList.push(b);a&&(this._groupByComponent[d.id]=a,d.isVisible()&&(a.visibleCounter||a.element.removeClass("aloha-ui-hidden"),a.visibleCounter+=1));return!0},foreground:function(){this.container.tabs("select",this.index)},childForeground:function(b){this.foreground()},hasVisibleComponents:function(){var b=this._elemBySlot,d;for(d in b)if(b.hasOwnProperty(d)&&k[d]&&k[d].visible)return!0;return!1},childVisible:function(b,d){d?b.container.show():b.container.hasVisibleComponents()||
b.container.hide();var a=this._groupByComponent[b.id];a&&(d?(0===a.visibleCounter&&a.element.removeClass("aloha-ui-hidden"),a.visibleCounter+=1):(a.visibleCounter-=1,0===a.visibleCounter&&a.element.addClass("aloha-ui-hidden")))},show:function(){var d;(d=!this.list.children().length)||(d=!1,0!==b("button:not(.aloha-multisplit-toggle)",this.panel).length&&(d=!0),d=!d);d||(this.handle.show(),this.visible=!0,this.container.show(),this.container.find(".ui-tabs-active").length&&this.container.tabs("option",
"selected")!==this.index||this.foreground())},hide:function(){var b=this.list.children();if(0!==b.length&&(this.handle.hide(),this.visible=!1,this.index===this.container.tabs("option","selected"))){var b=this.container.data("aloha-tabs"),d;for(d=0;d<b.length;++d)if(b[d].visible){this.container.tabs("select",d);return}this.handle.removeClass("ui-tabs-active");this.container.hide()}}});b.extend(l,{createContainer:function(){var d=b("<div>",{unselectable:"on"}),k=b("<ul>",{unselectable:"on"}).appendTo(d),
a=b("<div>",{unselectable:"on"}).appendTo(d);d.data("list",k).data("panels",a).data("aloha-tabs",[]).tabs({select:function(a,b){var k=d.data("aloha-tabs");d.data("aloha-active-container",k[b.index]);f.pub("aloha.ui.container.selected",{data:k[b.index]})}});return d}});return l});define("ui/subguarded",["aloha/core","jquery","PubSub"],function(l,b,p){function m(a){a.alohaUid||(a.alohaUid=++e);return a.alohaUid}function f(a,b){n[a.alohaUid]||(n[a.alohaUid]=[]);n[a.alohaUid].push(b);return n[a.alohaUid]}
function d(c,b){a[c]||(a[c]=[]);a[c].push(b);return a[c]}function k(c){var b=a[c]||[],d;for(d=0;d<b.length;d++)b[d].apply(null,[n[b[d].alohaUid]||[]].concat(arguments))}var e=0,n={},a={};return function(){var a=Array.prototype.slice.call(arguments),b=a.shift();"string"===typeof b&&(b=[b]);var e=a.shift();m(e);f(e,a);for(var n,z=function(a,c,b){k(n,a,c,b)},A=function(){k(n)},a=0;a<b.length;a++)n=b[a],d(n,e),l.bind(n,z),p.sub(n,A)}});define("vendor/amplify.store",["util/json2"],function(){var l={};
(function(b,l){function m(a,c){f.addType(a,function(b,e,k){var n,m=e,y=(new Date).getTime();if(!b){m={};k=[];e=0;try{for(b=c.length;b=c.key(e++);)d.test(b)&&(n=s.parse(c.getItem(b)),n.expires&&n.expires<=y?k.push(b):m[b.replace(d,"")]=n.data);for(;b=k.pop();)c.removeItem(b)}catch(C){}return m}b="__amplify__"+b;if(e===l)if(n=(n=c.getItem(b))?s.parse(n):{expires:-1},n.expires&&n.expires<=y)c.removeItem(b);else return n.data;else if(null===e)c.removeItem(b);else{n=s.stringify({data:e,expires:k.expires?
y+k.expires:null});try{c.setItem(b,n)}catch(q){f[a]();try{c.setItem(b,n)}catch(B){throw f.error();}}}return m})}var f=b.store=function(a,c,b,d){d=f.type;b&&b.type&&b.type in f.types&&(d=b.type);return f.types[d](a,c,b||{})};f.types={};f.type=null;f.addType=function(a,c){f.type||(f.type=a);f.types[a]=c;f[a]=function(c,b,d){d=d||{};d.type=a;return f(c,b,d)}};f.error=function(){return"amplify.store quota exceeded"};var d=/^__amplify__/,k;for(k in{localStorage:1,sessionStorage:1})try{window[k].getItem&&
m(k,window[k])}catch(e){}if(window.globalStorage)try{m("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===f.type&&(f.type="globalStorage")}catch(n){}(function(){if(!f.types.localStorage){var a=document.createElement("div");a.style.display="none";document.getElementsByTagName("head")[0].appendChild(a);try{a.addBehavior("#default#userdata"),a.load("amplify")}catch(c){a.parentNode.removeChild(a);return}f.addType("userData",function(c,b,d){a.load("amplify");var e,k,n=b,
m=(new Date).getTime();if(!c){n={};k=[];for(c=0;b=a.XMLDocument.documentElement.attributes[c++];)e=s.parse(b.value),e.expires&&e.expires<=m?k.push(b.name):n[b.name]=e.data;for(;c=k.pop();)a.removeAttribute(c);a.save("amplify");return n}c=c.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(b===l)if(e=(b=a.getAttribute(c))?s.parse(b):{expires:-1},e.expires&&e.expires<=m)a.removeAttribute(c);else return e.data;else null===b?a.removeAttribute(c):
(k=a.getAttribute(c),e=s.stringify({data:b,expires:d.expires?m+d.expires:null}),a.setAttribute(c,e));try{a.save("amplify")}catch(q){null===k?a.removeAttribute(c):a.setAttribute(c,k);f.userData();try{a.setAttribute(c,e),a.save("amplify")}catch(B){throw null===k?a.removeAttribute(c):a.setAttribute(c,k),f.error();}}return n})}})();(function(){function a(a){return a===l?l:s.parse(s.stringify(a))}var c={},b={};f.addType("memory",function(d,e,k){if(!d)return a(c);if(e===l)return a(c[d]);b[d]&&(clearTimeout(b[d]),
delete b[d]);if(null===e)return delete c[d],null;c[d]=e;k.expires&&(b[d]=setTimeout(function(){delete c[d];delete b[d]},k.expires));return e})})()})(l);return l});define("ui/floating","jquery aloha/core ui/surface ui/subguarded PubSub vendor/amplify.store util/browser".split(" "),function(l,b,p,m,f,d,k){function e(a,c,b,d){"absolute"===v&&(c.top+=g.scrollTop(),c.left+=g.scrollLeft());u.offset=c;a.stop().animate(c,b,function(){d(c);f.pub("aloha.floating.changed",{position:l.extend({},u)})})}function n(a){d.store("Aloha.FloatingMenu.pinned",
"true");d.store("Aloha.FloatingMenu.top",a.top);d.store("Aloha.FloatingMenu.left",a.left)}function a(a,c,b,d,g){for(c=0;c<a.length;c++)if(a[c][0].isActive())a[c][1](b,d,g)}function c(a){if(l.browser.msie){var c=a.$element.parent();a.$element.appendTo("body");a.$element.css("position",v);c.length?a.$element.appendTo(c):a.$element.detach()}else a.$element.css("position",v)}var g=l(window),v=k.ie7?"absolute":"fixed",u={style:v,offset:{top:0,left:0}};return{getPinState:function(){return"true"===d.store("Aloha.FloatingMenu.pinned")?
{top:parseInt(d.store("Aloha.FloatingMenu.top"),10),left:parseInt(d.store("Aloha.FloatingMenu.left"),10),isPinned:!0}:{top:null,left:null,isPinned:!1}},makeFloating:function(b,d){m(["aloha-selection-changed","aloha.ui.container.selected"],a,b,function(){b._move()});var e=function(){var a;a=d.pinLeft;var c=d.pinTop;0>c?c=0:c>g.height()&&(c=g.height()/2);0>a?a=0:a>g.width()&&(a=g.width()/2);a={top:c,left:a};d.setFloatingPosition(a);b.$element.css({top:a.top,left:a.left})};g.scroll(function(){b._move(0)});
g.resize(function(){d.isFloatingMode||e()});b.addPin();c(b);d.isFloatingMode||e();b.$element.css("z-index",10100).draggable({distance:20,stop:function(a,c){d.setFloatingPosition(c.position);d.isFloatingMode||n(c.position)}})},floatSurface:function(a,c,b,d){"number"!==typeof b&&(b=500);var k=(parseInt(l("body").css("marginTop"),10)||0)+(parseInt(l("body").css("paddingTop"),10)||0);a=a.$element;var f=c.obj.offset(),n=f.top,f=f.left,m=g.scrollTop(),v=n-m-k,p=f+a.width()-g.width();0<p&&(f=Math.max(0,
f-p));v>=a.height()?(c={top:n-m,left:f},c.top-=a.height()+10):(c=v+a.height()>v+c.obj.height()?{top:n+c.obj.height(),left:f}:{top:k,left:f},c.top+=10);e(a,c,b,d)},togglePinSurface:function(a,c,b){a=a.$element;b?(d.store("Aloha.FloatingMenu.pinned",null),d.store("Aloha.FloatingMenu.top",null),d.store("Aloha.FloatingMenu.left",null),a.find(".aloha-ui-pin").removeClass("aloha-ui-pin-down")):(n(c),a.find(".aloha-ui-pin").addClass("aloha-ui-pin-down"));a.css({position:"fixed",top:c.top})},POSITION_STYLE:v}});
(function(){function l(b,d,k,e,n,a){d[b]&&(k.push(b),!0!==d[b]&&1!==d[b]||e.push(n+b+"/"+a))}function b(b,d,k,e,n){d=e+d+"/"+n;require._fileExists(b.toUrl(d))&&k.push(d)}function p(b,d,k){for(var e in d)!d.hasOwnProperty(e)||b.hasOwnProperty(e)&&!k?"object"===typeof d[e]&&p(b[e],d[e],k):b[e]=d[e]}var m=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(f){var d=f.config();return{version:"2.0.1",load:function(k,e,f,a){a=a||{};a.locale&&(d.locale=a.locale);var c=m.exec(k),g=
c[1],v=c[4],u=c[5],z=v.split("-"),A=[],y={},C,q="";c[5]?(g=c[1],k=g+u):(u=c[4],v=d.locale,v||(v=d.locale="undefined"===typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),z=v.split("-"));if(a.isBuild){A.push(k);b(e,"root",A,g,u);for(C=0;C<z.length;C++)a=z[C],q+=(q?"-":"")+a,b(e,q,A,g,u);e(A,function(){f()})}else e([k],function(a){var c=[],b;l("root",a,c,A,g,u);for(C=0;C<z.length;C++)b=z[C],q+=(q?"-":"")+b,l(q,a,c,A,g,u);e(A,function(){var b,d,k;for(b=c.length-
1;-1<b&&c[b];b--){k=c[b];d=a[k];if(!0===d||1===d)d=e(g+k+"/"+u);p(y,d)}y.t=function(a,c){return this[a]?this[a]:c?c:a};f(y)})})}}})})();define("ui/nls/i18n",{root:{"button.dismiss.label":"Dismiss","button.bold.label":"Bold","button.italic.label":"Italic","button.strikethrough.label":"Strikethrough","button.subscript.label":"Subscript","button.superscript.label":"Superscript","button.underline.label":"Underline","button.yes.label":"Yes","button.no.label":"No","button.p.label":"Paragraph","button.h1.label":"Heading 1",
"button.h2.label":"Heading 2","button.h3.label":"Heading 3","button.h4.label":"Heading 4","button.h5.label":"Heading 5","button.h6.label":"Heading 6","button.pre.label":"Preformatted text","button.removeFormatting.label":"Remove formatting","button.ol.label":"Insert ordered list","button.ul.label":"Insert unordered list","button.indent.label":"Indent list","button.outdent.label":"Outdent list","button.createLink.label":"Insert link","button.removeLink.label":"Remove link","button.createAbbr.label":"Insert abbreviation",
"button.characterPicker.label":"Pick special characters","button.createLink.label":"Insert link","button.removeLink.label":"Remove link","button.createAbbr.label":"Insert abbreviation","button.characterPicker.label":"Pick special characters","button.justifyLeft.label":"Align to the left","button.justifyRight.label":"Align to the right","button.justifyCenter.label":"Center","button.justifyFull.label":"Justify","button.horizontalRule.label":"Insert horizontal rule","button.createLanguageAnnotation.label":"Insert language annotation",
"button.metaview.label":"Switch between meta and normal view","button.quote.label":"Format selection as quote","button.blockquote.label":"Format selection as blockquote","tab.format.label":"Format","tab.insert.label":"Insert","tab.abbr.label":"Abbreviation","tab.img.label":"Image","tab.link.label":"Link","tab.list.label":"List","tab.table.label":"Table","tab.col.label":"Table Column","tab.row.label":"Table Row","tab.cell.label":"Table Cell","tab.wai-lang.label":"Language annotation"},ca:!0,de:!0,
mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("ui/toolbar","jquery aloha/core ui/surface ui/tab ui/floating ui/context i18n!ui/nls/i18n jqueryui".split(" "),function(l,b,p,m,f,d,k){function e(){return!b.settings||!b.settings.toolbar||!1!==b.settings.toolbar.floating}var n=p.extend({_moveTimeout:null,$_container:null,_tabBySlot:null,_tabs:[],_constructor:function(a,c){var b,d,p,z;this._super(a);this.$element=l("<div>",{"class":"aloha-ui aloha-ui-toolbar",unselectable:"on"});this.$_container=m.createContainer().appendTo(this.$element);
this._tabBySlot={};for(p=0;p<c.length;p++){b=c[p];d=new m(a,{label:k.t(b.label,b.label),showOn:b.showOn,container:this.$_container},b.components);for(z in d._elemBySlot)d._elemBySlot.hasOwnProperty(z)&&(this._tabBySlot[z]=d);this._tabs.push({tab:d,settings:b})}e()&&f.makeFloating(this,n)},adoptInto:function(a,c){var b=this._tabBySlot[a];return b&&b.adoptInto(a,c)},getActiveContainer:function(){return this.$_container.data("aloha-active-container")},getContainers:function(){return this.$_container.data("aloha-tabs")},
_move:function(a){var c=this;c._moveTimeout&&clearTimeout(c._moveTimeout);c._moveTimeout=setTimeout(function(){c._moveTimeout=null;b.activeEditable&&n.isFloatingMode&&f.floatSurface(c,b.activeEditable,a,n.setFloatingPosition)},20)},addPin:function(){var a=l('<div class="aloha-ui-pin">'),c=this.$element;c.find(".ui-tabs").append(a);c.find(".ui-tabs").hover(function(){c.addClass("aloha-ui-hover")},function(){c.removeClass("aloha-ui-hover")});n.isFloatingMode||a.addClass("aloha-ui-pin-down");var b=this;
a.click(function(){n.isFloatingMode=!n.isFloatingMode;var a;n.isFloatingMode?a={top:n.pinTop,left:n.pinLeft}:(a=b.$element.offset(),a.top-=l(window).scrollTop());n.setFloatingPosition(a);f.togglePinSurface(b,a,n.isFloatingMode)})},show:function(){n.$surfaceContainer.children().detach();n.$surfaceContainer.append(this.$element);n.$surfaceContainer.stop().fadeTo(200,1);if(e()){var a=n.getFloatingPosition();this.$element.stop().css({top:a.top,left:a.left});this._move()}},hide:function(){n.$surfaceContainer.stop().fadeOut(200,
function(){n.$surfaceContainer.children().detach()})}});l.extend(n,{$surfaceContainer:null,isFloatingMode:!0,pinLeft:0,pinTop:0,init:function(){n.$surfaceContainer=l("<div>",{"class":"aloha aloha-surface aloha-toolbar",unselectable:"on"}).hide();l(function(){n.$surfaceContainer.appendTo("body")});p.trackRange(n.$surfaceContainer);var a=f.getPinState();n.pinTop=a.top;n.pinLeft=a.left;n.isFloatingMode=!a.isPinned},setFloatingPosition:function(a){n.pinTop=a.top;n.pinLeft=a.left},getFloatingPosition:function(){return{top:n.pinTop,
left:n.pinLeft}}});n.init();return n});define("ui/settings",["jquery","util/arrays","util/maps","util/trees"],function(l,b,p,m){function f(b,d,a){var c,g,k=[],f;for(c=0;c<b.length;c++)if(g=b[c],!d[g.label]&&(f=m.postprune(g.components,a)))g=l.extend({},g),g.components=f,k.push(g);return k}function d(b,d,a){var c,g,k=[],f,p,A;for(c=0;c<b.length;c++)g=b[c],f=g.components||[],p=d[g.label],!g.exclusive&&p&&(A=m.postprune(p.components,a))&&(f=f.concat(A)),g=l.extend({},p||{},g),g.components=f,k.push(g);
return k}function k(b,d){var a,c=p.fillKeys({},d,!0);for(a=0;a<b.length;a++)c[b[a].label]=!0,p.fillKeys(c,m.flatten(b[a].components),!0);return c}return{defaultToolbarSettings:{tabs:[{label:"tab.format.label",showOn:{scope:"Aloha.continuoustext"},components:["bold strong italic emphasis underline \n subscript superscript strikethrough quote".split(" "),"formatLink formatAbbr formatNumeratedHeaders toggleDragDrop \n toggleMetaView wailang toggleFormatlessPaste".split(" "),"alignLeft alignCenter alignRight alignJustify \n orderedList unorderedList indentList outdentList colorPicker".split(" "),
["formatBlock"]]},{label:"tab.insert.label",showOn:{scope:"Aloha.continuoustext"},components:["createTable characterPicker insertLink insertImage insertAbbr insertToc insertHorizontalRule insertTag".split(" ")]},{label:"tab.link.label",showOn:{scope:"link"},components:["editLink","removeLink","linkBrowser"]},{label:"tab.img.label",showOn:{scope:"image"},components:[["imageSource","\n","imageTitle"],["imageResizeWidth","\n","imageResizeHeight"],"imageAlignLeft imageAlignRight imageAlignNone imageIncPadding \n imageCropButton imageCnrReset imageCnrRatio imageDecPadding".split(" "),
["imageBrowser"]]},{label:"tab.abbr.label",showOn:{scope:"abbr"},components:[["abbrText","removeAbbr"]]},{label:"tab.wai-lang.label",showOn:{scope:"wai-lang"},components:[["wailangfield","removewailang"]]},{label:"tab.table.label",showOn:{scope:"table.cell"},components:[["mergecells","splitcells","tableCaption","naturalFit","tableSummary"],["formatTable"]]},{label:"tab.col.label",showOn:{scope:"table.column"},components:["addcolumnleft addcolumnright deletecolumns columnheader mergecellsColumn splitcellsColumn formatColumn".split(" ")]},
{label:"tab.row.label",showOn:{scope:"table.row"},components:["addrowbefore addrowafter deleterows rowheader mergecellsRow splitcellsRow formatRow".split(" ")]},{label:"tab.cell.label",showOn:{scope:"table.cell"},components:[["alignTop","alignMiddle","alignBottom","formatCell"]]}]},combineToolbarSettings:function(e,n,a){function c(a){return"array"===l.type(a)?!a.length:m[a]}var g=p.fillTuples({},b.map(n,function(a){return[a.label,a]})),m=k(e,a);e=d(e,g,c);n=f(n,m,c);return e.concat(n)}}});define("ui/ui-plugin",
"jquery aloha ui/context ui/container ui/surface ui/toolbar ui/scopes ui/settings PubSub jqueryui".split(" "),function(l,b,p,m,f,d,k,e,n){var a=new p,c=new d(a,function(){var a=b.settings.toolbar,c=e.defaultToolbarSettings;return a?e.combineToolbarSettings(a.tabs||[],c.tabs,a.exclude||[]):c.tabs}());b.bind("aloha-editable-activated",function(c,b){f.show(a);m.showContainersForContext(a,c)});b.bind("aloha-editable-deactivated",function(c,b){f.suppressHide||f.hide(a)});n.sub("aloha.ui.scope.change",
function(){m.showContainersForContext(a);k.getPrimaryScope();var b=c._tabs,d=k.getPrimaryScope(),e,f;for(f=0;f<b.length;f++)if(e=b[f].settings,"object"===l.type(e.showOn)&&e.showOn.scope===d){b[f].tab.foreground();break}});return{adoptInto:function(a,b){return c.adoptInto(a,b)},showToolbar:function(c){f.show(a);m.showContainersForContext(a,c)}}});define("ui/ui",["jquery","ui/ui-plugin"],function(l,b){var p={};return{adopt:function(m,f,d){"string"!==l.type(m)?(d=f,f=m,m=d.name):d=l.extend({name:m},
d);f.isInstance||(f=d?f.extend(d):f,f=new f);p[m]=f;b.adoptInto(m,f);return f},getAdoptedComponent:function(b){return p[b]||null}}});define("ui/utils",["jquery","jqueryui"],function(l){function b(b){return b.html||b.text||b.tooltip}function p(b){return'<img class="aloha-ui-inline-icon" src="'+b+'">'}return{wrapWithLabel:function(b,f){return l("<label>",{"class":"aloha-ui-label"}).append(l("<span>",{"class":"aloha-ui-label-text",text:b})).append(f)},makeButton:function(m,f,d){m.button({label:b(f),
text:!(!f.text&&!f.html),icons:{primary:f.icon||f.iconUrl&&"aloha-ui-inline-icon-container"||null,secondary:d&&"aloha-jqueryui-icon ui-icon-triangle-1-s"||null}});f.iconUrl&&m.button("widget").children(".ui-button-icon-primary").append(p(f.iconUrl));return m},makeButtonElement:function(b){return l("<button>",b).attr("type","button")},makeButtonLabel:b,makeButtonLabelWithIcon:function(m){var f=b(m);m.iconUrl&&(f=p(m.iconUrl)+f);return f},makeButtonIconFromUrl:p}});define("ui/vendor/jquery-ui-autocomplete-html",
["jquery","jqueryui"],function(l){(function(b){function l(d,k){var e=RegExp(b.ui.autocomplete.escapeRegex(k),"i");return b.grep(d,function(d){return e.test(b("<div>").html(d.label||d.value||d).text())})}var m=b.ui.autocomplete.prototype,f=m._initSource;b.extend(m,{_initSource:function(){this.options.html&&b.isArray(this.options.source)?this.source=function(b,k){k(l(this.options.source,b.term))}:f.call(this)},_renderItem:function(d,k){return b("<li></li>").data("item.autocomplete",k).append(b("<a></a>")[this.options.html?
"html":"text"](k.label)).appendTo(d)}})})(l)});define("ui/port-helper-attribute-field","jquery ui/ui ui/component ui/scopes ui/context ui/utils aloha/repositorymanager aloha/selection aloha/console ui/vendor/jquery-ui-autocomplete-html".split(" "),function(l,b,p,m,f,d,k,e,n){return function(a){function c(a,c){c.item&&s(c.item.obj);n()}function g(){n()}function n(){A();Z&&Q!==l(Z).attr(V)&&(N||k.markObject(Z),""===q()&&C())}function m(a){var c=l(Z);a(c);for(var c=0,b=R.length;c<b;c++)a(l(R[c]))}function z(){var a=
l(Z);x&&m(function(a){a.addClass(x)});K||(A(),a.context&&a.context.style&&a.context.style["background-color"]&&m(function(a){a.attr("data-original-background-color",a.context.style["background-color"])}),m(function(a){a.css("background-color","#80B5F2")}))}function A(){var a=l(Z);x&&m(function(a){a.removeClass(x)});if(!K){var c=a.attr("data-original-background-color");m(function(a){a.css("background-color",c||"")});a.attr("style")||m(function(a){a.removeAttr("style")});m(function(a){a.removeAttr("data-original-background-color")})}}
function y(a,c){return a.replace(/\{([^}]+)\}/g,function(a,b){return b in c?c[b]:""})}function C(){null!==S&&(L.css("color","#AAA"),L.val(S))}function q(){return L.val()}function B(a){L.val(a);L.css("color","black")}function s(a){if(N=a){var c=a[F];B(c);W=c;r(V,a[t]);k.markObject(Z,a)}else W=null}function r(a,c,b,d){Z&&("undefined"===typeof d||d.match(RegExp(b))?m(function(b){b.attr(a,c)}):l(Z).removeAttr(a))}var t=a.valueField||"id",F=a.displayField||"name",H=a.objectTypeFilter||["all"],S=a.placeholder,
K=!!a.noTargetHighlight,x=a.targetHighlightClass,L=a.element?l(a.element):l('<input id="aloha-attribute-field-'+a.name+'">'),I,T,N,W,Z,V,Q,R=[];a.cls&&L.addClass(a.cls);a.width&&L.width(a.width);I=b.adopt(a.name,p,{scope:a.scope,init:function(){a.element?this.element=L:a.label?(this.element=d.wrapWithLabel(a.label,L),a.labelClass&&this.element.addClass(a.labelClass)):this.element=l("<span>").append(L);L.autocomplete({html:!0,appendTo:f.selector,source:function(a,c){k.query({queryString:a.term,objectTypeFilter:H},
function(a){c(l.map(a.items,function(a){return{label:y(T,a),value:a.name,obj:a}}))})},select:c})}});L.bind("focus",function(a,c){l(a.target).is(":visible")&&(z(),q()===S&&B(""))}).bind("blur",g).bind("keydown",function(a){13!=a.keyCode&&27!=a.keyCode||a.preventDefault()}).bind("keyup",function(a){N&&W!==q()&&(W=N=null);N||r(V,q());if(13==a.keyCode||27==a.keyCode)e.getRangeObject().select(),n()});C();Aloha.bind("aloha-editable-deactivated",g);var O={getInputElem:function(){return L[0]},hasInputElem:function(){return!0},
getInputId:function(){return L.attr("id")},hide:function(){L.hide()},show:function(){L.show()},foreground:function(){I.foreground()},focus:function(){I.focus();L.focus()},getTargetObject:function(){return Z},setTargetObject:function(a,c){Z=a;V=c;R=[];s(null);a&&c?(Q=l(a).attr(c),B(l(Z).attr(V)),k.getObject(a,function(a){a&&0<a.length&&s(a[0])})):B("")},addAdditionalTargetObject:function(a){R.push(a)},setAttribute:r,getItem:function(){return N},setItem:s,setValue:B,getValue:q,addListener:function(a,
c){L.bind(a,l.proxy(c,O))},setObjectTypeFilter:function(a){H=a},setTemplate:function(a){T=a},setPlaceholder:C,getInputJQuery:function(){return L}};return O}});define("ui/button",["jquery","ui/component","ui/utils","jqueryui"],function(l,b,p){return b.extend({init:function(){this._super();this.createButtonElement();p.makeButton(this.buttonElement,this).button("widget").tooltip({tooltipClass:"aloha aloha-ui-tooltip",position:{my:"left top",at:"right bottom"}}).zIndex(0).click(l.proxy(function(){this.closeTooltip();
this._onClick()},this))},closeTooltip:function(){this.buttonElement.tooltip("close",null,!0)},_onClick:function(){this.click()},click:function(){},createButtonElement:function(){var b=p.makeButtonElement();this["class"]&&b.addClass(this["class"]);this.element=this.buttonElement=b;var f=this;b.bind("mouseleave",function(){f.closeTooltip()});return b},disable:function(){this.element.button("option","disabled",!1)},enable:function(b){this.element.button("option","disabled",!1===b)}})});define("ui/toggleButton",
["jquery","ui/button","jqueryui"],function(l,b){return b.extend({_checked:!1,setState:function(b){this._checked!==b&&((this._checked=b)?this.element.addClass("aloha-button-active"):this.element.removeClass("aloha-button-active"))},getState:function(){return this._checked},_onClick:function(){this.setState(!this._checked);this.click()}})});define("link/nls/i18n",{root:{"button.addlink.tooltip":"Insert Link","button.removelink.tooltip":"Remove Link","newlink.defaulttext":"New Link","floatingmenu.tab.link":"Link",
"link.target.self":"Self","link.target.blank":"Blank","link.target.parent":"Parent","link.target.top":"Top","link.target.framename":"Framename","link.target.legend":"Target","link.title.legend":"Title",insertLink:"ctrl+k"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("aloha/nls/i18n",{root:{"plugin.abbr.floatingmenu.tab.abbr":"Abbreviation","floatingmenu.tab.format":"Format","floatingmenu.tab.insert":"Insert",yes:"Yes",no:"No",cancel:"Cancel","repository.no_item_found":"No item found.",
"repository.loading":"Loading","repository.no_items_found_yet":"No items found yet..."},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("util/keys",["jquery"],function(l){var b=function(){var b={};l.each({8:"backspace",9:"tab",13:"enter",16:"shift control alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",37:"left up right down",45:"insert",46:"delete",48:"0 1 2 3 4 5 6 7 8 9",65:"a b c d e f g h i j k l m n o p q r s t u v w x y z",112:"f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13 f14 f15"},
function(m,f){var d=parseInt(m,10);l.each(f.split(" "),function(k,e){b[d+k]=e})});return b}();return{getToken:function(l){return b[l]},keyCodeTokenMap:l.extend({},b)}});define("link/link-plugin","aloha aloha/plugin aloha/ephemera jquery ui/port-helper-attribute-field ui/ui ui/scopes ui/surface ui/button ui/toggleButton i18n!link/nls/i18n i18n!aloha/nls/i18n aloha/console PubSub util/keys".split(" "),function(l,b,p,m,f,d,k,e,n,a,c,g,v,u,z){function A(){m(document).bind("keydown.aloha-link.pointer-fix",
function(a){(a.metaKey||"control"===z.getToken(a.keyCode))&&m("body").addClass("aloha-link-pointer")}).bind("keyup.aloha-link.pointer-fix",function(a){(a.metaKey||"control"===z.getToken(a.keyCode))&&m("body").removeClass("aloha-link-pointer")})}function y(a){a.obj.delegate("a","click.aloha-link.meta-click-link",function(a){if(a.metaKey||a.ctrlKey)return l.activeEditable.blur(),window.setTimeout(function(){location.href=a.target},0),a.stopPropagation(),!1})}function C(a,c){for(var b=a.findAllMarkupByTagName("A",
a),d=0,g=b.length;d<g;d++)c.addAdditionalTargetObject(b[d])}function q(a,c){var b,d=!1;!a.ignoreNextSelectionChangedEvent&&l.Selection.isSelectionEditable()&&null!=l.activeEditable?(b=a.findLinkMarkup(c))?(a.toggleLinkScope(!0),a.hrefField.setTargetObject(b,"href"),C(c,a.hrefField),0==m("#"+a.hrefField.getInputId()).length&&(null!==a.hrefUpdateInt&&clearInterval(a.hrefUpdateInt),a.hrefUpdateInt=setInterval(function(){0<m("#"+a.hrefField.getInputId()).length&&(a.hrefField.setTargetObject(b,"href"),
clearInterval(a.hrefUpdateInt))},200)),l.trigger("aloha-link-selected"),d=!0,u.pub("aloha.link.selected",{input:a.hrefField.getInputElem(),href:a.hrefField.getValue(),element:a.hrefField.getTargetObject()})):(a.toggleLinkScope(!1),a.hrefField.setTargetObject(null),l.trigger("aloha-link-unselected")):a.toggleLinkScope(!1);a.ignoreNextSelectionChangedEvent=!1;return d}var B=window.GENTICS,s="",r,t={merge:!0,mergeable:function(a){return"aloha-new-link"===a.className&&a.nextSibling&&"aloha-new-link"===
a.nextSibling.className}};p.classes("aloha-link-pointer","aloha-link-text");return b.create("link",{config:["a"],title:null,titleregex:null,targetregex:"",target:"",cssclassregex:null,cssclass:"",objectTypeFilter:[],onHrefChange:null,ignoreNextSelectionChangedEvent:!1,hrefUpdateInt:null,hotKey:{insertLink:c.t("insertLink","ctrl+k")},hrefValue:"http://",init:function(){var a=this;"undefined"!==typeof this.settings.title&&(this.title=this.settings.title);"undefined"!==typeof this.settings.titleregex&&
(this.titleregex=this.settings.titleregex);"undefined"!=typeof this.settings.targetregex&&(this.targetregex=this.settings.targetregex);"undefined"!=typeof this.settings.target&&(this.target=this.settings.target);"undefined"!=typeof this.settings.cssclassregex&&(this.cssclassregex=this.settings.cssclassregex);"undefined"!=typeof this.settings.cssclass&&(this.cssclass=this.settings.cssclass);"undefined"!=typeof this.settings.objectTypeFilter&&(this.objectTypeFilter=this.settings.objectTypeFilter);"undefined"!=
typeof this.settings.onHrefChange&&(this.onHrefChange=this.settings.onHrefChange);"undefined"!=typeof this.settings.hotKey&&m.extend(!0,this.hotKey,this.settings.hotKey);"undefined"!=typeof this.settings.hrefValue&&(this.hrefValue=this.settings.hrefValue);this.createButtons();this.subscribeEvents();this.bindInteractions();l.bind("aloha-plugins-loaded",function(){a.initSidebar(l.Sidebar.right);u.pub("aloha.link.ready",{plugin:a})})},nsSel:function(){var a=[];m.each(arguments,function(){a.push("."+
(""==this?"aloha-link":"aloha-link-"+this))});return m.trim(a.join(" "))},nsClass:function(){var a=[];m.each(arguments,function(){a.push(""==this?"aloha-link":"aloha-link-"+this)});return m.trim(a.join(" "))},initSidebar:function(a){var b=this;b.sidebar=a;a.addPanel({id:b.nsClass("sidebar-panel-target"),title:c.t("floatingmenu.tab.link"),content:"",expanded:!0,activeOn:"a, link",onInit:function(){var a=this;this.setContent('<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+c.t("link.target.legend")+
'</legend><ul><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_self" /><span>'+c.t("link.target.self")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_blank" /><span>'+c.t("link.target.blank")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_parent" /><span>'+c.t("link.target.parent")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+
'" value="_top" /><span>'+c.t("link.target.top")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="framename" /><span>'+c.t("link.target.framename")+'</span></li><li><input type="text" class="'+b.nsClass("framename")+'" /></li></ul></fieldset></div><div class="'+b.nsClass("title-container")+'" ><fieldset><legend>'+c.t("link.title.legend")+'</legend><input type="text" class="'+b.nsClass("linkTitle")+'" /></fieldset></div>');m(b.nsSel("framename")).live("keyup",
function(){m(a.effective).attr("target",m(this).val().replace('"',"&quot;").replace("'","&#39;"))});m(b.nsSel("radioTarget")).live("change",function(){"framename"==m(this).val()?m(b.nsSel("framename")).slideDown():(m(b.nsSel("framename")).slideUp().val(""),m(a.effective).attr("target",m(this).val()))});m(b.nsSel("linkTitle")).live("keyup",function(){m(a.effective).attr("title",m(this).val().replace('"',"&quot;").replace("'","&#39;"))})},onActivate:function(a){var c=this;c.effective=a;if(null!=m(c.effective).attr("target")){var d=
!0;m(b.nsSel("framename")).hide().val("");m(b.nsSel("radioTarget")).each(function(){m(this).removeAttr("checked");m(this).val()===m(c.effective).attr("target")&&(d=!1,m(this).attr("checked","checked"))});d&&(m(b.nsSel('radioTarget[value="framename"]')).attr("checked","checked"),m(b.nsSel("framename")).val(m(c.effective).attr("target")).show())}else m(b.nsSel("radioTarget")).first().attr("checked","checked"),m(c.effective).attr("target",m(b.nsSel("radioTarget")).first().val());c=this;c.effective=a;
m(b.nsSel("linkTitle")).val(m(c.effective).attr("title"))}});a.show()},subscribeEvents:function(){var a=this,c={},b=0;l.bind("aloha-editable-created",function(d,g){var e=a.getEditableConfig(g.obj),e=-1!==m.inArray("a",e);if(c[g.getId()]=e)g.obj.bind("keydown.aloha-link",a.hotKey.insertLink,function(){a.findLinkMarkup()?(a.hrefField.foreground(),a.hrefField.focus()):a.insertLink(!0);return!1}),g.obj.find("a").each(function(){a.addLinkEventHandlers(this)}),0===b++&&A()});l.bind("aloha-editable-destroyed",
function(a,c){c.obj.unbind(".aloha-link");0===--b&&m(document).unbind(".aloha-link.pointer-fix")});l.bind("aloha-editable-activated",function(b,d){c[l.activeEditable.getId()]?(a._formatLinkButton.show(),a._insertLinkButton.show()):(a._formatLinkButton.hide(),a._insertLinkButton.hide());y(d.editable)});var d=!1;l.bind("aloha-selection-changed",function(b,g){var e=!1;l.activeEditable&&c[l.activeEditable.getId()]&&(e=q(a,g))&&d!==e&&a.hrefField.foreground();d=e});var g=this;l.bind("aloha-editable-deactivated",
function(a,c){d&&(setTimeout(function(){d||g.toggleLinkScope(!1)},100),d=!1);c.editable.obj.unbind(".aloha-link.meta-click-link")})},toggleLinkScope:function(a){this._isScopeActive===a&&l.activeEditable&&this._isScopeActive_editableId===l.activeEditable.getId()||(this._isScopeActive=a,this._isScopeActive_editableId=l.activeEditable&&l.activeEditable.getId(),a?(this.hrefField.show(),this._insertLinkButton.hide(),l.activeEditable&&"A"===l.activeEditable.obj[0].nodeName?this._removeLinkButton.hide():
this._removeLinkButton.show(),this._formatLinkButton.setState(!0),k.enterScope(this.name,"link")):(this.hrefField.hide(),this._insertLinkButton.show(),this._removeLinkButton.hide(),this._formatLinkButton.setState(!1),k.leaveScope(this.name,"link",!0)))},addLinkEventHandlers:function(a){var c=this;m(a).mouseenter(function(b){l.Log.debug(c,"mouse over link.");c.mouseOverLink=a;c.updateMousePointer()});m(a).mouseleave(function(a){l.Log.debug(c,"mouse left link.");c.mouseOverLink=null;c.updateMousePointer()});
m(a).click(function(a){if(a.metaKey)return l.activeEditable.blur(),window.setTimeout(function(){location.href=a.target},0),a.stopPropagation(),!1})},createButtons:function(){var b=this;this._formatLinkButton=d.adopt("formatLink",a,{tooltip:c.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",click:function(){b.formatLink()}});this._insertLinkButton=d.adopt("insertLink",n,{tooltip:c.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",
click:function(){b.insertLink(!1)}});this.hrefField=f({name:"editLink",width:320,valueField:"url",cls:"aloha-link-href-field",scope:"Aloha.continuoustext",noTargetHighlight:!1,targetHighlightClass:"aloha-focus"});this.hrefField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.hrefField.setObjectTypeFilter(this.objectTypeFilter);this._removeLinkButton=d.adopt("removeLink",n,{tooltip:c.t("button.removelink.tooltip"),icon:"aloha-icon aloha-icon-unlink",scope:"Aloha.continuoustext",click:function(){b.removeLink()}})},
bindInteractions:function(){var a=this;this.hrefField.addListener("keyup",function(c){if("escape"===z.getToken(c.keyCode)){var b=a.hrefField.getValue();"/"==b[0]||"#"==b[0]||b.match(/^.*\.([a-z]){2,4}$/i)||b.match(/^([a-z]){3,10}:\/\/.+/i)||b.match(/^(mailto|tel):.+/i)||(b=a.hrefField.getValue(),a.hrefField.setValue(b),b!=a.hrefValue&&""!=b||a.removeLink(!1))}a.hrefChange();"enter"===z.getToken(c.keyCode)?(c=l.Selection.getRangeObject(),a.ignoreNextSelectionChangedEvent=!0,c.startContainer=c.endContainer,
c.startOffset=c.endOffset,c.select(),a.ignoreNextSelectionChangedEvent=!0,b=m(a.hrefField.getInputElem()).attr("value"),b!=a.hrefValue&&""!=b||a.removeLink(!1),window.setTimeout(function(){k.setScope("Aloha.continuoustext")},100)):(r=m(a.hrefField.getInputElem()).attr("value"),s!=r&&(s=r))});m(document).keydown(function(c){l.Log.debug(a,"Meta key down.");a.metaKey=c.metaKey;a.updateMousePointer()}).keyup(function(c){l.Log.debug(a,"Meta key up.");a.metaKey=c.metaKey;a.updateMousePointer()})},updateMousePointer:function(){this.metaKey&&
this.mouseOverLink?(l.Log.debug(this,"set pointer"),m(this.mouseOverLink).removeClass("aloha-link-text"),m(this.mouseOverLink).addClass("aloha-link-pointer")):(m(this.mouseOverLink).removeClass("aloha-link-pointer"),m(this.mouseOverLink).addClass("aloha-link-text"))},findLinkMarkup:function(a){"undefined"==typeof a&&(a=l.Selection.getRangeObject());if(l.activeEditable){var c=l.activeEditable.obj;c[0]&&"A"===c[0].nodeName&&(c=c.parent());return a.findMarkup(function(){return"A"==this.nodeName},c)}return null},
formatLink:function(){l.activeEditable&&(this.findLinkMarkup(l.Selection.getRangeObject())?this.removeLink():this.insertLink())},insertLink:function(a){var b=this,d=l.Selection.getRangeObject(),g;d.startContainer&&d.endContainer&&!this.findLinkMarkup(d)&&(this.hrefField.foreground(),d.isCollapsed()&&!1!==a&&B.Utils.Dom.extendToWord(d),d.isCollapsed()?(a=c.t("newlink.defaulttext"),g=m('<a href="'+b.hrefValue+'" class="aloha-new-link">'+a+"</a>"),B.Utils.Dom.insertIntoDOM(g,d,m(l.activeEditable.obj)),
d.startContainer=d.endContainer=g.contents().get(0),d.startOffset=0,d.endOffset=a.length):(g=m('<a href="'+b.hrefValue+'" class="aloha-new-link"></a>'),B.Utils.Dom.addMarkup(d,g,!1),B.Utils.Dom.doCleanup(t,d)),l.activeEditable.obj.find("a.aloha-new-link").each(function(a){b.addLinkEventHandlers(this);m(this).removeClass("aloha-new-link")}),d.select(),this.hrefField.focus(),this.hrefField.hasInputElem()&&m(this.hrefField.getInputElem()).attr("value",b.hrefValue).select(),a=l.createRange(),a.setStart(d.startContainer,
d.startOffset),a.setEnd(d.endContainer,d.endOffset),u.pub("aloha.link.insert",{range:a}),this.hrefChange())},removeLink:function(a){var c=l.Selection.getRangeObject(),b=this.findLinkMarkup();this.hrefField.setItem(null);b&&(B.Utils.Dom.removeFromDOM(b,c,!0),c.startContainer=c.endContainer,c.startOffset=c.endOffset,c.select(),"undefined"!=typeof a&&!0!==a||k.setScope("Aloha.continuoustext"))},automaticallySetTitle:function(a,c,b){var d=m(a.getTargetObject()).attr("title");!c||d&&c!==d||a.setAttribute("title",
c,b,a.getValue())},hrefChange:function(){this.automaticallySetTitle(this.hrefField,this.title,this.titleregex);""!=this.target&&this.hrefField.setAttribute("target",this.target,this.targetregex,this.hrefField.getValue());null!=this.cssclassregex&&this.hrefField.setAttribute("class",this.cssclass,this.cssclassregex,this.hrefField.getValue());var a=this.hrefField.getValue(),c=this.hrefField.getTargetObject();l.trigger("aloha-link-href-change",{href:a,obj:c,item:this.hrefField.getItem()});u.pub("aloha.link.changed",
{href:a,element:c,input:this.hrefField.getInputElem()});"function"==typeof this.onHrefChange&&this.onHrefChange.call(this,this.hrefField.getTargetObject(),this.hrefField.getValue(),this.hrefField.getItem())}})});define("ui/dialog",["jquery","ui/component","i18n!ui/nls/i18n"],function(l,b,p){function m(b){var d={};b.text&&(d.text=b.text);b.html&&(d.html=b.html);return l("<div>",d)}function f(b){return function(){b.apply(this);l(this).dialog("destroy").remove()}}function d(b){for(var d in b)b.hasOwnProperty(d)&&
(b[d]=f(b[d]));return b}function k(b,d){var a="aloha aloha-dialog";b.cls&&(a+=" "+b.cls);return{resizable:!1,modal:!0,title:b.title||d,dialogClass:a,zIndex:10200}}return{confirm:function(b){var f=b.buttons||{},a=p.t("button.yes.label"),c=p.t("button.no.label");null!==f.Yes&&"Yes"!==a&&(f[a]=f.Yes,delete f.Yes);null!==f.No&&"No"!==c&&(f[c]=f.No,delete f.No);f[a]=f[a]||b.yes||l.noop;f[c]=f[c]||b.no||l.noop;if(b.answer){var g=f[a],v=f[c];f[a]=function(){g();b.answer(!0)};f[c]=function(){v();b.answer(!1)}}var u=
m(b).dialog(l.extend(k(b,"Confirm"),{buttons:d(f)}));return function(){u.dialog("destroy").remove()}},alert:function(b){var f={};f[p.t("button.dismiss.label")]=l.noop;var a=m(b).dialog(l.extend(k(b,"Alert"),{buttons:d(f)}));return function(){a.dialog("destroy").remove()}},modal:function(b){b=m(b).dialog(l.extend(k(b,""),b));b.parent().find(".ui-dialog-titlebar").remove();return b},progress:function(b){var d=l("<div>").progressbar({value:null!=b.value?b.value:100}),a=m(b).dialog(l.extend(k(b,"Progress"),
{open:function(){l(this).append(d)}}));return function(c){null!=c?d.progressbar({value:c}):a.dialog("destroy").remove()}}}});define("ui/multiSplit",["jquery","ui/component","ui/button","ui/utils"],function(l,b,p,m){return b.extend({_activeButton:null,_isOpen:!1,init:function(){this._super();var b=this,d=this.element=l("<div>",{"class":"aloha-multisplit"});this.contentElement=l("<div>",{"class":"aloha-multisplit-content"}).appendTo(d);this.toggleButton=m.makeButtonElement({"class":"aloha-multisplit-toggle",
click:function(){b.toggle()}}).button().appendTo(d);this.buttons=[];var k=this.getButtons();0===k.length&&d.hide();for(d=0;d<k.length;d++)this.addButton(k[d]);l("body").click(function(d){b._isOpen&&!b.element.is(d.target)&&0===b.element.find(d.target).length&&b.close()})},addButton:function(b){var d=this,k=new (p.extend({tooltip:b.tooltip,icon:b.wide?b.icon:"aloha-large-icon "+b.icon,iconOnly:b.wide?!1:!0,init:function(){this._super();b.init&&b.init.call(this)},click:function(){b.click.apply(d,arguments);
d.close()}}));b.wide||k.element.addClass("aloha-large-button");d.buttons[b.name]={settings:b,component:k,element:k.element,visible:!0};var e=this.contentElement.children(".aloha-ui-multisplit-fullwidth");!b.wide&&e.length?e.before(k.element[0]):this.contentElement.append(k.element[0])},setActiveButton:function(b){b||(b=null);null!==this._activeButton&&this.buttons[this._activeButton].element.removeClass("aloha-multisplit-active");this._activeButton=b;null!==b&&this.buttons[b].element.addClass("aloha-multisplit-active")},
toggle:function(){this.element.toggleClass("aloha-multisplit-open");this._isOpen=!this._isOpen},open:function(){this.element.addClass("aloha-multisplit-open");this._isOpen=!0},close:function(){this.element.removeClass("aloha-multisplit-open");this._isOpen=!1},show:function(b){b||(b=null);null!==b&&void 0!==this.buttons[b]&&(this.buttons[b].element.show(),this.buttons[b].visible=!0,this.element.show())},hide:function(b){var d,k=!1;b||(b=null);if(null!==b&&void 0!==this.buttons[b]){this.buttons[b].element.hide();
this.buttons[b].visible=!1;for(d in this.buttons)if(this.buttons.hasOwnProperty(d)&&this.buttons[d].visible){this.element.show();k=!0;break}k||this.element.hide()}}})});define("ui/port-helper-multi-split",["aloha/core","jquery","ui/ui","ui/multiSplit"],function(l,b,p,m){return function(f){var d;d=p.adopt(f.name,m,{scope:f.scope,getButtons:function(){var d=[];b.each(f.items,function(b,f){d.push({tooltip:f.tooltip,text:f.text,name:f.name,icon:f.iconClass,click:f.click,init:function(){f.cls&&this.element.addClass(f.cls);
f.init&&f.init.call(this)},wide:f.wide})});return d}});return{pushItem:function(b){d.addButton(b)},showItem:function(b){d.show(b)},hideItem:function(b){d.hide(b)},setActiveItem:function(b){d.setActiveButton(b)}}}});define("table/nls/i18n",{root:{"floatingmenu.tab.table":"Table","floatingmenu.tab.tablelayout":"Table Layout","deleterows.confirm":"Do you really want to delete the selected rows?","deletecolumns.confirm":"Do you really want to delete the selected columns?","deletetable.confirm":"Do you really want to delete the table?",
Table:"Table","button.createtable.tooltip":"Insert Table","button.addcolleft.tooltip":"Add Column left","button.addcolright.tooltip":"Add Column right","button.delcols.tooltip":"Delete Columns","button.addrowbefore.tooltip":"Add Row before","button.addrowafter.tooltip":"Add Row after","button.delrows.tooltip":"Delete Rows","button.caption.tooltip":"Table caption","button.naturalfit.tooltip":"Reset table sizing","empty.caption":"Table caption","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting",
"button.rowheader.tooltip":"Format row as table header","button.columnheader.tooltip":"Format column as table header","button.mergecells.tooltip":"Merge Cells","button.splitcells.tooltip":"Split Cells","table.label.target":"Summary","table.sidebar.title":"Table","table.mergeCells.notRectangular":"Only a rectangular selection can be merged","table.addColumns.nonConsecutive":"Please select a single column or a consecutive range of columns","table.createTable.nestedTablesNoSupported":"Sorry, nested tables are not supported"},
ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("table/table-create-layer",["jquery"],function(l){CreateLayer=function(b){this.TablePlugin=b};CreateLayer.prototype.parameters={elemId:"aloha-table-createLayer",className:"aloha-table-createdialog",numX:10,numY:10,layer:void 0,target:void 0};CreateLayer.prototype.config={};CreateLayer.prototype.visible=!1;CreateLayer.prototype.show=function(){var b=this.get("layer");null==b?this.create():(this.setPosition(b),b.find("td").removeClass("hover"),
b.show());this.visible=!0};CreateLayer.prototype.create=function(){var b=this,p=l("<div></div>");p.id=this.get("elemId");p.addClass(this.get("className"));var m=l("<table></table>");m.css("width",15*(this.get("numX")+6));for(var f,d,k=0;k<this.get("numY");k++){f=l("<tr></tr>");for(var e=0;e<this.get("numX");e++)d=l("<td>\u00a0</td>"),0==k&&0==e&&d.addClass("hover"),d.bind("mouseover",{rowId:k,colId:e},function(d){b.handleMouseOver(d,m)}),d.bind("click",{rowId:k,colId:e},function(d){b.TablePlugin.createTable(d.data.colId+
1,d.data.rowId+1);b.hide()}),f.append(d);m.append(f)}p.append(m);this.set("layer",p);this.setPosition();p.bind("click",function(b){b.stopPropagation()}).mousedown(function(b){b.stopPropagation()});l("body").append(p).bind("click",function(d){b.visible&&d.target!==b.get("target")[0]&&!l.contains(b.get("target")[0],d.target)&&b.hide()})};CreateLayer.prototype.handleMouseOver=function(b,p){for(var m=b.data.rowId,f=b.data.colId,d=p.find("tr"),k=0;k<=d.length;k++)for(var e=l(d[k]).find("td"),n=0;n<=e.length;n++)k<=
m&&n<=f?l(e[n]).addClass("hover"):l(e[n]).removeClass("hover")};CreateLayer.prototype.setPosition=function(){var b=l(this.get("target")),p=b.offset();this.get("layer").css("left",p.left+"px");this.get("layer").css("top",p.top+b.height()+"px")};CreateLayer.prototype.hide=function(){this.get("layer").hide();this.visible=!1};CreateLayer.prototype.get=function(b){if(this.config[b])return this.config[b];if(this.parameters[b])return this.parameters[b]};CreateLayer.prototype.set=function(b,l){this.config[b]?
this.config[b]=l:this.parameters[b]=l};return CreateLayer});define("table/table-plugin-utils",["jquery","aloha/copypaste","util/browser","aloha/console"],function(l,b,p,m){var f={cellIndexToGridColumn:function(b,k,e){var n=null;f.walkCells(b,function(a,c,b,d,f){if(a===k&&c===e)return n=b,!1});return n},walkCells:function(b,k){for(var e=[],n=0;n<b.length;n++){for(var a=b[n].cells,c=0,g=0;g<a.length;g++){for(var m=a[g],l=f.colspan(m),m=f.rowspan(m);e[g+c];)e[g+c]-=1,c+=1;if(!1===k(n,g,g+c,l,m))return;
for(var p=0;p<l;p++){if(e[g+c+p])throw"an impossible case has occurred";e[g+c+p]=m-1}c+=l-1}for(;g+c<e.length;c++)e[g+c]&&(e[g+c]-=1)}},makeGrid:function(b){var k=[];f.walkCells(b,function(e,f,a,c,g){f=b[e].cells[f];for(var m=0;m<g;m++){k[e+m]=k[e+m]||[];for(var l=0;l<c;l++)k[e+m][a+l]={cell:f,colspan:c,rowspan:g,spannedX:l,spannedY:m}}});return k},containsDomCell:function(b){return 0===b.spannedX&&0===b.spannedY},leftDomCell:function(b,k,e){do{var f=b[k][e];if(0===f.spannedY)return f.cell;e-=f.spannedX+
1}while(0<=e);return null},splitCell:function(b,k){var e=l(b),n=f.colspan(b),a=f.rowspan(b);if(1!==n||1!==a){for(var c=e.parent(),g=c.parent().children(),c=c.index(),m=e.index(),p=f.makeGrid(g),m=f.cellIndexToGridColumn(g,c,m),z=0;z<a;z++)for(var A=0===z?1:0;A<n;A++){var y=f.leftDomCell(p,c+z,m);null==y?g.eq(c+z).prepend(k()):l(y).after(k())}e.removeAttr("colSpan");e.removeAttr("rowSpan")}},rowspan:function(b){return parseInt(l(b).attr("rowspan"))||1},colspan:function(b){return parseInt(l(b).attr("colspan"))||
1},walkGrid:function(b,k){for(var e,f=0,a=b.length;f<a;f++){e=b[f];for(var c=0,g=e.length;c<g;c++)if(!1===k(e[c],c,f))return}},walkGridInsideRect:function(b,k,e){f.walkGrid(b,function(b,a,c){if(c>=k.top&&c<k.bottom&&a>=k.left&&a<k.right)return e(b,a,c)})},leftTrimArray:function(b){for(var k=0;k<b.length;k++)if(null!=b[k])return b.slice(k,b.length);return[]},makeContour:function(b,k){var e=[],n=[],a=[],c=[];f.walkGrid(b,function(b,d,f){if(k(b,d,f)){if(null==e[f]||d<e[f])e[f]=d;if(null==n[f]||d>n[f])n[f]=
d;if(null==a[d]||f<a[d])a[d]=f;if(null==c[d]||f>c[d])c[d]=f}});e=f.leftTrimArray(e);n=f.leftTrimArray(n);a=f.leftTrimArray(a);c=f.leftTrimArray(c);return{left:e,right:n,top:a,bottom:c}},indexOfAnyBut:function(b,k){for(var e=0;e<b.length;e++)if(k!==b[e])return e;return-1},isConsecutive:function(b){for(var k=1;k<b.length;k++)if(1!==Math.abs(b[k]-b[k-1]))return!1;return!0},resizeCellWidth:function(b,k){l(b).css("width",k);l(b).find(".aloha-table-cell-editable").eq(0).css({width:k,"word-wrap":"break-word"})},
getMinColWidth:function(b){var k=b.closest("tbody").children("tr"),e=b.closest("tr"),n=f.cellIndexToGridColumn(k,k.index(e),e.children().index(b)),a="";f.walkCells(k,function(c,b,d,e,f){if(d===n&&(c=l(l(k[c]).children()[b]),!(1<e)))for(e=c.text().split(" "),c=0;c<e.length;c++)e[c].length>a.length&&(a=e[c])});e=l("<span></span>");e.css("text-indent",-9999);e.css("display","inline");e.text(a);l(b).append(e);b=e.width();l(e).remove();return b},getCellResizeBoundaries:function(b,k,e){var n,a;f.walkCells(k,
function(c,g,m,p,z){c=l(l(k[c]).children()[g]);if(c.hasClass("aloha-table-selectrow")||c.closest("tr").hasClass("aloha-table-selectcolumn"))return!0;m===b&&1===p&&(n=c.offset().left+f.getCellBorder(c)+c.width()-f.getMinColWidth(c));m===b-1&&1===p&&(a=c.offset().left+f.getCellBorder(c)+f.getCellPadding(c)+f.getMinColWidth(c));if(n&&a)return e(n,a),!1})},getCellBorder:function(b){return(b.outerWidth()-b.innerWidth())/2},getCellPadding:function(b){return b.innerWidth()-b.width()},selectAnchorContents:function(d){a:if(0===
d.length)d=null;else{var k,e;(k=b.getRange())&&(e=l(k.commonAncestorContainer).closest(".aloha-table-cell-editable")[0]);if(e)for(k=0;k<d.length;k++)if(l(d[k]).find(e).length){d=d[k];break a}d=d[0]}if(d)if(d=l(">.aloha-table-cell-editable",d)[0],p.ie7||p.ie8)try{b.selectAllOf(d)}catch(f){m.warn("Table Plugin",f.message)}else b.selectAllOf(d)}};return f});define("table/table-cell",["aloha","aloha/jquery","aloha/ephemera","table/table-plugin-utils","util/browser"],function(l,b,p,m,f){var d=function(d,
e){null==d&&(d="<td>&nbsp;</td>");d=b(d).get(0);this.obj=b(d);this.tableObj=e;e.cells.push(this)};d.prototype.tableObj=void 0;d.prototype.obj=void 0;d.prototype.wrapper=void 0;d.prototype.hasFocus=!1;d.prototype.activate=function(){var d=this,e=d.obj;e.wrapInner("<div/>");var f=e.children("div").eq(0);f.contentEditable(!0);f.addClass("aloha-table-cell-editable");p.markWrapper(f);f.bind("focus",function(a){1<m.colspan(d.obj)||1<m.rowspan(d.obj)?d.tableObj.tablePlugin._splitcellsButton.enable(!0):d.tableObj.tablePlugin._splitcellsButton.enable(!1);
a.currentTarget&&(a.currentTarget.indexOf=function(){return-1});d._editableFocus(a)});f.bind("mousedown",function(a){a.currentTarget&&(a.currentTarget.indexOf=function(){return-1});d._editableMouseDown(a);d.tableObj.selection.baseCellPosition=[d._virtualY(),d._virtualX()];if(a.shiftKey){a=d.tableObj.selection.lastBaseCellPosition[1];var c=d.tableObj.selection.lastBaseCellPosition[0],g=d.tableObj.selection.baseCellPosition,e=g[1];e>a&&(e=a,a=g[1]);var f=g[0];f>c&&(f=c,c=g[0]);var n=f,l=a,p=c,C=e,q=
d.tableObj;a=q.obj.children().children("tr");a=m.makeGrid(a);q.selection.selectedCells=[];var B=q.get("classCellSelected");m.walkGrid(a,function(a,c,d){m.containsDomCell(a)&&(d>=n&&d<=p&&c>=C&&c<=l?(b(a.cell).addClass(B),q.selection.selectedCells.push(a.cell)):b(a.cell).removeClass(B))});q.selection.notifyCellsSelected()}else d.tableObj.selection.lastBaseCellPosition=d.tableObj.selection.baseCellPosition,d._editableMouseDown(a),d._startCellSelection()});f.bind("blur",function(a){d._editableBlur(a)});
f.bind("keyup",function(a){d._editableKeyUp(a)});f.bind("keydown",function(a){d._editableKeyDown(a)});f.bind("mouseover",function(a){d._selectCellRange()});f.contentEditableSelectionChange(function(a){l.Selection.onChange(f,a);return f});e.bind("mousedown",function(a){window.setTimeout(function(){d.wrapper.trigger("focus");d._selectAll(f)},1);a.shiftKey||(d.tableObj.selection.unselectCells(),d._startCellSelection());a.stopPropagation()});e.get(0)&&(e.get(0).onselectstart=function(){return!1});this.wrapper=
e.children();this.wrapper.get(0)&&(this.wrapper.get(0).onselectstart=function(){window.event.cancelBubble=!0},this.wrapper.get(0).ondragstart=function(){return!1});return this};d.prototype.deactivate=function(){var d=b(this.obj.children(".aloha-table-cell-editable"));d.length&&(d.parent().append(d.contents()),d.remove(),this.obj.unbind("click"),this.obj.unbind("mousedown"),""==b.trim(this.obj.attr("class"))&&this.obj.removeAttr("class"))};d.prototype.toString=function(){return"TableCell"};d.prototype._editableFocus=
function(b){this.hasFocus||(this.tableObj.focus(),this.obj.addClass("aloha-table-cell_active"),this.hasFocus=!0,this.tableObj.selection.selectionType="cell")};d.prototype._editableBlur=function(b){this.hasFocus=!1;this.obj.removeClass("aloha-table-cell_active")};d.prototype._virtualX=function(){var b=this.tableObj.obj.children().children("tr"),d=this.obj.parent().index(),f=this.obj.index();return m.cellIndexToGridColumn(b,d,f)};d.prototype._virtualY=function(){return this.obj.parent("tr").index()};
d.prototype._startCellSelection=function(){if(!this.tableObj.selection.cellSelectionMode){this.tableObj.selection.unselectCells();this.tableObj.selection.cellSelectionMode=!0;var d=this;b("body").bind("mouseup.cellselection",function(b){d._endCellSelection();b.stopPropagation()});this.tableObj.selection.baseCellPosition=[this._virtualY(),this._virtualX()]}};d.prototype._endCellSelection=function(){this.tableObj.selection.cellSelectionMode&&(m.selectAnchorContents(this.tableObj.selection.selectedCells),
this.tableObj.selection.cellSelectionMode=!1,this.tableObj.selection.baseCellPosition=null,this.tableObj.selection.lastSelectionRange=null,this.tableObj.selection.selectionType="cell",b("body").unbind("mouseup.cellselection"))};d.prototype._getSelectedRect=function(){var b=this._virtualX(),d=this._virtualY(),f=this.tableObj.selection.baseCellPosition,a=f[1];a>b&&(a=b,b=f[1]);var c=f[0];c>d&&(c=d,d=f[0]);return{top:c,right:b,bottom:d,left:a}};d.prototype._selectCellRange=function(){if(!this.tableObj.selection.resizeMode&&
this.tableObj.selection.cellSelectionMode){var d=this._getSelectedRect(),e=this.tableObj,f=e.obj.children().children("tr"),f=m.makeGrid(f);e.selection.selectedCells=[];var a=e.get("classCellSelected");m.walkGrid(f,function(c,g,f){m.containsDomCell(c)&&(f>=d.top&&f<=d.bottom&&g>=d.left&&g<=d.right?(b(c.cell).addClass(a),e.selection.selectedCells.push(c.cell)):b(c.cell).removeClass(a))});e.selection.notifyCellsSelected()}};d.prototype._selectAll=function(d){d=d.jquery?d.get(0):d;if(b.browser.msie)document.getSelection?
(e=document.getSelection(),f=document.createRange(),f.selectNodeContents(d),e.removeAllRanges(),e.addRange(f)):document.selection&&(f=document.body.createTextRange(),f.moveToElementText(d),f.select());else{var e=window.getSelection();if(e.setBaseAndExtent)e.setBaseAndExtent(d,0,d,Math.max(0,d.innerText.length-1));else{window.opera&&"<BR>"==d.innerHTML.substring(d.innerHTML.length-4)&&(d.innerHTML+="&#160;");var f=document.createRange();f.selectNodeContents(d);e.removeAllRanges();e.addRange(f)}}};
d.prototype._editableMouseDown=function(b){this.tableObj.selection.unselectCells();this.tableObj.hasFocus&&("function"===typeof b.stopPropagation?b.stopPropagation():"undefined"!==typeof b.cancelBubble&&(b.cancelBubble=!0))};d.prototype._editableKeyUp=function(b){};d.prototype._editableKeyDown=function(b){this._checkForEmptyEvent(b);if(this.obj[0]===this.tableObj.obj.find("tr:last td:last")[0]&&9==b.keyCode&&!b.altKey&&!b.shiftKey&&!b.ctrlKey){var d=this.tableObj.addRow(this.obj.parent().index()+
1);f.mozilla&&(b.preventDefault(),$(d).find("td:nth-child(2) .aloha-table-cell-editable").focus())}};d.prototype._checkForEmptyEvent=function(d){d=b(this.wrapper);var e=d.text();0<d.children().length||""!==e||(this.wrapper.text("\u00a0"),this.wrapper.get(0).blur(),this.wrapper.get(0).focus())};d.getContainer=function(d){return b(d.firstChild).hasClass("aloha-table-cell-editable")?d.firstChild:d};return d});define("table/table-selection","aloha aloha/jquery table/table-plugin-utils table/table-cell ui/dialog i18n!table/nls/i18n".split(" "),
function(l,b,p,m,f,d){function k(a){return{top:a.top[0],right:a.right[0]+1,bottom:a.bottom[0]+1,left:a.left[0]}}function e(a,c,b){var d=!0;-1!==p.indexOfAnyBut(c.top,c.top[0])||-1!==p.indexOfAnyBut(c.right,c.right[0])||-1!==p.indexOfAnyBut(c.bottom,c.bottom[0])||-1!==p.indexOfAnyBut(c.left,c.left[0])?d=!1:(c=k(c),p.walkGridInsideRect(a,c,function(a){if(!b(a))return d=!1}));return d}var n=function(a){this.table=a};n.prototype.selectionType=void 0;n.prototype.selectedCells=[];n.prototype.selectedColumnIdxs=
[];n.prototype.selectedRowIdxs=[];n.prototype.cellSelectionMode=!1;n.prototype.baseCellPosition=null;n.prototype.lastSelectionRange=null;n.prototype.selectColumns=function(a){this.unselectCells();var c=this.table.getRows();c.shift();for(var c=p.makeGrid(c),d=0;d<a.length;d++)if(-1===b.inArray(a[d],this.selectedColumnIdxs)){this.selectedColumnIdxs.push(a[d]);for(var e=0;e<c.length;e++){var k=c[e][a[d]];p.containsDomCell(k)&&(b(k.cell).addClass(this.table.get("classCellSelected")),this.selectedCells.push(k.cell))}}this.selectionType=
"column"};n.prototype.selectRows=function(a){this.unselectCells();var c=this.table.getRows();a.sort(function(a,c){return a-c});for(var d=0;d<a.length;d++)if(c[a[d]]){for(var e=0;e<this.selectedRowIdxs.length;e++)if(a[d]==this.selectedRowIdxs[e])return;this.selectedRowIdxs.push(a[d]);for(e=1;e<c[a[d]].cells.length;e++)this.selectedCells.push(c[a[d]].cells[e]),b(c[a[d]].cells[e]).addClass(this.table.get("classCellSelected"))}this.selectionType="row"};n.prototype.selectAll=function(){var a=b.map(this.table.getRows(),
function(a,b){return b});a.shift();this.selectRows(a);this.selectionType="all"};n.prototype.notifyCellsSelected=function(){l.trigger("aloha-table-selection-changed")};n.prototype._notifyCellsUnselected=function(){l.trigger("aloha-table-selection-changed")};n.prototype.isHeader=function(){if(0==this.selectedCells.length)return!1;for(var a=0;a<this.selectedCells.length;a++)if(!this.selectedCells[a]||"th"!=this.selectedCells[a].nodeName.toLowerCase())return!1;return!0};n.prototype.unselectCells=function(){if(!this.cellSelectionMode&&
0<this.selectedCells.length){for(var a=this.selectedCells,c=this.table.get("classCellSelected"),d=0,e=a.length;d<e;d++)b(a[d]).removeClass(c);this.selectedCells=[];this.selectedColumnIdxs=[];this.selectedRowIdxs=[];this.selectionType="cell";this._notifyCellsUnselected()}};n.prototype.selectionIndex=function(a){for(var c=0;c<this.selectedCells.length;c++)if(this.selectedCells[c]===a)return c;return-1};n.prototype.mergeCells=function(){var a=this.selectedCells;if(0!==a.length){var c=function(c){return-1!=
b.inArray(c.cell,a)},g=p.makeGrid(this.table.getRows()),n=p.makeContour(g,c);if(e(g,n,c)){var u=k(n),c=b(g[u.top][u.left].cell),z=b(m.getContainer(c.get(0)));p.walkGridInsideRect(g,u,function(a,c,d){if(c-a.spannedX!==u.left||d-a.spannedY!==u.top){a=a.cell;c=b(m.getContainer(a)).contents();for(d=0;d<c.length;d++){var g=c[d];if("string"===typeof g&&""!==b.trim(g)||g.nodeType&&3===g.nodeType&&""!==b.trim(g.data)||1===g.nodeType){z.append(" ");z.append(c);break}}b(a).remove()}});c.attr({rowspan:u.bottom-
u.top,colspan:u.right-u.left});this.selectedCells=[c.get(0)];this.cellSelectionMode=!1;this.lastSelectionRange=this.baseCellPosition=null;this.selectionType="cell";l.trigger("aloha-table-selection-changed")}else f.alert({title:d.t("Table"),text:d.t("table.mergeCells.notRectangular")})}};n.prototype.splitCells=function(){var a=this,c=this.selectedCells;0<c.length&&(b(c).each(function(){p.splitCell(this,function(){return a.table.newActiveCell().obj})}),this.cellSelectionMode=!1,this.lastSelectionRange=
this.baseCellPosition=null,this.selectionType="cell",l.trigger("aloha-table-selection-changed"))};n.prototype.cellsAreMergeable=function(){var a=this.selectedCells;if(2>a.length)return!1;var c=function(c){return-1!=b.inArray(c.cell,a)},d=p.makeGrid(this.table.getRows()),k=p.makeContour(d,c);return e(d,k,c)?!0:!1};n.prototype.cellsAreSplitable=function(){var a=0;return 0<this.selectedCells.length?(b(this.selectedCells).each(function(){var c=p.colspan(this),b=p.rowspan(this);(1<c||1<b)&&a++}),0<a?!0:
!1):!1};return n});define("table/table","aloha jquery ui/scopes ui/dialog i18n!table/nls/i18n table/table-cell table/table-selection table/table-plugin-utils aloha/ephemera util/html util/dom2 aloha/console".split(" "),function(l,b,p,m,f,d,k,e,n,a,c,g){function v(a){a.jquery&&(a=a[0]);var c,b=[],d;for(c=0;c<a.childNodes.length;c++)d=a.childNodes[c],b.push(d),1===d.nodeType&&(b=b.concat(v(d)));return b}function u(a,c){var d;"first"===a?(d=b("[contenteditable]",c).first()[0].firstChild,y===d&&(d=b("*",
c).first()[0].firstChild)):"last"===a&&(d=v(b("td:last",c)).reverse()[0]);return d}function z(a,c,d,g){for(var e,k=!1,f=0;f<d.length;f++)g.showItem(d[f].name);g.setActiveItem();for(f=0;f<c.length;f++)if(b(a[0]).hasClass(c[f].cssClass)){k=!0;e=c[f].name;break}b(a).each(function(a){b(this).hasClass(e)||(k=!1)});k&&g.setActiveItem(e)}function A(a,c){var b=-1,d=null;"before"===a?d=c.selectedCells[0]:"after"===a&&(d=c.selectedCells[c.selectedCells.length-1]);d&&1==d.nodeType&&(b=d.parentNode.rowIndex);
return b}var y=void 0,C=window.GENTICS,q=function(a,c){this.obj=b(a);var d,g,f=this.getRows(),m=f.length,l,v=0,p=[m],u;for(d=0;d<m;d++){g=b(f[d]);g=g.children("td, th");l=g.length;l=e.cellIndexToGridColumn(f,d,l-1)+1;u=parseInt(g.last().attr("colspan"),10);0==u||isNaN(u)||(1==u&&g.last().removeAttr("colspan"),l+=u-1);rowSpan=parseInt(g.last().attr("rowspan"),10);if(1<rowSpan)for(g=1;g<rowSpan-1;g++)p[d+g]=1<u?p[d+g]+u:p[d+g]+1;p[d]+=l;p[d]>v&&(v=p[d])}for(d=0;d<m;d++)g=v-p[d],0<g&&b(f[d]).append(Array(g+
1).join("<td></td>"));this.obj.attr("id")||this.obj.attr("id",C.Utils.guid());n.markAttr(this.obj,"id");this.tablePlugin=c;this.selection=new k(this);this.refresh()};b.extend(q.prototype,{obj:y,tableWrapper:y,cells:y,numRows:y,numCols:y,isActive:!1,hasFocus:!1,parentEditable:y,mousedown:!1,clickedColumnId:-1,clickedRowId:-1,columnsToSelect:[],rowsToSelect:[],fmPluginId:y});q.prototype.refresh=function(){this.numCols=this.countVirtualCols();var a=this.getRows();this.numRows=a.length;this.cells=[];
for(var c=0;c<a.length;c++)for(var d=b(a[c]).children(),g=0;g<d.length;g++)this.newCell(d[g])};q.prototype.countVirtualCols=function(){var a=this.obj.children().children("tr:first-child").children();return a.length-a.filter("."+this.get("classLeftUpperCorner")).length};q.prototype.get=function(a){return this.tablePlugin.get(a)};q.prototype.set=function(a,c){this.tablePlugin.set(a,c)};q.prototype.activate=function(){function d(c){return!a.isUnrenderedNode(c)}if(!this.isActive){var g=this,e;this.obj.addClass(this.get("className"));
this.obj.contentEditable(!1);""==this.obj.attr("id")&&this.obj.attr("id",C.Utils.guid());this.selection.selectionType=y;e=this.obj.children("tbody");0===e.length&&(e=this.obj);e.bind("keydown",function(a){a.ctrlKey||a.shiftKey||0<g.selection.selectedCells.length&&0<g.selection.selectedCells[0].length&&g.selection.selectedCells[0][0].firstChild.focus()});l.bind("aloha-command-will-execute",function(b,e){var k=l.getSelection().getRangeAt(0),f;if("forwarddelete"===e.commandId){var n;if(n=k.collapsed){n=
k.startOffset;var m=k.startContainer;n=c.nodeLength(m)===n?!0:1===m.nodeType?!a.findNodeLeft(m.childNodes[n-1],d):3===m.nodeType?a.isWSPorZWSPText(m.data.substr(n)):!1}n&&(k=k.commonAncestorContainer,3===k.nodeType?f=k.parentNode&&a.findNodeLeft(k.parentNode.nextSibling,d):1===k.nodeType&&(f=a.findNodeLeft(k.nextSibling,d)),f===g.tableWrapper&&(e.preventDefault=!0,l.getSelection().collapse(u("first",g.obj),0)))}else{if(n="delete"===e.commandId)if(n=k.collapsed)n=k.startOffset,m=k.startContainer,n=
0===n?!0:1===m.nodeType?!a.findNodeRight(m.childNodes[n-1],d):3===m.nodeType?a.isWSPorZWSPText(m.data.substr(0,n)):!1;n&&(k=k.commonAncestorContainer,3===k.nodeType?f=k.parentNode&&a.findNodeRight(k.parentNode.previousSibling,d):1===k.nodeType&&(f=a.findNodeRight(k.previousSibling,d)),f===g.tableWrapper&&(f=u("last",g.obj),e.preventDefault=!0,l.getSelection().collapse(f,c.nodeLength(f))))}});this.obj.on("keydown",function(a){46===a.keyCode&&("row"===g.selection.selectionType?g.deleteRows():"column"===
g.selection.selectionType&&g.deleteColumns(),"function"===typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)});e.delegate("th, td","mousemove",function(a){var c=b(this);if(!b(this).hasClass("aloha-table-selectrow")&&!b(this).closest("tr").hasClass("aloha-table-selectcolumn")){var d=g.tablePlugin.rowResize;if(g.tablePlugin.colResize&&3>a.pageX-c.offset().left)return c.css("cursor","col-resize"),g.attachColumnResize(c);if(d&&3>a.pageY-c.offset().top)return c.css("cursor","row-resize"),
g.attachRowResize(c);d&&(d=c.closest("tr"),0<d.next("tr").length?d=!1:(a=a.pageY-(d.offset().top+d.outerHeight()),d=-3<a&&3>a));if(d)return c.css("cursor","row-resize"),g.attachRowResize(c,!0);c.css("cursor","default");return g.detachRowColResize(c)}});e.bind("mousemove",function(a){var c=b(this).closest("table"),d;if(d=g.tablePlugin.tableResize)a=a.pageX-(c.offset().left+c.outerWidth()),d=-5<a&&5>a;if(d)return g.attachTableResizeWidth(c)});e.bind("mousedown",function(a){g.hasFocus||g.focus();a.stopPropagation();
a.preventDefault();return!1});e=b('<div class="'+this.get("classTableWrapper")+'" data-block-skip-scope="true"></div>');e.contentEditable(!1);n.markWrapper(e);this.obj.wrap(e);e=this.obj.parent();e.alohaBlock&&e.alohaBlock();e=this.obj.parents("."+this.get("classTableWrapper"));e.get(0).onresizestart=function(a){return!1};e.get(0).oncontrolselect=function(a){return!1};e.get(0).ondragstart=function(a){return!1};e.get(0).onmovestart=function(a){return!1};this.tableWrapper=this.obj.parents("."+this.get("classTableWrapper")).get(0);
b(this.cells).each(function(){this.activate()});this.attachSelectionColumn();this.attachSelectionRow();this.makeCaptionEditable();this.checkWai();this.isActive=!0;l.trigger("aloha-table-activated")}};q.prototype.makeCaptionEditable=function(){var a=this.obj.find("caption").eq(0);a&&this.tablePlugin.makeCaptionEditable(a)};q.prototype.checkWai=function(){var a=this.wai;if(!a)return!1;var c=this.get("waiGreen"),d=this.get("waiRed");a.removeClass(c+" "+d);if(""!==b.trim(this.obj[0].summary))return a.addClass(c),
!0;a.addClass(d);return!1};q.prototype.attachSelectionColumn=function(){var a=b("<td>"),c,d,g,e;a.html("\u00a0");g=this.obj.context.rows;for(e=0;e<g.length;e++)d=b(g[e]),c=a.clone(),c.addClass(this.get("classSelectionColumn")),c.css("width",this.get("selectionArea")+"px"),d.prepend(c),this.attachRowSelectionEventsToCell(c)};q.prototype.attachRowSelectionEventsToCell=function(a){var c=this;n.markElement(a);a.unbind("mousedown");a.unbind("mouseover");a.get(0).onselectstart=function(){return!1};a.bind("mousedown",
function(a){return c.rowSelectionMouseDown(a)});a.bind("mouseover",function(a){if(c.mousedown)return c.rowSelectionMouseOver(a)})};q.prototype.rowSelectionMouseDown=function(a){this.focus();0==this.selection.selectedCells.length&&(this.rowsToSelect=[]);this.clickedRowId=a.currentTarget.parentNode.rowIndex;if(a.metaKey){var c=b.inArray(this.clickedRowId,this.rowsToSelect);0<=c?this.rowsToSelect.splice(c,1):this.rowsToSelect.push(this.clickedRowId)}else if(a.shiftKey){this.rowsToSelect.sort(function(a,
c){return a-c});var d=this.rowsToSelect[0],c=this.clickedRowId;d>c&&(d=c,c=this.rowsToSelect[0]);for(this.rowsToSelect=[];d<=c;d++)this.rowsToSelect.push(d)}else this.rowsToSelect=[this.clickedRowId];this.selectRows();a.preventDefault();a.stopPropagation();return!1};q.prototype.rowSelectionMouseOver=function(a){var c=a.currentTarget.parentNode.rowIndex,d;if(this.mousedown&&0<=this.clickedRowId){b.inArray(c,this.rowsToSelect);d=c<this.clickedRowId?c:this.clickedRowId;c=c<this.clickedRowId?this.clickedRowId:
c;for(this.rowsToSelect=[];d<=c;d++)this.rowsToSelect.push(d);this.selectRows();a.preventDefault();a.stopPropagation();return!1}};q.prototype.attachSelectionRow=function(){var a=this,c=b("<td>");c.html("\u00a0");for(var d=0,k=0;k<this.obj.context.rows.length;k++){for(var f=0,m=0;m<this.obj.context.rows[k].cells.length;m++)var l=e.colspan(this.obj.context.rows[k].cells[m]),f=f+l;d<f&&(d=f)}f=b("<tr>");f.addClass(this.get("classSelectionRow"));f.css("height",this.get("selectionArea")+"px");n.markElement(f);
for(k=0;k<d;k++)m=c.clone(),0<k?this.attachColumnSelectEventsToCell(m):(m=b("<td>").clone(),m.addClass(this.get("classLeftUpperCorner")),this.wai=b("<div/>").width(25).height(12).click(function(c){a.focus();a.selection.selectAll();a.tablePlugin.activeTable.selection.selectionType="cell";a.tablePlugin.updateFloatingMenuScope();a._removeCursorSelection();a.tablePlugin.settings.summaryinsidebar&&(a.tablePlugin.sidebar.open(),a.tablePlugin.sidebarPanel.activate(a.obj),a.tablePlugin.sidebar.correctHeight());
try{a.tablePlugin.summary.focus(),c.stopPropagation(),c.preventDefault()}catch(b){g.error("Table",b.message)}return!1}),m.append(this.wai)),f.append(m);b(document).bind("mouseup",function(c){a.columnSelectionMouseUp(c)});this.obj.find("tr:first").before(f)};q.prototype.attachColumnSelectEventsToCell=function(a){var c=this;a.unbind("mousedown");a.unbind("mouseover");a.get(0).onselectstart=function(){return!1};a.bind("mousedown",function(a){c.columnSelectionMouseDown(a)});a.bind("mouseover",function(a){c.columnSelectionMouseOver(a)})};
q.prototype.columnSelectionMouseDown=function(a){this.focus();0==this.selection.selectedCells.length&&(this.columnsToSelect=[]);this.clickedColumnId=b(a.currentTarget.parentNode).children().index(a.currentTarget);if(a.metaKey){var c=b.inArray(this.clickedColumnId,this.columnsToSelect);0<=c?this.columnsToSelect.splice(c,1):this.columnsToSelect.push(this.clickedColumnId)}else if(a.shiftKey){this.columnsToSelect.sort(function(a,c){return a-c});var d=this.columnsToSelect[0],c=this.clickedColumnId;d>c&&
(d=c,c=this.columnsToSelect[0]);for(this.columnsToSelect=[];d<=c;d++)this.columnsToSelect.push(d)}else this.columnsToSelect=[this.clickedColumnId];this.selectColumns();a.preventDefault();a.stopPropagation();return!1};q.prototype.columnSelectionMouseOver=function(a){var c=a.currentTarget.cellIndex;a=[];var b;if(this.mouseDownColIdx){b=c<this.mouseDownColIdx?c:this.mouseDownColIdx;for(c=c<this.mouseDownColIdx?this.mouseDownColIdx:c;b<=c;b++)a.push(b);this.selectColumns(a)}};q.prototype.columnSelectionMouseUp=
function(a){this.mouseDownColIdx=!1};q.prototype.deleteRows=function(){var a=[],c={},d=this;if(0!==this.selection.selectedCells.length){for(var g=0;g<this.selection.selectedCells.length;g++)c[this.selection.selectedCells[g].parentNode.rowIndex]=!0;for(rowId in c)a.push(rowId);c=!1;a.length==this.numRows&&(c=!0);if(c){var k=this;m.confirm({title:f.t("Table"),text:f.t("deletetable.confirm"),yes:function(){k.deleteTable()}})}else{a.sort(function(a,c){return a-c});var n=a[0];n>this.numRows-a.length&&
n--;var l=this.getRows();b.each(a,function(a,c){for(var b=l[c],g=0;g<b.cells.length;g++)e.splitCell(b.cells[g],function(){return d.newActiveCell().obj})});var v=e.makeGrid(l);b.each(a,function(a,c){for(var d=v[c],g=0;g<d.length;){var k=d[g],f=e.rowspan(k.cell);1<f&&b(k.cell).attr("rowspan",f-1);g+=k.colspan}b(l[c]).remove()});this.numRows-=a.length;window.setTimeout(function(){b(l[1].cells[n+1]).focus()},5);this.selection.unselectCells()}}};q.prototype.deleteColumns=function(){var a=[],c=this.getRows(),
d=this,g,k=e.makeGrid(c);if(this.selection.selectedColumnIdxs.length==k[0].length-1)m.confirm({title:f.t("Table"),text:f.t("deletetable.confirm"),yes:function(){d.deleteTable()}});else{a.sort(function(a,c){return a-c});for(var n=this.selection.selectedColumnIdxs.sort(function(a,c){return c-a}),l=0;l<n.length;l++){for(var v=n[l],p=0;p<c.length;p++)if(g=k[p][v]){if(0===g.spannedX){if(1<g.colspan){var u=this.newActiveCell().obj;b(g.cell).after(u);u.attr("rowspan",g.rowspan);u.attr("colspan",g.colspan-
1)}b(g.cell).remove()}else b(g.cell).attr("colspan",g.colspan-1);p+=g.rowspan-1}k=e.makeGrid(c)}this.numCols-=a.length;window.setTimeout(function(){b(c[1].cells[1]).focus()},5);this.selection.unselectCells()}};q.prototype.deleteTable=function(){for(var a=-1,c=0;c<this.tablePlugin.TableRegistry.length;c++)if(this.tablePlugin.TableRegistry[c].obj.attr("id")==this.obj.attr("id")){a=c;break}0<=a&&(this.deactivate(),this.selection.selectionType=y,this.tablePlugin.TableRegistry.splice(c,1),a=l.Selection.rangeObject,
a.endContainer=this.obj.get(0).parentNode,a.startContainer=a.endContainer,a.endOffset=C.Utils.Dom.getIndexInParent(this.obj.get(0)),a.startOffset=a.endOffset,a.clearCaches(),this.obj.remove(),this.parentEditable.obj.focus(),a.correctRange(),a.select())};q.prototype.addRowBeforeSelection=function(a){a=A("before",this.selection);-1!==a&&this.addRow(a)};q.prototype.addRowAfterSelection=function(){var a=A("after",this.selection);-1!==a&&this.addRow(a+1)};q.prototype.addRow=function(a){for(var c,d=this.get("classSelectionColumn"),
g=this.obj.children().children("tr"),k=0;1>k;k++){c=b("<tr>");var f=b("<td>");f.addClass(d);this.attachRowSelectionEventsToCell(f);c.append(f);var n=e.makeGrid(g);if(a>=n.length)for(f=1;f<n[0].length;f++)c.append(this.newActiveCell().obj);else for(var n=n[a],f=1,m=n.length;f<m;){var l=n[f];if(e.containsDomCell(l))for(var v=l.colspan;v--;)c.append(this.newActiveCell().obj);else b(l.cell).attr("rowspan",l.rowspan+1);f+=l.colspan}a>=g.length?g.eq(g.length-1).after(c):g.eq(a).before(c)}this.numRows+=
1;return c[0]};q.prototype.addColumnsRight=function(){this.addColumns("right")};q.prototype.addColumnsLeft=function(){this.addColumns("left")};q.prototype.addColumns=function(a){var c=b("<td>"),d=this.getRows(),g,k;g=this.selection.selectedColumnIdxs;if(0!==g.length)if(g.sort(function(a,c){return a-c}),e.isConsecutive(g)){if("left"===a){k=g[0];for(var n=0;n<this.selection.selectedColumnIdxs.length;n++)this.selection.selectedColumnIdxs[n]+=1}else k=g[g.length-1];for(var l=e.makeGrid(d),n=0;n<d.length;n++){g=
c.clone();g.html("\u00a0");0==n?this.attachColumnSelectEventsToCell(g):(cellObj=this.newActiveCell(g.get(0)),g=cellObj.obj);var v=e.leftDomCell(l,n,k);null==v?b(d[n]).prepend(g):"left"===a&&e.containsDomCell(l[n][k])?b(v).before(g):b(v).after(g);this.numCols++}}else m.alert({title:f.t("Table"),text:f.t("table.addColumns.nonConsecutive")})};q.prototype.focus=function(){this.hasFocus||(this.parentEditable.isActive||this.parentEditable.obj.focus(),this.tablePlugin.setFocusedTable(this))};q.prototype.focusOut=
function(){this.hasFocus&&(this.tablePlugin.setFocusedTable(y),this.selection.selectionType=y)};q.prototype._removeCursorSelection=function(){var a=l.getSelection();a&&a._nativeSelection&&0!=a._nativeSelection._ranges.length&&(a=a.getRangeAt(0),null!=a.startContainer&&0===b(a.startContainer).closest("table").length&&0!==this.selection.selectedCells.length&&(a=d.getContainer(this.selection.selectedCells[0]),b(a).focus()))};q.prototype.selectColumns=function(a){this.selection.selectColumns(a?a:this.columnsToSelect);
this.tablePlugin._columnheaderButton.setState(this.selection.isHeader());z(this.selection.selectedCells,this.tablePlugin.columnConfig,this.tablePlugin.columnMSItems,this.tablePlugin.columnMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();e.selectAnchorContents(this.selection.selectedCells);this.selection.notifyCellsSelected();this._removeCursorSelection();p.setScope(this.tablePlugin.name+".column")};q.prototype.selectRows=function(){this.selection.selectRows(this.rowsToSelect);this.tablePlugin._rowheaderButton.setState(this.selection.isHeader());
z(this.selection.selectedCells,this.tablePlugin.rowConfig,this.tablePlugin.rowMSItems,this.tablePlugin.rowMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();e.selectAnchorContents(this.selection.selectedCells);this.selection.notifyCellsSelected();this._removeCursorSelection();p.setScope(this.tablePlugin.name+".row")};q.prototype.deactivate=function(){var a=this.obj.parent();a.mahaloBlock&&a.mahaloBlock();this.obj.removeClass(this.get("className"));""==b.trim(this.obj.attr("class"))&&
this.obj.removeAttr("class");this.obj.removeAttr("contenteditable");this.obj.parents("."+this.get("classTableWrapper")).length&&this.obj.unwrap();this.obj.find("tr."+this.get("classSelectionRow")+":first").remove();var c=this;b.each(this.obj.context.rows,function(){b(this).children("td."+c.get("classSelectionColumn")).remove()});this.obj.find("td, th").removeClass(this.get("classCellSelected"));this.obj.find("td, th").removeClass("aloha-table-cell_active");this.obj.find("td, th").css("cursor","");
this.obj.unbind();this.obj.children("tbody").unbind();for(a=0;a<this.cells.length;a++)this.cells[a].deactivate();this.obj.find("caption div").each(function(){b(this).contents().unwrap()});this.isActive=!1};q.prototype.attachColumnResize=function(a){var c=this;c.detachRowColResize(a);var d=a.closest("tbody").children("tr"),g=a.closest("tr"),k=e.cellIndexToGridColumn(d,d.index(g),g.children().index(a)),f=function(a){var c,g;e.walkCells(d,function(f,n,m,l,v){f=b(b(d[f]).children()[n]);if(f.hasClass("aloha-table-selectrow")||
f.closest("tr").hasClass("aloha-table-selectcolumn")||1<l)return!0;m===k?(g||(g=f.width()-a),e.resizeCellWidth(f,g)):m===k-1&&(c||(c=f.width()+a),e.resizeCellWidth(f,c));return!0})};a.bind("mousedown.resize",function(){var g=b("<div></div>"),n=b(a),m=n.outerWidth()-n.innerWidth(),l=n.closest("tbody").innerHeight();g.css({height:1>l?1:l,width:1>m?1:m,top:n.closest("tbody").offset().top,left:n.offset().left,position:"absolute","background-color":"#80B5F2"});b("body").append(g);e.getCellResizeBoundaries(k,
d,function(d,e){c.selection.resizeMode=!0;b("body").bind("mousemove.dnd_col_resize",function(a){a.pageX>e&&a.pageX<d&&g.css("left",a.pageX)});b("body").bind("mouseup.dnd_col_resize",function(k){var n=0;k.pageX<e?n=e-a.offset().left:k.pageX>e&&k.pageX<d?n=k.pageX-a.offset().left:k.pageX>d&&(n=d-a.offset().left);0!==n&&f(n);b("body").unbind("mousemove.dnd_col_resize");b("body").unbind("mouseup.dnd_col_resize");c.selection.resizeMode=!1;g.remove()})})})};q.prototype.attachRowResize=function(a,c){var d=
this;d.detachRowColResize(a);a.bind("mousedown.resize",function(){var g=b("<div></div>"),e=a.closest("tbody").innerWidth(),k=a.outerHeight()-a.innerHeight();g.css({width:1>e?1:e,height:1>k?1:k,top:c?a.offset().top+a.outerHeight():a.offset().top,left:a.closest("tbody").offset().left,position:"absolute","background-color":"#80B5F2"});b("body").append(g);d.selection.resizeMode=!0;b("body").bind("mousemove.dnd_row_resize",function(b){var d=b.pageY,e;e=c?a.closest("tr").offset().top:a.closest("tr").prev("tr").offset().top;
d>e&&g.css("top",b.pageY)});b("body").bind("mouseup.dnd_row_resize",function(e){var k=0,k=c?e.pageY-(a.offset().top+a.outerHeight()):e.pageY-a.offset().top;e=c?a.closest("tr"):a.closest("tr").prev("tr");k=e.height()+k;0>k&&(k=1);e.css("height",k);b("body").unbind("mousemove.dnd_row_resize");b("body").unbind("mouseup.dnd_row_resize");d.selection.resizeMode=!1;g.remove()})})};q.prototype.attachTableResizeWidth=function(a){var c=this,d=a.closest(".aloha-table-wrapper"),g=a.find("tr:not(.aloha-table-selectcolumn) th:last-child, tr:not(.aloha-table-selectcolumn) td:last-child"),
k;b.each(g,function(){if(!b(this).attr("colspan")||2>b(this).attr("colspan"))return k=b(this),!1});g.css("cursor","col-resize");var f=function(c){var d=a.find("tr"),g=k.closest("tr"),f=e.cellIndexToGridColumn(d,d.index(g),g.children().index(k)),n=c-e.getCellBorder(k)-e.getCellPadding(k);e.walkCells(d,function(a,c,g,k,m){a=b(b(d[a]).children()[c]);if(a.hasClass("aloha-table-selectrow")||a.closest("tr").hasClass("aloha-table-selectcolumn")||1<k)return!0;g===f?e.resizeCellWidth(a,n):e.resizeCellWidth(a,
a.width());return!0})};g.bind("mousedown.resize",function(){var n=b("<div></div>"),m=a.children("tbody").innerHeight(),l=k.outerWidth()-k.innerWidth();n.css({height:1>m?1:m,width:1>l?1:l,top:a.find("tbody").offset().top,left:a.offset().left+a.outerWidth(),position:"absolute","background-color":"#80B5F2"});b("body").append(n);var v=d.offset().left+d.width(),p=k.offset().left+(k.innerWidth()-k.width())+e.getMinColWidth(k);c.selection.resizeMode=!0;b("body").bind("mousemove.dnd_col_resize",function(a){a.pageX>
p&&a.pageX<v&&n.css("left",a.pageX)});b("body").bind("mouseup.dnd_col_resize",function(a){var d=0;a.pageX<=p?d=p-k.offset().left:a.pageX>p&&a.pageX<v?d=a.pageX-k.offset().left:a.pageX>v&&(d=v-k.offset().left);f(d);b("body").unbind("mousemove.dnd_col_resize");b("body").unbind("mouseup.dnd_col_resize");g.unbind("mousedown.resize");g.css("cursor","default");c.selection.resizeMode=!1;n.remove()})})};q.prototype.detachRowColResize=function(a){return a.unbind("mousedown.resize")};q.prototype.toString=function(){return"Table"};
q.prototype.newCell=function(a){return new d(a,this)};q.prototype.newActiveCell=function(a){a=new d(a,this);a.activate();return a};q.prototype.getRows=function(){var a=this.obj.get(0).rows;return b.makeArray(a)};return q});define("table/table-plugin","aloha jquery aloha/plugin aloha/pluginmanager ui/ui ui/scopes ui/button ui/toggleButton ui/dialog ui/port-helper-attribute-field ui/port-helper-multi-split i18n!table/nls/i18n i18n!aloha/nls/i18n table/table-create-layer table/table table/table-plugin-utils util/dom aloha/ephemera aloha/console".split(" "),
function(l,b,p,m,f,d,k,e,n,a,c,g,v,u,z,A,y,q,s){function B(a){var c=x(a.summary.getInputElem()),b=a.activeTable.get("waiRed"),d=a.activeTable.get("waiGreen");c.removeClass(b+" "+d);a.activeTable.checkWai()?c.addClass(d):c.addClass(b)}function r(a){var c=x(a),b;if(b=L.Utils.Dom.isEditable(a))if(b=!(0<c.parents(".aloha-editable table").length)){a:{var d,g=c.parents();for(b=0;b<g.length;b++){d=g.eq(b);if(d.is(".aloha-editable")){b=!1;break a}if(d.is(".aloha-block")){b=!0;break a}}b=!1}b=!b}return b?
(b=new z(a,I),a=x(y.getEditingHostOf(a)),b.parentEditable=l.getEditableById(a.attr("id")),I.TableRegistry.push(b),a=c.is("table")?"table":"table table",c.find(a).length&&s.warn("Table Plugin","Nested tables found. They will not be initialized."),l.activeEditable===b.parentEditable&&b.activate(),b):null}function t(a,c){var d,g,e=a.selection.isHeader(),k;for(d=0;d<a.selection.selectedCells.length;d++){k=a.selection.selectedCells[d];for(g=0;g<a.cells.length;g++)if(k===a.cells[g].obj[0]){cell=a.cells[g];
break}g=e?l.Markup.transformDomObject(k,"td").removeAttr("scope").get(0):l.Markup.transformDomObject(k,"th").attr("scope",c).get(0);null!=cell&&(cell.obj[0]=g,cell.deactivate(),cell.activate());b(a.selection.selectedCells[d]).bind("mousedown",function(a){var c=b(this).children("div").eq(0);window.setTimeout(function(){c.trigger("focus")},1)})}}function M(a,c,d){for(var g=!0,e=0;e<d.length;e++)if(0>b(d[e]).attr("class").indexOf(c)){g=!1;break}if(g)for(e=0;e<d.length;e++)b(d[e]).removeClass(c);else for(e=
0;e<d.length;e++)for(b(d[e]).addClass(c),g=0;g<a.length;g++)a[g].cssClass!=c&&b(d[e]).removeClass(a[g].cssClass)}function F(){var a=[],c=T;b.each(arguments,function(){a.push("."+(""==this?c:c+"-"+this))});return b.trim(a.join(" "))}function H(){var a=[],c=T;b.each(arguments,function(){a.push(""==this?c:c+"-"+this)});return b.trim(a.join(" "))}function S(a,c){var d=a.endContainer,g=a.startContainer,e=3==d.nodeType?d.length:d.childNodes.length;3==g.nodeType&&"P"==g.parentNode.tagName&&1==g.parentNode.childNodes.length&&
/^(\s|%A0)$/.test(escape(g.data))&&(g.data="",a.startOffset=0,d==g&&(a.endOffset=0));L.Utils.Dom.allowsNesting(3==g.nodeType?g.parentNode:g,c)||(0==a.startOffset&&b(3==g.nodeType?g.parentNode:g).addClass("aloha-table-cleanme"),a.endOffset==e&&b(3==d.nodeType?d.parentNode:d).addClass("aloha-table-cleanme"))}function K(){for(var a=b(".aloha-table-cleanme").removeClass("aloha-table-cleanme"),c=0;c<a.length;c++)""!=b.trim(b(a[c]).html())||L.Utils.Dom.isEditingHost(a[c])||b(a[c]).remove()}var x=b,L=window.GENTICS,
I=new p("table");I.createLayer=void 0;I.config=["table"];I.TableRegistry=[];I.activeTable=void 0;I.parameters={className:"aloha-table",classSelectionRow:"aloha-table-selectcolumn",classSelectionColumn:"aloha-table-selectrow",classLeftUpperCorner:"aloha-table-leftuppercorner",classTableWrapper:"aloha-table-wrapper",classCellSelected:"aloha-cell-selected",waiRed:"aloha-wai-red",waiGreen:"aloha-wai-green",selectionArea:10};I.checkConfig=function(a){if("object"==typeof a&&a.length){for(var c=[],b=0;b<
a.length;b++)a[b]&&c.push({name:a[b].name,text:a[b].text?a[b].text:a[b].name,tooltip:a[b].tooltip?a[b].tooltip:a[b].text,iconClass:a[b].iconClass?a[b].iconClass:"aloha-icon-"+a[b].name,cssClass:a[b].cssClass?a[b].cssClass:a[b].name});a=c}else a=[];return a};I.init=function(){var a=this,c={};q.classes(this.get("className"),this.get("classCellSelected"));this.tableConfig=this.checkConfig(this.tableConfig||this.settings.tableConfig);this.columnConfig=this.checkConfig(this.columnConfig||this.settings.columnConfig);
this.rowConfig=this.checkConfig(this.rowConfig||this.settings.rowConfig);this.cellConfig=this.checkConfig(this.cellConfig||this.settings.cellConfig);this.tableResize=void 0===this.settings.tableResize?!1:this.settings.tableResize;this.colResize=void 0===this.settings.colResize?!1:this.settings.colResize;this.rowResize=void 0===this.settings.rowResize?!1:this.settings.rowResize;b.browser.msie&&8>parseInt(b.browser.version,10)&&(this.rowResize=this.colResize=this.tableResize=!1);this.createLayer=new u(this);
l.bind("aloha-editable-created",function(d,g){var e=a.getEditableConfig(g.obj);c[g.getId()]=-1!==b.inArray("table",e);g.obj.bind("mousedown",function(a){I.setFocusedTable(void 0)});g.obj.find("table").each(function(a,c){r(c)})});this.initTableButtons();l.bind("aloha-table-selection-changed",function(){"undefined"!==typeof I.activeTable&&I.activeTable.selection&&(I.updateFloatingMenuScope(),I.activeTable.selection.cellsAreSplitable()?(a._splitcellsButton.enable(!0),a._splitcellsRowButton.enable(!0),
a._splitcellsColumnButton.enable(!0)):(a._splitcellsButton.enable(!1),a._splitcellsRowButton.enable(!1),a._splitcellsColumnButton.enable(!1)),I.activeTable.selection.cellsAreMergeable()?(a._mergecellsButton.enable(!0),a._mergecellsRowButton.enable(!0),a._mergecellsColumnButton.enable(!0)):(a._mergecellsButton.enable(!1),a._mergecellsRowButton.enable(!1),a._mergecellsColumnButton.enable(!1)))});l.bind("aloha-selection-changed",function(b,d){d.startContainer&&l.activeEditable&&(c[l.activeEditable.getId()]&&
l.Selection.mayInsertTag("table")?a._createTableButton.show():a._createTableButton.hide(),a.activeTable&&(d.findMarkup(function(){return"TABLE"===this.nodeName},l.activeEditable.obj)?(I.updateFloatingMenuScope(),I.setActiveCellStyle()):(a.activeTable.selection.cellSelectionMode=!1,a.activeTable.selection.baseCellPosition=null,a.activeTable.selection.lastSelectionRange=null,a.activeTable.focusOut())))});l.bind("aloha-editable-activated",function(c,d){a._splitcellsButton.enable(!1);a._mergecellsButton.enable(!1);
a._splitcellsRowButton.enable(!1);a._mergecellsRowButton.enable(!1);a._splitcellsColumnButton.enable(!1);a._mergecellsColumnButton.enable(!1);d.editable.obj.find("table").each(function(){for(var a=I.TableRegistry,c=0;c<a.length;c++)if(a[c].obj.attr("id")===b(this).attr("id"))return a[c].activate(),!0;r(this)})});l.bind("aloha-editable-deactivated",function(){I.activeTable&&I.activeTable.selection.unselectCells();I.setFocusedTable(void 0);for(var a=I.TableRegistry,c=0;c<a.length;c++)a[c].deactivate()});
l.bind("aloha-smart-content-changed",function(){l.activeEditable&&l.activeEditable.obj.find("table").each(function(){-1==I.indexOfTableInRegistry(this)&&r(this)&&(this.id=L.Utils.guid())})});this.settings.summaryinsidebar&&l.bind("aloha-plugins-loaded",function(){a.initSidebar(l.Sidebar.right.show())})};var T="aloha-table";I.initSidebar=function(a){var c=this;c.sidebar=a;c.sidebarPanel=a.addPanel({id:H("sidebar-panel"),title:g.t("table.sidebar.title"),content:"",expanded:!0,activeOn:"table",onInit:function(){var a=
this;this.setContent('<label class="'+H("label")+'" for="'+H("textarea")+'" >'+g.t("table.label.target")+'</label><textarea id="'+H("textarea")+'" class="'+H("textarea")+'" />');b(F("textarea")).live("keyup",function(){b(a.effective).attr("summary",b(F("textarea")).val());var d=b('div[class*="wai"]',"table#"+b(a.effective).attr("id"));d.removeClass(c.get("waiGreen"));d.removeClass(c.get("waiRed"));""!=b(F("textarea")).val().trim()?d.addClass(c.get("waiGreen")):d.addClass(c.get("waiRed"))})},onActivate:function(a){this.effective=
a;b(F("textarea")).val(b(this.effective).attr("summary"))}});a.show()};I.isEditableTable=function(a){return L.Utils.Dom.isEditable(a)};I.indexOfTableInRegistry=function(a){for(var c=this.TableRegistry,b=0;b<c.length;b++)if(c[b].obj[0].id==a.id)return b;return-1};I.getTableFromRegistry=function(a){a=this.indexOfTableInRegistry(a);return-1<a?this.TableRegistry[a]:null};I.isSelectionInTable=function(){var a=l.Selection.getRangeObject(),a=b(a.commonAncestorContainer);return 0==a.length?!1:a.parents(".aloha-editable table").length?
!0:!1};I.preventNestedTables=function(){return this.isSelectionInTable()?(n.alert({title:g.t("Table"),text:g.t("table.createTable.nestedTablesNoSupported")}),!0):!1};I.initMergeSplitCellsBtns=function(){this._mergecellsButton=f.adopt("mergecells",k,{tooltip:g.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".cell",click:function(){I.activeTable&&I.activeTable.selection.mergeCells()}});this._splitcellsButton=f.adopt("splitcells",k,{tooltip:g.t("button.splitcells.tooltip"),
icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".cell",click:function(){var a;I.activeTable&&(0<I.activeTable.selection.selectedCells.length?I.activeTable.selection.splitCells():(a=I.selectedOrActiveCells(),0<a.length&&(A.splitCell(a,function(){return I.activeTable.newActiveCell().obj}),l.trigger("aloha-table-selection-changed"))))}});this._mergecellsRowButton=f.adopt("mergecellsRow",k,{tooltip:g.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".row",
click:function(){I.activeTable&&I.activeTable.selection.mergeCells()}});this._splitcellsRowButton=f.adopt("splitcellsRow",k,{tooltip:g.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".row",click:function(){I.activeTable&&I.activeTable.selection.splitCells()}});this._mergecellsColumnButton=f.adopt("mergecellsColumn",k,{tooltip:g.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".column",click:function(){I.activeTable&&I.activeTable.selection.mergeCells()}});
this._splitcellsColumnButton=f.adopt("splitcellsColumn",k,{tooltip:g.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".column",click:function(){I.activeTable&&I.activeTable.selection.splitCells()}})};I.initNaturalFitBtn=function(){var a=this;if(this.colResize||this.rowResize)this._tableNaturalFitButton=f.adopt("naturalFit",k,{tooltip:g.t("button.naturalfit.tooltip"),icon:"aloha-icon aloha-icon-table-naturalfit",scope:this.name+".cell",click:function(){if(a.activeTable){var c=
a.activeTable.obj;c.find("td, th").each(function(){b(this).find("div").css("width","");b(this).css("width","")});c.find("tr").each(function(){b(this).css("height","")})}}})};I.initRowsBtns=function(){var a=this;this._addrowbeforeButton=f.adopt("addrowbefore",k,{tooltip:g.t("button.addrowbefore.tooltip"),icon:"aloha-icon aloha-icon-addrowbefore",scope:this.name+".row",click:function(){a.activeTable&&a.activeTable.addRowBeforeSelection()}});this._addrowafterButton=f.adopt("addrowafter",k,{tooltip:g.t("button.addrowafter.tooltip"),
icon:"aloha-icon aloha-icon-addrowafter",scope:this.name+".row",click:function(){a.activeTable&&a.activeTable.addRowAfterSelection()}});this._deleterowsButton=f.adopt("deleterows",k,{tooltip:g.t("button.delrows.tooltip"),icon:"aloha-icon aloha-icon-deleterows",scope:this.name+".row",click:function(){if(a.activeTable){var c=a.activeTable;n.confirm({title:g.t("Table"),text:g.t("deleterows.confirm"),yes:function(){c.deleteRows()}})}}});this._rowheaderButton=f.adopt("rowheader",e,{tooltip:g.t("button.rowheader.tooltip"),
icon:"aloha-icon aloha-icon-rowheader",scope:this.name+".row",click:function(){a.activeTable&&(a.activeTable.refresh(),t(a.activeTable,"col"),a.activeTable.selection.unselectCells(),a.activeTable.selection.selectRows(a.activeTable.selection.selectedRowIdxs))}});this.rowMSItems=[];b.each(this.rowConfig,function(c,b){a.rowMSItems.push({name:b.name,text:g.t(b.text),tooltip:g.t(b.tooltip),iconClass:"aloha-icon aloha-row-layout "+b.iconClass,click:function(){a.activeTable&&(M(a.rowConfig,b.cssClass,a.activeTable.selection.selectedCells),
a.activeTable.selectRows())}})});0<this.rowMSItems.length&&this.rowMSItems.push({name:"removeFormat",text:g.t("button.removeFormat.text"),tooltip:g.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var c=a.activeTable.selection.selectedCells,d=0;d<c.length;d++)for(var g=0;g<a.rowConfig.length;g++)b(c[d]).removeClass(a.rowConfig[g].cssClass);a.activeTable.selectRows()}}});this.rowMSButton=c({items:this.rowMSItems,name:"formatRow",hideIfEmpty:!0,
scope:this.name+".row"})};I.initColumnBtns=function(){var a=this;this._addcolumnleftButton=f.adopt("addcolumnleft",k,{tooltip:g.t("button.addcolleft.tooltip"),icon:"aloha-icon aloha-icon-addcolumnleft",scope:this.name+".column",click:function(){a.activeTable&&a.activeTable.addColumnsLeft()}});this._addcolumnrightButton=f.adopt("addcolumnright",k,{tooltip:g.t("button.addcolright.tooltip"),icon:"aloha-icon aloha-icon-addcolumnright",scope:this.name+".column",click:function(){a.activeTable&&a.activeTable.addColumnsRight()}});
this._deletecolumnsButton=f.adopt("deletecolumns",k,{tooltip:g.t("button.delcols.tooltip"),icon:"aloha-icon aloha-icon-deletecolumns",scope:this.name+".column",click:function(){if(a.activeTable){var c=a.activeTable;n.confirm({title:g.t("Table"),text:g.t("deletecolumns.confirm"),yes:function(){c.deleteColumns()}})}}});this._columnheaderButton=f.adopt("columnheader",e,{tooltip:g.t("button.columnheader.tooltip"),icon:"aloha-icon aloha-icon-columnheader",scope:this.name+".column",click:function(){a.activeTable&&
(a.activeTable.refresh(),t(a.activeTable,"row"),a.activeTable.selection.unselectCells(),a.activeTable.selection.selectColumns(a.activeTable.selection.selectedColumnIdxs))}});this.columnMSItems=[];b.each(this.columnConfig,function(c,b){var d={name:b.name,text:g.t(b.text),tooltip:g.t(b.tooltip),iconClass:"aloha-icon aloha-column-layout "+b.iconClass,click:function(c,d,g){a.activeTable&&(M(a.columnConfig,b.cssClass,a.activeTable.selection.selectedCells),a.activeTable.selectColumns())}};a.columnMSItems.push(d)});
0<this.columnMSItems.length&&this.columnMSItems.push({name:"removeFormat",text:g.t("button.removeFormat.text"),tooltip:g.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var c=a.activeTable.selection.selectedCells,d=0;d<c.length;d++)for(var g=0;g<a.columnConfig.length;g++)b(c[d]).removeClass(a.columnConfig[g].cssClass);a.activeTable.selectColumns()}}});this.columnMSButton=c({items:this.columnMSItems,name:"formatColumn",hideIfEmpty:!0,
scope:this.name+".column"})};I.initCellBtns=function(){var a=this;this.cellMSItems=[];b.each(this.cellConfig,function(c,b){var d={name:b.name,text:g.t(b.text),tooltip:g.t(b.tooltip),iconClass:"aloha-icon aloha-column-layout "+b.iconClass,click:function(c,d,g){a.activeTable&&(M(a.cellConfig,b.cssClass,a.selectedOrActiveCells()),a.setActiveCellStyle())}};a.cellMSItems.push(d)});0<this.cellMSItems.length&&this.cellMSItems.push({name:"removeFormat",text:g.t("button.removeFormat.text"),tooltip:g.t("button.removeFormat.tooltip"),
cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var c=a.selectedOrActiveCells(),d=0;d<c.length;d++)for(var g=0;g<a.cellConfig.length;g++)b(c[d]).removeClass(a.cellConfig[g].cssClass);a.setActiveCellStyle()}}});this.cellMSButton=c({items:this.cellMSItems,name:"formatCell",hideIfEmpty:!0,scope:this.name+".cell"})};I.initTableButtons=function(){var n=this;d.createScope(this.name+".row","Aloha.continuoustext");d.createScope(this.name+".column","Aloha.continuoustext");
d.createScope(this.name+".cell","Aloha.continuoustext");this._createTableButton=f.adopt("createTable",k,{tooltip:g.t("button.createtable.tooltip"),icon:"aloha-icon aloha-icon-createTable",scope:"Aloha.continuoustext",click:function(){I.createDialog(this.element)}});this.initColumnBtns();this.initRowsBtns();this.initCellBtns();this.initMergeSplitCellsBtns();this.initNaturalFitBtn();this.tableMSItems=[];var m=this.tableConfig;b.each(m,function(a,c){n.tableMSItems.push({name:c.name,text:g.t(c.text),
tooltip:g.t(c.tooltip),iconClass:"aloha-icon aloha-table-layout "+c.iconClass,click:function(){if(n.activeTable)if(n.activeTable.obj.hasClass(c.cssClass)){for(a=0;a<m.length;a++)n.activeTable.obj.removeClass(m[a].cssClass);n.tableMSButton.setActiveItem()}else{for(var a=0;a<m.length;a++)n.activeTable.obj.removeClass(m[a].cssClass);n.activeTable.obj.addClass(c.cssClass);n.tableMSButton.setActiveItem(c.cssClass)}}})});0<this.tableMSItems.length&&this.tableMSItems.push({name:"removeFormat",text:g.t("button.removeFormat.text"),
tooltip:g.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(n.activeTable){for(var a=0;a<m.length;a++)n.activeTable.obj.removeClass(n.tableConfig[a].cssClass);n.tableMSButton.setActiveItem()}}});this.tableMSButton=c({items:this.tableMSItems,name:"formatTable",hideIfEmpty:!0,scope:this.name+".cell"});this._tableCaptionButton=f.adopt("tableCaption",e,{tooltip:g.t("button.caption.tooltip"),icon:"aloha-icon aloha-icon-table-caption",scope:this.name+".cell",
click:function(){if(n.activeTable){var a=n.activeTable.obj.children("caption");if(a.is("caption")&&a.is(":visible"))a.hide();else{a.is("caption")||(a=b("<caption></caption>"),n.activeTable.obj.prepend(a));a.show();0===b.trim(a.text()).length&&a.text(g.t("empty.caption"));n.makeCaptionEditable(a,a.text());var a=a.find("div").eq(0),c=a.contents().eq(0);if(0<c.length){var d=new L.Utils.RangeObject;d.startContainer=d.endContainer=c.get(0);d.startOffset=0;d.endOffset=c.text().length;n.activeTable.obj.find("div.aloha-table-cell-editable").blur();
a.focus();d.select();l.Selection.updateSelection()}}}}});this.summary=a({width:275,name:"tableSummary",noTargetHighlight:!0,scope:this.name+".cell",element:b('<input id="aloha-attribute-field-tableSummary" class="aloha-wai-red" style="color: black; padding-left: 32px; background-color: white"/>')});this.summary.addListener("keyup",function(){n.activeTable&&B(n)})};I.makeCaptionEditable=function(a,c){var d=a.children("div");0===d.length?(d=b("<div></div>"),d.addClass("aloha-ui aloha-editable-caption aloha-block"),
q.markWrapper(d),0<a.contents().length?d.append(a.contents()):c&&d.text(c),a.append(d)):1<d.length&&(a.children("div:not(:first-child)").each(function(){$this=b(this);d.eq(0).append($this.contents());$this.remove()}),d=d.eq(0));d.contentEditable(!0)};I.createDialog=function(a){this.createLayer.set("target",a);this.createLayer.show()};I.createTable=function(a,c){if(!this.preventNestedTables())if(l.activeEditable&&"undefined"!==typeof l.activeEditable.obj){for(var d=document.createElement("table"),
g=d.id=L.Utils.guid(),e=document.createElement("tbody"),k=0;k<c;k++){for(var f=document.createElement("tr"),n=0;n<a;n++){var m=document.createTextNode("\u00a0"),v=document.createElement("td");v.appendChild(m);f.appendChild(v)}e.appendChild(f)}d.appendChild(e);S(l.Selection.getRangeObject(),d);L.Utils.Dom.insertIntoDOM(b(d),l.Selection.getRangeObject(),l.activeEditable.obj);K();var d=document.getElementById(g),p=r(d);p&&(x.browser.msie?window.setTimeout(function(){p.cells[0].wrapper.get(0).focus()},
20):p.cells[0].wrapper.get(0).focus());p.focus();I.activeTable.selection.selectionType="cell";I.updateFloatingMenuScope()}else this.error("There is no active Editable where the table can be\t\t\t\tinserted!")};I.setFocusedTable=function(a){null!=this.activeTable&&this.activeTable.selection.unselectCells();for(var c=0;c<I.TableRegistry.length;c++)I.TableRegistry[c].hasFocus=!1;"undefined"!=typeof a&&(this.summary.setTargetObject(a.obj,"summary"),a.obj.children("caption").is("caption")&&(this._tableCaptionButton.setState(!0),
c=a.obj.children("caption"),this.makeCaptionEditable(c)),a.hasFocus=!0);I.activeTable=a;I.activeTable&&B(I);for(c=0;c<this.tableMSItems.length;c++)this.tableMSButton.showItem(this.tableMSItems[c].name);this.tableMSButton.setActiveItem();if(this.activeTable)for(c=0;c<this.tableConfig.length;c++)this.activeTable.obj.hasClass(this.tableConfig[c].cssClass)&&this.tableMSButton.setActiveItem(this.tableConfig[c].name)};I.error=function(a){l.Log.error(this,a)};I.debug=function(a){l.Log.debug(this,a)};I.info=
function(a){l.Log.info(this,a)};I.log=function(a){l.log("log",this,a)};I.get=function(a){if(this.config[a])return this.config[a];if(this.parameters[a])return this.parameters[a]};I.set=function(a,c){this.config[a]?this.config[a]=c:this.parameters[a]=c};I.makeClean=function(a){a.find("td, th").css("cursor","")};I.toString=function(){return this.prefix};I.updateFloatingMenuScope=function(){null!=I.activeTable&&null!=I.activeTable.selection.selectionType&&d.setScope(I.name+"."+I.activeTable.selection.selectionType)};
I.setActiveCellStyle=function(){var a=!1,c;this.cellMSButton.setActiveItem();for(var d=this.selectedOrActiveCells(),g=0;g<this.cellConfig.length;g++)if(b(d[0]).hasClass(this.cellConfig[g].cssClass)){c=this.cellConfig[g].name;a=!0;break}b(d).each(function(d){b(this).hasClass(c)||(a=!1)});a&&this.cellMSButton.setActiveItem(c)};I.selectedOrActiveCells=function(){var a=this.activeTable.selection.selectedCells;return!a||1>a.length?(a=function(){var a=l.Selection.getRangeObject();return l.activeEditable?
a.findMarkup(function(){return"td"===this.nodeName.toLowerCase()},l.activeEditable.obj):null}())?[a]:[]:a};m.register(I);return I});define("format/nls/i18n",{root:{"button.strong.tooltip":"Strong","button.em.tooltip":"Emphasize","button.b.tooltip":"Bold","button.i.tooltip":"Italic","button.u.tooltip":"Underline","button.cite.tooltip":"Cite","button.q.tooltip":"Tooltip","button.code.tooltip":"Code","button.abbr.tooltip":"Abbreviation","button.del.tooltip":"Strikethrough","button.s.tooltip":"Strikethrough",
"button.sub.tooltip":"Subscript","button.sup.tooltip":"Superscript","button.p.tooltip":"Paragraph","button.h1.tooltip":"Heading 1","button.h2.tooltip":"Heading 2","button.h3.tooltip":"Heading 3","button.h4.tooltip":"Heading 4","button.h5.tooltip":"Heading 5","button.h6.tooltip":"Heading 6","button.pre.tooltip":"Preformatted text","button.title.tooltip":"Title","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting",GENTICS_button_p:"GENTICS_button_p",GENTICS_button_h1:"GENTICS_button_h1",
GENTICS_button_h2:"GENTICS_button_h2",GENTICS_button_h3:"GENTICS_button_h3",GENTICS_button_h4:"GENTICS_button_h4",GENTICS_button_h5:"GENTICS_button_h5",GENTICS_button_h6:"GENTICS_button_h6",GENTICS_button_pre:"GENTICS_button_pre",GENTICS_button_title:"GENTICS_button_title",formatBold:"Ctrl+b",formatItalic:"Ctrl+i",formatUnderline:"Ctrl+u",formatParagraph:"Alt+Ctrl+0",formatH1:"Alt+Ctrl+1",formatH2:"Alt+Ctrl+2",formatH3:"Alt+Ctrl+3",formatH4:"Alt+Ctrl+4",formatH5:"Alt+Ctrl+5",formatH6:"Alt+Ctrl+6",
formatPre:"Alt+Ctrl+P",formatDel:"Ctrl+\\",formatSub:"Ctrl+,",formatSup:"Ctrl+.","floatingmenu.tab.format":"Format","format.class.legend":"CSS class","format.class.none":"none"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("format/format-plugin","aloha aloha/plugin aloha/state-override jquery util/arrays util/maps ui/ui ui/toggleButton ui/port-helper-multi-split PubSub i18n!format/nls/i18n i18n!aloha/nls/i18n aloha/selection".split(" "),function(l,b,p,m,f,d,k,e,n,a,c,g){function v(a){var c=
m(".aloha-cell-selected");if(0<c.length){var b=0;c.each(function(){var c=m(this).find("div"),d=c.find(a);0<d.length&&(d.contents().unwrap(),b++);c.contents().wrap("<"+a+"></"+a+">")});b===c.length&&c.find(a).contents().unwrap();return!0}return!1}function u(a,b){var d=t[b];M.hasOwnProperty(b)&&(d=M[b]);return k.adopt(d,e,{tooltip:c.t("button."+b+".tooltip"),icon:"aloha-icon aloha-icon-"+d,scope:"Aloha.continuoustext",click:function(){v(b)||a.addMarkup(b);return!1}})}function z(a,b){return{name:b,tooltip:c.t("button."+
b+".tooltip"),iconClass:"aloha-icon "+c.t("aloha-large-icon-"+b),markup:m("<"+b+">"),click:function(){var c;v(b)?c=!1:(a.changeMarkup(b),l.activeEditable&&m.browser.mozilla&&l.activeEditable.obj.focus(),l.activeEditable&&l.trigger("aloha-format-block"),c=void 0);return c}}}function A(a,b){return{name:b,text:c.t("button."+b+".text"),tooltip:c.t("button."+b+".tooltip"),wide:!0,cls:"aloha-ui-multisplit-fullwidth",click:function(){a.removeFormat()}}}function y(a,c){c.select();B(a,l.Selection.getRangeObject())}
function q(a,c,b){r.Utils.Dom.addMarkup(c,b);y(a,c)}function s(a,c,b){c=c.getEditableConfig(b.obj);return-1<m.inArray(a,c)}function B(a,c){var b,d,g,e,k;m.each(a.buttons,function(a,d){var k=!1,f=S[d.markup[0].nodeName]||[d.markup[0].nodeName];for(g=0;g<c.markupEffectiveAtStart.length;g++)for(b=c.markupEffectiveAtStart[g],e=0;e<f.length;e++)l.Selection.standardTextLevelSemanticsComparator(b,m("<"+f[e]+">"))&&(d.handle.setState(!0),k=!0);k||d.handle.setState(!1)});if(0<a.multiSplitItems.length){d=!1;
for(g=0;g<c.markupEffectiveAtStart.length&&!d;g++)for(b=c.markupEffectiveAtStart[g],e=0;e<a.multiSplitItems.length&&!d;e++)k=a.multiSplitItems[e],k.markup&&l.Selection.standardTextLevelSemanticsComparator(b,k.markup)&&(a.multiSplitButton.setActiveItem(k.name),d=!0);d||a.multiSplitButton.setActiveItem(null)}}var r=window.GENTICS,t={b:"bold",strong:"bold",i:"italic",em:"italic",del:"strikethrough",sub:"subscript",sup:"superscript",u:"underline",s:"strikethrough"},M={strong:"strong",em:"emphasis",s:"strikethrough2"},
F={u:!0,em:!0,strong:!0,b:!0,i:!0,cite:!0,q:!0,code:!0,abbr:!0,del:!0,s:!0,sub:!0,sup:!0},H={p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,pre:!0},S={B:["STRONG","B"],I:["EM","I"],STRONG:["STRONG","B"],EM:["EM","I"]};return b.create("format",{config:"b i sub sup p h1 h2 h3 h4 h5 h6 pre removeFormat".split(" "),availableButtons:"u strong del em b i s sub sup p h1 h2 h3 h4 h5 h6 pre removeFormat".split(" "),hotKey:{formatBold:"ctrl+b",formatItalic:"ctrl+i",formatParagraph:"alt+ctrl+0",formatH1:"alt+ctrl+1",
formatH2:"alt+ctrl+2",formatH3:"alt+ctrl+3",formatH4:"alt+ctrl+4",formatH5:"alt+ctrl+5",formatH6:"alt+ctrl+6",formatPre:"ctrl+p",formatDel:"ctrl+d",formatSub:"alt+shift+s",formatSup:"ctrl+shift+s"},init:function(){var a=this;"undefined"!==typeof this.settings.hotKey&&m.extend(!0,this.hotKey,this.settings.hotKey);this.initButtons();l.bind("aloha-plugins-loaded",function(){a.initSidebar(l.Sidebar.right)});l.bind("aloha-editable-activated",function(c,b){a.applyButtonConfig(b.editable.obj);var d=function(c){return function(){s(c,
a,b.editable)&&a.addMarkup(c);return!1}},g=function(c){return function(){s(c,a,b.editable)&&a.changeMarkup(c);return!1}};b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatBold,d("b"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatItalic,d("i"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatDel,d("del"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSub,d("sub"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSup,d("sup"));b.editable.obj.bind("keydown.aloha.format",
a.hotKey.formatParagraph,g("p"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH1,g("h1"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH2,g("h2"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH3,g("h3"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH4,g("h4"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH5,g("h5"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH6,g("h6"));b.editable.obj.bind("keydown.aloha.format",a.hotKey.formatPre,
g("pre"))});l.bind("aloha-editable-deactivated",function(a,c){c.editable.obj.unbind("keydown.aloha.format")})},applyButtonConfig:function(a){a=this.getEditableConfig(a);var c,b;if("object"===typeof a){var d=[];m.each(a,function(a,c){"number"===typeof a&&"string"===typeof c||d.push(a)});0<d.length&&(a=d)}this.formatOptions=a;for(c in this.buttons)this.buttons.hasOwnProperty(c)&&(-1!==m.inArray(c,a)?this.buttons[c].handle.show():this.buttons[c].handle.hide());b=this.multiSplitItems.length;for(c=0;c<
b;c++)-1!==m.inArray(this.multiSplitItems[c].name,a)?this.multiSplitButton.showItem(this.multiSplitItems[c].name):this.multiSplitButton.hideItem(this.multiSplitItems[c].name)},initButtons:function(){var c=this;this.buttons={};this.multiSplitItems=[];m.each(this.availableButtons,function(a,b){var d=!1;"number"!==typeof a&&"string"!==typeof b&&(d=b,b=a);F[b]?c.buttons[b]={handle:u(c,b),markup:m("<"+b+">",{"class":d||""})}:H[b]?c.multiSplitItems.push(z(c,b)):"removeFormat"===b?c.multiSplitItems.push(A(c,
b)):l.log("warn",c,'Button "'+b+'" is not defined')});this.multiSplitButton=n({name:"formatBlock",items:this.multiSplitItems,hideIfEmpty:!0,scope:"Aloha.continuoustext"});a.sub("aloha.selection.context-change",function(a){B(c,a.range)})},initSidebar:function(a){var b=this;b.sidebar=a;a.addPanel({id:b.nsClass("sidebar-panel-class"),title:c.t("floatingmenu.tab.format"),content:"",expanded:!0,activeOn:this.formatOptions||!1,onInit:function(){},onActivate:function(a){var d=this;d.effective=a;if(a[0]){d.format=
a[0].nodeName.toLowerCase();var g=m("<div>").attr("class",b.nsClass("target-container")),e=m("<fieldset>");e.append(m("<legend>"+d.format+" "+c.t("format.class.legend")).append(m("<select>")));g.append(e);var k='<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+c.t("format.class.legend")+'</legend><select name="targetGroup" class="'+b.nsClass("radioTarget")+'"><option value="">'+c.t("format.class.none")+"</option>";b.config[d.format]&&b.config[d.format]["class"]&&m.each(b.config[d.format]["class"],
function(a,c){k+='<option value="'+a+'" >'+c+"</option>"});k+="</select></fieldset></div>";d=this;this.setContent(k);m(b.nsSel("framename")).live("keyup",function(){m(d.effective).attr("target",m(this).val().replace('"',"&quot;").replace("'","&#39;"))});d=this;d.effective=a;m(b.nsSel("linkTitle")).val(m(d.effective).attr("title"))}}});a.show()},nsClass:function(){var a=[];m.each(arguments,function(){a.push(""==this?"aloha-format":"aloha-format-"+this)});return m.trim(a.join(" "))},nsSel:function(){var a=
[];m.each(arguments,function(){a.push("."+(""==this?"aloha-format":"aloha-format-"+this))});return m.trim(a.join(" "))},addMarkup:function(a){var c=this,b=m("<"+a+">"),d=l.Selection.rangeObject;if("undefined"!==typeof a&&""!=a){var g=S[b[0].nodeName]||[b[0].nodeName],e=d.findMarkup(function(){return-1!==f.indexOf(g,this.nodeName)},l.activeEditable.obj);if(e)d.isCollapsed()?r.Utils.Dom.removeFromDOM(e,d,!0):r.Utils.Dom.removeMarkup(d,m(e),l.activeEditable.obj),y(c,d);else{if(d.isCollapsed()&&(r.Utils.Dom.extendToWord(d),
d.isCollapsed()&&p.enabled())){p.setWithRangeObject(t[a],d,function(a,d){q(c,d,b)});return}q(c,d,b)}}},changeMarkup:function(a){l.Selection.changeMarkupOnSelection(m("<"+a+">"))},removeFormat:function(){var a="u strong em b i q del s code sub sup p h1 h2 h3 h4 h5 h6 pre quote blockquote".split(" "),c=l.Selection.rangeObject,b;this.settings.removeFormats&&(a=this.settings.removeFormats);if(!c.isCollapsed()){for(b=0;b<a.length;b++)r.Utils.Dom.removeMarkup(c,m("<"+a[b]+">"),l.activeEditable.obj);c.select()}},
toString:function(){return"format"}})});define("list/nls/i18n",{root:{"button.createulist.tooltip":"Insert Unordered List","button.createolist.tooltip":"Insert Ordered List","button.indentlist.tooltip":"Indent List","button.outdentlist.tooltip":"Outdent List","floatingmenu.tab.list":"Lists"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("list/list-plugin","aloha jquery aloha/plugin ui/ui ui/scopes ui/button ui/toggleButton i18n!list/nls/i18n i18n!aloha/nls/i18n aloha/engine PubSub".split(" "),
function(l,b,p,m,f,d,k,e,n,a,c){function g(a,c){b(a).find(a.nodeName).each(function(){var a=l.Selection.getSelectionTree();v(a,this)&&l.Markup.transformDomObject(this,c,l.Selection.rangeObject)});l.Markup.transformDomObject(a,c,l.Selection.rangeObject)}function v(a,c){var d=!1;b.each(a,function(a,b){if(b.domobj===c&&"none"!==b.selection||v(b.children,c))d=!0});return d}var u=window.GENTICS,z=p.create("list",{config:["ul","ol"],transformableElements:{p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,ul:!0,
ol:!0},init:function(){var a=this;this._orderedListButton=m.adopt("orderedList",k,{tooltip:e.t("button.createolist.tooltip"),icon:"aloha-icon aloha-icon-orderedlist",scope:"Aloha.continuoustext",click:function(){a.transformList(!0)}});this._unorderedListButton=m.adopt("unorderedList",k,{tooltip:e.t("button.createulist.tooltip"),icon:"aloha-icon aloha-icon-unorderedlist",scope:"Aloha.continuoustext",click:function(){a.transformList(!1)}});this._indentListButton=m.adopt("indentList",d,{tooltip:e.t("button.indentlist.tooltip"),
icon:"aloha-icon aloha-icon-indent",scope:"Aloha.continuoustext",click:function(){a.indentList()}});this._outdentListButton=m.adopt("outdentList",d,{tooltip:e.t("button.outdentlist.tooltip"),icon:"aloha-icon aloha-icon-outdent",scope:"Aloha.continuoustext",click:function(){a.outdentList()}});f.createScope("Aloha.List","Aloha.continuoustext");c.sub("aloha.selection.context-change",function(c){var d,g=c.range;a._outdentListButton.show(!1);a._indentListButton.show(!1);a._unorderedListButton.setState(!1);
a._orderedListButton.setState(!1);for(c=0;c<g.markupEffectiveAtStart.length;c++){d=g.markupEffectiveAtStart[c];if(l.Selection.standardTagNameComparator(d,b("<ul></ul>"))){a._unorderedListButton.setState(!0);a._outdentListButton.show(!0);a._indentListButton.show(!0);break}if(l.Selection.standardTagNameComparator(d,b("<ol></ol>"))){a._orderedListButton.setState(!0);a._outdentListButton.show(!0);a._indentListButton.show(!0);break}}l.activeEditable&&a.applyButtonConfig(l.activeEditable.obj)});l.Markup.addKeyHandler(9,
function(c){return a.processTab(c)})},applyButtonConfig:function(a){a=this.getEditableConfig(a);l.Selection.rangeObject.unmodifiableMarkupAtStart[0]&&(-1!=b.inArray("ul",a)&&-1!=l.Selection.canTag1WrapTag2(l.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ul")?this._unorderedListButton.show(!0):this._unorderedListButton.show(!1),-1!=b.inArray("ol",a)&&-1!=l.Selection.canTag1WrapTag2(l.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ol")?this._orderedListButton.show(!0):this._orderedListButton.show(!1))},
processTab:function(a){return 9===a.keyCode?a.shiftKey?this.outdentList():this.indentList():!0},getStartingDomObjectToTransform:function(){var a=l.Selection.rangeObject,c,b;for(c=0;c<a.markupEffectiveAtStart.length;c++)if(b=a.markupEffectiveAtStart[c],this.transformableElements[b.nodeName.toLowerCase()])return b;return!1},getNearestSelectedListItem:function(){var a=l.Selection.rangeObject,c,b;for(c=0;c<a.markupEffectiveAtStart.length;c++)if(b=a.markupEffectiveAtStart[c],u.Utils.Dom.isListElement(b))return b;
return!1},transformList:function(c){var d=this.getStartingDomObjectToTransform(),e,k,f,n;this._outdentListButton.show(!0);this._indentListButton.show(!0);if(!d&&(l.Selection.changeMarkupOnSelection(b("<p></p>")),d=this.getStartingDomObjectToTransform(),!d)){l.Selection.rangeObject.startContainer.contentEditable?(c=c?b("<ol></ol>"):b("<ul></ul>"),k=b("<li></li>"),c.append(k),f=k.get(0),d=l.getActiveEditable().obj,f.appendChild(document.createTextNode("")),d.append(c),d.focus(),c=l.createRange(),d=
l.getSelection(),c.setStart(f.firstChild,0),c.setEnd(f.firstChild,0),d.removeAllRanges(),d.addRange(c),l.Selection.updateSelection()):l.Log.error(this,"Could not transform selection into a list");return}f=d.nodeName.toLowerCase();if("ul"!=f||c)if("ul"==f&&c)g(d,"ol"),this.mergeAdjacentLists(b(d));else if("ol"!=f||c)if("ol"==f&&c)c=b(d),f=c.parent(),0<f.length&&u.Utils.Dom.isListElement(f.get(0))?"li"===f.get(0).nodeName.toLowerCase()?(f.after(c.children()),c.remove()):c.children().unwrap():(c=b(d),
b.each(c.children("li"),function(c,b){n=l.Markup.transformDomObject(b,"p",l.Selection.rangeObject);n.after(n.children("ol,ul"));a.ensureContainerEditable(n.get(0))}),c.children().unwrap());else{f=l.Selection.rangeObject.getSelectedSiblings(d);c=c?b("<ol></ol>"):b("<ul></ul>");k=b("<li></li>");c.append(k);b(d).contents().appendTo(k);b(d).replaceWith(c);l.Selection.rangeObject.startContainer==d&&(l.Selection.rangeObject.startContainer=k.get(0));l.Selection.rangeObject.endContainer==d&&(l.Selection.rangeObject.endContainer=
k.get(0));if(f)for(d=!1,e=0;e<f.length;++e)if(u.Utils.Dom.isBlockLevelElement(f[e]))d&&(d=!1),k=l.Markup.transformDomObject(f[e],"li",l.Selection.rangeObject),c.append(k);else if(3!=f[e].nodeType||0!==b.trim(f[e].data).length)d||(d=b("<li></li>"),c.append(d),k=d),d.append(f[e]);this.mergeAdjacentLists(c);f=k.get(0);u.Utils.Dom.isEmpty(f)&&(c=l.createRange(),d=l.getSelection(),f.appendChild(document.createTextNode("")),c.selectNodeContents(f.lastChild),d.removeAllRanges(),d.addRange(c),l.Selection.updateSelection())}else g(d,
"ul"),this.mergeAdjacentLists(b(d));else c=b(d),f=c.parent(),0<f.length&&u.Utils.Dom.isListElement(f.get(0))?"li"===f.get(0).nodeName.toLowerCase()?(f.after(c.children()),c.remove()):c.children().unwrap():(c=b(d),b.each(c.children("li"),function(c,b){n=l.Markup.transformDomObject(b,"p",l.Selection.rangeObject);n.after(n.children("ol,ul"));a.ensureContainerEditable(n.get(0))}),c.children().unwrap());this.refreshSelection()},indentList:function(){var a=this.getNearestSelectedListItem(),c,d,g;if(a){g=
b(a).prev("li");if(0===g.length)return!1;b(a).parent();d=l.Selection.rangeObject.getSelectedSiblings(a);c=b(a).parent().clone(!1).empty();c.append(a);g.append(c);if(d)for(a=0;a<d.length;++a)c.append(b(d[a]));this.mergeAdjacentLists(c,!0);this.refreshSelection();return!1}return!0},outdentList:function(){var a=this.getNearestSelectedListItem(),c,d,g,e,k;if(a){d=b(a);g=d.parent();c=g.parents("ul,ol");e=g.parent("li");if(0<c.length&&u.Utils.Dom.isListElement(c.get(0))){k=(a=l.Selection.rangeObject.getSelectedSiblings(a))&&
0<a.length?b(a[a.length-1]):d;0<k.nextAll("li").length&&(c=g.clone(!1).empty(),c.append(k.nextAll()),k.append(c));0<e.length?e.after(d):g.before(d);if(a&&0<a.length)for(c=a.length-1;0<=c;--c)d.after(b(a[c]));0===g.contents("li").length&&g.remove();0<e.length&&0===e.contents().length&&e.remove();this.refreshSelection()}return!1}return!0},refreshSelection:function(){l.Selection.rangeObject.update();l.Selection.rangeObject.select();l.Selection.updateSelection()},mergeAdjacentLists:function(a,c){for(var d=
a.get(0),g;d.previousSibling&&1===d.previousSibling.nodeType&&this.isMergable(d.previousSibling,d,c);)d=d.previousSibling;for(a=b(d);d.nextSibling&&(1===d.nextSibling.nodeType&&this.isMergable(d.nextSibling,d,c)||3===d.nextSibling.nodeType&&0===b.trim(d.nextSibling.data).length);)g=b(d.nextSibling),1==d.nextSibling.nodeType&&g.contents().appendTo(a),g.remove()},isMergable:function(a,c,b){return b?"ul"==a.nodeName.toLowerCase()||"ol"==a.nodeName.toLowerCase():a.nodeName==c.nodeName}});a.commands.insertorderedlist=
{action:function(a,c){z.transformList(!0);c&&l.Selection.rangeObject&&(c.startContainer=l.Selection.rangeObject.startContainer,c.startOffset=l.Selection.rangeObject.startOffset,c.endContainer=l.Selection.rangeObject.endContainer,c.endOffset=l.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=rangeObject.markupEffectiveAtStart[i];if(l.Selection.standardTagNameComparator(effectiveMarkup,b("<ul></ul>")))break;
if(l.Selection.standardTagNameComparator(effectiveMarkup,b("<ol></ol>")))return!0}return!1}};a.commands.insertunorderedlist={action:function(a,c){z.transformList(!1);c&&l.Selection.rangeObject&&(c.startContainer=l.Selection.rangeObject.startContainer,c.startOffset=l.Selection.rangeObject.startOffset,c.endContainer=l.Selection.rangeObject.endContainer,c.endOffset=l.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=
rangeObject.markupEffectiveAtStart[i];if(l.Selection.standardTagNameComparator(effectiveMarkup,b("<ul></ul>")))return!0;if(l.Selection.standardTagNameComparator(effectiveMarkup,b("<ol></ol>")))break}return!1}};a.commands.indent={action:function(a,c){z.indentList();c&&l.Selection.rangeObject&&(c.startContainer=l.Selection.rangeObject.startContainer,c.startOffset=l.Selection.rangeObject.startOffset,c.endContainer=l.Selection.rangeObject.endContainer,c.endOffset=l.Selection.rangeObject.endOffset)},indeterm:function(){},
state:function(){return!1}};a.commands.outdent={action:function(a,c){z.outdentList();c&&l.Selection.rangeObject&&(c.startContainer=l.Selection.rangeObject.startContainer,c.startOffset=l.Selection.rangeObject.startOffset,c.endContainer=l.Selection.rangeObject.endContainer,c.endOffset=l.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){return!1}};return z});define("image/nls/i18n",{root:{"size.natural":"Original size","button.addimg.tooltip":"add image ref","floatingmenu.tab.img":"Image",
"floatingmenu.tab.formatting":"Formatting","floatingmenu.tab.resize":"Resize","floatingmenu.tab.crop":"Crop","button.uploadimg.tooltip":"Upload img","button.uploadimg.label":"Upload","button.img.align.left.tooltip":"Left align","button.img.align.right.tooltip":"Right Align","button.img.align.none.tooltip":"No alignment","field.img.title.label":"Title","field.img.title.tooltip":"Title","field.img.label":"URL","field.img.tooltip":"Source","border ":"Add Border to Image","padding.increase ":"Increase Padding",
"padding.decrease ":"Decrease Padding","size.increase ":"Increase Size","size.decrease ":"Decrease Size",Resize:"Resize",Crop:"Crop",Reset:"Reset",Accept:"Accept",Cancel:"Cancel",height:"Height",width:"Width","button.toggle.tooltip":"Toggle keep aspect ratio","field.img.src.label":"Source","field.img.src.tooltip":"Source"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("image/image-floatingMenu","jquery util/class i18n!image/nls/i18n i18n!aloha/nls/i18n ui/ui ui/scopes ui/button ui/toggleButton ui/port-helper-attribute-field".split(" "),
function(l,b,p,m,f,d,k,e,n){return b.extend({_constructor:function(){},init:function(a){a.floatingMenuControl=this;this.plugin=a;d.createScope(a.name,"Aloha.empty");this._addUIInsertButton();this._addUIMetaButtons();this._addUIResetButton();this._addUIAlignButtons();this._addUIMarginButtons();this._addUICropButtons();this._addUIResizeButtons();this._addUIAspectRatioToggleButton()},_addUIAspectRatioToggleButton:function(){var a=this.plugin;this._imageCnrRatioButton=f.adopt("imageCnrRatio",e,{tooltip:p.t("button.toggle.tooltip"),
icon:"aloha-icon-cnr-ratio",scope:a.name,click:function(){a.toggleKeepAspectRatio()}});!1!==a.settings.fixedAspectRatio&&(this._imageCnrRatioButton.setState(!0),a.keepAspectRatio=!0)},_addUIResetButton:function(){var a=this.plugin;this._imageCnrResetButton=f.adopt("imageCnrReset",k,{tooltip:p.t("Reset"),icon:"aloha-icon-cnr-reset",scope:a.name,click:function(){a.reset()}})},_addUIInsertButton:function(){var a=this.plugin;this._insertImageButton=f.adopt("insertImage",k,{tooltip:p.t("button.addimg.tooltip"),
icon:"aloha-button aloha-image-insert",scope:"Aloha.continuoustext",click:function(){a.insertImg()}})},_addUIMetaButtons:function(){var a=this.plugin;this.imgSrcField=n({label:p.t("field.img.src.label"),labelClass:"aloha-image-input-label",tooltip:p.t("field.img.src.tooltip"),name:"imageSource",scope:a.name});this.imgSrcField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.imgSrcField.setObjectTypeFilter(a.objectTypeFilter);this.imgTitleField=n({label:p.t("field.img.title.label"),labelClass:"aloha-image-input-label",
tooltip:p.t("field.img.title.tooltip"),name:"imageTitle",scope:a.name});this.imgTitleField.setObjectTypeFilter()},_addUIAlignButtons:function(){var a=this.plugin;this._imageAlignLeftButton=f.adopt("imageAlignLeft",k,{tooltip:p.t("button.img.align.left.tooltip"),icon:"aloha-img aloha-image-align-left",scope:a.name,click:function(){var c=l(a.getPluginFocus());c.add(c.parent()).css("float","left")}});this._imageAlignRightButton=f.adopt("imageAlignRight",k,{tooltip:p.t("button.img.align.right.tooltip"),
icon:"aloha-img aloha-image-align-right",scope:a.name,click:function(){var c=l(a.getPluginFocus());c.add(c.parent()).css("float","right")}});this._imageAlignNoneButton=f.adopt("imageAlignNone",k,{tooltip:p.t("button.img.align.none.tooltip"),icon:"aloha-img aloha-image-align-none",scope:a.name,click:function(){var c=l(a.getPluginFocus());c.add(c.parent()).css({"float":"none",display:"inline-block"})}})},_addUIMarginButtons:function(){var a=this.plugin;this._imageIncPaddingButton=f.adopt("imageIncPadding",
k,{tooltip:p.t("padding.increase"),icon:"aloha-img aloha-image-padding-increase",scope:a.name,click:function(){l(a.getPluginFocus()).increase("padding")}});this._imageDecPaddingButton=f.adopt("imageDecPadding",k,{tooltip:p.t("padding.decrease"),icon:"aloha-img aloha-image-padding-decrease",scope:a.name,click:function(){l(a.getPluginFocus()).decrease("padding")}})},_addUICropButtons:function(){var a=this.plugin;d.createScope("Aloha.img",["Aloha.global"]);this._imageCropButton=f.adopt("imageCropButton",
e,{tooltip:p.t("Crop"),icon:"aloha-icon-cnr-crop",scope:a.name,click:function(){this.getState()?a.crop():a.endCrop()}})},_addUIResizeButtons:function(){var a=this.plugin;this.imgResizeHeightField=n({label:p.t("height"),labelClass:"aloha-image-input-label",name:"imageResizeHeight",width:50,scope:a.name});this.imgResizeHeightField.maxValue=a.settings.maxHeight;this.imgResizeHeightField.minValue=a.settings.minHeight;this.imgResizeWidthField=n({label:p.t("width"),labelClass:"aloha-image-input-label",
name:"imageResizeWidth",width:50,scope:a.name});this.imgResizeWidthField.maxValue=a.settings.maxWidth;this.imgResizeWidthField.minValue=a.settings.minWidth},setScope:function(){d.setScope(this.plugin.name)},doLayout:function(){}})});define("image/vendor/jcrop/jquery.jcrop.min",["jquery"],function(l){(function(b){b.Jcrop=function(l,m){function f(a){return""+parseInt(a)+"px"}function d(a){a=b(a).offset();return[a.left,a.top]}function k(a){return[a.pageX-O[0],a.pageY-O[1]]}function e(a,c){return function(b){if(B.aspectRatio)switch(a){case "e":b[1]=
c.y+1;break;case "w":b[1]=c.y+1;break;case "n":b[0]=c.x+1;break;case "s":b[0]=c.x+1}else switch(a){case "e":b[1]=c.y2;break;case "w":b[1]=c.y2;break;case "n":b[0]=c.x2;break;case "s":b[0]=c.x2}qa.setCurrent(b);la.update()}}function n(a){var c=a;ka.watchKeys();return function(a){qa.moveOffset([a[0]-c[0],a[1]-c[1]]);c=a;la.update()}}function a(a){switch(a){case "n":return"sw";case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}
function c(c){return function(b){if(B.disabled||"move"==c&&!B.allowMove)return!1;ca=!0;var g=k(b);O=d(t);ia.setCursor("move"==c?c:c+"-resize");if("move"==c)ia.activateHandlers(n(g),v);else{var g=qa.getFixed(),f=a(c),m=qa.getCorner(a(f));qa.setPressed(qa.getCorner(f));qa.setCurrent(m);ia.activateHandlers(e(c,g),v)}b.stopPropagation();b.preventDefault();return!1}}function g(a){return{x:parseInt(a.x*Q),y:parseInt(a.y*R),x2:parseInt(a.x2*Q),y2:parseInt(a.y2*R),w:parseInt(a.w*Q),h:parseInt(a.h*R)}}function v(a){a=
qa.getFixed();a.w>B.minSelect[0]&&a.h>B.minSelect[1]?(la.enableHandles(),la.done()):la.release();ia.setCursor(B.allowSelect?"crosshair":"default")}function u(a){qa.setCurrent(a);la.update()}function z(){var a=b("<div></div>").addClass(B.baseClass+"-tracker");b.browser.msie&&a.css({opacity:0,backgroundColor:"white"});return a}function A(a){y([a[0]/Q,a[1]/R,a[2]/Q,a[3]/R])}function y(a){qa.setPressed([a[0],a[1]]);qa.setCurrent([a[2],a[3]]);la.update()}function q(a){"object"!=typeof a&&(a={});B=b.extend(B,
a);"function"!==typeof B.onChange&&(B.onChange=function(){});"function"!==typeof B.onSelect&&(B.onSelect=function(){})}function s(a){B.allowResize?a?la.enableOnly():la.enableHandles():la.disableHandles();ia.setCursor(B.allowSelect?"crosshair":"default");la.setCursor(B.allowMove?"move":"default");H.css("backgroundColor",B.bgColor);"setSelect"in B&&(A(m.setSelect),la.done(),delete B.setSelect);"trueSize"in B&&(Q=B.trueSize[0]/M,R=B.trueSize[1]/F);N=B.maxSize[0]||0;W=B.maxSize[1]||0;Z=B.minSize[0]||
0;V=B.minSize[1]||0;"outerImage"in B&&(t.attr("src",B.outerImage),delete B.outerImage);la.refresh()}"object"!==typeof l&&(l=b(l)[0]);"object"!==typeof m&&(m={});"trackDocument"in m||(m.trackDocument=b.browser.msie?!1:!0,b.browser.msie&&"8"==b.browser.version.split(".")[0]&&(m.trackDocument=!0));"keySupport"in m||(m.keySupport=b.browser.msie?!1:!0);var B={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,borderOpacity:0.4,handleOpacity:0.5,handlePad:5,handleSize:9,handleOffset:5,
edgeMargin:14,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}};q(m);var r=b(l),t=r.clone().removeAttr("id").css({position:"absolute"});t.width(r.width());t.height(r.height());r.after(t).hide();(function(a,c,b){var d=a.width(),g=a.height();d>c&&0<c&&(d=c,g=c/a.width()*
a.height());g>b&&0<b&&(g=b,d=b/a.height()*a.width());Q=a.width()/d;R=a.height()/g;a.width(d).height(g)})(t,B.boxWidth,B.boxHeight);var M=t.width(),F=t.height(),H=b("<div />").width(M).height(F).addClass(B.baseClass+"-holder").css({position:"relative",backgroundColor:B.bgColor}).insertAfter(r).append(t);B.addClass&&H.addClass(B.addClass);var S=b("<img />").attr("src",t.attr("src")).css("position","absolute").width(M).height(F),K=b("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",
overflow:"hidden"}).append(S),x=b("<div />").width("100%").height("100%").css("zIndex",320),L=b("<div />").css({position:"absolute",zIndex:300}).insertBefore(t).append(K,x),I=B.boundary,T=z().width(M+2*I).height(F+2*I).css({position:"absolute",top:f(-I),left:f(-I),zIndex:290}).mousedown(function(a){if(B.disabled||!B.allowSelect)return!1;ca=!0;O=d(t);la.disableHandles();"crosshair"!=aa&&(ia.setCursor("crosshair"),aa="crosshair");var c=k(a);qa.setPressed(c);ia.activateHandlers(u,v);ka.watchKeys();la.update();
a.stopPropagation();a.preventDefault();return!1}),N,W,Z,V,Q,R,O=d(t),ca,aa,ma,da,qa=function(){function a(){if(!B.aspectRatio){var c=k-g,n=f-e;N&&Math.abs(c)>N&&(k=0<c?g+N:g-N);W&&Math.abs(n)>W&&(f=0<n?e+W:e-W);V&&Math.abs(n)<V&&(f=0<n?e+V:e-V);Z&&Math.abs(c)<Z&&(k=0<c?g+Z:g-Z);0>g&&(k-=g,g-=g);0>e&&(f-=e,e-=e);0>k&&(g-=k,k-=k);0>f&&(e-=f,f-=f);k>M&&(c=k-M,g-=c,k-=c);f>F&&(c=f-F,e-=c,f-=c);g>M&&(c=g-F,f-=c,e-=c);e>F&&(c=e-F,f-=c,e-=c);return d(b(g,e,k,f))}var c=B.aspectRatio,n=B.minSize[0]/Q,m=B.maxSize[0]/
Q,l=k-g,v=f-e,p=Math.abs(l),u=Math.abs(v);0==m&&(m=10*M);p/u<c?(p=f,w=u*c,u=0>l?g-w:w+g,0>u?(u=0,h=Math.abs((u-g)/c),p=0>v?e-h:h+e):u>M&&(u=M,h=Math.abs((u-g)/c),p=0>v?e-h:h+e)):(u=k,h=p/c,p=0>v?e-h:e+h,0>p?(p=0,w=Math.abs((p-e)*c),u=0>l?g-w:w+g):p>F&&(p=F,w=Math.abs(p-e)*c,u=0>l?g-w:w+g));u>g?(u-g<n?u=g+n:u-g>m&&(u=g+m),p=p>e?e+(u-g)/c:e-(u-g)/c):u<g&&(g-u<n?u=g-n:g-u>m&&(u=g-m),p=p>e?e+(g-u)/c:e-(g-u)/c);0>u?(g-=u,u=0):u>M&&(g-=u-M,u=M);0>p?(e-=p,p=0):p>F&&(e-=p-F,p=F);return last=d(b(g,e,u,p))}
function c(a){0>a[0]&&(a[0]=0);0>a[1]&&(a[1]=0);a[0]>M&&(a[0]=M);a[1]>F&&(a[1]=F);return[a[0],a[1]]}function b(a,c,d,g){var e=a,k=d,f=c,n=g;d<a&&(e=d,k=a);g<c&&(f=g,n=c);return[Math.round(e),Math.round(f),Math.round(k),Math.round(n)]}function d(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var g=0,e=0,k=0,f=0,n,m;return{flipCoords:b,setPressed:function(a){a=c(a);k=g=a[0];f=e=a[1]},setCurrent:function(a){a=c(a);n=a[0]-k;m=a[1]-f;k=a[0];f=a[1]},getOffset:function(){return[n,m]},moveOffset:function(a){var c=
a[0];a=a[1];0>g+c&&(c-=c+g);0>e+a&&(a-=a+e);F<f+a&&(a+=F-(f+a));M<k+c&&(c+=M-(k+c));g+=c;k+=c;e+=a;f+=a},getCorner:function(c){var b=a();switch(c){case "ne":return[b.x2,b.y];case "nw":return[b.x,b.y];case "se":return[b.x2,b.y2];case "sw":return[b.x,b.y2]}},getFixed:a}}(),la=function(){function a(c){c=b("<div />").css({position:"absolute",opacity:B.borderOpacity}).addClass(B.baseClass+"-"+c);K.append(c);return c}function d(a,g){var e=b("<div />").mousedown(c(a)).css({cursor:a+"-resize",position:"absolute",
zIndex:g});x.append(e);return e}function e(a){var c=B.handleSize,b=D,g=c;switch(a){case "n":case "s":c="100%";break;case "e":case "w":g="100%"}return d(a,q++).width(c).height(g).css({top:f(-b+1),left:f(-b+1)})}function k(a){for(i in a)s[a[i]]=d(a[i],q++).css({top:f(-D+1),left:f(-D+1),opacity:B.handleOpacity}).addClass(B.baseClass+"-handle")}function n(a){var c=Math.round(a.h/2-D),b=Math.round(a.w/2-D);west=-D+1;var d=a.w-D;a=a.h-D;"e"in s&&s.e.css({top:f(c),left:f(d)})&&s.w.css({top:f(c)})&&s.s.css({top:f(a),
left:f(b)})&&s.n.css({left:f(b)});"ne"in s&&s.ne.css({left:f(d)})&&s.se.css({top:f(a),left:f(d)})&&s.sw.css({top:f(a)});"b"in s&&s.b.css({top:f(a)})&&s.r.css({left:f(d)})}function m(){var a=qa.getFixed();qa.setPressed([a.x,a.y]);qa.setCurrent([a.x2,a.y2]);l()}function l(){if(A)return v()}function v(){var a=qa.getFixed(),c=a.h;L.width(a.w).height(c);var c=a.x,b=a.y;S.css({top:f(-b),left:f(-c)});L.css({top:f(b),left:f(c)});B.drawBorders&&C.right.css({left:f(a.w-1)})&&C.bottom.css({top:f(a.h-1)});r&&
n(a);A||(L.show(),t.css("opacity",B.bgOpacity),A=!0);B.onChange(g(a))}function p(){r=!0;if(B.allowResize)return n(qa.getFixed()),x.show(),!0}function u(){r=!1;x.hide()}function y(a){(ma=a)?u():p()}var A,q=370,C={},s={},r=!1,D=B.handleOffset;B.drawBorders&&(C={top:a("hline").css("top",b.browser.msie?f(-1):f(0)),bottom:a("hline"),left:a("vline"),right:a("vline")});B.dragEdges&&(s.t=e("n"),s.b=e("s"),s.r=e("e"),s.l=e("w"));B.sideHandles&&k(["n","s","e","w"]);B.cornerHandles&&k(["sw","nw","ne","se"]);
var G=z().mousedown(c("move")).css({cursor:"move",position:"absolute",zIndex:360});K.append(G);u();return{updateVisible:l,update:v,release:function(){u();L.hide();t.css("opacity",1);A=!1},refresh:m,setCursor:function(a){G.css("cursor",a)},enableHandles:p,enableOnly:function(){r=!0},showHandles:function(){r&&(n(qa.getFixed()),x.show())},disableHandles:u,animMode:y,done:function(){y(!1);m()}}}(),ia=function(){function a(c){d(k(c))}function c(n){n.preventDefault();n.stopPropagation();ca&&(ca=!1,e(k(n)),
B.onSelect(g(qa.getFixed())),T.css({zIndex:290}),f&&b(document).unbind("mousemove",a).unbind("mouseup",c),d=function(){},e=function(){});return!1}var d=function(){},e=function(){},f=B.trackDocument;f||T.mousemove(a).mouseup(c).mouseout(c);t.before(T);return{activateHandlers:function(g,k){ca=!0;d=g;e=k;T.css({zIndex:450});f&&b(document).mousemove(a).mouseup(c);return!1},setCursor:function(a){T.css("cursor",a)}}}(),ka=function(){function a(c,b,d){B.allowMove&&(qa.moveOffset([b,d]),la.updateVisible());
c.preventDefault();c.stopPropagation()}var c=b('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(function(c){if(c.ctrlKey)return!0;var b=(da=c.shiftKey?!0:!1)?10:1;switch(c.keyCode){case 37:a(c,-b,0);break;case 39:a(c,b,0);break;case 38:a(c,0,-b);break;case 40:a(c,0,b);break;case 27:la.release();break;case 9:return!0}return nothing(c)}).blur(function(a){c.hide()}),d=b("<div />").css({position:"absolute",overflow:"hidden"}).append(c);B.keySupport&&d.insertBefore(t);return{watchKeys:function(){B.keySupport&&
(c.show(),c.focus())}}}();x.hide();s(!0);I={animateTo:function(a){var c=a[0]/Q,b=a[1]/R,d=a[2]/Q,g=a[3]/R;if(!ma){a=qa.flipCoords(c,b,d,g);var c=qa.getFixed(),e=initcr=[c.x,c.y,c.x2,c.y2],k=B.animationDelay,f=e[0],n=e[1],d=e[2],g=e[3],m=a[0]-initcr[0],l=a[1]-initcr[1],v=a[2]-initcr[2],p=a[3]-initcr[3],u=0,z=B.swingSpeed;la.animMode(!0);var A=function(){return function(){u+=(100-u)/z;e[0]=f+u/100*m;e[1]=n+u/100*l;e[2]=d+u/100*v;e[3]=g+u/100*p;100>u?window.setTimeout(A,k):la.done();99.8<=u&&(u=100);
y(e)}}();window.setTimeout(A,k)}},setSelect:A,setOptions:function(a){q(a);s()},tellSelect:function(){return g(qa.getFixed())},tellScaled:function(){return qa.getFixed()},disable:function(){B.disabled=!0;la.disableHandles();la.setCursor("default");ia.setCursor("default")},enable:function(){B.disabled=!1;s()},cancel:function(){la.done();ia.activateHandlers(null,null)},focus:ka.watchKeys,getBounds:function(){return[M*Q,F*R]},getWidgetSize:function(){return[M,F]},release:la.release,destroy:function(){H.remove();
r.show()}};r.data("Jcrop",I);return I};b.fn.Jcrop=function(l){function m(f){var d=l.useImg||f.src,k=new Image;k.onload=function(){b.Jcrop(f,l)};k.src=d}"object"!==typeof l&&(l={});this.each(function(){if(b(this).data("Jcrop")){if("api"==l)return b(this).data("Jcrop");b(this).data("Jcrop").setOptions(l)}else m(this)});return this}})(l)});define("image/vendor/mousewheel/mousewheel",["jquery"],function(l){(function(b){function l(d){var k=d||window.event,e=[].slice.call(arguments,1),f=0,a=0,c=0;d=b.event.fix(k);
d.type="mousewheel";k.wheelDelta&&(f=k.wheelDelta/120);k.detail&&(f=-k.detail/3);c=f;void 0!==k.axis&&k.axis===k.HORIZONTAL_AXIS&&(c=0,a=-1*f);void 0!==k.wheelDeltaY&&(c=k.wheelDeltaY/120);void 0!==k.wheelDeltaX&&(a=-1*k.wheelDeltaX/120);e.unshift(d,f,a,c);return(b.event.dispatch||b.event.handle).apply(this,e)}var m=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var f=m.length;f;)b.event.fixHooks[m[--f]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=
m.length;b;)this.addEventListener(m[--b],l,!1);else this.onmousewheel=l},teardown:function(){if(this.removeEventListener)for(var b=m.length;b;)this.removeEventListener(m[--b],l,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(l)});define("image/image-plugin","jquery aloha/plugin image/image-floatingMenu i18n!aloha/nls/i18n i18n!image/nls/i18n jqueryui image/vendor/jcrop/jquery.jcrop.min image/vendor/mousewheel/mousewheel".split(" "),
function(l,b,p,m,f){var d=l,k=window.GENTICS,e=window.Aloha,n=!1,a=!1,c=!1;String.prototype.toInteger=String.prototype.toInteger||function(){return parseInt(String(this).replace(/px$/,"")||0,10)};String.prototype.toFloat=String.prototype.toInteger||function(){return parseFloat(String(this).replace(/px$/,"")||0,10)};Number.prototype.toInteger=Number.prototype.toInteger||String.prototype.toInteger;Number.prototype.toFloat=Number.prototype.toFloat||String.prototype.toFloat;l.extend(!0,l.fn,{increase:l.fn.increase||
function(a){var c=l(this),b,d;if(!c.length)return c;b=c.css(a).toFloat();d=Math.round(1.2*(b||1));b===d&&d++;c.css(a,d);return c},decrease:l.fn.decrease||function(a){var c=l(this),b,d;if(!c.length)return c;b=c.css(a).toFloat();d=Math.round(0.8*(b||0));b===d&&0<d&&d--;c.css(a,d);return c}});return b.create("image",{defaultSettings:{maxWidth:1600,minWidth:3,maxHeight:1200,minHeight:3,autoCorrectManualInput:!0,fixedAspectRatio:!1,autoResize:!1,ui:{meta:!0,crop:!0,resizable:!0},handles:"ne, se, sw, nw",
onCropped:function(a,c){e.Log.info("Default onCropped invoked",a,c)},onReset:function(a){e.Log.info("Default onReset invoked",a);return!1},onResize:function(a){e.Log.info("Default onResize invoked",a)},onResized:function(a){e.Log.info("Default onResized invoked",a)}},_onCropped:function(c,b){d("body").trigger("aloha-image-cropped",[c,b]);this.keepAspectRatio&&(a=this.imageObj.width()/this.imageObj.height());this.onCropped(c,b)},_onReset:function(a){d("body").trigger("aloha-image-reset",a);return this.onReset(a)},
_onResize:function(a){d("body").trigger("aloha-image-resize",a);this._applyValuesToFields(a.width(),a.height());this.onResize(a)},_onResized:function(a){d("body").trigger("aloha-image-resized",a);this._applyValuesToFields(a.width(),a.height());this.onResized(a)},imageObj:null,jcAPI:null,keepAspectRatio:!1,restoreProps:[],objectTypeFilter:[],init:function(){e.getPluginUrl("image");"undefined"!=typeof this.settings.objectTypeFilter&&(this.objectTypeFilter=this.settings.objectTypeFilter);this.config=
this.defaultSettings;this.settings=l.extend(!0,this.defaultSettings,this.settings);"number"===typeof this.settings.fixedAspectRatio?(a=c=this.settings.fixedAspectRatio,this.keepAspectRatio=!0):this.keepAspectRatio=!0===this.settings.fixedAspectRatio?!0:!1;this.initializeUI();this.bindInteractions();this.subscribeEvents()},initializeUI:function(){this.ui=new p;this.ui.init(this)},bindInteractions:function(){var a=this;if(a.settings.ui.resizable)try{document.execCommand("enableObjectResizing",!1,!1)}catch(c){e.Log.info(c,
"Could not disable enableObjectResizing")}a.settings.ui.meta&&(a.ui.imgSrcField.addListener("keyup",function(c){a.srcChange()}),a.ui.imgSrcField.addListener("blur",function(c){c=l(a.ui.imgSrcField.getTargetObject());""===c.attr("src")&&c.remove()}));a.settings.onCropped&&"function"===typeof a.settings.onCropped&&(a.onCropped=a.settings.onCropped);a.settings.onReset&&"function"===typeof a.settings.onReset&&(a.onReset=a.settings.onReset);a.settings.onResized&&"function"===typeof a.settings.onResized&&
(a.onResized=a.settings.onResized);a.settings.onResize&&"function"===typeof a.settings.onResize&&(a.onResize=this.settings.onResize)},subscribeEvents:function(){var a=this,c=this.settings;l("img").filter(c.globalselector).unbind();l("img").filter(c.globalselector).click(function(c){a.clickImage(c)});e.bind("aloha-drop-files-in-editable",function(c,b){for(var d,f=b.filesObjs.length,n;0<=--f;)n=b.filesObjs[f],n.file.type.match(/image\//)&&(a.getEditableConfig(b.editable),d=l("<img/>"),d.css({"max-width":that.maxWidth,
"max-height":that.maxHeight}),d.attr("id",n.id),"undefined"===typeof n.src?d.attr("src",n.data):d.attr("src",n.src),k.Utils.Dom.insertIntoDOM(d,b.range,l(e.activeEditable.obj)))});e.bind("aloha-selection-changed",function(c,b,d){d&&d.target&&a.settings.ui.resizable&&!l(d.target).hasClass("ui-resizable-handle")&&(a.endResize(),a.imageObj=null,e.trigger("aloha-image-unselected"));null!==e.activeEditable&&(b=a.findImgMarkup(b),c=a.getEditableConfig(e.activeEditable.obj),"undefined"!==typeof c?(a.ui._insertImageButton.show(),
b?(a.ui._insertImageButton.show(),a.ui.setScope(),a.settings.ui.meta&&(a.ui.imgSrcField.setTargetObject(b,"src"),a.ui.imgTitleField.setTargetObject(b,"title")),a.ui.imgSrcField.foreground(),a.ui.imgSrcField.focus()):a.settings.ui.meta&&a.ui.imgSrcField.setTargetObject(null),a.ui.doLayout()):a.ui._insertImageButton.hide())});e.bind("aloha-editable-created",function(c,b){try{document.execCommand("enableObjectResizing",!1,!1)}catch(d){e.Log.info(d,"Could not disable enableObjectResizing")}b.obj.delegate("img",
"mouseup",function(c){n||(a.clickImage(c),c.stopPropagation())})});a._subscribeToResizeFieldEvents()},autoResize:function(a){l("#"+this.ui.imgResizeWidthField.getInputId());l("#"+this.ui.imgResizeHeightField.getInputId());var c=this.imageObj.width(),b=this.imageObj.height(),d=!1;if(c<this.settings.minWidth||c>this.settings.maxWidth||b<this.settings.minHeight||b>this.settings.maxHeight)d=!0;var e=c/b;return d?(c>this.settings.maxWidth&&(c=this.settings.maxWidth,b=c/e),b>this.settings.maxHeight&&(b=
this.settings.maxHeight,c=b*e),c<this.settings.minWidth&&a&&(c=this.settings.minWidth,b=c/e),b<this.settings.minHeight&&a&&(b=this.settings.minHeight,c*=e),this._applyValuesToFields(c,b),this.setSizeByFieldValue(),!0):!1},toggleKeepAspectRatio:function(){this.keepAspectRatio=!this.keepAspectRatio;if("undefined"!==typeof this.jcAPI&&null!==this.jcAPI){var b=this.jcAPI.tellSelect();c=this.keepAspectRatio?"number"!==typeof this.settings.fixedAspectRatio?0<b.w/b.h?b.w/b.h:this.imageObj.width()/this.imageObj.height():
this.settings.fixedAspectRatio:!1;this.jcAPI.setOptions(this.keepAspectRatio?{aspectRatio:c}:{aspectRatio:0});this.jcAPI.focus()}else this.endResize(),a=this.keepAspectRatio?"number"!==typeof this.settings.fixedAspectRatio?this.imageObj.width()/this.imageObj.height():this.settings.fixedAspectRatio:!1,this.startResize()},_subscribeToResizeFieldEvents:function(){function a(c){var g=c.data.fieldName;if(8===c.keyCode||46===c.keyCode)b._updateFields(g,d(this).val(),!1)&&("undefined"!==typeof b.jcAPI&&
null!==b.jcAPI?b.setCropAreaByFieldValue():b.setSizeByFieldValue());else if(57>=c.keyCode&&48<=c.keyCode||105>=c.keyCode&&96<=c.keyCode)b._updateFields(g,d(this).val(),!1)&&("undefined"!==typeof b.jcAPI&&null!==b.jcAPI?b.setCropAreaByFieldValue():b.setSizeByFieldValue());else{var e=0;if(38===c.keyCode||107===c.keyCode)e=1;else if(40===c.keyCode||109===c.keyCode)e=-1;if(c.shiftKey||c.metaKey||c.ctrlKey)e*=10;var k=!1;0>e&&(k=!0);e=parseInt(d(this).val(),10)+e;b._updateFields(g,e,k)&&("undefined"!==
typeof b.jcAPI&&null!==b.jcAPI?b.setCropAreaByFieldValue():b.setSizeByFieldValue())}c.preventDefault();return!1}function c(a,g){var e=a.data.fieldName;if(a.shiftKey||a.metaKey||a.ctrlKey)g*=10;var k=parseInt(d(this).val(),10)+g,f=!1;0>g&&(f=!0);b._updateFields(e,k,f)&&("undefined"!==typeof b.jcAPI&&null!==b.jcAPI?b.setCropAreaByFieldValue():b.setSizeByFieldValue());return!1}var b=this,e=d("#"+b.ui.imgResizeHeightField.getInputId()),k={fieldName:"height",maxValue:b.ui.imgResizeHeightField.maxValue,
minValue:b.ui.imgResizeHeightField.minValue};e.live("keyup",k,a);e.live("mousewheel",k,c);e=d("#"+b.ui.imgResizeWidthField.getInputId());k={fieldName:"width",maxValue:b.ui.imgResizeWidthField.maxValue,minValue:b.ui.imgResizeWidthField.minValue};e.live("keyup",k,a);e.live("mousewheel",k,c)},setSize:function(a,c){this.imageObj.width(a);this.imageObj.height(c);var b=this.imageObj.closest(".Aloha_Image_Resize");b.height(c);b.width(a);this._onResize(this.imageObj);this._onResized(this.imageObj)},clickImage:function(b){this.endResize();
b=this.imageObj=l(b.target);if(!b.hasClass("aloha-ui")){this.ui.setScope();b.closest(".aloha-editable");this.ui._imageCnrRatioButton.setState(this.keepAspectRatio);this.restoreProps.push({obj:this.imageObj,src:this.imageObj.attr("src"),width:this.imageObj.width(),height:this.imageObj.height()});this._applyValuesToFields(this.imageObj.width(),this.imageObj.height());this.settings.ui.meta&&(this.ui.imgSrcField.setTargetObject(this.imageObj,"src"),this.ui.imgTitleField.setTargetObject(this.imageObj,
"title"));e.Selection.preventSelectionChanged();try{this.ui.imgSrcField.focus()}catch(d){}c=a=this.imageObj.width()/this.imageObj.height();this.settings.ui.resizable&&this.startResize();this.settings.autoResize&&this.autoResize(!0);e.Selection.preventSelectionChangedFlag=!1;e.trigger("aloha-image-selected")}},findImgMarkup:function(a){var c,b;"undefined"===typeof a&&(a=e.Selection.getRangeObject());b=l(a.startContainer);try{if(e.activeEditable&&("undefined"!==typeof a.startContainer&&"undefined"!==
typeof a.startContainer.childNodes&&"undefined"!==typeof a.startOffset&&"undefined"!==typeof a.startContainer.childNodes[a.startOffset]&&"img"===a.startContainer.childNodes[a.startOffset].nodeName.toLowerCase()&&a.startOffset+1===a.endOffset||b.hasClass("Aloha_Image_Resize")))return c=b.find("img")[0],c.css||(c.css=""),c.title||(c.title=""),c.src||(c.src=""),c}catch(d){e.Log.debug(d,"Error finding img markup.")}return null},getPluginFocus:function(){return this.imageObj},_updateFields:function(b,
e,k){var f=null,n=null,m=null,l=null,p=null,q=null,s=null,m="undefined"!==typeof this.jcAPI&&null!==this.jcAPI?c?c:a:a;if("width"==b)f=d("#"+this.ui.imgResizeWidthField.getInputId()),n=d("#"+this.ui.imgResizeHeightField.getInputId()),m=1/m,l=this.settings.minWidth,p=this.settings.maxWidth,q=this.settings.minHeight,s=this.settings.maxHeight;else if("height"==b)f=d("#"+this.ui.imgResizeHeightField.getInputId()),n=d("#"+this.ui.imgResizeWidthField.getInputId()),l=this.settings.minHeight,p=this.settings.maxHeight,
q=this.settings.minWidth,s=this.settings.maxWidth;else return!1;if(isNaN(e))return f.css("background-color","red"),!1;f.val(e);b=!0;e>p?this.settings.autoCorrectManualInput?(f.val(p),e=f.val(),f.css("background-color",""),b=!0):(f.css("background-color","red"),b=!1):e<l?k?(f.val(l),e=f.val(),b=!0):(this.settings.autoCorrectManualInput?f.css("background-color","wheat"):f.css("background-color","red"),b=!1):(f.css("background-color",""),b=!0);l=!0;this.keepAspectRatio&&(e=Math.round(e*m),e>s?this.settings.autoCorrectManualInput?
(n.val(s),f.val(n.val()/m),f.val(),f.css("background-color",""),n.css("background-color",""),l=!0):(e.css("background-color","red"),l=!1):e<q?k?(n.val(q),f.val(n.val()/m),f.val(),b=!0):(this.settings.autoCorrectManualInput?(n.val(e),n.css("background-color","wheat")):n.css("background-color","red"),l=!1):(n.val(e),n.css("background-color",""),l=!0));n.val()<q&&(l=!1);return b&&l?!0:!1},setSizeByFieldValue:function(){var a=this.ui.imgResizeWidthField.getValue(),c=this.ui.imgResizeHeightField.getValue();
this.setSize(a,c)},_applyValuesToFields:function(a,c){this.ui.imgResizeWidthField.setValue(a);this.ui.imgResizeHeightField.setValue(c);this.ui.imgResizeWidthField.getInputJQuery().css("background-color","");this.ui.imgResizeHeightField.getInputJQuery().css("background-color","")},setCropAreaByFieldValue:function(){var a=this.jcAPI.tellSelect(),c=parseInt(this.ui.imgResizeWidthField.getValue(),10),b=parseInt(this.ui.imgResizeHeightField.getValue(),10);this.jcAPI.setSelect([a.x,a.y,a.x+c,a.y+b]);this._onCropSelect();
this.jcAPI.enable()},insertImg:function(){var a=e.Selection.getRangeObject(),c=this.getEditableConfig(e.activeEditable.obj),b=e.getPluginUrl("image");a.isCollapsed()?(c="max-width: "+c.maxWidth+"; max-height: "+c.maxHeight,b=l('<img style="'+c+'" src="'+b+'/img/blank.jpg" title="" />'),k.Utils.Dom.insertIntoDOM(b,a,l(e.activeEditable.obj))):e.Log.error("img cannot markup a selection")},srcChange:function(){this.imageObj.attr("src",this.ui.imgSrcField.getValue())},positionCropButtons:function(){var a=
l(".jcrop-tracker:first"),c=a.offset(),b=c.top,c=c.left,d=a.height(),a=a.width(),e=l("#aloha-CropNResize-btns");0===b&&0===c&&e.hide();b=parseInt(b+d+3,10);c=parseInt(c+a/2-e.width()/2+10,10);0==c&&0==b||e.offset({top:b,left:c})},initCropButtons:function(){var a=this,c;l("body").append('<div id="aloha-CropNResize-btns" display="none"><button class="cnr-crop-apply" title="'+f.t("Accept")+'"></button><button class="cnr-crop-cancel" title="'+f.t("Cancel")+'"></button></div>');c=l("#aloha-CropNResize-btns");
c.find(".cnr-crop-apply").click(function(){a.acceptCrop()});c.find(".cnr-crop-cancel").click(function(){a.endCrop()});this.interval=setInterval(function(){a.positionCropButtons()},10)},destroyCropButtons:function(){l("#aloha-CropNResize-btns").remove();clearInterval(this.interval)},_disableSelection:function(a){a.find("*").attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"})},crop:function(){var c=this,b=c.keepAspectRatio?a:!1;this.ui._imageCropButton.setState(!0);
c.initCropButtons();c.settings.ui.resizable&&c.endResize();c.jcAPI=l.Jcrop(c.imageObj,{onSelect:function(){c._onCropSelect();window.setTimeout(function(){c.ui.setScope()},10)},aspectRatio:b,minSize:[c.settings.minWidth,c.settings.minHeight]});c._disableSelection(d(".jcrop-holder"));c._disableSelection(d("#imageContainer"));c._disableSelection(d("#aloha-CropNResize-btns"));d("body").trigger("aloha-image-crop-start",[c.imageObj])},_onCropSelect:function(){l(".jcrop-handle").mousedown(function(){l("#aloha-CropNResize-btns").hide()});
l(".jcrop-tracker").mousedown(function(){l("#aloha-CropNResize-btns").hide()});if("undefined"!==typeof this.jcAPI&&null!==this.jcAPI){this.positionCropButtons();var a=this.jcAPI.tellSelect();0<a.h&&0<a.w&&l("#aloha-CropNResize-btns").fadeIn("slow");this._applyValuesToFields(a.w,a.h)}},endCrop:function(){this.jcAPI&&(this.jcAPI.destroy(),this.jcAPI=null);this.destroyCropButtons();this.ui._imageCropButton.setState(!1);this.settings.ui.resizable&&this.startResize();d("body").trigger("aloha-image-crop-stop",
[this.imageObj]);this._applyValuesToFields(this.imageObj.width(),this.imageObj.height())},acceptCrop:function(){this._onCropped(this.imageObj,this.jcAPI.tellSelect());this.endCrop()},startResize:function(){var c=this,b=this.imageObj,d=c.keepAspectRatio?a:!1,b=this.imageObj.css({height:this.imageObj.height(),width:this.imageObj.width(),position:"relative","max-height":"","max-width":""});b.resizable({maxHeight:c.settings.maxHeight,minHeight:c.settings.minHeight,maxWidth:c.settings.maxWidth,minWidth:c.settings.minWidth,
aspectRatio:d,handles:c.settings.handles,grid:c.settings.grid,resize:function(a,b){n=!0;c._onResize(c.imageObj)},stop:function(a,b){n=!1;c._onResized(c.imageObj);this.enableCrop&&window.setTimeout(function(){c.ui.setScope();that.done(a)},10)}});b.css("display","inline-block");l(".ui-wrapper").attr("contentEditable",!1).addClass("aloha-image-box-active Aloha_Image_Resize aloha").css({position:"relative",display:"inline-block","float":c.imageObj.css("float")}).bind("resizestart",function(a){a.preventDefault()}).bind("mouseup",
function(a){a.originalEvent.stopSelectionUpdate=!0})},endResize:function(){this.imageObj&&this.imageObj.closest(".aloha-editable");this.imageObj&&this.imageObj.is(":ui-resizable")&&this.imageObj.resizable("destroy").css({top:0,left:0})},resetSize:function(){var a=this,c=new Image;c.onload=function(){var b=a.getPluginFocus();a.settings.ui.resizable&&a.endResize();l(b).add(b.parent()).css({width:c.width+"px",height:c.height+"px","max-width":"","max-height":""});a.settings.ui.resizable&&a.resize()};
c.src=a.getPluginFocus().attr("src")},reset:function(){this.settings.ui.crop&&this.endCrop();this.settings.ui.resizable&&this.endResize();if(!this._onReset(this.imageObj))for(var a=0;a<this.restoreProps.length;a++)if(this.imageObj.get(0)===this.restoreProps[a].obj.get(0)){this.imageObj.attr("src",this.restoreProps[a].src);this.imageObj.width(this.restoreProps[a].width);this.imageObj.height(this.restoreProps[a].height);break}this._applyValuesToFields(this.imageObj.width(),this.imageObj.height())}})});
define("highlighteditables/highlighteditables-plugin",["aloha","jquery","aloha/plugin"],function(l,b,p){var m=window.GENTICS;return p.create("highlighteditables",{config:["highlight"],init:function(){var b=this,d;m.Utils.Position.addMouseMoveCallback(function(){var k,e;for(k=0;k<l.editables.length;k++)e=l.editables[k],d=b.getEditableConfig(e.obj),l.activeEditable||e.isDisabled()||"highlight"!=d||e.obj.addClass("aloha-editable-highlight")});m.Utils.Position.addMouseStopCallback(function(){b.fade()});
l.bind("aloha-editable-activated",function(d,e){b.fade()})},fade:function(){var f,d,k=function(){b(this).css("outline","")};for(f=0;f<l.editables.length;f++)d=l.editables[f].obj,d.hasClass("aloha-editable-highlight")&&d.css("outline",d.css("outlineColor")+" "+d.css("outlineStyle")+" 5px").removeClass("aloha-editable-highlight").animate({outlineWidth:"0px"},300,"swing",k)}})});define("dom-to-xhtml/dom-to-xhtml","jquery util/dom2 util/misc util/browser aloha/ephemera aloha/console".split(" "),function(l,
b,p,m,f,d){function k(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(a,c){var d=b.attrs(a),g="",e,n;if(m.ie7)for(var l in u)if(u.hasOwnProperty(l)&&a[l]){e=0;for(n=d.length;e<n;e++)if(l===d[e][0].toLowerCase()){d.splice(e,1);break}d.push([l,l])}e=0;for(n=d.length;e<n;e++){var v=d[e];l=v[0].toLowerCase();v=v[1];if(!c||!f.isAttrEphemeral(a,l,c.attrMap||{},c.attrRxs||{})){var p=u[l];if(p||""!==v)g+=" "+l+'="'+k(p?l:v).replace(/"/g,"&quot;")+'"'}}return g}function n(a){var c=
a.nodeName,b=z[c];if(null!=b)return b;var d="/"+a.nodeName;a=a.nextSibling;for(b=!1;null!=a;){if(d==a.nodeName){b=!0;break}a=a.nextSibling}return z[c]=b}function a(a,b,d,e,k){for(;null!=b;)if(1===b.nodeType&&d&&"/"+a.nodeName==b.nodeName){b=b.nextSibling;break}else 1===b.nodeType&&n(b)?b=c(b,b.nextSibling,!0,e,k):(g(b,e,k),b=b.nextSibling);return b}function c(c,b,d,g,k){var f=c.nodeName.toLowerCase();c.scopeName&&"HTML"!=c.scopeName&&-1===f.indexOf(":")&&(f=c.scopeName.toLowerCase()+":"+f);!d&&null==
b&&v[f]?k.push("<"+f+e(c,g)+"/>"):(k.push("<"+f+e(c,g)+">"),b=a(c,b,d,g,k),k.push("</"+f+">"));return b}function g(a,b,g){1===a.nodeType?c(a,a.firstChild,n(a),b,g):3===a.nodeType?g.push(k(a.nodeValue)):8===a.nodeType?g.push("\x3c!--"+a.nodeValue+"--\x3e"):d.warn("Unknown node type encountered during serialization, ignoring it: type="+a.nodeType+" name="+a.nodeName+" value="+a.nodeValue)}var v={area:!0,base:!0,basefont:!0,br:!0,col:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,link:!0,meta:!0,param:!0,
embed:!0},u={checked:!0,compact:!0,declare:!0,defer:!0,disabled:!0,ismap:!0,multiple:!0,nohref:!0,noresize:!0,noshade:!0,nowrap:!0,readonly:!0,selected:!0},z={DIV:!1,SPAN:!1,UL:!1,OL:!1,LI:!1,TABLE:!1,TR:!1,TD:!1,TH:!1,I:!1,B:!1,EM:!1,STRONG:!1,A:!1,P:!1};return{contentsToXhtml:function(c,b){var d=[];a(c,c.firstChild,!1,b,d);return d.join("")},nodeToXhtml:function(a,c){var b=[];g(a,c,b);return b.join("")}}});define("dom-to-xhtml/dom-to-xhtml-plugin",["aloha","jquery","aloha/plugin","aloha/ephemera",
"dom-to-xhtml/dom-to-xhtml"],function(l,b,p,m,f){return p.create("dom-to-xhtml",{init:function(){var d=this;l.Editable.setContentSerializer(function(k){return d.settings.editables||d.settings.config?d.settings.editables&&"dom-to-xhtml"==d.settings.editables["#"+b(k).attr("id")]?f.contentsToXhtml(k,m.ephemera()):d.settings.config&&"dom-to-xhtml"==d.settings.config&&!d.settings.editables["#"+b(k).attr("id")]?f.contentsToXhtml(k,m.ephemera()):b(k).html():f.contentsToXhtml(k)})}})});define("contenthandler/contenthandler-utils",
["jquery"],function(l){return{wrapContent:function(b){return"string"===typeof b?l("<div>"+b+"</div>"):b instanceof l?l("<div>").append(b):null},isProppedParagraph:function(b){b=l.trim(b);if(!b)return!1;b=l("<div>"+b+"</div>")[0];return b.firstChild===b.lastChild&&"p"===b.firstChild.nodeName.toLowerCase()?(b=b.firstChild.children)&&1===b.length&&"br"===b[0].nodeName.toLowerCase():!1}}});define("contenthandler/wordcontenthandler","jquery aloha aloha/contenthandlermanager contenthandler/contenthandler-utils util/dom2 util/html".split(" "),
function(l,b,p,m,f,d){function k(a){switch(a[0].nodeName.toLowerCase()){case "table":return 0===a.find("tbody,tr").length;case "tbody":return 0===a.find("tr").length;case "tr":return 0===a.find("td,th").length;default:return""===l.trim(a.text())}}function e(a){if(0===a.length||!c.test(a[0].outerHTML))return!1;a=a.find("*");var b,d;for(b=0;b<a.length;b++)if((d=a.eq(b).attr("style"))&&0<=d.toLowerCase().indexOf("mso")||(d=a.eq(b).attr("class"))&&0<=d.toLowerCase().indexOf("mso"))return!0;return!1}function n(a){a.find("p.MsoTitle").each(function(){b.Markup.transformDomObject(l(this),
"h1")});a.find("p.MsoSubtitle").each(function(){b.Markup.transformDomObject(l(this),"h2")})}var a=l,c=/mso/,g=/^#(.*)/;return p.createHandler({handleContent:function(a){var c=m.wrapContent(a);if(!c)return a;e(c)&&this.transformWordContent(c);return c.html()},isOrderedList:function(a){return"Wingdings"==a.css("fontFamily")||"Symbol"==a.css("fontFamily")?!1:a.text().match(/^([0-9]{1,3}\.)|([0-9]{1,3}\)|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\)))$/)?!0:!1},transformListsFromWord:function(c){var b=this,d,g;
g=c.find("p.MsoListParagraphCxSpFirst,p.MsoListParagraphCxSpMiddle,p.MsoListParagraphCxSpLast,p.MsoListParagraph,p span");g.each(function(){var c=a(this),b=c.css("font-family")||"",d=c.css("mso-list")||"",g=c.attr("style")||"";c.hasClass("MsoListParagraphCxSpFirst")||c.hasClass("MsoListParagraph")?c.addClass("aloha-list-element"):0<=b.indexOf("Symbol")?c.closest("p").addClass("aloha-list-element"):0<=b.indexOf("Wingdings")?c.closest("p").addClass("aloha-list-element"):""!==d?c.closest("p").addClass("aloha-list-element"):
0<=g.indexOf("mso-list")&&c.closest("p").addClass("aloha-list-element")});c.find("p span span span").each(function(){var c=a(this),b;0===a.trim(c.text()).replace(/&nbsp;/g,"").length&&(b=a.trim(c.parent().parent().text()).replace(/&nbsp;/g,""),b.match(/^([0-9]{1,3}\.)|([0-9]{1,3}\))|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\))|(.)$/)&&(c.closest("p").addClass("aloha-list-element"),c.parent().parent().addClass("aloha-list-bullet")))});g="p.aloha-list-element";d=":not("+g+", font)";g=c.find(g);0<g.length&&g.each(function(){var c=
a(this),g,e,k,f,n,m,l,v;c.removeClass("aloha-list-element");c.find("font").each(function(){a(this).contents().unwrap()});v=[];l=parseFloat(c.css("marginLeft"));isNaN(l)&&(l=0);m=[];n=c.nextUntil(d);f=a(c.find("span.aloha-list-bullet"));0===f.length&&(f=c.find("span").eq(0));k=b.isOrderedList(f);f.remove();e=a(k?"<ol></ol>":"<ul></ul>");m.push(e);g=a("<li></li>");e.append(g);c.contents().appendTo(g);c.replaceWith(e);n.each(function(){var c=a(this),d,n;if(!c.is("font")){c.find("font").each(function(){a(this).contents().unwrap()});
d=parseFloat(c.css("marginLeft"));isNaN(d)&&(d=0);f=a(c.find("span.aloha-list-bullet"));0===f.length&&(f=c.find("span").eq(0));k=b.isOrderedList(f);f.remove();if(d>l)n=a(k?"<ol></ol>":"<ul></ul>"),e.children(":last").append(n),e=n,m.push(e),v.push(d),l=d;else if(d<l&&0<v.length){for(;0<v.length&&v[v.length-1]>d;)v.pop(),m.pop();e=m[m.length-1];l=d}g=a("<li></li>");e.append(g);c.contents().appendTo(g);c.remove()}})})},removeParagraphNumbering:function(c){c=c.find("h1,h2,h3,h4,h5,h6");0<c.length&&c.each(function(){var c=
a(this),b=c.find("span"),c=c.find("a");b.each(function(){a.trim(a(this).text()).match(/^([\.\(]?[\d\D][\.\(]?){1,4}$/)&&a(this).remove()});c.each(function(){"undefined"===typeof a(this).attr("href")&&a(this).contents().unwrap()})})},transformToc:function(c){c.find("[class*=MsoToc]").each(function(){var c=a(this),b=c.find("span"),c=c.find("a");b.each(function(){a(this).attr("style")&&-1<a(this).attr("style").search("mso-hide")&&a(this).remove();a(this).contents().unwrap()});c.each(function(){a(this).contents().unwrap()})})},
transformWordContent:function(a){this.transformToc(a);this.removeParagraphNumbering(a);this.transformListsFromWord(a);n(a);var c=a.find("*"),b,e,f,m;f=0;for(m=c.length;f<m;f++)e=c.eq(f),b=e[0].nodeName.toLowerCase(),"a"===b?(b=e.attr("href"))&&g.test(l.trim(b))&&e.contents().unwrap():"div"===b||"span"===b?e.contents().unwrap():"td"!==b&&k(e)&&e.contents().unwrap();c=a[0].childNodes;e=0;for(f=c.length;e<f;e++)c[e]&&d.isUnrenderedNode(c[e])&&a[0].removeChild(c[e])}})});define("contenthandler/genericcontenthandler",
["jquery","aloha","aloha/contenthandlermanager","contenthandler/contenthandler-utils"],function(l,b,p,m){function f(b){b.find("table").removeAttr("cellpadding").removeAttr("cellspacing").removeAttr("border").removeAttr("border-top").removeAttr("border-bottom").removeAttr("border-left").removeAttr("border-right");b.find("td").each(function(){var b;(b=l.trim(this.innerHTML))?(b=l("<div>"+b+"</div>")[0],b=b.firstChild===b.lastChild&&"p"===b.firstChild.nodeName.toLowerCase()?(b=b.firstChild.children)&&
1===b.length&&"br"===b[0].nodeName.toLowerCase():!1):b=!1;b&&(this.innerHTML="&nbsp;");b=l(">p",this);1===b.length&&b.contents().unwrap()});b.find("table,th,td,tr").removeAttr("width").removeAttr("height").removeAttr("valign");b.find("colgroup").remove()}var d=["strong","em","s","u","strike"];return p.createHandler({handleContent:function(d){var e=m.wrapContent(d);if(!e)return d;if(e.find(".aloha-block").length)return e.html();f(e);this.cleanLists(e);this.removeComments(e);this.unwrapTags(e);this.removeStyles(e);
this.removeNamespacedElements(e);d=!0;b.settings.contentHandler&&b.settings.contentHandler.handler&&b.settings.contentHandler.handler.generic&&"undefinded"!==typeof b.settings.contentHandler.handler.generic.transformFormattings&&!b.settings.contentHandler.handler.generic.transformFormattings&&(d=!1);d&&this.transformFormattings(e);return e.html()},cleanLists:function(b){b.find("ul,ol").find(">:not(li)").remove()},transformFormattings:function(f){var e=[],n;for(n=0;n<d.length;n++)b.settings.contentHandler&&
b.settings.contentHandler.allows&&b.settings.contentHandler.allows.elements&&-1!==l.inArray(d[n].toLowerCase(),b.settings.contentHandler.allows.elements)||e.push(d[n]);f.find(e.join(",")).each(function(){"STRONG"===this.nodeName?b.Markup.transformDomObject(l(this),"b"):"EM"===this.nodeName?b.Markup.transformDomObject(l(this),"i"):"S"===this.nodeName||"STRIKE"==this.nodeName?b.Markup.transformDomObject(l(this),"del"):"U"===this.nodeName&&l(this).contents().unwrap()})},transformLinks:function(b){b.find("a").each(function(){"undefined"===
typeof l(this).attr("href")&&l(this).contents().unwrap()})},removeComments:function(b){var d=this;b.contents().each(function(){8===this.nodeType?l(this).remove():d.removeComments(l(this))})},unwrapTags:function(d){d.find("span,font,div").not(".aloha-wai-lang").each(function(){"DIV"==this.nodeName?"<br>"===this.innerHTML?l(this).contents().unwrap():l(b.Markup.transformDomObject(l(this),"p").append("<br>")).contents().unwrap():l(this).contents().unwrap()})},removeStyles:function(b){var d=this;b.children("style").filter(function(){return"false"!==
this.contentEditable}).remove();b.children().filter(function(){return"false"!==this.contentEditable}).each(function(){l(this).removeAttr("style").removeClass();d.removeStyles(l(this))})},removeNamespacedElements:function(b){b.find("*").each(function(){var b=this.prefix?this.prefix:this.scopeName?this.scopeName:void 0;if(b&&"HTML"!==b||0<=this.nodeName.indexOf(":")){var b=l(this),d=b.contents();d.length?d.unwrap():b.remove()}})}})});q.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i;
q.RELATIVE="__relative__";window.Sanitize=q;q.prototype.clean_node=function(l){function b(b,d){var f,a=d.length;for(f=0;f<a;f++)if(d[f]===b)return f;return-1}function p(){var b=[],d={},f,a=arguments.length,c;for(f=0;f<a;f++)if((c=arguments[f])&&c.length)for(var g=0,m=c.length;g<m;g++)d[c[g]]||(d[c[g]]=!0,b.push(c[g]));return b}function m(d){var e,f,a=this.filters.length;for(f=0;f<a;f++)if(!this.filters[f](d)){e=d.cloneNode(!0);this.current_element.appendChild(e);return}switch(d.nodeType){case 1:var c,
g,l,u,z,A;f=d;c=[];d=f;g=!1;var y;l=this.transformers.length;for(y=0;y<l;y++)if(a=this.transformers[y]({allowed_elements:this.allowed_elements,config:this.config,node:f,node_name:f.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}),null!=a)if("object"==typeof a){if(a.whitelist_nodes&&a.whitelist_nodes instanceof Array)for(u=a.whitelist_nodes.length,g=0;g<u;g++)-1==b(a.whitelist_nodes[g],this.whitelist_nodes)&&this.whitelist_nodes.push(a.whitelist_nodes[g]);g=a.whitelist?!0:
!1;a.attr_whitelist&&(c=p(c,a.attr_whitelist));d=a.node?a.node:d}else throw Error("transformer output must be an object or null");f=this.jQuery;y=f.browser.msie&&"7.0"===f.browser.version;f=d;a=f.nodeName.toLowerCase();d=this.current_element;if(this.allowed_elements[a]||g){this.current_element=this.dom.createElement(f.nodeName);d.appendChild(this.current_element);l=p(this.config.attributes[a],this.config.attributes.__ALL__,c);g=l.length;for(c=0;c<g;c++)if(e=l[c],u=f.attributes[e])z=!0,this.config.protocols[a]&&
this.config.protocols[a][e]&&(z=this.config.protocols[a][e],z=(A=u.nodeValue.toLowerCase().match(q.REGEX_PROTOCOL))?-1!=b(A[1],z):-1!=b(q.RELATIVE,z)),z&&(!y||y&&"style"!==e)&&this.current_element.setAttribute(e,u.nodeValue);if(this.config.add_attributes[a])for(e in this.config.add_attributes[a])(!y||y&&"style"!==e)&&this.current_element.setAttribute(e,this.config.add_attributes[a][e])}else if(-1!=b(f,this.whitelist_nodes)){this.current_element=f.cloneNode(!0);for(e=this.current_element.childNodes.length;0<
e;)this.current_element.removeChild(this.current_element.firstChild);d.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[a])for(e=f.childNodes,g=e.length,c=0;c<g;c++)m.call(this,e[c]);this.current_element.normalize&&this.current_element.normalize();this.current_element=d;break;case 3:e=d.cloneNode(!1);this.current_element.appendChild(e);break;case 5:e=d.cloneNode(!1);this.current_element.appendChild(e);break;case 8:this.config.allow_comments&&
(e=d.cloneNode(!1),this.current_element.appendChild(e))}}var f=this.dom.createDocumentFragment();this.current_element=f;this.whitelist_nodes=[];l=l.childNodes;var d;d=0;for(len=l.length;d<len;d++)m.call(this,l[d]);f.normalize&&f.normalize();return f};define("vendor/sanitize",function(){});define("contenthandler/sanitizecontenthandler","aloha/core jquery aloha/contenthandlermanager aloha/plugin aloha/console vendor/sanitize".split(" "),function(l,b,p,m,f){function d(d){var f=["restricted","basic",
"relaxed"],a=l.defaults.supports,a=l.settings.contentHandler.sanitize&&-1<b.inArray(l.settings.contentHandler.sanitize,f)?l.defaults.sanitize[l.settings.contentHandler.sanitize]:l.defaults.sanitize.relaxed;l.settings.contentHandler.allows&&(a=l.settings.contentHandler.allows);d&&(a=d);a.filters=[function(a){return"false"!=a.contentEditable}];k=new q(a,b)}var k;l.defaults.sanitize||(l.defaults.sanitize={});l.defaults.sanitize.restricted={elements:"b em i strong u del p span div br".split(" ")};l.defaults.sanitize.basic=
{elements:"a abbr b blockquote br cite code dd del dl dt em i li ol p pre q small strike strong sub sup u ul".split(" "),attributes:{a:["href"],blockquote:["cite"],q:["cite"],abbr:["title"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},q:{cite:["http","https","__relative__"]}}};l.defaults.sanitize.relaxed={elements:"a abbr b blockquote br caption cite code col colgroup dd del dl dt em h1 h2 h3 h4 h5 h6 i img li ol p pre q small strike strong sub sup table tbody td tfoot th thead tr u ul span hr object div".split(" "),
attributes:{a:"href title id class target data-gentics-aloha-repository data-gentics-aloha-object-id".split(" "),div:["id","class","style"],abbr:["title"],blockquote:["cite"],br:["class"],col:["span","width"],colgroup:["span","width"],img:"align alt height src title width class data-caption data-align data-width data-original-image".split(" "),ol:["start","type"],p:["class","style","id"],q:["cite"],table:["summary","width"],td:"abbr axis colSpan rowSpan colspan rowspan width".split(" "),th:"abbr axis colSpan rowSpan colspan rowspan scope width".split(" "),
ul:["type"],span:["class","style","lang","xml:lang","role"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},img:{src:["http","https","__relative__"]},q:{cite:["http","https","__relative__"]}}};return p.createHandler({handleContent:function(e,f,a){if(!a)return e;var c,g;if(l.settings.contentHandler&&l.settings.contentHandler.handler&&l.settings.contentHandler.handler.sanitize)if(l.settings.contentHandler.handler.sanitize&&(g=l.settings.contentHandler.handler.sanitize),
"undefined"!==typeof g["#"+a.getId()])c=g;else for(f=a.obj.attr("class").split(" "),a=0;a<f.length;a++)"undefined"!==typeof g["."+f[a]]&&(c=g["."+f[a]]);"undefined"!==typeof k&&"undefined"===typeof c||d(c);"string"===typeof e?e=b("<div>"+e+"</div>").get(0):e instanceof b&&(e=b("<div>").append(e).get(0));return b("<div>").append(k.clean_node(e)).html()}})});define("contenthandler/blockelementcontenthandler","jquery aloha/core aloha/contenthandlermanager contenthandler/contenthandler-utils util/functions util/html util/arrays".split(" "),
function(l,b,p,m,f,d,k){function e(a,c){var b=d.findNodeRight(c.lastChild,z);b&&"br"===b.nodeName.toLowerCase()&&l(b).remove()}function n(a,c){var b=l(c);b.filter(v).remove();l.browser.msie&&(b.filter("br.aloha-end-br").remove(),b.filter(g).each(e));b.children(u).each(n)}function a(c,b){var d=l(b);d.filter(v).append("\u200b");d.children(u).each(a)}function c(a,b){var d=l(b);d.filter(v).filter(":empty").append("<br/>");d.children(u).each(c)}var g=d.BLOCKLEVEL_ELEMENTS.join(),v=k.subtract(d.BLOCKLEVEL_ELEMENTS,
d.VOID_ELEMENTS),u=":not(.aloha-block)",z=f.complement(d.isIgnorableWhitespace);return p.createHandler({handleContent:function(b,d){if(!d)return b;var g=m.wrapContent(b);if(!g)return b;switch(d.command){case "initEditable":g.children(u).each(n);l.browser.msie&&7>=l.browser.version&&g.children(u).each(a);break;case "getContents":g.children(u).each(c)}return g.html()}})});define("contenthandler/contenthandler-plugin","jquery aloha/plugin aloha/contenthandlermanager contenthandler/wordcontenthandler contenthandler/genericcontenthandler contenthandler/sanitizecontenthandler contenthandler/blockelementcontenthandler".split(" "),
function(l,b,p,m,f,d,k){var e={word:m,generic:f,sanitize:d,blockelement:k};return b.create("contenthandler",{init:function(){for(var b in e)e.hasOwnProperty(b)&&p.register(b,e[b])}})});define("characterpicker/nls/i18n",{root:{"button.addcharacter.tooltip":"pick special characters"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("characterpicker/characterpicker-plugin","aloha jquery aloha/plugin ui/ui ui/button ui/floating PubSub i18n!characterpicker/nls/i18n".split(" "),function(l,
b,p,m,f,d,k,e){function n(a){a.$element.click(function(a){a.stopPropagation()});b("body").click(function(c){!a._overlayActive||c.target===a.$element[0]||b(c.target).is(".aloha-icon-characterpicker")||b(c.target).find(".aloha-icon-characterpicker").length||a.hide()})}function a(a){q.keyup(function(c){27===c.keyCode&&"table"===a.$element.css("display")&&a.hide()})}function c(a,c,b){var d=function(a){return a.replace(/\-(\w)/g,function(a,c){return c.toUpperCase()})};(a=a.currentStyle?a.currentStyle[d(b)]:
document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null).getPropertyValue(b):a.style[d(b)])&&c.css(b,a)}function g(a,c){var d={13:function(b){a.hide();c(b.text())},37:function(a){var c=a.prev();c.length&&(c.addClass("focused"),a.removeClass("focused"))},38:function(a){var c=a.parent().prev();c.length&&b(c.children()[a.index()]).addClass("focused").length&&a.removeClass("focused")},39:function(a){a.next().addClass("focused").length&&a.removeClass("focused")},
40:function(a){var c=a.parent().next();c.length&&b(c.children()[a.index()]).addClass("focused").length&&a.removeClass("focused")}};q.keydown(function(c){c.stopPropagation();if(d[c.keyCode]&&"table"===a.$element.css("display"))return d[c.keyCode](a.$element.find(".focused")),!1})}function v(a,c){var d=document.createElement("textarea");d.innerHTML=c;for(var d=b.grep(d.value.split(" "),function(a){return""!==a}),g=["<tr>"],e=0,f;f=d[e];)0!==e&&0===e%15&&g.push("</tr><tr>"),g.push('<td unselectable="on">'+
f+"</td>"),e++;g.push("</tr>");a.$tbody.empty().append(g.join(""));a.$element.delegate("td","mouseover",function(){a.$element.find(".focused").removeClass("focused");b(this).addClass("focused")}).delegate("td","mouseout",function(){b(this).removeClass("focused")}).delegate("td","click",function(){a.$element.hide();a.onSelect(b(this).text())})}function u(a){a=a.offset();"fixed"===d.POSITION_STYLE&&(a.top-=s.scrollTop(),a.left-=s.scrollLeft());return a}function z(a){l.activeEditable&&(B.select(),l.execCommand("insertHTML",
!1,a),B.endContainer=B.startContainer,B.endOffset=++B.startOffset,B.select())}function A(c){var d=this;d.$element=b('<table class="aloha-character-picker-overlay" unselectable="on" role="dialog"><tbody></tbody></table>');d.$element.mousedown(function(a){return!1});d.onSelect=c;d.$tbody=d.$element.find("tbody");d.$element.appendTo(b("body"));n(d);a(d);g(d,c);l.bind("aloha-editable-deactivated",function(){d.hide()})}function y(a,c){var d=a.getEditableConfig(c.obj);if(!d)return null;var d=b.isArray(d)?
d.join(" "):d,g=r[d];g||(g=new A(z),v(g,d),r[d]=g);return g}var q=b(document),s=b(window),B,r={};A.prototype={show:function(a){this.$element.css(u(a)).css("position",d.POSITION_STYLE).show().find(".focused").removeClass("focused");this.$element.find("td").eq(0).addClass("focused");this._overlayActive=!0},hide:function(){this.$element.hide();this._overlayActive=!1}};return p.create("characterpicker",{settings:{},config:"&#38; &#34; &#162; &#8364; &#163; &#165; &#169; &#174; &#8482; &#8240; &#181; &#183; &#8226; &#8230; &#8242; &#8243; &#167; &#182; &#223; &#8249; &#8250; &#171; &#187; &#8216; &#8217; &#8220; &#8221; &#8218; &#8222; &#60; &#62; &#8804; &#8805; &#8211; &#8212; &#175; &#8254; &#164; &#166; &#168; &#161; &#191; &#710; &#732; &#176; &#8722; &#177; &#247; &#8260; &#215; &#185; &#178; &#179; &#188; &#189; &#190; &#402; &#8747; &#8721; &#8734; &#8730; &#8764; &#8773; &#8776; &#8800; &#8801; &#8712; &#8713; &#8715; &#8719; &#8743; &#8744; &#172; &#8745; &#8746; &#8706; &#8704; &#8707; &#8709; &#8711; &#8727; &#8733; &#8736; &#180; &#184; &#170; &#186; &#8224; &#8225; &#192; &#193; &#194; &#195; &#196; &#197; &#198; &#199; &#200; &#201; &#202; &#203; &#204; &#205; &#206; &#207; &#208; &#209; &#210; &#211; &#212; &#213; &#214; &#216; &#338; &#352; &#217; &#218; &#219; &#220; &#221; &#376; &#222; &#224; &#225; &#226; &#227; &#228; &#229; &#230; &#231; &#232; &#233; &#234; &#235; &#236; &#237; &#238; &#239; &#240; &#241; &#242; &#243; &#244; &#245; &#246; &#248; &#339; &#353; &#249; &#250; &#251; &#252; &#253; &#254; &#255; &#913; &#914; &#915; &#916; &#917; &#918; &#919; &#920; &#921; &#922; &#923; &#924; &#925; &#926; &#927; &#928; &#929; &#931; &#932; &#933; &#934; &#935; &#936; &#937; &#945; &#946; &#947; &#948; &#949; &#950; &#951; &#952; &#953; &#954; &#955; &#956; &#957; &#958; &#959; &#960; &#961; &#962; &#963; &#964; &#965; &#966; &#967; &#968; &#969; &#8501; &#982; &#8476; &#977; &#978; &#8472; &#8465; &#8592; &#8593; &#8594; &#8595; &#8596; &#8629; &#8656; &#8657; &#8658; &#8659; &#8660; &#8756; &#8834; &#8835; &#8836; &#8838; &#8839; &#8853; &#8855; &#8869; &#8901; &#8968; &#8969; &#8970; &#8971; &#9001; &#9002; &#9674; &#9824; &#9827; &#9829; &#9830;",
_constructor:function(){this._super("characterpicker")},init:function(){function a(c){c<l.editables.length&&(y(b,l.editables[c]),setTimeout(function(){a(c+1)},100))}var b=this;l.settings.plugins&&l.settings.plugins.characterpicker&&(b.settings=l.settings.plugins.characterpicker);var d=m.adopt("characterPicker",f,{tooltip:e.t("button.addcharacter.tooltip"),icon:"aloha-icon-characterpicker",scope:"Aloha.continuoustext",click:function(){if(b.overlay){B=l.Selection.rangeObject;var a=B.startContainer.parentNode,
d=b.overlay.$element;c(a,d,"font-family");c(a,d,"font-weight");c(a,d,"font-style");b.overlay.show(this.element)}}});setTimeout(function(){a(0)},100);l.bind("aloha-editable-activated",function(a,c){b.overlay=y(b,c.editable);b.overlay?d.show():d.hide()});k.sub("aloha.floating.changed",function(a){b.overlay&&b.overlay.$element.css(u(d.element))})}})});define("commands/inserthtml","aloha/core jquery aloha/command aloha/selection util/dom aloha/contenthandlermanager aloha/console".split(" "),function(l,
b,p,m,f,d,k){p.register("inserthtml",{action:function(e,n){function a(d){var g=b(d);if(!f.insertIntoDOM(g,n,c,!1))for(g=g.contents(),(f.isBlockLevelElement(d)||f.isListElement(d))&&a(b("<br/>").get(0)),m=g.length-1;0<=m;--m)a(g[m])}var c=b(f.getEditingHostOf(n.startContainer)),g=n.commonAncestorContainer,m,p=[];e=d.handleContent(e,{contenthandler:l.settings.contentHandler.insertHtml});if("string"===typeof e)e=b("<div>"+e+"</div>");else if(e instanceof b)e=b("<div>").append(e);else throw"INVALID_VALUE_ERR";
p=e.contents();f.removeRange(n);for(m=p.length-1;0<=m;--m)a(p[m]);0<p.length?n=f.setCursorAfter(p.get(p.length-1)):n.select();f.doCleanup({merge:!0,removeempty:!0},n,g);try{n.select()}catch(z){k.warn("Error:",z)}}})});define("commands/commands-plugin",["aloha/command","./inserthtml"],function(l,b){});define("block/block-utils",["util/dom","util/dom2","util/html"],function(l,b,p){function m(b){return"SPAN"===b.nodeName&&(0===b.childNodes.length||"&nbsp;"===b.innerHTML)}function f(){var b=document.createElement("span");
b.appendChild(document.createTextNode("\u00a0"));return b}function d(d){return(p.isBlock(d)||b.isTextNode(d))&&!p.isUnrenderedNode(d)}function k(d){return b.forward(d.lastChild||d)}function e(b){return b.hasClass("aloha-table-wrapper")}return{pad:function(e){b.findBackward(b.backward(e[0]),d,function(a){return p.isBlock(a)||l.isEditingHost(a)})||e.before(f());b.findForward(k(e[0]),d,function(a){return p.isBlock(a)||l.isEditingHost(a)||a.previousSibling&&l.isEditingHost(a.previousSibling)})||e.after(f())},
unpad:function(b){var a=b[0].previousSibling;b=b[0].nextSibling;a&&m(a)&&a.parentNode.removeChild(a);b&&m(b)&&b.parentNode.removeChild(b)},isDragdropEnabledForElement:function(b){b=b.closest(".aloha-editable");return b.length?!!b.data("block-dragdrop"):!0},isTable:e,getEditableByBlock:function(b){return b.parents(".aloha-editable").filter(":first")},getTableByBlock:function(b){return e(b)?b.find("table").filter(":first"):null}}});define("block/blockmanager","aloha jquery ui/scopes aloha/observable aloha/registry util/class util/strings util/maps block/block-utils table/table-plugin".split(" "),
function(l,b,p,m,f,d,k,e,n,a){var c=window.GENTICS,g=new (d.extend(m,{defaults:{"aloha-block-type":"DefaultBlock"},blockTypes:null,blocks:null,_highlightedBlocks:null,_activeBlock:null,_dragdropEnabled:!0,_constructor:function(){p.createScope("Aloha.Block");this.blockTypes=new f;this.blocks=new f;this._highlightedBlocks={}},registerEventHandlers:function(){var a=this;this._registerEventHandlersForDeactivatingAlohaBlock();this._registerEventHandlersForDeterminingCurrentlyActiveBlock();this._registerEventHandlersForBlockDeletion();
this._registerEventHandlersForCutCopyPaste();this._registerEventHandlersForEditableActivated();l.bind("aloha-selection-changed",function(c,d,g){d&&0<b(d.getCommonAncestorContainer()).parents(".aloha-block").length||a._deactivateHighlightedBlocks()})},_registerEventHandlersForDeactivatingAlohaBlock:function(){var a=this;b(document).bind("click",function(c){e.isEmpty(a._highlightedBlocks)||0<b(c.target).closest(".aloha-ui,.aloha-block-do-not-deactivate,.aloha-block").length||a._deactivateHighlightedBlocks()})},
_registerEventHandlersForDeterminingCurrentlyActiveBlock:function(){var a=this;this.bind("block-selection-change",function(c){a._activeBlock=0<c.length?c[0]:null})},_registerEventHandlersForBlockDeletion:function(){var a=this;l.bind("aloha-command-will-execute",function(c,d){var g=d.commandId,e=l.getSelection(),f=e.getRangeCount(),e=e.getRangeAt(0),k=e.endContainer,n=e.startContainer,k=0===f||1===f&&k===n&&k===b("body")[0]||1===f&&k===n&&e.startOffset+1===e.endOffset;if(a._activeBlock&&("delete"===
g||"forwarddelete"===g)&&k)d.preventDefault=!0,a._activeBlock.destroy();else if(!a._activeBlock&&("delete"===g||"forwarddelete"===g)&&1===f&&!1===e.collapsed){var m;m=function(a){for(var c,d=0,g=a.length;d<g;d++)if(c=a[d],1===c.domobj.nodeType){var e=b(c.domobj);"full"===c.selection&&e.is(".aloha-block")?e.remove():m(c.children)}};m(l.Selection.getSelectionTree())}});b(window.document).keydown(function(c){if(0<b(c.target).closest(".aloha-ui").length)return!0;if(a._activeBlock&&(46===c.which||8===
c.which)&&!1===a._activeBlock._isInsideNestedEditable&&(b.browser.msie&&8>=parseInt(b.browser.version,10)&&a._activeBlock.$element.parents(".aloha-editable,.aloha-block").first().hasClass("aloha-editable")||a._activeBlock.shouldDestroy()))return a._activeBlock.destroy(),c.preventDefault(),!1})},_registerEventHandlersForCutCopyPaste:function(){var a=this,d=!1,g=!1,e=null;b(window.document).keydown(function(e){l.activeEditable&&a._activeBlock&&b.contains(a._activeBlock.$element.get(0),l.activeEditable.obj.get(0))||
(a._activeBlock&&(e.ctrlKey||e.metaKey)&&67===e.which&&(d=!0,a._activeBlock.$element.attr("data-aloha-block-copy-only-block","true"),c.Utils.Dom.selectDomNode(a._activeBlock.$element[0])),a._activeBlock&&(e.ctrlKey||e.metaKey)&&88===e.which&&(g=!0,a._activeBlock.$element.attr("data-aloha-block-copy-only-block","true"),c.Utils.Dom.selectDomNode(a._activeBlock.$element[0])))});b(window.document).keyup(function(c){g||!d||67!==c.which&&18!==c.which&&91!==c.which||(d=!1,a._activeBlock.$element.removeAttr("data-aloha-block-copy-only-block"),
e&&(e=null));!g||67!==c.which&&18!==c.which&&88!==c.which||(g=!1)})},_registerEventHandlersForEditableActivated:function(){var a=this;l.bind("aloha-editable-activated",function(c,b){if(b.editable){var d=a.getBlock(b.editable.obj.closest(".aloha-block"));d&&d.activate()}})},initializeBlockLevelDragDrop:function(){var a=this;b.each(l.editables,function(c,b){b.obj.data("block-dragdrop",a._dragdropEnabled)});l.bind("aloha-editable-created",function(c,b){b.obj.data("block-dragdrop",a._dragdropEnabled)})},
setDragDropState:function(a){this._dragdropEnabled=a},getDragDropState:function(){return this._dragdropEnabled},registerBlockType:function(a,c){p.createScope("Aloha.Block."+a,"Aloha.Block");this.blockTypes.register(a,c)},_blockify:function(a,c){var d=b(a),g=l.require("block/block-plugin"),e=d[0].tagName.toLowerCase();-1===b.inArray(e,g.settings.rootTags)?l.Log.error("block/blockmanager","Blocks can only be created from ["+g.settings.rootTags.join(", ")+"] element. You passed "+e+"."):(g=this.getConfig(d,
c),this.blockTypes.has(g["aloha-block-type"])?(d=new (this.blockTypes.get(g["aloha-block-type"]))(d,g),d.$element.addClass("aloha-block-"+g["aloha-block-type"]),this.blocks.register(d.getId(),d)):l.Log.error("block/blockmanager","Block Type "+g["aloha-block-type"]+" not found!"))},_unblockify:function(a){(a=this.getBlock(a))&&a.unblock()},getConfig:function(a,c){var d={},g=null,e=null;if(0<a.length){e=b(a[0].cloneNode(!1));g=b.extend({},b.data(a[0]),e.data());e.removeData();for(var f in g)g.hasOwnProperty(f)&&
(d[k.camelCaseToDashes(f)]=g[f])}return b.extend({},this.defaults,c,d)},getBlock:function(a){"object"===typeof a&&(a=b(a),a.hasClass("aloha-block-inner")&&(a=a.parent()),a=a.attr("id"));return this.blocks.get(a)},_unregisterBlock:function(a){a="object"===typeof a?a.getId():a;this.blocks.unregister(a)},_deactivateHighlightedBlocks:function(){b.each(b.extend({},this._highlightedBlocks),function(a){(a=g.getBlock(a))&&a.deactivate()})},_getHighlightedBlocks:function(){var a={};b.each(this.blocks.getEntries(),
function(c,b){b.isActive()&&(a[c]=b)});return a},_setHighlighted:function(a){this._highlightedBlocks[a.id]=!0},_setUnhighlighted:function(a){delete this._highlightedBlocks[a.id]}}));l.Block=l.Block||{};return l.Block.BlockManager=g});define("block/editormanager",["aloha/registry"],function(l){return new (l.extend({createEditor:function(b){if(!this.has(b.type))throw'Editor for type "'+b.type+'" not found.';return new (this.get(b.type))(b)}}))});define("block/sidebarattributeeditor",["jquery","block/blockmanager",
"aloha/sidebar","block/editormanager","util/class"],function(l,b,p,m,f){return new (f.extend({_sidebar:null,init:function(){this._sidebar=p.right.show();b.bind("block-selection-change",this._onBlockSelectionChange,this)},_onBlockSelectionChange:function(b){var f=this;this._sidebar&&l.each(b,function(){var b=this.getSchema(),d=this,a=[];b&&f._sidebar.addPanel({title:d.getTitle(),expanded:!0,onInit:function(){var c=l("<form />");c.submit(function(){return!1});l.each(b,function(b,e){var f=m.createEditor(e);
f.bind("change",function(a){d.attr(b,a)});d.bind("change",function(){f.setValue(d.attr(b))});c.append(f.render());f.setValue(d.attr(b));a.push(f)});this.setContent(c)},deactivate:function(){l.each(a,function(a,b){b._deactivate()});this.isActive=!1;this.effectiveElement=null}})})}}))});define("block/block","aloha jquery block/blockmanager aloha/observable ui/scopes util/class PubSub block/block-utils util/html util/functions".split(" "),function(l,b,p,m,f,d,k,e,n,a){var c=window.GENTICS;m=d.extend(m,
{title:null,id:null,$element:null,_currentlyRendering:!1,_initialized:!1,_isInsideNestedEditable:!1,_constructor:function(a,d){var g=this;this.$element=a;a.attr("id")?this.id=a.attr("id"):(this.id=c.Utils.guid(),a.attr("id",this.id));a.contentEditable(!1);a.addClass("aloha-block");if(this.isDraggable()){a.find("img").attr("draggable","false");try{a.find("a").attr("draggable","false")}catch(f){a.find("a").each(function(){this.setAttribute("draggable","false")})}}b.each(d,function(a,c){g._setAttribute(a,
c)});this._onElementClickHandler=function(a){b(a.target).closest(".aloha-block").get(0)===g.$element.get(0)&&(g._fixScrollPositionBugsInIE(),g.activate(a.target,a))};this._connectThisBlockToDomElement(a,function(){k.pub("aloha.block.initialized",{block:g})});n.isInlineFormattable(a[0])&&(0<a.closest(".aloha-editable-active").length&&e.pad(g.$element),l.bind("aloha-editable-activated",function(a,c){c.editable&&0!==c.editable.obj.find("#"+g.id).length&&e.pad(g.$element)}),l.bind("aloha-editable-deactivated",
function(a,c){c.editable&&0!==c.editable.obj.find("#"+g.id).length&&e.unpad(g.$element)}));this._initialized=!0},_onElementClickHandler:null,_preventSelectionChangedEventHandler:function(a){"dblclick"===a.type||b(a.target).is(".aloha-editable")||l.Selection.preventSelectionChanged()},_connectThisBlockToDomElement:function(a,c){var d=this,g=b(a);this._disconnectFromDomElement();this.$element=g;this.$element.bind("click",this._onElementClickHandler);this.$element.bind("mousedown",this._preventSelectionChangedEventHandler);
this.$element.bind("focus",this._preventSelectionChangedEventHandler);this.$element.bind("dblclick",this._preventSelectionChangedEventHandler);this.init(this.$element,function(){window.setTimeout(function(){d._postProcessElementIfNeeded();c&&c()},5)})},_disconnectFromDomElement:function(){this.$element&&(this.$element.unbind("click",this._onElementClickHandler),this.$element.unbind("mousedown",this._preventSelectionChangedEventHandler),this.$element.unbind("focus",this._preventSelectionChangedEventHandler),
this.$element.unbind("dblclick",this._preventSelectionChangedEventHandler))},_fixScrollPositionBugsInIE:function(){var a=b(window).scrollTop();window.setTimeout(function(){b(window).scrollTop()!==a&&b(window).scrollTop(a)},10)},init:function(a,c){c()},shouldDestroy:function(){var a=this.$element.parent().closest(".aloha-block,.aloha-editable,.aloha-block-collection");return a.hasClass("aloha-block-collection")&&"div"===this.$element[0].tagName.toLowerCase()?!0:a.hasClass("aloha-editable")},destroy:function(a){if(this.shouldDestroy()||
!0===a){var b=this,d=new c.Utils.RangeObject;d.startContainer=d.endContainer=this.$element.parent()[0];d.startOffset=d.endOffset=c.Utils.Dom.getIndexInParent(this.$element[0]);p.trigger("block-delete",this);this.free();var g="span"===this.$element[0].tagName.toLowerCase();this.$element.fadeOut("fast",function(){b.$element.remove();p.trigger("block-selection-change",[]);window.setTimeout(function(){g&&d.select()},5)})}},unblock:function(){this.deactivate();this._disconnectFromDomElement();this.$element.removeClass("aloha-block");
this.$element.children(".aloha-block-handle").remove();this.free()},free:function(){p._unregisterBlock(this);this.unbindAll()},getId:function(){return this.id},getSchema:function(){return null},getTitle:function(){return this.title},isDraggable:function(){return"DIV"===this.$element[0].nodeName&&this.$element.parents(".aloha-editable,.aloha-block:not(.aloha-table-wrapper),.aloha-block-collection").first().hasClass("aloha-block-collection")?!0:this.$element.parents(".aloha-block:not(.aloha-table-wrapper),.aloha-editable").first().hasClass("aloha-editable")},
activate:function(a,c){var d=[];b.each(p._getHighlightedBlocks(),function(){this.deactivate()});"true"!==this.$element.attr("data-block-skip-scope")&&f.setScope("Aloha.Block."+this.attr("aloha-block-type"));this.$element.addClass("aloha-block-active");this._highlight();d.push(this);this.$element.parents(".aloha-block").each(function(){var a=p.getBlock(this);a&&(a._highlight(),d.push(a))});b(a).closest(".aloha-editable,.aloha-block,.aloha-table-cell-editable,.aloha-table-cell_active").first().hasClass("aloha-block")?
(this._isInsideNestedEditable=!1,l.getSelection().removeAllRanges()):(this._isInsideNestedEditable=!0,c&&l.Selection.updateSelection(c));p.trigger("block-activate",d);p.trigger("block-selection-change",d)},deactivate:function(){var a=this,c=[this];this._unhighlight();this.$element.parents(".aloha-block").each(function(){c.push(this);a._unhighlight()});this.$element.removeClass("aloha-block-active");p.trigger("block-deactivate",c);p.trigger("block-selection-change",[])},isActive:function(){return this.$element.hasClass("aloha-block-active")},
_highlight:function(){this.$element.addClass("aloha-block-highlighted");p._setHighlighted(this)},_unhighlight:function(){this.$element.removeClass("aloha-block-highlighted");p._setUnhighlighted(this)},_update:function(){var a=this;!this._currentlyRendering&&this._initialized&&(this._currentlyRendering=!0,this.update(this.$element,function(){a._postProcessElementIfNeeded()}),this._currentlyRendering=!1)},update:function(a,c){c()},_postProcessElementIfNeeded:function(){this.createEditablesIfNeeded();
this._checkThatNestedBlocksAreStillConsistent();this._makeNestedBlockCollectionsSortable();this.renderBlockHandlesIfNeeded();if(this.isDraggable()){var a=this.$element[0].nodeName;"SPAN"===a?(this._setupDragDropForInlineElements(),this._disableUglyInternetExplorerDragHandles()):"DIV"===a&&(this._setupDragDropForBlockElements(),this._disableUglyInternetExplorerDragHandles())}this._hideDragHandlesIfDragDropDisabled();this._attachDropzoneHighlightEvents()},_checkThatNestedBlocksAreStillConsistent:function(){this.$element.find(".aloha-block").each(function(){var a=
p.getBlock(this);a&&a.$element[0]!==this&&a._connectThisBlockToDomElement(this)})},_makeNestedBlockCollectionsSortable:function(){var a=this;this.$element.find(".aloha-block-collection").each(function(){var c=b(this);c.closest(".aloha-block").get(0)===a.$element.get(0)&&p.createBlockLevelSortableForEditableOrBlockCollection(c)})},_disableUglyInternetExplorerDragHandles:function(){if(b.browser.msie){var c=this.$element.get(0);c.onresizestart=a.returnFalse;c.oncontrolselect=a.returnFalse;c.onmovestart=
a.returnFalse}},_hideDragHandlesIfDragDropDisabled:function(){this._dd_isDragdropEnabled()||this.$element.find(".aloha-block-draghandle").each(function(){var a=b(this);e.isDragdropEnabledForElement(a)||a.removeClass("aloha-block-draghandle")})},_attachDropzoneHighlightEvents:function(){var a=this;this.$element.delegate(".aloha-block-draghandle","mousedown",function(){var c=a.$element.parents(".aloha-editable").first().data("block-dropzones")||[];b.each(c,function(a,c){var d=b(c);b(d).each(function(){b(this).data("block-dragdrop")&&
b(this).addClass("aloha-block-dropzone")})});b(document).one("mouseup.aloha-block-dropzone",function(){var c=a.$element.parents(".aloha-editable").first().data("block-dropzones")||[];b.each(c,function(a,c){b(c).removeClass("aloha-block-dropzone")})})})},_setupDragDropForInlineElements:function(){var a=this,c=null,d=!1,g=null,e=null,f=function(){if(c){var f=b(c);f.is(".aloha-block-dropInlineElementIntoEmptyBlock")?(f.children().remove(),f.append(g)):f.is(".aloha-block-droppable-right")?(f.html(f.html()+
" "),f.after(g)):(0<f.prev("[data-i]").length&&f.prev("[data-i]").html(f.prev("[data-i]").html()+" "),f.html(" "+f.html()),f.before(g));g.removeClass("ui-draggable").css({left:0,top:0});a._fixScrollPositionBugsInIE()}b(".aloha-block-dropInlineElementIntoEmptyBlock").removeClass("aloha-block-dropInlineElementIntoEmptyBlock");e.droppable("destroy");e=null;d=!0},k=[];this.$element.draggable({handle:".aloha-block-draghandle",scope:"aloha-block-inlinedragdrop",disabled:!this._dd_isDragdropEnabled(),revert:function(){return null===
c||!d},revertDuration:250,stop:function(){b.browser.msie&&7===parseInt(b.browser.version,10)&&f();b.each(k,function(){a._dd_traverseDomTreeAndRemoveSpans(this)});g=null;k=[]},start:function(){d=!1;k=[];b(".aloha-editable").children("p:empty").html("&nbsp;");var n={tolerance:"pointer",addClasses:!1,scope:"aloha-block-inlinedragdrop",over:function(d,e){-1===b.inArray(this,k)&&k.push(this);var f=1===b(this).contents().length&&1===b(this).children("br").length;g=e.draggable;b(this).is(":empty")||f||"&nbsp;"===
b(this).html()?(b(this).addClass("aloha-block-dropInlineElementIntoEmptyBlock"),c=this):(a._dd_traverseDomTreeAndWrapCharactersWithSpans(this),b("span[data-i]",this).droppable({tolerance:"pointer",addClasses:!1,scope:"aloha-block-inlinedragdrop",over:function(){c&&b(c).removeClass("aloha-block-droppable");c=this;b(this).addClass("aloha-block-droppable")},out:function(){b(this).removeClass("aloha-block-droppable");c===this&&(c=null)}}),b.ui.ddmanager.prepareOffsets(e.draggable.data("draggable"),d))},
out:function(){b(this).removeClass("aloha-block-dropInlineElementIntoEmptyBlock")},drop:function(){b.browser.msie&&7===parseInt(b.browser.version,10)||f()}};e=b(".aloha-editable.aloha-block-dropzone").children(":not(.aloha-block)");e.droppable(n);b(".aloha-table-cell-editable").droppable(n)}})},_dd_traverseDomTreeAndWrapCharactersWithSpans:function(a){for(var c,b=0,d=a.childNodes.length;b<d;b++)if(c=a.childNodes[b],1===c.nodeType)if(!~c.className.indexOf("aloha-block")&&void 0===c.attributes["data-i"])this._dd_traverseDomTreeAndWrapCharactersWithSpans(c);
else{if(c.attributes["data-i"])break}else 3===c.nodeType&&(c=this._dd_insertSpans(c),b+=c,d+=c)},_dd_splitText:function(a){a=a.split(/(?=\b)/);for(var c=[],b=!1,d=0,g=a.length;d<g;d++)/[^\t\n\r ]/.test(a[d])?b?(c.push(" "+a[d]),b=!1):c.push(a[d]):b=!0;b&&(c[c.length-1]+=" ");return c},_dd_insertSpans:function(a){var c=a.nodeValue;if(!/[^\t\n\r ]/.test(c))return 0;for(var d=document.createDocumentFragment(),c=this._dd_splitText(c),g=c.length,e,f,k,n=0,m=0;m<g;m++)f=c[m],0!==f.length&&(k=Math.floor(f.length/
2),e=parseInt(b.browser.version,10),!b.browser.msie||7!==e&&8!==e||(k=0),0<k&&(e=document.createElement("span"),e.appendChild(document.createTextNode(f.substr(0,k))),e.setAttribute("data-i",m),d.appendChild(e),n++),e=document.createElement("span"),f=f.substr(k),e.appendChild(document.createTextNode(f)),e.setAttribute("data-i",m),e.setAttribute("class","aloha-block-droppable-right"),d.appendChild(e),n++);a.parentNode.replaceChild(d,a);return n-1},_dd_traverseDomTreeAndRemoveSpans:function(a){var c=
[],b;b=function(a){for(var d=!1,g,e,f,k=0,n=a.childNodes.length;k<n;k++)f=a.childNodes[k],1===f.nodeType&&(void 0!==f.attributes["data-i"]?(d||(d=!0,g="",e=void 0),d&&(g+=f.firstChild.nodeValue,e&&c.push(e),e=f)):(d&&(d=!1,e.parentNode.replaceChild(document.createTextNode(g),e)),~f.className.indexOf("aloha-block")||b(f)));d&&e.parentNode.replaceChild(document.createTextNode(g),e)};b(a);a=0;for(var d=c.length;a<d;a++)c[a].parentNode.removeChild(c[a])},_dd_isDragdropEnabled:function(){return e.isDragdropEnabledForElement(this.$element.parent())},
_setupDragDropForBlockElements:function(){this.$element.find(".aloha-block-draghandle").addClass("aloha-block-draghandle-blocklevel")},createEditablesIfNeeded:function(){this.$element.find(".aloha-editable").aloha()},renderBlockHandlesIfNeeded:function(){this.isDraggable()&&0===this.$element.children(".aloha-block-draghandle").length&&this.$element.prepend('<span class="aloha-block-handle aloha-block-draghandle aloha-cleanme"></span>')},attr:function(a,c,d){var g=this,e=!1;if(2<=arguments.length){if("aloha-block-"===
a.substr(0,12)){l.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")");return}this._getAttribute(a)!==c&&(e=!0);this._setAttribute(a,c)}else if("object"===typeof a)b.each(a,function(a,c){"aloha-block-"===a.substr(0,12)?l.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")"):(g._getAttribute(a)!==c&&(e=
!0),g._setAttribute(a,c))});else return"string"===typeof a?this._getAttribute(a):this._getAttributes();e&&!d&&(this._update(),this.trigger("change"),l.activeEditable&&l.activeEditable.smartContentChange({type:"block-change"}));return null},_setAttribute:function(a,c){this.$element.attr("data-"+a.toLowerCase(),c)},_getAttribute:function(a){return this.$element.attr("data-"+a.toLowerCase())},_getAttributes:function(){var a={};b.each(this.$element[0].attributes,function(c,b){"data-"===b.name.substr(0,
5)&&(a[b.name.substr(5).toLowerCase()]=b.value)});return a}});d=m.extend({update:function(a,c){c()}});var g=m.extend({title:"Debugging",init:function(a,c){this.update(a,c)},update:function(a,c){a.css({display:"block"});var d='<table class="debug-block">';b.each(this.attr(),function(a,c){d+="<tr><th>"+a+"</th><td>"+c+"</td></tr>"});d+="</table>";a.html(d);c()}}),v=m.extend({title:"EmptyBlock",init:function(){},activate:function(){},deactivate:function(){},renderBlockHandlesIfNeeded:function(){},_preventSelectionChangedEventHandler:function(){}});
return{AbstractBlock:m,DefaultBlock:d,DebugBlock:g,EmptyBlock:v}});define("block/blockcontenthandler",["jquery","aloha/contenthandlermanager","block/blockmanager"],function(l,b,p){return b.createHandler({handleContent:function(b){"string"===typeof b?b=l("<div>"+b+"</div>"):b instanceof l&&(b=l("<div>").append(b));0<b.find('.aloha-block[data-aloha-block-copy-only-block="true"]').length&&(b.find(".aloha-block:not([id])").remove(),b.find(".aloha-block + span:empty").remove(),b.find("div:empty").remove(),
b.find("br.Apple-interchange-newline").remove(),b.find(".aloha-block").prev("br").remove(),b.find("div > br:only-child").parent().remove());b.find(".aloha-block").each(function(){var b=l(this),d={},k={};l.each(b[0].attributes,function(a,c){"id"!==c.nodeName&&(c.nodeName.match(/^data-/)?k[c.nodeName.substr(5)]=c.nodeValue:d[c.nodeName]=c.nodeValue)});var e=GENTICS.Utils.guid(),n=l("<"+this.tagName+"/>").attr(d).attr("id",e).removeClass("aloha-block-active").removeClass("aloha-block").html(b.html());
b.replaceWith(n);window.setTimeout(function(){p._blockify(l("#"+e),k)},50)});return b.html()}})});define("block/editor",["jquery","aloha/observable","util/class"],function(l,b,p){b=p.extend(b,{schema:null,_constructor:function(a){this.schema=a},render:function(){},getValue:function(){},setValue:function(a){},destroy:function(){},_deactivate:function(){this.trigger("change",this.getValue());this.destroy()}});p=b.extend({formInputElementDefinition:null,_$formInputElement:null,render:function(){var a=
l('<div class="aloha-block-editor" />'),c=GENTICS.Utils.guid();a.append(this.renderLabel().attr("id",c));a.append(this.renderFormElement().attr("id",c));return a},renderLabel:function(){var a=l("<label />");a.html(this.schema.label);return a},renderFormElement:function(){var a=this;this._$formInputElement=l(this.formInputElementDefinition);this.afterRenderFormElement(this._$formInputElement);this._$formInputElement.change(function(){a.trigger("change",a.getValue())});return this._$formInputElement},
afterRenderFormElement:function(a){},getValue:function(){return this._$formInputElement.val()},setValue:function(a){this._$formInputElement.val(a)},destroy:function(){this._$formInputElement.remove()}});var m=p.extend({formInputElementDefinition:'<input type="text" />'}),f=p.extend({formInputElementDefinition:'<input type="range" />',afterRenderFormElement:function(a){this.schema.range&&(this.schema.range.min&&a.attr("min",this.schema.range.min),this.schema.range.max&&a.attr("max",this.schema.range.max),
this.schema.range.step&&a.attr("step",this.schema.range.step))}}),d=p.extend({formInputElementDefinition:'<input type="url" />'}),k=p.extend({formInputElementDefinition:'<input type="email" />'}),e=p.extend({formInputElementDefinition:"<select />",afterRenderFormElement:function(a){l.each(this.schema.values,function(){a.append(l("<option />").attr("value",this.key).html(this.label))})}}),n=p.extend({formInputElementDefinition:"<button />",afterRenderFormElement:function(a){var c=this;a.html(this.schema.buttonLabel);
a.click(function(){c.schema.callback()})}});return{AbstractEditor:b,AbstractFormElementEditor:p,StringEditor:m,NumberEditor:f,UrlEditor:d,EmailEditor:k,SelectEditor:e,ButtonEditor:n}});define("block/dragbehavior",["aloha/jquery","aloha","PubSub","aloha/copypaste"],function(l,b,p,m){function f(a,b){return!a||!(a.is(".ui-draggable-dragging")||0<a.closest(b).length)}function d(a){this.blockObject=a;this.$element=a.$element;this.insertBeforeOrAfterMode=!1;this.setDraggable()}var k="TABLE TR HR TBODY UL OL DL B STRONG A EM I PRE CODE SUP SUB".split(" "),
e=".aloha-block .aloha-block-handle .aloha-table-selectrow p span h1 h2 h3 h4 h5 h6 br".split(" "),n=[".aloha-table-selectcolumn",".aloha-ui",".ui-draggable-dragging"];p.sub("aloha.block.initialized",function(a){d.follow(a.block)});d.follow=function(a){0<l(">.aloha-block-draghandle",a.$element).length&&new d(a)};var a=function(){var a=null,b=0,d=0;return l.browser.msie?{save:function(){b=window.scrollX||document.documentElement.scrollLeft;d=window.scrollY||document.documentElement.scrollTop;a=m.getRange()},
restore:function(){var e=m.getEditableAt(a);e&&e.obj.focus();m.setSelectionAt(a);window.scrollTo(b,d)}}:{save:function(){},restore:function(){}}}();d.prototype.setDraggable=function(){var c=this,b=l(">.aloha-block-draghandle",this.$element),d=this.$element.get(0);d.onselectstart=function(){window.event.cancelBubble=!0};d.ondragstart=function(a){a.stopPropagation()};b.on("mousedown",function(){a.save()}).on("mouseup",function(){c._getHiglightElement().hide();c.stopListenMouseOver()});this.$element.draggable({handle:">.aloha-block-draghandle",
helper:"clone",cursorAt:{left:-10,top:-10},start:function(a,b){b.helper.css("zIndex",1E5);c.listenMouseOver();a.stopImmediatePropagation()},drag:function(a){a.stopImmediatePropagation()},stop:function(b,d){c._getHiglightElement().hide();c.stopListenMouseOver();c.onDragStop();d.helper.remove();a.restore();return!0}})};d.prototype._getEditableChilds=function(){var a,d,e=[];for(a=0;a<b.editables.length;a++)d=b.editables[a],e=e.concat(l("*:not("+k.join(",")+")",d.obj).toArray());return l(e)};d.prototype.listenMouseOver=
function(){var a=this;this._getEditableChilds().bind("mouseover.blockbehavior",function(b){return a.onMouseover(this,b)})};d.prototype.stopListenMouseOver=function(){this._getEditableChilds().unbind(".blockbehavior")};d.prototype.onMouseover=function(a,b){this.disableInsertBeforeOrAfter(this.$overElement);this.$overElement=l(a);if(this._isAllowedOverElement(a))return this.highlightElement(a),b.stopImmediatePropagation(),!1;this.enableInsertBeforeOrAfter(a);return!0};d.prototype.highlightElement=function(a){"DIV"===
a.nodeName&&"TD"===a.parentNode.nodeName&&a.parentNode.firstChild===a&&a.parentNode.lastChild===a&&(a=a.parentNode);a=l(a);this._getHiglightElement().show().css("zIndex",parseInt(a.zIndex(),10)+1).offset(a.offset()).width(a.outerWidth()).height(a.outerHeight())};d.prototype.enableInsertBeforeOrAfter=function(a){a=l(a);var b=this,d=a.offset().top,e=a.outerHeight()/2;f(a,this.$element)&&a.bind("mousemove.brIBOA",function(a){b.insertBeforeOrAfterMode=a.pageY-d>=e?"AFTER":"BEFORE";b.highlightEdge(this)})};
d.prototype.disableInsertBeforeOrAfter=function(a){this.insertBeforeOrAfterMode=!1;a&&a.unbind(".brIBOA")};d.prototype.highlightEdge=function(a){a=l(a);var b=this._getHiglightElement().show(),d;"BEFORE"===this.insertBeforeOrAfterMode?b.css("zIndex",parseInt(a.zIndex(),10)+1).offset(a.offset()).width(a.outerWidth()).height(10):(d=a.offset(),d.top=d.top+a.outerHeight()-10,b.css("zIndex",parseInt(a.zIndex(),10)+1).offset(d).width(a.outerWidth()).height(10))};d.prototype._isAllowedOverElement=function(a){if(0>
l.inArray(a.nodeName,k)){var b;b=a;if(1===b.nodeType){if("inherit"===b.contentEditable)for(;"inherit"===b.contentEditable;)b=b.parentNode;b="true"===b.contentEditable}else b=!1;if(!b)return!1;a=l(a);return 0<a.parents(n.join(",")).length||a.is(e.join(","))?!1:!0}return!1};d.prototype.onDragStop=function(){f(this.$overElement,this.$element)&&(this.$overElement&&!this._isAllowedOverElement(this.$overElement[0])&&this.enableInsertBeforeOrAfter(this.$overElement[0]),!1!==this.insertBeforeOrAfterMode?
"BEFORE"===this.insertBeforeOrAfterMode?this.$overElement.before(this.$element):this.$overElement.after(this.$element):this.$element.appendTo(this.$overElement));this.disableInsertBeforeOrAfter(this.$overElement)};d.prototype._getHiglightElement=function(){void 0===this.$hElm&&(0===l("#aloha-highlight-element").length?this.$hElm=l("<div>").attr("id","aloha-highlight-element").appendTo("body").css({position:"absolute",opacity:0.5,background:"blue"}).hide():this.$hElm=l("#aloha-highlight-element"));
return this.$hElm}});define("block/nls/i18n",{root:{"button.toggledragdrop.tooltip":"Toggle Drag & Drop"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("block/block-plugin","aloha aloha/plugin jquery aloha/contenthandlermanager block/blockmanager block/sidebarattributeeditor block/block block/editormanager block/blockcontenthandler block/editor block/dragbehavior ui/ui ui/toggleButton i18n!block/nls/i18n i18n!aloha/nls/i18n jqueryui".split(" "),function(l,b,p,m,f,d,k,e,n,a,c,g,v,
u,z){var A=["div","span"];b=b.create("block",{config:[],settings:{},init:function(){var c=this;this.settings.rootTags||(this.settings.rootTags=A);f.registerBlockType("DebugBlock",k.DebugBlock);f.registerBlockType("DefaultBlock",k.DefaultBlock);f.registerBlockType("EmptyBlock",k.EmptyBlock);e.register("string",a.StringEditor);e.register("number",a.NumberEditor);e.register("url",a.UrlEditor);e.register("email",a.EmailEditor);e.register("select",a.SelectEditor);e.register("button",a.ButtonEditor);m.register("block",
n);f.setDragDropState(c.isDragDropEnabled());f.registerEventHandlers();f.initializeBlockLevelDragDrop();l.bind("aloha-plugins-loaded",function(){c._createBlocks();!1!==c.settings.sidebarAttributeEditor&&d.init()});this.createButtons();l.bind("aloha-editable-created",function(a,b){c.setDropzones(b.obj)});l.bind("aloha-editable-activated",function(a,b){c.applyButtonConfig(b.editable)})},applyButtonConfig:function(a){this._isDragdropToggleEnabled(a)?(this._toggleDragDropButton.show(),this._toggleDragDropButton.setState(this._getDragdropState(a))):
this._toggleDragDropButton.hide()},_isDragdropToggleEnabled:function(a){a=this.getEditableConfig(a.obj);return(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal||"toggleDragdrop"===a[0]||!0==a.toggleDragdrop||"true"==a.toggleDragdrop||1==a.toggleDragdrop||"1"==a.toggleDragdrop)&&this.isDragDropEnabled()},_getDragdropState:function(a){return this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal?f.getDragDropState():a.obj.data("block-dragdrop")},
_toggleDragdropState:function(a){if(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal){var c=!f.getDragDropState();f.setDragDropState(c);for(var b=0;b<l.editables.length;b++)a=l.editables[b],this._setDragDropStateForEditable(a.obj,c)}else c=!a.obj.data("block-dragdrop"),this._setDragDropStateForEditable(a.obj,c)},createButtons:function(){var a=this;this._toggleDragDropButton=g.adopt("toggleDragDrop",v,{tooltip:u.t("button.toggledragdrop.tooltip"),icon:"aloha-icon aloha-icon-toggledragdrop",
scope:"Aloha.continuoustext",click:function(){a._toggleDragdropState(l.activeEditable)}})},setDropzones:function(a){var c=this.getEditableConfig(a);(c=c&&c.dropzones||this.settings.dropzones)?a.data("block-dropzones",c):a.data("block-dropzones",[".aloha-editable"])},isDragDropEnabled:function(){return this.settings&&"undefined"!==typeof this.settings.dragdrop?!0===this.settings.dragdrop||"true"===this.settings.dragdrop||1===this.settings.dragdrop||"1"===this.settings.dragdrop:!0},_createBlocks:function(){this.settings.defaults||
(this.settings.defaults={});p.each(this.settings.defaults,function(a,c){p(a).alohaBlock(c)})},_setDragDropStateForEditable:function(a,c){a.data("block-dragdrop",c);a.hasClass("ui-sortable")&&a.sortable("option","disabled",!c);a.find(".aloha-block.ui-draggable").each(function(){p(this).draggable("option","disabled",!c)});a.find(".aloha-block-handle").each(function(){c?p(this).addClass("aloha-block-draghandle"):p(this).removeClass("aloha-block-draghandle")})}});p.fn.alohaBlock=function(a){a=a||{};p(this).each(function(c,
b){f._blockify(b,a)});return p(this)};p.fn.mahaloBlock=function(){p(this).each(function(a,c){f._unblockify(c)})};return b});define("align/nls/i18n",{root:{"button.alignright.tooltip":"Align to the right","button.alignleft.tooltip":"Align to the left","button.aligncenter.tooltip":"Center","button.alignjustify.tooltip":"Justify","button.aligntop.tooltip":"Align to the top","button.alignmiddle.tooltip":"Align to the middle","button.alignbottom.tooltip":"Align to the bottom"},ca:!0,de:!0,mk:!0,"pt-br":!0,
ru:!0,uk:!0,"zh-hans":!0});define("align/align-plugin","aloha aloha/plugin util/html util/dom ui/ui ui/toggleButton i18n!align/nls/i18n i18n!aloha/nls/i18n jquery PubSub".split(" "),function(l,b,p,m,f,d,k,e,n,a){return b.create("align",{_constructor:function(){this._super("align")},config:{alignment:"right left center justify top middle bottom".split(" ")},alignment:"",verticalAlignment:"",lastAlignment:"",lastVerticalAlignment:"",init:function(){this.createButtons();var c=this;l.bind("aloha-editable-activated",
function(a,b){c.applyButtonConfig(b.editable.obj)});a.sub("aloha.selection.context-change",function(a){a=a.range;l.activeEditable&&c.buttonPressed(a)})},buttonPressed:function(a){this.horizontalButtonPressed(a);this.verticalButtonPressed(a)},horizontalButtonPressed:function(a){var b=this;this.lastAlignment=this.alignment;this.alignment="";a.findMarkup(function(){if(""!==this.style.textAlign)return b.alignment=this.style.textAlign,!0;b.alignment=n(this).css("text-align")},l.activeEditable.obj);if(this.alignment!=
this.lastAlignment)switch(this._alignRightButton.setState(!1),this._alignLeftButton.setState(!1),this._alignCenterButton.setState(!1),this._alignJustifyButton.setState(!1),this.alignment){case "right":this._alignRightButton.setState(!0);break;case "center":this._alignCenterButton.setState(!0);break;case "justify":this._alignJustifyButton.setState(!0);break;default:this._alignLeftButton.setState(!0),this.alignment="left"}},verticalButtonPressed:function(a){var b=this;this.lastVerticalAlignment=this.verticalAlignment;
this.verticalAlignment="";a.findMarkup(function(){if(""!==this.style.verticalAlign)return b.verticalAlignment=this.style.verticalAlign,!0;b.verticalAlignment=n(this).css("vertical-align")},l.activeEditable.obj);if(this.verticalAlignment!=this.lastVerticalAlignment)switch(this._alignTopButton.setState(!1),this._alignMiddleButton.setState(!1),this._alignBottomButton.setState(!1),this.verticalAlignment){case "top":this._alignTopButton.setState(!0);break;case "middle":this._alignMiddleButton.setState(!0);
break;case "bottom":this._alignBottomButton.setState(!0);break;default:this._alignTopButton.setState(!0),this.verticalAlignment="top"}},applyButtonConfig:function(a){a=this.getEditableConfig(a);a&&a.alignment&&!this.settings.alignment||(a[0]&&a[0].alignment?a=a[0]:this.settings.alignment&&(a.alignment=this.settings.alignment));"undefined"===typeof a.alignment&&(a=this.config);-1!=n.inArray("right",a.alignment)?this._alignRightButton.show(!0):this._alignRightButton.show(!1);-1!=n.inArray("left",a.alignment)?
this._alignLeftButton.show(!0):this._alignLeftButton.show(!1);-1!=n.inArray("center",a.alignment)?this._alignCenterButton.show(!0):this._alignCenterButton.show(!1);-1!=n.inArray("justify",a.alignment)?this._alignJustifyButton.show(!0):this._alignJustifyButton.show(!1);-1!=n.inArray("top",a.alignment)?this._alignTopButton.show(!0):this._alignTopButton.show(!1);-1!=n.inArray("middle",a.alignment)?this._alignMiddleButton.show(!0):this._alignMiddleButton.show(!1);-1!=n.inArray("bottom",a.alignment)?this._alignBottomButton.show(!0):
this._alignBottomButton.show(!1)},createButtons:function(){var a=this;this._alignLeftButton=f.adopt("alignLeft",d,{tooltip:k.t("button.alignleft.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-left",scope:"Aloha.continuoustext",click:function(){a.align("left")}});this._alignCenterButton=f.adopt("alignCenter",d,{tooltip:k.t("button.aligncenter.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-center",scope:"Aloha.continuoustext",click:function(){a.align("center")}});this._alignRightButton=
f.adopt("alignRight",d,{tooltip:k.t("button.alignright.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-right",scope:"Aloha.continuoustext",click:function(){a.align("right")}});this._alignJustifyButton=f.adopt("alignJustify",d,{tooltip:k.t("button.alignjustify.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-justify",scope:"Aloha.continuoustext",click:function(){a.align("justify")}});this._alignTopButton=f.adopt("alignTop",d,{tooltip:k.t("button.aligntop.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-top",
scope:"table.cell",click:function(){a.verticalAlign("top")}});this._alignMiddleButton=f.adopt("alignMiddle",d,{tooltip:k.t("button.alignmiddle.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-middle",scope:"table.cell",click:function(){a.verticalAlign("middle")}});this._alignBottomButton=f.adopt("alignBottom",d,{tooltip:k.t("button.alignbottom.tooltip"),icon:"aloha-icon aloha-icon-align aloha-icon-align-bottom",scope:"table.cell",click:function(){a.verticalAlign("bottom")}})},verticalAlign:function(a){var b=
l.Selection.getRangeObject();this.lastVerticalAlignment=this.verticalAlignment;this.verticalAlignment=a;(a=this.getSelectedCells(b))&&this.toggleAlign(a,"vertical-align");if(this.verticalAlignment!=this.lastVerticalAlignment)switch(this.lastVerticalAlignment){case "top":this._alignTopButton.setState(!1);break;case "middle":this._alignMiddleButton.setState(!1);break;case "bottom":this._alignBottomButton.setState(!1)}b.select()},align:function(a){this.lastAlignment=this.alignment;this.alignment=a;a=
l.Selection.getRangeObject();for(var b=a.getCommonAncestorContainer();b&&!p.isBlock(b)&&!m.isEditingHost(b);)b=b.parentNode;if(m.isEditingHost(b)){var d=[];n.each(a.getSelectionTree(),function(){"none"!==this.selection&&3!==this.domobj.nodeType&&d.push(this.domobj)});this.toggleAlign(d)}else this.toggleAlign(b);if(this.alignment!==this.lastAlignment)switch(this.lastAlignment){case "right":this._alignRightButton.setState(!1);break;case "left":this._alignLeftButton.setState(!1);break;case "center":this._alignCenterButton.setState(!1);
break;case "justify":this._alignJustifyButton.setState(!1)}},getSelectedCells:function(a){var b;a=a.findMarkup(function(){n(this).is("td,th")&&(b=this);return n(this).is("table.aloha-table")},l.activeEditable.obj);a=n(a).find(".aloha-cell-selected");return a.length?a:b},toggleAlign:function(a,b){b=b||"text-align";var d="vertical-align"===b?this.verticalAlignment:this.alignment,e=!0;n(a).each(function(){if(n(this).css(b)!=d)return e=!1});n(a).each(function(){n(this).css(b)==d&&e?n(this).css(b,""):
n(this).css(b,d)})}})});define("abbr/nls/i18n",{root:{"floatingmenu.tab.abbr":"Abbreviation","button.addabbr.tooltip":"insert abbreviation","button.remabbr.tooltip":"remove abbreviation","button.abbr.tooltip":"format as abbreviation","newabbr.defaulttext":"Abbr"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("abbr/abbr-plugin","aloha jquery aloha/plugin ui/ui ui/toggleButton ui/button ui/scopes ui/port-helper-attribute-field i18n!abbr/nls/i18n i18n!aloha/nls/i18n".split(" "),function(l,
b,p,m,f,d,k,e,n,a){var c=window.GENTICS;return p.create("abbr",{config:["abbr"],init:function(){this.createButtons();this.subscribeEvents();this.bindInteractions()},createButtons:function(){var a=this;this._formatAbbrButton=m.adopt("formatAbbr",f,{tooltip:n.t("button.abbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",click:function(){a.formatAbbr()}});this._insertAbbrButton=m.adopt("insertAbbr",d,{tooltip:n.t("button.addabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",
click:function(){a.insertAbbr(!1)}});this.abbrField=e({width:320,name:"abbrText",scope:"Aloha.continuoustext"});this.remAbbrButton=m.adopt("removeAbbr",d,{tooltip:n.t("button.remabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr-rem",scope:"Aloha.continuoustext",click:function(){a.removeAbbr()}})},bindInteractions:function(){var a=this;this.abbrField.addListener("blur",function(c,b){""==this.getValue()&&a.removeAbbr()});for(var c=0;c<l.editables.length;c++)l.editables[c].obj.keydown(function(c){if(c.metaKey&&
71==c.which)return a.findAbbrMarkup()?(a.abbrField.foreground(),a.abbrField.focus()):a.insertAbbr(),c.stopPropagation(),c.preventDefault(),!1})},subscribeEvents:function(){var a=this,c={};l.bind("aloha-editable-activated",function(){if(l.activeEditable&&l.activeEditable.obj){var d=a.getEditableConfig(l.activeEditable.obj);c[l.activeEditable.getId()]=-1!==b.inArray("abbr",d)}});l.bind("aloha-editable-destroyed",function(){l.activeEditable&&l.activeEditable.obj&&delete c[l.activeEditable.getId()]});
l.bind("aloha-selection-changed",function(b,d){if(l.activeEditable)if(c[l.activeEditable.getId()]){a._formatAbbrButton.show();a._insertAbbrButton.show();var e=a.findAbbrMarkup(d);if(e){a._insertAbbrButton.hide();a._formatAbbrButton.setState(!0);a.abbrField.show();a.remAbbrButton.show();k.enterScope(a.name,"abbr");a.abbrField.setTargetObject(e,"title");for(var e=a.abbrField,f=d.findAllMarkupByTagName("ABBR",d),n=0,m=f.length;n<m;n++)e.addAdditionalTargetObject(f[n])}else a.abbrField.hide(),a.remAbbrButton.hide(),
k.leaveScope(a.name,"abbr",!0),a._formatAbbrButton.setState(!1),a.abbrField.setTargetObject(null)}else a._formatAbbrButton.hide(),a._insertAbbrButton.hide()})},findAbbrMarkup:function(a){"undefined"==typeof a&&(a=l.Selection.getRangeObject());return l.activeEditable?a.findMarkup(function(){return"abbr"==this.nodeName.toLowerCase()},l.activeEditable.obj):null},formatAbbr:function(){var a=l.Selection.getRangeObject();l.activeEditable&&(this.findAbbrMarkup(a)?this.removeAbbr():this.insertAbbr())},insertAbbr:function(a){var d=
l.Selection.getRangeObject();if(!this.findAbbrMarkup(d)){d.isCollapsed()&&!1!=a&&c.Utils.Dom.extendToWord(d);if(d.isCollapsed()){a=n.t("newabbr.defaulttext");var e=b('<abbr title="">'+a+"</abbr>");c.Utils.Dom.insertIntoDOM(e,d,b(l.activeEditable.obj));d.startContainer=d.endContainer=e.contents().get(0);d.startOffset=0;d.endOffset=a.length}else e=b('<abbr title=""></abbr>'),c.Utils.Dom.addMarkup(d,e,!1);d.select();this.abbrField.foreground();this.abbrField.focus()}},removeAbbr:function(){var a=l.Selection.getRangeObject(),
b=this.findAbbrMarkup();b&&(c.Utils.Dom.removeFromDOM(b,a,!0),a.select())},makeClean:function(a){},toString:function(){return"abbr"}})});define("horizontalruler/nls/i18n",{root:{"button.addhr.tooltip":"Add a horizontal ruler"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("horizontalruler/horizontalruler-plugin","aloha jquery aloha/plugin ui/ui ui/button i18n!horizontalruler/nls/i18n i18n!aloha/nls/i18n".split(" "),function(l,b,p,m,f,d,k){var e=window.GENTICS;return p.create("horizontalruler",
{_constructor:function(){this._super("horizontalruler")},config:["hr"],init:function(){var e=this;this._insertHorizontalRuleButton=m.adopt("insertHorizontalRule",f,{tooltip:d.t("button.addhr.tooltip"),iconOnly:!0,icon:"aloha-icon-horizontalruler",scope:"Aloha.continuoustext",click:function(){e.insertHR()}});l.bind("aloha-editable-activated",function(a,c){l.activeEditable&&(e.cfg=e.getEditableConfig(l.activeEditable.obj),-1!=b.inArray("hr",e.cfg)?e._insertHorizontalRuleButton.show(!0):e._insertHorizontalRuleButton.show(!1))})},
insertHR:function(d){d=l.Selection.getRangeObject();if(l.activeEditable){var a=b("<hr>");e.Utils.Dom.insertIntoDOM(a,d,b(l.activeEditable.obj),!0);d.select()}}})});(function(){function l(b,f){for(var e in f){var n=f[e];void 0!==n&&(b[e]=n)}return b}var b=function(){},p=function(d,f){var e;e=f&&f.hasOwnProperty("constructor")?f.constructor:function(){return d.apply(this,arguments)};b.prototype=d.prototype;e.prototype=new b;f&&l(e.prototype,f);e.prototype.constructor=e;e.__super__=d.prototype;return e},
m;m="undefined"!==typeof exports?exports:this.Undo={};m.Stack=function(){this.commands=[];this.savePosition=this.stackPosition=-1};l(m.Stack.prototype,{execute:function(b){this._clearRedo();b.execute();this.commands.push(b);this.stackPosition++;this.changed()},undo:function(){this.commands[this.stackPosition].undo();this.stackPosition--;this.changed()},canUndo:function(){return 0<=this.stackPosition},redo:function(){this.stackPosition++;this.commands[this.stackPosition].redo();this.changed()},canRedo:function(){return this.stackPosition<
this.commands.length-1},save:function(){this.savePosition=this.stackPosition;this.changed()},dirty:function(){return this.stackPosition!=this.savePosition},_clearRedo:function(){this.commands=this.commands.slice(0,this.stackPosition+1)},changed:function(){}});m.Command=function(b){this.name=b};var f=Error("override me!");l(m.Command.prototype,{execute:function(){throw f;},undo:function(){throw f;},redo:function(){this.execute()}});m.Command.extend=function(b){b=p(this,b);b.extend=m.Command.extend;
return b}}).call(this);define("undo/vendor/undo",function(){});t.prototype.diff_main=function(l,b,p,m){"undefined"==typeof m&&(m=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==l||null==b)throw Error("Null input. (diff_main)");if(l==b)return l?[[0,l]]:[];"undefined"==typeof p&&(p=!0);var f=p,d=this.diff_commonPrefix(l,b);p=l.substring(0,d);l=l.substring(d);b=b.substring(d);var d=this.diff_commonSuffix(l,b),k=l.substring(l.length-d);l=l.substring(0,l.length-
d);b=b.substring(0,b.length-d);l=this.diff_compute_(l,b,f,m);p&&l.unshift([0,p]);k&&l.push([0,k]);this.diff_cleanupMerge(l);return l};t.prototype.diff_compute_=function(l,b,p,m){if(!l)return[[1,b]];if(!b)return[[-1,l]];var f=l.length>b.length?l:b,d=l.length>b.length?b:l,k=f.indexOf(d);return-1!=k?(p=[[1,f.substring(0,k)],[0,d],[1,f.substring(k+d.length)]],l.length>b.length&&(p[0][0]=p[2][0]=-1),p):1==d.length?[[-1,l],[1,b]]:(f=this.diff_halfMatch_(l,b))?(b=f[1],d=f[3],l=f[4],f=this.diff_main(f[0],
f[2],p,m),p=this.diff_main(b,d,p,m),f.concat([[0,l]],p)):p&&100<l.length&&100<b.length?this.diff_lineMode_(l,b,m):this.diff_bisect_(l,b,m)};t.prototype.diff_lineMode_=function(l,b,p){var m=this.diff_linesToChars_(l,b);l=m[0];b=m[1];m=m[2];l=this.diff_bisect_(l,b,p);this.diff_charsToLines_(l,m);this.diff_cleanupSemantic(l);l.push([0,""]);for(var f=b=0,d=0,k=m="";b<l.length;){switch(l[b][0]){case 1:d++;k+=l[b][1];break;case -1:f++;m+=l[b][1];break;case 0:if(1<=f&&1<=d){m=this.diff_main(m,k,!1,p);l.splice(b-
f-d,f+d);b=b-f-d;for(f=m.length-1;0<=f;f--)l.splice(b,0,m[f]);b+=m.length}f=d=0;k=m=""}b++}l.pop();return l};t.prototype.diff_bisect_=function(l,b,p){for(var m=l.length,f=b.length,d=Math.ceil((m+f)/2),k=2*d,e=Array(k),n=Array(k),a=0;a<k;a++)e[a]=-1,n[a]=-1;e[d+1]=0;n[d+1]=0;for(var a=m-f,c=0!=a%2,g=0,v=0,u=0,z=0,A=0;A<d&&!((new Date).getTime()>p);A++){for(var y=-A+g;y<=A-v;y+=2){var q=d+y,s;s=y==-A||y!=A&&e[q-1]<e[q+1]?e[q+1]:e[q-1]+1;for(var B=s-y;s<m&&B<f&&l.charAt(s)==b.charAt(B);)s++,B++;e[q]=
s;if(s>m)v+=2;else if(B>f)g+=2;else if(c&&(q=d+a-y,0<=q&&q<k&&-1!=n[q])){var r=m-n[q];if(s>=r)return this.diff_bisectSplit_(l,b,s,B,p)}}for(y=-A+u;y<=A-z;y+=2){q=d+y;r=y==-A||y!=A&&n[q-1]<n[q+1]?n[q+1]:n[q-1]+1;for(s=r-y;r<m&&s<f&&l.charAt(m-r-1)==b.charAt(f-s-1);)r++,s++;n[q]=r;if(r>m)z+=2;else if(s>f)u+=2;else if(!c&&(q=d+a-y,0<=q&&q<k&&-1!=e[q]&&(s=e[q],B=d+s-q,r=m-r,s>=r)))return this.diff_bisectSplit_(l,b,s,B,p)}}return[[-1,l],[1,b]]};t.prototype.diff_bisectSplit_=function(l,b,p,m,f){var d=l.substring(0,
p),k=b.substring(0,m);l=l.substring(p);b=b.substring(m);d=this.diff_main(d,k,!1,f);f=this.diff_main(l,b,!1,f);return d.concat(f)};t.prototype.diff_linesToChars_=function(l,b){function p(b){for(var d="",a=0,c=-1,g=m.length;c<b.length-1;){c=b.indexOf("\n",a);-1==c&&(c=b.length-1);var k=b.substring(a,c+1),a=c+1;(f.hasOwnProperty?f.hasOwnProperty(k):void 0!==f[k])?d+=String.fromCharCode(f[k]):(d+=String.fromCharCode(g),f[k]=g,m[g++]=k)}return d}var m=[],f={};m[0]="";var d=p(l),k=p(b);return[d,k,m]};t.prototype.diff_charsToLines_=
function(l,b){for(var p=0;p<l.length;p++){for(var m=l[p][1],f=[],d=0;d<m.length;d++)f[d]=b[m.charCodeAt(d)];l[p][1]=f.join("")}};t.prototype.diff_commonPrefix=function(l,b){if(!l||!b||l.charAt(0)!=b.charAt(0))return 0;for(var p=0,m=Math.min(l.length,b.length),f=m,d=0;p<f;)l.substring(d,f)==b.substring(d,f)?d=p=f:m=f,f=Math.floor((m-p)/2+p);return f};t.prototype.diff_commonSuffix=function(l,b){if(!l||!b||l.charAt(l.length-1)!=b.charAt(b.length-1))return 0;for(var p=0,m=Math.min(l.length,b.length),
f=m,d=0;p<f;)l.substring(l.length-f,l.length-d)==b.substring(b.length-f,b.length-d)?d=p=f:m=f,f=Math.floor((m-p)/2+p);return f};t.prototype.diff_commonOverlap_=function(l,b){var p=l.length,m=b.length;if(0==p||0==m)return 0;p>m?l=l.substring(p-m):p<m&&(b=b.substring(0,p));p=Math.min(p,m);if(l==b)return p;for(var m=0,f=1;;){var d=l.substring(p-f),d=b.indexOf(d);if(-1==d)return m;f+=d;if(0==d||l.substring(p-f)==b.substring(0,f))m=f,f++}};t.prototype.diff_halfMatch_=function(l,b){function p(a,c,b){for(var e=
a.substring(b,b+Math.floor(a.length/4)),f=-1,k="",n,m,l,p;-1!=(f=c.indexOf(e,f+1));){var q=d.diff_commonPrefix(a.substring(b),c.substring(f)),s=d.diff_commonSuffix(a.substring(0,b),c.substring(0,f));k.length<s+q&&(k=c.substring(f-s,f)+c.substring(f,f+q),n=a.substring(0,b-s),m=a.substring(b+q),l=c.substring(0,f-s),p=c.substring(f+q))}return 2*k.length>=a.length?[n,m,l,p,k]:null}if(0>=this.Diff_Timeout)return null;var m=l.length>b.length?l:b,f=l.length>b.length?b:l;if(4>m.length||2*f.length<m.length)return null;
var d=this,k=p(m,f,Math.ceil(m.length/4)),m=p(m,f,Math.ceil(m.length/2));if(k||m)k=m?k?k[4].length>m[4].length?k:m:m:k;else return null;var e,n;l.length>b.length?(m=k[0],f=k[1],e=k[2],n=k[3]):(e=k[0],n=k[1],m=k[2],f=k[3]);return[m,f,e,n,k[4]]};t.prototype.diff_cleanupSemantic=function(l){for(var b=!1,p=[],m=0,f=null,d=0,k=0,e=0,n=0,a=0;d<l.length;)0==l[d][0]?(p[m++]=d,k=n,e=a,a=n=0,f=l[d][1]):(1==l[d][0]?n+=l[d][1].length:a+=l[d][1].length,null!==f&&f.length<=Math.max(k,e)&&f.length<=Math.max(n,a)&&
(l.splice(p[m-1],0,[-1,f]),l[p[m-1]+1][0]=1,m--,m--,d=0<m?p[m-1]:-1,a=n=e=k=0,f=null,b=!0)),d++;b&&this.diff_cleanupMerge(l);this.diff_cleanupSemanticLossless(l);for(d=1;d<l.length;){if(-1==l[d-1][0]&&1==l[d][0]){b=l[d-1][1];p=l[d][1];if(m=this.diff_commonOverlap_(b,p))l.splice(d,0,[0,p.substring(0,m)]),l[d-1][1]=b.substring(0,b.length-m),l[d+1][1]=p.substring(m),d++;d++}d++}};t.prototype.diff_cleanupSemanticLossless=function(l){function b(a,c){if(!a||!c)return 5;var b=0;if(a.charAt(a.length-1).match(p)||
c.charAt(0).match(p))if(b++,a.charAt(a.length-1).match(m)||c.charAt(0).match(m))if(b++,a.charAt(a.length-1).match(f)||c.charAt(0).match(f))b++,(a.match(d)||c.match(k))&&b++;return b}for(var p=/[^a-zA-Z0-9]/,m=/\s/,f=/[\r\n]/,d=/\n\r?\n$/,k=/^\r?\n\r?\n/,e=1;e<l.length-1;){if(0==l[e-1][0]&&0==l[e+1][0]){var n=l[e-1][1],a=l[e][1],c=l[e+1][1],g=this.diff_commonSuffix(n,a);if(g)var v=a.substring(a.length-g),n=n.substring(0,n.length-g),a=v+a.substring(0,a.length-g),c=v+c;for(var g=n,v=a,u=c,z=b(n,a)+b(a,
c);a.charAt(0)===c.charAt(0);){var n=n+a.charAt(0),a=a.substring(1)+c.charAt(0),c=c.substring(1),A=b(n,a)+b(a,c);A>=z&&(z=A,g=n,v=a,u=c)}l[e-1][1]!=g&&(g?l[e-1][1]=g:(l.splice(e-1,1),e--),l[e][1]=v,u?l[e+1][1]=u:(l.splice(e+1,1),e--))}e++}};t.prototype.diff_cleanupEfficiency=function(l){for(var b=!1,p=[],m=0,f="",d=0,k=!1,e=!1,n=!1,a=!1;d<l.length;)0==l[d][0]?(l[d][1].length<this.Diff_EditCost&&(n||a)?(p[m++]=d,k=n,e=a,f=l[d][1]):(m=0,f=""),n=a=!1):(-1==l[d][0]?a=!0:n=!0,f&&(k&&e&&n&&a||f.length<
this.Diff_EditCost/2&&3==k+e+n+a)&&(l.splice(p[m-1],0,[-1,f]),l[p[m-1]+1][0]=1,m--,f="",k&&e?(n=a=!0,m=0):(m--,d=0<m?p[m-1]:-1,n=a=!1),b=!0)),d++;b&&this.diff_cleanupMerge(l)};t.prototype.diff_cleanupMerge=function(l){l.push([0,""]);for(var b=0,p=0,m=0,f="",d="",k;b<l.length;)switch(l[b][0]){case 1:m++;d+=l[b][1];b++;break;case -1:p++;f+=l[b][1];b++;break;case 0:1<p+m?(0!==p&&0!==m&&(k=this.diff_commonPrefix(d,f),0!==k&&(0<b-p-m&&0==l[b-p-m-1][0]?l[b-p-m-1][1]+=d.substring(0,k):(l.splice(0,0,[0,d.substring(0,
k)]),b++),d=d.substring(k),f=f.substring(k)),k=this.diff_commonSuffix(d,f),0!==k&&(l[b][1]=d.substring(d.length-k)+l[b][1],d=d.substring(0,d.length-k),f=f.substring(0,f.length-k))),0===p?l.splice(b-p-m,p+m,[1,d]):0===m?l.splice(b-p-m,p+m,[-1,f]):l.splice(b-p-m,p+m,[-1,f],[1,d]),b=b-p-m+(p?1:0)+(m?1:0)+1):0!==b&&0==l[b-1][0]?(l[b-1][1]+=l[b][1],l.splice(b,1)):b++,p=m=0,d=f=""}""===l[l.length-1][1]&&l.pop();p=!1;for(b=1;b<l.length-1;)0==l[b-1][0]&&0==l[b+1][0]&&(l[b][1].substring(l[b][1].length-l[b-
1][1].length)==l[b-1][1]?(l[b][1]=l[b-1][1]+l[b][1].substring(0,l[b][1].length-l[b-1][1].length),l[b+1][1]=l[b-1][1]+l[b+1][1],l.splice(b-1,1),p=!0):l[b][1].substring(0,l[b+1][1].length)==l[b+1][1]&&(l[b-1][1]+=l[b+1][1],l[b][1]=l[b][1].substring(l[b+1][1].length)+l[b+1][1],l.splice(b+1,1),p=!0)),b++;p&&this.diff_cleanupMerge(l)};t.prototype.diff_xIndex=function(l,b){var p=0,m=0,f=0,d=0,k;for(k=0;k<l.length;k++){1!==l[k][0]&&(p+=l[k][1].length);-1!==l[k][0]&&(m+=l[k][1].length);if(p>b)break;f=p;d=
m}return l.length!=k&&-1===l[k][0]?d:d+(b-f)};t.prototype.diff_prettyHtml=function(l){for(var b=[],p=/&/g,m=/</g,f=/>/g,d=/\n/g,k=0;k<l.length;k++){var e=l[k][0],n=l[k][1].replace(p,"&amp;").replace(m,"&lt;").replace(f,"&gt;").replace(d,"&para;<br>");switch(e){case 1:b[k]='<ins style="background:#e6ffe6;">'+n+"</ins>";break;case -1:b[k]='<del style="background:#ffe6e6;">'+n+"</del>";break;case 0:b[k]="<span>"+n+"</span>"}}return b.join("")};t.prototype.diff_text1=function(l){for(var b=[],p=0;p<l.length;p++)1!==
l[p][0]&&(b[p]=l[p][1]);return b.join("")};t.prototype.diff_text2=function(l){for(var b=[],p=0;p<l.length;p++)-1!==l[p][0]&&(b[p]=l[p][1]);return b.join("")};t.prototype.diff_levenshtein=function(l){for(var b=0,p=0,m=0,f=0;f<l.length;f++){var d=l[f][1];switch(l[f][0]){case 1:p+=d.length;break;case -1:m+=d.length;break;case 0:b+=Math.max(p,m),m=p=0}}return b+=Math.max(p,m)};t.prototype.diff_toDelta=function(l){for(var b=[],p=0;p<l.length;p++)switch(l[p][0]){case 1:b[p]="+"+encodeURI(l[p][1]);break;
case -1:b[p]="-"+l[p][1].length;break;case 0:b[p]="="+l[p][1].length}return b.join("\t").replace(/%20/g," ")};t.prototype.diff_fromDelta=function(l,b){for(var p=[],m=0,f=0,d=b.split(/\t/g),k=0;k<d.length;k++){var e=d[k].substring(1);switch(d[k].charAt(0)){case "+":try{p[m++]=[1,decodeURI(e)]}catch(n){throw Error("Illegal escape in diff_fromDelta: "+e);}break;case "-":case "=":var a=parseInt(e,10);if(isNaN(a)||0>a)throw Error("Invalid number in diff_fromDelta: "+e);e=l.substring(f,f+=a);"="==d[k].charAt(0)?
p[m++]=[0,e]:p[m++]=[-1,e];break;default:if(d[k])throw Error("Invalid diff operation in diff_fromDelta: "+d[k]);}}if(f!=l.length)throw Error("Delta length ("+f+") does not equal source text length ("+l.length+").");return p};t.prototype.match_main=function(l,b,p){if(null==l||null==b||null==p)throw Error("Null input. (match_main)");p=Math.max(0,Math.min(p,l.length));return l==b?0:l.length?l.substring(p,p+b.length)==b?p:this.match_bitap_(l,b,p):-1};t.prototype.match_bitap_=function(l,b,p){function m(a,
c){var g=a/b.length,e=Math.abs(p-c);return d.Match_Distance?g+e/d.Match_Distance:e?1:g}if(b.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var f=this.match_alphabet_(b),d=this,k=this.Match_Threshold,e=l.indexOf(b,p);-1!=e&&(k=Math.min(m(0,e),k),e=l.lastIndexOf(b,p+b.length),-1!=e&&(k=Math.min(m(0,e),k)));for(var n=1<<b.length-1,e=-1,a,c,g=b.length+l.length,v,u=0;u<b.length;u++){a=0;for(c=g;a<c;)m(u,p+c)<=k?a=c:g=c,c=Math.floor((g-a)/2+a);g=c;a=Math.max(1,p-c+1);var z=
Math.min(p+c,l.length)+b.length;c=Array(z+2);for(c[z+1]=(1<<u)-1;z>=a;z--){var A=f[l.charAt(z-1)];c[z]=0===u?(c[z+1]<<1|1)&A:(c[z+1]<<1|1)&A|(v[z+1]|v[z])<<1|1|v[z+1];if(c[z]&n&&(A=m(u,z-1),A<=k))if(k=A,e=z-1,e>p)a=Math.max(1,2*p-e);else break}if(m(u+1,p)>k)break;v=c}return e};t.prototype.match_alphabet_=function(l){for(var b={},p=0;p<l.length;p++)b[l.charAt(p)]=0;for(p=0;p<l.length;p++)b[l.charAt(p)]|=1<<l.length-p-1;return b};t.prototype.patch_addContext_=function(l,b){if(0!=b.length){for(var p=
b.substring(l.start2,l.start2+l.length1),m=0;b.indexOf(p)!=b.lastIndexOf(p)&&p.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)m+=this.Patch_Margin,p=b.substring(l.start2-m,l.start2+l.length1+m);m+=this.Patch_Margin;(p=b.substring(l.start2-m,l.start2))&&l.diffs.unshift([0,p]);(m=b.substring(l.start2+l.length1,l.start2+l.length1+m))&&l.diffs.push([0,m]);l.start1-=p.length;l.start2-=p.length;l.length1+=p.length+m.length;l.length2+=p.length+m.length}};t.prototype.patch_make=function(l,
b,p){var m;if("string"==typeof l&&"string"==typeof b&&"undefined"==typeof p)m=l,b=this.diff_main(m,b,!0),2<b.length&&(this.diff_cleanupSemantic(b),this.diff_cleanupEfficiency(b));else if(l&&"object"==typeof l&&"undefined"==typeof b&&"undefined"==typeof p)b=l,m=this.diff_text1(b);else if("string"==typeof l&&b&&"object"==typeof b&&"undefined"==typeof p)m=l;else if("string"==typeof l&&"string"==typeof b&&p&&"object"==typeof p)m=l,b=p;else throw Error("Unknown call format to patch_make.");if(0===b.length)return[];
p=[];l=new r;for(var f=0,d=0,k=0,e=m,n=0;n<b.length;n++){var a=b[n][0],c=b[n][1];f||0===a||(l.start1=d,l.start2=k);switch(a){case 1:l.diffs[f++]=b[n];l.length2+=c.length;m=m.substring(0,k)+c+m.substring(k);break;case -1:l.length1+=c.length;l.diffs[f++]=b[n];m=m.substring(0,k)+m.substring(k+c.length);break;case 0:c.length<=2*this.Patch_Margin&&f&&b.length!=n+1?(l.diffs[f++]=b[n],l.length1+=c.length,l.length2+=c.length):c.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(l,e),p.push(l),l=new r,
f=0,e=m,d=k)}1!==a&&(d+=c.length);-1!==a&&(k+=c.length)}f&&(this.patch_addContext_(l,e),p.push(l));return p};t.prototype.patch_deepCopy=function(l){for(var b=[],p=0;p<l.length;p++){var m=l[p],f=new r;f.diffs=[];for(var d=0;d<m.diffs.length;d++)f.diffs[d]=m.diffs[d].slice();f.start1=m.start1;f.start2=m.start2;f.length1=m.length1;f.length2=m.length2;b[p]=f}return b};t.prototype.patch_apply=function(l,b){if(0==l.length)return[b,[]];l=this.patch_deepCopy(l);var p=this.patch_addPadding(l);b=p+b+p;this.patch_splitMax(l);
for(var m=0,f=[],d=0;d<l.length;d++){var k=l[d].start2+m,e=this.diff_text1(l[d].diffs),n,a=-1;if(e.length>this.Match_MaxBits){if(n=this.match_main(b,e.substring(0,this.Match_MaxBits),k),-1!=n&&(a=this.match_main(b,e.substring(e.length-this.Match_MaxBits),k+e.length-this.Match_MaxBits),-1==a||n>=a))n=-1}else n=this.match_main(b,e,k);if(-1==n)f[d]=!1,m-=l[d].length2-l[d].length1;else if(f[d]=!0,m=n-k,k=-1==a?b.substring(n,n+e.length):b.substring(n,a+this.Match_MaxBits),e==k)b=b.substring(0,n)+this.diff_text2(l[d].diffs)+
b.substring(n+e.length);else if(k=this.diff_main(e,k,!1),e.length>this.Match_MaxBits&&this.diff_levenshtein(k)/e.length>this.Patch_DeleteThreshold)f[d]=!1;else{this.diff_cleanupSemanticLossless(k);for(var e=0,c,a=0;a<l[d].diffs.length;a++){var g=l[d].diffs[a];0!==g[0]&&(c=this.diff_xIndex(k,e));1===g[0]?b=b.substring(0,n+c)+g[1]+b.substring(n+c):-1===g[0]&&(b=b.substring(0,n+c)+b.substring(n+this.diff_xIndex(k,e+g[1].length)));-1!==g[0]&&(e+=g[1].length)}}}b=b.substring(p.length,b.length-p.length);
return[b,f]};t.prototype.patch_addPadding=function(l){for(var b=this.Patch_Margin,p="",m=1;m<=b;m++)p+=String.fromCharCode(m);for(m=0;m<l.length;m++)l[m].start1+=b,l[m].start2+=b;var m=l[0],f=m.diffs;if(0==f.length||0!=f[0][0])f.unshift([0,p]),m.start1-=b,m.start2-=b,m.length1+=b,m.length2+=b;else if(b>f[0][1].length){var d=b-f[0][1].length;f[0][1]=p.substring(f[0][1].length)+f[0][1];m.start1-=d;m.start2-=d;m.length1+=d;m.length2+=d}m=l[l.length-1];f=m.diffs;0==f.length||0!=f[f.length-1][0]?(f.push([0,
p]),m.length1+=b,m.length2+=b):b>f[f.length-1][1].length&&(d=b-f[f.length-1][1].length,f[f.length-1][1]+=p.substring(0,d),m.length1+=d,m.length2+=d);return p};t.prototype.patch_splitMax=function(l){for(var b=this.Match_MaxBits,p=0;p<l.length;p++)if(l[p].length1>b){var m=l[p];l.splice(p--,1);for(var f=m.start1,d=m.start2,k="";0!==m.diffs.length;){var e=new r,n=!0;e.start1=f-k.length;e.start2=d-k.length;""!==k&&(e.length1=e.length2=k.length,e.diffs.push([0,k]));for(;0!==m.diffs.length&&e.length1<b-
this.Patch_Margin;){var k=m.diffs[0][0],a=m.diffs[0][1];1===k?(e.length2+=a.length,d+=a.length,e.diffs.push(m.diffs.shift()),n=!1):-1===k&&1==e.diffs.length&&0==e.diffs[0][0]&&a.length>2*b?(e.length1+=a.length,f+=a.length,n=!1,e.diffs.push([k,a]),m.diffs.shift()):(a=a.substring(0,b-e.length1-this.Patch_Margin),e.length1+=a.length,f+=a.length,0===k?(e.length2+=a.length,d+=a.length):n=!1,e.diffs.push([k,a]),a==m.diffs[0][1]?m.diffs.shift():m.diffs[0][1]=m.diffs[0][1].substring(a.length))}k=this.diff_text2(e.diffs);
k=k.substring(k.length-this.Patch_Margin);a=this.diff_text1(m.diffs).substring(0,this.Patch_Margin);""!==a&&(e.length1+=a.length,e.length2+=a.length,0!==e.diffs.length&&0===e.diffs[e.diffs.length-1][0]?e.diffs[e.diffs.length-1][1]+=a:e.diffs.push([0,a]));n||l.splice(++p,0,e)}}};t.prototype.patch_toText=function(l){for(var b=[],p=0;p<l.length;p++)b[p]=l[p];return b.join("")};t.prototype.patch_fromText=function(l){var b=[];if(!l)return b;l=l.split("\n");for(var p=0,m=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;p<
l.length;){var f=l[p].match(m);if(!f)throw Error("Invalid patch string: "+l[p]);var d=new r;b.push(d);d.start1=parseInt(f[1],10);""===f[2]?(d.start1--,d.length1=1):"0"==f[2]?d.length1=0:(d.start1--,d.length1=parseInt(f[2],10));d.start2=parseInt(f[3],10);""===f[4]?(d.start2--,d.length2=1):"0"==f[4]?d.length2=0:(d.start2--,d.length2=parseInt(f[4],10));for(p++;p<l.length;){f=l[p].charAt(0);try{var k=decodeURI(l[p].substring(1))}catch(e){throw Error("Illegal escape in patch_fromText: "+k);}if("-"==f)d.diffs.push([-1,
k]);else if("+"==f)d.diffs.push([1,k]);else if(" "==f)d.diffs.push([0,k]);else if("@"==f)break;else if(""!==f)throw Error('Invalid patch mode "'+f+'" in: '+k);p++}}return b};r.prototype.toString=function(){for(var l=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],b,p=0;p<this.diffs.length;p++){switch(this.diffs[p][0]){case 1:b="+";
break;case -1:b="-";break;case 0:b=" "}l[p+1]=b+encodeURI(this.diffs[p][1])+"\n"}return l.join("").replace(/%20/g," ")};window.diff_match_patch=t;window.patch_obj=r;window.DIFF_DELETE=-1;window.DIFF_INSERT=1;window.DIFF_EQUAL=0;define("undo/vendor/diff_match_patch_uncompressed",function(){});define("undo/undo-plugin",["aloha","jquery","aloha/plugin","undo/vendor/undo","undo/vendor/diff_match_patch_uncompressed"],function(l,b,p){function m(b){b=f.patch_deepCopy(b);for(var d=0;d<b.length;d++)for(var n=
0;n<b[d].diffs.length;n++)b[d].diffs[n][0]=-b[d].diffs[n][0];return b}var f=new t,d=!1;return p.create("undo",{init:function(){this.stack=new Undo.Stack;var b=this,e=Undo.Command.extend({constructor:function(b,a){this.editable=b;this.patch=a},execute:function(){},undo:function(){this.phase(m(this.patch))},redo:function(){this.phase(this.patch)},phase:function(b){var a=this.editable.getContents();b=f.patch_apply(b,a)[0];this.reset(b)},reset:function(b){d=!0;var a=null;l.getActiveEditable()===this.editable&&
(l.deactivateEditable(),a=this.editable);this.editable.obj.html(b);null!==a&&a.activate();this.editable.smartContentChange({type:"blur"});d=!1}});this.stack.changed=function(){};l.bind("aloha-editable-created",function(d,a){a.obj.bind("keydown","ctrl+z shift+ctrl+z",function(a){a.preventDefault();a.shiftKey?b.redo():b.undo()})});l.bind("aloha-smart-content-changed",function(n,a){var c=a.getSnapshotContent();if(!d){var g=a.editable.getContents(),c=f.patch_make(c,g);0!==c.length&&b.stack.execute(new e(a.editable,
c))}})},toString:function(){return"undo"},undo:function(){null!==l.getActiveEditable()&&l.getActiveEditable().smartContentChange({type:"blur"});this.stack.canUndo()&&this.stack.undo()},redo:function(){null!==l.getActiveEditable()&&l.getActiveEditable().smartContentChange({type:"blur"});this.stack.canRedo()&&this.stack.redo()},stack:void 0})});define("paste/paste-plugin","jquery aloha/core aloha/plugin aloha/command contenthandler/contenthandler-utils aloha/console aloha/copypaste aloha/contenthandlermanager".split(" "),
function(l,b,p,m,f,d,k,e){function n(a,c){c.css({top:g.scrollTop(),left:g.scrollLeft()-200,width:200,overflow:"hidden"}).contents().remove();var b=k.getEditableAt(a);b&&b.obj.blur();k.setSelectionAt({startContainer:c[0],endContainer:c[0],startOffset:0,endOffset:0});c.focus()}function a(a,c,g){a.metaKey=null;a.stopPropagation();window.setTimeout(function(){if(c){var n;n=z.html();var m=/^<h\d+.*?>/i.exec(n),l;null!==m&&(m=m[0],l="</"+m.substr(1),n=n.replace(m,"").replace(l,""));n=(m=e.get("formatless"))?
m.handleContent(n):n;v&&/^&nbsp;/.test(n)&&(n=n.substring(6));(m=k.getEditableAt(c))&&m.obj.focus();k.setSelectionAt(c);window.scrollTo(y.x,y.y);m=c.startContainer;if(1===m.nodeType?"p"===m.nodeName.toLowerCase()&&f.isProppedParagraph(m.outerHTML):3===m.nodeType&&"p"===m.parentNode.nodeName.toLowerCase()&&1===m.parentNode.childNodes.length&&u.test(window.escape(m.data)))3===c.startContainer.nodeType?c.startContainer.data="":c.startContainer.innerHTML=" ",c.startOffset=0,c.endContainer===c.startContainer&&
(c.endOffset=0);b.queryCommandSupported("insertHTML")?b.execCommand("insertHTML",!1,n):d.error("Common.Paste",'Command "insertHTML" not available. Enable the plugin "common/commands".');z.contents().remove();"function"===typeof g&&g()}b.activeEditable.smartContentChange(a)},10)}function c(c,b){v?c.bind("beforepaste",function(a){y.x=window.scrollX||document.documentElement.scrollLeft;y.y=window.scrollY||document.documentElement.scrollTop;A=k.getRange();n(A,z);a.stopPropagation()}):c.bind("paste",function(c){y.x=
window.scrollX||document.documentElement.scrollLeft;y.y=window.scrollY||document.documentElement.scrollTop;var b=k.getRange();n(b,z);v&&document.selection.createRange().execCommand("paste");a(c,b)})}var g=l(window),v=!!l.browser.msie,u=/^(\s|%A0)$/,z=l('<div style="position:absolute; clip:rect(0px,0px,0px,0px); width:1px; height:1px;"></div>').contentEditable(!0),A=null,y={x:0,y:0};return p.create("paste",{settings:{},init:function(){l("body").append(z);var d=!this.settings.noclipboardaccess;b.bind("aloha-editable-created",
function(a,b){c(b.obj,d)});v&&z.bind("paste",function(c){a(c,A,function(){A=null})})},register:function(a){d.deprecated("Plugins.Paste","register() for pasteHandler is deprecated.  Use the ContentHandler Plugin instead.")}})});define("autoparagraph/autoparagraph-plugin",["jquery","aloha/plugin","aloha/core","util/html","util/dom"],function(l,b,p,m,f){function d(b){if(b){var a=b.obj;if(a){var c=a[0],d,e=p.Selection.rangeObject,k=!1;if(f.allowsNesting(c,l("<p></p>")[0])){var z=[],A;a.contents().each(function(){m.isBlock(this)?
A=null:(A||(A={objs:[]},z.push(A)),A.objs.push(this))});for(a=0;a<z.length;a++){k=z[a];d=f.getIndexInParent(k.objs[0]);var y=f.getIndexInParent(k.objs[k.objs.length-1]),q=l("<p></p>");e.startContainer===c&&(e.startOffset>d&&e.startOffset<=y?(e.startContainer=q[0],e.startOffset-=d):e.startOffset>y&&(e.startOffset-=y-d));e.endContainer===c&&(e.endOffset>d&&e.endOffset<=y?(e.endContainer=q[0],e.endOffset-=d):e.endOffset>y&&(e.endOffset-=y-d));l(k.objs[0]).before(q);for(d=0;d<k.objs.length;d++)q[0].appendChild(k.objs[d]);
k=!0}k&&b.isActive&&e.select()}}}}function k(b){return"array"===l.type(b)&&-1!==l.inArray(e,b)}var e="autoparagraph";return b.create(e,{config:[e],init:function(){var b=this;p.bind("aloha-editable-created",function(a,c){var g=b.getEditableConfig(c.obj);k(g)&&d(c)});p.bind("aloha-smart-content-changed",function(a,c){var g=b.getEditableConfig(c.editable.obj);k(g)&&d(c.editable)})}})});Aloha._load&&Aloha._load()})();require=define=null;(function(q,t){var r,s,l=function(){},b=function(a){for(var c in a)return 0;return 1},p={}.toString,m=function(a){return"[object Function]"==p.call(a)},f=function(a){return"[object String]"==p.call(a)},d=function(a){return"[object Array]"==p.call(a)},k=function(a,c){if(a)for(var b=0;b<a.length;)c(a[b++])},e=function(a,c){for(var b in c)a[b]=c[b];return a},n=function(a,c){return e(Error(a),{src:"dojoLoader",info:c})},a=1,c=function(){return"_"+a++},g=function(a,c,b){return ib(a,c,b,0,g)},v=this,u=
v.document,z=u&&u.createElement("DiV"),A=g.has=function(a){return m(y[a])?y[a]=y[a](v,u,z):y[a]},y=A.cache=t.hasCache;A.add=function(a,c,b,d){(void 0===y[a]||d)&&(y[a]=c);return b&&A(a)};for(var C in q.has)A.add(C,q.has[C],0,1);var D=0,B=[],G=0,J=l,M=l,F;g.isXdUrl=l;g.initSyncLoader=function(a,c,b){G||(G=a,J=c,M=b);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:B,modules:aa,execQ:oa,getModule:qb,injectModule:cb,setArrived:Ca,signal:N,finishExec:hc,execModule:ha,
dojoRequirePlugin:G,getLegacyMode:function(){return D},guardCheckComplete:Ka}};var H=location.protocol,S=location.host;g.isXdUrl=function(a){return/^\./.test(a)?!1:/^\/\//.test(a)?!0:(a=a.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(a[1]!=H||S&&a[2]!=S)};A.add("dojo-force-activex-xhr",!u.addEventListener&&"file:"==window.location.protocol);A.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(A("native-xhr")&&!A("dojo-force-activex-xhr"))F=function(){return new XMLHttpRequest};else{var K=["Msxml2.XMLHTTP",
"Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],x;for(r=0;3>r;)try{if(x=K[r++],new ActiveXObject(x))break}catch(L){}F=function(){return new ActiveXObject(x)}}g.getXhr=F;A.add("dojo-gettext-api",1);g.getText=function(a,c,b){var d=F();d.open("GET",sb(a),!1);d.send(null);if(200==d.status||!location.host&&!d.status)b&&b(d.responseText,c);else throw n("xhrFailed",d.status);return d.responseText};var I=new Function("return eval(arguments[0]);");g.eval=function(a,c){return I(a+"\r\n////@ sourceURL="+c)};var T=
{},N=g.signal=function(a,c){var b=T[a];k(b&&b.slice(0),function(a){a.apply(null,d(c)?c:[c])})},W=g.on=function(a,c){var b=T[a]||(T[a]=[]);b.push(c);return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===c){b.splice(a,1);break}}}},Z=[],V={},Q=[],R={},O=g.map={},ca=[],aa={},ma="",da={},qa={},la={},ia=0,ka=function(a){var c,b,d,g;for(c in qa)b=qa[c],(d=c.match(/^url\:(.+)/))?da["url:"+Za(d[1],a)]=b:"*now"==c?g=b:"*noref"!=c&&(d=Jb(c,a,!0),da[d.mid]=da["url:"+d.url]=b);g&&g(ya(a));qa={}},Aa=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
function(a){return"\\"+a})},P=function(a,c){c.splice(0,c.length);for(var b in a)c.push([b,a[b],RegExp("^"+Aa(b)+"(/|$)"),b.length]);c.sort(function(a,c){return c[3]-a[3]});return c},na=function(a,c){k(a,function(a){c.push([f(a[0])?RegExp("^"+Aa(a[0])+"$"):a[0],a[1]])})},Va=function(a){var c=a.name;c||(c=a,a={name:c});a=e({main:"main"},a);a.location=a.location?a.location:c;a.packageMap&&(O[c]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));R[c]=a},La=[],Fa=function(a,c,b){for(var d in a){"waitSeconds"==
d&&(g.waitms=1E3*(a[d]||0));"cacheBust"==d&&(ma=a[d]?f(a[d])?a[d]:(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)g[d]=a[d];if("async"==d){var n=a[d];g.legacyMode=D=f(n)&&/sync|legacyAsync/.test(n)?n:n?!1:"sync";g.async=!D}a[d]!==y&&(g.rawConfig[d]=a[d],"has"!=d&&A.add("config-"+d,a[d],0,c))}g.baseUrl||(g.baseUrl="./");/\/$/.test(g.baseUrl)||(g.baseUrl+="/");for(d in a.has)A.add(d,a.has[d],0,c);k(a.packages,Va);for(s in a.packagePaths)k(a.packagePaths[s],function(a){var c=s+"/"+a;f(a)&&(a=
{name:a});a.location=c;Va(a)});P(e(O,a.map),ca);k(ca,function(a){a[1]=P(a[1],[]);"*"==a[0]&&(ca.star=a)});P(e(V,a.paths),Q);na(a.aliases,Z);if(c)La.push({config:a.config});else for(d in a.config)c=qb(d,b),c.config=e(c.config||{},a.config[d]);a.cache&&(ka(),qa=a.cache,a.cache["*noref"]&&ka());N("config",[a,g.rawConfig])};A("dojo-cdn");var Wa=u.getElementsByTagName("script");r=0;for(var Na,db,ra,ea;r<Wa.length;)if(Na=Wa[r++],(ra=Na.getAttribute("src"))&&(ea=ra.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&
(db=ea[3]||"",t.baseUrl=t.baseUrl||db,ia=Na),ra=Na.getAttribute("data-dojo-config")||Na.getAttribute("djConfig"))la=g.eval("({ "+ra+" })","data-dojo-config"),ia=Na;g.rawConfig={};Fa(t,1);A("dojo-cdn")&&((R.dojo.location=db)&&(db+="/"),R.dijit.location=db+"../dijit/",R.dojox.location=db+"../dojox/");Fa(q,1);Fa(la,1);var Ia=function(a){Ka(function(){k(a.deps,cb)})},ib=function(a,b,k,m,v){var p;if(f(a)){if((p=qb(a,m,!0))&&p.executed)return p.result;throw n("undefinedModule",a);}d(a)||(Fa(a,0,m),a=b,
b=k);if(d(a))if(a.length){k="require*"+c();for(var u,y=[],z=0;z<a.length;)u=a[z++],y.push(qb(u,m));p=e(ja("",k,0,""),{injected:2,deps:y,def:b||l,require:m?m.require:g,gc:1});aa[p.mid]=p;Ia(p);var A=Ea&&"sync"!=D;Ka(function(){ha(p,A)});p.executed||oa.push(p);ob()}else b&&b();return v},ya=function(a){if(!a)return g;var c=a.require;c||(c=function(b,d,g){return ib(b,d,g,a,c)},a.require=e(c,g),c.module=a,c.toUrl=function(c){return Za(c,a)},c.toAbsMid=function(c){return Oa(c,a)},c.syncLoadNls=function(c){c=
Jb(c,a);var b=aa[c.mid];if(!b||!b.executed)if(Bb=da[c.mid]||da["url:"+c.url])ab(Bb),b=aa[c.mid];return b&&b.executed&&b.result});return c},oa=[],Y=[],xa={},ta=function(a){a.injected=1;xa[a.mid]=1;a.url&&(xa[a.url]=a.pack||1);Ta()},Ca=function(a){a.injected=2;delete xa[a.mid];a.url&&delete xa[a.url];b(xa)&&(tb(),"xd"==D&&(D="sync"))},jb=g.idle=function(){return!Y.length&&b(xa)&&!oa.length&&!Ea},eb=function(a,c){if(c)for(var b=0;b<c.length;b++)if(c[b][2].test(a))return c[b];return 0},Ab=function(a){var c=
[],b,d;for(a=a.replace(/\\/g,"/").split("/");a.length;)b=a.shift(),".."==b&&c.length&&".."!=d?(c.pop(),d=c[c.length-1]):"."!=b&&c.push(d=b);return c.join("/")},ja=function(a,c,b,d){var e=g.isXdUrl(d);return{pid:a,mid:c,pack:b,url:d,executed:0,def:0,isXd:e,isAmd:!!(e||R[a]&&R[a].isAmd)}},Pa=function(a,c,b,d,g,e,f,l,p){var v,u,y,z;z=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||z&&!c)return ja(0,a,0,a);a=Ab(z?c.mid+"/../"+a:a);if(/^\./.test(a))throw n("irrationalPath",a);c&&(y=eb(c.mid,e));(y=(y=y||
e.star)&&eb(a,y[1]))&&(a=y[1]+a.substring(y[3]));c=(ea=a.match(/^([^\/]+)(\/(.+))?$/))?ea[1]:"";(v=b[c])?a=c+"/"+(u=ea[3]||v.main):c="";var q=0;k(l,function(c){var b=a.match(c[0]);b&&0<b.length&&(q=m(c[1])?a.replace(c[0],c[1]):c[1])});if(q)return Pa(q,0,b,d,g,e,f,l,p);if(b=d[a])return p?ja(b.pid,b.mid,b.pack,b.url):d[a];d=(y=eb(a,f))?y[1]+a.substring(y[3]):c?v.location+"/"+u:A("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(d)||(d=g+d);return ja(c,a,v,Ab(d+".js"))},Jb=function(a,c,b){return Pa(a,
c,R,aa,g.baseUrl,b?[]:ca,b?[]:Q,b?[]:Z)},Sa=function(a,c,b){return a.normalize?a.normalize(c,function(a){return Oa(a,b)}):Oa(c,b)},kb=0,qb=function(a,c,b){var d,g;(d=a.match(/^(.+?)\!(.*)$/))?(g=qb(d[1],c,b),"sync"!=D||g.executed||(cb(g),2!==g.injected||g.executed||Ka(function(){ha(g)}),g.executed?bb(g):oa.unshift(g)),5!==g.executed||g.load||bb(g),g.load?(d=Sa(g,d[2],c),a=g.mid+"!"+(g.dynamic?++kb+"!":"")+d):(d=d[2],a=g.mid+"!"+ ++kb+"!waitingForPlugin"),a={plugin:g,mid:a,req:ya(c),prid:d}):a=Jb(a,
c);return aa[a.mid]||!b&&(aa[a.mid]=a)},Oa=g.toAbsMid=function(a,c){return Jb(a,c).mid},Za=g.toUrl=function(a,c){var b=Jb(a+"/x",c),d=b.url;return sb(0===b.pid?a:d.substring(0,d.length-5))},Ga={injected:2,executed:5,def:3,result:3},$a=function(a){return aa[a]=e({mid:a},Ga)},Xa=$a("require"),lb=$a("exports"),Eb=$a("module"),Kb={},Fb=0,bb=function(a){var c=a.result;a.dynamic=c.dynamic;a.normalize=c.normalize;a.load=c.load;return a},Qa=function(a){var c={};k(a.loadQ,function(b){var d=Sa(a,b.prid,b.req.module),
g=a.dynamic?b.mid.replace(/waitingForPlugin$/,d):a.mid+"!"+d,d=e(e({},b),{mid:g,prid:d,injected:0});aa[g]||pa(aa[g]=d);c[b.mid]=aa[g];Ca(b);delete aa[b.mid]});a.loadQ=0;var b=function(a){for(var b=a.deps||[],d=0;d<b.length;d++)(a=c[b[d].mid])&&(b[d]=a)},d;for(d in aa)b(aa[d]);k(oa,b)},hc=function(a){g.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Fb++;k(a.provides,function(a){a()});a.loadQ&&(bb(a),Qa(a));for(r=0;r<oa.length;)oa[r]===a?oa.splice(r,1):r++;/^require\*/.test(a.mid)&&delete aa[a.mid]},
Xb=[],ha=function(a,c){if(4===a.executed)return g.trace("loader-circular-dependency",[Xb.concat(a.mid).join("->")]),!a.def||c?Kb:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return Kb;var b=a.mid,d=a.deps||[],e,f=[],k=0;for(a.executed=4;e=d[k++];){e=e===Xa?ya(a):e===lb?a.cjs.exports:e===Eb?a.cjs:ha(e,c);if(e===Kb)return a.executed=0,g.trace("loader-exec-module",["abort",b]),Kb;f.push(e)}g.trace("loader-run-factory",[a.mid]);var b=a.def,l;B.unshift(a);if(A("config-dojo-loader-catches"))try{l=m(b)?
b.apply(null,f):b}catch(p){N("error",a.result=n("factoryThrew",[a,p]))}else l=m(b)?b.apply(null,f):b;a.result=void 0===l&&a.cjs?a.cjs.exports:l;B.shift(a);hc(a)}return a.result},Ea=0,Ka=function(a){try{Ea++,a()}finally{Ea--}jb()&&N("idle",[])},ob=function(){Ea||Ka(function(){J();for(var a,c,b=0;b<oa.length;)a=Fb,c=oa[b],ha(c),a!=Fb?(J(),b=0):b++})};void 0===A("dojo-loader-eval-hint-url")&&A.add("dojo-loader-eval-hint-url",1);var sb=function(a){a+="";return a+(ma?(/\?/.test(a)?"&":"?")+ma:"")},pa=
function(a){var c=a.plugin;5!==c.executed||c.load||bb(c);var b=function(c){a.result=c;Ca(a);hc(a);ob()};c.load?c.load(a.prid,a.req,b):c.loadQ?c.loadQ.push(a):(c.loadQ=[a],oa.unshift(c),cb(c))},Bb=0,rb=0,Ra=0,ab=function(a,c){A("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Ra=1;if(A("config-dojo-loader-catches"))try{a===Bb?Bb.call(null):g.eval(a,A("dojo-loader-eval-hint-url")?c.url:c.mid)}catch(b){N("error",n("evalModuleThrew",c))}else a===Bb?Bb.call(null):g.eval(a,A("dojo-loader-eval-hint-url")?
c.url:c.mid);Ra=0},cb=function(a){var c=a.mid,b=a.url;if(!(a.executed||a.injected||xa[c]||a.url&&(a.pack&&xa[a.url]===a.pack||1==xa[a.url])))if(ta(a),a.plugin)pa(a);else{var d=function(){bc(a);if(2!==a.injected){if(A("dojo-enforceDefine")){N("error",n("noDefine",a));return}Ca(a);e(a,Ga);g.trace("loader-define-nonmodule",[a.url])}D?!B.length&&ob():ob()};if(Bb=da[c]||da["url:"+a.url])g.trace("loader-inject",["cache",a.mid,b]),ab(Bb,a),d();else{if(D)if(a.isXd)"sync"==D&&(D="xd");else if(!a.isAmd||"sync"==
D){var f=function(e){if("sync"==D){B.unshift(a);ab(e,a);B.shift();bc(a);a.cjs||(Ca(a),hc(a));if(a.finish){e=c+"*finish";var f=a.finish;delete a.finish;nb(e,["dojo",("dojo/require!"+f.join(",")).replace(/\./g,"/")],function(a){k(f,function(c){a.require(c)})});oa.unshift(qb(e))}d()}else(e=M(a,e))?(ab(e,a),d()):(rb=a,g.injectUrl(sb(b),d,a),rb=0)};g.trace("loader-inject",["xhr",a.mid,b,"sync"!=D]);if(A("config-dojo-loader-catches"))try{g.getText(b,"sync"!=D,f)}catch(m){N("error",n("xhrInjectFailed",[a,
m]))}else g.getText(b,"sync"!=D,f);return}g.trace("loader-inject",["script",a.mid,b]);rb=a;g.injectUrl(sb(b),d,a);rb=0}}},Gb=function(a,c,b){g.trace("loader-define-module",[a.mid,c]);var d=a.mid;if(2===a.injected)return N("error",n("multipleDefine",a)),a;e(a,{deps:c,def:b,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(c){a.cjs.exports=c},config:function(){return a.config}}});for(var f=0;c[f];f++)c[f]=qb(c[f],a);D&&!xa[d]&&(Ia(a),oa.push(a),ob());Ca(a);m(b)||c.length||(a.result=b,
hc(a));return a},bc=function(a,c){for(var b=[],d,g;Y.length;)g=Y.shift(),c&&(g[0]=c.shift()),d=g[0]&&qb(g[0])||a,b.push([d,g[1],g[2]]);ka(a);k(b,function(a){Ia(Gb.apply(null,a))})},Ja=0,tb=l,Ta=l,tb=function(){Ja&&clearTimeout(Ja);Ja=0},Ta=function(){tb();g.waitms&&(Ja=window.setTimeout(function(){tb();N("error",n("timeout",xa))},g.waitms))};A.add("ie-event-behavior",u.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var fb=function(a,c,
b,d){if(A("ie-event-behavior"))return a.attachEvent(b,d),function(){a.detachEvent(b,d)};a.addEventListener(c,d,!1);return function(){a.removeEventListener(c,d,!1)}},xb=fb(window,"load","onload",function(){g.pageLoaded=1;"complete"!=u.readyState&&(u.readyState="complete");xb()}),Wa=u.getElementsByTagName("script");for(r=0;!ia;)/^dojo/.test((Na=Wa[r++])&&Na.type)||(ia=Na);g.injectUrl=function(a,c,b){b=b.node=u.createElement("script");var d=fb(b,"load","onreadystatechange",function(a){a=a||window.event;
var b=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(b.readyState))d(),g(),c&&c()}),g=fb(b,"error","onerror",function(c){d();g();N("error",n("scriptError",[a,c]))});b.type="text/javascript";b.charset="utf-8";b.src=a;ia.parentNode.insertBefore(b,ia);return b};g.log=function(){try{for(var a=0;a<arguments.length;a++);}catch(c){}};g.trace=l;var nb=function(a,c,b){var d=arguments.length,e=["require","exports","module"],k=[0,a,c];1==d?k=[0,m(a)?e:[],a]:2==d&&f(a)?k=[a,m(c)?e:[],c]:3==
d&&(k=[a,c,b]);g.trace("loader-define",k.slice(0,2));if((d=k[0]&&qb(k[0]))&&!xa[d.mid])Ia(Gb(d,k[1],k[2]));else if(!A("ie-event-behavior")||Ra)Y.push(k);else{d=d||rb;if(!d)for(a in xa)if((e=aa[a])&&e.node&&"interactive"===e.node.readyState){d=e;break}d?(ka(d),Ia(Gb(d,k[1],k[2]))):N("error",n("ieDefineFailed",k[0]));ob()}};nb.amd={vendor:"dojotoolkit.org"};e(e(g,t.loaderPatch),q.loaderPatch);W("error",function(a){try{if(console.error(a),a instanceof Error)for(var c in a);}catch(b){}});e(g,{uid:c,cache:da,
packs:R});if(v.define)N("error",n("defineAlreadyDefined",0));else{v.define=nb;v.require=g;k(La,function(a){Fa(a)});var yc=la.deps||q.deps||t.deps,ub=la.callback||q.callback||t.callback;g.boot=yc||ub?[yc||[],ub]:0}})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",
name:"dgrid"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:".",name:"dojo"}]});
require({cache:{"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(q,t,r){function s(b){return p[b]=new Function("item","index","array",b)}function l(b){var f=!b;return function(e,n,a){var c=0,g=e&&e.length||0,m;g&&"string"==typeof e&&(e=e.split(""));"string"==typeof n&&(n=p[n]||s(n));if(a)for(;c<g;++c){if(m=!n.call(a,e[c],c,e),b^m)return!m}else for(;c<g;++c)if(m=!n(e[c],c,e),b^m)return!m;return f}}function b(b){var k=1,e=0,n=0;b||(k=e=n=-1);return function(a,c,g,l){if(l&&
0<k)return f.lastIndexOf(a,c,g);l=a&&a.length||0;var p=b?l+n:e;g===m?g=b?e:l+n:0>g?(g=l+g,0>g&&(g=e)):g=g>=l?l+n:g;for(l&&"string"==typeof a&&(a=a.split(""));g!=p;g+=k)if(a[g]==c)return g;return-1}}var p={},m,f={every:l(!1),some:l(!0),indexOf:b(!0),lastIndexOf:b(!1),forEach:function(b,f,e){var n=0,a=b&&b.length||0;a&&"string"==typeof b&&(b=b.split(""));"string"==typeof f&&(f=p[f]||s(f));if(e)for(;n<a;++n)f.call(e,b[n],n,b);else for(;n<a;++n)f(b[n],n,b)},map:function(b,f,e,n){var a=0,c=b&&b.length||
0;n=new (n||Array)(c);c&&"string"==typeof b&&(b=b.split(""));"string"==typeof f&&(f=p[f]||s(f));if(e)for(;a<c;++a)n[a]=f.call(e,b[a],a,b);else for(;a<c;++a)n[a]=f(b[a],a,b);return n},filter:function(b,f,e){var n=0,a=b&&b.length||0,c=[],g;a&&"string"==typeof b&&(b=b.split(""));"string"==typeof f&&(f=p[f]||s(f));if(e)for(;n<a;++n)g=b[n],f.call(e,g,n,b)&&c.push(g);else for(;n<a;++n)g=b[n],f(g,n,b)&&c.push(g);return c},clearCache:function(){p={}}};r.mixin(q,f);return f})},"dojo/_base/kernel":function(){define(["../has",
"./config","require","module"],function(q,t,r,s){var l,b={},p={},m={config:t,global:this,dijit:b,dojox:p},b={dojo:["dojo",m],dijit:["dijit",b],dojox:["dojox",p]};s=r.map&&r.map[s.id.match(/[^\/]+/)[0]];for(l in s)b[l]?b[l][0]=s[l]:b[l]=[s[l],{}];for(l in b)s=b[l],s[1]._scopeName=s[0],t.noGlobals||(this[s[0]]=s[1]);m.scopeMap=b;m.baseUrl=m.config.baseUrl=r.baseUrl;m.isAsync=r.async;m.locale=t.locale;s="$Rev: f774568 $".match(/[0-9a-f]{7,}/);m.version={major:1,minor:9,patch:2,flag:"",revision:s?s[0]:
NaN,toString:function(){var b=m.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(m);m.exit=function(){};"undefined"!=typeof console||(console={});var b="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" "),f;for(s=0;f=b[s++];)console[f]||function(){var b=f+"";console[b]="log"in console?function(){var f=
Array.apply({},arguments);f.unshift(b+":");console.log(f.join(" "))}:function(){};console[b]._fake=!0}();q.add("dojo-debug-messages",!!t.isDebug);m.deprecated=m.experimental=function(){};q("dojo-debug-messages")&&(m.deprecated=function(b,f,e){b="DEPRECATED: "+b;f&&(b+=" "+f);e&&(b+=" -- will be removed in version: "+e);console.warn(b)},m.experimental=function(b,f){var e="EXPERIMENTAL: "+b+" -- APIs subject to change without notice.";f&&(e+=" "+f);console.warn(e)});if(t.modulePaths){m.deprecated("dojo.modulePaths",
"use paths configuration");q={};for(l in t.modulePaths)q[l.replace(/\./g,"/")]=t.modulePaths[l];r({paths:q})}m.moduleUrl=function(b,f){m.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var e=null;b&&(e=r.toUrl(b.replace(/\./g,"/")+(f?"/"+f:"")+"/*.*").replace(/\/\*\.\*/,"")+(f?"":"/"));return e};m._hasResource={};return m})},"dojo/has":function(){define(["require","module"],function(q,t){var r=q.has||function(){};r.add("dom-addeventlistener",!!document.addEventListener);r.add("touch","ontouchstart"in
document||0<window.navigator.msMaxTouchPoints);r.add("device-width",screen.availWidth||innerWidth);var s=document.createElement("form");r.add("dom-attributes-explicit",0==s.attributes.length);r.add("dom-attributes-specified-flag",0<s.attributes.length&&40>s.attributes.length);r.clearElement=function(l){l.innerHTML="";return l};r.normalize=function(l,b){var p=l.match(/[\?:]|[^:\?]*/g),m=0,f=function(b){var k=p[m++];if(":"==k)return 0;if("?"==p[m++]){if(!b&&r(k))return f();f(!0);return f(b)}return k||
0};return(l=f())&&b(l)};r.load=function(l,b,p){l?b([l],p):p()};return r})},"dojo/_base/config":function(){define(["../has","require"],function(q,t){var r={},s=t.rawConfig,l;for(l in s)r[l]=s[l];r.locale||"undefined"==typeof navigator||(r.locale=(navigator.language||navigator.userLanguage).toLowerCase());return r})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(q,t){t.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var r=t("bug-for-in-skips-shadowed")?
"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],s=r.length,l=function(b,f,e){var n,a=0,c=q.global;if(!e)if(b.length){n=b[a++];try{e=q.scopeMap[n]&&q.scopeMap[n][1]}catch(g){}e=e||(n in c?c[n]:f?c[n]={}:void 0)}else return c;for(;e&&(n=b[a++]);)e=n in e?e[n]:f?e[n]={}:void 0;return e},b=Object.prototype.toString,p=function(b,f,e){return(e||[]).concat(Array.prototype.slice.call(b,f||0))},m=/\{([^\}]+)\}/g,f={_extraNames:r,_mixin:function(b,
f,e){var n,a,c,g={};for(n in f)a=f[n],n in b&&(b[n]===a||n in g&&g[n]===a)||(b[n]=e?e(a):a);if(t("bug-for-in-skips-shadowed")&&f)for(c=0;c<s;++c)n=r[c],a=f[n],n in b&&(b[n]===a||n in g&&g[n]===a)||(b[n]=e?e(a):a);return b},mixin:function(b,k){b||(b={});for(var e=1,n=arguments.length;e<n;e++)f._mixin(b,arguments[e]);return b},setObject:function(b,f,e){var n=b.split(".");b=n.pop();return(e=l(n,!0,e))&&b?e[b]=f:void 0},getObject:function(b,f,e){return l(b.split("."),f,e)},exists:function(b,k){return void 0!==
f.getObject(b,!1,k)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:function(b){return b&&(b instanceof Array||"array"==typeof b)},isFunction:function(d){return"[object Function]"===b.call(d)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||f.isArray(b)||f.isFunction(b))},isArrayLike:function(b){return b&&void 0!==b&&!f.isString(b)&&!f.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(f.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&
!f.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,k){for(var e=1,n=arguments.length;e<n;e++)f._mixin(b.prototype,arguments[e]);return b},_hitchArgs:function(b,k){var e=f._toArray(arguments,2),n=f.isString(k);return function(){var a=f._toArray(arguments),c=n?(b||q.global)[k]:k;return c&&c.apply(b||this,e.concat(a))}},hitch:function(b,k){if(2<arguments.length)return f._hitchArgs.apply(q,arguments);k||(k=b,b=null);if(f.isString(k)){b=b||q.global;if(!b[k])throw['lang.hitch: scope["',
k,'"] is null (scope="',b,'")'].join("");return function(){return b[k].apply(b,arguments||[])}}return b?function(){return k.apply(b,arguments||[])}:k},delegate:function(){function b(){}return function(k,e){b.prototype=k;var n=new b;b.prototype=null;e&&f._mixin(n,e);return n}}(),_toArray:t("ie")?function(){function b(d,e,f){f=f||[];for(e=e||0;e<d.length;e++)f.push(d[e]);return f}return function(f){return(f.item?b:p).apply(this,arguments)}}():p,partial:function(b){return f.hitch.apply(q,[null].concat(f._toArray(arguments)))},
clone:function(b){if(!b||"object"!=typeof b||f.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var k,e,n;if(f.isArray(b))for(k=[],e=0,n=b.length;e<n;++e)e in b&&k.push(f.clone(b[e]));else k=b.constructor?new b.constructor:{};return f._mixin(k,b,f.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,
k,e){return b.replace(e||m,f.isFunction(k)?k:function(b,a){return f.getObject(a,!1,k)})}};f.mixin(q,f);return f})},"dojo/sniff":function(){define(["./has"],function(q){var t=navigator,r=t.userAgent,t=t.appVersion,s=parseFloat(t);q.add("air",0<=r.indexOf("AdobeAIR"));q.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0);q.add("khtml",0<=t.indexOf("Konqueror")?s:void 0);q.add("webkit",parseFloat(r.split("WebKit/")[1])||void 0);q.add("chrome",parseFloat(r.split("Chrome/")[1])||void 0);q.add("safari",
0<=t.indexOf("Safari")&&!q("chrome")?parseFloat(t.split("Version/")[1]):void 0);q.add("mac",0<=t.indexOf("Macintosh"));q.add("quirks","BackCompat"==document.compatMode);if(r.match(/(iPhone|iPod|iPad)/)){var l=RegExp.$1.replace(/P/,"p"),b=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",b=parseFloat(b.replace(/_/,".").replace(/_/g,""));q.add(l,b);q.add("ios",b)}q.add("android",parseFloat(r.split("Android ")[1])||void 0);q.add("bb",(0<=r.indexOf("BlackBerry")||0<=r.indexOf("BB10"))&&parseFloat(r.split("Version/")[1])||
void 0);q.add("trident",parseFloat(t.split("Trident/")[1])||void 0);q.add("svg","undefined"!==typeof SVGAngle);q("webkit")||(0<=r.indexOf("Opera")&&q.add("opera",9.8<=s?parseFloat(r.split("Version/")[1])||s:s),0<=r.indexOf("Gecko")&&!q("khtml")&&!q("webkit")&&!q("trident")&&q.add("mozilla",s),q("mozilla")&&q.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0),document.all&&!q("opera")&&(r=parseFloat(t.split("MSIE ")[1])||void 0,(t=document.documentMode)&&5!=t&&Math.floor(r)!=
t&&(r=t),q.add("ie",r)),q.add("wii","undefined"!=typeof opera&&opera.wiiremote));return q})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(q,t,r,s){function l(b,f,e,n,a,c){c=c||"px";b=b.style;isNaN(f)||(b.left=f+c);isNaN(e)||(b.top=e+c);0<=n&&(b.width=n+c);0<=a&&(b.height=a+c)}function b(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function p(d){return"border-box"==
m.boxModel||"table"==d.tagName.toLowerCase()||b(d)}var m={boxModel:"content-box"};q("ie")&&(m.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");m.getPadExtents=function(b,f){b=r.byId(b);var e=f||s.getComputedStyle(b),n=s.toPixelValue,a=n(b,e.paddingLeft),c=n(b,e.paddingTop),g=n(b,e.paddingRight),e=n(b,e.paddingBottom);return{l:a,t:c,r:g,b:e,w:a+g,h:c+e}};m.getBorderExtents=function(b,f){b=r.byId(b);var e=s.toPixelValue,n=f||s.getComputedStyle(b),a="none"!=n.borderLeftStyle?e(b,
n.borderLeftWidth):0,c="none"!=n.borderTopStyle?e(b,n.borderTopWidth):0,g="none"!=n.borderRightStyle?e(b,n.borderRightWidth):0,e="none"!=n.borderBottomStyle?e(b,n.borderBottomWidth):0;return{l:a,t:c,r:g,b:e,w:a+g,h:c+e}};m.getPadBorderExtents=function(b,f){b=r.byId(b);var e=f||s.getComputedStyle(b),n=m.getPadExtents(b,e),e=m.getBorderExtents(b,e);return{l:n.l+e.l,t:n.t+e.t,r:n.r+e.r,b:n.b+e.b,w:n.w+e.w,h:n.h+e.h}};m.getMarginExtents=function(b,f){b=r.byId(b);var e=f||s.getComputedStyle(b),n=s.toPixelValue,
a=n(b,e.marginLeft),c=n(b,e.marginTop),g=n(b,e.marginRight),e=n(b,e.marginBottom);return{l:a,t:c,r:g,b:e,w:a+g,h:c+e}};m.getMarginBox=function(b,f){b=r.byId(b);var e=f||s.getComputedStyle(b),n=m.getMarginExtents(b,e),a=b.offsetLeft-n.l,c=b.offsetTop-n.t,g=b.parentNode,l=s.toPixelValue;if(q("mozilla")){var p=parseFloat(e.left),e=parseFloat(e.top);isNaN(p)||isNaN(e)?g&&g.style&&(g=s.getComputedStyle(g),"visible"!=g.overflow&&(a+="none"!=g.borderLeftStyle?l(b,g.borderLeftWidth):0,c+="none"!=g.borderTopStyle?
l(b,g.borderTopWidth):0)):(a=p,c=e)}else(q("opera")||8==q("ie")&&!q("quirks"))&&g&&(g=s.getComputedStyle(g),a-="none"!=g.borderLeftStyle?l(b,g.borderLeftWidth):0,c-="none"!=g.borderTopStyle?l(b,g.borderTopWidth):0);return{l:a,t:c,w:b.offsetWidth+n.w,h:b.offsetHeight+n.h}};m.getContentBox=function(b,f){b=r.byId(b);var e=f||s.getComputedStyle(b),n=b.clientWidth,a=m.getPadExtents(b,e),c=m.getBorderExtents(b,e);n?(e=b.clientHeight,c.w=c.h=0):(n=b.offsetWidth,e=b.offsetHeight);q("opera")&&(a.l+=c.l,a.t+=
c.t);return{l:a.l,t:a.t,w:n-a.w-c.w,h:e-a.h-c.h}};m.setContentSize=function(b,f,e){b=r.byId(b);var n=f.w;f=f.h;p(b)&&(e=m.getPadBorderExtents(b,e),0<=n&&(n+=e.w),0<=f&&(f+=e.h));l(b,NaN,NaN,n,f)};var f={l:0,t:0,w:0,h:0};m.setMarginBox=function(d,k,e){d=r.byId(d);var n=e||s.getComputedStyle(d);e=k.w;var a=k.h,c=p(d)?f:m.getPadBorderExtents(d,n),n=m.getMarginExtents(d,n);if(q("webkit")&&b(d)){var g=d.style;0<=e&&!g.width&&(g.width="4px");0<=a&&!g.height&&(g.height="4px")}0<=e&&(e=Math.max(e-c.w-n.w,
0));0<=a&&(a=Math.max(a-c.h-n.h,0));l(d,k.l,k.t,e,a)};m.isBodyLtr=function(b){b=b||t.doc;return"ltr"==(t.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};m.docScroll=function(b){b=b||t.doc;var f=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in f?{x:f.pageXOffset,y:f.pageYOffset}:(f=q("quirks")?t.body(b):b.documentElement)&&{x:m.fixIeBiDiScrollLeft(f.scrollLeft||0,b),y:f.scrollTop||0}};q("ie")&&(m.getIeDocumentElementOffset=function(b){b=b||t.doc;b=b.documentElement;if(8>q("ie")){var f=
b.getBoundingClientRect(),e=f.left,f=f.top;7>q("ie")&&(e+=b.clientLeft,f+=b.clientTop);return{x:0>e?0:e,y:0>f?0:f}}return{x:0,y:0}});m.fixIeBiDiScrollLeft=function(b,f){f=f||t.doc;var e=q("ie");if(e&&!m.isBodyLtr(f)){var n=q("quirks"),a=n?t.body(f):f.documentElement,c=t.global;6==e&&!n&&c.frameElement&&a.scrollHeight>a.clientHeight&&(b+=a.clientLeft);return 8>e||n?b+a.clientWidth-a.scrollWidth:-b}return b};m.position=function(b,f){b=r.byId(b);var e=t.body(b.ownerDocument),n=b.getBoundingClientRect(),
n={x:n.left,y:n.top,w:n.right-n.left,h:n.bottom-n.top};if(9>q("ie")){var a=m.getIeDocumentElementOffset(b.ownerDocument);n.x-=a.x+(q("quirks")?e.clientLeft+e.offsetLeft:0);n.y-=a.y+(q("quirks")?e.clientTop+e.offsetTop:0)}f&&(e=m.docScroll(b.ownerDocument),n.x+=e.x,n.y+=e.y);return n};m.getMarginSize=function(b,f){b=r.byId(b);var e=m.getMarginExtents(b,f||s.getComputedStyle(b)),n=b.getBoundingClientRect();return{w:n.right-n.left+e.w,h:n.bottom-n.top+e.h}};m.normalizeEvent=function(b){"layerX"in b||
(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!q("dom-addeventlistener")){var f=b.target,f=f&&f.ownerDocument||document,e=q("quirks")?f.body:f.documentElement,n=m.getIeDocumentElementOffset(f);b.pageX=b.clientX+m.fixIeBiDiScrollLeft(e.scrollLeft||0,f)-n.x;b.pageY=b.clientY+(e.scrollTop||0)-n.y}};return m})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(q,t,r){var s={global:q.global,doc:this.document||null,body:function(l){l=l||q.doc;return l.body||l.getElementsByTagName("body")[0]},
setContext:function(l,b){q.global=s.global=l;q.doc=s.doc=b},withGlobal:function(l,b,p,m){var f=q.global;try{return q.global=s.global=l,s.withDoc.call(null,l.document,b,p,m)}finally{q.global=s.global=f}},withDoc:function(l,b,p,m){var f=s.doc,d=r("quirks"),k=r("ie"),e,n,a;try{return q.doc=s.doc=l,q.isQuirks=r.add("quirks","BackCompat"==q.doc.compatMode,!0,!0),r("ie")&&(a=l.parentWindow)&&a.navigator&&(e=parseFloat(a.navigator.appVersion.split("MSIE ")[1])||void 0,(n=l.documentMode)&&5!=n&&Math.floor(e)!=
n&&(e=n),q.isIE=r.add("ie",e,!0,!0)),p&&"string"==typeof b&&(b=p[b]),b.apply(p,m||[])}finally{q.doc=s.doc=f,q.isQuirks=r.add("quirks",d,!0,!0),q.isIE=r.add("ie",k,!0,!0)}}};t.mixin(q,s);return s})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(q,t){if(7>=q("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(r){}var s={};q("ie")?s.byId=function(b,l){if("string"!=typeof b)return b;var m=l||t.doc,f=b&&m.getElementById(b);if(!f||f.attributes.id.value!=b&&f.id!=b){m=
m.all[b];if(!m||m.nodeName)m=[m];for(var d=0;f=m[d++];)if(f.attributes&&f.attributes.id&&f.attributes.id.value==b||f.id==b)return f}else return f}:s.byId=function(b,l){return("string"==typeof b?(l||t.doc).getElementById(b):b)||null};s.isDescendant=function(b,l){try{for(b=s.byId(b),l=s.byId(l);b;){if(b==l)return!0;b=b.parentNode}}catch(m){}return!1};q.add("css-user-select",function(b,l,m){if(!m)return!1;b=m.style;l=["Khtml","O","ms","Moz","Webkit"];m=l.length;var f="userSelect";do if("undefined"!==
typeof b[f])return f;while(m--&&(f=l[m]+"UserSelect"));return!1});var l=q("css-user-select");s.setSelectable=l?function(b,p){s.byId(b).style[l]=p?"":"none"}:function(b,l){b=s.byId(b);var m=b.getElementsByTagName("*"),f=m.length;if(l)for(b.removeAttribute("unselectable");f--;)m[f].removeAttribute("unselectable");else for(b.setAttribute("unselectable","on");f--;)m[f].setAttribute("unselectable","on")};return s})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(q,t){function r(e,a,c){a=
a.toLowerCase();if(q("ie")){if("auto"==c){if("height"==a)return e.offsetHeight;if("width"==a)return e.offsetWidth}if("fontweight"==a)switch(c){case 700:return"bold";default:return"normal"}}a in d||(d[a]=k.test(a));return d[a]?b(e,c):c}var s,l={};s=q("webkit")?function(b){var a;if(1==b.nodeType){var c=b.ownerDocument.defaultView;a=c.getComputedStyle(b,null);!a&&b.style&&(b.style.display="",a=c.getComputedStyle(b,null))}return a||{}}:q("ie")&&(9>q("ie")||q("quirks"))?function(b){return 1==b.nodeType&&
b.currentStyle?b.currentStyle:{}}:function(b){return 1==b.nodeType?b.ownerDocument.defaultView.getComputedStyle(b,null):{}};l.getComputedStyle=s;var b;b=q("ie")?function(b,a){if(!a)return 0;if("medium"==a)return 4;if(a.slice&&"px"==a.slice(-2))return parseFloat(a);var c=b.style,d=b.runtimeStyle,e=c.left,f=d.left;d.left=b.currentStyle.left;try{c.left=a,a=c.pixelLeft}catch(k){a=0}c.left=e;d.left=f;return a}:function(b,a){return parseFloat(a)||0};l.toPixelValue=b;var p=function(b,a){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return a?
{}:null}},m=9>q("ie")||10>q("ie")&&q("quirks")?function(b){try{return p(b).Opacity/100}catch(a){return 1}}:function(b){return s(b).opacity},f=9>q("ie")||10>q("ie")&&q("quirks")?function(b,a){""===a&&(a=1);var c=100*a;1===a?(b.style.zoom="",p(b)&&(b.style.filter=b.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(b.style.zoom=1,p(b)?p(b,1).Opacity=c:b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+c+")",p(b,1).Enabled=!0);if("tr"==b.tagName.toLowerCase())for(c=
b.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&f(c,a);return a}:function(b,a){return b.style.opacity=a},d={left:!0,top:!0},k=/margin|padding|width|height|max|min|offset/,e={cssFloat:1,styleFloat:1,"float":1};l.get=function(b,a){var c=t.byId(b),d=arguments.length;if(2==d&&"opacity"==a)return m(c);a=e[a]?"cssFloat"in c.style?"cssFloat":"styleFloat":a;var f=l.getComputedStyle(c);return 1==d?f:r(c,a,f[a]||c.style[a])};l.set=function(b,a,c){var d=t.byId(b),k=arguments.length,m="opacity"==
a;a=e[a]?"cssFloat"in d.style?"cssFloat":"styleFloat":a;if(3==k)return m?f(d,c):d.style[a]=c;for(var p in a)l.set(b,p,a[p]);return l.getComputedStyle(d)};return l})},"dojo/aspect":function(){define([],function(){function q(b,f,d,k){var e=b[f],n="around"==f,a;if(n){var c=d(function(){return e.advice(this,arguments)});a={remove:function(){c&&(c=b=d=null)},advice:function(a,b){return c?c.apply(a,b):e.advice(a,b)}}}else a={remove:function(){if(a.advice){var c=a.previous,e=a.next;e||c?(c?c.next=e:b[f]=
e,e&&(e.previous=c)):delete b[f];b=d=a.advice=null}},id:s++,advice:d,receiveArguments:k};if(e&&!n)if("after"==f){for(;e.next&&(e=e.next););e.next=a;a.previous=e}else"before"==f&&(b[f]=a,a.next=e,e.previous=a);else b[f]=a;return a}function t(b){return function(f,d,k,e){var n=f[d],a;n&&n.target==f||(f[d]=a=function(){for(var c=s,b=arguments,d=a.before;d;)b=d.advice.apply(this,b)||b,d=d.next;if(a.around)var e=a.around.advice(this,b);for(d=a.after;d&&d.id<c;){if(d.receiveArguments)var f=d.advice.apply(this,
b),e=f===r?e:f;else e=d.advice.call(this,e,b);d=d.next}return e},n&&(a.around={advice:function(a,b){return n.apply(a,b)}}),a.target=f);f=q(a||n,b,k,e);k=null;return f}}var r,s=0,l=t("after"),b=t("before"),p=t("around");return{before:b,around:p,after:l}})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(q,t,r,s,l,b,p,m,f){r.add("dojo-preload-i18n-Api",1);var d=q.i18n={},k=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,
e=function(a,c,b,d){var g=[b+d];c=c.split("-");for(var e="",f=0;f<c.length;f++)if(e+=(e?"-":"")+c[f],!a||a[e])g.push(b+e+"/"+d),g.specificity=e;return g},n={},a=function(a,c,b){b=b?b.toLowerCase():q.locale;a=a.replace(/\./g,"/");c=c.replace(/\./g,"/");return/root/i.test(b)?a+"/nls/"+c:a+"/nls/"+b+"/"+c},c=q.getL10nName=function(c,b,d){return f.id+"!"+a(c,b,d)},g=function(a,c,d,g,f,k){a([c],function(m){var l=b.clone(m.root||m.ROOT),p=e(!m._v1x&&m,f,d,g);a(p,function(){for(var a=1;a<p.length;a++)l=
b.mixin(b.clone(l),arguments[a]);n[c+"/"+f]=l;l.$locale=p.specificity;k()})})},v=function(a){var c=l.extraLocale||[],c=b.isArray(c)?c:[c];c.push(a);return c},u=function(a,c,d){if(r("dojo-preload-i18n-Api")){var e=a.split("*"),f="preload"==e[1];f&&(n[a]||(n[a]=1,D(e[2],m.parse(e[3]),1,c)),d(1));(e=f)||(y&&C.push([a,c,d]),e=y);if(e)return}a=k.exec(a);var l=a[1]+"/",p=a[5]||a[4],u=l+p,e=(a=a[5]&&a[4])||q.locale||"",z=u+"/"+e;a=a?[e]:v(e);var A=a.length,t=function(){--A||d(b.delegate(n[z]))};s.forEach(a,
function(a){var b=u+"/"+a;r("dojo-preload-i18n-Api")&&B(b);n[b]?t():g(c,u,l,p,a,t)})};if(r("dojo-unit-tests"))var z=d.unitTests=[];r("dojo-preload-i18n-Api");var A=d.normalizeLocale=function(a){a=a?a.toLowerCase():q.locale;return"root"==a?"ROOT":a},y=0,C=[],D=d._preloadLocalizations=function(a,c,b,d){function g(a,c){d.isXdUrl(t.toUrl(a+".js"))||b?d([a],c):M([a],c,d)}function e(a,c){for(var b=a.split("-");b.length;){if(c(b.join("-")))return;b.pop()}c("ROOT")}function f(b){b=A(b);e(b,function(b){if(0<=
s.indexOf(c,b)){var d=a.replace(/\./g,"/")+"_"+b;y++;g(d,function(a){for(var c in a)n[t.toAbsMid(c)+"/"+b]=a[c];for(--y;!y&&C.length;)u.apply(null,C.shift())});return!0}return!1})}d=d||t;f();s.forEach(q.config.extraLocale,f)},B=function(){},G={},J=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
M=function(a,c,b){var d=[];s.forEach(a,function(a){function c(b){b=J(b,B,a,G);b===G?d.push(n[g]=G.result):(b instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+g,b),b={}),d.push(n[g]=/nls\/[^\/]+\/[^\/]+$/.test(g)?b:{root:b,_v1x:1}))}var g=b.toUrl(a+".js");if(n[g])d.push(n[g]);else{var e=b.syncLoadNls(a);if(e)d.push(e);else if(p)p.get({url:g,sync:!0,load:c,error:function(){d.push(n[g]={})}});else try{b.getText(g,!0,c)}catch(f){d.push(n[g]={})}}});c&&c.apply(null,d)},B=function(a){for(var c,
b=a.split("/"),d=q.global[b[0]],g=1;d&&g<b.length-1;d=d[b[g++]]);d&&((c=d[b[g]])||(c=d[b[g].replace(/-/g,"_")]),c&&(n[a]=c));return c};d.getLocalization=function(c,b,d){var g;c=a(c,b,d);u(c,t.isXdUrl(t.toUrl(c+".js"))?t:function(a,c){M(a,c,t)},function(a){g=a});return g};r("dojo-unit-tests")&&z.push(function(a){a.register("tests.i18n.unit",function(a){var c;c=J("{prop:1}",B,"nonsense",G);a.is({prop:1},c);a.is(void 0,c[1]);c=J("({prop:1})",B,"nonsense",G);a.is({prop:1},c);a.is(void 0,c[1]);c=J("{'prop-x':1}",
B,"nonsense",G);a.is({"prop-x":1},c);a.is(void 0,c[1]);c=J("({'prop-x':1})",B,"nonsense",G);a.is({"prop-x":1},c);a.is(void 0,c[1]);c=J("define({'prop-x':1})",B,"nonsense",G);a.is(G,c);a.is({"prop-x":1},G.result);c=J("define('some/module', {'prop-x':1})",B,"nonsense",G);a.is(G,c);a.is({"prop-x":1},G.result);c=J("this is total nonsense and should throw an error",B,"nonsense",G);a.is(c instanceof Error,!0)})});return b.mixin(d,{dynamic:!0,normalize:function(a,c){return/^\./.test(a)?c(a):a},load:u,cache:n,
getL10nName:c})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){q._xhrObj=c._create;var v=q.config;q.objectToQuery=s.objectToQuery;q.queryToObject=s.queryToObject;q.fieldToObject=b.fieldToObject;q.formToObject=b.toObject;q.formToQuery=b.toQuery;q.formToJson=b.toJson;q._blockAsync=!1;var u=q._contentHandlers=
q.contentHandlers={text:function(a){return a.responseText},json:function(a){return f.fromJson(a.responseText||null)},"json-comment-filtered":function(a){m.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");a=a.responseText;var c=a.indexOf("/*"),b=a.lastIndexOf("*/");
if(-1==c||-1==b)throw Error("JSON was not comment filtered");return f.fromJson(a.substring(c+2,b))},javascript:function(a){return q.eval(a.responseText)},xml:function(a){var c=a.responseXML;c&&t("dom-qsa2.1")&&!c.querySelectorAll&&t("dom-parser")&&(c=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(t("ie")&&(!c||!c.documentElement)){var b=function(a){return"MSXML"+a+".DOMDocument"},b=["Microsoft.XMLDOM",b(6),b(4),b(3),b(2)];k.some(b,function(b){try{var d=new ActiveXObject(b);
d.async=!1;d.loadXML(a.responseText);c=d}catch(g){return!1}return!0})}return c},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?u["json-comment-filtered"](a):u.json(a)}};q._ioSetArgs=function(a,c,g,e){var f={args:a,url:a.url},k=null;if(a.form){var k=l.byId(a.form),m=k.getAttributeNode("action");f.url=f.url||(m?m.value:null);k=b.toObject(k)}m=[{}];k&&m.push(k);a.content&&m.push(a.content);a.preventCache&&m.push({"dojo.preventCache":(new Date).valueOf()});
f.query=s.objectToQuery(d.mixin.apply(null,m));f.handleAs=a.handleAs||"text";var n=new p(function(a){a.canceled=!0;c&&c(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});n.addCallback(g);var u=a.load;u&&d.isFunction(u)&&n.addCallback(function(c){return u.call(a,c,f)});var y=a.error;y&&d.isFunction(y)&&n.addErrback(function(c){return y.call(a,c,f)});var z=a.handle;z&&d.isFunction(z)&&n.addBoth(function(c){return z.call(a,c,f)});n.addErrback(function(a){return e(a,
n)});v.ioPublish&&q.publish&&!1!==f.args.ioPublish&&(n.addCallbacks(function(a){q.publish("/dojo/io/load",[n,a]);return a},function(a){q.publish("/dojo/io/error",[n,a]);return a}),n.addBoth(function(a){q.publish("/dojo/io/done",[n,a]);return a}));n.ioArgs=f;return n};var z=function(a){a=u[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},A=function(a,c){c.ioArgs.args.failOk||console.error(a);return a},y=function(a){0>=C&&(C=0,v.ioPublish&&q.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&
q.publish("/dojo/io/stop"))},C=0;n.after(a,"_onAction",function(){C-=1});n.after(a,"_onInFlight",y);q._ioCancelAll=a.cancelAll;q._ioNotifyStart=function(a){v.ioPublish&&q.publish&&!1!==a.ioArgs.args.ioPublish&&(C||q.publish("/dojo/io/start"),C+=1,q.publish("/dojo/io/send",[a]))};q._ioWatch=function(c,b,g,e){c.ioArgs.options=c.ioArgs.args;d.mixin(c,{response:c.ioArgs,isValid:function(a){return b(c)},isReady:function(a){return g(c)},handleResponse:function(a){return e(c)}});a(c);y(c)};q._ioAddQueryToUrl=
function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null)};q.xhr=function(a,b,d){var g,e=q._ioSetArgs(b,function(a){g&&g.cancel()},z,A),f=e.ioArgs;"postData"in b?f.query=b.postData:"putData"in b?f.query=b.putData:"rawBody"in b?f.query=b.rawBody:(2<arguments.length&&!d||-1==="POST|PUT".indexOf(a.toUpperCase()))&&q._ioAddQueryToUrl(f);var k={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:f};"undefined"!==typeof b.headers&&(k.headers=
b.headers);"undefined"!==typeof b.contentType&&(k.headers||(k.headers={}),k.headers["Content-Type"]=b.contentType);"undefined"!==typeof f.query&&(k.data=f.query);"undefined"!==typeof b.sync&&(k.sync=b.sync);q._ioNotifyStart(e);try{g=c(f.url,k,!0)}catch(m){return e.cancel(),e}e.ioArgs.xhr=g.response.xhr;g.then(function(){e.resolve(e)}).otherwise(function(a){f.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);e.reject(a)});return e};q.xhrGet=function(a){return q.xhr("GET",
a)};q.rawXhrPost=q.xhrPost=function(a){return q.xhr("POST",a,!0)};q.rawXhrPut=q.xhrPut=function(a){return q.xhr("PUT",a,!0)};q.xhrDelete=function(a){return q.xhr("DELETE",a)};q._isDocumentOk=function(a){return g.checkStatus(a.status)};q._getText=function(a){var c;q.xhrGet({url:a,sync:!0,load:function(a){c=a}});return c};d.mixin(q.xhr,{_xhrObj:q._xhrObj,fieldToObject:b.fieldToObject,formToObject:b.toObject,objectToQuery:s.objectToQuery,formToQuery:b.toQuery,formToJson:b.toJson,queryToObject:s.queryToObject,
contentHandlers:u,_ioSetArgs:q._ioSetArgs,_ioCancelAll:q._ioCancelAll,_ioNotifyStart:q._ioNotifyStart,_ioWatch:q._ioWatch,_ioAddQueryToUrl:q._ioAddQueryToUrl,_isDocumentOk:q._isDocumentOk,_getText:q._getText,get:q.xhrGet,post:q.xhrPost,put:q.xhrPut,del:q.xhrDelete});return q.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(q,t,r){q._name="browser";t.mixin(q,{isBrowser:!0,isFF:r("ff"),isIE:r("ie"),isKhtml:r("khtml"),isWebKit:r("webkit"),isMozilla:r("mozilla"),isMoz:r("mozilla"),
isOpera:r("opera"),isSafari:r("safari"),isChrome:r("chrome"),isMac:r("mac"),isIos:r("ios"),isAndroid:r("android"),isWii:r("wii"),isQuirks:r("quirks"),isAir:r("air")});return r})},"dojo/io-query":function(){define(["./_base/lang"],function(q){var t={};return{objectToQuery:function(r){var s=encodeURIComponent,l=[],b;for(b in r){var p=r[b];if(p!=t[b]){var m=s(b)+"=";if(q.isArray(p))for(var f=0,d=p.length;f<d;++f)l.push(m+s(p[f]));else l.push(m+s(p))}}return l.join("&")},queryToObject:function(r){var s=
decodeURIComponent;r=r.split("&");for(var l={},b,p,m=0,f=r.length;m<f;++m)if(p=r[m],p.length){var d=p.indexOf("=");0>d?(b=s(p),p=""):(b=s(p.slice(0,d)),p=s(p.slice(d+1)));"string"==typeof l[b]&&(l[b]=[l[b]]);q.isArray(l[b])?l[b].push(p):l[b]=p}return l}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(q,t,r,s){var l={fieldToObject:function(b){var l=null;if(b=t.byId(b)){var m=b.name,f=(b.type||"").toLowerCase();if(m&&f&&!b.disabled)if("radio"==f||"checkbox"==
f)b.checked&&(l=b.value);else if(b.multiple)for(l=[],b=[b.firstChild];b.length;)for(m=b.pop();m;m=m.nextSibling)if(1==m.nodeType&&"option"==m.tagName.toLowerCase())m.selected&&l.push(m.value);else{m.nextSibling&&b.push(m.nextSibling);m.firstChild&&b.push(m.firstChild);break}else l=b.value}return l},toObject:function(b){var p={};b=t.byId(b).elements;for(var m=0,f=b.length;m<f;++m){var d=b[m],k=d.name,e=(d.type||"").toLowerCase();if(k&&e&&0>"file|submit|image|reset|button".indexOf(e)&&!d.disabled){var n=
p,a=k,d=l.fieldToObject(d);if(null!==d){var c=n[a];"string"==typeof c?n[a]=[c,d]:q.isArray(c)?c.push(d):n[a]=d}"image"==e&&(p[k+".x"]=p[k+".y"]=p[k].x=p[k].y=0)}}return p},toQuery:function(b){return r.objectToQuery(l.toObject(b))},toJson:function(b,p){return s.stringify(l.toObject(b),null,p?4:0)}};return l})},"dojo/json":function(){define(["./has"],function(q){var t="undefined"!=typeof JSON;q.add("json-parse",t);q.add("json-stringify",t&&'{"a":1}'==JSON.stringify({a:0},function(q,l){return l||1}));
if(q("json-stringify"))return JSON;var r=function(q){return('"'+q.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:q("json-parse")?JSON.parse:function(q,l){if(l&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(q))throw new SyntaxError("Invalid characters in JSON");return eval("("+q+")")},stringify:function(q,l,b){function p(f,d,k){l&&
(f=l(k,f));var e;e=typeof f;if("number"==e)return isFinite(f)?f+"":"null";if("boolean"==e)return f+"";if(null===f)return"null";if("string"==typeof f)return r(f);if("function"==e||"undefined"==e)return m;if("function"==typeof f.toJSON)return p(f.toJSON(k),d,k);if(f instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,c,b){a=f["getUTC"+c]()+(b?1:0);return 10>a?"0"+a:a});if(f.valueOf()!==f)return p(f.valueOf(),d,k);var n=b?d+b:"",a=b?
" ":"",c=b?"\n":"";if(f instanceof Array){var a=f.length,g=[];for(k=0;k<a;k++)e=p(f[k],n,k),"string"!=typeof e&&(e="null"),g.push(c+n+e);return"["+g.join(",")+c+d+"]"}g=[];for(k in f){var v;if(f.hasOwnProperty(k)){if("number"==typeof k)v='"'+k+'"';else if("string"==typeof k)v=r(k);else continue;e=p(f[k],n,k);"string"==typeof e&&g.push(c+n+v+":"+a+e)}}return"{"+g.join(",")+c+d+"}"}var m;"string"==typeof l&&(b=l,l=null);return p(q,"","")}}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),
function(q,t,r,s,l,b,p){var m=function(){},f=Object.freeze||function(){},d=q.Deferred=function(k){function e(b){if(c)throw Error("This deferred has already been resolved");a=b;c=!0;n()}function n(){for(var d;!d&&q;){var g=q;q=q.next;if(d=g.progress==m)c=!1;var e=u?g.error:g.resolved;l("config-useDeferredInstrumentation")&&u&&t.instrumentRejected&&t.instrumentRejected(a,!!e);if(e)try{var f=e(a);f&&"function"===typeof f.then?f.then(b.hitch(g.deferred,"resolve"),b.hitch(g.deferred,"reject"),b.hitch(g.deferred,
"progress")):(e=d&&void 0===f,d&&!e&&(u=f instanceof Error),g.deferred[e&&u?"reject":"resolve"](e?a:f))}catch(k){g.deferred.reject(k)}else u?g.deferred.reject(a):g.deferred.resolve(a)}}var a,c,g,p,u,z,q,y=this.promise=new r;this.isResolved=y.isResolved=function(){return 0==p};this.isRejected=y.isRejected=function(){return 1==p};this.isFulfilled=y.isFulfilled=function(){return 0<=p};this.isCanceled=y.isCanceled=function(){return g};this.resolve=this.callback=function(a){this.fired=p=0;this.results=
[a,null];e(a)};this.reject=this.errback=function(a){u=!0;this.fired=p=1;l("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(a,!!q);e(a);this.results=[null,a]};this.progress=function(a){for(var c=q;c;){var b=c.progress;b&&b(a);c=c.next}};this.addCallbacks=function(a,c){this.then(a,c,m);return this};y.then=this.then=function(a,b,g){var e=g==m?this:new d(y.cancel);a={resolved:a,error:b,progress:g,deferred:e};q?z=z.next=a:q=z=a;c&&n();return e.promise};var C=this;y.cancel=
this.cancel=function(){if(!c){var a=k&&k(C);c||(a instanceof Error||(a=new s(a)),a.log=!1,C.reject(a))}g=!0};f(y)};b.extend(d,{addCallback:function(d){return this.addCallbacks(b.hitch.apply(q,arguments))},addErrback:function(d){return this.addCallbacks(null,b.hitch.apply(q,arguments))},addBoth:function(d){var e=b.hitch.apply(q,arguments);return this.addCallbacks(e,e)},fired:-1});d.when=q.when=p;return d})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise",
"./promise/instrumentation"],function(q,t,r,s,l){var b=Object.freeze||function(){},p=function(b,d,a,c,g){2===d&&k.instrumentRejected&&0===b.length&&k.instrumentRejected(a,!1,c,g);for(g=0;g<b.length;g++)m(b[g],d,a,c)},m=function(b,m,a,c){var g=b[m],l=b.deferred;if(g)try{var p=g(a);if(0===m)"undefined"!==typeof p&&d(l,m,p);else{if(p&&"function"===typeof p.then){b.cancel=p.cancel;p.then(f(l,1),f(l,2),f(l,0));return}d(l,1,p)}}catch(z){d(l,2,z)}else d(l,m,a);2===m&&k.instrumentRejected&&k.instrumentRejected(a,
!!g,c,l.promise)},f=function(b,f){return function(a){d(b,f,a)}},d=function(b,d,a){if(!b.isCanceled())switch(d){case 0:b.progress(a);break;case 1:b.resolve(a);break;case 2:b.reject(a)}},k=function(d){var f=this.promise=new s,a=this,c,g,l,u=!1,z=[];Error.captureStackTrace&&(Error.captureStackTrace(a,k),Error.captureStackTrace(f,k));this.isResolved=f.isResolved=function(){return 1===c};this.isRejected=f.isRejected=function(){return 2===c};this.isFulfilled=f.isFulfilled=function(){return!!c};this.isCanceled=
f.isCanceled=function(){return u};this.progress=function(b,d){if(c){if(!0===d)throw Error("This deferred has already been fulfilled.");return f}p(z,0,b,null,a);return f};this.resolve=function(b,d){if(c){if(!0===d)throw Error("This deferred has already been fulfilled.");return f}p(z,c=1,g=b,null,a);z=null;return f};var q=this.reject=function(b,d){if(c){if(!0===d)throw Error("This deferred has already been fulfilled.");return f}Error.captureStackTrace&&Error.captureStackTrace(l={},q);p(z,c=2,g=b,l,
a);z=null;return f};this.then=f.then=function(a,b,d){var e=[d,a,b];e.cancel=f.cancel;e.deferred=new k(function(a){return e.cancel&&e.cancel(a)});c&&!z?m(e,c,g,l):z.push(e);return e.deferred.promise};this.cancel=f.cancel=function(a,b){if(!c){if(d){var f=d(a);a="undefined"===typeof f?a:f}u=!0;if(!c)return"undefined"===typeof a&&(a=new r),q(a),a;if(2===c&&g===a)return a}else if(!0===b)throw Error("This deferred has already been fulfilled.");};b(f)};k.prototype.toString=function(){return"[object Deferred]"};
l&&l(k);return k})},"dojo/errors/CancelError":function(){define(["./create"],function(q){return q("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(q){return function(t,r,s,l){s=s||Error;var b=function(l){if(s===Error){Error.captureStackTrace&&Error.captureStackTrace(this,b);var m=Error.call(this,l),f;for(f in m)m.hasOwnProperty(f)&&(this[f]=m[f]);this.message=l;this.stack=m.stack}else s.apply(this,arguments);r&&r.apply(this,arguments)};
b.prototype=q.delegate(s.prototype,l);b.prototype.name=t;return b.prototype.constructor=b}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(q){function t(){throw new TypeError("abstract");}return q.extend(function(){},{then:function(q,s,l){t()},cancel:function(q,s){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(q){return this.then(q,q)},otherwise:function(q){return this.then(null,q)},trace:function(){return this},
traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(q,t,r,s){function l(b,d,a){var c="";b&&b.stack&&(c+=b.stack);d&&d.stack&&(c+="\n    ----------------------------------------\n    rejected"+d.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));a&&a.stack&&(c+="\n    ----------------------------------------\n"+a.stack);console.error(b,c)}function b(b,
d,a,c){d||l(b,a,c)}function p(b,n,a,c){n?s.some(f,function(a,c){if(a.error===b)return f.splice(c,1),!0}):s.some(f,function(a){return a.error===b})||f.push({error:b,rejection:a,deferred:c,timestamp:(new Date).getTime()});d||(d=setTimeout(m,k))}function m(){var b=(new Date).getTime(),n=b-k;f=s.filter(f,function(a){return a.timestamp<n?(l(a.error,a.rejection,a.deferred),!1):!0});d=f.length?setTimeout(m,f[0].timestamp+k-b):!1}var f=[],d=!1,k=1E3;return function(d){var f=t("config-useDeferredInstrumentation");
if(f){q.on("resolved",r.hitch(console,"log","resolved"));q.on("rejected",r.hitch(console,"log","rejected"));q.on("progress",r.hitch(console,"log","progress"));var a=[];"string"===typeof f&&(a=f.split(","),f=a.shift());if("report-rejections"===f)d.instrumentRejected=b;else if("report-unhandled-rejections"===f||!0===f||1===f)d.instrumentRejected=p,k=parseInt(a[0],10)||k;else throw Error("Unsupported instrumentation usage <"+f+">");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise",
"../Evented"],function(q,t,r){function s(p){setTimeout(function(){b.apply(l,p)},0)}var l=new r,b=l.emit;l.emit=null;t.prototype.trace=function(){var b=q._toArray(arguments);this.then(function(m){s(["resolved",m].concat(b))},function(m){s(["rejected",m].concat(b))},function(m){s(["progress",m].concat(b))});return this};t.prototype.traceRejected=function(){var b=q._toArray(arguments);this.otherwise(function(m){s(["rejected",m].concat(b))});return this};return l})},"dojo/Evented":function(){define(["./aspect",
"./on"],function(q,t){function r(){}var s=q.after;r.prototype={on:function(l,b){return t.parse(this,l,b,function(l,m){return s(l,"on"+m,b,!0)})},emit:function(l,b){var p=[this];p.push.apply(p,arguments);return t.emit.apply(t,p)}};return r})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(q,t,r){function s(c,b,d,g,k){if(g=b.match(/(.*):(.*)/))return b=g[2],g=g[1],m.selector(g,b).call(k,c,d);r("touch")&&(f.test(b)&&(d=D(d)),r("event-orientationchange")||
"orientationchange"!=b||(b="resize",c=window,d=D(d)));a&&(d=a(d));if(c.addEventListener){var n=b in e,l=n?e[b]:b;c.addEventListener(l,d,n);return{remove:function(){c.removeEventListener(l,d,n)}}}if(u&&c.attachEvent)return u(c,"on"+b,d);throw Error("Target must be an event emitter");}function l(){this.cancelable=!1;this.defaultPrevented=!0}function b(){this.bubbles=!1}var p=window.ScriptEngineMajorVersion;r.add("jscript",p&&p()+ScriptEngineMinorVersion()/10);r.add("event-orientationchange",r("touch")&&
!r("android"));r.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);r.add("event-focusin",function(a,c,b){return"onfocusin"in b||b.addEventListener&&function(){function a(){b=!0}var b=!1;try{var d=c.createElement("input"),g=c.activeElement;d.style.position="fixed";d.addEventListener("focusin",a,!1);c.body.appendChild(d);d.focus();c.body.removeChild(d);d.removeEventListener("focusin",a,!1);g.focus()}catch(e){}return b}()});
var m=function(a,c,b,d){return"function"!=typeof a.on||"function"==typeof c||a.nodeType?m.parse(a,c,b,s,d,this):a.on(c,b)};m.pausable=function(a,c,b,d){var g;a=m(a,c,function(){if(!g)return b.apply(this,arguments)},d);a.pause=function(){g=!0};a.resume=function(){g=!1};return a};m.once=function(a,c,b,d){var g=m(a,c,function(){g.remove();return b.apply(this,arguments)});return g};m.parse=function(a,c,b,d,g,e){if(c.call)return c.call(e,a,b);if(-1<c.indexOf(",")){c=c.split(/\s*,\s*/);for(var f=[],k=0,
m;m=c[k++];)f.push(d(a,m,b,g,e));f.remove=function(){for(var a=0;a<f.length;a++)f[a].remove()};return f}return d(a,c,b,g,e)};var f=/^touch/;m.selector=function(a,c,b){return function(d,g){function e(c){for(f=f&&f.matches?f:t.query;!f.matches(c,a,d);)if(c==d||!1===b||!(c=c.parentNode)||1!=c.nodeType)return;return c}var f="function"==typeof a?{matches:a}:this,k=c.bubble;return k?m(d,k(e),g):m(d,c,function(a){var c=e(a.target);return c&&g.call(c,a)})}};var d=[].slice,k=m.emit=function(a,c,g){var e=d.call(arguments,
2),f="on"+c;if("parentNode"in a){var k=e[0]={},m;for(m in g)k[m]=g[m];k.preventDefault=l;k.stopPropagation=b;k.target=a;k.type=c;g=k}do a[f]&&a[f].apply(a,e);while(g&&g.bubbles&&(a=a.parentNode));return g&&g.cancelable&&g},e=r("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!r("event-stopimmediatepropagation"))var n=function(){this.modified=this.immediatelyStopped=!0},a=function(a){return function(c){if(!c.immediatelyStopped)return c.stopImmediatePropagation=n,a.apply(this,arguments)}};if(r("dom-addeventlistener"))m.emit=
function(a,c,b){if(a.dispatchEvent&&document.createEvent){var d=a.ownerDocument.createEvent("HTMLEvents");d.initEvent(c,!!b.bubbles,!!b.cancelable);for(var g in b)g in d||(d[g]=b[g]);return a.dispatchEvent(d)&&d}return k.apply(m,arguments)};else{m._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{c&&a.type==c.type&&a.srcElement==c.target&&(a=c)}catch(d){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==
a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=z,a.preventDefault=A),a.type){case "keypress":var g="charCode"in a?a.charCode:a.keyCode;10==g?(g=0,a.keyCode=13):13==g||27==g?g=0:3==g&&(g=99);a.charCode=g;g=a;g.keyChar=g.charCode?String.fromCharCode(g.charCode):"";g.charOrCode=g.keyChar||g.keyCode}return a};var c,g=function(a){this.handle=a};g.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var v=function(a){return function(b){b=
m._fixEvent(b,this);var d=a.call(this,b);b.modified&&(c||setTimeout(function(){c=null}),c=b);return d}},u=function(a,c,b){b=v(b);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>r("jscript"))&&!r("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var d=a[c];if(!d||!d.listeners){var e=d,d=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
d.listeners=[];a[c]=d;d.global=this;e&&d.listeners.push(_dojoIEListeners_.push(e)-1)}d.listeners.push(a=d.global._dojoIEListeners_.push(b)-1);return new g(a)}return q.after(a,c,b,!0)},z=function(){this.cancelBubble=!0},A=m._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(r("touch"))var y=function(){},C=window.orientation,D=function(a){return function(c){var b=c.corrected;if(!b){var d=
c.type;try{delete c.type}catch(g){}if(c.type){if(r("mozilla")){var b={},e;for(e in c)b[e]=c[e]}else y.prototype=c,b=new y;b.preventDefault=function(){c.preventDefault()};b.stopPropagation=function(){c.stopPropagation()}}else b=c,b.type=d;c.corrected=b;if("resize"==d){if(C==window.orientation)return null;C=window.orientation;b.type="orientationchange";return a.call(this,b)}"rotation"in b||(b.rotation=0,b.scale=1);var d=b.changedTouches[0],f;for(f in d)delete b[f],b[f]=d[f]}return a.call(this,b)}};
return m})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(q,t){return function(r,s,l,b){var p=r&&"function"===typeof r.then,m=p&&r instanceof t;if(!p)return 1<arguments.length?s?s(r):r:(new q).resolve(r);m||(p=new q(r.cancel),r.then(p.resolve,p.reject,p.progress),r=p.promise);return s||l||b?r.then(s,l,b):r}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(q,t){q.fromJson=function(q){return eval("("+q+")")};q._escapeString=t.stringify;q.toJsonIndentStr=
"\t";q.toJson=function(r,s){return t.stringify(r,function(l,b){if(b){var p=b.__json__||b.json;if("function"==typeof p)return p.call(b)}return b},s&&q.toJsonIndentStr)};return q})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(q,t,r,s,l,b){function p(){for(var b=+new Date,e=0,n;e<d.length&&(n=d[e]);e++){var a=n.response,c=a.options;n.isCanceled&&
n.isCanceled()||n.isValid&&!n.isValid(a)?(d.splice(e--,1),m._onAction&&m._onAction()):n.isReady&&n.isReady(a)?(d.splice(e--,1),n.handleResponse(a),m._onAction&&m._onAction()):n.startTime&&n.startTime+(c.timeout||0)<b&&(d.splice(e--,1),n.cancel(new t("Timeout exceeded",a)),m._onAction&&m._onAction())}m._onInFlight&&m._onInFlight(n);d.length||(clearInterval(f),f=null)}function m(b){b.response.options.timeout&&(b.startTime=+new Date);b.isFulfilled()||(d.push(b),f||(f=setInterval(p,50)),b.response.options.sync&&
p())}var f=null,d=[];m.cancelAll=function(){try{s.forEach(d,function(b){try{b.cancel(new r("All requests canceled."))}catch(d){}})}catch(b){}};l&&b&&l.doc.attachEvent&&b(l.global,"unload",function(){m.cancelAll()});return m})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),function(q,t,r,s,l,b,p,m){function f(b){return k(b)}function d(b){return b.data||b.text}q.deepCopy=
function(b,d){for(var a in d){var c=b[a],g=d[a];c!==g&&(c&&"object"===typeof c&&g&&"object"===typeof g?q.deepCopy(c,g):b[a]=g)}return b};q.deepCreate=function(b,d){d=d||{};var a=p.delegate(b),c,g;for(c in b)(g=b[c])&&"object"===typeof g&&(a[c]=q.deepCreate(g,d[c]));return q.deepCopy(a,d)};var k=Object.freeze||function(b){return b};q.deferred=function(b,n,a,c,g,l){var u=new s(function(a){n&&n(u,b);return a&&(a instanceof t||a instanceof r)?a:new r("Request canceled",b)});u.response=b;u.isValid=a;u.isReady=
c;u.handleResponse=g;a=u.then(f).otherwise(function(a){a.response=b;throw a;});q.notify&&a.then(p.hitch(q.notify,"emit","load"),p.hitch(q.notify,"emit","error"));c=a.then(d);g=new m;for(var z in c)c.hasOwnProperty(z)&&(g[z]=c[z]);g.response=a;k(g);l&&u.then(function(a){l.call(u,a)},function(a){l.call(u,b,a)});u.promise=g;u.then=g.then;return u};q.addCommonMethods=function(d,f){b.forEach(f||["GET","POST","PUT","DELETE"],function(a){d[("DELETE"===a?"DEL":a).toLowerCase()]=function(c,b){b=p.delegate(b||
{});b.method=a;return d(c,b)}})};q.parseArgs=function(b,d,a){var c=d.data,g=d.query;c&&!a&&"object"===typeof c&&(d.data=l.objectToQuery(c));g?("object"===typeof g&&(g=l.objectToQuery(g)),d.preventCache&&(g+=(g?"&":"")+"request.preventCache="+ +new Date)):d.preventCache&&(g="request.preventCache="+ +new Date);b&&g&&(b+=(~b.indexOf("?")?"&":"?")+g);return{url:b,options:d,getHeader:function(a){return null}}};q.checkStatus=function(b){b=b||0;return 200<=b&&300>b||304===b||1223===b||!b}})},"dojo/errors/RequestError":function(){define(["./create"],
function(q){return q("RequestError",function(q,r){this.response=r})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(q,t){return q("RequestTimeoutError",null,t,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(q,t,r,s,l){function b(a,c){var b=a.xhr;a.status=a.xhr.status;a.text=b.responseText;"xml"===a.options.handleAs&&(a.data=b.responseXML);if(!c)try{r(a)}catch(d){c=
d}c?this.reject(c):s.checkStatus(b.status)?this.resolve(a):(c=new q("Unable to load "+a.url+" status: "+b.status,a),this.reject(c))}function p(a){return this.xhr.getResponseHeader(a)}function m(c,g,z){var A=s.parseArgs(c,s.deepCreate(a,g),l("native-formdata")&&g&&g.data&&g.data instanceof FormData);c=A.url;g=A.options;var y,r=s.deferred(A,e,f,d,b,function(){y&&y()}),D=A.xhr=m._create();if(!D)return r.cancel(new q("XHR was not created")),z?r:r.promise;A.getHeader=p;k&&(y=k(D,r,A));var B=g.data,G=!g.sync,
J=g.method;try{D.open(J,c,G,g.user||n,g.password||n);g.withCredentials&&(D.withCredentials=g.withCredentials);var M=g.headers;c="application/x-www-form-urlencoded";if(M)for(var F in M)"content-type"===F.toLowerCase()?c=M[F]:M[F]&&D.setRequestHeader(F,M[F]);c&&!1!==c&&D.setRequestHeader("Content-Type",c);M&&"X-Requested-With"in M||D.setRequestHeader("X-Requested-With","XMLHttpRequest");s.notify&&s.notify.emit("send",A,r.promise.cancel);D.send(B)}catch(H){r.reject(H)}t(r);D=null;return z?r:r.promise}
l.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});l.add("dojo-force-activex-xhr",function(){return l("activex")&&!document.addEventListener&&"file:"===window.location.protocol});l.add("native-xhr2",function(){if(l("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});l.add("native-formdata",function(){return"function"===typeof FormData});var f,d,k,e;l("native-xhr2")?(f=function(a){return!this.isFulfilled()},
e=function(a,c){c.xhr.abort()},k=function(a,c,b){function d(a){c.handleResponse(b)}function g(a){a=new q("Unable to load "+b.url+" status: "+a.target.status,b);c.handleResponse(b,a)}function e(a){a.lengthComputable&&(b.loaded=a.loaded,b.total=a.total,c.progress(b))}a.addEventListener("load",d,!1);a.addEventListener("error",g,!1);a.addEventListener("progress",e,!1);return function(){a.removeEventListener("load",d,!1);a.removeEventListener("error",g,!1);a.removeEventListener("progress",e,!1);a=null}}):
(f=function(a){return a.xhr.readyState},d=function(a){return 4===a.xhr.readyState},e=function(a,c){var b=c.xhr,d=typeof b.abort;"function"!==d&&"object"!==d&&"unknown"!==d||b.abort()});var n,a={data:null,query:null,sync:!1,method:"GET"};m._create=function(){throw Error("XMLHTTP not available");};if(l("native-xhr")&&!l("dojo-force-activex-xhr"))m._create=function(){return new XMLHttpRequest};else if(l("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),m._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(c){try{new ActiveXObject("Microsoft.XMLHTTP"),
m._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(g){}}s.addCommonMethods(m);return m})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(q,t,r,s){function l(b){var d=m[b.options.handleAs];b.data=d?d(b):b.data||b.text;return b}s.add("activex","undefined"!==typeof ActiveXObject);s.add("dom-parser",function(b){return"DOMParser"in b});var b;if(s("activex")){var p=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0",
"MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];b=function(b){var d=b.data;d&&s("dom-qsa2.1")&&!d.querySelectorAll&&s("dom-parser")&&(d=(new DOMParser).parseFromString(b.text,"application/xml"));if(!d||!d.documentElement){var k=b.text;r.some(p,function(b){try{var f=new ActiveXObject(b);f.async=!1;f.loadXML(k);d=f}catch(a){return!1}return!0})}return d}}var m={javascript:function(b){return t.eval(b.text||"")},json:function(b){return q.parse(b.text||null)},xml:b};l.register=function(b,d){m[b]=d};return l})},
"dojo/selector/_loader":function(){define(["../has","require"],function(q,t){var r=document.createElement("div");q.add("dom-qsa2.1",!!r.querySelectorAll);q.add("dom-qsa3",function(){try{return r.innerHTML="<p class='TEST'></p>",1==r.querySelectorAll(".TEST:empty").length}catch(l){}});var s;return{load:function(l,b,p,m){m=t;l="default"==l?q("config-selectorEngine")||"css3":l;l="css2"==l||"lite"==l?"./lite":"css2.1"==l?q("dom-qsa2.1")?"./lite":"./acme":"css3"==l?q("dom-qsa3")?"./lite":"./acme":"acme"==
l?"./acme":(m=b)&&l;if("?"==l.charAt(l.length-1)){l=l.substring(0,l.length-1);var f=!0}if(f&&(q("dom-compliant-qsa")||s))return p(s);m([l],function(b){"./lite"!=l&&(s=b);p(b)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(q,t,r,s,l){var b=s.trim,p=r.forEach,m="BackCompat"==l.doc.compatMode,f=!1,d=function(){return!0},k=function(a){a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var c=function(c,d){return b(a.slice(c,
d))},d=[],g=-1,e=-1,k=-1,m=-1,n=-1,l=-1,p=-1,v,u="",y="",z,q=0,A=a.length,s=null,r=null,B=function(){0<=l&&(s.id=c(l,q).replace(/\\/g,""),l=-1);if(0<=p){var a=p==q?null:c(p,q);s[0>">~+".indexOf(a)?"tag":"oper"]=a;p=-1}0<=n&&(s.classes.push(c(n+1,q).replace(/\\/g,"")),n=-1)};u=y,y=a.charAt(q),q<A;q++)"\\"!=u&&(s||(z=q,s={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return f?this.otag:this.tag}},p=q),v?y==v&&(v=null):"'"==y||'"'==y?v=y:0<=g?"]"==y?(r.attr?r.matchFor=
c(k||g+1,q):r.attr=c(g+1,q),!(g=r.matchFor)||'"'!=g.charAt(0)&&"'"!=g.charAt(0)||(r.matchFor=g.slice(1,-1)),r.matchFor&&(r.matchFor=r.matchFor.replace(/\\/g,"")),s.attrs.push(r),r=null,g=k=-1):"="==y&&(k=0<="|~^$*".indexOf(u)?u:"",r.type=k+y,r.attr=c(g+1,q-k.length),k=q+1):0<=e?")"==y&&(0<=m&&(r.value=c(e+1,q)),m=e=-1):"#"==y?(B(),l=q+1):"."==y?(B(),n=q):":"==y?(B(),m=q):"["==y?(B(),g=q,r={}):"("==y?(0<=m&&(r={name:c(m+1,q),value:null},s.pseudos.push(r)),e=q):" "==y&&u!=y&&(B(),0<=m&&s.pseudos.push({name:c(m+
1,q)}),s.loops=s.pseudos.length||s.attrs.length||s.classes.length,s.oquery=s.query=c(z,q),s.otag=s.tag=s.oper?null:s.tag||"*",s.tag&&(s.tag=s.tag.toUpperCase()),d.length&&d[d.length-1].oper&&(s.infixOper=d.pop(),s.query=s.infixOper.query+" "+s.query),d.push(s),s=null));return d},e=function(a,c){return a?c?function(){return a.apply(window,arguments)&&c.apply(window,arguments)}:a:c},n=function(a,c){var b=c||[];a&&b.push(a);return b},a=function(a){return 1==a.nodeType},c=function(a,c){return a?"class"==
c?a.className||"":"for"==c?a.htmlFor||"":"style"==c?a.style.cssText||"":(f?a.getAttribute(c):a.getAttribute(c,2))||"":""},g={"*=":function(a,b){return function(d){return 0<=c(d,a).indexOf(b)}},"^=":function(a,b){return function(d){return 0==c(d,a).indexOf(b)}},"$=":function(a,b){return function(d){d=" "+c(d,a);var g=d.lastIndexOf(b);return-1<g&&g==d.length-b.length}},"~=":function(a,b){var d=" "+b+" ";return function(b){return 0<=(" "+c(b,a)+" ").indexOf(d)}},"|=":function(a,b){var d=b+"-";return function(g){g=
c(g,a);return g==b||0==g.indexOf(d)}},"=":function(a,b){return function(d){return c(d,a)==b}}},v="undefined"==typeof l.doc.firstChild.nextElementSibling,u=v?"nextSibling":"nextElementSibling",z=v?"previousSibling":"previousElementSibling",A=v?a:d,y=function(a){for(;a=a[z];)if(A(a))return!1;return!0},C=function(a){for(;a=a[u];)if(A(a))return!1;return!0},D=function(a){var c=a.parentNode,c=7!=c.nodeType?c:c.nextSibling,b=0,d=c.children||c.childNodes,g=a._i||a.getAttribute("_i")||-1,e=c._l||("undefined"!==
typeof c.getAttribute?c.getAttribute("_l"):-1);if(!d)return-1;d=d.length;if(e==d&&0<=g&&0<=e)return g;t("ie")&&"undefined"!==typeof c.setAttribute?c.setAttribute("_l",d):c._l=d;g=-1;for(c=c.firstElementChild||c.firstChild;c;c=c[u])A(c)&&(t("ie")?c.setAttribute("_i",++b):c._i=++b,a===c&&(g=b));return g},B=function(a){return!(D(a)%2)},G=function(a){return D(a)%2},J={checked:function(a,c){return function(a){return!("checked"in a?!a.checked:!a.selected)}},disabled:function(a,c){return function(a){return a.disabled}},
enabled:function(a,c){return function(a){return!a.disabled}},"first-child":function(){return y},"last-child":function(){return C},"only-child":function(a,c){return function(a){return y(a)&&C(a)}},empty:function(a,c){return function(a){var c=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var b=c[a].nodeType;if(1===b||3==b)return!1}return!0}},contains:function(a,c){var b=c.charAt(0);if('"'==b||"'"==b)c=c.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(c)}},not:function(a,c){var b=k(c)[0],
d={el:1};"*"!=b.tag&&(d.tag=1);b.classes.length||(d.classes=1);var g=F(b,d);return function(a){return!g(a)}},"nth-child":function(a,c){var b=parseInt;if("odd"==c)return G;if("even"==c)return B;if(-1!=c.indexOf("n")){var d=c.split("n",2),g=d[0]?"-"==d[0]?-1:b(d[0]):1,e=d[1]?b(d[1]):0,f=0,k=-1;0<g?0>e?e=e%g&&g+e%g:0<e&&(e>=g&&(f=e-e%g),e%=g):0>g&&(g*=-1,0<e&&(k=e,e%=g));if(0<g)return function(a){a=D(a);return a>=f&&(0>k||a<=k)&&a%g==e};c=e}var m=b(c);return function(a){return D(a)==m}}},M=9>t("ie")||
9==t("ie")&&t("quirks")?function(a){var c=a.toLowerCase();"class"==c&&(a="className");return function(b){return f?b.getAttribute(a):b[a]||b[c]}}:function(a){return function(c){return c&&c.getAttribute&&c.hasAttribute(a)}},F=function(c,b){if(!c)return d;b=b||{};var k=null;"el"in b||(k=e(k,a));"tag"in b||"*"!=c.tag&&(k=e(k,function(a){return a&&(f?a.tagName:a.tagName.toUpperCase())==c.getTag()}));"classes"in b||p(c.classes,function(a,c,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");k=e(k,function(a){return d.test(a.className)});
k.count=c});"pseudos"in b||p(c.pseudos,function(a){var c=a.name;J[c]&&(k=e(k,J[c](c,a.value)))});"attrs"in b||p(c.attrs,function(a){var c,b=a.attr;a.type&&g[a.type]?c=g[a.type](b,a.matchFor):b.length&&(c=M(b));c&&(k=e(k,c))});"id"in b||c.id&&(k=e(k,function(a){return!!a&&a.id==c.id}));k||"default"in b||(k=d);return k},H=function(c){return function(b,d,g){for(;b=b[u];)if(!v||a(b)){g&&!da(b,g)||!c(b)||d.push(b);break}return d}},S=function(a){return function(c,b,d){for(c=c[u];c;){if(A(c)){if(d&&!da(c,
d))break;a(c)&&b.push(c)}c=c[u]}return b}},K=function(a){a=a||d;return function(c,b,d){for(var g=0,e=c.children||c.childNodes;c=e[g++];)A(c)&&(!d||da(c,d))&&a(c,g)&&b.push(c);return b}},x={},L=function(a){var c=x[a.query];if(c)return c;var b=a.infixOper,b=b?b.oper:"",g=F(a,{el:1}),e="*"==a.tag,f=l.doc.getElementsByClassName;if(b)f={el:1},e&&(f.tag=1),g=F(a,f),"+"==b?c=H(g):"~"==b?c=S(g):">"==b&&(c=K(g));else if(a.id)g=!a.loops&&e?d:F(a,{el:1,id:1}),c=function(c,b){var d=q.byId(a.id,c.ownerDocument||
c);if(d&&g(d)){if(9==c.nodeType)return n(d,b);for(var e=d.parentNode;e&&e!=c;)e=e.parentNode;if(e)return n(d,b)}};else if(f&&/\{\s*\[native code\]\s*\}/.test(String(f))&&a.classes.length&&!m)var g=F(a,{el:1,classes:1,id:1}),k=a.classes.join(" "),c=function(a,c,b){c=n(0,c);for(var d,e=0,f=a.getElementsByClassName(k);d=f[e++];)g(d,a)&&da(d,b)&&c.push(d);return c};else e||a.loops?(g=F(a,{el:1,tag:1,id:1}),c=function(c,b,d){b=n(0,b);for(var e,f=0,k=(e=a.getTag())?c.getElementsByTagName(e):[];e=k[f++];)g(e,
c)&&da(e,d)&&b.push(e);return b}):c=function(c,b,d){b=n(0,b);for(var g=0,e=a.getTag(),e=e?c.getElementsByTagName(e):[];c=e[g++];)da(c,d)&&b.push(c);return b};return x[a.query]=c},I={},T={},N=function(a){var c=k(b(a));if(1==c.length){var d=L(c[0]);return function(a){if(a=d(a,[]))a.nozip=!0;return a}}return function(a){a=n(a);for(var b,d,g=c.length,e,f,k=0;k<g;k++){f=[];b=c[k];d=a.length-1;0<d&&(e={},f.nozip=!0);d=L(b);for(var m=0;b=a[m];m++)d(b,f,e);if(!f.length)break;a=f}return f}},W=t("ie")?"commentStrip":
"nozip",Z=!!l.doc.querySelectorAll,V=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,Q=function(a,c,b,d){return b?(c?c+" ":"")+b+(d?" "+d:""):a},R=/([^[]*)([^\]]*])?/g,O=function(a,c,b){return c.replace(V,Q)+(b||"")},ca=function(a,c){a=a.replace(R,O);if(Z){var b=T[a];if(b&&!c)return b}if(b=I[a])return b;var b=a.charAt(0),d=-1==a.indexOf(" ");0<=a.indexOf("#")&&d&&(c=!0);if(!Z||c||-1!=">~+".indexOf(b)||t("ie")&&-1!=a.indexOf(":")||m&&0<=a.indexOf(".")||-1!=a.indexOf(":contains")||-1!=a.indexOf(":checked")||
-1!=a.indexOf("|=")){var g=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return I[a]=2>g.length?N(a):function(a){for(var c=0,b=[],d;d=g[c++];)b=b.concat(N(d)(a));return b}}var e=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return T[a]=function(c){try{if(9!=c.nodeType&&!d)throw"";var b=c.querySelectorAll(e);b[W]=!0;return b}catch(g){return ca(a,!0)(c)}}},aa=0,ma=t("ie")?function(a){return f?a.getAttribute("_uid")||a.setAttribute("_uid",++aa)||aa:a.uniqueID}:function(a){return a._uid||
(a._uid=++aa)},da=function(a,c){if(!c)return 1;var b=ma(a);return c[b]?0:c[b]=1},qa=function(c){if(c&&c.nozip)return c;if(!c||!c.length)return[];if(2>c.length)return[c[0]];var b=[];aa++;var d,g;if(t("ie")&&f){var e=aa+"";for(d=0;d<c.length;d++)(g=c[d])&&g.getAttribute("_zipIdx")!=e&&(b.push(g),g.setAttribute("_zipIdx",e))}else if(t("ie")&&c.commentStrip)try{for(d=0;d<c.length;d++)(g=c[d])&&a(g)&&b.push(g)}catch(k){}else for(d=0;d<c.length;d++)(g=c[d])&&g._zipIdx!=aa&&(b.push(g),g._zipIdx=aa);return b},
la=function(a,c){c=c||l.doc;f="div"===(c.ownerDocument||c).createElement("div").tagName;var b=ca(a)(c);return b&&b.nozip?b:qa(b)};la.filter=function(a,c,b){for(var d=[],g=k(c),g=1!=g.length||/[^\w#\.]/.test(c)?function(a){return-1!=r.indexOf(la(c,q.byId(b)),a)}:F(g[0]),e=0,f;f=a[e];e++)g(f)&&d.push(f);return d};return la})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(q,t){var r=document.createElement("div"),s=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||
r.msMatchesSelector||r.oMatchesSelector,l=r.querySelectorAll,b=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;q.add("dom-matches-selector",!!s);q.add("dom-qsa",!!l);var p=function(b,e){if(d&&-1<b.indexOf(","))return d(b,e);var n=e?e.ownerDocument||e:t.doc||document,a=(l?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(b);e=e||n;if(a){if(a[2]){var c=t.byId?t.byId(a[2],n):n.getElementById(a[2]);if(!c||a[1]&&a[1]!=c.tagName.toLowerCase())return[];
if(e!=n)for(n=c;n!=e;)if(n=n.parentNode,!n)return[];return a[3]?p(a[3],c):[c]}if(a[3]&&e.getElementsByClassName)return e.getElementsByClassName(a[4]);if(a[5])if(c=e.getElementsByTagName(a[5]),a[4]||a[6])b=(a[4]||"")+a[6];else return c}if(l)return 1===e.nodeType&&"object"!==e.nodeName.toLowerCase()?m(e,b,e.querySelectorAll):e.querySelectorAll(b);c||(c=e.getElementsByTagName("*"));for(var a=[],n=0,g=c.length;n<g;n++){var v=c[n];1==v.nodeType&&f(v,b,e)&&a.push(v)}return a},m=function(d,e,f){var a=d,
c=d.getAttribute("id"),g=c||"__dojo__",m=d.parentNode,l=/^\s*[+~]/.test(e);if(l&&!m)return[];c?g=g.replace(/'/g,"\\$&"):d.setAttribute("id",g);l&&m&&(d=d.parentNode);e=e.match(b);for(m=0;m<e.length;m++)e[m]="[id='"+g+"'] "+e[m];e=e.join(",");try{return f.call(d,e)}finally{c||a.removeAttribute("id")}};if(!q("dom-matches-selector"))var f=function(){function b(a,c,d){var g=c.charAt(0);if('"'==g||"'"==g)c=c.slice(1,-1);c=c.replace(/\\/g,"");var e=m[d||""];return function(b){return(b=b.getAttribute(a))&&
e(b,c)}}function d(a){return function(c,b){for(;(c=c.parentNode)!=b;)if(a(c,b))return!0}}function f(a){return function(c,b){c=c.parentNode;return a?c!=b&&a(c,b):c==b}}function a(a,c){return a?function(b,d){return c(b)&&a(b,d)}:c}var c="div"==r.tagName?"toLowerCase":"toUpperCase",g={"":function(a){a=a[c]();return function(c){return c.tagName==a}},".":function(a){var c=" "+a+" ";return function(b){return-1<b.className.indexOf(a)&&-1<(" "+b.className+" ").indexOf(c)}},"#":function(a){return function(c){return c.id==
a}}},m={"^=":function(a,c){return 0==a.indexOf(c)},"*=":function(a,c){return-1<a.indexOf(c)},"$=":function(a,c){return a.substring(a.length-c.length,a.length)==c},"~=":function(a,c){return-1<(" "+a+" ").indexOf(" "+c+" ")},"|=":function(a,c){return 0==(a+"-").indexOf(c+"-")},"=":function(a,c){return a==c},"":function(a,c){return!0}},l={};return function(c,m,p){var v=l[m];if(!v){if(m.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,
function(c,m,l,p,u,y,z){p?v=a(v,g[l||""](p.replace(/\\/g,""))):m?v=(" "==m?d:f)(v):u&&(v=a(v,b(u,z,y)));return""}))throw Error("Syntax error in query");if(!v)return!0;l[m]=v}return v(c,p)}}();if(!q("dom-qsa"))var d=function(d,e){for(var f=d.match(b),a=[],c=0;c<f.length;c++){d=new String(f[c].replace(/\s*$/,""));d.indexOf=escape;for(var g=p(d,e),m=0,l=g.length;m<l;m++){var z=g[m];a[z.sourceIndex]=z}}f=[];for(c in a)f.push(a[c]);return f};p.match=s?function(b,d,f){return f&&9!=f.nodeType?m(f,d,function(a){return s.call(b,
a)}):s.call(b,d)}:f;return p})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(q,t,r){return q("dojo.dnd.Target",r,{constructor:function(){this.isSource=!1;t.remove(this.node,"dojoDndSource")}})})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(q,t,r){function s(a,c){throw Error("declare"+(c?" "+c:"")+": "+a);}function l(a,c,b){var d,g,e,f,k,m,n,l=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=c,c=b);b=0;
f=a.callee;(d=d||f.nom)||s("can't deduce a name to call inherited()",this.declaredClass);k=this.constructor._meta;e=k.bases;n=l.p;if(d!=B){if(l.c!==f&&(n=0,m=e[0],k=m._meta,k.hidden[d]!==f)){(g=k.chains)&&"string"==typeof g[d]&&s("calling chained method with inherited: "+d,this.declaredClass);do if(k=m._meta,g=m.prototype,k&&(g[d]===f&&g.hasOwnProperty(d)||k.hidden[d]===f))break;while(m=e[++n]);n=m?n:-1}if(m=e[++n])if(g=m.prototype,m._meta&&g.hasOwnProperty(d))b=g[d];else{f=A[d];do if(g=m.prototype,
(b=g[d])&&(m._meta?g.hasOwnProperty(d):b!==f))break;while(m=e[++n])}b=m&&b||A[d]}else{if(l.c!==f&&(n=0,(k=e[0]._meta)&&k.ctor!==f)){for((g=k.chains)&&"manual"===g.constructor||s("calling chained constructor with inherited",this.declaredClass);(m=e[++n])&&(!(k=m._meta)||k.ctor!==f););n=m?n:-1}for(;(m=e[++n])&&!(b=(k=m._meta)?k.ctor:m););b=m&&b}l.c=b;l.p=n;if(b)return!0===c?b:b.apply(this,c||a)}function b(a,c){return"string"==typeof a?this.__inherited(a,c,!0):this.__inherited(a,!0)}function p(a,c,b){var d=
this.getInherited(a,c);if(d)return d.apply(this,b||c||a)}function m(a){for(var c=this.constructor._meta.bases,b=0,d=c.length;b<d;++b)if(c[b]===a)return!0;return this instanceof a}function f(a,c){for(var b in c)b!=B&&c.hasOwnProperty(b)&&(a[b]=c[b]);if(t("bug-for-in-skips-shadowed"))for(var d=r._extraNames,g=d.length;g;)b=d[--g],b!=B&&c.hasOwnProperty(b)&&(a[b]=c[b])}function d(a){u.safeMixin(this.prototype,a);return this}function k(a,c){return u([this].concat(a),c||{})}function e(a,c){return function(){var b=
arguments,d=b,g=b[0],e,f;f=a.length;var k;if(!(this instanceof b.callee))return v(b);if(c&&(g&&g.preamble||this.preamble))for(k=Array(a.length),k[0]=b,e=0;;){(g=b[0])&&(g=g.preamble)&&(b=g.apply(this,b)||b);g=a[e].prototype;(g=g.hasOwnProperty("preamble")&&g.preamble)&&(b=g.apply(this,b)||b);if(++e==f)break;k[e]=b}for(e=f-1;0<=e;--e)g=a[e],(g=(f=g._meta)?f.ctor:g)&&g.apply(this,k?k[e]:b);(g=this.postscript)&&g.apply(this,d)}}function n(a,c){return function(){var b=arguments,d=b,g=b[0];if(!(this instanceof
b.callee))return v(b);c&&(g&&(g=g.preamble)&&(d=g.apply(this,d)||d),(g=this.preamble)&&g.apply(this,d));a&&a.apply(this,b);(g=this.postscript)&&g.apply(this,b)}}function a(a){return function(){var c=arguments,b=0,d,g;if(!(this instanceof c.callee))return v(c);for(;d=a[b];++b)if(d=(g=d._meta)?g.ctor:d){d.apply(this,c);break}(d=this.postscript)&&d.apply(this,c)}}function c(a,c,b){return function(){var d,g,e=0,f=1;b&&(e=c.length-1,f=-1);for(;d=c[e];e+=f)g=d._meta,(d=(g?g.hidden:d.prototype)[a])&&d.apply(this,
arguments)}}function g(a){C.prototype=a.prototype;a=new C;C.prototype=null;return a}function v(a){var c=a.callee,b=g(c);c.apply(b,a);return b}function u(p,v,q){"string"!=typeof p&&(q=v,v=p,p="");q=q||{};var C,t,K,x,L,I,T,N=1,W=v;if("[object Array]"==y.call(v)){N=p;K=[];x=[{cls:0,refs:[]}];I={};for(var Z=1,V=v.length,Q=0,R,O,ca,aa;Q<V;++Q){(R=v[Q])?"[object Function]"!=y.call(R)&&s("mixin #"+Q+" is not a callable constructor.",N):s("mixin #"+Q+" is unknown. Did you use dojo.require to pull it in?",
N);O=R._meta?R._meta.bases:[R];ca=0;for(R=O.length-1;0<=R;--R)aa=O[R].prototype,aa.hasOwnProperty("declaredClass")||(aa.declaredClass="uniqName_"+D++),aa=aa.declaredClass,I.hasOwnProperty(aa)||(I[aa]={count:0,refs:[],cls:O[R]},++Z),aa=I[aa],ca&&ca!==aa&&(aa.refs.push(ca),++ca.count),ca=aa;++ca.count;x[0].refs.push(ca)}for(;x.length;){ca=x.pop();K.push(ca.cls);for(--Z;t=ca.refs,1==t.length;){ca=t[0];if(!ca||--ca.count){ca=0;break}K.push(ca.cls);--Z}if(ca)for(Q=0,V=t.length;Q<V;++Q)ca=t[Q],--ca.count||
x.push(ca)}Z&&s("can't build consistent linearization",N);R=v[0];K[0]=R?R._meta&&R===K[K.length-R._meta.bases.length]?R._meta.bases.length:1:0;I=K;K=I[0];N=I.length-K;v=I[N]}else I=[0],v?"[object Function]"==y.call(v)?(K=v._meta,I=I.concat(K?K.bases:v)):s("base class is not a callable constructor.",p):null!==v&&s("unknown base class. Did you use dojo.require to pull it in?",p);if(v)for(t=N-1;;--t){C=g(v);if(!t)break;K=I[t];(K._meta?f:z)(C,K.prototype);x=new Function;x.superclass=v;x.prototype=C;v=
C.constructor=x}else C={};u.safeMixin(C,q);K=q.constructor;K!==A.constructor&&(K.nom=B,C.constructor=K);for(t=N-1;t;--t)(K=I[t]._meta)&&K.chains&&(T=z(T||{},K.chains));C["-chains-"]&&(T=z(T||{},C["-chains-"]));K=!T||!T.hasOwnProperty(B);I[0]=x=T&&"manual"===T.constructor?a(I):1==I.length?n(q.constructor,K):e(I,K);x._meta={bases:I,hidden:q,chains:T,parents:W,ctor:q.constructor};x.superclass=v&&v.prototype;x.extend=d;x.createSubclass=k;x.prototype=C;C.constructor=x;C.getInherited=b;C.isInstanceOf=m;
C.inherited=G;C.__inherited=l;p&&(C.declaredClass=p,r.setObject(p,x));if(T)for(L in T)C[L]&&"string"==typeof T[L]&&L!=B&&(K=C[L]=c(L,I,"after"===T[L]),K.nom=L);return x}var z=r.mixin,A=Object.prototype,y=A.toString,C=new Function,D=0,B="constructor",G=q.config.isDebug?p:l;q.safeMixin=u.safeMixin=function(a,c){var b,d;for(b in c)d=c[b],d===A[b]&&b in A||b==B||("[object Function]"==y.call(d)&&(d.nom=b),a[b]=d);if(t("bug-for-in-skips-shadowed"))for(var g=r._extraNames,e=g.length;e;)b=g[--e],d=c[b],d===
A[b]&&b in A||b==B||("[object Function]"==y.call(d)&&(d.nom=b),a[b]=d);return a};return q.declare=u})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(q,t,r){function s(f){if("string"==typeof f||f instanceof String){if(f&&!b.test(f))return p[0]=f,p;f=f.split(b);f.length&&!f[0]&&f.shift();f.length&&!f[f.length-1]&&f.pop();return f}return f?t.filter(f,function(b){return b}):[]}var l,b=/\s+/,p=[""],m={};return l={contains:function(b,d){return 0<=(" "+r.byId(b).className+
" ").indexOf(" "+d+" ")},add:function(b,d){b=r.byId(b);d=s(d);var k=b.className,e,k=k?" "+k+" ":" ";e=k.length;for(var m=0,a=d.length,c;m<a;++m)(c=d[m])&&0>k.indexOf(" "+c+" ")&&(k+=c+" ");e<k.length&&(b.className=k.substr(1,k.length-2))},remove:function(b,d){b=r.byId(b);var k;if(void 0!==d){d=s(d);k=" "+b.className+" ";for(var e=0,m=d.length;e<m;++e)k=k.replace(" "+d[e]+" "," ");k=q.trim(k)}else k="";b.className!=k&&(b.className=k)},replace:function(b,d,k){b=r.byId(b);m.className=b.className;l.remove(m,
k);l.add(m,d);b.className!==m.className&&(b.className=m.className)},toggle:function(b,d,k){b=r.byId(b);if(void 0===k){d=s(d);for(var e=0,m=d.length,a;e<m;++e)a=d[e],l[l.contains(b,a)?"remove":"add"](b,a)}else l[k?"add":"remove"](b,d);return k}}})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e){r.isAsync||m(0,function(){require(["dojo/dnd/AutoSource",
"dojo/dnd/Target"])});var n=t("dojo.dnd.Source",k,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,c){s.mixin(this,s.mixin({},c));var b=this.accept;if(b.length){this.accept={};for(var d=0;d<b.length;++d)this.accept[b[d]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&l.add(this.node,
"dojoDndSource");this.targetState="";this.accept&&l.add(this.node,"dojoDndTarget");this.horizontal&&l.add(this.node,"dojoDndHorizontal");this.topics=[f.subscribe("/dnd/source/over",s.hitch(this,"onDndSourceOver")),f.subscribe("/dnd/start",s.hitch(this,"onDndStart")),f.subscribe("/dnd/drop",s.hitch(this,"onDndDrop")),f.subscribe("/dnd/cancel",s.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,c){if(this==a)return!this.copyOnly||this.selfAccept;for(var b=0;b<c.length;++b){for(var d=a.getItem(c[b].id).type,
e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,c){if(a)return!0;2>arguments.length&&(c=this==e.manager().target);if(c){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){n.superclass.destroy.call(this);q.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){n.superclass.onMouseMove.call(this,a);var c=e.manager();
if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var g=this.getSelectedNodes();g.length&&c.startDrag(this,g,this.copyState(d.getCopyKeyState(a),!0))}this.isDragging&&(g=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=b.position(this.current,!0)),g=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==b.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/
2),this.current!=this.targetAnchor||g!=this.before)&&(this._markTargetAnchor(g),c.canDrop(!this.current||c.source!=this||!(this.current.id in this.selection)))}},onMouseDown:function(a){this.mouseDown||!this._legalMouseDown(a)||this.skipForm&&d.isFormElement(a)||(this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,n.superclass.onMouseDown.call(this,a))},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,n.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=
!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=e.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,c,b){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?b?"Copied":"Moved":"");c=this.accept&&this.checkAcceptance(a,c);this._changeState("Target",c?"":"Disabled");this==a&&e.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,c,b,d){if(this==
d)this.onDrop(a,c,b);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,c,b){if(this!=a)this.onDropExternal(a,c,b);else this.onDropInternal(c,b)},onDropExternal:function(a,c,b){var e=this._normalizedCreator;this._normalizedCreator=this.creator?function(c,b){return e.call(this,a.getItem(c.id).data,b)}:b?function(c){var b=
a.getItem(c.id);c=c.cloneNode(!0);c.id=d.getUniqueId();return{node:c,data:b.data,type:b.type}}:function(c){var b=a.getItem(c.id);a.delItem(c.id);return{node:c,data:b.data,type:b.type}};this.selectNone();b||this.creator||a.selectNone();this.insertNodes(!0,c,this.before,this.current);!b&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=e},onDropInternal:function(a,c){var b=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(c)this._normalizedCreator=this.creator?
function(a,c){return b.call(this,this.getItem(a.id).data,c)}:function(a){var c=this.getItem(a.id);a=a.cloneNode(!0);a.id=d.getUniqueId();return{node:a,data:c.data,type:c.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var c=this.getItem(a.id);return{node:a,data:c.data,type:c.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=b}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){n.superclass.onOverEvent.call(this);
e.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){n.superclass.onOutEvent.call(this);e.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(this.current!=this.targetAnchor||this.before!=a)this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&
this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!p.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(l.contains(a,"dojoDndHandle"))return!0;
if(l.contains(a,"dojoDndItem")||l.contains(a,"dojoDndIgnore"))break}return!1}});return n})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(q,t,r,s,l){function b(l,m){var f=function(b,f){return t(b,l,function(e){if(m)return m(e,f);if(!s.isDescendant(e.relatedTarget,b))return f.call(this,e)})};f.bubble=function(d){return b(l,function(b,e){var f=d(b.target),a=b.relatedTarget;if(f&&f!=(a&&1==a.nodeType&&d(a)))return e.call(f,b)})};return f}r.add("dom-quirks",
l.doc&&"BackCompat"==l.doc.compatMode);r.add("events-mouseenter",l.doc&&"onmouseenter"in l.doc.createElement("div"));r.add("events-mousewheel",l.doc&&"onmousewheel"in l.doc);l=r("dom-quirks")&&r("ie")||!r("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(b,m){return b.button&m},isLeft:function(b){return b.button&1},isMiddle:function(b){return b.button&4},isRight:function(b){return b.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,m){return b.button==m},isLeft:function(b){return 0==
b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};q.mouseButtons=l;q=r("events-mousewheel")?"mousewheel":function(b,m){return t(b,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;m.call(this,b)})};return{_eventHandler:b,enter:b("mouseover"),leave:b("mouseout"),wheel:q,isLeft:l.isLeft,isMiddle:l.isMiddle,isRight:l.isRight}})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(q,t,r,s,l){var b=0,p=[],
m=0;t=function(){b=1;q._postLoad=q.config.afterOnLoad=!0;f()};var f=function(){if(!m){for(m=1;b&&(!s||0==s._Q.length)&&(r.idle?r.idle():1)&&p.length;){var d=p.shift();try{d()}catch(f){if(f.info=f.message,r.signal)r.signal("error",f);else throw f;}}m=0}};r.on&&r.on("idle",f);s&&(s._onQEmpty=f);var d=q.ready=q.addOnLoad=function(b,d,a){var c=l._toArray(arguments);"number"!=typeof b?(a=d,d=b,b=1E3):c.shift();a=a?l.hitch.apply(q,c):function(){d()};a.priority=b;for(c=0;c<p.length&&b>=p[c].priority;c++);
p.splice(c,0,a);f()},k=q.config.addOnLoad;if(k)d[l.isArray(k)?"apply":"call"](q,k);q.config.parseOnLoad&&!q.isAsync&&d(99,function(){q.parser||(q.deprecated("Add explicit require(['dojo/parser']);","","2.0"),r(["dojo/parser"]))});s?s(t):t();return d})},"dojo/domReady":function(){define(["./has"],function(q){function t(a){f.push(a);m&&r()}function r(){if(!d){for(d=!0;f.length;)try{f.shift()(l)}catch(a){}d=!1;t._onQEmpty()}}var s=this,l=document,b={loaded:1,complete:1},p="string"!=typeof l.readyState,
m=!!b[l.readyState],f=[],d;t.load=function(a,b,c){t(c)};t._Q=f;t._onQEmpty=function(){};p&&(l.readyState="loading");if(!m){var k=[],e=function(a){a=a||s.event;m||"readystatechange"==a.type&&!b[l.readyState]||(p&&(l.readyState="complete"),m=1,r())},n=function(a,b){a.addEventListener(b,e,!1);f.push(function(){a.removeEventListener(b,e,!1)})};if(!q("dom-addeventlistener")){var n=function(a,b){b="on"+b;a.attachEvent(b,e);f.push(function(){a.detachEvent(b,e)})},a=l.createElement("div");try{a.doScroll&&
null===s.frameElement&&k.push(function(){try{return a.doScroll("left"),1}catch(b){}})}catch(c){}}n(l,"DOMContentLoaded");n(s,"load");"onreadystatechange"in l?n(l,"readystatechange"):p||k.push(function(){return b[l.readyState]});if(k.length){var g=function(){if(!m){for(var a=k.length;a--;)if(k[a]()){e("poller");return}setTimeout(g,30)}};g()}}return t})},"dojo/topic":function(){define(["./Evented"],function(q){var t=new q;return{publish:function(q,s){return t.emit.apply(t,arguments)},subscribe:function(q,
s){return t.on.apply(t,arguments)}}})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(q,t,r,s){var l=r.getObject("dojo.dnd",!0);l.getCopyKeyState=function(b){return b[q("mac")?"metaKey":"ctrlKey"]};l._uniqueId=0;l.getUniqueId=function(){var b;do b=t._scopeName+"Unique"+ ++l._uniqueId;while(s.byId(b));return b};l._empty={};l.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+
b.tagName.toLowerCase()+" ")};return l})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e){var n=t("dojo.dnd.Selector",e,{constructor:function(a,b){b||(b={});this.singular=b.singular;this.autoSync=b.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(f(this.node,d.press,s.hitch(this,
"onMouseDown")),f(this.node,d.release,s.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new m,b=k._empty,d;for(d in this.selection)d in b||a.push(l.byId(d));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(l.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=k._empty,c;for(c in this.selection)if(!(c in a)){var d=
l.byId(c);this.delItem(c);b.destroy(d)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){b=b||r.global;var d=this.selection,e=k._empty,f;for(f in d)f in e||a.call(b,this.getItem(f),f,this)},sync:function(){n.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],b=k._empty,d;for(d in this.selection)d in b||this.getItem(d)||a.push(d);q.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,
b,d,e){var f=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=f.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,"Selected"),this._removeItemClass(d.node,"Anchor"));return d};n.superclass.insertNodes.call(this,b,d,e);this._normalizedCreator=
f;return this},destroy:function(){n.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!k.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,p.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){k.getCopyKeyState(a)||this._removeSelection();var b=this.getAllNodes();if(b.length&&(this.anchor||(this.anchor=b[0],this._addItemClass(this.anchor,
"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var d=0,e;d<b.length&&(e=b[d],e!=this.anchor&&e!=this.current);++d);for(++d;d<b.length;++d){e=b[d];if(e==this.anchor||e==this.current)break;this._addItemClass(e,"Selected");this.selection[e.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?k.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,
"Anchor"),this.selection[this.current.id]=1):k.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||
(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=f(this.node,d.move,s.hitch(this,"onMouseMove"))},
onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=k._empty,b;for(b in this.selection)if(!(b in a)){var d=l.byId(b);d&&this._removeItemClass(d,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return n})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),
function(q,t,r,s,l,b){function p(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}function m(a){if(a.canHaveChildren)try{a.innerHTML="";return}catch(b){}for(var c;c=a.lastChild;)f(c,a)}function f(a,b){a.firstChild&&m(a);b&&(r("ie")&&b.canHaveChildren&&"removeNode"in a?a.removeNode(!1):b.removeChild(a))}var d={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],
col:["table","colgroup"],li:["ul"]},k=/<\s*([\w\:]+)/,e={},n=0,a="__"+t._scopeName+"ToDomId",c;for(c in d)d.hasOwnProperty(c)&&(t=d[c],t.pre="option"==c?'<select multiple="multiple">':"<"+t.join("><")+">",t.post="</"+t.reverse().join("></")+">");var g;8>=r("ie")&&(g=function(a){a.__dojo_html5_tested="yes";var b=v("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
function(b){a.createElement(b)});u(b)});q.toDom=function(b,c){c=c||s.doc;var f=c[a];f||(c[a]=f=++n+"",e[f]=c.createElement("div"));8>=r("ie")&&!c.__dojo_html5_tested&&c.body&&g(c);b+="";var m=b.match(k),l=m?m[1].toLowerCase():"",f=e[f];if(m&&d[l])for(m=d[l],f.innerHTML=m.pre+b+m.post,m=m.length;m;--m)f=f.firstChild;else f.innerHTML=b;if(1==f.childNodes.length)return f.removeChild(f.firstChild);for(l=c.createDocumentFragment();m=f.firstChild;)l.appendChild(m);return l};q.place=function(a,b,c){b=l.byId(b);
"string"==typeof a&&(a=/^\s*</.test(a)?q.toDom(a,b.ownerDocument):l.byId(a));if("number"==typeof c){var d=b.childNodes;!d.length||d.length<=c?b.appendChild(a):p(a,d[0>c?0:c])}else switch(c){case "before":p(a,b);break;case "after":c=a;(d=b.parentNode)&&(d.lastChild==b?d.appendChild(c):d.insertBefore(c,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":q.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){p(a,b.firstChild);break}default:b.appendChild(a)}return a};
var v=q.create=function(a,c,d,g){var e=s.doc;d&&(d=l.byId(d),e=d.ownerDocument);"string"==typeof a&&(a=e.createElement(a));c&&b.set(a,c);d&&q.place(a,d,g);return a};q.empty=function(a){m(l.byId(a))};var u=q.destroy=function(a){(a=l.byId(a))&&f(a,a.parentNode)}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(q,t,r,s,l,b){function p(b,f){var e=b.getAttributeNode&&b.getAttributeNode(f);return e&&e.specified}var m={innerHTML:1,className:1,
htmlFor:t("ie"),value:1},f={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};q.has=function(d,k){var e=k.toLowerCase();return m[b.names[e]||k]||p(s.byId(d),f[e]||k)};q.get=function(d,k){d=s.byId(d);var e=k.toLowerCase(),n=b.names[e]||k,a=d[n];if(m[n]&&"undefined"!=typeof a||"href"!=n&&("boolean"==typeof a||r.isFunction(a)))return a;e=f[e]||k;return p(d,e)?d.getAttribute(e):null};q.set=function(d,k,e){d=s.byId(d);if(2==arguments.length){for(var n in k)q.set(d,n,k[n]);return d}n=
k.toLowerCase();var a=b.names[n]||k,c=m[a];if("style"==a&&"string"!=typeof e)return l.set(d,e),d;if(c||"boolean"==typeof e||r.isFunction(e))return b.set(d,k,e);d.setAttribute(f[n]||k,e);return d};q.remove=function(b,k){s.byId(b).removeAttribute(f[k.toLowerCase()]||k)};q.getNodeProp=function(d,k){d=s.byId(d);var e=k.toLowerCase(),m=b.names[e]||k;if(m in d&&"href"!=m)return d[m];e=f[e]||k;return p(d,e)?d.getAttribute(e):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),
function(q,t,r,s,l,b,p,m){var f={},d=0,k=t._scopeName+"attrid";q.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};q.get=function(b,d){b=l.byId(b);var a=d.toLowerCase();return b[q.names[a]||d]};q.set=function(e,n,a){e=l.byId(e);if(2==arguments.length&&"string"!=typeof n){for(var c in n)q.set(e,c,n[c]);return e}c=n.toLowerCase();c=q.names[c]||n;if("style"==c&&"string"!=typeof a)return b.set(e,
a),e;if("innerHTML"==c)return r("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(p.empty(e),e.appendChild(p.toDom(a,e.ownerDocument))):e[c]=a,e;if(s.isFunction(a)){var g=e[k];g||(g=d++,e[k]=g);f[g]||(f[g]={});var v=f[g][c];if(v)m.disconnect(v);else try{delete e[c]}catch(u){}a?f[g][c]=m.connect(e,c,a):e[c]=null;return e}e[c]=a;return e}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
function(q,t,r,s,l,b,p,m){function f(c,d,e,f,k){f=m.hitch(e,f);if(!c||!c.addEventListener&&!c.attachEvent)return s.after(c||q.global,d,f,!0);"string"==typeof d&&"on"==d.substring(0,2)&&(d=d.substring(2));c||(c=q.global);if(!k)switch(d){case "keypress":d=a;break;case "mouseenter":d=b.enter;break;case "mouseleave":d=b.leave}return t(c,d,f,k)}function d(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}p.add("events-keypress-typed",function(){var a={charCode:0};
try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!p("opera")});var k={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},e=p("mac")?"metaKey":"ctrlKey",n=function(a,b){var c=m.mixin({},a,b);d(c);c.preventDefault=function(){a.preventDefault()};c.stopPropagation=function(){a.stopPropagation()};return c},a;a=p("events-keypress-typed")?function(a,
b){var c=t(a,"keydown",function(a){var c=a.keyCode,d=13!=c&&32!=c&&(27!=c||!p("ie"))&&(48>c||90<c)&&(96>c||111<c)&&(186>c||192<c)&&(219>c||222<c)&&229!=c;if(d||a.ctrlKey){d=d?0:c;if(a.ctrlKey){if(3==c||13==c)return b.call(a.currentTarget,a);d=95<d&&106>d?d-48:!a.shiftKey&&65<=d&&90>=d?d+32:k[d]||d}c=n(a,{type:"keypress",faux:!0,charCode:d});b.call(a.currentTarget,c);if(p("ie"))try{a.keyCode=c.keyCode}catch(g){}}}),d=t(a,"keypress",function(a){var c=a.charCode;a=n(a,{charCode:32<=c?c:0,faux:!0});return b.call(this,
a)});return{remove:function(){c.remove();d.remove()}}}:p("opera")?function(a,b){return t(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,n(a,{charCode:c}))})}:function(a,b){return t(a,"keypress",function(a){d(a);return b.call(this,a)})};var c={_keypress:a,connect:function(a,b,c,d,e){var k=arguments,m=[],n=0;m.push("string"==typeof k[0]?null:k[n++],k[n++]);var l=k[n+1];m.push("string"==typeof l||"function"==
typeof l?k[n++]:null,k[n++]);for(l=k.length;n<l;n++)m.push(k[n]);return f.apply(this,m)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return r.subscribe(a,m.hitch(b,c))},publish:function(a,b){return r.publish.apply(r,[a].concat(b))},connectPublisher:function(a,b,d){var e=function(){c.publish(a,arguments)};return d?c.connect(b,d,e):c.connect(b,e)},isCopyKey:function(a){return a[e]}};c.unsubscribe=c.disconnect;m.mixin(q,c);return c})},"dojo/_base/event":function(){define(["./kernel",
"../on","../has","../dom-geometry"],function(q,t,r,s){if(t._fixEvent){var l=t._fixEvent;t._fixEvent=function(b,m){(b=l(b,m))&&s.normalizeEvent(b);return b}}var b={fix:function(b,m){return t._fixEvent?t._fixEvent(b,m):b},stop:function(b){r("dom-addeventlistener")||b&&b.preventDefault?(b.preventDefault(),b.stopPropagation()):(b=b||window.event,b.cancelBubble=!0,t._preventDefault.call(b))}};q.fixEvent=b.fix;q.stopEvent=b.stop;return b})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(q,
t){return q.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,
NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(q,t,r){t=t.NodeList;var s=t.prototype;s.connect=t._adaptAsForEach(function(){return q.connect.apply(this,arguments)});
s.coords=t._adaptAsMap(q.coords);t.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");r.forEach(t.events,function(l){var b="on"+l;s[b]=function(l,m){return this.connect(b,l,m)}});return q.NodeList=t})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(q,t,r,s,l,b,p,m){function f(a,b){var c=
function(c,d){if("string"==typeof d&&(d=r.byId(d),!d))return new b([]);var g="string"==typeof c?a(c,d):c?c.end&&c.on?c:[c]:[];return g.end&&g.on?g:new b(g)};c.matches=a.match||function(a,b,d){return 0<c.filter([a],b,d).length};c.filter=a.filter||function(a,b,d){return c(b,d).filter(function(b){return-1<l.indexOf(a,b)})};if("function"!=typeof a){var d=a.search;a=function(a,b){return d(b||document,a)}}return c}t.add("array-extensible",function(){return 1==b.delegate([],{length:1}).length&&!t("bug-for-in-skips-shadowed")});
var d=Array.prototype,k=d.slice,e=d.concat,n=l.forEach,a=function(a,b,c){b=[0].concat(k.call(b,0));c=c||q.global;return function(d){b[0]=d;return a.apply(c,b)}},c=function(a){var c=this instanceof g&&t("array-extensible");"number"==typeof a&&(a=Array(a));var d=a&&"length"in a?a:arguments;if(c||!d.sort){for(var e=c?this:[],f=e.length=d.length,k=0;k<f;k++)e[k]=d[k];if(c)return e;d=e}b._mixin(d,v);d._NodeListCtor=function(a){return g(a)};return d},g=c,v=g.prototype=t("array-extensible")?[]:{};g._wrap=
v._wrap=function(a,b,c){a=new (c||this._NodeListCtor||g)(a);return b?a._stash(b):a};g._adaptAsMap=function(b,c){return function(){return this.map(a(b,arguments,c))}};g._adaptAsForEach=function(b,c){return function(){this.forEach(a(b,arguments,c));return this}};g._adaptAsFilter=function(b,c){return function(){return this.filter(a(b,arguments,c))}};g._adaptWithCondition=function(b,c,d){return function(){var g=arguments,e=a(b,g,d);if(c.call(d||q.global,g))return this.map(e);this.forEach(e);return this}};
n(["slice","splice"],function(a){var b=d[a];v[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});n(["indexOf","lastIndexOf","every","some"],function(a){var b=l[a];v[a]=function(){return b.apply(q,[this].concat(k.call(arguments,0)))}});b.extend(c,{constructor:g,_NodeListCtor:g,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return s(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};
return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=k.call(this,0),c=l.map(arguments,function(a){return k.call(a,0)});return this._wrap(e.apply(b,c),this)},map:function(a,b){return this._wrap(l.map(this,a,b),this)},forEach:function(a,b){n(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=u._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(l.filter(c,b[d],b[d+1]),
this)},instantiate:function(a,c){var d=b.isFunction(a)?a:b.getObject(a);c=c||{};return this.forEach(function(a){new d(c,a)})},at:function(){var a=new this._NodeListCtor(0);n(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var u=f(m,c);q.query=f(m,function(a){return c(a)});u.load=function(a,b,d){p.load(a,b,function(a){d(f(a,c))})};q._filterQueryResult=u._filterResult=function(a,b,d){return new c(u.filter(a,b,d))};q.NodeList=u.NodeList=c;return u})},
"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(q,t,r,s,l,b,p,m){q.byId=t.byId;q.isDescendant=t.isDescendant;q.setSelectable=t.setSelectable;q.getAttr=s.get;q.setAttr=s.set;q.hasAttr=s.has;q.removeAttr=s.remove;q.getNodeProp=s.getNodeProp;q.attr=function(b,d,k){return 2==arguments.length?s["string"==typeof d?"get":"set"](b,d):s.set(b,d,k)};q.hasClass=b.contains;q.addClass=b.add;q.removeClass=
b.remove;q.toggleClass=b.toggle;q.replaceClass=b.replace;q._toDom=q.toDom=p.toDom;q.place=p.place;q.create=p.create;q.empty=function(b){p.empty(b)};q._destroyElement=q.destroy=function(b){p.destroy(b)};q._getPadExtents=q.getPadExtents=m.getPadExtents;q._getBorderExtents=q.getBorderExtents=m.getBorderExtents;q._getPadBorderExtents=q.getPadBorderExtents=m.getPadBorderExtents;q._getMarginExtents=q.getMarginExtents=m.getMarginExtents;q._getMarginSize=q.getMarginSize=m.getMarginSize;q._getMarginBox=q.getMarginBox=
m.getMarginBox;q.setMarginBox=m.setMarginBox;q._getContentBox=q.getContentBox=m.getContentBox;q.setContentSize=m.setContentSize;q._isBodyLtr=q.isBodyLtr=m.isBodyLtr;q._docScroll=q.docScroll=m.docScroll;q._getIeDocumentElementOffset=q.getIeDocumentElementOffset=m.getIeDocumentElementOffset;q._fixIeBiDiScrollLeft=q.fixIeBiDiScrollLeft=m.fixIeBiDiScrollLeft;q.position=m.position;q.marginBox=function(b,d){return d?m.setMarginBox(b,d):m.getMarginBox(b)};q.contentBox=function(b,d){return d?m.setContentSize(b,
d):m.getContentBox(b)};q.coords=function(b,d){q.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");b=t.byId(b);var k=r.getComputedStyle(b),k=m.getMarginBox(b,k),e=m.position(b,d);k.x=e.x;k.y=e.y;return k};q.getProp=l.get;q.setProp=l.set;q.prop=function(b,d,k){return 2==arguments.length?l["string"==typeof d?"get":"set"](b,d):l.set(b,d,k)};q.getStyle=r.get;q.setStyle=r.set;q.getComputedStyle=r.getComputedStyle;q.__toPixelValue=q.toPixelValue=r.toPixelValue;q.style=function(b,d,k){switch(arguments.length){case 1:return r.get(b);
case 2:return r["string"==typeof d?"get":"set"](b,d)}return r.set(b,d,k)};return q})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(q,t,r,s,l,b,p,m,f){function d(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var k=function(a){return 1==a.length&&"string"==typeof a[0]},e=function(a){var b=a.parentNode;b&&b.removeChild(a)},
n=t.NodeList,a=n._adaptWithCondition,c=n._adaptAsForEach,g=n._adaptAsMap;s.extend(n,{_normalize:function(a,c){var d=!0===a.parse;if("string"==typeof a.template){var g=a.templateFunc||q.string&&q.string.substitute;a=g?g(a.template,a):a}g=typeof a;"string"==g||"number"==g?(a=b.toDom(a,c&&c.ownerDocument),a=11==a.nodeType?s._toArray(a.childNodes):[a]):s.isArrayLike(a)?s.isArray(a)||(a=s._toArray(a)):a=[a];d&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,
c,d,g){if(1==c.nodeType||"only"!=d)for(var e,f=a.length,k=f-1;0<=k;k--){var m=g?this._cloneNode(a[k]):a[k];if(a._runParse&&q.parser&&q.parser.parse)for(e||(e=c.ownerDocument.createElement("div")),e.appendChild(m),q.parser.parse(e),m=e.firstChild;e.firstChild;)e.removeChild(e.firstChild);k==f-1?b.place(m,c,d):c.parentNode.insertBefore(m,c);c=m}},position:g(p.position),attr:a(d(m),k),style:a(d(f),k),addClass:c(l.add),removeClass:c(l.remove),toggleClass:c(l.toggle),replaceClass:c(l.replace),empty:c(b.empty),
removeAttr:c(m.remove),marginBox:g(p.getMarginBox),place:function(a,c){var d=t(a)[0];return this.forEach(function(a){b.place(a,d,c)})},orphan:function(a){return(a?t._filterResult(this,a):this).forEach(e)},adopt:function(a,b){return t(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new n;this.map(function(c){t(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=t._filterResult(this,
b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(r.filter(c,b[d],b[d+1]),this)},addContent:function(a,c){a=this._normalize(a,this[0]);for(var d=0,g;g=this[d];d++)a.length?this._place(a,g,c,0<d):b.empty(g);return this}});return n})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(q,t,r,s,l,b,p,m,f,d){function k(c,d,e){return g&&e?function(a,c){return b(a,e,c)}:a?function(a,g){var e=
b(a,d,g),f=b(a,c,function(a){(!J||(new Date).getTime()>J+1E3)&&g.call(this,a)});return{remove:function(){e.remove();f.remove()}}}:function(a,d){return b(a,c,d)}}function e(a){do if(void 0!==a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function n(a,c,g){if(z=!a.target.disabled&&e(a.target))A=a.target,y=a.touches?a.touches[0].pageX:a.clientX,C=a.touches?a.touches[0].pageY:a.clientY,D=("object"==typeof z?z.x:"number"==typeof z?z:0)||4,B=("object"==typeof z?z.y:"number"==typeof z?z:0)||4,u||(u=
!0,d.doc.addEventListener(c,function(a){z=z&&a.target==A&&Math.abs((a.touches?a.touches[0].pageX:a.clientX)-y)<=D&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-C)<=B},!0),d.doc.addEventListener(g,function(a){if(z){G=(new Date).getTime();var c=a.target;"LABEL"===c.tagName&&(c=r.byId(c.getAttribute("for"))||c);setTimeout(function(){b.emit(c,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a=function(a){d.doc.addEventListener(a,function(b){b._dojo_click||!((new Date).getTime()<=G+1E3)||
"INPUT"==b.target.tagName&&s.contains(b.target,"dijitOffScreen")||(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"!=a||"INPUT"==b.target.tagName&&"radio"!=b.target.type&&"checkbox"!=b.target.type||"TEXTAREA"==b.target.tagName||"AUDIO"==b.target.tagName||"VIDEO"==b.target.tagName||b.preventDefault())},!0)},a("click"),a("mousedown"),a("mouseup"))}var a=p("touch"),c=5>p("ios"),g=navigator.pointerEnabled||navigator.msPointerEnabled,v=function(){var a={},b;for(b in{down:1,
move:1,up:1,cancel:1,over:1,out:1})a[b]=navigator.pointerEnabled?"pointer"+b:"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1);return a}(),u,z,A,y,C,D,B,G,J,M;a&&(g?f(function(){d.doc.addEventListener(v.down,function(a){n(a,v.move,v.up)},!0)}):f(function(){function a(b){var c=l.delegate(b,{bubbles:!0});6<=p("ios")&&(c.touches=b.touches,c.altKey=b.altKey,c.changedTouches=b.changedTouches,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.targetTouches=b.targetTouches);return c}M=d.body();
d.doc.addEventListener("touchstart",function(a){J=(new Date).getTime();var c=M;M=a.target;b.emit(c,"dojotouchout",{relatedTarget:M,bubbles:!0});b.emit(M,"dojotouchover",{relatedTarget:c,bubbles:!0});n(a,"touchmove","touchend")},!0);b(d.doc,"touchmove",function(g){J=(new Date).getTime();var e=d.doc.elementFromPoint(g.pageX-(c?0:d.global.pageXOffset),g.pageY-(c?0:d.global.pageYOffset));e&&(M!==e&&(b.emit(M,"dojotouchout",{relatedTarget:e,bubbles:!0}),b.emit(e,"dojotouchover",{relatedTarget:M,bubbles:!0}),
M=e),b.emit(e,"dojotouchmove",a(g))||g.preventDefault())});b(d.doc,"touchend",function(g){J=(new Date).getTime();var e=d.doc.elementFromPoint(g.pageX-(c?0:d.global.pageXOffset),g.pageY-(c?0:d.global.pageYOffset))||d.body();b.emit(e,"dojotouchend",a(g))})}));t={press:k("mousedown","touchstart",v.down),move:k("mousemove","dojotouchmove",v.move),release:k("mouseup","dojotouchend",v.up),cancel:k(m.leave,"touchcancel",a?v.cancel:null),over:k("mouseover","dojotouchover",v.over),out:k("mouseout","dojotouchout",
v.out),enter:m._eventHandler(k("mouseover","dojotouchover",v.over)),leave:m._eventHandler(k("mouseout","dojotouchout",v.out))};return q.touch=t})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a){t=t("dojo.dnd.Container",f,{skipForm:!1,allowNested:!1,constructor:function(a,d){this.node=b.byId(a);
d||(d={});this.creator=d.creator||null;this.skipForm=d.skipForm;this.parent=d.dropParent&&b.byId(d.dropParent);this.map={};this.current=null;this.containerState="";p.add(this.node,"dojoDndContainer");d&&d._skipStartup||this.startup();this.events=[k(this.node,n.over,s.hitch(this,"onMouseOver")),k(this.node,n.out,s.hitch(this,"onMouseOut")),k(this.node,"dragstart",s.hitch(this,"onSelectStart")),k(this.node,"selectstart",s.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},
setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(b,d){d=d||r.global;var e=this.map,f=a._empty,k;for(k in e)k in f||b.call(d,e[k],k,this);return d},clearItems:function(){this.map={}},getAllNodes:function(){return e((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var b={};this.getAllNodes().forEach(function(d){if(d.id){var e=this.getItem(d.id);if(e){b[d.id]=e;return}}else d.id=a.getUniqueId();var e=d.getAttribute("dndType"),f=d.getAttribute("dndData");
b[d.id]={data:f||d.innerHTML,type:e?e.split(/\s*,\s*/):["text"]}},this);this.map=b;return this},insertNodes:function(a,b,d){this.parent.firstChild?b?d||(d=this.parent.firstChild):d&&(d=d.nextSibling):d=null;var e;if(d)for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),d.parentNode.insertBefore(e.node,d);else for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),this.parent.appendChild(e.node);
return this},destroy:function(){q.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,d){a._skipStartup=!0;return new d(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var b=this.parent.getElementsByTagName("tbody");b&&b.length&&(this.parent=b[0])}this.defaultCreator=a._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&
b!=this.node;)try{b=b.parentNode}catch(d){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(b){this.skipForm&&
a.isFormElement(b)||(b.stopPropagation(),b.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var d="dojoDnd"+a,e=a.toLowerCase()+"State";p.replace(this.node,d+b,d+this[e]);this[e]=b},_addItemClass:function(a,b){p.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){p.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&p.contains(a,"dojoDndItem"))return a;
return null},_normalizedCreator:function(b,d){var e=(this.creator||this.defaultCreator).call(this,b,d);s.isArray(e.type)||(e.type=["text"]);e.node.id||(e.node.id=a.getUniqueId());p.add(e.node,"dojoDndItem");return e}});a._createNode=function(b){return b?function(a){return m.create(b,{innerHTML:a})}:a._createSpan};a._createTrTd=function(a){var b=m.create("tr");m.create("td",{innerHTML:a},b);return b};a._createSpan=function(a){return m.create("span",{innerHTML:a})};a._defaultCreatorNodes={ul:"li",ol:"li",
div:"div",p:"div"};a._defaultCreator=function(b){b=b.tagName.toLowerCase();var d="tbody"==b||"thead"==b?a._createTrTd:a._createNode(a._defaultCreatorNodes[b]);return function(b,c){var e=b&&s.isObject(b),f,k;e&&b.tagName&&b.nodeType&&b.getAttribute?(f=b.getAttribute("dndData")||b.innerHTML,e=(e=b.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"],k=b):(f=e&&b.data?b.data:b,e=e&&b.type?b.type:["text"],k=("avatar"==c?a._createSpan:d)(String(f)));k.id||(k.id=a.getUniqueId());return{node:k,data:f,type:e}}};
return t})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a){var c=t("dojo.dnd.Manager",[b],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:p("touch")?0:16,OFFSET_Y:p("touch")?-64:16,overSource:function(a){this.avatar&&
(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update());d.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),d.publish("/dnd/source/over",null)):d.publish("/dnd/source/over",null)},startDrag:function(a,b,c){function e(a){a.preventDefault();a.stopPropagation()}n.autoScrollStart(s.doc);this.source=a;this.nodes=b;this.copy=Boolean(c);this.avatar=this.makeAvatar();
s.body().appendChild(this.avatar.node);d.publish("/dnd/start",a,b,this.copy);this.events=[f(s.doc,k.move,r.hitch(this,"onMouseMove")),f(s.doc,k.release,r.hitch(this,"onMouseUp")),f(s.doc,"keydown",r.hitch(this,"onKeyDown")),f(s.doc,"keyup",r.hitch(this,"onKeyUp")),f(s.doc,"dragstart",e),f(s.body(),"selectstart",e)];a="dojoDnd"+(c?"Copy":"Move");l.add(s.body(),a)},canDrop:function(a){a=Boolean(this.target&&a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){l.remove(s.body(),
["dojoDndCopy","dojoDndMove"]);q.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new a(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(n.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(e.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b));
p("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(e.getCopyKeyState(a)));d.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);d.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else d.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case m.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case m.ESCAPE:d.publish("/dnd/cancel"),
this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==m.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();l.replace(s.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});e._manager=null;c.manager=e.manager=function(){e._manager||(e._manager=new c);return e._manager};return c})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(q,t,r,s,l,b){var p={};q.setObject("dojo.dnd.autoscroll",p);p.getViewport=b.getBox;p.V_TRIGGER_AUTOSCROLL=32;p.H_TRIGGER_AUTOSCROLL=32;p.V_AUTOSCROLL_VALUE=16;p.H_AUTOSCROLL_VALUE=16;var m,f=r.doc,d=Infinity,k=Infinity;p.autoScrollStart=function(e){f=e;m=b.getBox(f);e=r.body(f).parentNode;d=Math.max(e.scrollHeight-m.h,0);k=Math.max(e.scrollWidth-m.w,0)};p.autoScroll=function(e){var n=m||b.getBox(f),a=r.body(f).parentNode,c=0,g=0;e.clientX<p.H_TRIGGER_AUTOSCROLL?c=-p.H_AUTOSCROLL_VALUE:e.clientX>
n.w-p.H_TRIGGER_AUTOSCROLL&&(c=Math.min(p.H_AUTOSCROLL_VALUE,k-a.scrollLeft));e.clientY<p.V_TRIGGER_AUTOSCROLL?g=-p.V_AUTOSCROLL_VALUE:e.clientY>n.h-p.V_TRIGGER_AUTOSCROLL&&(g=Math.min(p.V_AUTOSCROLL_VALUE,d-a.scrollTop));window.scrollBy(c,g)};p._validNodes={div:1,p:1,td:1};p._validOverflow={auto:1,scroll:1};p.autoScrollNodes=function(b){for(var d,a,c,g,f,k,m=0,q=0,y=b.target;y;){if(1==y.nodeType&&y.tagName.toLowerCase()in p._validNodes){c=l.getComputedStyle(y);g=c.overflow.toLowerCase()in p._validOverflow;
f=c.overflowX.toLowerCase()in p._validOverflow;k=c.overflowY.toLowerCase()in p._validOverflow;if(g||f||k)d=s.getContentBox(y,c),a=s.position(y,!0);if(g||f){c=Math.min(p.H_TRIGGER_AUTOSCROLL,d.w/2);f=b.pageX-a.x;if(t("webkit")||t("opera"))f+=r.body().scrollLeft;m=0;0<f&&f<d.w&&(f<c?m=-c:f>d.w-c&&(m=c),y.scrollLeft+=m)}if(g||k){g=Math.min(p.V_TRIGGER_AUTOSCROLL,d.h/2);k=b.pageY-a.y;if(t("webkit")||t("opera"))k+=r.body().scrollTop;q=0;0<k&&k<d.h&&(k<g?q=-g:k>d.h-g&&(q=g),y.scrollTop+=q)}if(m||q)return}try{y=
y.parentNode}catch(C){y=null}}p.autoScroll(b)};return p})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(q,t,r,s,l,b,p){t.add("rtl-adjust-position-for-verticalScrollBar",function(b,d){var k=r.body(d),e=p.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},k,"last"),m=p.create("div",{style:{overflow:"hidden",
direction:"ltr"}},e,"last"),a=0!=l.position(m).x;e.removeChild(m);k.removeChild(e);return a});t.add("position-fixed-support",function(b,d){var k=r.body(d),e=p.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},k,"last"),m=p.create("span",{style:{position:"fixed",left:"0",top:"0"}},e,"last"),a=l.position(m).x!=l.position(e).x;e.removeChild(m);k.removeChild(e);return a});var m={getBox:function(b){b=b||r.doc;var d="BackCompat"==b.compatMode?r.body(b):b.documentElement,
k=l.docScroll(b);if(t("touch")){var e=m.get(b);b=e.innerWidth||d.clientWidth;d=e.innerHeight||d.clientHeight}else b=d.clientWidth,d=d.clientHeight;return{l:k.x,t:k.y,w:b,h:d}},get:function(b){if(t("ie")&&m!==document.parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var d=b._parentWindow;b._parentWindow=null;return d}return b.parentWindow||b.defaultView},scrollIntoView:function(f,d){try{f=s.byId(f);var k=f.ownerDocument||r.doc,e=r.body(k),m=k.documentElement||
e.parentNode,a=t("ie"),c=t("webkit");if(f!=e&&f!=m)if(!(t("mozilla")||a||c||t("opera")||t("trident"))&&"scrollIntoView"in f)f.scrollIntoView(!1);else{var g="BackCompat"==k.compatMode,p=Math.min(e.clientWidth||m.clientWidth,m.clientWidth||e.clientWidth),u=Math.min(e.clientHeight||m.clientHeight,m.clientHeight||e.clientHeight),k=c||g?e:m,q=d||l.position(f),A=f.parentNode,c=function(c){return 6>=a||7==a&&g?!1:t("position-fixed-support")&&"fixed"==b.get(c,"position").toLowerCase()};if(!c(f))for(;A;){A==
e&&(A=k);var y=l.position(A),C=c(A),D="rtl"==b.getComputedStyle(A).direction.toLowerCase();if(A==k){y.w=p;y.h=u;k==m&&a&&D&&(y.x+=k.offsetWidth-y.w);if(0>y.x||!a||9<=a)y.x=0;if(0>y.y||!a||9<=a)y.y=0}else{var B=l.getPadBorderExtents(A);y.w-=B.w;y.h-=B.h;y.x+=B.l;y.y+=B.t;var G=A.clientWidth,J=y.w-G;0<G&&0<J&&(D&&t("rtl-adjust-position-for-verticalScrollBar")&&(y.x+=J),y.w=G);G=A.clientHeight;J=y.h-G;0<G&&0<J&&(y.h=G)}C&&(0>y.y&&(y.h+=y.y,y.y=0),0>y.x&&(y.w+=y.x,y.x=0),y.y+y.h>u&&(y.h=u-y.y),y.x+y.w>
p&&(y.w=p-y.x));var M=q.x-y.x,F=q.y-y.y,H=M+q.w-y.w,S=F+q.h-y.h,K,x;0<H*M&&(A.scrollLeft||A==k||A.scrollWidth>A.offsetHeight)&&(K=Math[0>M?"max":"min"](M,H),D&&(8==a&&!g||9<=a)&&(K=-K),x=A.scrollLeft,A.scrollLeft+=K,K=A.scrollLeft-x,q.x-=K);0<S*F&&(A.scrollTop||A==k||A.scrollHeight>A.offsetHeight)&&(K=Math.ceil(Math[0>F?"max":"min"](F,S)),x=A.scrollTop,A.scrollTop+=K,K=A.scrollTop-x,q.y-=K);A=A!=k&&!C&&A.parentNode}}}catch(L){console.error("scrollIntoView: "+L),f.scrollIntoView(!1)}}};q.setObject("dojo.window",
m);return m})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),function(q,t,r,s,l,b,p,m){return q("dojo.dnd.Avatar",null,{constructor:function(b){this.manager=b;this.construct()},construct:function(){var f=b.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),d=this.manager.source,k,e=b.create("tbody",null,f),m=b.create("tr",null,e),a=b.create("td",null,
m),c=Math.min(5,this.manager.nodes.length),g=0;p("highcontrast")&&b.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},a);b.create("span",{innerHTML:d.generateText?this._generateText():""},a);for(s.set(m,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});g<c;++g)d.creator?k=d._normalizedCreator(d.getItem(this.manager.nodes[g].id).data,"avatar").node:(k=this.manager.nodes[g].cloneNode(!0),"tr"==k.tagName.toLowerCase()&&(m=b.create("table"),b.create("tbody",null,m).appendChild(k),k=
m)),k.id="",m=b.create("tr",null,e),a=b.create("td",null,m),a.appendChild(k),s.set(m,{"class":"dojoDndAvatarItem",style:{opacity:(9-g)/10}});this.node=f},destroy:function(){b.destroy(this.node);this.node=!1},update:function(){l.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(p("highcontrast")){var b=r.byId("a11yIcon"),d="+";this.manager.canDropFlag&&!this.manager.copy?d="< ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(d="x"):d="o";b.innerHTML=d}m("tr.dojoDndAvatarHeader td span"+
(p("highcontrast")?" span":""),this.node).forEach(function(b){b.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(q,t,r,s,l,b,p){l.add("highcontrast",function(){var b=p.doc.createElement("div");b.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+
(t.blankGif||q.toUrl("./resources/blank.gif"))+");";p.body().appendChild(b);var f=s.getComputedStyle(b),d=f.backgroundImage,f=f.borderTopColor==f.borderRightColor||d&&("none"==d||"url(invalid-url:)"==d);8>=l("ie")?b.outerHTML="":p.body().removeChild(b);return f});b(function(){l("highcontrast")&&r.add(p.body(),"dj_a11y")});return l})},"dojo/dnd/AutoSource":function(){define(["../_base/declare","./Source"],function(q,t){return q("dojo.dnd.AutoSource",t,{constructor:function(){this.autoSync=!0}})})},
"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(q,t,r,s){return t("dojo.fx.Toggler",null,{node:null,showFunc:r.fadeIn,hideFunc:r.fadeOut,showDuration:200,hideDuration:200,constructor:function(l){q.mixin(this,l);this.node=l.node;this._showArgs=q.mixin({},l);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=q.mixin({},l);this._hideArgs.node=this.node;this._hideArgs.duration=
this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);s.after(this.showAnim,"beforeBegin",q.hitch(this.hideAnim,"stop",!0),!0);s.after(this.hideAnim,"beforeBegin",q.hitch(this.showAnim,"stop",!0),!0)},show:function(l){return this.showAnim.play(l||0)},hide:function(l){return this.hideAnim.play(l||0)}})})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(q,t,r,s,l,b,p,m,f){var d=r.mixin,k={},e=k._Line=
function(a,b){this.start=a;this.end=b};e.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var n=k.Animation=function(a){d(this,a);r.isArray(this.curve)&&(this.curve=new e(this.curve[0],this.curve[1]))};n.prototype=new s;r.extend(n,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(t.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,
c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||this.delay,d=r.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(d,c),this;d();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();
this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,
b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/
this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});
var a=0,c=null,g={run:function(){}};r.extend(n,{_startTimer:function(){this._timer||(this._timer=b.after(g,"run",r.hitch(this,"_cycle"),!0),a++);c||(c=setInterval(r.hitch(g,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,a--);0>=a&&(clearInterval(c),c=null,a=0)}});var v=p("ie")?function(a){var b=a.style;b.width.length||"auto"!=f.get(a,"width")||(b.width="auto")}:function(){};k._fade=function(a){a.node=m.byId(a.node);var c=d({properties:{}},a);a=c.properties.opacity=
{};a.start="start"in c?c.start:function(){return+f.get(c.node,"opacity")||0};a.end=c.end;a=k.animateProperty(c);b.after(a,"beforeBegin",r.partial(v,c.node),!0);return a};k.fadeIn=function(a){return k._fade(d({end:1},a))};k.fadeOut=function(a){return k._fade(d({end:0},a))};k._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var u=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof l&&(c.tempColor=new l)}};u.prototype.getValue=function(a){var b={},c;for(c in this._properties){var d=
this._properties[c],g=d.start;g instanceof l?b[c]=l.blendColors(g,d.end,a,d.tempColor).toCss():r.isArray(g)||(b[c]=(d.end-g)*a+g+("opacity"!=c?d.units||"px":0))}return b};k.animateProperty=function(a){var c=a.node=m.byId(a.node);a.easing||(a.easing=q._defaultEasing);a=new n(a);b.after(a,"beforeBegin",r.hitch(a,function(){var a={},b;for(b in this.properties){if("width"==b||"height"==b)this.node.display="block";var g=this.properties[b];r.isFunction(g)&&(g=g(c));g=a[b]=d({},r.isObject(g)?g:{end:g});
r.isFunction(g.start)&&(g.start=g.start(c));r.isFunction(g.end)&&(g.end=g.end(c));var e=0<=b.toLowerCase().indexOf("color"),k=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;c=f.get(a,b);return"opacity"==b?+c:e?c:parseFloat(c)};"end"in g?"start"in g||(g.start=k(c,b)):g.end=k(c,b);e?(g.start=new l(g.start),g.end=new l(g.end)):g.start="opacity"==b?+g.start:parseFloat(g.start)}this.curve=new u(a)}),!0);b.after(a,"onAnimate",r.hitch(f,"set",a.node),!0);return a};
k.anim=function(a,b,c,d,g,e){return k.animateProperty({node:a,duration:c||n.prototype.duration,properties:b,easing:d,onEnd:g}).play(e||0)};d(q,k);q._Animation=n;return k})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(q,t,r,s){var l=q.Color=function(b){b&&this.setColor(b)};l.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],
olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:s.transparentColor||[0,0,0,0]};t.extend(l,{r:255,g:255,b:255,a:1,_set:function(b,l,m,f){this.r=b;this.g=l;this.b=m;this.a=f},setColor:function(b){t.isString(b)?l.fromString(b,this):t.isArray(b)?l.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof l||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,
this.g,this.b,this.a]},toHex:function(){return"#"+r.map(["r","g","b"],function(b){b=this[b].toString(16);return 2>b.length?"0"+b:b},this).join("")},toCss:function(b){var l=this.r+", "+this.g+", "+this.b;return(b?"rgba("+l+", "+this.a:"rgb("+l)+")"},toString:function(){return this.toCss(!0)}});l.blendColors=q.blendColors=function(b,p,m,f){var d=f||new l;r.forEach(["r","g","b","a"],function(f){d[f]=b[f]+(p[f]-b[f])*m;"a"!=f&&(d[f]=Math.round(d[f]))});return d.sanitize()};l.fromRgb=q.colorFromRgb=function(b,
p){var m=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&l.fromArray(m[1].split(/\s*,\s*/),p)};l.fromHex=q.colorFromHex=function(b,p){var m=p||new l,f=4==b.length?4:8,d=(1<<f)-1;b=Number("0x"+b.substr(1));if(isNaN(b))return null;r.forEach(["b","g","r"],function(k){var e=b&d;b>>=f;m[k]=4==f?17*e:e});m.a=1;return m};l.fromArray=q.colorFromArray=function(b,p){var m=p||new l;m._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));isNaN(m.a)&&(m.a=1);return m.sanitize()};l.fromString=q.colorFromString=
function(b,p){var m=l.named[b];return m&&l.fromArray(m,p)||l.fromRgb(b,p)||l.fromHex(b,p)};return l})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(q,t,r){return q([t,r],{})})},"dgrid/Grid":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),function(q,t,r,s,l,b,p){function m(b,d){d&&d.nodeType&&b.appendChild(d)}function f(b,d,a,c){if(this.formatter){c=this.formatter;
var g=this.grid.formatterScope;a.innerHTML="string"===typeof c&&g?g[c](d,b):this.formatter(d,b)}else null!=d&&a.appendChild(document.createTextNode(d))}var d=8>s("ie")&&!s("quirks"),k=/[^\._a-zA-Z0-9-]/g;t=t(b,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(b){return"object"!=typeof b?this.columns[b]:this.cell(b).column},listType:"grid",cell:function(b,d){if(b.column&&b.element)return b;b.target&&b.target.nodeType&&(b=b.target);var a;if(b.nodeType){do{if(this._rowIdToObject[b.id])break;
var c=b.columnId;if(c){d=c;a=b;break}b=b.parentNode}while(b&&b!=this.domNode)}if(!a&&"undefined"!=typeof d){var g=this.row(b);if(c=g&&g.element)for(var c=c.getElementsByTagName("td"),f=0;f<c.length;f++)if(c[f].columnId==d){a=c[f];break}}if(null!=b)return{row:g||this.row(b),column:d&&this.column(d),element:a}},createRowCells:function(b,f,a,c){var g=l("table.dgrid-row-table[role=presentation]"),m=9>s("ie")||s("quirks")?l(g,"tbody"):g,p,q,r,y,C,t,B,G,J,M;a=a||this.subRows;q=0;for(r=a.length;q<r;q++)for(t=
a[q],p=l(m,"tr"),t.className&&l(p,"."+t.className),y=0,C=t.length;y<C;y++){B=t[y];G=B.id;J=B.field?".field-"+B.field:"";(M="function"===typeof B.className?B.className(c):B.className)&&(J+="."+M);J=l(b+(".dgrid-cell.dgrid-cell-padding"+(G?".dgrid-column-"+G:"")+J.replace(/ +/g,".")).replace(k,"-")+"[role="+("th"===b?"columnheader":"gridcell")+"]");J.columnId=G;d?(G=l(J,"!dgrid-cell-padding div.dgrid-cell-padding"),J.contents=G):G=J;if(M=B.colSpan)J.colSpan=M;if(M=B.rowSpan)J.rowSpan=M;f(G,B);p.appendChild(J)}return g},
left:function(b,d){b.element||(b=this.cell(b));return this.cell(this._move(b,-(d||1),"dgrid-cell"))},right:function(b,d){b.element||(b=this.cell(b));return this.cell(this._move(b,d||1,"dgrid-cell"))},renderRow:function(b,d){var a=this.createRowCells("td",function(a,g){var k=b;g.get?k=g.get(b):"field"in g&&"_item"!=g.field&&(k=k[g.field]);g.renderCell?m(a,g.renderCell(b,k,a,d)):f.call(g,b,k,a,d)},d&&d.subRows,b);return l("div[role=row]>",a)},renderHeader:function(){var b=this,f=this.headerNode,a=f.childNodes.length;
for(f.setAttribute("role","row");a--;)l(f.childNodes[a],"!");a=this.createRowCells("th",function(a,b){var e=b.headerNode=a;d&&(a=a.parentNode);var f=b.field;f&&(a.field=f);b.renderHeaderCell?m(e,b.renderHeaderCell(e)):("label"in b||b.field)&&e.appendChild(document.createTextNode("label"in b?b.label:b.field));!1!==b.sortable&&f&&"_item"!=f&&(a.sortable=!0,a.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[a.id=this.id+"-header"]=this.columns;f.appendChild(a);
this._sortListener&&this._sortListener.remove();this._sortListener=r(a,"click,keydown",function(a){if("click"==a.type||32==a.keyCode||!s("opera")&&13==a.keyCode){var d=a.target,k,m,l;do if(d.sortable){l=[{attribute:k=d.field||d.columnId,descending:(m=b._sort[0])&&m.attribute==k&&!m.descending}];k={bubbles:!0,cancelable:!0,grid:b,parentType:a.type,sort:l};r.emit(a.target,"dgrid-sort",k)&&(b._sortNode=d,b.set("sort",l));break}while((d=d.parentNode)&&d!=f)}})},resize:function(){var b=this.headerNode.firstChild,
d=this.contentNode,a;this.inherited(arguments);if(!s("ie")||7<s("ie")&&!s("quirks"))d.style.width="",d&&b&&(a=b.offsetWidth)!=d.offsetWidth&&(d.style.width=a+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(b,d){this.inherited(arguments);this.updateSortArrow(this._sort)},updateSortArrow:function(b,d){this._lastSortedArrow&&(l(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),l(this._lastSortedArrow,
"!"),delete this._lastSortedArrow);d&&(this._sort=b);if(b[0]){var a=b[0].attribute,c=b[0].descending,g=this._sortNode,f,k,m;delete this._sortNode;if(!g)for(m in f=this.columns,f)if(k=f[m],k.field==a){g=k.headerNode;break}g&&(g=g.contents||g,this._lastSortedArrow=l(g.firstChild,"-div.dgrid-sort-arrow.ui-icon[role=presentation]"),this._lastSortedArrow.innerHTML="&nbsp;",l(g,c?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(b,d){return this.addCssRule("#"+p.escapeCssIdentifier(this.domNode.id)+
" .dgrid-column-"+b,d)},_configColumns:function(b,d){var a=[],c=d instanceof Array;p.each(d,function(g,f){"string"==typeof g&&(d[f]=g={label:g});c||g.field||(g.field=f);f=g.id=g.id||(isNaN(f)?f:b+f);this._configColumn&&(this._configColumn(g,f,d,b),f=g.id);c&&(this.columns[f]=g);g.grid=this;"function"===typeof g.init&&g.init();a.push(g)},this);return c?d:a},_destroyColumns:function(){var b=this.subRows,d=b&&b.length,a,c,g,f;this.cleanup();for(a=0;a<d;a++)for(c=0,f=b[a].length;c<f;c++)g=b[a][c],"function"===
typeof g.destroy&&g.destroy()},configStructure:function(){var b=this.subRows,d=this._columns=this.columns;this.columns=!d||d instanceof Array?{}:d;if(b)for(d=0;d<b.length;d++)b[d]=this._configColumns(d+"-",b[d]);else this.subRows=[this._configColumns("",d)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(b){this._destroyColumns();this.subRows=null;this.columns=b;this._updateColumns()},_setSubRows:function(b){this._destroyColumns();this.subRows=b;this._updateColumns()},
setColumns:function(b){q.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4");this.set("columns",b)},setSubRows:function(b){q.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 0.4");this.set("subRows",b)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});t.appendIfNode=
m;t.defaultRenderCell=f;return t})},"put-selector/put":function(){(function(q){var t,r=/[-+,> ]/;q([],t=function(q,l){function b(k){function e(){l&&g&&l!=g&&(g==k&&(n||(n=r.test(y)&&q.createDocumentFragment()))?n:g).insertBefore(l,c||null)}for(var n,a,c,g,l,u=arguments,z=u[0],A=0;A<u.length;A++){var y=u[A];if("object"==typeof y){a=!1;if(y instanceof Array){l=q.createDocumentFragment();for(var t=0;t<y.length;t++)l.appendChild(b(y[t]));y=l}if(y.nodeType)l=y,e(),g=y,c=0;else for(t in y)l[t]=y[t]}else if(a)a=
!1,l.appendChild(q.createTextNode(y));else{1>A&&(k=null);a=!0;if(z=y.replace(p,function(a,n,p,z,r,t){n&&(e(),"-"==n||"+"==n?(g=(c=l||g).parentNode,l=null,"+"==n&&(c=c.nextSibling)):("<"==n?g=l=(l||g).parentNode:(","==n?g=k:l&&(g=l),l=null),c=0),l&&(g=l));if((a=!p&&z)||!l&&(p||r))"$"==a?(a=u[++A],g.appendChild(q.createTextNode(a))):(a=a||b.defaultTag,(n=d&&u[A+1]&&u[A+1].name)&&(a="<"+a+' name="'+n+'">'),l=f&&~(m=a.indexOf("|"))?q.createElementNS(f[a.slice(0,m)],a.slice(m+1)):q.createElement(a));if(p)if("$"==
z&&(z=u[++A]),"#"==p)l.id=z;else if(n=(a=l.className)&&(" "+a+" ").replace(" "+z+" "," "),"."==p)l.className=a?(n+z).substring(1):z;else if("!"==y){var C;d?b("div",l,"<").innerHTML="":(C=l.parentNode)&&C.removeChild(l)}else n=n.substring(1,n.length-1),n!=a&&(l.className=n);r&&("$"==t&&(t=u[++A]),"style"==r?l.style.cssText=t:(p="!"==r.charAt(0)?(r=r.substring(1))&&"removeAttribute":"setAttribute",t=""===t?r:t,f&&~(m=r.indexOf("|"))?l[p+"NS"](f[r.slice(0,m)],r.slice(m+1),t):l[p](r,t)));return""}))throw new SyntaxError("Unexpected char "+
z+" in "+y);e();g=z=l||g}}k&&n&&k.appendChild(n);return z}r=l||r;var p=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,m,f=!1;q=q||document;var d="object"==typeof q.createElement;b.addNamespace=function(b,d){q.createElementNS?(f||(f={}))[b]=d:q.namespaces.add(b,d)};b.defaultTag="div";b.forDocument=t;return b})})(function(q,t,r){r=r||t;"function"===typeof define?define([],function(){return r()}):"undefined"==typeof window?require("./node-html")(module,r):put=
r()})},"dgrid/List":function(){define("dojo/_base/kernel dojo/_base/declare dojo/dom dojo/on dojo/has ./util/misc dojo/has!touch?./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(q,t,r,s,l,b,p,m,f){function d(a,b){var c=document.body,d;f(c,a,".dgrid-scrollbar-measure");d=a["offset"+b]-a["client"+b];f(a,"!dgrid-scrollbar-measure");c.removeChild(a);return d}function k(a){var b=a?"."+a.replace(u,"."):"";this._class&&(b="!"+this._class.replace(u,
"!")+b);f(this.domNode,b);this._class=a}function e(){return this._class}function n(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function a(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)}m("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var c,g;l.add("dom-scrollbar-width",function(a,b,c){return d(c,"Width")});l.add("dom-scrollbar-height",function(a,b,c){return d(c,"Height")});var v=
0,u=/ +/g,z=7>l("ie")&&!l("quirks")?function(){var a,b,c;this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,c=this._prevWinDims||[],c[0]!==b||c[1]!==a)&&(this.resize(),this._prevWinDims=[b,a])}:function(){this._started&&this.resize()};return t(l("touch")?p:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:!0,cleanEmptyObservers:!0,highlightDuration:250,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=
a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,b){var c=this.domNode=b||f("div"),d;a?(this.params=a,t.safeMixin(this,a),d=a["class"]||a.className||c.className,this._sort=a.sort||[],delete this.sort):this._sort=[];this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();
this.id=c.id=c.id||this.id||"dgrid_"+v++;this.buildRendering();d&&k.call(this,d);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,c=this,d,g,e,k;k=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";f(a,"[role=grid].ui-widget.dgrid.dgrid-"+this.listType);d=this.headerNode=f(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?
"":".dgrid-header-hidden"));(l("quirks")||8>l("ie"))&&f(a,"div.dgrid-spacer");g=this.bodyNode=f(a,"div.dgrid-scroller");l("ff")&&(g.tabIndex=-1);this.headerScrollNode=f(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");e=this.footerNode=f("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));f(a,e);k&&(a.className+=" dgrid-rtl"+(l("webkit")?"":" dgrid-rtl-nonwebkit"));s(g,"scroll",function(b){c.showHeader&&(d.scrollLeft=b.scrollLeft||g.scrollLeft);b.stopPropagation();s.emit(a,
"scroll",{scrollTarget:g})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=f(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=s(window,"resize",b.throttleDelayed(z,this)))},postCreate:l("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var a=
this.bodyNode,d=this.headerNode,e=this.footerNode,f=d.offsetHeight,k=this.showFooter?e.offsetHeight:0,m=l("quirks")||7>l("ie");this.headerScrollNode.style.height=a.style.marginTop=f+"px";a.style.marginBottom=k+"px";m&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-f-k,0)+"px",k&&(e.style.bottom="1px",setTimeout(function(){e.style.bottom=""},0)));c||(c=l("dom-scrollbar-width"),g=l("dom-scrollbar-height"),l("ie")&&(c++,g++),b.addCssRule(".dgrid-scrollbar-width","width: "+c+"px"),
b.addCssRule(".dgrid-scrollbar-height","height: "+g+"px"),17==c||m||(b.addCssRule(".dgrid-header","right: "+c+"px"),b.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+c+"px")));m&&(d.style.width=a.clientWidth+"px",setTimeout(function(){d.scrollLeft=a.scrollLeft},0))},addCssRule:function(a,c){var d=b.addCssRule(a,c);this.cleanAddedRules&&this._listeners.push(d);return d},on:function(a,b){var c=s(this.domNode,a,b);l("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){var a=
this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var c=document.getElementById(b);c&&this.removeRow(c,!0)}for(b=0;b<a.length;b++)(c=a[b])&&c.cancel();this.observers=[];this._numObservers=0;this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this._started=!1;this.cleanup();f(this.domNode,"!");this.inherited(arguments)},refresh:function(){this.cleanup();this._rowIdToObject=
{};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,c,d,g){if(b){var e=this.insertRow(a,b,c,d,g);f(e,".ui-state-highlight");setTimeout(function(){f(e,"!ui-state-highlight")},this.highlightDuration);return e}},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(this.maintainOddEven&&-1<(a.className+" ").indexOf("dgrid-row ")&&f(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++);
while((a=a.nextSibling)&&a.rowIndex!=b)}},renderArray:function(a,b,c){function d(){var b=arguments;if(-1<v)for(var e=0;e<b.length;e++){var f=b[e],m=l[f?0:l.length-1];if(m){var m=g(m),n=k.row(m);(n=n&&k[f?"up":"down"](n))&&n.element!=m&&(f=f?"unshift":"push",a[f](n.data),l[f](n.element),c.count++)}}}function g(a){return!r.isDescendant(a,k.domNode)&&document.getElementById(a.id)?k.row(a.id.slice(k.id.length+5)).element:a}function e(a){z=k.insertRow(a,q,null,m++,c);z.observerIndex=v;return z}function f(a){s=
a.slice(0);(p=b?b.parentNode:k.contentNode)&&p.parentNode&&(p!==k.contentNode||a.length)?(p.insertBefore(q,b||null),(z=a[a.length-1])&&k.adjustRowIndices(z)):n[v]&&k.cleanEmptyObservers&&"undefined"!==typeof v&&(n[v].cancel(),n[v]=0,k._numObservers--);l=a;u&&(u.rows=l)}c=c||{};var k=this,m=c.start||0,n=this.observers,l,p,v;b||(this._lastCollection=a);if(a.observe){k._numObservers++;var u=a.observe(function(e,f,m){var n,u,q;-1<f&&l[f]&&(n=l.splice(f,1)[0],n.parentNode==p&&((u=n.nextSibling)&&f!=m&&
u.rowIndex--,k.removeRow(n)),c.count--,k._processScroll&&k._processScroll());if(-1<m){if(l.length)if(2>m)q=(q=l[m])&&g(q);else{if(q=l[m-1])q=g(q),q=(q.connected||q).nextSibling}else q=k._getFirstRowSibling&&k._getFirstRowSibling(p);n&&q&&n.id===q.id&&(q=(q.connected||q).nextSibling);q&&!q.parentNode&&(q=document.getElementById(q.id));n=b&&b.parentNode||q&&q.parentNode||k.contentNode;if(n=k.newRow(e,n,q,c.start+m,c))if(n.observerIndex=v,l.splice(m,0,n),!u||m<f)u=(u=n.previousSibling)&&u.rowIndex+1!=
n.rowIndex&&0!=n.rowIndex?u:n;c.count++}0===f?d(1,1):f===a.length-(-1===m?0:1)&&d(0,0);f!=m&&u&&k.adjustRowIndices(u);k._onNotification(l,e,f,m)},!0);v=n.push(u)-1}var q=document.createDocumentFragment(),z,s;if(a.map){if(l=a.map(e,console.error),l.then)return a.then(function(b){a=b;return l.then(function(a){f(a);d(1,1,0,0);return s})})}else{l=[];for(var t=0,Z=a.length;t<Z;t++)l[t]=e(a[t])}f(l);d(1,1,0,0);return s},_onNotification:function(a,b,c,d){},renderHeader:function(){},_autoId:0,insertRow:function(a,
b,c,d,g){var e=g.parentId,e=this.id+"-row-"+(e?e+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),f=document.getElementById(e),k=f&&f.previousSibling;f&&(f===c&&(c=(c.connected||c).nextSibling),this.removeRow(f));f=this.renderRow(a,g);f.className=(f.className||"")+" ui-state-default dgrid-row "+(1==d%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[f.id=e]=a;b.insertBefore(f,c||null);k&&this.adjustRowIndices(k);f.rowIndex=d;return f},renderRow:function(a,
b){return f("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||f(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var c=a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+
"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var g,e;e=g=a.element;b=b||1;do if(a=g[0>b?"previousSibling":"nextSibling"]){do if((g=a)&&-1<(g.className+" ").indexOf(c+" ")){e=g;b+=0>b?1:-1;break}while(a=(!d||!g.hidden)&&g[0>b?"lastChild":"firstChild"])}else if(g=g.parentNode,!g||g===this.bodyNode||g===this.headerNode)break;while(b);return e},up:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){a.element||
(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:l("touch")?function(b){return this.useTouchScroll?this.inherited(arguments):a.call(this,b)}:a,getScrollPosition:l("touch")?function(){return this.useTouchScroll?this.inherited(arguments):n.call(this)}:n,get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,
a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:e,_setClass:k,_getClassName:e,_setClassName:k,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();this._lastCollection&&(a.length&&("string"!=typeof a&&(b=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(c,d){var g=c[a],e=d[a];void 0===g&&(g="");void 0===e&&(e="");return g==
e?0:g>e==!b?1:-1})),this.renderArray(this._lastCollection))},sort:function(a,b){q.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4");this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;f(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(a){q.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4");
this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;f(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dgrid/util/misc":function(){define(["put-selector/put"],function(q){var t=[],r,s,l,b=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,p={defaultDelay:15,throttle:function(b,f,d){var k=!1;d=d||p.defaultDelay;return function(){k||(k=!0,b.apply(f,arguments),setTimeout(function(){k=!1},d))}},throttleDelayed:function(b,f,d){var k=!1;d=d||p.defaultDelay;return function(){if(!k){k=
!0;var e=arguments;setTimeout(function(){k=!1;b.apply(f,e)},d)}}},debounce:function(b,f,d){var k;d=d||p.defaultDelay;return function(){k&&(clearTimeout(k),k=null);var e=arguments;k=setTimeout(function(){b.apply(f,e)},d)}},each:function(b,f,d){var k,e;if(b)if("number"===typeof b.length)for(k=0,e=b.length;k<e;k++)f.call(d,b[k],k,b);else for(k in b)f.call(d,b[k],k,b)},addCssRule:function(b,f){r||(r=q(document.getElementsByTagName("head")[0],"style"),r=r.sheet||r.styleSheet,s=r.deleteRule?"deleteRule":
"removeRule",l=r.cssRules?"cssRules":"rules");var d=t.length;t[d]=(r.cssRules||r.rules).length;r.addRule?r.addRule(b,f):r.insertRule(b+"{"+f+"}",t[d]);return{get:function(b){return r[l][t[d]].style[b]},set:function(b,e){"undefined"!==typeof t[d]&&(r[l][t[d]].style[b]=e)},remove:function(){var b=t[d],e,f;if(void 0!==b)for(r[s](b),t[d]=void 0,e=d+1,f=t.length;e<f;e++)t[e]>b&&t[e]--}}},escapeCssIdentifier:function(m){return m.replace(b,"\\$1")}};return p})},"xstyle/has-class":function(){define(["dojo/has"],
function(q){var t={};return function(){for(var r,s=arguments,l=0;l<s.length;l++)if(r=s[l],!t[r]){t[r]=!0;var b=r.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),p=q(b[2]),m=-b[4];(0<m?m<=p&&(-b[5]||m)>=p:!!p)==!b[1]&&(document.documentElement.className+=" has-"+r)}}})},"xstyle/css":function(){define(["require"],function(q){function t(q,s,l){var b=document.documentElement;q=b.insertBefore(document.createElement(q),b.firstChild);q.id=s;s=(q.currentStyle||getComputedStyle(q,null))[l];b.removeChild(q);
return s}return{load:function(r,s,l,b){function p(){var b=t("x-parse",null,"content");b&&"none"!=b?s([eval(b)],l):l()}var m=s.toUrl(r),f=s.cache&&s.cache["url:"+m];if(f)return f.xCss&&(f=f.cssText),q(["./util/createStyleSheet"],function(b){b(f)}),p();if("none"==t("div",r.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return p();q(["./core/load-css"],function(b){b(m,p)})}}})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/dom dojo/on ./util/misc put-selector/put".split(" "),
function(q,t,r,s,l,b,p,m,f){return r([q,t],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:m.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var b=this;p(this.bodyNode,"scroll",m[this.pagingMethod](function(f){b._processScroll(f)},null,this.pagingDelay))},renderQuery:function(b,k,e){function m(b){f(q,"!");if(b)throw a._refreshDeferred&&(a._refreshDeferred.reject(b),
delete a._refreshDeferred),b;}var a=this,c={query:b,count:0,node:k,options:e},g=this.preload,p;if(!k){var u={node:f(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:b,next:c,options:e};u.node.style.height="0";c.node=k=f(this.contentNode,"div.dgrid-preload");c.previous=u}k.rowIndex=this.minRowsPerPage;g?((c.next=g.next)&&this.bodyNode.scrollTop>=g.node.offsetTop?c.previous=g:(c.next=g,c.previous=g.previous),c.previous.next=c,c.next.previous=c):this.preload=c;var q=f(k,"-div.dgrid-loading");
f(q,"div.dgrid-below").innerHTML=this.loadingMessage;e=s.mixin(this.get("queryOptions"),e,{start:0,count:this.minRowsPerPage},"level"in b?{queryLevel:b.level}:null);this._trackError(function(){return p=b(e)});if("undefined"===typeof p)m();else return l.when(a.renderArray(p,k,e),function(b){return l.when("undefined"===typeof p.total?p.length:p.total,function(d){var g=b.length,m=k.parentNode,n=a.noDataNode;f(q,"!");"queryLevel"in e||(a._total=d);0===d&&(n&&(f(n,"!"),delete a.noDataNode),a.noDataNode=
n=f("div.dgrid-no-data"),m.insertBefore(n,a._getFirstRowSibling(m)),n.innerHTML=a.noDataMessage);for(n=m=0;n<g;n++)m+=a._calcRowHeight(b[n]);g&&m&&(a.rowHeight=m/g);d-=g;c.count=d;k.rowIndex=g;d?k.style.height=Math.min(d*a.rowHeight,a.maxEmptySpace)+"px":(k.style.display="none",e.count++);a._previousScrollPosition&&(a.scrollTo(a._previousScrollPosition),delete a._previousScrollPosition);a._processScroll();a._refreshDeferred&&(a._refreshDeferred.resolve(p),delete a._refreshDeferred);return b},m)},
m),p},refresh:function(b){var f=this,e=b&&b.keepScrollPosition,m;"undefined"===typeof e&&(e=this.keepScrollPosition);e&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store)return e=this._refreshDeferred=new l,m=f.renderQuery(function(a){return f.store.query(f.query,a)}),"undefined"===typeof m&&e.reject(),e.then(function(a){setTimeout(function(){p.emit(f.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:f,results:a})},0);delete f._refreshDeferred;
return a},function(a){delete f._refreshDeferred;throw a;})},resize:function(){this.inherited(arguments);this._processScroll()},_getFirstRowSibling:function(b){return b.lastChild},_calcRowHeight:function(b){var f=b.previousSibling;return(f=f&&!/\bdgrid-preload\b/.test(f.className)&&f)?b.offsetTop-f.offsetTop:b.offsetHeight},lastScrollTop:0,_processScroll:function(b){function k(b,c,d,g){var k=a.farOffRemoval,m=b.node;if(c>2*k){for(var n,l=m[d],p=0,v=0,u=[];n=l;){var q=a._calcRowHeight(n);if(p+q+k>c||
0>l.className.indexOf("dgrid-row")&&0>l.className.indexOf("dgrid-loading"))break;l=n[d];p+=q;v+=n.count||1;a.removeRow(n,!0);u.push(n)}b.count+=v;g?(m.rowIndex-=v,e(b)):m.style.height=m.offsetHeight+p+"px";var y=f("div",u);setTimeout(function(){f(y,"!")},1)}}function e(b,c){b.node.style.height=Math.min(b.count*a.rowHeight,c?Infinity:a.maxEmptySpace)+"px"}function m(a,b){do a=b?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var a=this,c=a.bodyNode;b=b&&b.scrollTop||this.getScrollPosition().y;
var g=c.offsetHeight+b,p,u,q=a.preload,r=a.lastScrollTop,y=a.bufferRows*a.rowHeight,t=y-a.rowHeight,D,B,G,J=!0;for(a.lastScrollTop=b;q&&!q.node.offsetWidth;)q=q.previous;for(;q&&q!=p;){p=a.preload;a.preload=q;u=q.node;var M=u.offsetTop;if(g+1+t<M)q=m(q,J=!1);else if(b-1-t>M+u.offsetHeight)q=m(q,J=!0);else{var F=((u.rowIndex?b-y:g)-M)/a.rowHeight,M=(g-b+2*y)/a.rowHeight,H=Math.max(Math.min((b-r)*a.rowHeight,a.maxRowsPerPage/2),a.maxRowsPerPage/-2),M=M+Math.min(Math.abs(H),10);0==u.rowIndex&&(F-=M);
F=Math.max(F,0);10>F&&0<F&&M+F<a.maxRowsPerPage&&(M+=Math.max(0,F),F=0);M=Math.min(Math.max(M,a.minRowsPerPage),a.maxRowsPerPage,q.count);if(0==M)q=m(q,J);else{var M=Math.ceil(M),F=Math.min(Math.floor(F),q.count-M),S=s.mixin(a.get("queryOptions"),q.options);q.count-=M;var K=u,x,L=a.queryRowsOverlap;if(H=0<u.rowIndex&&q){var I=q.previous;I&&(k(I,b-(I.node.offsetTop+I.node.offsetHeight),"nextSibling"),0<F&&I.node==u.previousSibling?(F=Math.min(q.count,F),q.previous.count+=F,e(q.previous,!0),u.rowIndex+=
F,L=0):M+=F,q.count-=F);S.start=u.rowIndex-L;S.count=Math.min(M+L,a.maxRowsPerPage);u.rowIndex=S.start+S.count}else q.next&&(k(q.next,q.next.node.offsetTop-g,"previousSibling",!0),K=u.nextSibling,K==q.next.node?(q.next.count+=q.count-F,q.next.node.rowIndex=F+M,e(q.next),q.count=F,L=0):x=!0),S.start=q.count,S.count=Math.min(M+L,a.maxRowsPerPage);x&&K&&K.offsetWidth&&(x=K.offsetTop);e(q);"level"in q.query&&(S.queryLevel=q.query.level);if("queryLevel"in S||!(S.start>a._total||0>S.count)){u=f(K,"-div.dgrid-loading[style=height:"+
M*a.rowHeight+"px]");f(u,"div.dgrid-"+(H?"below":"above")).innerHTML=a.loadingMessage;u.count=M;var T=q.query(S);if(void 0===a._trackError(function(){return T})){f(u,"!");return}(function(b,c,d,g,k){G=l.when(a.renderArray(k,b,S),function(c){B=k;K=b.nextSibling;f(b,"!");if(g&&K&&K.offsetWidth){var m=a.getScrollPosition();a.scrollTo({x:m.x,y:m.y+K.offsetTop-g,preserveMomentum:!0})}l.when(k.total||k.length,function(b){"queryLevel"in S||(a._total=b);d&&(d.count=b-d.node.rowIndex,0===d.count&&S.count++,
e(d))});a._processScroll();return c},function(a){f(b,"!");throw a;})}).call(this,u,c,H,x,T);q=q.previous}}}}G&&(D=this._refreshDeferred)&&(delete this._refreshDeferred,l.when(G,function(){D.resolve(B)}))},removeRow:function(d,f){if(d){var e=d.previousSibling,m=d.nextSibling,a;if(a=e)a=e.observerIndex,a=null!=a?a:e.previousObserverIndex;e=a;if(a=m)a=m.observerIndex,a=null!=a?a:m.nextObserverIndex;m=d.observerIndex;d.observerIndex=void 0;f&&(d.nextObserverIndex=a,d.previousObserverIndex=e);if(this.cleanEmptyObservers&&
-1<m&&m!==e&&m!==a&&(e=this.observers,a=e[m])){if(!f)for(var c=a.rows,g=0;g<c.length;g++)if(c[g]!=d&&b.isDescendant(c[g],this.domNode))return this.inherited(arguments);a.cancel();this._numObservers--;e[m]=0}}this.inherited(arguments)}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(q,t,r,s,l,b,p){function m(b){return b}function f(b){if("object"!==typeof b)b=Error(b);else if("cancel"===
b.dojoType)return;b.grid=this;l.emit(this.domNode,"dgrid-error",{grid:this,error:b,cancelable:!0,bubbles:!0})&&console.error(b)}return t(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};b.before(this,"configStructure",r.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments);this.store&&this._updateNotifyHandle(this.store)},
destroy:function(){this.inherited(arguments);this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(b){b.set&&(this._columnsWithSet[b.field]=b);this.inherited(arguments)},_updateNotifyHandle:function(d){this._notifyHandle&&(this._notifyHandle.remove(),delete this._notifyHandle);d&&"function"===typeof d.notify&&(this._notifyHandle=b.after(d,"notify",r.hitch(this,"_onNotify"),!0))},_setStore:function(b,f,e){this._updateNotifyHandle(b);this.store=b;this.dirty={};this.set("query",f,e)},
_setQuery:function(b,f){var e=f&&f.sort;this.query=void 0!==b?b:this.query;this.queryOptions=f||this.queryOptions;e?this.set("sort",e):this.refresh()},setStore:function(b,f,e){q.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4");this.set("store",b,f,e)},setQuery:function(b,f){q.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4");this.set("query",b,f)},_getQueryOptions:function(){var b=r.delegate(this.queryOptions,{});if("function"===typeof this._sort||this._sort.length)b.sort=
this._sort;return b},_getQuery:function(){var b=this.query;return"object"==typeof b&&null!=b?r.delegate(b,{}):b},_setSort:function(b,f){this.store&&(this._lastCollection=null);this.inherited(arguments)},_onNotify:function(b,f){this.inherited(arguments);b&&1>this._numObservers&&this.refresh({keepScrollPosition:!0})},insertRow:function(b,f,e,m,a){var c=this.store,g=this.dirty,c=c&&c.getIdentity(b),l;c in g&&!(c in this._updating)&&(l=g[c]);l&&(b=r.delegate(b,l));return this.inherited(arguments)},updateDirty:function(b,
f,e){var m=this.dirty,a=m[b];a||(a=m[b]={});a[f]=e},setDirty:function(b,f,e){q.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(b,f,e)},save:function(){function b(a,c){return function(b){var d=f._columnsWithSet,g=f._updating,l,p;if("function"===typeof b.set)b.set(c);else for(l in c)b[l]=c[l];for(l in d)p=d[l].set(b),void 0!==p&&(b[l]=p);g[a]=!0;return s.when(e.put(b),function(){delete m[a];delete g[a]})}}var f=this,e=this.store,m=this.dirty,a=new s,c=a.promise,
g=function(a){var b;return f.getBeforePut||!(b=f.row(a).data)?function(){return e.get(a)}:function(){return b}},l;for(l in m)var p=b(l,m[l]),c=c.then(g(l)).then(p);a.resolve();return c},revert:function(){this.dirty={};this.refresh()},_trackError:function(b){var k;"string"==typeof b&&(b=r.hitch(this,b));try{k=b()}catch(e){f.call(this,e)}return s.when(k,m,r.hitch(this,f))},newRow:function(){var b=this.inherited(arguments);this.noDataNode&&(p(this.noDataNode,"!"),delete this.noDataNode);return b},removeRow:function(b,
f){var e={element:b};!f&&this.noDataMessage&&this.up(e).element===b&&this.down(e).element===b&&(this.noDataNode=p(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})})},"dgrid/Selection":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/Deferred dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),function(q,t,r,s,l,b,p,m,f){function d(a,b){for(var c=
a.unselectable=b?"on":"",d=a.getElementsByTagName("*"),g=d.length;--g;)"INPUT"!==d[g].tagName&&"TEXTAREA"!==d[g].tagName&&(d[g].unselectable=c)}function k(a,c){var g=a.bodyNode,e=c?"text":21>l("ff")?"-moz-none":"none";n?g.style[n]=e:l("dom-selectstart")?c||a._selectstartHandle?c&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=s(g,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(d(g,
!c),c||a._unselectableHandle)?c&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=b.after(a,"renderRow",function(a){d(a,!0);return a})}l.add("pointer",function(a,b,c){return"onpointerdown"in c?"pointer":"onmspointerdown"in c?"MSPointer":!1});l.add("css-user-select",function(a,b,c){a=c.style;b=["Khtml","O","ms","Moz","Webkit"];c=b.length;var d="userSelect";do if("undefined"!==typeof a[d])return d;while(c--&&(d=b[c]+"UserSelect"));return!1});
l.add("dom-selectstart","undefined"!==typeof document.onselectstart);var e=l("mac")?"metaKey":"ctrlKey",n=l("css-user-select"),a=(p=l("pointer"))&&"MS"===p.slice(0,2),c=p?p+(a?"Down":"down"):"mousedown",g=p?p+(a?"Up":"up"):"mouseup";return t(null,{selectionDelegate:".dgrid-row",selectionEvents:c+","+g+",dgrid-cellfocusin",deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},
postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!=this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+
a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(a){q.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4");this.set("selectionMode",a)},_setAllowTextSelection:function(a){"undefined"!==typeof a?k(this,a):k(this,"none"===this.selectionMode);this.allowTextSelection=a},_handleSelect:function(a,b){if(this[this._selectionHandlerName]&&!("dgrid-cellfocusin"===a.type&&"mousedown"===a.parentType||a.type===g&&b!=this._waitForMouseUp)){this._waitForMouseUp=
null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32==a.keyCode)if(!a.shiftKey&&a.type===c&&this.isSelected(b))this._waitForMouseUp=b;else this[this._selectionHandlerName](a,b);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,b){var c=a.keyCode?a.ctrlKey:a[e];this._lastSelected===b?this.select(b,null,!c||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var c=this._lastSelected,d=a.keyCode?a.ctrlKey:
a[e],g;a.shiftKey||(g=d?null:!0,c=null);this.select(b,c,g);c||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:a[e])||this.clearSelection(null,!0);this._multipleSelectionHandler(a,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var a=this,c=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};l("touch")&&!l("pointer")?s(this.contentNode,m.selector(c,m.tap),function(b){a._handleSelect(b,
this)}):s(this.contentNode,s.selector(c,this.selectionEvents),function(b){a._handleSelect(b,this)});this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)});if(this.allowSelectAll)this.on("keydown",function(b){b[e]&&65==b.keyCode&&!/\bdgrid-input\b/.test(b.target.className)&&(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())});this._setStore&&b.after(this,"_setStore",function(){a._updateDeselectionAspect()});this._updateDeselectionAspect()},_updateDeselectionAspect:function(){function a(b,
d,g){b=d||b&&b[c.idProperty||"id"];if(null!=b&&(d=(b=c.row(b))&&c.selection[b.id]))c[g](b,null,d)}var c=this,d=this.store,g,e;this._removeDeselectSignals&&this._removeDeselectSignals();d&&d.notify?(g=b.before(d,"notify",function(b,c){b||a(b,c,"deselect")}),e=b.after(d,"notify",function(b,c){a(b,c,"select")},!0),this._removeDeselectSignals=function(){g.remove();e.remove()}):(g=b.before(this,"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(c)}),this._removeDeselectSignals=
function(){g.remove()})},allowSelect:function(a){return!0},_fireSelectionEvent:function(a){var b=this._selectionEventQueues[a],c=this._selectionTriggerEvent,d;d={bubbles:!0,grid:this};c&&(d.parentType=c.type);d[this._selectionTargetType]=b;s.emit(this.contentNode,"dgrid-"+a,d);this._selectionEventQueues[a]=[]},_fireSelectionEvents:function(){var a=this._selectionEventQueues,b;for(b in a)a[b].length&&this._fireSelectionEvent(b)},_select:function(a,b,c){var d,g,e;"undefined"===typeof c&&(c=!0);a.element||
(a=this.row(a));if(!1===c||this.allowSelect(a))if(d=this.selection,g=d[a.id],null===c&&(c=!g),e=a.element,c||this.allSelected?d[a.id]=c:delete this.selection[a.id],e&&(c?f(e,".dgrid-selected.ui-state-active"):f(e,"!dgrid-selected!ui-state-active")),c!==g&&e&&this._selectionEventQueues[(c?"":"de")+"select"].push(a),b)if(b.element||(b=this.row(b)),b)for(e=(b=b.element)&&(b.compareDocumentPosition?2==b.compareDocumentPosition(e):b.sourceIndex>e.sourceIndex)?"down":"up";a.element!=b&&(a=this[e](a));)this._select(a,
null,c);else this._lastSelected=e,console.warn("The selection range has been reset because the beginning of the selection is no longer in the DOM. If you are using OnDemandList, you may wish to increase farOffRemoval to avoid this, but note that keeping more nodes in the DOM may impact performance.")},select:function(a,b,c){this._select(a,b,c);this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&
this._select(c,null,!1);b||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this._select(b.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&
this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this,b=this.inherited(arguments);r.when(b,function(b){var c=a.selection,d,g,e;for(d=0;d<b.length;d++)g=a.row(b[d]),(e=g.id in c?c[g.id]:a.allSelected)&&a._select(g,null,e);a._fireSelectionEvents()});return b}})})},"dgrid/selector":function(){define("dojo/_base/kernel dojo/_base/array dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),function(q,t,r,s,l,b){return function(p,m){function f(b){return!a.allowSelect(a.row(b))}
function d(b){return function(d){var g=d.rows,e=g.length;d="false";var f;for(f=0;f<e;f++){var k=a.cell(g[f],p.id).element;k&&(k=(k.contents||k).input)&&!k.disabled&&(k.checked=b,k.setAttribute("aria-checked",b))}if("checkbox"==c.type){g=a.selection;e=!1;for(f in g)if(g[f]!=a.allSelected){e=!0;break}c.indeterminate=e;c.checked=a.allSelected;e?d="mixed":a.allSelected&&(d="true");c.setAttribute("aria-checked",d)}}}function k(c){if("click"==c.type||32==c.keyCode||!l("opera")&&13==c.keyCode||0===c.keyCode){var g=
a.row(c),e=a._lastSelected&&a.row(a._lastSelected);a._selectionTriggerEvent=c;"radio"==m?e&&e.id==g.id||(a.clearSelection(),a.select(g,null,!0),a._lastSelected=g.element):g?(c.shiftKey?d(!0)({rows:[g]}):e=null,e=c.shiftKey?e:null,a.select(e||g,g,e?void 0:null),a._lastSelected=g.element):(b(this,(a.allSelected?"!":".")+"dgrid-select-all"),a[a.allSelected?"clearSelection":"selectAll"]());a._selectionTriggerEvent=null}}function e(){a._hasSelectorInputListener=!0;n.push(a.on(".dgrid-selector:click,.dgrid-selector:keydown",
k));var b=a._handleSelect;a._handleSelect=function(a){this.cell(a).column!=p&&b.apply(this,arguments)};if("function"==typeof p.disabled){var c=a.allowSelect,g=p.disabled;a.allowSelect=function(a){var b=c.call(this,a);return g===f?b:b&&!g.call(p,a.data)}}p.disabled=f;n.push(a.on("dgrid-select",d(!0)));n.push(a.on("dgrid-deselect",d(!1)))}var n=[],a,c;p||(p={});p.type&&(p.selectorType=p.type,q.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4"));p.selectorType=m=m||p.selectorType||
"checkbox";p.sortable=!1;var g="function"==typeof m?m:function(c,d,g){var f=d.parentNode,k;a._hasSelectorInputListener||e();k=p.disabled;b(f&&f.contents?f:d,".dgrid-selector");d=d.input||(d.input=b(d,"input[type="+m+"]",{tabIndex:isNaN(p.tabIndex)?-1:p.tabIndex,disabled:k&&("function"==typeof k?k.call(p,g):k),checked:c}));d.setAttribute("aria-checked",!!c);return d};s.after(p,"init",function(){a=p.grid});s.after(p,"destroy",function(){t.forEach(n,function(a){a.remove()});a._hasSelectorInputListener=
!1});p.renderCell=function(b,c,d,e,f){c=(c=b&&a.row(b))&&a.selection[c.id];g(c,d,b)};p.renderHeaderCell=function(b){var d="label"in p?p.label:p.field||"";"radio"!=m&&a.allowSelectAll?g(!1,b,{}):(b.appendChild(document.createTextNode(d)),a._hasSelectorInputListener||e());c=b.lastChild};return p}})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(q,
t,r,s,l,b,p,m,f,d){function k(a,b,g,e){e=this.grid.isRTL?"right":"left";var f=".dgrid-expando-icon";b&&(f+=".ui-icon.ui-icon-triangle-1-"+(g?"se":"e"));a=d("div"+f+"[style=margin-"+e+": "+a*(this.indentWidth||9)+"px; float: "+e+"]");a.innerHTML="&nbsp;";return a}function e(a){var b=this,g=this.style.height;g&&(this.style.display="0px"==g?"none":"block");a&&(d(this,".dgrid-tree-resetting"),setTimeout(function(){d(b,"!dgrid-tree-resetting")}));this.style.height=""}function n(a){var c=a.renderCell||
m.defaultRenderCell,g,n;a||(a={});a.shouldExpand=a.shouldExpand||function(a,b,c){return c};b.after(a,"init",function(){var c=a.grid,m=".dgrid-content .dgrid-column-"+a.id,q=[];c.cleanEmptyObservers=!1;if(!c.store)throw Error("dgrid tree column plugin requires a store to operate.");a.renderExpando||(a.renderExpando=k);q.push(c.on(a.expandOn||".dgrid-expando-icon:click,"+m+":dblclick,"+m+":keydown",function(a){var b=c.row(a);c.store.mayHaveChildren&&!c.store.mayHaveChildren(b.data)||"keydown"==a.type&&
32!=a.keyCode||"dblclick"==a.type&&n&&1<n.count&&b.id==n.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||c.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(n&&n.id==c.row(a).id?n.count++:n={id:c.row(a).id,count:1})}));p("touch")&&q.push(c.on(f.selector(m,f.dbltap),function(){c.expand(this)}));c._expanded||(c._expanded={});q.push(b.after(c,"insertRow",function(b){var c=this.row(b);a.shouldExpand(c,g,this._expanded[c.id])&&this.expand(b,!0,!0);return b}));q.push(b.before(c,"removeRow",
function(a,b){var g=a.connected;g&&(s(">.dgrid-row",g).forEach(function(a){c.removeRow(a,!0)}),b||d(g,"!"))}));a.collapseOnRefresh&&q.push(b.after(c,"cleanup",function(){this._expanded={}}));c._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};c.expand=function(b,g,f){var k=b.element?b:c.row(b),m=p("transitionend");b=new r;var n=b.promise;b.resolve();b=k.element;if((b=-1<b.className.indexOf("dgrid-expando-icon")?b:s(".dgrid-expando-icon",b)[0])&&b.mayHaveChildren&&
(f||g!==!!this._expanded[k.id])){var v=void 0===g?!this._expanded[k.id]:g;d(b,".ui-icon-triangle-1-"+(v?"se":"e")+"!ui-icon-triangle-1-"+(v?"e":"se"));var q=b.preloadNode;g=k.element;var z,t,A,x={originalQuery:this.query};if(!q){z=g.connected=d("div.dgrid-tree-container");var q=b.preloadNode=d(g,"+",z,"div.dgrid-preload"),L=function(a){return c.store.getChildren(k.data,a)};a.allowDuplicates&&(x.parentId=k.id);"level"in b&&(L.level=b.level);n=n.then(function(){return c.renderQuery?c.renderQuery(L,
q,x):c.renderArray(L(x),q,"level"in L?{queryLevel:L.level}:{})}).then(function(){if(c._expanded[k.id]&&m){var a=z.scrollHeight;z.style.height=a?a+"px":"auto"}});m?l(z,m,e):e.call(z)}z=g.connected;z.hidden=!v;t=z.style;!m||f?(t.display=v?"block":"none",t.height=""):(v?(t.display="block",A=z.scrollHeight,t.height="0px"):(d(z,".dgrid-tree-resetting"),t.height=z.scrollHeight+"px"),setTimeout(function(){d(z,"!dgrid-tree-resetting");t.height=v?A?A+"px":"auto":"0px"}));v?this._expanded[k.id]=!0:delete this._expanded[k.id]}return n};
b.after(a,"destroy",function(){t.forEach(q,function(a){a.remove()});delete c.expand;delete c._calcRowHeight})});a.renderCell=function(b,e,f,k){var m=a.grid,n=Number(k&&k.queryLevel)+1,l=!m.store.mayHaveChildren||m.store.mayHaveChildren(b),p=k.parentId,n=g=isNaN(n)?0:n,m=a.renderExpando(n,l,m._expanded[(p?p+"-":"")+m.store.getIdentity(b)],b);m.level=n;m.mayHaveChildren=l;(b=c.call(a,b,e,f,k))&&b.nodeType?(d(f,m),d(f,b)):f.insertBefore(m,f.firstChild)};return a}n.defaultRenderExpando=k;return n})},
"dgrid/util/has-css3":function(){define(["dojo/has","xstyle/css!../css/has-transforms3d.css"],function(q){var t=["ms","O","Moz","Webkit"];q.add("css-transitions",function(q,s,l){q=l.style;if(void 0!==q.transitionProperty)return!0;for(s=t.length;s--;)if(void 0!==q[t[s]+"TransitionProperty"])return t[s];return!1});q.add("transitionend",function(){var r=q("css-transitions");return r?!0===r?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[r]:!1});
q.add("css-transforms",function(q,s,l){q=l.style;if(void 0!==q.transformProperty)return!0;for(s=t.length;s--;)if(void 0!==q[t[s]+"Transform"])return t[s];return!1});q.add("css-transforms3d",function(q,s,l){s=!1;l.className="has-csstransforms3d";document.body.appendChild(l);q=l.offsetLeft;9===q?s=!0:9<q&&(s=t[q-10]||!1);document.body.removeChild(l);l.className="";return s});return q})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-geometry dojo/has ../util/misc put-selector/put dojo/_base/html xstyle/css!../css/extensions/ColumnResizer.css".split(" "),
function(q,t,r,s,l,b,p,m,f){function d(a){for(var b=a.length,d=b,e=a[0].length,f=Array(b);b--;)f[b]=Array(e);for(var k={},b=0;b<d;b++)for(var m=f[b],n=a[b],l=0,p=0;l<e;l++){var q=n[p],s;if("undefined"==typeof m[l]){m[l]=q.id;if(q.rowSpan&&1<q.rowSpan){s=f;for(var r=q.rowSpan,t=b,H=l,S=q.id,K=1;K<r;K++)s[t+K][H]=S}if(0<b&&q.colSpan&&1<q.colSpan)for(s=1;s<q.colSpan;s++)if(m[++l]=q.id,q.rowSpan&&1<q.rowSpan)for(var r=f,t=q.rowSpan,H=b,S=l,K=q.id,x=1;x<t;x++)r[H+x][S]=K;k[q.id]=a[0][l].id;p++}}return k}
function k(a,b,d,e){if(!(0>=d)){var f=a.columns[b],k={grid:a,columnId:b,width:d,bubbles:!0,cancelable:!0};e&&(k.parentType=e);if(!a._resizedColumns||t.emit(a.headerNode,"dgrid-columnresize",k))return"auto"===d?delete f.width:(f.width=d,d+="px"),(e=a._columnSizes[b])?e.set("width",d):e=m.addCssRule("#"+m.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+b,"width: "+d+";"),a._columnSizes[b]=e,a.resize(),!0}}var e,n=0,a={create:function(){e=f("div.dgrid-column-resizer")},destroy:function(){f(e,"!");
e=null},show:function(a){a=b.position(a.domNode,!0);e.style.top=a.y+"px";e.style.height=a.h+"px";f(document.body,e)},move:function(a){e.style.left=a+"px"},hide:function(){e.parentNode.removeChild(e)}};return q(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);n++||a.create()},destroy:function(){this.inherited(arguments);for(var b in this._columnSizes)this._columnSizes[b].remove();--n||a.destroy()},resizeColumnWidth:function(a,
b){return k(this,a,b)},configStructure:function(){var a=this._oldColumnSizes=s.mixin({},this._columnSizes),b;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(b in a)b in this._columnSizes||a[b].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,d;"width"in a&&((d=this._oldColumnSizes[b])?d.set("width",a.width+"px"):d=m.addCssRule("#"+this.domNode.id+" .dgrid-column-"+b,"width: "+a.width+"px;"),this._columnSizes[b]=d)},renderHeader:function(){this.inherited(arguments);
if(!this.resizerDisabled){var a=this,b;if(this.columnSets&&this.columnSets.length)for(var e=this.columnSets.length;e--;)b=s.mixin(b||{},d(this.columnSets[e]));else this.subRows&&1<this.subRows.length&&(b=d(this.subRows));for(var e=r(".dgrid-cell",a.headerNode),k=e.length;k--;){var n=e[k],l=n.columnId,q=a.columns[l],C=n.childNodes;if(q&&!1!==q.resizable){q=f("div.dgrid-resize-header-container");for(n.contents=q;0<C.length;)f(q,C[0]);f(n,q,"div.dgrid-resize-handle.resizeNode-"+l).columnId=b?b[l]:l}}a.mouseMoveListen||
(t(a.headerNode,".dgrid-resize-handle:mousedown"+(p("touch")?",.dgrid-resize-handle:touchstart":""),function(b){a._resizeMouseDown(b,this);a.mouseMoveListen.resume();a.mouseUpListen.resume()}),a._listeners.push(a.mouseMoveListen=t.pausable(document,"mousemove"+(p("touch")?",touchmove":""),m.throttleDelayed(function(b){a._updateResizerPosition(b)}))),a._listeners.push(a.mouseUpListen=t.pausable(document,"mouseup"+(p("touch")?",touchend":""),function(b){a._resizeMouseUp(b);a.mouseMoveListen.pause();
a.mouseUpListen.pause()})),a.mouseMoveListen.pause(),a.mouseUpListen.pause())}},_resizeMouseDown:function(b,d){b.preventDefault();l.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(b);this._targetCell=r(".dgrid-column-"+d.columnId,this.headerNode)[0];this._updateResizerPosition(b);a.show(this)},_resizeMouseUp:function(b){var d=this._columnSizes,e,f,m;this.adjustLastColumn&&(m=this.headerNode.clientWidth-1);this._resizedColumns||(e=r(".dgrid-cell",this.headerNode),this.columnSets&&
this.columnSets.length?e=e.filter(function(a){return"0"==a.columnId.split("-")[0]&&!(a.columnId in d)}):this.subRows&&1<this.subRows.length&&(e=e.filter(function(a){return"0"==a.columnId.charAt(0)&&!(a.columnId in d)})),f=e.map(function(a){return a.offsetWidth}),e.forEach(function(a,b){this.resizeColumnWidth(a.columnId,f[b])},this),this._resizedColumns=!0);l.setSelectable(this.domNode,!0);e=this._targetCell;var n=this._getResizeMouseLocation(b)-this._startX,p=e.offsetWidth+n,q=this._getResizedColumnWidths(),
s=q.totalWidth,q=q.lastColId,t=r(".dgrid-column-"+q,this.headerNode)[0].offsetWidth;p<this.minWidth&&(p=this.minWidth);k(this,e.columnId,p,b.type)&&e.columnId!=q&&this.adjustLastColumn&&(s+n<m?k(this,q,"auto",b.type):t-n<=this.minWidth&&k(this,q,this.minWidth,b.type));a.hide();delete this._startX;delete this._targetCell},_updateResizerPosition:function(b){if(this._targetCell){b=this._getResizeMouseLocation(b);var d=this._targetCell.offsetWidth,e=b;d+(b-this._startX)<this.minWidth&&(e=this._startX-
(d-this.minWidth));a.move(e)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=r(".dgrid-cell",this.headerNode);this.columnSets&&this.columnSets.length?b=b.filter(function(a){return"0"==a.columnId.split("-")[1]}):this.subRows&&1<this.subRows.length&&(b=b.filter(function(a){return"0"==a.columnId.charAt(0)}));var d=b.length;if(!d)return{};for(var e=
b[d-1].columnId;d--;)a+=b[d].offsetWidth;return{totalWidth:a,lastColId:e}}})})},"dgrid/extensions/ColumnHider":function(){define("dojo/_base/declare dojo/has dojo/on ../util/misc put-selector/put dojo/i18n!./nls/columnHider xstyle/css!../css/extensions/ColumnHider.css".split(" "),function(q,t,r,s,l,b){var p,m,f=t("ie"),d=f&&t("quirks"),k=8>f||d?"htmlFor":"for";return q(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:b,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,
_renderHiderMenuEntries:function(){var b=this.subRows,d=!0,a,c,g,f;delete this._columnHiderFirstCheckbox;g=0;for(a=b.length;g<a;g++)for(f=0,c=b[g].length;f<c;f++)this._renderHiderMenuEntry(b[g][f]),d&&(d=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[b[g][f].id])},_renderHiderMenuEntry:function(b){var d=b.id,a,c,g;b.hidden&&this._hideColumn(d);b.unhidable||(a=l("div.dgrid-hider-menu-row"),c=this.domNode.id+"-hider-menu-check-"+d,this._columnHiderCheckboxes[d]=g=l(a,"input#"+c+".dgrid-hider-menu-check.hider-menu-check-"+
d+"[type=checkbox]"),l(a,"label.dgrid-hider-menu-label.hider-menu-label"+d+"["+k+"="+c+"]",b.label||b.field||""),l(this.hiderMenuNode,a),b.hidden||(g.checked=!0))},renderHeader:function(){function b(a){a.stopPropagation()}var k=this,a=this.hiderMenuNode,c=this.hiderToggleNode,g;this.inherited(arguments);if(!this.hiderDisabled){if(a){for(g in this._columnHiderRules)this._columnHiderRules[g].remove();a.innerHTML=""}else c=this.hiderToggleNode=l(this.headerScrollNode,"button.ui-icon.dgrid-hider-toggle[type=button]"),
this._listeners.push(r(c,"click",function(a){k._toggleColumnHiderMenu(a)})),a=this.hiderMenuNode=l("div#dgrid-hider-menu-"+this.id+".dgrid-hider-menu[role=dialog][aria-label="+this.i18nColumnHider.popupLabel+"]"),this._listeners.push(r(a,"keyup",function(a){27===(a.charCode||a.keyCode)&&(k._toggleColumnHiderMenu(a),c.focus())})),a.style.display="none",l(this.domNode,a),this._listeners.push(r(a,".dgrid-hider-menu-check:"+(9>f||d?"click":"change"),function(a){k._updateColumnHiddenState(a.target.id.substr(k.id.length+
18),!a.target.checked)})),this._listeners.push(r(a,"mousedown",b),r(c,"mousedown",b)),m||(m=r.pausable(document,"mousedown",function(a){p&&p._toggleColumnHiderMenu(a)}),m.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()}},destroy:function(){this.inherited(arguments);for(var b in this._columnHiderRules)this._columnHiderRules[b].remove()},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_toggleColumnHiderMenu:function(){var b=this._hiderMenuOpened,
d=this.hiderMenuNode,a=this.domNode,c;d.style.display=b?"none":"";b?d.style.height="":(d.offsetHeight>a.offsetHeight-12&&(d.style.height=a.offsetHeight-12+"px"),(c=this._columnHiderFirstCheckbox)&&c.focus());m[b?"pause":"resume"]();p=b?null:this;this._hiderMenuOpened=!b},_hideColumn:function(b){var d="#"+s.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-",a;this._columnHiderRules[b]||(this._columnHiderRules[b]=s.addCssRule(d+b,"display: none;"),8!==t("ie")||t("quirks")||(a=s.addCssRule(".dgrid-row-table",
"display: inline-table;"),window.setTimeout(function(){a.remove()},0)))},_updateColumnHiddenState:function(b,d){d?this._hideColumn(b):(this._columnHiderRules[b]&&this._columnHiderRules[b].remove(),delete this._columnHiderRules[b]);this.columns[b].hidden=d;r.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[b],hidden:d,bubbles:!0});this.resize()},toggleColumnHiddenState:function(b,d){"undefined"===typeof d&&(d=!this._columnHiderRules[b]);this._updateColumnHiddenState(b,d);
this._columnHiderCheckboxes[b].checked=!d}})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/on dojo/query dojo/dnd/Source put-selector/put xstyle/css!../css/extensions/ColumnReorder.css".split(" "),function(q,t,r,s,l,b,p){function m(b,d){var a=d[2],c=b[a?"columnSets":"subRows"][d[1]];return a?c[d[2]]:c}function f(b,d,a){d[2]?b.columnSets[d[1]][d[2]]=a:b.subRows[d[1]]=a}function d(b,d){return d.slice(("dgrid-"+b+"-").length)}var k=/(\d+)(?:-(\d+))?$/;
q=t(b,{copyState:function(){return!1},checkAcceptance:function(b,d){return b==this},_legalMouseDown:function(b){return-1<b.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(b){var n=this.grid,a=k.exec(d(n.id,b[0].getAttribute("dndType"))),c=a[2]?"columnSets":"subRows",g=m(n,a),l=n.columns;this.inherited(arguments);a&&setTimeout(function(){var d=r.map(b[0].parentNode.childNodes,function(a){return l[a.columnId]});f(n,a,d);d={grid:n,subRow:d,column:l[b[0].columnId],
bubbles:!0,cancelable:!0,parentType:"dnd"};d[c]=n[c];s.emit(n.domNode,"dgrid-columnreorder",d)?n.set(c,n[c]):(f(n,a,g),n.renderHeader(),this._sort&&this._sort.length&&this.updateSortArrow(this._sort))},0)}});t=t(null,{columnDndConstructor:q,_initSubRowDnd:function(b,d){var a,c,g,f;c=0;for(g=b.length;c<g;c++)f=b[c],!1!==f.reorderable&&(f=f.headerNode,"TH"!=f.tagName&&(f=f.parentNode),p(f,".dojoDndItem[dndType="+d+"]"),a||(a=f.parentNode));a&&this._columnDndSources.push(new this.columnDndConstructor(a,
{horizontal:!0,grid:this}))},renderHeader:function(){var b="dgrid-"+this.id+"-",d,a;this.inherited(arguments);if(!this.reorderDisabled)if(this._columnDndSources=[],this.columnSets)for(a=0,d=this.columnSets.length;a<d;a++)r.forEach(this.columnSets[a],function(c,d){this._initSubRowDnd(c,b+a+"-"+d)},this);else r.forEach(this.subRows,function(a,d){this._initSubRowDnd(a,b+d)},this)},_destroyColumns:function(){this._columnDndSources&&r.forEach(this._columnDndSources,function(b){b.destroy()});this.inherited(arguments)}});
t.ColumnDndSource=q;return t})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(q,t,r){return q(null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){r.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var q=r.getEnclosingWidget(this.domNode.parentNode);q&&q.isLayoutContainer&&this._resizeHandle.remove()}},
destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);r.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},resize:function(q){q&&t.setMarginBox(this.domNode,q);this.inherited(arguments)},_set:function(q,l){this[q]=l},watch:function(){},getParent:function(){return r.getEnclosingWidget(this.domNode.parentNode)}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(q,
t,r,s){var l={},b={},p={length:0,add:function(m){if(b[m.id])throw Error("Tried to register widget with id=="+m.id+" but that id is already registered");b[m.id]=m;this.length++},remove:function(m){b[m]&&(delete b[m],this.length--)},byId:function(m){return"string"==typeof m?b[m]:m},byNode:function(m){return b[m.getAttribute("widgetId")]},toArray:function(){var m=[],f;for(f in b)m.push(b[f]);return m},getUniqueId:function(m){var f;do f=m+"_"+(m in l?++l[m]:l[m]=0);while(b[f]);return"dijit"==s._scopeName?
f:s._scopeName+"_"+f},findWidgets:function(m,f){function d(e){for(e=e.firstChild;e;e=e.nextSibling)if(1==e.nodeType){var m=e.getAttribute("widgetId");m?(m=b[m])&&k.push(m):e!==f&&d(e)}}var k=[];d(m);return k},_destroyAll:function(){s._curFocus=null;s._prevFocus=null;s._activeStack=[];q.forEach(p.findWidgets(r.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(m){for(;m;){var f=1==m.nodeType&&m.getAttribute("widgetId");
if(f)return b[f];m=m.parentNode}return null},_hash:b};return s.registry=p})},"dijit/main":function(){define(["dojo/_base/kernel"],function(q){return q.dijit})},"dgrid/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/on dojo/topic dojo/has dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList put-selector/put ../Selection dojo/has!touch?../util/touch dojo/has!touch?./_DnD-touch-autoscroll xstyle/css!dojo/resources/dnd.css".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a){var c=q(f,{grid:null,getObject:function(a){var b=this.grid;return b.store.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!=this.grid.bodyNode},onDrop:function(a,b,c){var d=this,e=this._targetAnchor=this.targetAnchor,f=this.grid,k=f.store;!this.before&&e&&(e=e.nextSibling);e=e&&f.row(e);s.when(e&&k.get(e.id),function(e){if(d!=a)d.onDropExternal(a,b,c,e);else d.onDropInternal(b,c,e)})},onDropInternal:function(a,
b,c){var d=this.grid.store,e=this,f=this.grid,k=e._targetAnchor,m;k&&(m=this.before?k.previousSibling:k.nextSibling);(b||m!==a[0]&&(c||f.down(f.row(a[0])).element!=a[0]))&&a.forEach(function(a){s.when(e.getObject(a),function(a){d[b&&d.copy?"copy":"put"](a,{before:c})})})},onDropExternal:function(a,b,c,d){var e=this.grid.store,f=a.grid;b.forEach(function(b,k){s.when(a.getObject(b),function(m){c||(f?s.when(f.store.getIdentity(m),function(c){!k&&a.selectNone();a.delItem(b.id);f.store.remove(c)}):a.deleteSelectedNodes());
e[e.copy?"copy":"put"](m,{before:d})})})},onDndStart:function(a,b,c){this.inherited(arguments);a==this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),d.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(b){m("touch")&&this.isDragging&&1<a.countCurrentTouches(b,this.grid.touchNode)?(p.publish("/dnd/cancel"),d.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(b){m("touch")&&1!==a.countCurrentTouches(b,this.grid.touchNode)||
this.inherited(arguments)},checkAcceptance:function(a,b){return a.getObject&&f.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new k,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});q=q(n,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:c,postMixInProperties:function(){this.inherited(arguments);this.dndParams=t.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(b){d[b.id]=
b.element}function b(a){delete d[a.id]}this.inherited(arguments);this.dndSource=new (this.dndConstructor||c)(this.bodyNode,t.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var d=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){r.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){r.forEach(a.rows,b)});l.after(this,"destroy",function(){delete this.dndSource._selectedNodes;d=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),
c="function"==typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];e(b,".dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});q.GridSource=c;return q})},"dojox/form/CheckedMultiSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/dom-geometry dojo/dom-class dojo/dom-construct dojo/i18n dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Menu dijit/MenuItem dijit/Tooltip dijit/form/_FormSelectWidget dijit/form/ComboButton dojo/text!dojox/form/resources/_CheckedMultiSelectMenuItem.html dojo/text!dojox/form/resources/_CheckedMultiSelectItem.html dojo/text!dojox/form/resources/CheckedMultiSelect.html dojo/i18n!dojox/form/nls/CheckedMultiSelect dijit/form/CheckBox".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u,z,A,y){var C=q("dojox.form._CheckedMultiSelectItem",[f,d,k],{templateString:z,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled||(this.disabled=this.option.disabled=this.option.disabled||!1);this.readOnly||(this.readOnly=this.option.readOnly=this.option.readOnly||!1);
this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=this.option.label},_changeBox:function(){this.get("disabled")||this.get("readOnly")||(this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus())},_onClick:function(a){this.get("disabled")||this.get("readOnly")?s.stop(a):this.checkBox._onClick(a)},_updateBox:function(){this.checkBox.set("value",
this.option.selected)},_setDisabledAttr:function(a){this.disabled=a||this.option.disabled;this.checkBox.set("disabled",this.disabled);b.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(a){this.checkBox.set("readOnly",a);this.readOnly=a}}),D=q("dojox.form._CheckedMultiSelectMenu",n,{multiple:!1,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,c=this.domNode=p.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});
a.parentNode&&a.parentNode.replaceChild(c,a);b.remove(a,"dijitMenuTable");c.className=a.className+" dojoxCheckedMultiSelectMenu";a.className="dijitReset dijitMenuTable";a.setAttribute("role","listbox");c.setAttribute("role","presentation");c.appendChild(a)},resize:function(a){a&&(l.setMarginBox(this.domNode,a),"w"in a&&(this.menuTableNode.style.width="100%"))},onClose:function(){this.inherited(arguments);this.menuTableNode&&(this.menuTableNode.style.width="")},onItemClick:function(a,b){"undefined"==
typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled||a.readOnly)return!1;if(!this.multiple)this.onExecute();a.onClick(b)}}),B=q("dojox.form._CheckedMultiSelectMenuItem",a,{templateString:u,option:null,parent:null,iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"});this.disabled=this.option.disabled;this.checked=this.option.selected;
this.label=this.option.label;this.readOnly=this.option.readOnly;this.inherited(arguments)},onChange:function(a){},_updateBox:function(){b.toggle(this.domNode,"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected);this.domNode.setAttribute("aria-checked",this.option.selected);this.inputNode.checked=this.option.selected;this.parent.multiple||b.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(a){this.disabled||this.readOnly||(this.parent.multiple?(this.option.selected=
!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected)):this.option.selected||(r.forEach(this.parent.getChildren(),function(a){a.option.selected=!1}),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected)));this.inherited(arguments)}});return q("dojox.form.CheckedMultiSelect",g,{templateString:A,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],postMixInProperties:function(){this.inherited(arguments);
this._nlsResources=m.getLocalization("dojox.form","CheckedMultiSelect",this.lang);"$_unset_$"==this.invalidMessage&&(this.invalidMessage=this._nlsResources.invalidMessage)},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown&&(b.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),this.dropDownMenu=new D({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,
onChange:t.hitch(this,"_updateSelection")}))},startup:function(){this.dropDown&&(this.dropDownButton=new v({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode));this.inherited(arguments)},_onMouseDown:function(a){s.stop(a)},validator:function(){return this.required?r.some(this.getOptions(),function(a){return a.selected&&null!=a.value&&0!=a.value.toString().length}):!0},validate:function(a){c.hide(this.domNode);(a=
this.isValid(a))||this.displayMessage(this.invalidMessage);return a},isValid:function(a){return this.validator()},getErrorMessage:function(a){return this.invalidMessage},displayMessage:function(a){c.hide(this.domNode);a&&c.show(a,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(a,b){},_addOptionItem:function(a){var b;this.dropDown?(b=new B({option:a,parent:this.dropDownMenu}),this.dropDownMenu.addChild(b)):(b=new C({option:a,parent:this,disabled:this.disabled,readOnly:this.readOnly}),
this.wrapperDiv.appendChild(b.domNode));this.onAfterAddOptionItem(b,a)},_refreshState:function(){this.validate(this.focused)},onChange:function(a){this._refreshState()},reset:function(){this.inherited(arguments);c.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);r.forEach(this._getChildren(),function(a){a._updateBox()});p.empty(this.containerNode);var a=this;r.forEach(this.value,function(b){b=p.create("option",{value:b,label:b,selected:"selected"});
p.place(b,a.containerNode)});if(this.dropDown&&this.dropDownButton){var b=0,c="";r.forEach(this.options,function(a){a.selected&&(b++,c=a.label)});this.dropDownButton.set("label",this.multiple?t.replace(this._nlsResources.multiSelectLabelText,{num:b}):c)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():r.map(this.wrapperDiv.childNodes,function(a){return e.byNode(a)})},invertSelection:function(a){this.multiple&&(r.forEach(this.options,function(a){a.selected=!a.selected}),
this._updateSelection())},_setDisabledAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDownButton.set("disabled",a);r.forEach(this._getChildren(),function(b){b&&b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){this.inherited(arguments);"readOnly"in this.attributeMap&&this[this.attributeMap.readOnly].setAttribute("readonly",a);this.readOnly=a;r.forEach(this._getChildren(),function(b){b&&b.set&&b.set("readOnly",a)})},uninitialize:function(){c.hide(this.domNode);r.forEach(this._getChildren(),
function(a){a.destroyRecursive()});this.inherited(arguments)}})})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,
g,v,u,z,A,y,C,D){function B(a){return function(b){m[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}n.add("dijit-legacy-requires",!a.isAsync);n.add("dojo-bidi",!1);n("dijit-legacy-requires")&&v(0,function(){q(["dijit/_base/manager"])});var G={};s=b("dijit._WidgetBase",[u,y],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:B("lang"),dir:"",_setDirAttr:B("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,
ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:s.blankGif||q.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+d.substr(5,d.length-9),b.attributeMap&&d in b.attributeMap||c.push(d))}},
postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=p.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,c.mixin(this,a));this.postMixInProperties();this.id||(this.id=D.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);
this.ownerDocumentBody=A.body(this.ownerDocument);D.add(this);this.buildRendering();var d;if(this.domNode){this._applyAttributes();var g=this.srcNodeRef;g&&g.parentNode&&this.domNode!==g&&(g.parentNode.replaceChild(this.domNode,g),d=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();d&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);t.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);
c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(t.map(a,function(a){return a+"Rtl"})));f.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,t.forEach(this.getChildren(),function(a){a._started||a._destroyed||!c.isFunction(a.startup)||
(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();t.forEach(this._connects,c.hitch(this,"disconnect"));t.forEach(this._supportingWidgets,b);this.domNode&&t.forEach(D.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);D.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&
(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?m.remove(this.domNode,"widgetId"):d.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||d.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){t.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;c.isObject(a)?e.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",
a)},_attrToDom:function(a,b,d){d=3<=arguments.length?d:this.attributeMap[a];t.forEach(c.isArray(d)?d:[d],function(d){var g=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":c.isFunction(b)&&(b=c.hitch(this,b));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;g.tagName?m.set(g,d,b):g.set(d,b);break;case "innerText":g.innerHTML="";g.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":g.innerHTML=b;break;case "class":f.replace(g,b,this[a])}},
this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var d in a)this.set(d,a[d]);return this}d=this._getAttrNames(a);var g=this[d.s];if(c.isFunction(g))var e=g.apply(this,Array.prototype.slice.call(arguments,1));else{var g=this.focusNode&&!c.isFunction(this.focusNode)?"focusNode":"domNode",f=this[g]&&this[g].tagName,k;if((k=f)&&!(k=G[f])){k=this[g];var m={},n;for(n in k)m[n.toLowerCase()]=!0;k=G[f]=m}n=k;d=a in
this.attributeMap?this.attributeMap[a]:d.s in this?this[d.s]:n&&d.l in n&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?g:null;null!=d&&this._attrToDom(a,b,d);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;
!this._created||c===b||c!==c&&b!==b||(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&g.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var c=this._onMap(a);
return c?r.after(this,c,b,!0):this.own(g(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?D.findWidgets(this.containerNode):[]},getParent:function(){return D.getEnclosingWidget(this.domNode.parentNode)},
connect:function(a,b,c){return this.own(l.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(z.subscribe(a,c.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=e.get(this.domNode,"display")},placeAt:function(a,b){var c=!a.tagName&&D.byId(a);!c||!c.addChild||b&&"number"!==typeof b?(c=c?c.containerNode&&!/after|before|replace/.test(b||
"")?c.containerNode:c.domNode:p.byId(a,this.ownerDocument),d.place(this.domNode,c,b),!this._started&&(this.getParent()||{})._started&&this.startup()):c.addChild(this,b);return this},defer:function(a,b){var d=setTimeout(c.hitch(this,function(){d&&(d=null,this._destroyed||c.hitch(this,a)())}),b||0);return{remove:function(){d&&(clearTimeout(d),d=null);return null}}}});n("dojo-bidi")&&s.extend(C);return s})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],
function(q,t,r,s){return q("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(l){var b=this._attrPairNames;return b[l]?b[l]:b[l]={s:"_"+l+"Setter",g:"_"+l+"Getter"}},postscript:function(l){l&&this.set(l)},_get:function(l,b){return"function"===typeof this[b.g]?this[b.g]():this[l]},get:function(l){return this._get(l,this._getAttrNames(l))},set:function(l,b){if("object"===typeof l){for(var p in l)l.hasOwnProperty(p)&&"_watchCallbacks"!=p&&this.set(p,l[p]);return this}p=this._getAttrNames(l);
var m=this._get(l,p);p=this[p.s];var f;"function"===typeof p?f=p.apply(this,Array.prototype.slice.call(arguments,1)):this[l]=b;if(this._watchCallbacks){var d=this;s(f,function(){d._watchCallbacks(l,m,b)})}return this},_changeAttrValue:function(l,b){var p=this.get(l);this[l]=b;this._watchCallbacks&&this._watchCallbacks(l,p,b);return this},watch:function(l,b){var p=this._watchCallbacks;if(!p)var m=this,p=this._watchCallbacks=function(b,d,f,a){var c=function(a){if(a){a=a.slice();for(var c=0,l=a.length;c<
l;c++)a[c].call(m,b,d,f)}};c(p["_"+b]);a||c(p["*"])};b||"function"!==typeof l?l="_"+l:(b=l,l="*");var f=p[l];"object"!==typeof f&&(f=p[l]=[]);f.push(b);var d={};d.unwatch=d.remove=function(){var d=r.indexOf(f,b);-1<d&&f.splice(d,1)};return d}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(q,t,r){return r("dijit.Destroyable",null,{destroy:function(q){this._destroyed=!0},own:function(){q.forEach(arguments,function(q){var l="destroyRecursive"in
q?"destroyRecursive":"destroy"in q?"destroy":"remove",b=t.before(this,"destroy",function(b){q[l](b)}),p=t.after(q,l,function(){b.remove();p.remove()},!0)},this);return arguments}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(q,t,r,s,l,b,p,m){var f=t("dijit._TemplatedMixin",m,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(b){var f=
this.declaredClass,e=this;return p.substitute(b,this,function(b,a){"!"==a.charAt(0)&&(b=s.getObject(a.substr(1),!1,e));if("undefined"==typeof b)throw Error(f+" template:"+a);return null==b?"":"!"==a.charAt(0)?b:b.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=q(this.templatePath,{sanitize:!0}));var b=f.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),k;if(s.isString(b)){if(k=r.toDom(this._stringRepl(b),
this.ownerDocument),1!=k.nodeType)throw Error("Invalid template: "+b);}else k=b.cloneNode(!0);this.domNode=k}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(b){var f=this.containerNode;if(b&&f)for(;b.hasChildNodes();)f.appendChild(b.firstChild)}});f._templateCache={};f.getCachedTemplate=function(b,k,e){var m=f._templateCache,a=b,c=m[a];if(c){try{if(!c.ownerDocument||c.ownerDocument==(e||document))return c}catch(g){}r.destroy(c)}b=
p.trim(b);if(k||b.match(/\$\{([^\}]+)\}/g))return m[a]=b;k=r.toDom(b,e);if(1!=k.nodeType)throw Error("Invalid template: "+b);return m[a]=k};b("ie")&&l(window,"unload",function(){var b=f._templateCache,k;for(k in b){var e=b[k];"object"==typeof e&&r.destroy(e);delete b[k]}});return f})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(q){return q.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(q,t,r,s){var l;l=function(b,f,e){s(b,{sync:!!f}).then(e)};
var b={},p=function(b){if(b){b=b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var f=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);f&&(b=f[1])}else b="";return b},m={},f={};q.cache=function(d,f,e){var m;"string"==typeof d?/\//.test(d)?(m=d,e=f):m=t.toUrl(d.replace(/\./g,"/")+(f?"/"+f:"")):(m=d+"",e=f);d=void 0!=e&&"string"!=typeof e?e.value:e;e=e&&e.sanitize;if("string"==typeof d)return b[m]=d,e?p(d):d;if(null===d)return delete b[m],null;m in b||l(m,!0,function(a){b[m]=
a});return e?p(b[m]):b[m]};return{dynamic:!0,normalize:function(b,f){var e=b.split("!"),m=e[0];return(/^\./.test(m)?f(m):m)+(e[1]?"!"+e[1]:"")},load:function(d,k,e){d=d.split("!");var n=1<d.length,a=d[0],c=k.toUrl(d[0]);d="url:"+c;var g=m,v=function(a){e(n?p(a):a)};a in b?g=b[a]:k.cache&&d in k.cache?g=k.cache[d]:c in b&&(g=b[c]);if(g===m)if(f[c])f[c].push(v);else{var u=f[c]=[v];l(c,!k.async,function(d){b[a]=b[c]=d;for(var g=0;g<u.length;)u[g++](d);delete f[c]})}else v(g)}}})},"dojo/request":function(){define(["./request/default!"],
function(q){return q})},"dojo/request/default":function(){define(["exports","require","../has"],function(q,t,r){var s=r("config-requestProvider");s||(s="./xhr");q.getPlatformDefaultId=function(){return"./xhr"};q.load=function(l,b,p,m){t(["platform"==l?"./xhr":s],function(b){p(b)})}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(q,t){var r={};t.setObject("dojo.string",r);r.rep=function(q,l){if(0>=l||!q)return"";for(var b=[];;){l&1&&b.push(q);if(!(l>>=1))break;q+=q}return b.join("")};
r.pad=function(q,l,b,p){b||(b="0");q=String(q);l=r.rep(b,Math.ceil((l-q.length)/b.length));return p?q+l:l+q};r.substitute=function(s,l,b,p){p=p||q.global;b=b?t.hitch(p,b):function(b){return b};return s.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(m,f,d){m=t.getObject(f,!1,l);d&&(m=t.getObject(d,!1,p).call(p,m,f));return b(m,f).toString()})};r.trim=String.prototype.trim?t.trim:function(q){q=q.replace(/^\s+/,"");for(var l=q.length-1;0<=l;l--)if(/\S/.test(q.charAt(l))){q=q.substring(0,l+
1);break}return q};return r})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(q,t,r,s,l,b,p,m,f){var d=l.delegate(m,{mouseenter:b.enter,mouseleave:b.leave,keypress:r._keypress}),k;r=s("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var d=b;;)if(1==d.nodeType&&(this._processTemplateNode(d,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&d.firstChild)d=d.firstChild;else{if(d==b)break;for(;!d.nextSibling;)if(d=d.parentNode,d==b)return;d=d.nextSibling}},_processTemplateNode:function(b,d,a){var c=!0,g=this.attachScope||this,f=d(b,"dojoAttachPoint")||d(b,"data-dojo-attach-point");if(f)for(var k=f.split(/\s*,\s*/);f=
k.shift();)l.isArray(g[f])?g[f].push(b):g[f]=b,c="containerNode"!=f,this._attachPoints.push(f);if(d=d(b,"dojoAttachEvent")||d(b,"data-dojo-attach-event"))for(f=d.split(/\s*,\s*/),k=l.trim;d=f.shift();)if(d){var m=null;-1!=d.indexOf(":")?(m=d.split(":"),d=k(m[0]),m=k(m[1])):d=k(d);m||(m=d);this._attachEvents.push(a(b,d,l.hitch(g,m)))}return c},_attach:function(b,f,a){f=f.replace(/^on/,"").toLowerCase();f="dijitclick"==f?k||(k=q("./a11yclick")):d[f]||f;return p(b,f,a)},_detachTemplateNodes:function(){var b=
this.attachScope||this;t.forEach(this._attachPoints,function(d){delete b[d]});this._attachPoints=[];t.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});l.extend(f,{dojoAttachEvent:"",dojoAttachPoint:""});return r})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(q,t,r,s,l){return r("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);l.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(s.hitch(this,function(b){this._startupWidgets=b;for(var m=0;m<b.length;m++)this._processTemplateNode(b[m],
function(b,d){return b[d]},function(b,d,k){return d in b?b.connect(b,d,k):b.on(d,k,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,l,m){return l(b,"dojoType")||l(b,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){q.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){function v(a){return eval("("+a+")")}function u(a){var b=
a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<A){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=A}return b}function z(a,b){var c=a.join();if(!y[c]){for(var d=[],g=0,e=a.length;g<e;g++){var f=a[g];d[d.length]=y[f]=y[f]||r.getObject(f)||~f.indexOf("/")&&(b?b(f):q(f))}g=d.shift();y[c]=d.length?g.createSubclass?g.createSubclass(d):g.extend.apply(g,d):g}return y[c]}new Date("X");var A=0;f.after(r,"extend",function(){A++},!0);var y={},C={_clearCache:function(){A++;
y={}},_functionFromScript:function(a,b){var c="",d="",g=a.getAttribute(b+"args")||a.getAttribute("args"),e=a.getAttribute("with"),g=(g||"").split(/\s*,\s*/);e&&e.length&&s.forEach(e.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(g,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||t._scopeName)+"Type",g="data-"+(c.scope||t._scopeName)+"-",e=g+"type",f=g+"mixins",k=[];s.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(e)||a.getAttribute(d);
if(c){var g=a.getAttribute(f),c=g?[c].concat(g.split(/\s*,\s*/)):[c];k.push({node:a,types:c})}});return this._instantiate(k,b,c)},_instantiate:function(a,b,c,g){function e(a){b._started||c.noStart||s.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=s.map(a,function(a){var d=a.ctor||z(a.types,c.contextRequire);if(!d)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(d,a.node,b,c,a.scripts,a.inherited)},this);return g?
d(a).then(e):e(a)},construct:function(b,d,g,e,l,p){function q(a){W&&r.setObject(W,a);for(T=0;T<O.length;T++)f[O[T].advice||"after"](a,O[T].method,r.hitch(a,O[T].func),!0);for(T=0;T<ca.length;T++)ca[T].call(a);for(T=0;T<aa.length;T++)a.watch(aa[T].prop,aa[T].func);for(T=0;T<ma.length;T++)c(a,ma[T].event,ma[T].func);return a}var y=b&&b.prototype;e=e||{};var z={};e.defaults&&r.mixin(z,e.defaults);p&&r.mixin(z,p);var A;n("dom-attributes-explicit")?A=d.attributes:n("dom-attributes-specified-flag")?A=s.filter(d.attributes,
function(a){return a.specified}):(p=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),A=s.map(p.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):d.getAttributeNode(b).value}}));var C=e.scope||t._scopeName;p="data-"+C+"-";var I={};"dojo"!==C&&(I[p+"props"]="data-dojo-props",I[p+"type"]="data-dojo-type",I[p+"mixins"]=
"data-dojo-mixins",I[C+"type"]="dojoType",I[p+"id"]="data-dojo-id");for(var T=0,N,C=[],W,Z;N=A[T++];){var V=N.name,Q=V.toLowerCase();N=N.value;switch(I[Q]||Q){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":Z=N;break;case "data-dojo-id":case "jsid":W=N;break;case "data-dojo-attach-point":case "dojoattachpoint":z.dojoAttachPoint=N;break;case "data-dojo-attach-event":case "dojoattachevent":z.dojoAttachEvent=N;break;case "class":z["class"]=d.className;break;
case "style":z.style=d.style&&d.style.cssText;break;default:if(V in y||(V=u(b)[Q]||V),V in y)switch(typeof y[V]){case "string":z[V]=N;break;case "number":z[V]=N.length?Number(N):NaN;break;case "boolean":z[V]="false"!=N.toLowerCase();break;case "function":""===N||-1!=N.search(/[^\w\.]+/i)?z[V]=new Function(N):z[V]=r.getObject(N,!1)||new Function(N);C.push(V);break;default:Q=y[V],z[V]=Q&&"length"in Q?N?N.split(/\s*,\s*/):[]:Q instanceof Date?""==N?new Date(""):"now"==N?new Date:k.fromISOString(N):Q instanceof
m?t.baseUrl+N:v(N)}else z[V]=N}}for(A=0;A<C.length;A++)I=C[A].toLowerCase(),d.removeAttribute(I),d[I]=null;if(Z)try{Z=v.call(e.propsThis,"{"+Z+"}"),r.mixin(z,Z)}catch(R){throw Error(R.toString()+" in data-dojo-props='"+Z+"'");}r.mixin(z,g);l||(l=b&&(b._noScript||y._noScript)?[]:a("> script[type^='dojo/']",d));var O=[],ca=[],aa=[],ma=[];if(l)for(T=0;T<l.length;T++)I=l[T],d.removeChild(I),g=I.getAttribute(p+"event")||I.getAttribute("event"),e=I.getAttribute(p+"prop"),Z=I.getAttribute(p+"method"),C=
I.getAttribute(p+"advice"),A=I.getAttribute("type"),I=this._functionFromScript(I,p),g?"dojo/connect"==A?O.push({method:g,func:I}):"dojo/on"==A?ma.push({event:g,func:I}):z[g]=I:"dojo/aspect"==A?O.push({method:Z,advice:C,func:I}):"dojo/watch"==A?aa.push({prop:e,func:I}):ca.push(I);b=(l=b.markupFactory||y.markupFactory)?l(z,d,b):new b(z,d);return b.then?b.then(q):q(b)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||
d.lang,textDir:b.getAttribute(p)||d.textDir},g;for(g in b)b[g]&&(a.inherited[g]=b[g])}return a.inherited}var d=[],g=[],f={},k=(b.scope||t._scopeName)+"Type",m="data-"+(b.scope||t._scopeName)+"-",l=m+"type",p=m+"textdir",m=m+"mixins",v=a.firstChild,u=b.inherited;if(!u){var y=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&y(a.parentNode,b)},u={dir:y(a,"dir"),lang:y(a,"lang"),textDir:y(a,p)},r;for(r in u)u[r]||delete u[r]}for(var u={inherited:u},A,C;;)if(v)if(1!=v.nodeType)v=v.nextSibling;
else if(A&&"script"==v.nodeName.toLowerCase())(V=v.getAttribute("type"))&&/^dojo\/\w/i.test(V)&&A.push(v),v=v.nextSibling;else if(C)v=v.nextSibling;else{var V=v.getAttribute(l)||v.getAttribute(k);r=v.firstChild;if(V||r&&(3!=r.nodeType||r.nextSibling)){C=null;if(V){var Q=v.getAttribute(m);A=Q?[V].concat(Q.split(/\s*,\s*/)):[V];try{C=z(A,b.contextRequire)}catch(R){}C||s.forEach(A,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,g[g.length]=a)});Q=C&&!C.prototype._noScript?[]:null;u={types:A,ctor:C,parent:u,
node:v,scripts:Q};u.inherited=c(u);d.push(u)}else u={node:v,scripts:A,parent:u};A=Q;C=v.stopParser||C&&C.prototype.stopParser&&!b.template;v=r}else v=v.nextSibling}else{if(!u||!u.node)break;v=u.node.nextSibling;C=!1;u=u.parent;A=u.scripts}var O=new e;g.length?(n("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+g.join(", ")),(b.contextRequire||q)(g,function(){O.resolve(s.filter(d,function(a){if(!a.ctor)try{a.ctor=z(a.types,b.contextRequire)}catch(c){}for(var d=a.parent;d&&
!d.types;)d=d.parent;var g=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(g&&g.stopParser&&!b.template);a.instantiate=!d||d.instantiate&&d.instantiateChildren;return a.instantiate}))})):O.resolve(d);return O.promise},_require:function(a,b){var c=v("{"+a.innerHTML+"}"),d=[],g=[],f=new e,k=b&&b.contextRequire||q,m;for(m in c)d.push(m),g.push(c[m]);k(g,function(){for(var a=0;a<d.length;a++)r.setObject(d[a],arguments[a]);f.resolve(arguments)});return f.promise},_scanAmd:function(b,c){var d=new e,g=
d.promise;d.resolve(!0);var f=this;a("script[type='dojo/require']",b).forEach(function(a){g=g.then(function(){return f._require(a,c)});a.parentNode.removeChild(a)});return g},parse:function(a,c){var d;!c&&a&&a.rootNode?(c=a,d=c.rootNode):!a||!r.isObject(a)||"nodeType"in a?d=a:c=a;d=d?b.byId(d):p.body();c=c||{};var g=c.template?{template:!0}:{},e=[],f=this,k=this._scanAmd(d,c).then(function(){return f.scan(d,c)}).then(function(a){return f._instantiate(a,g,c,!0)}).then(function(a){return e=e.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});r.mixin(e,k);return e}};t.parser=C;l.parseOnLoad&&g(100,C,"parse");return C})},"dojo/_base/url":function(){define(["./kernel"],function(q){var t=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,r=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,s=function(){for(var l=arguments,b=[l[0]],p=1;p<l.length;p++)if(l[p]){var m=new s(l[p]+""),b=new s(b[0]+"");if(""==m.path&&!m.scheme&&!m.authority&&!m.query)null!=m.fragment&&(b.fragment=m.fragment),m=b;else if(!m.scheme&&
(m.scheme=b.scheme,!m.authority&&(m.authority=b.authority,"/"!=m.path.charAt(0)))){for(var b=(b.path.substring(0,b.path.lastIndexOf("/")+1)+m.path).split("/"),f=0;f<b.length;f++)"."==b[f]?f==b.length-1?b[f]="":(b.splice(f,1),f--):0<f&&(1!=f||""!=b[0])&&".."==b[f]&&".."!=b[f-1]&&(f==b.length-1?(b.splice(f,1),b[f-1]=""):(b.splice(f-1,2),f-=2));m.path=b.join("/")}b=[];m.scheme&&b.push(m.scheme,":");m.authority&&b.push("//",m.authority);b.push(m.path);m.query&&b.push("?",m.query);m.fragment&&b.push("#",
m.fragment)}this.uri=b.join("");l=this.uri.match(t);this.scheme=l[2]||(l[1]?"":null);this.authority=l[4]||(l[3]?"":null);this.path=l[5];this.query=l[7]||(l[6]?"":null);this.fragment=l[9]||(l[8]?"":null);null!=this.authority&&(l=this.authority.match(r),this.user=l[3]||null,this.password=l[4]||null,this.host=l[6]||l[7],this.port=l[9]||null)};s.prototype.toString=function(){return this.uri};return q._Url=s})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(q,
t,r){var s=q.some;return function(l){var b,p;l instanceof Array?p=l:l&&"object"===typeof l&&(b=l);var m,f=[];if(b){p=[];for(var d in b)Object.hasOwnProperty.call(b,d)&&(f.push(d),p.push(b[d]));m={}}else p&&(m=[]);if(!p||!p.length)return(new t).resolve(m);var k=new t;k.promise.always(function(){m=f=null});var e=p.length;s(p,function(d,a){b||f.push(a);r(d,function(b){k.isFulfilled()||(m[f[a]]=b,0===--e&&k.resolve(m))},k.reject);return k.isFulfilled()});return k.promise}})},"dojo/date/stamp":function(){define(["../_base/lang",
"../_base/array"],function(q,t){var r={};q.setObject("dojo.date.stamp",r);r.fromISOString=function(q,l){r._isoRegExp||(r._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=r._isoRegExp.exec(q),p=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);l&&(l=new Date(l),t.forEach(t.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return l["get"+b]()}),function(d,f){b[f]=b[f]||d}));p=new Date(b[0]||
1970,b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&p.setFullYear(b[0]||1970);var m=0,f=b[7]&&b[7].charAt(0);"Z"!=f&&(m=60*(b[8]||0)+(Number(b[9])||0),"-"!=f&&(m*=-1));f&&(m-=p.getTimezoneOffset());m&&p.setTime(p.getTime()+6E4*m)}return p};r.toISOString=function(q,l){var b=function(b){return 10>b?"0"+b:b};l=l||{};var p=[],m=l.zulu?"getUTC":"get",f="";"time"!=l.selector&&(f=q[m+"FullYear"](),f=["0000".substr((f+"").length)+f,b(q[m+"Month"]()+1),b(q[m+"Date"]())].join("-"));p.push(f);if("date"!=
l.selector){f=[b(q[m+"Hours"]()),b(q[m+"Minutes"]()),b(q[m+"Seconds"]())].join(":");m=q[m+"Milliseconds"]();l.milliseconds&&(f+="."+(100>m?"0":"")+b(m));if(l.zulu)f+="Z";else if("time"!=l.selector)var m=q.getTimezoneOffset(),d=Math.abs(m),f=f+((0<m?"-":"+")+b(Math.floor(d/60))+":"+b(d%60));p.push(f)}return p.join("T")};return r})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){k("dijit-legacy-requires")&&g(0,function(){q(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return r("dijit.Menu",c,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):t.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return n.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=s.byId(a,this.ownerDocument);var b;if("iframe"==a.tagName.toLowerCase()){var c=a;b=this._iframeContentWindow(c);b=e.body(b.document)}else b=a==e.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var g={node:a,
iframe:c};l.set(a,"_dijitMenu"+this.id,this._bindings.push(g));var k=f.hitch(this,function(a){var b=this.selector,g=b?function(a){return d.selector(b,a)}:function(a){return a},e=this;return[d(a,g(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();e._scheduleOpen(this,c,{x:a.pageX,y:a.pageY})}),d(a,g("keydown"),function(a){a.shiftKey&&a.keyCode==m.F10&&(a.stopPropagation(),a.preventDefault(),e._scheduleOpen(this,c))})]});g.connects=b?k(b):[];c&&(g.onloadHandler=
f.hitch(this,function(){var a=this._iframeContentWindow(c),a=e.body(a.document);g.connects=k(a)}),c.addEventListener?c.addEventListener("load",g.onloadHandler,!1):c.attachEvent("onload",g.onloadHandler))},unBindDomNode:function(a){var b;try{b=s.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&l.has(b,a)){for(var d=l.get(b,a)-1,g=this._bindings[d],e;e=g.connects.pop();)e.remove();(e=g.iframe)&&(e.removeEventListener?e.removeEventListener("load",g.onloadHandler,!1):e.detachEvent("onload",
g.onloadHandler));l.remove(b,a);delete this._bindings[d]}},_scheduleOpen:function(a,b,c){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:c})},1))},_openMyself:function(c){function d(){r.refocus&&t&&t.focus();a.close(r)}var g=c.target,e=c.iframe;c=c.coords;var f=!c;this.currentTarget=g;if(c){if(e){var g=b.position(e,!0),m=this._iframeContentWindow(e),m=b.docScroll(m.document),l=p.getComputedStyle(e),n=p.toPixelValue,q=(k("ie")&&
k("quirks")?0:n(e,l.paddingLeft))+(k("ie")&&k("quirks")?n(e,l.borderLeftWidth):0),e=(k("ie")&&k("quirks")?0:n(e,l.paddingTop))+(k("ie")&&k("quirks")?n(e,l.borderTopWidth):0);c.x+=g.x+q-m.x;c.y+=g.y+e-m.y}}else c=b.position(g,!0),c.x+=10,c.y+=10;var r=this,e=this._focusManager.get("prevNode"),g=this._focusManager.get("curNode"),t=!g||s.isDescendant(g,this.domNode)?e:g;a.open({popup:this,x:c.x,y:c.y,onExecute:d,onCancel:d,orient:this.isLeftToRight()?"L":"R"});this.focus();f||this.defer(function(){this._cleanUp(!0)});
this._onBlur=function(){this.inherited("_onBlur",arguments);a.close(this)}},destroy:function(){t.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){function v(){this._popupWrapper&&
(b.destroy(this._popupWrapper),delete this._popupWrapper)}r=r(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=p.position(this._firstAroundNode,!0),c=b.x-a.x,a=b.y-a.y;if(c||a)for(this._firstAroundPosition=b,b=0;b<this._stack.length;b++){var d=this._stack[b].wrapper.style;d.top=parseInt(d.top,10)+a+"px";"auto"==d.right?d.left=parseInt(d.left,10)+c+"px":d.right=parseInt(d.right,10)-c+"px"}this._aroundMoveListener=setTimeout(k.hitch(this,
"_repositionAll"),c||a?10:50)}},_createWrapper:function(a){var c=a._popupWrapper,d=a.domNode;c||(c=b.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),c.appendChild(d),d=d.style,d.display="",d.visibility="",d.position="",d.top="0px",a._popupWrapper=c,t.after(a,"destroy",v,!0));return c},moveOffScreen:function(a){var b=this._createWrapper(a);a=p.isBodyLtr(a.ownerDocument);var c={visibility:"hidden",top:"-9999px",
display:""};c[a?"left":"right"]="-9999px";c[a?"right":"left"]="auto";m.set(b,c);return b},hide:function(a){var b=this._createWrapper(a);m.set(b,{display:"none",height:"auto",overflow:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var g=this._stack,v=b.popup,q=v.domNode,r=b.orient||["below","below-alt","above","above-alt"],t=
b.parent?b.parent.isLeftToRight():p.isBodyLtr(v.ownerDocument),B=b.around,G=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;g.length&&(!b.parent||!s.isDescendant(b.parent.domNode,g[g.length-1].widget.domNode));)this.close(g[g.length-1].widget);var J=this.moveOffScreen(v);v.startup&&!v._started&&v.startup();var M,F=p.position(q);if("maxHeight"in b&&-1!=b.maxHeight)M=b.maxHeight||Infinity;else{M=c.getEffectiveBox(this.ownerDocument);var H=B?p.position(B,!1):{y:b.y-(b.padding||0),
h:2*(b.padding||0)};M=Math.floor(Math.max(H.y,M.h-(H.y+H.h)))}F.h>M&&(F=m.getComputedStyle(q),m.set(J,{overflowY:"scroll",height:M+"px",border:F.borderLeftWidth+" "+F.borderLeftStyle+" "+F.borderLeftColor}),q._originalStyle=q.style.cssText,q.style.border="none");l.set(J,{id:G,style:{zIndex:this._beginZIndex+g.length},"class":"dijitPopup "+(v.baseClass||v["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});0==g.length&&B&&(this._firstAroundNode=B,this._firstAroundPosition=
p.position(B,!0),this._aroundMoveListener=setTimeout(k.hitch(this,"_repositionAll"),50));f("config-bgIframe")&&!v.bgIframe&&(v.bgIframe=new a(J));G=v.orient?k.hitch(v,"orient"):null;r=B?n.around(J,B,r,t,G):n.at(J,b,"R"==r?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding,G);J.style.visibility="visible";q.style.visibility="visible";q=[];q.push(e(J,"keydown",k.hitch(this,function(a){if(a.keyCode==d.ESCAPE&&b.onCancel)a.stopPropagation(),a.preventDefault(),b.onCancel();else if(a.keyCode==d.TAB&&
(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));v.onCancel&&b.onCancel&&q.push(v.on("cancel",b.onCancel));q.push(v.on(v.onExecute?"execute":"change",k.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));g.push({widget:v,wrapper:J,parent:b.parent,onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:q});if(v.onOpen)v.onOpen(r);return r},close:function(a){for(var b=this._stack;a&&q.some(b,function(b){return b.widget==
a})||!a&&b.length;){var c=b.pop(),d=c.widget,g=c.onClose;if(d.onClose)d.onClose();for(var e;e=c.handlers.pop();)e.remove();d&&d.domNode&&this.hide(d);g&&g()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return g.popup=new r})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(q,
t,r,s,l,b,p){function m(d,f,e,m){var a=b.getEffectiveBox(d.ownerDocument);d.parentNode&&"body"==String(d.parentNode.tagName).toLowerCase()||l.body(d.ownerDocument).appendChild(d);var c=null;q.some(f,function(b){var g=b.corner,f=b.pos,k=0,l={w:{L:a.l+a.w-f.x,R:f.x-a.l,M:a.w}[g.charAt(1)],h:{T:a.t+a.h-f.y,B:f.y-a.t,M:a.h}[g.charAt(0)]},p=d.style;p.left=p.right="auto";e&&(k=e(d,b.aroundCorner,g,l,m),k="undefined"==typeof k?0:k);var v=d.style,u=v.display,q=v.visibility;"none"==v.display&&(v.visibility=
"hidden",v.display="");p=t.position(d);v.display=u;v.visibility=q;u={L:f.x,R:f.x-p.w,M:Math.max(a.l,Math.min(a.l+a.w,f.x+(p.w>>1))-p.w)}[g.charAt(1)];q={T:f.y,B:f.y-p.h,M:Math.max(a.t,Math.min(a.t+a.h,f.y+(p.h>>1))-p.h)}[g.charAt(0)];f=Math.max(a.l,u);v=Math.max(a.t,q);u=Math.min(a.l+a.w,u+p.w);q=Math.min(a.t+a.h,q+p.h);u-=f;q-=v;k+=p.w-u+(p.h-q);if(null==c||k<c.overflow)c={corner:g,aroundCorner:b.aroundCorner,x:f,y:v,w:u,h:q,overflow:k,spaceAvailable:l};return!k});c.overflow&&e&&e(d,c.aroundCorner,
c.corner,c.spaceAvailable,m);f=t.isBodyLtr(d.ownerDocument);var g=c.y,p=f?c.x:a.w-c.x-c.w;/relative|absolute/.test(r.get(l.body(d.ownerDocument),"position"))&&(g-=r.get(l.body(d.ownerDocument),"marginTop"),p-=(f?1:-1)*r.get(l.body(d.ownerDocument),f?"marginLeft":"marginRight"));var u=d.style;u.top=g+"px";u[f?"left":"right"]=p+"px";u[f?"right":"left"]="auto";return c}var f={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return p.place={at:function(b,k,e,l,a){e=q.map(e,function(a){var b={corner:a,aroundCorner:f[a],
pos:{x:k.x,y:k.y}};l&&(b.pos.x+="L"==a.charAt(1)?l.x:-l.x,b.pos.y+="T"==a.charAt(0)?l.y:-l.y);return b});return m(b,e,a)},around:function(b,f,e,l,a){function c(a,b){J.push({aroundCorner:a,corner:b,pos:{x:{L:C,R:C+B,M:C+(B>>1)}[a.charAt(1)],y:{T:D,B:D+G,M:D+(G>>1)}[a.charAt(0)]}})}var g;if("string"==typeof f||"offsetWidth"in f){if(g=t.position(f,!0),/^(above|below)/.test(e[0])){var p=t.getBorderExtents(f),u=f.firstChild?t.getBorderExtents(f.firstChild):{t:0,l:0,b:0,r:0},z=t.getBorderExtents(b),A=b.firstChild?
t.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0};g.y+=Math.min(p.t+u.t,z.t+A.t);g.h-=Math.min(p.t+u.t,z.t+A.t)+Math.min(p.b+u.b,z.b+A.b)}}else g=f;if(f.parentNode)for(p="absolute"==r.getComputedStyle(f).position,f=f.parentNode;f&&1==f.nodeType&&"BODY"!=f.nodeName;){u=t.position(f,!0);z=r.getComputedStyle(f);/relative|absolute/.test(z.position)&&(p=!1);if(!p&&/hidden|auto|scroll/.test(z.overflow)){var A=Math.min(g.y+g.h,u.y+u.h),y=Math.min(g.x+g.w,u.x+u.w);g.x=Math.max(g.x,u.x);g.y=Math.max(g.y,
u.y);g.h=A-g.y;g.w=y-g.x}"absolute"==z.position&&(p=!0);f=f.parentNode}var C=g.x,D=g.y,B="w"in g?g.w:g.w=g.width,G="h"in g?g.h:(s.deprecated("place.around: dijit/place.__Rectangle: { x:"+C+", y:"+D+", height:"+g.height+", width:"+B+" } has been deprecated.  Please use { x:"+C+", y:"+D+", h:"+g.height+", w:"+B+" }","","2.0"),g.h=g.height),J=[];q.forEach(e,function(a){var b=l;switch(a){case "above-centered":c("TM","BM");break;case "below-centered":c("BM","TM");break;case "after-centered":b=!b;case "before-centered":c(b?
"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":c(b?"TL":"TR",b?"TR":"TL");c(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":c(b?"BL":"BR",b?"TL":"TR");c(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":c(b?"TL":"TR",b?"BL":"BR");c(b?"TR":"TL",b?"BR":"BL");break;default:c(a.aroundCorner,a.corner)}});b=m(b,J,a,{w:B,h:G});b.aroundNodePos=g;return b}}})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],
function(q,t,r,s,l){var b=new q,p;r(function(){var m=l.getBox();b._rlh=t(window,"resize",function(){var d=l.getBox();if(m.h!=d.h||m.w!=d.w)m=d,b.emit("resize")});if(8==s("ie")){var f=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=f&&(f=screen.deviceXDPI,b.emit("resize"))},500)}s("ios")&&(t(document,"focusin",function(b){p=b.target}),t(document,"focusout",function(b){p=null}))});b.getEffectiveBox=function(b){b=l.getBox(b);var f=p&&p.tagName&&p.tagName.toLowerCase();s("ios")&&p&&!p.readOnly&&
("textarea"==f||"input"==f&&/^(color|email|number|password|search|tel|text|url)$/.test(p.type))&&(b.h*=0==orientation||180==orientation?0.66:0.4,f=p.getBoundingClientRect(),b.h=Math.max(b.h,f.top+f.height));return b};return b})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(q,t,r,s,l,b,p,m){m.add("config-bgIframe",!m("touch"));var f=new function(){var b=[];this.pop=function(){var f;
b.length?(f=b.pop(),f.style.display=""):(9>m("ie")?(f="<iframe src='"+(r.dojoBlankHtmlUrl||q.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",f=document.createElement(f)):(f=s.create("iframe"),f.src='javascript:""',f.className="dijitBackgroundIframe",f.setAttribute("role","presentation"),l.set(f,"opacity",0.1)),f.tabIndex=-1);return f};this.push=function(f){f.style.display="none";
b.push(f)}};t.BackgroundIframe=function(d){if(!d.id)throw Error("no id");if(m("config-bgIframe")){var k=this.iframe=f.pop();d.appendChild(k);7>m("ie")||m("quirks")?(this.resize(d),this._conn=p(d,"resize",b.hitch(this,"resize",d))):l.set(k,{width:"100%",height:"100%"})}};b.extend(t.BackgroundIframe,{resize:function(b){this.iframe&&l.set(this.iframe,{width:b.offsetWidth+"px",height:b.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(f.push(this.iframe),
delete this.iframe)}});return t.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(q,t,r,s,l){return q("dijit.DropDownMenu",[l,s],{templateString:r,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(b){this._moveToPopup(b);b.stopPropagation();b.preventDefault()},_onLeftArrow:function(b){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();
else this.onCancel(!1);else b.stopPropagation(),b.preventDefault()}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(q,t,r,s,l,b){q=s("dijit._OnDijitClickMixin",null,{connect:function(l,m,f){return this.inherited(arguments,[l,"ondijitclick"==m?b:m,f])}});q.a11yclick=b;return q})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(q,t,r,s){function l(b){if((b.keyCode===
q.ENTER||b.keyCode===q.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(b=b.target;b;b=b.parentNode)if(b.dojoClick)return!0}var b;r(document,"keydown",function(m){l(m)?(b=m.target,m.preventDefault()):b=null});r(document,"keyup",function(m){l(m)&&m.target==b&&(b=null,r.emit(m.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:m.ctrlKey,shiftKey:m.shiftKey,metaKey:m.metaKey,altKey:m.altKey,_origType:m.type}))});var p=function(b,f){b.dojoClick=!0;return r(b,"click",f)};p.click=p;p.press=function(b,
f){var d=r(b,s.press,function(b){("mousedown"!=b.type||t.isLeft(b))&&f(b)}),k=r(b,"keydown",function(b){b.keyCode!==q.ENTER&&b.keyCode!==q.SPACE||f(b)});return{remove:function(){d.remove();k.remove()}}};p.release=function(b,f){var d=r(b,s.release,function(b){("mouseup"!=b.type||t.isLeft(b))&&f(b)}),k=r(b,"keyup",function(b){b.keyCode!==q.ENTER&&b.keyCode!==q.SPACE||f(b)});return{remove:function(){d.remove();k.remove()}}};p.move=s.move;return p})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c){return t("dijit._MenuBase",[e,c,a,n],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){l.toggle(this.domNode,"dijitMenuActive",a);l.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var b=k.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var a=this,c="string"==typeof this.childSelector?this.childSelector:b.hitch(this,"childSelector");this.own(m(this.containerNode,m.selector(c,p.enter),function(){a.onItemHover(k.byNode(this))}),m(this.containerNode,m.selector(c,p.leave),function(){a.onItemUnhover(k.byNode(this))}),m(this.containerNode,m.selector(c,d),function(b){a.onItemClick(k.byNode(this),b);b.stopPropagation();
b.preventDefault()}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==d||a.popup&&1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&
a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));
this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&
(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var c=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,
c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,c){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var d=a.popup;d.parentMenu=this;this.own(this._mouseoverHandle=m.once(d.domNode,"mouseover",b.hitch(this,"_onPopupHover")));var e=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){c&&e.focusChild(a);e._cleanUp()},onExecute:b.hitch(this,
"_cleanUp",!0),onClose:function(){e._mouseoverHandle&&(e._mouseoverHandle.remove(),delete e._mouseoverHandle)}},c);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(s.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),
this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n){function a(){}function c(b){return function(c,d,e,f){return c&&"string"==typeof d&&c[d]==a?c.on(d.substring(2).toLowerCase(),p.hitch(e,f)):b.apply(r,arguments)}}q.around(r,"connect",c);b.connect&&q.around(b,"connect",c);q=s("dijit._Widget",[k,e,n],{onClick:a,onDblClick:a,onKeyDown:a,onKeyPress:a,onKeyUp:a,onMouseDown:a,onMouseMove:a,onMouseOut:a,onMouseOver:a,onMouseLeave:a,onMouseEnter:a,onMouseUp:a,constructor:function(b){this._toConnect={};for(var c in b)this[c]===
a&&(this._toConnect[c.replace(/^on/,"").toLowerCase()]=b[c],delete b[c])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(b,c){return this[this._onMap(b)]===a?r.connect(this.domNode,b.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,c)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?m("[widgetId]",this.containerNode).map(d.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});l("dijit-legacy-requires")&&f(0,function(){require(["dijit/_base"])});
return q})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(q,t,r,s){s.extend(t,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return r("dijit._FocusMixin",null,{_focusManager:q})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v){var u,z=new (t([e,p],{curNode:null,activeStack:[],constructor:function(){var a=m.hitch(this,function(a){r.isDescendant(this.curNode,a)&&this.set("curNode",null);r.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});q.before(b,"empty",a);q.before(b,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var d=this,g=a.document&&a.document.body;if(g){var e=f(a.document,"mousedown, touchstart",function(a){d._justMouseDowned=
!0;setTimeout(function(){d._justMouseDowned=!1},0);a&&a.target&&null==a.target.parentNode||d._onTouchNode(b||a.target,"mouse")}),k=f(g,"focusin",function(a){u=(new Date).getTime();if(a.target.tagName){var g=a.target.tagName.toLowerCase();"#document"!=g&&"body"!=g&&(c.isFocusable(a.target)?d._onFocusNode(b||a.target):d._onTouchNode(b||a.target))}}),m=f(g,"focusout",function(a){(new Date).getTime()<u+100||d._onBlurNode(b||a.target)});return{remove:function(){e.remove();k.remove();m.remove();g=e=k=m=
null}}}},_onBlurNode:function(a){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(m.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0);this._justMouseDowned||(this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(m.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0))},_onTouchNode:function(b,c){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),
delete this._clearActiveWidgetsTimer);l.contains(b,"dijitPopup")&&(b=b.firstChild);var d=[];try{for(;b;){var e=s.get(b,"dijitPopupParent");if(e)b=g.byId(e).domNode;else if(b.tagName&&"body"==b.tagName.toLowerCase()){if(b===n.body())break;b=a.get(b.ownerDocument).frameElement}else{var f=b.getAttribute&&b.getAttribute("widgetId"),k=f&&g.byId(f);!k||"mouse"==c&&k.get("disabled")||d.unshift(f);b=b.parentNode}}}catch(m){}this._setStack(d,c)},_onFocusNode:function(a){a&&9!=a.nodeType&&(this._clearFocusTimer&&
(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,e=a.length-1;if(a[e]!=c[d]){this.set("activeStack",a);var f;for(f=d;0<=f&&c[f]!=a[f];f--)if(d=g.byId(c[f]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),this.emit("widget-blur",d,b);for(f++;f<=e;f++)if(d=g.byId(a[f]))d.set("focused",!0),d._focusManager==
this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));d(function(){var b=z.registerWin(a.get(document));k("ie")&&f(window,"unload",function(){b&&(b.remove(),b=null)})});v.focus=function(a){z.focus(a)};for(var A in z)/^_/.test(A)||(v.focus[A]="function"==typeof z[A]?m.hitch(z,A):z[A]);z.watch(function(a,b,c){v.focus[a]=c});return z})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(q,t,r,s,l,b,p){var m={_isElementShown:function(b){var d=s.get(b);return"hidden"!=d.visibility&&"collapsed"!=d.visibility&&"none"!=d.display&&"hidden"!=r.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return r.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var d;try{var k=b.contentDocument;if("designMode"in k&&"on"==k.designMode)return!0;d=k.body}catch(e){try{d=b.contentWindow.document.body}catch(m){return!1}}return d&&
("true"==d.contentEditable||d.firstChild&&"true"==d.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(b){return r.get(b,"disabled")?void 0:r.has(b,"tabIndex")?+r.get(b,"tabIndex"):m.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=m.effectiveTabIndex(b)},isFocusable:function(b){return-1<=m.effectiveTabIndex(b)},_getTabNavigable:function(f){function d(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}function k(a){return u[d(a)]||a}var e,l,a,c,g,p,u={},q=m._isElementShown,s=m.effectiveTabIndex,y=function(f){for(f=f.firstChild;f;f=f.nextSibling)if(1==f.nodeType&&!(9>=b("ie")&&"HTML"!==f.scopeName)&&q(f)){var k=s(f);if(0<=k){if(0==k)e||(e=f),l=f;else if(0<k){if(!a||k<c)c=k,a=f;if(!g||k>=p)p=k,g=f}k=d(f);r.get(f,"checked")&&k&&(u[k]=f)}"SELECT"!=f.nodeName.toUpperCase()&&y(f)}};q(f)&&y(f);return{first:k(e),last:k(l),lowest:k(a),highest:k(g)}},getFirstInTabbingOrder:function(b,
d){var k=m._getTabNavigable(t.byId(b,d));return k.lowest?k.lowest:k.first},getLastInTabbingOrder:function(b,d){var k=m._getTabNavigable(t.byId(b,d));return k.last?k.last:k.highest}};l.mixin(p,m);return m})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(q,t,r,s,l){var b=l.doc.documentElement;l=s("ie");var p=s("opera"),m=Math.floor,f=s("ff"),d=q.boxModel.replace(/-/,""),p={dj_quirks:s("quirks"),dj_opera:p,dj_khtml:s("khtml"),dj_webkit:s("webkit"),
dj_safari:s("safari"),dj_chrome:s("chrome"),dj_gecko:s("mozilla"),dj_ios:s("ios"),dj_android:s("android")};l&&(p.dj_ie=!0,p["dj_ie"+m(l)]=!0,p.dj_iequirks=s("quirks"));f&&(p["dj_ff"+m(f)]=!0);p["dj_"+d]=!0;var k="",e;for(e in p)p[e]&&(k+=e+" ");b.className=t.trim(b.className+" "+k);r(function(){if(!q.isBodyLtr()){var d="dj_rtl dijitRtl "+k.replace(/ /g,"-rtl ");b.className=t.trim(b.className+" "+d+"dj_rtl dijitRtl "+k.replace(/ /g,"-rtl "))}});return s})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(q,t,r,s){r(function(){t("highcontrast")&&q.add(s.body(),"dijit_a11y")});return t})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e){t=t("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);q.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),
function(a){this.watch(a,b.hitch(this,"_setStateClass"))},this);for(var d in this.cssStateNodes||{})this._trackMouseState(this[d],this.cssStateNodes[d]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(b){if(!this.disabled)switch(b.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",
!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(c){a=a.concat(q.map(a,function(a){return a+c}),"dijit"+c)}var a=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(c);this.state&&b(this.state);
this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var c=this.stateNode||this.domNode,d={};q.forEach(c.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&q.forEach(this._stateClasses,function(a){delete d[a]});q.forEach(a,function(a){d[a]=!0});var e=[],f;for(f in d)e.push(f);c.className=e.join(" ");this._stateClasses=a},_subnodeCssMouseEvent:function(b,
a,c){function d(c){s.toggle(b,a+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":s.toggle(b,a+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":s.toggle(b,a+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":s.toggle(b,
a+"Focused",!0);break;case "blur":case "focusout":s.toggle(b,a+"Focused",!1)}},_trackMouseState:function(b,a){b._cssState=a}});m(function(){function b(a,c,d){if(!d||!r.isDescendant(d,c))for(;c&&c!=d;c=c.parentNode)if(c._cssState){var f=e.getEnclosingWidget(c);f&&(c==f.domNode?f._cssMouseEvent(a):f._subnodeCssMouseEvent(c,c._cssState,a))}}var a=d.body(),c;p(a,f.over,function(a){b(a,a.target,a.relatedTarget)});p(a,f.out,function(a){b(a,a.target,a.relatedTarget)});p(a,k.press,function(a){c=a.target;
b(a,c)});p(a,k.release,function(a){b(a,c);c=null});p(a,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=e.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return t})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(q,t,r,s,l,b,p,m,f,d){return t("dijit._KeyNavContainer",
[f,d,m],{connectKeyNavHandlers:function(d,e){var f=this._keyNavCodes={},a=b.hitch(this,"focusPrev"),c=b.hitch(this,"focusNext");q.forEach(d,function(b){f[b]=a});q.forEach(e,function(a){f[a]=c});f[l.HOME]=b.hitch(this,"focusFirstChild");f[l.END]=b.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){s.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);q.forEach(this.getChildren(),b.hitch(this,"_startupChild"))},addChild:function(b,
d){this.inherited(arguments);this._startupChild(b)},_startupChild:function(b){b.set("tabIndex","-1")},_getFirst:function(){var b=this.getChildren();return b.length?b[0]:null},_getLast:function(){var b=this.getChildren();return b.length?b[b.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=p.byNode(b))&&b.getParent()==this}})})},
"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(q,t,r,s){return t("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(l,b){var p=this.containerNode;if(0<b){for(p=p.firstChild;0<b;)1==p.nodeType&&b--,p=p.nextSibling;p?b="before":(p=this.containerNode,b="last")}r.place(l.domNode,p,b);this._started&&!l._started&&l.startup()},
removeChild:function(l){"number"==typeof l&&(l=this.getChildren()[l]);l&&(l=l.domNode)&&l.parentNode&&l.parentNode.removeChild(l)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(l,b){s.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var p=this.getChildren(),m=q.indexOf(p,l);return p[m+b]},getIndexOfChild:function(l){return q.indexOf(this.getChildren(),l)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(q,t,r,s,l,b,p,m){return t("dijit._KeyNavMixin",m,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);r.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var f=this._keyNavCodes={};f[s.HOME]=l.hitch(this,"focusFirstChild");f[s.END]=l.hitch(this,"focusLastChild");f[this.isLeftToRight()?s.LEFT_ARROW:s.RIGHT_ARROW]=l.hitch(this,"_onLeftArrow");f[this.isLeftToRight()?s.RIGHT_ARROW:s.LEFT_ARROW]=l.hitch(this,"_onRightArrow");f[s.UP_ARROW]=l.hitch(this,
"_onUpArrow");f[s.DOWN_ARROW]=l.hitch(this,"_onDownArrow")}var d=this,f="string"==typeof this.childSelector?this.childSelector:l.hitch(this,"childSelector");this.own(b(this.domNode,"keypress",l.hitch(this,"_onContainerKeypress")),b(this.domNode,"keydown",l.hitch(this,"_onContainerKeydown")),b(this.domNode,"focus",l.hitch(this,"_onContainerFocus")),b(this.containerNode,b.selector(f,"focusin"),function(b){d._onChildFocus(p.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(b,d){b&&(this.focusedChild&&b!==this.focusedChild&&this._onChildBlur(this.focusedChild),
b.set("tabIndex",this.tabIndex),b.focus(d?"end":"start"))},_onContainerFocus:function(b){b.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){r.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(b){r.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(b){b&&b!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),b.set("tabIndex",this.tabIndex),this.lastFocused=b,this._set("focusedChild",b))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(b,d,k,e){b&&this.focusChild(b)},_keyboardSearchCompare:function(b,d){var k=b.domNode,k=(b.label||(k.focusNode?k.focusNode.label:"")||k.innerText||k.textContent||"").replace(/^\s+/,"").substr(0,d.length).toLowerCase();return d.length&&k==d?-1:0},_onContainerKeydown:function(b){var d=
this._keyNavCodes[b.keyCode];d?(d(b,this.focusedChild),b.stopPropagation(),b.preventDefault(),this._searchString=""):b.keyCode!=s.SPACE||!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey||(b.stopImmediatePropagation(),b.preventDefault(),this._keyboardSearch(b," "))},_onContainerKeypress:function(b){b.charCode<s.SPACE||b.ctrlKey||b.altKey||b.metaKey||b.charCode==s.SPACE&&this._searchTimer||(b.preventDefault(),b.stopPropagation(),this._keyboardSearch(b,String.fromCharCode(b.charCode).toLowerCase()))},
_keyboardSearch:function(b,d){var k=null,e,m=0;l.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=d;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;e=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var b=this.focusedChild||null;if(1==a||!b)if(b=this._getNextFocusableChild(b,1),!b)return;a=b;do{var g=this._keyboardSearchCompare(b,e);g&&0==m++&&
(k=b);if(-1==g){m=-1;break}b=this._getNextFocusableChild(b,1)}while(b!=a)})();this.onKeyboardSearch(k,b,e,m)},_onChildBlur:function(){},_getNextFocusableChild:function(b,d){var k=b;do{if(b)b=this._getNext(b,d);else if(b=this[0<d?"_getFirst":"_getLast"](),!b)break;if(null!=b&&b!=k&&b.isFocusable())return b}while(b!=k);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(b,d){if(b)for(b=b.domNode;b;)if((b=b[0>d?"previousSibling":"nextSibling"])&&"getAttribute"in
b){var k=p.byNode(b);if(k)return k}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e){p=q("dijit.MenuItem"+(b("dojo-bidi")?"_NoBidi":""),[m,f,d,k],{templateString:e,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var a="",
c;c=b.search(/{\S}/);if(0<=c){var a=b.charAt(c+1),d=b.substr(0,c);b=b.substr(c+3);c=d+a+b;b=d+'<span class="dijitMenuItemShortcutKey">'+a+"</span>"+b}else c=b;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",a)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){!b||"label"in this.params||this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);
r.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&r.set(this.accelKeyNode,"id",this.id+"_accel");t.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==b("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(d){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(b){s.toggle(this.domNode,"dijitMenuItemSelected",b)},setLabel:function(b){l.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",b)},setDisabled:function(b){l.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=b?"":"none",this.accelKeyNode.innerHTML=b,r.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});b("dojo-bidi")&&
(p=q("dijit.MenuItem",p,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return p})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(q,t){return q("dijit._Contained",null,{_getSibling:function(q){var s=this.domNode;do s=s[q+"Sibling"];while(s&&1!=s.nodeType);return s&&t.byNode(s)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},
getIndexInParent:function(){var q=this.getParent();return q&&q.getIndexOfChild?q.getIndexOfChild(this):-1}})})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u){var z=t("dijit._MasterTooltip",
[a,c],{duration:e.defaultDuration,templateString:v,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new g(this.domNode);this.fadeIn=r.fadeIn({node:this.domNode,duration:this.duration,onEnd:m.hitch(this,"_onShow")});this.fadeOut=r.fadeOut({node:this.domNode,duration:this.duration,onEnd:m.hitch(this,"_onHide")})},show:function(a,b,c,d,g){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;
else{this.containerNode.innerHTML=a;g&&this.set("textDir",g);this.containerNode.align=d?"right":"left";var e=n.around(this.domNode,b,c&&c.length?c:A.defaultPosition,!d,m.hitch(this,"orient")),f=e.aroundNodePos;"M"==e.corner.charAt(0)&&"M"==e.aroundCorner.charAt(0)?(this.connectorNode.style.top=f.y+(f.h-this.connectorNode.offsetHeight>>1)-e.y+"px",this.connectorNode.style.left=""):"M"==e.corner.charAt(1)&&"M"==e.aroundCorner.charAt(1)?this.connectorNode.style.left=f.x+(f.w-this.connectorNode.offsetWidth>>
1)-e.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");p.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b}},orient:function(a,c,d,g,e){this.connectorNode.style.top="";var f=g.h;g=g.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight",
"TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[c+"-"+d];this.domNode.style.width="auto";var m=b.position(this.domNode);9==k("ie")&&(m.w+=2);var l=Math.min(Math.max(g,1),m.w);b.setMarginBox(this.domNode,{w:l});"B"==d.charAt(0)&&"B"==c.charAt(0)?(a=b.position(a),c=this.connectorNode.offsetHeight,a.h>f?(this.connectorNode.style.top=f-(e.h+c>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-c/
2,0),a.h-c)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,m.w-g)},_onShow:function(){k("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play())},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),
this._onDeck=null)}});k("dojo-bidi")&&z.extend({_setAutoTextDir:function(a){this.applyTextDir(a);q.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});u.showTooltip=function(a,b,c,d,g){c&&(c=q.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));A._masterTT||(u._masterTT=A._masterTT=new z);return A._masterTT.show(a,b,
c,d,g)};u.hideTooltip=function(a){return A._masterTT&&A._masterTT.hide(a)};var A=t("dijit.Tooltip",a,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(a){q.forEach(this._connections||[],function(a){q.forEach(a,function(a){a.remove()})},this);this._connectIds=q.filter(m.isArrayLike(a)?a:a?[a]:[],function(a){return s.byId(a,this.ownerDocument)},this);this._connections=q.map(this._connectIds,function(a){a=s.byId(a,this.ownerDocument);var b=this.selector,c=b?function(a){return d.selector(b,
a)}:function(a){return a},g=this;return[d(a,c(f.enter),function(){g._onHover(this)}),d(a,c("focusin"),function(){g._onHover(this)}),d(a,c(f.leave),m.hitch(g,"_onUnHover")),d(a,c("focusout"),m.hitch(g,"_onUnHover"))]},this);this._set("connectId",a)},addTarget:function(a){a=a.id||a;-1==q.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=q.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},
buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;q.forEach(m.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},_onHover:function(a){this._showTimer||(this._showTimer=this.defer(function(){this.open(a)},this.showDelay))},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);this.close()},open:function(a){this._showTimer&&
(this._showTimer.remove(),delete this._showTimer);var b=this.getContent(a);b&&(A.show(b,a,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=a,this.onShow(a,this.position))},close:function(){this._connectNode&&(A.hide(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close();q.forEach(this._connections||[],function(a){q.forEach(a,function(a){a.remove()})},
this);this.inherited(arguments)}});A._MasterTooltip=z;A.show=u.showTooltip;A.hide=u.hideTooltip;A.defaultPosition=["after-centered","before-centered"];return A})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(q,t,r,s,l){var b={};q.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(l){b[l]=s[l]});r.mixin(b,{defaultDuration:t.defaultDuration||200});r.mixin(l,b);return l})},
"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n){return l("dijit.form._FormSelectWidget",n,{multiple:!1,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,
getOptions:function(a){var b=this.options||[];if(null==a)return b;if(f.isArray(a))return q.map(a,"return this.getOptions(item);",this);f.isString(a)&&(a={value:a});f.isObject(a)&&(q.some(b,function(b,c){for(var d in a)if(!(d in b)||b[d]!=a[d])return!1;a=c;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){q.forEach(f.isArray(a)?a:[a],function(a){a&&f.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(f.isArray(a)?a:[a]);
q.forEach(a,function(a){a&&(this.options=q.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){q.forEach(f.isArray(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),d;if(b)for(d in a)b[d]=a[d]},this);this._loadChildren()},setStore:function(a,b,d){var m=this.store;d=d||{};if(m!==a){for(var l;l=this._notifyConnections.pop();)l.remove();a.get||(f.mixin(a,{_oldAPI:!0,get:function(a){var b=
new t;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new t(function(){d.abort&&d.abort()});c.total=new t;var d=this.fetch(f.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return new e(c)}}),a.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[r.after(a,"onNew",f.hitch(this,"_onNewItem"),!0),r.after(a,
"onDelete",f.hitch(this,"_onDeleteItem"),!0),r.after(a,"onSet",f.hitch(this,"_onSetItem"),!0)]));this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);d.query&&(this._set("query",d.query),this._set("queryOptions",d.queryOptions));a&&(this._loadingStore=!0,this.onLoadDeferred=new t,this._queryRes=a.query(this.query,
this.queryOptions),k(this._queryRes,f.hitch(this,function(e){if(this.sortByLabel&&!d.sort&&e.length)if(a.getValue)e.sort(s.createSortFunction([{attribute:a.getLabelAttributes(e[0])[0]}],a));else{var k=this.labelAttr;e.sort(function(a,b){return a[k]>b[k]?1:b[k]>a[k]?-1:0})}d.onFetch&&(e=d.onFetch.call(this,e,d));q.forEach(e,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(f.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),
-1!=c&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:b);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(e):this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)}));return m},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=f.isArray(a)?
q.map(a,function(a){return f.isObject(a)?a:{value:a}}):f.isObject(a)?[a]:[{value:a}];a=q.filter(this.getOptions(a),function(a){return a&&a.value});var d=this.getOptions()||[];this.multiple||a[0]&&a[0].value||!d.length||(a[0]=d[0]);q.forEach(d,function(b){b.selected=q.some(a,function(a){return a.value===b.value})});d=q.map(a,function(a){return a.value});if("undefined"!=typeof d&&"undefined"!=typeof d[0]){var e=q.map(a,function(a){return a.label});this._setDisplay(this.multiple?e:e[0]);this.inherited(arguments,
[this.multiple?d:d[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=q.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(q.forEach(this._getChildren(),function(a){a.destroyRecursive()}),q.forEach(this.options,this._addOptionItem,this),this._updateSelection())},
_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var b=this;q.forEach(this._getChildren(),function(d){var e=q.some(a,function(a){return d.option&&a===d.option.value});e&&!b.multiple&&(b.focusedChild=d);p.toggle(d.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),e);d.domNode.setAttribute("aria-selected",e?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&
a.length){var b=q.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?q.map(q.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,d=
this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:d?b.getIdentity(a):null,label:d,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);b.setSelectable(this.focusNode,
!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?d("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+m._scopeName+"-value")||a.getAttribute("value"),label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",
this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);r.after(this,"onChange",f.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this.setStore(a,this._oValue))},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(q){var t={};q.setObject("dojo.data.util.sorter",t);t.basicComparator=function(q,s){var l=-1;
null===q&&(q=void 0);null===s&&(s=void 0);if(q==s)l=0;else if(q>s||null==q)l=1;return l};t.createSortFunction=function(q,s){function l(b,a,c,d){return function(e,f){var k=d.getValue(e,b),m=d.getValue(f,b);return a*c(k,m)}}for(var b=[],p,m=s.comparatorMap,f=t.basicComparator,d=0;d<q.length;d++){p=q[d];var k=p.attribute;if(k){p=p.descending?-1:1;var e=f;m&&("string"!==typeof k&&"toString"in k&&(k=k.toString()),e=m[k]||f);b.push(l(k,p,e,s))}}return function(d,a){for(var c=0;c<b.length;){var g=b[c++](d,
a);if(0!==g)return g}return 0}};return t})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(q,t,r){var s=function(l){function b(b){l[b]||(l[b]=function(){var m=arguments;return r(l,function(f){Array.prototype.unshift.call(m,f);return s(q[b].apply(q,m))})})}if(!l)return l;l.then&&(l=t.delegate(l));b("forEach");b("filter");b("map");l.total||(l.total=r(l,function(b){return b.length}));return l};t.setObject("dojo.store.util.QueryResults",
s);return s})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(q,t,r,s){return q("dijit.form._FormValueWidget",[r,s],{_layoutHackIE7:function(){if(7==t("ie"))for(var l=this.domNode,b=l.parentNode,p=l.firstChild||l,m=p.style.filter,f=this;b&&0==b.clientHeight;)(function(){var d=f.connect(b,"onscroll",function(){f.disconnect(d);p.style.filter=(new Date).getMilliseconds();f.defer(function(){p.style.filter=m})})})(),b=b.parentNode}})})},
"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(q,t,r,s,l,b,p,m){t("dijit-legacy-requires")&&s(0,function(){require(["dijit/form/_FormValueWidget"])});return q("dijit.form._FormWidget",[l,p,b,m],{setDisabled:function(b){r.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){r.deprecated("dijit.form._FormWidget:setValue("+
b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){r.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!t("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),
function(q,t,r,s,l,b,p,m,f,d){return t("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);r.set(this.focusNode,"disabled",b);this.valueNode&&r.set(this.valueNode,"disabled",b);this.focusNode.setAttribute("aria-disabled",b?"true":"false");b?(this._set("hovering",!1),this._set("active",
!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",q.forEach(l.isArray(b)?b:[b],function(b){b=this[b];m("webkit")||d.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var d=this.own(p(this.focusNode,"focus",function(){m.remove();d.remove()}))[0],m=this.own(p(this.ownerDocumentBody,
"mouseup, touchend",l.hitch(this,function(a){m.remove();d.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){f.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=s.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},compare:function(b,d){return"number"==typeof b&&"number"==typeof d?
isNaN(b)&&isNaN(d)?0:b-d:b>d?1:b<d?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(b,d){void 0!=this._lastValueReported||null!==d&&this._onChangeActive||(this._resetValue=this._lastValueReported=b);this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,this._lastValueReported);(this.intermediateChanges||d||void 0===d)&&this._pendingOnChange&&(this._lastValueReported=b,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&
this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(b)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(q,
t,r,s,l,b,p){return q("dijit.form._FormValueMixin",p,{readOnly:!1,_setReadOnlyAttr:function(b){t.set(this.focusNode,"readOnly",b);this._set("readOnly",b)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(b,f){this._handleOnChange(b,f)},_handleOnChange:function(b,f){this._set("value",b);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=
!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/ComboButton":function(){define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(q,t,r,s,l){return q("dijit.form.ComboButton",s,{templateString:l,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},
_focusedNode:null,_onButtonKeyDown:function(b){b.keyCode==t[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(r.focus(this._popupStateNode),b.stopPropagation(),b.preventDefault())},_onArrowKeyDown:function(b){b.keyCode==t[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(r.focus(this.titleNode),b.stopPropagation(),b.preventDefault())},focus:function(b){this.disabled||r.focus("start"==b?this.titleNode:this._popupStateNode)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html".split(" "),
function(q,t,r,s,l,b,p,m,f){return q("dijit.form.DropDownButton",[b,p,m],{baseClass:"dijitDropDownButton",templateString:f,_fillContent:function(){if(this.srcNodeRef){var b=r("*",this.srcNodeRef);this.inherited(arguments,[b[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var b=r("[widgetId]",this.dropDownContainer)[0];b&&(this.dropDown=s.byNode(b));delete this.dropDownContainer}this.dropDown&&l.hide(this.dropDown);this.inherited(arguments)}},
isLoaded:function(){var b=this.dropDown;return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var f=this.dropDown,e=f.on("load",t.hitch(this,function(){e.remove();b()}));f.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html".split(" "),function(q,t,r,s,l,b,p,
m,f,d){s("dijit-legacy-requires")&&p(0,function(){q(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});p=t("dijit.form.Button"+(s("dojo-bidi")?"_NoBidi":""),[m,f],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:d,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},_fillContent:function(d){!d||this.params&&"label"in this.params||!(d=b.trim(d.innerHTML))||
(this.label=d)},_setShowLabelAttr:function(b){this.containerNode&&r.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(b){l.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},_setLabelAttr:function(d){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=b.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});s("dojo-bidi")&&(p=t("dijit.form.Button",
p,{_setLabelAttr:function(b){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return p})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(q,t,r,s){var l=q("dijit.form._ButtonMixin"+(r("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(b){b.stopPropagation();
b.preventDefault();this.disabled||this.valueNode.click(b);return!1},_onClick:function(b){if(this.disabled)return b.stopPropagation(),b.preventDefault(),!1;!1===this.onClick(b)&&b.preventDefault();var l=b.defaultPrevented;if(!l&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var m=this.domNode;m.parentNode;m=m.parentNode){var f=s.byNode(m);if(f&&"function"==typeof f._onSubmit){f._onSubmit(b);b.preventDefault();l=!0;break}}return!l},postCreate:function(){this.inherited(arguments);t.setSelectable(this.focusNode,
!1)},onClick:function(){return!0},_setLabelAttr:function(b){this._set("label",b);(this.containerNode||this.focusNode).innerHTML=b}});r("dojo-bidi")&&(l=q("dijit.form._ButtonMixin",l,{_setLabelAttr:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return l})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){return q("dijit._HasDropDown",g,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){this.disabled||this.readOnly||("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this._docHandler=this.own(k(this.ownerDocument,e.release,d.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown())},
_onDropDownMouseUp:function(a){a&&this._docHandler&&(this._docHandler.remove(),this._docHandler=null);var c=this.dropDown,d=!1;if(a&&this._opened){var g=b.position(this._buttonNode,!0);if(!(a.pageX>=g.x&&a.pageX<=g.x+g.w&&a.pageY>=g.y&&a.pageY<=g.y+g.h)){for(g=a.target;g&&!d;)l.contains(g,"dijitPopup")?d=!0:g=g.parentNode;if(d){g=a.target;if(c.onItemClick){for(var e;g&&!(e=n.byNode(g));)g=g.parentNode;if(e&&e.onClick&&e.getParent)e.getParent().onItemClick(e,a)}return}}}this._opened?c.focus&&(!1!==
c.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){c.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":
"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";l.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(k(this._buttonNode,e.press,d.hitch(this,"_onDropDownMouseDown")),k(this._buttonNode,"click",d.hitch(this,"_onDropDownClick")),k(a,"keydown",d.hitch(this,"_onKey")),k(a,"keyup",
d.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),a.preventDefault()):b&&this._opened&&a.keyCode==f.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==f.DOWN_ARROW||(a.keyCode==f.ENTER||
a.keyCode==f.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(d.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},
loadAndOpenDropDown:function(){var a=new t,b=d.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,g=a.domNode,e=this._aroundNode||this.domNode,f=this,k=c.open({parent:this,popup:a,around:e,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){f.closeDropDown(!0)},
onCancel:function(){f.closeDropDown(!0)},onClose:function(){s.set(f._popupStateNode,"popupActive",!1);l.remove(f._popupStateNode,"dijitHasDropDownOpen");f._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&e.offsetWidth>a._popupWrapper.offsetWidth)e={w:e.offsetWidth-(a._popupWrapper.offsetWidth-a.domNode.offsetWidth)},d.isFunction(a.resize)?a.resize(e):b.setMarginBox(g,e);s.set(this._popupStateNode,"popupActive","true");l.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",
!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===g.getAttribute("role")||g.getAttribute("aria-labelledby")||g.setAttribute("aria-labelledby",this.id);return k},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus(),c.close(this.dropDown),this._opened=!1)}})})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),
function(q,t,r,s,l,b,p,m,f){s("dijit-legacy-requires")&&b(0,function(){q(["dijit/form/RadioButton"])});return t("dijit.form.CheckBox",[p,m],{templateString:f,baseClass:"dijitCheckBox",_setValueAttr:function(b,f){"string"==typeof b&&(this.inherited(arguments),b=!0);this._created&&this.set("checked",b,f)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},
_fillContent:function(){},_onFocus:function(){this.id&&l("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&l("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(q,t,r,s){return q("dijit.form.ToggleButton",[r,s],{baseClass:"dijitToggleButton",setChecked:function(l){t.deprecated("setChecked("+
l+") is deprecated. Use set('checked',"+l+") instead.","","2.0");this.set("checked",l)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(q,t){return q("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(q){var s=this.checked;this._set("checked",!s);var l=this.inherited(arguments);this.set("checked",l?this.checked:s);return l},_setCheckedAttr:function(q,s){this._set("checked",q);var l=this.focusNode||this.domNode;
this._created&&t.get(l,"checked")!=!!q&&t.set(l,"checked",!!q);l.setAttribute(this._aria_attr,String(q));this._handleOnChange(q,s)},postCreate:function(){this.inherited(arguments);var q=this.focusNode||this.domNode;this.checked&&q.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(q,t){return q("dijit.form._CheckBoxMixin",null,{type:"checkbox",
value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(q){this._set("readOnly",q);t.set(this.focusNode,"readOnly",q)},_setLabelAttr:void 0,_getSubmitValue:function(q){return null==q||""===q?"on":q},_setValueAttr:function(q){q=this._getSubmitValue(q);this._set("value",q);t.set(this.focusNode,"value",q)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));t.set(this.focusNode,"value",this.value)},_onClick:function(q){return this.readOnly?
(q.stopPropagation(),q.preventDefault(),!1):this.inherited(arguments)}})})},"dojox/form/FileInput":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/fx dojo/dom-attr dojo/dom-class dojo/text!./resources/FileInput.html dijit/form/_FormWidget dijit/_Templated".split(" "),function(q,t,r,s,l,b,p,m){t.experimental("dojox.form.FileInput");return q("dojox.form.FileInput",p,{label:"Browse ...",cancelText:"Cancel",name:"uploadFile",templateString:b,startup:function(){this._listener=this.connect(this.fileInput,
"onchange","_matchValue");this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue")},postCreate:function(){},_matchValue:function(){this.inputNode.value=this.fileInput.value;this.inputNode.value&&(this.cancelNode.style.visibility="visible",r.fadeIn({node:this.cancelNode,duration:275}).play())},setLabel:function(b,d){this.titleNode.innerHTML=b},reset:function(b){this.disconnect(this._listener);this.disconnect(this._keyListener);this.fileInput&&this.domNode.removeChild(this.fileInput);
r.fadeOut({node:this.cancelNode,duration:275}).play();this.fileInput=document.createElement("input");this.fileInput.setAttribute("type","file");this.fileInput.setAttribute("id",this.id);this.fileInput.setAttribute("name",this.name);l.add(this.fileInput,"dijitFileInputReal");this.domNode.appendChild(this.fileInput);this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");this._listener=this.connect(this.fileInput,"onchange","_matchValue");this.inputNode.value=""}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(q,t,r,s,l,b,p){b.extend(q,{waiRole:"",waiState:""});return l("dijit._Templated",[t,r],{widgetsInTemplate:!1,constructor:function(){p.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(b,f){var d=this.inherited(arguments),k=f(b,"waiRole");k&&b.setAttribute("role",k);(k=f(b,"waiState"))&&s.forEach(k.split(/\s*,\s*/),function(d){-1!=d.indexOf("-")&&(d=d.split("-"),b.setAttribute("aria-"+
d[0],d[1]))});return d}})})},"dojox/form/Uploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/dom-form dijit dijit/form/Button ./uploader/_Base ./uploader/_HTML5 ./uploader/_IFrame ./uploader/_Flash dojo/i18n!./nls/Uploader dojo/text!./resources/Uploader.html".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u,z,A){return t("dojox.form.Uploader",
[c,a,g,v,u],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:z.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:A,baseClass:"dijitUploader "+a.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.force=this.force.toLowerCase();this.supports("multiple")?this.uploadType="form"===this.force?"form":"html5":this.uploadType="flash"===this.force?"flash":"iframe";this.inherited(arguments)},
buildRendering:function(){this.inherited(arguments);p.set(this.domNode,{overflow:"hidden",position:"relative"});this._buildDisplay();d.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=k.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(a){for(var b=0,c,d=[];c=a[b++];)c&&c.name&&d.push(c.name);
this.displayInput.value=d.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(a){},onBegin:function(a){},onProgress:function(a){},onComplete:function(a){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(a){},upload:function(a){a=a||{};a.uploadType=this.uploadType;this.inherited(arguments)},
submit:function(a){a=a?a.tagName?a:this.getForm():this.getForm();a=e.toObject(a);a.uploadType=this.uploadType;this.upload(a)},reset:function(){delete this._files;this._disconnectButton();s.forEach(this._inputs,k.destroy,dojo);this._inputs=[];this._nameIndex=0;this._createInput()},getFileList:function(){var a=[];this.supports("multiple")?s.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},this):s.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+
1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this);return a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(a){console.error("Uploader value is read only")},_setDisabledAttr:function(a){this.disabled!=a&&this.inputNode&&(this.inherited(arguments),p.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:p.get(a,"width"),h:p.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/
60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(p.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var a=this._getFileFieldName();this.focusNode=this.inputNode=k.create("input",{type:"file",name:a,"aria-labelledby":this.id+"_label"},this.domNode,"first");this.supports("multiple")&&
this.multiple&&d.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);p.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(l.connect(this.inputNode,"change",this,function(a){this._files=this.inputNode.files;this.onChange(this.getFileList(a));!this.supports("multiple")&&this.multiple&&this._createInput()}));-1<this.tabIndex&&(this.inputNode.tabIndex=this.tabIndex,
this._cons.push(l.connect(this.inputNode,"focus",this,function(){m.add(this.domNode,this.focusedClass)})),this._cons.push(l.connect(this.inputNode,"blur",this,function(){m.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){s.forEach(this._cons,l.disconnect);this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/has dojo/_base/declare dojo/_base/event dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),
function(q,t,r,s,l,b,p,m,f,d){l.add("FormData",function(){return!!window.FormData});l.add("xhr-sendAsBinary",function(){var b=window.XMLHttpRequest&&new window.XMLHttpRequest;return b&&!!b.sendAsBinary});l.add("file-multiple",function(){return!!{"true":1,"false":1}[s.get(document.createElement("input",{type:"file"}),"multiple")]});return b("dojox.form.uploader._Base",[m,f,d],{getForm:function(){if(!this.form)for(var b=this.domNode;b&&b.tagName&&b!==document.body;){if("form"==b.tagName.toLowerCase()){this.form=
b;break}b=b.parentNode}return this.form},getUrl:function(){this.uploadUrl&&(this.url=this.uploadUrl);if(this.url)return this.url;this.getForm()&&(this.url=this.form.action);return this.url},connectForm:function(){this.url=this.getUrl();!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(b){p.stop(b);this.submit(this.form)}))},supports:function(b){switch(b){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return l("file-multiple");case "FormData":return l(b);
case "sendAsBinary":return l("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(b){return b.substring(b.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(b){var d=Math.round(b/1024*1E5)/1E5,f=Math.round(b/1048576*1E5)/1E5,a=Math.round(b/1073741824*1E5)/1E5,c=b;1<d&&(c=d.toFixed(1)+" kb");1<f&&(c=f.toFixed(1)+" mb");1<a&&(c=a.toFixed(1)+" gb");return{kb:d,mb:f,gb:a,bytes:b,value:c}}})})},"dojox/form/uploader/_HTML5":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo"],function(q,t,r,s){return q("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(l){this.upload(l[0])})},_drop:function(l){s.stopEvent(l);this._files=l.dataTransfer.files;this.onChange(this.getFileList())},upload:function(l){this.onBegin(this.getFileList());
this.uploadWithFormData(l)},addDropTarget:function(l,b){b||(this.connect(l,"dragenter",s.stopEvent),this.connect(l,"dragover",s.stopEvent),this.connect(l,"dragleave",s.stopEvent));this.connect(l,"drop","_drop")},uploadWithFormData:function(l){if(this.getUrl()){var b=new FormData,p=this._getFileFieldName();r.forEach(this._files,function(f,d){b.append(p,f)},this);if(l){l.uploadType=this.uploadType;for(var m in l)b.append(m,l[m])}this.createXhr().send(b)}else console.error("No upload url found.",this)},
_xhrProgress:function(l){if(l.lengthComputable){var b={bytesLoaded:l.loaded,bytesTotal:l.total,type:l.type,timeStamp:l.timeStamp};"load"==l.type?(b.percent="100%",b.decimal=1):(b.decimal=l.loaded/l.total,b.percent=Math.ceil(l.loaded/l.total*100)+"%");this.onProgress(b)}},createXhr:function(){var l=new XMLHttpRequest,b;l.upload.addEventListener("progress",t.hitch(this,"_xhrProgress"),!1);l.addEventListener("load",t.hitch(this,"_xhrProgress"),!1);l.addEventListener("error",t.hitch(this,function(l){this.onError(l);
clearInterval(b)}),!1);l.addEventListener("abort",t.hitch(this,function(l){this.onAbort(l);clearInterval(b)}),!1);l.onreadystatechange=t.hitch(this,function(){if(4===l.readyState){clearInterval(b);try{this.onComplete(JSON.parse(l.responseText.replace(/^\{\}&&/,"")))}catch(p){console.error("Error parsing server result:",p),console.error(l.responseText),this.onError("Error parsing server result:",p)}}});l.open("POST",this.getUrl());l.setRequestHeader("Accept","application/json");b=setInterval(t.hitch(this,
function(){}),250);return l}})})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),function(q,t,r,s,l,b,p,m){p.isDebug&&r(["./_firebug/firebug"]);var f=p.require;f&&(f=b.map(l.isArray(f)?f:[f],function(b){return b.replace(/\./g,"/")}),q.isAsync?r(f):m(1,function(){r(f)}));return q})},
"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(q){return q})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(q,t,r){var s=window,l={addOnWindowUnload:function(b,l){q.windowUnloaded||r(s,"unload",q.windowUnloaded=function(){});r(s,"unload",t.hitch(b,l))},addOnUnload:function(b,l){r(s,"beforeunload",t.hitch(b,
l))}};q.addOnWindowUnload=l.addOnWindowUnload;q.addOnUnload=l.addOnUnload;return l})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),function(q,t,r,s,l,b,p){var m=function(a){return a.replace(/\./g,"/")},f=/\/\/>>built/,d=[],k=[],e=function(a,b,c){d.push(c);p.forEach(a.split(","),function(a){a=H(a,b.module);k.push(a);S(a)});n()},n=function(){var a,b;for(b in M)if(a=M[b],void 0===a.noReqPluginCheck&&(a.noReqPluginCheck=/loadInit\!/.test(b)||
/require\!/.test(b)?1:0),!a.executed&&!a.noReqPluginCheck&&a.injected==y)return;N(function(){var a=d;d=[];p.forEach(a,function(a){a(1)})})},a=function(a,b,c){var d=/\(|\)/g,g=1;for(d.lastIndex=b;(b=d.exec(a))&&(g=")"==b[0]?g-1:g+1,0!=g););if(0!=g)throw"unmatched paren around character "+d.lastIndex+" in: "+a;return[q.trim(a.substring(c,d.lastIndex))+";\n",d.lastIndex]},c=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,g=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,
v=/(^|\s)(require|define)\s*\(/m,u=function(b,d){var e,f,k,m=[],l=[];e=[];for(d=d||b.replace(c,function(a){g.lastIndex=v.lastIndex=0;return g.test(a)||v.test(a)?"":a});e=g.exec(d);)f=g.lastIndex,k=f-e[0].length,f=a(d,f,k),"loadInit"==e[2]?m.push(f[0]):l.push(f[0]),g.lastIndex=f[1];e=m.concat(l);return e.length||!v.test(d)?[b.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),e.join(""),e]:0},z=r.initSyncLoader(e,n,function(a,b){var c,d,g=[],e=[];if(f.test(b)||!(c=u(b)))return 0;d=a.mid+
"-*loadInit";for(var k in H("dojo",a).result.scopeMap)g.push(k),e.push('"'+k+'"');return"// xdomain rewrite of "+a.mid+"\ndefine('"+d+"',{\n\tnames:"+l.stringify(g)+",\n\tdef:function("+g.join(",")+"){"+c[1]+"}});\n\ndefine("+l.stringify(g.concat(["dojo/loadInit!"+d]))+", function("+g.join(",")+"){\n"+c[0]+"});"}),A=z.sync,y=z.requested,C=z.arrived,D=z.nonmodule,B=z.executing,G=z.executed,J=z.syncExecStack,M=z.modules,F=z.execQ,H=z.getModule,S=z.injectModule,K=z.setArrived,x=z.signal,L=z.finishExec,
I=z.execModule,T=z.getLegacyMode,N=z.guardCheckComplete,e=z.dojoRequirePlugin;q.provide=function(a){var c=J[0],d=b.mixin(H(m(a),r.module),{executed:B,result:b.getObject(a,!0)});K(d);c&&(c.provides||(c.provides=[])).push(function(){d.result=b.getObject(a);delete d.provides;d.executed!==G&&L(d)});return d.result};t.add("config-publishRequireResult",1,0,0);q.require=function(a,c){var d=function(a,b){var c=H(m(a),r.module);if(J.length&&J[0].finish)J[0].finish.push(a);else{if(c.executed)return c.result;
b&&(c.result=D);var d=T();S(c);d=T();c.executed!==G&&c.injected===C&&z.guardCheckComplete(function(){I(c)});if(c.executed)return c.result;d==A?c.cjs?F.unshift(c):J.length&&(J[0].finish=[a]):F.push(c)}}(a,c);t("config-publishRequireResult")&&!b.exists(a)&&void 0!==d&&b.setObject(a,d);return d};q.loadInit=function(a){a()};q.registerModulePath=function(a,b){var c={};c[a.replace(/\./g,"/")]=b;r({paths:c})};q.platformRequire=function(a){a=(a.common||[]).concat(a[q._name]||a["default"]||[]);for(var c;a.length;)b.isArray(c=
a.shift())?q.require.apply(q,c):q.require(c)};q.requireIf=q.requireAfterIf=function(a,b,c){a&&q.require(b,c)};q.requireLocalization=function(a,b,c){r(["../i18n"],function(d){d.getLocalization(a,b,c)})};return{extractLegacyApiApplications:u,require:e,loadInit:function(a,b,c){b([a],function(a){b(a.names,function(){for(var d="",g=[],f=0;f<arguments.length;f++)d+="var "+a.names[f]+"= arguments["+f+"]; ",g.push(arguments[f]);eval(d);var k=b.module,l=[],n,d={provide:function(a){a=m(a);a=H(a,k);a!==k&&K(a)},
require:function(a,b){a=m(a);b&&(H(a,k).result=D);l.push(a)},requireLocalization:function(a,b,c){n||(n=["dojo/i18n"]);c=(c||q.locale).toLowerCase();a=m(a)+"/nls/"+(/root/i.test(c)?"":c+"/")+m(b);H(a,k).isXd&&n.push("dojo/i18n!"+a)},loadInit:function(a){a()}},f={},p;try{for(p in d)f[p]=q[p],q[p]=d[p];a.def.apply(null,g)}catch(v){x("error",[{src:s.id,id:"failedDojoLoadInit"},v])}finally{for(p in d)q[p]=f[p]}n&&(l=l.concat(n));l.length?e(l.join(","),b,c):c()})})}}})},"dojox/form/uploader/_IFrame":function(){define("dojo/query dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-form dojo/request/iframe".split(" "),
function(q,t,r,s,l,b,p){return r("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(b){var f={},d;this.getForm();var k=this.getUrl(),e=this;b=b||{};b.uploadType=this.uploadType;d=t.place('<form enctype="multipart/form-data" method="post"></form>',this.domNode);l.forEach(this._inputs,function(b,a){""!==b.value&&(d.appendChild(b),f[b.name]=b.value)},this);
if(b)for(nm in b)void 0===f[nm]&&t.create("input",{name:nm,value:b[nm],type:"hidden"},d);p.post(k,{form:d,handleAs:"json",content:b}).then(function(f){t.destroy(d);if(b.ERROR||b.error)e.onError(f);else e.onComplete(f)},function(b){console.error("error parsing server result",b);t.destroy(d);e.onError(b)})}})})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e){function n(a){return!this.isFulfilled()}function a(a){return!!this._finished}function c(a,c){if(!c)try{var d=a.options,g=v.doc(v._frame),e=d.handleAs;if("html"!==e){if("xml"===e)if("html"===g.documentElement.tagName.toLowerCase()){m("a",g.documentElement).orphan();var f=g.documentElement.innerText,f=f.replace(/>\s+</g,"><");a.text=b.trim(f)}else a.data=g;else a.text=g.getElementsByTagName("textarea")[0].value;l(a)}else a.data=g}catch(k){c=k}c?this.reject(c):this._finished?
this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function g(a){this._callNext()}function v(b,d,e){var f=s.parseArgs(b,s.deepCreate(A,d),!0);b=f.url;d=f.options;if("GET"!==d.method&&"POST"!==d.method)throw Error(d.method+" not supported by dojo/request/iframe");v._frame||(v._frame=v.create(v._iframeName,z+"();"));b=s.deferred(f,null,n,a,c,g);b._callNext=function(){this._calledNext||(this._calledNext=!0,v._currentDfd=null,v._fireNextRequest())};b._legacy=e;v._dfdQueue.push(b);
v._fireNextRequest();r(b);return e?b:b.promise}var u=q.id.replace(/[\/\.\-]/g,"_"),z=u+"_onload";e.global[z]||(e.global[z]=function(){var a=v._currentDfd;if(a){var b=d.byId(a.response.options.form)||a._tmpForm;if(b){for(var c=a._contentToClean,g=0;g<c.length;g++)for(var e=c[g],f=0;f<b.childNodes.length;f++){var m=b.childNodes[f];if(m.name===e){k.destroy(m);break}}a._originalAction&&b.setAttribute("action",a._originalAction);a._originalMethod&&(b.setAttribute("method",a._originalMethod),b.method=a._originalMethod);
a._originalTarget&&(b.setAttribute("target",a._originalTarget),b.target=a._originalTarget)}a._tmpForm&&(k.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else v._fireNextRequest()});var A={method:"POST"};v.create=function(a,b,c){if(e.global[a])return e.global[a];if(e.global.frames[a])return e.global.frames[a];c||(f("config-useXDomain")&&!f("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
c=f("config-dojoBlankHtmlUrl")||t.toUrl("dojo/resources/blank.html"));b=k.place('<iframe id="'+a+'" name="'+a+'" src="'+c+'" onload="'+b+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',e.body());return e.global[a]=b};v.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=e.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(e.doc.frames[b]&&
e.doc.frames[b].document)return e.doc.frames[b].document}return null};v.setSrc=function(a,b,c){a=e.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{c?a.location.replace(b):a.location=b}catch(d){}};v._iframeName=u+"_IoIframe";v._notifyStart=function(){};v._dfdQueue=[];v._currentDfd=null;v._fireNextRequest=function(){var a;try{if(!v._currentDfd&&v._dfdQueue.length){do a=v._currentDfd=v._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&v._dfdQueue.length);if(!a||a.canceled||
a.isCanceled&&a.isCanceled())v._currentDfd=null;else{var c=a.response,g=c.options,f=a._contentToClean=[],m=d.byId(g.form),l=s.notify,n=g.data||null,q;a._legacy||"POST"!==g.method||m?"GET"===g.method&&m&&-1<c.url.indexOf("?")&&(q=c.url.slice(c.url.indexOf("?")+1),n=b.mixin(p.queryToObject(q),n)):m=a._tmpForm=k.create("form",{name:u+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},e.body());if(m){if(!a._legacy){var r=m;do r=r.parentNode;while(r!==e.doc.documentElement);r||(m.style.position=
"absolute",m.style.left="-1000px",m.style.top="-1000px",e.body().appendChild(m));m.name||(m.name=u+"_form")}if(n){var r=function(a,b){k.create("input",{type:"hidden",name:a,value:b},m);f.push(a)},z;for(z in n){var t=n[z];if(b.isArray(t)&&1<t.length)for(q=0;q<t.length;q++)r(z,t[q]);else m[z]?m[z].value=t:r(z,t)}}var A=m.getAttributeNode("action"),L=m.getAttributeNode("method"),I=m.getAttributeNode("target");c.url&&(a._originalAction=A?A.value:null,A?A.value=c.url:m.setAttribute("action",c.url));a._legacy?
L&&L.value||(L?L.value=g.method:m.setAttribute("method",g.method)):(a._originalMethod=L?L.value:null,L?L.value=g.method:m.setAttribute("method",g.method));a._originalTarget=I?I.value:null;I?I.value=v._iframeName:m.setAttribute("target",v._iframeName);m.target=v._iframeName;l&&l.emit("send",c,a.promise.cancel);v._notifyStart(c);m.submit()}else g="",c.options.data&&(g=c.options.data,"string"!==typeof g&&(g=p.objectToQuery(g))),r=c.url+(-1<c.url.indexOf("?")?"&":"?")+g,l&&l.emit("send",c,a.promise.cancel),
v._notifyStart(c),v.setSrc(v._frame,r,!0)}}}catch(T){a.reject(T)}};s.addCommonMethods(v,["GET","POST"]);return v})},"dojox/form/uploader/_Flash":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/array dojox/embed/Flash".split(" "),function(q,t,r,s,l,b,p,m,f,d){return l("dojox.form.uploader._Flash",[],{swfPath:b.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),preventCache:!0,
skipServerCheck:!0,serverTimeout:2E3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles");this.inherited(arguments)},onReady:function(b){},onLoad:function(b){},onFileChange:function(b){},onFileProgress:function(b){},getFlashFileList:function(){return this._files},
flashReset:function(){this.flashMovie.reset();this._files=[];this._fileMap={}},uploadFlash:function(b){this.onBegin(this.getFileList());b=b||{};b.returnType="F";b.uploadType=this.uploadType;this.flashMovie.doUpload(b)},_change:function(b){this._files=this._files.concat(b);f.forEach(b,function(b){b.bytesLoaded=0;b.bytesTotal=b.size;this._fileMap[b.name+"_"+b.size]=b},this);this.onChange(this._files);this.onFileChange(b)},_complete:function(b){this._getCustomEvent().type="load";this.onComplete(b)},
_progress:function(b){this._fileMap[b.name+"_"+b.bytesTotal].bytesLoaded=b.bytesLoaded;var d=this._getCustomEvent();this.onFileProgress(b);this.onProgress(d)},_error:function(b){this.onError(b)},_onFlashBlur:function(b){},_getCustomEvent:function(){var b={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()},d;for(d in this._fileMap)b.bytesTotal+=this._fileMap[d].bytesTotal,b.bytesLoaded+=this._fileMap[d].bytesLoaded;b.decimal=b.bytesLoaded/b.bytesTotal;b.percent=Math.ceil(b.bytesLoaded/
b.bytesTotal*100)+"%";return b},_connectFlash:function(){this._subs=[];this._cons=[];var b=m.hitch(this,function(b,d){this._subs.push(p.subscribe(this.id+b,this,d))});b("/filesSelected","_change");b("/filesUploaded","_complete");b("/filesProgress","_progress");b("/filesError","_error");b("/filesCanceled","onCancel");b("/stageBlur","_onFlashBlur");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&s.set(this.domNode,"tabIndex",this.tabIndex)},
_createFlashUploader:function(){var b=this.btnSize.w,e=this.btnSize.h;if(b){var f=this.getUrl();if(f){if(0>f.toLowerCase().indexOf("http")&&0!=f.indexOf("/")){var a=window.location.href.split("/");a.pop();a=a.join("/")+"/";f=a+f}}else console.warn("Warning: no uploadUrl provided.");this.inputNode=r.create("div",{className:"dojoxFlashNode"},this.domNode,"first");t.set(this.inputNode,{position:"absolute",top:"-2px",width:b+"px",height:e+"px",opacity:0});b={expressInstall:!0,path:(this.swfPath.uri||
this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():""),width:b,height:e,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:f,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};
this.flashObject=new d(b,this.inputNode);this.flashObject.onError=m.hitch(function(a){console.error("Flash Error: "+a)});this.flashObject.onReady=m.hitch(this,function(){this.onReady(this)});this.flashObject.onLoad=m.hitch(this,function(a){this.flashMovie=a;this.flashReady=!0;this.onLoad(this)});this._connectFlash()}else setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode);this._createFlashUploader()}),200)}})})},"dojox/embed/Flash":function(){define(["dojo"],function(q){function t(f){f=
q.delegate(p,f);if(!("path"in f))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),null;"id"in f||(f.id=l+b++);return f}var r,s,l="dojox-embed-flash-",b=0,p={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};q.isIE?(r=function(b){b=t(b);if(!b)return null;var d,k=b.path;if(b.vars){var e=[];for(d in b.vars)e.push(d+"="+b.vars[d]);b.params.FlashVars=e.join("&");delete b.vars}k=
'<object id="'+b.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+b.width+'" height="'+b.height+'"'+(b.style?' style="'+b.style+'"':"")+'><param name="movie" value="'+k+'" />';if(b.params)for(d in b.params)k+='<param name="'+d+'" value="'+b.params[d]+'" />';return{id:b.id,markup:k+"</object>"}},s=function(){for(var b=10,d=null;!d&&7<b;)try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b--)}catch(k){}return d?(b=d.GetVariable("$version").split(" ")[1].split(","),{major:null!=
b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}(),q.addOnWindowUnload(function(){console.warn("***************UNLOAD");var b=function(){};q.query("object").reverse().style("display","none").forEach(function(d){for(var k in d)if("FlashVars"!=k&&q.isFunction(d[k]))try{d[k]=b}catch(e){}})})):(r=function(b){b=t(b);if(!b)return null;var d,k=b.path;if(b.vars){var e=[];for(d in b.vars)e.push(d+"="+b.vars[d]);b.params.flashVars=e.join("&");
delete b.vars}k='<embed type="application/x-shockwave-flash" src="'+k+'" id="'+b.id+'" width="'+b.width+'" height="'+b.height+'"'+(b.style?' style="'+b.style+'" ':"")+'pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(b.params)for(d in b.params)k+=" "+d+'="'+b.params[d]+'"';return{id:b.id,markup:k+" />"}},s=function(){var b=navigator.plugins["Shockwave Flash"];return b&&b.description?(b=b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),
{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}());var m=function(b,d){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=dojox.embed.Flash.available;this.minimumVersion=b.minimumVersion||9;this.domNode=this.movie=this.id=null;d&&(d=q.byId(d));setTimeout(q.hitch(this,
function(){if(b.expressInstall||this.available&&this.available>=this.minimumVersion)if(b&&d)this.init(b,d);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),100)};q.extend(m,{onReady:function(b){},onLoad:function(b){},onError:function(b){},_onload:function(){clearInterval(this._poller);delete this._poller;
delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(b,d){this.destroy();d=q.byId(d||this.domNode);if(!d)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var k=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;dojox.embed.Flash.initialized&&(this.id=dojox.embed.Flash.place(b,d),this.domNode=d,setTimeout(q.hitch(this,function(){this.movie=this.byId(this.id,b.doc);this.onReady(this.movie);this._poller=setInterval(q.hitch(this,
function(){try{k=this.movie.PercentLoaded()}catch(b){console.warn("this.movie.PercentLoaded() failed",b,this.movie)}if(100==k)this._onload();else if(0==k&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(b){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var b=q.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),d;for(d in this)b[d]||
delete this[d];this._poller?q.connect(this,"onLoad",this,"_destroy"):this._destroy()}},byId:function(b,d){d=d||document;return d.embeds[b]?d.embeds[b]:d[b]?d[b]:window[b]?window[b]:document[b]?document[b]:null}});q.mixin(m,{minSupported:8,available:s.major,supported:s.major>=s.required,minimumRequired:s.required,version:s,initialized:!1,onInitialize:function(){m.initialized=!0},__ie_markup__:function(b){return r(b)},proxy:function(b,d){q.forEach(q.isArray(d)?d:[d],function(b){this[b]=q.hitch(this,
function(){return function(){return eval(this.movie.CallFunction('<invoke name="'+b+'" returntype="javascript"><arguments>'+q.map(arguments,function(b){return __flash__toXML(b)}).join("")+"</arguments></invoke>"))}.apply(this,arguments||[])})},b)}});m.place=function(b,d){var k=r(b);d=q.byId(d);d||(d=q.doc.createElement("div"),d.id=k.id+"-container",q.body().appendChild(d));return k?(d.innerHTML=k.markup,k.id):null};m.onInitialize();q.setObject("dojox.embed.Flash",m);return m})},"dojox/form/uploader/FileList":function(){define("dojo/_base/fx dojo/dom-style dojo/dom-class dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_base/manager dojox/form/uploader/_Base dojo/text!../resources/UploaderFileList.html".split(" "),
function(q,t,r,s,l,b,p,m,f){return s("dojox.form.uploader.FileList",m,{uploaderId:"",uploader:null,headerIndex:"#",headerType:"Type",headerFilename:"File Name",headerFilesize:"Size",_upCheckCnt:0,rowAmt:0,templateString:f,postCreate:function(){this.setUploader();this.hideProgress()},reset:function(){for(var b=0;b<this.rowAmt;b++)this.listNode.deleteRow(0);this.rowAmt=0},setUploader:function(){if(!this.uploaderId&&!this.uploader)console.warn("uploaderId not passed to UploaderFileList");else if(this.uploaderId&&
!this.uploader)this.uploader=p.byId(this.uploaderId);else if(4<this._upCheckCnt){console.warn("uploader not found for ID ",this.uploaderId);return}this.uploader?(this.connect(this.uploader,"onChange","_onUploaderChange"),this.connect(this.uploader,"reset","reset"),this.connect(this.uploader,"onBegin",function(){this.showProgress(!0)}),this.connect(this.uploader,"onProgress","_progress"),this.connect(this.uploader,"onComplete",function(){setTimeout(l.hitch(this,function(){this.hideProgress(!0)}),1250)}),
(this._fileSizeAvail={html5:1,flash:1}[this.uploader.uploadType])||(this.sizeHeader.style.display="none")):(this._upCheckCnt++,setTimeout(l.hitch(this,"setUploader"),250))},hideProgress:function(b){this._hideShowProgress(b?{ani:!0,endDisp:"none",beg:15,end:0}:{endDisp:"none",ani:!1})},showProgress:function(b){this._hideShowProgress(b?{ani:!0,endDisp:"block",beg:0,end:15}:{endDisp:"block",ani:!1})},_progress:function(b){this.percentTextNode.innerHTML=b.percent;t.set(this.percentBarNode,"width",b.percent)},
_hideShowProgress:function(b){var f=this.progressNode,e=function(){t.set(f,"display",b.endDisp)};b.ani?(t.set(f,"display","block"),q.animateProperty({node:f,properties:{height:{start:b.beg,end:b.end,units:"px"}},onEnd:e}).play()):e()},_onUploaderChange:function(d){this.reset();b.forEach(d,function(b,d){this._addRow(d+1,this.getFileType(b.name),b.name,b.size)},this)},_addRow:function(b,f,e,m){var a,c=this.listNode.insertRow(-1);a=c.insertCell(-1);r.add(a,"dojoxUploaderIndex");a.innerHTML=b;a=c.insertCell(-1);
r.add(a,"dojoxUploaderIcon");a.innerHTML=f;a=c.insertCell(-1);r.add(a,"dojoxUploaderFileName");a.innerHTML=e;this._fileSizeAvail&&(a=c.insertCell(-1),r.add(a,"dojoxUploaderSize"),a.innerHTML=this.convertBytes(m).value);this.rowAmt++}})})},"dojox/validate/web":function(){define(["./_base","./regexp"],function(q,t){q.isIpAddress=function(q,s){return RegExp("^"+t.ipAddress(s)+"$","i").test(q)};q.isUrl=function(q,s){return RegExp("^"+t.url(s)+"$","i").test(q)};q.isEmailAddress=function(q,s){return RegExp("^"+
t.emailAddress(s)+"$","i").test(q)};q.isEmailAddressList=function(q,s){return RegExp("^"+t.emailAddressList(s)+"$","i").test(q)};q.getEmailAddressList=function(r,s){s||(s={});s.listSeparator||(s.listSeparator="\\s;,");return q.isEmailAddressList(r,s)?r.split(RegExp("\\s*["+s.listSeparator+"]\\s*")):[]};return q})},"dojox/validate/_base":function(){define(["dojo/_base/lang","dojo/regexp","dojo/number","./regexp"],function(q,t,r,s){var l=q.getObject("dojox.validate",!0);l.isText=function(b,l){l="object"==
typeof l?l:{};return/^\s*$/.test(b)||"number"==typeof l.length&&l.length!=b.length||"number"==typeof l.minlength&&l.minlength>b.length||"number"==typeof l.maxlength&&l.maxlength<b.length?!1:!0};l._isInRangeCache={};l.isInRange=function(b,p){b=r.parse(b,p);if(isNaN(b))return!1;p="object"==typeof p?p:{};var m="number"==typeof p.max?p.max:Infinity,f="number"==typeof p.min?p.min:-Infinity,d=l._isInRangeCache,k=b+"max"+m+"min"+f+"dec"+("string"==typeof p.decimal?p.decimal:".");if("undefined"!=typeof d[k])return d[k];
d[k]=!(b<f||b>m);return d[k]};l.isNumberFormat=function(b,l){return RegExp("^"+s.numberFormat(l)+"$","i").test(b)};l.isValidLuhn=function(b){var l=0,m,f;q.isString(b)||(b=String(b));b=b.replace(/[- ]/g,"");m=b.length%2;for(var d=0;d<b.length;d++)f=parseInt(b.charAt(d)),d%2==m&&(f*=2),9<f&&(f-=9),l+=f;return!(l%10)};return l})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(q,t){var r={};t.setObject("dojo.regexp",r);r.escapeString=function(q,l){return q.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
function(b){return l&&-1!=l.indexOf(b)?b:"\\"+b})};r.buildGroupRE=function(q,l,b){if(!(q instanceof Array))return l(q);for(var p=[],m=0;m<q.length;m++)p.push(l(q[m]));return r.group(p.join("|"),b)};r.group=function(q,l){return"("+(l?"?:":"")+q+")"};return r})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(q,t,r,s,l){var b={};q.setObject("dojo.number",b);b.format=function(m,f){f=q.mixin({},f||{});var d=t.normalizeLocale(f.locale),
d=t.getLocalization("dojo.cldr","number",d);f.customs=d;d=f.pattern||d[(f.type||"decimal")+"Format"];return isNaN(m)||Infinity==Math.abs(m)?null:b._applyPattern(m,d,f)};b._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;b._applyPattern=function(m,f,d){d=d||{};var k=d.customs.group,e=d.customs.decimal;f=f.split(";");var l=f[0];f=f[0>m?1:0]||"-"+l;if(-1!=f.indexOf("%"))m*=100;else if(-1!=f.indexOf("\u2030"))m*=1E3;else if(-1!=f.indexOf("\u00a4"))k=d.customs.currencyGroup||k,e=d.customs.currencyDecimal||e,f=
f.replace(/\u00a4{1,3}/,function(a){return d[["symbol","currency","displayName"][a.length-1]]||d.currency||""});else if(-1!=f.indexOf("E"))throw Error("exponential notation not supported");var a=b._numberPatternRE,l=l.match(a);if(!l)throw Error("unable to find a number expression in pattern: "+f);!1===d.fractional&&(d.places=0);return f.replace(a,b._formatAbsolute(m,l[0],{decimal:e,group:k,places:d.places,round:d.round}))};b.round=function(b,f,d){d=10/(d||10);return(d*+b).toFixed(f)/d};if(0==(0.9).toFixed()){var p=
b.round;b.round=function(b,f,d){var k=Math.pow(10,-f||0),e=Math.abs(b);if(!b||e>=k)k=0;else if(e/=k,0.5>e||0.95<=e)k=0;return p(b,f,d)+(0<b?k:-k)}}b._formatAbsolute=function(m,f,d){d=d||{};!0===d.places&&(d.places=0);Infinity===d.places&&(d.places=6);f=f.split(".");var k="string"==typeof d.places&&d.places.indexOf(","),e=d.places;k?e=d.places.substring(k+1):0<=e||(e=(f[1]||[]).length);0>d.round||(m=b.round(m,e,d.round));m=String(Math.abs(m)).split(".");var l=m[1]||"";f[1]||d.places?(k&&(d.places=
d.places.substring(0,k)),k=void 0!==d.places?d.places:f[1]&&f[1].lastIndexOf("0")+1,k>l.length&&(m[1]=s.pad(l,k,"0",!0)),e<l.length&&(m[1]=l.substr(0,e))):m[1]&&m.pop();e=f[0].replace(",","");k=e.indexOf("0");-1!=k&&(k=e.length-k,k>m[0].length&&(m[0]=s.pad(m[0],k)),-1==e.indexOf("#")&&(m[0]=m[0].substr(m[0].length-k)));var e=f[0].lastIndexOf(","),a,c;-1!=e&&(a=f[0].length-e-1,f=f[0].substr(0,e),e=f.lastIndexOf(","),-1!=e&&(c=f.length-e-1));f=[];for(e=m[0];e;)k=e.length-a,f.push(0<k?e.substr(k):e),
e=0<k?e.slice(0,k):"",c&&(a=c,delete c);m[0]=f.reverse().join(d.group||",");return m.join(d.decimal||".")};b.regexp=function(m){return b._parseInfo(m).regexp};b._parseInfo=function(m){m=m||{};var f=t.normalizeLocale(m.locale),f=t.getLocalization("dojo.cldr","number",f),d=m.pattern||f[(m.type||"decimal")+"Format"],k=f.group,e=f.decimal,n=1;if(-1!=d.indexOf("%"))n/=100;else if(-1!=d.indexOf("\u2030"))n/=1E3;else{var a=-1!=d.indexOf("\u00a4");a&&(k=f.currencyGroup||k,e=f.currencyDecimal||e)}f=d.split(";");
1==f.length&&f.push("-"+f[0]);f=l.buildGroupRE(f,function(a){a="(?:"+l.escapeString(a,".")+")";return a.replace(b._numberPatternRE,function(a){var c={signed:!1,separator:m.strict?k:[k,""],fractional:m.fractional,decimal:e,exponent:!1};a=a.split(".");var d=m.places;1==a.length&&1!=n&&(a[1]="###");1==a.length||0===d?c.fractional=!1:(void 0===d&&(d=m.pattern?a[1].lastIndexOf("0")+1:Infinity),d&&void 0==m.fractional&&(c.fractional=!0),!m.places&&d<a[1].length&&(d+=","+a[1].length),c.places=d);a=a[0].split(",");
1<a.length&&(c.groupSize=a.pop().length,1<a.length&&(c.groupSize2=a.pop().length));return"("+b._realNumberRegexp(c)+")"})},!0);a&&(f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,b,d,e){a=l.escapeString(m[["symbol","currency","displayName"][d.length-1]]||m.currency||"");b=b?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return m.strict?b+a+e:(b&&(b+="*"),e&&(e+="*"),"(?:"+b+a+e+")?")}));return{regexp:f.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:k,decimal:e,factor:n}};b.parse=function(m,f){var d=b._parseInfo(f),
k=RegExp("^"+d.regexp+"$").exec(m);if(!k)return NaN;var e=k[1];if(!k[1]){if(!k[2])return NaN;e=k[2];d.factor*=-1}e=e.replace(RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,".");return e*d.factor};b._realNumberRegexp=function(m){m=m||{};"places"in m||(m.places=Infinity);"string"!=typeof m.decimal&&(m.decimal=".");"fractional"in m&&!/^0/.test(m.places)||(m.fractional=[!0,!1]);"exponent"in m||(m.exponent=[!0,!1]);"eSigned"in m||(m.eSigned=[!0,!1]);var f=b._integerRegexp(m),d=l.buildGroupRE(m.fractional,
function(b){var d="";b&&0!==m.places&&(d="\\"+m.decimal,d=Infinity==m.places?"(?:"+d+"\\d+)?":d+("\\d{"+m.places+"}"));return d},!0),k=l.buildGroupRE(m.exponent,function(d){return d?"([eE]"+b._integerRegexp({signed:m.eSigned})+")":""}),f=f+d;d&&(f="(?:(?:"+f+")|(?:"+d+"))");return f+k};b._integerRegexp=function(b){b=b||{};"signed"in b||(b.signed=[!0,!1]);"separator"in b?"groupSize"in b||(b.groupSize=3):b.separator="";var f=l.buildGroupRE(b.signed,function(b){return b?"[-+]":""},!0),d=l.buildGroupRE(b.separator,
function(d){if(!d)return"(?:\\d+)";d=l.escapeString(d);" "==d?d="\\s":"\u00a0"==d&&(d="\\s\\xa0");var e=b.groupSize,f=b.groupSize2;return f?(d="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+d+"]\\d{"+f+"})*["+d+"]\\d{"+e+"})",0<e-f?"(?:"+d+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":d):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+d+"]\\d{"+e+"})*)"},!0);return f+d};return b})},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(q,t,r){var s=q.getObject("validate.regexp",!0,r);return s=r.validate.regexp=
{ipAddress:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowDottedDecimal&&(l.allowDottedDecimal=!0);"boolean"!=typeof l.allowDottedHex&&(l.allowDottedHex=!0);"boolean"!=typeof l.allowDottedOctal&&(l.allowDottedOctal=!0);"boolean"!=typeof l.allowDecimal&&(l.allowDecimal=!0);"boolean"!=typeof l.allowHex&&(l.allowHex=!0);"boolean"!=typeof l.allowIPv6&&(l.allowIPv6=!0);"boolean"!=typeof l.allowHybrid&&(l.allowHybrid=!0);var b=[];l.allowDottedDecimal&&b.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");
l.allowDottedHex&&b.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");l.allowDottedOctal&&b.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");l.allowDecimal&&b.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");l.allowHex&&b.push("0[xX]0*[\\da-fA-F]{1,8}");l.allowIPv6&&b.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");l.allowHybrid&&b.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");
l="";0<b.length&&(l="("+b.join("|")+")");return l},host:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowIP&&(l.allowIP=!0);"boolean"!=typeof l.allowLocal&&(l.allowLocal=!1);"boolean"!=typeof l.allowPort&&(l.allowPort=!0);"boolean"!=typeof l.allowNamed&&(l.allowNamed=!1);var b=l.allowPort?"(\\:\\d+)?":"",p="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)";l.allowIP&&(p+="|"+s.ipAddress(l));l.allowLocal&&(p+="|localhost");l.allowNamed&&
(p+="|^[^-][a-zA-Z0-9_-]*");return"("+p+")"+b},url:function(l){l="object"==typeof l?l:{};"scheme"in l||(l.scheme=[!0,!1]);return t.buildGroupRE(l.scheme,function(b){return b?"(https?|ftps?)\\://":""})+s.host(l)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},emailAddress:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowCruft&&(l.allowCruft=!1);l.allowPort=!1;var b="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@"+s.host(l);l.allowCruft&&(b="<?(mailto\\:)?"+
b+">?");return b},emailAddressList:function(l){l="object"==typeof l?l:{};"string"!=typeof l.listSeparator&&(l.listSeparator="\\s;,");var b=s.emailAddress(l);return"("+b+"\\s*["+l.listSeparator+"]\\s*)*"+b+"\\s*["+l.listSeparator+"]?\\s*"},numberFormat:function(l){l="object"==typeof l?l:{};"undefined"==typeof l.format&&(l.format="###-###-####");return t.buildGroupRE(l.format,function(b){return t.escapeString(b,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},
province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(l){l="object"==typeof l?l:{};"boolean"!=typeof l.allowTerritories&&(l.allowTerritories=!0);"boolean"!=typeof l.allowMilitary&&(l.allowMilitary=!0);var b="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";l.allowTerritories&&(b+="|AS|FM|GU|MH|MP|PW|PR|VI");l.allowMilitary&&(b+="|AA|AE|AP");return"("+b+")"}}}})},
"dojox/main":function(){define(["dojo/_base/kernel"],function(q){return q.dojox})},"dojox/validate/check":function(){define(["dojo/_base/kernel","dojo/_base/lang","./_base"],function(q,t,r){q.experimental("dojox.validate.check");r.check=function(q,l){var b=[],p=[],m={isSuccessful:function(){return!this.hasInvalid()&&!this.hasMissing()},hasMissing:function(){return 0<b.length},getMissing:function(){return b},isMissing:function(a){for(var c=0;c<b.length;c++)if(a==b[c])return!0;return!1},hasInvalid:function(){return 0<
p.length},getInvalid:function(){return p},isInvalid:function(a){for(var b=0;b<p.length;b++)if(a==p[b])return!0;return!1}},f=function(a,b){return"undefined"==typeof b[a]};if(l.trim instanceof Array)for(var d=0;d<l.trim.length;d++){var k=q[l.trim[d]];f("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||(k.value=k.value.replace(/(^\s*|\s*$)/g,""))}if(l.uppercase instanceof Array)for(d=0;d<l.uppercase.length;d++)k=q[l.uppercase[d]],f("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=
k.type||(k.value=k.value.toUpperCase());if(l.lowercase instanceof Array)for(d=0;d<l.lowercase.length;d++)k=q[l.lowercase[d]],f("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||(k.value=k.value.toLowerCase());if(l.ucfirst instanceof Array)for(d=0;d<l.ucfirst.length;d++)k=q[l.ucfirst[d]],f("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||(k.value=k.value.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase()}));if(l.digit instanceof
Array)for(d=0;d<l.digit.length;d++)k=q[l.digit[d]],f("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||(k.value=k.value.replace(/\D/g,""));if(l.required instanceof Array)for(d=0;d<l.required.length;d++)if(t.isString(l.required[d]))if(k=q[l.required[d]],!f("type",k)&&("text"==k.type||"textarea"==k.type||"password"==k.type||"file"==k.type)&&/^\s*$/.test(k.value))b[b.length]=k.name;else if(!(f("type",k)||"select-one"!=k.type&&"select-multiple"!=k.type||-1!=k.selectedIndex&&!/^\s*$/.test(k.options[k.selectedIndex].value)))b[b.length]=
k.name;else if(k instanceof Array){for(var e=!1,n=0;n<k.length;n++)k[n].checked&&(e=!0);e||(b[b.length]=k[0].name)}if(l.required instanceof Array)for(d=0;d<l.required.length;d++)if(t.isObject(l.required[d])){var a,c;for(c in l.required[d])k=q[c],a=l.required[d][c];if(k instanceof Array){for(n=e=0;n<k.length;n++)k[n].checked&&e++;e<a&&(b[b.length]=k[0].name)}else if(!f("type",k)&&"select-multiple"==k.type){for(n=e=0;n<k.options.length;n++)k.options[n].selected&&!/^\s*$/.test(k.options[n].value)&&e++;
e<a&&(b[b.length]=k.name)}}if(t.isObject(l.dependencies))for(c in l.dependencies)k=q[c],f("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||/\S+/.test(k.value)||m.isMissing(k.name)||(d=q[l.dependencies[c]],"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type||/^\s*$/.test(d.value)||(b[b.length]=k.name));if(t.isObject(l.constraints))for(c in l.constraints)if((k=q[c])&&(f("tagName",k)||!(0<=k.tagName.toLowerCase().indexOf("input")||0<=k.tagName.toLowerCase().indexOf("textarea"))||
!/^\s*$/.test(k.value))){n=!0;if(t.isFunction(l.constraints[c]))n=l.constraints[c](k.value);else if(t.isArray(l.constraints[c]))if(t.isArray(l.constraints[c][0]))for(d=0;d<l.constraints[c].length&&(n=r.evaluateConstraint(l,l.constraints[c][d],c,k),n);d++);else n=r.evaluateConstraint(l,l.constraints[c],c,k);n||(p[p.length]=k.name)}if(t.isObject(l.confirm))for(c in l.confirm)k=q[c],d=q[l.confirm[c]],f("type",k)||f("type",d)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||d.type!=k.type||d.value==
k.value||m.isInvalid(k.name)||/^\s*$/.test(d.value)||(p[p.length]=k.name);return m};r.evaluateConstraint=function(q,l,b,p){q=l[0];l=l.slice(1);l.unshift(p.value);return"undefined"!=typeof q?q.apply(null,l):!1};return r.check})},"dojox/widget/Calendar":function(){define(["dojo/_base/kernel","dojo/_base/declare","./_CalendarBase","./_CalendarDay","./_CalendarMonthYear"],function(q,t,r,s,l){q.experimental("dojox/widget/Calendar");return t("dojox.widget.Calendar",[r,s,l],{})})},"dojox/widget/_CalendarBase":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/_WidgetsInTemplateMixin dijit/typematic dojo/_base/declare dojo/date dojo/date/stamp dojo/date/locale dojo/dom-style dojo/dom-class dojo/_base/fx dojo/on dojo/_base/array dojo/_base/lang dojo/text!./Calendar/Calendar.html".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){return b("dojox.widget._CalendarBase",[q,t,r,s],{templateString:g,_views:null,useFx:!0,value:new Date,constraints:null,footerFormat:"medium",constructor:function(){this._views=[];this.value=new Date},_setConstraintsAttr:function(a){if(a=this.constraints=a)"string"==typeof a.min&&(a.min=m.fromISOString(a.min)),"string"==typeof a.max&&(a.max=m.fromISOString(a.max))},postMixInProperties:function(){this.inherited(arguments);this.value=this.parseInitialValue(this.value)},
parseInitialValue:function(a){if(!a||-1===a)return new Date;a.getFullYear||isNaN(a)||("string"==typeof this.value&&(a=parseInt(a)),a=this._makeDate(a));return a},_makeDate:function(a){return a},postCreate:function(){this.displayMonth=new Date(this.get("value"));this._isInvalidDate(this.displayMonth)&&(this.displayMonth=new Date);var b={parent:this,_getValueAttr:c.hitch(this,function(){return new Date(this._internalValue||this.value)}),_getDisplayMonthAttr:c.hitch(this,function(){return new Date(this.displayMonth)}),
_getConstraintsAttr:c.hitch(this,function(){return this.constraints}),getLang:c.hitch(this,function(){return this.lang}),isDisabledDate:c.hitch(this,this.isDisabledDate),getClassForDate:c.hitch(this,this.getClassForDate),addFx:this.useFx?c.hitch(this,this.addFx):function(){}};a.forEach(this._views,function(a){a=(new a(b)).placeAt(this);var g=a.getHeader();g&&(this.header.appendChild(g),d.set(g,"display","none"));d.set(a.domNode,"visibility","hidden");a.on("valueSelected",c.hitch(this,"_onDateSelected"));
a.set("value",this.get("value"))},this);2>this._views.length&&d.set(this.header,"cursor","auto");this.inherited(arguments);this._children=this.getChildren();this._currentChild=0;this.footer.innerHTML="Today: "+f.format(new Date,{formatLength:this.footerFormat,selector:"date",locale:this.lang});n(this.footer,"click",c.hitch(this,"goToToday"));var g=this._children[0];d.set(g.domNode,"top","0px");d.set(g.domNode,"visibility","visible");g.getHeader()&&d.set(g.getHeader(),"display","");k.toggle(this.container,
"no-header",!g.useHeader);g.onDisplay();var e=this,g=function(a,b,c){l.addMouseListener(e[a],e,function(a){0<=a&&e._adjustDisplay(b,c)},0.8,500)};g("incrementMonth","month",1);g("decrementMonth","month",-1);this._updateTitleStyle()},addFx:function(a,b){},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a){a||(a=new Date);a.getFullYear||(a=m.fromISOString(a+""));return this._isInvalidDate(a)?!1:!this.value||p.compare(a,this.value)?
(a=new Date(a),this.displayMonth=new Date(a),this._internalValue=a,this.isDisabledDate(a,this.lang)||0!=this._currentChild||(this.value=a,this.onChange(a)),this._children&&0<this._children.length&&this._children[this._currentChild].set("value",this.value),!0):!1},isDisabledDate:function(a,b){var c=this.constraints,d=p.compare;return c&&(c.min&&0<d(c.min,a,"date")||c.max&&0>d(c.max,a,"date"))},onValueSelected:function(a){},_onDateSelected:function(a,b,c){this.displayMonth=a;this.set("value",a);this._transitionVert(-1)||
(b||0===b||(b=this.get("value")),this.onValueSelected(b))},onChange:function(a){},onHeaderClick:function(a){this._transitionVert(1)},goToToday:function(){this.set("value",new Date);this.onValueSelected(this.get("value"))},_transitionVert:function(a){var b=this._children[this._currentChild],c=this._children[this._currentChild+a];if(!c)return!1;d.set(c.domNode,"visibility","visible");var g=d.get(this.containerNode,"height");c.set("value",this.displayMonth);b.header&&d.set(b.header,"display","none");
c.header&&d.set(c.header,"display","");d.set(c.domNode,"top",-1*g+"px");d.set(c.domNode,"visibility","visible");this._currentChild+=a;a*=g;d.set(c.domNode,"top",-1*a+"px");a=e.animateProperty({node:b.domNode,properties:{top:a},onEnd:function(){d.set(b.domNode,"visibility","hidden")}});g=e.animateProperty({node:c.domNode,properties:{top:0},onEnd:function(){c.onDisplay()}});k.toggle(this.container,"no-header",!c.useHeader);a.play();g.play();b.onBeforeUnDisplay();c.onBeforeDisplay();this._updateTitleStyle();
return!0},_updateTitleStyle:function(){k.toggle(this.header,"navToPanel",this._currentChild<this._children.length-1)},_slideTable:function(a,b,c){a=a.domNode;var g=a.cloneNode(!0),f=d.get(a,"width");a.parentNode.appendChild(g);d.set(a,"left",f*b+"px");c();b=e.animateProperty({node:g,properties:{left:f*b*-1},duration:500,onEnd:function(){g.parentNode.removeChild(g)}});c=e.animateProperty({node:a,properties:{left:0},duration:500});b.play();c.play()},_addView:function(a){this._views.push(a)},getClassForDate:function(a,
b){},_adjustDisplay:function(a,b,c){var d=this._children[this._currentChild],g=this.displayMonth=d.adjustDate(this.displayMonth,b);this._slideTable(d,b,function(){d.set("value",g)})}})})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(q,t,r,s,l,b){var p=b.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?
this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(r.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(b,f,d,k,e,l,a,c){if(e!=this._obj){this.stop();this._initialDelay=a||500;this._subsequentDelay=l||0.9;this._minDelay=c||10;this._obj=e;this._node=d;this._count=this._currentTimeout=-1;this._callback=r.hitch(f,k);this._evt={faux:!0};for(var g in b)"layerX"!=g&&"layerY"!=
g&&(f=b[g],"function"!=typeof f&&"undefined"!=typeof f&&(this._evt[g]=f));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(b,f,d,k,e,l,a){var c="keyCode"in f?"keyCode":"charCode"in f?"charCode":"charOrCode",g=[s(b,"keyCode"in f?"keydown":"charCode"in f?"keypress":t._keypress,r.hitch(this,function(g){g[c]!=f[c]||void 0!==f.ctrlKey&&f.ctrlKey!=g.ctrlKey||
void 0!==f.altKey&&f.altKey!=g.altKey||void 0!==f.metaKey&&f.metaKey!=(g.metaKey||!1)||void 0!==f.shiftKey&&f.shiftKey!=g.shiftKey?p._obj==f&&p.stop():(g.stopPropagation(),g.preventDefault(),p.trigger(g,d,b,k,f,e,l,a))})),s(b,"keyup",r.hitch(this,function(){p._obj==f&&p.stop()}))];return{remove:function(){q.forEach(g,function(a){a.remove()})}}},addMouseListener:function(b,f,d,k,e,n){var a=[s(b,"mousedown",r.hitch(this,function(a){a.preventDefault();p.trigger(a,f,b,d,b,k,e,n)})),s(b,"mouseup",r.hitch(this,
function(a){this._obj&&a.preventDefault();p.stop()})),s(b,"mouseout",r.hitch(this,function(a){this._obj&&a.preventDefault();p.stop()})),s(b,"dblclick",r.hitch(this,function(a){a.preventDefault();9>l("ie")&&(p.trigger(a,f,b,d,b,k,e,n),setTimeout(r.hitch(this,p.stop),50))}))];return{remove:function(){q.forEach(a,function(a){a.remove()})}}},addListener:function(b,f,d,k,e,l,a,c){var g=[this.addKeyListener(f,d,k,e,l,a,c),this.addMouseListener(b,k,e,l,a,c)];return{remove:function(){q.forEach(g,function(a){a.remove()})}}}};
return p})},"dojo/date":function(){define(["./has","./_base/lang"],function(q,t){var r={getDaysInMonth:function(q){var l=q.getMonth();return 1==l&&r.isLeapYear(q)?29:[31,28,31,30,31,30,31,31,30,31,30,31][l]},isLeapYear:function(q){q=q.getFullYear();return!(q%400)||!(q%4)&&!!(q%100)},getTimezoneName:function(q){var l=q.toString(),b="",p=l.indexOf("(");if(-1<p)b=l.substring(++p,l.indexOf(")"));else if(p=/([A-Z\/]+) \d{4}$/,l=l.match(p))b=l[1];else if(l=q.toLocaleString(),p=/ ([A-Z\/]+)$/,l=l.match(p))b=
l[1];return"AM"==b||"PM"==b?"":b},compare:function(q,l,b){q=new Date(+q);l=new Date(+(l||new Date));"date"==b?(q.setHours(0,0,0,0),l.setHours(0,0,0,0)):"time"==b&&(q.setFullYear(0,0,0),l.setFullYear(0,0,0));return q>l?1:q<l?-1:0},add:function(q,l,b){var p=new Date(+q),m=!1,f="Date";switch(l){case "day":break;case "weekday":var d;(l=b%5)?d=parseInt(b/5):(l=0<b?5:-5,d=0<b?(b-5)/5:(b+5)/5);var k=q.getDay(),e=0;6==k&&0<b?e=1:0==k&&0>b&&(e=-1);k+=l;if(0==k||6==k)e=0<b?2:-2;b=7*d+l+e;break;case "year":f=
"FullYear";m=!0;break;case "week":b*=7;break;case "quarter":b*=3;case "month":m=!0;f="Month";break;default:f="UTC"+l.charAt(0).toUpperCase()+l.substring(1)+"s"}if(f)p["set"+f](p["get"+f]()+b);m&&p.getDate()<q.getDate()&&p.setDate(0);return p},difference:function(q,l,b){l=l||new Date;b=b||"day";var p=l.getFullYear()-q.getFullYear(),m=1;switch(b){case "quarter":q=q.getMonth();l=l.getMonth();q=Math.floor(q/3)+1;l=Math.floor(l/3)+1;m=l+4*p-q;break;case "weekday":p=Math.round(r.difference(q,l,"day"));
b=parseInt(r.difference(q,l,"week"));m=p%7;if(0==m)p=5*b;else{var f=0,d=q.getDay();l=l.getDay();b=parseInt(p/7);m=p%7;q=new Date(q);q.setDate(q.getDate()+7*b);q=q.getDay();if(0<p)switch(!0){case 6==d:f=-1;break;case 0==d:f=0;break;case 6==l:f=-1;break;case 0==l:f=-2;break;case 5<q+m:f=-2}else if(0>p)switch(!0){case 6==d:f=0;break;case 0==d:f=1;break;case 6==l:f=2;break;case 0==l:f=1;break;case 0>q+m:f=2}p=p+f-2*b}m=p;break;case "year":m=p;break;case "month":m=l.getMonth()-q.getMonth()+12*p;break;
case "week":m=parseInt(r.difference(q,l,"day")/7);break;case "day":m/=24;case "hour":m/=60;case "minute":m/=60;case "second":m/=1E3;case "millisecond":m*=l.getTime()-q.getTime()}return Math.round(m)}};t.mixin(t.getObject("dojo.date",!0),r);return r})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(q,t,r,s,l,b,p,m,f){function d(a,b,d,e){return e.replace(/([a-z])\1*/ig,
function(f){var k,m,l=f.charAt(0);f=f.length;var q=["abbr","wide","narrow"];switch(l){case "G":k=b[4>f?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":k=a.getFullYear();switch(f){case 1:break;case 2:if(!d.fullYear){k=String(k);k=k.substr(k.length-2);break}default:m=!0}break;case "Q":case "q":k=Math.ceil((a.getMonth()+1)/3);m=!0;break;case "M":case "L":k=a.getMonth();3>f?(k+=1,m=!0):(l=["months","L"==l?"standAlone":"format",q[f-3]].join("-"),k=b[l][k]);break;case "w":k=n._getWeekOfYear(a,
0);m=!0;break;case "d":k=a.getDate();m=!0;break;case "D":k=n._getDayOfYear(a);m=!0;break;case "e":case "c":if(k=a.getDay(),2>f){k=(k-s.getFirstDayOfWeek(d.locale)+8)%7;break}case "E":k=a.getDay();3>f?(k+=1,m=!0):(l=["days","c"==l?"standAlone":"format",q[f-3]].join("-"),k=b[l][k]);break;case "a":l=12>a.getHours()?"am":"pm";k=d[l]||b["dayPeriods-format-wide-"+l];break;case "h":case "H":case "K":case "k":m=a.getHours();switch(l){case "h":k=m%12||12;break;case "H":k=m;break;case "K":k=m%12;break;case "k":k=
m||24}m=!0;break;case "m":k=a.getMinutes();m=!0;break;case "s":k=a.getSeconds();m=!0;break;case "S":k=Math.round(a.getMilliseconds()*Math.pow(10,f-3));m=!0;break;case "v":case "z":if(k=n._getZone(a,!0,d))break;f=4;case "Z":l=n._getZone(a,!1,d);l=[0>=l?"+":"-",p.pad(Math.floor(Math.abs(l)/60),2),p.pad(Math.abs(l)%60,2)];4==f&&(l.splice(0,0,"GMT"),l.splice(3,0,":"));k=l.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+e);}m&&(k=p.pad(k,f));return k})}function k(a,
b,d,e){var f=function(a){return a};b=b||f;d=d||f;e=e||f;var k=a.match(/(''|[^'])+/g),m="'"==a.charAt(0);t.forEach(k,function(a,c){a?(k[c]=(m?d:b)(a.replace(/''/g,"'")),m=!m):k[c]=""});return e(k.join(""))}function e(a,d,e,f){f=b.escapeString(f);e.strict||(f=f.replace(" a"," ?a"));return f.replace(/([a-z])\1*/ig,function(b){var f;f=b.charAt(0);var k=b.length,m="",l="";e.strict?(1<k&&(m="0{"+(k-1)+"}"),2<k&&(l="0{"+(k-2)+"}")):(m="0?",l="0{0,2}");switch(f){case "y":f="\\d{2,4}";break;case "M":case "L":f=
2<k?"\\S+?":"1[0-2]|"+m+"[1-9]";break;case "D":f="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+m+"[1-9][0-9]|"+l+"[1-9]";break;case "d":f="3[01]|[12]\\d|"+m+"[1-9]";break;case "w":f="[1-4][0-9]|5[0-3]|"+m+"[1-9]";break;case "E":case "e":case "c":f=".+?";break;case "h":f="1[0-2]|"+m+"[1-9]";break;case "k":f="1[01]|"+m+"\\d";break;case "H":f="1\\d|2[0-3]|"+m+"\\d";break;case "K":f="1\\d|2[0-4]|"+m+"[1-9]";break;case "m":case "s":f="[0-5]\\d";break;case "S":f="\\d{"+k+"}";break;case "a":k=e.am||d["dayPeriods-format-wide-am"];
m=e.pm||d["dayPeriods-format-wide-pm"];f=k+"|"+m;e.strict||(k!=k.toLowerCase()&&(f+="|"+k.toLowerCase()),m!=m.toLowerCase()&&(f+="|"+m.toLowerCase()),-1!=f.indexOf(".")&&(f+="|"+f.replace(/\./g,"")));f=f.replace(/\./g,"\\.");break;default:f=".*"}a&&a.push(b);return"("+f+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var n={};q.setObject(f.id.replace(/\//g,"."),n);n._getZone=function(a,b,d){return b?r.getTimezoneName(a):a.getTimezoneOffset()};n.format=function(a,b){b=b||{};var e=l.normalizeLocale(b.locale),
f=b.formatLength||"short",e=n._getGregorianBundle(e),m=[],p=q.hitch(this,d,a,e,b);if("year"==b.selector)return k(e["dateFormatItem-yyyy"]||"yyyy",p);var r;"date"!=b.selector&&(r=b.timePattern||e["timeFormat-"+f])&&m.push(k(r,p));"time"!=b.selector&&(r=b.datePattern||e["dateFormat-"+f])&&m.push(k(r,p));return 1==m.length?m[0]:e["dateTimeFormat-"+f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return m[b]})};n.regexp=function(a){return n._parseInfo(a).regexp};n._parseInfo=function(a){a=a||{};
var b=l.normalizeLocale(a.locale),b=n._getGregorianBundle(b),d=a.formatLength||"short",f=a.datePattern||b["dateFormat-"+d],m=a.timePattern||b["timeFormat-"+d],d="date"==a.selector?f:"time"==a.selector?m:b["dateTimeFormat-"+d].replace(/\{(\d+)\}/g,function(a,b){return[m,f][b]}),p=[];return{regexp:k(d,q.hitch(this,e,p,b,a)),tokens:p,bundle:b}};n.parse=function(a,b){var d=/[\u200E\u200F\u202A\u202E]/g,e=n._parseInfo(b),f=e.tokens,k=e.bundle,d=RegExp("^"+e.regexp.replace(d,"")+"$",e.strict?"":"i").exec(a&&
a.replace(d,""));if(!d)return null;var m=["abbr","wide","narrow"],l=[1970,0,1,0,0,0,0],p="",d=t.every(d,function(a,c){if(!c)return!0;var d=f[c-1],e=d.length,d=d.charAt(0);switch(d){case "y":if(2!=e&&b.strict)l[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),e=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),l[0]=a<d?e+a:e-100+a;else{if(b.strict)return!1;l[0]=a}break;case "M":case "L":if(2<e){if(e=k["months-"+("L"==d?"standAlone":"format")+"-"+m[e-3]].concat(),b.strict||
(a=a.replace(".","").toLowerCase(),e=t.map(e,function(a){return a.replace(".","").toLowerCase()})),a=t.indexOf(e,a),-1==a)return!1}else a--;l[1]=a;break;case "E":case "e":case "c":e=k["days-"+("c"==d?"standAlone":"format")+"-"+m[e-3]].concat();b.strict||(a=a.toLowerCase(),e=t.map(e,function(a){return a.toLowerCase()}));a=t.indexOf(e,a);if(-1==a)return!1;break;case "D":l[1]=0;case "d":l[2]=a;break;case "a":e=b.am||k["dayPeriods-format-wide-am"];d=b.pm||k["dayPeriods-format-wide-pm"];if(!b.strict){var n=
/\./g;a=a.replace(n,"").toLowerCase();e=e.replace(n,"").toLowerCase();d=d.replace(n,"").toLowerCase()}if(b.strict&&a!=e&&a!=d)return!1;p=a==d?"p":a==e?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;l[3]=a;break;case "m":l[4]=a;break;case "s":l[5]=a;break;case "S":l[6]=a}return!0}),e=+l[3];"p"===p&&12>e?l[3]=e+12:"a"===p&&12==e&&(l[3]=0);e=new Date(l[0],l[1],l[2],l[3],l[4],l[5],l[6]);b.strict&&e.setFullYear(l[0]);var q=f.join(""),s=-1!=q.indexOf("d"),q=-1!=q.indexOf("M");
if(!d||q&&e.getMonth()>l[1]||s&&e.getDate()>l[2])return null;if(q&&e.getMonth()<l[1]||s&&e.getDate()<l[2])e=r.add(e,"hour",1);return e};var a=[];n.addCustomFormats=function(b,d){a.push({pkg:b,name:d})};n._getGregorianBundle=function(b){var d={};t.forEach(a,function(a){a=l.getLocalization(a.pkg,a.name,b);d=q.mixin(d,a)},this);return d};n.addCustomFormats(f.id.replace(/\/date\/locale$/,".cldr"),"gregorian");n.getNames=function(a,b,d,e){var f;e=n._getGregorianBundle(e);a=[a,d,b];"standAlone"==d&&(d=
a.join("-"),f=e[d],1==f[0]&&(f=void 0));a[1]="format";return(f||e[a.join("-")]).concat()};n.isWeekend=function(a,b){var d=s.getWeekend(b),e=(a||new Date).getDay();d.end<d.start&&(d.end+=7,e<d.start&&(e+=7));return e>=d.start&&e<=d.end};n._getDayOfYear=function(a){return r.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};n._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var d=(new Date(a.getFullYear(),0,1)).getDay(),e=(d-b+7)%7,e=Math.floor((n._getDayOfYear(a)+e-1)/7);d==b&&e++;
return e};return n})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(q,t){var r={};q.setObject("dojo.cldr.supplemental",r);r.getFirstDayOfWeek=function(q){q={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,
pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[r._region(q)];return void 0===q?1:q};r._region=function(q){q=t.normalizeLocale(q);q=q.split("-");var l=q[1];l?4==l.length&&(l=q[2]):l={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",
eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",
ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",
uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",
crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",
khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",
nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",
teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[q[0]];return l};r.getWeekend=function(q){var l=r._region(q);q={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[l];l={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,
iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[l];void 0===q&&(q=6);void 0===l&&(l=0);return{start:q,end:l}};return r})},"dojox/widget/_CalendarDay":function(){define(["dojo/_base/declare","./_CalendarDayView"],function(q,t){return q("dojox.widget._CalendarDay",null,{parent:null,constructor:function(){this._addView(t)}})})},"dojox/widget/_CalendarDayView":function(){define("dojo/_base/declare ./_CalendarView dijit/_TemplatedMixin dojo/query dojo/dom-class dojo/_base/event dojo/date dojo/date/locale dojo/text!./Calendar/CalendarDay.html dojo/cldr/supplemental dojo/NodeList-dom".split(" "),
function(q,t,r,s,l,b,p,m,f,d){return q("dojox.widget._CalendarDayView",[t,r],{templateString:f,datePart:"month",dayWidth:"narrow",postCreate:function(){this.cloneClass(".dijitCalendarDayLabelTemplate",6);this.cloneClass(".dijitCalendarDateTemplate",6);this.cloneClass(".dijitCalendarWeekTemplate",5);var b=m.getNames("days",this.dayWidth,"standAlone",this.getLang()),e=d.getFirstDayOfWeek(this.getLang());s(".dijitCalendarDayLabel",this.domNode).forEach(function(d,a){this._setText(d,b[(a+e)%7])},this)},
onDisplay:function(){this._addedFx||(this._addedFx=!0,this.addFx(".dijitCalendarDateTemplate div",this.domNode))},_onDayClick:function(d){if("undefined"!=typeof d.target._date){var e=new Date(this.get("displayMonth")),f=d.target.parentNode;(f=l.contains(f,"dijitCalendarPreviousMonth")?-1:l.contains(f,"dijitCalendarNextMonth")?1:0)&&(e=p.add(e,"month",f));e.setDate(d.target._date);this.isDisabledDate(e)?b.stop(d):this.parent._onDateSelected(e)}},_setValueAttr:function(b){this._populateDays()},_populateDays:function(){var b=
new Date(this.get("displayMonth"));b.setDate(1);var e=b.getDay(),f=p.getDaysInMonth(b),a=p.getDaysInMonth(p.add(b,"month",-1)),c=new Date,g=this.get("value"),l=d.getFirstDayOfWeek(this.getLang());l>e&&(l-=7);var q=p.compare,r=this._lastDate,r=null==r||r.getMonth()!=b.getMonth()||r.getFullYear()!=b.getFullYear();this._lastDate=b;r?(s(".dijitCalendarDateTemplate",this.domNode).forEach(function(d,m){m+=l;var r=new Date(b),t,z="dijitCalendar",G=0;m<e?(t=a-e+m+1,G=-1,z+="Previous"):m>=e+f?(t=m-e-f+1,G=
1,z+="Next"):(t=m-e+1,z+="Current");G&&(r=p.add(r,"month",G));r.setDate(t);q(r,c,"date")||(z="dijitCalendarCurrentDate "+z);q(r,g,"date")||q(r,g,"month")||q(r,g,"year")||(z="dijitCalendarSelectedDate "+z);this.isDisabledDate(r,this.getLang())&&(z=" dijitCalendarDisabledDate "+z);(t=this.getClassForDate(r,this.getLang()))&&(z=t+" "+z);d.className=z+"Month dijitCalendarDateTemplate";d.dijitDateValue=r.valueOf();z=s(".dijitCalendarDateLabel",d)[0];this._setText(z,r.getDate());z._date=z.parentNode._date=
r.getDate()},this),r=m.getNames("months","wide","standAlone",this.getLang()),this._setText(this.monthLabelNode,r[b.getMonth()]),this._setText(this.yearLabelNode,b.getFullYear())):s(".dijitCalendarDateTemplate",this.domNode).removeClass("dijitCalendarSelectedDate").filter(function(a){return-1<a.className.indexOf("dijitCalendarCurrent")&&a._date==g.getDate()}).addClass("dijitCalendarSelectedDate")}})})},"dojox/widget/_CalendarView":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-construct dojo/query dojo/date dojo/_base/window".split(" "),
function(q,t,r,s,l,b){return q("dojox.widget._CalendarView",t,{headerClass:"",useHeader:!0,cloneClass:function(b,m,f){var d=s(b,this.domNode)[0];if(f)for(f=s(b,this.domNode)[0],b=0;b<m;b++)d.parentNode.insertBefore(d.cloneNode(!0),f);else for(b=0;b<m;b++)d.parentNode.appendChild(d.cloneNode(!0))},_setText:function(l,m){l.innerHTML!=m&&(r.empty(l),l.appendChild(b.doc.createTextNode(m)))},getHeader:function(){return this.header||(this.header=r.create("span",{"class":this.headerClass}))},onValueSelected:function(b){},
adjustDate:function(b,m){return l.add(b,this.datePart,m)},onDisplay:function(){},onBeforeDisplay:function(){},onBeforeUnDisplay:function(){}})})},"dojox/widget/_CalendarMonthYear":function(){define(["dojo/_base/declare","./_CalendarMonthYearView"],function(q,t){return q("dojox.widget._CalendarMonthYear",null,{constructor:function(){this._addView(t)}})})},"dojox/widget/_CalendarMonthYearView":function(){define("dojo/_base/declare ./_CalendarView dijit/_TemplatedMixin dojo/query dojo/dom-class dojo/_base/connect dojo/_base/event dojo/_base/lang dojo/date/locale dojo/text!./Calendar/CalendarMonthYear.html".split(" "),
function(q,t,r,s,l,b,p,m,f,d){return q("dojox.widget._CalendarMonthYearView",[t,r],{templateString:d,datePart:"year",displayedYears:10,useHeader:!1,postCreate:function(){this.cloneClass(".dojoxCal-MY-G-Template",5,".dojoxCal-MY-btns");this.monthContainer=this.yearContainer=this.myContainer;s(".dojoxCalendarYearLabel",this.myContainer).forEach(function(b,d){var f="dojoxCalendarIncrease";switch(d){case 0:f="dojoxCalendarDecrease";case 1:l.remove(b,"dojoxCalendarYearLabel"),l.add(b,f)}});this._decBtn=
s(".dojoxCalendarDecrease",this.myContainer)[0];this._incBtn=s(".dojoxCalendarIncrease",this.myContainer)[0];s(".dojoxCal-MY-M-Template",this.domNode).filter(function(b){return 1==b.cellIndex}).addClass("dojoxCal-MY-M-last");b.connect(this,"onBeforeDisplay",m.hitch(this,function(){this._cachedDate=new Date(this.get("value").getTime());this._populateYears(this._cachedDate.getFullYear());this._populateMonths();this._updateSelectedMonth();this._updateSelectedYear()}));b.connect(this,"_populateYears",
m.hitch(this,function(){this._updateSelectedYear()}));b.connect(this,"_populateMonths",m.hitch(this,function(){this._updateSelectedMonth()}));this._cachedDate=this.get("value");this._populateYears();this._populateMonths();this.addFx(".dojoxCalendarMonthLabel,.dojoxCalendarYearLabel ",this.myContainer)},_setValueAttr:function(b){b&&b.getFullYear()&&this._populateYears(b.getFullYear())},getHeader:function(){return null},_getMonthNames:function(b){return this._monthNames=this._monthNames||f.getNames("months",
b,"standAlone",this.getLang())},_populateMonths:function(){var b,d=this._getMonthNames("abbr"),f=this.get("value").getFullYear(),a=d[this.get("value").getMonth()],c=this.get("displayedYear");s(".dojoxCalendarMonthLabel",this.monthContainer).forEach(m.hitch(this,function(g,m){this._setText(g,d[m]);b=a===d[m]&&f===c;l.toggle(g.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],b)}));var g=this.get("constraints");if(g){(new Date).setFullYear(this._year);var p=-1,q=12;if(g.min){var r=
g.min.getFullYear();r>this._year?p=12:r==this._year&&(p=g.min.getMonth())}g.max&&(r=g.max.getFullYear(),r<this._year?q=-1:r==this._year&&(q=g.max.getMonth()));s(".dojoxCalendarMonthLabel",this.monthContainer).forEach(m.hitch(this,function(a,b){l[b<p||b>q?"add":"remove"](a,"dijitCalendarDisabledDate")}))}},_populateYears:function(b){var d,f=this.get("constraints"),a=this.get("value").getFullYear(),c=b||a,g=c-Math.floor(this.displayedYears/2);b=f&&f.min?f.min.getFullYear():g-1E4;this._displayedYear=
c;var c=s(".dojoxCalendarYearLabel",this.yearContainer),p=f&&f.max?f.max.getFullYear()-g:c.length,q;c.forEach(m.hitch(this,function(b,c){c<=p&&this._setText(b,g+c);q=g+c==a;l.toggle(b.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],q);l.toggle(b,"dijitCalendarDisabledDate",c>p);d=g+c==a;l.toggle(b.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],d)}));this._incBtn&&l.toggle(this._incBtn,"dijitCalendarDisabledDate",p<c.length);this._decBtn&&l.toggle(this._decBtn,
"dijitCalendarDisabledDate",b>=g);this.getHeader()&&this._setText(this.getHeader(),g+" - "+(g+11))},_updateSelectedYear:function(){this._year=String((this._cachedDate||this.get("value")).getFullYear());this._updateSelectedNode(".dojoxCalendarYearLabel",m.hitch(this,function(b){return null!==this._year&&b.innerHTML==this._year}))},_updateSelectedMonth:function(){var b=(this._cachedDate||this.get("value")).getMonth();this._month=b;this._updateSelectedNode(".dojoxCalendarMonthLabel",function(d,f){return f==
b})},_updateSelectedNode:function(b,d){s(b,this.domNode).forEach(function(a,b,g){l.toggle(a.parentNode,"dijitCalendarSelectedDate",d(a,b,g))});var f=s(".dojoxCal-MY-M-Template div",this.myContainer).filter(function(a){return l.contains(a.parentNode,"dijitCalendarSelectedDate")})[0];f&&(f=l.contains(f,"dijitCalendarDisabledDate"),l.toggle(this.okBtn,"dijitDisabled",f))},onClick:function(b){function d(e){return l.contains(b.target,e)}if(d("dijitCalendarDisabledDate"))return p.stop(b),!1;if(d("dojoxCalendarMonthLabel"))this._month=
b.target.parentNode.cellIndex+2*b.target.parentNode.parentNode.rowIndex,this._cachedDate.setMonth(this._month),this._updateSelectedMonth();else if(d("dojoxCalendarYearLabel"))this._year=Number(b.target.innerHTML),this._cachedDate.setYear(this._year),this._populateMonths(),this._updateSelectedYear();else return d("dojoxCalendarDecrease")?this._populateYears(this._displayedYear-10):d("dojoxCalendarIncrease")&&this._populateYears(this._displayedYear+10),!0;p.stop(b);return!1},onOk:function(b){p.stop(b);
if(l.contains(this.okBtn,"dijitDisabled"))return!1;this.onValueSelected(this._cachedDate);return!1},onCancel:function(b){p.stop(b);this.onValueSelected(this.get("value"));return!1}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(q,t,r){t.switchTo(r);return t})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(q,t,r,s,l,b,p,m,f){var d=t.getObject("dojox.gfx",!0),k=d._base={};d._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};d._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};d._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};k._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;s("ie")&&(l.doc.documentElement.style.fontSize="100%");var c=m.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},l.body());for(b in a)c.style.fontSize=b,a[b]=16*Math.round(12*c.offsetHeight/16)/12/1E3;l.body().removeChild(c);return a};var e=null;k._getCachedFontMeasurements=
function(a){if(a||!e)e=k._getFontMeasurements();return e};var n=null,a={};k._getTextBox=function(b,c,d){var e,k,p=arguments.length,q;n||(n=m.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},l.body()));e=n;e.className="";k=e.style;k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";if(1<p&&c)for(q in c)q in a||(k[q]=c[q]);2<p&&d&&(e.className=d);e.innerHTML=b;return e.getBoundingClientRect?(e=e.getBoundingClientRect(),{l:e.left,t:e.top,w:e.width||e.right-e.left,h:e.height||
e.bottom-e.top}):f.getMarginBox(e)};k._computeTextLocation=function(a,b,c,d){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?0.75:1);return e};k._computeTextBoundingBox=function(a){if(!d._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var c=a.getFont()||d.defaultFont;a=a.getTextWidth();c=d.normalizedLength(c.size);b=k._computeTextLocation(b,a,c,!0);return{x:b.x,y:b.y,width:a,height:c}};k._isRendered=function(a){for(a=
a.parent;a&&a.getParent;)a=a.parent;return null!==a};var c=0;k._getUniqueId=function(){var a;do a=q._scopeName+"xUnique"+ ++c;while(p.byId(a));return a};k._fixMsTouchAction=function(a){a=a.rawNode;"undefined"!=typeof a.style.msTouchAction&&(a.style.msTouchAction="none")};t.mixin(d,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",
cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,
color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=d["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof r?a:new r(a)},normalizeParameters:function(a,
b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return t.delegate(a);var d={};for(c in a)c in d||(d[c]=t.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=
d.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var e=4;0>c&&("/"==a[4]?e=6:"/"==a[4].charAt(0)&&(e=5));e<a.length&&(b.family=a.slice(e).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return d._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*d.px_in_pt()},px2pt:function(a){return a/d.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;
if(2<a.length){var b=d.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*d.mm_in_pt*b;case "cm":return c*d.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var c="string"==typeof a?d[a]:a;c&&(b.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),
function(a){d[a]=c[a]}),"string"==typeof a?d.renderer=a:b.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return d.renderer=d[a]&&d[a].Surface===d.Surface?a:null}))}});return d})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(q,t,r,s,l){var b=null;r.add("vml",function(b,m,f){f.innerHTML='<v:shape adj="1"/>';b="adj"in f.firstChild;f.innerHTML="";return b});return{load:function(p,m,f){function d(){m(["dojox/gfx/"+
k],function(a){q.renderer=k;b=a;f(a)})}if(b&&"force"!=p)f(b);else{var k=l.forceGfxRenderer;p=!k&&(t.isString(l.gfxRenderer)?l.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var e,n;!k&&p.length;)switch(p.shift()){case "svg":"SVGAngle"in s.global&&(k="svg");break;case "vml":r("vml")&&(k="vml");break;case "silverlight":try{r("ie")?(e=new ActiveXObject("AgControl.AgControl"))&&e.IsVersionSupported("1.0")&&(n=!0):navigator.plugins["Silverlight Plug-In"]&&(n=!0)}catch(a){n=!1}finally{e=null}n&&
(k="silverlight");break;case "canvas":s.global.CanvasRenderingContext2D&&(k="canvas")}"canvas"===k&&!1!==l.canvasEvents&&(k="canvasWithEvents");"svg"==k&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(d):d()}}}})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(q,t,r,s,l){l=r("dojox.gfx.path.Path",l.Shape,{constructor:function(b){this.shape=t.clone(q.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last=
{};this.rawNode=b;this.segmented=!1},setAbsoluteMode:function(b){this._confirmSegmented();this.absolute="string"==typeof b?"absolute"==b:b;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var b=this.bbox,
l=this._getRealMatrix();this.bbox=null;for(var m=0,f=this.segments.length;m<f;++m)this._updateWithSegment(this.segments[m],l);l=this.bbox;this.bbox=b;return this.tbbox=l?[{x:l.l,y:l.t},{x:l.r,y:l.t},{x:l.r,y:l.b},{x:l.l,y:l.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(b,l,m){m&&(l=s.multiplyPoint(m,b,l),b=l.x,l=l.y);this.bbox&&"l"in this.bbox?(this.bbox.l>
b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>l&&(this.bbox.t=l),this.bbox.b<l&&(this.bbox.b=l)):this.bbox={l:b,b:l,r:b,t:l}},_updateWithSegment:function(b,l){var m=b.args,f=m.length,d;switch(b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(d=0;d<f;d+=2)this._updateBBox(m[d],m[d+1],l);this.last.x=m[f-2];this.last.y=m[f-1];this.absolute=!0;break;case "H":for(d=0;d<f;++d)this._updateBBox(m[d],this.last.y,l);this.last.x=m[f-1];this.absolute=!0;break;case "V":for(d=
0;d<f;++d)this._updateBBox(this.last.x,m[d],l);this.last.y=m[f-1];this.absolute=!0;break;case "m":d=0;"x"in this.last||(this._updateBBox(this.last.x=m[0],this.last.y=m[1],l),d=2);for(;d<f;d+=2)this._updateBBox(this.last.x+=m[d],this.last.y+=m[d+1],l);this.absolute=!1;break;case "l":case "t":for(d=0;d<f;d+=2)this._updateBBox(this.last.x+=m[d],this.last.y+=m[d+1],l);this.absolute=!1;break;case "h":for(d=0;d<f;++d)this._updateBBox(this.last.x+=m[d],this.last.y,l);this.absolute=!1;break;case "v":for(d=
0;d<f;++d)this._updateBBox(this.last.x,this.last.y+=m[d],l);this.absolute=!1;break;case "c":for(d=0;d<f;d+=6)this._updateBBox(this.last.x+m[d],this.last.y+m[d+1],l),this._updateBBox(this.last.x+m[d+2],this.last.y+m[d+3],l),this._updateBBox(this.last.x+=m[d+4],this.last.y+=m[d+5],l);this.absolute=!1;break;case "s":case "q":for(d=0;d<f;d+=4)this._updateBBox(this.last.x+m[d],this.last.y+m[d+1],l),this._updateBBox(this.last.x+=m[d+2],this.last.y+=m[d+3],l);this.absolute=!1;break;case "A":for(d=0;d<f;d+=
7)this._updateBBox(m[d+5],m[d+6],l);this.last.x=m[f-2];this.last.y=m[f-1];this.absolute=!0;break;case "a":for(d=0;d<f;d+=7)this._updateBBox(this.last.x+=m[d+5],this.last.y+=m[d+6],l);this.absolute=!1}var k=[b.action];for(d=0;d<f;++d)k.push(q.formatNumber(m[d],!0));"string"==typeof this.shape.path?this.shape.path+=k.join(""):Array.prototype.push.apply(this.shape.path,k)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(b,l){this.tbbox=null;var m=this._validSegments[b.toLowerCase()];
"number"==typeof m&&(m?l.length>=m&&(m={action:b,args:l.slice(0,l.length-l.length%m)},this.segments.push(m),this._updateWithSegment(m)):(m={action:b,args:[]},this.segments.push(m),this._updateWithSegment(m)))},_collectArgs:function(b,l){for(var m=0;m<l.length;++m){var f=l[m];"boolean"==typeof f?b.push(f?1:0):"number"==typeof f?b.push(f):f instanceof Array?this._collectArgs(b,f):"x"in f&&"y"in f&&b.push(f.x,f.y)}},moveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?
"M":"m",b);return this},lineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"L":"l",b);return this},hLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"H":"h",b);return this},vLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"V":"v",b);return this},curveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,
arguments);this._pushSegment(this.absolute?"C":"c",b);return this},smoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"S":"s",b);return this},qCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"Q":"q",b);return this},qSmoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"T":"t",b);return this},
arcTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"A":"a",b);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var b=this.shape.path;this.shape.path=[];this._setPath(b);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(b){b=t.isArray(b)?b:b.match(q.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};
this.last={};if(b){for(var l="",m=[],f=b.length,d=0;d<f;++d){var k=b[d],e=parseFloat(k);isNaN(e)?(l&&this._pushSegment(l,m),m=[],l=k):m.push(e)}this._pushSegment(l,m)}},setShape:function(b){this.inherited(arguments,["string"==typeof b?{path:b}:b]);this.segmented=!1;this.segments=[];q.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});r=r("dojox.gfx.path.TextPath",l,{constructor:function(b){"text"in this||(this.text=t.clone(q.defaultTextPath));"fontStyle"in this||(this.fontStyle=
t.clone(q.defaultFont))},getText:function(){return this.text},setText:function(b){this.text=q.makeParameters(this.text,"string"==typeof b?{text:b}:b);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?q.splitFontString(b):q.makeParameters(q.defaultFont,b);this._setFont();return this}});return q.path={Path:l,TextPath:r}})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(q,t){var r=q.matrix={},s={};
r._degToRad=function(l){return s[l]||(s[l]=Math.PI*l/180)};r._radToDeg=function(l){return l/Math.PI*180};r.Matrix2D=function(l){if(l)if("number"==typeof l)this.xx=this.yy=l;else if(l instanceof Array){if(0<l.length){for(var b=r.normalize(l[0]),p=1;p<l.length;++p){var m=b,f=r.normalize(l[p]),b=new r.Matrix2D;b.xx=m.xx*f.xx+m.xy*f.yx;b.xy=m.xx*f.xy+m.xy*f.yy;b.yx=m.yx*f.xx+m.yy*f.yx;b.yy=m.yx*f.xy+m.yy*f.yy;b.dx=m.xx*f.dx+m.xy*f.dy+m.dx;b.dy=m.yx*f.dx+m.yy*f.dy+m.dy}t.mixin(this,b)}}else t.mixin(this,
l)};t.extend(r.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});t.mixin(r,{identity:new r.Matrix2D,flipX:new r.Matrix2D({xx:-1}),flipY:new r.Matrix2D({yy:-1}),flipXY:new r.Matrix2D({xx:-1,yy:-1}),translate:function(l,b){return 1<arguments.length?new r.Matrix2D({dx:l,dy:b}):new r.Matrix2D({dx:l.x,dy:l.y})},scale:function(l,b){return 1<arguments.length?new r.Matrix2D({xx:l,yy:b}):"number"==typeof l?new r.Matrix2D({xx:l,yy:l}):new r.Matrix2D({xx:l.x,yy:l.y})},rotate:function(l){var b=Math.cos(l);l=Math.sin(l);
return new r.Matrix2D({xx:b,xy:-l,yx:l,yy:b})},rotateg:function(l){return r.rotate(r._degToRad(l))},skewX:function(l){return new r.Matrix2D({xy:Math.tan(l)})},skewXg:function(l){return r.skewX(r._degToRad(l))},skewY:function(l){return new r.Matrix2D({yx:Math.tan(l)})},skewYg:function(l){return r.skewY(r._degToRad(l))},reflect:function(l,b){1==arguments.length&&(b=l.y,l=l.x);var p=l*l,m=b*b,f=p+m,d=2*l*b/f;return new r.Matrix2D({xx:2*p/f-1,xy:d,yx:d,yy:2*m/f-1})},project:function(l,b){1==arguments.length&&
(b=l.y,l=l.x);var p=l*l,m=b*b,f=p+m,d=l*b/f;return new r.Matrix2D({xx:p/f,xy:d,yx:d,yy:m/f})},normalize:function(l){return l instanceof r.Matrix2D?l:new r.Matrix2D(l)},isIdentity:function(l){return 1==l.xx&&0==l.xy&&0==l.yx&&1==l.yy&&0==l.dx&&0==l.dy},clone:function(l){var b=new r.Matrix2D,p;for(p in l)"number"==typeof l[p]&&"number"==typeof b[p]&&b[p]!=l[p]&&(b[p]=l[p]);return b},invert:function(l){l=r.normalize(l);var b=l.xx*l.yy-l.xy*l.yx;return l=new r.Matrix2D({xx:l.yy/b,xy:-l.xy/b,yx:-l.yx/
b,yy:l.xx/b,dx:(l.xy*l.dy-l.yy*l.dx)/b,dy:(l.yx*l.dx-l.xx*l.dy)/b})},_multiplyPoint:function(l,b,p){return{x:l.xx*b+l.xy*p+l.dx,y:l.yx*b+l.yy*p+l.dy}},multiplyPoint:function(l,b,p){l=r.normalize(l);return"number"==typeof b&&"number"==typeof p?r._multiplyPoint(l,b,p):r._multiplyPoint(l,b.x,b.y)},multiplyRectangle:function(l,b){var p=r.normalize(l);b=b||{x:0,y:0,width:0,height:0};if(r.isIdentity(p))return{x:b.x,y:b.y,width:b.width,height:b.height};var m=r.multiplyPoint(p,b.x,b.y),f=r.multiplyPoint(p,
b.x,b.y+b.height),d=r.multiplyPoint(p,b.x+b.width,b.y),k=r.multiplyPoint(p,b.x+b.width,b.y+b.height),p=Math.min(m.x,f.x,d.x,k.x),e=Math.min(m.y,f.y,d.y,k.y),n=Math.max(m.x,f.x,d.x,k.x),m=Math.max(m.y,f.y,d.y,k.y);return{x:p,y:e,width:n-p,height:m-e}},multiply:function(l){for(var b=r.normalize(l),p=1;p<arguments.length;++p){var m=b,f=r.normalize(arguments[p]),b=new r.Matrix2D;b.xx=m.xx*f.xx+m.xy*f.yx;b.xy=m.xx*f.xy+m.xy*f.yy;b.yx=m.yx*f.xx+m.yy*f.yx;b.yy=m.yx*f.xy+m.yy*f.yy;b.dx=m.xx*f.dx+m.xy*f.dy+
m.dx;b.dy=m.yx*f.dx+m.yy*f.dy+m.dy}return b},_sandwich:function(l,b,p){return r.multiply(r.translate(b,p),l,r.translate(-b,-p))},scaleAt:function(l,b,p,m){switch(arguments.length){case 4:return r._sandwich(r.scale(l,b),p,m);case 3:return"number"==typeof p?r._sandwich(r.scale(l),b,p):r._sandwich(r.scale(l,b),p.x,p.y)}return r._sandwich(r.scale(l),b.x,b.y)},rotateAt:function(l,b,p){return 2<arguments.length?r._sandwich(r.rotate(l),b,p):r._sandwich(r.rotate(l),b.x,b.y)},rotategAt:function(l,b,p){return 2<
arguments.length?r._sandwich(r.rotateg(l),b,p):r._sandwich(r.rotateg(l),b.x,b.y)},skewXAt:function(l,b,p){return 2<arguments.length?r._sandwich(r.skewX(l),b,p):r._sandwich(r.skewX(l),b.x,b.y)},skewXgAt:function(l,b,p){return 2<arguments.length?r._sandwich(r.skewXg(l),b,p):r._sandwich(r.skewXg(l),b.x,b.y)},skewYAt:function(l,b,p){return 2<arguments.length?r._sandwich(r.skewY(l),b,p):r._sandwich(r.skewY(l),b.x,b.y)},skewYgAt:function(l,b,p){return 2<arguments.length?r._sandwich(r.skewYg(l),b,p):r._sandwich(r.skewYg(l),
b.x,b.y)}});q.Matrix2D=r.Matrix2D;return r})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(q,t,r,s,l,b,p,m,f,d){var k=q.shape={};k.Shape=r("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(l("gfxRegistry")){var b=k.register(this);
this.getUID=function(){return b}}},destroy:function(){l("gfxRegistry")&&k.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var b=
this.getBoundingBox();if(!b)return null;var f=this._getRealMatrix();return[d.multiplyPoint(f,b.x,b.y),d.multiplyPoint(f,b.x+b.width,b.y),d.multiplyPoint(f,b.x+b.width,b.y+b.height),d.multiplyPoint(f,b.x,b.y+b.height)]},getEventSource:function(){return this.rawNode},setClip:function(b){this.clip=b},getClip:function(){return this.clip},setShape:function(b){this.shape=q.makeParameters(this.shape,b);this.bbox=null;return this},setFill:function(b){if(!b)return this.fillStyle=null,this;var d=null;if("object"==
typeof b&&"type"in b)switch(b.type){case "linear":d=q.makeParameters(q.defaultLinearGradient,b);break;case "radial":d=q.makeParameters(q.defaultRadialGradient,b);break;case "pattern":d=q.makeParameters(q.defaultPattern,b)}else d=q.normalizeColor(b);this.fillStyle=d;return this},setStroke:function(b){if(!b)return this.strokeStyle=null,this;if("string"==typeof b||t.isArray(b)||b instanceof f)b={color:b};b=this.strokeStyle=q.makeParameters(q.defaultStroke,b);b.color=q.normalizeColor(b.color);return this},
setTransform:function(b){this.matrix=d.clone(b?d.normalize(b):d.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var b=this.getParent();b&&(b._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var b=this.getParent();b&&(b._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(b){return b?this.setTransform([this.matrix,b]):this},applyLeftTransform:function(b){return b?
this.setTransform([b,this.matrix]):this},applyTransform:function(b){return b?this.setTransform([this.matrix,b]):this},removeShape:function(b){this.parent&&this.parent.remove(this,b);return this},_setParent:function(b,d){this.parent=b;return this._updateParentMatrix(d)},_updateParentMatrix:function(b){this.parentMatrix=b?d.clone(b):null;return this._applyTransform()},_getRealMatrix:function(){for(var b=this.matrix,f=this.parent;f;)f.matrix&&(b=d.multiply(f.matrix,b)),f=f.parent;return b}});k._eventsProcessing=
{on:function(d,f){return b(this.getEventSource(),d,k.fixCallback(this,q.fixTarget,f))},connect:function(b,d,a){"on"==b.substring(0,2)&&(b=b.substring(2));return this.on(b,a?t.hitch(d,a):d)},disconnect:function(b){return b.remove()}};k.fixCallback=function(b,d,a,c){c||(c=a,a=null);if(t.isString(c)){a=a||s.global;if(!a[c])throw['dojox.gfx.shape.fixCallback: scope["',c,'"] is null (scope="',a,'")'].join("");return function(g){return d(g,b)?a[c].apply(a,arguments||[]):void 0}}return a?function(g){return d(g,
b)?c.apply(a,arguments||[]):void 0}:function(g){return d(g,b)?c.apply(a,arguments):void 0}};t.extend(k.Shape,k._eventsProcessing);k.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(b){var d=b.getParent();d&&d.remove(b,!0);this.children.push(b);return b._setParent(this,this._getRealMatrix())},remove:function(b,d){for(var a=0;a<this.children.length;++a)if(this.children[a]==b){d||(b.parent=null,b.parentMatrix=
null);this.children.splice(a,1);break}return this},clear:function(b){for(var d,a=0;a<this.children.length;++a)d=this.children[a],d.parent=null,d.parentMatrix=null,b&&d.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var b=null;p.forEach(this.children,function(f){var a=f.getBoundingBox();a&&((f=f.getTransform())&&(a=d.multiplyRectangle(f,a)),b?(b.x=Math.min(b.x,a.x),b.y=Math.min(b.y,a.y),b.endX=Math.max(b.endX,a.x+a.width),b.endY=Math.max(b.endY,a.y+a.height)):b=
{x:a.x,y:a.y,endX:a.x+a.width,endY:a.y+a.height})});b&&(b.width=b.endX-b.x,b.height=b.endY-b.y);return b}return null},_moveChildToFront:function(b){for(var d=0;d<this.children.length;++d)if(this.children[d]==b){this.children.splice(d,1);this.children.push(b);break}return this},_moveChildToBack:function(b){for(var d=0;d<this.children.length;++d)if(this.children[d]==b){this.children.splice(d,1);this.children.unshift(b);break}return this}};k.Surface=r("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=
this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){p.forEach(this._nodes,m.destroy);this._nodes=[];p.forEach(this._events,function(b){b&&b.remove()});this._events=[];this.rawNode=null;if(l("ie"))for(;this._parent.lastChild;)m.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(b){},whenLoaded:function(d,f){var a=t.hitch(d,f);if(this.isLoaded)a(this);
else b.once(this,"load",function(b){a(b)})}});t.extend(k.Surface,k._eventsProcessing);k.Rect=r("dojox.gfx.shape.Rect",k.Shape,{constructor:function(b){this.shape=q.getDefault("Rect");this.rawNode=b},getBoundingBox:function(){return this.shape}});k.Ellipse=r("dojox.gfx.shape.Ellipse",k.Shape,{constructor:function(b){this.shape=q.getDefault("Ellipse");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.rx,y:b.cy-b.ry,width:2*b.rx,height:2*b.ry}}return this.bbox}});
k.Circle=r("dojox.gfx.shape.Circle",k.Shape,{constructor:function(b){this.shape=q.getDefault("Circle");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.r,y:b.cy-b.r,width:2*b.r,height:2*b.r}}return this.bbox}});k.Line=r("dojox.gfx.shape.Line",k.Shape,{constructor:function(b){this.shape=q.getDefault("Line");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:Math.min(b.x1,b.x2),y:Math.min(b.y1,b.y2),width:Math.abs(b.x2-
b.x1),height:Math.abs(b.y2-b.y1)}}return this.bbox}});k.Polyline=r("dojox.gfx.shape.Polyline",k.Shape,{constructor:function(b){this.shape=q.getDefault("Polyline");this.rawNode=b},setShape:function(b,d){b&&b instanceof Array?(this.inherited(arguments,[{points:b}]),d&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[b]);return this},_normalizePoints:function(){var b=this.shape.points,d=b&&b.length;if(d&&"number"==typeof b[0]){for(var a=[],c=0;c<d;c+=
2)a.push({x:b[c],y:b[c+1]});this.shape.points=a}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var b=this.shape.points,d=b.length,a=b[0],c=a.x,g=a.y,f=a.x,k=a.y,m=1;m<d;++m)a=b[m],c>a.x&&(c=a.x),f<a.x&&(f=a.x),g>a.y&&(g=a.y),k<a.y&&(k=a.y);this.bbox={x:c,y:g,width:f-c,height:k-g}}return this.bbox}});k.Image=r("dojox.gfx.shape.Image",k.Shape,{constructor:function(b){this.shape=q.getDefault("Image");this.rawNode=b},getBoundingBox:function(){return this.shape},setStroke:function(){return this},
setFill:function(){return this}});k.Text=r(k.Shape,{constructor:function(b){this.fontStyle=null;this.shape=q.getDefault("Text");this.rawNode=b},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?q.splitFontString(b):q.makeParameters(q.defaultFont,b);this._setFont();return this},getBoundingBox:function(){var b=null;this.getShape().text&&(b=q._base._computeTextBoundingBox(this));return b}});k.Creator={createShape:function(b){switch(b.type){case q.defaultPath.type:return this.createPath(b);
case q.defaultRect.type:return this.createRect(b);case q.defaultCircle.type:return this.createCircle(b);case q.defaultEllipse.type:return this.createEllipse(b);case q.defaultLine.type:return this.createLine(b);case q.defaultPolyline.type:return this.createPolyline(b);case q.defaultImage.type:return this.createImage(b);case q.defaultText.type:return this.createText(b);case q.defaultTextPath.type:return this.createTextPath(b)}return null},createGroup:function(){return this.createObject(q.Group)},createRect:function(b){return this.createObject(q.Rect,
b)},createEllipse:function(b){return this.createObject(q.Ellipse,b)},createCircle:function(b){return this.createObject(q.Circle,b)},createLine:function(b){return this.createObject(q.Line,b)},createPolyline:function(b){return this.createObject(q.Polyline,b)},createImage:function(b){return this.createObject(q.Image,b)},createText:function(b){return this.createObject(q.Text,b)},createPath:function(b){return this.createObject(q.Path,b)},createTextPath:function(b){return this.createObject(q.TextPath,{}).setText(b)},
createObject:function(b,d){return null}};return k})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e){function n(a,b){return r.doc.createElementNS?r.doc.createElementNS(a,b):r.doc.createElement(b)}function a(a,b,c,d){return a.setAttributeNS?a.setAttributeNS(b,c,d):a.setAttribute(c,d)}function c(a){return g.useSvgWeb?
r.doc.createTextNode(a,!0):r.doc.createTextNode(a)}var g=d.svg={};g.useSvgWeb="undefined"!=typeof window.svgweb;var v=navigator.userAgent,u=t("ios"),z=t("android"),A=t("chrome")||z&&4<=z?"auto":"optimizeLegibility";g.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};g.getRef=function(a){return a&&"none"!=a?a.match(/^url\(#.+\)$/)?s.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?s.byId(a.slice(1)):null:null};g.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,
1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var y=0;g.Shape=l("dojox.gfx.svg.Shape",k.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=g.getRef(a))&&a.parentNode.removeChild(a)}this.clip&&(a=this.rawNode.getAttribute("clip-path"))&&(a=s.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);k.Shape.prototype.destroy.apply(this,
arguments)},setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var c,g=function(a){this.setAttribute(a,c[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":c=d.makeParameters(d.defaultLinearGradient,a);a=this._setFillObject(c,"linearGradient");b.forEach(["x1","y1","x2","y2"],g,a);break;case "radial":c=d.makeParameters(d.defaultRadialGradient,a);a=this._setFillObject(c,"radialGradient");
b.forEach(["cx","cy","r"],g,a);break;case "pattern":c=d.makeParameters(d.defaultPattern,a),a=this._setFillObject(c,"pattern"),b.forEach(["x","y","width","height"],g,a)}this.fillStyle=c;return this}this.fillStyle=c=d.normalizeColor(a);this.rawNode.setAttribute("fill",c.toCss());this.rawNode.setAttribute("fill-opacity",c.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(a){var b=this.rawNode;if(!a)return this.strokeStyle=null,b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",
0),this;if("string"==typeof a||q.isArray(a)||a instanceof f)a={color:a};a=this.strokeStyle=d.makeParameters(d.defaultStroke,a);a.color=d.normalizeColor(a.color);if(a){b.setAttribute("stroke",a.color.toCss());b.setAttribute("stroke-opacity",a.color.a);b.setAttribute("stroke-width",a.width);b.setAttribute("stroke-linecap",a.cap);"number"==typeof a.join?(b.setAttribute("stroke-linejoin","miter"),b.setAttribute("stroke-miterlimit",a.join)):b.setAttribute("stroke-linejoin",a.join);var c=a.style.toLowerCase();
c in g.dasharray&&(c=g.dasharray[c]);if(c instanceof Array){var c=q._toArray(c),e;for(e=0;e<c.length;++e)c[e]*=a.width;if("butt"!=a.cap){for(e=0;e<c.length;e+=2)c[e]-=a.width,1>c[e]&&(c[e]=1);for(e=1;e<c.length;e+=2)c[e]+=a.width}c=c.join(",")}b.setAttribute("stroke-dasharray",c);b.setAttribute("dojoGfxStrokeStyle",a.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof d.Surface);a=a.parent);return a},_setFillObject:function(b,c){var e=g.xmlns.svg;this.fillStyle=
b;var f=this._getParentSurface().defNode,k=this.rawNode.getAttribute("fill");if(k=g.getRef(k))if(k.tagName.toLowerCase()!=c.toLowerCase()){var m=k.id;k.parentNode.removeChild(k);k=n(e,c);k.setAttribute("id",m);f.appendChild(k)}else for(;k.childNodes.length;)k.removeChild(k.lastChild);else k=n(e,c),k.setAttribute("id",d._base._getUniqueId()),f.appendChild(k);if("pattern"==c)k.setAttribute("patternUnits","userSpaceOnUse"),e=n(e,"image"),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",
b.width.toFixed(8)),e.setAttribute("height",b.height.toFixed(8)),a(e,g.xmlns.xlink,"xlink:href",b.src),k.appendChild(e);else for(k.setAttribute("gradientUnits","userSpaceOnUse"),f=0;f<b.colors.length;++f){var m=b.colors[f],l=n(e,"stop"),p=m.color=d.normalizeColor(m.color);l.setAttribute("offset",m.offset.toFixed(8));l.setAttribute("stop-color",p.toCss());l.setAttribute("stop-opacity",p.a);k.appendChild(l)}this.rawNode.setAttribute("fill","url(#"+k.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");
this.rawNode.setAttribute("fill-rule","evenodd");return k},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke",
"none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=d.makeParameters(this.shape,a);for(var b in this.shape)"type"!=b&&this.rawNode.setAttribute(b,this.shape[b]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,
this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;"polyline"===b&&(a=q.clone(a),a.points=a.points.join(","));var c,d=m.get(this.rawNode,"clip-path");d&&(c=s.byId(d.match(/gfx_clip[\d]+/)[0]))&&c.removeChild(c.childNodes[0]);a?(c?(b=n(g.xmlns.svg,b),c.appendChild(b)):(d="gfx_clip"+ ++y,this.rawNode.setAttribute("clip-path","url(#"+d+")"),c=
n(g.xmlns.svg,"clipPath"),b=n(g.xmlns.svg,b),c.appendChild(b),this.rawNode.parentNode.appendChild(c),m.set(c,"id",d)),m.set(b,a)):(this.rawNode.removeAttribute("clip-path"),c&&c.parentNode.removeChild(c));return this},_removeClipNode:function(){var a,b=m.get(this.rawNode,"clip-path");b&&(a=s.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});g.Group=l("dojox.gfx.svg.Group",g.Shape,{constructor:function(){k.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;
this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);g.Shape.prototype.destroy.apply(this,arguments)}});g.Group.nodeType="g";g.Rect=l("dojox.gfx.svg.Rect",[g.Shape,k.Rect],{setShape:function(a){this.shape=d.makeParameters(this.shape,a);this.bbox=null;for(var b in this.shape)"type"!=b&&"r"!=b&&this.rawNode.setAttribute(b,this.shape[b]);null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});g.Rect.nodeType="rect";
g.Ellipse=l("dojox.gfx.svg.Ellipse",[g.Shape,k.Ellipse],{});g.Ellipse.nodeType="ellipse";g.Circle=l("dojox.gfx.svg.Circle",[g.Shape,k.Circle],{});g.Circle.nodeType="circle";g.Line=l("dojox.gfx.svg.Line",[g.Shape,k.Line],{});g.Line.nodeType="line";g.Polyline=l("dojox.gfx.svg.Polyline",[g.Shape,k.Polyline],{setShape:function(a,b){a&&a instanceof Array?(this.shape=d.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=d.makeParameters(this.shape,
a);this.bbox=null;this._normalizePoints();for(var c=[],g=this.shape.points,e=0;e<g.length;++e)c.push(g[e].x.toFixed(8),g[e].y.toFixed(8));this.rawNode.setAttribute("points",c.join(" "));return this}});g.Polyline.nodeType="polyline";g.Image=l("dojox.gfx.svg.Image",[g.Shape,k.Image],{setShape:function(b){this.shape=d.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;for(var c in this.shape)"type"!=c&&"src"!=c&&b.setAttribute(c,this.shape[c]);b.setAttribute("preserveAspectRatio","none");a(b,
g.xmlns.xlink,"xlink:href",this.shape.src);b.__gfxObject__=this;return this}});g.Image.nodeType="image";g.Text=l("dojox.gfx.svg.Text",[g.Shape,k.Text],{setShape:function(a){this.shape=d.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var b=this.shape;a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("text-anchor",b.align);a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.setAttribute("text-rendering",
A);a.firstChild?a.firstChild.nodeValue=b.text:a.appendChild(c(b.text));return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!=d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(b){a={x:0,y:0,width:0,height:0}}return a}});g.Text.nodeType="text";g.Path=l("dojox.gfx.svg.Path",
[g.Shape,e.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});g.Path.nodeType="path";g.TextPath=l("dojox.gfx.svg.TextPath",[g.Shape,e.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);
this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var b=this.rawNode;if(!b.firstChild){var e=n(g.xmlns.svg,"textPath"),f=c("");e.appendChild(f);b.appendChild(e)}e=(e=b.firstChild.getAttributeNS(g.xmlns.xlink,"href"))&&g.getRef(e);if(!e&&(f=this._getParentSurface())){var f=f.defNode,e=n(g.xmlns.svg,"path"),k=d._base._getUniqueId();e.setAttribute("id",k);f.appendChild(e);a(b.firstChild,g.xmlns.xlink,"xlink:href","#"+k)}e&&e.setAttribute("d",this.shape.path)}},
_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=n(g.xmlns.svg,"textPath"),d=c("");b.appendChild(d);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline","middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift",
"0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});g.TextPath.nodeType="text";var C=534<function(){var a=/WebKit\/(\d*)/.exec(v);return a?a[1]:0}();g.Surface=l("dojox.gfx.svg.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){k.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;
this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);C&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this},getDimensions:function(){return this.rawNode?{width:d.normalizedLength(this.rawNode.getAttribute("width")),height:d.normalizedLength(this.rawNode.getAttribute("height"))}:null}});g.createSurface=function(a,b,c){var e=new g.Surface;e.rawNode=n(g.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");b&&e.rawNode.setAttribute("width",b);c&&e.rawNode.setAttribute("height",
c);b=n(g.xmlns.svg,"defs");e.rawNode.appendChild(b);e.defNode=b;e._parent=s.byId(a);e._parent.appendChild(e.rawNode);d._base._fixMsTouchAction(e);return e};t={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var D=k.Container;l={openBatch:function(){if(!this._batch){var a;
a=g.useSvgWeb?r.doc.createDocumentFragment(!0):r.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),D.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==
a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),D.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return D.clear.apply(this,arguments)},getBoundingBox:D.getBoundingBox,_moveChildToFront:D._moveChildToFront,
_moveChildToBack:D._moveChildToBack};e={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=n(g.xmlns.svg,a.nodeType);c.setRawNode(d);c.setShape(b);this.add(c);return c}};q.extend(g.Text,t);q.extend(g.TextPath,t);q.extend(g.Group,l);q.extend(g.Group,k.Creator);q.extend(g.Group,e);q.extend(g.Surface,l);q.extend(g.Surface,k.Creator);q.extend(g.Surface,e);g.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=u&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);
return!0};g.useSvgWeb&&(g.createSurface=function(a,b,c){var e=new g.Surface;if(!b||!c){var f=p.position(a);b=b||f.w;c=c||f.h}a=s.byId(a);var f=a.id?a.id+"_svgweb":d._base._getUniqueId(),k=n(g.xmlns.svg,"svg");k.id=f;k.setAttribute("width",b);k.setAttribute("height",c);svgweb.appendChild(k,a);k.addEventListener("SVGLoad",function(){e.rawNode=this;e.isLoaded=!0;var a=n(g.xmlns.svg,"defs");e.rawNode.appendChild(a);e.defNode=a;if(e.onLoad)e.onLoad(e)},!1);e.isLoaded=!1;return e},g.Surface.extend({destroy:function(){var a=
this.rawNode;svgweb.removeChild(a,a.parentNode)}}),t={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==arguments.length?b:q.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},q.extend(g.Shape,t),q.extend(g.Surface,t));return g})},"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),
function(q,t,r,s,l,b,p,m){function f(a,b){this.start=a;this.end=b}function d(a,b,c){this.start=a;this.end=b;this.units=c}function k(a,b){this.start=a;this.end=b;this.temp=new s}function e(a){this.values=a;this.length=a.length}function n(a,b){this.values=a;this.def=b?b:{}}function a(a,b){this.stack=a;this.original=b}function c(a,b,c,d){if(a.values)return new e(a.values);var g,f;f=a.start?t.normalizeColor(a.start):g=b?c?b[c]:b:d;a.end?a=t.normalizeColor(a.end):(g||(g=b?c?b[c]:b:d),a=g);return new k(f,
a)}var g=t.fx={};f.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};d.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};k.prototype.getValue=function(a){return s.blendColors(this.start,this.end,a,this.temp)};e.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};n.prototype.getValue=function(a){var b=q.clone(this.def),c;for(c in this.values)b[c]=this.values[c].getValue(a);return b};a.prototype.getValue=
function(a){var b=[];l.forEach(this.stack,function(c){if(c instanceof r.Matrix2D)b.push(c);else if("original"==c.name&&this.original)b.push(this.original);else if("matrix"==c.name){if(c.start instanceof r.Matrix2D&&c.end instanceof r.Matrix2D){var d=new r.Matrix2D,g;for(g in c.start)d[g]=(c.end[g]-c.start[g])*a+c.start[g];b.push(d)}}else c.name in r&&(d=r[c.name],"function"!=typeof d?b.push(d):(g=l.map(c.start,function(b,d){return(c.end[d]-b)*a+b}),d=d.apply(r,g),d instanceof r.Matrix2D&&b.push(d)))},
this);return b};var v=new s(0,0,0,0);g.animateStroke=function(a){a.easing||(a.easing=b._defaultEasing);var d=new b.Animation(a),g=a.shape,k;p.connect(d,"beforeBegin",d,function(){k=g.getStroke();var b=a.color,d={},m;b&&(d.color=c(b,k,"color",v));(b=a.style)&&b.values&&(d.style=new e(b.values));if(b=a.width){var l=b,p=k;l.values?m=new e(l.values):(b=l.start?l.start:m=p?p.width:1,l.end?m=l.end:"number"!=typeof m&&(m=p?p.width:1),m=new f(b,m));d.width=m}(b=a.cap)&&b.values&&(d.cap=new e(b.values));if(b=
a.join)b.values?d.join=new e(b.values):(m=b.start?b.start:k&&k.join||0,b=b.end?b.end:k&&k.join||0,"number"==typeof m&&"number"==typeof b&&(d.join=new f(m,b)));this.curve=new n(d,k)});p.connect(d,"onAnimate",g,"setStroke");return d};g.animateFill=function(a){a.easing||(a.easing=b._defaultEasing);var d=new b.Animation(a),g=a.shape,e;p.connect(d,"beforeBegin",d,function(){e=g.getFill();var b=a.color;b&&(this.curve=c(b,e,"",v))});p.connect(d,"onAnimate",g,"setFill");return d};g.animateFont=function(a){a.easing||
(a.easing=b._defaultEasing);var c=new b.Animation(a),g=a.shape,f;p.connect(c,"beforeBegin",c,function(){f=g.getFont();var b=a.style,c={},k,m;b&&b.values&&(c.style=new e(b.values));(b=a.variant)&&b.values&&(c.variant=new e(b.values));(b=a.weight)&&b.values&&(c.weight=new e(b.values));(b=a.family)&&b.values&&(c.family=new e(b.values));(b=a.size)&&b.units&&(k=parseFloat(b.start?b.start:g.font&&g.font.size||"0"),m=parseFloat(b.end?b.end:g.font&&g.font.size||"0"),c.size=new d(k,m,b.units));this.curve=
new n(c,f)});p.connect(c,"onAnimate",g,"setFont");return c};g.animateTransform=function(c){c.easing||(c.easing=b._defaultEasing);var d=new b.Animation(c),g=c.shape,e;p.connect(d,"beforeBegin",d,function(){e=g.getTransform();this.curve=new a(c.transform,e)});p.connect(d,"onAnimate",g,"setTransform");if("svg"===t.renderer&&10<=m("ie"))var f=[p.connect(d,"onBegin",d,function(){for(var a=g.getParent();a&&a.getParent;)a=a.getParent();a&&(g.__svgContainer=a.rawNode.parentNode)}),p.connect(d,"onAnimate",
d,function(){try{if(g.__svgContainer){var a=g.__svgContainer.style.visibility;g.__svgContainer.style.visibility="visible";g.__svgContainer.style.visibility=a}}catch(b){}}),p.connect(d,"onEnd",d,function(){l.forEach(f,p.disconnect);if(g.__svgContainer){var a=g.__svgContainer.style.visibility,b=g.__svgContainer;g.__svgContainer.style.visibility="visible";setTimeout(function(){try{b.style.visibility=a,b=null}catch(c){}},100)}delete g.__svgContainer})];return d};return g})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k){var e=r.utils={};t.mixin(e,{forEach:function(b,a,c){c=c||q.global;a.call(c,b);(b instanceof r.Surface||b instanceof r.Group)&&l.forEach(b.children,function(b){e.forEach(b,a,c)})},serialize:function(b){var a={},c;if((c=b instanceof r.Surface)||b instanceof r.Group){if(a.children=l.map(b.children,e.serialize),c)return a.children}else a.shape=b.getShape();b.getTransform&&(c=b.getTransform())&&(a.transform=c);b.getStroke&&(c=b.getStroke())&&(a.stroke=c);b.getFill&&(c=b.getFill())&&
(a.fill=c);b.getFont&&(c=b.getFont())&&(a.font=c);return a},toJson:function(b,a){return p.toJson(e.serialize(b),a)},deserialize:function(b,a){if(a instanceof Array)return l.map(a,t.hitch(null,e.deserialize,b));var c="shape"in a?b.createShape(a.shape):b.createGroup();"transform"in a&&c.setTransform(a.transform);"stroke"in a&&c.setStroke(a.stroke);"fill"in a&&c.setFill(a.fill);"font"in a&&c.setFont(a.font);"children"in a&&l.forEach(a.children,t.hitch(null,e.deserialize,c));return c},fromJson:function(b,
a){return e.deserialize(b,p.fromJson(a))},toSvg:function(d){var a=new m;if("svg"===r.renderer)try{var c=e._cleanSvg(e._innerXML(d.rawNode));a.callback(c)}catch(g){a.errback(g)}else{e._initSvgSerializerDeferred||e._initSvgSerializer();var f=e.toJson(d),c=function(){try{var c=d.getDimensions(),g=c.width,k=c.height,m=e._gfxSvgProxy.document.createElement("div");e._gfxSvgProxy.document.body.appendChild(m);b.withDoc(e._gfxSvgProxy.document,function(){s.style(m,"width",g);s.style(m,"height",k)},this);e._gfxSvgProxy[dojox._scopeName].gfx.createSurface(m,
g,k).whenLoaded(null,function(b){try{e._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(b,f);var c=e._cleanSvg(m.innerHTML);b.clear();b.destroy();e._gfxSvgProxy.document.body.removeChild(m);a.callback(c)}catch(d){a.errback(d)}})}catch(l){a.errback(l)}};0<e._initSvgSerializerDeferred.fired?c():e._initSvgSerializerDeferred.addCallback(c)}return a},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){e._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!e._initSvgSerializerDeferred){e._initSvgSerializerDeferred=
new m;var l=b.doc.createElement("iframe");s.style(l,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var a;f("ie")?l.onreadystatechange=function(){"complete"==l.contentWindow.document.readyState&&(l.onreadystatechange=function(){},a=setInterval(function(){l.contentWindow[q.scopeMap.dojo[1]._scopeName]&&l.contentWindow[q.scopeMap.dojox[1]._scopeName].gfx&&l.contentWindow[q.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(a),l.contentWindow.parent[q.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
l.contentWindow,l.contentWindow.parent[q.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:l.onload=function(){l.onload=function(){};a=setInterval(function(){l.contentWindow[q.scopeMap.dojo[1]._scopeName]&&l.contentWindow[q.scopeMap.dojox[1]._scopeName].gfx&&l.contentWindow[q.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(a),l.contentWindow.parent[q.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=l.contentWindow,l.contentWindow.parent[q.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var c=k.dojoxGfxSvgProxyFrameUrl||d.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");l.setAttribute("src",c.toString());b.body().appendChild(l)}},_innerXML:function(b){return b.innerXML?b.innerXML:b.xml?b.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(b):null},_cleanSvg:function(b){b&&(-1==b.indexOf('xmlns="http://www.w3.org/2000/svg"')&&(b=b.substring(4,b.length),b='<svg xmlns="http://www.w3.org/2000/svg"'+b),-1==b.indexOf('xmlns:xlink="http://www.w3.org/1999/xlink"')&&
(b=b.substring(4,b.length),b='<svg xmlns:xlink="http://www.w3.org/1999/xlink"'+b),-1===b.indexOf("xlink:href")&&(b=b.replace(/href\s*=/g,"xlink:href=")),b=b.replace(/<img\b([^>]*)>/gi,"<image $1 />"),b=b.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),b=b.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),b=b.replace(/[=]([^"']+?)(\s|>)/g,'="$1"$2'));return b}});return e})},"dojox/gfx/Moveable":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover".split(" "),
function(q,t,r,s,l,b,p,m,f){return t("dojox.gfx.Moveable",null,{constructor:function(d,k){this.shape=d;this.delay=k&&0<k.delay?k.delay:0;this.mover=k&&k.mover?k.mover:f;this.events=[this.shape.on(b.press,q.hitch(this,"onMouseDown"))]},destroy:function(){r.forEach(this.events,function(b){b.remove()});this.events=this.shape=null},onMouseDown:function(d){this.delay?(this.events.push(this.shape.on(b.move,q.hitch(this,"onMouseMove")),this.shape.on(b.release,q.hitch(this,"onMouseUp"))),this._lastX=d.clientX,
this._lastY=d.clientY):new this.mover(this.shape,d,this);s.stop(d)},onMouseMove:function(b){var f=b.clientY;if(Math.abs(b.clientX-this._lastX)>this.delay||Math.abs(f-this._lastY)>this.delay)this.onMouseUp(b),new this.mover(this.shape,b,this);s.stop(b)},onMouseUp:function(b){this.events.pop().remove()},onMoveStart:function(b){l.publish("/gfx/move/start",b);p.add(m.body(),"dojoMove")},onMoveStop:function(b){l.publish("/gfx/move/stop",b);p.remove(m.body(),"dojoMove")},onFirstMove:function(b){},onMove:function(b,
f){this.onMoving(b,f);this.shape.applyLeftTransform(f);this.onMoved(b,f)},onMoving:function(b,f){},onMoved:function(b,f){}})})},"dojox/gfx/Mover":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(q,t,r,s,l,b){return r("dojox.gfx.Mover",null,{constructor:function(p,m,f){this.shape=p;this.lastX=m.clientX;this.lastY=m.clientY;p=this.host=f;m=document;f=s(m,l.move,q.hitch(this,"onFirstMove"));this.events=[s(m,l.move,q.hitch(this,
"onMouseMove")),s(m,l.release,q.hitch(this,"destroy")),s(m,"dragstart",q.hitch(b,"stop")),s(m,"selectstart",q.hitch(b,"stop")),f];if(p&&p.onMoveStart)p.onMoveStart(this)},onMouseMove:function(l){var m=l.clientX,f=l.clientY;this.host.onMove(this,{dx:m-this.lastX,dy:f-this.lastY});this.lastX=m;this.lastY=f;b.stop(l)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){t.forEach(this.events,function(b){b.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);
this.events=this.shape=null}})})},"dojox/gesture/tap":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","./Base","../main"],function(q,t,r,s,l){q.experimental("dojox.gesture.tap");q=t(s,{defaultEvent:"tap",subEvents:["hold","doubletap"],holdThreshold:500,doubleTapTimeout:250,tapRadius:10,press:function(b,l){if(l.touches&&2<=l.touches.length)clearTimeout(b.tapTimeOut),delete b.context;else{var m=l.target;this._initTap(b,l);b.tapTimeOut=setTimeout(r.hitch(this,function(){this._isTap(b,
l)&&this.fire(m,{type:"tap.hold"});delete b.context}),this.holdThreshold)}},release:function(b,l){if(b.context&&this._isTap(b,l))switch(b.context.c){case 1:this.fire(l.target,{type:"tap"});break;case 2:this.fire(l.target,{type:"tap.doubletap"})}clearTimeout(b.tapTimeOut)},_initTap:function(b,l){b.context||(b.context={x:0,y:0,t:0,c:0});var m=(new Date).getTime();m-b.context.t<=this.doubleTapTimeout?b.context.c++:(b.context.c=1,b.context.x=l.screenX,b.context.y=l.screenY);b.context.t=m},_isTap:function(b,
l){var m=Math.abs(b.context.x-l.screenX),f=Math.abs(b.context.y-l.screenY);return m<=this.tapRadius&&f<=this.tapRadius}});l.gesture.tap=new q;l.gesture.tap.Tap=q;return l.gesture.tap})},"dojox/gesture/Base":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom dojo/on dojo/touch dojo/has ../main".split(" "),function(q,t,r,s,l,b,p,m,f){q.experimental("dojox.gesture.Base");s.getObject("gesture",!0,f);return t(null,{defaultEvent:" ",subEvents:[],touchOnly:!1,
_elements:null,constructor:function(b){s.mixin(this,b);this.init()},init:function(){this._elements=[];if(!m("touch")&&this.touchOnly)console.warn("Gestures:[",this.defaultEvent,"] is only supported on touch devices!");else{var b=this.defaultEvent;this.call=this._handle(b);this._events=[b];r.forEach(this.subEvents,function(f){this[f]=this._handle(b+"."+f);this._events.push(b+"."+f)},this)}},_handle:function(d){var f=this;return function(e,m){var a=arguments;2<a.length&&(e=a[1],m=a[2]);if(e&&(e.nodeType||
e.attachEvent||e.addEventListener)){var c=f._add(e,d,m);return{remove:function(){c.remove();f._remove(e,d)}}}return b(e,d,m)}},_add:function(d,f,e){var m=this._getGestureElement(d);if(!m){var m={target:d,data:{},handles:{}},a=s.hitch(this,"_process",m,"press"),c=s.hitch(this,"_process",m,"move"),g=s.hitch(this,"_process",m,"release"),l=s.hitch(this,"_process",m,"cancel"),q=m.handles;this.touchOnly?(q.press=b(d,"touchstart",a),q.move=b(d,"touchmove",c),q.release=b(d,"touchend",g),q.cancel=b(d,"touchcancel",
l)):(q.press=p.press(d,a),q.move=p.move(d,c),q.release=p.release(d,g),q.cancel=p.cancel(d,l));this._elements.push(m)}m.handles[f]=m.handles[f]?++m.handles[f]:1;return b(d,f,e)},_getGestureElement:function(b){for(var f=0,e;f<this._elements.length;f++)if(e=this._elements[f],e.target===b)return e},_process:function(b,f,e){e._locking=e._locking||{};e._locking[this.defaultEvent]||this.isLocked(e.currentTarget)||("INPUT"==e.target.tagName&&"radio"!=e.target.type&&"checkbox"!=e.target.type||"TEXTAREA"==
e.target.tagName||e.preventDefault(),e._locking[this.defaultEvent]=!0,this[f](b.data,e))},press:function(b,f){},move:function(b,f){},release:function(b,f){},cancel:function(b,f){},fire:function(d,f){d&&f&&(f.bubbles=!0,f.cancelable=!0,b.emit(d,f.type,f))},_remove:function(b,f){var e=this._getGestureElement(b);if(e&&e.handles){e.handles[f]--;var m=e.handles;r.some(this._events,function(a){return 0<m[a]})||(this._cleanHandles(m),e=r.indexOf(this._elements,e),0<=e&&this._elements.splice(e,1))}},_cleanHandles:function(b){for(var f in b)b[f].remove&&
b[f].remove(),delete b[f]},lock:function(b){this._lock=b},unLock:function(){this._lock=null},isLocked:function(b){return this._lock&&b?this._lock!==b&&l.isDescendant(b,this._lock):!1},destroy:function(){r.forEach(this._elements,function(b){this._cleanHandles(b.handles)},this);this._elements=null}})})},"dojox/gesture/swipe":function(){define(["dojo/_base/kernel","dojo/_base/declare","./Base","../main"],function(q,t,r,s){q.experimental("dojox.gesture.swipe");q=t(r,{defaultEvent:"swipe",subEvents:["end"],
press:function(l,b){b.touches&&2<=b.touches.length?delete l.context:(l.context||(l.context={x:0,y:0,t:0}),l.context.x=b.screenX,l.context.y=b.screenY,l.context.t=(new Date).getTime(),this.lock(b.currentTarget))},move:function(l,b){this._recognize(l,b,"swipe")},release:function(l,b){this._recognize(l,b,"swipe.end");delete l.context;this.unLock()},cancel:function(l,b){delete l.context;this.unLock()},_recognize:function(l,b,p){l.context&&(l=this._getSwipeInfo(l,b))&&(l.type=p,this.fire(b.target,l))},
_getSwipeInfo:function(l,b){var p,m,f={};m=l.context;f.time=(new Date).getTime()-m.t;p=b.screenX-m.x;m=b.screenY-m.y;if(0===p&&0===m)return null;f.dx=p;f.dy=m;return f}});s.gesture.swipe=new q;s.gesture.swipe.Swipe=q;return s.gesture.swipe})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(q,t,r,s){var l=q.getObject("dojox.html",!0),b={},p={},m=[];l.insertCssRule=function(b,d,k){k=l.getDynamicStyleSheet(k);var e=b+" {"+d+
"}";s("ie")?k.cssText+=e:k.sheet?k.sheet.insertRule(e,k._indicies.length):k.appendChild(r.doc.createTextNode(e));k._indicies.push(b+" "+d);return b};l.removeCssRule=function(f,d,k){var e,m=-1,a,c;for(a in b)if(!k||k===a){e=b[a];for(c=0;c<e._indicies.length;c++)if(f+" "+d===e._indicies[c]){m=c;break}if(-1<m)break}if(!e)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===m)return console.warn("The css rule was not found and could not be removed."),
!1;e._indicies.splice(m,1);s("ie")?e.removeRule(m):e.sheet&&e.sheet.deleteRule(m);return!0};l.modifyCssRule=function(b,d,k){};l.getStyleSheet=function(f){if(b[f||"default"])return b[f||"default"];if(!f)return!1;var d=l.getStyleSheets();if(d[f])return l.getStyleSheets()[f];for(var k in d)if(d[k].href&&-1<d[k].href.indexOf(f))return d[k];return!1};l.getDynamicStyleSheet=function(f){f||(f="default");b[f]||(r.doc.createStyleSheet?(b[f]=r.doc.createStyleSheet(),9>s("ie")&&(b[f].title=f)):(b[f]=r.doc.createElement("style"),
b[f].setAttribute("type","text/css"),r.doc.getElementsByTagName("head")[0].appendChild(b[f])),b[f]._indicies=[]);return b[f]};l.enableStyleSheet=function(b){if(b=l.getStyleSheet(b))b.sheet?b.sheet.disabled=!1:b.disabled=!1};l.disableStyleSheet=function(b){if(b=l.getStyleSheet(b))b.sheet?b.sheet.disabled=!0:b.disabled=!0};l.activeStyleSheet=function(b){var d=l.getToggledStyleSheets(),k;if(1===arguments.length)t.forEach(d,function(d){d.disabled=d.title===b?!1:!0});else for(k=0;k<d.length;k++)if(!1===
d[k].disabled)return d[k];return!0};l.getPreferredStyleSheet=function(){};l.getToggledStyleSheets=function(){var b;if(!m.length){var d=l.getStyleSheets();for(b in d)d[b].title&&m.push(d[b])}return m};l.getStyleSheets=function(){if(p.collected)return p;t.forEach(r.doc.styleSheets,function(b){var d=b.sheet?b.sheet:b;b=d.title||d.href;s("ie")?-1===d.cssText.indexOf("#default#VML")&&(d.href?p[b]=d:d.imports.length?t.forEach(d.imports,function(b){p[b.title||b.href]=b}):p[b]=d):(p[b]=d,p[b].id=d.ownerNode.id,
t.forEach(d.cssRules,function(b){b.href&&(p[b.href]=b.styleSheet,p[b.href].id=d.ownerNode.id)}))});p.collected=!0;return p};return l})},"dojox/charting/widget/Chart":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/_base/declare dojo/query dijit/_WidgetBase ../Chart dojo/has dojo/has!dojo-bidi?../bidi/widget/Chart dojox/lang/utils dojox/lang/functional dojox/lang/functional/lambda".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n){var a,c,g,v,u,z=function(a){return a},
A=t.getObject("dojox.charting");a=function(a,b,c){var d=eval("("+b+".prototype.defaultParams)"),g,e;for(g in d)g in c||(e=a.getAttribute(g),c[g]=k.coerceType(d[g],null==e||"undefined"==typeof e?d[g]:e));b=eval("("+b+".prototype.optionalParams)");for(g in b)g in c||(e=a.getAttribute(g),null!=e&&(c[g]=k.coerceType(b[g],e)))};c=function(b){var c=b.getAttribute("name"),d=b.getAttribute("type");if(!c)return null;var c={name:c,kwArgs:{}},g=c.kwArgs;if(d){A.axis2d[d]&&(d=q._scopeName+"x.charting.axis2d."+
d);var e=eval("("+d+")");e&&(g.type=e)}else d=q._scopeName+"x.charting.axis2d.Default";a(b,d,g);if(g.font||g.fontColor)g.tick||(g.tick={}),g.font&&(g.tick.font=g.font),g.fontColor&&(g.tick.fontColor=g.fontColor);return c};g=function(b){var c=b.getAttribute("name"),d=b.getAttribute("type");if(!c)return null;var c={name:c,kwArgs:{}},g=c.kwArgs;if(d){A.plot2d&&A.plot2d[d]&&(d=q._scopeName+"x.charting.plot2d."+d);var e=eval("("+d+")");e&&(g.type=e)}else d=q._scopeName+"x.charting.plot2d.Default";a(b,
d,g);var d=eval("("+d+".prototype.baseParams)"),f;for(f in d)f in g||(e=b.getAttribute(f),g[f]=k.coerceType(d[f],null==e||"undefined"==typeof e?d[f]:e));return c};v=function(b){var c=b.getAttribute("plot"),d=b.getAttribute("type");c||(c="default");var c={plot:c,kwArgs:{}},g=c.kwArgs;if(d){A.action2d[d]&&(d=q._scopeName+"x.charting.action2d."+d);var e=eval("("+d+")");if(!e)return null;c.action=e}else return null;a(b,d,g);return c};u=function(a){a=t.partial(s.get,a);var b=a("name");if(!b)return null;
var b={name:b,kwArgs:{}},c=b.kwArgs,d;d=a("plot");null!=d&&(c.plot=d);d=a("marker");null!=d&&(c.marker=d);d=a("stroke");null!=d&&(c.stroke=eval("("+d+")"));d=a("outline");null!=d&&(c.outline=eval("("+d+")"));d=a("shadow");null!=d&&(c.shadow=eval("("+d+")"));d=a("fill");null!=d&&(c.fill=eval("("+d+")"));d=a("font");null!=d&&(c.font=d);d=a("fontColor");null!=d&&(c.fontColor=eval("("+d+")"));d=a("legend");null!=d&&(c.legend=d);d=a("data");if(null!=d)return b.type="data",b.data=d?r.map(String(d).split(","),
Number):[],b;d=a("array");if(null!=d)return b.type="data",b.data=eval("("+d+")"),b;d=a("store");if(null!=d){b.type="store";b.data=eval("("+d+")");d=a("field");b.field=null!=d?d:"value";if(d=a("query"))c.query=d;if(d=a("queryOptions"))c.queryOptions=eval("("+d+")");if(d=a("start"))c.start=Number(d);if(d=a("count"))c.count=Number(d);if(d=a("sort"))c.sort=eval("("+d+")");if(d=a("valueFn"))c.valueFn=n.lambda(d);return b}return null};p=l(f("dojo-bidi")?"dojox.charting.widget.NonBidiChart":"dojox.charting.widget.Chart",
p,{theme:null,margins:null,stroke:void 0,fill:void 0,buildRendering:function(){this.inherited(arguments);var a=this.domNode,d=b("> .axis",a).map(c).filter(z),f=b("> .plot",a).map(g).filter(z),l=b("> .action",a).map(v).filter(z),n=b("> .series",a).map(u).filter(z);a.innerHTML="";var p=this.chart=new m(a,{margins:this.margins,stroke:this.stroke,fill:this.fill,textDir:this.textDir});this.theme&&p.setTheme(this.theme);d.forEach(function(a){p.addAxis(a.name,a.kwArgs)});f.forEach(function(a){p.addPlot(a.name,
a.kwArgs)});this.actions=l.map(function(a){return new a.action(p,a.plot,a.kwArgs)});e.foldl(n,function(a,b){if("data"==b.type)p.addSeries(b.name,b.data,b.kwArgs),a=!0;else{p.addSeries(b.name,[0],b.kwArgs);var c={};k.updateWithPattern(c,b.kwArgs,{query:"",queryOptions:null,start:0,count:1},!0);b.kwArgs.sort&&(c.sort=t.clone(b.kwArgs.sort));t.mixin(c,{onComplete:function(a){if("valueFn"in b.kwArgs){var c=b.kwArgs.valueFn;a=r.map(a,function(a){return c(b.data.getValue(a,b.field,0))})}else a=r.map(a,
function(a){return b.data.getValue(a,b.field,0)});p.addSeries(b.name,a,b.kwArgs).render()}});b.data.fetch(c)}return a},!1)&&p.render()},destroy:function(){this.chart.destroy();this.inherited(arguments)},resize:function(a){this.chart.resize.apply(this.chart,arguments)}});return f("dojo-bidi")?l("dojox.charting.widget.Chart",[p,d]):p})},"dojox/charting/Chart":function(){define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u){function z(a,b){a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max));return a||b}function A(a,b){var c={},d={};r.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(d[a.hAxis]=z(d[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(d[a.vAxis]=z(d[a.vAxis],{min:b.vmin,max:b.vmax}))});r.forEach(a,function(a){var g=c[a.name];if(a.hAxis){var e=d[a.hAxis];g.hmin=e.min;g.hmax=e.max}a.vAxis&&(e=d[a.vAxis],g.vmin=e.min,g.vmax=e.max);a.initializeScalers(b,
g)})}var y=t.getObject("charting",!0,q),C=u.lambda("item.clear()"),D=u.lambda("item.purgeGroup()"),B=u.lambda("item.destroy()"),G=u.lambda("item.dirty = false"),J=u.lambda("item.dirty = true"),M=u.lambda("item.name");q=s(d("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(a,c){c||(c={});this.margins=c.margins?c.margins:{l:10,t:10,r:10,b:10};this.stroke=c.stroke;this.fill=c.fill;this.delayInMs=c.delayInMs||200;this.title=c.title;this.titleGap=c.titleGap;this.titlePos=
c.titlePos;this.titleFont=c.titleFont;this.titleFontColor=c.titleFontColor;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in c&&(this.htmlLabels=c.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=b.byId(a);var d=p.getMarginBox(a);this.surface=g.createSurface(this.node,d.w||400,d.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},destroy:function(){r.forEach(this.series,B);r.forEach(this.stack,B);
u.forIn(this.axes,B);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&m.destroy(this.chartTitle)},getCoords:function(){var a=this.node,b=l.getComputedStyle(a),b=p.getMarginBox(a,b),a=p.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this.dirty=!0;return this},addAxis:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!y.axis2d||!y.axis2d[c])throw Error("Can't find axis: "+c+" - Check require() dependencies.");c=new y.axis2d[c](this,
b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=c;this.dirty=!0;return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){a in this.axes&&(this.axes[a].destroy(),delete this.axes[a],this.dirty=!0);return this},addPlot:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!y.plot2d||!y.plot2d[c])throw Error("Can't find plot: "+c+" - didn't you forget to dojo.require() it?");c=new y.plot2d[c](this,b)}else c=new c(this,
b);c.name=a;c.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=this.stack.length,this.stack.push(c));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);u.forIn(this.plots,function(a,c,d){a>b&&(d[c]=a-1)});var c=r.filter(this.series,function(b){return b.plot!=a});c.length<this.series.length&&
(r.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},r.forEach(c,function(a,b){this.runs[a.plot]=b},this),this.series=c);this.dirty=!0}return this},getPlotOrder:function(){return u.map(this.stack,M)},setPlotOrder:function(a){var b={},c=u.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&u.forEach(this.stack,function(a){a=a.name;a in b||c.push(a)});a=u.map(c,function(a){return this.stack[this.plots[a]]},this);u.forEach(a,
function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){b=new n(this,b,c);b.name=a;a in this.runs?
(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));this.dirty=!0;!("ymin"in b)&&"min"in b&&(b.ymin=b.min);!("ymax"in b)&&"max"in b&&(b.ymax=b.max);return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);u.forIn(this.runs,function(a,c,d){a>b&&(d[c]=a-1)});this.dirty=!0}return this},updateSeries:function(a,
b,c){a in this.runs&&(a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,!1),this._invalidateDependentPlots(a.plot,!0)));return this},getSeriesOrder:function(a){return u.map(u.filter(this.series,function(b){return b.plot==a}),M)},setSeriesOrder:function(a){var b,c={},d=u.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var d=this.series[this.runs[a]];if(b){if(d.plot!=b)return!1}else b=d.plot;c[a]=1;return!0},this);u.forEach(this.series,function(a){var g=
a.name;g in c||a.plot!=b||d.push(g)});this.series=u.map(d,function(a){return this.series[this.runs[a]]},this).concat(u.filter(this.series,function(a){return a.plot!=b}));u.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=
this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),this.setSeriesOrder(c)}return this},resize:function(a,b){switch(arguments.length){case 1:p.setMarginBox(this.node,a);break;case 2:p.setMarginBox(this.node,{w:a,h:b})}var c=p.getMarginBox(this.node),d=this.surface.getDimensions();return d.width!=c.w||d.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};u.forIn(this.axes,function(b){b.initialized()&&
(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,d){var g=this.axes[a];g&&(g.setWindow(b,c),r.forEach(this.stack,function(b){if(b.hAxis==a||b.vAxis==a)b.zoom=d}));return this},setWindow:function(a,b,c,d,g){"plotArea"in this||this.calculateGeometry();u.forIn(this.axes,function(g){var e,f;e=g.getScaler().bounds;f=e.span/(e.upper-e.lower);g.vertical?(e=b,f=d/f/e):(e=a,f=c/f/e);g.setWindow(e,f)});r.forEach(this.stack,function(a){a.zoom=
g});return this},zoomIn:function(a,b,c){var d=this.axes[a];if(d){var d=d.getScaler().bounds,g=Math.min(b[0],b[1]),e=Math.max(b[0],b[1]),g=b[0]<d.lower?d.lower:g,e=b[1]>d.upper?d.upper:e;this.setAxisWindow(a,(d.upper-d.lower)/(e-g),g-d.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=r.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);A(a,this.plotArea);return this},
fullGeometry:function(){this._makeDirty();r.forEach(this.stack,C);this.theme||this.setTheme(new e);r.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!y.plot2d||!y.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new y.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this);r.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},
this);var a=this.dim=this.surface.getDimensions();a.width=g.normalizedLength(a.width);a.height=g.normalizedLength(a.height);u.forIn(this.axes,C);A(this.stack,a);var b=this.offsets={l:0,r:0,t:0,b:0},c=this;u.forIn(this.axes,function(a){d("dojo-bidi")&&c._resetLeftBottom(a);u.forIn(a.getOffsets(),function(a,c){b[c]=Math.max(a,b[c])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=
this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var f=g.normalizedLength(g.splitFontString(this.titleFont).size);b["top"==this.titlePos?"t":"b"]+=f+this.titleGap}u.forIn(this.margins,function(a,c){b[c]+=a});this.plotArea={width:a.width-b.l-b.r,height:a.height-b.t-b.b};u.forIn(this.axes,C);A(this.stack,this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=
null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();u.forEachRev(this.stack,function(a){a.render(this.dim,this.offsets)},this);u.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var b=this.offsets,e=this.dim,f=Math.max(0,e.width-b.l-b.r),k=Math.max(0,e.height-b.t-b.b);r.forEach(this.series,D);u.forIn(this.axes,D);r.forEach(this.stack,D);var l=this.surface.children;
if(c.dispose)for(var n=0;n<l.length;++n)c.dispose(l[n]);this.chartTitle&&this.chartTitle.tagName&&m.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(e,b);this._renderPlotBackground(e,b,f,k);u.foldr(this.stack,function(a,c){return c.render(e,b),0},0);this._nativeClip||this._renderChartBackground(e,b);this.title&&(f="canvas"==g.renderer&&this.htmlLabels||!d("ie")&&!d("opera")&&this.htmlLabels?"html":"gfx",k=g.normalizedLength(g.splitFontString(this.titleFont).size),
this.chartTitle=a.createText[f](this,this.surface,e.width/2,"top"==this.titlePos?k+this.margins.t:e.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor));u.forIn(this.axes,function(a){a.render(e,b)});this._makeClean();return this},_renderChartBackground:function(a,b){var c=this.theme,d,g=void 0!==this.fill?this.fill:c.chart&&c.chart.fill,c=void 0!==this.stroke?this.stroke:c.chart&&c.chart.stroke;if("inherit"==g)for(d=this.node,g=new f(l.get(d,"backgroundColor"));0==g.a&&d!=
document.documentElement;)g=new f(l.get(d,"backgroundColor")),d=d.parentNode;g&&(this._nativeClip?(g=k.prototype._shapeFill(k.prototype._plotFill(g,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(g)):(g=k.prototype._plotFill(g,a,b),b.l&&(d={x:0,y:0,width:b.l,height:a.height+1},this.surface.createRect(d).setFill(k.prototype._shapeFill(g,d))),b.r&&(d={x:a.width-b.r,y:0,width:b.r+1,height:a.height+2},this.surface.createRect(d).setFill(k.prototype._shapeFill(g,
d))),b.t&&(d={x:0,y:0,width:a.width+1,height:b.t},this.surface.createRect(d).setFill(k.prototype._shapeFill(g,d))),b.b&&(d={x:0,y:a.height-b.b,width:a.width+1,height:b.b+2},this.surface.createRect(d).setFill(k.prototype._shapeFill(g,d)))));c&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(c)},_renderPlotBackground:function(a,b,c,d){var g=this.theme,e=g.plotarea&&g.plotarea.fill,g=g.plotarea&&g.plotarea.stroke,f={x:b.l-1,y:b.t-1,width:c+2,height:d+2};e&&(e=k.prototype._shapeFill(k.prototype._plotFill(e,
a,b),f),this.surface.createRect(f).setFill(e));g&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:d+1}).setStroke(g)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(t.hitch(this,function(){this.render()}),this.delayInMs));return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var d=this.series[this.runs[a]].plot;d in this.plots&&(d=this.stack[this.plots[d]])&&
d.fireEvent(a,b,c)}return this},_makeClean:function(){r.forEach(this.axes,G);r.forEach(this.stack,G);r.forEach(this.series,G);this.dirty=!1},_makeDirty:function(){r.forEach(this.axes,J);r.forEach(this.stack,J);r.forEach(this.series,J);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],d,g=b?"vAxis":"hAxis";c[g]?(d=this.axes[c[g]])&&d.dependOnData()&&(d.dirty=!0,r.forEach(this.stack,function(a){a[g]&&a[g]==c[g]&&(a.dirty=!0)})):c.dirty=!0}},setDir:function(a){return this},
_resetLeftBottom:function(a){},formatTruncatedLabel:function(a,b,c){}});return d("dojo-bidi")?s("dojox.charting.Chart",[q,v]):q})},"dojox/charting/Element":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(q,t,r,s,l){return r("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,constructor:function(b){this.chart=b;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol="...";this._events=
[]},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.getGroup().removeShape();var b=this.getGroup().children;if(l.dispose)for(var p=0;p<b.length;++p)l.dispose(b[p],!0);this.getGroup().rawNode&&t.empty(this.getGroup().rawNode);this.getGroup().clear();l.dispose&&l.dispose(this.getGroup(),!0);this.getGroup()!=this.group&&(this.group.rawNode&&t.empty(this.group.rawNode),this.group.clear(),l.dispose&&l.dispose(this.group,!0));this.group=null}this.dirty=!0;this._events.length&&(q.forEach(this._events,
function(b){b.shape.disconnect(b.handle)}),this._events=[]);return this},cleanGroup:function(b){this.destroyHtmlElements();b||(b=this.chart.surface);if(this.group){var p;b=this.getGroup().children;if(l.dispose)for(var m=0;m<b.length;++m)l.dispose(b[m],!0);this.getGroup().rawNode&&(p=this.getGroup().bgNode,t.empty(this.getGroup().rawNode));this.getGroup().clear();p&&this.getGroup().rawNode.appendChild(p)}else this.group=b.createGroup();this.dirty=!0;return this},getGroup:function(){return this.group},
destroyHtmlElements:function(){this.htmlElements.length&&(q.forEach(this.htmlElements,t.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},getTextWidth:function(b,l){return s._base._getTextBox(b,{font:l}).w||0},getTextWithLimitLength:function(b,l,m,f){if(!b||0>=b.length)return{text:"",truncated:f||!1};if(!m||0>=m)return{text:b,truncated:f||!1};var d=b.substring(0,1)+this.trailingSymbol,k=this.getTextWidth(d,l);if(m<=k)return{text:d,truncated:!0};if(this.getTextWidth(b,l)<=m)return{text:b,
truncated:f||!1};f=0;for(d=b.length;f<d;){if(2>=d-f){for(;this.getTextWidth(b.substring(0,f)+this.trailingSymbol,l)>m;)f-=1;return{text:b.substring(0,f)+this.trailingSymbol,truncated:!0}}k=f+Math.round(0.618*(d-f));this.getTextWidth(b.substring(0,k),l)<m?f=k:d=k}},getTextWithLimitCharCount:function(b,l,m,f){return!b||0>=b.length?{text:"",truncated:f||!1}:!m||0>=m||b.length<=m?{text:b,truncated:f||!1}:{text:b.substring(0,m)+this.trailingSymbol,truncated:!0}},_plotFill:function(b,l,m){if(!b||!b.type||
!b.space)return b;var f=b.space,d;switch(b.type){case "linear":if("plot"===f||"shapeX"===f||"shapeY"===f){b=s.makeParameters(s.defaultLinearGradient,b);b.space=f;if("plot"===f||"shapeX"===f)d=l.height-m.t-m.b,b.y1=m.t+d*b.y1/100,b.y2=m.t+d*b.y2/100;if("plot"===f||"shapeY"===f)d=l.width-m.l-m.r,b.x1=m.l+d*b.x1/100,b.x2=m.l+d*b.x2/100}break;case "radial":"plot"===f&&(b=s.makeParameters(s.defaultRadialGradient,b),b.space=f,f=l.width-m.l-m.r,l=l.height-m.t-m.b,b.cx=m.l+f*b.cx/100,b.cy=m.t+l*b.cy/100,
b.r=b.r*Math.sqrt(f*f+l*l)/200);break;case "pattern":if("plot"===f||"shapeX"===f||"shapeY"===f){b=s.makeParameters(s.defaultPattern,b);b.space=f;if("plot"===f||"shapeX"===f)d=l.height-m.t-m.b,b.y=m.t+d*b.y/100,b.height=d*b.height/100;if("plot"===f||"shapeY"===f)d=l.width-m.l-m.r,b.x=m.l+d*b.x/100,b.width=d*b.width/100}}return b},_shapeFill:function(b,l){if(!b||!b.space)return b;var m=b.space,f;switch(b.type){case "linear":if("shape"===m||"shapeX"===m||"shapeY"===m){b=s.makeParameters(s.defaultLinearGradient,
b);b.space=m;if("shape"===m||"shapeX"===m)f=l.width,b.x1=l.x+f*b.x1/100,b.x2=l.x+f*b.x2/100;if("shape"===m||"shapeY"===m)f=l.height,b.y1=l.y+f*b.y1/100,b.y2=l.y+f*b.y2/100}break;case "radial":"shape"===m&&(b=s.makeParameters(s.defaultRadialGradient,b),b.space=m,b.cx=l.x+l.width/2,b.cy=l.y+l.height/2,b.r=b.r*l.width/200);break;case "pattern":if("shape"===m||"shapeX"===m||"shapeY"===m){b=s.makeParameters(s.defaultPattern,b);b.space=m;if("shape"===m||"shapeX"===m)f=l.width,b.x=l.x+f*b.x/100,b.width=
f*b.width/100;if("shape"===m||"shapeY"===m)f=l.height,b.y=l.y+f*b.y/100,b.height=f*b.height/100}}return b},_pseudoRadialFill:function(b,l,m,f,d){if(!b||"radial"!==b.type||"shape"!==b.space)return b;var k=b.space;b=s.makeParameters(s.defaultRadialGradient,b);b.space=k;if(4>arguments.length)return b.cx=l.x,b.cy=l.y,b.r=b.r*m/100,b;k=5>arguments.length?f:(d+f)/2;return{type:"linear",x1:l.x,y1:l.y,x2:l.x+b.r*m*Math.cos(k)/100,y2:l.y+b.r*m*Math.sin(k)/100,colors:b.colors}}})})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),
function(q,t,r,s,l,b){var p=r("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(b){b=b||{};var f=p.defaultTheme;t.forEach("chart plotarea axis grid series marker indicator".split(" "),function(d){this[d]=q.delegate(f[d],b[d])},this);b.seriesThemes&&b.seriesThemes.length?(this.colors=null,this.seriesThemes=b.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(b.colors||p.defaultColors).slice(0));this.markerThemes=null;b.markerThemes&&b.markerThemes.length&&
(this.markerThemes=b.markerThemes.slice(0));this.markers=b.markers?q.clone(b.markers):q.delegate(p.defaultMarkers);this.noGradConv=b.noGradConv;this.noRadialConv=b.noRadialConv;b.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var b=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,
markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});t.forEach("clone clear next skip addMixin post getTick".split(" "),function(f){this.hasOwnProperty(f)&&(b[f]=this[f])},this);return b},clear:function(){this._current=0},next:function(b,f,d){var k=l.merge,e;if(this.colors){e=q.delegate(this.series);var k=q.delegate(this.marker),n=new s(this.colors[this._current%this.colors.length]),a;e.stroke&&e.stroke.color?(e.stroke=q.delegate(e.stroke),a=new s(e.stroke.color),
e.stroke.color=new s(n),e.stroke.color.a=a.a):e.stroke={color:n};k.stroke&&k.stroke.color?(k.stroke=q.delegate(k.stroke),a=new s(k.stroke.color),k.stroke.color=new s(n),k.stroke.color.a=a.a):k.stroke={color:n};!e.fill||e.fill.type?e.fill=n:(a=new s(e.fill),e.fill=new s(n),e.fill.a=a.a);!k.fill||k.fill.type?k.fill=n:(a=new s(k.fill),k.fill=new s(n),k.fill.a=a.a)}else e=this.seriesThemes?k(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,k=this.markerThemes?k(this.marker,
this.markerThemes[this._current%this.markerThemes.length]):e;e={series:e,marker:k,symbol:k&&k.symbol||this._markers[this._current%this._markers.length]};++this._current;f&&(e=this.addMixin(e,b,f));d&&(e=this.post(e,b));return e},skip:function(){++this._current},addMixin:function(b,f,d,k){if(q.isArray(d))t.forEach(d,function(d){b=this.addMixin(b,f,d)},this);else{var e={};"color"in d&&("line"==f||"area"==f?(q.setObject("series.stroke.color",d.color,e),q.setObject("marker.stroke.color",d.color,e)):q.setObject("series.fill",
d.color,e));t.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(b){var a="marker"+b.charAt(0).toUpperCase()+b.substr(1),c=a in d;b in d&&(q.setObject("series."+b,d[b],e),c||q.setObject("marker."+b,d[b],e));c&&q.setObject("marker."+b,d[a],e)});"marker"in d&&(e.symbol=d.marker,e.symbol=d.marker);b=l.merge(b,e)}k&&(b=this.post(b,f));return b},post:function(b,f){var d=b.series.fill,k;return!this.noGradConv&&this.shapeSpaces[d.space]&&"linear"==d.type&&("bar"==
f?k={x1:d.y1,y1:d.x1,x2:d.y2,y2:d.x2}:this.noRadialConv||"shape"!=d.space||"slice"!=f&&"circle"!=f||(k={type:"radial",cx:0,cy:0,r:100}),k)?l.merge(b,{series:{fill:k}}):b},getTick:function(b,f){var d=this.axis.tick,k=b+"Tick",e=l.merge;d?this.axis[k]&&(d=e(d,this.axis[k])):d=this.axis[k];f&&(d?f[k]&&(d=e(d,f[k])):d=f[k]);return d},inspectObjects:function(b){t.forEach("chart plotarea axis grid series marker indicator".split(" "),function(f){b(this[f])},this);this.seriesThemes&&t.forEach(this.seriesThemes,
b);this.markerThemes&&t.forEach(this.markerThemes,b)},reverseFills:function(){this.inspectObjects(function(m){m&&m.fill&&(m.fill=b.reverse(m.fill))})},addMarker:function(b,f){this.markers[b]=f;this._buildMarkerArray()},setMarkers:function(b){this.markers=b;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var b in this.markers)this._markers.push(this.markers[b])}});q.mixin(p,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",
DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",
fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",
fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}}});return p})},"dojox/lang/utils":function(){define(["..",
"dojo/_base/lang"],function(q,t){var r=t.getObject("lang.utils",!0,q),s={},l=Object.prototype.toString,b=function(b){if(b)switch(l.call(b)){case "[object Array]":return b.slice(0);case "[object Object]":return t.delegate(b)}return b};t.mixin(r,{coerceType:function(b,m){switch(typeof b){case "number":return Number(eval("("+m+")"));case "string":return String(m);case "boolean":return Boolean(eval("("+m+")"))}return eval("("+m+")")},updateWithObject:function(l,m,f){if(!m)return l;for(var d in l)if(d in
m&&!(d in s)){var k=l[d];k&&"object"==typeof k?r.updateWithObject(k,m[d],f):l[d]=f?r.coerceType(k,m[d]):b(m[d])}return l},updateWithPattern:function(l,m,f,d){if(!m||!f)return l;for(var k in f)k in m&&!(k in s)&&(l[k]=d?r.coerceType(f[k],m[k]):b(m[k]));return l},merge:function(b,m){if(m){var f=l.call(b),d=l.call(m),k,e;switch(d){case "[object Array]":if(d==f){f=Array(Math.max(b.length,m.length));k=0;for(d=f.length;k<d;++k)f[k]=r.merge(b[k],m[k]);return f}return m.slice(0);case "[object Object]":if(d==
f&&b){f=t.delegate(b);for(k in m)k in b?(d=b[k],e=m[k],e!==d&&(f[k]=r.merge(d,e))):f[k]=t.clone(m[k]);return f}return t.clone(m)}}return m}});return r})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(q,t,r,s){function l(b,l){if(0>=b)return l[0].color;var m=l.length;if(1<=b)return l[m-1].color;for(var f=0;f<m;++f){var d=l[f];if(d.offset>=b)return f?(m=l[f-1],s.blendColors(new s(m.color),new s(d.color),(b-m.offset)/(d.offset-m.offset))):
d.color}return l[m-1].color}q=q.gradutils={};q.getColor=function(b,p){var m;if(b){switch(b.type){case "linear":m=Math.atan2(b.y2-b.y1,b.x2-b.x1);m=r.rotate(-m);var f=r.project(b.x2-b.x1,b.y2-b.y1),d=r.multiplyPoint(f,p),k=r.multiplyPoint(f,b.x1,b.y1),f=r.multiplyPoint(f,b.x2,b.y2),f=r.multiplyPoint(m,f.x-k.x,f.y-k.y).x;m=r.multiplyPoint(m,d.x-k.x,d.y-k.y).x/f;break;case "radial":m=p.x-b.cx,d=p.y-b.cy,m=Math.sqrt(m*m+d*d)/b.r}return l(m,b.colors)}return new s(b||[0,0,0,0])};q.reverse=function(b){if(b)switch(b.type){case "linear":case "radial":if(b=
t.delegate(b),b.colors){for(var l=b.colors,m=l.length,f=0,d,k=b.colors=Array(l.length);f<m;++f)d=l[f],k[f]={offset:1-d.offset,color:d.color};k.sort(function(b,d){return b.offset-d.offset})}}return b};return q})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(q,t,r){return t("dojox.charting.Series",r,{constructor:function(r,l,b){q.mixin(this,b);"string"!=typeof this.plot&&(this.plot="default");this.update(l)},clear:function(){this.dyn={}},update:function(r){q.isArray(r)?
this.data=r:(this.source=r,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(q,t,r,s,l){var b=q.getObject("dojox.charting.axis2d.common",!0),p=function(b){b.marginLeft="0px";b.marginTop="0px";b.marginRight="0px";b.marginBottom="0px";b.paddingLeft="0px";b.paddingTop="0px";b.paddingRight=
"0px";b.paddingBottom="0px";b.borderLeftWidth="0px";b.borderTopWidth="0px";b.borderRightWidth="0px";b.borderBottomWidth="0px"};return q.mixin(b,{createText:{gfx:function(b,f,d,k,e,l,a,c){return f.createText({x:d,y:k,text:l,align:e}).setFont(a).setFill(c)},html:function(b,f,d,k,e,n,a,c,g){f=t.doc.createElement("div");var q=f.style,u;b.getTextDir&&(f.dir=b.getTextDir(n));p(q);q.font=a;f.innerHTML=String(n).replace(/\s/g,"&nbsp;");q.color=c;q.position="absolute";q.left="-10000px";t.body().appendChild(f);
var z=s.normalizedLength(s.splitFontString(a).size);g||(f.getBoundingClientRect?(u=f.getBoundingClientRect(),u=u.width||u.right-u.left):u=r.getMarginBox(f).w);"rtl"==f.dir&&(d+=g?g:u);t.body().removeChild(f);q.position="relative";if(g)switch(q.width=g+"px",e){case "middle":q.textAlign="center";q.left=d-g/2+"px";break;case "end":q.textAlign="right";q.left=d-g+"px";break;default:q.left=d+"px",q.textAlign="left"}else switch(e){case "middle":q.left=Math.floor(d-u/2)+"px";break;case "end":q.left=Math.floor(d-
u)+"px";break;default:q.left=Math.floor(d)+"px"}q.top=Math.floor(k-z)+"px";q.whiteSpace="nowrap";g=t.doc.createElement("div");q=g.style;p(q);q.width="0px";q.height="0px";g.appendChild(f);b.node.insertBefore(g,b.node.firstChild);l("dojo-bidi")&&b.htmlElementsRegistry.push([g,d,k,e,n,a,c]);return g}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(q){return q})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang",
"dojo/_base/array"],function(q,t,r){var s=t.getObject("lang.functional",!0,q),l={},b=1<"ab".split(/a*/).length?String.prototype.split:function(b){var d=this.split.call(this,b);(b=b.exec(this))&&0==b.index&&d.unshift("");return d},p=function(f){var d=[],k=b.call(f,/\s*->\s*/m);if(1<k.length)for(;k.length;)f=k.pop(),d=k.pop().split(/\s*,\s*|\s+/m),k.length&&k.push("(function("+d.join(", ")+"){ return ("+f+"); })");else if(f.match(/\b_\b/))d=["_"];else{var k=f.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),e=
f.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(k||e)k&&(d.push("$1"),f="$1"+f),e&&(d.push("$2"),f+="$2");else{var k=f.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],m={};r.forEach(k,
function(a){m.hasOwnProperty(a)||(d.push(a),m[a]=1)})}}return{args:d,body:f}},m=function(b){return b.length?function(){var d=b.length-1,k=s.lambda(b[d]).apply(this,arguments);for(--d;0<=d;--d)k=s.lambda(b[d]).call(this,k);return k}:function(b){return b}};t.mixin(s,{rawLambda:function(b){return p(b)},buildLambda:function(b){b=p(b);return"function("+b.args.join(",")+"){return ("+b.body+");}"},lambda:function(b){if("function"==typeof b)return b;if(b instanceof Array)return m(b);if(l.hasOwnProperty(b))return l[b];
var d=p(b);return l[b]=new Function(d.args,"return ("+d.body+");")},clearLambdaCache:function(){l={}}});return s})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(q,t,r,s){var l={};t.mixin(s,{filter:function(b,p,m){"string"==typeof b&&(b=b.split(""));m=m||q.global;p=s.lambda(p);var f=[],d,k,e;if(t.isArray(b))for(k=0,e=b.length;k<e;++k)d=b[k],p.call(m,d,k,b)&&f.push(d);else if("function"==typeof b.hasNext&&"function"==
typeof b.next)for(k=0;b.hasNext();)d=b.next(),p.call(m,d,k++,b)&&f.push(d);else for(k in b)k in l||(d=b[k],p.call(m,d,k,b)&&f.push(d));return f},forEach:function(b,p,m){"string"==typeof b&&(b=b.split(""));m=m||q.global;p=s.lambda(p);var f,d;if(t.isArray(b))for(f=0,d=b.length;f<d;p.call(m,b[f],f,b),++f);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(f=0;b.hasNext();p.call(m,b.next(),f++,b));else for(f in b)f in l||p.call(m,b[f],f,b);return m},map:function(b,p,m){"string"==typeof b&&
(b=b.split(""));m=m||q.global;p=s.lambda(p);var f,d,k;if(t.isArray(b))for(f=Array(d=b.length),k=0;k<d;f[k]=p.call(m,b[k],k,b),++k);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(f=[],k=0;b.hasNext();f.push(p.call(m,b.next(),k++,b)));else for(k in f=[],b)k in l||f.push(p.call(m,b[k],k,b));return f},every:function(b,p,m){"string"==typeof b&&(b=b.split(""));m=m||q.global;p=s.lambda(p);var f,d;if(t.isArray(b))for(f=0,d=b.length;f<d;++f){if(!p.call(m,b[f],f,b))return!1}else if("function"==
typeof b.hasNext&&"function"==typeof b.next)for(f=0;b.hasNext();){if(!p.call(m,b.next(),f++,b))return!1}else for(f in b)if(!(f in l||p.call(m,b[f],f,b)))return!1;return!0},some:function(b,p,m){"string"==typeof b&&(b=b.split(""));m=m||q.global;p=s.lambda(p);var f,d;if(t.isArray(b))for(f=0,d=b.length;f<d;++f){if(p.call(m,b[f],f,b))return!0}else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(f=0;b.hasNext();){if(p.call(m,b.next(),f++,b))return!0}else for(f in b)if(!(f in l)&&p.call(m,
b[f],f,b))return!0;return!1}});return s})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(q,t,r){var s={};t.mixin(r,{keys:function(l){var b=[],p;for(p in l)p in s||b.push(p);return b},values:function(l){var b=[],p;for(p in l)p in s||b.push(l[p]);return b},filterIn:function(l,b,p){p=p||q.global;b=r.lambda(b);var m={},f,d;for(d in l)d in s||(f=l[d],b.call(p,f,d,l)&&(m[d]=f));return m},forIn:function(l,b,p){p=p||q.global;b=r.lambda(b);for(var m in l)m in
s||b.call(p,l[m],m,l);return p},mapIn:function(l,b,p){p=p||q.global;b=r.lambda(b);var m={},f;for(f in l)f in s||(m[f]=b.call(p,l[f],f,l));return m}});return r})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(q,t,r,s){var l={};q.mixin(s,{foldl:function(b,p,m,f){"string"==typeof b&&(b=b.split(""));f=f||r.global;p=s.lambda(p);var d,k;if(q.isArray(b))for(d=0,k=b.length;d<k;m=p.call(f,m,b[d],d,b),++d);else if("function"==typeof b.hasNext&&
"function"==typeof b.next)for(d=0;b.hasNext();m=p.call(f,m,b.next(),d++,b));else for(d in b)d in l||(m=p.call(f,m,b[d],d,b));return m},foldl1:function(b,p,m){"string"==typeof b&&(b=b.split(""));m=m||r.global;p=s.lambda(p);var f,d,k;if(q.isArray(b))for(f=b[0],d=1,k=b.length;d<k;f=p.call(m,f,b[d],d,b),++d);else if("function"==typeof b.hasNext&&"function"==typeof b.next){if(b.hasNext())for(f=b.next(),d=1;b.hasNext();f=p.call(m,f,b.next(),d++,b));}else for(d in k=!0,b)d in l||(k?(f=b[d],k=!1):f=p.call(m,
f,b[d],d,b));return f},foldr:function(b,l,m,f){"string"==typeof b&&(b=b.split(""));f=f||r.global;l=s.lambda(l);for(var d=b.length;0<d;--d,m=l.call(f,m,b[d],d,b));return m},foldr1:function(b,l,m){"string"==typeof b&&(b=b.split(""));m=m||r.global;l=s.lambda(l);for(var f=b.length,d=b[f-1],f=f-1;0<f;--f,d=l.call(m,d,b[f],f,b));return d},reduce:function(b,l,m){return 3>arguments.length?s.foldl1(b,l):s.foldl(b,l,m)},reduceRight:function(b,l,m){return 3>arguments.length?s.foldr1(b,l):s.foldr(b,l,m)},unfold:function(b,
l,m,f,d){d=d||r.global;l=s.lambda(l);m=s.lambda(m);b=s.lambda(b);for(var k=[];!b.call(d,f);k.push(l.call(d,f)),f=m.call(d,f));return k}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(q,t,r){q.mixin(r,{filterRev:function(q,l,b){"string"==typeof q&&(q=q.split(""));b=b||t.global;l=r.lambda(l);for(var p=[],m,f=q.length-1;0<=f;--f)m=q[f],l.call(b,m,f,q)&&p.push(m);return p},forEachRev:function(q,l,b){"string"==typeof q&&(q=q.split(""));
b=b||t.global;l=r.lambda(l);for(var p=q.length-1;0<=p;l.call(b,q[p],p,q),--p);},mapRev:function(q,l,b){"string"==typeof q&&(q=q.split(""));b=b||t.global;l=r.lambda(l);for(var p=q.length,m=Array(p),p=p-1,f=0;0<=p;m[f++]=l.call(b,q[p],p,q),--p);return m},everyRev:function(q,l,b){"string"==typeof q&&(q=q.split(""));b=b||t.global;l=r.lambda(l);for(var p=q.length-1;0<=p;--p)if(!l.call(b,q[p],p,q))return!1;return!0},someRev:function(q,l,b){"string"==typeof q&&(q=q.split(""));b=b||t.global;l=r.lambda(l);
for(var p=q.length-1;0<=p;--p)if(l.call(b,q[p],p,q))return!0;return!1}});return r})},"dojox/charting/widget/Legend":function(){define("dojo/_base/declare dijit/_WidgetBase dojox/gfx dojo/_base/array dojo/has dojo/has!dojo-bidi?../bidi/widget/Legend dojox/lang/functional dojo/dom dojo/dom-construct dojo/dom-class dijit/registry".split(" "),function(q,t,r,s,l,b,p,m,f,d,k){t=q(l("dojo-bidi")?"dojox.charting.widget.NonBidiLegend":"dojox.charting.widget.Legend",t,{chartRef:"",horizontal:!0,swatchSize:18,
legendBody:null,postCreate:function(){!this.chart&&this.chartRef&&(this.chart=k.byId(this.chartRef)||k.byNode(m.byId(this.chartRef)));this.chart=this.chart.chart||this.chart;this.refresh()},buildRendering:function(){this.domNode=f.create("table",{role:"group","aria-label":"chart legend","class":"dojoxLegendNode"});this.legendBody=f.create("tbody",null,this.domNode);this.inherited(arguments)},destroy:function(){this._surfaces&&s.forEach(this._surfaces,function(b){b.destroy()});this.inherited(arguments)},
refresh:function(){this._surfaces&&s.forEach(this._surfaces,function(a){a.destroy()});for(this._surfaces=[];this.legendBody.lastChild;)f.destroy(this.legendBody.lastChild);this.horizontal&&(d.add(this.domNode,"dojoxLegendHorizontal"),this._tr=f.create("tr",null,this.legendBody),this._inrow=0);var b=this.series||this.chart.series;if(0!=b.length)if("dojox.charting.plot2d.Pie"==b[0].chart.stack[0].declaredClass){var k=b[0].chart.stack[0];"number"==typeof k.run.data[0]?(b=p.map(k.run.data,"Math.max(x, 0)"),
b=p.map(b,"/this",p.foldl(b,"+",0)),s.forEach(b,function(a,b){this._addLabel(k.dyn[b],k._getLabel(100*a)+"%")},this)):s.forEach(k.run.data,function(a,b){this._addLabel(k.dyn[b],a.legend||a.text||a.y)},this)}else s.forEach(b,function(a){this._addLabel(a.dyn,a.legend||a.name)},this)},_addLabel:function(b,k){var a=f.create("td"),c=f.create("div",null,a),g=f.create("label",null,a),m=f.create("div",{style:{width:this.swatchSize+"px",height:this.swatchSize+"px","float":"left"}},c);d.add(c,"dojoxLegendIcon dijitInline");
d.add(g,"dojoxLegendText");this._tr?(this._tr.appendChild(a),++this._inrow===this.horizontal&&(this._tr=f.create("tr",null,this.legendBody),this._inrow=0)):f.create("tr",null,this.legendBody).appendChild(a);this._makeIcon(m,b);g.innerHTML=String(k);l("dojo-bidi")&&(g.dir=this.getTextDir(k,g.dir))},_makeIcon:function(b,d){var a=this.swatchSize,c=this.swatchSize,g=r.createSurface(b,c,a);this._surfaces.push(g);if(d.fill)g.createRect({x:2,y:2,width:c-4,height:a-4}).setFill(d.fill).setStroke(d.stroke);
else if(d.stroke||d.marker){var f={x1:0,y1:a/2,x2:c,y2:a/2};d.stroke&&g.createLine(f).setStroke(d.stroke);d.marker&&g.createPath({path:"M"+c/2+" "+a/2+" "+d.marker}).setFill(d.markerFill).setStroke(d.markerStroke)}else g.createRect({x:2,y:2,width:c-4,height:a-4}).setStroke("black"),g.createLine({x1:2,y1:2,x2:c-2,y2:a-2}).setStroke("black"),g.createLine({x1:2,y1:a-2,x2:c-2,y2:2}).setStroke("black")}});return l("dojo-bidi")?q("dojox.charting.widget.Legend",[t,b]):t})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n){p=s(r("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",p,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,
trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,b){this.opt=q.clone(this.defaultParams);k.updateWithObject(this.opt,b);k.updateWithPattern(this.opt,b,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0},setWindow:function(a,b){a!=this.scale&&(this._invalidMaxLabelSize=
!0);return this.inherited(arguments)},_groupLabelWidth:function(a,b,g){if(!a.length)return 0;50<a.length&&(a.length=50);q.isObject(a[0])&&(a=e.map(a,function(a){return a.text}));g&&(a=e.map(a,function(a){return 0==q.trim(a).length?"":a.substring(0,g)+this.trailingSymbol},this));a=a.join("<br>");return d._base._getTextBox(a,{font:b}).w||0},_getMaxLabelSize:function(a,b,d,e,f,k){if(null==this._maxLabelSize&&6==arguments.length){var l=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var n=
q.clone(l);delete n.to;delete n.from;var p=m.buildScaler(a,b,d,n,l.to-l.from);p.minMinorStep=0;this._majorStart=p.major.start;l=m.buildTicks(p,l);if(k&&l){var r=p=0,s=function(a){a.label&&this.push(a.label)},G=[];this.opt.majorLabels&&(t.forEach(l.major,s,G),p=this._groupLabelWidth(G,f,n.maxLabelCharCount),n.maxLabelSize&&(p=Math.min(n.maxLabelSize,p)));G=[];this.opt.dropLabels&&this.opt.minorLabels&&(t.forEach(l.minor,s,G),r=this._groupLabelWidth(G,f,n.maxLabelCharCount),n.maxLabelSize&&(r=Math.min(n.maxLabelSize,
r)));this._maxLabelSize={majLabelW:p,minLabelW:r,majLabelH:k,minLabelH:k}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(a,b,g){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||g!=this._oldSpan)&&Infinity!=a&&-Infinity!=b){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=g;var e=this.opt,f=this.chart.theme.axis,k=e.rotation%360,l=this.chart.theme.axis.tick.labelGap,n=e.font||
f.majorTick&&f.majorTick.font||f.tick&&f.tick.font,f=n?d.normalizedLength(d.splitFontString(n).size):0,n=this._getMaxLabelSize(a,b,g,k,n,f);"number"!=typeof l&&(l=4);if(n&&e.dropLabels){var e=Math.abs(Math.cos(k*Math.PI/180)),p=Math.abs(Math.sin(k*Math.PI/180));0>k&&(k+=360);switch(k){case 0:case 180:this.vertical?k=f:(k=n.majLabelW,f=n.minLabelW);break;case 90:case 270:this.vertical?(k=n.majLabelW,f=n.minLabelW):k=f;break;default:var k=this.vertical?Math.min(n.majLabelW,f/e):Math.min(n.majLabelW,
f/p),q=Math.sqrt(n.minLabelW*n.minLabelW+f*f),f=Math.min(q,this.vertical?f*e+n.minLabelW*p:n.minLabelW*e+f*p)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(k,f)+l;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((k+l)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=m.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var a={l:0,r:0,t:0,b:0};if(!this.scaler)return a;var b=this.opt,
g=this.chart.theme.axis,e=this.chart.theme.axis.tick.labelGap,f=b.titleFont||g.title&&g.title.font,g=0==b.titleGap?0:b.titleGap||g.title&&g.title.gap,k=this.chart.theme.getTick("major",b),m=this.chart.theme.getTick("minor",b),f=f?d.normalizedLength(d.splitFontString(f).size):0,l=b.rotation%360,n=b.leftBottom,p=Math.abs(Math.cos(l*Math.PI/180)),q=Math.abs(Math.sin(l*Math.PI/180));this.trailingSymbol=void 0===b.trailingSymbol||null===b.trailingSymbol?this.trailingSymbol:b.trailingSymbol;"number"!=typeof e&&
(e=4);0>l&&(l+=360);var r=this._getMaxLabelSize();if(r){var s=Math.ceil(Math.max(r.majLabelW,r.minLabelW))+1,t=Math.ceil(Math.max(r.majLabelH,r.minLabelH))+1;if(this.vertical)switch(r=n?"l":"r",l){case 0:case 180:a[r]=s;a.t=a.b=t/2;break;case 90:case 270:a[r]=t;a.t=a.b=s/2;break;default:45>=l||180<l&&225>=l?(a[r]=t*q/2+s*p,a[n?"t":"b"]=t*p/2+s*q,a[n?"b":"t"]=t*p/2):315<l||180>l&&135<l?(a[r]=t*q/2+s*p,a[n?"b":"t"]=t*p/2+s*q,a[n?"t":"b"]=t*p/2):90>l||180<l&&270>l?(a[r]=t*q+s*p,a[n?"t":"b"]=t*p+s*q):
(a[r]=t*q+s*p,a[n?"b":"t"]=t*p+s*q)}else switch(r=n?"b":"t",l){case 0:case 180:a[r]=t;a.l=a.r=s/2;break;case 90:case 270:a[r]=s;a.l=a.r=t/2;break;default:45<=l&&90>=l||225<=l&&270>=l?(a[r]=t*p/2+s*q,a[n?"r":"l"]=t*q/2+s*p,a[n?"l":"r"]=t*q/2):90<=l&&135>=l||270<=l&&315>=l?(a[r]=t*p/2+s*q,a[n?"l":"r"]=t*q/2+s*p,a[n?"r":"l"]=t*q/2):45>l||180<l&&225>l?(a[r]=t*p+s*q,a[n?"r":"l"]=t*q+s*p):(a[r]=t*p+s*q,a[n?"l":"r"]=t*q+s*p)}a[r]+=e+Math.max(0<k.length?k.length:0,0<m.length?m.length:0)+(b.title?f+g:0)}return a},
cleanGroup:function(a){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(a,b,d,e,k,m,l,n,p){if(!this.opt.enableCache||"html"==a)return f.createText[a](this.chart,b,d,e,k,m,l,n,p);0<this._textFreePool.length?(a=this._textFreePool.pop(),a.setShape({x:d,y:e,text:m,align:k}),b.add(a)):a=f.createText[a](this.chart,
b,d,e,k,m,l,n);this._textUsePool.push(a);return a},createLine:function(a,b){var d;this.opt.enableCache&&0<this._lineFreePool.length?(d=this._lineFreePool.pop(),d.setShape(b),a.add(d)):d=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(d);return d},render:function(a,b){var g,e,k,l,n,p,q,s,B,G,J,M,F,H,S=this._isRtl();if(!this.dirty||!this.scaler)return this;var K=this.opt;B=this.chart.theme.axis;var x=K.leftBottom,L=K.rotation%360,I=0,T,N,I=this.chart.theme.axis.tick.labelGap,W=K.font||
B.majorTick&&B.majorTick.font||B.tick&&B.tick.font,Z=K.titleFont||B.title&&B.title.font,V=K.fontColor||B.majorTick&&B.majorTick.fontColor||B.tick&&B.tick.fontColor||"black",Q=K.titleFontColor||B.title&&B.title.fontColor||"black";n=0==K.titleGap?0:K.titleGap||B.title&&B.title.gap||15;var R=K.titleOrientation||B.title&&B.title.orientation||"axis",O=this.chart.theme.getTick("major",K),ca=this.chart.theme.getTick("minor",K),aa=this.chart.theme.getTick("micro",K),ma="stroke"in K?K.stroke:B.stroke,da=W?
d.normalizedLength(d.splitFontString(W).size):0;p=Math.abs(Math.cos(L*Math.PI/180));T=Math.abs(Math.sin(L*Math.PI/180));var qa=Z?d.normalizedLength(d.splitFontString(Z).size):0;"number"!=typeof I&&(I=4);0>L&&(L+=360);var la=this._getMaxLabelSize(),la=la&&la.majLabelW;if(this.vertical){F=a.height-b.b;H=void 0;J=b.t;M=void 0;B=(a.height-b.b+b.t)/2;G=void 0;T=da*T+(la||0)*p+I+Math.max(0<O.length?O.length:0,0<ca.length?ca.length:0)+qa+n;q=0;s=-1;e=g=0;n=1;p=0;k=I;l=0;switch(L){case 0:N="end";e=0.4*da;
break;case 90:N="middle";g=-da;break;case 180:N="start";e=0.4*-da;break;case 270:N="middle";break;default:45>L?(N="end",e=0.4*da):90>L?(N="end",e=0.4*da):135>L?N="start":225>L?(N="start",e=0.4*-da):270>L?(N="start",g=x?0:0.4*da):315>L?(N="end",g=x?0:0.4*da):(N="end",e=0.4*da)}if(x)H=M=b.l,I=R&&"away"==R?90:270,G=b.l-T+(270==I?qa:0),n=-1,k=-k;else switch(H=M=a.width-b.r,I=R&&"axis"==R?90:270,G=a.width-b.r+T-(270==I?0:qa),N){case "start":N="end";break;case "end":N="start";break;case "middle":g+=da}}else{H=
b.l;F=void 0;M=a.width-b.r;J=void 0;G=(a.width-b.r+b.l)/2;B=void 0;T=da*p+(la||0)*T+I+Math.max(0<O.length?O.length:0,0<ca.length?ca.length:0)+qa+n;q=S?-1:1;n=e=g=s=0;p=1;k=0;l=I;switch(L){case 0:N="middle";e=da;break;case 90:N="start";g=0.4*-da;break;case 180:N="middle";break;case 270:N="end";g=0.4*da;break;default:45>L?(N="start",e=x?da:0):135>L?(N="start",g=0.4*-da):180>L?(N="start",e=x?0:-da):225>L?(N="end",e=x?0:-da):315>L?(N="end",e=x?0.4*da:0):(N="end",e=x?da:0)}if(x)F=J=a.height-b.b,I=R&&"axis"==
R?180:0,B=a.height-b.b+T-(I?qa:0);else switch(F=J=b.t,I=R&&"away"==R?180:0,B=b.t-T+(I?0:qa),p=-1,l=-l,N){case "start":N="end";break;case "end":N="start";break;case "middle":e-=da}}this.cleanGroup();var ia=this.group,x=this.scaler,R=this.ticks,ka=m.getTransformerFromModel(this.scaler),Aa=K.title&&I||L||!this.opt.htmlLabels||r("ie")||r("opera")?"gfx":"html",P=n*O.length,na=p*O.length,Va=this._skipInterval;ia.createLine({x1:H,y1:F,x2:M,y2:J}).setStroke(ma);K.title&&(Z=f.createText[Aa](this.chart,ia,
G,B,"middle",K.title,Z,Q),"html"==Aa?this.htmlElements.push(Z):Z.setTransform(d.matrix.rotategAt(I,G,B)));if(null==R)return this.dirty=!1,this;var La=0<R.major.length?(R.major[0].value-this._majorStart)/x.major.tick:0,Fa=this.opt.majorLabels;t.forEach(R.major,function(a,b){var c=ka(a.value),f=(S?M:H)+q*c,m=F+s*c;b+=La;this.createLine(ia,{x1:f,y1:m,x2:f+P,y2:m+na}).setStroke(O);if(a.label&&(!Va||0==(b-(1+Va))%(1+Va))){var n=K.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,W,K.maxLabelCharCount):
{text:a.label,truncated:!1},n=K.maxLabelSize?this.getTextWithLimitLength(n.text,W,K.maxLabelSize,n.truncated):n,c=this.createText(Aa,ia,f+(0<O.length?P:0)+k+(L?0:g),m+(0<O.length?na:0)+l+(L?0:e),N,n.text,W,V);n.truncated&&this.chart.formatTruncatedLabel(c,a.label,Aa);n.truncated&&this.labelTooltip(c,this.chart,a.label,n.text,W,Aa);"html"==Aa?this.htmlElements.push(c):L&&c.setTransform([{dx:g,dy:e},d.matrix.rotategAt(L,f+(0<O.length?P:0)+k,m+(0<O.length?na:0)+l)])}},this);P=n*ca.length;na=p*ca.length;
Fa=this.opt.minorLabels&&x.minMinorStep<=x.minor.tick*x.bounds.scale;t.forEach(R.minor,function(a){var b=ka(a.value),c=(S?M:H)+q*b,f=F+s*b;this.createLine(ia,{x1:c,y1:f,x2:c+P,y2:f+na}).setStroke(ca);if(Fa&&a.label){var m=K.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,W,K.maxLabelCharCount):{text:a.label,truncated:!1},m=K.maxLabelSize?this.getTextWithLimitLength(m.text,W,K.maxLabelSize,m.truncated):m,b=this.createText(Aa,ia,c+(0<ca.length?P:0)+k+(L?0:g),f+(0<ca.length?na:0)+l+(L?0:e),
N,m.text,W,V);m.truncated&&this.chart.formatTruncatedLabel(b,a.label,Aa);m.truncated&&this.labelTooltip(b,this.chart,a.label,m.text,W,Aa);"html"==Aa?this.htmlElements.push(b):L&&b.setTransform([{dx:g,dy:e},d.matrix.rotategAt(L,c+(0<ca.length?P:0)+k,f+(0<ca.length?na:0)+l)])}},this);P=n*aa.length;na=p*aa.length;t.forEach(R.micro,function(a){var b=ka(a.value);a=H+q*b;b=F+s*b;this.createLine(ia,{x1:a,y1:b,x2:a+P,y2:b+na}).setStroke(aa)},this);this.dirty=!1;return this},labelTooltip:function(a,c,g,e,
f,k){var m=["dijit/Tooltip"],n={type:"rect"},p=["above","below"];e=d._base._getTextBox(e,{font:f}).w||0;f=f?d.normalizedLength(d.splitFontString(f).size):0;"html"==k?(q.mixin(n,b.position(a.firstChild,!0)),n.width=Math.ceil(e),n.height=Math.ceil(f),this._events.push({shape:dojo,handle:l.connect(a.firstChild,"onmouseover",this,function(a){require(m,function(a){a.show(g,n,p)})})}),this._events.push({shape:dojo,handle:l.connect(a.firstChild,"onmouseout",this,function(a){require(m,function(a){a.hide(n)})})})):
(k=a.getShape(),c=c.getCoords(),n=q.mixin(n,{x:k.x-e/2,y:k.y}),n.x+=c.x,n.y+=c.y,n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=Math.ceil(e),n.height=Math.ceil(f),this._events.push({shape:a,handle:a.connect("onmouseenter",this,function(a){require(m,function(a){a.show(g,n,p)})})}),this._events.push({shape:a,handle:a.connect("onmouseleave",this,function(a){require(m,function(a){a.hide(n)})})}))},_isRtl:function(){return!1}});return r("dojo-bidi")?s("dojox.charting.axis2d.Default",[p,n]):p})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang",
"dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(q,t,r,s,l){return t("dojox.charting.axis2d.Invisible",r,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(b,p){this.opt=q.clone(this.defaultParams);l.updateWithObject(this.opt,p);l.updateWithPattern(this.opt,p,this.optionalParams)},dependOnData:function(){return!("min"in
this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(b,l){this.scale=b;this.offset=l;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(b,l,m){if(this.initialized())return this;var f=this.opt;this.labels=f.labels;this.scaler=s.buildScaler(b,
l,m,f);var d=this.scaler.bounds;"scale"in this&&(f.from=d.lower+this.offset,f.to=(d.upper-d.lower)/this.scale+f.from,!isFinite(f.from)||isNaN(f.from)||!isFinite(f.to)||isNaN(f.to)||f.to-f.from>=d.upper-d.lower?(delete f.from,delete f.to,delete this.scale,delete this.offset):(f.from<d.lower?(f.to+=d.lower-f.from,f.from=d.lower):f.to>d.upper&&(f.from+=d.upper-f.to,f.to=d.upper),this.offset=f.from-d.lower),this.scaler=s.buildScaler(b,l,m,f),1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset));
return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(q,t){return q("dojox.charting.axis2d.Base",t,{constructor:function(q,s){this.vertical=s&&s.vertical;this.opt={};this.opt.min=s&&s.min;this.opt.max=s&&s.max},clear:function(){return this},initialized:function(){return!1},calculate:function(q,s,l){return this},getScaler:function(){return null},getTicks:function(){return null},
getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(q,s){this.dirty=!1;return this}})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(q,t){function r(b,m){b=b.toLowerCase();for(var f=m.length-1;0<=f;--f)if(b===m[f])return!0;return!1}var s=q.getObject("dojox.charting.scaler.linear",!0),l=t.getNumericLabel,b=function(b,m,f,d,k,e,l){f=q.delegate(f);d||("major"==f.fixUpper&&(f.fixUpper="minor"),"major"==f.fixLower&&(f.fixLower="minor"));k||("minor"==
f.fixUpper&&(f.fixUpper="micro"),"minor"==f.fixLower&&(f.fixLower="micro"));e||("micro"==f.fixUpper&&(f.fixUpper="none"),"micro"==f.fixLower&&(f.fixLower="none"));var a=r(f.fixLower,["major"])?Math.floor(f.min/d)*d:r(f.fixLower,["minor"])?Math.floor(f.min/k)*k:r(f.fixLower,["micro"])?Math.floor(f.min/e)*e:f.min,c=r(f.fixUpper,["major"])?Math.ceil(f.max/d)*d:r(f.fixUpper,["minor"])?Math.ceil(f.max/k)*k:r(f.fixUpper,["micro"])?Math.ceil(f.max/e)*e:f.max;f.useMin&&(b=a);f.useMax&&(m=c);var g=!d||f.useMin&&
r(f.fixLower,["major"])?b:Math.ceil(b/d)*d,v=!k||f.useMin&&r(f.fixLower,["major","minor"])?b:Math.ceil(b/k)*k,u=!e||f.useMin&&r(f.fixLower,["major","minor","micro"])?b:Math.ceil(b/e)*e,t=d?(f.useMax&&r(f.fixUpper,["major"])?Math.round((m-g)/d):Math.floor((m-g)/d))+1:0,A=k?(f.useMax&&r(f.fixUpper,["major","minor"])?Math.round((m-v)/k):Math.floor((m-v)/k))+1:0;f=e?(f.useMax&&r(f.fixUpper,["major","minor","micro"])?Math.round((m-u)/e):Math.floor((m-u)/e))+1:0;var y=k?Math.round(d/k):0,C=e?Math.round(k/
e):0,D=d?Math.floor(Math.log(d)/Math.LN10):0,B=k?Math.floor(Math.log(k)/Math.LN10):0,G=l/(m-b);isFinite(G)||(G=1);return{bounds:{lower:a,upper:c,from:b,to:m,scale:G,span:l},major:{tick:d,start:g,count:t,prec:D},minor:{tick:k,start:v,count:A,prec:B},micro:{tick:e,start:u,count:f,prec:0},minorPerMajor:y,microPerMinor:C,scaler:s}};return q.mixin(s,{buildScaler:function(l,m,f,d,k,e){var n={fixUpper:"none",fixLower:"none",natural:!1};d&&("fixUpper"in d&&(n.fixUpper=String(d.fixUpper)),"fixLower"in d&&
(n.fixLower=String(d.fixLower)),"natural"in d&&(n.natural=Boolean(d.natural)));e=!e||3>e?3:e;"min"in d&&(l=d.min);"max"in d&&(m=d.max);d.includeZero&&(0<l&&(l=0),0>m&&(m=0));n.min=l;n.useMin=!0;n.max=m;n.useMax=!0;"from"in d&&(l=d.from,n.useMin=!1);"to"in d&&(m=d.to,n.useMax=!1);if(m<=l)return b(l,m,n,0,0,0,f);k||(k=m-l);k=Math.floor(Math.log(k)/Math.LN10);k=d&&"majorTickStep"in d?d.majorTickStep:Math.pow(10,k);var a=0,c=0,g;if(d&&"minorTickStep"in d)a=d.minorTickStep;else{do{a=k/10;if(!n.natural||
0.9<a)if(g=b(l,m,n,k,a,0,f),g.bounds.scale*g.minor.tick>e)break;a=k/5;if(!n.natural||0.9<a)if(g=b(l,m,n,k,a,0,f),g.bounds.scale*g.minor.tick>e)break;a=k/2;if(!n.natural||0.9<a)if(g=b(l,m,n,k,a,0,f),g.bounds.scale*g.minor.tick>e)break;return b(l,m,n,k,0,0,f)}while(0)}if(d&&"microTickStep"in d)c=d.microTickStep,g=b(l,m,n,k,a,c,f);else{do{c=a/10;if(!n.natural||0.9<c)if(g=b(l,m,n,k,a,c,f),3<g.bounds.scale*g.micro.tick)break;c=a/5;if(!n.natural||0.9<c)if(g=b(l,m,n,k,a,c,f),3<g.bounds.scale*g.micro.tick)break;
c=a/2;if(!n.natural||0.9<c)if(g=b(l,m,n,k,a,c,f),3<g.bounds.scale*g.micro.tick)break;c=0}while(0)}return c?g:b(l,m,n,k,a,0,f)},buildTicks:function(b,m){var f,d,k,e=b.major.start,n=b.minor.start,a=b.micro.start;if(m.microTicks&&b.micro.tick)f=b.micro.tick,d=a;else if(m.minorTicks&&b.minor.tick)f=b.minor.tick,d=n;else if(b.major.tick)f=b.major.tick,d=e;else return null;var c=1/b.bounds.scale;if(b.bounds.to<=b.bounds.from||isNaN(c)||!isFinite(c)||0>=f||isNaN(f)||!isFinite(f))return null;for(var g=[],
q=[],u=[];d<=b.bounds.to+c;)Math.abs(e-d)<f/2?(k={value:e},m.majorLabels&&(k.label=l(e,b.major.prec,m)),g.push(k),e+=b.major.tick,n+=b.minor.tick):Math.abs(n-d)<f/2?(m.minorTicks&&(k={value:n},m.minorLabels&&b.minMinorStep<=b.minor.tick*b.bounds.scale&&(k.label=l(n,b.minor.prec,m)),q.push(k)),n+=b.minor.tick):m.microTicks&&u.push({value:a}),a+=b.micro.tick,d+=f;return{major:g,minor:q,micro:u}},getTransformerFromModel:function(b){var m=b.bounds.from,f=b.bounds.scale;return function(b){return(b-m)*
f}},getTransformerFromPlot:function(b){var m=b.bounds.from,f=b.bounds.scale;return function(b){return b/f+m}}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(q){var t=function(l,b){return Math.abs(l-b)<=1E-6*(Math.abs(l)+Math.abs(b))},r=q.getObject("dojox.charting.scaler.common",!0),s={};return q.mixin(r,{doIfLoaded:function(l,b,p){if(void 0==s[l])try{s[l]=require(l)}catch(m){s[l]=null}return s[l]?b(s[l]):p()},getNumericLabel:function(l,b,p){var m="";r.doIfLoaded("dojo/number",
function(d){m=(p.fixed?d.format(l,{places:0>b?-b:0}):d.format(l))||""},function(){m=p.fixed?l.toFixed(0>b?-b:0):l.toString()});if(p.labelFunc){var f=p.labelFunc(m,l,b);if(f)return f}if(p.labels){for(var f=p.labels,d=0,k=f.length;d<k;){var e=Math.floor((d+k)/2);f[e].value<l?d=e+1:k=e}if(d<f.length&&t(f[d].value,l))return f[d].text;--d;if(0<=d&&d<f.length&&t(f[d].value,l))return f[d].text;d+=2;if(d<f.length&&t(f[d].value,l))return f[d].text}return m}})})},"dojox/charting/plot2d/Lines":function(){define(["dojo/_base/declare",
"./Default"],function(q,t){return q("dojox.charting.plot2d.Lines",t,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/Default":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(q,t,r,s,l,b,p,m,f,d,k){var e=f.lambda("item.purgeGroup()");return t("dojox.charting.plot2d.Default",[l,b],{defaultParams:{lines:!0,
areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(b,a){this.opt=q.clone(q.mixin(this.opt,this.defaultParams));d.updateWithObject(this.opt,a);d.updateWithPattern(this.opt,a,this.optionalParams);this.animate=this.opt.animate},createPath:function(b,a,c){var d;
this.opt.enableCache&&0<b._pathFreePool.length?(d=b._pathFreePool.pop(),d.setShape(c),a.add(d)):d=a.createPath(c);this.opt.enableCache&&b._pathUsePool.push(d);return d},buildSegments:function(b,a){for(var c=this.series[b],d=a?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,e=a?Math.min(c.data.length,Math.ceil(this._hScaler.bounds.to)):c.data.length,f=null,k=[];d<e;d++)if(null!=c.data[d]&&(a||null!=c.data[d].y))f||(f=[],k.push({index:d,rseg:f})),f.push(a&&c.data[d].hasOwnProperty("y")?c.data[d].y:
c.data[d]);else if(!this.opt.interpolate||a)f=null;return k},render:function(b,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(b,a);this.resetEvents();this.dirty=this.isDirty();var c;this.dirty&&(r.forEach(this.series,e),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),c=this.getGroup(),m.forEachRev(this.series,function(a){a.cleanGroup(c)}));for(var d=this.chart.theme,f,l,t=this.events(),A=this.series.length-1;0<=A;--A){var y=this.series[A];if(this.dirty||y.dirty)if(y.cleanGroup(),
this.opt.enableCache&&(y._pathFreePool=(y._pathFreePool?y._pathFreePool:[]).concat(y._pathUsePool?y._pathUsePool:[]),y._pathUsePool=[]),y.data.length){var C=d.next(this.opt.areas?"area":"line",[this.opt,y],!0),D,B=this._hScaler.scaler.getTransformerFromModel(this._hScaler),G=this._vScaler.scaler.getTransformerFromModel(this._vScaler),J=this._eventSeries[y.name]=Array(y.data.length);c=y.group;for(var M=r.some(y.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),F=this.buildSegments(A,
M),H=0;H<F.length;H++){var S=F[H];D=M?r.map(S.rseg,function(c,d){return{x:B(d+S.index+1)+a.l,y:b.height-a.b-G(c),data:c}},this):r.map(S.rseg,function(c){return{x:B(c.x)+a.l,y:b.height-a.b-G(c.y),data:c}},this);if(M&&this.opt.interpolate)for(;H<F.length;)H++,(S=F[H])&&(D=D.concat(r.map(S.rseg,function(c,d){return{x:B(d+S.index+1)+a.l,y:b.height-a.b-G(c),data:c}},this)));var K=this.opt.tension?p.curve(D,this.opt.tension):"";if(this.opt.areas&&1<D.length){var x=this._plotFill(C.series.fill,b,a),L=q.clone(D);
this.opt.tension?y.dyn.fill=c.createPath(K+" "+("L"+L[L.length-1].x+","+(b.height-a.b)+" L"+L[0].x+","+(b.height-a.b)+" L"+L[0].x+","+L[0].y)).setFill(x).getFill():(L.push({x:D[D.length-1].x,y:b.height-a.b}),L.push({x:D[0].x,y:b.height-a.b}),L.push(D[0]),y.dyn.fill=c.createPolyline(L).setFill(x).getFill())}if(this.opt.lines||this.opt.markers)f=C.series.stroke,C.series.outline&&(l=y.dyn.outline=p.makeStroke(C.series.outline),l.width=2*l.width+f.width);this.opt.markers&&(y.dyn.marker=C.symbol);var I=
null,T=null,N=null;if(f&&C.series.shadow&&1<D.length){var W=C.series.shadow,x=r.map(D,function(a){return{x:a.x+W.dx,y:a.y+W.dy}});this.opt.lines&&(y.dyn.shadow=this.opt.tension?c.createPath(p.curve(x,this.opt.tension)).setStroke(W).getStroke():c.createPolyline(x).setStroke(W).getStroke());this.opt.markers&&C.marker.shadow&&(W=C.marker.shadow,N=r.map(x,function(a){return this.createPath(y,c,"M"+a.x+" "+a.y+" "+C.symbol).setStroke(W).setFill(W.color)},this))}if(this.opt.lines&&1<D.length){var Z;l&&
(y.dyn.outline=this.opt.tension?c.createPath(K).setStroke(l).getStroke():c.createPolyline(D).setStroke(l).getStroke());y.dyn.stroke=this.opt.tension?(Z=c.createPath(K)).setStroke(f).getStroke():(Z=c.createPolyline(D)).setStroke(f).getStroke();Z.setFilter&&C.series.filter&&Z.setFilter(C.series.filter)}K=null;if(this.opt.markers){var V=C,I=Array(D.length),T=Array(D.length);l=null;V.marker.outline&&(l=p.makeStroke(V.marker.outline),l.width=2*l.width+(V.marker.stroke?V.marker.stroke.width:0));r.forEach(D,
function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var e="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&e.push(this.opt.styleFunc(a.data));V=d.addMixin(C,"marker",e,!0)}else V=d.post(C,"marker");e="M"+a.x+" "+a.y+" "+V.symbol;l&&(T[b]=this.createPath(y,c,e).setStroke(l));I[b]=this.createPath(y,c,e).setStroke(V.marker.stroke).setFill(V.marker.fill)},this);y.dyn.markerFill=V.marker.fill;y.dyn.markerStroke=V.marker.stroke;!K&&this.opt.labels&&(K=I[0].getBoundingBox());t?r.forEach(I,
function(a,b){var c={element:"marker",index:b+S.index,run:y,shape:a,outline:T[b]||null,shadow:N&&N[b]||null,cx:D[b].x,cy:D[b].y};M?(c.x=b+S.index+1,c.y=y.data[b+S.index]):(c.x=S.rseg[b].x,c.y=y.data[b+S.index].y);this._connectEvents(c);J[b+S.index]=c},this):delete this._eventSeries[y.name]}if(this.opt.labels){var Q=K?K.width:2,R=K?K.height:2;r.forEach(D,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var e="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&e.push(this.opt.styleFunc(a.data));
V=d.addMixin(C,"marker",e,!0)}else V=d.post(C,"marker");this.createLabel(c,S.rseg[b],{x:a.x-Q/2,y:a.y-R/2,width:Q,height:R},V)},this)}}y.dirty=!1}else y.dirty=!1,d.skip();else d.skip(),this._reconnectEvents(y.name)}s("dojo-bidi")&&this._checkOrientation(this.group,b,a);this.animate&&(f=this.getGroup(),k.animateTransform(q.delegate({shape:f,duration:1200,transform:[{name:"translate",start:[0,b.height-a.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=
!1;return this}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/has ./Base ../scaler/primitive dojox/gfx dojox/gfx/fx dojox/lang/utils".split(" "),function(q,t,r,s,l,b,p,m,f){return t("dojox.charting.plot2d.CartesianBase",l,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0,labelFunc:null},constructor:function(b,k){this.axes=["hAxis","vAxis"];this.zoom=
null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=k&&k.hAxis||"x";this.vAxis=k&&k.vAxis||"y";this.series=[];this.opt=q.clone(this.baseParams);f.updateWithObject(this.opt,k)},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(b,f){this.inherited(arguments);if(!f&&this.chart._nativeClip){var e=this.chart.offsets,m=this.chart.dim,a=Math.max(0,m.width-e.l-e.r),m=Math.max(0,m.height-e.t-e.b);this.group.setClip({x:e.l,
y:e.t,width:a,height:m});this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||this.group},setAxis:function(b){b&&(this[b.vertical?"_vAxis":"_hAxis"]=b);return this},toPage:function(b){var f=this._hAxis,e=this._vAxis,m=f.getScaler(),a=e.getScaler(),c=m.scaler.getTransformerFromModel(m),g=a.scaler.getTransformerFromModel(a),l=this.chart.getCoords(),p=this.chart.offsets,
q=this.chart.dim,m=function(a){var b={};b.x=c(a[f.name])+l.x+p.l;b.y=l.y+q.height-p.b-g(a[e.name]);return b};return b?m(b):m},toData:function(b){var f=this._hAxis,e=this._vAxis,m=f.getScaler(),a=e.getScaler(),c=m.scaler.getTransformerFromPlot(m),g=a.scaler.getTransformerFromPlot(a),l=this.chart.getCoords(),p=this.chart.offsets,q=this.chart.dim,m=function(a){var b={};b[f.name]=c(a.x-l.x-p.l);b[e.name]=g(l.y+q.height-a.y-p.b);return b};return b?m(b):m},isDirty:function(){return this.dirty||this._hAxis&&
this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},createLabel:function(b,f,e,m){if(this.opt.labels){var a,c=this.opt.labelFunc?this.opt.labelFunc.apply(this,[f,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(f.y)?f:f.y);if("inside"==this.opt.labelStyle){var g=p._base._getTextBox(c,{font:m.series.font});f=e.x+e.width/2;a=e.y+e.height/2+g.h/4;if(g.w>e.width||g.h>e.height)return}else f=e.x+e.width/2,a=e.y-this.opt.labelOffset;this.renderLabel(b,f,a,c,m,"inside"==this.opt.labelStyle)}},performZoom:function(b,
f){var e=this._vAxis.scale||1,l=this._hAxis.scale||1,a=b.height-f.b,c=this._hScaler.bounds,c=(c.from-c.lower)*c.scale,g=this._vScaler.bounds,g=(g.from-g.lower)*g.scale,p=e/this.lastWindow.vscale,u=l/this.lastWindow.hscale,s=(this.lastWindow.xoffset-c)/(1==this.lastWindow.hscale?l:this.lastWindow.hscale),t=(g-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?e:this.lastWindow.vscale),y=this.getGroup(),a=m.animateTransform(q.delegate({shape:y,duration:1200,transform:[{name:"translate",start:[0,0],
end:[f.l*(1-u),a*(1-p)]},{name:"scale",start:[1,1],end:[u,p]},{name:"original"},{name:"translate",start:[0,0],end:[s,t]}]},this.zoom));q.mixin(this.lastWindow,{vscale:e,hscale:l,xoffset:c,yoffset:g});this.zoomQueue.push(a);r.connect(a,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(d,f){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(f.hmin,
f.hmax,d.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=b.buildScaler(f.hmin,f.hmax,d.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(f.vmin,f.vmax,d.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=b.buildScaler(f.vmin,f.vmax,d.height);return this}})})},"dojox/charting/plot2d/Base":function(){define("dojo/_base/declare dojo/_base/array dojox/gfx ../Element ./common ../axis2d/common dojo/has".split(" "),function(q,t,r,s,l,b,p){q=q("dojox.charting.plot2d.Base",
s,{constructor:function(b,f){f&&f.tooltipFunc&&(this.tooltipFunc=f.tooltipFunc)},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(b){return this},assignAxes:function(b){t.forEach(this.axes,function(f){this[f]&&this.setAxis(b[this[f]])},this)},addSeries:function(b){this.series.push(b);return this},getSeriesStats:function(){return l.collectSimpleStats(this.series)},calculateAxes:function(b){this.initializeScalers(b,this.getSeriesStats());return this},initializeScalers:function(){return this},
isDataDirty:function(){return t.some(this.series,function(b){return b.dirty})},render:function(b,f){return this},renderLabel:function(m,f,d,k,e,l,a){m=b.createText[this.opt.htmlLabels&&"vml"!=r.renderer?"html":"gfx"](this.chart,m,f,d,a?a:"middle",k,e.series.font,e.series.fontColor);l&&(this.opt.htmlLabels&&"vml"!=r.renderer?m.style.pointerEvents="none":m.rawNode&&(m.rawNode.style.pointerEvents="none"));this.opt.htmlLabels&&"vml"!=r.renderer&&this.htmlElements.push(m);return m},getRequiredColors:function(){return this.series.length},
_getLabel:function(b){return l.getLabel(b,this.opt.fixed,this.opt.precision)}});p("dojo-bidi")&&q.extend({_checkOrientation:function(b,f,d){this.chart.applyMirroring(this.group,f,d)}});return q})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),function(q,t,r,s,l,b){var p=q.getObject("dojox.charting.plot2d.common",!0);return q.mixin(p,{doIfLoaded:b.doIfLoaded,makeStroke:function(b){if(!b)return b;
if("string"==typeof b||b instanceof r)b={color:b};return s.makeParameters(s.defaultStroke,b)},augmentColor:function(b,f){var d=new r(b),k=new r(f);k.a=d.a;return k},augmentStroke:function(b,f){var d=p.makeStroke(b);d&&(d.color=p.augmentColor(d.color,f));return d},augmentFill:function(b,f){new r(f);return"string"==typeof b||b instanceof r?p.augmentColor(b,f):b},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(b){for(var f=
q.delegate(p.defaultStats),d=0;d<b.length;++d)for(var k=b[d],e=0;e<k.data.length;e++)if(null!==k.data[e]){if("number"==typeof k.data[e]){var e=f.vmin,l=f.vmax;"ymin"in k&&"ymax"in k||t.forEach(k.data,function(a,b){if(null!==a){var c=b+1,d=a;isNaN(d)&&(d=0);f.hmin=Math.min(f.hmin,c);f.hmax=Math.max(f.hmax,c);f.vmin=Math.min(f.vmin,d);f.vmax=Math.max(f.vmax,d)}})}else{var a=f.hmin,c=f.hmax,e=f.vmin,l=f.vmax;"xmin"in k&&"xmax"in k&&"ymin"in k&&"ymax"in k||t.forEach(k.data,function(a,b){if(null!==a){var c=
"x"in a?a.x:b+1,d=a.y;isNaN(c)&&(c=0);isNaN(d)&&(d=0);f.hmin=Math.min(f.hmin,c);f.hmax=Math.max(f.hmax,c);f.vmin=Math.min(f.vmin,d);f.vmax=Math.max(f.vmax,d)}});"xmin"in k&&(f.hmin=Math.min(a,k.xmin));"xmax"in k&&(f.hmax=Math.max(c,k.xmax))}"ymin"in k&&(f.vmin=Math.min(e,k.ymin));"ymax"in k&&(f.vmax=Math.max(l,k.ymax));break}return f},calculateBarSize:function(b,f,d){d||(d=1);var k=f.gap,k=(b-2*k)/d;"minBarSize"in f&&(k=Math.max(k,f.minBarSize));"maxBarSize"in f&&(k=Math.min(k,f.maxBarSize));k=Math.max(k,
1);return{size:k,gap:(b-k*d)/2}},collectStackedStats:function(b){var f=q.clone(p.defaultStats);if(b.length){f.hmin=Math.min(f.hmin,1);f.hmax=l.foldl(b,"seed, run -> Math.max(seed, run.data.length)",f.hmax);for(var d=0;d<f.hmax;++d){var k=b[0].data[d],k=k&&("number"==typeof k?k:k.y);isNaN(k)&&(k=0);f.vmin=Math.min(f.vmin,k);for(var e=1;e<b.length;++e){var n=b[e].data[d],n=n&&("number"==typeof n?n:n.y);isNaN(n)&&(n=0);k+=n}f.vmax=Math.max(f.vmax,k)}}return f},curve:function(b,f){var d=b.slice(0);"x"==
f&&(d[d.length]=d[0]);return t.map(d,function(b,e){if(0==e)return"M"+b.x+","+b.y;if(!isNaN(f)){var m=b.x-d[e-1].x;return"C"+(b.x-m/f*(f-1))+","+d[e-1].y+" "+(b.x-m/f)+","+b.y+" "+b.x+","+b.y}if("X"==f||"x"==f||"S"==f){var a,c=d[e-1],m=d[e],g,l,p,q=1/6;1==e?(a="x"==f?d[d.length-2]:c,q=1/3):a=d[e-2];e==d.length-1?(g="x"==f?d[1]:m,q=1/3):g=d[e+1];l=Math.sqrt((m.x-c.x)*(m.x-c.x)+(m.y-c.y)*(m.y-c.y));p=Math.sqrt((m.x-a.x)*(m.x-a.x)+(m.y-a.y)*(m.y-a.y));var r=Math.sqrt((g.x-c.x)*(g.x-c.x)+(g.y-c.y)*(g.y-
c.y)),s=p*q,q=r*q;s>l/2&&q>l/2?(s=l/2,q=l/2):s>l/2?(s=l/2,q=l/2*r/p):q>l/2&&(q=l/2,s=l/2*p/r);"S"==f&&(a==c&&(s=0),m==g&&(q=0));l=c.x+s*(m.x-a.x)/p;a=c.y+s*(m.y-a.y)/p;p=m.x-q*(g.x-c.x)/r;c=m.y-q*(g.y-c.y)/r}return"C"+(l+","+a+" "+p+","+c+" "+m.x+","+m.y)}).join(" ")},getLabel:function(m,f,d){return b.doIfLoaded("dojo/number",function(b){return(f?b.format(m,{places:d}):b.format(m))||""},function(){return f?m.toFixed(d):m.toString()})}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],
function(q){var t=q.getObject("dojox.charting.scaler.primitive",!0);return q.mixin(t,{buildScaler:function(q,s,l,b){q==s&&(q-=0.5,s+=0.5);return{bounds:{lower:q,upper:s,from:q,to:s,scale:l/(s-q),span:l},scaler:t}},buildTicks:function(q,s){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(q){var s=q.bounds.from,l=q.bounds.scale;return function(b){return(b-s)*l}},getTransformerFromPlot:function(q){var s=q.bounds.from,l=q.bounds.scale;return function(b){return b/l+s}}})})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(q,t,r,s){return r("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(l){},raiseEvent:function(l){this.plotEvent(l);var b=q.delegate(l);b.originalEvent=l.type;b.originalPlot=l.plot;b.type="onindirect";t.forEach(this.chart.stack,function(l){l!==this&&l.plotEvent&&(b.plot=l,l.plotEvent(b))},
this)},connect:function(l,b){this.dirty=!0;return s.connect(this,"plotEvent",l,b)},events:function(){return!!this.plotEvent.after},resetEvents:function(){this._shapeEvents.length&&(t.forEach(this._shapeEvents,function(l){l.shape.disconnect(l.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(l,b){this._shapeEvents.push({shape:l.eventMask,handle:l.eventMask.connect(b,this,function(p){l.type=b;l.event=p;this.raiseEvent(l);l.event=null})})},
_connectEvents:function(l){l&&(l.chart=this.chart,l.plot=this,l.hAxis=this.hAxis||null,l.vAxis=this.vAxis||null,l.eventMask=l.eventMask||l.shape,this._connectSingleEvent(l,"onmouseover"),this._connectSingleEvent(l,"onmouseout"),this._connectSingleEvent(l,"onclick"))},_reconnectEvents:function(l){(l=this._eventSeries[l])&&t.forEach(l,this._connectEvents,this)},fireEvent:function(l,b,p,m){(l=this._eventSeries[l])&&l.length&&p<l.length&&(p=l[p],p.type=b,p.event=m||null,this.raiseEvent(p),p.event=null)}})})},
"dojox/charting/plot2d/Pie":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./Base ./_PlotEvents ./common dojox/gfx dojox/gfx/matrix dojox/lang/functional dojox/lang/utils dojo/has".split(" "),function(q,t,r,s,l,b,p,m,f,d,k){return r("dojox.charting.plot2d.Pie",[s,l],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,omitLabels:!1,stroke:{},outline:{},shadow:{},
fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelWiring:{}},constructor:function(b,f){this.opt=q.clone(this.defaultParams);d.updateWithObject(this.opt,f);d.updateWithPattern(this.opt,f,this.optionalParams);this.axes=[];this.run=null;this.dyn=[]},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this},setAxis:function(b){return this},addSeries:function(b){this.run=b;return this},getSeriesStats:function(){return q.delegate(b.defaultStats)},getRequiredColors:function(){return this.run?
this.run.data.length:0},render:function(b,d){if(!this.dirty)return this;this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var a=this.group,c=this.chart.theme;if(!this.run||!this.run.data.length)return this;var g=(b.width-d.l-d.r)/2,l=(b.height-d.t-d.b)/2,u=Math.min(g,l),r="font"in this.opt?this.opt.font:c.series.font,s,y=m._degToRad(this.opt.startAngle),C=y,D,B,G,J,M=this.run.data,F=this.events();this.dyn=[];"radius"in this.opt&&(u=this.opt.radius,J=u-this.opt.labelOffset);var H=
{cx:d.l+g,cy:d.t+l,r:u};if(this.opt.shadow||c.shadow){D=this.opt.shadow||c.shadow;var S=q.clone(H);S.cx+=D.dx;S.cy+=D.dy;a.createCircle(S).setFill(D.color).setStroke(D)}a.setFilter&&(this.opt.filter||c.filter)&&a.createCircle(H).setFill(c.series.stroke).setFilter(this.opt.filter||c.filter);if("number"==typeof M[0]){D=f.map(M,"x ? Math.max(x, 0) : 0");if(f.every(D,"<= 0"))return a.createCircle(H).setStroke(c.series.stroke),this.dyn=t.map(D,function(){return{}}),this;B=f.map(D,"/this",f.foldl(D,"+",
0));this.opt.labels&&(G=t.map(B,function(a){return 0<a?this._getLabel(100*a)+"%":""},this))}else{D=f.map(M,"x ? Math.max(x.y, 0) : 0");if(f.every(D,"<= 0"))return a.createCircle(H).setStroke(c.series.stroke),this.dyn=t.map(D,function(){return{}}),this;B=f.map(D,"/this",f.foldl(D,"+",0));this.opt.labels&&(G=t.map(B,function(a,b){if(0>a)return"";var c=M[b];return"text"in c?c.text:this._getLabel(100*a)+"%"},this))}var K=f.map(M,function(a,b){var d=[this.opt,this.run];null!==a&&"number"!=typeof a&&d.push(a);
this.opt.styleFunc&&d.push(this.opt.styleFunc(a));return c.next("slice",d,!0)},this);this.opt.labels&&(s=r?p.normalizedLength(p.splitFontString(r).size):0,D=f.foldl1(f.map(G,function(a,b){return p._base._getTextBox(a,{font:K[b].series.font}).w},this),"Math.max(a, b)")/2,0>this.opt.labelOffset&&(u=Math.min(g-2*D,l-s)+this.opt.labelOffset),J=u-this.opt.labelOffset);var x=Array(B.length);t.some(B,function(c,g){if(0>c)return!1;if(0==c)return this.dyn.push({fill:null,stroke:null}),!1;var f=M[g],k=K[g],
l;if(1<=c){l=this._plotFill(k.series.fill,b,d);l=this._shapeFill(l,{x:H.cx-H.r,y:H.cy-H.r,width:2*H.r,height:2*H.r});l=this._pseudoRadialFill(l,{x:H.cx,y:H.cy},H.r);var p=a.createCircle(H).setFill(l).setStroke(k.series.stroke);this.dyn.push({fill:l,stroke:k.series.stroke});F&&(f={element:"slice",index:g,run:this.run,shape:p,x:g,y:"number"==typeof f?f:f.y,cx:H.cx,cy:H.cy,cr:u},this._connectEvents(f),x[g]=f);return!1}var q=C+2*c*Math.PI;g+1==B.length&&(q=y+2*Math.PI);var p=q-C,v=H.cx+u*Math.cos(C),
r=H.cy+u*Math.sin(C),s=H.cx+u*Math.cos(q),t=H.cy+u*Math.sin(q);l=m._degToRad(this.opt.fanSize);if(k.series.fill&&"radial"===k.series.fill.type&&"fan"===this.opt.radGrad&&p>l){var z=a.createGroup(),A=Math.ceil(p/l),D=p/A;l=this._shapeFill(k.series.fill,{x:H.cx-H.r,y:H.cy-H.r,width:2*H.r,height:2*H.r});for(var G=0;G<A;++G){var I=0==G?v:H.cx+u*Math.cos(C+(G-0.2)*D),J=0==G?r:H.cy+u*Math.sin(C+(G-0.2)*D),L=G==A-1?s:H.cx+u*Math.cos(C+(G+1+0.2)*D),N=G==A-1?t:H.cy+u*Math.sin(C+(G+1+0.2)*D);z.createPath().moveTo(H.cx,
H.cy).lineTo(I,J).arcTo(u,u,0,D>Math.PI,!0,L,N).lineTo(H.cx,H.cy).closePath().setFill(this._pseudoRadialFill(l,{x:H.cx,y:H.cy},u,C+(G+0.5)*D,C+(G+0.5)*D))}z.createPath().moveTo(H.cx,H.cy).lineTo(v,r).arcTo(u,u,0,p>Math.PI,!0,s,t).lineTo(H.cx,H.cy).closePath().setStroke(k.series.stroke);p=z}else p=a.createPath().moveTo(H.cx,H.cy).lineTo(v,r).arcTo(u,u,0,p>Math.PI,!0,s,t).lineTo(H.cx,H.cy).closePath().setStroke(k.series.stroke),(l=k.series.fill)&&"radial"===l.type?(l=this._shapeFill(l,{x:H.cx-H.r,y:H.cy-
H.r,width:2*H.r,height:2*H.r}),"linear"===this.opt.radGrad&&(l=this._pseudoRadialFill(l,{x:H.cx,y:H.cy},u,C,q))):l&&"linear"===l.type&&(l=this._plotFill(l,b,d),l=this._shapeFill(l,p.getBoundingBox())),p.setFill(l);this.dyn.push({fill:l,stroke:k.series.stroke});F&&(f={element:"slice",index:g,run:this.run,shape:p,x:g,y:"number"==typeof f?f:f.y,cx:H.cx,cy:H.cy,cr:u},this._connectEvents(f),x[g]=f);C=q;return!1},this);if(this.opt.labels){var L=k("dojo-bidi")&&this.chart.isRightToLeft();if("default"==this.opt.labelStyle)C=
y,t.some(B,function(c,d){if(0>=c)return!1;var g=K[d];if(1<=c)return this.renderLabel(a,H.cx,H.cy+s/2,G[d],g,0<this.opt.labelOffset),!0;var f=C+2*c*Math.PI;d+1==B.length&&(f=y+2*Math.PI);if(this.opt.omitLabels&&0.001>f-C)return!1;var k=(C+f)/2,m=H.cx+J*Math.cos(k),k=H.cy+J*Math.sin(k)+s/2;this.renderLabel(a,L?b.width-m:m,k,G[d],g,0<this.opt.labelOffset);C=f;return!1},this);else if("columns"==this.opt.labelStyle){var C=y,I=this.opt.omitLabels,T=[];t.forEach(B,function(a,b){var c=C+2*a*Math.PI;b+1==
B.length&&(c=y+2*Math.PI);var d=(C+c)/2;T.push({angle:d,left:0>Math.cos(d),theme:K[b],index:b,omit:I?0.001>c-C:!1});C=c});g=p._base._getTextBox("a",{font:r}).h;this._getProperLabelRadius(T,g,1.1*H.r);t.forEach(T,function(c,d){if(!c.omit){var g=H.cx-2*H.r,f=H.cx+2*H.r,k=p._base._getTextBox(G[d],{font:c.theme.series.font}).w,m=H.cx+c.labelR*Math.cos(c.angle),l=H.cy+c.labelR*Math.sin(c.angle),f=c.left?g+k:f-k,g=c.left?g:f,n=a.createPath().moveTo(H.cx+H.r*Math.cos(c.angle),H.cy+H.r*Math.sin(c.angle));
Math.abs(c.labelR*Math.cos(c.angle))<2*H.r-k&&n.lineTo(m,l);n.lineTo(f,l).setStroke(c.theme.series.labelWiring);this.renderLabel(a,L?b.width-k-g:g,l,G[d],c.theme,!1,"left")}},this)}}var N=0;this._eventSeries[this.run.name]=f.map(M,function(a){return 0>=a?null:x[N++]});k("dojo-bidi")&&this._checkOrientation(this.group,b,d);return this},_getProperLabelRadius:function(b,d,a){var c,g,f=1,k=1;if(1==b.length)b[0].labelR=a;else{for(var m=0;m<b.length;m++){var l=Math.abs(Math.sin(b[m].angle));b[m].left?f>=
l&&(f=l,c=b[m]):k>=l&&(k=l,g=b[m])}c.labelR=g.labelR=a;this._calculateLabelR(c,b,d);this._calculateLabelR(g,b,d)}},_calculateLabelR:function(b,d,a){for(var c=b.index,g=d.length,f=b.labelR;!(d[c%g].left^d[(c+1)%g].left);)d[(c+1)%g].omit||(f=(Math.sin(d[c%g].angle)*f+(d[c%g].left?-a:a))/Math.sin(d[(c+1)%g].angle),f=f<b.labelR?b.labelR:f,d[(c+1)%g].labelR=f),c++;c=b.index;for(g=0==c?g-1:c-1;!(d[c].left^d[g].left);)d[g].omit||(f=(Math.sin(d[c].angle)*f+(d[c].left?a:-a))/Math.sin(d[g].angle),f=f<b.labelR?
b.labelR:f,d[g].labelR=f),c--,g--,c=0>c?c+d.length:c,g=0>g?g+d.length:g}})})},"dojox/charting/plot2d/ClusteredColumns":function(){define(["dojo/_base/declare","./Columns","./common"],function(q,t,r){return q("dojox.charting.plot2d.ClusteredColumns",t,{getBarProperties:function(){var q=r.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);return{gap:q.gap,width:q.size,thickness:q.size}}})})},"dojox/charting/plot2d/Columns":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k){var e=f.lambda("item.purgeGroup()");return r("dojox.charting.plot2d.Columns",[l,b],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(b,a){this.opt=q.clone(q.mixin(this.opt,this.defaultParams));d.updateWithObject(this.opt,a);d.updateWithPattern(this.opt,a,this.optionalParams);this.animate=this.opt.animate},getSeriesStats:function(){var b=
p.collectSimpleStats(this.series);b.hmin-=0.5;b.hmax+=0.5;return b},createRect:function(b,a,c){var d;this.opt.enableCache&&0<b._rectFreePool.length?(d=b._rectFreePool.pop(),d.setShape(c),a.add(d)):d=a.createRect(c);this.opt.enableCache&&b._rectUsePool.push(d);return d},render:function(b,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(b,a);this.resetEvents();this.dirty=this.isDirty();var c;this.dirty&&(t.forEach(this.series,e),this._eventSeries={},this.cleanGroup(),c=this.getGroup(),m.forEachRev(this.series,
function(a){a.cleanGroup(c)}));for(var d=this.chart.theme,f=this._hScaler.scaler.getTransformerFromModel(this._hScaler),k=this._vScaler.scaler.getTransformerFromModel(this._vScaler),l=Math.max(0,this._vScaler.bounds.lower),p=k(l),r=this.events(),C=this.getBarProperties(),D=this.series.length-1;0<=D;--D){var B=this.series[D];if(this.dirty||B.dirty){B.cleanGroup();this.opt.enableCache&&(B._rectFreePool=(B._rectFreePool?B._rectFreePool:[]).concat(B._rectUsePool?B._rectUsePool:[]),B._rectUsePool=[]);
var G=d.next("column",[this.opt,B]),J=Array(B.data.length);c=B.group;for(var M=t.some(B.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),F=M?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,H=M?Math.min(B.data.length,Math.ceil(this._hScaler.bounds.to)):B.data.length;F<H;++F){var S=B.data[F];if(null!=S){var K=this.getValue(S,F,D,M),x=k(K.y),L=Math.abs(x-p),I,T;this.opt.styleFunc||"number"!=typeof S?(I="number"!=typeof S?[S]:[],this.opt.styleFunc&&I.push(this.opt.styleFunc(S)),
I=d.addMixin(G,"column",I,!0)):I=d.post(G,"column");if(1<=C.width&&0<=L){var N={x:a.l+f(K.x+0.5)+C.gap+C.thickness*D,y:b.height-a.b-(K.y>l?x:p),width:C.width,height:L};I.series.shadow&&(T=q.clone(N),T.x+=I.series.shadow.dx,T.y+=I.series.shadow.dy,T=this.createRect(B,c,T).setFill(I.series.shadow.color).setStroke(I.series.shadow),this.animate&&this._animateColumn(T,b.height-a.b+p,L));var W=this._plotFill(I.series.fill,b,a),W=this._shapeFill(W,N),W=this.createRect(B,c,N).setFill(W).setStroke(I.series.stroke);
W.setFilter&&I.series.filter&&W.setFilter(I.series.filter);B.dyn.fill=W.getFill();B.dyn.stroke=W.getStroke();if(r){var Z={element:"column",index:F,run:B,shape:W,shadow:T,cx:K.x+0.5,cy:K.y,x:M?F:B.data[F].x,y:M?B.data[F]:B.data[F].y};this._connectEvents(Z);J[F]=Z}!isNaN(K.py)&&K.py>l&&(N.height=x-k(K.py));this.createLabel(c,S,N,I);this.animate&&this._animateColumn(W,b.height-a.b-p,L)}}}this._eventSeries[B.name]=J;B.dirty=!1}else d.skip(),this._reconnectEvents(B.name)}this.dirty=!1;s("dojo-bidi")&&
this._checkOrientation(this.group,b,a);return this},getValue:function(b,a,c,d){d?(c="number"==typeof b?b:b.y,b=a):(c=b.y,b=b.x-1);return{x:b,y:c}},getBarProperties:function(){var b=p.calculateBarSize(this._hScaler.bounds.scale,this.opt);return{gap:b.gap,width:b.size,thickness:0}},_animateColumn:function(b,a,c){0==c&&(c=1);k.animateTransform(q.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,a-a/c],end:[0,0]},{name:"scale",start:[1,1/c],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},
"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(q,t,r,s,l,b){var p=t("dojox.charting.Theme",s,{});q.mixin(p,{defineColors:function(m){m=m||{};var f,d=[],k=m.num||5;if(m.colors){f=m.colors.length;for(var e=0;e<k;e++)d.push(m.colors[e%f]);return d}return m.hue?(d=m.saturation||100,f=((m.high||90)+(m.low||30))/2,b.generate(l.fromHsv(m.hue,d,f),"monochromatic").colors):
m.generator?l.Palette.generate(m.base,m.generator).colors:d},generateGradient:function(b,f,d){b=q.delegate(b);b.colors=[{offset:0,color:f},{offset:1,color:d}];return b},generateHslColor:function(b,f){b=new r(b);var d=b.toHsl(),d=l.fromHsl(d.h,d.s,f);d.a=b.a;return d},generateHslGradient:function(b,f,d,k){b=new r(b);var e=b.toHsl();d=l.fromHsl(e.h,e.s,d);k=l.fromHsl(e.h,e.s,k);d.a=k.a=b.a;return p.generateGradient(f,d,k)}});p.defaultMarkers=s.defaultMarkers;p.defaultColors=s.defaultColors;p.defaultTheme=
s.defaultTheme;return p})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(q,t,r,s){q=t.getObject("color",!0,q);q.Color=r;q.blend=r.blendColors;q.fromRgb=r.fromRgb;q.fromHex=r.fromHex;q.fromArray=r.fromArray;q.fromString=r.fromString;q.greyscale=s.makeGrey;t.mixin(q,{fromCmy:function(l,b,p){t.isArray(l)?(b=l[1],p=l[2],l=l[0]):t.isObject(l)&&(b=l.m,p=l.y,l=l.c);b=1-b/100;p=1-p/100;return new r({r:Math.round(255*(1-l/100)),g:Math.round(255*
b),b:Math.round(255*p)})},fromCmyk:function(l,b,p,m){t.isArray(l)?(b=l[1],p=l[2],m=l[3],l=l[0]):t.isObject(l)&&(b=l.m,p=l.y,m=l.b,l=l.c);b/=100;p/=100;m/=100;l=1-Math.min(1,l/100*(1-m)+m);b=1-Math.min(1,b*(1-m)+m);p=1-Math.min(1,p*(1-m)+m);return new r({r:Math.round(255*l),g:Math.round(255*b),b:Math.round(255*p)})},fromHsl:function(l,b,p){t.isArray(l)?(b=l[1],p=l[2],l=l[0]):t.isObject(l)&&(b=l.s,p=l.l,l=l.h);b/=100;for(p/=100;0>l;)l+=360;for(;360<=l;)l-=360;var m,f;120>l?(m=(120-l)/60,f=l/60,l=0):
240>l?(m=0,f=(240-l)/60,l=(l-120)/60):(m=(l-240)/60,f=0,l=(360-l)/60);m=2*b*Math.min(m,1)+(1-b);f=2*b*Math.min(f,1)+(1-b);l=2*b*Math.min(l,1)+(1-b);0.5>p?(m*=p,f*=p,l*=p):(m=(1-p)*m+2*p-1,f=(1-p)*f+2*p-1,l=(1-p)*l+2*p-1);return new r({r:Math.round(255*m),g:Math.round(255*f),b:Math.round(255*l)})}});q.fromHsv=function(l,b,p){t.isArray(l)?(b=l[1],p=l[2],l=l[0]):t.isObject(l)&&(b=l.s,p=l.v,l=l.h);360==l&&(l=0);b/=100;p/=100;var m,f,d;if(0==b)f=d=m=p;else{var k=l/60;l=Math.floor(k);var e=k-l,k=p*(1-b),
n=p*(1-b*e);b=p*(1-b*(1-e));switch(l){case 0:m=p;f=b;d=k;break;case 1:m=n;f=p;d=k;break;case 2:m=k;f=p;d=b;break;case 3:m=k;f=n;d=p;break;case 4:m=b;f=k;d=p;break;case 5:m=p,f=k,d=n}}return new r({r:Math.round(255*m),g:Math.round(255*f),b:Math.round(255*d)})};t.extend(r,{toCmy:function(){var l=1-this.g/255,b=1-this.b/255;return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*l),y:Math.round(100*b)}},toCmyk:function(){var l,b,p,m=this.r/255;l=this.g/255;b=this.b/255;p=Math.min(1-m,1-l,1-b);l=(1-
l-p)/(1-p);b=(1-b-p)/(1-p);return{c:Math.round((1-m-p)/(1-p)*100),m:Math.round(100*l),y:Math.round(100*b),b:Math.round(100*p)}},toHsl:function(){var l=this.r/255,b=this.g/255,p=this.b/255,m=Math.min(l,p,b),f=Math.max(l,b,p),d=f-m,k=0,e=0,m=(m+f)/2;0<m&&1>m&&(e=d/(0.5>m?2*m:2-2*m));0<d&&(f==l&&f!=b&&(k+=(b-p)/d),f==b&&f!=p&&(k+=2+(p-l)/d),f==p&&f!=l&&(k+=4+(l-b)/d),k*=60);return{h:k,s:Math.round(100*e),l:Math.round(100*m)}},toHsv:function(){var l=this.r/255,b=this.g/255,p=this.b/255,m=Math.min(l,p,
b),f=Math.max(l,b,p),m=f-m,d=null,k=0==f?0:m/f;0==k?d=0:(d=l==f?60*(b-p)/m:b==f?120+60*(p-l)/m:240+60*(l-b)/m,0>d&&(d+=360));return{h:d,s:Math.round(100*k),v:Math.round(100*f)}}});return q})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(q,t,r,s){var l={};t.setObject("dojo.colors",l);var b=function(b,f,d){0>d&&++d;1<d&&--d;var k=6*d;return 1>k?b+(f-b)*k:1>2*d?f:2>3*d?b+(f-b)*(2/3-d)*6:b};q.colorFromRgb=r.fromRgb=function(l,f){var d=l.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);
if(d){var k=d[2].split(/\s*,\s*/),e=k.length,d=d[1];if("rgb"==d&&3==e||"rgba"==d&&4==e)return d=k[0],"%"==d.charAt(d.length-1)?(d=s.map(k,function(a){return 2.56*parseFloat(a)}),4==e&&(d[3]=k[3]),r.fromArray(d,f)):r.fromArray(k,f);if("hsl"==d&&3==e||"hsla"==d&&4==e){var d=(parseFloat(k[0])%360+360)%360/360,n=parseFloat(k[1])/100,a=parseFloat(k[2])/100,n=0.5>=a?a*(n+1):a+n-a*n,a=2*a-n,d=[256*b(a,n,d+1/3),256*b(a,n,d),256*b(a,n,d-1/3),1];4==e&&(d[3]=k[3]);return r.fromArray(d,f)}}return null};var p=
function(b,f,d){b=Number(b);return isNaN(b)?d:b<f?f:b>d?d:b};r.prototype.sanitize=function(){this.r=Math.round(p(this.r,0,255));this.g=Math.round(p(this.g,0,255));this.b=Math.round(p(this.b,0,255));this.a=p(this.a,0,1);return this};l.makeGrey=r.makeGrey=function(b,f){return r.fromArray([b,b,b,f])};t.mixin(r.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,
226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,
150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,
136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],
navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,
87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return r})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(q,t,r){function s(b,
d,k){var e=new r.Palette;e.colors=[];t.forEach(b.colors,function(b){var a="dg"==d?b.g+k:b.g,c="db"==d?b.b+k:b.b,g="da"==d?b.a+k:b.a;e.colors.push(new r.Color({r:Math.min(255,Math.max(0,"dr"==d?b.r+k:b.r)),g:Math.min(255,Math.max(0,a)),b:Math.min(255,Math.max(0,c)),a:Math.min(1,Math.max(0,g))}))});return e}function l(b,d,k){var e=new r.Palette;e.colors=[];t.forEach(b.colors,function(b){b=b.toCmy();var a="dm"==d?b.m+k:b.m,c="dy"==d?b.y+k:b.y;e.colors.push(r.fromCmy(Math.min(100,Math.max(0,"dc"==d?b.c+
k:b.c)),Math.min(100,Math.max(0,a)),Math.min(100,Math.max(0,c))))});return e}function b(b,d,k){var e=new r.Palette;e.colors=[];t.forEach(b.colors,function(b){b=b.toCmyk();var a="dm"==d?b.m+k:b.m,c="dy"==d?b.y+k:b.y,g="dk"==d?b.b+k:b.b;e.colors.push(r.fromCmyk(Math.min(100,Math.max(0,"dc"==d?b.c+k:b.c)),Math.min(100,Math.max(0,a)),Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,g))))});return e}function p(b,d,k){var e=new r.Palette;e.colors=[];t.forEach(b.colors,function(b){b=b.toHsl();var a="dl"==
d?b.l+k:b.l;e.colors.push(r.fromHsl(("dh"==d?b.h+k:b.h)%360,Math.min(100,Math.max(0,"ds"==d?b.s+k:b.s)),Math.min(100,Math.max(0,a))))});return e}function m(b,d,k){var e=new r.Palette;e.colors=[];t.forEach(b.colors,function(b){b=b.toHsv();var a="dv"==d?b.v+k:b.v;e.colors.push(r.fromHsv(("dh"==d?b.h+k:b.h)%360,Math.min(100,Math.max(0,"ds"==d?b.s+k:b.s)),Math.min(100,Math.max(0,a))))});return e}r.Palette=function(b){this.colors=[];b instanceof r.Palette?this.colors=b.colors.slice(0):b instanceof r.Color?
this.colors=[null,null,b,null,null]:q.isArray(b)?this.colors=t.map(b.slice(0),function(b){return q.isString(b)?new r.Color(b):b}):q.isString(b)&&(this.colors=[null,null,new r.Color(b),null,null])};q.extend(r.Palette,{transform:function(f){var d=s;if(f.use){var k=f.use.toLowerCase();0==k.indexOf("hs")?d="l"==k.charAt(2)?p:m:0==k.indexOf("cmy")&&(d="k"==k.charAt(3)?b:l)}else if("dc"in f||"dm"in f||"dy"in f)d="dk"in f?b:l;else if("dh"in f||"ds"in f)d="dv"in f?m:p;var k=this,e;for(e in f)"use"!=e&&(k=
d(k,e,f[e]));return k},clone:function(){return new r.Palette(this)}});q.mixin(r.Palette,{generators:{analogous:function(b){var d=b.high||60,k=b.low||18;b=(q.isString(b.base)?new r.Color(b.base):b.base).toHsv();var d=[(b.h+k+360)%360,(b.h+Math.round(k/2)+360)%360,b.h,(b.h-Math.round(d/2)+360)%360,(b.h-d+360)%360],k=Math.max(10,95>=b.s?b.s+5:100-(b.s-95)),e=1<b.s?b.s-1:21-b.s,l=92<=b.v?b.v-9:Math.max(b.v+9,20),a=90>=b.v?Math.max(b.v+5,20):95+Math.ceil((b.v-90)/2),c=[k,e,b.s,k,k],g=[l,a,b.v,l,a];return new r.Palette(t.map(d,
function(a,b){return r.fromHsv(a,c[b],g[b])}))},monochromatic:function(b){b=q.isString(b.base)?new r.Color(b.base):b.base;var d=b.toHsv(),k=9<d.s-30?d.s-30:d.s+30,e=d.s,l=20<d.v-20?d.v-20:d.v+60,a=20<d.v-50?d.v-50:d.v+30;return new r.Palette([r.fromHsv(d.h,k,100-0.8*(100-d.v)),r.fromHsv(d.h,e,a),b,r.fromHsv(d.h,k,a),r.fromHsv(d.h,e,l)])},triadic:function(b){b=q.isString(b.base)?new r.Color(b.base):b.base;var d=b.toHsv(),k=(d.h-157+360)%360,e=90<d.s?d.s-10:d.s+10,l=95<d.s?d.s-5:d.s+5,a=20<d.v-20?d.v-
20:d.v+20,c=20<d.v-30?d.v-30:d.v+30,g=70<d.v-30?d.v-30:d.v+30;return new r.Palette([r.fromHsv((d.h+57+360)%360,20<d.s?d.s-10:d.s+10,d.v),r.fromHsv(d.h,e,c),b,r.fromHsv(k,e,a),r.fromHsv(k,l,g)])},complementary:function(b){b=q.isString(b.base)?new r.Color(b.base):b.base;var d=b.toHsv(),k=360>2*d.h+137?2*d.h+137:Math.floor(d.h/2)-137,e=Math.max(d.s-10,0),l=100-0.9*(100-d.s),a=Math.min(100,d.s+20),c=Math.min(100,d.v+30),g=20<d.v?d.v-30:d.v+30;return new r.Palette([r.fromHsv(d.h,e,c),r.fromHsv(d.h,l,g),
b,r.fromHsv(k,a,g),r.fromHsv(k,d.s,d.v)])},splitComplementary:function(b){var d=q.isString(b.base)?new r.Color(b.base):b.base,k=b.da||30;b=d.toHsv();var e=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,l=(e-k+360)%360,k=(e+k)%360,e=Math.max(b.s-10,0),a=100-0.9*(100-b.s),c=Math.min(100,b.s+20),g=Math.min(100,b.v+30),m=20<b.v?b.v-30:b.v+30;return new r.Palette([r.fromHsv(l,e,g),r.fromHsv(l,a,m),d,r.fromHsv(k,c,m),r.fromHsv(k,b.s,b.v)])},compound:function(b){b=q.isString(b.base)?new r.Color(b.base):b.base;
var d=b.toHsv(),k=360>2*d.h+18?2*d.h+18:Math.floor(d.h/2)-18,e=360>2*d.h+120?2*d.h+120:Math.floor(d.h/2)-120,l=360>2*d.h+99?2*d.h+99:Math.floor(d.h/2)-99,a=10<d.s-40?d.s-40:d.s+40,c=80<d.s-10?d.s-10:d.s+10,g=10<d.s-25?d.s-25:d.s+25,m=10<d.v-40?d.v-40:d.v+40,p=80<d.v-20?d.v-20:d.v+20,d=Math.max(d.v,20);return new r.Palette([r.fromHsv(k,a,m),r.fromHsv(k,c,p),b,r.fromHsv(e,g,d),r.fromHsv(l,c,p)])},shades:function(b){b=q.isString(b.base)?new r.Color(b.base):b.base;var d=b.toHsv(),k=100==d.s&&0==d.v?0:
d.s,e=20<d.v-50?d.v-50:d.v+30,l=20<=d.v-25?d.v-25:d.v+55,a=20<=d.v-75?d.v-75:d.v+5,c=Math.max(d.v-10,20);return new r.Palette([new r.fromHsv(d.h,k,e),new r.fromHsv(d.h,k,l),b,new r.fromHsv(d.h,k,a),new r.fromHsv(d.h,k,c)])}},generate:function(b,d){if(q.isFunction(d))return d({base:b});if(r.Palette.generators[d])return r.Palette.generators[d]({base:b});throw Error("dojox.color.Palette.generate: the specified generator ('"+d+"') does not exist.");}});return r.Palette})},"dojox/charting/themes/common":function(){define(["dojo/_base/lang"],
function(q){return q.getObject("dojox.charting.themes",!0)})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(q){return q._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(q,t,r,s){var l=t("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=
0},add:function(b){if(this._hash[b.id])throw Error("Tried to register widget with id=="+b.id+" but that id is already registered");this._hash[b.id]=b;this.length++},remove:function(b){this._hash[b]&&(delete this._hash[b],this.length--)},forEach:function(b,l){l=l||r.global;var m=0,f;for(f in this._hash)b.call(l,this._hash[f],m++,this._hash);return this},filter:function(b,p){p=p||r.global;var m=new l,f=0,d;for(d in this._hash){var k=this._hash[d];b.call(p,k,f++,this._hash)&&m.add(k)}return m},byId:function(b){return this._hash[b]},
byClass:function(b){var p=new l,m,f;for(m in this._hash)f=this._hash[m],f.declaredClass==b&&p.add(f);return p},toArray:function(){var b=[],l;for(l in this._hash)b.push(this._hash[l]);return b},map:function(b,l){return q.map(this.toArray(),b,l)},every:function(b,l){l=l||r.global;var m=0,f;for(f in this._hash)if(!b.call(l,this._hash[f],m++,this._hash))return!1;return!0},some:function(b,l){l=l||r.global;var m=0,f;for(f in this._hash)if(b.call(l,this._hash[f],m++,this._hash))return!0;return!1}});q.forEach("forEach filter byClass map every some".split(" "),
function(b){s[b]=l.prototype[b]});return l})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(q,t,r,s,l,b,p,m){b.focus=function(f){if(f){var d="node"in f?f.node:f,k=f.bookmark;f=f.openedForWindow;var e=k?k.isCollapsed:!1;if(d){var n="iframe"==d.tagName.toLowerCase()?d.contentWindow:d;if(n&&n.focus)try{n.focus()}catch(a){}b._onFocusNode(d)}if(k&&l.withGlobal(f||l.global,m.isCollapsed)&&
!e){f&&f.focus();try{l.withGlobal(f||l.global,m.moveToBookmark,null,[k])}catch(c){}}}};b.watch("curNode",function(b,d,k){m._curFocus=k;m._prevFocus=d;k&&s.publish("focusNode",k)});b.watch("activeStack",function(b,d,k){m._activeStack=k});b.on("widget-blur",function(b,d){s.publish("widgetBlur",b,d)});b.on("widget-focus",function(b,d){s.publish("widgetFocus",b,d)});r.mixin(m,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return m.getBookmark().isCollapsed},getBookmark:function(){return(l.global==
window?p:new p.SelectionManager(l.global)).getBookmark()},moveToBookmark:function(b){return(l.global==window?p:new p.SelectionManager(l.global)).moveToBookmark(b)},getFocus:function(f,d){var k=!b.curNode||f&&t.isDescendant(b.curNode,f.domNode)?m._prevFocus:b.curNode;return{node:k,bookmark:k&&k==b.curNode&&l.withGlobal(d||l.global,m.getBookmark),openedForWindow:d}},_activeStack:[],registerIframe:function(f){return b.registerIframe(f)},unregisterIframe:function(b){b&&b.remove()},registerWin:function(f,
d){return b.registerWin(f,d)},unregisterWin:function(b){b&&b.remove()}});return m})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),function(q,t,r,s,l,b){var p=function(f){var d=f.document;this.getType=function(){if(d.getSelection){var b="text",e;try{e=f.getSelection()}catch(l){}e&&1==e.rangeCount&&(e=e.getRangeAt(0),e.startContainer==e.endContainer&&1==e.endOffset-e.startOffset&&3!=e.startContainer.nodeType&&(b=
"control"));return b}return d.selection.type.toLowerCase()};this.getSelectedText=function(){if(d.getSelection){var b=f.getSelection();return b?b.toString():""}return"control"==this.getType()?null:d.selection.createRange().text};this.getSelectedHtml=function(){if(d.getSelection){var b=f.getSelection();if(b&&b.rangeCount){var e,l="";for(e=0;e<b.rangeCount;e++){var a=b.getRangeAt(e).cloneContents(),c=d.createElement("div");c.appendChild(a);l+=c.innerHTML}return l}return null}return"control"==this.getType()?
null:d.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(d.getSelection){var b=f.getSelection();return b.anchorNode.childNodes[b.anchorOffset]}if((b=d.selection.createRange())&&b.item)return d.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var b=this.getSelectedElement();if(b)return b.parentNode}else if(d.getSelection){if(b=d.getSelection()){for(b=b.anchorNode;b&&1!=b.nodeType;)b=b.parentNode;
return b}}else return b=d.selection.createRange(),b.collapse(!0),b.parentElement();return null};this.hasAncestorElement=function(b){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(b){var d=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(d,arguments)};this.isTag=function(b,d){if(b&&b.tagName)for(var f=b.tagName.toLowerCase(),a=0;a<d.length;a++){var c=String(d[a]).toLowerCase();if(f==c)return c}return""};this.getParentOfType=
function(b,d){for(;b;){if(this.isTag(b,d).length)return b;b=b.parentNode}return null};this.collapse=function(b){if(d.getSelection){var e=f.getSelection();e.removeAllRanges?b?e.collapseToStart():e.collapseToEnd():e.collapse(b)}else e=d.selection.createRange(),e.collapse(b),e.select()};this.remove=function(){var b=d.selection;d.getSelection?(b=f.getSelection(),b.deleteFromDocument()):"none"!=b.type.toLowerCase()&&b.clear();return b};this.selectElementChildren=function(b,e){var l;b=t.byId(b);if(d.getSelection){var a=
f.getSelection();s("opera")?(l=a.rangeCount?a.getRangeAt(0):d.createRange(),l.setStart(b,0),l.setEnd(b,3==b.nodeType?b.length:b.childNodes.length),a.addRange(l)):a.selectAllChildren(b)}else if(l=b.ownerDocument.body.createTextRange(),l.moveToElementText(b),!e)try{l.select()}catch(c){}};this.selectElement=function(b,e){var f;b=t.byId(b);if(d.getSelection){var a=d.getSelection();f=d.createRange();a.removeAllRanges&&(s("opera")&&a.getRangeAt(0)&&(f=a.getRangeAt(0)),f.selectNode(b),a.removeAllRanges(),
a.addRange(f))}else try{a=b.tagName?b.tagName.toLowerCase():"",f="img"===a||"table"===a?l.body(d).createControlRange():l.body(d).createRange(),f.addElement(b),e||f.select()}catch(c){this.selectElementChildren(b,e)}};this.inSelection=function(b){if(b){var e,l;if(d.getSelection){var a=f.getSelection();a&&0<a.rangeCount&&(l=a.getRangeAt(0));if(l&&l.compareBoundaryPoints&&d.createRange)try{if(e=d.createRange(),e.setStart(b,0),1===l.compareBoundaryPoints(l.START_TO_END,e))return!0}catch(c){}}else{l=d.selection.createRange();
try{e=b.ownerDocument.body.createTextRange(),e.moveToElementText(b)}catch(g){}if(l&&e&&1===l.compareEndPoints("EndToStart",e))return!0}}return!1};this.getBookmark=function(){var k,e,l=d.selection,a=b.curNode;if(d.getSelection){if(l=f.getSelection())if(l.isCollapsed){if(k=a?a.tagName:"")if(k=k.toLowerCase(),"textarea"==k||"input"==k&&(!a.type||"text"==a.type.toLowerCase()))return l={start:a.selectionStart,end:a.selectionEnd,node:a,pRange:!0},{isCollapsed:l.end<=l.start,mark:l};k={isCollapsed:!0};l.rangeCount&&
(k.mark=l.getRangeAt(0).cloneRange())}else e=l.getRangeAt(0),k={isCollapsed:!1,mark:e.cloneRange()}}else if(l){k=a?a.tagName:"";k=k.toLowerCase();if(a&&k&&("button"==k||"textarea"==k||"input"==k)){if(l.type&&"none"==l.type.toLowerCase())return{isCollapsed:!0,mark:null};e=l.createRange();return{isCollapsed:e.text&&e.text.length?!1:!0,mark:{range:e,pRange:!0}}}k={};try{e=l.createRange(),k.isCollapsed=!("Text"==l.type?e.htmlText.length:e.length)}catch(c){return k.isCollapsed=!0,k}if("CONTROL"==l.type.toUpperCase())if(e.length)for(k.mark=
[],l=0,a=e.length;l<a;)k.mark.push(e.item(l++));else k.isCollapsed=!0,k.mark=null;else k.mark=e.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return k};this.moveToBookmark=function(b){if(b=b.mark)if(d.getSelection){var e=f.getSelection();e&&e.removeAllRanges?b.pRange?(e=b.node,e.selectionStart=b.start,e.selectionEnd=b.end):(e.removeAllRanges(),e.addRange(b)):console.warn("No idea how to restore selection for this browser!")}else if(d.selection&&b){var l;
b.pRange?l=b.range:r.isArray(b)?(l=d.body.createControlRange(),q.forEach(b,function(a){l.addElement(a)})):(l=d.body.createTextRange(),l.moveToBookmark(b));l.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},m=new p(window);m.SelectionManager=p;return m})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(q,t,r,s,l){var b={getViewport:function(){return r.getBox()}};b.placeOnScreen=s.at;b.placeOnScreenAroundElement=
function(b,l,f,d){var k;if(t.isArray(f))k=f;else{k=[];for(var e in f)k.push({aroundCorner:e,corner:f[e]})}return s.around(b,l,k,!0,d)};b.placeOnScreenAroundNode=b.placeOnScreenAroundElement;b.placeOnScreenAroundRectangle=b.placeOnScreenAroundElement;b.getPopupAroundAlignment=function(b,l){var f={};q.forEach(b,function(b){var k=l;switch(b){case "after":f[l?"BR":"BL"]=l?"BL":"BR";break;case "before":f[l?"BL":"BR"]=l?"BR":"BL";break;case "below-alt":k=!k;case "below":f[k?"BL":"BR"]=k?"TL":"TR";f[k?"BR":
"BL"]=k?"TR":"TL";break;case "above-alt":k=!k;default:f[k?"TL":"TR"]=k?"BL":"BR",f[k?"TR":"TL"]=k?"BR":"BL"}});return f};t.mixin(l,b);return l})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(q,t,r){var s=r._createWrapper;r._createWrapper=function(b){b.declaredClass||(b={_popupWrapper:b.parentNode&&q.contains(b.parentNode,"dijitPopup")?b.parentNode:null,domNode:b,destroy:function(){},ownerDocument:b.ownerDocument,ownerDocumentBody:t.body(b.ownerDocument)});
return s.call(this,b)};var l=r.open;r.open=function(b){if(b.orient&&"string"!=typeof b.orient&&!("length"in b.orient)){var p=[],m;for(m in b.orient)p.push({aroundCorner:m,corner:b.orient[m]});b.orient=p}return l.call(this,b)};return r})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(q,t){t.scrollIntoView=function(r,s){q.scrollIntoView(r,s)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],
function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(q,t,r){t.mixin(r,{hasWaiRole:function(q,l){var b=this.getWaiRole(q);return l?-1<b.indexOf(l):0<b.length},getWaiRole:function(r){return t.trim((q.get(r,"role")||"").replace("wairole:",""))},setWaiRole:function(r,l){q.set(r,"role",l)},removeWaiRole:function(r,l){var b=q.get(r,"role");b&&(l?(b=t.trim((" "+b+" ").replace(" "+l+" "," ")),q.set(r,"role",b)):r.removeAttribute("role"))},hasWaiState:function(q,
l){return q.hasAttribute?q.hasAttribute("aria-"+l):!!q.getAttribute("aria-"+l)},getWaiState:function(q,l){return q.getAttribute("aria-"+l)||""},setWaiState:function(q,l,b){q.setAttribute("aria-"+l,b)},removeWaiState:function(q,l){q.removeAttribute("aria-"+l)}});return r})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(q,t){t.getDocumentWindow=function(r){return q.get(r)}})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(q,t,r,s){return q("dijit.ToolbarSeparator",[r,s],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);t.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n){q=q("dijit.TooltipDialog",[m,k,d,f],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:e,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(b(this.containerNode,"keydown",l.hitch(this,"_onKey")))},orient:function(a,b,d){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+d];t.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems(this.containerNode);
p.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==
s.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==s.TAB){var b=a.target;this._getFocusItems(this.containerNode);this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(p.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey?a.stopPropagation():(p.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}}});r("dojo-bidi")&&q.extend({_setTitleAttr:function(a){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,a):a;this._set("title",a)},_setTextDirAttr:function(a){this._created&&this.textDir==a||(this._set("textDir",a),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return q})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/i18n!../nls/loading dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v){return d("dijit.layout.ContentPane",[r,s,l],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:q._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},
onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=e.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=t.delegate(a,{content:c})}this.inherited(arguments,
[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=g.getLocalization("dijit","loading",this.lang);this.loadingMessage=b.substitute(this.loadingMessage,a);this.errorMessage=b.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){a._started||
a._destroyed||!t.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){f.forEach(this.getChildren(),function(a){a._started||a._destroyed||!t.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!t.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){q.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new k(t.hitch(this,"cancel"));this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){q.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new k(t.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new k(t.hitch(this,"cancel"));this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
t.isObject(this.ioArgs)&&t.mixin(b,this.ioArgs);var d=this._xhrDfd=(this.ioMethod||c.get)(b),g;d.then(function(b){g=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){d.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return g});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(b){this.isLoaded&&this._onUnloadHandler();var c=this._contentSetter;f.forEach(this.getChildren(),function(a){a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b);a._destroyed=!0});c&&(f.forEach(c.parseResults,function(a){a._destroyed||(a.destroyRecursive?
a.destroyRecursive(b):a.destroy&&a.destroy(b),a._destroyed=!0)}),delete c.parseResults);b||a.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;c&&c instanceof p._ContentSetter||(c=this._contentSetter=new p._ContentSetter({node:this.containerNode,_onError:t.hitch(this,this._onError),onContentError:t.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+
" could not change content due to "+b.message,b)}})}));var d=t.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=c.set(t.isObject(a)&&a.domNode?a.domNode:a,d),g=this;return v(d&&d.then?d:c.parseDeferred,function(){delete g._contentSetterParams;b||(g._started&&(g._startChildren(),g._scheduleLayout()),g._onLoadHandler(a))})},
_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query dojo/sniff ../registry ../Viewport ./utils".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k){return t("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var e=this.getParent();this._childOfLayoutWidget=e&&e.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",b.hitch(this,"resize")))}},_checkIfSingleChild:function(){var b=[],d=!1;p("> *",this.containerNode).some(function(a){var c=
f.byNode(a);c&&c.resize?b.push(c):!/script|link|style/i.test(a.nodeName)&&a.offsetHeight&&(d=!0)});this._singleChild=1!=b.length||d?null:b[0];r.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(b,d){this._resizeCalled=!0;this._scheduleLayout(b,d)},_scheduleLayout:function(b,d){this._isShown()?this._layout(b,d):(this._needLayout=!0,this._changeSize=b,this._resultSize=d)},_layout:function(d,f){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
d&&s.setMarginBox(this.domNode,d);var a=this.containerNode;if(a===this.domNode){var c=f||{};b.mixin(c,d||{});"h"in c&&"w"in c||(c=b.mixin(s.getMarginBox(a),c));this._contentBox=k.marginBox2contentBox(a,c)}else this._contentBox=s.getContentBox(a);this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||s.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=
this.getChildren(),d,a=0;d=b[a++];)d.resize&&d.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,d=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!r.contains(b,"dijitHidden")&&d&&d.style&&"none"!=d.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},
"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(q,t,r,s,l){function b(b){return b.substring(0,1).toUpperCase()+b.substring(1)}function p(b,d){var k=b.resize?b.resize(d):r.setMarginBox(b.domNode,d);k?l.mixin(b,k):(l.mixin(b,r.getMarginBox(b.domNode)),l.mixin(b,d))}var m={marginBox2contentBox:function(b,d){var k=s.getComputedStyle(b),e=r.getMarginExtents(b,k),l=r.getPadBorderExtents(b,k);return{l:s.toPixelValue(b,
k.paddingLeft),t:s.toPixelValue(b,k.paddingTop),w:d.w-(e.w+l.w),h:d.h-(e.h+l.h)}},layoutChildren:function(f,d,k,e,m){d=l.mixin({},d);t.add(f,"dijitLayoutContainer");k=q.filter(k,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(q.filter(k,function(a){return"center"==a.region||"client"==a.layoutAlign}));q.forEach(k,function(a){var c=a.domNode,g=a.region||a.layoutAlign;if(!g)throw Error("No region setting for "+a.id);var f=c.style;f.left=d.l+"px";f.top=d.t+"px";f.position="absolute";
t.add(c,"dijitAlign"+b(g));c={};e&&e==a.id&&(c["top"==a.region||"bottom"==a.region?"h":"w"]=m);"leading"==g&&(g=a.isLeftToRight()?"left":"right");"trailing"==g&&(g=a.isLeftToRight()?"right":"left");"top"==g||"bottom"==g?(c.w=d.w,p(a,c),d.h-=a.h,"top"==g?d.t+=a.h:f.top=d.t+d.h+"px"):"left"==g||"right"==g?(c.h=d.h,p(a,c),d.w-=a.w,"left"==g?d.l+=a.w:f.left=d.l+d.w+"px"):"client"!=g&&"center"!=g||p(a,d)})}};l.setObject("dijit.layout.utils",m);return m})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(q,t,r,s,l,b,p){var m=0,f={_secureForInnerHtml:function(b){return b.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:b.empty,_setNodeContent:function(d,f){b.empty(d);if(f)if("string"==typeof f&&(f=b.toDom(f,d.ownerDocument)),!f.nodeType&&t.isArrayLike(f))for(var e=f.length,l=0;l<f.length;l=e==f.length?l+1:0)b.place(f[l],d,"last");else b.place(f,d,"last");return d},_ContentSetter:s("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,
parseContent:!1,parserScope:q._scopeName,startup:!0,constructor:function(b,f){t.mixin(this,b||{});f=this.node=l.byId(this.node||f);this.id||(this.id=["Setter",f?f.id||f.tagName:"",m++].join("_"))},set:function(b,f){void 0!==b&&(this.content=b);f&&this._mixin(f);this.onBegin();this.setContent();var e=this.onEnd();return e&&e.then?e:this.node},setContent:function(){var b=this.node;if(!b)throw Error(this.declaredClass+": setContent given no node");try{b=f._setNodeContent(b,this.content)}catch(k){var e=
this.onContentError(k);try{b.innerHTML=e}catch(l){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+l.message,l)}}this.node=b},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(r.forEach(this.parseResults,function(b){b.destroy&&b.destroy()}),delete this.parseResults);b.empty(this.node)},onBegin:function(){var b=this.content;if(t.isString(b)&&
(this.cleanContent&&(b=f._secureForInnerHtml(b)),this.extractContent)){var k=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);k&&(b=k[1])}this.empty();this.content=b;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(b){return"Error occurred setting content: "+b},onExecError:function(b){return"Error occurred executing scripts: "+b},
_mixin:function(b){var f={},e;for(e in b)e in f||(this[e]=b[e])},_parse:function(){var b=this.node;try{var f={};r.forEach(["dir","lang","textDir"],function(a){this[a]&&(f[a]=this[a])},this);var e=this;this.parseDeferred=p.parse({rootNode:b,noStart:!this.startup,inherited:f,scope:this.parserScope}).then(function(a){return e.parseResults=a},function(a){e._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(l){this._onError("Content",l,"Error parsing in _ContentSetter#"+this.id)}},
_onError:function(b,k,e){b=this["on"+b+"Error"].call(this,k);e?console.error(e,k):b&&f._setNodeContent(this.node,b,!0)}}),set:function(b,k,e){void 0==k&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),k="");return e?(new f._ContentSetter(t.mixin(e,{content:k,node:b}))).set():f._setNodeContent(b,k,!0)}};t.setObject("dojo.html",f);return f})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(q,t){return q("dijit._DialogMixin",null,{execute:function(){},
onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var q=t._getTabNavigable(this.containerNode);this._firstFocusItem=q.lowest||q.first||this.closeButtonNode||this.domNode;this._lastFocusItem=q.last||q.highest||this._firstFocusItem}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(q,t,r,s,l,b){return t("dijit.form._FormMixin",
null,{state:"",_getDescendantFormWidgets:function(b){var l=[];q.forEach(b||this.getChildren(),function(b){"value"in b?l.push(b):l=l.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return l},reset:function(){q.forEach(this._getDescendantFormWidgets(),function(b){b.reset&&b.reset()})},validate:function(){var l=!1;return q.every(q.map(this._getDescendantFormWidgets(),function(m){m._hasBeenBlurred=!0;var f=m.disabled||!m.validate||m.validate();f||l||(b.scrollIntoView(m.containerNode||m.domNode),
m.focus(),l=!0);return f}),function(b){return b})},setValues:function(b){r.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(b){var l={};q.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(l[b.name]||(l[b.name]=[])).push(b)});for(var f in l)if(l.hasOwnProperty(f)){var d=l[f],k=s.getObject(f,!1,b);void 0!==k&&(k=[].concat(k),"boolean"==typeof d[0].checked?q.forEach(d,function(b){b.set("value",
-1!=q.indexOf(k,b._get("value")))}):d[0].multiple?d[0].set("value",k):q.forEach(d,function(b,d){b.set("value",k[d])}))}},getValues:function(){r.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};q.forEach(this._getDescendantFormWidgets(),function(l){var f=l.name;if(f&&!l.disabled){var d=l.get("value");"boolean"==typeof l.checked?/Radio/.test(l.declaredClass)?!1!==d?s.setObject(f,d,b):(d=s.getObject(f,
!1,b),void 0===d&&s.setObject(f,null,b)):(l=s.getObject(f,!1,b),l||(l=[],s.setObject(f,l,b)),!1!==d&&l.push(d)):(l=s.getObject(f,!1,b),"undefined"!=typeof l?s.isArray(l)?l.push(d):s.setObject(f,[l,d],b):s.setObject(f,d,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=q.map(this._descendants,function(b){return b.get("state")||""});return 0<=q.indexOf(b,"Error")?"Error":0<=q.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},
connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();q.forEach(this._descendants,function(b){b._started||b.startup()});b||this._onChildChange()},_onChildChange:function(b){b&&"state"!=b&&"disabled"!=b||this._set("state",this._getState());b&&"value"!=b&&"disabled"!=b&&"checked"!=b||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);
this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var b=this;this.own(l(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(l){l.target!=b.domNode&&b._onChildChange(l.type.replace("attrmodified-",""))}));this.watch("state",function(b,f,d){this.onValidStateChange(""==d)})},destroy:function(){this.inherited(arguments)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare",
"./CheckBox","./_RadioButtonMixin"],function(q,t,r){return q("dijit.form.RadioButton",[t,r],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query ../registry".split(" "),function(q,t,r,s,l,b){return t("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var p=[];l("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(s.hitch(this,function(l){l.name==this.name&&
l.form==this.focusNode.form&&(l=b.getEnclosingWidget(l))&&p.push(l)}));return p},_setCheckedAttr:function(b){this.inherited(arguments);this._created&&b&&q.forEach(this._getRelatedWidgets(),s.hitch(this,function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_getSubmitValue:function(b){return null==b?"on":b},_onClick:function(b){return this.checked||this.disabled?(b.stopPropagation(),b.preventDefault(),!1):this.readOnly?(b.stopPropagation(),b.preventDefault(),q.forEach(this._getRelatedWidgets(),s.hitch(this,
function(b){r.set(this.focusNode||this.domNode,"checked",b.checked)})),!1):this.inherited(arguments)}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(q,t,r,s){return q("dijit.CheckedMenuItem",r,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:s,checked:!1,_setCheckedAttr:function(l){this.domNode.setAttribute("aria-checked",l?"true":"false");this._set("checked",l)},iconClass:"",
role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(l){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(l)}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(q,t,r,s,l,b,p){return q("dijit.PopupMenuItem",p,{_fillContent:function(){if(this.srcNodeRef){var b=s("*",this.srcNodeRef);this.inherited(arguments,[b[0]]);
this.dropDownContainer=this.srcNodeRef}},_openPopup:function(b,f){var d=this.popup;l.open(r.delegate(b,{popup:this.popup,around:this.domNode}));f&&d.focus&&d.focus()},_closePopup:function(){l.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var l=s("[widgetId]",this.dropDownContainer)[0];this.popup=b.byNode(l)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);
this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&t.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(b){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(b),delete this.popup);this.inherited(arguments)}})})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane dojo/text!./templates/Dialog.html dojo/i18n!./nls/common".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u,z,A,y,C,D,B,G,J,M,F,H){y=s("dijit._DialogBase"+(g("dojo-bidi")?"_NoBidi":""),[D,G,J,B],{templateString:H,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=
a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=k.getLocalization("dijit","common");n.mixin(this,a);this.inherited(arguments)},postCreate:function(){f.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);r.after(this,"onExecute",n.hitch(this,"hide"),!0);r.after(this,"onCancel",n.hitch(this,"hide"),!0);this._modalconnects=[]},onLoad:function(){this._size();this._position();this.autofocus&&K.isTop(this)&&
(this._getFocusItems(this.domNode),A.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems(this.domNode);A.focus(this._firstFocusItem)},_endDrag:function(){var a=m.position(this.domNode),b=v.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==g("ie")?z:u)(a,{handle:this.titleBar}),
r.after(this._moveable,"onMoveStop",n.hitch(this,"_endDrag"),!0)):p.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":t.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:n.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();this._singleChild?"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle):
f.set(this.containerNode,{width:"auto",height:"auto"});var a=m.position(this.domNode),b=v.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;if(a.w>=b.w||a.h>=b.h){var c=m.position(this.containerNode),d=Math.min(a.w,b.w)-(a.w-c.w),a=Math.min(a.h,b.h)-(a.h-c.h);this._singleChild&&this._singleChild.resize?("undefined"==typeof this._singleChildOriginalStyle&&(this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText),this._singleChild.resize({w:d,h:a})):f.set(this.containerNode,
{width:d+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!p.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=v.getBox(this.ownerDocument),c=this._relativePosition,d=c?null:m.position(a);f.set(a,{left:Math.floor(b.l+(c?c.x:(b.w-d.w)/2))+"px",top:Math.floor(b.t+(c?c.y:(b.h-d.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==e.TAB){this._getFocusItems(this.domNode);var b=a.target;
this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(A.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey||(A.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==e.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(!this.open){this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=
!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),K.hide(this));var b=v.get(this.ownerDocument);this._modalconnects.push(a(b,"scroll",n.hitch(this,"resize")));this._modalconnects.push(a(this.domNode,"keydown",n.hitch(this,"_onKey")));f.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var c;this._fadeInDeferred=new l(n.hitch(this,function(){c.stop();delete this._fadeInDeferred}));b=this._fadeInDeferred.promise;c=d.fadeIn({node:this.domNode,
duration:this.duration,beforeBegin:n.hitch(this,function(){K.show(this,this.underlayAttrs)}),onEnd:n.hitch(this,function(){this.autofocus&&K.isTop(this)&&(this._getFocusItems(this.domNode),A.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return b}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new l(n.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));
this._fadeOutDeferred.then(n.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=d.fadeOut({node:this.domNode,duration:this.duration,onEnd:n.hitch(this,function(){this.domNode.style.display="none";K.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b}},resize:function(){"none"!=
this.domNode.style.display&&(this._size(),g("touch")||this._position())},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();K.hide(this);this.inherited(arguments)}});g("dojo-bidi")&&(y=s("dijit._DialogBase",y,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(a){this._created&&
this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var S=s("dijit.Dialog",[F,y],{});S._DialogBase=y;var K=S._DialogLevelManager={_beginZIndex:950,show:function(a,b){x[x.length-1].focus=A.curNode;var c=x[x.length-1].dialog?x[x.length-1].zIndex+2:S._DialogLevelManager._beginZIndex;f.set(a.domNode,"zIndex",c);M.show(b,c-1);x.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(x[x.length-1].dialog==a){x.pop();var c=x[x.length-1];1==x.length?M.hide():M.show(c.underlayAttrs,
c.zIndex-1);if(a.refocus&&(a=c.focus,!c.dialog||a&&b.isDescendant(a,c.dialog.domNode)||(c.dialog._getFocusItems(c.dialog.domNode),a=c.dialog._firstFocusItem),a))try{a.focus()}catch(d){}}else c=t.indexOf(t.map(x,function(a){return a.dialog}),a),-1!=c&&x.splice(c,1)},isTop:function(a){return x[x.length-1].dialog==a}},x=S._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];A.watch("curNode",function(a,b,c){a=x[x.length-1].dialog;if(c&&a&&!a._fadeOutDeferred&&c.ownerDocument==a.ownerDocument){do if(c==
a.domNode||p.contains(c,"dijitPopup"))return;while(c=c.parentNode);a.focus()}});g("dijit-legacy-requires")&&c(0,function(){q(["dijit/TooltipDialog"])});return S})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e){return t("dojo.dnd.Moveable",[b],{handle:"",delay:0,skip:!1,constructor:function(b,a){this.node=s.byId(b);a||(a={});this.handle=
a.handle?s.byId(a.handle):null;this.handle||(this.handle=this.node);this.delay=0<a.delay?a.delay:0;this.skip=a.skip;this.mover=a.mover?a.mover:k;this.events=[p(this.handle,f.press,r.hitch(this,"onMouseDown")),p(this.handle,"dragstart",r.hitch(this,"onSelectStart")),p(this.handle,"selectstart",r.hitch(this,"onSelectStart"))]},markupFactory:function(b,a,c){return new c(a,b)},destroy:function(){q.forEach(this.events,function(b){b.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||
!d.isFormElement(b)){if(this.delay)this.events.push(p(this.handle,f.move,r.hitch(this,"onMouseMove")),p(this.handle,f.release,r.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(b){if(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)this.onMouseUp(b),this.onDragDetected(b);b.stopPropagation();b.preventDefault()},onMouseUp:function(b){for(var a=0;2>a;++a)this.events.pop().remove();
b.stopPropagation();b.preventDefault()},onSelectStart:function(b){this.skip&&d.isFormElement(b)||(b.stopPropagation(),b.preventDefault())},onDragDetected:function(b){new this.mover(this.node,b,this)},onMoveStart:function(b){m.publish("/dnd/move/start",b);l.add(e.body(),"dojoMove");l.add(this.node,"dojoMoveItem")},onMoveStop:function(b){m.publish("/dnd/move/stop",b);l.remove(e.body(),"dojoMove");l.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(b,a){this.onMoving(b,a);var c=
b.node.style;c.left=a.l+"px";c.top=a.t+"px";this.onMoved(b,a)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n){return t("dojo.dnd.Mover",[f],{constructor:function(a,c,g){function e(a){a.preventDefault();a.stopPropagation()}this.node=b.byId(a);this.marginBox={l:c.pageX,
t:c.pageY};this.mouseButton=c.button;c=this.host=g;a=a.ownerDocument;this.events=[d(a,k.move,r.hitch(this,"onFirstMove")),d(a,k.move,r.hitch(this,"onMouseMove")),d(a,k.release,r.hitch(this,"onMouseUp")),d(a,"dragstart",e),d(a.body,"selectstart",e)];n.autoScrollStart(a);if(c&&c.onMoveStart)c.onMoveStart(this)},onMouseMove:function(a){n.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(s("webkit")&&
s("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,d,e=this.host;switch(b.position){case "relative":case "absolute":d=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=p.getMarginBox(this.node);d=l.doc.body;var f=m.getComputedStyle(d),k=p.getMarginBox(d,f),f=p.getContentBox(d,f);d=b.l-(f.l-k.l);b=b.t-(f.t-k.t)}this.marginBox.l=
d-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(e&&e.onFirstMove)e.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){q.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(q,t){var r=t.prototype.onMove;return q("dojo.dnd.TimedMoveable",t,{timeout:40,constructor:function(q,l){l||(l={});l.timeout&&
"number"==typeof l.timeout&&0<=l.timeout&&(this.timeout=l.timeout)},onMoveStop:function(q){q._timer&&(clearTimeout(q._timer),r.call(this,q,q._leftTop));t.prototype.onMoveStop.apply(this,arguments)},onMove:function(q,l){q._leftTop=l;if(!q._timer){var b=this;q._timer=setTimeout(function(){q._timer=null;r.call(b,q,q._leftTop)},this.timeout)}}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e){var n=q("dijit.DialogUnderlay",[m,f],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){s.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(b(this.domNode,"keydown",t.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var d=p.getBox(this.ownerDocument);b.top=d.t+"px";b.left=d.l+"px";a.width=d.w+"px";a.height=d.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new d(this.domNode);var a=p.get(this.ownerDocument);this._modalConnects=[k.on("resize",t.hitch(this,"layout")),b(a,"scroll",
t.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});n.show=function(a,b){var d=n._singleton;!d||d._destroyed?d=e._underlay=n._singleton=new n(a):a&&d.set(a);l.set(d.domNode,"zIndex",b);d.open||d.show()};n.hide=function(){var a=
n._singleton;a&&!a._destroyed&&a.hide()};return n})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/_base/connect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u,z,A,y,C,D,B,G,J,M,F,H,S,K,x,L,I,T,N){function W(a){return v.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var Z=l("dijit._TreeNode",[J,M,F,H,S],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a)},labelType:"text",isExpandable:null,isExpanded:!1,state:"NotLoaded",
templateString:x,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";k.set(this.domNode,"backgroundPosition",b+" 0px");k.set(this.rowNode,
this.isLeftToRight()?"paddingLeft":"paddingRight",b);q.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,"row","Row");this.tree._startPaint(!0)},
_applyClassAndStyle:function(a,b,c){var d="_"+b+"Class";b+="Node";var g=this[d];this[d]=this.tree["get"+c+"Class"](a,this.isExpanded);f.replace(this[b],this[d]||"",g||"");k.set(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();a&&a.rowNode&&"none"!=a.rowNode.style.display?f.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling()):f.add(this.domNode,"dijitTreeIsRoot")},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened",
"dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;f.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return W(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role",
"group");f.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=n.wipeIn({node:this.containerNode,duration:G.defaultDuration}),c=this._expandDeferred=new b(function(){a.stop()});t.after(a,"onEnd",function(){c.resolve(!0)},!0);a.play();return W(c)},collapse:function(){if(this._collapseDeferred)return W(this._collapseDeferred);this._expandDeferred&&
(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");f.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=n.wipeOut({node:this.containerNode,duration:G.defaultDuration}),c=this._collapseDeferred=new b(function(){a.stop()});t.after(a,"onEnd",function(){c.resolve(!0)},
!0);a.play();return W(c)},indent:0,setChildItems:function(a){var b=this.tree,c=b.model,d=[],g=this.getChildren();q.forEach(g,function(a){F.prototype.removeChild.call(this,a)},this);this.defer(function(){q.forEach(g,function(a){if(!a._destroyed&&!a.getParent()){b.dndController.removeTreeNode(a);var d=function(a){var g=c.getIdentity(a.item),e=b._itemNodesMap[g];1==e.length?delete b._itemNodesMap[g]:(g=q.indexOf(e,a),-1!=g&&e.splice(g,1));q.forEach(a.getChildren(),d)};d(a);if(b.persist){var g=q.map(a.getTreePath(),
function(a){return b.model.getIdentity(a)}).join("/"),e;for(e in b._openedNodes)e.substr(0,g.length)==g&&delete b._openedNodes[e];b._saveExpandedNodes()}a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,q.forEach(a,function(a){var g=c.getIdentity(a),e=b._itemNodesMap[g],f;if(e)for(var k=0;k<e.length;k++)if(e[k]&&!e[k].getParent()){f=e[k];f.set("indent",this.indent+1);break}f||(f=this.tree._createTreeNode({item:a,tree:b,isExpandable:c.mayHaveChildren(a),label:b.getLabel(a),
labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),e?e.push(f):b._itemNodesMap[g]=[f]);this.addChild(f);(this.tree.autoExpand||this.tree._state(f))&&d.push(b._expandNode(f))},this),q.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=p(d);this.tree._startPaint(a);return W(a)},getTreePath:function(){for(var a=
this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,this.collapse());q.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":
"false");f.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){D.focus(this.focusNode)}});a("dojo-bidi")&&Z.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),q.forEach(this.getChildren(),function(b){b.set("textDir",a)},this))}});var V=l("dijit.Tree",[J,K,M,S],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,
openOnClick:!1,openOnDblClick:!1,templateString:L,persist:!1,autoExpand:!1,dndController:N,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){z.publish(this.id,v.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&
(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new b;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(u(this.containerNode,u.selector(".dijitTreeNode",A.enter),function(b){a._onNodeMouseEnter(B.byNode(this),b)}),u(this.containerNode,u.selector(".dijitTreeNode",A.leave),function(b){a._onNodeMouseLeave(B.byNode(this),
b)}),u(this.containerNode,u.selector(".dijitTreeRow",C.press),function(b){a._onNodePress(B.getEnclosingWidget(this),b)}),u(this.containerNode,u.selector(".dijitTreeRow",C),function(b){a._onClick(B.getEnclosingWidget(this),b)}),u(this.containerNode,u.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(B.getEnclosingWidget(this),b)}));this.model||this._store2model();this.own(t.after(this.model,"onChange",v.hitch(this,"_onItemChange"),!0),t.after(this.model,"onChildrenChange",v.hitch(this,
"_onItemChildrenChange"),!0),t.after(this.model,"onDelete",v.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){v.isString(this.dndController)&&(this.dndController=v.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=W(this.pendingCommandsPromise);this.onLoadDeferred.then(v.hitch(this,"onLoad"))},
_store2model:function(){this._v10Compat=!0;c.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=v.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(a.getChildren=v.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new T(a);this.showRoot=
Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(v.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role",
"presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),b.labelNode.setAttribute("role","presentation"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded",
"true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(v.hitch(this,function(){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(!0)}))}),v.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];
a=v.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(v.hitch(this,function(){var c=q.map(a,function(a){return!a||v.isString(a)?a:b.model.getIdentity(a)}),d=[];q.forEach(c,function(a){d=d.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?
W(this.set("paths",[a]).then(function(a){return a[0]})):W(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,d){var g=a.shift(),e=q.filter(d,function(a){return a.getIdentity()==g})[0];if(e)return a.length?c._expandNode(e).then(function(){return b(a,e.getChildren())}):e;throw new V.PathError("Could not expand path at "+g);}var c=this;return W(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return p(q.map(a,function(a){a=q.map(a,function(a){return v.isString(a)?
a:c.model.getIdentity(a)});if(a.length)return b(a,[c.rootNode]);throw new V.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function a(c){return b._expandNode(c).then(function(){var b=q.filter(c.getChildren()||[],function(a){return a.isExpandable});return p(q.map(b,a))})}var b=this;return W(a(this.rootNode))},
collapseAll:function(){function a(c){var d=q.filter(c.getChildren()||[],function(a){return a.isExpandable}),d=p(q.map(d,a));return!c.isExpanded||c==b.rootNode&&!b.showRoot?d:d.then(function(){return b._collapseNode(c)})}var b=this;return W(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},
getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&b.isExpanded&&b.hasChildren();)c=b.getChildren(),b=c[c.length-1];else if(c=b.getParent(),this.showRoot||c!==this.rootNode)b=c;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&
!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&c.isTreeNode&&(this.showRoot||c!==this.rootNode)&&this.focusNode(c)}},focusLastChild:function(){var a=this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=
a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return m.isDescendant(a,b.expandoNode)||m.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){a.focus()},__click:function(a,b,c,d){var g=this.isExpandoNode(b.target,a);a.isExpandable&&(c||
g)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[d](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},
_getNextNode:function(a){c.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){c.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);
return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var c=this.model,d=a.item,g=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new b,c.getChildren(d,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(g,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));c=a._loadDeferred.then(v.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));
this._startPaint(c);return c},focusNode:function(a){this.focusChild(a)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),d=this.getTooltip(a);q.forEach(b,function(b){b.set({item:a,label:c,tooltip:d});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this.model.getIdentity(a);(c=this._itemNodesMap[c])&&q.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=
this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(q.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=s(this.cookieName);a&&q.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=q.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},
this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);s(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!v.isString(this.dndController)&&
this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&d.setMarginBox(this.domNode,a);this._nodePixelIndent=d.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(v.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),
delete this._adjustWidthsTimer);var b=v.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});y(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new Z(a)},
focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});a("dojo-bidi")&&V.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});V.PathError=e("TreePathError");V._TreeNode=Z;return V})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(q,t){q.cookie=function(q,s,l){var b=document.cookie,p;if(1==arguments.length)p=(p=b.match(RegExp("(?:^|; )"+t.escapeString(q)+"=([^;]*)")))?
decodeURIComponent(p[1]):void 0;else{l=l||{};b=l.expires;if("number"==typeof b){var m=new Date;m.setTime(m.getTime()+864E5*b);b=l.expires=m}b&&b.toUTCString&&(l.expires=b.toUTCString());s=encodeURIComponent(s);var b=q+"="+s,f;for(f in l)b+="; "+f,m=l[f],!0!==m&&(b+="="+m);document.cookie=b}return p};q.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__",
"",{expires:-1}));return navigator.cookieEnabled};return q.cookie})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(q,t,r,s,l,b,p,m,f,d,k){r.isAsync||d(0,function(){k(["./fx/Toggler"])});r=r.fx={};d={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var e=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;
this.duration=0;s.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};e.prototype=new t;q.extend(e,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=l.after(this._current,"onAnimate",q.hitch(this,"_onAnimate"),
!0),this._onEndCtx=l.after(this._current,"onEnd",q.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var d=l.after(this._current,"beforeBegin",q.hitch(this,function(){this._fire("beforeBegin")}),!0),e=l.after(this._current,"onBegin",q.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),f=l.after(this._current,"onPlay",q.hitch(this,function(a){this._fire("onPlay",
arguments);d.remove();e.remove();f.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=l.after(this._current,"onAnimate",q.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=l.after(this._current,"onEnd",q.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=l.after(this._current,"onPause",q.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);
this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var d=this.duration*a;this._current=null;s.some(this._animations,function(a){if(a.duration<=d)return this._current=a,!0;d-=a.duration;return!1});this._current&&this._current.gotoPercent(d/this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=l.after(this._current,
"onStop",q.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});q.extend(e,d);r.chain=function(a){return new e(a)};var n=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;s.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);
this.duration<b&&(this.duration=b);this._connects.push(l.after(a,"onEnd",q.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new b.Animation({curve:[0,1],duration:this.duration});var c=this;s.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){c._connects.push(l.after(c._pseudoAnimation,a,function(){c._fire(a,arguments)},!0))})};q.extend(n,{_doAction:function(a,b){s.forEach(this._animations,function(d){d[a].apply(d,b)});return this},_onEnd:function(){++this._finished>
this._animations.length&&this._fire("onEnd")},_call:function(a,b){var d=this._pseudoAnimation;d[a].apply(d,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var d=this.duration*a;s.forEach(this._animations,function(a){a.gotoPercent(a.duration<d?1:d/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",
arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){s.forEach(this._connects,function(a){a.remove()})}});q.extend(n,d);r.combine=function(a){return new n(a)};r.wipeIn=function(a){var c=a.node=p.byId(a.node),d=c.style,e;a=b.animateProperty(q.mixin({properties:{height:{start:function(){e=d.overflow;d.overflow="hidden";if("hidden"==d.visibility||"none"==d.display)return d.height="1px",d.display="",d.visibility="",1;var a=m.get(c,
"height");return Math.max(a,1)},end:function(){return c.scrollHeight}}}},a));var f=function(){d.height="auto";d.overflow=e};l.after(a,"onStop",f,!0);l.after(a,"onEnd",f,!0);return a};r.wipeOut=function(a){var c=(a.node=p.byId(a.node)).style,d;a=b.animateProperty(q.mixin({properties:{height:{end:1}}},a));l.after(a,"beforeBegin",function(){d=c.overflow;c.overflow="hidden";c.display=""},!0);var e=function(){c.overflow=d;c.height="auto";c.display="none"};l.after(a,"onStop",e,!0);l.after(a,"onEnd",e,!0);
return a};r.slideTo=function(a){var c=null,d=null,e=function(a){return function(){var b=m.getComputedStyle(a),e=b.position;c="absolute"==e?a.offsetTop:parseInt(b.top)||0;d="absolute"==e?a.offsetLeft:parseInt(b.left)||0;"absolute"!=e&&"relative"!=e&&(b=f.position(a,!0),c=b.y,d=b.x,a.style.position="absolute",a.style.top=c+"px",a.style.left=d+"px")}}(a.node=p.byId(a.node));e();a=b.animateProperty(q.mixin({properties:{top:a.top||0,left:a.left||0}},a));l.after(a,"beforeBegin",e,!0);return a};return r})},
"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(q,t,r,s){return r("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(l){s.mixin(this,l);this.connects=[];l=this.store;if(!l.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");l.getFeatures()["dojo.data.api.Notification"]&&
(this.connects=this.connects.concat([t.after(l,"onNew",s.hitch(this,"onNewItem"),!0),t.after(l,"onDelete",s.hitch(this,"onDeleteItem"),!0),t.after(l,"onSet",s.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var l;l=this.connects.pop();)l.remove()},getRoot:function(l,b){this.root?l(this.root):this.store.fetch({query:this.query,onComplete:s.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=
b[0];l(this.root)}),onError:b})},mayHaveChildren:function(l){return q.some(this.childrenAttrs,function(b){return this.store.hasAttribute(l,b)},this)},getChildren:function(l,b,p){var m=this.store;if(m.isItemLoaded(l)){for(var f=[],d=0;d<this.childrenAttrs.length;d++)var k=m.getValues(l,this.childrenAttrs[d]),f=f.concat(k);var e=0;this.deferItemLoadingUntilExpand||q.forEach(f,function(a){m.isItemLoaded(a)||e++});0==e?b(f):q.forEach(f,function(a,c){m.isItemLoaded(a)||m.loadItem({item:a,onItem:function(a){f[c]=
a;0==--e&&b(f)},onError:p})})}else{var n=s.hitch(this,arguments.callee);m.loadItem({item:l,onItem:function(a){n(a,b,p)},onError:p})}},isItem:function(l){return this.store.isItem(l)},fetchItemByIdentity:function(l){this.store.fetchItemByIdentity(l)},getIdentity:function(l){return this.store.getIdentity(l)},getLabel:function(l){return this.labelAttr?this.store.getValue(l,this.labelAttr):this.store.getLabel(l)},newItem:function(l,b,p){var m={parent:b,attribute:this.childrenAttrs[0]},f;this.newItemIdAttr&&
l[this.newItemIdAttr]?this.fetchItemByIdentity({identity:l[this.newItemIdAttr],scope:this,onItem:function(d){d?this.pasteItem(d,null,b,!0,p):(f=this.store.newItem(l,m))&&void 0!=p&&this.pasteItem(f,b,b,!1,p)}}):(f=this.store.newItem(l,m))&&void 0!=p&&this.pasteItem(f,b,b,!1,p)},pasteItem:function(l,b,p,m,f){var d=this.store,k=this.childrenAttrs[0];b&&q.forEach(this.childrenAttrs,function(e){if(d.containsValue(b,e,l)){if(!m){var a=q.filter(d.getValues(b,e),function(a){return a!=l});d.setValues(b,e,
a)}k=e}});if(p)if("number"==typeof f){var e=d.getValues(p,k).slice();e.splice(f,0,l);d.setValues(p,k,e)}else d.setValues(p,k,d.getValues(p,k).concat(l))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(l,b){b&&this.getChildren(b.item,s.hitch(this,function(l){this.onChildrenChange(b.item,l)}))},onDeleteItem:function(l){this.onDelete(l)},onSetItem:function(l,b){if(-1!=q.indexOf(this.childrenAttrs,b))this.getChildren(l,s.hitch(this,function(b){this.onChildrenChange(l,
b)}));else this.onChange(l)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(q,t,r,s,l){return t("dijit.tree.ForestStoreModel",l,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(b){this.root={store:this,root:!0,id:b.rootId,label:b.rootLabel,children:b.rootChildren}},mayHaveChildren:function(b){return b===this.root||this.inherited(arguments)},getChildren:function(b,l,m){b===
this.root?this.root.children?l(this.root.children):this.store.fetch({query:this.query,onComplete:s.hitch(this,function(b){this.root.children=b;l(b)}),onError:m}):this.inherited(arguments)},isItem:function(b){return b===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(b){if(b.identity==this.root.id){var l=b.scope||r.global;b.onItem&&b.onItem.call(l,this.root)}else this.inherited(arguments)},getIdentity:function(b){return b===this.root?this.root.id:this.inherited(arguments)},getLabel:function(b){return b===
this.root?this.root.label:this.inherited(arguments)},newItem:function(b,l,m){return l===this.root?(this.onNewRootItem(b),this.store.newItem(b)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(b,l,m,f,d){if(l===this.root&&!f)this.onLeaveRoot(b);this.inherited(arguments,[b,l===this.root?null:l,m===this.root?null:m,f,d]);if(m===this.root)this.onAddToRoot(b)},onAddToRoot:function(b){},onLeaveRoot:function(b){},_requeryTop:function(){var b=this.root.children||[];this.store.fetch({query:this.query,
onComplete:s.hitch(this,function(l){this.root.children=l;if(b.length!=l.length||q.some(b,function(b,f){return l[f]!=b}))this.onChildrenChange(this.root,l)})})},onNewItem:function(b,l){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(b){-1!=q.indexOf(this.root.children,b)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(b,l,m,f){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k){return r("dijit.tree._dndSelector",k,{constructor:function(){this.selection={};this.anchor=null;this.events.push(m(this.tree.domNode,f.press,l.hitch(this,"onMouseDown")),m(this.tree.domNode,f.release,l.hitch(this,"onMouseUp")),m(this.tree.domNode,f.move,l.hitch(this,"onMouseMove")),m(this.tree.domNode,d.press,l.hitch(this,"onClickPress")),m(this.tree.domNode,d.release,l.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],d=this.selection,
a;for(a in d)b.push(d[a]);return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(b,d){this.setSelection(this.getSelectedTreeNodes().concat([b]));d&&(this.anchor=b);return b},removeTreeNode:function(d){var f=q.filter(this.getSelectedTreeNodes(),function(a){return!b.isDescendant(a.domNode,d.domNode)});this.setSelection(f);return d},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},
setSelection:function(b){var d=this.getSelectedTreeNodes();q.forEach(this._setDifference(d,b),l.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));q.forEach(this._setDifference(b,d),l.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(b,d){q.forEach(d,function(a){a.__exclude__=!0});var a=q.filter(b,function(a){return!a.__exclude__});q.forEach(d,function(a){delete a.__exclude__});
return a},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),d=[],a=[],c=[];q.forEach(b,function(b){var e=b.getTreePath(),f=this.tree.model;a.push(b);d.push(e);e=q.map(e,function(a){return f.getIdentity(a)},this);c.push(e.join("/"))},this);b=q.map(a,function(a){return a.item});this.tree._set("paths",d);this.tree._set("path",d[0]||[]);this.tree._set("selectedNodes",a);this.tree._set("selectedNode",a[0]||null);this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||
null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,this.current))){p.isLeft(b)&&b.preventDefault();var d="keydown"==b.type?this.tree.focusedChild:this.current;if(d){var a=t.isCopyKey(b),c=d.id;this.singular||b.shiftKey||!this.selection[c]?(this._doDeselect=!1,this.userSelect(d,a,b.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(b){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,
t.isCopyKey(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(b,d){if(b===d)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-d.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(d)&2?1:-1;if(document.createRange){var a=doc.createRange();a.setStartBefore(b);var c=doc.createRange();c.setStartBefore(d);return a.compareBoundaryPoints(a.END_TO_END,
c)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(b,d,a){if(this.singular)this.anchor==b&&d?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(a&&this.anchor){d=this._compareNodes(this.anchor.rowNode,b.rowNode);a=this.anchor;0>d?d=a:(d=b,b=a);for(a=[];d!=b;)a.push(d),d=this.tree._getNext(d);a.push(b);this.setSelection(a)}else this.selection[b.id]&&d?this.removeTreeNode(b):d?this.addTreeNode(b,!0):(this.setSelection([b]),
this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,d){d=d||s.global;for(var a in this.selection)b.call(d,this.getItem(a),a,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(q,t,r,s,l,b){return t("dijit.tree._dndContainer",null,{constructor:function(p,m){this.tree=p;this.node=p.domNode;s.mixin(this,m);this.containerState="";r.add(this.node,
"dojoDndContainer");this.events=[l(this.node,b.enter,s.hitch(this,"onOverEvent")),l(this.node,b.leave,s.hitch(this,"onOutEvent")),q.after(this.tree,"_onNodeMouseEnter",s.hitch(this,"onMouseOver"),!0),q.after(this.tree,"_onNodeMouseLeave",s.hitch(this,"onMouseOut"),!0),l(this.node,"dragstart, selectstart",function(b){b.preventDefault()})]},destroy:function(){for(var b;b=this.events.pop();)b.remove();this.node=this.parent=null},onMouseOver:function(b){this.current=b},onMouseOut:function(){this.current=
null},_changeState:function(b,l){var f="dojoDnd"+b,d=b.toLowerCase()+"State";r.replace(this.node,f+l,f+this[d]);this[d]=l},_addItemClass:function(b,l){r.add(b,"dojoDndItem"+l)},_removeItemClass:function(b,l){r.remove(b,"dojoDndItem"+l)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(q,t,r,s,l,b,p,m){r("dijit-legacy-requires")&&l(0,function(){q(["dijit/ToolbarSeparator"])});return t("dijit.Toolbar",[b,m,p],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ProgressBar":function(){define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),
function(q,t,r,s,l,b,p,m){return t("dijit.ProgressBar",[b,p],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:m,_indeterminateHighContrastImagePath:q.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);this.params&&"value"in this.params||(this.value=this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());
this.update()},_setDirAttr:function(b){r.toggle(this.domNode,"dijitProgressBarRtl","rtl"==b);this.inherited(arguments)},update:function(b){s.mixin(this,b||{});b=this.internalProgress;var d=this.domNode,k=1;this.indeterminate?d.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(k=Math.min(parseFloat(this.progress)/100,1),this.progress=k*this.maximum):(this.progress=Math.min(this.progress,this.maximum),k=this.maximum?this.progress/this.maximum:0),d.setAttribute("aria-valuenow",
this.progress));d.setAttribute("aria-labelledby",this.labelNode.id);d.setAttribute("aria-valuemin",0);d.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(k);r.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);b.style.width=100*k+"%";this.onChange()},_setValueAttr:function(b){this._set("value",b);Infinity==b?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:b})},_setLabelAttr:function(b){this._set("label",b);this.update()},_setIndeterminateAttr:function(b){this._set("indeterminate",
b);this.update()},report:function(b){return this.label?this.label:this.indeterminate?"&#160;":l.format(b,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(q,t,r,s,l,b,p,m,f,d,k){m=q("dijit.form.TextBox"+(p("dojo-bidi")?"_NoBidi":
""),[m,f],{templateString:d,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:p("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var b=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==b||"file"==b)&&this.templateString==this.constructor.prototype.templateString)this.templateString=
this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>p("ie")&&this.defer(function(){try{var b=r.getComputedStyle(this.domNode);if(b){var d=b.fontFamily;if(d){var a=this.domNode.getElementsByTagName("INPUT");if(a)for(b=0;b<a.length;b++)a[b].style.fontFamily=d}}}catch(c){}})},_setPlaceHolderAttr:function(d){this._set("placeHolder",d);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=t.create("span",{onmousedown:function(b){b.preventDefault()},
className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(b(this._phspan,"touchend, pointerup, MSPointerUp",l.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(d));this._updatePlaceHolder()},_onInput:function(b){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(b,
d,a){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){s.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){s.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",b)},_onBlur:function(b){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),
p("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(b){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>p("ie")&&(m.prototype._isTextSelected=function(){var b=this.ownerDocument.selection.createRange();return b.parentElement()==this.textbox&&0<b.text.length},k._setSelectionRange=f._setSelectionRange=function(b,d,a){b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveStart("character",
-99999),b.moveStart("character",d),b.moveEnd("character",a-d),b.select())});p("dojo-bidi")&&(m=q("dijit.form.TextBox",m,{_setPlaceHolderAttr:function(b){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return m})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/has dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(q,t,r,s,l,b,p,m){var f=t("dijit.form._TextBoxMixin"+(s("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,
propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(b,f,e){var l;void 0!==b&&(l=this.filter(b),"string"!=typeof e&&(e=null===l||"number"==typeof l&&isNaN(l)?"":this.filter(this.format(l,this.constraints))));null==e||"number"==typeof e&&isNaN(e)||this.textbox.value==e||(this.textbox.value=e,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[l,f])},displayedValue:"",
_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(b){null==b?b="":"string"!=typeof b&&(b=String(b));this.textbox.value=b;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(b){return null==b?"":b.toString?b.toString():b},parse:function(b){return b},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(b){this._processInput(b);this.intermediateChanges&&
this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(b){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(p(this.textbox,"keydown, keypress, paste, cut, input, compositionend",b.hitch(this,function(d){var f;if("keydown"==d.type){f=d.keyCode;switch(f){case l.SHIFT:case l.ALT:case l.CTRL:case l.META:case l.CAPS_LOCK:case l.NUM_LOCK:case l.SCROLL_LOCK:return}if(!d.ctrlKey&&
!d.metaKey&&!d.altKey){switch(f){case l.NUMPAD_0:case l.NUMPAD_1:case l.NUMPAD_2:case l.NUMPAD_3:case l.NUMPAD_4:case l.NUMPAD_5:case l.NUMPAD_6:case l.NUMPAD_7:case l.NUMPAD_8:case l.NUMPAD_9:case l.NUMPAD_MULTIPLY:case l.NUMPAD_PLUS:case l.NUMPAD_ENTER:case l.NUMPAD_MINUS:case l.NUMPAD_PERIOD:case l.NUMPAD_DIVIDE:return}if(65<=f&&90>=f||48<=f&&57>=f||f==l.SPACE)return;f=!1;for(var e in l)if(l[e]===d.keyCode){f=!0;break}if(!f)return}}(f=32<=d.charCode?String.fromCharCode(d.charCode):d.charCode)||
(f=65<=d.keyCode&&90>=d.keyCode||48<=d.keyCode&&57>=d.keyCode||d.keyCode==l.SPACE?String.fromCharCode(d.keyCode):d.keyCode);f||(f=229);if("keypress"==d.type){if("string"!=typeof f)return;if("a"<=f&&"z">=f||"A"<=f&&"Z">=f||"0"<=f&&"9">=f||" "===f)if(d.ctrlKey||d.metaKey||d.altKey)return}if("input"==d.type){if(this.__skipInputEvent){this.__skipInputEvent=!1;return}}else this.__skipInputEvent=!0;var m={faux:!0},a;for(a in d)"layerX"!=a&&"layerY"!=a&&(e=d[a],"function"!=typeof e&&"undefined"!=typeof e&&
(m[a]=e));b.mixin(m,{charOrCode:f,_wasConsumed:!1,preventDefault:function(){m._wasConsumed=!0;d.preventDefault()},stopPropagation:function(){d.stopPropagation()}});!1===this.onInput(m)&&(m.preventDefault(),m.stopPropagation());m._wasConsumed||(this.defer(function(){this._onInput(m)}),"keypress"==d.type&&d.stopPropagation())})))},_blankValue:"",filter:function(d){if(null===d)return this._blankValue;if("string"!=typeof d)return d;this.trim&&(d=b.trim(d));this.uppercase&&(d=d.toUpperCase());this.lowercase&&
(d=d.toLowerCase());this.propercase&&(d=d.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}));return d},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(b){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(d){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==d&&(this._selectOnClickHandle=p.once(this.domNode,
"mouseup, touchend",b.hitch(this,function(b){this._isTextSelected()||f.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});s("dojo-bidi")&&(f=t("dijit.form._TextBoxMixin",f,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},
_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));f._setSelectionRange=m._setSelectionRange=function(b,f,e){b.setSelectionRange&&b.setSelectionRange(f,e)};f.selectInputText=m.selectInputText=function(b,k,e){b=r.byId(b);isNaN(k)&&(k=0);isNaN(e)&&(e=b.value?b.value.length:0);try{b.focus(),f._setSelectionRange(b,k,e)}catch(l){}};return f})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare",
"../Calendar","./_DateTimeTextBox"],function(q,t,r){return q("dijit.form.DateTextBox",r,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:t,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){var v=s("dijit.Calendar",[e,n,a],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){p.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new v._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:f.hitch(this,
"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",f.hitch(this,"_onKeyDown")),d(this.dateRowsNode,"mouseover",f.hitch(this,"_onDayMouseOver")),d(this.dateRowsNode,"mouseout",f.hitch(this,"_onDayMouseOut")),d(this.dateRowsNode,"mousedown",f.hitch(this,"_onDayMouseDown")),d(this.dateRowsNode,"mouseup",f.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);
b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){(a=b.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(b.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||a.relatedTarget&&
a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",b.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),b.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate")&&(b.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&b.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,c,d=this.currentFocus;switch(a.keyCode){case m.RIGHT_ARROW:b=1;case m.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case m.DOWN_ARROW:b=1;case m.UP_ARROW:c="week";break;case m.PAGE_DOWN:b=1;case m.PAGE_UP:c=a.ctrlKey||a.altKey?"year":"month";break;case m.END:d=this.dateModule.add(d,"month",1),c="day";case m.HOME:d=new this.dateClassObj(d);d.setDate(1);break;default:return!0}c&&(d=this.dateModule.add(d,c,b));this._setCurrentFocusAttr(d);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});v._MonthDropDownButton=s("dijit.Calendar._MonthDropDownButton",g,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new v._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==k("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});v._MonthDropDown=s("dijit.Calendar._MonthDropDown",[n,c],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(a){this.domNode.innerHTML=q.map(a,
function(a,b){return a?"<div class='dijitCalendarMonthLabel' month='"+b+"'>"+a+"</div>":""}).join("")},_onClick:function(a){this.onChange(l.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){b.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return v})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c){var g=t("dijit.CalendarLite",[n,a],{templateString:c,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',
value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,c){"string"==
typeof a&&(a=b.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(c||"undefined"==typeof c))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},
_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var b=a.getDay(),c=this.dateModule.getDaysInMonth(a),d=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),g=new this.dateClassObj,e=r.getFirstDayOfWeek(this.lang);e>b&&(e-=7);if(!this.summary){var f=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",f[a.getMonth()])}this._date2cell={};q.forEach(this.dateCells,function(f,k){var l=k+e,m=new this.dateClassObj(a),
n="dijitCalendar",p=0;l<b?(l=d-b+l+1,p=-1,n+="Previous"):l>=b+c?(l=l-b-c+1,p=1,n+="Next"):(l=l-b+1,n+="Current");p&&(m=this.dateModule.add(m,"month",p));m.setDate(l);this.dateModule.compare(m,g,"date")||(n="dijitCalendarCurrentDate "+n);this.isDisabledDate(m,this.lang)?(n="dijitCalendarDisabledDate "+n,f.setAttribute("aria-disabled","true")):(n="dijitCalendarEnabledDate "+n,f.removeAttribute("aria-disabled"),f.setAttribute("aria-selected","false"));(p=this.getClassForDate(m,this.lang))&&(n=p+" "+
n);f.className=n+"Month dijitCalendarDateTemplate";n=m.valueOf();this._date2cell[n]=f;f.dijitDateValue=n;this._setText(this.dateLabels[k],m.getDateLocalized?m.getDateLocalized(this.lang):m.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;q.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,
{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?f.getObject(a.datePackage,!1):s;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?f.getObject(a.datePackage+".locale",!1):l},_createMonthWidget:function(){return g._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,
b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=r.getFirstDayOfWeek(this.lang);this.dayCellsHtml=e.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=e.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);p.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",
a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=f.hitch(this,function(a,b,c){return d(this[a],"click",f.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c);a=this._patchDate(a);
this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(c,a,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();d&&d!=c&&(k("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&
!a.dijitDateValue;a=a.parentNode);a&&!m.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,c){m.toggle(c,"dijitCalendarSelectedDate",a);c.setAttribute("aria-selected",a?"true":"false")}q.forEach(this._selectedCells||[],f.partial(b,!1));this._selectedCells=q.filter(q.map(a,this._getNodeByDate,this),function(a){return a});q.forEach(this._selectedCells,
f.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});g._MonthWidget=t("dijit.CalendarLite._MonthWidget",n,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),c=6==k("ie")?"":"<div class='dijitSpacer'>"+q.map(b,function(a){return"<div>"+a+"</div>"}).join("")+"</div>";this.domNode.innerHTML=c+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});return g})},
"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(q,t,r,s,l,b,p,m){new Date("X");return s("dijit.form._DateTimeTextBox",[b,p],{templateString:m,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:t.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,
d){var k=this._isInvalidDate(b),e=this._isInvalidDate(d);return k?e?0:-1:e?1:q.compare(b,d,this._selector)},autoWidth:!0,format:function(b,d){return b?this.dateLocaleModule.format(b,d):""},parse:function(b,d){return this.dateLocaleModule.parse(b,d)||(this._isEmpty(b)?null:void 0)},serialize:function(b,d){b.toGregorian&&(b=b.toGregorian());return r.toISOString(b,d)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){this.dateModule=
b.datePackage?l.getObject(b.datePackage,!1):q;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?l.getObject(b.datePackage+".locale",!1):t;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(b){b.selector=
this._selector;b.fullYear=!0;var d=r.fromISOString;"string"==typeof b.min&&(b.min=d(b.min));"string"==typeof b.max&&(b.max=d(b.max));this.inherited(arguments)},_isInvalidDate:function(b){return!b||isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,d,k){void 0!==b&&("string"==typeof b&&(b=r.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments);this.value instanceof
Date&&(this.filterString="");this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,d){var k=this._get("value");"value"==b&&k instanceof Date&&0==this.compare(d,k)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this._set("dropDownDefaultValue",b)},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var d=l.isString(this.popupClass)?l.getObject(this.popupClass,!1):this.popupClass,k=this,e=this.get("value");
this.dropDown=new d({onChange:function(b){k.set("value",b,!0)},id:this.id+"_popup",dir:k.dir,lang:k.lang,value:e,textDir:k.textDir,currentFocus:this._isInvalidDate(e)?this.dropDownDefaultValue:e,constraints:k.constraints,filterString:k.filterString,datePackage:k.params.datePackage,isDisabledDate:function(b){return!k.rangeCheck(b,k.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,d){this._setValueAttr(this.parse(b,
this.constraints),d,b)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(q,t,r){return q("dijit.form.RangeBoundTextBox",r,{rangeMessage:"",rangeCheck:function(q,l){return("min"in l?0<=this.compare(q,l.min):!0)&&("max"in l?0>=this.compare(q,l.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var q=this.get("value");if(null==q)return!1;var l=!1;"min"in this.constraints&&
(l=this.constraints.min,l=0>this.compare(q,"number"==typeof l&&0<=l&&0!=q?0:l));!l&&"max"in this.constraints&&(l=this.constraints.max,l=0<this.compare(q,"number"!=typeof l||0<l?l:0));return l},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(q){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(q))},getErrorMessage:function(q){var l=this.get("value");return null==l||""===l||"number"==typeof l&&
isNaN(l)||this.isInRange(q)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=t.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(q,t,r,s){return q("dijit.form.MappedTextBox",s,{postMixInProperties:function(){this.inherited(arguments);
this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(l){return l.toString?l.toString():""},toString:function(){var l=this.filter(this.get("value"));return null!=l?"string"==typeof l?l:this.serialize(l,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=r.place("<input type='hidden'"+(this.name&&!t("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+
"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(q,t,r,s,l,b){var p;return p=q("dijit.form.ValidationTextBox",s,{templateString:b,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",
regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,f){f!=p.prototype[b]&&(t.deprecated("ValidationTextBox id="+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",f))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",b);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},
validator:function(b,f){return RegExp("^(?:"+this._computeRegexp(f)+")"+(this.required?"":"?")+"$").test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,f))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:
this.invalidMessage?this.invalidMessage:this.promptMessage,f="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:b;return this.required&&this._isEmpty(this.textbox.value)?f:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var f="",d=this.disabled||this.isValid(b);d&&(this._maskValidSubsetError=!0);var k=this._isEmpty(this.textbox.value),e=!d&&b&&this._isValidSubset();this._set("state",d?"":((!this._hasBeenBlurred||
b)&&k||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",d?"false":"true");"Error"==this.state?(this._maskValidSubsetError=b&&e,f=this.getErrorMessage(b)):"Incomplete"==this.state?(f=this.getPromptMessage(b),this._maskValidSubsetError=!this._hasBeenBlurred||b):k&&(f=this.getPromptMessage(b));this.set("message",f);return d},displayMessage:function(b){b&&this.focused?l.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):
l.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(b){this.constraints={};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){!b.locale&&this.lang&&(b.locale=this.lang);this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b);this._refreshState()},_computeRegexp:function(b){var f=
this.pattern;"function"==typeof f&&(f=f.call(this,b));if(f!=this._lastRegExp){var d="";this._lastRegExp=f;".*"!=f&&f.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":d+=b;break;case ")":d+="|$)";break;default:d+="(?:"+b+"|$)"}});try{"".search(d)}catch(k){d=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+d+")$"}return f},postMixInProperties:function(){this.inherited(arguments);
this.messages=r.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");
this.inherited(arguments)}})})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(q,t,r,s,l,b,p,m){return q("dijit.form.Form",[l,b,p,m],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){t.set(this.domNode,"encType",b);s("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(b){var d={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:b?b.target:this.domNode,target:b?b.target:this.domNode};!1!==this.onReset(d)&&d.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(b){this.reset(b);b.stopPropagation();b.preventDefault();return!1},_onSubmit:function(b){var d=this.constructor.prototype;if(this.execute!=d.execute||this.onExecute!=d.onExecute)r.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(b)&&(b.stopPropagation(),b.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(q,t,r,s,l){return q("dijit.form.FilteringSelect",[s,l],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},
_callbackSetLabel:function(b,l,m,f){l&&l[this.searchAttr]!==this._lastQuery||!l&&b.length&&this.store.getIdentity(b[0])!=this._lastQuery||(b.length?this.set("item",b[0],f):this.set("value","",f||void 0===f&&!this.focused,this.textbox.value,null))},_openResultList:function(b,l,m){l[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(b,
l,m,f){this._onChangeActive||(l=null);if(void 0===f){if(null===b||""===b)if(b="",!t.isString(m)){this._setDisplayedValueAttr(m||"",l);return}var d=this;this._lastQuery=b;r(this.store.get(b),function(b){d._callbackSetLabel(b?[b]:[],void 0,void 0,l)})}else this.valueNode.value=b,this.inherited(arguments)},_setItemAttr:function(b,l,m){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(b){return b.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(b,
l){null==b&&(b="");if(!this._created){if(!("displayedValue"in this.params))return;l=!1}if(this.store){this.closeDropDown();var m=t.clone(this.query),f=this._getDisplayQueryString(b),d;this.store._oldAPI?d=f:(d=this._patternToRegExp(f),d.toString=function(){return f});this._lastQuery=m[this.searchAttr]=d;this._lastDisplayedValue=this.textbox.value=b;this._set("displayedValue",b);var k=this,e={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};t.mixin(e,this.fetchProperties);this._fetchHandle=this.store.query(m,
e);r(this._fetchHandle,function(b){k._fetchHandle=null;k._callbackSetLabel(b||[],m,e,l)},function(b){k._fetchHandle=null;k._cancelingQuery||console.error("dijit.form.FilteringSelect: "+b.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(q,t,r,s,l,b,p,m,f){return q("dijit.form.ComboBoxMixin",[m,b],{dropDownClass:p,hasDownArrow:!0,templateString:f,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(b){this._set("hasDownArrow",b);this._buttonNode.style.display=b?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(b){b.get||s.mixin(b,{_oldAPI:!0,get:function(b){var d=new t;this.fetchItemByIdentity({identity:b,
onItem:function(b){d.resolve(b)},onError:function(b){d.reject(b)}});return d.promise},query:function(b,d){var f=new t(function(){a.abort&&a.abort()});f.total=new t;var a=this.fetch(s.mixin({query:b,onBegin:function(a){f.total.resolve(a)},onComplete:function(a){f.resolve(a)},onError:function(a){f.reject(a)}},d));return l(f)}});this._set("store",b)},postMixInProperties:function(){var b=this.params.store||this.store;b&&this._setStoreAttr(b);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var f=
this.declaredClass;s.mixin(this.store,{getValue:function(b,d){r.deprecated(f+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return b[d]},getLabel:function(b){r.deprecated(f+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return b.name},fetch:function(b){r.deprecated(f+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],s.hitch(this,function(d){(new d({objectStore:this})).fetch(b)}))}})}}})})},
"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(q,t,r,s,l,b,p,m,f,d,k){t=t("dijit.form._AutoCompleterMixin",k,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(b){var d=0;if("number"==typeof b.selectionStart)d=b.selectionStart;else if(m("ie")){var a=
b.ownerDocument.selection.createRange().duplicate();b=b.createTextRange();a.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",a),d=String(b.text).replace(/\r/g,"").length}catch(c){}}return d},_setCaretPos:function(b,f){f=parseInt(f);d.selectInputText(b,f,f)},_setDisabledAttr:function(b){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",b?"true":"false")},_onKey:function(b){if(!(32<=b.charCode)){var d=b.charCode||b.keyCode;if(d!=s.ALT&&d!=s.CTRL&&d!=s.META&&d!=
s.SHIFT){var a=this.dropDown,c=null;this._abortQuery();this.inherited(arguments);if(!(b.altKey||b.ctrlKey||b.metaKey))switch(this._opened&&(c=a.getHighlightedOption()),d){case s.PAGE_DOWN:case s.DOWN_ARROW:case s.PAGE_UP:case s.UP_ARROW:this._opened&&this._announceOption(c);b.stopPropagation();b.preventDefault();break;case s.ENTER:if(c){if(c==a.nextButton){this._nextSearch(1);b.stopPropagation();b.preventDefault();break}else if(c==a.previousButton){this._nextSearch(-1);b.stopPropagation();b.preventDefault();
break}b.stopPropagation();b.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case s.TAB:d=this.get("displayedValue");if(a&&(d==a._messages.previousMessage||d==a._messages.nextMessage))break;c&&this._selectOption(c);case s.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(b){var f=this.focusNode;d.selectInputText(f,f.value.length);var a=this.ignoreCase?"toLowerCase":"substr";0==b[a](0).indexOf(this.focusNode.value[a](0))?
(a=this.autoComplete?this._getCaretPos(f):f.value.length,a+1>f.value.length&&(f.value=b,d.selectInputText(f,a))):(f.value=b,d.selectInputText(f))},_openResultList:function(b,d,a){var c=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();b.length||0!=a.start?(this._nextSearch=this.dropDown.onPage=l.hitch(this,function(a){b.nextPage(-1!==a);this.focus()}),this.dropDown.createOptions(b,a,l.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in a?(a.direction?this.dropDown.highlightFirstOption():
a.direction||this.dropDown.highlightLastOption(),c&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(d[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();
this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var b=this.get("displayedValue"),d=this.dropDown;!d||b!=d._messages.previousMessage&&b!=d._messages.nextMessage?"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",b)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},
_setItemAttr:function(b,d,a){var c="";b&&(a||(a=this.store._oldAPI?this.store.getValue(b,this.searchAttr):b[this.searchAttr]),c=this._getValueField()!=this.searchAttr?this.store.getIdentity(b):a);this.set("value",c,d,a,b)},_announceOption:function(b){if(b){var d;if(b==this.dropDown.nextButton||b==this.dropDown.previousButton)d=b.innerHTML,this.item=void 0,this.value="";else{var a=this.dropDown.items[b.getAttribute("item")];d=(this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]).toString();
this.set("item",a,!1,d)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",r.get(b,"id"));this._autoCompleteText(d)}},_selectOption:function(b){this.closeDropDown();b&&this._announceOption(b);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=
void 0;this.inherited(arguments)},_startSearch:function(b){if(!this.dropDown){var d=this.id+"_popup";this.dropDown=new (l.isString(this.dropDownClass)?l.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:l.hitch(this,this._selectOption),id:d,dir:this.dir,textDir:this.textDir})}this._lastInput=b;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!(this.store||(this.store=new f({},this.srcNodeRef),"value"in
this.params))){var b=this.item=this.store.fetchSelectedItem();if(b){var d=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(b,d):b[d]}}},postCreate:function(){var d=b('label[for="'+this.id+'"]');d.length&&(d[0].id||(d[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",d[0].id));this.inherited(arguments);q.after(this,"onSearch",l.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(b){b=this.labelFunc(b,this.store);var d=this.labelType;"none"!=this.highlightMatch&&
"text"==this.labelType&&this._lastInput&&(b=this.doHighlight(b,this._lastInput),d="html");return{html:"html"==d,label:b}},doHighlight:function(b,d){var a=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),c=this.queryExpr.indexOf("${0}");d=p.escapeString(d);return this._escapeHtml(b.replace(RegExp((0==c?"^":"")+"("+d+")"+(c==this.queryExpr.length-4?"$":""),a),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(b){return b=
String(b).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(b,d){return(d._oldAPI?d.getValue(b,this.labelAttr||this.searchAttr):b[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(b,d,a,c){this._set("item",c||null);null==b&&(b="");this.inherited(arguments)}});m("dojo-bidi")&&t.extend({_setTextDirAttr:function(b){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",
b)}});return t})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(q,t,r,s,l,b){function p(b){return{id:b.value,value:b.value,name:r.trim(b.innerText||b.textContent||"")}}return q("dijit.form.DataList",l,{constructor:function(l,f){this.domNode=t.byId(f);r.mixin(this,l);this.id&&b.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:s("option",this.domNode).map(p)}])},destroy:function(){b.remove(this.id)},
fetchSelectedItem:function(){var b=s("> option[selected]",this.domNode)[0]||s("> option",this.domNode)[0];return b&&p(b)}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(q,t,r){return q("dojo.store.Memory",null,{constructor:function(q){for(var l in q)this[l]=q[l];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:r,get:function(q){return this.data[this.index[q]]},getIdentity:function(q){return q[this.idProperty]},
put:function(q,l){var b=this.data,p=this.index,m=this.idProperty,m=q[m]=l&&"id"in l?l.id:m in q?q[m]:Math.random();if(m in p){if(l&&!1===l.overwrite)throw Error("Object already exists");b[p[m]]=q}else p[m]=b.push(q)-1;return m},add:function(q,l){(l=l||{}).overwrite=!1;return this.put(q,l)},remove:function(q){var l=this.index,b=this.data;if(q in l)return b.splice(l[q],1),this.setData(b),!0},query:function(q,l){return t(this.queryEngine(q,l)(this.data))},setData:function(q){q.items?(this.idProperty=
q.identifier,q=this.data=q.items):this.data=q;this.index={};for(var l=0,b=q.length;l<b;l++)this.index[q[l][this.idProperty]]=l}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(q){return function(t,r){function s(b){b=q.filter(b,t);var l=r&&r.sort;l&&b.sort("function"==typeof l?l:function(b,d){for(var k,e=0;k=l[e];e++){var m=b[k.attribute],a=d[k.attribute],m=null!=m?m.valueOf():m,a=null!=a?a.valueOf():a;if(m!=a)return!!k.descending==(null==m||m>a)?-1:1}return 0});
if(r&&(r.start||r.count)){var m=b.length;b=b.slice(r.start||0,(r.start||0)+(r.count||Infinity));b.total=m}return b}switch(typeof t){default:throw Error("Can not query with a "+typeof t);case "object":case "undefined":var l=t;t=function(b){for(var p in l){var m=l[p];if(m&&m.test){if(!m.test(b[p],b))return!1}else if(m!=b[p])return!1}return!0};break;case "string":if(!this[t])throw Error("No filter function "+t+" was found in store");t=this[t];case "function":}s.matches=t;return s}})},"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),
function(q,t,r,s,l,b,p){return q("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(b){return RegExp("^"+b.replace(/(\\.)|(\*)|(\?)|\W/g,function(b,d,k,e){return k?".*":e?".":d?d:"\\"+b})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());
this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(b){if(!this.disabled&&!this.readOnly){var f=b.charOrCode;if(!("type"in b&&"key"==b.type.substring(0,3)&&(b.altKey||(b.ctrlKey||b.metaKey)&&"x"!=f&&"v"!=f||f==t.SHIFT))){this._prev_key_backspace=b=!1;switch(f){case t.DELETE:case t.BACKSPACE:b=
this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:b="string"==typeof f||229==f}if(b)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(m){this._abortQuery();var f=this,d=r.clone(this.query),k={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},e=l.substitute(this.queryExpr,[m.replace(/([\\\*\?])/g,
"\\$1")]),n,a=function(){var c=f._fetchHandle=f.store.query(d,k);f.disabled||f.readOnly||n!==f._lastQuery||b(c,function(g){f._fetchHandle=null;f.disabled||f.readOnly||n!==f._lastQuery||b(c.total,function(b){g.total=b;var c=f.pageSize;if(isNaN(c)||c>g.total)c=g.total;g.nextPage=function(b){k.direction=b=!1!==b;k.count=c;b?(k.start+=g.length,k.start>=g.total&&(k.count=0)):(k.start-=c,0>k.start&&(k.count=Math.max(c+k.start,0),k.start=0));0>=k.count?(g.length=0,f.onSearch(g,d,k)):a()};f.onSearch(g,d,
k)})},function(a){f._fetchHandle=null;f._cancelingQuery||console.error(f.declaredClass+" "+a.toString())})};r.mixin(k,this.fetchProperties);this.store._oldAPI?n=e:(n=this._patternToRegExp(e),n.toString=function(){return e});this._lastQuery=d[this.searchAttr]=n;this._queryDeferHandle=this.defer(a,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var b=this.list;b&&(this.store=p.byId(b))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),
function(q,t,r,s,l,b,p,m){return q("dijit.form._ComboBoxMenu",[l,b,m,p],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);
this.isLeftToRight()||(t.add(this.previousButton,"dijitMenuItemRtl"),t.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){t.add(b,"dijitMenuItemHover")},onUnhover:function(b){t.remove(b,"dijitMenuItemHover")},onSelect:function(b){t.add(b,"dijitMenuItemSelected")},
onDeselect:function(b){t.remove(b,"dijitMenuItemSelected")},_page:function(b){var d=0,k=this.domNode.scrollTop,e=r.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();d<e;){var l=this.getHighlightedOption();if(b){if(!l.previousSibling||"none"==l.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!l.nextSibling||"none"==l.nextSibling.style.display)break;this.selectNextNode()}l=this.domNode.scrollTop;d+=(l-k)*(b?-1:1);k=l}},handleKey:function(b){switch(b.keyCode){case s.DOWN_ARROW:return this.selectNextNode(),
!1;case s.PAGE_DOWN:return this._page(!1),!1;case s.UP_ARROW:return this.selectPreviousNode(),!1;case s.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(q,t,r,s,l){var b=t("dijit.form._ComboBoxMenuMixin"+(s("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=
l.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(b){this._set("value",b);this.onChange(b)},onClick:function(b){if(b==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(b==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(b)},onChange:function(){},onPage:function(){},
onClose:function(){this._setSelectedAttr(null)},_createOption:function(b,l){var f=this._createMenuItem(),d=l(b);d.html?f.innerHTML=d.label:f.appendChild(f.ownerDocument.createTextNode(d.label));""==f.innerHTML&&(f.innerHTML="&#160;");return f},createOptions:function(b,l,f){this.items=b;this.previousButton.style.display=0==l.start?"none":"";r.set(this.previousButton,"id",this.id+"_prev");q.forEach(b,function(b,d){var l=this._createOption(b,f);l.setAttribute("item",d);r.set(l,"id",this.id+d);this.nextButton.parentNode.insertBefore(l,
this.nextButton)},this);var d=!1;b.total&&!b.total.then&&-1!=b.total?l.start+l.count<b.total?d=!0:l.start+l.count>b.total&&l.count==b.length&&(d=!0):l.count==b.length&&(d=!0);this.nextButton.style.display=d?"":"none";r.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var b=this.containerNode;2<b.childNodes.length;)b.removeChild(b.childNodes[b.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},
selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});s("dojo-bidi")&&(b=t("dijit.form._ComboBoxMenuMixin",b,{_createOption:function(){var b=this.inherited(arguments);this.applyTextDir(b);return b}}));return b})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare",
"dojo/on","dojo/touch","./_ListBase"],function(q,t,r,s){return q("dijit.form._ListMouseMixin",s,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this.own(t(this.domNode,"mousedown",function(l){l.preventDefault()}));this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover","_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(l,b){this._setSelectedAttr(b);
this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(b)})},_onMouseDown:function(l,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(b)},_onMouseUp:function(l,b){this._isDragging=!1;var p=this.selected,m=this._hoveredNode;p&&b==p?this.defer(function(){this._onClick(l,p)}):m&&this.defer(function(){this._onClick(l,m)})},_onMouseOut:function(l,b){this._hoveredNode&&
(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(l,b){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=b;this.onHover(b);this._isDragging&&this._setSelectedAttr(b)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(q,t,r){return q("dijit.form._ListBase",null,{selected:null,_listConnect:function(q,
l){var b=this;return b.own(t(b.containerNode,t.selector(function(b,l,f){return b.parentNode==f},q),function(p){/^touch/.test(p.type)||p.preventDefault();b[l](p,this)}))},selectFirstNode:function(){for(var q=this.containerNode.firstChild;q&&"none"==q.style.display;)q=q.nextSibling;this._setSelectedAttr(q)},selectLastNode:function(){for(var q=this.containerNode.lastChild;q&&"none"==q.style.display;)q=q.previousSibling;this._setSelectedAttr(q)},selectNextNode:function(){var q=this.selected;if(q){for(q=
q.nextSibling;q&&"none"==q.style.display;)q=q.nextSibling;q?this._setSelectedAttr(q):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var q=this.selected;if(q){for(q=q.previousSibling;q&&"none"==q.style.display;)q=q.previousSibling;q?this._setSelectedAttr(q):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(q){if(this.selected!=q){var l=this.selected;if(l)this.onDeselect(l);q&&(r.scrollIntoView(q),this.onSelect(q));this._set("selected",q)}else if(q)this.onSelect(q)}})})},
"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(q,t,r,s){return q("dijit.form.Textarea",[s,r],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);t.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),
function(q,t,r,s,l,b,p){r.add("textarea-needs-help-shrinking",function(){var l=b.body(),f=t.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},l,"last"),d=f.scrollHeight>=f.clientHeight;l.removeChild(f);return d});return q("dijit.form._ExpandingTextAreaMixin",
null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var b=this.textbox;b.style.overflowY="hidden";this.own(l(b,"focus, resize",s.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(p.on("resize",s.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(b){this.inherited(arguments);this.resize()},_estimateHeight:function(){var b=this.textbox;b.rows=(b.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},
resize:function(){function b(){var a=!1;""===f.value&&(f.value=" ",a=!0);var c=f.scrollHeight;a&&(f.value="");return c}var f=this.textbox;"hidden"==f.style.overflowY&&(f.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(b()||f.offsetHeight){var d=b()+Math.max(f.offsetHeight-f.clientHeight,0),k=d+"px";k!=f.style.height&&(f.style.height=k,f.rows=1);if(r("textarea-needs-help-shrinking")){var e=b(),l=f.style.minHeight,a=4,c=f.scrollTop;f.style.minHeight=k;for(f.style.height="auto";0<d;){f.style.minHeight=
Math.max(d-a,4)+"px";k=b();e-=k;d-=e;if(e<a)break;e=k;a<<=1}f.style.height=d+"px";f.style.minHeight=l;f.scrollTop=c}f.style.overflowY=b()>f.clientHeight?"auto":"hidden";"hidden"==f.style.overflowY&&(f.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(q,t,r,s){return q("dijit.form.SimpleTextarea",s,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);r("ie")&&this.cols&&t.add(this.textbox,"dijitTextAreaCols")},filter:function(l){l&&(l=l.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(l){if(this.maxLength){var b=parseInt(this.maxLength),p=this.textbox.value.replace(/\r/g,""),b=p.length-b;if(0<b){var m=this.textbox;if(m.selectionStart){var f=m.selectionStart,
d=0;r("opera")&&(d=(this.textbox.value.substring(0,f).match(/\r/g)||[]).length);this.textbox.value=p.substring(0,f-b-d)+p.substring(f-d);m.setSelectionRange(f-b,f-b)}else this.ownerDocument.selection&&(m.focus(),p=this.ownerDocument.selection.createRange(),p.moveStart("character",-b),p.text="",p.select())}}this.inherited(arguments)}})})},"dijit/form/NumberTextBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(q,t,r,s){var l=q("dijit.form.NumberTextBoxMixin",
null,{pattern:function(b){return"("+(this.focused&&this.editOptions?this._regExpGenerator(t.delegate(b,this.editOptions))+"|":"")+this._regExpGenerator(b)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:r.format,_regExpGenerator:r.regexp,postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(b){var l="number"==typeof b.places?b.places:0;l&&l++;"number"!=typeof b.max&&(b.max=9*Math.pow(10,15-l));"number"!=typeof b.min&&(b.min=-9*Math.pow(10,
15-l));this.inherited(arguments,[b]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var b=this.get("value");"number"!=typeof b||isNaN(b)||(b=this.format(b,this.constraints),void 0!==b&&(this.textbox.value=b));this.inherited(arguments)}},format:function(b,l){var m=String(b);if("number"!=typeof b)return m;if(isNaN(b))return"";if(!("rangeCheck"in this&&this.rangeCheck(b,l))&&!1!==l.exponent&&/\de[-+]?\d/i.test(m))return m;
this.editOptions&&this.focused&&(l=t.mixin({},l,this.editOptions));return this._formatter(b,l)},_parser:r.parse,parse:function(b,l){var m=this._parser(b,t.mixin({},l,this.editOptions&&this.focused?this.editOptions:{}));this.editOptions&&this.focused&&isNaN(m)&&(m=this._parser(b,l));return m},_getDisplayedValueAttr:function(){var b=this.inherited(arguments);return isNaN(b)?this.textbox.value:b},filter:function(b){return null==b||""===b?NaN:this.inherited(arguments)},serialize:function(b,l){return"number"!=
typeof b||isNaN(b)?"":this.inherited(arguments)},_setBlurValue:function(){var b=t.hitch(t.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(b,!0)},_setValueAttr:function(b,l,m){if(void 0!==b&&void 0===m)if(m=String(b),"number"==typeof b)if(isNaN(b))m="";else{if("rangeCheck"in this&&this.rangeCheck(b,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(m))m=void 0}else b?b=void 0:(m="",b=NaN);this.inherited(arguments,[b,l,m])},_getValueAttr:function(){var b=this.inherited(arguments);
if(isNaN(b)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+r._realNumberRegexp(t.delegate(this.constraints))+"$").test(this.textbox.value))return b=Number(this.textbox.value),isNaN(b)?void 0:b}else return b},isValid:function(b){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var l=this.get("value");return!isNaN(l)&&this.rangeCheck(l,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?
!0:this.inherited(arguments):!1}});q=q("dijit.form.NumberTextBox",[s,l],{baseClass:"dijitTextBox dijitNumberTextBox"});q.Mixin=l;return q})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(q,t,r){return q("dijit.form.ComboBox",[t,r],{})})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(q,t,r,s,l){return q("dijit.form.TimeTextBox",l,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",
popupClass:s,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(b){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),b.keyCode){case t.ENTER:case t.TAB:case t.ESCAPE:case t.DOWN_ARROW:case t.UP_ARROW:break;default:this.defer(function(){var b=this.get("displayedValue");this.filterString=b&&!this.parse(b,this.constraints)?b.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()})}}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){return l("dijit._TimePicker",[c,g],{baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:s.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){m.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");
this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,d){a=[];for(b=0;b<this._maxIncrement;b++)(c=this._createOption(b))&&a.push(c);return a},_showText:function(){var a=s.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);var b=
function(a){return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds()},c=b(this._clickableIncrementDate),b=b(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=a("T00:00:00");this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=b/c;this._maxIncrement=86400/c;a=this._getFilteredNodes();q.forEach(a,function(a){this.domNode.appendChild(a)},this);!a.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints=
{}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in{clickableIncrement:1,visibleIncrement:1})b in a&&(this[b]=a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var c=new Date(this._refDate),d=this._clickableIncrementDate;c.setHours(c.getHours()+d.getHours()*a,c.getMinutes()+d.getMinutes()*a,c.getSeconds()+d.getSeconds()*a);"time"==this.constraints.selector&&c.setFullYear(1970,0,1);d=r.format(c,
this.constraints);if(this.filterString&&0!==d.toLowerCase().indexOf(this.filterString))return null;var g=this.ownerDocument.createElement("div");g.className=this.baseClass+"Item";g.date=c;g.idx=a;p.create("div",{"class":this.baseClass+"ItemInner",innerHTML:d},g);1>a%this._visibleIncrement&&-1<a%this._visibleIncrement?b.add(g,this.baseClass+"Marker"):a%this._clickableIncrement||b.add(g,this.baseClass+"Tick");this.isDisabledDate(c)&&b.add(g,this.baseClass+"ItemDisabled");this.value&&!t.compare(this.value,
c,this.constraints.selector)&&(g.selected=!0,b.add(g,this.baseClass+"ItemSelected"),this._selectedDiv=g,b.contains(g,this.baseClass+"Marker")?b.add(g,this.baseClass+"MarkerSelected"):b.add(g,this.baseClass+"TickSelected"),this._highlightOption(g,!0));return g},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(a){(a=a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a)&&(this._highlighted_option=null,this.set("value",a),this.onChange(a))},
onChange:function(){},_highlightOption:function(a,c){if(a){if(c)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}b.toggle(a,this.baseClass+"ItemHover",c);b.contains(a,this.baseClass+"Marker")?b.toggle(a,this.baseClass+"MarkerHover",c):b.toggle(a,this.baseClass+"TickHover",c)}},handleKey:function(a){if(a.keyCode==f.DOWN_ARROW)return this.selectNextNode(),a.stopPropagation(),
a.preventDefault(),!1;if(a.keyCode==f.UP_ARROW)return this.selectPreviousNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==f.ENTER||a.keyCode===f.TAB){if(!this._keyboardSelected&&a.keyCode===f.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});return a.keyCode===f.TAB}},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,
!1)},onClick:function(a){this._onOptionSelected({target:a})}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u){function z(a){return function(b){this._isLoaded?
this.inherited(a,arguments):this.loadDropDown(p.hitch(this,a,b))}}var A=t("dijit.form._SelectMenu",e,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(m(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;p.isArray(b)&&(b=b[b.length-1]);b&&q.forEach(this.parentWidget._getChildren(),function(c){c.option&&
b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)}});l=t("dijit.form.Select"+(f("dojo-bidi")?"_NoBidi":""),[d,k,g],{baseClass:"dijitSelect dijitValidationTextBox",templateString:u,_buttonInputDisabled:f("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||
0;this._set("value",this.options[0<=a?a:0].value)}this.dropDown=new A({id:this.id+"_menu",parentWidget:this});s.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(b){if(b.value||b.label){var c=p.hitch(this,"_setValueAttr",b);b=new n({option:b,label:b.label||this.emptyLabel,onClick:c,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:b.disabled||!1});b.focusNode.setAttribute("role","option");return b}return new a({ownerDocument:this.ownerDocument})},
_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=
v.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{q.forEach(this._getChildren(),function(a){a.destroyRecursive()});var b=new n({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||
this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);r.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},
_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+a+"</span>"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?
c.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):c.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);c.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=b.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(m(this.domNode,
"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");9>f("ie")&&this.defer(function(){try{var a=domStyle.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_setStyleAttr:function(a){this.inherited(arguments);s.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},
loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){c.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});f("dojo-bidi")&&(l=t("dijit.form.Select",l,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));l._Menu=A;l.prototype._onContainerKeydown=
z("_onContainerKeydown");l.prototype._onContainerKeypress=z("_onContainerKeypress");return l})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(q,t,r,s,l,b){return q("dijit.MenuSeparator",[r,s,l],{templateString:b,buildRendering:function(){this.inherited(arguments);t.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare",
"dojo/keys","./_Spinner","./NumberTextBox"],function(q,t,r,s){return q("dijit.form.NumberSpinner",[r,s.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(l,b){var p=this.constraints,m=isNaN(l),f=!isNaN(p.max),d=!isNaN(p.min);m&&0!=b&&(l=0<b?d?p.min:f?p.max:0:f?this.constraints.max:d?p.min:0);var k=l+b;if(m||isNaN(k))return l;f&&k>p.max&&(k=p.max);d&&k<p.min&&(k=p.min);return k},_onKeyDown:function(l){if(!(this.disabled||this.readOnly||l.keyCode!=t.HOME&&l.keyCode!=t.END||
l.ctrlKey||l.altKey||l.metaKey||"undefined"==typeof this.get("value"))){var b=this.constraints[l.keyCode==t.HOME?"min":"max"];"number"==typeof b&&this._setValueAttr(b,!1);l.stopPropagation();l.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),function(q,t,r,s,l,b,p,m,f,d){return q("dijit.form._Spinner",m,{defaultTimeout:500,
minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:f,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(b){return b},_arrowPressed:function(b,e,f){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),e*f),!1),d.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(b,d,f){var a=
this.smallDelta;d==this.textbox&&(d=f.keyCode,a=d==t.PAGE_UP||d==t.PAGE_DOWN?this.largeDelta:this.smallDelta,d=d==t.UP_ARROW||d==t.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==b?this._arrowReleased(d):this._arrowPressed(d,d==this.upArrowNode?1:-1,a)},_wheelTimer:null,_mouseWheeled:function(b){b.stopPropagation();b.preventDefault();var d=b.wheelDelta/120;Math.floor(d)!=d&&(d=0<b.wheelDelta?1:-1);b=b.detail?-1*b.detail:d;if(0!==b){var f=this[0<b?"upArrowNode":"downArrowNode"];this._arrowPressed(f,
b,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(f)},50)}},_setConstraintsAttr:function(b){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(b,
d){this.focusNode.setAttribute("aria-valuenow",b);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(b(this.domNode,l.wheel,r.hitch(this,"_mouseWheeled")),p.addListener(this.upArrowNode,this.textbox,{keyCode:t.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.downArrowNode,this.textbox,{keyCode:t.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,
"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.upArrowNode,this.textbox,{keyCode:t.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),p.addListener(this.downArrowNode,this.textbox,{keyCode:t.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"dijit/form/HorizontalSlider":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u,z,A,y){var C=t("dijit.form._SliderMover",k,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=l.position(b.sliderBarContainer,!0),b._setPixelValue_=m.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(a){k.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,
!0)}});r=t("dijit.form.HorizontalSlider",[z,A],{templateString:y,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:c.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",
_onKeyUp:function(a){this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey||this._setValueAttr(this.value,!0)},_onKeyDown:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey)){switch(a.keyCode){case p.HOME:this._setValueAttr(this.minimum,!1);break;case p.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?p.RIGHT_ARROW:p.LEFT_ARROW:case !1===this._descending?p.DOWN_ARROW:p.UP_ARROW:case !1===this._descending?p.PAGE_DOWN:p.PAGE_UP:this.increment(a);
break;case this._descending||this.isLeftToRight()?p.LEFT_ARROW:p.RIGHT_ARROW:case !1===this._descending?p.UP_ARROW:p.DOWN_ARROW:case !1===this._descending?p.PAGE_UP:p.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){this.disabled||this.readOnly||(f("ie")||g.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&
this.clickSelect){g.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=l.position(this.sliderBarContainer,!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;if(1>=d||Infinity==d)d=b;d--;a=Math.round(a/(b/d));this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*
a/d+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments);var c=(a-this.minimum)/(this.maximum-this.minimum),d=!1===this._descending?this.remainingBar:this.progressBar,g=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(b&&0<this.slideDuration&&d.style[this._progressPixelSize]){var e=
this,f={},k=parseFloat(d.style[this._progressPixelSize]),l=this.slideDuration*(c-k/100);0!=l&&(0>l&&(l=0-l),f[this._progressPixelSize]={start:k,end:100*c,units:"%"},this._inProgressAnim=s.animateProperty({node:d,duration:l,onAnimate:function(a){g.style[e._progressPixelSize]=100-parseFloat(a[e._progressPixelSize])+"%"},onEnd:function(){delete e._inProgressAnim},properties:f}),this._inProgressAnim.play())}else d.style[this._progressPixelSize]=100*c+"%",g.style[this._progressPixelSize]=100*(1-c)+"%"},
_bumpValue:function(a,c){if(!this.disabled&&!this.readOnly){var d=b.getComputedStyle(this.sliderBarContainer),g=l.getContentBox(this.sliderBarContainer,d),d=this.discreteValues;if(1>=d||Infinity==d)d=g[this._pixelCount];d--;g=(this.value-this.minimum)*d/(this.maximum-this.minimum)+a;0>g&&(g=0);g>d&&(g=d);g=g*(this.maximum-this.minimum)/d+this.minimum;this._setValueAttr(g,c)}},_onClkBumper:function(a){this.disabled||this.readOnly||!this.clickSelect||this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===
this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==p.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==p.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){a.stopPropagation();a.preventDefault();this._bumpValue(0>a.wheelDelta?-1:1,!0)},startup:function(){this._started||(q.forEach(this.getChildren(),function(a){this[a.container]!=
this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var a=e('label[for="'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),
this.focusNode.setAttribute("aria-labelledby",a[0].id));this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(v.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),v.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(a(this.domNode,n.wheel,m.hitch(this,"_mouseWheeled")));var b=t(C,{widget:this});this._movable=new d(this.sliderHandle,
{mover:b});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});r._Mover=C;return r})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(q,t,r,s,l,b){s=q("dojo.dnd.move.constrainedMoveable",b,{constraints:function(){},within:!1,constructor:function(b,l){l||(l={});this.constraints=l.constraints;
this.within=l.within},onFirstMove:function(b){var l=this.constraintBox=this.constraints.call(this,b);l.r=l.l+l.w;l.b=l.t+l.h;this.within&&(b=t.getMarginSize(b.node),l.r-=b.w,l.b-=b.h)},onMove:function(b,l){var f=this.constraintBox,d=b.node.style;this.onMoving(b,l);l.l=l.l<f.l?f.l:f.r<l.l?f.r:l.l;l.t=l.t<f.t?f.t:f.b<l.t?f.b:l.t;d.left=l.l+"px";d.top=l.t+"px";this.onMoved(b,l)}});l=q("dojo.dnd.move.boxConstrainedMoveable",s,{box:{},constructor:function(b,l){var f=l&&l.box;this.constraints=function(){return f}}});
q=q("dojo.dnd.move.parentConstrainedMoveable",s,{area:"content",constructor:function(b,l){var f=l&&l.area;this.constraints=function(){var b=this.node.parentNode,k=r.getComputedStyle(b),e=t.getMarginBox(b,k);if("margin"==f)return e;var l=t.getMarginExtents(b,k);e.l+=l.l;e.t+=l.t;e.w-=l.w;e.h-=l.h;if("border"==f)return e;l=t.getBorderExtents(b,k);e.l+=l.l;e.t+=l.t;e.w-=l.w;e.h-=l.h;if("padding"==f)return e;l=t.getPadExtents(b,k);e.l+=l.l;e.t+=l.t;e.w-=l.w;e.h-=l.h;return e}}});return{constrainedMoveable:s,
boxConstrainedMoveable:l,parentConstrainedMoveable:q}})},"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(q,t,r,s,l){return t("dijit.layout.TabContainer",r,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(b){var l=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?q.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+
"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":l,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},b)},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?s:l)}})})},
"dijit/layout/_TabContainerBase":function(){define("dojo/text!./templates/TabContainer.html ./StackContainer ./utils ../_TemplatedMixin dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(q,t,r,s,l,b,p,m){return l("dijit.layout._TabContainerBase",[t,s],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:q,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,
"");this.srcNodeRef&&m.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||b.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(b.add(this.domNode,"dijitTabContainerNested"),b.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),b.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),b.add(this.containerNode,"dijitTabPaneWrapperNested")):b.add(this.domNode,
"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(f){b.add(f.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var b=this.selectedChildWidget;if(this.doLayout){var d=this.tabPosition.replace(/-h/,"");this.tablist.region=d;d=[this.tablist,{domNode:this.tablistSpacer,region:d},{domNode:this.containerNode,region:"center"}];
r.layoutChildren(this.domNode,this._contentBox,d);this._containerContentBox=r.marginBox2contentBox(this.containerNode,d[2]);b&&b.resize&&b.resize(this._containerContentBox)}else{if(this.tablist.resize){d=this.tablist.domNode.style;d.width="0";var k=p.getContentBox(this.domNode).w;d.width="";this.tablist.resize({w:k})}b&&b.resize&&b.resize()}}},destroy:function(b){this.tablist&&this.tablist.destroy(b);this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget dojo/i18n!../nls/common".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a){b("dijit-legacy-requires")&&f(0,function(){require(["dijit/layout/StackController"])});r=r("dijit.layout.StackContainer",a,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);s.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(m(this.domNode,"keydown",p.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();q.forEach(a,this._setupChild,
this);this.persist?this.selectedChildWidget=e.byId(t(this.id+"_selectedChild")):q.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},this);var b=this.selectedChildWidget;!b&&a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);d.publish(this.id+"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},
_setupChild:function(a){var b=a.domNode,d=l.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",a.domNode,"replace"),e=a["aria-label"]||a.title||a.label;e&&d.setAttribute("aria-label",e);l.place(b,d);a._wrapper=d;this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.title=""},addChild:function(a,b){this.inherited(arguments);this._started&&(d.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},
removeChild:function(a){var b=q.indexOf(this.getChildren(),a);this.inherited(arguments);l.destroy(a._wrapper);delete a._wrapper;this._started&&d.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var e=this.getChildren();e.length&&this.selectChild(e[Math.max(b-1,0)])}this._started&&this.layout()}},selectChild:function(a,b){var f;a=e.byId(a);this.selectedChildWidget!=a&&(f=this._transition(a,this.selectedChildWidget,
b),this._set("selectedChildWidget",a),d.publish(this.id+"-selectChild",a),this.persist&&t(this.id+"_selectedChild",this.selectedChildWidget.id));return k(f||!0)},_transition:function(a,b){b&&this._hideChild(b);var d=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return d},_adjacent:function(a){var b=this.getChildren(),d=q.indexOf(b,this.selectedChildWidget),d=d+(a?1:b.length-1);return b[d%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),
!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){d.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&s.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||
!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&s.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;q.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});r.ChildWidgetProperties={selected:!1,disabled:!1,
closable:!1,iconClass:"dijitNoIcon",showTitle:!0};p.extend(n,r.ChildWidgetProperties);return r})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(q,t,r,s,l,b,p,m,f){return b("dijit.layout._LayoutWidget",[t,r,s],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);p.add(this.domNode,"dijitContainer")},
startup:function(){if(!this._started){this.inherited(arguments);var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),this.own(l.on("resize",q.hitch(this,"resize"))))}},resize:function(b,k){var e=this.domNode;b&&m.setMarginBox(e,b);var l=k||{};q.mixin(l,b||{});"h"in l&&"w"in l||(l=q.mixin(m.getMarginBox(e),l));var a=f.getComputedStyle(e),c=m.getMarginExtents(e,a),g=m.getBorderExtents(e,a),l=this._borderBox={w:l.w-(c.w+g.w),h:l.h-(c.h+g.h)},c=m.getPadExtents(e,a);this._contentBox=
{l:f.toPixelValue(e,a.paddingLeft),t:f.toPixelValue(e,a.paddingTop),w:l.w-c.w,h:l.h-c.h};this.layout()},layout:function(){},_setupChild:function(b){p.add(b.domNode,this.baseClass+"-child "+(b.baseClass?this.baseClass+"-"+b.baseClass:""))},addChild:function(b,f){this.inherited(arguments);this._started&&this._setupChild(b)},removeChild:function(b){p.remove(b.domNode,this.baseClass+"-child"+(b.baseClass?" "+this.baseClass+"-"+b.baseClass:""));this.inherited(arguments)}})})},"dijit/layout/TabController":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e){e=q("dijit.layout._TabButton"+(l("dojo-bidi")?"_NoBidi":""),m.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:e,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);t.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var b=this.domNode;this.defer(function(){b.className=b.className},1)},_setCloseButtonAttr:function(d){this._set("closeButton",d);
s.toggle(this.domNode,"dijitClosable",d);this.closeNode.style.display=d?"":"none";d&&(d=b.getLocalization("dijit","common"),this.closeNode&&r.set(this.closeNode,"title",d.itemClose))},_setDisabledAttr:function(d){this.inherited(arguments);if(this.closeNode)if(d)r.remove(this.closeNode,"title");else{var a=b.getLocalization("dijit","common");r.set(this.closeNode,"title",a.itemClose)}},_setLabelAttr:function(b){this.inherited(arguments);this.showLabel||this.params.title||(this.iconNode.alt=p.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}});l("dojo-bidi")&&(e=q("dijit.layout._TabButton",e,{_setLabelAttr:function(b){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}}));q=q("dijit.layout.TabController",m,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:e,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var e=new d({id:this.id+
"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return s.contains(a,"dijitClosable")&&!s.contains(a,"dijitTabDisabled")}});this.own(e);var a=b.getLocalization("dijit","common"),c=this;e.addChild(new k({label:a.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){a=f.byNode(this.getParent().currentTarget);c.onCloseButtonClick(a.page)}}))}});q.TabButton=
e;return q})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch dojo/i18n!../nls/common".split(" "),function(q,t,r,s,l,b,p,m,f,d,k,e,n,a){s=t("dijit.layout._StackButton",a,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments);(this.focusNode||
this.domNode).setAttribute("role","tab")}});t=t("dijit.layout.StackController",[k,e,n],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:s,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return d.byId(this.id+"_"+a)},postCreate:function(){this.inherited(arguments);this.own(m.subscribe(this.containerId+"-startup",b.hitch(this,"onStartup")),m.subscribe(this.containerId+"-addChild",b.hitch(this,
"onAddChild")),m.subscribe(this.containerId+"-removeChild",b.hitch(this,"onRemoveChild")),m.subscribe(this.containerId+"-selectChild",b.hitch(this,"onSelectChild")),m.subscribe(this.containerId+"-containerKeyDown",b.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(p(this.containerNode,"click",b.hitch(this,function(a){var b=d.getEnclosingWidget(a.target);if(b!=this.containerNode&&!b.disabled&&b.page)for(a=a.target;a!==this.containerNode;a=a.parentNode)if(r.contains(a,this.buttonWidgetCloseClass)){this.onCloseButtonClick(b.page);
break}else if(a==b.domNode){this.onButtonClick(b.page);break}})))},onStartup:function(a){this.textDir=a.textDir;q.forEach(a.children,this.onAddChild,this);if(a.selected)this.onSelectChild(a.selected);var g=d.byId(this.containerId).containerNode,e=b.hitch(this,"pane2button");a={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var f=function(a,b){return p(g,"attrmodified-"+a,function(a){var c=e(a.detail&&a.detail.widget&&
a.detail.widget.id);c&&c.set(b,a.detail.newValue)})},k;for(k in a)this.own(f(k,a[k]))},destroy:function(a){this.destroyDescendants(a);this.inherited(arguments)},onAddChild:function(a,d){var e=new (b.isString(this.buttonWidget)?b.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,
title:a.tooltip,page:a});this.addChild(e,d);a.controlButton=e;if(!this._currentChild)this.onSelectChild(a);e=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+e.id:e.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",e)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy());delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=
this.pane2button(this._currentChild.id);b.set("checked",!1);b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button(a.id);b.set("checked",!0);this._currentChild=a;b.focusNode.setAttribute("tabIndex","0");d.byId(this.containerId)}},onButtonClick:function(a){var b=this.pane2button(a.id);f.focus(b.focusNode);this._currentChild&&this._currentChild.id===a.id&&b.set("checked",!0);d.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){d.byId(this.containerId).closeChild(a);this._currentChild&&
(a=this.pane2button(this._currentChild.id))&&f.focus(a.focusNode||a.domNode)},adjacent:function(a){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(a=!a);var b=this.getChildren(),d=q.indexOf(b,this.pane2button(this._currentChild.id)),e=b[d],f;do d=(d+(a?1:b.length-1))%b.length,f=b[d];while(f.disabled&&f!=e);return f},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var d=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case l.LEFT_ARROW:case l.UP_ARROW:a._djpage||
(d=!1);break;case l.PAGE_UP:a.ctrlKey&&(d=!1);break;case l.RIGHT_ARROW:case l.DOWN_ARROW:a._djpage||(d=!0);break;case l.PAGE_DOWN:a.ctrlKey&&(d=!0);break;case l.HOME:for(var e=this.getChildren(),f=0;f<e.length;f++){var k=e[f];if(!k.disabled){this.onButtonClick(k.page);break}}a.stopPropagation();a.preventDefault();break;case l.END:e=this.getChildren();for(f=e.length-1;0<=f;f--)if(k=e[f],!k.disabled){this.onButtonClick(k.page);break}a.stopPropagation();a.preventDefault();break;case l.DELETE:case 87:this._currentChild.closable&&
(a.keyCode==l.DELETE||a.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),a.stopPropagation(),a.preventDefault());break;case l.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==d&&(this.onButtonClick(this.adjacent(d).page),a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page;this.onkeydown(a.e)}});t.StackButton=s;return t})},"dijit/layout/ScrollingTabController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u,z,A){e=t("dijit.layout.ScrollingTabController",[a,g],{baseClass:"dijitTabController dijitScrollingTabController",templateString:e,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+
this.tabPosition.substr(1).replace(/-.*/,"")+"None",r.add(a,"tabStrip-disabled"));r.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);l.set(this.domNode,"visibility","");this._postStartup=!0;this.own(m(this.containerNode,"attrmodified-label, attrmodified-iconclass",p.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments);l.set(this.containerNode,"width",l.get(this.containerNode,"width")+200+"px")},
onRemoveChild:function(a,b){var c=this.pane2button(a.id);this._selectedTab===c.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=f("> .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode))return this._btnWidth+=s.getMarginSize(a).w,!0;l.set(a,"display","none");return!1},this)},_getTabsWidth:function(){var a=this.getChildren();
if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+a.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||l.get(this.scrollNode,"width");return 0<b&&a<b},resize:function(a){this._dim=a;this.scrollNode.style.height="auto";var b=this._contentBox=c.marginBox2contentBox(this.domNode,{h:0,w:a.w});b.h=this.scrollNode.offsetHeight;s.setContentSize(this.domNode,b);b=this._enableBtn(this._contentBox.w);
this._buttons.style("display",b?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";c.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());
this._postResize=!0;return{h:this._contentBox.h,w:a.w}},_getScroll:function(){return this.isLeftToRight()||8>d("ie")||d("ie")&&d("quirks")||d("webkit")?this.scrollNode.scrollLeft:l.get(this.containerNode,"width")-l.get(this.scrollNode,"width")+(8<=d("ie")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||8>d("ie")||d("ie")&&d("quirks")||d("webkit"))return a;var b=l.get(this.containerNode,"width")-l.get(this.scrollNode,"width");return(8<=d("ie")?-1:1)*(a-b)},
onSelectChild:function(a){var b=this.pane2button(a.id);if(b){b=b.domNode;if(b!=this._selectedTab&&(this._selectedTab=b,this._postResize)){var c=this._getScroll();(c>b.offsetLeft||c+l.get(this.scrollNode,"width")<b.offsetLeft+l.get(b,"width"))&&this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=l.get(this.scrollNode,"width"),c=l.get(this.containerNode,"width")-b,d=this._getTabsWidth();if(a.length&&d>b)return{min:this.isLeftToRight()?
0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:c};a=this.isLeftToRight()?0:c;return{min:a,max:a}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=l.get(this.scrollNode,"width"),c=this._getScrollBounds(),a=a.offsetLeft+l.get(a,"width")/2-b/2;return a=Math.min(Math.max(a,c.min),c.max)},createSmoothScroll:function(a){if(0<arguments.length){var c=this._getScrollBounds();a=Math.min(Math.max(a,c.min),c.max)}else a=
this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var d=this,g=this.scrollNode,e=new b.Animation({beforeBegin:function(){this.curve&&delete this.curve;var c=g.scrollLeft,f=d._convertToScrollLeft(a);e.curve=new b._Line(c,f)},onAnimate:function(a){g.scrollLeft=a}});this._anim=e;this._setButtonClass(a);return e},_getBtnNode:function(a){for(a=a.target;a&&!r.contains(a,"tabStripButton");)a=a.parentNode;return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},
doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!r.contains(b,"dijitTabDisabled")){var c=0.75*l.get(this.scrollNode,"width")*a,c=this._getScroll()+c;this._setButtonClass(c);this.createSmoothScroll(c).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});n=t("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:n,
tabIndex:"",isFocusable:function(){return!1}});t("dijit.layout._ScrollingTabControllerButton",[z,n]);t("dijit.layout._ScrollingTabControllerMenuButton",[z,A,n],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new v({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var b=k.byId(this.containerId);q.forEach(b.getChildren(),function(a){var c=new u({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,
disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||b.textDir,onClick:function(){b.selectChild(a)}});this.dropDown.addChild(c)},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return e})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g){var v=r("dijit.layout._Splitter",[n,a],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?
1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);s.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=t(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",c=b.getMarginBox(this.child.domNode)[a],d=q.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=b.getContentBox(d.domNode)[a]-
10;return Math.min(this.child.maxSize,c+a)},_startDrag:function(a){this.cover||(this.cover=l.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after"));s.add(this.cover,"dijitSplitterCoverActive");this.fake&&l.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),s.add(this.domNode,"dijitSplitterShadow"),l.place(this.fake,this.domNode,"after"));s.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
this.fake&&s.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var c=this._factor,g=this.horizontal,e=g?"pageY":"pageX",m=a[e],n=this.domNode.style,g=g?"h":"w",q=p.getComputedStyle(this.child.domNode),v=b.getMarginBox(this.child.domNode,q)[g],r=this._computeMaxSize(),u=Math.max(this.child.minSize,b.getPadBorderExtents(this.child.domNode,q)[g]+10),g=this.region,t="top"==g||"bottom"==g?"top":"left",S=parseInt(n[t],10),K=this._resize,x=f.hitch(this.container,"_layoutChildren",
this.child.id),g=this.ownerDocument;this._handlers=this._handlers.concat([d(g,k.move,this._drag=function(a,b){var d=a[e]-m,g=c*d+v,f=Math.max(Math.min(g,r),u);(K||b)&&x(f);n[t]=d+S+c*(f-g)+"px"}),d(g,"dragstart",function(a){a.stopPropagation();a.preventDefault()}),d(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation();a.preventDefault()}),d(g,k.release,f.hitch(this,"_stopDrag"))]);a.stopPropagation();a.preventDefault()},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;
s.toggle(this.domNode,"dijitSplitterHover",a);s.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&s.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&l.destroy(this.fake),s.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&t(this._cookieName,this.child.domNode.style[this.horizontal?
"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var c=this.horizontal,d=1;switch(a.keyCode){case c?m.UP_ARROW:m.LEFT_ARROW:d*=-1;case c?m.DOWN_ARROW:m.RIGHT_ARROW:break;default:return}c=b.getMarginSize(this.child.domNode)[c?"h":"w"]+this._factor*d;this.container._layoutChildren(this.child.id,Math.max(Math.min(c,this._computeMaxSize()),this.child.minSize));a.stopPropagation();a.preventDefault()},destroy:function(){this._cleanupHandlers();
delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),u=r("dijit.layout._Gutter",[n,a],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);s.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});r=r("dijit.layout.BorderContainer",c,{gutters:!0,liveSplitters:!0,persist:!1,
baseClass:"dijitBorderContainer",_splitterClass:v,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var b=a.region,c=a.isLeftToRight();"leading"==b&&(b=c?"left":"right");"trailing"==b&&(b=c?"right":"left");b&&"center"!=b&&(a.splitter||this.gutters)&&!a._splitterWidget&&(c=a.splitter?this._splitterClass:u,f.isString(c)&&(c=f.getObject(c)),c=new c({id:a.id+"_splitter",container:this,child:a,region:b,
live:this.liveSplitters}),c.isSplitter=!0,a._splitterWidget=c,b="bottom"==b||b==(this.isLeftToRight()?"right":"left"),l.place(c.domNode,a.domNode,b?"before":"after"),c.startup())},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget);this.inherited(arguments)},getChildren:function(){return q.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return q.filter(this.getChildren(),function(b){return b.region==
a})[0]._splitterWidget},resize:function(a,c){if(!this.cs||!this.pe){var d=this.domNode;this.cs=p.getComputedStyle(d);this.pe=b.getPadExtents(d,this.cs);this.pe.r=p.toPixelValue(d,this.cs.paddingRight);this.pe.b=p.toPixelValue(d,this.cs.paddingBottom);p.set(d,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=[];q.forEach(this._getOrderedChildren(),function(a){c.push(a);a._splitterWidget&&c.push(a._splitterWidget)});g.layoutChildren(this.domNode,
{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},c,a,b)}},destroyRecursive:function(){q.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});r.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:Infinity};f.mixin(r.ChildWidgetProperties,c.ChildWidgetProperties);f.extend(e,r.ChildWidgetProperties);r._Splitter=v;r._Gutter=u;return r})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),
function(q,t,r,s,l,b,p,m){t=t("dijit.layout.LayoutContainer",p,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(q.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){this.inherited(arguments);b.region&&r.add(b.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var b=q.map(this.getChildren(),function(b,f){return{pane:b,weight:["center"==b.region?Infinity:0,b.layoutPriority,("sidebar"==this.design?1:
-1)*(/top|bottom/.test(b.region)?1:-1),f]}},this);b.sort(function(b,f){for(var e=b.weight,l=f.weight,a=0;a<e.length;a++)if(e[a]!=l[a])return e[a]-l[a];return 0});return q.map(b,function(b){return b.pane})},layout:function(){m.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(b,d){this.inherited(arguments);this._started&&this.layout()},removeChild:function(b){this.inherited(arguments);this._started&&this.layout();r.remove(b.domNode,this.baseClass+"Pane");s.set(b.domNode,
{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});s.set(b.domNode,/top|bottom/.test(b.region)?"width":"height","auto")}});t.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};l.extend(b,t.ChildWidgetProperties);return t})},"dijit/layout/AccordionContainer":function(){define("require dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/keys dojo/_base/lang dojo/sniff dojo/topic ../focus ../_base/manager dojo/ready ../_Widget ../_Container ../_TemplatedMixin ../_CssStateMixin ./StackContainer ./ContentPane dojo/text!./templates/AccordionButton.html ../a11yclick".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n,a,c,g,v,u,z,A,y,C,D){n=r("dijit.layout._AccordionButton",[v,z,A],{templateString:D,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var a=this.id.replace(" ","_");b.set(this.titleTextNode,
"id",a+"_title");this.focusNode.setAttribute("aria-labelledby",b.get(this.titleTextNode,"id"));l.setSelectable(this.domNode,!1)},getTitleHeight:function(){return f.getMarginSize(this.domNode).h},_onTitleClick:function(){this.getParent().selectChild(this.contentWidget,!0);a.focus(this.focusNode)},_onTitleKeyDown:function(a){return this.getParent()._onKeyDown(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a);this.focusNode.setAttribute("aria-expanded",a?"true":"false");this.focusNode.setAttribute("aria-selected",
a?"true":"false");this.focusNode.setAttribute("tabIndex",a?"0":"-1")}});e("dojo-bidi")&&n.extend({_setLabelAttr:function(a){this._set("label",a);b.set(this.titleTextNode,"innerHTML",a);this.applyTextDir(this.titleTextNode)},_setTitleAttr:function(a){this._set("title",a);b.set(this.titleTextNode,"title",a);this.applyTextDir(this.titleTextNode)}});var B=r("dijit.layout._AccordionInnerContainer"+(e("dojo-bidi")?"_NoBidi":""),[v,A],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=
m.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var a=this.contentWidget,b=k.isString(this.buttonWidget)?k.getObject(this.buttonWidget):this.buttonWidget;this.button=a._buttonWidget=(new b({contentWidget:a,label:a.title,title:a.tooltip,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,iconClass:a.iconClass,id:a.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=m.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",
this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);m.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var a=this.button,b=this.contentWidget;this._contentWidgetWatches=[b.watch("title",k.hitch(this,function(b,c,d){a.set("label",d)})),b.watch("tooltip",k.hitch(this,function(b,c,d){a.set("title",d)})),b.watch("iconClass",k.hitch(this,function(b,c,d){a.set("iconClass",d)}))]},_setSelectedAttr:function(a){this._set("selected",
a);this.button.set("selected",a);if(a&&(a=this.contentWidget,a.onSelected))a.onSelected()},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive();t.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments)},destroyDescendants:function(a){this.contentWidget.destroyRecursive(a)}});e("dojo-bidi")&&(B=r("dijit.layout._AccordionInnerContainer",B,
{postCreate:function(){this.inherited(arguments);var a=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(b,c,d){a.set("textDir",d)}))}}));r=r("dijit.layout.AccordionContainer",y,{duration:c.defaultDuration,buttonWidget:n,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&
this.selectedChildWidget._wrapperWidget.set("selected",!0))},layout:function(){var a=this.selectedChildWidget;if(a){var b=a._wrapperWidget.domNode,c=f.getMarginExtents(b),b=f.getPadBorderExtents(b),d=a._wrapperWidget.containerNode,g=f.getMarginExtents(d),d=f.getPadBorderExtents(d),e=this._contentBox,k=0;t.forEach(this.getChildren(),function(b){b!=a&&(k+=f.getMarginSize(b._wrapperWidget.domNode).h)});this._verticalSpace=e.h-k-c.h-b.h-g.h-d.h-a._buttonWidget.getTitleHeight();this._containerContentBox=
{h:this._verticalSpace,w:this._contentBox.w-c.w-b.w-g.w-d.w};a&&a.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=B({contentWidget:a,buttonWidget:this.buttonWidget,id:a.id+"_wrapper",dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,parent:this});this.inherited(arguments);m.place(a.domNode,a._wrapper,"replace")},removeChild:function(a){a._wrapperWidget&&(m.place(a.domNode,a._wrapperWidget.domNode,"after"),a._wrapperWidget.destroy(),delete a._wrapperWidget);p.remove(a.domNode,
"dijitHidden");this.inherited(arguments)},getChildren:function(){return t.map(this.inherited(arguments),function(a){return"dijit.layout._AccordionInnerContainer"==a.declaredClass?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop();t.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()});this.inherited(arguments)},_showChild:function(a){a._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},
_hideChild:function(a){a._wrapperWidget.containerNode.style.display="none";this.inherited(arguments)},_transition:function(a,b,c){8>e("ie")&&(c=!1);this._animation&&(this._animation.stop(!0),delete this._animation);var d=this;if(a){a._wrapperWidget.set("selected",!0);var g=this._showChild(a);this.doLayout&&a.resize&&a.resize(this._containerContentBox)}b&&(b._wrapperWidget.set("selected",!1),c||this._hideChild(b));if(c){var k=a._wrapperWidget.containerNode,l=b._wrapperWidget.containerNode;c=a._wrapperWidget.containerNode;
a=f.getMarginExtents(c);c=f.getPadBorderExtents(c);var m=a.h+c.h;l.style.height=d._verticalSpace-m+"px";this._animation=new s.Animation({node:k,duration:this.duration,curve:[1,this._verticalSpace-m-1],onAnimate:function(a){a=Math.floor(a);k.style.height=a+"px";l.style.height=d._verticalSpace-m-a+"px"},onEnd:function(){delete d._animation;k.style.height="auto";b._wrapperWidget.containerNode.style.display="none";l.style.height="auto";d._hideChild(b)}});this._animation.onStop=this._animation.onEnd;this._animation.play()}return g},
_onKeyDown:function(a,b){if(!this.disabled&&!a.altKey&&(b||a.ctrlKey)){var c=a.keyCode;if(b&&(c==d.LEFT_ARROW||c==d.UP_ARROW)||a.ctrlKey&&c==d.PAGE_UP)this._adjacent(!1)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault();else if(b&&(c==d.RIGHT_ARROW||c==d.DOWN_ARROW)||a.ctrlKey&&(c==d.PAGE_DOWN||c==d.TAB))this._adjacent(!0)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault()}}});e("dijit-legacy-requires")&&g(0,function(){q(["dijit/layout/AccordionPane"])});r._InnerContainer=
B;r._Button=n;return r})},"dijit/layout/AccordionPane":function(){define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(q,t,r){return q("dijit.layout.AccordionPane",r,{constructor:function(){t.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0")},onSelected:function(){}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n){r.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");b=n._iframeName;b=b.substring(0,b.lastIndexOf("_"));var a=s.delegate(n,{create:function(){return a._frame=n.create.apply(n,arguments)},get:null,post:null,send:function(a){var b,d=l._ioSetArgs(a,function(a){b&&b.cancel()},function(a){var c=null;a=a.ioArgs;try{var d=a.handleAs;"xml"===d||"html"===d?c=b.response.data:(c=b.response.text,"json"===d?c=t.fromJson(c):"javascript"===d&&(c=r.eval(c)))}catch(e){c=
e}return c},function(a,b){b.ioArgs._hasError=!0;return a}),f=d.ioArgs,k="GET",p=m.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&p&&(k="POST");a={method:k,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:p?null:a.content,data:p?a.content:null,timeout:a.timeout,ioArgs:f};a.method&&(a.method=a.method.toUpperCase());if(q.ioPublish&&r.publish&&!1!==f.args.ioPublish)var s=e.after(n,"_notifyStart",function(a){a.options.ioArgs===f&&(s.remove(),l._ioNotifyStart(d))},
!0);b=n(f.url,a,!0);f._callNext=b._callNext;b.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},_iframeOnload:p.global[b+"_onload"]});s.setObject("dojo.io.iframe",a);return a})},"xstyle/core/load-css":function(){define([],function(){function q(a,b){var d=a[p]("link");d.rel="stylesheet";d.type="text/css";b&&(d.href=b);return d}function t(a,b){return a.lastIndexOf(".")<=a.lastIndexOf("/")?a+"."+b:a}function r(a){a=a.split("!");for(var b,d=1;b=a[d++];)b=b.split("=",
2),a[b[0]]=2==b.length?b[1]:!0;return a}function s(a){if(k["dom-create-style-element"])return b=document.createElement("style"),b.setAttribute("type","text/css"),b.appendChild(document.createTextNode(a)),e.insertBefore(b,e.firstChild),b;var b=document.createStyleSheet();b.cssText=a;return b.owningElement}var l="onreadystatechange",b="onload",p="createElement",m=!1,f=document,d="undefined"==typeof _css_cache?{}:_css_cache,k={"event-link-onload":null===document.createElement("link").onload&&!navigator.userAgent.match(/AppleWebKit/),
"dom-create-style-element":!document.createStyleSheet},e=f.head||(f.head=f.getElementsByTagName("head")[0]);if(!k["bundled-css"])var n=function(a,c){function d(a){if(a=a.sheet||a.styleSheet)for(var b=document.styleSheets,c=b.length;0<c;c--)if(b[c-1]==a)return!0}function e(a,b){d(a.link)?(f(a),b()):m||setTimeout(function(){e(a,b)},a.wait)}function f(a){a=a.link;a[l]=a[b]=null}function n(){p||(p=!0,c())}require.onError&&(require.onError=function(a){return function(){m=!0;a.apply(this,arguments)}}(require.onError));
var p;(function(a,c){var d=a.link;d[l]=d[b]=function(){d.readyState&&"complete"!=d.readyState||(k["event-link-onload"]=!0,f(a),c())}})(a,n);k["event-link-onload"]||e(a,n)};return function(a,b,g){for(var k=a.split(","),l=k.length,m=function(){0==--l&&b(C.sheet||C.styleSheet)},p=0;p<k.length;p++){a=k[p];var y=d[a];if(y)return C=s(y),m();a=r(a);var y=a.shift(),y=t(y,"css"),C=q(f);a="nowait"in a?"false"!=a.nowait:!(!g||!g.cssDeferLoad);n({link:C,url:y,wait:g&&g.cssWatchPeriod||25},m);a&&b(C);C.href=y;
e.appendChild(C)}}})},"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<span class="dijitInline dijitIcon dijitMenuExpand"></span>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</span>\n\t</td>\n</tr>\n',
"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n></div>\n',"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',
"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\tdata-dojo-attach-point="valueNode" role="presentation"\n/></span>\n',
"url:dijit/form/templates/ComboButton.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\n\t\t></div\n\t\t></td\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdata-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\n\t\t\tdata-dojo-attach-event="onkeydown:_onArrowKeyDown"\n\t\t\ttitle="${optionsTitle}"\n\t\t\trole="button" aria-haspopup="true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n\t\t></td\n\t\t><td style="display:none !important;"\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode" role="presentation"\n\t\t\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\t/></td></tr></tbody\n></table>\n',
"url:dojox/form/resources/_CheckedMultiSelectMenuItem.html":'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" role="menuitemcheckbox" tabIndex="-1"\n\tdojoAttachEvent="ondijitclick:_onClick"\n\t><td class="dijitReset dijitMenuItemIconCell" role="presentation"\n\t\t><div src="${_blankGif}" alt="" class="dijitMenuItemIcon ${_iconClass}" dojoAttachPoint="iconNode"\n\t\t\t><input class="dojoxCheckedMultiSelectCheckBoxInput" dojoAttachPoint="inputNode" type="${_type.type}"\n\t\t/></div></td\n\t><td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td\n\t><td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td\n\t><td class="dijitReset dijitMenuArrowCell" role="presentation">&nbsp;</td\n></tr>',
"url:dojox/form/resources/_CheckedMultiSelectItem.html":'<div class="dijitReset ${baseClass}"\n\t><input class="${baseClass}Box" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="checkBox" \n\t\tdata-dojo-attach-event="_onClick:_changeBox" type="${_type.type}" data-dojo-props=\'disabled:${disabled}, readOnly:${readOnly}\' baseClass="${_type.baseClass}"\n\t/><div class="dijitInline ${baseClass}Label" data-dojo-attach-point="labelNode" data-dojo-attach-event="onclick:_onClick"></div\n></div>\n',
"url:dojox/form/resources/CheckedMultiSelect.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}"\n\t><div data-dojo-attach-point="comboButtonNode"\n\t></div\n\t><div data-dojo-attach-point="selectNode" class="dijit dijitReset dijitInline ${baseClass}Wrapper" data-dojo-attach-event="onmousedown:_onMouseDown,onclick:focus"\n\t\t><select class="${baseClass}Select dojoxCheckedMultiSelectHidden" multiple="true" data-dojo-attach-point="containerNode,focusNode"></select\n\t\t><div data-dojo-attach-point="wrapperDiv"></div\n\t></div\n></div>',
"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><input\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point="focusNode"\n\t \tdata-dojo-attach-event="ondijitclick:_onClick"\n/></div>\n',"url:dojox/form/resources/FileInput.html":'<div class="dijitFileInput">\n\t<input id="${id}" class="dijitFileInputReal" type="file" dojoAttachPoint="fileInput" name="${name}" />\n\t<div class="dijitFakeInput">\n\t\t<input class="dijitFileInputVisible" type="text" dojoAttachPoint="focusNode, inputNode" />\n\t\t<div class="dijitInline dijitFileInputText" dojoAttachPoint="titleNode">${label}</div>\n\t\t<div class="dijitInline dijitFileInputButton" dojoAttachPoint="cancelNode" \n\t\t\tdojoAttachEvent="onclick:reset">${cancelText}</div>\n\t</div>\n</div>\n',
"url:dojox/form/resources/Uploader.html":'<span class="dijit dijitReset dijitInline"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t> \n\t<input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1" data-dojo-attach-point="valueNode" />\n</span>\n',
"url:dojox/form/resources/UploaderFileList.html":'<div class="dojoxUploaderFileList">\n\t<div data-dojo-attach-point="progressNode" class="dojoxUploaderFileListProgress">\n\t\t<div data-dojo-attach-point="percentBarNode" class="dojoxUploaderFileListProgressBar"></div>\n\t\t<div data-dojo-attach-point="percentTextNode" class="dojoxUploaderFileListPercentText">0%</div>\n\t</div>\n\t<table class="dojoxUploaderFileListTable">\n\t\t<thead>\n\t\t\t<tr class="dojoxUploaderFileListHeader">\n\t\t\t\t<th class="dojoxUploaderIndex">${headerIndex}</th>\n\t\t\t\t<th class="dojoxUploaderIcon">${headerType}</th>\n\t\t\t\t<th class="dojoxUploaderFileName">${headerFilename}</th>\n\t\t\t\t<th class="dojoxUploaderFileSize" data-dojo-attach-point="sizeHeader">${headerFilesize}</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody class="dojoxUploaderFileListContent" data-dojo-attach-point="listNode"></tbody>\n\t</table>\n<div>',
"url:dojox/widget/Calendar/Calendar.html":'<div class="dojoxCalendar">\n    <div tabindex="0" class="dojoxCalendarContainer" style="visibility: visible;" dojoAttachPoint="container">\n\t\t<div style="display:none">\n\t\t\t<div dojoAttachPoint="previousYearLabelNode"></div>\n\t\t\t<div dojoAttachPoint="nextYearLabelNode"></div>\n\t\t\t<div dojoAttachPoint="monthLabelSpacer"></div>\n\t\t</div>\n        <div class="dojoxCalendarHeader">\n            <div>\n                <div class="dojoxCalendarDecrease" dojoAttachPoint="decrementMonth"></div>\n            </div>\n            <div class="">\n                <div class="dojoxCalendarIncrease" dojoAttachPoint="incrementMonth"></div>\n            </div>\n            <div class="dojoxCalendarTitle" dojoAttachPoint="header" dojoAttachEvent="onclick: onHeaderClick">\n            </div>\n        </div>\n        <div class="dojoxCalendarBody" dojoAttachPoint="containerNode"></div>\n        <div class="">\n            <div class="dojoxCalendarFooter" dojoAttachPoint="footer">                        \n            </div>\n        </div>\n    </div>\n</div>\n',
"url:dojox/widget/Calendar/CalendarDay.html":'<div class="dijitCalendarDayLabels" style="left: 0px;" dojoAttachPoint="dayContainer">\n\t<div dojoAttachPoint="header">\n\t\t<div dojoAttachPoint="monthAndYearHeader">\n\t\t\t<span dojoAttachPoint="monthLabelNode" class="dojoxCalendarMonthLabelNode"></span>\n\t\t\t<span dojoAttachPoint="headerComma" class="dojoxCalendarComma">,</span>\n\t\t\t<span dojoAttachPoint="yearLabelNode" class="dojoxCalendarDayYearLabel"></span>\n\t\t</div>\n\t</div>\n\t<table cellspacing="0" cellpadding="0" border="0" style="margin: auto;">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td class="dijitCalendarDayLabelTemplate"><div class="dijitCalendarDayLabel"></div></td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody dojoAttachEvent="onclick: _onDayClick">\n\t\t\t<tr class="dijitCalendarWeekTemplate">\n\t\t\t\t<td class="dojoxCalendarNextMonth dijitCalendarDateTemplate">\n\t\t\t\t\t<div class="dijitCalendarDateLabel"></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n',
"url:dojox/widget/Calendar/CalendarMonthYear.html":'<div class="dojoxCal-MY-labels" style="left: 0px;"\t\n\tdojoAttachPoint="myContainer" dojoAttachEvent="onclick: onClick">\n\t\t<table cellspacing="0" cellpadding="0" border="0" style="margin: auto;">\n\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr class="dojoxCal-MY-G-Template">\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-M-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarMonthLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-M-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarMonthLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-Y-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarYearLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-Y-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarYearLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t </tr>\n\t\t\t\t\t\t <tr class="dojoxCal-MY-btns">\n\t\t\t\t\t\t \t <td class="dojoxCal-MY-btns" colspan="4">\n\t\t\t\t\t\t \t\t <span class="dijitReset dijitInline dijitButtonNode ok-btn" dojoAttachEvent="onclick: onOk" dojoAttachPoint="okBtn">\n\t\t\t\t\t\t \t \t \t <button\tclass="dijitReset dijitStretch dijitButtonContents">OK</button>\n\t\t\t\t\t\t\t\t </span>\n\t\t\t\t\t\t\t\t <span class="dijitReset dijitInline dijitButtonNode cancel-btn" dojoAttachEvent="onclick: onCancel" dojoAttachPoint="cancelBtn">\n\t\t\t\t\t\t \t \t\t <button\tclass="dijitReset dijitStretch dijitButtonContents">Cancel</button>\n\t\t\t\t\t\t\t\t </span>\n\t\t\t\t\t\t \t </td>\n\t\t\t\t\t\t </tr>\n\t\t\t\t</tbody>\n\t\t</table>\n</div>\n',
"url:dijit/templates/TooltipDialog.html":'<div role="alertdialog" tabIndex="-1">\n\t<div class="dijitTooltipContainer" role="presentation">\n\t\t<div class="dijitTooltipContents dijitTooltipFocusNode" data-dojo-attach-point="containerNode"></div>\n\t</div>\n\t<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\n</div>\n',"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="${role}" tabIndex="-1" aria-checked="${checked}">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<span class="dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n\t\t<span class="dijitMenuItemIconChar dijitCheckedMenuItemIconChar">${checkedChar}</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode,textDirNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\n</tr>\n',
"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabindex="0">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',
"url:dijit/templates/TreeNode.html":'<div class="dijitTreeNode" role="presentation"\n\t><div data-dojo-attach-point="rowNode" class="dijitTreeRow" role="presentation"\n\t\t><span data-dojo-attach-point="expandoNode" class="dijitInline dijitTreeExpando" role="presentation"></span\n\t\t><span data-dojo-attach-point="expandoNodeText" class="dijitExpandoText" role="presentation"></span\n\t\t><span data-dojo-attach-point="contentNode"\n\t\t\tclass="dijitTreeContent" role="presentation">\n\t\t\t<span role="presentation" class="dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span data-dojo-attach-point="labelNode,focusNode" class="dijitTreeLabel" role="treeitem" tabindex="-1" aria-selected="false"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeNodeContainer" role="presentation" style="display: none;"></div>\n</div>\n',
"url:dijit/templates/Tree.html":'<div role="tree">\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" data-dojo-attach-point="indentDetector"></div>\n\t<div class="dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point="rootLoadingIndicator"></div>\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeContainer" role="presentation">\n\t</div>\n</div>\n',"url:dijit/templates/ProgressBar.html":'<div class="dijitProgressBar dijitProgressBarEmpty" role="progressbar"\n\t><div  data-dojo-attach-point="internalProgress" class="dijitProgressBarFull"\n\t\t><div class="dijitProgressBarTile" role="presentation"></div\n\t\t><span style="visibility:hidden">&#160;</span\n\t></div\n\t><div data-dojo-attach-point="labelNode" class="dijitProgressBarLabel" id="${id}_label"></div\n\t><span data-dojo-attach-point="indeterminateHighContrastImage"\n\t\t   class="dijitInline dijitProgressBarIndeterminateHighContrastImage"></span\n></div>\n',
"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5" scope="col">\n\t\t\t\t<div data-dojo-attach-point="monthNode">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"></span>\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role="row">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n\t\t\t\t<div class="dijitCalendarYearLabel">\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n',
"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\taria-haspopup="true"\n\tdata-dojo-attach-point="_popupStateNode"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\n\t/></div\n></div>\n',
"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator" role="separator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>\n',"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="listbox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode,textDirNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitValidationContainer"\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t/></div\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n',
"url:dijit/form/templates/Spinner.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point="upArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point="downArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' data-dojo-attach-point="textbox,focusNode" type="${type}" data-dojo-attach-event="onkeydown:_onKeyDown"\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\n\t/></div\n></div>\n',
"url:dijit/form/templates/HorizontalSlider.html":'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" data-dojo-attach-event="onkeydown:_onKeyDown, onkeyup:_onKeyUp"\n\trole="presentation"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" style="display:none" data-dojo-attach-point="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event="press:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input data-dojo-attach-point="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" role="presentation" data-dojo-attach-point="sliderBarContainer"\n\t\t\t\t><div role="presentation" data-dojo-attach-point="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event="press:_onBarClick"\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t><div data-dojo-attach-point="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event="press:_onHandleClick" role="slider"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" data-dojo-attach-point="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event="press:_onBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event="press:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" style="display:none" data-dojo-attach-point="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n',
"url:dijit/layout/templates/TabContainer.html":'<div class="dijitTabContainer">\n\t<div class="dijitTabListWrapper" data-dojo-attach-point="tablistNode"></div>\n\t<div data-dojo-attach-point="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point="containerNode"></div>\n</div>\n',"url:dijit/layout/templates/_TabButton.html":'<div role="presentation" data-dojo-attach-point="titleNode,innerDiv,tabContent" class="dijitTabInner dijitTabContent">\n\t<span role="presentation" class="dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point="iconNode"></span>\n\t<span data-dojo-attach-point=\'containerNode,focusNode\' class=\'tabLabel\'></span>\n\t<span class="dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point=\'closeNode\'\n\t\t  role="presentation">\n\t\t<span data-dojo-attach-point=\'closeText\' class=\'dijitTabCloseText\'>[x]</span\n\t\t\t\t></span>\n</div>\n',
"url:dijit/layout/templates/ScrollingTabController.html":'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerMenuButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_menuBtn"\n\t\t data-dojo-props="containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\n\t\t data-dojo-attach-point="_menuBtn" showLabel="false" title="">&#9660;</div>\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_leftBtn"\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point="_leftBtn" data-dojo-attach-event="onClick: doSlideLeft">&#9664;</div>\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_rightBtn"\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point="_rightBtn" data-dojo-attach-event="onClick: doSlideRight">&#9654;</div>\n\t<div class=\'dijitTabListWrapper\' data-dojo-attach-point=\'tablistWrapper\'>\n\t\t<div role=\'tablist\' data-dojo-attach-event=\'onkeydown:onkeydown\'\n\t\t\t data-dojo-attach-point=\'containerNode\' class=\'nowrapTabStrip\'></div>\n\t</div>\n</div>',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'<div data-dojo-attach-event="ondijitclick:_onClick" class="dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point="focusNode" role="button">\n\t<span role="presentation" class="dijitInline dijitTabStripIcon" data-dojo-attach-point="iconNode"></span>\n\t<span data-dojo-attach-point="containerNode,titleNode" class="dijitButtonText"></span>\n</div>',"url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n",
"*now":function(q){q(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var q=this.require;q({cache:{}});!q.async&&q(["dojo"]);q.boot&&q.apply(null,q.boot)})();require("dojo/_base/array dojo/dom-geometry dojo/aspect dgrid/OnDemandGrid dgrid/Grid dgrid/Selection dgrid/selector dgrid/tree dgrid/extensions/ColumnResizer dgrid/extensions/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/DijitRegistry dgrid/extensions/DnD dojox/form/CheckedMultiSelect dojox/form/FileInput dojox/form/Uploader dojox/form/uploader/FileList dojox/validate/web dojox/validate/check dojox/widget/Calendar dojox/gfx dojox/gfx/fx dojox/gfx/utils dojox/gfx/Moveable dojox/gesture/tap dojox/gesture/swipe dojox/html/styles dojo/dom-construct dojox/charting/widget/Chart dojox/charting/widget/Legend dojox/charting/axis2d/Default dojox/charting/plot2d/Lines dojox/charting/plot2d/Pie dojox/charting/plot2d/ClusteredColumns dijit/Menu dijit/Dialog dijit/Tree dijit/Toolbar dijit/ProgressBar dijit/Tooltip dijit/form/TextBox dijit/form/DateTextBox dijit/form/Form dijit/form/FilteringSelect dijit/form/Textarea dijit/form/NumberTextBox dijit/form/ComboBox dijit/form/TimeTextBox dijit/form/Select dijit/form/NumberSpinner dijit/form/HorizontalSlider dijit/layout/ContentPane dijit/layout/TabContainer dijit/layout/BorderContainer dijit/layout/AccordionContainer dojo/io/iframe".split(" "),
function(q,t,r,s,l,b,p,m,f,d,k,e,n){dojo.array=q;dojo.domGeo=t;dojo.aspect=r;dgrid={};dgrid.OnDemandGrid=s;dgrid.Grid=l;dgrid.Selection=b;dgrid.selector=p;dgrid.tree=m;dgrid.ColumnResizer=f;dgrid.ColumnHider=d;dgrid.ColumnReorder=k;dgrid.DijitRegistry=e;dgrid.DnD=n;dojo.declare("FIRMOS.wsConnectionHandler",null,{constructor:function(){this.ws=null;this.binDataKey=this.reqId=0;this.openReq={};this.updateId=null;this.docLoaded=!1;this._createWS();this._logLoadingError=!0},documentLoaded:function(){console.log("DOCUMENT ONLOAD");
new FIRMOS.Menu({contextMenuForWindow:!0});this.docLoaded=!0},_createWS:function(){var a=this.getSessionId();this.ws=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-FREDB-"+(a?a:"NEW"));this.ws.binaryType="arraybuffer";this.ws.onmessage=this.wsMessageListener.bind(this);this.ws.onclose=this.wsCloseListener.bind(this);this.ws.onerror=this.wsErrorListener.bind(this);this.ws.onopen=this.wsOpenListener.bind(this)},
callServerFunction:function(a,b,d,e,f,k,l,m){var n=G_UI_COM.beforeCallServerFunction(a,b,d,e);if(!n.abort)if(n.uidPath&&(d=n.uidPath),n.params&&(e=n.params),this.docLoaded)if(1!=this.ws.readyState)switch(this.ws.readyState){case 0:console.log("WS CONNECTING => WAIT");setTimeout(this.callServerFunction.bind(this,a,b,d,e,f,k,l),10);break;case 2:console.log("WS CLOSING => WAIT");setTimeout(this.callServerFunction.bind(this,a,b,d,e,f,k,l),100);break;case 3:console.log("WS CLOSED => RECREATE"),this._createWS()}else console.log("WS OK => CALL"),
console.log(a+" - "+b+" - "+d+" - "+JSON.stringify(e)+" - BLOB: "+("undefined"!=typeof l)+" - STATE: "+this.ws.readyState),a={cn:a,fn:b,uidPath:d,rId:this.reqId,rType:"S"},"undefined"!=typeof m&&null!=m&&(a.bDK=m),"undefined"!=typeof k&&null!=k&&(a.cId=k),"undefined"!=typeof e&&null!=e&&(a.params=e),e=dojo.toJson(a),f||(f=this.handleServerFunctionResponse.bind(this)),this.openReq[this.reqId]={fn:f,uiState:G_UI_COM.getUIState(),messageObj:a},"undefined"!=typeof l&&null!=l?(f=this.encodeString2Message(e),
e=new Uint8Array(4),k=f.length,e[3]=k>>24,e[2]=k>>16&255,e[1]=k>>8&255,e[0]=k&255,this.ws.send(new Blob([e,f,l]))):this.ws.send(this.encodeString2Message(e)),G_UI_COM.clearUIState(),this.reqId++;else this._logLoadingError&&(console.log("DOCUMENT LOADING => WAIT"),this._logLoadingError=!1),setTimeout(this.callServerFunction.bind(this,a,b,d,e,f,k,l),10)},handleAsyncServerRequest:function(a,b){this.handleServerFunctionResponse({},b,a,G_UI_COM.getUIState())},handleSyncServerRequest:function(a){this.handleServerFunctionResponse({},
!0,a,G_UI_COM.getUIState());a=dojo.toJson({rId:a.rid,rType:"SR"});this.ws.send(this.encodeString2Message(a))},handleServerFunctionResponse:function(a,b,d,e){if(b){if(""!=d.output)switch(b=dojo.fromJson(d.output),b.actiontype){case "jsupdate":case "jsexecute":G_UI_COM.restoreUIState(e);this.updateId="";a.cId&&(this.updateId=a.cId);"undefined"!=typeof b.updateid&&""!=b.updateid&&(this.updateId=b.updateid);G_UI_COM.clearUpdateArea(b.id);eval(b.action);break;default:console.error("Server Function Error => Unknown action type: "+
b.actiontype)}}else console.error("Server Function Error => "+d.cn+"."+d.fn+(d.error?": "+d.error:"")),d.output&&(b=dojo.fromJson(d.output),b.action&&eval(b.action))},wsMessageListener:function(a){a=dojo.fromJson(this.decodeMessage2String(a.data));a.session&&this.storeSessionId(a.session);if(a.error)this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!1,a,this.openReq[a.rid].uiState);else switch(a.rtype){case "E":this.openReq[a.rid]?(this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!1,a,this.openReq[a.rid].uiState),
delete this.openReq[a.rid]):this.handleAsyncServerRequest(a,!1);break;case "SR":this.openReq[a.rid]?(this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!0,a,this.openReq[a.rid].uiState),delete this.openReq[a.rid]):console.error(" Error => Got answer for unknown request id: "+a.rid);break;case "S":this.handleSyncServerRequest(a);break;case "A":this.handleAsyncServerRequest(a,!0);break;default:console.error(" Error => Unknown Server Request Type: "+a.rtype)}},wsCloseListener:function(a){console.log("WS CLOSE "+
JSON.stringify(a))},wsErrorListener:function(a){console.log("WS ERROR "+JSON.stringify(a))},wsOpenListener:function(a){console.log("WS OPEN "+JSON.stringify(a));this.callServerFunction("FIRMOS","init")},encodeString2Message:function(a){return a},decodeMessage2String:function(a){return a},storeSessionId:function(a){sessionStorage.setItem("sessionId",a)},getSessionId:function(){return sessionStorage.getItem("sessionId")},getBinaryDataKey:function(){return this.binDataKey++}});dojo.declare("FIRMOS.uiHandler",
null,{constructor:function(a){this.clearUIState();this.dialog_=[];this.uiState_={};this.showSectionPathInProgress=!1;this.stores_={};this.formDBOs_={};this.selDepFuncs_={views:{},classes:{}};this.liveCharts_={};this.msgProgress_={};this.createdCSSRules_={};this.serverCom=a;this.buttonClickStates_={};this.sitemap_=null;this.storeDepData={}},refreshView:function(a){a.isInstanceOf(FIRMOS.GridBase)?a.refresh():a.isInstanceOf(FIRMOS.Tree)?a.refresh():console.error("REFRESH VIEW TYPE UNKNOWN")},refreshStore:function(a){if(a=
G_UI_COM.getStoreById(a))for(var b=0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},setMenu:function(a){this.menu_=a},isDialogAction:function(){this.dialogAction_=!0},setGridDetailsId:function(a){this.gridDetailsId_=a},setDropCoords:function(a){this.dropCoords_=a},getUIState:function(){return{dialogAction:this.dialogAction_,dialog:this.dialog_,menu:this.menu_,gridDetailsId:this.gridDetailsId_,dropCoords:this.dropCoords_}},clearUIState:function(){this.dialogAction_=!1;this.dropCoords_=this.gridDetailsId_=
this.menu_=null},restoreUIState:function(a){this.uiState_=a},closeDialog:function(){0<this.uiState_.dialog.length&&0<this.dialog_.length&&this.uiState_.dialog[this.uiState_.dialog.length-1].id==this.dialog_[this.dialog_.length-1].id&&this.dialog_[this.dialog_.length-1].hide(!0)},dialogLoaded:function(a){this.uiState_.dialogAction&&this.closeDialog();this.dialog_.push(a);a.show()},dialogClosed:function(a){if(this.dialog_[this.dialog_.length]==a)this.dialog_.pop();else{for(var b=[],d=0;d<this.dialog_.length;d++)this.dialog_[d].id!=
a&&(b[b.length]=this.dialog_[d]);this.dialog_=b}},showMessage:function(a){a.show();this.dialog_.push(a)},setWinTitle:function(a){a&&""!=a&&(document.title=a)},clearContentArea:function(a){this.serverCom.updateId=a;this.clearUpdateArea("");this.contentLoaded(new dijit.layout.ContentPane({}))},clearUpdateArea:function(a){if(""!=a){var b=dijit.byId(a);""==this.serverCom.updateId&&b&&(this.serverCom.updateId=a)}if(""!=this.serverCom.updateId)if("FirmOSViewport"==this.serverCom.updateId)for(var b=dojo.byId("FirmOSViewport"),
b=dijit.findWidgets(b),d=0;d<b.length;d++)b[d].destroyRecursive();else if(b=dijit.byId(this.serverCom.updateId)){d=b.getParent();if(d.isInstanceOf(dijit.layout.TabContainer)||d.isTCElem)return;if(b._contentId)var e=b._contentId;else e=b.id,this.serverCom.updateId=d.id,b=d;if(d=dijit.byId(e))d.region&&(b.updatingRegion_=d.region,b.updatingStyle_=d.style),b.removeChild(d),d.destroyRecursive()}(b=dijit.byId(a))&&b.destroyRecursive()},contentLoaded:function(a,b){this.setWinTitle(b);this.uiState_.dialogAction&&
this.closeDialog();if("FirmOSViewport"==this.serverCom.updateId){var d=dojo.byId("FirmOSViewport");a.placeAt(d);a.startup()}else(d=dijit.byId(this.serverCom.updateId))?(d.getParent(),d.updatingRegion_&&(a.set("region",d.updatingRegion_),delete d.updatingRegion_,a.set("style",d.updatingStyle_),delete d.updatingStyle_),d.isInstanceOf(dijit.layout.ContentPane)?d.set("content",a):d.addChild(a),d._contentId&&(d._contentId=a.id),a.startup()):(console.warn("NO CONTENT AREA FOUND FOR "+a.id),a.destroyRecursive());
this.serverCom.updateId=null},formProxyLoaded:function(a){console.error("IMPLEMENT ME")},menuLoaded:function(a){if(0<a.length)if(this.uiState_.menu)this.uiState_.menu.entriesLoaded(a);else if(this.uiState_.dropCoords){var b=new FIRMOS.Menu;b.setCoords(this.uiState_.dropCoords.x,this.uiState_.dropCoords.y);b.entriesLoaded(a)}},updateStore:function(a,b){var d=this.getStoreById(a);d&&(b.updated&&d.store.updateItems(b.updated),b.deleted&&d.store.deleteItems(b.deleted),b["new"]&&d.store.newItems(b["new"]))},
registerStore:function(a){this.stores_[a.id]?this.stores_[a.id].store=a:this.stores_[a.id]={store:a,views:[]}},unregisterStore:function(a){delete this.stores_[a.id]},registerFormDBOs:function(a,b){this.formDBOs_[a.id]?console.error("Form "+a.id+" already registered"):this.formDBOs_[a.id]={form:a,ids:b}},unregisterFormDBOs:function(a,b){this.formDBOs_[a]?(G_SERVER_COM.callServerFunction("FIRMOS","unregisterDBO",null,{ids:b}),delete this.formDBOs_[a]):console.error("Form "+a+" not registered")},updateFormDBO:function(a){for(var b in this.formDBOs_)for(var d=
0;d<this.formDBOs_[b].ids.length;d++)if(this.formDBOs_[b].ids[d]==a.uid){this.formDBOs_[b].form.updateValues(a);break}},updateForm:function(a,b){var d=dijit.byId(a+"_form");d&&d.isInstanceOf(FIRMOS.Form)&&d.updateValues(b)},updateSVG:function(a,b,d,e){(a=dijit.byId(a))&&a.isInstanceOf(FIRMOS.SVG)&&a.updateElement(b,d,e)},registerSelDepFunc:function(a,b,d){this.selDepFuncs_.views[d.id]=d;this.selDepFuncs_.classes[a]||(this.selDepFuncs_.classes[a]={});this.selDepFuncs_.classes[a][b]||(this.selDepFuncs_.classes[a][b]=
{viewIds:{}});this.selDepFuncs_.classes[a][b].viewIds[d.id]=!0},unregisterSelDepFunc:function(a,b,d){this.selDepFuncs_.classes[a]&&this.selDepFuncs_.classes[a][b]&&(delete this.selDepFuncs_.classes[a][b].viewIds[d.id],0==Object.keys(this.selDepFuncs_.classes[a][b].viewIds).length&&(delete this.selDepFuncs_.classes[a][b].viewIds,0==Object.keys(this.selDepFuncs_.classes[a][b]).length&&(delete this.selDepFuncs_.classes[a][b],0==Object.keys(this.selDepFuncs_.classes[a]).length&&delete this.selDepFuncs_.classes[a])));
delete this.selDepFuncs_.views[d.id]},beforeCallServerFunction:function(a,b,d,e){var f={};if(this.selDepFuncs_.classes[a]&&this.selDepFuncs_.classes[a][b]){var k=[],l;for(l in this.selDepFuncs_.classes[a][b].viewIds)a=this.selDepFuncs_.views[l],k=k.concat(a.getSelectedIds()),dojo.mixin(e,a.contentParmas);d||1==k.length?(f.uidPath=d||[k[0]],e.selected=k,f.params=e):((d=dijit.byId(this.parentId).getParent()._contentId)&&G_UI_COM.clearContentArea(d),f.abort=!0)}return f},registerLiveChart:function(a){this.liveCharts_[a.id]=
a},unregisterLiveChart:function(a){delete this.liveCharts_[a.id]},updateLiveChart:function(a,b,d){this.liveCharts_[a]?this.liveCharts_[a].setData(b,d):console.error("updateLiveChart: "+a+" chart not found")},redefineLiveChart:function(a,b){this.liveCharts_[a]?this.liveCharts_[a].redefine(b):console.error("redefineLiveChart: "+a+" chart not found")},registerMsgProgress:function(a,b){this.msgProgress_[a]=b},unregisterMsgProgress:function(a){delete this.msgProgress_[a]},updateMsgProgress:function(a,
b){this.msgProgress_[a]?this.msgProgress_[a].updateProgress(b):console.error("updateMsgProgress: "+a+" message progress not registered")},registerStoreView:function(a,b){if(this.getStoreById(a)){for(var d=!1,e=0;e<this.stores_[a].views.length;e++)this.stores_[a].views[e].id==b.id&&(d=!0,this.stores_[a].views[e]=b);d||(this.stores_[a].views[this.stores_[a].views.length]=b)}else console.error("registerStoreView: "+a+" store not registered")},unregisterStoreView:function(a,b){if(this.getStoreById(a)){for(var d=
0;d<this.stores_[a].views.length;d++)if(this.stores_[a].views[d].id==b.id){this.stores_[a].views.splice(d,1);break}0==this.stores_[a].views.length&&this.stores_[a].store.destroy()}},getStore:function(a,b){var d=G_UI_COM.getStoreById(a);if(d)return d.store;this.storeDepData[a]&&(b._dependency=this.storeDepData[a],delete this.storeDepData[a]);return new FIRMOS.Store(b)},setStoreDepData:function(a,b){this.storeDepData[a]=b},setStoreDependency:function(a,b,d,e,f){var k={};k.filterfieldname=b;k.filtervalues=
e;k.filterfieldtype=d;f&&(k.numfiltertype=f);(d=this.getStoreById(a))?d.store.params_.dependency[b+"_ref"]=k:(this.storeDepData[a]||(this.storeDepData[a]={}),this.storeDepData[a][b+"_ref"]=k)},deleteStoreDependency:function(a,b){var d=this.getStoreById(a);d?delete d.store.params_.dependency[b+"_ref"]:this.storeDepData[a]&&(delete this.storeDepData[a][b+"_ref"],0==Object.keys(this.storeDepData[a]).length&&delete this.storeDepData[a])},getStoreById:function(a){return this.stores_[a]},invalidateSessionData:function(a){for(var b=
0;b<a.length;b++){var d=this.getStoreById(a[b].storeid).store;if(a[b].queryids){a[b].queryids instanceof Array||(a[b].queryids=[a[b].queryids]);for(var e=0;b<a[e].queryids.length;e++)d.invalidateObserver(a[b].queryids[e])}else d.invalidateAllObservers()}},sortFuncSubSecOrd:function(a,b){return a._subSecOrd<b._subSecOrd?-1:a._subSecOrd>b._subSecOrd?1:0},createCSSRule:function(a,b){this.createdCSSRules_[a]||(dojox.html.insertCssRule("."+a,b),this.createdCSSRules_[a]=b)},removeCSSRule:function(a){this.createdCSSRules_[a]&&
(dojox.html.removeCssRule("."+a,this.createdCSSRules_[a]),delete this.createdCSSRules_[a])},toggleFormGroupStatus:function(a,b){var d=dojo.byId(b+"_tl"),e=dojo.byId(b+"_tr");if(dojo.hasClass(d,"firmosFormGroupShowLeft")){var f="";dojo.removeClass(d,"firmosFormGroupShowLeft");dojo.removeClass(e,"firmosFormGroupShowRight");dojo.addClass(d,"firmosFormGroupHideLeft");dojo.addClass(e,"firmosFormGroupHideRight")}else f="none",dojo.removeClass(d,"firmosFormGroupHideLeft"),dojo.removeClass(e,"firmosFormGroupHideRight"),
dojo.addClass(d,"firmosFormGroupShowLeft"),dojo.addClass(e,"firmosFormGroupShowRight");d=dojo.byId(a);d=dojo.query('tr[firmosGroup~="'+b+'"]',d);for(e=0;e<d.length;e++)dojo.style(d[e],"display",f)},addMenuEntries:function(a,b,d){for(var e=!0,f=0;f<b.length;f++){var k={};k.label=b[f].caption;k.disabled=b[f].disabled||d;if(b[f].icon){var l=b[f].icon.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(l,"background-image: url('"+b[f].icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");
k.iconClass=l}if(b[f].menu){l={};b[f].id&&(l.id=b[f].id);l=new dijit.Menu(l);k.disabled=this.addMenuEntries(l,b[f].menu,k.disabled)||k.disabled;k.popup=l;var m=new dijit.PopupMenuItem(k);l._parentUIElement=m;a.addChild(m)}else b[f].id&&(k.id=b[f].id),b[f].action&&(k._action=b[f].action,k.onClick=function(){G_SERVER_COM.callServerFunction(this._action["class"],this._action.func,this._action.uidPath,this._action.params)}),b[f].downloadId&&(k._downloadId=b[f].downloadId,k.onClick=function(){dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),
this._downloadId,!0)}),a.addChild(new dijit.MenuItem(k));e=e&&k.disabled}return e},_handleTabContainer:function(a,b,d,e){d.shift();if(0<d.length)b=1==d.length,this.showSectionPath(a,d,e)||console.error("Could not resolve given sub section path: container: "+a.id+", sections: "+JSON.stringify(d)),b&&(G_UI_COM.showSectionPathInProgress=!1);else if(e&&(a=a.getChildren()[0])&&a.isInstanceOf(FIRMOS.MultiContentContainer))for(d=a.getChildren(),e=0;e<d.length;e++)if(d[e].id==a.selectedChildWidget.id){e==
d.length-1?a.selectChild(d[0].id):a.selectChild(d[e+1].id);break}},showSectionPath:function(a,b,d){if("string"==typeof a){if("FirmOSViewport"==a)var e=dojo.byId("FirmOSViewport"),e=dijit.byId(e.children[0].id);else e=dijit.byId(a);e||console.error('Base container "'+a+'" not found.')}else e=a;if(e.isInstanceOf(dijit.layout.ContentPane))return e.hasChildren()?this.showSectionPath(e.getChildren()[0],b,d):!1;if(e.isInstanceOf(dijit.layout.BorderContainer)){a=e.getChildren();for(e=0;e<a.length;e++)if(this.showSectionPath(a[e],
b,d))return!0;return!1}if(e.isInstanceOf(FIRMOS.TabContainer)){var f=e.getChild(b[0]);if(f)return d=d&&e.selectedChildWidget.id==b[0],e.selectChild(f,this._handleTabContainer.bind(this,f,a,b,d)),!0;e.selectDefault();return!1}},registerSitemap:function(a){this.sitemap_=a},unregisterSitemap:function(a){delete this.sitemap_},_updateElement:function(a,b){a.set("disabled",b);a._parentUIElement&&a._parentUIElement.set("disabled",b)},_updateChildElements:function(a,b){if(a.isInstanceOf(dijit.Menu)||a.isInstanceOf(dijit.DropDownMenu)||
a.isInstanceOf(dijit.PopupMenuItem))for(var d=a.isInstanceOf(dijit.PopupMenuItem)?a.popup.getChildren():a.getChildren(),e=0;e<d.length;e++)this._updateElement(d[e],b),this._updateChildElements(d[e],b)},_updateParent:function(a){a=a._parentUIElement?a._parentUIElement.getParent():a.getParent();if(a.isInstanceOf(dijit.Menu)||a.isInstanceOf(dijit.DropDownMenu)){for(var b=a.getChildren(),d=!0,e=0;e<b.length;e++)if(!b[e].get("disabled")){d=!1;break}a.get("disabled")!=d&&(this._updateElement(a,d),this._updateParent(a))}},
updateUIElement:function(a,b,d){if(a=dijit.byId(a))this._updateElement(a,b),""!=d&&a.set("label",d),this._updateChildElements(a,b),this._updateParent(a)},updateUIElementSubmenu:function(a,b){var d=dijit.byId(a);if(d){d.destroyDescendants();var e=G_UI_COM.addMenuEntries(d,b,d.get("disabled"));this._updateElement(d,e)}},openUrl:function(a,b){b?window.open(a)||alert(G_TEXTS.openWindow.error):document.location.href=a}});G_SERVER_COM=new FIRMOS.wsConnectionHandler;G_UI_COM=new FIRMOS.uiHandler(G_SERVER_COM);
dojo.declare("FIRMOS.Dialog",dijit.Dialog,{postCreate:function(){this.inherited(arguments);if(this._contentObj){var a=this._maxHeight,b=this._maxWidth,d=dojo.domGeo.position(document.body);0==this._percHeight&&0==a&&(this._percHeight=80);0==this._percWidth&&0==b&&(this._percWidth=80);0!=this._percHeight&&(a=this._percHeight/100*d.h);0!=this._percWidth&&(b=this._percWidth/100*d.w);this._contentObj.set("style","height: "+a+"px; width: "+b+"px;");this.set("content",this._contentObj)}},onShow:function(){this.closable||
dojo.style(this.closeButtonNode,"display","none")},hide:function(a){if(this.closable||a)G_UI_COM.dialogClosed(this.id),this.destroyRecursive()}});dojo.declare("FIRMOS.Message",FIRMOS.Dialog,{texts:G_TEXTS.msg,closable:!1,destroy:function(){this.progressBarId&&G_UI_COM.unregisterMsgProgress(this.progressBarId);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a;switch(this.type){case "msg_error":case "msg_warning":case "msg_info":case "msg_confirm":case "msg_wait":a="Wait"}var b=
'<div class="firmosMessageIcon'+a+'"></div><div class="firmosMessage'+a+'">'+this.msg+"</div>";this.progressBarId&&(b=b+'<div class="firmosMessageProgressBar" id="'+this.id+'_pb"></div>');b=b+'<div class="firmosMessageButtons'+a+'" id="'+this.id+'_buttons"></div>';this.set("content",b);switch(this.type){case "msg_error":case "msg_warning":case "msg_info":a=new dijit.form.Button({type:"button",label:this.texts.ok,onClick:this._onClick.bind(this)});a.placeAt(dojo.byId(this.id+"_buttons"));break;case "msg_confirm":a=
new dijit.form.Button({type:"button",label:this.texts.yes,onClick:this._onClick.bind(this,!0)});a.placeAt(dojo.byId(this.id+"_buttons"));a=new dijit.form.Button({type:"button",label:this.texts.no,onClick:this._onClick.bind(this,!1)});a.placeAt(dojo.byId(this.id+"_buttons"));break;case "msg_wait":this.sfClassname&&(a=new dijit.form.Button({type:"button",label:this.texts.abort,onClick:this._onClick.bind(this)}),a.placeAt(dojo.byId(this.id+"_buttons")))}this.progressBarId&&(G_UI_COM.registerMsgProgress(this.progressBarId,
this),this._pb=new dijit.ProgressBar({style:"width: 100%"}),this._pb.set("value",0),this._pb.set("label","0%"),this._pb.placeAt(dojo.byId(this.id+"_pb")))},updateProgress:function(a){this._pb.set("value",a);this._pb.set("label",Math.round(a)+"%")},_onClick:function(a){this.hide(!0);if(this.sfClassname){var b=dojo.clone(this.sfParams);"boolean"==typeof a&&(b.confirmed=a);G_SERVER_COM.callServerFunction(this.sfClassname,this.sfFunctionname,this.sfUidPath,b)}}});dojo.declare("FIRMOS.Store",null,{idAttribute:"uid",
labelAttributes:["text","objname","uid"],constructor:function(a){this.params_={};a._dependency?(this.params_.dependency=a._dependency,delete a._dependency):this.params_.dependency={};for(var b in a)this[b]=a[b];this._index={};this._dirtyItems={};this._orgItems={};this.queryId_=0;this.queryResults_={};G_UI_COM.registerStore(this)},destroy:function(){this.destroyClassname&&G_SERVER_COM.callServerFunction(this.destroyClassname,this.destroyFunctionname,this.destroyUidPath,this.destroyParams);G_UI_COM.unregisterStore(this);
G_UI_COM.setStoreDepData(this.id,this.params_.dependency);this.inherited(arguments)},close:function(a){return a&&a.abort&&a.abort()},containsValue:function(a,b,d){return-1<dojo.array.indexOf(this.getValues(a,b),d)},mayHaveChildren:function(a){return a.children?!0:!1},_getChildrenCallback:function(a,b,d){a.children=d;for(d=0;d<a.children.length;d++)this._addToIndex(a.children[d],this.getIdentity(a)),a.children[d].children&&"UNCHECKED"==a.children[d].children&&(a.children[d].children=[],a.children[d]._loadChildren=
!0);"function"==typeof b&&b(a)},getChildren:function(a,b){var d="function"==typeof b,e={};d||(e=b);e=this._doQuery(e,a);e.addCallback(this._getChildrenCallback.bind(this,a,b));d&&e.addErrback(b.bind(this,Error("Error in function getChildren")));return dojo.store.util.QueryResults(e)},query:function(a,b){b.query=a;var d=this._doQuery(b);return dojo.store.util.QueryResults(d)},_doQuery:function(a,b){var d=new dojo.Deferred,e=this.queryId_++;this.queryResults_[e]={};this.queryResults_[e].query=a.query;
this.queryResults_[e].queryArgs=a;this.queryResults_[e].dataIds=[];this.queryResults_[e].observer=[];this.queryResults_[e].observerInfo=[];this.queryResults_[e].parentId="";var f=dojo.clone(this.getParams);dojo.mixin(f,this.params_);if(b){var k=this.getIdentity(b);this.queryResults_[e].parentId=k;f.parentid=k}if(b&&b._childrenfunc_)var k=b._funcclassname_||this.getClassname,l=b._childrenfunc_,m=b.uidpath?b.uidpath instanceof Array?b.uidpath:[b.uidpath]:[b.uid];else m=this.getUidPath,k=this.getClassname,
l=this.getFunctionname;f.queryid=e;a.query&&(f.query=a.query);"undefined"!=typeof a.count&&(f.count=a.count);"undefined"!=typeof a.start&&(f.start=a.start);if(a.sort){f.sort=[];for(var n=0;n<a.sort.length;n++)f.sort[n]={},f.sort[n].property=a.sort[n].attribute,f.sort[n].ascending=!a.sort[n].descending}d.total=new dojo.Deferred;d.observe=this._observe.bind(this,e);e=function(a,b,c,e){if(c)if(b=dojo.fromJson(e.output),b.actiontype&&"jsexecute"==b.actiontype)d.reject(),eval(b.action);else{d.total.resolve(b.total);
if(this.queryResults_[a]){for(c=0;c<b.data.length;c++)this.queryResults_[a].dataIds.push(this.getIdentity(b.data[c]));0==this.queryResults_[a].observer.length&&setTimeout(this._deleteResultCache.bind(this,a),2E3)}d.resolve(b.data)}else d.reject(e.error)}.bind(this,e);G_SERVER_COM.callServerFunction(k,l,m,f,e);return d},_fetchTotalCountCallback:function(a,b,d){a.onBegin&&a.onBegin.call(b,d,a)},_addToIndex:function(a,b){this._index[this.getIdentity(a)]||(this._index[this.getIdentity(a)]=[]);this._index[this.getIdentity(a)].push(b)},
_isInIndex:function(a,b){var d=!1,e=this.getIdentity(a);if(this._index[e])for(var f=0;f<this._index[e].length;f++)if(this._index[e][f]==b){d=!0;break}return d},_fetchCallback:function(a,b,d){for(var e=0;e<d.length;e++)this._addToIndex(d[e],"");if(a.onItem)for(e=0;e<d.length;e++)a.onItem.call(b,d[e],a);a.onComplete&&a.onComplete.call(b,a.onItem?null:d,a)},fetch:function(a){a=a||{};var b=a.scope||this,d=this._doQuery(a);d.request=a;d.addCallback(this._fetchCallback.bind(this,a,b));d.total.addCallback(this._fetchTotalCountCallback.bind(this,
a,b));a.onError&&d.addErrback(function(d){return a.onError.call(b,d,a)});a.abort=function(){d.cancel()};return a},getAttributes:function(a){var b=[],d;for(d in a)!a.hasOwnProperty(d)||"_"==d.charAt(0)&&"_"==d.charAt(1)||b.push(d);return b},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0,"dojo.data.api.Write":!0,"dojo.data.api.Notification":!0}},getLabel:function(a){for(var b=0;b<this.labelAttributes.length;b++){var d=this.getValue(a,this.labelAttributes[b]);if(d)return d}for(b in a)return a[b]},
getLabelAttributes:function(a){return this.labelAttributes},getValue:function(a,b,d){if(b in a)return a[b];if(!a._loadChildren||"children"!=b)return d},getValues:function(a,b){var d=this.getValue(a,b);return d instanceof Array?d:void 0===d?[]:[d]},hasAttribute:function(a,b){return b in a},isItem:function(a){return"object"==typeof a&&a&&void 0!=this.getIdentity(a)},isItemLoaded:function(a){return a&&!a._loadChildren},_loadItemCallback:function(a,b){var d=a.scope||this;delete b._loadChildren;var e=
b instanceof Error?a.onError:a.onItem;e&&e.call(d,b)},loadItem:function(a){var b=a.scope||this;a.item._loadChildren?this.getChildren(a.item,this._loadItemCallback.bind(this,a)):a.onItem&&a.onItem.call(b,a.item)},deleteItem:function(a){console.error("STORE DELETE NOT IMPLEMENTED: "+JSON.stringify(a));return!0},isDirty:function(a){return this._dirtyItems[this.getIdentity(a)]?!0:!1},newItem:function(a,b){console.error("STORE NEW ITEM NOT IMPLEMENTED: "+JSON.stringify(a)+" - "+JSON.stringify(b));return a},
revert:function(){for(var a in this._dirtyItems){for(var b in this._dirtyItems[a])if(this._orgItems[a][b]!=this._dirtyItems[a][b])this.onSet(this._orgItems[a],b,this._dirtyItems[a][b],this._orgItems[a][b]);delete this._dirtyItems[a];delete this._orgItems[a]}},save:function(a){console.error("SAVE ITEM NOT IMPLEMENTED: "+JSON.stringify(a));var b=a.scope||this,d;for(d in this._dirtyItems)delete this._dirtyItems[d],delete this._orgItems[d];a.onComplete&&a.onComplete.call(b,a)},setValue:function(a,b,d){if(b==
this.idAttribute)throw Error("Can not change the identity attribute for an item");var e=a[b];e!=d&&(this._orgItems[this.getIdentity(a)]||(this._orgItems[this.getIdentity(a)]=dojo.clone(a)),d?a[b]=d:delete a[b],this._dirtyItems[this.getIdentity(a)]=a,this.onSet(a,b,e,d))},setValues:function(a,b,d){if(!lang.isArray(d))throw Error("setValues expects to be passed an Array object as its value");this.setValue(a,b,d)},unsetAttribute:function(a,b){this.setValue(a,b)},onSet:function(a,b,d,e){},onNew:function(a,
b){},onDelete:function(a){},fetchItemByIdentity:function(a){return this.fetch({query:this.idAttribute+"="+a.identity,onComplete:a.onItem,onError:a.onError,scope:a.scope})},getIdentity:function(a){return a[this.idAttribute]},getIdentityAttributes:function(a){return[this.idAttribute]},_observe:function(a,b,d,e){d={};d.listener=b;d.remove=d.cancel=this._removeObserver.bind(this,d);d.queryId=a;this.queryResults_[a].observer.push(b);this.queryResults_[a].observerInfo.push(e||"");return d},invalidateObserver:function(a){delete this.queryResults_[a]},
invalidateAllObservers:function(){for(var a in this.queryResults_)delete this.queryResults_[a]},_removeObserver:function(a){if(this.queryResults_[a.queryId]){var b=dojo.array.indexOf(this.queryResults_[a.queryId].observer,a.listener);-1<b&&(this.queryResults_[a.queryId].observer.splice(b,1),this.queryResults_[a.queryId].observerInfo.splice(b,1))}this._deleteResultCache(a.queryId)},_deleteResultCache:function(a){if(this.queryResults_[a]&&0==this.queryResults_[a].observer.length){if(this.clearClassname){var b=
this.clearParams;b.queryid=a;G_SERVER_COM.callServerFunction(this.clearClassname,this.clearFunctionname,this.clearUidPath,b)}delete this.queryResults_[a]}},get:function(a){var b={};b[this.idAttribute]=a;return b},remove:function(a){if(this.dragClassname){var b=dojo.clone(this.dragParams);dojo.mixin(b,this.params_);b.selected=a;G_SERVER_COM.callServerFunction(this.dragClassname,this.dragFunctionname,this.dragUidPath,b)}},put:function(a,b){if(this.dropClassname){var d=dojo.clone(this.dropParams);dojo.mixin(d,
this.params_);d.selected=[];for(var e=0;e<a.length;e++)d.selected.push(this.getIdentity(a[e]));b.before&&(d.target=b.source?b.source.getIdentity(b.before):this.getIdentity(b.before));b.mousePos&&G_UI_COM.setDropCoords(b.mousePos);G_SERVER_COM.callServerFunction(this.dropClassname,this.dropFunctionname,this.dropUidPath,d)}},_findItemInResultSets:function(a){var b=[],d;for(d in this.queryResults_)for(var e=0;e<this.queryResults_[d].dataIds.length;e++)if(this.queryResults_[d].dataIds[e]==a){b.push({queryId:d,
pos:e});break}return b},_findChildrenCallResultSets:function(a){var b=[],d;for(d in this.queryResults_)this.queryResults_[d].parentId==a&&b.push({queryId:d});return b},_removeChildrenQuerys:function(a){for(var b in this.queryResults_)if(this.queryResults_[b].parentId==a){for(var d=0;d<this.queryResults_[b].dataIds.length;d++)this._removeChildrenQuerys(this.queryResults_[b].dataIds[d]);delete this.queryResults_[b]}},newItems:function(a){for(var b=0;b<a.length;b++){var d=this._findItemInResultSets(this.getIdentity(a[b].item));
if(0<d||this._isInIndex(a[b].item,a[b].parentid))console.error("NEW ITEMS: Item "+this.getIdentity(a[b].item)+" already in store ("+this.id+")!");else if(0==this._findChildrenCallResultSets(a[b].parentid).length)console.warn("NEW ITEMS: Parent "+a[b].parentid+" not found or no children retrieved yet in store "+this.id+"!");else if(""!=a[b].revid){var e=!0,d=this._findItemInResultSets(a[b].revid);if(0<d.length)for(var f=0;f<d.length;f++)if(a[b].parentid!=this.queryResults_[d[f].queryId].parentId)console.warn("RevId "+
a[b].revid+" found in query for wrong parent item (Found in: "+this.queryResults_[d[f].queryId].parentId+"  Defined parent: "+a[b].parentid+")");else for(var e=!1,k=this.queryResults_[d[f].queryId].observer.length,l=0;l<k;l++)a[b].revisprev&&(d[f].pos+=1),this.queryResults_[d[f].queryId].dataIds.splice(d[f].pos,0,this.getIdentity(a[b].item)),this.queryResults_[d[f].queryId].observer[l](a[b].item,-1,d[f].pos);this._index[a[b].revid]&&(e=!1,this._addToIndex(a[b].item,a[b].parentid),this.onNew(a[b].item));
e&&(""!=a[b].parentid?console.warn("RevId "+a[b].revid+" not found in any query for parent item "+a[b].parentid+" in store "+this.id):console.warn("RevId "+a[b].revid+" not found in any query for store "+this.id))}else{for(f in this.queryResults_)if(a[b].parentid==this.queryResults_[f].parentId){for(l=0;l<this.queryResults_[f].observer.length;l++)this.queryResults_[f].dataIds.unshift(this.getIdentity(a[b].item)),this.queryResults_[f].observer[l](a[b].item,-1,0);break}this._addToIndex(a[b].item,a[b].parentid);
this.onNew(a[b].item)}}},deleteItems:function(a){for(var b=0;b<a.length;b++){var d=!0,e={};e[this.idAttribute]=a[b];var f=this._findItemInResultSets(a[b]);if(0<f.length)for(var d=!1,k=0;k<f.length;k++){this._removeChildrenQuerys(a[b]);this.queryResults_[f[k].queryId].dataIds.splice(f[k].pos,1);for(var l=this.queryResults_[f[k].queryId].observer.length,m=0;m<l;m++)this.queryResults_[f[k].queryId].observer[m](e,f[k].pos,-1)}this._index[a[b]]&&(d=!1,delete this._index[a[b]],this.onDelete(e));d&&console.warn("DeleteId "+
a[b]+" not found in any query for store "+this.id)}},updateItems:function(a){for(var b=[],d=0;d<a.length;d++){var e=!0,f=this._findItemInResultSets(this.getIdentity(a[d]));if(0<f.length)for(var e=!1,k=0;k<f.length;k++)for(var l=this.queryResults_[f[k].queryId].observer.length,m=0;m<l;m++)if(this.queryResults_[f[k].queryId].observerInfo[m]){for(var n=G_UI_COM.getStoreById(this.id).views,p=0;p<n.length;p++)if(n[p].id==this.queryResults_[f[k].queryId].observerInfo[m]){n=n[p].storeAdapters_;for(p=0;p<
n.length;p++)if(n[p].series.name==this.queryResults_[f[k].queryId].query.sId){n[p].objects[f[k].pos].value=a[d].value;break}break}-1==dojo.array.indexOf(b,this.queryResults_[f[k].queryId].observer[m])&&b.push(this.queryResults_[f[k].queryId].observer[m])}else this.queryResults_[f[k].queryId].observer[m](a[d],f[k].pos,f[k].pos);if(this._index[this.getIdentity(a[d])]){var e=!1,q;for(q in a[d])if(q!=this.idAttribute)this.onSet(a[d],q,"",a[d][q])}e&&console.warn("UpdateId "+this.getIdentity(a[d])+" not found in any query for store "+
this.id)}for(d=0;d<b.length;d++)b[d]()}});dojo.declare("FIRMOS.Tree",dijit.Tree,{constructor:function(a){G_UI_COM.registerStoreView(a.model.store.id,this)},destroy:function(){G_UI_COM.unregisterStoreView(this.model.store.id,this);this.inherited(arguments)},postCreate:function(){this.watch("selectedItems",this.selectionChanged.bind(this));this.inherited(arguments)},getIconClass:function(a,b){if(a._icon_){var d=a._icon_.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(d,"background-image: url('"+a._icon_+
"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");return d}return this.inherited(arguments)},selectionChanged:function(a,b,d){if(d&&0<d.length){if(d[0]._funcclassname_&&d[0]._contentfunc_){var e={};e.classname=d[0]._funcclassname_;e.functionname=d[0]._contentfunc_;e.uidPath=d[0].uidpath?d[0].uidpath instanceof Array?d[0].uidpath:[d[0].uidpath]:[d[0].uid]}e&&G_SERVER_COM.callServerFunction(e.classname,e.functionname,e.uidPath,null,null,dijit.byId(this.parentId).getParent()._contentId||
null)}},refresh:function(){this.dndController.selectNone();this.model.store.clearOnClose=!0;this.model.store.close();this._itemNodesMap={};this.rootNode.state="UNCHECKED";this.model.root.children=null;this.rootNode.destroyRecursive();this.model.constructor(this.model);this.model.root._loadChildren=!0;this.postMixInProperties();this._load()},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=sessionStorage.getItem(this.cookieName);a&&dojo.forEach(a.split(","),function(a){this._openedNodes[a]=
!0},this)}},_state:function(a,b){if(!this.persist)return!1;var d=dojo.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[d];b?this._openedNodes[d]=!0:delete this._openedNodes[d];var d=[],e;for(e in this._openedNodes)d.push(e);sessionStorage.setItem(this.cookieName,d.join(","))}});_ColumnDnDSource=dojo.declare("FIRMOS.ColumnDnDSource",dgrid.ColumnReorder.ColumnDndSource,{onMouseDown:function(a){a.stopPropagation=function(){};
this.inherited(arguments)}});dojo.declare("FIRMOS.ColumnReorder",dgrid.ColumnReorder,{columnDndConstructor:_ColumnDnDSource});_GridDnDSource=dojo.declare("FIRMOS.GridDnDSource",dgrid.DnD.GridSource,{allowNested:!0,checkAcceptance:function(a,b){for(var d=0;d<b.length;++d){for(var e=a.getItem(b[d].id).type,f=!1,k=0;k<e.length;++k)if(e[k]in this.accept){f=!0;break}if(!f)return!1}return!0},onMouseDown:function(a){a.stopPropagation=function(){};this.inherited(arguments)},copyState:function(a,b){return!1},
getSelectedNodes:function(){if(this.grid.dndDisabled)return[];var a=[];if(!this.current)return[];var b=new dojo.NodeList,d;for(d in this.grid.selection){var e=this.grid.row(d).data;this.grid.dragClasses_&&!(e.dndclass in this.grid.dragClasses_)||e._disabledrag_?a.push(e):b.push(this._selectedNodes[d])}if(0<a.length){b="";for(d=0;d<a.length;d++)b+=", "+this.grid.store.getLabel(a[d]);b=b.substr(2);console.log("Object(s) not dragable "+b);return[]}return b},onDrop:function(a,b,d){var e=this,f=this._targetAnchor=
this.targetAnchor,k=this.grid,l=k.store,f=f&&k.row(f);dojo.Deferred.when(f&&l.get(l.getIdentity(f.data)),function(f){if(e!=a)e.onDropExternal(a,b,d,f);else e.onDropInternal(b,d,f)})},onDropInternal:function(a,b,d){var e=this.grid.store,f=this,k=[];a.forEach(function(a){k.push(f.getObject(a))});e[b&&e.copy?"copy":"put"](k,{before:d,mousePos:this.mousePos_})},onDropExternal:function(a,b,d,e){var f=this.grid.store,k=a.grid,l=[];b.forEach(function(b,c){l.push(a.getObject(b))});f[d&&f.copy?"copy":"put"](l,
{source:k.store,before:e,mousePos:this.mousePos_})},getObject:function(a){return this.grid.row(a).data},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){dojo.dnd.Source.superclass.onMouseMove.call(this,a);var b=dojo.dnd.Manager.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&b.startDrag(this,d,this.copyState(dojo.dnd.getCopyKeyState(a),
!0))}if(this.isDragging&&(this.mousePos_={x:a.pageX,y:a.pageY},d=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=dojo.domGeo.position(this.current,!0)),d=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==dojo.domGeo.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||d!=this.before))if(this._markTargetAnchor(d),this.grid.dropClassesMultiple_||this.grid.dropClassesSimple_)if(this.current)if(a=
this.grid.row(this.current).data,(this.grid.dropClassesSingle_&&a.dndclass in this.grid.dropClassesSingle_&&1==this.grid.selection_.length||this.grid.dropClassesMultiple_&&a.dndclass in this.grid.dropClassesMultiple_)&&!a._disabledrop_){for(var d=!1,e=0;e<b.nodes.length;e++)if(b.source.grid.store.getIdentity(b.source.grid.row(b.nodes[e]))==this.grid.store.getIdentity(a)){d=!0;break}d?b.canDrop(!1):b.canDrop(!0)}else b.canDrop(!1);else b.canDrop(!1);else b.canDrop(!0)}}});dojo.declare("FIRMOS.GridDnD",
dgrid.DnD,{dndAcceptType:["dgrid-row"],dndConstructor:_GridDnDSource,postMixInProperties:function(){this.inherited(arguments);this.dndParams=dojo.mixin(this.dndParams,{accept:this.dndAcceptType})}});dojo.declare("FIRMOS.Selection",dgrid.Selection,{clearSelection:function(a,b){this.allSelected=!1;for(var d in this.selection)a!==d&&this._select(d,null,!1);b||(this._lastSelected=null)}});dojo.declare("FIRMOS.GridBase",null,{constructor:function(a){if(a.dragClasses){this.dragClasses_={};for(var b=0;b<
a.dragClasses.length;b++)this.dragClasses_[a.dragClasses[b]]=!0;delete a.dragClasses}if(a.dropClassesMultiple){this.dropClassesMultiple_={};for(b=0;b<a.dropClassesMultiple.length;b++)this.dropClassesMultiple_[a.dropClassesMultiple[b]]=!0;delete a.dropClassesMultiple}if(a.dropClassesSingle){this.dropClassesSingle_={};for(b=0;b<a.dropClassesSingle.length;b++)this.dropClassesSingle_[a.dropClassesSingle[b]]=!0;delete a.dropClassesSingle}this.depStores_=[];this.buttons_=[];this.storeRefreshHandler_={};
this.selection_=[];this._events=[];G_UI_COM.registerStoreView(a.store.id,this);a.selDepClassname&&(this.id=a.id,G_UI_COM.registerSelDepFunc(a.selDepClassname,a.selDepFunctionname,this))},destroy:function(){G_UI_COM.unregisterStoreView(this.store.id,this);this.selection={};this.notifyServer();this.selDepClassname&&G_UI_COM.unregisterSelDepFunc(this.selDepClassname,this.selDepFunctionname,this);for(var a=0;a<this.depStores_.length;a++)G_UI_COM.deleteStoreDependency(this.depStores_[a].storeId,this.depStores_[a].refId);
for(;0<this._events.length;)this._events.pop().remove();this.inherited(arguments)},getObjectDndType:function(a){return[this.id]},postCreate:function(){this.inherited(arguments);this._events.push(this.on(".dgrid-row:contextmenu",this.onContextMenu.bind(this)));this._events.push(this.on("dgrid-select",this.onSelect.bind(this)));this._events.push(this.on("dgrid-deselect",this.onDeselect.bind(this)));this._events.push(dojo.aspect.after(this,"expand",this._onExpand.bind(this),!0))},getSelectedIds:function(){var a=
[],b;for(b in this.selection){var d=this.row(b);a.push(this.store.getIdentity(d.data))}return a},_onExpand:function(a,b,d){b=dojo.query(".firmosIconNode",a.element);for(d=0;d<b.length;d++)if(2==b.length){var e=a.element?a:this.row(a);this._expanded[e.id]?(dojo.style(b[0],"display","none"),dojo.style(b[1],"display","")):(dojo.style(b[0],"display",""),dojo.style(b[1],"display","none"))}},_renderIconCell:function(a,b,d,e,f,k){d=document.createElement("div");f="<img src='"+a[f]+"' class='firmosIconNode'>";
k&&""!=k&&(f=f+"<img src='"+a[k]+"' class='firmosIconNode' style='display:none;'>");d.innerHTML=f+"&nbsp;"+b;return d},_renderDate:function(a,b,d,e){a=document.createElement("div");b&&(a.innerHTML=dojo.date.locale.format(new Date(b),{formatLength:"short"}));return a},_renderIcons:function(a,b,d,e){a=document.createElement("div");if(!b||""==b)return"";b=b.split(",");d="";for(e=0;e<b.length;e++)d=d+'<img src="'+b[e]+'">';a.innerHTML=d;return a},_selectionChanged:function(){var a=!1,b=this.getSelectedIds();
if(b.length!=this.selection_.length)a=!0;else for(var d=0;d<b.length;d++)b[d]!=this.selection_[d]&&(a=!0);a&&(this.selection_=b);return a},onSelect:function(a){if(this._selectionChanged())this.onSelectionChanged(a,this.selection_)},onDeselect:function(a){if(this._selectionChanged())this.onSelectionChanged(a,this.selection_)},onSelectionChanged:function(a,b){this.refreshDepStores(b);this.refreshButtons(b);this.notifyServer()},renderArray:function(a,b,d){function e(){var b=arguments;if(-1<s)for(var c=
0;c<b.length;c++){var k=b[c],l=q[k?0:q.length-1];if(l){var l=f(l),n=m.row(l);(n=n&&m[k?"up":"down"](n))&&n.element!=l&&(k=k?"unshift":"push",a[k](n.data),q[k](n.element),d.count++)}}}function f(a){return!dojo.isDescendant(a,m.domNode)&&dojo.byId(a.id)?m.row(a.id.slice(m.id.length+5)).element:a}function k(a){H=m.insertRow(a,F,null,n++,d);H.observerIndex=s;return H}function l(a){S=a.slice(0);(r=b?b.parentNode:m.contentNode)&&r.parentNode&&(r!==m.contentNode||a.length)&&(r.insertBefore(F,b||null),(H=
a[a.length-1])&&m.adjustRowIndices(H));q=a;t&&(t.rows=q)}d=d||{};var m=this,n=d.start||0,p=this.observers,q,r,s;b||(this._lastCollection=a);if(a.observe){m._numObservers++;var t=a.observe(function(k,l,n){var p,t,z;if(-1<l&&-1<n)l=d.start+n,z=m.id+"-row-"+(d.parentId?d.parentId+"-":"")+m.store.getIdentity(k),p=dojo.byId(z),p.rowIndex=l,l=m.renderRow(k,d),dojo.destroy(p.childNodes[0]),dojo.place(l.childNodes[0],p),dojo.destroy(l),m._rowIdToObject[z]=k;else{-1<l&&q[l]&&(z=m.id+"-row-"+(d.parentId?d.parentId+
"-":"")+m.store.getIdentity(k),(p=dojo.byId(z))&&m.removeRow(p),d.count--,m._processScroll&&m._processScroll());if(-1<n){if(q.length)if(2>n)z=(z=q[n])&&f(z);else{if(z=q[n-1])z=f(z),z=(z.connected||z).nextSibling}else z=m._getFirstRowSibling&&m._getFirstRowSibling(r);p&&z&&p.id===z.id&&(z=(z.connected||z).nextSibling);z&&!z.parentNode&&(z=dojo.byId(z.id));p=b&&b.parentNode||z&&z.parentNode||m.contentNode;if(p=m.newRow(k,p,null,d.start+n,d))if(p.observerIndex=s,q.splice(n,0,p),!t||n<l)t=(t=p.previousSibling)&&
t.rowIndex+1!=p.rowIndex&&0!=p.rowIndex?t:p;d.count++}0===l?e(1,1):l===a.length-(-1===n?0:1)&&e(0,0);l!=n&&t&&m.adjustRowIndices(t);m._onNotification(q,k,l,n)}},!0);s=p.push(t)-1}var F=document.createDocumentFragment(),H,S;if(a.map){if(q=a.map(k,console.error),q.then)return a.then(function(b){a=b;return q.then(function(a){l(a);e(1,1,0,0);return S})})}else{q=[];for(var p=0,K=a.length;p<K;p++)q[p]=k(a[p])}l(q);e(1,1,0,0);return S},removeRow:function(a,b){if(a){var d=a.previousSibling,e=a.nextSibling,
f;if(f=d)f=d.observerIndex,f=null!=f?f:d.previousObserverIndex;d=f;if(f=e)f=e.observerIndex,f=null!=f?f:e.nextObserverIndex;e=a.observerIndex;a.observerIndex=void 0;b&&(a.nextObserverIndex=f,a.previousObserverIndex=d);if(this.cleanEmptyObservers&&-1<e&&e!==d&&e!==f&&(d=this.observers,(f=d[e])&&1<this._numObservers)){if(!b)for(var k=f.rows,l=0;l<k.length;l++)if(k[l]!=a&&dom.isDescendant(k[l],this.domNode))return this.inherited(arguments);f.cancel();this._numObservers--;d[e]=0}}this.inherited(arguments)},
renderRow:function(a,b){var d=this.inherited(arguments);if(this.showDetailsSection){var e={params:{}};a._detailsfunc_&&a._funcclassname_?(e.classname=a._funcclassname_,e.functionname=a._detailsfunc_):this.detailsClassname&&(e.classname=this.detailsClassname,e.functionname=this.detailsFunctionname,dojo.mixin(e.params,this.detailsParams),this.detailsUidPath&&(e.uidPath=this.detailsUidPath));if(e.classname){e.params.selected=a.uidpath?a.uidpath instanceof Array?a.uidpath:[a.uidpath]:[a.uid];e.uidPath||
(e.uidPath=e.params.selected);a._detailsfunc_=e;var f=this.row(a),e=dijit.byId(f.id+"_cc");e||(e=new dijit.layout.ContentPane({id:f.id+"_cc"}),f=new dijit.layout.ContentPane({id:f.id+"_cp"}),e.addChild(f),dojo.style(e.domNode,"display","none"));dojo.place(e.domNode,d)}}return d},showDetails:function(a){rowId=a.id;G_UI_COM.setGridDetailsId(rowId);var b=dijit.byId(rowId+"_cc");G_SERVER_COM.callServerFunction(a.data._detailsfunc_.classname,a.data._detailsfunc_.functionname,a.data._detailsfunc_.uidPath,
a.data._detailsfunc_.params,this.detailsCallback.bind(this),b.getChildren()[0].id)},detailsCallback:function(a,b,d,e){G_SERVER_COM.handleServerFunctionResponse(a,b,d,e);a=dijit.byId(e.gridDetailsId+"_cc");dojo.style(a.domNode,"display","")},hideDetails:function(a){rowId=a.id;a=dijit.byId(rowId+"_cc");dojo.style(a.domNode,"display","none")},onContextMenu:function(a){var b=this.row(a);this.contextMenu._handleGridMenu(a,this,b.data)},_refreshDepStoreViews:function(a){delete this.storeRefreshHandler_[a.store.id];
for(var b=0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},refreshDepStore:function(a,b,d){G_UI_COM.setStoreDependency(a,b,"G",d);if(b=G_UI_COM.getStoreById(a))this.storeRefreshHandler_[a]&&(clearTimeout(this.storeRefreshHandler_[a]),delete this.storeRefreshHandler_[a]),this.storeRefreshHandler_[a]=setTimeout(this._refreshDepStoreViews.bind(this,b),200)},refreshDepStores:function(a){for(var b=0;b<this.depStores_.length;b++)this.refreshDepStore(this.depStores_[b].storeId,this.depStores_[b].refId,
a)},refreshButtons:function(a){a=a.length;for(var b=0;b<this.buttons_.length;b++)switch(this.buttons_[b].bType){case "gbd_single":1==a?this.buttons_[b].button.set("disabled",!1):this.buttons_[b].button.set("disabled",!0);break;case "gbd_multi":0==a?this.buttons_[b].button.set("disabled",!0):this.buttons_[b].button.set("disabled",!1)}},notifyServer:function(){if(this.selDepClassname){var a=dojo.clone(this.store.params_);dojo.mixin(a,this.selDepParams);G_SERVER_COM.callServerFunction(this.selDepClassname,
this.selDepFunctionname,this.selDepUidPath,a,null,dijit.byId(this.parentId).getParent()._contentId||null)}},registerDepStore:function(a,b){this.depStores_.push({storeId:a,refId:b});this.refreshDepStore(a,b,this.selection_)},registerButton:function(a,b){this.buttons_.push({button:a,bType:b});a.setGrid(this)},doSearch:function(a){this.store.params_.fulltext=a;this.refresh()}});dojo.declare("FIRMOS.FormButton",dijit.form.Button,{onClick:function(a){a.preventDefault();dojo.stopEvent(a);this._getWidget(dijit.form.Form).disableAllButtons();
switch(this.type){case "submit":this.handleTypeSubmit();break;case "button":this.handleTypeButton()}},_getWidget:function(a){for(var b=this.getParent();b&&!b.isInstanceOf(a);)b=b.getParent();return b},handleTypeButton:function(){if(this.closeDialog){var a=this._getWidget(dijit.Dialog);a&&a.hide()}this.actionClassname&&G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,this.actionParams,this.sfCallback.bind(this));this.downloadId&&(dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),
this.downloadId,!0),this.closeDialog||this._getWidget(dijit.form.Form).restoreAllButtons())},handleTypeSubmit:function(){var a=this._getWidget(dijit.form.Form),b=dojo.clone(this.actionParams);a.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,b,this.hiddenFields,this.isDialog)},sfCallback:function(a,b,d,e){this._getWidget(dijit.form.Form).restoreAllButtons();G_SERVER_COM.handleServerFunctionResponse(a,b,d,e)}});dojo.declare("FIRMOS.GridButton",dijit.form.Button,{setGrid:function(a){this.grid_=
a},onClick:function(){var a={},b=this.grid_.getSelectedIds(),d;a.dependency=this.grid_.store.params_.dependency;dojo.mixin(a,this.actionParams);a.selected=b;if(this.actionUidPath)d=this.actionUidPath;else if(0<b.length){for(var e in this.grid.selection){var f=e;break}e=this.grid_.row(f);d=[b[0]];e.uidPath?d=e.uidPath:e.uid&&(d=[e.uid])}G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,d,a)}});dojo.declare("FIRMOS.widget.Calendar",dojox.widget.Calendar,{_setValueAttr:function(a){a&&
this.inherited(arguments)}});dojo.declare("FIRMOS.DateTextBox",dijit.form.DateTextBox,{popupClass:"FIRMOS.widget.Calendar",_blankValue:"",constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_setDisplayedValueAttr:function(a,b){isNaN(a)?this.inherited(arguments):0==Number(a)?this._setValueAttr("",b,""):this._setValueAttr(new Date(Number(a)),b,new Date(Number(a)))},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&
!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.Recurrence",dijit.form._FormValueWidget,{texts:G_TEXTS.recurrence,_selectedRadioCSS:"dijitChecked dijitRadioChecked",_selectedStr:'aria-checked="true"',_rtypeStr:"",_rtypeDetailsStr:"",_startStr:"",_endStr:"",rtypes:"once minute hour day week month quarter year".split(" "),days:"mo tu we th fr sa su".split(" "),minuteDetails:[{label:"1",
value:"1"},{label:"5",value:"5"},{label:"10",value:"10"},{label:"15",value:"15"},{label:"30",value:"30"},{label:"45",value:"45"}],hourDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"6",value:"6"},{label:"12",value:"12"}],dayDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],monthDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},
{label:"4",value:"4"},{label:"6",value:"6"}],rtypesVis:[],baseClass:"firmosRecurrenceInput",templateString:"",templateStart:'<div data-dojo-attach-point="wrapperDiv,focusNode" id="${id}" role="presentation">',templateEnd:"</div>",templateDivider:'<div class="firmosRecurrenceDividerContainer"><div class="firmosRecurrenceDivider"></div></div>',templateStartDate:'<div id="${id}_sd"></div><div id="${id}_st"></div>',templateEndDate:'<div id="${id}_ed"></div><div id="${id}_et"></div>',templateCount:'<div id="${id}_count"></div>',
templateCB:'<div data-dojo-attach-point="${value}Div" class="firmosRecurrenceInputItem" role="presentation"><div class="firmosRecurrenceCBContainer"><div class="dijit dijitReset dijitInline dojoxMultiSelectItemBox dijitRadio" role="presentation"><input class="dijitCheckBoxInput" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onclick:_onRadioClick, onmouseover: _onRadioMOver, onmouseout: _onRadioMOut" data-onclick="${onclick}" data-cbid="${value}" type="radio" "/></div><div class="dijitInline dojoxMultiSelectItemLabel" data-dojo-attach-event="onclick:${onclick}" data-cbid="${value}">${caption}</div></div>${details}</div>',
templateonceDetails:"",templateminuteDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_m_detail"></div></div>',templatehourDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_h_detail"></div></div>',templatedayDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_d_detail"></div></div>',
templateweekCB:'<div data-dojo-attach-point="${value}DayDiv" class="dijit dijitReset dijitInline dijitCheckBox" role="presentation"><input class="dijitReset dijitCheckBoxInput" data-onclick="_setWeekDetails" data-day="${value}" type="checkbox" data-dojo-attach-event="onclick:_onBoxClick, onmouseover: _onBoxMOver, onmouseout: _onBoxMOut" style="-moz-user-select: none;"></div>',templateweekDetails:'<div class="dijitInline" style="float:right;">${week_days}</div>',templatemonthDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_mo_detail"></div></div>',
templatequarterDetails:"",templateyearDetails:"",constructor:function(a){for(var b="",d=0;d<this.days.length;d++)b=b+this.templateweekCB.replace(/\$\{value\}/g,this.days[d])+this.texts[this.days[d]]+" ";this.templateweekDetails=this.templateweekDetails.replace(/\$\{week_days\}/g,b);this.templateString=this.templateStart;this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.startDate).replace(/\$\{value\}/g,"sd").replace(/\$\{details\}/g,this.templateStartDate).replace(/\$\{onclick\}/g,
"_onSTSelect");this.templateString+=this.templateDivider;for(d=0;d<this.rtypes.length;d++)a["ri"+this.rtypes[d]]&&(this.rtypesVis.push(this.rtypes[d]),this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts[this.rtypes[d]]).replace(/\$\{value\}/g,this.rtypes[d]).replace(/\$\{details\}/g,this["template"+this.rtypes[d]+"Details"].replace(/\$\{caption\}/g,this.texts.interval)).replace(/\$\{onclick\}/g,"_onRTSelect"));this.templateString+=this.templateDivider;this.templateString+=this.templateCB.replace(/\$\{caption\}/g,
this.texts.noEndDate).replace(/\$\{value\}/g,"ned").replace(/\$\{details\}/g,"").replace(/\$\{onclick\}/g,"_onETSelect");this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.endDate).replace(/\$\{value\}/g,"ed").replace(/\$\{details\}/g,this.templateEndDate).replace(/\$\{onclick\}/g,"_onETSelect");this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.count).replace(/\$\{value\}/g,"count").replace(/\$\{details\}/g,this.templateCount).replace(/\$\{onclick\}/g,
"_onETSelect");this.templateString+=this.templateEnd;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},startup:function(){this.inherited(arguments);this.startDate=new FIRMOS.DateTextBox({style:"float: right;",onChange:this._onSDTChange.bind(this)},this.id+"_sd");this.startTime=new dijit.form.TimeTextBox({style:"float: right;",onChange:this._onSDTChange.bind(this),constraints:{timePattern:"HH:mm",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",
visibleRange:"T01:00:00"}},this.id+"_st");this.endDate=new FIRMOS.DateTextBox({style:"float: right;",onChange:this._onEDTChange.bind(this)},this.id+"_ed");this.endTime=new dijit.form.TimeTextBox({style:"float: right;",onChange:this._onEDTChange.bind(this),constraints:{timePattern:"HH:mm",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T01:00:00"}},this.id+"_et");this.countSelect=new dijit.form.NumberSpinner({style:"float: right; width: 60px;",onChange:this._onCountChange.bind(this),
constraints:{min:1,places:0}},this.id+"_count");this.riminute&&(this.minuteCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setMinuteDetails.bind(this),options:this.minuteDetails},this.id+"_m_detail"),this._setMinuteDetailsUI(""));this.rihour&&(this.hourCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setHourDetails.bind(this),options:this.hourDetails},this.id+"_h_detail"),this._setHourDetailsUI(""));this.riday&&(this.dayCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setDayDetails.bind(this),
options:this.dayDetails},this.id+"_d_detail"),this._setDayDetailsUI(""));this.riweek&&this._setWeekDetailsUI("");this.rimonth&&(this.monthCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setMonthDetails.bind(this),options:this.monthDetails},this.id+"_mo_detail"),this._setMonthDetailsUI(""));this._selectRB(this.sdDiv);this._setValueUI(this.value||"")},_setValueUI:function(a){var b=[];""!=a&&(b=a.split("#"));for(var d=a=!0,e=0;e<b.length;e++)0==b[e].indexOf("DTSTART")?(this._setValueUIStart(b[e]),
a=!1):0==b[e].indexOf("RRULE")?(this._setValueUIRRule(b[e]),d=!1):console.error("Unknown part in recurrence rule definition: "+b[e]);a&&this._setValueUIStart("");d&&this._setValueUIRRule("")},_getChooserTime:function(a){switch(Math.round(a.getMinutes()/15)){case 0:a.setMinutes(0);break;case 1:a.setMinutes(15);break;case 2:a.setMinutes(30);break;case 3:a.setMinutes(45);break;case 4:a.setMinutes(0),a.setHours(a.getHours()+1)}return a},_setValueUIStart:function(a){""==a?(a=this._getChooserTime(new Date),
this.startDate.set("value",a),this.startTime.set("value",a)):(a=this._stringToDateTime(a.substring(8)),this.startDate.set("value",a.date),this.startTime.set("value",a.time))},_setValueUIRRule:function(a){""==a?(this._setRecurrenceTypeUI([]),this._setUntilUI(""),this._setCountUI("")):(a=a.substr(6).split(";"),1<a.length&&0==a[a.length-1].indexOf("UNTIL")?(this._setCountUI(""),this._setUntilUI(a[a.length-1]),a.pop()):(this._setUntilUI(""),1<a.length&&0==a[a.length-1].indexOf("COUNT")?(this._setCountUI(a[a.length-
1]),a.pop()):this._setCountUI("")),this._setRecurrenceTypeUI(a))},_setRecurrenceTypeUI:function(a){var b="";if(0<a.length)switch(a[0].substr(5)){case "MINUTELY":b="minute";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setMinuteDetailsUI(a[1]):this._setMinuteDetailsUI("");break;case "HOURLY":b="hour";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setHourDetailsUI(a[1]):this._setHourDetailsUI("");break;case "DAILY":b="day";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setDayDetailsUI(a[1]):this._setDayDetailsUI("");
break;case "WEEKLY":b="week";1<a.length&&0==a[1].indexOf("BYDAY")?this._setWeekDetailsUI(a[1]):this._setWeekDetailsUI("");break;case "MONTHLY":1<a.length&&"INTERVAL=3"==a[1]?b="quarter":(b="month",1<a.length&&0==a[1].indexOf("INTERVAL")?this._setMonthDetailsUI(a[1]):this._setMonthDetailsUI(""));break;case "YEARLY":b="year"}if(""==b||!this[b+"Div"])for(a=0;a<this.rtypes.length;a++)if(this[this.rtypes[a]+"Div"]){b=this.rtypes[a];break}for(a=0;a<this.rtypesVis.length;a++)this._unselectRB(this[this.rtypesVis[a]+
"Div"]);this._selectRB(this[b+"Div"]);this._setRecurrenceType(b)},_setUntilUI:function(a){""==a?(this._selectRB(this.nedDiv),this._unselectRB(this.edDiv),this._unselectRB(this.countDiv),a=new Date,a.setFullYear(a.getFullYear()+1),a=this._getChooserTime(a),this.endDate.set("value",a),this.endTime.set("value",a),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0)):(this._selectRB(this.edDiv),this._unselectRB(this.nedDiv),this._unselectRB(this.countDiv),a=this._stringToDateTime(a.substring(6)),
this.endDate.set("value",a.date),this.endTime.set("value",a.time),this.endDate.set("disabled",!1),this.endTime.set("disabled",!1));this.countSelect.set("disabled",!0)},_setCountUI:function(a){""==a?(this._selectRB(this.nedDiv),this._unselectRB(this.edDiv),this._unselectRB(this.countDiv),this.countSelect.set("value",1),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!0)):(this._selectRB(this.countDiv),this._unselectRB(this.nedDiv),this.countSelect.set("value",
Number(a.substring(6))),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!1))},_setForeverUI:function(){},_internalSetValue:function(){this.value=this._startStr;""!=this._rtypeStr&&(this.value=this.value+"#"+this._rtypeStr+this._rtypeDetailsStr+this._endStr)},_setRecurrenceType:function(a){this._disableDetails();this._rtypeDetailsStr="";if(a==this.rtypes[0])this._rtypeStr="",this._disableEndBlock(!0);else switch(this._disableEndBlock(!1),a){case this.rtypes[1]:this._disableMinuteDetails(!1);
this._setMinuteDetails();this._rtypeStr="RRULE:FREQ=MINUTELY";break;case this.rtypes[2]:this._disableHourDetails(!1);this._setHourDetails();this._rtypeStr="RRULE:FREQ=HOURLY";break;case this.rtypes[3]:this._disableDayDetails(!1);this._setDayDetails();this._rtypeStr="RRULE:FREQ=DAILY";break;case this.rtypes[4]:this._disableWeekDetails(!1);this._setWeekDetails();this._rtypeStr="RRULE:FREQ=WEEKLY";break;case this.rtypes[5]:this._disableMonthDetails(!1);this._setMonthDetails();this._rtypeStr="RRULE:FREQ=MONTHLY";
break;case this.rtypes[6]:this._rtypeStr="RRULE:FREQ=MONTHLY;INTERVAL=3";break;case this.rtypes[7]:this._rtypeStr="RRULE:FREQ=YEARLY"}this._internalSetValue()},_setMinuteDetailsUI:function(a){""==a?this.minuteCB.set("value",this.minuteDetails[0].id):(a=a.substr(9),this.minuteCB.set("value",a))},_setHourDetailsUI:function(a){""==a?this.hourCB.set("value",this.hourDetails[0].id):(a=a.substr(9),this.hourCB.set("value",a))},_setDayDetailsUI:function(a){""==a?this.dayCB.set("value",this.dayDetails[0].id):
(a=a.substr(9),this.dayCB.set("value",a))},_setWeekDetailsUI:function(a){for(var b=0;b<this.days.length;b++)this._unselectCB(this[this.days[b]+"DayDiv"]);if(""==a)b=(new Date).getDay(),0==b?b=6:b--,this._selectCB(this[this.days[b]+"DayDiv"]);else for(a=a.substr(6).split(","),b=0;b<a.length;b++)this._selectCB(this[a[b].toLowerCase()+"DayDiv"])},_setMonthDetailsUI:function(a){""==a?this.monthCB.set("value",this.monthDetails[0].id):(a=a.substr(9),this.monthCB.set("value",a))},_setMinuteDetails:function(){var a=
this.minuteCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setHourDetails:function(){var a=this.hourCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setDayDetails:function(){var a=this.dayCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setWeekDetails:function(){for(var a=[],b=0;b<this.days.length;b++)this._isSelectedCB(this[this.days[b]+"DayDiv"])&&a.push(this.days[b].toUpperCase());
this._rtypeDetailsStr=a.join(",");0<this._rtypeDetailsStr.length&&(this._rtypeDetailsStr=";BYDAY="+this._rtypeDetailsStr);this._internalSetValue()},_setMonthDetails:function(){var a=this.monthCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_disableDetails:function(){this._disableMinuteDetails(!0);this._disableHourDetails(!0);this._disableDayDetails(!0);this._disableWeekDetails(!0);this._disableMonthDetails(!0)},_disableMinuteDetails:function(a){this.minuteCB.set("disabled",
a)},_disableHourDetails:function(a){this.hourCB.set("disabled",a)},_disableDayDetails:function(a){this.dayCB.set("disabled",a)},_disableWeekDetails:function(a){if(a)for(a=0;a<this.days.length;a++)this._disableCB(this[this.days[a]+"DayDiv"]);else for(a=0;a<this.days.length;a++)this._enableCB(this[this.days[a]+"DayDiv"])},_disableMonthDetails:function(a){this.monthCB.set("disabled",a)},_disableEndBlock:function(a){a?(this._disableRB(this.edDiv),this._disableRB(this.nedDiv),this.endDate.set("disabled",
!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!0)):(this._enableRB(this.edDiv),this._enableRB(this.nedDiv),this._isSelectedRB(this.edDiv)&&(this.endDate.set("disabled",!1),this.endTime.set("disabled",!1)),this._isSelectedRB(this.countDiv)&&this.countSelect.set("disabled",!1))},_onCountChange:function(){this._endStr=";COUNT="+this.countSelect.get("value");this._internalSetValue()},_onEDTChange:function(){this._endStr=";UNTIL="+this._dateTimeToString(this.endDate.get("value"),
this.endTime.get("value"));this._internalSetValue()},_onSDTChange:function(){this._startStr="DTSTART:"+this._dateTimeToString(this.startDate.get("value"),this.startTime.get("value"));this._internalSetValue()},_stringToDateTime:function(a){var b={};a=a.split("T");b.date=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)));1<a.length&&(b.time=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)),Number(a[1].substr(0,2)),Number(a[1].substr(2,
2)),Number(a[1].substr(4,2))),7==a[1].length&&"Z"==a[6]&&b.time.setMinutes(b.time.getMinutes()+b.time.getTimezoneOffset()));return b},_dateTimeToString:function(a,b){var d=""+a.getFullYear();9>a.getMonth()&&(d+="0");d+=a.getMonth()+1;10>a.getDate()&&(d+="0");d+=a.getDate();d+="T";10>b.getHours()&&(d+="0");d+=b.getHours();10>b.getMinutes()&&(d+="0");d+=b.getMinutes();10>b.getSeconds()&&(d+="0");return d+=b.getSeconds()},_onSTSelect:function(a){},_onETSelect:function(a){switch(a.target.getAttribute("data-cbid")){case "ned":this._selectRB(this.nedDiv);
this._unselectRB(this.edDiv);this._unselectRB(this.countDiv);this._endStr="";this.endDate.set("disabled",!0);this.endTime.set("disabled",!0);this.countSelect.set("disabled",!0);break;case "ed":this._selectRB(this.edDiv);this._unselectRB(this.nedDiv);this._unselectRB(this.countDiv);this.endDate.set("disabled",!1);this.endTime.set("disabled",!1);this.countSelect.set("disabled",!0);this._endStr=";UNTIL="+this._dateTimeToString(this.endDate.get("value"),this.endTime.get("value"));break;case "count":this._selectRB(this.countDiv),
this._unselectRB(this.nedDiv),this._unselectRB(this.edDiv),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!1),this._endStr=";COUNT="+this.countSelect.get("value")}this._internalSetValue()},_onRTSelect:function(a){for(var b=0;b<this.rtypesVis.length;b++)this._unselectRB(this[this.rtypesVis[b]+"Div"]);this._selectRB(this[a.target.getAttribute("data-cbid")+"Div"]);this._setRecurrenceType(a.target.getAttribute("data-cbid"))},_disableRB:function(a){dojo.addClass(a.childNodes[0].childNodes[0],
"dijitDisabled");dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioDisabled");this._isSelectedRB(a)&&(dojo.addClass(a.childNodes[0].childNodes[0],"dijitCheckedDisabled"),dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioCheckedDisabled"))},_enableRB:function(a){dojo.removeClass(a.childNodes[0].childNodes[0],"dijitDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitCheckedDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],
"dijitRadioCheckedDisabled")},_unselectRB:function(a){dojo.removeClass(a.childNodes[0].childNodes[0],"dijitChecked");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioChecked")},_selectRB:function(a){dojo.addClass(a.childNodes[0].childNodes[0],"dijitChecked");dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioChecked");dojo.hasClass(a.childNodes[0].childNodes[0],"dijitHover")&&(dojo.addClass(a.childNodes[0].childNodes[0],"dijitCheckedHover"),dojo.addClass(a.childNodes[0].childNodes[0],
"dijitRadioCheckedHover"))},_isSelectedRB:function(a){return dojo.hasClass(a.childNodes[0].childNodes[0],"dijitChecked")},_disableCB:function(a){dojo.addClass(a,"dijitDisabled");dojo.addClass(a,"dijitCheckBoxDisabled");this._isSelectedCB(a)&&(dojo.addClass(a,"dijitCheckedDisabled"),dojo.addClass(a,"dijitCheckBoxCheckedDisabled"))},_enableCB:function(a){dojo.removeClass(a,"dijitDisabled");dojo.removeClass(a,"dijitCheckBoxDisabled");dojo.removeClass(a,"dijitCheckedDisabled");dojo.removeClass(a,"dijitCheckBoxCheckedDisabled")},
_unselectCB:function(a){dojo.removeClass(a,"dijitChecked");dojo.removeClass(a,"dijitCheckBoxChecked");dojo.removeClass(a,"dijitCheckedHover");dojo.removeClass(a,"dijitCheckBoxCheckedHover")},_selectCB:function(a){dojo.addClass(a,"dijitChecked");dojo.addClass(a,"dijitCheckBoxChecked");dojo.hasClass(a,"dijitHover")&&(dojo.addClass(a,"dijitCheckedHover"),dojo.addClass(a,"dijitCheckBoxCheckedHover"))},_isSelectedCB:function(a){return dojo.hasClass(a,"dijitChecked")},_onBoxClick:function(a){dojo.hasClass(a.target.parentNode,
"dijitDisabled")||("true"==a.target.getAttribute("aria-checked")?(a.target.setAttribute("aria-checked",!1),this._unselectCB(a.target.parentNode)):(a.target.setAttribute("aria-checked",!0),this._selectCB(a.target.parentNode)),this[a.target.getAttribute("data-onclick")](a))},_onBoxMOver:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.addClass(a.target.parentNode,"dijitHover"),dojo.addClass(a.target.parentNode,"dijitCheckBoxHover"),dojo.hasClass(a.target.parentNode,"dijitChecked")&&
(dojo.addClass(a.target.parentNode,"dijitCheckBoxCheckedHover"),dojo.addClass(a.target.parentNode,"dijitCheckedHover")))},_onBoxMOut:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.removeClass(a.target.parentNode,"dijitHover"),dojo.removeClass(a.target.parentNode,"dijitCheckBoxHover"),dojo.removeClass(a.target.parentNode,"dijitCheckBoxCheckedHover"),dojo.removeClass(a.target.parentNode,"dijitCheckedHover"))},_onRadioClick:function(a){if(!dojo.hasClass(a.target.parentNode,"dijitDisabled"))this[a.target.getAttribute("data-onclick")](a)},
_onRadioMOver:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.addClass(a.target.parentNode,"dijitHover"),dojo.addClass(a.target.parentNode,"dijitRadioHover"),dojo.hasClass(a.target.parentNode,"dijitChecked")&&(dojo.addClass(a.target.parentNode,"dijitRadioCheckedHover"),dojo.addClass(a.target.parentNode,"dijitRadioHover")))},_onRadioMOut:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.removeClass(a.target.parentNode,"dijitHover"),dojo.removeClass(a.target.parentNode,
"dijitRadioHover"),dojo.removeClass(a.target.parentNode,"dijitRadioCheckedHover"),dojo.removeClass(a.target.parentNode,"dijitRadioHover"))},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.FileUpload",dojox.form.Uploader,{required:!1,constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),
delete a.grouprequired):this.groupRequired=!1;a.disabled&&(setTimeout(this.set.bind(this,"disabled",!0),0),delete a.disabled)},_isEmpty:function(){return""==this.getValue()},isValid:function(a){return!this.required||!this._isEmpty()},validate:function(a){var b="",d=this.disabled||this.isValid(a);dojo.setAttr(this.focusNode,"aria-invalid",d?"false":"true");b=this.getErrorMessage(a);this.set("message",b);return d},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form",
"validate",this.lang)},getErrorMessage:function(a){return this.messages.missingMessage},_createInput:function(){this.inherited(arguments);"image"==this.usefilter&&dojo.setAttr(this.inputNode,"accept","image/*")},_onFocus:function(){this.focused=!0;this.displayMessage(this.message);this.inherited(arguments)},_onBlur:function(){this.focused=!1;this.displayMessage("");this.inherited(arguments)},displayMessage:function(a){a&&this.focused?dijit.Tooltip.show(a,this.titleNode):dijit.Tooltip.hide(this.titleNode)},
_setRequiredAttr:function(a){this._set("required",a);dojo.setAttr(this.focusNode,"aria-required",a)},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.FileUpload.Image",dojox.form.uploader._Base,{uploaderId:"",uploader:null,_upCheckCnt:0,
imgheight:100,imgwidth:100,imgabs:!1,templateString:'<div class="firmosUploaderImage"></div>',constructor:function(a){this._events=[]},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},postCreate:function(){this.inherited(arguments);this.setUploader();this.value?this._createImageTag(this.value):this.contentDiv=dojo.create("div",{"class":"firmosUploaderImageContent",style:"height:"+this.imgheight+"px; width:"+this.imgwidth+"px"},this.domNode)},_createImageTag:function(a){this.contentImg=
dojo.create("img",{"class":"firmosUploaderImageContent",style:this.imgabs?"height:"+this.imgheight+"px; width:"+this.imgwidth+"px":"max-height:"+this.imgheight+"px; max-width:"+this.imgwidth+"px",src:a},this.domNode)},setUploader:function(){if(this.uploaderId||this.uploader){if(this.uploaderId&&!this.uploader&&(this.uploader=dijit.byId(this.uploaderId),!this.uploader)){this._upCheckCnt++;5<this._upCheckCnt?console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload found with id "+this.uploaderId):
setTimeout(this.setUploader.bind(this),250);return}this._events.push(dojo.connect(this.uploader,"onChange",this.selectionChange.bind(this)));this._events.push(dojo.connect(this.uploader,"reset",this.selectionReset.bind(this)))}else console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload set.")},onloadCallback:function(a){this.contentImg?dojo.setAttr(this.contentImg,"src",a.target.result):(dojo.destroy(this.contentDiv),this._createImageTag(a.target.result))},selectionChange:function(){var a=new FileReader;
a.onload=this.onloadCallback.bind(this);a.readAsDataURL(this.uploader._files[0])},selectionReset:function(){console.log("selectionReset")}});dojo.declare("FIRMOS.Form",dijit.form.Form,{constructor:function(a){this.sendChanged=dojo.fromJson(a.sendchanged);this.displayOnly=dojo.fromJson(a.displayonly);delete a.sendchanged;this.groupRequiredFields={};a.dbos&&(this.id=a.id,G_UI_COM.registerFormDBOs(this,a.dbos));a.onChangeClassname&&(this._lastChange=new Date,this._sendChangesParams={},this.sendChangesDelay=
Number(a.onChangeDelay)||0)},destroy:function(){this.dbos&&G_UI_COM.unregisterFormDBOs(this.id,this.dbos);this.inherited(arguments)},onSubmit:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)if(a[b].isInstanceOf(FIRMOS.FormButton)&&"submit"==a[b].type){a[b].handleTypeSubmit();break}return!1},onShow:function(a){this.inherited(arguments);this.sendChanged&&(this.initialData=this.get("value"));for(var b=this.getChildren(),d=0;d<b.length;d++)if(b[d].name){this.displayOnly&&(b[d].isInstanceOf(FIRMOS.FormButton)||
b[d].set("disabled",!0));b[d].isInstanceOf(FIRMOS.BoolCheckBox)&&b[d].updateDepFields(b);b[d].isInstanceOf(FIRMOS.FilteringSelect)&&b[d].init();var e=b[d].name.split(".");e.pop();0==e.length?b[d].groupRequired&&(b[d].set("required",!0),e=dojo.byId(b[d].id+"_label"),dojo.removeClass(e,"firmosFormLabel"),dojo.addClass(e,"firmosFormLabelRequired")):(e=e.join("."),this.groupRequiredFields[e]||(this.groupRequiredFields[e]={},this.groupRequiredFields[e].grf=[],this.groupRequiredFields[e].required=!1,this.groupRequiredFields[e].fields=
[]),b[d].groupRequired&&this.groupRequiredFields[e].grf.push(b[d].id),this.groupRequiredFields[e].fields.push(b[d].id))}for(d in this.groupRequiredFields)if(0==this.groupRequiredFields[d].grf.length)delete this.groupRequiredFields[d];else for(b=0;b<this.groupRequiredFields[d].fields.length;b++)if(e=dijit.byId(this.groupRequiredFields[d].fields[b]),!e.isInstanceOf(FIRMOS.BoolCheckBox)&&!e.get("disabled")&&(e=e.get("value"))&&""!=e){this._setGroupRequired(d,!0);break}},_setGroupRequired:function(a,
b){for(var d=0;d<this.groupRequiredFields[a].grf.length;d++){dijit.byId(this.groupRequiredFields[a].grf[d]).set("required",b);var e=dojo.byId(this.groupRequiredFields[a].grf[d]+"_label");b?(dojo.removeClass(e,"firmosFormLabel"),dojo.addClass(e,"firmosFormLabelRequired")):(dojo.removeClass(e,"firmosFormLabelRequired"),dojo.addClass(e,"firmosFormLabel"))}this.groupRequiredFields[a].required=b},checkGroupRequiredFields:function(a){if(!a.isInstanceOf(FIRMOS.BoolCheckBox)){var b=a.name.split(".");b.pop();
if(0<b.length&&(b=b.join("."),this.groupRequiredFields[b]))if((newValue=a.get("value"))&&""!=newValue)this.groupRequiredFields[b].required||this._setGroupRequired(b,!0);else{for(a=0;a<this.groupRequiredFields[b].fields.length;a++){var d=dijit.byId(this.groupRequiredFields[b].fields[a]);if(!d.isInstanceOf(FIRMOS.BoolCheckBox)&&!d.get("disabled")&&(d=d.get("value"))&&""!=d)return}this._setGroupRequired(b,!1)}}},submitOnChange:function(a){if(this.onChangeClassname&&(!a||!a.get("disabled"))){var b=new Date;
a&&(this._lastChange=b,this._sendChangesParams[a.name]=a.get("value"));a=b-this._lastChange;a>this.sendChangesDelay?(dojo.clone(this.onChangeParams),G_SERVER_COM.callServerFunction(this.onChangeClassname,this.onChangeFunctionname,this.onChangeUidPath,this._sendChangesParams),this._sendChangesParams={}):(this._sendTimeout&&clearTimeout(this._sendTimeout),this._sendTimeout=setTimeout(this.submitOnChange.bind(this),this.sendChangesDelay-a))}},_clearObject:function(a,b){for(var d in a)if(a[d]instanceof
Array){if(a[d].length==b[d].length){for(var e=!0,f=0;f<a[d].length;f++)if(a[d][f]!==b[d][f]){e=!1;break}e&&delete a[d]}}else if(a[d]instanceof Date||b[d]instanceof Date)a[d]instanceof Date&&b[d]instanceof Date&&a[d].getTime()==b[d].getTime()&&delete a[d];else if("object"==typeof a[d]){this._clearObject(a[d],b[d]);e=!0;for(f in a[d]){e=!1;break}e&&delete a[d]}else a[d]===b[d]&&delete a[d]},_convertObjectData:function(a){for(var b in a)if(a[b]instanceof Array)for(var d=0;d<a[b].length;d++)a[b][d]instanceof
Date&&(a[b][d]=a[b][d].getTime());else a[b]instanceof Date?a[b]=a[b].getTime():null!=a[b]&&("object"==typeof a[b]?this._convertObjectData(a[b]):""===a[b]&&(a[b]=null))},_getValueAttr:function(){for(var a=this.inherited(arguments),b=this.getChildren(),d=0;d<b.length;d++)b[d].name&&b[d]._ignore&&a[b[d].name]&&delete a[b[d].name];return a},_handleFiles:function(a,b,d,e,f,k){for(var l=this.getChildren(),m=[],n=0;n<l.length;n++)if(l[n].name&&l[n].isInstanceOf(FIRMOS.FileUpload)&&l[n]._files)for(var p=
0;p<l[n]._files.length;p++)m.push({field:l[n].name,file:l[n]._files[p]});0<m.length?(l=G_SERVER_COM.getBinaryDataKey(),this._sendFiles(a,b,d,e,f,k,m,l)):this._sendData(a,b,d,e,f,k)},_sendFilesCallback:function(a,b,d,e,f,k,l,m){0==l.length?this._sendData(a,b,d,e,f,k,m):this._sendFiles(a,b,d,e,f,k,l,m)},_sendFiles:function(a,b,d,e,f,k,l,m){var n=l.pop(),p=n.file,q={data:{}};q.data.size=p.size;q.data.name=p.name;q.data.type=p.type;q.data.field=n.field;q.data.fieldIdx=0;q.data.fieldCount=1;q.data.chunksize=
p.size;q.data.chunkIdx=0;a=this._sendFilesCallback.bind(this,a,b,d,e,f,k,l,m);G_SERVER_COM.callServerFunction("FIRMOS","binaryBulkTransfer",null,q,a,null,p,m)},_sendData:function(a,b,d,e,f,k,l){e.data=this.get("value");this.submitData=dojo.clone(e.data);this.sendChanged&&this._clearObject(e.data,this.initialData);this._convertObjectData(e.data);dojo.mixin(e.data,f);k&&G_UI_COM.isDialogAction();G_SERVER_COM.callServerFunction(a,b,d,e,this.submitCallback.bind(this),null,null,l)},callServerFunction:function(a,
b,d,e,f,k){if(!this.validate())return this.restoreAllButtons(),!1;this._handleFiles(a,b,d,e,f,k)},submitCallback:function(a,b,d,e){this.restoreAllButtons();G_SERVER_COM.handleServerFunctionResponse(a,b,d,e)},disableAllButtons:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b]._orgState=a[b].get("disabled"),a[b].set("disabled",!0))},restoreAllButtons:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&
(a[b].set("disabled",a[b]._orgState),delete a[b]._orgState)},_updateValues:function(a,b){for(var d in a)if("uid"!=d)if(d instanceof Object)if(d instanceof Array){var e=this.getInputById(b+d);e&&e.set("value",a[d])}else this._updateValues(a[d],b+d+".");else if(e=this.getInputById(b+d))if(e.isInstanceOf(FIRMOS.DateTextBox)){var f=e.get("value");null!=f&&f.getTime()==a[d]||e.set("displayedValue",a[d])}else e.get("value")!==a[d]&&e.set("value",a[d])},updateValues:function(a){this._updateValues(a,"")},
getInputById:function(a){for(var b=this.getChildren(),d=0;d<b.length;d++)if(b[d].name==a)return b[d];return null}});dojo.declare("FIRMOS.ToolbarButton",dijit.form.Button,{onClick:function(){this.downloadId&&dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),this.downloadId,!0);this.actionClassname&&G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,this.actionParams)}});dojo.declare("FIRMOS.Toolbar",dijit.Toolbar,{constructor:function(a){},postCreate:function(){this.inherited(arguments);
for(var a=0;a<this.menuDef.length;a++){if(this.menuDef[a].menu){var b={style:"display: none;"};this.menuDef[a].id&&(b.id=this.menuDef[a].id);var b=new dijit.DropDownMenu(b),d=G_UI_COM.addMenuEntries(b,this.menuDef[a].menu,this.menuDef[a].disabled);b.set("disabled",d);d={label:this.menuDef[a].caption,dropDown:b,disabled:d};d=new dijit.form.DropDownButton(d);b._parentUIElement=d}else{b=this.menuDef[a];d={};b.action&&(d.actionClassname=b.action["class"],d.actionFunctionname=b.action.func,d.actionUidPath=
b.action.uidPath,d.actionParams=b.action.params);b.downloadId&&(d.downloadId=b.downloadId);""==b.caption?d.showLabel=!1:d.label=b.caption;if(b.icon){var e=b.icon.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(e,"background-image: url('"+b.icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");d.iconClass=e}b.disabled&&(d.disabled=!0);b.id&&(d.id=b.id);d=new FIRMOS.ToolbarButton(d)}this.addChild(d)}}});dojo.declare("FIRMOS.Menu",dijit.Menu,{_clearEntries:function(){for(var a=
this.getChildren(),b=0;b<a.length;b++)this.removeChild(a[b]),a[b].destroyRecursive()},setCoords:function(a,b){this._openMyselfArgs||(this._openMyselfArgs={});this._openMyselfArgs.coords={x:a,y:b}},entriesLoaded:function(a){this._clearEntries();G_UI_COM.addMenuEntries(this,a,!1);this.startup();this._openMyself(this._openMyselfArgs,!0)},_openMyself:function(a,b){if(b)this.inherited(arguments,[a]);else switch(this.cType){case "tree":this._openMyselfArgs=a;this._handleTreeMenu(a);break;default:0<this.getChildren().length&&
this.inherited(arguments)}},_handleTreeMenu:function(a){var b=dijit.getEnclosingWidget(a.target);a={};var d,e;if(b.isInstanceOf(dijit._TreeNode)){var f=b.item,k=b.tree;dojo.mixin(a,k.model.store.params_);b=f.uidpath?f.uidpath instanceof Array?f.uidpath:[f.uidpath]:[f.uid];f._menufunc_&&f._funcclassname_?(d=f._funcclassname_,e=f._menufunc_):this.treeItemClassname&&(d=this.treeItemClassname,e=this.treeItemFunctionname,dojo.mixin(a,this.treeItemParams),this.treeItemUIDPath&&(b=this.treeItemUIDPath));
if(0<b.length||k.model.store.getIdentity(f)!=b[0])a.selected=[k.model.store.getIdentity(f)]}else k=b,dojo.mixin(a,k.model.store.params_),d=this.treeClassname,e=this.treeFunctionname,b=this.treeUidPath,dojo.mixin(a,this.treeParams);if(d){for(;k&&!k.isInstanceOf(dijit.Tree);)k=k.getParent();G_UI_COM.setMenu(this);G_SERVER_COM.callServerFunction(d,e,b,a)}},_handleGridMenu:function(a,b,d){this._openMyselfArgs={target:a.target,coords:{x:a.pageX,y:a.pageY}};a=dojo.clone(b.store.params_);var e={};e.uidPath=
d.uidpath?d.uidpath instanceof Array?d.uidpath:[d.uidpath]:[d.uid];d._menufunc_&&d._funcclassname_?(e.classname=d._funcclassname_,e.functionname=d._menufunc_):this.gridClassname&&(e.classname=this.gridClassname,e.functionname=this.gridFunctionname,dojo.mixin(a,this.gridParams),this.gridUIDPath&&(e.uidPath=this.gridUIDPath));if(e&&e.classname){b=b.getSelectedIds();if(1<b.length||0<e.uidPath.length||b[0]!=e.uidPath[0])a.selected=b;G_UI_COM.setMenu(this);G_SERVER_COM.callServerFunction(e.classname,e.functionname,
e.uidPath,a)}}});dojo.declare("FIRMOS.FilteringSelect",dijit.form.FilteringSelect,{_hidden:!1,constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1;this.depGroup={};if(a.depGroup){var b=dojo.fromJson(a.depGroup);delete a.depGroup;for(a=0;a<b.length;a++)this.depGroup[b[a].inputId]||(this.depGroup[b[a].inputId]=[]),this.depGroup[b[a].inputId].push({value:b[a].value,ignoreHidden:b[a].ignoreHidden})}},_updateDepField:function(a,
b,d,e){if(a=e.getInputById(a)){for(e=a.domNode;e&&"TR"!=e.tagName;)e=e.parentNode;if(e){var f=!0;if(!d)for(var k=0;k<b.length;k++)b[k].value==this.value&&(f=!1);d||f?(dojo.style(e,"display","none"),b.ignoreHidden&&(a._ignore=!0,a.get("required")&&(a._required=!0,a.set("required",!1))),a.isInstanceOf(FIRMOS.FilteringSelect)&&a.hide()):(dojo.style(e,"display",""),a._ignore&&delete a._ignore,a._required&&(a.set("required",a._required),delete a._required),a.isInstanceOf(FIRMOS.FilteringSelect)&&a.unhide())}}},
hide:function(){this._hidden=!0;this._hideAllDepFields()},unhide:function(){this._hidden=!1;this._updateDepGroup()},_updateDepGroup:function(a){for(var b in this.depGroup)this._updateDepField(b,this.depGroup[b],!1,a)},_hideAllDepFields:function(a){for(var b in this.depGroup)this._updateDepField(b,this.depGroup[b],!0,a)},init:function(){""==this.value&&(this.required||this._required)&&0<this.store.data.length&&this.set("value",this.store.data[0].value);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=
a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(this._hidden?this._hideAllDepFields(a):this._updateDepGroup(a))},onChange:function(a){this.inherited(arguments);for(var b=this.getParent();b&&!b.isInstanceOf(dijit.form.Form);)b=b.getParent();b&&b.isInstanceOf(FIRMOS.Form)&&(this._hidden||this._updateDepGroup(b),b.checkGroupRequiredFields(this),b.submitOnChange(this))}});dojo.declare("FIRMOS.BoolCheckBox",dijit.form.CheckBox,{constructor:function(a){a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),
this.hasDepFields=!0,delete a.dependentfields):(this.hasDepFields=!1,this.depFields={});a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},updateDepFields:function(a){for(var b in this.depFields){var d=a.getInputById(b);if(d){"true"==this.get("value")&&this.depFields[b]||"false"==this.get("value")&&!this.depFields[b]?d.set("disabled",!0):d.set("disabled",!1);break}}},onChange:function(){this.inherited(arguments);if(this.hasDepFields){for(var a=
this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&this.updateDepFields(a)}},_getValueAttr:function(){return this.checked?"true":"false"}});dojo.declare("FIRMOS.MultiValText",dijit.form.Textarea,{constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_getValueAttr:function(){var a=this.inherited(arguments);return""==a?[]:a.split("\n")},filter:function(a){var b="object"==typeof a?
this.inherited(arguments,[a.join("\n")]):this.inherited(arguments),b=b.replace(/\n+/g,"\n");b.lastIndexOf("\n")==b.length-1&&(b=b.substring(0,b.length-1));return b},_setBlurValue:function(){},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.ValidationTextBox",dijit.form.ValidationTextBox,{constructor:function(a){a.forbiddenchars?
(this.regExpForbidden=eval(a.forbiddenchars),delete a.forbiddenchars):this.regExpForbidden=null;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},isValid:function(a){if(this.confirms){var b=this.getParent().getInputById(this.confirms);if(b){if(this.get("value")!=b.get("value"))return!1}else console.warn("Confirmation not possible: Input field "+this.confirms+" not found!")}return this.inherited(arguments)},validate:function(a){if(this.regExpForbidden){var b=
this.textbox.selectionStart,d=this.textbox.value.length,e=this.textbox.value.replace(this.regExpForbidden,"");e.length<d&&(this.textbox.value=e,d-=e.length,this.textbox.selectionStart=b-d,this.textbox.selectionEnd=b-d)}return this.inherited(arguments)},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.NumberTextBox",
dijit.form.NumberTextBox,{constructor:function(a){a.constraints||(a.constraints={});this.regExpForbidden=a.constraints.places&&0==a.constraints.places?/[^\d\-]/g:/[^\d\.\,\-]/g;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_setBlurValue:function(){},validate:function(a){var b=this.textbox.selectionStart,d=this.textbox.value.length,e=this.textbox.value.replace(this.regExpForbidden,"");e.length<d&&(this.textbox.value=e,d-=e.length,this.textbox.selectionStart=
b-d,this.textbox.selectionEnd=b-d);return this.inherited(arguments)},_getValueAttr:function(){var a=this.inherited(arguments);isNaN(a)&&(a="");return a},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.NumberSlider",dijit.form._FormValueWidget,{templateString:'<div data-dojo-attach-point="focusNode" id="${id}" role="presentation"><div id="${id}_number"></div><div id="${id}_slider"></div></div>',
constructor:function(a){a.constraints=dojo.fromJson(a.constraints);this.sliderParams={};this.sliderParams.minimum=a.constraints.min;this.sliderParams.maximum=a.constraints.max;a.constraints.steps&&(this.sliderParams.discreteValues=a.constraints.steps);this.sliderParams.value=a.value;this.sliderParams.intermediateChanges=a.intermediateChanges;a.showvalue&&(this.showvalue=eval(a.showvalue),delete a.showvalue);this.showvalue&&(this.sliderParams.style="width:75%;",this.numberParams={},this.numberParams.style=
"width:20%; float:right;",this.numberParams.value=a.value,this.numberParams.places=a.constraints.places,this.numberParams.disabled=!0);this._multi=1;for(var b=0;b<a.constraints.places;b++)this._multi*=10},startup:function(){this.inherited(arguments);this.sliderParams.onChange=this._onSliderChange.bind(this);this.showvalue&&(this.number=new dijit.form.NumberTextBox(this.numberParams,this.id+"_number"));this.slider=new dijit.form.HorizontalSlider(this.sliderParams,this.id+"_slider")},_onSliderChange:function(){if(Math.round(this.slider.get("value")*
this._multi)/this._multi!=this.value){this.value=Math.round(this.slider.get("value")*this._multi)/this._multi;this.showvalue&&this.number.set("value",this.value);var a=this.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&a.submitOnChange(this)}}});dojo.declare("FIRMOS.TabContainer",dijit.layout.TabContainer,{constructor:function(){this.watch("selectedChildWidget",this.tabChange)},addTabs:function(a){a.sort(G_UI_COM.sortFuncSubSecOrd);for(var b=0;b<a.length;b++)this.addChild(a[b]),G_UI_COM.showSectionPathInProgress||
!a[b].selected||a[b]._fixContent||this.tabChange("",null,a[b])},contentLoadedCallback:function(a,b,d,e,f){G_SERVER_COM.handleServerFunctionResponse(b,d,e,f);a._loadedCallback&&(a._loadedCallback(),delete a._loadedCallback)},selectChild:function(a,b){b&&(a._fixContent?b():a._loadedCallback=b);!a._fixContent&&a.selected&&this.tabChange("",null,a);this.inherited(arguments)},selectDefault:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)if(a[b].selected){this.selectChild(a[b]);break}},tabChange:function(a,
b,d){if(d._fixContent){var e=[];this._getDescendants(d,e,"visibilityChange");for(a=0;a<e.length;a++)e[a].visibilityChange(!0)}else G_SERVER_COM.callServerFunction(d._contentFunc["class"],d._contentFunc.func,d._contentFunc.uidPath,d._contentFuncParams,this.contentLoadedCallback.bind(this,d),d._updateId);this.UIStateChangeClass&&(a=this.UIStateChangeParams,a.sectionId=d.id,G_SERVER_COM.callServerFunction(this.UIStateChangeClass,this.UIStateChangeFunc,this.UIStateChangeUidPath,a));if(b)if(b._fixContent)for(d=
[],this._getDescendants(b,d,"visibilityChange"),a=0;a<d.length;a++)d[a].visibilityChange(!1);else{d=[];this._getDescendants(b,d,"destroyNotify");if(0<d.length){e=[];for(a=0;a<d.length;a++)e.push(d[a].id);G_SERVER_COM.callServerFunction("FIRMOS","destroy",null,{ids:e})}d=null;if(b.isTCElem)for(b=b.getChildren(),a=0;a<b.length;a++){if(!b[a].isInstanceOf(FIRMOS.Toolbar)){b=b[a].getChildren();0<b.length&&(d=b[0]);break}}else d=b.getChildren()[0];d&&d.destroyRecursive()}},_getDescendants:function(a,b,
d){a[d]&&b.push(a);for(var e=a.getChildren(),f=0;f<e.length;f++)a.isInstanceOf(FIRMOS.TabContainer)&&!e[f].selected||this._getDescendants(e[f],b,d)},getChild:function(a){for(var b=this.getChildren(),d=0;d<b.length;d++)if(b[d].id==a)return b[d];return null}});dojo.declare("FIRMOS.MultiContentTabController",null,{constructor:function(){this.domNode=dojo.create("div")},startup:function(){},destroy:function(){dojo.destroy(this.domNode)}});dojo.declare("FIRMOS.MultiContentContainer",FIRMOS.TabContainer,
{baseClass:"firmosMultiContentContainer",constructor:function(a){this.animationSpeed=20;this.animationStep=0.1;this.controllerWidget=FIRMOS.MultiContentTabController},addTabs:function(a){this.inherited(arguments);for(var b=0;b<a.length;b++)a[b].domNode.style.position="absolute"},_animateHideChild:function(a,b){0>b?(a.domNode.style.opacity=0,this.hideChildTO=null,this._hideChild(a,!0)):(a.domNode.style.opacity=b,this.hideChildTO=setTimeout(this._animateHideChild.bind(this,a,b-this.animationStep),this.animationSpeed))},
_hideChild:function(a,b){this.hideChildTO?(clearTimeout(this.hideChildTO),this.hideChildTO=null,this.inherited(this.hideArgs),this.hideArgs=arguments):this.hideArgs||(this.hideArgs=arguments);b?(this.inherited(this.hideArgs),this.hideArgs=null):this._animateHideChild(a,1)},_animateShowChild:function(a,b){1<b?(this.showChildTO=null,a.domNode.style.opacity=1):(a.domNode.style.opacity=b,this.showChildTO=setTimeout(this._animateShowChild.bind(this,a,b+this.animationStep),this.animationSpeed))},_showChild:function(a){this.showChildTO&&
(clearTimeout(this.showChildTO),this.showChildTO=null);this.inherited(arguments);a.domNode.style.opacity=0;this._animateShowChild(a,0)}});dojo.declare("FIRMOS.SplitContainer",dijit.layout.BorderContainer,{addChildren:function(a){var b;if(2<a.length){b=a.shift();b.region="top";var d=100-b._height;b.set("style","height: "+b._height+"%;");this.addChild(b);b=a.pop();b.region="bottom";d-=b._height;b.set("style","height: "+b._height+"%;");this.addChild(b);b=new FIRMOS.SplitContainer({id:this.id+"_child",
"class":"borderContainer",region:"center",gutters:!1});b.set("style","height: "+d+"%;");for(var e=0;e<a.length;e++)a[e]._height=a[e]._height/d*100;this.addChild(b);b.addChildren(a)}else 2==a.length&&(b=a.shift(),b.region="top",b.set("style","height: "+b._height+"%;"),this.addChild(b)),b=a.pop(),b.region="center",b.set("style","height: "+b._height+"%;"),this.addChild(b)}});dojo.declare("FIRMOS.GridFilter",null,{texts:G_TEXTS.gridfilter,renderHeader:function(){this.inherited(arguments);if(!this.filterDisabled)for(var a=
dojo.query(".dgrid-cell",this.headerNode),b=0;b<a.length;b++){var d=a[b].columnId;if(this.columns[d]&&this.columns[d].filterable&&this.columns[d].dataType&&"ICO"!=this.columns[d].dataType){var e=dijit.byId(this.id+"_"+d+"_ddb");if(!e){switch(this.columns[d].dataType){case "STR":var f=this.getStringFilterDialog(this.columns[d]),k="setStringFilter";break;case "DAT":f=this.getDateFilterDialog(this.columns[d]);k="setDateFilter";break;case "NUM":case "PRG":f=this.getNumberFilterDialog(this.columns[d]);
k="setNumberFilter";break;case "BOO":f=this.getBooleanFilterDialog(this.columns[d]);k="setBooleanFilter";break;default:console.error('Grid filter error: Unknown data type set for column "'+this.columns[d].label.replace(/"/g,'"')+'": '+this.columns[d].dataType)}var f='<form dojoType="dijit.form.Form" id="'+this.id+"_"+d+'" onsubmit="return false;"><table style="width:100%">'+f+'<tr><td colspan="2" class="firmosGridFilterDialogButtons"><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.'+
k+"('"+d+"',ttd.formValues); ttd.ddbutton.closeDropDown();\">"+this.texts.setButton+'</button><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].reset(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.clearFilter(\''+d+"'); ttd.ddbutton.closeDropDown();\">"+this.texts.clearButton+"</button></td></tr></table></form>",l=new dijit.TooltipDialog({id:this.id+"_"+d+"_td","class":"firmosGridFilterDialog"+
this.columns[d].dataType,content:f,onShow:function(a){this.formValues=this.getChildren()[0].get("value")},onOpen:function(a){this.getChildren()[0].set("value",this.formValues)},grid:this}),e=new dijit.form.DropDownButton({id:this.id+"_"+d+"_ddb",label:"",dropDown:l,"class":"firmosGridFilter",iconClass:"firmosGridFilterIconClass",onClick:function(a){a.preventDefault();dojo.stopEvent(a);return!1}});l.ddbutton=e}a[b].appendChild(e.domNode)}}},clearFilter:function(a){G_UI_COM.deleteStoreDependency(this.store.id,
a);a=dojo.query(".firmosGridFilter",this.column(a).headerNode);dojo.removeClass(a[0],"firmosGridFilterSet");this.refresh()},setStringFilter:function(a,b){""==b.filter?this.clearFilter(a):(G_UI_COM.setStoreDependency(this.store.id,a,"SS",[b.filter]),this.filterSet(a))},setNumberFilter:function(a,b){if(b.type==this.texts.numberOptions.gtlt){if(""==b.value1&&""==b.value2){this.clearFilter(a);return}}else if(""==b.value){this.clearFilter(a);return}switch(b.type){case this.texts.numberOptions.eq:G_UI_COM.setStoreDependency(this.store.id,
a,"R8",[b.value],"EX");break;case this.texts.numberOptions.lt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value],"LE");break;case this.texts.numberOptions.gt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value],"GT");break;case this.texts.numberOptions.gtlt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value1,b.value2],"REXB")}this.filterSet(a)},setDateFilter:function(a,b){if(b.type==this.texts.dateOptions.gtlt){if(!b.value1&&!b.value2){this.clearFilter(a);return}}else if(!b.value){this.clearFilter(a);
return}switch(b.type){case this.texts.dateOptions.eq:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"EX");break;case this.texts.dateOptions.lt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"LE");break;case this.texts.dateOptions.gt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"GT");break;case this.texts.dateOptions.gtlt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value1,b.value2],"REXB")}this.filterSet(a)},setIconFilter:function(a,b){this.filterSet(a)},
setBooleanFilter:function(a,b){G_UI_COM.setStoreDependency(this.store.id,a,"BO",[b.filter]);this.filterSet(a)},filterSet:function(a){a=dojo.query(".firmosGridFilter",this.column(a).headerNode);dojo.addClass(a[0],"firmosGridFilterSet");this.refresh()},getStringFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><label for="'+this.id+"_"+a.id+'_filter">'+this.texts.filterLabel+'</label></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="dijit.form.TextBox" id="'+
this.id+"_"+a.id+'_filter" name="filter" style="width:100%"></td></tr>'},numberFilterTypeChange:function(a,b,d){d=dijit.byId(b+"_value");var e=dijit.byId(b+"_value1");b=dijit.byId(b+"_value2");a==this.texts.numberOptions.gtlt?(dojo.style(d.domNode,"display","none"),dojo.style(e.domNode,"display",""),dojo.style(b.domNode,"display","")):(dojo.style(d.domNode,"display",""),dojo.style(e.domNode,"display","none"),dojo.style(b.domNode,"display","none"))},dateFilterTypeChange:function(a,b,d){d=dijit.byId(b+
"_value");var e=dijit.byId(b+"_value1");b=dijit.byId(b+"_value2");a==this.texts.dateOptions.gtlt?(dojo.style(d.domNode,"display","none"),dojo.style(e.domNode,"display",""),dojo.style(b.domNode,"display","")):(dojo.style(d.domNode,"display",""),dojo.style(e.domNode,"display","none"),dojo.style(b.domNode,"display","none"))},getNumberFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.numberFilterTypeChange(value,\''+
this.id+"_"+a.id+"',this);}\"><option>"+this.texts.numberOptions.eq+"</option><option>"+this.texts.numberOptions.lt+"</option><option>"+this.texts.numberOptions.gt+"</option><option>"+this.texts.numberOptions.gtlt+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+
this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},getDateFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.dateFilterTypeChange(value,\''+this.id+"_"+a.id+"',this);}\"><option>"+this.texts.dateOptions.eq+"</option><option>"+this.texts.dateOptions.lt+
"</option><option>"+this.texts.dateOptions.gt+"</option><option>"+this.texts.dateOptions.gtlt+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},
getIconFilterDialog:function(a){return""},getBooleanFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><label for="'+this.id+"_"+a.id+'_filter">'+this.texts.filterLabel+'</label></td><td class="firmosGridFilterFormInputTD"><select data-dojo-type="dojox.form.CheckedMultiSelect" style="width:100%" id="'+this.id+"_"+a.id+'_filter" name="filter" value="true"><option value="true">Yes</option><option value="false">No</option></select></td></tr>'}});dojo.declare("FIRMOS.StoreSeries",
null,{constructor:function(a,b,d,e){this.chartId=e;this.store=a;this.kwArgs=b;this.value=d?"function"==typeof d?d:"object"==typeof d?function(a){var b={},c;for(c in d)b[c]=a[d[c]];return b}:function(a){return a[d]}:function(a){return a.value};this.data=[];this._initialRendering=!1;this.fetch()},destroy:function(){this.observeHandle&&this.observeHandle.remove()},setSeriesObject:function(a){this.series=a},fetch:function(){function a(){b.data=dojo.array.map(b.objects,function(a){return b.value(a,b.store)});
b._pushDataChanges()}this.objects=[];var b=this;this.observeHandle&&this.observeHandle.remove();var d=this.store.query(this.kwArgs.query,this.kwArgs);dojo.Deferred.when(d,function(d){b.objects=d;a()});d.observe&&(this.observeHandle=d.observe(a,!0,this.chartId))},_pushDataChanges:function(){this.series&&(this.series.chart.updateSeries(this.series.name,this,this._initialRendering),this._initialRendering=!1,this.series.chart.delayedRender())}});dojo.declare("FIRMOS.D3Chart",dijit.layout.ContentPane,
{constructor:function(a){for(var b in a)this[b]=a[b];if(!this.seriesColor)for(this.seriesColor=[],b=0;b<this.seriesCount;b++)this.seriesColor[b]="000";G_UI_COM.createCSSRule("d3axis path, .axis line","fill: none;shape-rendering: crispedges;stroke: #000000;");this._events=[];this.scale_y=this.scale_x=this.chartCaption=this.clipPathRect=this.clipPath=this.svgMainG=this.svg=this.container=null;this.margin={top:20,right:20,bottom:20,left:40};this.axisYG=this.axisY=null;this.stopped=!0;this.axisXG=this.axisX=
null;this.axisXMargin=0;this.legend=this.axisYG=this.axisY=null;this.legendItems=[];this.legendSize=0;this.newLines=[];switch(a.type){case "lct_line":this.dataIdx=0;this.buffer=[];this._animationTime=this.updateInterval;this._animationStart_1=new Date;this._animationStart_2=new Date;this._oldAnimationTime_2=this._oldAnimationTime_1=this.updateInterval;this._dataToLate=this._doNotCalc=0;break;case "lct_column":this.data=[],this.rects=[]}this.dummyData=this.dataMin-this.dataMax;this.domainX=[];if("lct_line"==
a.type||"lct_sampledline"==a.type)this.interpolation="linear",this.path=[],this.line=[],this.data=[];G_UI_COM.registerLiveChart(this)},visibilityChange:function(a){a?this.start():this.stop()},destroy:function(){this.stop();G_UI_COM.unregisterLiveChart(this);for(this._removeSeriesCSS();0<this._events.length;)this._events.pop().remove();this.inherited(arguments)},redefine:function(a){var b=!1;a.caption&&this.caption!=a.caption&&(this.caption=a.caption,this.chartCaption.text(this.caption));a.dataLabels&&
(this.dataLabels=a.dataLabels);if(a.dataCount&&this.dataCount!=a.dataCount){switch(this.type){case "lct_line":this.domainX=[1,a.dataCount-2];for(var d=0;d<this.seriesCount;d++)if(a.dataCount>this.dataCount)for(var e=0;e<a.dataCount-this.dataCount;e++)this.data[d].unshift(this.dummyData);else for(e=0;e<this.dataCount-a.dataCount;e++)this.data[d].shift();break;case "lct_sampledline":this.domainX=[0,a.dataCount-1];break;case "lct_column":this.domainX=this.dataLabels?d3.range(a.dataCount).map(function(a){return this.dataLabels[a]}.bind(this)):
d3.range(a.dataCount).map(function(a){return a})}this.dataCount=a.dataCount;this.scale_x.domain(this.domainX)}if(a.dataLabels||a.dataCount&&this.dataCount!=a.dataCount)this.axisXG.call(this.axisX).selectAll("text").style("text-anchor","end"),this._adjustAxisX(),b=!0;(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)&&this._removeSeriesCSS();a.seriesColor&&(this.seriesColor=a.seriesColor);if(a.seriesCount&&this.seriesCount!=a.seriesCount){if(a.seriesCount>this.seriesColor.length)for(d=
this.seriesColor.length;d<a.seriesCount;d++)this.seriesColor[d]="000";else if(a.seriesCount<this.seriesColor.length)for(d=this.seriesColor.length-1;d>=a.seriesCount;d--)this.seriesColor.pop();if(a.seriesCount>this.seriesCount)for(d=this.seriesCount;d<a.seriesCount;d++){if("lct_line"==this.type){this.buffer[d]=[];for(var f=0==this.seriesCount?this.bufferSize+1:this.buffer[0].length,e=0;e<f;e++)this.buffer[d][e]=this.dummyData;0==this.seriesCount?setTimeout(this.updateData.bind(this,d),0):this.newLines.push(d)}if("lct_line"==
this.type||"lct_sampledline"==this.type)this.data[d]=d3.range(this.dataCount).map(function(){return this.dummyData}.bind(this)),this._createLine(d)}else for(d=this.seriesCount-1;d>=a.seriesCount;d--)if("lct_line"==this.type&&this.buffer.pop(),"lct_line"==this.type||"lct_sampledline"==this.type)this.data.pop(),this.line.pop(),this.path.pop().remove();this.seriesCount=a.seriesCount}(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)&&this._createSeriesCSS();if(this.legendLabels&&(a.seriesColor||
a.seriesCount&&this.seriesCount!=a.seriesCount)||a.legendLabels)this.legendLabels?this.legend.remove():(this.margin.bottom+=20,b=!0),a.legendLabels&&(this.legendLabels=a.legendLabels);b&&(this.height=dojo.position(this.container).h-this.margin.top-this.margin.bottom,this.clipPathRect.attr("height",this.height),this.scale_y.range([this.height,0]),this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")"));if(a.dataMin||a.dataMax)a.dataMin&&(this.dataMin=a.dataMin),a.dataMax&&(this.dataMax=
a.dataMax),this.scale_y.domain([this.dataMin,this.dataMax]),this.axisYG.call(this.axisY);(this.legendLabels&&(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)||a.legendLabels)&&this._paintLegend();this._paintData()},_removeSeriesCSS:function(){for(var a=0;a<this.seriesCount;a++)G_UI_COM.removeCSSRule("series"+this.id+"_"+a)},_createSeriesCSS:function(){if("lct_line"==this.type||"lct_sampledline"==this.type)for(var a=0;a<this.seriesCount;a++)G_UI_COM.createCSSRule("series"+this.id+"_"+
a,"fill: none; stroke: #"+this.seriesColor[a]+"; stroke-width: 1.5px;");if("lct_column"==this.type)for(a=0;a<this.seriesCount;a++)G_UI_COM.createCSSRule("series"+this.id+"_"+a,"fill: #"+this.seriesColor[a])},_paintData:function(){switch(this.type){case "lct_line":case "lct_sampledline":this.scale_x.range([0,this.width]);for(var a=0;a<this.seriesCount;a++)this.path[a].attr("d",this.line[a]);break;case "lct_column":this.scale_x.rangeRoundBands([0,this.width],0.1),this._paintColumns()}},applyScale:function(){var a=
dojo.position(this.container);this.width=a.w-this.margin.left-this.margin.right;this.height=a.h-this.margin.top-this.margin.bottom;this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom);this.clipPathRect.attr("width",this.width).attr("height",this.height);this.scale_y.range([this.height,0]);this.axisYG.call(this.axisY);this._paintData();this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")").call(this.axisX).selectAll("text").style("text-anchor",
"end");this.chartCaption&&this.chartCaption.attr("x",this.width/2).attr("y",-(this.margin.top-20))},postCreate:function(){this.inherited(arguments);this.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%;"></div>');this.set("style","overflow: hidden");setTimeout(this.createChart.bind(this),0)},stop:function(){this.stopped=!0;this.sfParams.action="stop";G_SERVER_COM.callServerFunction(this.sfClass,this.sfFunc,this.sfUidPath,this.sfParams)},start:function(){if(this.stopped){this.stopped=
!1;switch(this.type){case "lct_line":for(var a=0;a<this.seriesCount;a++)this._createLine(a);for(a=this.dataIdx=0;a<this.seriesCount;a++){this.buffer[a]=[];for(var b=0;b<=this.bufferSize;b++)this.buffer[a][b]=this.dummyData}break;case "lct_sampledline":for(a=0;a<this.seriesCount;a++)this._createLine(a)}this.initClass?G_SERVER_COM.callServerFunction(this.initClass,this.initFunc,this.initUidPath,this.initParams,this._initCallback.bind(this)):this._start()}},_initData:function(){for(var a=0;a<this.seriesCount;a++)this.data[a]=
d3.range(this.dataCount).map(function(){return this.dummyData}.bind(this))},_createLine:function(a){this.line[a]=d3.svg.line().interpolate(this.interpolation).x(function(a,b){return this.scale_x(b)}.bind(this)).y(function(a,b){return this.scale_y(a)}.bind(this));this.path[a]=this.svgMainG.append("g").attr("clip-path","url(#clip)").append("path").data([this.data[a]]).attr("class","series"+this.id+"_"+a).attr("d",this.line[a])},_initCallback:function(a,b,d,e){if(b){a=dojo.fromJson(d.output);switch(this.type){case "lct_line":for(b=
0;b<a.length;b++){d=this.bufferSize+1;e=!0;this.buffer[b]=[];for(var f=a[b].length-1;0<=f;f--)if(e)d--,this.buffer[b][d]=a[b][f],0==d&&(e=!1,d=this.dataCount);else if(d--,this.data[b][d]=a[b][f],0==d)break;if(e&&0<d)for(f=d-1;0<=f;f--)this.buffer[b][f]=this.dummyData;e&&(d=this.dataCount);if(0<d)for(f=d-1;0<=f;f--)this.data[b][f]=this.dummyData}if(this.seriesCount>a.length)for(b=a.length;b<this.seriesCount;b++)this._fillWithDummyData(b);break;case "lct_sampledline":case "lct_column":this.setData(a)}this._start()}else console.error("Server Function Error => "+
d.cn+"."+d.fn+": "+d.error)},_start:function(){this.sfParams.action="start";G_SERVER_COM.callServerFunction(this.sfClass,this.sfFunc,this.sfUidPath,this.sfParams);switch(this.type){case "lct_line":this._animationStart_1=new Date-this.updateInterval;this._animationStart_2=this._animationStart_1-this.updateInterval;this._oldAnimationTime_2=this._oldAnimationTime_1=this.updateInterval;for(var a=this._doNotCalc=0;a<this.seriesCount;a++)this.updateData(a)}},setData:function(a,b){if(!this.stopped)switch(this.type){case "lct_line":this._setLineData(a,
b);break;case "lct_sampledline":this._setSampledLineData(a);break;case "lct_column":this._setColumnData(a)}},_setSampledLineData:function(a){if(this._setCompleteData(a))for(a=0;a<this.seriesCount;a++)this.path[a].attr("d",this.line[a])},_setLineData:function(a,b){if(a.length!=this.seriesCount)console.error("Live Chart "+this.id+": received data points count ("+a.length+") does not match series count ("+this.seriesCount+")");else if(this.dataIdx==b){for(var d=0;d<this.seriesCount;d++)this.buffer[d].push(a[d]);
this.dataIdx++}else if(b<this.dataIdx)this._dataToLate=10*this.bufferSize;else for(d=0;d<this.seriesCount;d++){for(var e=0;e<b-this.dataIdx;e++)this.buffer[d].push(this.dummyData);this.buffer[d].push(a[d]);this.dataIdx=this.dataIdx+(b-this.dataIdx)+1}},_setColumnData:function(a){this._setCompleteData(a)&&this._paintColumns()},_setCompleteData:function(a){if(a.length!=this.seriesCount)return console.error("Live Chart "+this.id+": received data sets count ("+a.length+") does not match series count ("+
this.seriesCount+")"),!1;for(var b=0;b<this.seriesCount;b++)for(var d=0;d<a[b].length;d++){if(a[b].length!=this.dataCount)return console.error("Live Chart "+this.id+": received data count ("+a[b].length+") for set "+b+" does not match data count ("+this.dataCount+")"),!1;this.data[b][d]=a[b][d]}return!0},updateData:function(a){if(!this.stopped)if(this.seriesCount<=a)this._doNotCalc&&(this._doNotCalc=this._doNotClac-1);else{if(0==this.buffer[a].length){this.dataIdx++;for(var b=0;b<this.seriesCount;b++)this.buffer[b].push(this.dummyData)}this.data[a].push(this.buffer[a].shift());
if(this._doNotCalc)this._doNotCalc=this._doNotClac-1;else for(this._doNotCalc=this.seriesCount-1,this._animationTime=this.updateInterval-(this._animationStart_1-this._animationStart_2-this._oldAnimationTime_2),this._animationTime<this.updateInterval/2&&(this._animationTime=this.updateInterval/2),this.buffer[a].length>this.bufferSize&&(this._animationTime-=this.updateInterval/10),this.buffer[a].length<this.bufferSize&&(this._dataToLate=10),this._dataToLate&&(this._dataToLate-=1,this._animationTime+=
this.updateInterval/10),this._oldAnimationTime_2=this._oldAnimationTime_1,this._oldAnimationTime_1=this._animationTime,this._animationStart_2=this._animationStart_1,this._animationStart_1=new Date;0<this.newLines.length;)setTimeout(this.updateData.bind(this,this.newLines.pop()),0);this.path[a].attr("d",this.line[a]).attr("transform",null).transition().duration(this._animationTime).ease("linear").attr("transform","translate("+this.scale_x(0)+")").each("end",this.updateData.bind(this,a));this.data[a].shift()}},
createChart:function(){this.container=dojo.byId(this.id+"_container");this._initData();this._createSeriesCSS();""!=this.caption&&(this.margin.top+=20);this.legendLabels&&(this.margin.bottom+=20);var a=dojo.position(this.container);this.svg=d3.select(this.container).append("svg").attr("width",a.w).attr("height",a.h);this.svgMainG=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");this.width=a.w-this.margin.left-this.margin.right;""!=this.captiom&&(this.chartCaption=
this.svgMainG.append("text").attr("x",this.width/2).attr("y",-(this.margin.top-20)).attr("text-anchor","middle").attr("class","firmosLiveChartCaption").text(this.caption));switch(this.type){case "lct_line":this.domainX=[1,this.dataCount-2];this.scale_x=d3.scale.linear().domain(this.domainX).range([0,this.width]);break;case "lct_sampledline":this.domainX=[0,this.dataCount-1];this.scale_x=d3.scale.linear().domain(this.domainX).range([0,this.width]);break;case "lct_column":this.domainX=this.dataLabels?
d3.range(this.dataCount).map(function(a){return this.dataLabels[a]}.bind(this)):d3.range(this.dataCount).map(function(a){return a}),this.scale_x=d3.scale.ordinal().domain(this.domainX).rangeRoundBands([0,this.width],0.1)}this.dataLabels&&(this.axisX=d3.svg.axis().scale(this.scale_x).orient("bottom"),this.axisXG=this.svgMainG.append("g").attr("class","x d3axis").call(this.axisX),this._adjustAxisX());this.height=a.h-this.margin.top-this.margin.bottom;this.axisXG&&this.axisXG.attr("transform","translate(0,"+
this.height+")");this.legendLabels&&this._paintLegend();this.clipPath=this.svgMainG.append("defs").append("clipPath").attr("id","clip");this.clipPathRect=this.clipPath.append("rect").attr("width",this.width).attr("height",this.height);this.scale_y=d3.scale.linear().domain([this.dataMin,this.dataMax]).range([this.height,0]);this.axisY=d3.svg.axis().scale(this.scale_y).ticks(this.dataTickHint).orient("left");this.axisYG=this.svgMainG.append("g").attr("class","y d3axis").call(this.axisY);this.start();
this._events.push(dojo.connect(this,"resize",this.applyScale.bind(this)))},_adjustAxisX:function(){var a=0;this.axisXG.selectAll("text").style("text-anchor","end").attr("transform",function(a){return"rotate(-90)"}).attr("transform",function(b){b=this.getBoundingClientRect();ySpace=b.bottom-b.top;ySpace>a&&(a=ySpace);return"rotate(-90) translate(-5,"+(b.left-b.right)+")"});this.margin.bottom=this.margin.bottom-this.axisXMargin+a;this.axisXMargin=a},_paintLegend:function(){this.legendSize=0;this.legend=
this.svgMainG.append("g");for(var a=0;a<this.seriesCount;a++){this.legendItems[a]=this.legend.append("g").attr("class","legend");this.legendItems[a].append("rect").attr("x",this.legendSize).attr("y",-5).attr("width",18).attr("height",2).style("fill","#"+this.seriesColor[a]);this.legendSize+=25;var b=this.legendItems[a].append("text").attr("x",this.legendSize).text(this.legendLabels[a]);this.legendSize=this.legendSize+b[0][0].getBBox().width+20}this.legentSize=this.legendSize-20;this.legend.attr("transform",
"translate("+(this.width/2-this.legendSize/2)+","+(this.height+this.margin.top-10)+")")},_paintColumns:function(){for(var a=0;a<this.seriesCount;a++){var b=this.svgMainG.selectAll(".series"+this.id+"_"+a).data(this.data[a]);b.enter().append("rect").attr("class","series"+this.id+"_"+a);var d=0<this.dataMin?this.dataMin:0;b.attr("x",function(a,b){return this.scale_x(this.domainX[b])}.bind(this)).attr("width",this.scale_x.rangeBand()).attr("y",function(a,b){return this.scale_y(a)}.bind(this)).attr("height",
function(a,b){return a<this.dataMin?0:this.scale_y(d)-this.scale_y(a)}.bind(this));b.exit().remove()}}});dojo.declare("FIRMOS.Chart",dojox.charting.widget.Chart,{constructor:function(a){this.store_=a.store;this.type=a.type;this.seriesIds_=a.seriesids;this.title=a.title;this.storeAdapters_=[];if(a.labels){this.labels_=[];for(var b="ct_column"==this.type?1:0,d=0;d<a.labels.length;d++)this.labels_[d]={value:d+b,text:a.labels[d]}}G_UI_COM.registerStoreView(a.store.id,this)},destroy:function(){for(var a=
0;a<this.storeAdapters_.length;a++)this.storeAdapters_[a].destroy();G_UI_COM.unregisterStoreView(this.store.id,this);this.inherited(arguments);this.firstRenderListener_&&(this.firstRenderListener_.remove(),this.firstRenderListener_=null)},_getValueFunc:function(a){var b={};b.y=a.value;a.color&&(b.color=a.color);a.text&&(b.text=a.text);a.legend&&(b.legend=a.legend);return b},_addSeries:function(){this.chart.setTheme(dojox.charting.themes.Firmos);for(var a=0;a<this.seriesIds_.length;a++)this.storeAdapters_.push(new FIRMOS.StoreSeries(this.store_,
{query:{sId:this.seriesIds_[a]}},this._getValueFunc,this.id)),this.chart.addSeries(this.seriesIds_[a],this.storeAdapters_[this.storeAdapters_.length-1]);var a={},b={vertical:!0},d={markers:!0,gap:2};switch(this.type){case "ct_pie":d.type="Pie";break;case "ct_column":d.type="ClusteredColumns";this.labels_&&(a.dropLabels=!1,a.labels=this.labels_,a.rotation=90);a.dropLabels=!1;b.includeZero=!0;0<this.maxValue&&(b.max=this.maxValue);break;case "ct_line":d.type="Lines",this.labels_&&(a.labels=this.labels_),
b.includeZero=!0}this.chart.addAxis("x",a);this.chart.addAxis("y",b);this.chart.title=this.title;this.chart.addPlot("default",d);this.showlegend&&(this.firstRenderListener_=dojo.connect(this.chart,"render",this._showLegend.bind(this)))},_showLegend:function(){this.firstRenderListener_&&(this.firstRenderListener_.remove(),this.firstRenderListener_=null);this.getParent().getParent().getChildren()[1].content.refresh();this.getParent().getParent().layout()},buildRendering:function(){this.inherited(arguments);
setTimeout(this._addSeries.bind(this),0)}});dojo.declare("FIRMOS.TopMenu",dijit.layout.BorderContainer,{constructor:function(a){this._events=[]},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},postCreate:function(){this.inherited(arguments);var a=new dijit.layout.ContentPane({region:"top",splitter:!1,"class":"firmosTransparent"}),b;b='<div class="topMenu"><div class="topMenuLogoLeft"></div>';b+='<div class="topMenuLogoRight"></div>';b+='<div class="buttonListWrapper">';
for(var d,e,f=0;f<this.entries.length;f++)this.entries[f].isBig?(d="53",e="Big"):(d="38",e=""),G_UI_COM.createCSSRule("topMenu"+this.entries[f].entryId,"background: url("+this.entries[f].icon+"); background-repeat: no-repeat; background-size:"+d+"px "+d+"px; background-position: center;"),b=b+'<div class="buttonListItem"><div id="topMenu'+this.entries[f].entryId+'" class="menuButton'+e+'"><div class="base"><div class="shineTop"><div class="buttonIcon topMenu'+this.entries[f].entryId+'"><div class="shineBottom"></div></div></div></div><div class="captionContainer"><div class="buttonCaption">'+
this.entries[f].caption+"</div></div></div></div>";b+="</div></div>";a.set("content",b);this.addChild(a);setTimeout(this._registerButtons.bind(this),0)},_registerButtons:function(){this.layout();for(var a=0;a<this.entries.length;a++){var b=dojo.byId("topMenu"+this.entries[a].entryId);this._events.push(dojo.connect(b,dojox.gesture.tap,this.onClickHandler.bind(this,a)))}},onClickHandler:function(a,b){this.entries[a].isDialog?this.entries[a].isJira?window._showCollectorDialog?window._showCollectorDialog():
console.error("JIRA integration not included!"):G_SERVER_COM.callServerFunction(this.entries[a]["class"],this.entries[a].func,this.entries[a].uidpath,this.entries[a].params):G_UI_COM.showSectionPath(this.subSecsId,[this.entries[a].entryId],!0)}});dojo.declare("FIRMOS.Sitemap",dijit.layout.BorderContainer,{constructor:function(){this._events=[];this.mainEntriesBB=this.mainEntriesGroupGFX=this.mainEntriesSurface=this.mainEntriesContainer=this.detailsCP=this.mainEntriesCP=null;this.mainEntriesMoveCtrl=
!1;this.mainEntriesMoveCtrlDownGFX=this.mainEntriesMoveCtrlUpGFX=null;this.mainEntriesPos=0;this.detailsDim=this.detailsSurface=this.detailsContainer=null;this.detailsMinVisibleSection=100;this.animationRunning=!1;this.toggleAnimationDuration=500;this.focusElementAnimationDuration=250;this.minimizedScale=0.05;this.levelScale=0.6;this.moveFactor=0.2;this.lastMove_=(new Date).getTime();this.moving_=!1;this.mouseWheelDivisor=this.moveToClickTimeMin=100;this.pinchDivisor=5;G_UI_COM.registerSitemap(this)},
destroy:function(){for(G_UI_COM.unregisterSitemap(this);0<this._events.length;)this._events.pop().remove();this.inherited(arguments);this.mainEntriesMoveEndEvent&&(this.mainEntriesMoveEndEvent.remove(),this.mainEntriesMoveEndEvent=null)},postCreate:function(){this.inherited(arguments);this.mainEntriesCP=new dijit.layout.ContentPane({region:"left",splitter:!1,"class":"firmosTransparent"});this.mainEntriesCP.set("content",'<div id="'+this.id+'_me_gfx" style="width:100%; height:100%;"></div>');this.mainEntriesCP.set("style",
"width: 140px; overflow: hidden");this.detailsCP=new dijit.layout.ContentPane({region:"center",splitter:!1,"class":"firmosTransparent"});this.detailsCP.set("content",'<div id="'+this.id+'_d_gfx" style="width:100%; height:100%;"></div>');this.detailsCP.set("style","width: 100%; overflow: hidden");this.addChild(this.mainEntriesCP);this.addChild(this.detailsCP);setTimeout(this.buildSitemap.bind(this),0)},buildSitemap:function(){for(var a=this.getParent(),b=this;a;)a.isInstanceOf(FIRMOS.TabContainer)&&
(b._fixContent=!0),b=a,a=b.getParent();this.mainEntriesContainer=dojo.byId(this.id+"_me_gfx");this.mainEntriesSurface=dojox.gfx.createSurface(this.id+"_me_gfx","100%","100%");this.detailsContainer=dojo.byId(this.id+"_d_gfx");this.detailsSurface=dojox.gfx.createSurface(this.id+"_d_gfx","100%","100%");this.buildSVGDefs();b=!1;for(a=0;a<this.entries.length;a++)this.entries[a].entries?(this.entries[a].collapsed=b,b=!0):this.entries[a].collapsed=!0;if(1==this.entries.length)this.mainEntriesCP.set("style",
"display: none"),this._fixEntriesDataType(this.entries[0]);else for(this.mainEntriesGroupGFX=this.mainEntriesSurface.createGroup(),a=0;a<this.entries.length;a++)b=this.mainEntriesGroupGFX.createGroup(),this.entries[a].groupGFX=b,this.entries[a].x=80,this.entries[a].y=0==a?30:this.entries[a-1].y+this.entries[a-1].height+30,this.createEntry(b,this.entries[a],!1),this.entries[a].collapsed||(this.entries[a].elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryPressed"),this.entries[a].elementGFX.rawNode.childNodes[1].setAttribute("class",
"firmosSitemapEntryPressed2")),this.createShortcut(this.entries[a]);b=[];this.detailsDim=dojo.position(this.detailsContainer);for(a=0;a<this.entries.length;a++)if(this.entries[a].childrenGroupMoveGFX=this.detailsSurface.createGroup(),this.entries[a].childrenGroupGFX=this.entries[a].childrenGroupMoveGFX.createGroup(),this.entries[a].activeLevel=1,this.entries[a].levelScale=1,this.entries[a].maxLevel=1,this.entries[a].maxLevelScale=1,b[0]=a,0<this.entries[a].entries.length){this.buildDetails(this.entries[a],
b,null,this.entries[a].childrenGroupGFX);for(var d=1;d<this.entries[a].maxLevel;d++)this.entries[a].maxLevelScale/=this.levelScale;d=this.entries[a].childrenGroupGFX.getBoundingBox();this.entries[a].eventRect=this.entries[a].childrenGroupMoveGFX.createRect({x:d.x-this.detailsDim.w,y:d.y-this.detailsDim.h,width:d.width+2*this.detailsDim.w,height:d.height+2*this.detailsDim.h}).setFill([0,0,0,0]).moveToBack();d=dojox.gfx.Moveable(this.entries[a].childrenGroupMoveGFX);this._events.push(dojo.connect(d,
"onMoveStop",this._moveActionStop.bind(this)));this._events.push(dojo.connect(d,"onMove",this._moveAction.bind(this)));this._events.push(dojo.connect(this.entries[a].eventRect.getEventSource(),dojox.gesture.tap.doubletap,this.resetDisplay.bind(this,this.entries[a])));this._events.push(dojo.connect(this.entries[a].eventRect.getEventSource(),"gesturechange",this.gestureHandler.bind(this,this.entries[a])));d=dojo.isMozilla?"DOMMouseScroll":"onmousewheel";this._events.push(dojo.connect(this.entries[a].childrenGroupMoveGFX.getEventSource(),
"gesturechange",this.gestureHandler.bind(this,this.entries[a])));this._events.push(dojo.connect(this.entries[a].childrenGroupMoveGFX.getEventSource(),d,this.gestureHandler.bind(this,this.entries[a])))}else this.entries[a].path=dojo.clone(b);1<this.entries.length&&(this.mainEntriesBB=this.mainEntriesGroupGFX.getBoundingBox());this.resizeSVGHandler();this.layout();setTimeout(this._initialLayoutDetails.bind(this),0);this._events.push(dojo.connect(this,"resize",this.resizeSVGHandler.bind(this)))},gestureHandler:function(a,
b){if(this.animationRunning)setTimeout(this.gestureHandler.bind(this,a,b),100);else{if(b.scale)var d=1+(b.scale-1)/this.pinchDivisor;else d=b[dojo.isMozilla?"detail":"wheelDelta"]*(dojo.isMozilla?-1:1),d=1+d/this.mouseWheelDivisor;var e=a.levelScale*d;1>e&&(e=1,d=e/a.levelScale);e>a.maxLevelScale&&(e=a.maxLevelScale,d=e/a.levelScale);var f=dojo.position(this.domNode);a.levelScale=e;a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(d,f.w/2-this.detailsDim.x,f.h/2));for(var d=2,f=1,
k=1/this.levelScale;k<e;)f=k,k/=this.levelScale,d+=1;e-f<k-e&&(d-=1);e=a.activeLevel;a.activeLevel=d;this.highlightActiveLevel(a,e)}},_initialLayoutDetails:function(){for(var a=0;a<this.entries.length;a++)0<this.entries[a].entries.length&&this.layoutDetails(this.entries[a])},_moveAction:function(){this.moving_=!0},_moveActionStop:function(){this.moving_&&(this.lastMove_=(new Date).getTime(),this._checkDetailsVisibility());this.moving_=!1},_checkDetailsVisibility:function(){for(var a=0;a<this.entries.length;a++)if(!1==
this.entries[a].collapsed){var b=this.entries[a].childrenGroupGFX.getTransformedBoundingBox(),d=this.detailsMinVisibleSection-b[1].x,e=this.detailsDim.w-this.detailsMinVisibleSection-b[0].x,f=this.detailsMinVisibleSection-b[2].y,b=this.detailsDim.h-this.detailsMinVisibleSection-b[1].y,k=!1;0<d?k=!0:d=0;0>e?k=!0:e=0;0<f?k=!0:f=0;0>b?k=!0:b=0;k&&this.entries[a].childrenGroupMoveGFX.applyTransform(dojox.gfx.matrix.translate(d+e,f+b));break}},layoutDetails:function(a){this._centerGFX(a.childrenGroupMoveGFX,
a.entries[0].elementGFX);if(a.collapsed){var b=a.childrenGroupMoveGFX.getTransformedBoundingBox(),d=a.groupGFX.getTransformedBoundingBox(),e=dojo.position(this.mainEntriesContainer);d[0].x-=e.w;d[1].x-=e.w;a.childrenGroupMoveGFX.moveToBack();a.childrenGroupMoveGFX.applyTransform(dojox.gfx.matrix.translate(d[0].x+(d[1].x-d[0].x)/2-b[0].x-(b[1].x-b[0].x)/2,d[1].y+(d[2].y-d[1].y)/2-b[1].y-(b[2].y-b[1].y)/2));a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(this.minimizedScale,d[0].x+
(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2));a.childrenGroupMoveGFX.rawNode.style.display="none"}},buildDetails:function(a,b,d,e){a.path=dojo.clone(b);if(d)var f=a.elementGFX.getTransformedBoundingBox(),k=f[0].x+(f[1].x-f[0].x)/2,f=f[1].y+(f[2].y-f[1].y)/2;this.entries[b[0]].maxLevel=Math.max(this.entries[b[0]].maxLevel,b.length-1);for(var l=0;l<a.entries.length;l++){var m=e.createGroup();a.entries[l].groupGFX=m;this.createEntry(m,a.entries[l],1==a.path.length);var n=a.entries[l].groupGFX.getTransformedBoundingBox();
if(d){var p=a.entries[l].elementGFX.getTransformedBoundingBox(),q=p[0].x+(p[1].x-p[0].x)/2,p=p[1].y+(p[2].y-p[1].y)/2,r=e.createRect({x:0,y:0,width:0,height:0});a.entries[l].connector=r;r.rawNode.setAttribute("style",'fill: url("/#connectorgradient"); fill-opacity: 1;');this.repaintConnector(r,q,p,k,f,5)}b.push(l);this.buildDetails(a.entries[l],b,n,m);b.pop();d&&(m=(k-q)*this.moveFactor,n=(f-p)*this.moveFactor,a.entries[l].connector.applyLeftTransform(dojox.gfx.matrix.translate((k-q)*this.moveFactor,
(f-p)*this.moveFactor)),a.entries[l].connector.applyLeftTransform(dojox.gfx.matrix.scaleAt(1-this.moveFactor,q+(k-q)*this.moveFactor,p+(f-p)*this.moveFactor)),a.entries[l].groupGFX.applyTransform(dojox.gfx.matrix.translate(m,n)),a.entries[l].groupGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(this.levelScale,q+m,p+n)))}},repaintConnector:function(a,b,d,e,f,k){var l=e-b,m=f-d;f=b+l/2;d+=m/2;l=Math.sqrt(l*l+m*m);m=Math.asin(m/l);e<b&&(m=-m);a.setShape({x:f-l/2,y:d-k/2,width:l,height:k});a.applyTransform(dojox.gfx.matrix.rotateAt(m,
f,d)).moveToBack();a._originalTrans=a.getTransform()},_fixEntriesDataType:function(a){a.entries?a.entries instanceof Array||(a.entries=[a.entries]):a.entries=[]},createEntry:function(a,b,d){this._fixEntriesDataType(b);a=a.createGroup();b.elementGFX=a;b.width=100;b.height=b.icon?78:35;var e="";d&&(e="AL");d=a.createPath({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"});d.applyTransform(dojox.gfx.matrix.translate(b.x-
67.2,b.y));var f=a.createPath({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"});f.applyTransform(dojox.gfx.matrix.translate(b.x-67.2,b.y));var k=d.getTransformedBoundingBox();if(b.icon){a.createImage({x:k[0].x+(k[1].x-k[0].x)/2-24,y:k[1].y+5,width:48,height:48,src:b.icon,preserveAspectRatio:"meet"});var l=k[1].y+48+20}else l=
k[1].y+(k[2].y-k[1].y)/2+5;k=a.createText({x:k[0].x+(k[1].x-k[0].x)/2,y:l,text:b.caption,align:"center"}).setFont({family:"Arial",size:"10pt"}).setFill("white");k.applyTransform(dojox.gfx.matrix.translate(-k.getTextWidth()/2,0));k.getTextWidth()>b.width-10&&(k=k.getTextWidth()-b.width+10,b.width+=k,d.setShape({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"}),f.setShape({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+
(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"}),d.applyTransform(dojox.gfx.matrix.translate(k/2,0)),f.applyTransform(dojox.gfx.matrix.translate(k/2,0)));b.disabled?(d.rawNode.setAttribute("class","firmosSitemapEntryDisabled"+e),f.rawNode.setAttribute("class","firmosSitemapEntryDisabled2")):(d.rawNode.setAttribute("class","firmosSitemapEntry"+e),f.rawNode.setAttribute("class","firmosSitemapEntry2"));
e=a.getTransformedBoundingBox();a.createRect({x:e[0].x,y:e[1].y,width:e[1].x-e[0].x,height:e[2].y-e[1].y}).setFill([0,0,0,0]);this._events.push(dojo.connect(a.getEventSource(),dojox.gesture.tap,this.elementOnClick.bind(this,b,!1)));1!=b.scale&&(e=a.getTransformedBoundingBox(),a.applyLeftTransform(dojox.gfx.matrix.scaleAt(b.scale,e[0].x+(e[1].x-e[0].x)/2,e[1].y+(e[2].y-e[1].y)/2)));this.createInfoUI(b)},createInfoUI:function(a){if(0<a.newscount)if(a.infoGFX){var b=0;if(99<a.newscount){var d=8;100>
a.newscount_old&&(b=-1)}else 99<a.newscount_old&&(b=1),d=10;delete a.newscount_old;var e=a.infoGFX.children[2],f=e.getTextWidth();e.setShape({text:a.newscount+""}).setFont({size:d+"pt"});e.applyTransform(dojox.gfx.matrix.translate(f/2-e.getTextWidth()/2,b))}else b=a.elementGFX.getBoundingBox(),f=a.groupGFX.createGroup(),f.createCircle({cx:b.x+b.width,cy:b.y,r:12}).setFill("white"),f.createCircle({cx:b.x+b.width,cy:b.y,r:10}).setFill("red"),d=99<a.newscount?8:10,e=f.createText({x:b.x+b.width+1,y:b.y+
d/2,text:a.newscount+""}).setFont({family:"Arial",size:d+"pt"}).setFill("white"),e.applyTransform(dojox.gfx.matrix.translate(-e.getTextWidth()/2,0)),1!=a.scale&&(f.applyLeftTransform(dojox.gfx.matrix.scaleAt(a.scale,b.x+b.width,b.y)),f.applyTransform(dojox.gfx.matrix.translate(-b.width*(1-a.scale)/2,b.height*(1-a.scale)/2))),a.infoGFX=f;else a.infoGFX&&(a.infoGFX.destroy(),delete a.infoGFX,delete a.newscount_old)},_isShortcutDisabled:function(a){if(!a.entries)return!0;for(var b=0;b<a.entries.length;b++)if(!a.entries[b].disabled||
this._isShortcutDisabled(a.entries[b]))return!1;return!0},createShortcut:function(a){var b=a.disabled||this._isShortcutDisabled(a),d=b?"firmosSMShortcutDisabled":"firmosSMShortcutEnabled",e=a.elementGFX.getBoundingBox(),f=a.groupGFX.createGroup(),k=f.createPath({path:"M19.158,32.64c-2.551,0-5.035-0.738-7.185-2.134c-2.961-1.922-4.995-4.882-5.729-8.334c-0.733-3.452-0.078-6.983,1.844-9.943c2.447-3.77,6.595-6.02,11.094-6.02c2.55,0,5.034,0.738,7.183,2.134c2.961,1.922,4.996,4.882,5.73,8.335c0.734,3.452,0.079,6.984-1.844,9.944C27.805,30.391,23.658,32.64,19.158,32.64z"});
k.rawNode.setAttribute("class",d+"1");k=f.createPath({path:"M19.184,5.709v1c2.453,0,4.842,0.71,6.91,2.053c2.849,1.85,4.807,4.698,5.513,8.02c0.706,3.321,0.076,6.72-1.774,9.568c-2.354,3.625-6.345,5.79-10.675,5.79c-2.454,0-4.844-0.71-6.913-2.053c-2.848-1.85-4.806-4.697-5.511-8.019c-0.706-3.321-0.076-6.719,1.774-9.567c2.354-3.626,6.345-5.792,10.674-5.792L19.184,5.709M19.183,5.709c-4.488,0-8.886,2.202-11.513,6.248C3.544,18.308,5.347,26.8,11.701,30.926c2.308,1.499,4.896,2.214,7.457,2.214c4.489,0,8.888-2.201,11.514-6.246c4.126-6.353,2.32-14.846-4.033-18.971C24.331,6.425,21.742,5.709,19.183,5.709L19.183,5.709z"});
k.rawNode.setAttribute("class",d+"2");k=f.createPath({path:"M0.2-20.001c-10.906,0-19.779,8.874-19.779,19.78c0,10.907,8.873,19.781,19.779,19.781c4.679,0,8.971-1.644,12.356-4.373l-9.806-8.48l25.828-3.813l-0.05,26.107l-9.07-7.845c-5.101,4.599-11.85,7.404-19.259,7.404c-15.894,0-28.779-12.887-28.779-28.781s12.886-28.78,28.779-28.78c12.468,0,23.081,7.928,27.08,19.016l-9.199,1.359C14.913-15.336,8.1-20.001,0.2-20.001z"});k.rawNode.setAttribute("class",d+"3");k.applyTransform({xx:-0.2177,yx:0.1947,xy:0.2037,
yy:0.2278,dx:19.4619,dy:18.75});f.applyTransform(dojox.gfx.matrix.translate(e.x+e.width-25,e.y+e.height-18));1!=a.scale&&(f.applyLeftTransform(dojox.gfx.matrix.scaleAt(a.scale,e.x+e.width,e.y)),f.applyTransform(dojox.gfx.matrix.translate(-e.width*(1-a.scale)/2,-e.height*(1-a.scale)/2)));a.scGFX=f;b||this._events.push(dojo.connect(f.getEventSource(),dojox.gesture.tap,this.elementOnClick.bind(this,a,!0)))},_getEntryByPath:function(a){for(var b,d=this;0<a.length;){var e=a.shift();b=!0;for(var f=0;f<
d.entries.length;f++)if(e==d.entries[f].id){d=d.entries[f];b=!1;break}if(b){console.error("_getEntryByPath: Child "+e+" not found");return}}return d},updateInfoUI:function(a,b){var d=this._getEntryByPath(a);d.newscount_old=d.newscount;d.newscount=b;this.createInfoUI(d)},_buildSVGDef:function(a){var b=dojo.doc.createElementNS("http://www.w3.org/2000/svg",a.tagname);if(a.attrs){a.attrs instanceof Array||(a.attrs=[a.attrs]);for(var d=0;d<a.attrs.length;d++)b.setAttribute(a.attrs[d].name,a.attrs[d].value)}if(a.elems)for(a.elems instanceof
Array||(a.elems=[a.elems]),d=0;d<a.elems.length;d++){var e=this._buildSVGDef(a.elems[d]);b.appendChild(e)}return b},buildSVGDefs:function(){for(var a=this.mainEntriesSurface.rawNode.getElementsByTagName("defs")[0],b=this.detailsSurface.rawNode.getElementsByTagName("defs")[0],d=0;d<this.defs.length;d++){var e=this._buildSVGDef(this.defs[d]);a.appendChild(e);b.appendChild(e)}},_createEventRects:function(){this.detailsDim=dojo.position(this.detailsContainer);for(var a=0;a<this.entries.length;a++)if(0<
this.entries[a].entries.length){var b=this.entries[a].childrenGroupGFX.getBoundingBox();this.entries[a].eventRect.setShape({x:b.x-this.detailsDim.w,y:b.y-this.detailsDim.h,width:b.width+2*this.detailsDim.w,height:b.height+2*this.detailsDim.h})}this._checkDetailsVisibility()},resizeSVGHandler:function(){if(1<this.entries.length)if(this.mainEntriesCP.set("style","width: "+(2*this.mainEntriesBB.x+this.mainEntriesBB.width-1)+"px; overflow: hidden;"),setTimeout(function(){this.mainEntriesCP.set("style",
"width: "+(2*this.mainEntriesBB.x+this.mainEntriesBB.width)+"px; overflow: hidden;")}.bind(this),0),this.mainEntriesContainerDim=dojo.position(this.mainEntriesContainer),this.mainEntriesBB.y+this.mainEntriesBB.height>this.mainEntriesContainerDim.h)if(this.mainEntriesMoveCtrl){var a=this.mainEntriesBB.y+this.mainEntriesBB.height+this.mainEntriesPos-this.mainEntriesContainerDim.h;0<a?(this._createMoveCtrlDown(),this._repositionMoveCtrlDown()):(this._removeMoveCtrlDown(),this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,
-a)),this.mainEntriesPos-=a)}else this.mainEntriesMoveCtrl=!0,this._createMoveCtrlDown();else this.mainEntriesMoveCtrl&&(this._removeMoveCtrlDown(),this._removeMoveCtrlUp(),this.mainEntriesMoveCtrl=!1,this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,-this.mainEntriesPos)),this.mainEntriesPos=0);setTimeout(this._createEventRects.bind(this),1)},_createMoveCtrlDown:function(){this.mainEntriesMoveCtrlDownGFX||(this.mainEntriesMoveCtrlDownGFX=this.mainEntriesSurface.createGroup(),this.mainEntriesMoveCtrlDownGFX.createRect({x:10,
y:this.mainEntriesContainerDim.h-30,width:this.mainEntriesContainerDim.w-20,height:30}).setFill([0,0,0,0.5]),this.mainEntriesMoveCtrlDownGFX.createPolyline([{x:15,y:this.mainEntriesContainerDim.h-25},{x:this.mainEntriesContainerDim.w-15,y:this.mainEntriesContainerDim.h-25},{x:this.mainEntriesContainerDim.w/2,y:this.mainEntriesContainerDim.h-5},{x:15,y:this.mainEntriesContainerDim.h-25}]).setFill("white"),this._repositionMoveCtrlDown(),this._events.push(dojo.connect(this.mainEntriesMoveCtrlDownGFX.getEventSource(),
dojo.touch.press,this.mainEntriesMoveHandler.bind(this,-1))))},_createMoveCtrlUp:function(){this.mainEntriesMoveCtrlUpGFX||(this.mainEntriesMoveCtrlUpGFX=this.mainEntriesSurface.createGroup(),this.mainEntriesMoveCtrlUpGFX.createRect({x:10,y:0,width:this.mainEntriesContainerDim.w-20,height:30}).setFill([0,0,0,0.5]),this.mainEntriesMoveCtrlUpGFX.createPolyline([{x:15,y:25},{x:this.mainEntriesContainerDim.w-15,y:25},{x:this.mainEntriesContainerDim.w/2,y:5},{x:15,y:25}]).setFill("white"),this._events.push(dojo.connect(this.mainEntriesMoveCtrlUpGFX.getEventSource(),
dojo.touch.press,this.mainEntriesMoveHandler.bind(this,1))))},_removeMoveCtrlUp:function(){this.mainEntriesMoveCtrlUpGFX&&(this.mainEntriesMoveCtrlUpGFX.destroy(),this.mainEntriesMoveCtrlUpGFX=null)},_removeMoveCtrlDown:function(){this.mainEntriesMoveCtrlDownGFX&&(this.mainEntriesMoveCtrlDownGFX.destroy(),this.mainEntriesMoveCtrlDownGFX=null)},_moveMainEntries:function(a){0>a?(this._createMoveCtrlUp(),this.mainEntriesBB.y+this.mainEntriesBB.height+this.mainEntriesPos<=this.mainEntriesContainerDim.h&&
(this._removeMoveCtrlDown(),this.mainEntriesMoveEndHandler())):(this._createMoveCtrlDown(),0<=this.mainEntriesPos&&(this._removeMoveCtrlUp(),this.mainEntriesMoveEndHandler()));this.mainEntriesMoveEndEvent&&(this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,a)),this.mainEntriesPos+=a,setTimeout(this._moveMainEntries.bind(this,a),10))},mainEntriesMoveHandler:function(a){this.mainEntriesMoveEndEvent&&this.mainEntriesMoveEndHandler();this.mainEntriesMoveEndEvent=dojo.connect(document,
dojo.touch.release,this.mainEntriesMoveEndHandler.bind(this));this._moveMainEntries(a)},mainEntriesMoveEndHandler:function(a){this.mainEntriesMoveEndEvent&&(this.mainEntriesMoveEndEvent.remove(),this.mainEntriesMoveEndEvent=null)},_repositionMoveCtrlDown:function(){if(this.mainEntriesMoveCtrlDownGFX){var a=this.mainEntriesMoveCtrlDownGFX.getTransformedBoundingBox()[2].y-this.mainEntriesContainerDim.h;0!=a&&this.mainEntriesMoveCtrlDownGFX.applyTransform(dojox.gfx.matrix.translate(0,-a))}},_centerGFX:function(a,
b){var d=dojo.position(this.domNode),e=b.getTransformedBoundingBox();a.applyLeftTransform(dojox.gfx.matrix.translate(d.w/2-this.detailsDim.x-(e[1].x-e[0].x)/2-e[0].x,d.h/2-(e[2].y-e[1].y)/2-e[1].y))},resetDisplay:function(a){if(!this.animationRunning){this.animationRunning=!0;var b=this._centerAndScale(a,a.levelScale),d=a.activeLevel;a.activeLevel=1;a.levelScale=1;this._events.push(dojo.connect(b,"onEnd",this.highlightActiveLevel.bind(this,a,d)));this._events.push(dojo.connect(b,"onEnd",this.animationEnd.bind(this,
a)))}},_centerAndScale:function(a,b){var d=dojo.position(this.domNode),e=a.entries[0].elementGFX.getTransformedBoundingBox();return(new dojox.gfx.fx.animateTransform({duration:this.toggleAnimationDuration,shape:a.childrenGroupMoveGFX,transform:[{name:"scaleAt",start:[1,e[0].x+(e[1].x-e[0].x)/2,e[1].y+(e[2].y-e[1].y)/2],end:[1/b,d.w/2-this.detailsDim.x,d.h/2]},{name:"translate",start:[0,0],end:[d.w/2-this.detailsDim.x-e[0].x-(e[1].x-e[0].x)/2,d.h/2-e[1].y-(e[2].y-e[1].y)/2]},{name:"original"}]})).play()},
elementToggleCollapse:function(a){!this.animationRunning&&a.collapsed&&(this.animationRunning=!0,this._elementExpand(a,!0))},_elementExpand:function(a,b){a.childrenGroupMoveGFX.getTransformedBoundingBox();for(var d=0;d<this.entries.length;d++)this.entries[d].collapsed||this._elementCollapse(this.entries[d],!1);a.childrenGroupMoveGFX.rawNode.style.display="";d=this._centerAndScale(a,this.minimizedScale);a.collapsed=!1;b&&(this._events.push(dojo.connect(d,"onEnd",this.animationEnd.bind(this,a))),this._events.push(dojo.connect(d,
"onEnd",this.expandElementEnd.bind(this,a))))},_elementCollapse:function(a,b){var d=a.childrenGroupMoveGFX.getTransformedBoundingBox(),e=a.groupGFX.getTransformedBoundingBox(),f=dojo.position(this.mainEntriesContainer);e[0].x-=f.w;e[1].x-=f.w;d=(new dojox.gfx.fx.animateTransform({duration:this.toggleAnimationDuration,shape:a.childrenGroupMoveGFX,transform:[{name:"scaleAt",start:[1,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2],end:[this.minimizedScale,e[0].x+(e[1].x-e[0].x)/2,e[1].y+(e[2].y-e[1].y)/
2]},{name:"translate",start:[0,0],end:[e[0].x+(e[1].x-e[0].x)/2-d[0].x-(d[1].x-d[0].x)/2,e[1].y+(e[2].y-e[1].y)/2-d[1].y-(d[2].y-d[1].y)/2]},{name:"original"}]})).play();a.collapsed=!0;this._events.push(dojo.connect(d,"onEnd",this.collapseElementEnd.bind(this,a)));b&&this._events.push(dojo.connect(d,"onEnd",this.animationEnd.bind(this,a)))},animationEnd:function(a){this.animationRunning=!1},collapseElementEnd:function(a){a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntry");
a.elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapEntry2")},expandElementEnd:function(a){a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryPressed");a.elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapEntryPressed2")},_highlightALRecursive:function(a,b,d,e){if(b<d||b<e)for(var f=0;f<a.entries.length;f++)this._highlightALRecursive(a.entries[f],b+1,d,e);b==d&&(a.disabled?a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryDisabledAL"):
a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryAL"));b==e&&(a.disabled?a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryDisabled"):a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntry"))},highlightActiveLevel:function(a,b){a.activeLevel!=b&&this._highlightALRecursive(a,0,a.activeLevel,b)},elementOnClick:function(a,b,d){if(!(this.moving_||(new Date).getTime()-this.lastMove_<this.moveToClickTimeMin))if(d.preventDefault(),dojo.stopEvent(d),
1!=a.path.length||b){var e=!0;if(1<a.path.length){var f=this.entries[a.path[0]],k=1,l=a.path.length-1,m=f.activeLevel;if(m!=l){e=!1;if(this.animationRunning){setTimeout(this.elementOnClick.bind(this,a,b,d),100);return}this.animationRunning=!0;if(f.activeLevel<l)for(b=f.activeLevel;b<l;b++)k/=this.levelScale;else for(b=f.activeLevel;b>l;b--)k*=this.levelScale;f.activeLevel=l;l=f.levelScale*k;1>l&&(l=1,k=l/f.levelScale);l>f.maxLevelScale&&(l=f.maxLevelScale,k=l/f.levelScale);f.levelScale=l;var n=a.elementGFX.getTransformedBoundingBox(),
l=f.childrenGroupMoveGFX.getTransform();b=n[0].x+(n[1].x-n[0].x)/2;n=n[1].y+(n[2].y-n[1].y)/2;k=dojox.gfx.matrix.scaleAt(k,b,n);if(d.clientX&&d.clientY){var p=d.clientX-this.detailsDim.x;d=d.clientY-this.detailsDim.y}else p=b,d=n;d=dojox.gfx.matrix.translate(p-b,d-n);d=(new dojox.gfx.fx.animateTransform({duration:this.focusElementAnimationDuration,shape:f.childrenGroupMoveGFX,transform:[{name:"matrix",start:l,end:dojox.gfx.matrix.multiply(d,k,l)}]})).play();this._events.push(dojo.connect(d,"onEnd",
this.animationEnd.bind(this,a)));this._events.push(dojo.connect(d,"onEnd",this.highlightActiveLevel.bind(this,f,m)))}}e&&!a.disabled&&(e=a.sectionpath.sectionids instanceof Array?dojo.clone(a.sectionpath.sectionids):[a.sectionpath.sectionids],G_UI_COM.showSectionPathInProgress=!0,G_UI_COM.showSectionPath(a.sectionpath.basecontainerid,e,!1)||console.error("Could not resolve given section path: "+JSON.stringify(a.sectionpath)))}else this.elementToggleCollapse(a)}});dojo.declare("FIRMOS.gridPBColumn",
null,{constructor:function(a){for(var b in a)this[b]=a[b]},renderCell:function(a,b,d,e,f){d=new dijit.ProgressBar({style:"width: 100%"});d.set("value",b/this.maxValue*100);this.labelId&&d.set("label",a[this.labelId]+"");return d.domNode}});dojo.declare("FIRMOS.gridDetailsColumn",null,{constructor:function(){this.label="";this.className="dgrid-details";this.unhidable=!0;this._events=[];return this},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},renderCell:function(a,b,
d,e,f){b=dojo.create("div");this.grid.detailsClassname||a._detailsfunc_&&a._funcclassname_?(b.className="dgrid-details-closed",b.innerHTML="+",a=a&&this.grid.row(a),a._detailsOpen=!1,this._events.push(dojo.connect(b,"onclick",this.toggleDetails.bind(this,b,a)))):b.className="dgrid-details-none";return b},toggleDetails:function(a,b){b._detailsOpen?(a.className="dgrid-details-closed",a.innerHTML="+",this.grid.hideDetails(b)):(a.className="dgrid-details-open",a.innerHTML="-",this.grid.showDetails(b));
b._detailsOpen=!b._detailsOpen},renderHeaderCell:function(a){return""}});dojo.declare("FIRMOS.OnDemandGrid",[dgrid.OnDemandGrid,FIRMOS.GridBase,FIRMOS.Selection,FIRMOS.GridFilter,dgrid.ColumnResizer,FIRMOS.ColumnReorder,dgrid.ColumnHider,FIRMOS.GridDnD,dgrid.DijitRegistry]);dojo.declare("FIRMOS.SVG",dijit.layout.ContentPane,{postCreate:function(){this.inherited(arguments);this.set("content",this.svg);this.set("class","firmosSVGPanel");var a=this.containerNode.children;0<a.length&&(this.svgNode=a[0],
this.svgNode.setAttribute("width","100%"),this.svgNode.setAttribute("height","100%"))},updateElement:function(a,b,d){(a=dojo.byId(a,this.svgNode))&&a.setAttribute(b,d)}});dojo.declare("FIRMOS.Editor",dijit.layout.BorderContainer,{texts:G_TEXTS.editor,_editorStarted:!1,_savedContent:"",constructor:function(a){switch(a.contentType){case "ct_html":this.editorType="aloha";this.startEditAHandler=this.startEditA.bind(this);this.pauseEditAHandler=this.pauseEditA.bind(this);break;case "ct_javascript":case "ct_pascal":this.editorType=
"codemirror";this.startEditCMHandler=this.startEditCM.bind(this);this.pauseEditCMHandler=this.pauseEditCM.bind(this);break;default:console.error("Unknown content type "+a.contentType)}this.readOnly=a.saveClass?!1:!0},destroy:function(){switch(this.editorType){case "aloha":$(Aloha,"body").unbind("aloha-editable-activated",this.startEditAHandler);$(Aloha,"body").unbind("aloha-editable-deactivated",this.pauseEditAHandler);break;case "codemirror":this.cm.off("focus",this.startEditCMHandler),this.cm.off("blur",
this.pauseEditCMHandler)}this.editableContent&&this.editableContent.destroy();this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.editorCP=new dijit.layout.ContentPane({region:"center",splitter:!1});this.editorCP.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%; background-color:#fff; overflow-y:auto;" class="article"></div>');if(this.tbBottom){this.toolbar=new dijit.Toolbar({region:"bottom"});var a=""}else this.toolbar=new dijit.Toolbar({region:"top"}),
a="float:right;";this.saveButton=new dijit.form.Button({label:this.texts.saveButton,disabled:!0,onClick:this.save.bind(this),style:a});this.toolbar.addChild(this.saveButton);this.resetButton=new dijit.form.Button({label:this.texts.resetButton,disabled:!0,onClick:this.load.bind(this),style:a});this.toolbar.addChild(this.resetButton);this.addChild(this.toolbar);this.addChild(this.editorCP);setTimeout(this.startEditor.bind(this),0)},startEditor:function(){if(!this.readOnly){switch(this.editorType){case "aloha":$("#"+
this.id+"_container").aloha();this.editableContent=Aloha.getEditableById(this.id+"_container");Aloha.bind("aloha-editable-activated",this.startEditAHandler);Aloha.bind("aloha-editable-deactivated",this.pauseEditAHandler);break;case "codemirror":this.cm=CodeMirror(dojo.byId(this.id+"_container"),{lineNumbers:!0,mode:this.contentType.substring(3)});this.cm.on("focus",this.startEditCMHandler);this.cm.on("blur",this.pauseEditCMHandler);break;default:return}this.load()}},loadCallback:function(a,b,d,e){b&&
""!=d.output&&(a=dojo.fromJson(d.output),this._savedContent=a.value,this.setValue(a.value))},getValue:function(){switch(this.editorType){case "aloha":return this.editableContent.getContents();case "codemirror":return this.cm.getValue()}},setValue:function(a){switch(this.editorType){case "aloha":this.editableContent&&this.editableContent.setContents(a);break;case "codemirror":this.cm.setValue(a)}},startEdit:function(){this._editorStarted||(this.saveButton.set("disabled",!1),this.resetButton.set("disabled",
!1),this.startEditClass&&G_SERVER_COM.callServerFunction(this.startEditClass,this.startEditFunc,this.startEditUidPath,this.startEditParams),this._editorStarted=!0)},pauseEdit:function(){this._editorStarted&&this.getValue()==this._savedContent&&this.stopEdit()},startEditCM:function(a){this.startEdit()},pauseEditCM:function(a){this.pauseEdit()},startEditA:function(a,b){b.editable.getId()==this.id+"_container"&&this.startEdit()},pauseEditA:function(a,b){b.editable.getId()==this.id+"_container"&&this.pauseEdit()},
stopEdit:function(){this._editorStarted&&(this.stopEditClass&&G_SERVER_COM.callServerFunction(this.stopEditClass,this.stopEditFunc,this.stopEditUidPath,this.stopEditParams),this.saveButton.set("disabled",!0),this.resetButton.set("disabled",!0),this._editorStarted=!1)},save:function(){this.stopEdit();var a=dojo.clone,a=dojo.clone(this.saveParams);a.content=this.getValue();this._savedContent=a.content;G_SERVER_COM.callServerFunction(this.saveClass,this.saveFunc,this.saveUidPath,a)},load:function(){this.stopEdit();
G_SERVER_COM.callServerFunction(this.loadClass,this.loadFunc,this.loadUidPath,this.loadParams,this.loadCallback.bind(this))}});dojo.declare("FIRMOS.Shell",dijit.layout.ContentPane,{postCreate:function(){this.set("content",'<iframe id="'+this.id+'_frame" src="'+this.protocol+"://"+this.host+":"+this.port+this.path+'" style="width:100%; height:100%;">Iframe not supported.</iframe>');this.set("style","overflow: hidden;");this.inherited(arguments)}});dojo.declare("FIRMOS.VNC",dijit.layout.BorderContainer,
{texts:G_TEXTS.vnc,constructor:function(a){this.ws=null;this.state="disconnected";this.container=this.canvas=null;this.securityType=0;this.serverSettings={};this.tileImage=this.context=null;this.mouseButtonState=0;this.intervalId=this.mouseCoords=null;this.scale=1;this.isActive=!1;this._events=[]},destroy:function(){this.disconnect();this.inherited(arguments)},postCreate:function(){this.vncCP=new dijit.layout.ContentPane({region:"center",splitter:!1});this.vncCP.set("content",'<div id="'+this.id+
'_container" style="width:100%; height:100%;"><canvas  class="firmosVNCInactive" tabindex="0" id="'+this.id+'_vnc" style="width:0px; height:0px; cursor: none;">Canvas not supported.</canvas></div>');this.vncCP.set("style","overflow: hidden;");this.toolbar=new dijit.Toolbar({region:"top"});this.cadButton=new dijit.form.Button({label:this.texts.cadButton,onClick:this.sendCAD.bind(this)});this.toolbar.addChild(this.cadButton);this.wakeUpButton=new dijit.form.Button({label:this.texts.wakeUpButton,disabled:!0,
onClick:this.wakeUp.bind(this)});this.toolbar.addChild(this.wakeUpButton);this.mountButton=new dijit.form.Button({label:this.texts.mountButton,disabled:!0,onClick:this.mountISO.bind(this)});this.toolbar.addChild(this.mountButton);this.addChild(this.toolbar);this.addChild(this.vncCP);this.inherited(arguments);setTimeout(this.connect.bind(this),0)},sendCAD:function(){this.ws.send((new Uint8Array([4,1,0,0,0,0,255,227])).buffer);this.ws.send((new Uint8Array([4,1,0,0,0,0,255,233])).buffer);this.ws.send((new Uint8Array([4,
1,0,0,0,0,255,255])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,227])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,233])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,255])).buffer)},wakeUp:function(){},mountISO:function(){},stopEvent:function(a){dojo.stopEvent(a);a.preventDefault();a.stopPropagation();return!1},visibilityChange:function(a){a?this.connect():this.disconnect()},disconnect:function(){if("disconnected"!=this.state){this.canvas.style.width="0px";for(this.canvas.style.height=
"0px";0<this._events.length;)dojo.disconnect(this._events.pop());this.ws.onopen=null;this.ws.onmessage=null;this.ws.onerror=null;this.ws.close();this.ws=null;this.state="disconnected"}},connect:function(){this.state="connecting";this.ws=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-VC|"+this.host+"|"+this.port);this.ws.binaryType="arraybuffer";this.ws.onopen=this.wsOpenListener.bind(this);this.ws.onmessage=
this.wsMessageListener.bind(this);this.ws.onerror=this.wsErrorListener.bind(this);this.canvas=dojo.byId(this.id+"_vnc");this.container=dojo.byId(this.id+"_container");this.context=this.canvas.getContext("2d");this._events.push(dojo.connect(this.canvas,"onmousemove",this.mouseMoveListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmousedown",this.mouseDownListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseup",this.mouseUpListener.bind(this)));this._events.push(dojo.connect(this.canvas,
"onclick",this.mouseClickListener.bind(this)));this._events.push(dojo.connect(this.canvas,"oncontextmenu",this.contextMenuListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseenter",this.mouseEnter.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseout",this.mouseOut.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeydown",this.keyDownListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeyup",this.keyUpListener.bind(this)));this._events.push(dojo.connect(this.canvas,
"onkeypress",this.keyPressListener.bind(this)));this._events.push(dojo.connect(this,"resize",this.applyScale.bind(this)));this.intervalId&&window.clearInterval(this.intervalId);this.intervalId=window.setInterval(this.sendMouseCoords.bind(this),40);this.ws.onclose=this.wsCloseListener.bind(this)},decodeMessage2String:function(a){a=new Uint8Array(a);for(var b="",d=0;d<a.length;d++)b+=String.fromCharCode(a[d]);return b},encodeString2Message:function(a){for(var b=new Uint8Array(a.length),d=0;d<a.length;d++)b[d]=
a.charCodeAt(d);return b.buffer},byteArray2String:function(a,b,d){d=d||a.length;var e="";for(b=b||0;b<d;b++)e+=String.fromCharCode(a[b]);return e},applyScale:function(){var a=dojo.position(this.container);a.w-=2;a.h-=2;if(a.w<this.serverSettings.width||a.h<this.serverSettings.height)this.scale=this.serverSettings.width/this.serverSettings.height>a.w/a.h?a.w/this.serverSettings.width:a.h/this.serverSettings.height;this.canvas.style.width=Math.floor(this.serverSettings.width*this.scale)+"px";this.canvas.style.height=
Math.floor(this.serverSettings.height*this.scale)+"px"},wsMessageListener:function(a){switch(this.state){case "init":a=this.decodeMessage2String(a.data);switch(a){case "RFB 003.008\n":this.vncVersion=3.8;this.state="security";this.ws.send(this.encodeString2Message(a));break;default:console.error('Version "'+a+'" not supported'),this.ws.close()}break;case "security":var b=new Uint8Array(a.data);0==b[0]&&(console.error("Got no valid security type"),this.ws.close());for(a=0;a<b[0];a++)1==b[a]&&(this.securityType=
b[a]);switch(this.securityType){case 0:console.error("Got no valid security type");this.ws.close();break;case 1:this.state="securityResult";this.ws.send((new Uint8Array([this.securityType])).buffer);break;case 2:console.error("VNC Authentication not supported"),this.ws.close()}break;case "securityResult":a=new Uint8Array(a.data);0!=(a[0]||a[1]||a[2]||a[3])?(console.error("Security handshake failed"),this.ws.close()):(this.state="serverInit",this.ws.send((new Uint8Array([1])).buffer));break;case "serverInit":a=
new Uint8Array(a.data);this.serverSettings.width=256*a[0]+a[1];this.serverSettings.height=256*a[2]+a[3];this.applyScale();this.serverSettings.bitPerPixel=a[4];32!=this.serverSettings.bitPerPixel&&console.error("Only True Color supported");this.serverSettings.depth=a[5];this.serverSettings.bigEndianFlag=a[6];this.serverSettings.trueColorFlag=a[7];this.serverSettings.redMax=256*a[8]+a[9];this.serverSettings.greenMax=256*a[10]+a[11];this.serverSettings.blueMax=256*a[12]+a[13];this.serverSettings.redShift=
a[14];this.serverSettings.greenShift=a[15];this.serverSettings.blueShift=a[16];this.serverSettings.name=this.byteArray2String(a,24+256*(256*(256*a[20]+a[21])+a[22])+a[23]);this.state="connected";this.tileImage=this.context.createImageData(16,16);this.canvas.width=this.serverSettings.width;this.canvas.height=this.serverSettings.height;this.ws.send((new Uint8Array([0,0,0,0,32,24,0,1,0,255,0,255,0,255,16,8,0,0,0,0])).buffer);this.ws.send((new Uint8Array([2,0,0,3,0,0,0,1,0,0,0,5,0,0,0,0])).buffer);this.ws.send((new Uint8Array([3,
0,0,0,0,0,a[0],a[1],a[2],a[3]])).buffer);break;case "connected":b=new Uint8Array(a.data);switch(b[0]){case 0:var d=256*b[2]+b[3];if(0==d)break;var e=4;for(a=0;a<d;a++){var f=256*b[e]+b[e+1],k=256*b[e+2]+b[e+3],l=256*b[e+4]+b[e+5],m=256*b[e+6]+b[e+7],e=e+8,n=b[e+3],e=e+4;switch(n){case 0:e=this.handleRaw(b,f,k,l,m,e);break;case 1:e=this.handleCopyrect(b,f,k,l,m,e);break;case 5:e=this.handleHextile(b,f,k,l,m,e);break;case 252:e=this.handleTightPng(b,f,k,l,m,e);break;default:console.error("Unknown Encoding "+
b[12]+"-"+b[13]+"-"+b[14]+"-"+b[15])}}break;default:console.warn("Unknown Server Message "+b[0])}break;case "disconnected":break;default:console.error("State "+this.state+" not implemented")}},reconnect:function(){console.log("RECONNECT!!!");this.disconnect()},_getMouseXY:function(a){for(var b=this.canvas,d=[0,0];b.offsetParent;)d[0]=d[0]+b.offsetLeft-b.scrollLeft,d[1]=d[1]+b.offsetTop-b.scrollTop,b=b.offsetParent;d[0]=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-d[0];d[1]=
a.clientY+document.body.scrollTop+document.documentElement.scrollTop-d[1];d[0]/=this.scale;d[1]/=this.scale;return d},sendMouseCoords:function(){this.mouseCoords&&(this.ws.send((new Uint8Array([5,this.mouseButtonState,this.mouseCoords[0]>>8,this.mouseCoords[0]&255,this.mouseCoords[1]>>8,this.mouseCoords[1]&255])).buffer),this.mouseCoords=null)},mouseEnter:function(a){this.canvas.focus();dojo.addClass(this.canvas,"firmosVNCActive");dojo.removeClass(this.canvas,"firmosVNCInactive");this.isActive=!0},
mouseOut:function(a){dojo.addClass(this.canvas,"firmosVNCInactive");dojo.removeClass(this.canvas,"firmosVNCActive");this.isActive=!1},mouseMoveListener:function(a){this.isActive||this.mouseEnter(a);this.mouseCoords=this._getMouseXY(a)},mouseDownListener:function(a){this.mouseButtonState|=1<<a.button;a=this._getMouseXY(a);this.ws.send((new Uint8Array([5,this.mouseButtonState,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.mouseCoords=null},mouseUpListener:function(a){this.mouseButtonState^=1<<a.button;
a=this._getMouseXY(a);this.ws.send((new Uint8Array([5,this.mouseButtonState,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.mouseCoords=null},mouseClickListener:function(a){return!1},contextMenuListener:function(a){return!1},getSpecialKeyCode:function(a){switch(a.keyCode){case 8:return 65288;case 9:return 65289;case 13:return 65293;case 27:return 65307;case 45:return 65379;case 46:return 65535;case 36:return 65360;case 35:return 65367;case 33:return 65365;case 34:return 65366;case 37:return 65361;
case 38:return 65362;case 39:return 65363;case 40:return 65364;case 112:return 65470;case 113:return 65471;case 114:return 65472;case 115:return 65473;case 116:return 65474;case 117:return 65475;case 118:return 65476;case 119:return 65477;case 120:return 65478;case 121:return 65479;case 122:return 65480;case 123:return 65481;case 16:return 65505;case 17:return 65507;case 18:return 65406}return 0},keyDownListener:function(a){if(this.isActive){var b=this.getSpecialKeyCode(a);0!=b&&(this.stopEvent(a),
this.ws.send((new Uint8Array([4,1,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},keyUpListener:function(a){if(this.isActive){var b=this.getSpecialKeyCode(a);b&&(this.stopEvent(a),this.ws.send((new Uint8Array([4,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},keyPressListener:function(a){if(this.isActive)return 0!=a.which&&0!=a.charCode&&(this.stopEvent(a),a=0<a.charCode?[a.charCode>>24&255,a.charCode>>16&255,a.charCode>>8&255,a.charCode&255]:[a.which>>24&255,a.which>>
16&255,a.which>>8&255,a.which&255],this.ws.send((new Uint8Array([4,1,0,0,a[0],a[1],a[2],a[3],4,0,0,0,a[0],a[1],a[2],a[3]])).buffer)),!1},handleCopyrect:function(a,b,d,e,f,k){var l=256*a[k]+a[k+1];k+=2;a=256*a[k]+a[k+1];k+=2;this.context.drawImage(this.canvas,l,a,e,f,b,d,e,f);return k},handleRaw:function(a,b,d,e,f,k){for(var l=this.context.createImageData(e,f),m,n,p=0;p<e*f;p++)m=4*p,n=m+k,l.data[m]=a[n+2],l.data[m+1]=a[n+1],l.data[m+2]=a[n],l.data[m+3]=255;this.context.putImageData(l,b,d);return n+
4},handleHextile:function(a,b,d,e,f,k){for(var l=Math.ceil(e/16),m=Math.ceil(f/16),n=[0,0,0,255],p=[0,0,0,255],q=[0,0,0,255],r,s=0;s<m;s++)for(var t=0;t<l;t++){r=a[k];k++;var F=16,q=16;s==m-1&&(q=16-(16*m-f));t==l-1&&(F=16-(16*l-e));var H=F*q;if(0==r)this.context.fillStyle="rgb("+n[2]+","+n[1]+","+n[0]+")",this.context.fillRect(b+16*t,d+16*s,F,q);else if(r&1){var S,K;r=256==H?this.tileImage:this.context.createImageData(F,q);for(F=0;F<H;F++)S=4*F,K=S+k,r.data[S]=a[K+2],r.data[S+1]=a[K+1],r.data[S+
2]=a[K],r.data[S+3]=255;this.context.putImageData(r,b+16*t,d+16*s);k=K+4}else if(r&2&&(n=[a[k],a[k+1],a[k+2],a[k+3]],k+=4),r&4&&(p=[a[k],a[k+1],a[k+2],a[k+3]],k+=4),H=b+16*t,S=d+16*s,this.context.fillStyle="rgb("+n[2]+","+n[1]+","+n[0]+")",this.context.fillRect(H,S,F,q),r&8){var x=a[k];k++;for(F=0;F<x;F++){r&16?(q=[a[k],a[k+1],a[k+2],a[k+3]],k+=4):q=p;var L=a[k]>>4,I=a[k]&15;k++;var T=(a[k]>>4)+1,N=(a[k]&15)+1;k++;this.context.fillStyle="rgb("+q[2]+","+q[1]+","+q[0]+")";this.context.fillRect(H+L,
S+I,T,N)}}}return k},wsErrorListener:function(a){console.error("wsError "+JSON.stringify(a));this.reconnect()},wsCloseListener:function(){this.state="disconnected";this.intervalId&&window.clearInterval(this.intervalId)},wsOpenListener:function(){this.state="init"}})});window.CodeMirror=function(){function q(a,b){if(!(this instanceof q))return new q(a,b);this.options=b=b||{};for(var c in Je)!b.hasOwnProperty(c)&&Je.hasOwnProperty(c)&&(b[c]=Je[c]);n(b);c=this.display=t(a,"string"==typeof b.value?0:b.value.first);c.wrapper.CodeMirror=this;d(this);b.autofocus&&!cf&&ea(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Cd};m(this);b.lineWrapping&&(this.display.wrapper.className+=
" CodeMirror-wrap");var e=b.value;"string"==typeof e&&(e=new Hb(b.value,b.mode));na(this,Te)(this,e);Ub&&setTimeout(tc(ra,this,!0),20);ib(this);var f;try{f=document.activeElement==c.input}catch(g){}f||b.autofocus&&!cf?setTimeout(tc(Oa,this),20):Za(this);na(this,function(){for(var a in ld)if(ld.propertyIsEnumerable(a))ld[a](this,b[a],gf);for(a=0;a<Ke.length;++a)Ke[a](this)})()}function t(a,b){var c={},d=c.input=sa("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");
Mb?d.style.width="1000px":d.setAttribute("wrap","off");he&&(d.style.border="1px solid black");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck","false");c.inputDiv=sa("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");c.scrollbarH=sa("div",[sa("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");c.scrollbarV=sa("div",[sa("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");c.scrollbarFiller=sa("div",null,"CodeMirror-scrollbar-filler");
c.gutterFiller=sa("div",null,"CodeMirror-gutter-filler");c.lineDiv=sa("div",null,"CodeMirror-code");c.selectionDiv=sa("div",null,null,"position: relative; z-index: 1");c.cursor=sa("div","\u00a0","CodeMirror-cursor");c.otherCursor=sa("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");c.measure=sa("div",null,"CodeMirror-measure");c.lineSpace=sa("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none");c.mover=sa("div",[sa("div",[c.lineSpace],
"CodeMirror-lines")],null,"position: relative");c.sizer=sa("div",[c.mover],"CodeMirror-sizer");c.heightForcer=sa("div",null,null,"position: absolute; height: "+$b+"px; width: 1px;");c.gutters=sa("div",null,"CodeMirror-gutters");c.lineGutter=null;c.scroller=sa("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll");c.scroller.setAttribute("tabIndex","-1");c.wrapper=sa("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror");Kd&&(c.gutters.style.zIndex=
-1,c.scroller.style.paddingRight=0);a.appendChild?a.appendChild(c.wrapper):a(c.wrapper);he&&(d.style.width="0px");Mb||(c.scroller.draggable=!0);bf?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):Kd&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px");c.viewOffset=c.lastSizeC=0;c.showingFrom=c.showingTo=b;c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null;c.prevInput="";c.alignWidgets=!1;c.pollingFast=!1;c.poll=new Cd;c.cachedCharWidth=c.cachedTextHeight=null;
c.measureLineCache=[];c.measureLineCachePos=0;c.inaccurateSelection=!1;c.maxLine=null;c.maxLineLength=0;c.maxLineChanged=!1;c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null;return c}function r(a){a.doc.mode=q.getMode(a.options,a.doc.modeOption);s(a)}function s(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;K(a,100);a.state.modeGen++;a.curOp&&Fa(a)}function l(a){var b=ia(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/
ka(a.display)-3);return function(e){return Ic(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function b(a){var b=a.doc,c=l(a);b.iter(function(a){var b=c(a);b!=a.height&&ec(a,b)})}function p(a){var b=Fc[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function m(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");R(a)}function f(a){d(a);
Fa(a);setTimeout(function(){g(a)},20)}function d(a){var b=a.display.gutters,c=a.options.gutters;gc(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(sa("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function k(a,b){if(0==b.height)return 0;for(var c=b.text.length,d,e=b;d=Bc(e,!0);)d=d.find(),e=va(a,d.from.line),c+=d.from.ch-d.to.ch;for(e=b;d=Da(e);)d=d.find(),c-=e.text.length-
d.from.ch,e=va(a,d.to.line),c+=e.text.length-d.to.ch;return c}function e(a){var b=a.display,c=a.doc;b.maxLine=va(c,c.first);b.maxLineLength=k(c,b.maxLine);b.maxLineChanged=!0;c.iter(function(a){var d=k(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function n(a){var b=nc(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function a(a){var b=a.display,c=
a.doc.height+(b.mover.offsetHeight-b.lineSpace.offsetHeight);b.sizer.style.minHeight=b.heightForcer.style.top=c+"px";b.gutters.style.height=Math.max(c,b.scroller.clientHeight-$b)+"px";var c=Math.max(c,b.scroller.scrollHeight),d=b.scroller.scrollWidth>b.scroller.clientWidth+1,e=c>b.scroller.clientHeight+1;e?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=d?Hd(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=c-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):(b.scrollbarV.style.display=
"",b.scrollbarV.firstChild.style.height="0");d?(b.scrollbarH.style.display="block",b.scrollbarH.style.right=e?Hd(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):(b.scrollbarH.style.display="",b.scrollbarH.firstChild.style.width="0");d&&e?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=Hd(b.measure)+"px"):b.scrollbarFiller.style.display="";d&&a.options.coverGutterNextToScrollbar&&
a.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=Hd(b.measure)+"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="";mg&&0===Hd(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=lg?"18px":"12px",b.scrollbarV.style.pointerEvents=b.scrollbarH.style.pointerEvents="none")}function c(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top);d=Math.floor(d-
a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:Mc(b,d),to:Mc(b,a)}}function g(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=z(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,k=f.alignable;g<k.length;++g)k[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function v(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=u(a.options,b.first+
b.size-1);a=a.display;if(b.length!=a.lineNumChars){var c=a.measure.appendChild(sa("div",[sa("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth,c=c.offsetWidth-d;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-c);a.lineNumWidth=a.lineNumInnerWidth+c;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";return!0}return!1}function u(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}
function z(a){return hb(a.scroller).left-hb(a.sizer).left}function A(b,d,e,f){for(var g=b.display.showingFrom,k=b.display.showingTo,l,m=c(b.display,b.doc,e),n=!0;;n=!1){var p=b.display.scroller.clientWidth;if(!y(b,d,m,f))break;l=!0;d=[];F(b);a(b);if(n&&b.options.lineWrapping&&p!=b.display.scroller.clientWidth)f=!0;else if(f=!1,e&&(e=Math.min(b.display.scroller.scrollHeight-b.display.scroller.clientHeight,"number"==typeof e?e:e.top)),m=c(b.display,b.doc,e),m.from>=b.display.showingFrom&&m.to<=b.display.showingTo)break}l&&
(Tb(b,"update",b),b.display.showingFrom==g&&b.display.showingTo==k||Tb(b,"viewportChange",b,b.display.showingFrom,b.display.showingTo));return l}function y(a,b,c,d){var e=a.display,f=a.doc;if(!e.wrapper.offsetWidth)e.showingFrom=e.showingTo=f.first,e.viewOffset=0;else if(d||!(0==b.length&&c.from>e.showingFrom&&c.to<e.showingTo)){v(a)&&(b=[{from:f.first,to:f.first+f.size}]);var g=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?g:"0";g=Infinity;if(a.options.lineNumbers)for(var k=
0;k<b.length;++k)b[k].diff&&b[k].from<g&&(g=b[k].from);var k=f.first+f.size,l=Math.max(c.from-a.options.viewportMargin,f.first);c=Math.min(k,c.to+a.options.viewportMargin);e.showingFrom<l&&20>l-e.showingFrom&&(l=Math.max(f.first,e.showingFrom));e.showingTo>c&&20>e.showingTo-c&&(c=Math.min(k,e.showingTo));if(jd)for(l=fc(qc(f,va(f,l)));c<k&&Ic(f,va(f,c));)++c;var m=[{from:Math.max(e.showingFrom,f.first),to:Math.min(e.showingTo,k)}],m=m[0].from>=m[0].to?[]:B(m,b);if(jd)for(k=0;k<m.length;++k){b=m[k];
for(var n;n=Da(va(f,b.to-1));)if(n=n.find().from.line,n>b.from)b.to=n;else{m.splice(k--,1);break}}for(k=f=0;k<m.length;++k)b=m[k],b.from<l&&(b.from=l),b.to>c&&(b.to=c),b.from>=b.to?m.splice(k--,1):f+=b.to-b.from;if(d||f!=c-l||l!=e.showingFrom||c!=e.showingTo){m.sort(function(a,b){return a.from-b.from});try{var p=document.activeElement}catch(q){}f<0.7*(c-l)&&(e.lineDiv.style.display="none");J(a,l,c,m,g);e.lineDiv.style.display="";p&&document.activeElement!=p&&p.offsetHeight&&p.focus();if(l!=e.showingFrom||
c!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight)e.lastSizeC=e.wrapper.clientHeight,K(a,400);e.showingFrom=l;e.showingTo=c;e.gutters.style.height="";C(a);D(a);return!0}D(a)}}function C(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=a.lineDiv.firstChild,d;c;c=c.nextSibling)if(c.lineObj){if(Kd){var e=c.offsetTop+c.offsetHeight;d=e-b;b=e}else d=hb(c),d=d.bottom-d.top;e=c.lineObj.height-d;2>d&&(d=ia(a));if(0.001<e||-0.001>e)if(ec(c.lineObj,d),d=c.lineObj.widgets)for(e=0;e<d.length;++e)d[e].height=
d[e].node.offsetHeight}}function D(a){var b=a.display.viewOffset=Ad(a,va(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function B(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||0,k=0,l=a.length;k<l;++k){var m=a[k];e.to<=m.from&&e.diff?f.push({from:m.from+g,to:m.to+g}):e.to<=m.from||e.from>=m.to?f.push(m):(e.from>m.from&&f.push({from:m.from,to:e.from}),e.to<m.to&&f.push({from:e.to+g,to:m.to+g}))}a=f}return a}function G(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,
f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:z(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function J(a,b,c,d,e){function f(b){var c=b.nextSibling;Mb&&Xc&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b);return c}var g=G(a),k=a.display,l=a.options.lineNumbers;d.length||Mb&&a.display.currentWheelTarget||gc(k.lineDiv);
var m=k.lineDiv,n=m.firstChild,p=d.shift(),q=b;for(a.doc.iter(b,c,function(b){p&&p.to==q&&(p=d.shift());if(Ic(a.doc,b)){if(0!=b.height&&ec(b,0),b.widgets&&n&&n.previousSibling)for(var c=0;c<b.widgets.length;++c){var k=b.widgets[c];if(k.showIfHidden){var r=n.previousSibling;if(/pre/i.test(r.nodeName)){var X=sa("div",null,null,"position: relative");r.parentNode.replaceChild(X,r);X.appendChild(r);r=X}X=r.appendChild(sa("div",[k.node],"CodeMirror-linewidget"));k.handleMouseEvents||(X.ignoreEvents=!0);
M(k,X,r,g)}}}else if(p&&p.from<=q&&p.to>q){for(;n.lineObj!=b;)n=f(n);l&&e<=q&&n.lineNumber&&Vc(n.lineNumber,u(a.options,q));n=n.nextSibling}else{if(b.widgets)for(var X=0,s=n;s&&20>X;++X,s=s.nextSibling)if(s.lineObj==b&&/div/i.test(s.nodeName)){c=s;break}var X=a,t=q,v=c,Ib=Vd(X,b),s=Ib.pre,x=b.gutterMarkers,y=X.display,z=Ib.bgClass?Ib.bgClass+" "+(b.bgClass||""):b.bgClass;if(X.options.lineNumbers||x||z||b.wrapClass||b.widgets){if(v){v.alignable=null;for(var A=!0,B=0,C=null,D=v.firstChild,F;D;D=F)if(F=
D.nextSibling,/\bCodeMirror-linewidget\b/.test(D.className)){for(Ib=0;Ib<b.widgets.length;++Ib){var G=b.widgets[Ib];if(G.node==D.firstChild){G.above||C||(C=D);M(G,D,v,g);++B;break}}if(Ib==b.widgets.length){A=!1;break}}else v.removeChild(D);v.insertBefore(s,C);A&&B==b.widgets.length&&(k=v,v.className=b.wrapClass||"")}k||(k=sa("div",null,b.wrapClass,"position: relative"),k.appendChild(s));z&&k.insertBefore(sa("div",null,z+" CodeMirror-linebackground"),k.firstChild);if(X.options.lineNumbers||x)if(r=
k.insertBefore(sa("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(X.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px"),s),X.options.fixedGutter&&(k.alignable||(k.alignable=[])).push(r),!X.options.lineNumbers||x&&x["CodeMirror-linenumbers"]||(k.lineNumber=r.appendChild(sa("div",u(X.options,t),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+y.lineNumInnerWidth+"px"))),x)for(Ib=0;Ib<X.options.gutters.length;++Ib)G=
X.options.gutters[Ib],(t=x.hasOwnProperty(G)&&x[G])&&r.appendChild(sa("div",[t],"CodeMirror-gutter-elt","left: "+g.gutterLeft[G]+"px; width: "+g.gutterWidth[G]+"px"));Kd&&(k.style.zIndex=2);if(b.widgets&&k!=v)for(Ib=0,v=b.widgets;Ib<v.length;++Ib)G=v[Ib],x=sa("div",[G.node],"CodeMirror-linewidget"),G.handleMouseEvents||(x.ignoreEvents=!0),M(G,x,k,g),G.above?k.insertBefore(x,X.options.lineNumbers&&0!=b.height?r:s):k.appendChild(x),Tb(G,"redraw")}else k=s;if(k!=c)m.insertBefore(k,n);else{for(;n!=c;)n=
f(n);n=n.nextSibling}k.lineObj=b}++q});n;)n=f(n)}function M(a,b,c,d){a.noHScroll&&((c.alignable||(c.alignable=[])).push(b),c=d.wrapperWidth,b.style.left=d.fixedPos+"px",a.coverGutter||(c-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=c+"px");a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function F(a){var b=a.display,c=Ea(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting){var d=
a.display,e=ma(a,a.doc.sel.head,"div");d.cursor.style.left=e.left+"px";d.cursor.style.top=e.top+"px";d.cursor.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px";d.cursor.style.display="";e.other?(d.otherCursor.style.display="",d.otherCursor.style.left=e.other.left+"px",d.otherCursor.style.top=e.other.top+"px",d.otherCursor.style.height=0.85*(e.other.bottom-e.other.top)+"px"):d.otherCursor.style.display="none"}else b.cursor.style.display=b.otherCursor.style.display="none";c?b.selectionDiv.style.display=
"none":H(a);a.options.moveInputWithCursor&&(a=ma(a,a.doc.sel.head,"div"),c=hb(b.wrapper),d=hb(b.lineDiv),b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+d.top-c.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+d.left-c.left))+"px")}function H(a){function b(a,c,d,e){0>c&&(c=0);g.appendChild(sa("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+c+"px; width: "+(null==d?k-a:d)+"px; height: "+(e-c)+"px"))}function c(d,
f,g){var m=va(e,d),n=m.text.length,p,q;hg(rc(m),f||0,null==g?n:g,function(c,e,r){var s=aa(a,ha(d,c),"div",m,"left"),t,u;c==e?(t=s,r=u=s.left):(t=aa(a,ha(d,e-1),"div",m,"right"),"rtl"==r&&(r=s,s=t,t=r),r=s.left,u=t.right);null==f&&0==c&&(r=l);3<t.top-s.top&&(b(r,s.top,null,s.bottom),r=l,s.bottom<t.top&&b(r,s.bottom,null,t.top));null==g&&e==n&&(u=k);if(!p||s.top<p.top||s.top==p.top&&s.left<p.left)p=s;if(!q||t.bottom>q.bottom||t.bottom==q.bottom&&t.right>q.right)q=t;r<l+1&&(r=l);b(r,t.top,u-r,t.bottom)});
return{start:p,end:q}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),k=d.lineSpace.offsetWidth,l=uc(a.display.measure,sa("pre",null,null,"text-align: left")).appendChild(sa("span","x")).offsetLeft;if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var m=va(e,f.from.line),n=va(e,f.to.line),n=qc(e,m)==qc(e,n),m=c(f.from.line,f.from.ch,n?m.text.length:null).end,f=c(f.to.line,n?0:null,f.to.ch).start;n&&(m.top<f.top-2?(b(m.right,m.top,null,m.bottom),b(l,f.top,f.left,
f.bottom)):b(m.right,m.top,f.left-m.right,m.bottom));m.bottom<f.top&&b(l,m.bottom,null,f.top)}uc(d.selectionDiv,g);d.selectionDiv.style.display=""}function S(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="";0<a.options.cursorBlinkRate&&(b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate))}}function K(a,b){a.doc.mode.startState&&a.doc.frontier<
a.display.showingTo&&a.state.highlight.set(b,tc(x,a))}function x(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.showingTo)){var c=+new Date+a.options.workTime,d=cc(b.mode,I(a,b.frontier)),e=[],f;b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var k=g.styles;g.styles=Kc(a,g,d,!0);for(var l=!k||k.length!=g.styles.length,m=0;!l&&m<k.length;++m)l=k[m]!=g.styles[m];l&&(f&&f.end==b.frontier?f.end++:
e.push(f={start:b.frontier,end:b.frontier+1}));g.stateAfter=cc(b.mode,d)}else fd(a,g.text,d),g.stateAfter=0==b.frontier%5?cc(b.mode,d):null;++b.frontier;if(+new Date>c)return K(a,a.options.workDelay),!0});e.length&&na(a,function(){for(var a=0;a<e.length;++a)Fa(this,e[a].start,e[a].end)})()}}function L(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var k=va(f,b-1);if(k.stateAfter&&(!c||b<=f.frontier))return b;k=Ec(k.text,null,a.options.tabSize);
if(null==e||d>k)e=b-1,d=k}return e}function I(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=L(a,b,c),g=f>d.first&&va(d,f-1).stateAfter,g=g?cc(d.mode,g):dc(d.mode);d.iter(f,b,function(c){fd(a,c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.showingFrom&&f<e.showingTo?cc(d.mode,g):null;++f});c&&(d.frontier=f);return g}function T(a,b,c,d,e){var f=-1;d=d||Z(a,b);if(d.crude)return c=d.left+c*d.width,{left:c,right:c+d.width,top:d.top,bottom:d.bottom};for(a=c;;a+=f){var g=d[a];if(g)break;
0>f&&0==a&&(f=1)}e=a>c?"left":a<c?"right":e;"left"==e&&g.leftSide?g=g.leftSide:"right"==e&&g.rightSide&&(g=g.rightSide);return{left:a<c?g.right:g.left,right:a>c?g.left:g.right,top:g.top,bottom:g.bottom}}function N(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.wrapClass)return e}}function W(a,b){var c=N(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function Z(a,
b){var c=N(a,b);if(c)return c.measure;var c=V(a,b),d=a.display.measureLineCache,e={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.wrapClass};16==d.length?d[++a.display.measureLineCachePos%16]=e:d.push(e);return c}function V(a,b){function c(a){var b=a.top-r.top,d=a.bottom-r.top;d>t&&(d=t);0>b&&(b=0);for(var e=s.length-2;0<=e;e-=2){var f=s[e],g=s[e+1];if(!(f>d||g<b)&&(f<=b&&g>=d||b<=f&&d>=g||Math.min(d,g)-Math.max(b,f)>=d-b>>1)){s[e]=Math.min(b,
f);s[e+1]=Math.max(d,g);break}}0>e&&(e=s.length,s.push(b,d));return{left:a.left-r.left,right:a.right-r.left,top:e,bottom:null}}function d(a){a.bottom=s[a.top+1];a.top=s[a.top]}if(!a.options.lineWrapping&&b.text.length>=a.options.crudeMeasuringFrom)return Q(a,b);var e=a.display,f=vf(b.text.length),g=Vd(a,b,f,!0).pre;if(Ub&&!Kd&&!a.options.lineWrapping&&100<g.childNodes.length){for(var k=document.createDocumentFragment(),l=g.childNodes.length,m=0,n=Math.ceil(l/10);m<n;++m){for(var p=sa("div",null,null,
"display: inline-block"),q=0;10>q&&l;++q)p.appendChild(g.firstChild),--l;k.appendChild(p)}g.appendChild(k)}uc(e.measure,g);var r=hb(e.lineDiv),s=[],k=vf(b.text.length),t=g.offsetHeight;Vb&&e.measure.first!=g&&uc(e.measure,g);for(m=0;m<f.length;++m)if(e=f[m])g=e,l=null,/\bCodeMirror-widget\b/.test(e.className)&&e.getClientRects&&(1==e.firstChild.nodeType&&(g=e.firstChild),n=g.getClientRects(),1<n.length&&(l=k[m]=c(n[0]),l.rightSide=c(n[n.length-1]))),l||(l=k[m]=c(hb(g))),e.measureRight&&(l.right=hb(e.measureRight).left-
r.left),e.leftSide&&(l.leftSide=c(hb(e.leftSide)));gc(a.display.measure);for(m=0;m<k.length;++m)if(e=k[m])d(e),e.leftSide&&d(e.leftSide),e.rightSide&&d(e.rightSide);return k}function Q(a,b){var c=new Oc(b.text.slice(0,100),null);b.textClass&&(c.textClass=b.textClass);var d=V(a,c),e=T(a,c,0,d,"left"),c=T(a,c,99,d,"right");return{crude:!0,top:e.top,left:e.left,bottom:e.bottom,width:(c.right-e.left)/100}}function R(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0;a.display.cachedCharWidth=
a.display.cachedTextHeight=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function O(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=yd(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Ad(a,b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=hb(a.display.lineSpace),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),
d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function ca(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=hb(a.display.sizer),d+=c.left,b+=c.top);a=hb(a.display.lineSpace);return{left:d-a.left,top:b-a.top}}function aa(a,
b,c,d,e){d||(d=va(a.doc,b.line));return O(a,d,T(a,d,b.ch,null,e),c)}function ma(a,b,c,d,e){function f(b,g){var k=T(a,d,b,e,g?"right":"left");g?k.left=k.right:k.right=k.left;return O(a,d,k,c)}function g(a,b){var c=k[b],d=c.level%2;a==Ye(c)&&b&&c.level<k[b-1].level?(c=k[--b],a=Ze(c)-(c.level%2?0:1),d=!0):a==Ze(c)&&b<k.length-1&&c.level<k[b+1].level&&(c=k[++b],a=Ye(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||va(a.doc,b.line);e||(e=Z(a,d));var k=rc(d);b=b.ch;if(!k)return f(b);var l=
Fe(k,b),l=g(b,l);null!=me&&(l.other=g(b,me));return l}function da(a,b,c,d){a=new ha(a,b);a.xRel=d;c&&(a.outside=!0);return a}function qa(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return da(d.first,0,!0,-1);var e=Mc(d,c),f=d.first+d.size-1;if(e>f)return da(d.first+d.size-1,va(d,f).text.length,!0,1);for(0>b&&(b=0);;){var f=va(d,e),e=la(a,f,e,b,c),g=(f=Da(f))&&f.find();if(f&&(e.ch>g.from.ch||e.ch==g.from.ch&&0<e.xRel))e=g.to.line;else return e}}function la(a,b,c,d,e){function f(d){d=ma(a,ha(c,
d),"line",b,m);k=!0;if(g>d.bottom)return d.left-l;if(g<d.top)return d.left+l;k=!1;return d.left}var g=e-Ad(a,b),k=!1,l=2*a.display.wrapper.clientWidth,m=Z(a,b),n=rc(b),p=b.text.length;e=De(b);var q=Ee(b),r=f(e),s=k,t=f(q),u=k;if(d>t)return da(c,q,u,1);for(;;){if(n?q==e||q==He(b,e,1):1>=q-e){n=d<r||d-r<=t-d?e:q;for(d-=n==e?r:t;Gd(b.text.charAt(n));)++n;return da(c,n,n==e?s:u,0>d?-1:d?1:0)}var v=Math.ceil(p/2),x=e+v;if(n)for(var x=e,y=0;y<v;++y)x=He(b,x,1);y=f(x);if(y>d){q=x;t=y;if(u=k)t+=1E3;p=v}else e=
x,r=y,s=k,p-=v}}function ia(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==kd){kd=sa("pre");for(var b=0;49>b;++b)kd.appendChild(document.createTextNode("x")),kd.appendChild(sa("br"));kd.appendChild(document.createTextNode("x"))}uc(a.measure,kd);b=kd.offsetHeight/50;3<b&&(a.cachedTextHeight=b);gc(a.measure);return b||1}function ka(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=sa("span","x"),c=sa("pre",[b]);uc(a.measure,c);b=b.offsetWidth;2<b&&(a.cachedCharWidth=b);
return b||10}function Aa(a){a.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Bf};Qd++||(Pc=[])}function P(a){var b=a.curOp,c=a.doc,d=a.display;a.curOp=null;b.updateMaxLine&&e(a);if(d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var f;f=d.maxLine;var k=!1;if(f.markedSpans)for(var l=0;l<f.markedSpans;++l){var m=f.markedSpans[l];!m.collapsed||null!=m.to&&m.to!=f.text.length||(k=
!0)}(k=!k&&N(a,f))||f.text.length>=a.options.crudeMeasuringFrom?f=T(a,f,f.text.length,k&&k.measure,"right").right:(f=Vd(a,f,null,!0).pre,k=f.appendChild(Id(a.display.measure)),uc(a.display.measure,f),f=hb(k).right-hb(a.display.lineDiv).left);d.sizer.style.minWidth=Math.max(0,f+3+$b)+"px";d.maxLineChanged=!1;f=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);f<c.scrollLeft&&!b.updateScrollPos&&eb(a,Math.min(d.scroller.scrollLeft,f),!0)}var n,p;b.updateScrollPos?n=b.updateScrollPos:
b.selectionChanged&&d.scroller.clientHeight&&(n=ma(a,c.sel.head),n=Ja(a,n.left,n.top,n.left,n.bottom));if(b.changes.length||b.forceUpdate||n&&null!=n.scrollTop)p=A(a,b.changes,n&&n.scrollTop,b.forceUpdate),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop);!p&&b.selectionChanged&&F(a);b.updateScrollPos?(p=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,n.scrollTop)),n=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,n.scrollLeft)),
d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=p,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=n,g(a),b.scrollToPos&&bc(a,pa(a.doc,b.scrollToPos.from),pa(a.doc,b.scrollToPos.to),b.scrollToPos.margin)):n&&(d=bc(a,a.doc.sel.head,null,a.options.cursorScrollMargin),a.state.focused&&(n=a.display,p=hb(n.sizer),c=null,0>d.top+p.top?c=!0:d.bottom+p.top>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),null==c||ng||(d=sa("div","\u200b",null,"position: absolute; top: "+
(d.top-n.viewOffset)+"px; height: "+(d.bottom-d.top+$b)+"px; left: "+d.left+"px; width: 2px;"),a.display.lineSpace.appendChild(d),d.scrollIntoView(c),a.display.lineSpace.removeChild(d))));b.selectionChanged&&S(a);a.state.focused&&b.updateInput&&ra(a,b.userSelChange);c=b.maybeHiddenMarkers;d=b.maybeUnhiddenMarkers;if(c)for(n=0;n<c.length;++n)c[n].lines.length||pb(c[n],"hide");if(d)for(n=0;n<d.length;++n)d[n].lines.length&&pb(d[n],"unhide");var q;--Qd||(q=Pc,Pc=null);b.textChanged&&pb(a,"change",a,
b.textChanged);b.cursorActivity&&pb(a,"cursorActivity",a);if(q)for(n=0;n<q.length;++n)q[n]()}function na(a,b){return function(){var c=a||this,d=!c.curOp;d&&Aa(c);try{var e=b.apply(c,arguments)}finally{d&&P(c)}return e}}function Va(a){return function(){var b=this.cm&&!this.cm.curOp,c;b&&Aa(this.cm);try{c=a.apply(this,arguments)}finally{b&&P(this.cm)}return c}}function La(a,b){var c=!a.curOp,d;c&&Aa(a);try{d=b()}finally{c&&P(a)}return d}function Fa(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+
a.doc.size);a.curOp.changes.push({from:b,to:c,diff:d})}function Wa(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){db(a);a.state.focused&&Wa(a)})}function Na(a){function b(){db(a)||c?(a.display.pollingFast=!1,Wa(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function db(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||If(b)||Ia(a)||a.options.disableInput)return!1;a.state.pasteIncoming&&
a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var f=b.value;if(f==c&&Ea(e.from,e.to))return!1;if(Wc&&!Vb&&a.display.inputHasSelection===f)return ra(a,!0),!1;var g=!a.curOp;g&&Aa(a);e.shift=!1;for(var k=0,l=Math.min(c.length,f.length);k<l&&c.charCodeAt(k)==f.charCodeAt(k);)++k;var m=e.from,n=e.to,l=f.slice(k);k<c.length?m=ha(m.line,m.ch-(c.length-k)):a.state.overwrite&&Ea(m,n)&&!a.state.pasteIncoming&&(n=ha(n.line,Math.min(va(d,n.line).text.length,
n.ch+l.length)));c=a.curOp.updateInput;d={from:m,to:n,text:Zc(l),origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};Eb(a.doc,d,"end");a.curOp.updateInput=c;Tb(a,"inputRead",a,d);if(l&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&100>e.head.ch&&(c=a.getModeAt(e.head).electricChars))for(d=0;d<c.length;d++)if(-1<l.indexOf(c.charAt(d))){fb(a,e.head.line,"smart");break}1E3<f.length||-1<f.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=f;
g&&P(a);a.state.pasteIncoming=a.state.cutIncoming=!1;return!0}function ra(a,b){var c,d,e=a.doc;Ea(e.sel.from,e.sel.to)?b&&(a.display.prevInput=a.display.input.value="",Wc&&!Vb&&(a.display.inputHasSelection=null)):(a.display.prevInput="",d=(c=hf&&(100<e.sel.to.line-e.sel.from.line||1E3<(d=a.getSelection()).length))?"-":d||a.getSelection(),a.display.input.value=d,a.state.focused&&Dd(a.display.input),Wc&&!Vb&&(a.display.inputHasSelection=d));a.display.inaccurateSelection=c}function ea(a){"nocursor"==
a.options.readOnly||cf&&document.activeElement==a.display.input||a.display.input.focus()}function Ia(a){return a.options.readOnly||a.doc.cantEdit}function ib(a){function b(){a.state.focused&&setTimeout(tc(ea,a),0)}function c(){null==k&&(k=setTimeout(function(){k=null;g.cachedCharWidth=g.cachedTextHeight=Yc=null;R(a);La(a,tc(Fa,a))},100))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5E3):Zb(window,"resize",c)}function e(b){sc(a,b)||a.options.onDragEvent&&
a.options.onDragEvent(a,ce(b))||Bd(b)}function f(b){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Dd(g.input));"cut"==b.type&&(a.state.cutIncoming=!0)}var g=a.display;Ha(g.scroller,"mousedown",na(a,Y));Ub?Ha(g.scroller,"dblclick",na(a,function(b){if(!sc(a,b)){var c=oa(a,b);!c||xa(a,b,"gutterClick",!0,Tb)||ya(a.display,b)||(yb(b),b=ub(va(a.doc,c.line).text,c),Ra(a.doc,b.from,b.to))}})):Ha(g.scroller,"dblclick",function(b){sc(a,b)||yb(b)});Ha(g.lineSpace,
"selectstart",function(a){ya(g,a)||yb(a)});ef||Ha(g.scroller,"contextmenu",function(b){Ga(a,b)});Ha(g.scroller,"scroll",function(){g.scroller.clientHeight&&(jb(a,g.scroller.scrollTop),eb(a,g.scroller.scrollLeft,!0),pb(a,"scroll",a))});Ha(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&jb(a,g.scrollbarV.scrollTop)});Ha(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&eb(a,g.scrollbarH.scrollLeft)});Ha(g.scroller,"mousewheel",function(b){Ab(a,b)});Ha(g.scroller,"DOMMouseScroll",function(b){Ab(a,
b)});Ha(g.scrollbarH,"mousedown",b);Ha(g.scrollbarV,"mousedown",b);Ha(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0});var k;Ha(window,"resize",c);setTimeout(d,5E3);Ha(g.input,"keyup",na(a,function(b){sc(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,ce(b))||16!=b.keyCode||(a.doc.sel.shift=!1)}));Ha(g.input,"input",function(){Wc&&!Vb&&a.display.inputHasSelection&&(a.display.inputHasSelection=null);Na(a)});Ha(g.input,"keydown",na(a,kb));Ha(g.input,"keypress",na(a,qb));
Ha(g.input,"focus",tc(Oa,a));Ha(g.input,"blur",tc(Za,a));a.options.dragDrop&&(Ha(g.scroller,"dragstart",function(b){var c=a;if(Wc&&(!c.state.draggingText||100>+new Date-ie))Bd(b);else if(!sc(c,b)&&!ya(c.display,b)){var d=c.getSelection();b.dataTransfer.setData("Text",d);b.dataTransfer.setDragImage&&!af&&(d=sa("img",null,null,"position: fixed; left: 0; top: 0;"),d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Wb&&(d.width=d.height=1,c.display.wrapper.appendChild(d),
d._top=d.offsetTop),b.dataTransfer.setDragImage(d,0,0),Wb&&d.parentNode.removeChild(d))}}),Ha(g.scroller,"dragenter",e),Ha(g.scroller,"dragover",e),Ha(g.scroller,"drop",na(a,Ca)));Ha(g.scroller,"paste",function(b){ya(g,b)||(ea(a),Na(a))});Ha(g.input,"paste",function(){if(Mb&&!(a.state.fakedLastChar||200>new Date-a.state.lastMiddleDown)){var b=g.input.selectionStart,c=g.input.selectionEnd;g.input.value+="$";g.input.selectionStart=b;g.input.selectionEnd=c;a.state.fakedLastChar=!0}a.state.pasteIncoming=
!0;Na(a)});Ha(g.input,"cut",f);Ha(g.input,"copy",f);bf&&Ha(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur();ea(a)})}function ya(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function oa(a,b,c){var d=a.display;if(!c&&(c=b.target||b.srcElement,c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller||c==d.gutterFiller))return null;var e,
f,d=hb(d.lineSpace);try{e=b.clientX,f=b.clientY}catch(g){return null}return qa(a,e-d.left,f-d.top)}function Y(a){function b(a){if(!Ea(t,a))if(t=a,"single"==p)Ra(f.doc,pa(k,m),a);else if(r=pa(k,r),s=pa(k,s),"double"==p){var c=ub(va(k,a.line).text,a);Ka(a,r)?Ra(f.doc,c.from,s):Ra(f.doc,r,c.to)}else"triple"==p&&(Ka(a,r)?Ra(f.doc,s,pa(k,ha(a.line,0))):Ra(f.doc,r,pa(k,ha(a.line+1,0))))}function d(a){var e=++v,l=oa(f,a,!0);if(l)if(Ea(l,q)){var m=a.clientY<u.top?-20:a.clientY>u.bottom?20:0;m&&setTimeout(na(f,
function(){v==e&&(g.scroller.scrollTop+=m,d(a))}),50)}else{f.state.focused||Oa(f);q=l;b(l);var n=c(g,k);(l.line>=n.to||l.line<n.from)&&setTimeout(na(f,function(){v==e&&d(a)}),150)}}function e(a){v=Infinity;yb(a);ea(f);Zb(document,"mousemove",x);Zb(document,"mouseup",y)}if(!sc(this,a)){var f=this,g=f.display,k=f.doc,l=k.sel;l.shift=a.shiftKey;if(ya(g,a))Mb||(g.scroller.draggable=!1,setTimeout(function(){g.scroller.draggable=!0},100));else if(!xa(f,a,"gutterClick",!0,Tb)){var m=oa(f,a);switch(We(a)){case 3:ef&&
Ga.call(f,f,a);return;case 2:Mb&&(f.state.lastMiddleDown=+new Date);m&&Ra(f.doc,m);setTimeout(tc(ea,f),20);yb(a);return}if(m){f.state.focused||Oa(f);var n=+new Date,p="single";Md&&Md.time>n-400&&Ea(Md.pos,m)?(p="triple",yb(a),setTimeout(tc(ea,f),20),Ua(f,m.line)):Ld&&Ld.time>n-400&&Ea(Ld.pos,m)?(p="double",Md={time:n,pos:m},yb(a),n=ub(va(k,m.line).text,m),Ra(f.doc,n.from,n.to)):Ld={time:n,pos:m};var q=m;if(!f.options.dragDrop||!Hf||Ia(f)||Ea(l.from,l.to)||Ka(m,l.from)||Ka(l.to,m)||"single"!=p){yb(a);
"single"==p&&Ra(f.doc,pa(k,m));var r=l.from,s=l.to,t=m,u=hb(g.wrapper),v=0,x=na(f,function(a){Ub||We(a)?d(a):e(a)}),y=na(f,e);Ha(document,"mousemove",x);Ha(document,"mouseup",y)}else{var z=na(f,function(b){Mb&&(g.scroller.draggable=!1);f.state.draggingText=!1;Zb(document,"mouseup",z);Zb(g.scroller,"drop",z);10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(yb(b),Ra(f.doc,m),ea(f),Ub&&!Vb&&setTimeout(function(){document.body.focus();ea(f)},20))});Mb&&(g.scroller.draggable=!0);f.state.draggingText=
z;g.scroller.dragDrop&&g.scroller.dragDrop();Ha(document,"mouseup",z);Ha(g.scroller,"drop",z)}}else(a.target||a.srcElement)==g.scroller&&yb(a)}}}function xa(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(k){return!1}if(f>=Math.floor(hb(a.display.gutters).right))return!1;d&&yb(b);d=a.display;var l=hb(d.lineDiv);if(g>l.bottom||!Dc(a,c))return ze(b);g-=l.top-d.viewOffset;for(l=0;l<a.options.gutters.length;++l){var m=d.gutters.childNodes[l];if(m&&hb(m).right>=f)return f=Mc(a.doc,g),e(a,c,a,f,a.options.gutters[l],
b),ze(b)}}function ta(a,b){return Dc(a,"gutterContextMenu")?xa(a,b,"gutterContextMenu",!1,pb):!1}function Ca(a){var b=this;if(!(sc(b,a)||ya(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,ce(a)))){yb(a);Wc&&(ie=+new Date);var c=oa(b,a,!0),d=a.dataTransfer.files;if(c&&!Ia(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var k=new FileReader;k.onload=function(){f[d]=k.result;++g==e&&(c=pa(b.doc,c),Eb(b.doc,{from:c,to:c,text:Zc(f.join("\n")),
origin:"paste"},"around"))};k.readAsText(a)};for(var k=0;k<e;++k)a(d[k],k)}else if(!b.state.draggingText||Ka(c,b.doc.sel.from)||Ka(b.doc.sel.to,c))try{if(f=a.dataTransfer.getData("Text")){var k=b.doc.sel.from,l=b.doc.sel.to;ab(b.doc,c,c);b.state.draggingText&&Xb(b.doc,"",k,l,"paste");b.replaceSelection(f,null,"paste");ea(b)}}catch(m){}else b.state.draggingText(a),setTimeout(tc(ea,b),20)}}function jb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Jd||A(a,[],b),a.display.scroller.scrollTop!=
b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Jd&&A(a,[]),K(a,100))}function eb(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,g(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function Ab(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==
c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Xc&&Mb)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(!c||Jd||Wb||null==vc){if(d&&null!=vc){var g=d*vc,k=a.doc.scrollTop,l=k+e.wrapper.clientHeight;0>g?k=Math.max(0,k+g-50):l=Math.min(a.doc.height,l+g+50);A(a,[],{top:k,
bottom:l})}20>Ie&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(vc=(vc*Ie+a)/(Ie+1),++Ie)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}else d&&jb(a,Math.max(0,Math.min(f.scrollTop+d*vc,f.scrollHeight-f.clientHeight))),eb(a,Math.max(0,Math.min(f.scrollLeft+c*
vc,f.scrollWidth-f.clientWidth))),yb(b),e.wheelStartX=null}}function ja(a,b,c){if("string"==typeof b&&(b=Le[b],!b))return!1;a.display.pollingFast&&db(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{Ia(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=Ne}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function Pa(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function Jb(a,b){var c=Pb(a.options.keyMap),
d=c.auto;clearTimeout(Cf);d&&!Qb(b)&&(Cf=setTimeout(function(){Pb(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,p(a))},50));var e=dd(b,!0),f=!1;if(!e)return!1;f=Pa(a);if(f=b.shiftKey?vb("Shift-"+e,f,function(b){return ja(a,b,!0)})||vb(e,f,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return ja(a,b)}):vb(e,f,function(b){return ja(a,b)}))yb(b),S(a),Vb&&(b.oldKeyCode=b.keyCode,b.keyCode=0),Tb(a,"keyHandled",a,e,b);return f}function Sa(a,b,c){var d=vb("'"+c+"'",Pa(a),
function(b){return ja(a,b,!0)});d&&(yb(b),S(a),Tb(a,"keyHandled",a,"'"+c+"'",b));return d}function kb(a){this.state.focused||Oa(this);if(!(sc(this,a)||this.options.onKeyEvent&&this.options.onKeyEvent(this,ce(a)))){Ub&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.doc.sel.shift=16==b||a.shiftKey;var c=Jb(this,a);Wb&&(wc=c?b:null,!c&&88==b&&!hf&&(Xc?a.metaKey:a.ctrlKey)&&this.replaceSelection(""))}}function qb(a){if(!(sc(this,a)||this.options.onKeyEvent&&this.options.onKeyEvent(this,ce(a)))){var b=
a.keyCode,c=a.charCode;Wb&&b==wc?(wc=null,yb(a)):(Wb&&(!a.which||10>a.which)||bf)&&Jb(this,a)||(b=String.fromCharCode(null==c?b:c),Sa(this,a,b)||(Wc&&!Vb&&(this.display.inputHasSelection=null),Na(this)))}}function Oa(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(pb(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),a.curOp||(ra(a,!0),Mb&&setTimeout(tc(ra,a,!0),0))),Wa(a),S(a))}function Za(a){a.state.focused&&
(pb(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused",""));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Ga(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value="\u200b"+(Ea(f.from,f.to)?"":e.input.value);e.prevInput="\u200b";e.input.selectionStart=1;e.input.selectionEnd=a.length}}function d(){e.inputDiv.style.position="relative";e.input.style.cssText=
l;Vb&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=k);Wa(a);if(null!=e.input.selectionStart){Ub&&!Vb||c();clearTimeout(ff);var b=0,f=function(){"\u200b"==e.prevInput&&0==e.input.selectionStart?na(a,Le.selectAll)(a):10>b++?ff=setTimeout(f,500):ra(a)};ff=setTimeout(f,200)}}if(!sc(a,b,"contextmenu")){var e=a.display,f=a.doc.sel;if(!ya(e,b)&&!ta(a,b)){var g=oa(a,b),k=e.scroller.scrollTop;if(g&&!Wb){a.options.resetSelectionOnContextMenu&&(Ea(f.from,f.to)||Ka(g,f.from)||!Ka(g,f.to))&&na(a,ab)(a.doc,g,g);
var l=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: transparent; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";ea(a);ra(a,!0);Ea(f.from,f.to)&&(e.input.value=e.prevInput=" ");Ub&&!Vb&&c();if(ef){Bd(b);var m=function(){Zb(window,"mouseup",m);setTimeout(d,20)};Ha(window,
"mouseup",m)}else setTimeout(d,50)}}}}function $a(a,b,c){if(!Ka(b.from,c))return pa(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d)return b=c.line-d,d=a.first+a.size-1,b>d?ha(d,va(a,d).text.length):Bb(c,va(a,b).text.length);if(c.line==b.to.line+d)return Bb(c,Db(b.text).length+(1==b.text.length?b.from.ch:0)+va(a,b.to.line).text.length-b.to.ch);a=c.line-b.from.line;return Bb(c,b.text[a].length+(a?0:b.from.ch))}function Xa(a,b,c){if(c&&"object"==typeof c)return{anchor:$a(a,
b,c.anchor),head:$a(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=je(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};c=function(a){if(Ka(a,b.from))return a;if(!Ka(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;a.line==b.to.line&&(e+=d.ch-b.to.ch);return ha(c,e)};return{anchor:c(a.sel.anchor),head:c(a.sel.head)}}function lb(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=
!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=pa(a,b));c&&(this.to=pa(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});pb(a,"beforeChange",a,b);a.cm&&pb(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Eb(a,b,c,d){if(a.cm){if(!a.cm.curOp)return na(a.cm,Eb)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(Dc(a,"beforeChange")||a.cm&&Dc(a.cm,"beforeChange"))if(b=lb(a,b,!0),!b)return;if(d=Af&&!d&&sd(a,b.from,b.to)){for(var e=d.length-
1;1<=e;--e)Kb(a,{from:d[e].from,to:d[e].to,text:[""]});d.length&&Kb(a,{from:d[0].from,to:d[0].to,text:b.text},c)}else Kb(a,b,c)}function Kb(a,b,c){if(1!=b.text.length||""!=b.text[0]||!Ea(b.from,b.to)){c=Xa(a,b,c);hd(a,b,c,a.cm?a.cm.curOp.id:NaN);Qa(a,b,c,Lb(a,b));var d=[];Uc(a,function(a,c){c||-1!=nc(d,a.history)||(Ve(a.history,b),d.push(a.history));Qa(a,b,null,Lb(a,b))})}}function Fb(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],
anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e);c.generation=d.generation||++c.maxGeneration;for(var f=Dc(a,"beforeChange")||a.cm&&Dc(a.cm,"beforeChange"),g=d.changes.length-1;0<=g;--g){var k=d.changes[g];k.origin=b;if(f&&!lb(a,k,!1)){("undo"==b?c.done:c.undone).length=0;break}e.changes.push($d(a,k));var l=g?Xa(a,k,null):{anchor:d.anchorBefore,head:d.headBefore};Qa(a,k,l,Rb(a,k));var m=
[];Uc(a,function(a,b){b||-1!=nc(m,a.history)||(Ve(a.history,k),m.push(a.history));Qa(a,k,null,Rb(a,k))})}}}}function bb(a,b){function c(a){return ha(a.line+b,a.ch)}a.first+=b;a.cm&&Fa(a.cm,a.first,a.first,b);a.sel.head=c(a.sel.head);a.sel.anchor=c(a.sel.anchor);a.sel.from=c(a.sel.from);a.sel.to=c(a.sel.to)}function Qa(a,b,c,d){if(a.cm&&!a.cm.curOp)return na(a.cm,Qa)(a,b,c,d);if(b.to.line<a.first)bb(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=
b.text.length-1-(a.first-b.from.line);bb(a,e);b={from:ha(a.first,0),to:ha(b.to.line+e,b.to.ch),text:[Db(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:ha(e,va(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=ue(a,b.from,b.to);c||(c=Xa(a,b,null));a.cm?hc(a.cm,b,d,c):te(a,b,d,c)}}function hc(a,b,c,d){var e=a.doc,f=a.display,g=b.from,m=b.to,n=!1,p=g.line;a.options.lineWrapping||(p=fc(qc(e,va(e,g.line))),e.iter(p,m.line+1,function(a){if(a==f.maxLine)return n=!0}));
Ka(e.sel.head,b.from)||Ka(b.to,e.sel.head)||(a.curOp.cursorActivity=!0);te(e,b,c,d,l(a));a.options.lineWrapping||(e.iter(p,g.line+b.text.length,function(a){var b=k(e,a);b>f.maxLineLength&&(f.maxLine=a,f.maxLineLength=b,f.maxLineChanged=!0,n=!1)}),n&&(a.curOp.updateMaxLine=!0));e.frontier=Math.min(e.frontier,g.line);K(a,400);Fa(a,g.line,m.line+1,b.text.length-(m.line-g.line)-1);if(Dc(a,"change"))if(b={from:g,to:m,text:b.text,removed:b.removed,origin:b.origin},a.curOp.textChanged){for(a=a.curOp.textChanged;a.next;a=
a.next);a.next=b}else a.curOp.textChanged=b}function Xb(a,b,c,d,e){d||(d=c);if(Ka(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=Zc(b));Eb(a,{from:c,to:d,text:b,origin:e},null)}function ha(a,b){if(!(this instanceof ha))return new ha(a,b);this.line=a;this.ch=b}function Ea(a,b){return a.line==b.line&&a.ch==b.ch}function Ka(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function ob(a,b){return a.line-b.line||a.ch-b.ch}function sb(a){return ha(a.line,a.ch)}function pa(a,b){if(b.line<a.first)return ha(a.first,
0);var c=a.first+a.size-1;return b.line>c?ha(c,va(a,c).text.length):Bb(b,va(a,b.line).text.length)}function Bb(a,b){var c=a.ch;return null==c||c>b?ha(a.line,b):0>c?ha(a.line,0):a}function rb(a,b){return b>=a.first&&b<a.first+a.size}function Ra(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Ka(b,e);f!=Ka(c,e)?(e=b,b=c):f!=Ka(b,c)&&(b=c)}ab(a,e,b,d)}else ab(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function ab(a,b,c,d,e){if(!e&&Dc(a,"beforeSelectionChange")||a.cm&&Dc(a.cm,
"beforeSelectionChange"))b={anchor:b,head:c},pb(a,"beforeSelectionChange",a,b),a.cm&&pb(a.cm,"beforeSelectionChange",a.cm,b),b.anchor=pa(a,b.anchor),b.head=pa(a,b.head),c=b.head,b=b.anchor;var f=a.sel;f.goalColumn=null;null==d&&(d=Ka(c,f.head)?-1:1);if(e||!Ea(b,f.anchor))b=Gb(a,b,d,"push"!=e);if(e||!Ea(c,f.head))c=Gb(a,c,d,"push"!=e);Ea(f.anchor,b)&&Ea(f.head,c)||(f.anchor=b,f.head=c,d=Ka(c,b),f.from=d?c:b,f.to=d?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=
!0),Tb(a,"cursorActivity",a))}function cb(a){ab(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function Gb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var k=va(a,f.line);if(k.markedSpans)for(var l=0;l<k.markedSpans.length;++l){var m=k.markedSpans[l],n=m.marker;if((null==m.from||(n.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(n.inclusiveRight?m.to>=f.ch:m.to>f.ch))){if(d&&(pb(n,"beforeCursorEnter"),n.explicitlyCleared))if(k.markedSpans){--l;continue}else break;if(n.atomic){l=n.find()[0>
g?"from":"to"];if(Ea(l,f)&&(l.ch+=g,0>l.ch?l=l.line>a.first?pa(a,ha(l.line-1)):null:l.ch>k.text.length&&(l=l.line<a.first+a.size-1?ha(l.line+1,0):null),!l)){if(e){if(!d)return Gb(a,b,c,!0);a.cantEdit=!0;return ha(a.first,0)}e=!0;l=b;g=-g}f=l;continue a}}}return f}}function bc(a,b,c,d){for(null==d&&(d=0);;){var e=!1,f=ma(a,b),g=c&&c!=b?ma(a,c):f,g=Ja(a,Math.min(f.left,g.left),Math.min(f.top,g.top)-d,Math.max(f.left,g.left),Math.max(f.bottom,g.bottom)+d),k=a.doc.scrollTop,l=a.doc.scrollLeft;null!=g.scrollTop&&
(jb(a,g.scrollTop),1<Math.abs(a.doc.scrollTop-k)&&(e=!0));null!=g.scrollLeft&&(eb(a,g.scrollLeft),1<Math.abs(a.doc.scrollLeft-l)&&(e=!0));if(!e)return f}}function Ja(a,b,c,d,e){var f=a.display,g=ia(a.display);0>c&&(c=0);var k=f.scroller.clientHeight-$b,l=f.scroller.scrollTop,m={};a=a.doc.height+(f.mover.offsetHeight-f.lineSpace.offsetHeight);var n=c<g,g=e>a-g;c<l?m.scrollTop=n?0:c:e>l+k&&(c=Math.min(c,(g?a:e)-k),c!=l&&(m.scrollTop=c));l=f.scroller.clientWidth-$b;c=f.scroller.scrollLeft;b+=f.gutters.offsetWidth;
d+=f.gutters.offsetWidth;f=f.gutters.offsetWidth;e=b<f+10;b<c+f||e?(e&&(b=0),m.scrollLeft=Math.max(0,b-10-f)):d>l+c-3&&(m.scrollLeft=d+10-l);return m}function tb(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function Ta(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop});a=a.display.scroller;d.scrollTop=Math.max(0,Math.min(a.scrollHeight-a.clientHeight,d.scrollTop+c));d.scrollLeft=
Math.max(0,Math.min(a.scrollWidth-a.clientWidth,d.scrollLeft+b))}function fb(a,b,c,d){var e=a.doc;null==c&&(c="add");if("smart"==c)if(a.doc.mode.indent)var f=I(a,b);else c="prev";var g=a.options.tabSize,k=va(e,b),l=Ec(k.text,null,g),m=k.text.match(/^\s*/)[0],n;if(!d&&!/\S/.test(k.text))n=0,c="not";else if("smart"==c&&(n=a.doc.mode.indent(f,k.text.slice(m.length),k.text),n==Ne)){if(!d)return;c="prev"}"prev"==c?n=b>e.first?Ec(va(e,b-1).text,null,g):0:"add"==c?n=l+a.options.indentUnit:"subtract"==c?
n=l-a.options.indentUnit:"number"==typeof c&&(n=l+c);n=Math.max(0,n);c="";d=0;if(a.options.indentWithTabs)for(f=Math.floor(n/g);f;--f)d+=g,c+="\t";d<n&&(c+=de(n-d));c!=m?Xb(a.doc,c,ha(b,0),ha(b,m.length),"+input"):e.sel.head.line==b&&e.sel.head.ch<m.length&&ab(e,ha(b,m.length),ha(b,m.length),1);k.stateAfter=null}function xb(a,b,c){var d=b,e=b,f=a.doc;"number"==typeof b?e=va(f,Math.max(f.first,Math.min(b,f.first+f.size-1))):d=fc(b);if(null!=d&&c(e,d))Fa(a,d,d+1);else return null;return e}function nb(a,
b,c,d,e){function f(b){var d=(e?He:$e)(l,k,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=m=!1:(g=b,b=l=va(a,b));if(b)k=e?(0>c?Ee:De)(l):0>c?l.text.length:0;else return m=!1}else k=d;return!0}var g=b.line,k=b.ch;b=c;var l=va(a,g),m=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var n=null;d="group"==d;for(var p=!0;!(0>c)||f(!p);p=!1){var q=l.text.charAt(k)||"\n",q=Ed(q)?"w":d?/\s/.test(q)?null:"p":null;if(n&&n!=q){0>c&&(c=1,f());break}q&&(n=q);if(0<c&&
!f(!p))break}}b=Gb(a,ha(g,k),b,!0);m||(b.hitSide=!0);return b}function yc(a,b,c,d){var e=a.doc,f=b.left,g;"page"==d?(d=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(d-(0>c?1.5:0.5)*ia(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){var k=qa(a,f,g);if(!k.outside)break;if(0>c?0>=g:g>=e.height){k.hitSide=!0;break}g+=5*c}return k}function ub(a,b){var c=b.ch,d=b.ch;if(a){(0>b.xRel||d==a.length)&&c?--c:++d;for(var e=a.charAt(c),
e=Ed(e)?Ed:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Ed(a)};0<c&&e(a.charAt(c-1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:ha(b.line,c),to:ha(b.line,d)}}function Ua(a,b){Ra(a.doc,ha(b,0),pa(a.doc,ha(b+1,0)))}function ua(a,b,c,d){q.defaults[a]=b;c&&(ld[a]=d?function(a,b,d){d!=gf&&c(a,b,d)}:c)}function cc(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}
function dc(a,b,c){return a.startState?a.startState(b,c):!0}function Pb(a){return"string"==typeof a?Fc[a]:a}function vb(a,b,c){function d(b){b=Pb(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(var e=0,f=b.length;e<f;++e){var g=d(b[e]);if(g)return g}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}}function Qb(a){a=Qc[a.keyCode];
return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function dd(a,b){if(Wb&&34==a.keyCode&&a["char"])return!1;var c=Qc[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(zf?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(zf?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c}function Yb(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0}function wb(a,b){this.lines=[];this.type=b;this.doc=a}function gb(a,b,c,d,
e){if(d&&d.shared)return jc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return na(a.cm,gb)(a,b,c,d,e);var f=new wb(a,e);d&&Ce(d,f);if(Ka(c,b)||Ea(b,c)&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.replacedWith=sa("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.replacedWith.ignoreEvents=!0));if(f.collapsed){if(Wd(a,b.line,b,c,f)||b.line!=c.line&&Wd(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");jd=!0}f.addToHistory&&hd(a,
{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var g=b.line,k=a.cm,l;a.iter(g,c.line+1,function(d){k&&f.collapsed&&!k.options.lineWrapping&&qc(a,d)==k.display.maxLine&&(l=!0);var e={from:null,to:null,marker:f};g==b.line&&(e.from=b.ch);g==c.line&&(e.to=c.ch);f.collapsed&&g!=b.line&&ec(d,0);d.markedSpans=d.markedSpans?d.markedSpans.concat([e]):[e];e.marker.attachLine(d);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){Ic(a,b)&&ec(b,0)});f.clearOnEnter&&Ha(f,"beforeCursorEnter",
function(){f.clear()});f.readOnly&&(Af=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Ef,f.atomic=!0);k&&(l&&(k.curOp.updateMaxLine=!0),(f.className||f.title||f.startStyle||f.endStyle||f.collapsed)&&Fa(k,b.line,c.line+1),f.atomic&&cb(k));return f}function ba(a,b){this.markers=a;this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Ha(a[c],"clear",function(){d.clear()})}function jc(a,b,c,d,e){d=Ce(d);d.shared=!1;var f=[gb(a,b,c,d,e)],g=f[0],
k=d.replacedWith;Uc(a,function(a){k&&(d.replacedWith=k.cloneNode(!0));f.push(gb(a,pa(a,b),pa(a,c),d,e));for(var l=0;l<a.linked.length;++l)if(a.linked[l].isParent)return;g=Db(f)});return new ba(f,g)}function kc(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Lb(a,b){var c=rb(a,b.from.line)&&va(a,b.from.line).markedSpans,d=rb(a,b.to.line)&&va(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Ea(b.from,b.to);if(c)for(var k=0,l;k<c.length;++k){var m=
c[k],n=m.marker;if(null==m.from||(n.inclusiveLeft?m.from<=e:m.from<e)||m.from==e&&!("bookmark"!=n.type||g&&m.marker.insertLeft)){var p=null==m.to||(n.inclusiveRight?m.to>=e:m.to>e);(l||(l=[])).push({from:m.from,to:p?null:m.to,marker:n})}}c=l;if(d)for(var k=0,q;k<d.length;++k)if(l=d[k],m=l.marker,null==l.to||(m.inclusiveRight?l.to>=f:l.to>f)||l.from==f&&"bookmark"==m.type&&(!g||l.marker.insertLeft))n=null==l.from||(m.inclusiveLeft?l.from<=f:l.from<f),(q||(q=[])).push({from:n?null:l.from-f,to:null==
l.to?null:l.to-f,marker:m});d=q;g=1==b.text.length;q=Db(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(k=c[f],null==k.to)(l=kc(d,k.marker),l)?g&&(k.to=null==l.to?null:l.to+q):k.to=e;if(d)for(f=0;f<d.length;++f)k=d[f],null!=k.to&&(k.to+=q),null==k.from?(l=kc(c,k.marker),l||(k.from=q,g&&(c||(c=[])).push(k))):(k.from+=q,g&&(c||(c=[])).push(k));c&&(c=ed(c));d&&d!=c&&(d=ed(d));e=[c];if(!g){var g=b.text.length-2,r;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(r||(r=[])).push({from:null,to:null,
marker:c[f].marker});for(f=0;f<g;++f)e.push(r);e.push(d)}return e}function ed(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Rb(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(ae(c[d]));c=e}else c=null;d=Lb(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var k=0;a:for(;k<g.length;++k){for(var l=g[k],m=0;m<f.length;++m)if(f[m].marker==
l.marker)continue a;f.push(l)}}else g&&(c[e]=g)}return c}function sd(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=nc(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(),f=0;f<a.length;++f){var g=a[f];if(!Ka(g.to,e.from)&&!Ka(e.to,g.from)){var k=[f,1];(Ka(g.from,e.from)||!c.inclusiveLeft&&Ea(g.from,e.from))&&k.push({from:g.from,
to:e.from});(Ka(e.to,g.to)||!c.inclusiveRight&&Ea(g.to,e.to))&&k.push({from:e.to,to:g.to});a.splice.apply(a,k);f+=k.length-1}}}return a}function td(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=ob(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=ob(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function Bc(a,b){var c=jd&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?
e.from:e.to)&&(!d||0>td(d,e.marker))&&(d=e.marker);return d}function Da(a){return Bc(a,!1)}function Wd(a,b,c,d,e){a=va(a,b);if(a=jd&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(!0),k=ob(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),l=ob(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=k&&0>=l||0>=k&&0<=l)&&(0>=k&&0<(ob(g.to,c)||(f.marker.inclusiveRight?1:0)-(e.inclusiveLeft?-1:0))||0<=k&&0>(ob(g.from,d)||(f.marker.inclusiveLeft?
-1:0)-(e.inclusiveRight?1:0))))return!0}}}function qc(a,b){for(var c;c=Bc(b,!0);)b=va(a,c.find().from.line);return b}function Ic(a,b){var c=jd&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.replacedWith&&0==d.from&&d.marker.inclusiveLeft&&vd(a,b,d)))return!0}function vd(a,b,c){if(null==c.to)return b=c.marker.find().to,b=va(a,b.line),vd(a,b,kc(b.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=
b.markedSpans[e],d.marker.collapsed&&!d.marker.replacedWith&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&vd(a,b,d))return!0}function Sb(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function wd(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function xd(a){return function(){var b=!this.cm.curOp;b&&Aa(this.cm);try{var c=a.apply(this,arguments)}finally{b&&P(this.cm)}return c}}
function yd(a){if(null!=a.height)return a.height;a.node.parentNode&&1==a.node.parentNode.nodeType||uc(a.cm.display.measure,sa("div",[a.node],null,"position: relative"));return a.height=a.node.offsetHeight}function re(a,b,c,d){var e=new Od(a,c,d);e.noHScroll&&(a.display.alignWidgets=!0);xb(a,b,function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;if(!Ic(a.doc,b)||e.showIfHidden)c=Ad(a,b)<a.doc.scrollTop,ec(b,b.height+
yd(e)),c&&Ta(a,0,e.height);return!0});return e}function Cc(a,b,c,d,e,f){var g=c.flattenSpans;null==g&&(g=a.options.flattenSpans);var k=0,l=null,m=new Yb(b,a.options.tabSize),n;for(""==b&&c.blankLine&&c.blankLine(d);!m.eol();){m.pos>a.options.maxHighlightLength?(g=!1,f&&fd(a,b,d,m.pos),m.pos=b.length,n=null):n=c.token(m,d);if(a.options.addModeClass){var p=q.innerMode(c,d).mode.name;p&&(n="m-"+(n?p+" "+n:p))}g&&l==n||(k<m.start&&e(m.start,l),k=m.start,l=n);m.start=m.pos}for(;k<m.pos;)a=Math.min(m.pos,
k+5E4),e(a,l),k=a}function Kc(a,b,c,d){var e=[a.state.modeGen];Cc(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},d);for(c=0;c<a.state.overlays.length;++c){var f=a.state.overlays[c],g=1,k=0;Cc(a,b.text,f.mode,!0,function(a,b){for(var c=g;k<a;){var d=e[g];d>a&&e.splice(g,1,a,e[g+1],d);g+=2;k=Math.min(a,d)}if(b)if(f.opaque)e.splice(c,g-c,a,b),g=c+2;else for(;c<g;c+=2)d=e[c+1],e[c+1]=d?d+" "+b:b})}return e}function Xd(a,b){b.styles&&b.styles[0]==a.state.modeGen||(b.styles=Kc(a,b,b.stateAfter=I(a,fc(b))));
return b.styles}function fd(a,b,c,d){var e=a.doc.mode,f=new Yb(b,a.options.tabSize);f.start=f.pos=d||0;for(""==b&&e.blankLine&&e.blankLine(c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)e.token(f,c),f.start=f.pos}function Cb(a,b){if(!a)return null;for(;;){var c=a.match(/(?:^|\s)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}c=b.cm.options.addModeClass?
Me:Pd;return c[a]||(c[a]="cm-"+a.replace(/ +/g," cm-"))}function Vd(a,b,c,d){for(var e,f=b,g=!0;e=Bc(f,!0);)f=va(a.doc,e.find().from.line);d={pre:sa("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:a,copyWidgets:d};do{f.text&&(g=!1);d.measure=f==b&&c;d.pos=0;d.addToken=d.measure?Lc:mc;(Ub||Mb)&&a.getOption("lineWrapping")&&(d.addToken=tf(d.addToken));a:{e=d;var k=Xd(a,f),l=f.markedSpans,m=f.text,n=0;if(l)for(var p=m.length,q=0,r=1,s="",t=void 0,u=0,v=void 0,x=void 0,y=void 0,z=void 0,A=void 0;;){if(u==
q){for(var v=x=y=z="",A=null,u=Infinity,B=[],C=0;C<l.length;++C){var D=l[C],F=D.marker;D.from<=q&&(null==D.to||D.to>q)?(null!=D.to&&u>D.to&&(u=D.to,x=""),F.className&&(v+=" "+F.className),F.startStyle&&D.from==q&&(y+=" "+F.startStyle),F.endStyle&&D.to==u&&(x+=" "+F.endStyle),F.title&&!z&&(z=F.title),F.collapsed&&(!A||0>td(A.marker,F))&&(A=D)):D.from>q&&u>D.from&&(u=D.from);"bookmark"==F.type&&D.from==q&&F.replacedWith&&B.push(F)}if(A&&(A.from||0)==q&&(se(e,(null==A.to?p:A.to)-q,A.marker,null==A.from),
null==A.to)){e=A.marker.find();break a}if(!A&&B.length)for(C=0;C<B.length;++C)se(e,0,B[C])}if(q>=p)break;for(B=Math.min(p,u);;){if(s){C=q+s.length;A||(D=C>B?s.slice(0,B-q):s,e.addToken(e,D,t?t+v:v,y,q+D.length==u?x:"",z));if(C>=B){s=s.slice(B-q);q=B;break}q=C;y=""}s=m.slice(n,n=k[r++]);t=Cb(k[r++],e)}}else for(var r=1;r<k.length;r+=2)e.addToken(e,m.slice(n,n=k[r]),Cb(k[r+1],e));e=void 0}c&&f==b&&!d.measuredSomething&&(c[0]=d.pre.appendChild(Id(a.display.measure)),d.measuredSomething=!0);e&&(f=va(a.doc,
e.to.line))}while(e);!c||d.measuredSomething||c[0]||(c[0]=d.pre.appendChild(g?sa("span","\u00a0"):Id(a.display.measure)));d.pre.firstChild||Ic(a.doc,b)||d.pre.appendChild(document.createTextNode("\u00a0"));var G;c&&Wc&&(G=rc(f))&&(g=G.length-1,G[g].from==G[g].to&&--g,f=G[g],G=G[g-1],f.from+1==f.to&&G&&f.level<G.level&&(c=c[d.pos-1])&&c.parentNode.insertBefore(c.measureRight=Id(a.display.measure),c.nextSibling));if(c=d.textClass?d.textClass+" "+(b.textClass||""):b.textClass)d.pre.className=c;pb(a,
"renderLine",a,b,d.pre);return d}function mc(a,b,c,d,e,f){if(b){var g=a.cm.options.specialChars;if(g.test(b))for(var k=document.createDocumentFragment(),l=0;;){g.lastIndex=l;var m=g.exec(b),n=m?m.index-l:b.length-l;n&&(k.appendChild(document.createTextNode(b.slice(l,l+n))),a.col+=n);if(!m)break;l+=n+1;"\t"==m[0]?(m=a.cm.options.tabSize,m-=a.col%m,k.appendChild(sa("span",de(m),"cm-tab")),a.col+=m):(m=a.cm.options.specialCharPlaceholder(m[0]),k.appendChild(m),a.col+=1)}else{a.col+=b.length;var k=document.createTextNode(b)}if(c||
d||e||a.measure)return b=c||"",d&&(b+=d),e&&(b+=e),m=sa("span",[k],b),f&&(m.title=f),a.pre.appendChild(m);a.pre.appendChild(k)}}function Lc(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){for(var k=0==g,l=g+1;l<b.length&&Gd(b.charAt(l));)++l;var m=b.slice(g,l);(g=l-1)&&f&&ge(b,g)&&a.pre.appendChild(sa("wbr"));l=a.measure[a.pos];k=a.measure[a.pos]=mc(a,m,c,k&&d,g==b.length-1&&e);l&&(k.leftSide=l.leftSide||l);Ub&&f&&" "==m&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+
1))&&(k.style.whiteSpace="normal");a.pos+=m.length}b.length&&(a.measuredSomething=!0)}function tf(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,d,e,f,g,k){return a(c,d.replace(/ {3,}/g,b),e,f,g,k)}}function se(a,b,c,d){if(d=!d&&c.replacedWith)if(a.copyWidgets&&(d=d.cloneNode(!0)),a.pre.appendChild(d),a.measure){if(b)a.measure[a.pos]=d;else{var e=Id(a.cm.display.measure);if("bookmark"!=c.type||c.insertLeft){if(a.measure[a.pos])return;a.measure[a.pos]=
a.pre.insertBefore(e,d)}else a.measure[a.pos]=a.pre.appendChild(e)}a.measuredSomething=!0}a.pos+=b}function te(a,b,c,d,e){function f(a,c,d){var g=e;a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Sb(a);wd(a,d);c=g?g(a):1;c!=a.height&&ec(a,c);Tb(a,"change",a,b)}var g=b.from,k=b.to,l=b.text,m=va(a,g.line),n=va(a,k.line),p=Db(l),q=c?c[l.length-1]:null,r=k.line-g.line;if(0!=g.ch||0!=k.ch||""!=p||a.cm&&!a.cm.options.wholeLineUpdateBefore)if(m==n)if(1==
l.length)f(m,m.text.slice(0,g.ch)+p+m.text.slice(k.ch),q);else{u=[];s=1;for(t=l.length-1;s<t;++s)u.push(new Oc(l[s],c?c[s]:null,e));u.push(new Oc(p+m.text.slice(k.ch),q,e));f(m,m.text.slice(0,g.ch)+l[0],c?c[0]:null);a.insert(g.line+1,u)}else if(1==l.length)f(m,m.text.slice(0,g.ch)+l[0]+n.text.slice(k.ch),c?c[0]:null),a.remove(g.line+1,r);else{f(m,m.text.slice(0,g.ch)+l[0],c?c[0]:null);f(n,p+n.text.slice(k.ch),q);s=1;t=l.length-1;for(u=[];s<t;++s)u.push(new Oc(l[s],c?c[s]:null,e));1<r&&a.remove(g.line+
1,r-1);a.insert(g.line+1,u)}else{for(var s=0,t=l.length-1,u=[];s<t;++s)u.push(new Oc(l[s],c?c[s]:null,e));f(n,n.text,q);r&&a.remove(g.line,r);u.length&&a.insert(g.line,u)}Tb(a,"change",a,b);ab(a,d.anchor,d.head,null,!0)}function Yd(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function zd(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=
null}function Uc(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var k=a.linked[g];if(k.doc!=e){var l=f&&k.sharedHist;if(!c||l)b(k.doc,l),d(k.doc,a,l)}}}d(a,null,!0)}function Te(a,c){if(c.cm)throw Error("This document is already in use.");a.doc=c;c.cm=a;b(a);r(a);a.options.lineWrapping||e(a);a.options.mode=c.modeOption;Fa(a)}function va(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function ue(a,
b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function Zd(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function ec(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function fc(a){if(null==a.parent)return null;var b=a.parent;a=nc(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Mc(a,
b){var c=a.first;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function Ad(a,b){b=qc(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;else c+=f.height}for(f=d.parent;f;d=f,f=d.parent)for(e=0;e<f.children.length;++e){var g=f.children[e];if(g==d)break;else c+=g.height}return c}function rc(a){var b=
a.order;null==b&&(b=a.order=qg(a.text));return b}function gd(a){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function Ue(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function $d(a,b){var c={from:{line:b.from.line,ch:b.from.ch},to:je(b),text:ue(a,b.from,b.to)};Ue(a,c,b.from.line,b.to.line+1);Uc(a,function(a){Ue(a,
c,b.from.line,b.to.line+1)},!0);return c}function hd(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Db(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var k=Db(g.changes);Ea(b.from,b.to)&&Ea(b.from,k.to)?k.to=je(b):g.changes.push($d(a,b));g.anchorAfter=c.anchor;g.headAfter=c.head}else for(g={changes:[$d(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,
anchorAfter:c.anchor,headAfter:c.head},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift();e.generation=++e.maxGeneration;e.lastTime=f;e.lastOp=d;e.lastOrigin=b.origin}function ae(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function be(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,
headAfter:e.headAfter});for(e=0;e<f.length;++e){var k=f[e],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var m in k)(l=m.match(/^spans_(\d+)$/))&&-1<nc(b,Number(l[1]))&&(Db(g)[m]=k[m],delete k[m])}}return d}function ve(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function we(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,k=0;k<f.changes.length;++k){var l=f.changes[k];f.copied||(l.from=sb(l.from),l.to=sb(l.to));if(c<l.from.line)l.from.line+=d,l.to.line+=d;else if(b<=l.to.line){g=
!1;break}}f.copied||(f.anchorBefore=sb(f.anchorBefore),f.headBefore=sb(f.headBefore),f.anchorAfter=sb(f.anchorAfter),f.readAfter=sb(f.headAfter),f.copied=!0);g?(ve(f.anchorBefore),ve(f.headBefore),ve(f.anchorAfter),ve(f.headAfter)):(a.splice(0,e+1),e=0)}}function Ve(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;we(a.done,c,d,e);we(a.undone,c,d,e)}function uf(){Bd(this)}function ce(a){a.stop||(a.stop=uf);return a}function yb(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function xe(a){a.stopPropagation?
a.stopPropagation():a.cancelBubble=!0}function ze(a){return null!=a.defaultPrevented?a.defaultPrevented:!1==a.returnValue}function Bd(a){yb(a);xe(a)}function We(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Xc&&a.ctrlKey&&1==b&&(b=3);return b}function Ha(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))}function Zb(a,b,c){if(a.removeEventListener)a.removeEventListener(b,
c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}}function pb(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Tb(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);Pc||(++Qd,Pc=[],setTimeout(ee,0));for(var f=0;f<d.length;++f)Pc.push(c(d[f]))}}
function sc(a,b,c){pb(a,c||b.type,a,b);return ze(b)||b.codemirrorIgnore}function ee(){--Qd;var a=Pc;Pc=null;for(var b=0;b<a.length;++b)a[b]()}function Dc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function Nc(a){a.prototype.on=function(a,b){Ha(this,a,b)};a.prototype.off=function(a,b){Zb(this,a,b)}}function Cd(){this.id=null}function Ec(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function de(a){for(;Rd.length<=
a;)Rd.push(Db(Rd)+" ");return Rd[a]}function Db(a){return a[a.length-1]}function Dd(a){if(he)a.selectionStart=0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function nc(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function Be(a,b){function c(){}c.prototype=a;var d=new c;b&&Ce(b,d);return d}function Ce(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function vf(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}
function tc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Ed(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||pg.test(a))}function Fd(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Gd(a){return 768<=a.charCodeAt(0)&&Gf.test(a)}function sa(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)Vc(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);
return a}function gc(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function uc(a,b){return gc(a).appendChild(b)}function Vc(a,b){Vb?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function hb(a){return a.getBoundingClientRect()}function ge(){return!1}function Hd(a){if(null!=Yc)return Yc;var b=sa("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");uc(a,b);b.offsetWidth&&(Yc=b.offsetHeight-b.clientHeight);return Yc||0}function Id(a){if(null==
Oe){var b=sa("span","\u200b");uc(a,sa("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Oe=1>=b.offsetWidth&&2<b.offsetHeight&&!Kd)}return Oe?sa("span","\u200b"):sa("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function hg(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function Ye(a){return a.level%
2?a.to:a.from}function Ze(a){return a.level%2?a.from:a.to}function De(a){return(a=rc(a))?Ye(a[0]):0}function Ee(a){var b=rc(a);return b?Ze(Db(b)):a.text.length}function xf(a,b){var c=va(a.doc,b),d=qc(a.doc,c);d!=c&&(b=fc(d));d=(c=rc(d))?c[0].level%2?Ee(d):De(d):0;return ha(b,d)}function ig(a,b){for(var c,d;c=Da(d=va(a.doc,b));)b=c.find().to.line;d=(c=rc(d))?c[0].level%2?De(d):Ee(d):d.text.length;return ha(b,d)}function Fe(a,b){me=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;
if(e.from==b||e.to==b)if(null==d)d=c;else{var f;f=e.level;var g=a[d].level,k=a[0].level;f=f==k?!0:g==k?!1:f<g;if(f)return e.from!=e.to&&(me=d),c;e.from!=e.to&&(me=c);break}}return d}function Ge(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&Gd(a.text.charAt(b)));return b}function He(a,b,c,d){var e=rc(a);if(!e)return $e(a,b,c,d);var f=Fe(e,b),g=e[f];for(b=Ge(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(Fe(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=
e[f+=c];if(!g)return null;b=0<c==g.level%2?Ge(a,g.to,-1,d):Ge(a,g.from,1,d)}}function $e(a,b,c,d){b+=c;if(d)for(;0<b&&Gd(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Jd=/gecko\/\d/i.test(navigator.userAgent),Ub=/MSIE \d/.test(navigator.userAgent),Kd=Ub&&(null==document.documentMode||8>document.documentMode),Vb=Ub&&(null==document.documentMode||9>document.documentMode),jg=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),Wc=Ub||jg,Mb=/WebKit\//.test(navigator.userAgent),kg=Mb&&
/Qt\/\d+\.\d+/.test(navigator.userAgent),yf=/Chrome\//.test(navigator.userAgent),Wb=/Opera\//.test(navigator.userAgent),af=/Apple Computer/.test(navigator.vendor),bf=/KHTML\//.test(navigator.userAgent),mg=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),lg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ng=/PhantomJS/.test(navigator.userAgent),he=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),cf=he||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
Xc=he||/Mac/.test(navigator.platform),df=/win/i.test(navigator.platform),id=Wb&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);id&&(id=Number(id[1]));id&&15<=id&&(Wb=!1,Mb=!0);var zf=Xc&&(kg||Wb&&(null==id||12.11>id)),ef=Jd||Ub&&!Vb,Af=!1,jd=!1,kd,Bf=0,Ld,Md,ie=0,Ie=0,vc=null;Ub?vc=-0.53:Jd?vc=15:yf?vc=-0.7:af&&(vc=-1/3);var Cf,wc=null,ff,je=q.changeEnd=function(a){return a.text?ha(a.from.line+a.text.length-1,Db(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};q.Pos=ha;q.prototype={constructor:q,
focus:function(){window.focus();ea(this);Na(this)},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,ld.hasOwnProperty(a)&&na(this,ld[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:na(null,function(a,
b){var c=a.token?a:q.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;Fa(this)}),removeOverlay:na(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;Fa(this);break}}}),indentLine:na(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?
"smart":"prev":b?"add":"subtract");rb(this.doc,a)&&fb(this,a,b,c)}),indentSelection:na(null,function(a){var b=this.doc.sel;if(Ea(b.from,b.to))return fb(this,b.from.line,a,!0);for(var c=b.to.line-(b.to.ch?0:1),b=b.from.line;b<=c;++b)fb(this,b,a)}),getTokenAt:function(a,b){var c=this.doc;a=pa(c,a);for(var d=I(this,a.line,b),e=this.doc.mode,c=va(c,a.line),c=new Yb(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var f=e.token(c,d)}return{start:c.start,end:c.pos,string:c.current(),className:f||
null,type:f||null,state:d}},getTokenTypeAt:function(a){a=pa(this.doc,a);var b=Xd(this,va(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)return b[2];for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else return b[2*e+2]}},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?q.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!md.hasOwnProperty(b))return md;var d=md[b],e=this.getModeAt(a);
if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==nc(c,g.val)&&c.push(g.val);return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return I(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel;
c=null==a?c.head:"object"==typeof a?pa(this.doc,a):a?c.from:c.to;return ma(this,c,b||"page")},charCoords:function(a,b){return aa(this,pa(this.doc,a),b||"page")},coordsChar:function(a,b){a=ca(this,a,b||"page");return qa(this,a.left,a.top)},lineAtHeight:function(a,b){a=ca(this,{top:a,left:0},b||"page").top;return Mc(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=va(this.doc,a);return O(this,
va(this.doc,a),{top:0,left:0},b||"page").top+(c?d.height:0)},defaultTextHeight:function(){return ia(this.display)},defaultCharWidth:function(){return ka(this.display)},setGutterMarker:na(null,function(a,b,c){return xb(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&Fd(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:na(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Fa(b,d,d+1),Fd(c.gutterMarkers)&&
(c.gutterMarkers=null));++d})}),addLineClass:na(null,function(a,b,c){return xb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:na(null,function(a,b,c){return xb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;
var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),addLineWidget:na(null,function(a,b,c){return re(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!rb(this.doc,a))return null;var b=a;a=va(this.doc,a);if(!a)return null}else if(b=fc(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,
widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=ma(this,pa(this.doc,a));var g=a.bottom,k=a.left;b.style.position="absolute";f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var l=Math.max(f.wrapper.clientHeight,this.doc.height),m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>l)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:
a.bottom+b.offsetHeight<=l&&(g=a.bottom);k+b.offsetWidth>m&&(k=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(k=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?k=0:"middle"==e&&(k=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=k+"px");c&&(a=Ja(this,k,g,k+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&jb(this,a.scrollTop),null!=a.scrollLeft&&eb(this,a.scrollLeft))},triggerOnKeyDown:na(null,kb),execCommand:function(a){if(Le.hasOwnProperty(a))return Le[a](this)},
findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=pa(this.doc,a);f<b&&(a=nb(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:na(null,function(a,b){var c=this.doc.sel,c=c.shift||c.extend||Ea(c.from,c.to)?nb(this.doc,c.head,a,b,this.options.rtlMoveVisually):0>a?c.from:c.to;Ra(this.doc,c,c,a)}),deleteH:na(null,function(a,b){var c=this.doc.sel;Ea(c.from,c.to)?Xb(this.doc,"",c.from,nb(this.doc,c.head,a,b,!1),"+delete"):Xb(this.doc,"",c.from,c.to,"+delete");this.curOp.userSelChange=!0}),
findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=pa(this.doc,a);f<b&&(a=ma(this,a,"div"),null==d?d=a.left:a.left=d,a=yc(this,a,e,c),!a.hitSide);++f);return a},moveV:na(null,function(a,b){var c=this.doc.sel,d,e;c.shift||c.extend||Ea(c.from,c.to)?(e=ma(this,c.head,"div"),null!=c.goalColumn&&(e.left=c.goalColumn),d=yc(this,e,a,b),"page"==b&&Ta(this,0,aa(this,d,"div").top-e.top),e=e.left):d=0>a?c.from:c.to;Ra(this.doc,d,d,a);null!=e&&(c.goalColumn=e)}),toggleOverwrite:function(a){if(null==
a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:na(null,function(a,b){tb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=$b;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-
b}},scrollIntoView:na(null,function(a,b){null==a?a={from:this.doc.sel.head,to:null}:"number"==typeof a?a={from:ha(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);b||(b=0);var c=a;null!=a.from.line&&(this.curOp.scrollToPos={from:a.from,to:a.to,margin:b},c={from:ma(this,a.from),to:ma(this,a.to)});c=Ja(this,Math.min(c.from.left,c.to.left),Math.min(c.from.top,c.to.top)-b,Math.max(c.from.right,c.to.right),Math.max(c.from.bottom,c.to.bottom)+b);tb(this,c.scrollLeft,c.scrollTop)}),setSize:na(null,
function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0);this.curOp.forceUpdate=!0}),operation:function(a){return La(this,a)},refresh:na(null,function(){var a=null==this.display.cachedTextHeight;R(this);tb(this,this.doc.scrollLeft,this.doc.scrollTop);Fa(this);a&&b(this)}),
swapDoc:na(null,function(a){var b=this.doc;b.cm=null;Te(this,a);R(this);ra(this,!0);tb(this,a.scrollLeft,a.scrollTop);Tb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Nc(q);var ld=q.optionHandlers={},Je=q.defaults={},gf=q.Init={toString:function(){return"CodeMirror.Init"}};ua("value",
"",function(a,b){a.setValue(b)},!0);ua("mode",null,function(a,b){a.doc.modeOption=b;r(a)},!0);ua("indentUnit",2,r,!0);ua("indentWithTabs",!1);ua("smartIndent",!0);ua("tabSize",4,function(a){s(a);R(a);Fa(a)},!0);ua("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh()},!0);ua("specialCharPlaceholder",function(a){var b=sa("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);
return b},function(a){a.refresh()},!0);ua("electricChars",!0);ua("rtlMoveVisually",!df);ua("wholeLineUpdateBefore",!0);ua("theme","default",function(a){m(a);f(a)},!0);ua("keyMap","default",p);ua("extraKeys",null);ua("onKeyEvent",null);ua("onDragEvent",null);ua("lineWrapping",!1,function(c){c.options.lineWrapping?(c.display.wrapper.className+=" CodeMirror-wrap",c.display.sizer.style.minWidth=""):(c.display.wrapper.className=c.display.wrapper.className.replace(" CodeMirror-wrap",""),e(c));b(c);Fa(c);
R(c);setTimeout(function(){a(c)},100)},!0);ua("gutters",[],function(a){n(a.options);f(a)},!0);ua("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?z(a.display)+"px":"0";a.refresh()},!0);ua("coverGutterNextToScrollbar",!1,a,!0);ua("lineNumbers",!1,function(a){n(a.options);f(a)},!0);ua("firstLineNumber",1,f,!0);ua("lineNumberFormatter",function(a){return a},f,!0);ua("showCursorWhenSelecting",!1,F,!0);ua("resetSelectionOnContextMenu",!0);ua("readOnly",!1,function(a,b){"nocursor"==b?(Za(a),
a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||ra(a,!0))});ua("disableInput",!1,function(a,b){b||ra(a,!0)},!0);ua("dragDrop",!0);ua("cursorBlinkRate",530);ua("cursorScrollMargin",0);ua("cursorHeight",1);ua("workTime",100);ua("workDelay",100);ua("flattenSpans",!0,s,!0);ua("addModeClass",!1,s,!0);ua("pollInterval",100);ua("undoDepth",40,function(a,b){a.doc.history.undoDepth=b});ua("historyEventDelay",500);ua("viewportMargin",10,function(a){a.refresh()},!0);ua("maxHighlightLength",
1E4,s,!0);ua("crudeMeasuringFrom",1E4);ua("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});ua("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});ua("autofocus",null);var Df=q.modes={},ke=q.mimeModes={};q.defineMode=function(a,b){q.defaults.mode||"null"==a||(q.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}Df[a]=b};q.defineMIME=function(a,b){ke[a]=b};
q.resolveMode=function(a){if("string"==typeof a&&ke.hasOwnProperty(a))a=ke[a];else if(a&&"string"==typeof a.name&&ke.hasOwnProperty(a.name)){var b=ke[a.name];a=Be(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return q.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};q.getMode=function(a,b){b=q.resolveMode(b);var c=Df[b.name];if(!c)return q.getMode(a,"text/plain");c=c(a,b);if(Nd.hasOwnProperty(b.name)){var d=Nd[b.name],e;for(e in d)d.hasOwnProperty(e)&&
(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;b.helperType&&(c.helperType=b.helperType);if(b.modeProps)for(e in b.modeProps)c[e]=b.modeProps[e];return c};q.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});q.defineMIME("text/plain","null");var Nd=q.modeExtensions={};q.extendMode=function(a,b){var c=Nd.hasOwnProperty(a)?Nd[a]:Nd[a]={};Ce(b,c)};q.defineExtension=function(a,b){q.prototype[a]=b};q.defineDocExtension=function(a,b){Hb.prototype[a]=b};q.defineOption=
ua;var Ke=[];q.defineInitHook=function(a){Ke.push(a)};var md=q.helpers={};q.registerHelper=function(a,b,c){md.hasOwnProperty(a)||(md[a]=q[a]={_global:[]});md[a][b]=c};q.registerGlobalHelper=function(a,b,c,d){q.registerHelper(a,b,d);md[a]._global.push({pred:c,val:d})};q.isWordChar=Ed;q.copyState=cc;q.startState=dc;q.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var Le=q.commands={selectAll:function(a){a.setSelection(ha(a.firstLine(),
0),ha(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Ea(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:ha(b.line),"+delete"):a.replaceRange("",b,ha(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",ha(b,0),ha(b),"+delete")},delLineLeft:function(a){var b=a.getCursor();a.replaceRange("",ha(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(ha(a.firstLine(),
0))},goDocEnd:function(a){a.extendSelection(ha(a.lastLine()))},goLineStart:function(a){a.extendSelection(xf(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=xf(a,b.line),d=a.getLineHandle(c.line),e=rc(d);e&&0!=e[0].level?a.extendSelection(c):(d=Math.max(0,d.text.search(/\S/)),a.extendSelection(ha(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d)))},goLineEnd:function(a){a.extendSelection(ig(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+
5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,
"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,
"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),ha(b.line,b.ch-1),ha(b.line,
b.ch+1))},newlineAndIndent:function(a){na(a,function(){a.replaceSelection("\n","end","+input");a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},Fc=q.keyMap={};Fc.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",
Insert:"toggleOverwrite"};Fc.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",
"Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};Fc.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev",
"Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};Fc["default"]=Xc?Fc.macDefault:Fc.pcDefault;Fc.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter",
"Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};q.lookupKey=vb;q.isModifierKey=Qb;q.keyName=dd;q.fromTextArea=function(a,b){function c(){a.value=m.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=document.body;try{d=document.activeElement}catch(e){}b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(Ha(a.form,"submit",
c),!b.leaveSubmitMethodAlone)){var f=a.form,g=f.submit;try{var k=f.submit=function(){c();f.submit=g;f.submit();f.submit=k}}catch(l){}}a.style.display="none";var m=q(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);m.save=c;m.getTextArea=function(){return a};m.toTextArea=function(){c();a.parentNode.removeChild(m.getWrapperElement());a.style.display="";a.form&&(Zb(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=g))};return m};Yb.prototype={eol:function(){return this.pos>=
this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;
return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=Ec(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?Ec(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Ec(this.string,
null,this.tabSize)-(this.lineStart?Ec(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=
a}}};q.StringStream=Yb;q.TextMarker=wb;Nc(wb);wb.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&Aa(a);if(Dc(this,"clear")){var c=this.find();c&&Tb(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=kc(f.markedSpans,this);null!=g.to&&(d=fc(f));for(var l=f,m=f.markedSpans,n=g,p=void 0,q=0;q<m.length;++q)m[q]!=n&&(p||(p=[])).push(m[q]);l.markedSpans=p;null!=g.from?c=fc(f):this.collapsed&&!Ic(this.doc,f)&&a&&ec(f,ia(a.display))}if(a&&
this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=qc(a.doc,this.lines[e]),g=k(a.doc,f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&Fa(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&cb(a));b&&P(a)}};wb.prototype.find=function(a){for(var b,c,d=0;d<this.lines.length;++d){var e=this.lines[d],f=kc(e.markedSpans,this);if(null!=f.from||null!=f.to)e=
fc(e),null!=f.from&&(b=ha(e,f.from)),null!=f.to&&(c=ha(e,f.to))}return"bookmark"!=this.type||a?b&&{from:b,to:c}:b};wb.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){"bookmark"!=this.type&&(a=a.from);var c=va(this.doc,a.line);W(b,c);if(a.line>=b.display.showingFrom&&a.line<b.display.showingTo){for(a=b.display.lineDiv.firstChild;a;a=a.nextSibling)if(a.lineObj==c){a.offsetHeight!=c.height&&ec(c,a.offsetHeight);break}La(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=
b.curOp.updateMaxLine=!0})}}};wb.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=nc(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};wb.prototype.detachLine=function(a){this.lines.splice(nc(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var Ef=0;q.SharedTextMarker=ba;Nc(ba);ba.prototype.clear=
function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Tb(this,"clear")}};ba.prototype.find=function(){return this.primary.find()};var Od=q.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};Nc(Od);Od.prototype.clear=xd(function(){var a=this.line.widgets,b=fc(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null);
a=Ad(this.cm,this.line)<this.cm.doc.scrollTop;ec(this.line,Math.max(0,this.line.height-yd(this)));a&&Ta(this.cm,0,-this.height);Fa(this.cm,b,b+1)}});Od.prototype.changed=xd(function(){var a=this.height;this.height=null;if(a=yd(this)-a)ec(this.line,this.line.height+a),a=fc(this.line),Fa(this.cm,a,a+1)});var Oc=q.Line=function(a,b,c){this.text=a;wd(this,b);this.height=c?c(this):1};Nc(Oc);Oc.prototype.lineNo=function(){return fc(this)};var Pd={},Me={};Yd.prototype={chunkSize:function(){return this.lines.length},
removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Sb(f);Tb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};zd.prototype={chunkSize:function(){return this.size},
removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(c=[],this.collapse(c),this.children=[new Yd(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=
b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertInner(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new Yd(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new zd(b);if(a.parent){a.size-=b.size;a.height-=
b.height;var c=nc(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new zd(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){g=Math.min(b,g-a);if(f.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};var og=0,Hb=q.Doc=function(a,b,c){if(!(this instanceof Hb))return new Hb(a,b,c);null==c&&(c=0);zd.call(this,
[new Yd([new Oc("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.history=gd();this.cleanGeneration=1;this.frontier=c;c=ha(c,0);this.sel={from:c,to:c,head:c,anchor:c,shift:!1,extend:!1,goalColumn:null};this.id=++og;this.modeOption=b;"string"==typeof a&&(a=Zc(a));te(this,{from:c,to:c,text:a},null,{head:c,anchor:c})};Hb.prototype=Be(zd.prototype,{constructor:Hb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,
b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Zd(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:function(a){var b=ha(this.first,0),c=this.first+this.size-1;Eb(this,{from:b,to:ha(c,va(this,c).text.length),text:Zc(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=pa(this,b);c=c?pa(this,c):b;Xb(this,a,b,c,d)},getRange:function(a,
b,c){a=ue(this,pa(this,a),pa(this,b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},setLine:function(a,b){rb(this,a)&&Xb(this,b,ha(a,0),pa(this,ha(a)))},removeLine:function(a){a?Xb(this,"",pa(this,ha(a-1)),pa(this,ha(a))):Xb(this,"",ha(0,0),pa(this,ha(1,0)))},getLineHandle:function(a){if(rb(this,a))return va(this,a)},getLineNumber:function(a){return fc(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=va(this,a));return qc(this,a)},lineCount:function(){return this.size},
firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return pa(this,a)},getCursor:function(a){var b=this.sel;return sb(null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||!1===a?b.to:b.from)},somethingSelected:function(){return!Ea(this.sel.head,this.sel.anchor)},setCursor:Va(function(a,b,c){a=pa(this,"number"==typeof a?ha(a,b||0):a);c?Ra(this,a):ab(this,a,a)}),setSelection:Va(function(a,b,c){ab(this,pa(this,a),pa(this,b||a),c)}),extendSelection:Va(function(a,
b,c){Ra(this,pa(this,a),b&&pa(this,b),c)}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){Eb(this,{from:this.sel.from,to:this.sel.to,text:Zc(a),origin:c},b||"around")},undo:Va(function(){Fb(this,"undo")}),redo:Va(function(){Fb(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=gd(this.history.maxGeneration)},
markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:be(this.history.done),undone:be(this.history.undone)}},setHistory:function(a){var b=this.history=gd(this.history.maxGeneration);b.done=a.done.slice(0);b.undone=a.undone.slice(0)},markText:function(a,b,c){return gb(this,
pa(this,a),pa(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1};a=pa(this,a);return gb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=pa(this,a);var b=[],c=va(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=
0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return pa(this,ha(c,b))},indexFromPos:function(a){a=pa(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new Hb(Zd(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=
this.scrollLeft;b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn};a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Hb(Zd(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=
[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];return b},unlinkDoc:function(a){a instanceof q&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);break}if(a.history==this.history){var c=[a.id];Uc(a,function(a){c.push(a.id)},!0);a.history=gd();a.history.done=be(this.history.done,c);a.history.undone=be(this.history.undone,c)}},iterLinkedDocs:function(a){Uc(this,a)},getMode:function(){return this.mode},
getEditor:function(){return this.cm}});Hb.prototype.eachLine=Hb.prototype.iter;var Ff=["iter","insert","remove","copy","getEditor"],le;for(le in Hb.prototype)Hb.prototype.hasOwnProperty(le)&&0>nc(Ff,le)&&(q.prototype[le]=function(a){return function(){return a.apply(this.doc,arguments)}}(Hb.prototype[le]));Nc(Hb);q.e_stop=Bd;q.e_preventDefault=yb;q.e_stopPropagation=xe;var Pc,Qd=0;q.on=Ha;q.off=Zb;q.signal=pb;var $b=30,Ne=q.Pass={toString:function(){return"CodeMirror.Pass"}};Cd.prototype={set:function(a,
b){clearTimeout(this.id);this.id=setTimeout(b,a)}};q.countColumn=Ec;var Rd=[""],pg=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Gf=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
q.replaceGetRect=function(a){hb=a};var Hf=function(){if(Vb)return!1;var a=sa("div");return"draggable"in a||"dragDrop"in a}();Jd?ge=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:af&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ge=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:Mb&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?ge=function(a,b){var c=a.charCodeAt(b-1);return 8208<=c&&8212>=c}:Mb&&(ge=function(a,b){if(1<b&&45==
a.charCodeAt(b-1)){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return!0;if(2<b&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-1,b+1))});var Yc,Oe,Zc=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");
-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};q.splitLines=Zc;var If=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},hf=function(){var a=sa("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),Qc={3:"Enter",
8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",
63277:"PageDown",63302:"Insert"};q.keyNames=Qc;(function(){for(var a=0;10>a;a++)Qc[a+48]=Qc[a+96]=String(a);for(a=65;90>=a;a++)Qc[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Qc[a+111]=Qc[a+63235]="F"+a})();var me,qg=function(){function a(d){return 255>=d?b.charAt(d):1424<=d&&1524>=d?"R":1536<=d&&1791>=d?c.charAt(d-1536):1792<=d&&2220>=d?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",
c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,k=/[1n]/;return function(b){if(!d.test(b))return!1;for(var c=b.length,l=[],m=0,n;m<c;++m)l.push(a(b.charCodeAt(m)));for(var m=0,p="L";m<c;++m)n=l[m],"m"==n?l[m]=p:
p=n;m=0;for(p="L";m<c;++m)n=l[m],"1"==n&&"r"==p?l[m]="n":f.test(n)&&(p=n,"r"==n&&(l[m]="R"));m=1;for(p=l[0];m<c-1;++m)n=l[m],"+"==n&&"1"==p&&"1"==l[m+1]?l[m]="1":","!=n||p!=l[m+1]||"1"!=p&&"n"!=p||(l[m]=p),p=n;for(m=0;m<c;++m)if(n=l[m],","==n)l[m]="N";else if("%"==n){for(p=m+1;p<c&&"%"==l[p];++p);var q=m&&"!"==l[m-1]||p<c&&"1"==l[p]?"1":"N";for(n=m;n<p;++n)l[n]=q;m=p-1}m=0;for(p="L";m<c;++m)n=l[m],"L"==p&&"1"==n?l[m]="L":f.test(n)&&(p=n);for(m=0;m<c;++m)if(e.test(l[m])){for(p=m+1;p<c&&e.test(l[p]);++p);
n="L"==(p<c?l[p]:"L");q="L"==(m?l[m-1]:"L")||n?"L":"R";for(n=m;n<p;++n)l[n]=q;m=p-1}for(var p=[],r,m=0;m<c;)if(g.test(l[m])){n=m;for(++m;m<c&&g.test(l[m]);++m);p.push({from:n,to:m,level:0})}else{var s=m,q=p.length;for(++m;m<c&&"L"!=l[m];++m);for(n=s;n<m;)if(k.test(l[n])){s<n&&p.splice(q,0,{from:s,to:n,level:1});s=n;for(++n;n<m&&k.test(l[n]);++n);p.splice(q,0,{from:s,to:n,level:2});s=n}else++n;s<m&&p.splice(q,0,{from:s,to:m,level:1})}1==p[0].level&&(r=b.match(/^\s+/))&&(p[0].from=r[0].length,p.unshift({from:0,
to:r[0].length,level:0}));1==Db(p).level&&(r=b.match(/\s+$/))&&(Db(p).to-=r[0].length,p.push({from:c-r[0].length,to:c,level:0}));p[0].level!=Db(p).level&&p.push({from:c,to:c,level:p[0].level});return p}}();q.version="3.21.0";return q}();CodeMirror.defineMode("javascript",function(q,t){function r(a,b,c){Ca=a;jb=c;return b}function s(a,c){var d=a.next();if('"'==d||"'"==d)return c.tokenize=l(d),c.tokenize(a,c);if("."==d&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return r("number","number");if("."==d&&a.match(".."))return r("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(d))return r(d);if("="==d&&a.eat(">"))return r("=>","operator");if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(d))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),
r("number","number");if("/"==d){if(a.eat("*"))return c.tokenize=b,b(a,c);if(a.eat("/"))return a.skipToEnd(),r("comment","comment");if("operator"==c.lastType||"keyword c"==c.lastType||"sof"==c.lastType||/^[\[{}\(,;:]$/.test(c.lastType)){a:for(var d=!1,e,f=!1;null!=(e=a.next());){if(!d){if("/"==e&&!f)break a;"["==e?f=!0:f&&"]"==e&&(f=!1)}d=!d&&"\\"==e}a.eatWhile(/[gimy]/);return r("regexp","string-2")}a.eatWhile(ta);return r("operator","operator",a.current())}if("`"==d)return c.tokenize=p,p(a,c);if("#"==
d)return a.skipToEnd(),r("error","error");if(ta.test(d))return a.eatWhile(ta),r("operator","operator",a.current());a.eatWhile(/[\w\$_]/);d=a.current();return(e=xa.propertyIsEnumerable(d)&&xa[d])&&"."!=c.lastType?r(e.type,e.style,d):r("variable","variable",d)}function l(a){return function(b,c){for(var d=!1,e;null!=(e=b.next())&&(e!=a||d);)d=!d&&"\\"==e;d||(c.tokenize=s);return r("string","string")}}function b(a,b){for(var c=!1,d;d=a.next();){if("/"==d&&c){b.tokenize=s;break}c="*"==d}return r("comment",
"comment")}function p(a,b){for(var c=!1,d;null!=(d=a.next());){if(!c&&("`"==d||"$"==d&&a.eat("{"))){b.tokenize=s;break}c=!c&&"\\"==d}return r("quasi","string-2",a.current())}function m(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){for(var d=0,e=!1,c=c-1;0<=c;--c){var f=a.string.charAt(c),g=eb.indexOf(f);if(0<=g&&3>g){if(!d){++c;break}if(0==--d)break}else if(3<=g&&6>g)++d;else if(/[$\w]/.test(f))e=!0;else if(e&&!d){++c;break}}e&&!d&&(b.fatArrowAt=c)}}function f(a,
b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function d(){for(var a=arguments.length-1;0<=a;a--)ja.cc.push(arguments[a])}function k(){d.apply(null,arguments);return!0}function e(a){function b(c){for(;c;c=c.next)if(c.name==a)return!0;return!1}var c=ja.state;c.context?(ja.marked="def",b(c.localVars)||(c.localVars={name:a,next:c.localVars})):!b(c.globalVars)&&t.globalVars&&(c.globalVars={name:a,next:c.globalVars})}function n(){ja.state.context=
{prev:ja.state.context,vars:ja.state.localVars};ja.state.localVars=Pa}function a(){ja.state.localVars=ja.state.context.vars;ja.state.context=ja.state.context.prev}function c(a,b){var c=function(){var c=ja.state,d=c.indented;"stat"==c.lexical.type&&(d=c.lexical.indented);c.lexical=new f(d,ja.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function g(){var a=ja.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function v(a){return function(b){return b==
a?k():";"==a?d():k(arguments.callee)}}function u(b,e){return"var"==b?k(c("vardef",e.length),V,v(";"),g):"keyword a"==b?k(c("form"),z,u,g):"keyword b"==b?k(c("form"),u,g):"{"==b?k(c("}"),N,g):";"==b?k():"if"==b?k(c("form"),z,u,g,aa):"function"==b?k(ka):"for"==b?k(c("form"),ma,u,g):"variable"==b?k(c("stat"),H):"switch"==b?k(c("form"),z,c("}","switch"),v("{"),N,g,g):"case"==b?k(z,v(":")):"default"==b?k(v(":")):"catch"==b?k(c("form"),n,v("("),Aa,v(")"),u,g,a):"module"==b?k(c("form"),n,La,a,g):"class"==
b?k(c("form"),P,Va,g):"export"==b?k(c("form"),Fa,g):"import"==b?k(c("form"),Wa,g):d(c("stat"),z,v(";"),g)}function z(a){return y(a,!1)}function A(a){return y(a,!0)}function y(b,e){if(ja.state.fatArrowAt==ja.stream.start){var f=e?F:M;if("("==b)return k(n,c(")"),I(Q,")"),g,v("=>"),f,a);if("variable"==b)return d(n,Q,v("=>"),f,a)}f=e?G:B;return Ab.hasOwnProperty(b)?k(f):"function"==b?k(ka):"keyword c"==b?k(e?D:C):"("==b?k(c(")"),C,Ia,v(")"),g,f):"operator"==b||"spread"==b?k(e?A:z):"["==b?k(c("]"),ra,
g,f):"{"==b?T(K,"}",null,f):k()}function C(a){return a.match(/[;\}\)\],]/)?d():d(z)}function D(a){return a.match(/[;\}\)\],]/)?d():d(A)}function B(a,b){return","==a?k(z):G(a,b,!1)}function G(b,d,e){var f=!1==e?B:G,l=!1==e?z:A;if("=>"==d)return k(n,e?F:M,a);if("operator"==b)return/\+\+|--/.test(d)?k(f):"?"==d?k(z,v(":"),l):k(l);if("quasi"==b)return ja.cc.push(f),b="${"!=d.slice(d.length-2)?k():k(z,J),b;if(";"!=b){if("("==b)return T(A,")","call",f);if("."==b)return k(S,f);if("["==b)return k(c("]"),
C,v("]"),g,f)}}function J(a){if("}"==a)return ja.marked="string-2",ja.state.tokenize=p,k()}function M(a){m(ja.stream,ja.state);return"{"==a?d(u):d(z)}function F(a){m(ja.stream,ja.state);return"{"==a?d(u):d(A)}function H(a){return":"==a?k(g,u):d(B,v(";"),g)}function S(a){if("variable"==a)return ja.marked="property",k()}function K(a,b){if("variable"==a){if(ja.marked="property","get"==b||"set"==b)return k(x)}else if("number"==a||"string"==a)ja.marked=a+" property";else if("["==a)return k(z,v("]"),L);
if(Ab.hasOwnProperty(a))return k(L)}function x(a){if("variable"!=a)return d(L);ja.marked="property";return k(ka)}function L(a){if(":"==a)return k(A);if("("==a)return d(ka)}function I(a,b){function c(d){return","==d?(d=ja.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),k(a,c)):d==b?k():k(v(b))}return function(e){return e==b?k():d(a,c)}}function T(a,b,d){for(var e=3;e<arguments.length;e++)ja.cc.push(arguments[e]);return k(c(b,d),I(a,b),g)}function N(a){return"}"==a?k():d(u,N)}function W(a){if(Y&&
":"==a)return k(Z)}function Z(a){if("variable"==a)return ja.marked="variable-3",k()}function V(){return d(Q,W,O,ca)}function Q(a,b){if("variable"==a)return e(b),k();if("["==a)return T(Q,"]");if("{"==a)return T(R,"}")}function R(a,b){if("variable"==a&&!ja.stream.match(/^\s*:/,!1))return e(b),k(O);"variable"==a&&(ja.marked="property");return k(v(":"),Q,O)}function O(a,b){if("="==b)return k(A)}function ca(a){if(","==a)return k(V)}function aa(a,b){if("keyword b"==a&&"else"==b)return k(c("form"),u,g)}
function ma(a){if("("==a)return k(c(")"),da,v(")"),g)}function da(a){return"var"==a?k(V,v(";"),la):";"==a?k(la):"variable"==a?k(qa):d(z,v(";"),la)}function qa(a,b){return"in"==b||"of"==b?(ja.marked="keyword",k(z)):k(B,la)}function la(a,b){return";"==a?k(ia):"in"==b||"of"==b?(ja.marked="keyword",k(z)):d(z,v(";"),ia)}function ia(a){")"!=a&&k(z)}function ka(b,d){if("*"==d)return ja.marked="keyword",k(ka);if("variable"==b)return e(d),k(ka);if("("==b)return k(n,c(")"),I(Aa,")"),g,u,a)}function Aa(a){return"spread"==
a?k(Aa):d(Q,W)}function P(a,b){if("variable"==a)return e(b),k(na)}function na(a,b){if("extends"==b)return k(z)}function Va(a){if("{"==a)return T(K,"}")}function La(a,b){if("string"==a)return k(u);if("variable"==a)return e(b),k(db)}function Fa(a,b){return"*"==b?(ja.marked="keyword",k(db,v(";"))):"default"==b?(ja.marked="keyword",k(z,v(";"))):d(u)}function Wa(a){return"string"==a?k():d(Na,db)}function Na(a,b){if("{"==a)return T(Na,"}");"variable"==a&&e(b);return k()}function db(a,b){if("from"==b)return ja.marked=
"keyword",k(z)}function ra(a){return"]"==a?k():d(A,ea)}function ea(a){return"for"==a?d(Ia,v("]")):","==a?k(I(A,"]")):d(I(A,"]"))}function Ia(a){if("for"==a)return k(ma,Ia);if("if"==a)return k(z,Ia)}var ib=q.indentUnit,ya=t.statementIndent,oa=t.json,Y=t.typescript,xa=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,
"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(Y){var c={type:"variable",style:"variable-3"},
c={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),string:c,number:c,bool:c,any:c},g;for(g in c)b[g]=c[g]}return b}(),ta=/[+\-*&%=<>!?|~^]/,Ca,jb,eb="([{}])",Ab={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},ja={state:null,column:null,marked:null,cc:null},Pa={name:"this",next:{name:"arguments"}};g.lex=!0;return{startState:function(a){a={tokenize:s,lastType:"sof",
cc:[],lexical:new f((a||0)-ib,0,"block",!1),localVars:t.localVars,context:t.localVars&&{vars:t.localVars},indented:0};t.globalVars&&(a.globalVars=t.globalVars);return a},token:function(a,c){a.sol()&&(c.lexical.hasOwnProperty("align")||(c.lexical.align=!1),c.indented=a.indentation(),m(a,c));if(c.tokenize!=b&&a.eatSpace())return null;var d=c.tokenize(a,c);if("comment"==Ca)return d;c.lastType="operator"!=Ca||"++"!=jb&&"--"!=jb?Ca:"incdec";a:{var e=Ca,f=jb,g=c.cc;ja.state=c;ja.stream=a;ja.marked=null;
ja.cc=g;c.lexical.hasOwnProperty("align")||(c.lexical.align=!0);for(;;)if((g.length?g.pop():oa?z:u)(e,f)){for(;g.length&&g[g.length-1].lex;)g.pop()();if(ja.marked){d=ja.marked;break a}if(e="variable"==e)b:{for(e=c.localVars;e;e=e.next)if(e.name==f){e=!0;break b}for(g=c.context;g;g=g.prev)for(e=g.vars;e;e=e.next)if(e.name==f){e=!0;break b}e=void 0}if(e){d="variable-2";break a}break a}d=void 0}return d},indent:function(a,c){if(a.tokenize==b)return CodeMirror.Pass;if(a.tokenize!=s)return 0;for(var d=
c&&c.charAt(0),e=a.lexical,f=a.cc.length-1;0<=f;--f){var k=a.cc[f];if(k==g)e=e.prev;else if(k!=aa)break}"stat"==e.type&&"}"==d&&(e=e.prev);ya&&")"==e.type&&"stat"==e.prev.type&&(e=e.prev);f=e.type;k=d==f;return"vardef"==f?e.indented+("operator"==a.lastType||","==a.lastType?e.info+1:0):"form"==f&&"{"==d?e.indented:"form"==f?e.indented+ib:"stat"==f?e.indented+("operator"==a.lastType||","==a.lastType?ya||ib:0):"switch"!=e.info||k||!1==t.doubleIndentSwitch?e.align?e.column+(k?0:1):e.indented+(k?0:ib):
e.indented+(/^(?:case|default)\b/.test(c)?ib:2*ib)},electricChars:":{}",blockCommentStart:oa?null:"/*",blockCommentEnd:oa?null:"*/",lineComment:oa?null:"//",fold:"brace",helperType:oa?"json":"javascript",jsonMode:oa}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");
CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMode("pascal",function(){function q(p,m){var f=p.next();if("#"==f&&m.startOfLine)return p.skipToEnd(),"meta";if('"'==f||"'"==f)return m.tokenize=t(f),m.tokenize(p,m);if("("==f&&p.eat("*"))return m.tokenize=r,r(p,m);if(/[\[\]{}\(\),;\:\.]/.test(f))return null;if(/\d/.test(f))return p.eatWhile(/[\w\.]/),"number";if("/"==f&&p.eat("/"))return p.skipToEnd(),"comment";if(b.test(f))return p.eatWhile(b),"operator";p.eatWhile(/[\w\$_]/);f=p.current();return s.propertyIsEnumerable(f)?"keyword":
l.propertyIsEnumerable(f)?"atom":"variable"}function t(b){return function(l,f){for(var d=!1,k,e=!1;null!=(k=l.next());){if(k==b&&!d){e=!0;break}d=!d&&"\\"==k}if(e||!d)f.tokenize=null;return"string"}}function r(b,l){for(var f=!1,d;d=b.next();){if(")"==d&&f){l.tokenize=null;break}f="*"==d}return"comment"}var s=function(b){var l={};b=b.split(" ");for(var f=0;f<b.length;++f)l[b[f]]=!0;return l}("and array begin case const div do downto else end file for forward integer boolean char function goto if in label mod nil not of or packed procedure program record repeat set string then to type until var while with"),
l={"null":!0},b=/[+\-*&%=<>!?|\/]/;return{startState:function(){return{tokenize:null}},token:function(b,l){return b.eatSpace()?null:(l.tokenize||q)(b,l)},electricChars:"{}"}});CodeMirror.defineMIME("text/x-pascal","pascal");
