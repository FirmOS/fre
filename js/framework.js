dojoConfig={baseUrl:"js/dojo/dojo/"};Aloha={settings:{sidebar:{disabled:!0}}};/*
 RequireJS 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var requirejs,require,define;
(function(p){function t(a){return"[object Function]"===E.call(a)}function r(a){return"[object Array]"===E.call(a)}function s(a,e){if(a){var b;for(b=0;b<a.length&&(!a[b]||!e(a[b],b,a));b+=1);}}function g(a,e){if(a){var b;for(b=a.length-1;-1<b&&(!a[b]||!e(a[b],b,a));b-=1);}}function b(a,e){for(var b in a)if(a.hasOwnProperty(b)&&e(a[b],b))break}function n(a,e,c,m){e&&b(e,function(e,b){if(c||!K.call(a,b))m&&"string"!==typeof e?(a[b]||(a[b]={}),n(a[b],e,c,m)):a[b]=e});return a}function l(a,e){return function(){return e.apply(a,
arguments)}}function d(a){if(!a)return a;var e=p;s(a.split("."),function(a){e=e[a]});return e}function c(a,e,b){return function(){var c=G.call(arguments,0),m;b&&t(m=c[c.length-1])&&(m.__requireJsBuild=!0);c.push(e);return a.apply(null,c)}}function k(a,e,b){s([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(m){var f=m[1]||m[0];a[m[0]]=e?c(e[f],b):function(){var a=ca[P];return a[f].apply(a,arguments)}})}function f(a,e,b,c){e=Error(e+"\nhttp://requirejs.org/docs/errors.html#"+
a);e.requireType=a;e.requireModules=c;b&&(e.originalError=b);return e}function q(a){function m(a,e,b){var c,f,k,q,d,l,v,g=e&&e.split("/");c=g;var x=oa.map,y=x&&x["*"];if(a&&"."===a.charAt(0))if(e){c=oa.pkgs[e]?g=[e]:g.slice(0,g.length-1);e=a=c.concat(a.split("/"));for(c=0;e[c];c+=1)if(f=e[c],"."===f)e.splice(c,1),c-=1;else if(".."===f)if(1!==c||".."!==e[2]&&".."!==e[0])0<c&&(e.splice(c-1,2),c-=2);else break;c=oa.pkgs[e=a[0]];a=a.join("/");c&&a===e+"/"+c.main&&(a=e)}else 0===a.indexOf("./")&&(a=a.substring(2));
if(b&&(g||y)&&x){e=a.split("/");for(c=e.length;0<c;c-=1){k=e.slice(0,c).join("/");if(g)for(f=g.length;0<f;f-=1)if(b=x[g.slice(0,f).join("/")])if(b=b[k]){q=b;d=c;break}if(q)break;!l&&y&&y[k]&&(l=y[k],v=c)}!q&&l&&(q=l,d=v);q&&(e.splice(0,d,q),a=e.join("/"))}return a}function q(a){S&&s(document.getElementsByTagName("script"),function(e){if(e.getAttribute("data-requiremodule")===a&&e.getAttribute("data-requirecontext")===ma.contextName)return e.parentNode.removeChild(e),!0})}function v(a){var e=oa.paths[a];
if(e&&r(e)&&1<e.length)return q(a),e.shift(),ma.undef(a),ma.require([a]),!0}function g(a,e,b,c){var f,k,q=a?a.indexOf("!"):-1,d=null,l=e?e.name:null,v=a,x=!0,y="";a||(x=!1,a="_@r"+(Kb+=1));-1!==q&&(d=a.substring(0,q),a=a.substring(q+1,a.length));d&&(d=m(d,l,c),k=Ba[d]);a&&(d?y=k&&k.normalize?k.normalize(a,function(a){return m(a,l,c)}):m(a,l,c):(y=m(a,l,c),f=ma.nameToUrl(y)));a=!d||k||b?"":"_unnormalized"+(Vb+=1);return{prefix:d,name:y,parentMap:e,unnormalized:!!a,url:f,originalName:v,isDefine:x,id:(d?
d+"!"+y:y)+a}}function x(a){var e=a.id,b=T[e];b||(b=T[e]=new ma.Module(a));return b}function z(a,e,b){var c=a.id,m=T[c];if(!K.call(Ba,c)||m&&!m.defineEmitComplete)x(a).on(e,b);else"defined"===e&&b(Ba[c])}function A(a,b){var c=a.requireModules,m=!1;if(b)b(a);else if(s(c,function(e){if(e=T[e])e.error=a,e.events.error&&(m=!0,e.emit("error",a))}),!m)e.onError(a)}function C(){U.length&&(u.apply(Ha,[Ha.length-1,0].concat(U)),U=[])}function F(a,e,b){a=a&&a.map;e=c(b||ma.require,a,e);k(e,ma,a);e.isBrowser=
S;return e}function D(a){delete T[a];s(Ya,function(e,b){if(e.map.id===a)return Ya.splice(b,1),e.defined||(ma.waitCount-=1),!0})}function H(a,e){var b=a.map.id,c=a.depMaps,m;if(a.inited){if(e[b])return a;e[b]=!0;s(c,function(a){if(a=T[a.id])return a.inited&&a.enabled?m=H(a,n({},e)):(m=null,delete e[b],!0)});return m}}function N(a,e,b){var c=a.map.id,m=a.depMaps;if(a.inited&&a.map.isDefine){if(e[c])return Ba[c];e[c]=a;s(m,function(m){m=m.id;var f=T[m];!Va[m]&&f&&(f.inited&&f.enabled?(f=N(f,e,b),b[m]||
a.defineDepById(m,f)):b[c]=!0)});a.check(!0);return Ba[c]}}function E(a){a.check()}function G(){var a,e,c,m,k=(c=1E3*oa.waitSeconds)&&ma.startTime+c<(new Date).getTime(),d=[],l=!1,g=!0;if(!Y){Y=!0;b(T,function(b){a=b.map;e=a.id;if(b.enabled&&!b.error)if(!b.inited&&k)v(e)?l=m=!0:(d.push(e),q(e));else if(!b.inited&&b.fetched&&a.isDefine&&(l=!0,!a.prefix))return g=!1});if(k&&d.length)return c=f("timeout","Load timeout for modules: "+d,null,d),c.contextName=ma.contextName,A(c);g&&(s(Ya,function(a){if(!a.defined){a=
H(a,{});var e={};a&&(N(a,e,{}),b(e,E))}}),b(T,E));k&&!m||!l||!S&&!Q||va||(va=setTimeout(function(){va=0;G()},50));Y=!1}}function P(a){x(g(a[0],null,!0)).init(a[1],a[2])}function ca(a){a=a.currentTarget||a.srcElement;var e=ma.onScriptLoad;a.detachEvent&&!aa?a.detachEvent("onreadystatechange",e):a.removeEventListener("load",e,!1);e=ma.onScriptError;a.detachEvent&&!aa||a.removeEventListener("error",e,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}var Y,Ia,ma,Va,va,oa={waitSeconds:7,baseUrl:"./",
paths:{},pkgs:{},shim:{}},T={},Fa={},Ha=[],Ba={},mb={},Kb=1,Vb=1,Ya=[];Va={require:function(a){return F(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=Ba[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return oa.config&&oa.config[a.map.id]||{}},exports:Ba[a.map.id]}}};Ia=function(a){this.events=Fa[a.id]||{};this.map=a;this.shim=oa.shim[a.id];this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=
0};Ia.prototype={init:function(a,e,b,c){c=c||{};if(!this.inited){this.factory=e;if(b)this.on("error",b);else this.events.error&&(b=l(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.depMaps.rjsSkipMap=a.rjsSkipMap;this.errback=b;this.inited=!0;this.ignore=c.ignore;c.enabled||this.enabled?this.enable():this.check()}},defineDepById:function(a,e){var b;s(this.depMaps,function(e,c){if(e.id===a)return b=c,!0});return this.defineDep(b,e)},defineDep:function(a,e){this.depMatched[a]||
(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=e)},fetch:function(){if(!this.fetched){this.fetched=!0;ma.startTime=(new Date).getTime();var a=this.map;if(this.shim)F(this,!0)(this.shim.deps||[],l(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;mb[a]||(mb[a]=!0,ma.load(this.map.id,a))},check:function(a){if(this.enabled&&!this.enabling){var b,c,m=this.map.id;c=this.depExports;var f=this.exports,
k=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(t(k)){if(this.events.error)try{f=ma.execCb(m,k,c,f)}catch(q){b=q}else f=ma.execCb(m,k,c,f);this.map.isDefine&&((c=this.module)&&void 0!==c.exports&&c.exports!==this.exports?f=c.exports:void 0===f&&this.usingExports&&(f=this.exports));if(b)return b.requireMap=this.map,b.requireModules=[this.map.id],b.requireType="define",A(this.error=
b)}else f=k;this.exports=f;if(this.map.isDefine&&!this.ignore&&(Ba[m]=f,e.onResourceLoad))e.onResourceLoad(ma,this.map,this.depMaps);delete T[m];this.defined=!0;ma.waitCount-=1;0===ma.waitCount&&(Ya=[])}this.defining=!1;a||!this.defined||this.defineEmitted||(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}},callPlugin:function(){var a=this.map,c=a.id,f=g(a.prefix,null,!1,!0);z(f,"defined",l(this,function(f){var k;k=this.map.name;var q=this.map.parentMap?this.map.parentMap.name:
null;if(this.map.unnormalized){if(f.normalize&&(k=f.normalize(k,function(a){return m(a,q,!0)})||""),f=g(a.prefix+"!"+k,this.map.parentMap,!1,!0),z(f,"defined",l(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),f=T[f.id]){if(this.events.error)f.on("error",l(this,function(a){this.emit("error",a)}));f.enable()}}else k=l(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),k.error=l(this,function(a){this.inited=!0;this.error=a;a.requireModules=[c];
b(T,function(a){0===a.map.id.indexOf(c+"_unnormalized")&&D(a.map.id)});A(a)}),k.fromText=function(a,b){var c=V;c&&(V=!1);x(g(a));e.exec(b);c&&(V=!0);ma.completeLoad(a)},f.load(a.name,F(a.parentMap,!0,function(a,e,b){a.rjsSkipMap=!0;return ma.require(a,e,b)}),k,oa)}));ma.enable(f,this);this.pluginMaps[f.id]=f},enable:function(){this.enabled=!0;this.waitPushed||(Ya.push(this),ma.waitCount+=1,this.waitPushed=!0);this.enabling=!0;s(this.depMaps,l(this,function(a,e){var b,c;if("string"===typeof a){a=g(a,
this.map.isDefine?this.map:this.map.parentMap,!1,!this.depMaps.rjsSkipMap);this.depMaps[e]=a;if(b=Va[a.id]){this.depExports[e]=b(this);return}this.depCount+=1;z(a,"defined",l(this,function(a){this.defineDep(e,a);this.check()}));this.errback&&z(a,"error",this.errback)}b=a.id;c=T[b];Va[b]||!c||c.enabled||ma.enable(a,this)}));b(this.pluginMaps,l(this,function(a){var e=T[a.id];e&&!e.enabled&&ma.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,e){var b=this.events[a];b||(b=this.events[a]=
[]);b.push(e)},emit:function(a,e){s(this.events[a],function(a){a(e)});"error"===a&&delete this.events[a]}};return ma={config:oa,contextName:a,registry:T,defined:Ba,urlFetched:mb,waitCount:0,defQueue:Ha,Module:Ia,makeModuleMap:g,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var e=oa.pkgs,c=oa.shim,m=oa.paths,f=oa.map;n(oa,a,!0);oa.paths=n(m,a.paths,!0);a.map&&(oa.map=n(f||{},a.map,!0,!0));a.shim&&(b(a.shim,function(a,e){r(a)&&(a={deps:a});a.exports&&
!a.exports.__buildReady&&(a.exports=ma.makeShimExports(a.exports));c[e]=a}),oa.shim=c);a.packages&&(s(a.packages,function(a){a="string"===typeof a?{name:a}:a;e[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(M,"").replace(J,"")}}),oa.pkgs=e);b(T,function(a,e){a.inited||a.map.unnormalized||(a.map=g(e))});(a.deps||a.callback)&&ma.require(a.deps||[],a.callback)},makeShimExports:function(a){var e;return"string"===typeof a?(e=function(){return d(a)},e.exports=a,e):function(){return a.apply(p,
arguments)}},requireDefined:function(a,e){var b=g(a,e,!1,!0).id;return K.call(Ba,b)},requireSpecified:function(a,e){a=g(a,e,!1,!0).id;return K.call(Ba,a)||K.call(T,a)},require:function(b,c,m,k){var q;if("string"===typeof b){if(t(c))return A(f("requireargs","Invalid require call"),m);if(e.get)return e.get(ma,b,c);b=g(b,c,!1,!0);b=b.id;return K.call(Ba,b)?Ba[b]:A(f("notloaded",'Module name "'+b+'" has not been loaded yet for context: '+a))}m&&!t(m)&&(k=m,m=void 0);c&&!t(c)&&(k=c,c=void 0);for(C();Ha.length;){q=
Ha.shift();if(null===q[0])return A(f("mismatch","Mismatched anonymous define() module: "+q[q.length-1]));P(q)}x(g(null,k)).init(b,c,m,{enabled:!0});G();return ma.require},undef:function(a){C();var e=g(a,null,!0),b=T[a];delete Ba[a];delete mb[e.url];delete Fa[a];b&&(b.events.defined&&(Fa[a]=b.events),D(a))},enable:function(a,e){T[a.id]&&x(a).enable()},completeLoad:function(a){var e,b,c=oa.shim[a]||{},m=c.exports&&c.exports.exports;for(C();Ha.length;){b=Ha.shift();if(null===b[0]){b[0]=a;if(e)break;
e=!0}else b[0]===a&&(e=!0);P(b)}b=T[a];if(!e&&!Ba[a]&&b&&!b.inited)if(!oa.enforceDefine||m&&d(m))P([a,c.deps||[],c.exports]);else return v(a)?void 0:A(f("nodefine","No define call for "+a,null,[a]));G()},toUrl:function(a,e){var b=a.lastIndexOf("."),c=null;-1!==b&&(c=a.substring(b,a.length),a=a.substring(0,b));return ma.nameToUrl(m(a,e&&e.id,!0),c)},nameToUrl:function(a,b){var c,m,f,k,q,d;if(e.jsExtRegExp.test(a))k=a+(b||"");else{c=oa.paths;m=oa.pkgs;k=a.split("/");for(q=k.length;0<q;q-=1)if(d=k.slice(0,
q).join("/"),f=m[d],d=c[d]){r(d)&&(d=d[0]);k.splice(0,q,d);break}else if(f){c=a===f.name?f.location+"/"+f.main:f.location;k.splice(0,q,c);break}k=k.join("/");k+=b||(/\?/.test(k)?"":".js");k=("/"===k.charAt(0)||k.match(/^[\w\+\.\-]+:/)?"":oa.baseUrl)+k}return oa.urlArgs?k+((-1===k.indexOf("?")?"?":"&")+oa.urlArgs):k},load:function(a,b){e.load(ma,a,b)},execCb:function(a,e,b,c){return e.apply(c,b)},onScriptLoad:function(a){if("load"===a.type||W.test((a.currentTarget||a.srcElement).readyState))y=null,
a=ca(a),ma.completeLoad(a.id)},onScriptError:function(a){var e=ca(a);if(!v(e.id))return A(f("scripterror","Script error",a,[e.id]))}}}function a(){if(y&&"interactive"===y.readyState)return y;g(document.getElementsByTagName("script"),function(a){if("interactive"===a.readyState)return y=a});return y}var e,m,v,x,z,A,y,C,F,D,H=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,N=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,J=/\.js$/,M=/^\.\//;m=Object.prototype;var E=m.toString,K=m.hasOwnProperty;m=Array.prototype;
var G=m.slice,u=m.splice,S=!("undefined"===typeof window||!navigator||!document),Q=!S&&"undefined"!==typeof importScripts,W=S&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,P="_",aa="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),ca={},Y={},U=[],V=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(t(requirejs))return;Y=requirejs;requirejs=void 0}"undefined"===typeof require||t(require)||(Y=require,require=void 0);e=requirejs=function(a,
b,c,m){var f,k=P;r(a)||"string"===typeof a||(f=a,r(b)?(a=b,b=c,c=m):a=[]);f&&f.context&&(k=f.context);(m=ca[k])||(m=ca[k]=e.s.newContext(k));f&&m.configure(f);return m.require(a,b,c)};e.config=function(a){return e(a)};require||(require=e);e.version="2.0.5";e.jsExtRegExp=/^\/|:|\?|\.js$/;e.isBrowser=S;m=e.s={contexts:ca,newContext:q};e({});k(e);S&&(v=m.head=document.getElementsByTagName("head")[0],x=document.getElementsByTagName("base")[0])&&(v=m.head=x.parentNode);e.onError=function(a){throw a;};
e.load=function(a,e,b){var c=a&&a.config||{},m;if(S)return m=c.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),m.type=c.scriptType||"text/javascript",m.charset="utf-8",m.async=!0,m.setAttribute("data-requirecontext",a.contextName),m.setAttribute("data-requiremodule",e),!m.attachEvent||m.attachEvent.toString&&0>m.attachEvent.toString().indexOf("[native code")||aa?(m.addEventListener("load",a.onScriptLoad,!1),m.addEventListener("error",a.onScriptError,
!1)):(V=!0,m.attachEvent("onreadystatechange",a.onScriptLoad)),m.src=b,C=m,x?v.insertBefore(m,x):v.appendChild(m),C=null,m;Q&&(importScripts(b),a.completeLoad(e))};S&&g(document.getElementsByTagName("script"),function(a){v||(v=a.parentNode);if(z=a.getAttribute("data-main"))return Y.baseUrl||(A=z.split("/"),F=A.pop(),D=A.length?A.join("/")+"/":"./",Y.baseUrl=D,z=F),z=z.replace(J,""),Y.deps=Y.deps?Y.deps.concat(z):[z],!0});define=function(e,b,c){var m,f;"string"!==typeof e&&(c=b,b=e,e=null);r(b)||(c=
b,b=[]);!b.length&&t(c)&&c.length&&(c.toString().replace(H,"").replace(N,function(a,e){b.push(e)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b));V&&(m=C||a())&&(e||(e=m.getAttribute("data-requiremodule")),f=ca[m.getAttribute("data-requirecontext")]);(f?f.defQueue:U).push([e,b,c])};define.amd={jQuery:!0};e.exec=function(a){return eval(a)};e(Y)}})(this);(function(p,t){function r(a){var e=S[a]={},b,c;a=a.split(/\s+/);b=0;for(c=a.length;b<c;b++)e[a[b]]=!0;return e}function s(a,e,b){if(b===t&&1===a.nodeType)if(b="data-"+e.replace(P,"-$1").toLowerCase(),b=a.getAttribute(b),"string"===typeof b){try{b="true"===b?!0:"false"===b?!1:"null"===b?null:u.isNumeric(b)?+b:W.test(b)?u.parseJSON(b):b}catch(c){}u.data(a,e,b)}else b=t;return b}function g(a){for(var e in a)if(("data"!==e||!u.isEmptyObject(a[e]))&&"toJSON"!==e)return!1;return!0}function b(a,e,b){var c=
e+"defer",m=e+"queue",f=e+"mark",k=u._data(a,c);!k||"queue"!==b&&u._data(a,m)||"mark"!==b&&u._data(a,f)||setTimeout(function(){u._data(a,m)||u._data(a,f)||(u.removeData(a,c,!0),k.fire())},0)}function n(){return!1}function l(){return!0}function d(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function c(a,e,b){e=e||0;if(u.isFunction(e))return u.grep(a,function(a,c){return!!e.call(a,c,a)===b});if(e.nodeType)return u.grep(a,function(a,c){return a===e===b});if("string"===typeof e){var c=u.grep(a,
function(a){return 1===a.nodeType});if(Ia.test(e))return u.filter(e,c,!b);e=u.filter(e,c)}return u.grep(a,function(a,c){return 0<=u.inArray(a,e)===b})}function k(a){var e=oa.split("|");a=a.createDocumentFragment();if(a.createElement)for(;e.length;)a.createElement(e.pop());return a}function f(a,e){return u.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function q(a,e){if(1===e.nodeType&&u.hasData(a)){var b,c,m;c=u._data(a);var f=u._data(e,
c),k=c.events;if(k)for(b in delete f.handle,f.events={},k)for(c=0,m=k[b].length;c<m;c++)u.event.add(e,b,k[b][c]);f.data&&(f.data=u.extend({},f.data))}}function a(a,e){var b;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(a),b=e.nodeName.toLowerCase(),"object"===b?e.outerHTML=a.outerHTML:"input"!==b||"checkbox"!==a.type&&"radio"!==a.type?"option"===b?e.selected=a.defaultSelected:"input"===b||"textarea"===b?e.defaultValue=a.defaultValue:"script"===b&&e.text!==
a.text&&(e.text=a.text):(a.checked&&(e.defaultChecked=e.checked=a.checked),e.value!==a.value&&(e.value=a.value)),e.removeAttribute(u.expando),e.removeAttribute("_submit_attached"),e.removeAttribute("_change_attached"))}function e(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function m(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function v(a){var e=(a.nodeName||"").toLowerCase();
"input"===e?m(a):"script"!==e&&"undefined"!==typeof a.getElementsByTagName&&u.grep(a.getElementsByTagName("input"),m)}function x(a,e,b){var c="width"===e?a.offsetWidth:a.offsetHeight,m="width"===e?1:0;if(0<c){if("border"!==b)for(;4>m;m+=2)b||(c-=parseFloat(u.css(a,"padding"+$a[m]))||0),c="margin"===b?c+(parseFloat(u.css(a,b+$a[m]))||0):c-(parseFloat(u.css(a,"border"+$a[m]+"Width"))||0);return c+"px"}c=Aa(a,e);if(0>c||null==c)c=a.style[e];if(gb.test(c))return c;c=parseFloat(c)||0;if(b)for(;4>m;m+=
2)c+=parseFloat(u.css(a,"padding"+$a[m]))||0,"padding"!==b&&(c+=parseFloat(u.css(a,"border"+$a[m]+"Width"))||0),"margin"===b&&(c+=parseFloat(u.css(a,b+$a[m]))||0);return c+"px"}function z(a){return function(e,b){"string"!==typeof e&&(b=e,e="*");if(u.isFunction(b))for(var c=e.toLowerCase().split(nb),m=0,f=c.length,k,q;m<f;m++)k=c[m],(q=/^\+/.test(k))&&(k=k.substr(1)||"*"),k=a[k]=a[k]||[],k[q?"unshift":"push"](b)}}function A(a,e,b,c,m,f){m=m||e.dataTypes[0];f=f||{};f[m]=!0;m=a[m];for(var k=0,q=m?m.length:
0,d=a===Ea,l;k<q&&(d||!l);k++)l=m[k](e,b,c),"string"===typeof l&&(!d||f[l]?l=t:(e.dataTypes.unshift(l),l=A(a,e,b,c,l,f)));!d&&l||f["*"]||(l=A(a,e,b,c,"*",f));return l}function y(a,e){var b,c,m=u.ajaxSettings.flatOptions||{};for(b in e)e[b]!==t&&((m[b]?a:c||(c={}))[b]=e[b]);c&&u.extend(!0,a,c)}function C(a,e,b,c){if(u.isArray(e))u.each(e,function(e,m){b||yb.test(a)?c(a,m):C(a+"["+("object"===typeof m?e:"")+"]",m,b,c)});else if(b||"object"!==u.type(e))c(a,e);else for(var m in e)C(a+"["+m+"]",e[m],b,
c)}function F(){try{return new p.XMLHttpRequest}catch(a){}}function D(){setTimeout(H,0);return hb=u.now()}function H(){hb=t}function N(a,e){var b={};u.each(Rb.concat.apply([],Rb.slice(0,e)),function(){b[this]=a});return b}function J(a){if(!sb[a]){var e=E.body,b=u("<"+a+">").appendTo(e),c=b.css("display");b.remove();if("none"===c||""===c)cb||(cb=E.createElement("iframe"),cb.frameBorder=cb.width=cb.height=0),e.appendChild(cb),Sb&&cb.createElement||(Sb=(cb.contentWindow||cb.contentDocument).document,
Sb.write((u.support.boxModel?"<!doctype html>":"")+"<html><body>"),Sb.close()),b=Sb.createElement(a),Sb.body.appendChild(b),c=u.css(b,"display"),e.removeChild(cb);sb[a]=c}return sb[a]}function M(a){return u.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var E=p.document,K=p.navigator,G=p.location,u=function(){function a(){if(!e.isReady){try{E.documentElement.doScroll("left")}catch(b){setTimeout(a,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,m)},b=p.jQuery,c=p.$,
m,f=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=/\S/,q=/^\s+/,d=/\s+$/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,v=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,x=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,n=/(webkit)[ \/]([\w.]+)/,z=/(opera)(?:.*version)?[ \/]([\w.]+)/,A=/(msie) ([\w.]+)/,C=/(mozilla)(?:.*? rv:([\w.]+))?/,F=/-([a-z]|[0-9])/ig,D=/^-ms-/,H=function(a,e){return(e+"").toUpperCase()},s=K.userAgent,r,N,u=Object.prototype.toString,M=Object.prototype.hasOwnProperty,
J=Array.prototype.push,G=Array.prototype.slice,Q=String.prototype.trim,S=Array.prototype.indexOf,T={};e.fn=e.prototype={constructor:e,init:function(a,b,c){var m;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!b&&E.body)return this.context=E,this[0]=E.body,this.selector=a,this.length=1,this;if("string"===typeof a){m="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:f.exec(a);if(!m||!m[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);
if(m[1])return c=(b=b instanceof e?b[0]:b)?b.ownerDocument||b:E,(a=l.exec(a))?e.isPlainObject(b)?(a=[E.createElement(a[1])],e.fn.attr.call(a,b,!0)):a=[c.createElement(a[1])]:(a=e.buildFragment([m[1]],[c]),a=(a.cacheable?e.clone(a.fragment):a.fragment).childNodes),e.merge(this,a);if((b=E.getElementById(m[2]))&&b.parentNode){if(b.id!==m[2])return c.find(a);this.length=1;this[0]=b}this.context=E;this.selector=a;return this}if(e.isFunction(a))return c.ready(a);a.selector!==t&&(this.selector=a.selector,
this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var m=this.constructor();e.isArray(a)?J.apply(m,a):e.merge(m,a);m.prevObject=this;m.context=this.context;"find"===b?m.selector=this.selector+(this.selector?" ":"")+c:b&&(m.selector=this.selector+"."+b+"("+c+")");return m},each:function(a,
b){return e.each(this,a,b)},ready:function(a){e.bindReady();r.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(e,b){return a.call(e,b,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:[].sort,splice:[].splice};
e.fn.init.prototype=e.fn;e.extend=e.fn.extend=function(){var a,b,c,m,f,k=arguments[0]||{},q=1,d=arguments.length,l=!1;"boolean"===typeof k&&(l=k,k=arguments[1]||{},q=2);"object"===typeof k||e.isFunction(k)||(k={});d===q&&(k=this,--q);for(;q<d;q++)if(null!=(a=arguments[q]))for(b in a)c=k[b],m=a[b],k!==m&&(l&&m&&(e.isPlainObject(m)||(f=e.isArray(m)))?(f?(f=!1,c=c&&e.isArray(c)?c:[]):c=c&&e.isPlainObject(c)?c:{},k[b]=e.extend(l,c,m)):m!==t&&(k[b]=m));return k};e.extend({noConflict:function(a){p.$===
e&&(p.$=c);a&&p.jQuery===e&&(p.jQuery=b);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(!0===a&&!--e.readyWait||!0!==a&&!e.isReady){if(!E.body)return setTimeout(e.ready,1);e.isReady=!0;!0!==a&&0<--e.readyWait||(r.fireWith(E,[e]),e.fn.trigger&&e(E).trigger("ready").off("ready"))}},bindReady:function(){if(!r){r=e.Callbacks("once memory");if("complete"===E.readyState)return setTimeout(e.ready,1);if(E.addEventListener)E.addEventListener("DOMContentLoaded",
N,!1),p.addEventListener("load",e.ready,!1);else if(E.attachEvent){E.attachEvent("onreadystatechange",N);p.attachEvent("onload",e.ready);var b=!1;try{b=null==p.frameElement}catch(c){}E.documentElement.doScroll&&b&&a()}}},isFunction:function(a){return"function"===e.type(a)},isArray:Array.isArray||function(a){return"array"===e.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):T[u.call(a)]||
"object"},isPlainObject:function(a){if(!a||"object"!==e.type(a)||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!M.call(a,"constructor")&&!M.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var c in a);return c===t||M.call(a,c)},isEmptyObject:function(a){for(var e in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(a){if("string"!==typeof a||!a)return null;a=e.trim(a);if(p.JSON&&p.JSON.parse)return p.JSON.parse(a);if(v.test(a.replace(g,
"@").replace(x,"]").replace(y,"")))return(new Function("return "+a))();e.error("Invalid JSON: "+a)},parseXML:function(a){if("string"!==typeof a||!a)return null;var b,c;try{p.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(m){b=t}b&&b.documentElement&&!b.getElementsByTagName("parsererror").length||e.error("Invalid XML: "+a);return b},noop:function(){},globalEval:function(a){a&&k.test(a)&&(p.execScript||function(a){p.eval.call(p,
a)})(a)},camelCase:function(a){return a.replace(D,"ms-").replace(F,H)},nodeName:function(a,e){return a.nodeName&&a.nodeName.toUpperCase()===e.toUpperCase()},each:function(a,b,c){var m,f=0,k=a.length,q=k===t||e.isFunction(a);if(c)if(q)for(m in a){if(!1===b.apply(a[m],c))break}else for(;f<k&&!1!==b.apply(a[f++],c););else if(q)for(m in a){if(!1===b.call(a[m],m,a[m]))break}else for(;f<k&&!1!==b.call(a[f],f,a[f++]););return a},trim:Q?function(a){return null==a?"":Q.call(a)}:function(a){return null==a?
"":a.toString().replace(q,"").replace(d,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var m=e.type(a);null==a.length||"string"===m||"function"===m||"regexp"===m||e.isWindow(a)?J.call(c,a):e.merge(c,a)}return c},inArray:function(a,e,b){var c;if(e){if(S)return S.call(e,a,b);c=e.length;for(b=b?0>b?Math.max(0,c+b):b:0;b<c;b++)if(b in e&&e[b]===a)return b}return-1},merge:function(a,e){var b=a.length,c=0;if("number"===typeof e.length)for(var m=e.length;c<m;c++)a[b++]=e[c];else for(;e[c]!==t;)a[b++]=
e[c++];a.length=b;return a},grep:function(a,e,b){var c=[],m;b=!!b;for(var f=0,k=a.length;f<k;f++)m=!!e(a[f],f),b!==m&&c.push(a[f]);return c},map:function(a,b,c){var m,f,k=[],q=0,d=a.length;if(a instanceof e||d!==t&&"number"===typeof d&&(0<d&&a[0]&&a[d-1]||0===d||e.isArray(a)))for(;q<d;q++)m=b(a[q],q,c),null!=m&&(k[k.length]=m);else for(f in a)m=b(a[f],f,c),null!=m&&(k[k.length]=m);return k.concat.apply([],k)},guid:1,proxy:function(a,b){if("string"===typeof b){var c=a[b];b=a;a=c}if(!e.isFunction(a))return t;
var m=G.call(arguments,2),c=function(){return a.apply(b,m.concat(G.call(arguments)))};c.guid=a.guid=a.guid||c.guid||e.guid++;return c},access:function(a,b,c,m,f,k,q){var d,l=null==c,v=0,g=a.length;if(c&&"object"===typeof c){for(v in c)e.access(a,b,v,c[v],1,k,m);f=1}else if(m!==t){d=q===t&&e.isFunction(m);l&&(d?(d=b,b=function(a,b,c){return d.call(e(a),c)}):(b.call(a,m),b=null));if(b)for(;v<g;v++)b(a[v],c,d?m.call(a[v],v,b(a[v],c)):m,q);f=1}return f?a:l?b.call(a):g?b(a[0],c):k},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=n.exec(a)||z.exec(a)||A.exec(a)||0>a.indexOf("compatible")&&C.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(e,b){return new a.fn.init(e,b)}e.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,m){m&&m instanceof e&&!(m instanceof a)&&(m=a(m));return e.fn.init.call(this,c,m,b)};a.fn.init.prototype=a.fn;var b=a(E);return a},browser:{}});e.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,e){T["[object "+e+"]"]=e.toLowerCase()});s=e.uaMatch(s);s.browser&&(e.browser[s.browser]=!0,e.browser.version=s.version);e.browser.webkit&&(e.browser.safari=!0);k.test("\u00a0")&&(q=/^[\s\xA0]+/,d=/[\s\xA0]+$/);m=e(E);E.addEventListener?N=function(){E.removeEventListener("DOMContentLoaded",N,!1);e.ready()}:E.attachEvent&&(N=function(){"complete"===E.readyState&&(E.detachEvent("onreadystatechange",N),e.ready())});return e}(),S={};u.Callbacks=function(a){a=a?S[a]||r(a):{};var e=[],b=[],c,
m,f,k,q,d,l=function(b){var c,m,f,k;c=0;for(m=b.length;c<m;c++)f=b[c],k=u.type(f),"array"===k?l(f):"function"===k&&(a.unique&&g.has(f)||e.push(f))},v=function(l,v){v=v||[];c=!a.memory||[l,v];f=m=!0;d=k||0;k=0;for(q=e.length;e&&d<q;d++)if(!1===e[d].apply(l,v)&&a.stopOnFalse){c=!0;break}f=!1;e&&(a.once?!0===c?g.disable():e=[]:b&&b.length&&(c=b.shift(),g.fireWith(c[0],c[1])))},g={add:function(){if(e){var a=e.length;l(arguments);f?q=e.length:c&&!0!==c&&(k=a,v(c[0],c[1]))}return this},remove:function(){if(e)for(var b=
arguments,c=0,m=b.length;c<m;c++)for(var k=0;k<e.length&&(b[c]!==e[k]||(f&&k<=q&&(q--,k<=d&&d--),e.splice(k--,1),!a.unique));k++);return this},has:function(a){if(e)for(var b=0,c=e.length;b<c;b++)if(a===e[b])return!0;return!1},empty:function(){e=[];return this},disable:function(){e=b=c=t;return this},disabled:function(){return!e},lock:function(){b=t;c&&!0!==c||g.disable();return this},locked:function(){return!b},fireWith:function(e,m){b&&(f?a.once||b.push([e,m]):a.once&&c||v(e,m));return this},fire:function(){g.fireWith(this,
arguments);return this},fired:function(){return!!m}};return g};var Q=[].slice;u.extend({Deferred:function(a){var e=u.Callbacks("once memory"),b=u.Callbacks("once memory"),c=u.Callbacks("memory"),m="pending",f={resolve:e,reject:b,notify:c},k={done:e.add,fail:b.add,progress:c.add,state:function(){return m},isResolved:e.fired,isRejected:b.fired,then:function(a,e,b){q.done(a).fail(e).progress(b);return this},always:function(){q.done.apply(q,arguments).fail.apply(q,arguments);return this},pipe:function(a,
e,b){return u.Deferred(function(c){u.each({done:[a,"resolve"],fail:[e,"reject"],progress:[b,"notify"]},function(a,e){var b=e[0],m=e[1],f;if(u.isFunction(b))q[a](function(){if((f=b.apply(this,arguments))&&u.isFunction(f.promise))f.promise().then(c.resolve,c.reject,c.notify);else c[m+"With"](this===q?c:this,[f])});else q[a](c[m])})}).promise()},promise:function(a){if(null==a)a=k;else for(var e in k)a[e]=k[e];return a}},q=k.promise({}),d;for(d in f)q[d]=f[d].fire,q[d+"With"]=f[d].fireWith;q.done(function(){m=
"resolved"},b.disable,c.lock).fail(function(){m="rejected"},e.disable,c.lock);a&&a.call(q,q);return q},when:function(a){function e(a){return function(e){c[a]=1<arguments.length?Q.call(arguments,0):e;--q||d.resolveWith(d,c)}}function b(a){return function(e){k[a]=1<arguments.length?Q.call(arguments,0):e;d.notifyWith(l,k)}}var c=Q.call(arguments,0),m=0,f=c.length,k=Array(f),q=f,d=1>=f&&a&&u.isFunction(a.promise)?a:u.Deferred(),l=d.promise();if(1<f){for(;m<f;m++)c[m]&&c[m].promise&&u.isFunction(c[m].promise)?
c[m].promise().then(e(m),d.reject,b(m)):--q;q||d.resolveWith(d,c)}else d!==a&&d.resolveWith(d,f?[a]:[]);return l}});u.support=function(){var a,e,b,c,m,f,k,q,d=E.createElement("div");d.setAttribute("className","t");d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";e=d.getElementsByTagName("*");b=d.getElementsByTagName("a")[0];if(!e||!e.length||!b)return{};c=E.createElement("select");m=c.appendChild(E.createElement("option"));e=
d.getElementsByTagName("input")[0];a={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(b.getAttribute("style")),hrefNormalized:"/a"===b.getAttribute("href"),opacity:/^0.55/.test(b.style.opacity),cssFloat:!!b.style.cssFloat,checkOn:"on"===e.value,optSelected:m.selected,getSetAttribute:"t"!==d.className,enctype:!!E.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==E.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};u.boxModel=a.boxModel="CSS1Compat"===E.compatMode;e.checked=!0;a.noCloneChecked=e.cloneNode(!0).checked;c.disabled=!0;a.optDisabled=!m.disabled;try{delete d.test}catch(l){a.deleteExpando=!1}!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",function(){a.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick"),
d.clearAttributes&&d.clearAttributes());e=E.createElement("input");e.value="t";e.setAttribute("type","radio");a.radioValue="t"===e.value;e.setAttribute("checked","checked");e.setAttribute("name","t");d.appendChild(e);b=E.createDocumentFragment();b.appendChild(d.lastChild);a.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;a.appendChecked=e.checked;b.removeChild(e);b.appendChild(d);if(d.attachEvent)for(k in{submit:1,change:1,focusin:1})e="on"+k,q=e in d,q||(d.setAttribute(e,"return;"),q=
"function"===typeof d[e]),a[k+"Bubbles"]=q;b.removeChild(d);b=c=m=d=e=null;u(function(){var e,b,c,m,k=E.getElementsByTagName("body")[0];k&&(e=E.createElement("div"),e.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",k.insertBefore(e,k.firstChild),d=E.createElement("div"),e.appendChild(d),d.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),q=0===f[0].offsetHeight,
f[0].style.display="",f[1].style.display="none",a.reliableHiddenOffsets=q&&0===f[0].offsetHeight,p.getComputedStyle&&(d.innerHTML="",b=E.createElement("div"),b.style.width="0",b.style.marginRight="0",d.style.width="2px",d.appendChild(b),a.reliableMarginRight=0===(parseInt((p.getComputedStyle(b,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof d.style.zoom&&(d.innerHTML="",d.style.width=d.style.padding="1px",d.style.border=0,d.style.overflow="hidden",d.style.display="inline",d.style.zoom=
1,a.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div style='width:5px;'></div>",a.shrinkWrapBlocks=3!==d.offsetWidth),d.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",d.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
b=d.firstChild,c=b.firstChild,m=b.nextSibling.firstChild.firstChild,m={doesNotAddBorder:5!==c.offsetTop,doesAddBorderForTableAndCells:5===m.offsetTop},c.style.position="fixed",c.style.top="20px",m.fixedPosition=20===c.offsetTop||15===c.offsetTop,c.style.position=c.style.top="",b.style.overflow="hidden",b.style.position="relative",m.subtractsBorderForOverflowNotVisible=-5===c.offsetTop,m.doesNotIncludeMarginInBodyOffset=1!==k.offsetTop,p.getComputedStyle&&(d.style.marginTop="1%",a.pixelMargin="1%"!==
(p.getComputedStyle(d,null)||{marginTop:0}).marginTop),"undefined"!==typeof e.style.zoom&&(e.style.zoom=1),k.removeChild(e),d=null,u.extend(a,m))});return a}();var W=/^(?:\{.*\}|\[.*\])$/,P=/([A-Z])/g;u.extend({cache:{},uuid:0,expando:"jQuery"+(u.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?u.cache[a[u.expando]]:a[u.expando];return!!a&&!g(a)},data:function(a,e,b,c){if(u.acceptData(a)){var m;
m=u.expando;var f="string"===typeof e,k=a.nodeType,q=k?u.cache:a,d=k?a[m]:a[m]&&m,l="events"===e;if(d&&q[d]&&(l||c||q[d].data)||!f||b!==t){d||(k?a[m]=d=++u.uuid:d=m);q[d]||(q[d]={},k||(q[d].toJSON=u.noop));if("object"===typeof e||"function"===typeof e)c?q[d]=u.extend(q[d],e):q[d].data=u.extend(q[d].data,e);m=a=q[d];c||(a.data||(a.data={}),a=a.data);b!==t&&(a[u.camelCase(e)]=b);if(l&&!a[e])return m.events;f?(b=a[e],null==b&&(b=a[u.camelCase(e)])):b=a;return b}}},removeData:function(a,e,b){if(u.acceptData(a)){var c,
m,f,k=u.expando,q=a.nodeType,d=q?u.cache:a,l=q?a[k]:k;if(d[l]){if(e&&(c=b?d[l]:d[l].data)){u.isArray(e)||(e in c?e=[e]:(e=u.camelCase(e),e=e in c?[e]:e.split(" ")));m=0;for(f=e.length;m<f;m++)delete c[e[m]];if(!(b?g:u.isEmptyObject)(c))return}if(!b&&(delete d[l].data,!g(d[l])))return;u.support.deleteExpando||!d.setInterval?delete d[l]:d[l]=null;q&&(u.support.deleteExpando?delete a[k]:a.removeAttribute?a.removeAttribute(k):a[k]=null)}}},_data:function(a,e,b){return u.data(a,e,b,!0)},acceptData:function(a){if(a.nodeName){var e=
u.noData[a.nodeName.toLowerCase()];if(e)return!(!0===e||a.getAttribute("classid")!==e)}return!0}});u.fn.extend({data:function(a,e){var b,c,m,f,k,q=this[0],d=0,l=null;if(a===t){if(this.length&&(l=u.data(q),1===q.nodeType&&!u._data(q,"parsedAttrs"))){m=q.attributes;for(k=m.length;d<k;d++)f=m[d].name,0===f.indexOf("data-")&&(f=u.camelCase(f.substring(5)),s(q,f,l[f]));u._data(q,"parsedAttrs",!0)}return l}if("object"===typeof a)return this.each(function(){u.data(this,a)});b=a.split(".",2);b[1]=b[1]?"."+
b[1]:"";c=b[1]+"!";return u.access(this,function(e){if(e===t)return l=this.triggerHandler("getData"+c,[b[0]]),l===t&&q&&(l=u.data(q,a),l=s(q,a,l)),l===t&&b[1]?this.data(b[0]):l;b[1]=e;this.each(function(){var m=u(this);m.triggerHandler("setData"+c,b);u.data(this,a,e);m.triggerHandler("changeData"+c,b)})},null,e,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){u.removeData(this,a)})}});u.extend({_mark:function(a,e){a&&(e=(e||"fx")+"mark",u._data(a,e,(u._data(a,e)||0)+
1))},_unmark:function(a,e,c){!0!==a&&(c=e,e=a,a=!1);if(e){c=c||"fx";var m=c+"mark";(a=a?0:(u._data(e,m)||1)-1)?u._data(e,m,a):(u.removeData(e,m,!0),b(e,c,"mark"))}},queue:function(a,e,b){var c;if(a)return e=(e||"fx")+"queue",c=u._data(a,e),b&&(!c||u.isArray(b)?c=u._data(a,e,u.makeArray(b)):c.push(b)),c||[]},dequeue:function(a,e){e=e||"fx";var c=u.queue(a,e),m=c.shift(),f={};"inprogress"===m&&(m=c.shift());m&&("fx"===e&&c.unshift("inprogress"),u._data(a,e+".run",f),m.call(a,function(){u.dequeue(a,
e)},f));c.length||(u.removeData(a,e+"queue "+e+".run",!0),b(a,e,"queue"))}});u.fn.extend({queue:function(a,e){var b=2;"string"!==typeof a&&(e=a,a="fx",b--);return arguments.length<b?u.queue(this[0],a):e===t?this:this.each(function(){var b=u.queue(this,a,e);"fx"===a&&"inprogress"!==b[0]&&u.dequeue(this,a)})},dequeue:function(a){return this.each(function(){u.dequeue(this,a)})},delay:function(a,e){a=u.fx?u.fx.speeds[a]||a:a;return this.queue(e||"fx",function(e,b){var c=setTimeout(e,a);b.stop=function(){clearTimeout(c)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,e){function b(){--k||c.resolveWith(m,[m])}"string"!==typeof a&&(e=a,a=t);a=a||"fx";for(var c=u.Deferred(),m=this,f=m.length,k=1,q=a+"defer",d=a+"queue",l=a+"mark",v;f--;)if(v=u.data(m[f],q,t,!0)||(u.data(m[f],d,t,!0)||u.data(m[f],l,t,!0))&&u.data(m[f],q,u.Callbacks("once memory"),!0))k++,v.add(b);b();return c.promise(e)}});var aa=/[\n\t\r]/g,ca=/\s+/,Y=/\r/g,U=/^(?:button|input)$/i,V=/^(?:button|input|object|select|textarea)$/i,
R=/^a(?:rea)?$/i,ba=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Z=u.support.getSetAttribute,na,ka,ja;u.fn.extend({attr:function(a,e){return u.access(this,u.attr,a,e,1<arguments.length)},removeAttr:function(a){return this.each(function(){u.removeAttr(this,a)})},prop:function(a,e){return u.access(this,u.prop,a,e,1<arguments.length)},removeProp:function(a){a=u.propFix[a]||a;return this.each(function(){try{this[a]=t,delete this[a]}catch(e){}})},
addClass:function(a){var e,b,c,m,f,k,q;if(u.isFunction(a))return this.each(function(e){u(this).addClass(a.call(this,e,this.className))});if(a&&"string"===typeof a)for(e=a.split(ca),b=0,c=this.length;b<c;b++)if(m=this[b],1===m.nodeType)if(m.className||1!==e.length){f=" "+m.className+" ";k=0;for(q=e.length;k<q;k++)~f.indexOf(" "+e[k]+" ")||(f+=e[k]+" ");m.className=u.trim(f)}else m.className=a;return this},removeClass:function(a){var e,b,c,m,f,k,q;if(u.isFunction(a))return this.each(function(e){u(this).removeClass(a.call(this,
e,this.className))});if(a&&"string"===typeof a||a===t)for(e=(a||"").split(ca),b=0,c=this.length;b<c;b++)if(m=this[b],1===m.nodeType&&m.className)if(a){f=(" "+m.className+" ").replace(aa," ");k=0;for(q=e.length;k<q;k++)f=f.replace(" "+e[k]+" "," ");m.className=u.trim(f)}else m.className="";return this},toggleClass:function(a,e){var b=typeof a,c="boolean"===typeof e;return u.isFunction(a)?this.each(function(b){u(this).toggleClass(a.call(this,b,this.className,e),e)}):this.each(function(){if("string"===
b)for(var m,f=0,k=u(this),q=e,d=a.split(ca);m=d[f++];)q=c?q:!k.hasClass(m),k[q?"addClass":"removeClass"](m);else if("undefined"===b||"boolean"===b)this.className&&u._data(this,"__className__",this.className),this.className=this.className||!1===a?"":u._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var e=0,b=this.length;e<b;e++)if(1===this[e].nodeType&&-1<(" "+this[e].className+" ").replace(aa," ").indexOf(a))return!0;return!1},val:function(a){var e,b,c,m=this[0];if(arguments.length)return c=
u.isFunction(a),this.each(function(b){var m=u(this);1===this.nodeType&&(b=c?a.call(this,b,m.val()):a,null==b?b="":"number"===typeof b?b+="":u.isArray(b)&&(b=u.map(b,function(a){return null==a?"":a+""})),e=u.valHooks[this.type]||u.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&e.set(this,b,"value")!==t||(this.value=b))});if(m){if((e=u.valHooks[m.type]||u.valHooks[m.nodeName.toLowerCase()])&&"get"in e&&(b=e.get(m,"value"))!==t)return b;b=m.value;return"string"===typeof b?b.replace(Y,""):null==
b?"":b}}});u.extend({valHooks:{option:{get:function(a){var e=a.attributes.value;return!e||e.specified?a.value:a.text}},select:{get:function(a){var e,b,c=a.selectedIndex,m=[],f=a.options,k="select-one"===a.type;if(0>c)return null;a=k?c:0;for(b=k?c+1:f.length;a<b;a++)if(e=f[a],e.selected&&!((u.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&u.nodeName(e.parentNode,"optgroup"))){e=u(e).val();if(k)return e;m.push(e)}return k&&!m.length&&f.length?u(f[c]).val():
m},set:function(a,e){var b=u.makeArray(e);u(a).find("option").each(function(){this.selected=0<=u.inArray(u(this).val(),b)});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,e,b,c){var m,f,k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(c&&e in u.attrFn)return u(a)[e](b);if("undefined"===typeof a.getAttribute)return u.prop(a,e,b);if(c=1!==k||!u.isXMLDoc(a))e=e.toLowerCase(),f=u.attrHooks[e]||(ba.test(e)?ka:na);if(b!==
t)if(null===b)u.removeAttr(a,e);else{if(f&&"set"in f&&c&&(m=f.set(a,b,e))!==t)return m;a.setAttribute(e,""+b);return b}else{if(f&&"get"in f&&c&&null!==(m=f.get(a,e)))return m;m=a.getAttribute(e);return null===m?t:m}}},removeAttr:function(a,e){var b,c,m,f,k,q=0;if(e&&1===a.nodeType)for(c=e.toLowerCase().split(ca),f=c.length;q<f;q++)if(m=c[q])b=u.propFix[m]||m,(k=ba.test(m))||u.attr(a,m,""),a.removeAttribute(Z?m:b),k&&b in a&&(a[b]=!1)},attrHooks:{type:{set:function(a,e){if(U.test(a.nodeName)&&a.parentNode)u.error("type property can't be changed");
else if(!u.support.radioValue&&"radio"===e&&u.nodeName(a,"input")){var b=a.value;a.setAttribute("type",e);b&&(a.value=b);return e}}},value:{get:function(a,e){return na&&u.nodeName(a,"button")?na.get(a,e):e in a?a.value:null},set:function(a,e,b){if(na&&u.nodeName(a,"button"))return na.set(a,e,b);a.value=e}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,e,b){var c,m,f;f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if(f=1!==f||!u.isXMLDoc(a))e=u.propFix[e]||e,m=u.propHooks[e];return b!==t?m&&"set"in m&&(c=m.set(a,b,e))!==t?c:a[e]=b:m&&"get"in m&&null!==(c=m.get(a,e))?c:a[e]}},propHooks:{tabIndex:{get:function(a){var e=a.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):V.test(a.nodeName)||R.test(a.nodeName)&&a.href?0:t}}}});u.attrHooks.tabindex=
u.propHooks.tabIndex;ka={get:function(a,e){var b,c=u.prop(a,e);return!0===c||"boolean"!==typeof c&&(b=a.getAttributeNode(e))&&!1!==b.nodeValue?e.toLowerCase():t},set:function(a,e,b){!1===e?u.removeAttr(a,b):(e=u.propFix[b]||b,e in a&&(a[e]=!0),a.setAttribute(b,b.toLowerCase()));return b}};Z||(ja={name:!0,id:!0,coords:!0},na=u.valHooks.button={get:function(a,e){var b;return(b=a.getAttributeNode(e))&&(ja[e]?""!==b.nodeValue:b.specified)?b.nodeValue:t},set:function(a,e,b){var c=a.getAttributeNode(b);
c||(c=E.createAttribute(b),a.setAttributeNode(c));return c.nodeValue=e+""}},u.attrHooks.tabindex.set=na.set,u.each(["width","height"],function(a,e){u.attrHooks[e]=u.extend(u.attrHooks[e],{set:function(a,b){if(""===b)return a.setAttribute(e,"auto"),b}})}),u.attrHooks.contenteditable={get:na.get,set:function(a,e,b){""===e&&(e="false");na.set(a,e,b)}});u.support.hrefNormalized||u.each(["href","src","width","height"],function(a,e){u.attrHooks[e]=u.extend(u.attrHooks[e],{get:function(a){a=a.getAttribute(e,
2);return null===a?t:a}})});u.support.style||(u.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||t},set:function(a,e){return a.style.cssText=""+e}});u.support.optSelected||(u.propHooks.selected=u.extend(u.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));u.support.enctype||(u.propFix.enctype="encoding");u.support.checkOn||u.each(["radio","checkbox"],function(){u.valHooks[this]={get:function(a){return null===
a.getAttribute("value")?"on":a.value}}});u.each(["radio","checkbox"],function(){u.valHooks[this]=u.extend(u.valHooks[this],{set:function(a,e){if(u.isArray(e))return a.checked=0<=u.inArray(u(a).val(),e)}})});var ea=/^(?:textarea|input|select)$/i,da=/^([^\.]*)?(?:\.(.+))?$/,wa=/(?:^|\s)hover(\.\S+)?\b/,L=/^key/,Pa=/^(?:mouse|contextmenu)|click/,Ua=/^(?:focusinfocus|focusoutblur)$/,ra=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,db=function(a){if(a=ra.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&RegExp("(?:^|\\s)"+
a[3]+"(?:\\s|$)");return a},Qa=function(a){return u.event.special.hover?a:a.replace(wa,"mouseenter$1 mouseleave$1")};u.event={add:function(a,e,b,c,m){var f,k,q,d,l,v,g,x,y;if(3!==a.nodeType&&8!==a.nodeType&&e&&b&&(f=u._data(a))){b.handler&&(g=b,b=g.handler,m=g.selector);b.guid||(b.guid=u.guid++);q=f.events;q||(f.events=q={});k=f.handle;k||(f.handle=k=function(a){return"undefined"===typeof u||a&&u.event.triggered===a.type?t:u.event.dispatch.apply(k.elem,arguments)},k.elem=a);e=u.trim(Qa(e)).split(" ");
for(f=0;f<e.length;f++)d=da.exec(e[f])||[],l=d[1],v=(d[2]||"").split(".").sort(),y=u.event.special[l]||{},l=(m?y.delegateType:y.bindType)||l,y=u.event.special[l]||{},d=u.extend({type:l,origType:d[1],data:c,handler:b,guid:b.guid,selector:m,quick:m&&db(m),namespace:v.join(".")},g),x=q[l],x||(x=q[l]=[],x.delegateCount=0,y.setup&&!1!==y.setup.call(a,c,v,k)||(a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k))),y.add&&(y.add.call(a,d),d.handler.guid||(d.handler.guid=b.guid)),
m?x.splice(x.delegateCount++,0,d):x.push(d),u.event.global[l]=!0;a=null}},global:{},remove:function(a,e,b,c,m){var f=u.hasData(a)&&u._data(a),k,q,d,l,v,g,x,y,n,z;if(f&&(x=f.events)){e=u.trim(Qa(e||"")).split(" ");for(k=0;k<e.length;k++)if(q=da.exec(e[k])||[],d=l=q[1],q=q[2],d){y=u.event.special[d]||{};d=(c?y.delegateType:y.bindType)||d;n=x[d]||[];v=n.length;q=q?RegExp("(^|\\.)"+q.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(g=0;g<n.length;g++)z=n[g],!m&&l!==z.origType||b&&b.guid!==
z.guid||q&&!q.test(z.namespace)||c&&!(c===z.selector||"**"===c&&z.selector)||(n.splice(g--,1),z.selector&&n.delegateCount--,y.remove&&y.remove.call(a,z));0===n.length&&v!==n.length&&(y.teardown&&!1!==y.teardown.call(a,q)||u.removeEvent(a,d,f.handle),delete x[d])}else for(d in x)u.event.remove(a,d+e[k],b,c,!0);if(u.isEmptyObject(x)){if(e=f.handle)e.elem=null;u.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(a,e,b,c){if(!b||3!==b.nodeType&&
8!==b.nodeType){var m=a.type||a,f=[],k,q,d,l,v;if(!Ua.test(m+u.event.triggered)&&(0<=m.indexOf("!")&&(m=m.slice(0,-1),k=!0),0<=m.indexOf(".")&&(f=m.split("."),m=f.shift(),f.sort()),b&&!u.event.customEvent[m]||u.event.global[m]))if(a="object"===typeof a?a[u.expando]?a:new u.Event(m,a):new u.Event(m),a.type=m,a.isTrigger=!0,a.exclusive=k,a.namespace=f.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+f.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,k=0>m.indexOf(":")?"on"+m:"",b){if(a.result=t,a.target||
(a.target=b),e=null!=e?u.makeArray(e):[],e.unshift(a),d=u.event.special[m]||{},!d.trigger||!1!==d.trigger.apply(b,e)){v=[[b,d.bindType||m]];if(!c&&!d.noBubble&&!u.isWindow(b)){l=d.delegateType||m;f=Ua.test(l+m)?b:b.parentNode;for(q=null;f;f=f.parentNode)v.push([f,l]),q=f;q&&q===b.ownerDocument&&v.push([q.defaultView||q.parentWindow||p,l])}for(q=0;q<v.length&&!a.isPropagationStopped();q++)f=v[q][0],a.type=v[q][1],(l=(u._data(f,"events")||{})[a.type]&&u._data(f,"handle"))&&l.apply(f,e),(l=k&&f[k])&&
u.acceptData(f)&&!1===l.apply(f,e)&&a.preventDefault();a.type=m;c||a.isDefaultPrevented()||d._default&&!1!==d._default.apply(b.ownerDocument,e)||"click"===m&&u.nodeName(b,"a")||!u.acceptData(b)||!k||!b[m]||("focus"===m||"blur"===m)&&0===a.target.offsetWidth||u.isWindow(b)||((q=b[k])&&(b[k]=null),u.event.triggered=m,b[m](),u.event.triggered=t,q&&(b[k]=q));return a.result}}else for(q in b=u.cache,b)b[q].events&&b[q].events[m]&&u.event.trigger(a,e,b[q].handle.elem,!0)}},dispatch:function(a){a=u.event.fix(a||
p.event);var e=(u._data(this,"events")||{})[a.type]||[],b=e.delegateCount,c=[].slice.call(arguments,0),m=!a.exclusive&&!a.namespace,f=u.event.special[a.type]||{},k=[],q,d,l,v,g,x,y;c[0]=a;a.delegateTarget=this;if(!f.preDispatch||!1!==f.preDispatch.call(this,a)){if(b&&(!a.button||"click"!==a.type))for(l=u(this),l.context=this.ownerDocument||this,d=a.target;d!=this;d=d.parentNode||this)if(!0!==d.disabled){g={};x=[];l[0]=d;for(q=0;q<b;q++){v=e[q];y=v.selector;if(g[y]===t){var n=g,z=y,A;if(v.quick){A=
v.quick;var C=d.attributes||{};A=(!A[1]||d.nodeName.toLowerCase()===A[1])&&(!A[2]||(C.id||{}).value===A[2])&&(!A[3]||A[3].test((C["class"]||{}).value))}else A=l.is(y);n[z]=A}g[y]&&x.push(v)}x.length&&k.push({elem:d,matches:x})}e.length>b&&k.push({elem:this,matches:e.slice(b)});for(q=0;q<k.length&&!a.isPropagationStopped();q++)for(b=k[q],a.currentTarget=b.elem,e=0;e<b.matches.length&&!a.isImmediatePropagationStopped();e++)if(v=b.matches[e],m||!a.namespace&&!v.namespace||a.namespace_re&&a.namespace_re.test(v.namespace))a.data=
v.data,a.handleObj=v,v=((u.event.special[v.origType]||{}).handle||v.handler).apply(b.elem,c),v!==t&&(a.result=v,!1===v&&(a.preventDefault(),a.stopPropagation()));f.postDispatch&&f.postDispatch.call(this,a);return a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,e){null==a.which&&
(a.which=null!=e.charCode?e.charCode:e.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,e){var b,c,m=e.button,f=e.fromElement;null==a.pageX&&null!=e.clientX&&(b=a.target.ownerDocument||E,c=b.documentElement,b=b.body,a.pageX=e.clientX+(c&&c.scrollLeft||b&&b.scrollLeft||0)-(c&&c.clientLeft||b&&b.clientLeft||0),a.pageY=e.clientY+(c&&c.scrollTop||b&&b.scrollTop||0)-(c&&c.clientTop||b&&
b.clientTop||0));!a.relatedTarget&&f&&(a.relatedTarget=f===a.target?e.toElement:f);a.which||m===t||(a.which=m&1?1:m&2?3:m&4?2:0);return a}},fix:function(a){if(a[u.expando])return a;var e,b,c=a,m=u.event.fixHooks[a.type]||{},f=m.props?this.props.concat(m.props):this.props;a=u.Event(c);for(e=f.length;e;)b=f[--e],a[b]=c[b];a.target||(a.target=c.srcElement||E);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===t&&(a.metaKey=a.ctrlKey);return m.filter?m.filter(a,c):a},special:{ready:{setup:u.bindReady},
load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,e,b){u.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(a,e,b,c){a=u.extend(new u.Event,b,{type:a,isSimulated:!0,originalEvent:{}});c?u.event.trigger(a,null,e):u.event.dispatch.call(e,a);a.isDefaultPrevented()&&b.preventDefault()}};u.event.handle=u.event.dispatch;u.removeEvent=E.removeEventListener?function(a,
e,b){a.removeEventListener&&a.removeEventListener(e,b,!1)}:function(a,e,b){a.detachEvent&&a.detachEvent("on"+e,b)};u.Event=function(a,e){if(!(this instanceof u.Event))return new u.Event(a,e);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?l:n):this.type=a;e&&u.extend(this,e);this.timeStamp=a&&a.timeStamp||u.now();this[u.expando]=!0};u.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
l;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=l;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l;this.stopPropagation()},isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n};u.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,e){u.event.special[a]={delegateType:e,
bindType:e,handle:function(a){var b=a.relatedTarget,c=a.handleObj,m;if(!b||b!==this&&!u.contains(this,b))a.type=c.origType,m=c.handler.apply(this,arguments),a.type=e;return m}}});u.support.submitBubbles||(u.event.special.submit={setup:function(){if(u.nodeName(this,"form"))return!1;u.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=u.nodeName(a,"input")||u.nodeName(a,"button")?a.form:t)&&!a._submit_attached&&(u.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),
a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&u.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(u.nodeName(this,"form"))return!1;u.event.remove(this,"._submit")}});u.support.changeBubbles||(u.event.special.change={setup:function(){if(ea.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)u.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),u.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,u.event.simulate("change",this,a,!0))});return!1}u.event.add(this,"beforeactivate._change",function(a){a=a.target;ea.test(a.nodeName)&&!a._change_attached&&(u.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||u.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var e=a.target;if(this!==e||a.isSimulated||
a.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){u.event.remove(this,"._change");return ea.test(this.nodeName)}});u.support.focusinBubbles||u.each({focus:"focusin",blur:"focusout"},function(a,e){var b=0,c=function(a){u.event.simulate(e,a.target,u.event.fix(a),!0)};u.event.special[e]={setup:function(){0===b++&&E.addEventListener(a,c,!0)},teardown:function(){0===--b&&E.removeEventListener(a,c,!0)}}});u.fn.extend({on:function(a,
e,b,c,m){var f,k;if("object"===typeof a){"string"!==typeof e&&(b=b||e,e=t);for(k in a)this.on(k,e,b,a[k],m);return this}null==b&&null==c?(c=e,b=e=t):null==c&&("string"===typeof e?(c=b,b=t):(c=b,b=e,e=t));if(!1===c)c=n;else if(!c)return this;1===m&&(f=c,c=function(a){u().off(a);return f.apply(this,arguments)},c.guid=f.guid||(f.guid=u.guid++));return this.each(function(){u.event.add(this,a,c,b,e)})},one:function(a,e,b,c){return this.on(a,e,b,c,1)},off:function(a,e,b){if(a&&a.preventDefault&&a.handleObj){var c=
a.handleObj;u(a.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler);return this}if("object"===typeof a){for(c in a)this.off(c,e,a[c]);return this}if(!1===e||"function"===typeof e)b=e,e=t;!1===b&&(b=n);return this.each(function(){u.event.remove(this,a,b,e)})},bind:function(a,e,b){return this.on(a,null,e,b)},unbind:function(a,e){return this.off(a,null,e)},live:function(a,e,b){u(this.context).on(a,this.selector,e,b);return this},die:function(a,e){u(this.context).off(a,
this.selector||"**",e);return this},delegate:function(a,e,b,c){return this.on(e,a,b,c)},undelegate:function(a,e,b){return 1==arguments.length?this.off(a,"**"):this.off(e,a,b)},trigger:function(a,e){return this.each(function(){u.event.trigger(a,e,this)})},triggerHandler:function(a,e){if(this[0])return u.event.trigger(a,e,this[0],!0)},toggle:function(a){var e=arguments,b=a.guid||u.guid++,c=0,m=function(b){var m=(u._data(this,"lastToggle"+a.guid)||0)%c;u._data(this,"lastToggle"+a.guid,m+1);b.preventDefault();
return e[m].apply(this,arguments)||!1};for(m.guid=b;c<e.length;)e[c++].guid=b;return this.click(m)},hover:function(a,e){return this.mouseenter(a).mouseleave(e||a)}});u.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,e){u.fn[e]=function(a,b){null==b&&(b=a,a=null);return 0<arguments.length?this.on(e,null,a,b):this.trigger(e)};
u.attrFn&&(u.attrFn[e]=!0);L.test(e)&&(u.event.fixHooks[e]=u.event.keyHooks);Pa.test(e)&&(u.event.fixHooks[e]=u.event.mouseHooks)});(function(){function a(e,b,m,f,k,q){k=0;for(var d=f.length;k<d;k++){var l=f[k];if(l){for(var v=!1,l=l[e];l;){if(l[c]===m){v=f[l.sizset];break}1!==l.nodeType||q||(l[c]=m,l.sizset=k);if(l.nodeName.toLowerCase()===b){v=l;break}l=l[e]}f[k]=v}}}function e(a,b,m,f,k,q){k=0;for(var d=f.length;k<d;k++){var l=f[k];if(l){for(var v=!1,l=l[a];l;){if(l[c]===m){v=f[l.sizset];break}if(1===
l.nodeType)if(q||(l[c]=m,l.sizset=k),"string"!==typeof b){if(l===b){v=!0;break}}else if(0<g.filter(b,[l]).length){v=l;break}l=l[a]}f[k]=v}}}var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,c="sizcache"+(Math.random()+"").replace(".",""),m=0,f=Object.prototype.toString,k=!1,q=!0,d=/\\/g,l=/\r\n/g,v=/\W/;[0,0].sort(function(){q=!1;return 0});var g=function(a,e,c,m){c=c||[];var k=e=e||E;if(1!==e.nodeType&&9!==
e.nodeType)return[];if(!a||"string"!==typeof a)return c;var q,d,l,v,x,z=!0,A=g.isXML(e),F=[],D=a;do if(b.exec(""),q=b.exec(D))if(D=q[3],F.push(q[1]),q[2]){v=q[3];break}while(q);if(1<F.length&&n.exec(a))if(2===F.length&&y.relative[F[0]])d=p(F[0]+F[1],e,m);else for(d=y.relative[F[0]]?[e]:g(F.shift(),e);F.length;)a=F.shift(),y.relative[a]&&(a+=F.shift()),d=p(a,d,m);else if(!m&&1<F.length&&9===e.nodeType&&!A&&y.match.ID.test(F[0])&&!y.match.ID.test(F[F.length-1])&&(q=g.find(F.shift(),e,A),e=q.expr?g.filter(q.expr,
q.set)[0]:q.set[0]),e)for(q=m?{expr:F.pop(),set:C(m)}:g.find(F.pop(),1!==F.length||"~"!==F[0]&&"+"!==F[0]||!e.parentNode?e:e.parentNode,A),d=q.expr?g.filter(q.expr,q.set):q.set,0<F.length?l=C(d):z=!1;F.length;)q=x=F.pop(),y.relative[x]?q=F.pop():x="",null==q&&(q=e),y.relative[x](l,q,A);else l=[];l||(l=d);l||g.error(x||a);if("[object Array]"===f.call(l))if(z)if(e&&1===e.nodeType)for(a=0;null!=l[a];a++)l[a]&&(!0===l[a]||1===l[a].nodeType&&g.contains(e,l[a]))&&c.push(d[a]);else for(a=0;null!=l[a];a++)l[a]&&
1===l[a].nodeType&&c.push(d[a]);else c.push.apply(c,l);else C(l,c);v&&(g(v,k,c,m),g.uniqueSort(c));return c};g.uniqueSort=function(a){if(D&&(k=q,a.sort(D),k))for(var e=1;e<a.length;e++)a[e]===a[e-1]&&a.splice(e--,1);return a};g.matches=function(a,e){return g(a,null,null,e)};g.matchesSelector=function(a,e){return 0<g(e,null,null,[a]).length};g.find=function(a,e,b){var c,m,f,k,q,l;if(!a)return[];m=0;for(f=y.order.length;m<f;m++)if(q=y.order[m],k=y.leftMatch[q].exec(a))if(l=k[1],k.splice(1,1),"\\"!==
l.substr(l.length-1)&&(k[1]=(k[1]||"").replace(d,""),c=y.find[q](k,e,b),null!=c)){a=a.replace(y.match[q],"");break}c||(c="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName("*"):[]);return{set:c,expr:a}};g.filter=function(a,e,b,c){for(var m,f,k,q,d,l,v,x,n=a,z=[],A=e,C=e&&e[0]&&g.isXML(e[0]);a&&e.length;){for(k in y.filter)if(null!=(m=y.leftMatch[k].exec(a))&&m[2]&&(l=y.filter[k],d=m[1],f=!1,m.splice(1,1),"\\"!==d.substr(d.length-1))){A===z&&(z=[]);if(y.preFilter[k])if(m=y.preFilter[k](m,
A,b,z,c,C),!m)f=q=!0;else if(!0===m)continue;if(m)for(v=0;null!=(d=A[v]);v++)d&&(q=l(d,m,v,A),x=c^q,b&&null!=q?x?f=!0:A[v]=!1:x&&(z.push(d),f=!0));if(q!==t){b||(A=z);a=a.replace(y.match[k],"");if(!f)return[];break}}if(a===n)if(null==f)g.error(a);else break;n=a}return A};g.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var x=g.getText=function(a){var e,b;e=a.nodeType;var c="";if(e)if(1===e||9===e||11===e){if("string"===typeof a.textContent)return a.textContent;if("string"===
typeof a.innerText)return a.innerText.replace(l,"");for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else{if(3===e||4===e)return a.nodeValue}else for(e=0;b=a[e];e++)8!==b.nodeType&&(c+=x(b));return c},y=g.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,e){var b="string"===typeof e,c=b&&!v.test(e),
b=b&&!c;c&&(e=e.toLowerCase());for(var c=0,m=a.length,f;c<m;c++)if(f=a[c]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[c]=b||f&&f.nodeName.toLowerCase()===e?f||!1:f===e}b&&g.filter(e,a,!0)},">":function(a,e){var b,c="string"===typeof e,m=0,f=a.length;if(c&&!v.test(e))for(e=e.toLowerCase();m<f;m++){if(b=a[m])b=b.parentNode,a[m]=b.nodeName.toLowerCase()===e?b:!1}else{for(;m<f;m++)(b=a[m])&&(a[m]=c?b.parentNode:b.parentNode===e);c&&g.filter(e,a,!0)}},"":function(b,c,f){var k,q=m++,d=e;"string"!==
typeof c||v.test(c)||(k=c=c.toLowerCase(),d=a);d("parentNode",c,q,b,k,f)},"~":function(b,c,f){var k,q=m++,d=e;"string"!==typeof c||v.test(c)||(k=c=c.toLowerCase(),d=a);d("previousSibling",c,q,b,k,f)}},find:{ID:function(a,e,b){if("undefined"!==typeof e.getElementById&&!b)return(a=e.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,e){if("undefined"!==typeof e.getElementsByName){for(var b=[],c=e.getElementsByName(a[1]),m=0,f=c.length;m<f;m++)c[m].getAttribute("name")===a[1]&&b.push(c[m]);
return 0===b.length?null:b}},TAG:function(a,e){if("undefined"!==typeof e.getElementsByTagName)return e.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,e,b,c,m,f){a=" "+a[1].replace(d,"")+" ";if(f)return a;f=0;for(var k;null!=(k=e[f]);f++)k&&(m^(k.className&&0<=(" "+k.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?b||c.push(k):b&&(e[f]=!1));return!1},ID:function(a){return a[1].replace(d,"")},TAG:function(a,e){return a[1].replace(d,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||
g.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var e=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=e[1]+(e[2]||1)-0;a[3]=e[3]-0}else a[2]&&g.error(a[0]);a[0]=m++;return a},ATTR:function(a,e,b,c,m,f){e=a[1]=a[1].replace(d,"");!f&&y.attrMap[e]&&(a[1]=y.attrMap[e]);a[4]=(a[4]||a[5]||"").replace(d,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,e,c,m,f){if("not"===a[1])if(1<(b.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=
g(a[3],null,null,e);else return a=g.filter(a[3],e,c,1^f),c||m.push.apply(m,a),!1;else if(y.match.POS.test(a[0])||y.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,e,b){return!!g(b[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var e=a.getAttribute("type"),b=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===b&&(e===b||null===e)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&
"password"===a.type},submit:function(a){var e=a.nodeName.toLowerCase();return("input"===e||"button"===e)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var e=a.nodeName.toLowerCase();return("input"===e||"button"===e)&&"reset"===a.type},button:function(a){var e=a.nodeName.toLowerCase();return"input"===e&&"button"===a.type||"button"===e},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,e){return 0===e},last:function(a,e,b,c){return e===c.length-1},even:function(a,e){return 0===e%2},odd:function(a,e){return 1===e%2},lt:function(a,e,b){return e<b[3]-0},gt:function(a,e,b){return e>b[3]-0},nth:function(a,e,b){return b[3]-0===e},eq:function(a,e,b){return b[3]-0===e}},filter:{PSEUDO:function(a,e,b,c){var m=e[1],f=y.filters[m];if(f)return f(a,b,e,c);if("contains"===m)return 0<=(a.textContent||a.innerText||x([a])||"").indexOf(e[3]);
if("not"===m){e=e[3];b=0;for(c=e.length;b<c;b++)if(e[b]===a)return!1;return!0}g.error(m)},CHILD:function(a,e){var b,m,f,k,q,d;b=e[1];d=a;switch(b){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===b)return!0;d=a;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case "nth":b=e[2];m=e[3];if(1===b&&0===m)return!0;f=e[0];if((k=a.parentNode)&&(k[c]!==f||!a.nodeIndex)){q=0;for(d=k.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++q);
k[c]=f}d=a.nodeIndex-m;return 0===b?0===d:0===d%b&&0<=d/b}},ID:function(a,e){return 1===a.nodeType&&a.getAttribute("id")===e},TAG:function(a,e){return"*"===e&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===e},CLASS:function(a,e){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(e)},ATTR:function(a,e){var b=e[1],b=g.attr?g.attr(a,b):y.attrHandle[b]?y.attrHandle[b](a):null!=a[b]?a[b]:a.getAttribute(b),c=b+"",m=e[2],f=e[4];return null==b?"!="===m:!m&&g.attr?null!=b:"="===m?
c===f:"*="===m?0<=c.indexOf(f):"~="===m?0<=(" "+c+" ").indexOf(f):f?"!="===m?c!==f:"^="===m?0===c.indexOf(f):"$="===m?c.substr(c.length-f.length)===f:"|="===m?c===f||c.substr(0,f.length+1)===f+"-":!1:c&&!1!==b},POS:function(a,e,b,c){var m=y.setFilters[e[2]];if(m)return m(a,b,e,c)}}},n=y.match.POS,z=function(a,e){return"\\"+(e-0+1)},A;for(A in y.match)y.match[A]=RegExp(y.match[A].source+/(?![^\[]*\])(?![^\(]*\))/.source),y.leftMatch[A]=RegExp(/(^(?:.|\r|\n)*?)/.source+y.match[A].source.replace(/\\(\d+)/g,
z));y.match.globalPOS=n;var C=function(a,e){a=Array.prototype.slice.call(a,0);return e?(e.push.apply(e,a),e):a};try{Array.prototype.slice.call(E.documentElement.childNodes,0)[0].nodeType}catch(F){C=function(a,e){var b=0,c=e||[];if("[object Array]"===f.call(a))Array.prototype.push.apply(c,a);else if("number"===typeof a.length)for(var m=a.length;b<m;b++)c.push(a[b]);else for(;a[b];b++)c.push(a[b]);return c}}var D,H;E.documentElement.compareDocumentPosition?D=function(a,e){return a===e?(k=!0,0):a.compareDocumentPosition&&
e.compareDocumentPosition?a.compareDocumentPosition(e)&4?-1:1:a.compareDocumentPosition?-1:1}:(D=function(a,e){if(a===e)return k=!0,0;if(a.sourceIndex&&e.sourceIndex)return a.sourceIndex-e.sourceIndex;var b,c,m=[],f=[];b=a.parentNode;c=e.parentNode;var q=b;if(b===c)return H(a,e);if(!b)return-1;if(!c)return 1;for(;q;)m.unshift(q),q=q.parentNode;for(q=c;q;)f.unshift(q),q=q.parentNode;b=m.length;c=f.length;for(q=0;q<b&&q<c;q++)if(m[q]!==f[q])return H(m[q],f[q]);return q===b?H(a,f[q],-1):H(m[q],e,1)},
H=function(a,e,b){if(a===e)return b;for(a=a.nextSibling;a;){if(a===e)return-1;a=a.nextSibling}return 1});(function(){var a=E.createElement("div"),e="script"+(new Date).getTime(),b=E.documentElement;a.innerHTML="<a name='"+e+"'/>";b.insertBefore(a,b.firstChild);E.getElementById(e)&&(y.find.ID=function(a,e,b){if("undefined"!==typeof e.getElementById&&!b)return(e=e.getElementById(a[1]))?e.id===a[1]||"undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id").nodeValue===a[1]?[e]:t:[]},y.filter.ID=
function(a,e){var b="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&b&&b.nodeValue===e});b.removeChild(a);b=a=null})();(function(){var a=E.createElement("div");a.appendChild(E.createComment(""));0<a.getElementsByTagName("*").length&&(y.find.TAG=function(a,e){var b=e.getElementsByTagName(a[1]);if("*"===a[1]){for(var c=[],m=0;b[m];m++)1===b[m].nodeType&&c.push(b[m]);b=c}return b});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(y.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();E.querySelectorAll&&function(){var a=g,e=E.createElement("div");e.innerHTML="<p class='TEST'></p>";if(!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){g=function(e,b,c,m){b=b||E;if(!m&&!g.isXML(b)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(e);if(f&&(1===b.nodeType||9===b.nodeType)){if(f[1])return C(b.getElementsByTagName(e),c);if(f[2]&&y.find.CLASS&&b.getElementsByClassName)return C(b.getElementsByClassName(f[2]),
c)}if(9===b.nodeType){if("body"===e&&b.body)return C([b.body],c);if(f&&f[3]){var k=b.getElementById(f[3]);if(k&&k.parentNode){if(k.id===f[3])return C([k],c)}else return C([],c)}try{return C(b.querySelectorAll(e),c)}catch(q){}}else if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){var f=b,d=(k=b.getAttribute("id"))||"__sizzle__",l=b.parentNode,v=/^\s*[+~]/.test(e);k?d=d.replace(/'/g,"\\$&"):b.setAttribute("id",d);v&&l&&(b=b.parentNode);try{if(!v||l)return C(b.querySelectorAll("[id='"+d+"'] "+
e),c)}catch(x){}finally{k||f.removeAttribute("id")}}}return a(e,b,c,m)};for(var b in a)g[b]=a[b];e=null}}();(function(){var a=E.documentElement,e=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(e){var b=!e.call(E.createElement("div"),"div"),c=!1;try{e.call(E.documentElement,"[test!='']:sizzle")}catch(m){c=!0}g.matchesSelector=function(a,m){m=m.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!g.isXML(a))try{if(c||!y.match.PSEUDO.test(m)&&!/!=/.test(m)){var f=e.call(a,
m);if(f||!b||a.document&&11!==a.document.nodeType)return f}}catch(k){}return 0<g(m,null,null,[a]).length}}})();(function(){var a=E.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(y.order.splice(1,0,"CLASS"),y.find.CLASS=function(a,e,b){if("undefined"!==typeof e.getElementsByClassName&&!b)return e.getElementsByClassName(a[1])},
a=null))})();g.contains=E.documentElement.contains?function(a,e){return a!==e&&(a.contains?a.contains(e):!0)}:E.documentElement.compareDocumentPosition?function(a,e){return!!(a.compareDocumentPosition(e)&16)}:function(){return!1};g.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var p=function(a,e,b){var c,m=[],f="";for(e=e.nodeType?[e]:e;c=y.match.PSEUDO.exec(a);)f+=c[0],a=a.replace(y.match.PSEUDO,"");a=y.relative[a]?a+"*":a;c=0;for(var k=e.length;c<k;c++)g(a,
e[c],m,b);return g.filter(f,m)};g.attr=u.attr;g.selectors.attrMap={};u.find=g;u.expr=g.selectors;u.expr[":"]=u.expr.filters;u.unique=g.uniqueSort;u.text=g.getText;u.isXMLDoc=g.isXML;u.contains=g.contains})();var Za=/Until$/,bb=/^(?:parents|prevUntil|prevAll)/,xa=/,/,Ia=/^.[^:#\[\.,]*$/,ma=Array.prototype.slice,Va=u.expr.match.globalPOS,va={children:!0,contents:!0,next:!0,prev:!0};u.fn.extend({find:function(a){var e=this,b,c;if("string"!==typeof a)return u(a).filter(function(){b=0;for(c=e.length;b<
c;b++)if(u.contains(e[b],this))return!0});var m=this.pushStack("","find",a),f,k,q;b=0;for(c=this.length;b<c;b++)if(f=m.length,u.find(a,this[b],m),0<b)for(k=f;k<m.length;k++)for(q=0;q<f;q++)if(m[q]===m[k]){m.splice(k--,1);break}return m},has:function(a){var e=u(a);return this.filter(function(){for(var a=0,b=e.length;a<b;a++)if(u.contains(this,e[a]))return!0})},not:function(a){return this.pushStack(c(this,a,!1),"not",a)},filter:function(a){return this.pushStack(c(this,a,!0),"filter",a)},is:function(a){return!!a&&
("string"===typeof a?Va.test(a)?0<=u(a,this.context).index(this[0]):0<u.filter(a,this).length:0<this.filter(a).length)},closest:function(a,e){var b=[],c,m,f=this[0];if(u.isArray(a)){for(m=1;f&&f.ownerDocument&&f!==e;){for(c=0;c<a.length;c++)u(f).is(a[c])&&b.push({selector:a[c],elem:f,level:m});f=f.parentNode;m++}return b}var k=Va.test(a)||"string"!==typeof a?u(a,e||this.context):0;c=0;for(m=this.length;c<m;c++)for(f=this[c];f;)if(k?-1<k.index(f):u.find.matchesSelector(f,a)){b.push(f);break}else if(f=
f.parentNode,!f||!f.ownerDocument||f===e||11===f.nodeType)break;b=1<b.length?u.unique(b):b;return this.pushStack(b,"closest",a)},index:function(a){return a?"string"===typeof a?u.inArray(this[0],u(a)):u.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,e){var b="string"===typeof a?u(a,e):u.makeArray(a&&a.nodeType?[a]:a),c=u.merge(this.get(),b);return this.pushStack(d(b[0])||d(c[0])?c:u.unique(c))},andSelf:function(){return this.add(this.prevObject)}});
u.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return u.dir(a,"parentNode")},parentsUntil:function(a,e,b){return u.dir(a,"parentNode",b)},next:function(a){return u.nth(a,2,"nextSibling")},prev:function(a){return u.nth(a,2,"previousSibling")},nextAll:function(a){return u.dir(a,"nextSibling")},prevAll:function(a){return u.dir(a,"previousSibling")},nextUntil:function(a,e,b){return u.dir(a,"nextSibling",b)},prevUntil:function(a,e,b){return u.dir(a,"previousSibling",
b)},siblings:function(a){return u.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return u.sibling(a.firstChild)},contents:function(a){return u.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:u.makeArray(a.childNodes)}},function(a,e){u.fn[a]=function(b,c){var m=u.map(this,e,b);Za.test(a)||(c=b);c&&"string"===typeof c&&(m=u.filter(c,m));m=1<this.length&&!va[a]?u.unique(m):m;(1<this.length||xa.test(c))&&bb.test(a)&&(m=m.reverse());return this.pushStack(m,a,ma.call(arguments).join(","))}});
u.extend({filter:function(a,e,b){b&&(a=":not("+a+")");return 1===e.length?u.find.matchesSelector(e[0],a)?[e[0]]:[]:u.find.matches(a,e)},dir:function(a,e,b){var c=[];for(a=a[e];a&&9!==a.nodeType&&(b===t||1!==a.nodeType||!u(a).is(b));)1===a.nodeType&&c.push(a),a=a[e];return c},nth:function(a,e,b,c){e=e||1;for(c=0;a&&(1!==a.nodeType||++c!==e);a=a[b]);return a},sibling:function(a,e){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&a!==e&&b.push(a);return b}});var oa="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
T=/ jQuery\d+="(?:\d+|null)"/g,Fa=/^\s+/,Ha=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ba=/<([\w:]+)/,mb=/<tbody/i,Kb=/<|&#?\w+;/,Vb=/<(?:script|style)/i,Ya=/<(?:script|object|embed|option|style)/i,Sa=RegExp("<(?:"+oa+")[\\s/>]","i"),Ub=/checked\s*(?:[^=]|=\s*.checked.)/i,Oa=/\/(java|ecma)script/i,wb=/^\s*<!(?:\[CDATA\[|\-\-)/,Wa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ta=k(E);Wa.optgroup=Wa.option;Wa.tbody=Wa.tfoot=Wa.colgroup=Wa.caption=Wa.thead;Wa.th=Wa.td;u.support.htmlSerialize||(Wa._default=[1,"div<div>","</div>"]);u.fn.extend({text:function(a){return u.access(this,function(a){return a===t?u.text(this):this.empty().append((this[0]&&this[0].ownerDocument||E).createTextNode(a))},
null,a,arguments.length)},wrapAll:function(a){if(u.isFunction(a))return this.each(function(e){u(this).wrapAll(a.call(this,e))});if(this[0]){var e=u(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]);e.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return u.isFunction(a)?this.each(function(e){u(this).wrapInner(a.call(this,e))}):this.each(function(){var e=u(this),b=e.contents();
b.length?b.wrapAll(a):e.append(a)})},wrap:function(a){var e=u.isFunction(a);return this.each(function(b){u(this).wrapAll(e?a.call(this,b):a)})},unwrap:function(){return this.parent().each(function(){u.nodeName(this,"body")||u(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=u.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,u.clean(arguments));return a}},remove:function(a,
e){for(var b=0,c;null!=(c=this[b]);b++)if(!a||u.filter(a,[c]).length)e||1!==c.nodeType||(u.cleanData(c.getElementsByTagName("*")),u.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a=0,e;null!=(e=this[a]);a++)for(1===e.nodeType&&u.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(a,e){a=null==a?!1:a;e=null==e?a:e;return this.map(function(){return u.clone(this,a,e)})},html:function(a){return u.access(this,
function(a){var e=this[0]||{},b=0,c=this.length;if(a===t)return 1===e.nodeType?e.innerHTML.replace(T,""):null;if("string"===typeof a&&!(Vb.test(a)||!u.support.leadingWhitespace&&Fa.test(a)||Wa[(Ba.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Ha,"<$1></$2>");try{for(;b<c;b++)e=this[b]||{},1===e.nodeType&&(u.cleanData(e.getElementsByTagName("*")),e.innerHTML=a);e=0}catch(m){}}e&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(u.isFunction(a))return this.each(function(e){var b=
u(this),c=b.html();b.replaceWith(a.call(this,e,c))});"string"!==typeof a&&(a=u(a).detach());return this.each(function(){var e=this.nextSibling,b=this.parentNode;u(this).remove();e?u(e).before(a):u(b).append(a)})}return this.length?this.pushStack(u(u.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,e,b){var c,m,k,q=a[0],d=[];if(!u.support.checkClone&&3===arguments.length&&"string"===typeof q&&Ub.test(q))return this.each(function(){u(this).domManip(a,
e,b,!0)});if(u.isFunction(q))return this.each(function(c){var m=u(this);a[0]=q.call(this,c,e?m.html():t);m.domManip(a,e,b)});if(this[0]){c=q&&q.parentNode;c=u.support.parentNode&&c&&11===c.nodeType&&c.childNodes.length===this.length?{fragment:c}:u.buildFragment(a,this,d);k=c.fragment;if(m=1===k.childNodes.length?k=k.firstChild:k.firstChild){e=e&&u.nodeName(m,"tr");for(var l=0,v=this.length,g=v-1;l<v;l++)b.call(e?f(this[l],m):this[l],c.cacheable||1<v&&l<g?u.clone(k,!0,!0):k)}d.length&&u.each(d,function(a,
e){e.src?u.ajax({type:"GET",global:!1,url:e.src,async:!1,dataType:"script"}):u.globalEval((e.text||e.textContent||e.innerHTML||"").replace(wb,"/*$0*/"));e.parentNode&&e.parentNode.removeChild(e)})}return this}});u.buildFragment=function(a,e,b){var c,m,f,k,q=a[0];e&&e[0]&&(k=e[0].ownerDocument||e[0]);k.createDocumentFragment||(k=E);1===a.length&&"string"===typeof q&&512>q.length&&k===E&&"<"===q.charAt(0)&&!(Ya.test(q)||!u.support.checkClone&&Ub.test(q)||!u.support.html5Clone&&Sa.test(q))&&(m=!0,(f=
u.fragments[q])&&1!==f&&(c=f));c||(c=k.createDocumentFragment(),u.clean(a,k,c,b));m&&(u.fragments[q]=f?c:1);return{fragment:c,cacheable:m}};u.fragments={};u.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,e){u.fn[a]=function(b){var c=[];b=u(b);var m=1===this.length&&this[0].parentNode;if(m&&11===m.nodeType&&1===m.childNodes.length&&1===b.length)return b[e](this[0]),this;for(var m=0,f=b.length;m<f;m++){var k=(0<m?this.clone(!0):
this).get();u(b[m])[e](k);c=c.concat(k)}return this.pushStack(c,a,b.selector)}});u.extend({clone:function(b,c,m){var f,k,d;u.support.html5Clone||u.isXMLDoc(b)||!Sa.test("<"+b.nodeName+">")?f=b.cloneNode(!0):(f=E.createElement("div"),Ta.appendChild(f),f.innerHTML=b.outerHTML,f=f.firstChild);var l=f;if(!(u.support.noCloneEvent&&u.support.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||u.isXMLDoc(b)))for(a(b,l),f=e(b),k=e(l),d=0;f[d];++d)k[d]&&a(f[d],k[d]);if(c&&(q(b,l),m))for(f=e(b),k=e(l),d=0;f[d];++d)q(f[d],
k[d]);return l},clean:function(a,e,b,c){var m,f=[];e=e||E;"undefined"===typeof e.createElement&&(e=e.ownerDocument||e[0]&&e[0].ownerDocument||E);for(var q=0,d;null!=(d=a[q]);q++)if("number"===typeof d&&(d+=""),d){if("string"===typeof d)if(Kb.test(d)){d=d.replace(Ha,"<$1></$2>");m=(Ba.exec(d)||["",""])[1].toLowerCase();var l=Wa[m]||Wa._default,g=l[0],x=e.createElement("div"),y=Ta.childNodes;e===E?Ta.appendChild(x):k(e).appendChild(x);for(x.innerHTML=l[1]+d+l[2];g--;)x=x.lastChild;if(!u.support.tbody)for(g=
mb.test(d),l="table"!==m||g?"<table>"!==l[1]||g?[]:x.childNodes:x.firstChild&&x.firstChild.childNodes,m=l.length-1;0<=m;--m)u.nodeName(l[m],"tbody")&&!l[m].childNodes.length&&l[m].parentNode.removeChild(l[m]);!u.support.leadingWhitespace&&Fa.test(d)&&x.insertBefore(e.createTextNode(Fa.exec(d)[0]),x.firstChild);d=x.childNodes;x&&(x.parentNode.removeChild(x),0<y.length&&(x=y[y.length-1])&&x.parentNode&&x.parentNode.removeChild(x))}else d=e.createTextNode(d);var n;if(!u.support.appendChecked)if(d[0]&&
"number"===typeof(n=d.length))for(m=0;m<n;m++)v(d[m]);else v(d);d.nodeType?f.push(d):f=u.merge(f,d)}if(b)for(a=function(a){return!a.type||Oa.test(a.type)},q=0;f[q];q++)e=f[q],c&&u.nodeName(e,"script")&&(!e.type||Oa.test(e.type))?c.push(e.parentNode?e.parentNode.removeChild(e):e):(1===e.nodeType&&(d=u.grep(e.getElementsByTagName("script"),a),f.splice.apply(f,[q+1,0].concat(d))),b.appendChild(e));return f},cleanData:function(a){for(var e,b,c=u.cache,m=u.event.special,f=u.support.deleteExpando,k=0,q;null!=
(q=a[k]);k++)if(!q.nodeName||!u.noData[q.nodeName.toLowerCase()])if(b=q[u.expando]){if((e=c[b])&&e.events){for(var d in e.events)m[d]?u.event.remove(q,d):u.removeEvent(q,d,e.handle);e.handle&&(e.handle.elem=null)}f?delete q[u.expando]:q.removeAttribute&&q.removeAttribute(u.expando);delete c[b]}}});var lb=/alpha\([^)]*\)/i,za=/opacity=([^)]*)/,Xa=/([A-Z]|^ms)/g,rb=/^[\-+]?(?:\d*\.)?\d+$/i,gb=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,dc=/^([\-+])=([\-+.\de]+)/,Qb=/^margin/,Db={position:"absolute",visibility:"hidden",
display:"block"},$a=["Top","Right","Bottom","Left"],Aa,ha,Ca;u.fn.css=function(a,e){return u.access(this,function(a,e,b){return b!==t?u.style(a,e,b):u.css(a,e)},a,e,1<arguments.length)};u.extend({cssHooks:{opacity:{get:function(a,e){if(e){var b=Aa(a,"opacity");return""===b?"1":b}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":u.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,e,b,c){if(a&&
3!==a.nodeType&&8!==a.nodeType&&a.style){var m,f=u.camelCase(e),k=a.style,q=u.cssHooks[f];e=u.cssProps[f]||f;if(b!==t){if(c=typeof b,"string"===c&&(m=dc.exec(b))&&(b=+(m[1]+1)*+m[2]+parseFloat(u.css(a,e)),c="number"),!(null==b||"number"===c&&isNaN(b)||("number"!==c||u.cssNumber[f]||(b+="px"),q&&"set"in q&&(b=q.set(a,b))===t)))try{k[e]=b}catch(d){}}else return q&&"get"in q&&(m=q.get(a,!1,c))!==t?m:k[e]}},css:function(a,e,b){var c,m;e=u.camelCase(e);m=u.cssHooks[e];e=u.cssProps[e]||e;"cssFloat"===e&&
(e="float");if(m&&"get"in m&&(c=m.get(a,!0,b))!==t)return c;if(Aa)return Aa(a,e)},swap:function(a,e,b){var c={},m;for(m in e)c[m]=a.style[m],a.style[m]=e[m];b=b.call(a);for(m in e)a.style[m]=c[m];return b}});u.curCSS=u.css;E.defaultView&&E.defaultView.getComputedStyle&&(ha=function(a,e){var b,c,m,f=a.style;e=e.replace(Xa,"-$1").toLowerCase();(c=a.ownerDocument.defaultView)&&(m=c.getComputedStyle(a,null))&&(b=m.getPropertyValue(e),""!==b||u.contains(a.ownerDocument.documentElement,a)||(b=u.style(a,
e)));!u.support.pixelMargin&&m&&Qb.test(e)&&gb.test(b)&&(c=f.width,f.width=b,b=m.width,f.width=c);return b});E.documentElement.currentStyle&&(Ca=function(a,e){var b,c,m=a.currentStyle&&a.currentStyle[e],f=a.style;null==m&&f&&(b=f[e])&&(m=b);if(gb.test(m)){b=f.left;if(c=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===e?"1em":m;m=f.pixelLeft+"px";f.left=b;c&&(a.runtimeStyle.left=c)}return""===m?"auto":m});Aa=ha||Ca;u.each(["height","width"],function(a,
e){u.cssHooks[e]={get:function(a,b,c){if(b)return 0!==a.offsetWidth?x(a,e,c):u.swap(a,Db,function(){return x(a,e,c)})},set:function(a,e){return rb.test(e)?e+"px":e}}});u.support.opacity||(u.cssHooks.opacity={get:function(a,e){return za.test((e&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":e?"1":""},set:function(a,e){var b=a.style,c=a.currentStyle,m=u.isNumeric(e)?"alpha(opacity="+100*e+")":"",f=c&&c.filter||b.filter||"";b.zoom=1;if(1<=e&&""===u.trim(f.replace(lb,
""))&&(b.removeAttribute("filter"),c&&!c.filter))return;b.filter=lb.test(f)?f.replace(lb,m):f+" "+m}});u(function(){u.support.reliableMarginRight||(u.cssHooks.marginRight={get:function(a,e){return u.swap(a,{display:"inline-block"},function(){return e?Aa(a,"margin-right"):a.style.marginRight})}})});u.expr&&u.expr.filters&&(u.expr.filters.hidden=function(a){var e=a.offsetHeight;return 0===a.offsetWidth&&0===e||!u.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||u.css(a,"display"))},
u.expr.filters.visible=function(a){return!u.expr.filters.hidden(a)});u.each({margin:"",padding:"",border:"Width"},function(a,e){u.cssHooks[a+e]={expand:function(b){var c="string"===typeof b?b.split(" "):[b],m={};for(b=0;4>b;b++)m[a+$a[b]+e]=c[b]||c[b-2]||c[0];return m}}});var Na=/%20/g,yb=/\[\]$/,la=/\r?\n/g,Eb=/#.*$/,ib=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Ga=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,jb=/^(?:GET|HEAD)$/,tb=/^\/\//,
Lb=/\?/,Yb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Fb=/^(?:select|textarea)/i,nb=/\s+/,eb=/([?&])_=[^&]*/,Gb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Mb=u.fn.load,Ea={},Zb={},Ja,$b,ua=["*/"]+["*"];try{Ja=G.href}catch(Hb){Ja=E.createElement("a"),Ja.href="",Ja=Ja.href}$b=Gb.exec(Ja.toLowerCase())||[];u.fn.extend({load:function(a,e,b){if("string"!==typeof a&&Mb)return Mb.apply(this,arguments);if(!this.length)return this;var c=a.indexOf(" ");if(0<=c){var m=a.slice(c,a.length);a=
a.slice(0,c)}c="GET";e&&(u.isFunction(e)?(b=e,e=t):"object"===typeof e&&(e=u.param(e,u.ajaxSettings.traditional),c="POST"));var f=this;u.ajax({url:a,type:c,dataType:"html",data:e,complete:function(a,e,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),f.html(m?u("<div>").append(c.replace(Yb,"")).find(m):c));b&&f.each(b,[c,e,a])}});return this},serialize:function(){return u.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?u.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Fb.test(this.nodeName)||Ga.test(this.type))}).map(function(a,e){var b=u(this).val();return null==b?null:u.isArray(b)?u.map(b,function(a,b){return{name:e.name,value:a.replace(la,"\r\n")}}):{name:e.name,value:b.replace(la,"\r\n")}}).get()}});u.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,e){u.fn[e]=function(a){return this.on(e,a)}});u.each(["get","post"],function(a,e){u[e]=function(a,
b,c,m){u.isFunction(b)&&(m=m||c,c=b,b=t);return u.ajax({type:e,url:a,data:b,success:c,dataType:m})}});u.extend({getScript:function(a,e){return u.get(a,t,e,"script")},getJSON:function(a,e,b){return u.get(a,e,b,"json")},ajaxSetup:function(a,e){e?y(a,u.ajaxSettings):(e=a,a=u.ajaxSettings);y(a,e);return a},ajaxSettings:{url:Ja,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test($b[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ua},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":p.String,"text html":!0,"text json":u.parseJSON,"text xml":u.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:z(Ea),ajaxTransport:z(Zb),ajax:function(a,e){function b(a,e,v,g){if(2!==F){F=2;z&&clearTimeout(z);n=t;x=g||"";p.readyState=0<a?4:
0;var y,A,C;g=e;if(v){var H=c,s=p,r=H.contents,N=H.dataTypes,Bb=H.responseFields,M,J,E,K;for(J in Bb)J in v&&(s[Bb[J]]=v[J]);for(;"*"===N[0];)N.shift(),M===t&&(M=H.mimeType||s.getResponseHeader("content-type"));if(M)for(J in r)if(r[J]&&r[J].test(M)){N.unshift(J);break}if(N[0]in v)E=N[0];else{for(J in v){if(!N[0]||H.converters[J+" "+N[0]]){E=J;break}K||(K=J)}E=E||K}E?(E!==N[0]&&N.unshift(E),v=v[E]):v=void 0}else v=t;if(200<=a&&300>a||304===a){if(c.ifModified){if(M=p.getResponseHeader("Last-Modified"))u.lastModified[l]=
M;if(M=p.getResponseHeader("Etag"))u.etag[l]=M}if(304===a)g="notmodified",y=!0;else try{M=c;M.dataFilter&&(v=M.dataFilter(v,M.dataType));var jc=M.dataTypes;J={};var G,Q,de=jc.length,S,T=jc[0],U,ba,L,ka,P;for(G=1;G<de;G++){if(1===G)for(Q in M.converters)"string"===typeof Q&&(J[Q.toLowerCase()]=M.converters[Q]);U=T;T=jc[G];if("*"===T)T=U;else if("*"!==U&&U!==T){ba=U+" "+T;L=J[ba]||J["* "+T];if(!L)for(ka in P=t,J)if(S=ka.split(" "),S[0]===U||"*"===S[0])if(P=J[S[1]+" "+T]){ka=J[ka];!0===ka?L=P:!0===P&&
(L=ka);break}L||P||u.error("No conversion from "+ba.replace(" "," to "));!0!==L&&(v=L?L(v):P(ka(v)))}}A=v;g="success";y=!0}catch(V){g="parsererror",C=V}}else if(C=g,!g||a)g="error",0>a&&(a=0);p.status=a;p.statusText=""+(e||g);y?k.resolveWith(m,[A,g,p]):k.rejectWith(m,[p,g,C]);p.statusCode(d);d=t;D&&f.trigger("ajax"+(y?"Success":"Error"),[p,c,y?A:C]);q.fireWith(m,[p,g]);D&&(f.trigger("ajaxComplete",[p,c]),--u.active||u.event.trigger("ajaxStop"))}}"object"===typeof a&&(e=a,a=t);e=e||{};var c=u.ajaxSetup({},
e),m=c.context||c,f=m!==c&&(m.nodeType||m instanceof u)?u(m):u.event,k=u.Deferred(),q=u.Callbacks("once memory"),d=c.statusCode||{},l,v={},g={},x,y,n,z,C,F=0,D,H,p={readyState:0,setRequestHeader:function(a,e){if(!F){var b=a.toLowerCase();a=g[b]=g[b]||a;v[a]=e}return this},getAllResponseHeaders:function(){return 2===F?x:null},getResponseHeader:function(a){var e;if(2===F){if(!y)for(y={};e=ib.exec(x);)y[e[1].toLowerCase()]=e[2];e=y[a.toLowerCase()]}return e===t?null:e},overrideMimeType:function(a){F||
(c.mimeType=a);return this},abort:function(a){a=a||"abort";n&&n.abort(a);b(0,a);return this}};k.promise(p);p.success=p.done;p.error=p.fail;p.complete=q.add;p.statusCode=function(a){if(a){var e;if(2>F)for(e in a)d[e]=[d[e],a[e]];else e=a[p.status],p.then(e,e)}return this};c.url=((a||c.url)+"").replace(Eb,"").replace(tb,$b[1]+"//");c.dataTypes=u.trim(c.dataType||"*").toLowerCase().split(nb);null==c.crossDomain&&(C=Gb.exec(c.url.toLowerCase()),c.crossDomain=!(!C||C[1]==$b[1]&&C[2]==$b[2]&&(C[3]||("http:"===
C[1]?80:443))==($b[3]||("http:"===$b[1]?80:443))));c.data&&c.processData&&"string"!==typeof c.data&&(c.data=u.param(c.data,c.traditional));A(Ea,c,e,p);if(2===F)return!1;D=c.global;c.type=c.type.toUpperCase();c.hasContent=!jb.test(c.type);D&&0===u.active++&&u.event.trigger("ajaxStart");if(!c.hasContent&&(c.data&&(c.url+=(Lb.test(c.url)?"&":"?")+c.data,delete c.data),l=c.url,!1===c.cache)){C=u.now();var s=c.url.replace(eb,"$1_="+C);c.url=s+(s===c.url?(Lb.test(c.url)?"&":"?")+"_="+C:"")}(c.data&&c.hasContent&&
!1!==c.contentType||e.contentType)&&p.setRequestHeader("Content-Type",c.contentType);c.ifModified&&(l=l||c.url,u.lastModified[l]&&p.setRequestHeader("If-Modified-Since",u.lastModified[l]),u.etag[l]&&p.setRequestHeader("If-None-Match",u.etag[l]));p.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+ua+"; q=0.01":""):c.accepts["*"]);for(H in c.headers)p.setRequestHeader(H,c.headers[H]);if(c.beforeSend&&(!1===c.beforeSend.call(m,p,
c)||2===F))return p.abort(),!1;for(H in{success:1,error:1,complete:1})p[H](c[H]);if(n=A(Zb,c,e,p)){p.readyState=1;D&&f.trigger("ajaxSend",[p,c]);c.async&&0<c.timeout&&(z=setTimeout(function(){p.abort("timeout")},c.timeout));try{F=1,n.send(v,b)}catch(r){if(2>F)b(-1,r);else throw r;}}else b(-1,"No Transport");return p},param:function(a,e){var b=[],c=function(a,e){e=u.isFunction(e)?e():e;b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(e)};e===t&&(e=u.ajaxSettings.traditional);if(u.isArray(a)||
a.jquery&&!u.isPlainObject(a))u.each(a,function(){c(this.name,this.value)});else for(var m in a)C(m,a[m],e,c);return b.join("&").replace(Na,"+")}});u.extend({active:0,lastModified:{},etag:{}});var Bc=u.now(),Ib=/(\=)\?(&|$)|\?\?/i;u.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return u.expando+"_"+Bc++}});u.ajaxPrefilter("json jsonp",function(a,e,b){e="string"===typeof a.data&&/^application\/x\-www\-form\-urlencoded/.test(a.contentType);if("jsonp"===a.dataTypes[0]||!1!==a.jsonp&&(Ib.test(a.url)||
e&&Ib.test(a.data))){var c,m=a.jsonpCallback=u.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,f=p[m],k=a.url,q=a.data,d="$1"+m+"$2";!1!==a.jsonp&&(k=k.replace(Ib,d),a.url===k&&(e&&(q=q.replace(Ib,d)),a.data===q&&(k+=(/\?/.test(k)?"&":"?")+a.jsonp+"="+m)));a.url=k;a.data=q;p[m]=function(a){c=[a]};b.always(function(){p[m]=f;if(c&&u.isFunction(f))p[m](c[0])});a.converters["script json"]=function(){c||u.error(m+" was not called");return c[0]};a.dataTypes[0]="json";return"script"}});u.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){u.globalEval(a);return a}}});u.ajaxPrefilter("script",function(a){a.cache===t&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});u.ajaxTransport("script",function(a){if(a.crossDomain){var e,b=E.head||E.getElementsByTagName("head")[0]||E.documentElement;return{send:function(c,m){e=E.createElement("script");e.async="async";a.scriptCharset&&(e.charset=a.scriptCharset);e.src=a.url;e.onload=e.onreadystatechange=function(a,
c){if(c||!e.readyState||/loaded|complete/.test(e.readyState))e.onload=e.onreadystatechange=null,b&&e.parentNode&&b.removeChild(e),e=t,c||m(200,"success")};b.insertBefore(e,b.firstChild)},abort:function(){if(e)e.onload(0,1)}}}});var ab=p.ActiveXObject?function(){for(var a in vc)vc[a](0,1)}:!1,wc=0,vc;u.ajaxSettings.xhr=p.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&F()))a:{try{a=new p.ActiveXObject("Microsoft.XMLHTTP");break a}catch(e){}a=void 0}return a}:F;(function(a){u.extend(u.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(u.ajaxSettings.xhr());u.support.ajax&&u.ajaxTransport(function(a){if(!a.crossDomain||u.support.cors){var e;return{send:function(b,c){var m=a.xhr(),f,k;a.username?m.open(a.type,a.url,a.async,a.username,a.password):m.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)m[k]=a.xhrFields[k];a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType);a.crossDomain||b["X-Requested-With"]||(b["X-Requested-With"]="XMLHttpRequest");try{for(k in b)m.setRequestHeader(k,
b[k])}catch(q){}m.send(a.hasContent&&a.data||null);e=function(b,k){var q,d,l,v,g;try{if(e&&(k||4===m.readyState))if(e=t,f&&(m.onreadystatechange=u.noop,ab&&delete vc[f]),k)4!==m.readyState&&m.abort();else{q=m.status;l=m.getAllResponseHeaders();v={};(g=m.responseXML)&&g.documentElement&&(v.xml=g);try{v.text=m.responseText}catch(x){}try{d=m.statusText}catch(y){d=""}q||!a.isLocal||a.crossDomain?1223===q&&(q=204):q=v.text?200:404}}catch(n){k||c(-1,n)}v&&c(q,d,v,l)};a.async&&4!==m.readyState?(f=++wc,ab&&
(vc||(vc={},u(p).unload(ab)),vc[f]=e),m.onreadystatechange=e):e()},abort:function(){e&&e(0,1)}}}});var sb={},cb,Sb,Ob=/^(?:toggle|show|hide)$/,Qc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,gc,Rb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],hb;u.fn.extend({show:function(a,e,b){if(a||0===a)return this.animate(N("show",3),a,e,b);b=0;for(var c=this.length;b<c;b++)a=this[b],a.style&&(e=a.style.display,u._data(a,
"olddisplay")||"none"!==e||(e=a.style.display=""),(""===e&&"none"===u.css(a,"display")||!u.contains(a.ownerDocument.documentElement,a))&&u._data(a,"olddisplay",J(a.nodeName)));for(b=0;b<c;b++)if(a=this[b],a.style&&(e=a.style.display,""===e||"none"===e))a.style.display=u._data(a,"olddisplay")||"";return this},hide:function(a,e,b){if(a||0===a)return this.animate(N("hide",3),a,e,b);b=0;for(var c=this.length;b<c;b++)a=this[b],a.style&&(e=u.css(a,"display"),"none"===e||u._data(a,"olddisplay")||u._data(a,
"olddisplay",e));for(b=0;b<c;b++)this[b].style&&(this[b].style.display="none");return this},_toggle:u.fn.toggle,toggle:function(a,e,b){var c="boolean"===typeof a;u.isFunction(a)&&u.isFunction(e)?this._toggle.apply(this,arguments):null==a||c?this.each(function(){var e=c?a:u(this).is(":hidden");u(this)[e?"show":"hide"]()}):this.animate(N("toggle",3),a,e,b);return this},fadeTo:function(a,e,b,c){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:e},a,b,c)},animate:function(a,
e,b,c){function m(){!1===f.queue&&u._mark(this);var e=u.extend({},f),b=1===this.nodeType,c=b&&u(this).is(":hidden"),k,q,d,l,v;e.animatedProperties={};for(d in a)if(k=u.camelCase(d),d!==k&&(a[k]=a[d],delete a[d]),(q=u.cssHooks[k])&&"expand"in q)for(d in l=q.expand(a[k]),delete a[k],l)d in a||(a[d]=l[d]);for(k in a){q=a[k];u.isArray(q)?(e.animatedProperties[k]=q[1],q=a[k]=q[0]):e.animatedProperties[k]=e.specialEasing&&e.specialEasing[k]||e.easing||"swing";if("hide"===q&&c||"show"===q&&!c)return e.complete.call(this);
!b||"height"!==k&&"width"!==k||(e.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===u.css(this,"display")&&"none"===u.css(this,"float")&&(u.support.inlineBlockNeedsLayout&&"inline"!==J(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=e.overflow&&(this.style.overflow="hidden");for(d in a)if(b=new u.fx(this,e,d),q=a[d],Ob.test(q))if(k=u._data(this,"toggle"+d)||("toggle"===q?c?"show":"hide":0))u._data(this,"toggle"+d,"show"===k?"hide":"show"),
b[k]();else b[q]();else k=Qc.exec(q),l=b.cur(),k?(q=parseFloat(k[2]),v=k[3]||(u.cssNumber[d]?"":"px"),"px"!==v&&(u.style(this,d,(q||1)+v),l*=(q||1)/b.cur(),u.style(this,d,l+v)),k[1]&&(q=("-="===k[1]?-1:1)*q+l),b.custom(l,q,v)):b.custom(l,q,"");return!0}var f=u.speed(e,b,c);if(u.isEmptyObject(a))return this.each(f.complete,[!1]);a=u.extend({},a);return!1===f.queue?this.each(m):this.queue(f.queue,m)},stop:function(a,e,b){"string"!==typeof a&&(b=e,e=a,a=t);e&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var e,
c=!1,m=u.timers,f=u._data(this);b||u._unmark(!0,this);if(null==a)for(e in f){if(f[e]&&f[e].stop&&e.indexOf(".run")===e.length-4){var k=f[e];u.removeData(this,e,!0);k.stop(b)}}else f[e=a+".run"]&&f[e].stop&&(f=f[e],u.removeData(this,e,!0),f.stop(b));for(e=m.length;e--;)if(m[e].elem===this&&(null==a||m[e].queue===a)){if(b)m[e](!0);else m[e].saveState();c=!0;m.splice(e,1)}b&&c||u.dequeue(this,a)})}});u.each({slideDown:N("show",1),slideUp:N("hide",1),slideToggle:N("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,e){u.fn[a]=function(a,b,c){return this.animate(e,a,b,c)}});u.extend({speed:function(a,e,b){var c=a&&"object"===typeof a?u.extend({},a):{complete:b||!b&&e||u.isFunction(a)&&a,duration:a,easing:b&&e||e&&!u.isFunction(e)&&e};c.duration=u.fx.off?0:"number"===typeof c.duration?c.duration:c.duration in u.fx.speeds?u.fx.speeds[c.duration]:u.fx.speeds._default;if(null==c.queue||!0===c.queue)c.queue="fx";c.old=c.complete;c.complete=function(a){u.isFunction(c.old)&&
c.old.call(this);c.queue?u.dequeue(this,c.queue):!1!==a&&u._unmark(this)};return c},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,e,b){this.options=e;this.elem=a;this.prop=b;e.orig=e.orig||{}}});u.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(u.fx.step[this.prop]||u.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,e=u.css(this.elem,this.prop);return isNaN(a=parseFloat(e))?e&&"auto"!==e?e:0:a},custom:function(a,e,b){function c(a){return m.step(a)}var m=this,f=u.fx;this.startTime=hb||D();this.end=e;this.now=this.start=a;this.pos=this.state=0;this.unit=b||this.unit||(u.cssNumber[this.prop]?"":"px");c.queue=this.options.queue;c.elem=this.elem;c.saveState=function(){u._data(m.elem,"fxshow"+m.prop)===t&&(m.options.hide?u._data(m.elem,"fxshow"+m.prop,m.start):m.options.show&&u._data(m.elem,"fxshow"+m.prop,m.end))};
c()&&u.timers.push(c)&&!gc&&(gc=setInterval(f.tick,f.interval))},show:function(){var a=u._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||u.style(this.elem,this.prop);this.options.show=!0;a!==t?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());u(this.elem).show()},hide:function(){this.options.orig[this.prop]=u._data(this.elem,"fxshow"+this.prop)||u.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var e,
b=hb||D(),c=!0,m=this.elem,f=this.options;if(a||b>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=!0;for(e in f.animatedProperties)!0!==f.animatedProperties[e]&&(c=!1);if(c){null==f.overflow||u.support.shrinkWrapBlocks||u.each(["","X","Y"],function(a,e){m.style["overflow"+e]=f.overflow[a]});f.hide&&u(m).hide();if(f.hide||f.show)for(e in f.animatedProperties)u.style(m,e,f.orig[e]),u.removeData(m,"fxshow"+e,!0),u.removeData(m,"toggle"+
e,!0);if(a=f.complete)f.complete=!1,a.call(m)}return!1}Infinity==f.duration?this.now=b:(a=b-this.startTime,this.state=a/f.duration,this.pos=u.easing[f.animatedProperties[this.prop]](this.state,a,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};u.extend(u.fx,{tick:function(){for(var a,e=u.timers,b=0;b<e.length;b++)a=e[b],a()||e[b]!==a||e.splice(b--,1);e.length||u.fx.stop()},interval:13,stop:function(){clearInterval(gc);gc=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){u.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});u.each(Rb.concat.apply([],Rb),function(a,e){e.indexOf("margin")&&(u.fx.step[e]=function(a){u.style(a.elem,e,Math.max(0,a.now)+a.unit)})});u.expr&&u.expr.filters&&(u.expr.filters.animated=function(a){return u.grep(u.timers,function(e){return a===e.elem}).length});var fa,Pb=/^t(?:able|d|h)$/i,hc=/^(?:body|html)$/i;
fa="getBoundingClientRect"in E.documentElement?function(a,e,b,c){try{c=a.getBoundingClientRect()}catch(m){}if(!c||!u.contains(b,a))return c?{top:c.top,left:c.left}:{top:0,left:0};a=e.body;e=M(e);return{top:c.top+(e.pageYOffset||u.support.boxModel&&b.scrollTop||a.scrollTop)-(b.clientTop||a.clientTop||0),left:c.left+(e.pageXOffset||u.support.boxModel&&b.scrollLeft||a.scrollLeft)-(b.clientLeft||a.clientLeft||0)}}:function(a,e,b){var c,m=a.offsetParent,f=e.body;c=(e=e.defaultView)?e.getComputedStyle(a,
null):a.currentStyle;for(var k=a.offsetTop,q=a.offsetLeft;(a=a.parentNode)&&a!==f&&a!==b&&(!u.support.fixedPosition||"fixed"!==c.position);)c=e?e.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,q-=a.scrollLeft,a===m&&(k+=a.offsetTop,q+=a.offsetLeft,!u.support.doesNotAddBorder||u.support.doesAddBorderForTableAndCells&&Pb.test(a.nodeName)||(k+=parseFloat(c.borderTopWidth)||0,q+=parseFloat(c.borderLeftWidth)||0),m=a.offsetParent),u.support.subtractsBorderForOverflowNotVisible&&"visible"!==c.overflow&&
(k+=parseFloat(c.borderTopWidth)||0,q+=parseFloat(c.borderLeftWidth)||0);if("relative"===c.position||"static"===c.position)k+=f.offsetTop,q+=f.offsetLeft;u.support.fixedPosition&&"fixed"===c.position&&(k+=Math.max(b.scrollTop,f.scrollTop),q+=Math.max(b.scrollLeft,f.scrollLeft));return{top:k,left:q}};u.fn.offset=function(a){if(arguments.length)return a===t?this:this.each(function(e){u.offset.setOffset(this,a,e)});var e=this[0],b=e&&e.ownerDocument;return b?e===b.body?u.offset.bodyOffset(e):fa(e,b,
b.documentElement):null};u.offset={bodyOffset:function(a){var e=a.offsetTop,b=a.offsetLeft;u.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(u.css(a,"marginTop"))||0,b+=parseFloat(u.css(a,"marginLeft"))||0);return{top:e,left:b}},setOffset:function(a,e,b){var c=u.css(a,"position");"static"===c&&(a.style.position="relative");var m=u(a),f=m.offset(),k=u.css(a,"top"),q=u.css(a,"left"),d={},l={};("absolute"===c||"fixed"===c)&&-1<u.inArray("auto",[k,q])?(l=m.position(),c=l.top,q=l.left):(c=parseFloat(k)||
0,q=parseFloat(q)||0);u.isFunction(e)&&(e=e.call(a,b,f));null!=e.top&&(d.top=e.top-f.top+c);null!=e.left&&(d.left=e.left-f.left+q);"using"in e?e.using.call(a,d):m.css(d)}};u.fn.extend({position:function(){if(!this[0])return null;var a=this[0],e=this.offsetParent(),b=this.offset(),c=hc.test(e[0].nodeName)?{top:0,left:0}:e.offset();b.top-=parseFloat(u.css(a,"marginTop"))||0;b.left-=parseFloat(u.css(a,"marginLeft"))||0;c.top+=parseFloat(u.css(e[0],"borderTopWidth"))||0;c.left+=parseFloat(u.css(e[0],
"borderLeftWidth"))||0;return{top:b.top-c.top,left:b.left-c.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!hc.test(a.nodeName)&&"static"===u.css(a,"position");)a=a.offsetParent;return a})}});u.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,e){var b=/Y/.test(e);u.fn[a]=function(c){return u.access(this,function(a,c,m){var f=M(a);if(m===t)return f?e in f?f[e]:u.support.boxModel&&f.document.documentElement[c]||f.document.body[c]:a[c];
f?f.scrollTo(b?u(f).scrollLeft():m,b?m:u(f).scrollTop()):a[c]=m},a,c,arguments.length,null)}});u.each({Height:"height",Width:"width"},function(a,e){var b="client"+a,c="scroll"+a,m="offset"+a;u.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(u.css(a,e,"padding")):this[e]():null};u.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(u.css(b,e,a?"margin":"border")):this[e]():null};u.fn[e]=function(a){return u.access(this,function(a,e,f){if(u.isWindow(a))return e=a.document,
a=e.documentElement[b],u.support.boxModel&&a||e.body&&e.body[b]||a;if(9===a.nodeType)return e=a.documentElement,e[b]>=e[c]?e[b]:Math.max(a.body[c],e[c],a.body[m],e[m]);if(f===t)return a=u.css(a,e),e=parseFloat(a),u.isNumeric(e)?e:a;u(a).css(e,f)},e,a,arguments.length,null)}});p.jQuery=p.$=u;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return u});u.support.getSetAttribute||(u.removeAttr=function(a,e){"class"===e&&(e="className");a.removeAttribute(e)})})(window);/*
 Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Copyright 2011, Tim Down
 Licensed under the MIT license.
 Version: 1.2.1
 Build date: 8 October 2011
 2011 Benjamin Arthur Lupton {@link http://balupton.com}
 @license MIT License {@link http://creativecommons.org/licenses/MIT/}
 @return {String} outerHtml
 RequireJS i18n 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/i18n for details
*/
(function(){function p(g,b){var n,l;l=g||{};this.jQuery=b||{};this.config={};this.config.elements=l.elements?l.elements:[];this.config.attributes=l.attributes?l.attributes:{};this.config.attributes[p.ALL]=this.config.attributes[p.ALL]?this.config.attributes[p.ALL]:[];this.config.allow_comments=l.allow_comments?l.allow_comments:!1;this.allowed_elements={};this.config.protocols=l.protocols?l.protocols:{};this.config.add_attributes=l.add_attributes?l.add_attributes:{};this.dom=l.dom?l.dom:document;for(n=
0;n<this.config.elements.length;n++)this.allowed_elements[this.config.elements[n]]=!0;this.config.remove_element_contents={};this.config.remove_all_contents=!1;if(l.remove_contents)if(l.remove_contents instanceof Array)for(n=0;n<l.remove_contents.length;n++)this.config.remove_element_contents[l.remove_contents[n]]=!0;else this.config.remove_all_contents=!0;this.transformers=l.transformers?l.transformers:[];this.filters=l.filters?l.filters:[]}function t(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=
0.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}function r(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0}var s;s||(s={});(function(){function g(a){return 10>a?"0"+a:a}function b(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=f[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function n(a,e){var m,f,d,l,g=c,y,C=e[a];C&&"object"===typeof C&&"function"===
typeof C.toJSON&&(C=C.toJSON(a));"function"===typeof q&&(C=q.call(e,a,C));switch(typeof C){case "string":return b(C);case "number":return isFinite(C)?String(C):"null";case "boolean":case "null":return String(C);case "object":if(!C)return"null";c+=k;y=[];if("[object Array]"===Object.prototype.toString.apply(C)){l=C.length;for(m=0;m<l;m+=1)y[m]=n(m,C)||"null";d=0===y.length?"[]":c?"[\n"+c+y.join(",\n"+c)+"\n"+g+"]":"["+y.join(",")+"]";c=g;return d}if(q&&"object"===typeof q)for(l=q.length,m=0;m<l;m+=
1)"string"===typeof q[m]&&(f=q[m],(d=n(f,C))&&y.push(b(f)+(c?": ":":")+d));else for(f in C)Object.prototype.hasOwnProperty.call(C,f)&&(d=n(f,C))&&y.push(b(f)+(c?": ":":")+d);d=0===y.length?"{}":c?"{\n"+c+y.join(",\n"+c)+"\n"+g+"}":"{"+y.join(",")+"}";c=g;return d}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+
":"+g(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var l=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,k,f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},q;"function"!==typeof s.stringify&&
(s.stringify=function(a,e,b){var f;k=c="";if("number"===typeof b)for(f=0;f<b;f+=1)k+=" ";else"string"===typeof b&&(k=b);if((q=e)&&"function"!==typeof e&&("object"!==typeof e||"number"!==typeof e.length))throw Error("JSON.stringify");return n("",{"":a})});"function"!==typeof s.parse&&(s.parse=function(a,e){function b(a,c){var f,k,q=a[c];if(q&&"object"===typeof q)for(f in q)Object.prototype.hasOwnProperty.call(q,f)&&(k=b(q,f),void 0!==k?q[f]=k:delete q[f]);return e.call(a,c,q)}var c;a=String(a);l.lastIndex=
0;l.test(a)&&(a=a.replace(l,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),"function"===typeof e?b({"":c},""):c;throw new SyntaxError("JSON.parse");})})();define("util/json2",[],function(){return s});(function(){var g=function(){function b(b,c){var m=typeof b[c];
return m==e||!(m!=a||!b[c])||"unknown"==m}function g(e,b){return!(typeof e[b]!=a||!e[b])}function l(a,e){return typeof a[e]!=m}function d(a){return function(e,b){for(var c=b.length;c--;)if(!a(e,b[c]))return!1;return!0}}function c(a){return a&&y(a,A)&&F(a,z)}function k(a){window.alert("Rangy not supported in your browser. Reason: "+a);D.initialized=!0;D.supported=!1}function f(){if(!D.initialized){var a,e=!1,m=!1;b(document,"createRange")&&(a=document.createRange(),y(a,x)&&F(a,v)&&(e=!0),a.detach());
(a=g(document,"body")?document.body:document.getElementsByTagName("body")[0])&&b(a,"createTextRange")&&(a=a.createTextRange(),c(a)&&(m=!0));e||m||k("Neither Range nor TextRange are implemented");D.initialized=!0;D.features={implementsDomRange:e,implementsTextRange:m};e=p.concat(H);m=0;for(a=e.length;m<a;++m)try{e[m](D)}catch(f){g(window,"console")&&b(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",f)}}}function q(a){this.name=a;this.supported=this.initialized=
!1}var a="object",e="function",m="undefined",v="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer START_TO_START START_TO_END END_TO_START END_TO_END".split(" "),x="setStart setStartBefore setStartAfter setEnd setEndBefore setEndAfter collapse selectNode selectNodeContents compareBoundaryPoints deleteContents extractContents cloneContents insertNode surroundContents cloneRange toString detach".split(" "),z="boundingHeight boundingLeft boundingTop boundingWidth htmlText text".split(" "),
A="collapse compareEndPoints duplicate getBookmark moveToBookmark moveToElementText parentElement pasteHTML select setEndPoint getBoundingClientRect".split(" "),y=d(b),C=d(g),F=d(l),D={version:"1.2.1",initialized:!1,supported:!0,util:{isHostMethod:b,isHostObject:g,isHostProperty:l,areHostMethods:y,areHostObjects:C,areHostProperties:F,isTextRange:c},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!0}};D.fail=k;D.warn=function(a){a="Rangy warning: "+a;D.config.alertOnWarn?window.alert(a):
typeof window.console!=m&&typeof window.console.log!=m&&window.console.log(a)};({}).hasOwnProperty?D.util.extend=function(a,e){for(var b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}:k("hasOwnProperty not supported");var H=[],p=[];D.init=f;D.addInitListener=function(a){D.initialized?a(D):H.push(a)};var s=[];D.addCreateMissingNativeApiListener=function(a){s.push(a)};D.createMissingNativeApi=function(a){a=a||window;f();for(var e=0,b=s.length;e<b;++e)s[e](a)};q.prototype.fail=function(a){this.initialized=!0;
this.supported=!1;throw Error("Module '"+this.name+"' failed to load: "+a);};q.prototype.warn=function(a){D.warn("Module "+this.name+": "+a)};q.prototype.createError=function(a){return Error("Error in Rangy "+this.name+" module: "+a)};D.createModule=function(a,e){var b=new q(a);D.modules[a]=b;p.push(function(a){e(a,b);b.initialized=!0;b.supported=!0})};D.requireModules=function(a){for(var e=0,b=a.length,c,m;e<b;++e){m=a[e];c=D.modules[m];if(!(c&&c instanceof q))throw Error("Module '"+m+"' not found");
if(!c.supported)throw Error("Module '"+m+"' not supported");}};var r=!1,C=function(a){r||(r=!0,D.initialized||f())};if(typeof window==m)k("No window found");else if(typeof document==m)k("No document found");else return b(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",C,!1),b(window,"addEventListener")?window.addEventListener("load",C,!1):b(window,"attachEvent")?window.attachEvent("onload",C):k("Window does not have required addEventListener or attachEvent method"),D}();
g.createModule("DomUtil",function(b,g){function l(a){for(var e=0;a=a.previousSibling;)e++;return e}function d(a,e){var b=[],c;for(c=a;c;c=c.parentNode)b.push(c);for(c=e;c;c=c.parentNode)if(C(b,c))return c;return null}function c(a,e,b){for(b=b?a:a.parentNode;b;){a=b.parentNode;if(a===e)return b;b=a}return null}function k(a){a=a.nodeType;return 3==a||4==a||8==a}function f(a,e){var b=e.nextSibling,c=e.parentNode;b?c.insertBefore(a,b):c.appendChild(a);return a}function q(a){if(9==a.nodeType)return a;
if(typeof a.ownerDocument!=z)return a.ownerDocument;if(typeof a.document!=z)return a.document;if(a.parentNode)return q(a.parentNode);throw Error("getDocument: no document found for node");}function a(a){if(a)return a.previousSibling?a.previousSibling.nextSibling:a.nextSibling?a.nextSibling.previousSibling:a.parentNode?a.parentNode.firstChild:a}function e(a){return a?k(a)?'"'+a.data+'"':1==a.nodeType?"<"+a.nodeName+(a.id?' id="'+a.id+'"':"")+">["+a.childNodes.length+"]":a.nodeName:"[No node]"}function m(a){this._next=
this.root=a}function v(a,e){this.node=a;this.offset=e}function x(a){this.code=this[a];this.codeName=a;this.message="DOMException: "+this.codeName}var z="undefined",A=b.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||g.fail("document missing a Node creation method");A.isHostMethod(document,"getElementsByTagName")||g.fail("document missing getElementsByTagName method");var y=document.createElement("div");A.areHostMethods(y,["insertBefore","appendChild","cloneNode"])||
g.fail("Incomplete Element implementation");A.isHostProperty(y,"innerHTML")||g.fail("Element is missing innerHTML property");y=document.createTextNode("test");A.areHostMethods(y,["splitText","deleteData","insertData","appendData","cloneNode"])||g.fail("Incomplete Text Node implementation");var C=function(a,e){for(var b=a.length;b--;)if(a[b]===e)return!0;return!1};m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next,e;if(this._current){e=
a.firstChild;if(!e)for(e=null;a!==this.root&&!(e=a.nextSibling);)a=a.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}};v.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+e(this.node)+":"+this.offset+")]"}};x.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};x.prototype.toString=
function(){return this.message};b.dom={arrayContains:C,isHtmlNamespace:function(a){var e;return typeof a.namespaceURI==z||null===(e=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==e},parentElement:function(a){a=a.parentNode;return 1==a.nodeType?a:null},getNodeIndex:l,getNodeLength:function(a){var e;return k(a)?a.length:(e=a.childNodes)?e.length:0},getCommonAncestor:d,isAncestorOf:function(a,e,b){for(e=b?e:e.parentNode;e;){if(e===a)return!0;e=e.parentNode}return!1},getClosestAncestorIn:c,isCharacterDataNode:k,
insertAfter:f,splitDataNode:function(a,e){var b=a.cloneNode(!1);b.deleteData(0,e);a.deleteData(e,a.length-e);f(b,a);return b},getDocument:q,getWindow:function(a){a=q(a);if(typeof a.defaultView!=z)return a.defaultView;if(typeof a.parentWindow!=z)return a.parentWindow;throw Error("Cannot get a window object for node");},getIframeWindow:function(a){if(typeof a.contentWindow!=z)return a.contentWindow;if(typeof a.contentDocument!=z)return a.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element");
},getIframeDocument:function(a){if(typeof a.contentDocument!=z)return a.contentDocument;if(typeof a.contentWindow!=z)return a.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element");},getBody:function(a){return A.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]},getRootContainer:function(a){for(var e;e=a.parentNode;)a=e;return a},comparePoints:function(e,b,m,f){e=a(e);m=a(m);var k;if(e==m)return b===f?0:b<f?-1:1;if(k=c(m,e,!0))return b<=l(k)?
-1:1;if(k=c(e,m,!0))return l(k)<f?-1:1;b=d(e,m);e=e===b?b:c(e,b,!0);m=m===b?b:c(m,b,!0);if(e===m)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(b=b.firstChild;b;){if(b===e)return-1;if(b===m)return 1;b=b.nextSibling}throw Error("Should not be here!");},inspectNode:e,fragmentFromNodeChildren:function(a){for(var e=q(a).createDocumentFragment(),b;b=a.firstChild;)e.appendChild(b);return e},createIterator:function(a){return new m(a)},DomPosition:v};b.DOMException=x});
g.createModule("DomRange",function(b,g){function l(a,e){return 3!=a.nodeType&&(R.isAncestorOf(a,e.startContainer,!0)||R.isAncestorOf(a,e.endContainer,!0))}function d(a){return R.getDocument(a.startContainer)}function c(a,e,b){if(e=a._listeners[e])for(var c=0,m=e.length;c<m;++c)e[c].call(a,{target:a,args:b})}function k(a){return new ba(a.parentNode,R.getNodeIndex(a))}function f(a){return new ba(a.parentNode,R.getNodeIndex(a)+1)}function q(a,e,b){var c=11==a.nodeType?a.firstChild:a;R.isCharacterDataNode(e)?
b==e.length?R.insertAfter(a,e):e.parentNode.insertBefore(a,0==b?e:R.splitDataNode(e,b)):b>=e.childNodes.length?e.appendChild(a):e.insertBefore(a,e.childNodes[b]);return c}function a(e){for(var b,c,m=d(e.range).createDocumentFragment();c=e.next();){b=e.isPartiallySelectedSubtree();c=c.cloneNode(!b);b&&(b=e.getSubtreeIterator(),c.appendChild(a(b)),b.detach(!0));if(10==c.nodeType)throw new Z("HIERARCHY_REQUEST_ERR");m.appendChild(c)}return m}function e(a,b,c){var m,f;for(c=c||{stop:!1};m=a.next();)if(a.isPartiallySelectedSubtree())if(!1===
b(m)){c.stop=!0;break}else{if(m=a.getSubtreeIterator(),e(m,b,c),m.detach(!0),c.stop)break}else for(m=R.createIterator(m);f=m.next();)if(!1===b(f)){c.stop=!0;return}}function m(a){for(var e;a.next();)a.isPartiallySelectedSubtree()?(e=a.getSubtreeIterator(),m(e),e.detach(!0)):a.remove()}function v(a){for(var e,b=d(a.range).createDocumentFragment(),c;e=a.next();){a.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),c=a.getSubtreeIterator(),e.appendChild(v(c)),c.detach(!0)):a.remove();if(10==e.nodeType)throw new Z("HIERARCHY_REQUEST_ERR");
b.appendChild(e)}return b}function x(a,b,c){var m=!(!b||!b.length),f,k=!!c;m&&(f=RegExp("^("+b.join("|")+")$"));var q=[];e(new A(a,!1),function(a){m&&!f.test(a.nodeType)||k&&!c(a)||q.push(a)});return q}function z(a){return"["+("undefined"==typeof a.getName?"Range":a.getName())+"("+R.inspectNode(a.startContainer)+":"+a.startOffset+", "+R.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function A(a,e){this.range=a;this.clonePartiallySelectedTextNodes=e;if(!a.collapsed){this.sc=a.startContainer;this.so=
a.startOffset;this.ec=a.endContainer;this.eo=a.endOffset;var b=a.commonAncestorContainer;this.sc===this.ec&&R.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==b||R.isCharacterDataNode(this.sc)?R.getClosestAncestorIn(this.sc,b,!0):this.sc.childNodes[this.so],this._last=this.ec!==b||R.isCharacterDataNode(this.ec)?R.getClosestAncestorIn(this.ec,b,!0):this.ec.childNodes[this.eo-1])}}function y(a){this.code=this[a];
this.codeName=a;this.message="RangeException: "+this.codeName}function C(a,e,b){this.nodes=x(a,e,b);this._next=this.nodes[0];this._position=0}function F(a){return function(e,b){for(var c,m=b?e:e.parentNode;m;){c=m.nodeType;if(R.arrayContains(a,c))return m;m=m.parentNode}return null}}function D(a,e){if(Pa(a,e))throw new y("INVALID_NODE_TYPE_ERR");}function H(a){if(!a.startContainer)throw new Z("INVALID_STATE_ERR");}function p(a,e){if(!R.arrayContains(e,a.nodeType))throw new y("INVALID_NODE_TYPE_ERR");
}function s(a,e){if(0>e||e>(R.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new Z("INDEX_SIZE_ERR");}function r(a,e){if(wa(a,!0)!==wa(e,!0))throw new Z("WRONG_DOCUMENT_ERR");}function t(a){if(L(a,!0))throw new Z("NO_MODIFICATION_ALLOWED_ERR");}function K(a,e){if(!a)throw new Z(e);}function G(a){return!R.arrayContains(ka,a.nodeType)&&!wa(a,!0)}function u(a,e){return e<=(R.isCharacterDataNode(a)?a.length:a.childNodes.length)}function S(a){H(a);if(G(a.startContainer)||G(a.endContainer)||
!u(a.startContainer,a.startOffset)||!u(a.endContainer,a.endOffset))throw Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")");}function Q(){}function W(a){a.START_TO_START=Za;a.START_TO_END=bb;a.END_TO_END=xa;a.END_TO_START=Ia;a.NODE_BEFORE=ma;a.NODE_AFTER=Va;a.NODE_BEFORE_AND_AFTER=va;a.NODE_INSIDE=oa}function P(a){W(a);W(a.prototype)}function aa(a,b){return function(){S(this);var c=this.startContainer,m=this.startOffset,k=this.commonAncestorContainer,q=new A(this,
!0);c!==k&&(c=R.getClosestAncestorIn(c,k,!0),m=f(c),c=m.node,m=m.offset);e(q,t);q.reset();k=a(q);q.detach();b(this,c,m,c,m);return k}}function ca(a,e,c){function q(a,e){return function(b){H(this);p(b,na);p(da(b),ka);b=(a?k:f)(b);(e?d:g)(this,b.node,b.offset)}}function d(a,b,c){var m=a.endContainer,f=a.endOffset;if(b!==a.startContainer||c!==this.startOffset){if(da(b)!=da(m)||1==R.comparePoints(b,c,m,f))m=b,f=c;e(a,b,c,m,f)}}function g(a,b,c){var m=a.startContainer,f=a.startOffset;if(b!==a.endContainer||
c!==this.endOffset){if(da(b)!=da(m)||-1==R.comparePoints(b,c,m,f))m=b,f=c;e(a,m,f,b,c)}}function x(a,b,c){b===a.startContainer&&c===this.startOffset&&b===a.endContainer&&c===this.endOffset||e(a,b,c,b,c)}a.prototype=new Q;b.util.extend(a.prototype,{setStart:function(a,e){H(this);D(a,!0);s(a,e);d(this,a,e)},setEnd:function(a,e){H(this);D(a,!0);s(a,e);g(this,a,e)},setStartBefore:q(!0,!0),setStartAfter:q(!1,!0),setEndBefore:q(!0,!1),setEndAfter:q(!1,!1),collapse:function(a){S(this);a?e(this,this.startContainer,
this.startOffset,this.startContainer,this.startOffset):e(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){H(this);D(a,!0);e(this,a,0,a,R.getNodeLength(a))},selectNode:function(a){H(this);D(a,!1);p(a,na);var b=k(a);a=f(a);e(this,b.node,b.offset,a.node,a.offset)},extractContents:aa(v,e),deleteContents:aa(m,e),canSurroundContents:function(){S(this);t(this.startContainer);t(this.endContainer);var a=new A(this,!0),e=a._first&&l(a._first,this)||a._last&&
l(a._last,this);a.detach();return!e},detach:function(){c(this)},splitBoundaries:function(){S(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,m=this.endOffset,f=a===c;R.isCharacterDataNode(c)&&0<m&&m<c.length&&R.splitDataNode(c,m);R.isCharacterDataNode(a)&&0<b&&b<a.length&&(a=R.splitDataNode(a,b),f?(m-=b,c=a):c==a.parentNode&&m>=R.getNodeIndex(a)&&m++,b=0);e(this,a,b,c,m)},normalizeBoundaries:function(){S(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,
m=this.endOffset,f=function(a){var e=a.nextSibling;e&&e.nodeType==a.nodeType&&(c=a,m=a.length,a.appendData(e.data),e.parentNode.removeChild(e))},k=function(e){var f=e.previousSibling;if(f&&f.nodeType==e.nodeType){a=e;var k=e.length;b=f.length;e.insertData(0,f.data);f.parentNode.removeChild(f);a==c?(m+=b,c=a):c==e.parentNode&&(f=R.getNodeIndex(e),m==f?(c=e,m=k):m>f&&m--)}},q=!0;R.isCharacterDataNode(c)?c.length==m&&f(c):(0<m&&(q=c.childNodes[m-1])&&R.isCharacterDataNode(q)&&f(q),q=!this.collapsed);
q?R.isCharacterDataNode(a)?0==b&&k(a):b<a.childNodes.length&&(f=a.childNodes[b])&&R.isCharacterDataNode(f)&&k(f):(a=c,b=m);e(this,a,b,c,m)},collapseToPoint:function(a,e){H(this);D(a,!0);s(a,e);x(this,a,e)}});P(a)}function Y(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;a.commonAncestorContainer=a.collapsed?a.startContainer:R.getCommonAncestor(a.startContainer,a.endContainer)}function U(a,e,b,m,f){var k=a.startContainer!==e||a.startOffset!==b,q=a.endContainer!==m||a.endOffset!==
f;a.startContainer=e;a.startOffset=b;a.endContainer=m;a.endOffset=f;Y(a);c(a,"boundarychange",{startMoved:k,endMoved:q})}function V(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};Y(this)}b.requireModules(["DomUtil"]);var R=b.dom,ba=R.DomPosition,Z=b.DOMException;A.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},
next:function(){var a=this._current=this._next;a&&(this._next=a!==this._last?a.nextSibling:null,R.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so)));return a},remove:function(){var a=this._current,e,b;!R.isCharacterDataNode(a)||a!==this.sc&&a!==this.ec?a.parentNode&&a.parentNode.removeChild(a):(e=a===this.sc?this.so:0,b=a===this.ec?this.eo:a.length,
e!=b&&a.deleteData(e,b-e))},isPartiallySelectedSubtree:function(){return l(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new V(d(this.range));var e=this._current,b=e,c=0,m=e,f=R.getNodeLength(e);R.isAncestorOf(e,this.sc,!0)&&(b=this.sc,c=this.so);R.isAncestorOf(e,this.ec,!0)&&(m=this.ec,f=this.eo);U(a,b,c,m,f)}return new A(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach();
this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};y.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};y.prototype.toString=function(){return this.message};C.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var na=[1,3,4,5,7,8,10],ka=[2,9,11],ja=[1,3,4,5,7,8,10,11],
ea=[1,3,4,5,7,8],da=R.getRootContainer,wa=F([9,11]),L=F([5,6,10,12]),Pa=F([6,10,12]),Ua=document.createElement("style"),ra=!1;try{Ua.innerHTML="<b>x</b>",ra=3==Ua.firstChild.nodeType}catch(db){}b.features.htmlParsingConforms=ra;var Qa="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer".split(" "),Za=0,bb=1,xa=2,Ia=3,ma=0,Va=1,va=2,oa=3;Q.prototype={attachListener:function(a,e){this._listeners[a].push(e)},compareBoundaryPoints:function(a,e){S(this);r(this.startContainer,
e.startContainer);var b=a==Ia||a==Za?"start":"end",c=a==bb||a==Za?"start":"end";return R.comparePoints(this[b+"Container"],this[b+"Offset"],e[c+"Container"],e[c+"Offset"])},insertNode:function(a){S(this);p(a,ja);t(this.startContainer);if(R.isAncestorOf(a,this.startContainer,!0))throw new Z("HIERARCHY_REQUEST_ERR");a=q(a,this.startContainer,this.startOffset);this.setStartBefore(a)},cloneContents:function(){S(this);var e,b;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===
this.endContainer&&R.isCharacterDataNode(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),b=d(this).createDocumentFragment(),b.appendChild(e),b;b=new A(this,!0);e=a(b);b.detach();return e},canSurroundContents:function(){S(this);t(this.startContainer);t(this.endContainer);var a=new A(this,!0),e=a._first&&l(a._first,this)||a._last&&l(a._last,this);a.detach();return!e},surroundContents:function(a){p(a,ea);if(!this.canSurroundContents())throw new y("BAD_BOUNDARYPOINTS_ERR");
var e=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);q(a,this.startContainer,this.startOffset);a.appendChild(e);this.selectNode(a)},cloneRange:function(){S(this);for(var a=new V(d(this)),e=Qa.length,b;e--;)b=Qa[e],a[b]=this[b];return a},toString:function(){S(this);var a=this.startContainer;if(a===this.endContainer&&R.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],a=new A(this,!0);e(a,function(a){3!=
a.nodeType&&4!=a.nodeType||b.push(a.data)});a.detach();return b.join("")},compareNode:function(a){S(this);var e=a.parentNode,b=R.getNodeIndex(a);if(!e)throw new Z("NOT_FOUND_ERR");a=this.comparePoint(e,b);e=this.comparePoint(e,b+1);return 0>a?0<e?va:ma:0<e?Va:oa},comparePoint:function(a,e){S(this);K(a,"HIERARCHY_REQUEST_ERR");r(a,this.startContainer);return 0>R.comparePoints(a,e,this.startContainer,this.startOffset)?-1:0<R.comparePoints(a,e,this.endContainer,this.endOffset)?1:0},createContextualFragment:ra?
function(a){var e=this.startContainer,b=R.getDocument(e);if(!e)throw new Z("INVALID_STATE_ERR");var c=null;1==e.nodeType?c=e:R.isCharacterDataNode(e)&&(c=R.parentElement(e));c=null===c||"HTML"==c.nodeName&&R.isHtmlNamespace(R.getDocument(c).documentElement)&&R.isHtmlNamespace(c)?b.createElement("body"):c.cloneNode(!1);c.innerHTML=a;return R.fragmentFromNodeChildren(c)}:function(a){H(this);var e=d(this).createElement("body");e.innerHTML=a;return R.fragmentFromNodeChildren(e)},toHtml:function(){S(this);
var a=d(this).createElement("div");a.appendChild(this.cloneContents());return a.innerHTML},intersectsNode:function(a,e){S(this);K(a,"NOT_FOUND_ERR");if(R.getDocument(a)!==d(this))return!1;var b=a.parentNode,c=R.getNodeIndex(a);K(b,"NOT_FOUND_ERR");var m=R.comparePoints(b,c,this.endContainer,this.endOffset),b=R.comparePoints(b,c+1,this.startContainer,this.startOffset);return e?0>=m&&0<=b:0>m&&0<b},isPointInRange:function(a,e){S(this);K(a,"HIERARCHY_REQUEST_ERR");r(a,this.startContainer);return 0<=
R.comparePoints(a,e,this.startContainer,this.startOffset)&&0>=R.comparePoints(a,e,this.endContainer,this.endOffset)},intersectsRange:function(a,e){S(this);if(d(a)!=d(this))throw new Z("WRONG_DOCUMENT_ERR");var b=R.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),c=R.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return e?0>=b&&0<=c:0>b&&0<c},intersection:function(a){if(this.intersectsRange(a)){var e=R.comparePoints(this.startContainer,
this.startOffset,a.startContainer,a.startOffset),b=R.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),c=this.cloneRange();-1==e&&c.setStart(a.startContainer,a.startOffset);1==b&&c.setEnd(a.endContainer,a.endOffset);return c}return null},union:function(a){if(this.intersectsRange(a,!0)){var e=this.cloneRange();-1==R.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&e.setStart(a.startContainer,a.startOffset);1==R.comparePoints(a.endContainer,
a.endOffset,this.endContainer,this.endOffset)&&e.setEnd(a.endContainer,a.endOffset);return e}throw new y("Ranges do not intersect");},containsNode:function(a,e){return e?this.intersectsNode(a,!1):this.compareNode(a)==oa},containsNodeContents:function(a){return 0<=this.comparePoint(a,0)&&0>=this.comparePoint(a,R.getNodeLength(a))},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var e=this.cloneRange();e.selectNode(a);var b=e.getNodes([3]);return 0<b.length?
(e.setStart(b[0],0),a=b.pop(),e.setEnd(a,a.length),a=this.containsRange(e),e.detach(),a):this.containsNodeContents(a)},createNodeIterator:function(a,e){S(this);return new C(this,a,e)},getNodes:function(a,e){S(this);return x(this,a,e)},getDocument:function(){return d(this)},collapseBefore:function(a){H(this);this.setEndBefore(a);this.collapse(!1)},collapseAfter:function(a){H(this);this.setStartAfter(a);this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return V.rangesEqual(this,
a)},inspect:function(){return z(this)}};ca(V,U,function(a){H(a);a.startContainer=a.startOffset=a.endContainer=a.endOffset=null;a.collapsed=a.commonAncestorContainer=null;c(a,"detach",null);a._listeners=null});b.rangePrototype=Q.prototype;V.rangeProperties=Qa;V.RangeIterator=A;V.copyComparisonConstants=P;V.createPrototypeRange=ca;V.inspect=z;V.getRangeDocument=d;V.rangesEqual=function(a,e){return a.startContainer===e.startContainer&&a.startOffset===e.startOffset&&a.endContainer===e.endContainer&&a.endOffset===
e.endOffset};b.DomRange=V;b.RangeException=y});g.createModule("WrappedRange",function(b,g){function l(a,b,c,q){var d=a.duplicate();d.collapse(c);var l=d.parentElement();k.isAncestorOf(b,l,!0)||(l=b);if(!l.canHaveHTML)return new f(l.parentNode,k.getNodeIndex(l));b=k.getDocument(l).createElement("span");b.parentNode&&b.parentNode.removeChild(b);var g,n=c?"StartToStart":"StartToEnd";do l.insertBefore(b,b.previousSibling),d.moveToElementText(b);while(0<(g=d.compareEndPoints(n,a))&&b.previousSibling);
n=b.nextSibling;if(-1==g&&n&&k.isCharacterDataNode(n)){d.setEndPoint(c?"EndToStart":"EndToEnd",a);if(/[\r\n]/.test(n.data))for(d=d.duplicate(),l=d.text.replace(/\r\n/g,"\r").length,l=d.moveStart("character",l);-1==d.compareEndPoints("StartToEnd",d);)l++,d.moveStart("character",1);else if(l=d.text.replace(/\u00a0/g," "),c=n.data.replace(/\u00a0/g," "),0!==c.indexOf(l)){for(;0<l.length&&0!==c.indexOf(l);)l=l.substr(1);l=l.length}else l=d.text.length;n=new f(n,l)}else n=(q||!c)&&b.previousSibling,n=
(d=(q||c)&&b.nextSibling)&&k.isCharacterDataNode(d)?new f(d,0):n&&k.isCharacterDataNode(n)?new f(n,n.length):new f(l,k.getNodeIndex(b));b.parentNode.removeChild(b);return n}function d(a,b){var c,f,q=a.offset,d=k.getDocument(a.node),l=d.body.createTextRange(),g=k.isCharacterDataNode(a.node);g?(c=a.node,f=c.parentNode):(c=a.node.childNodes,c=q<c.length?c[q]:null,f=a.node);d=d.createElement("span");d.innerHTML="&#feff;";c?f.insertBefore(d,c):f.appendChild(d);try{l.moveToElementText(d),l.collapse(!b)}catch(n){}f.removeChild(d);
if(g)l[b?"moveStart":"moveEnd"]("character",q);return l}b.requireModules(["DomUtil","DomRange"]);var c,k=b.dom,f=k.DomPosition,q=b.DomRange;if(b.features.implementsDomRange&&(!b.features.implementsTextRange||!b.config.preferTextRange))(function(){function a(e){for(var b=f.length,c;b--;)c=f[b],e[c]=e.nativeRange[c]}var m,f=q.rangeProperties,d;c=function(b){if(!b)throw Error("Range must be specified");this.nativeRange=b;a(this)};q.createPrototypeRange(c,function(a,e,b,c,m){var f=a.endContainer!==c||
a.endOffset!=m;if(a.startContainer!==e||a.startOffset!=b||f)a.setEnd(c,m),a.setStart(e,b)},function(a){a.nativeRange.detach();a.detached=!0;for(var e=f.length,b;e--;)b=f[e],a[b]=null});m=c.prototype;m.selectNode=function(b){this.nativeRange.selectNode(b);a(this)};m.deleteContents=function(){this.nativeRange.deleteContents();a(this)};m.extractContents=function(){var b=this.nativeRange.extractContents();a(this);return b};m.cloneContents=function(){return this.nativeRange.cloneContents()};m.surroundContents=
function(b){this.nativeRange.surroundContents(b);a(this)};m.collapse=function(b){this.nativeRange.collapse(b);a(this)};m.cloneRange=function(){return new c(this.nativeRange.cloneRange())};m.refresh=function(){a(this)};m.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");k.getBody(document).appendChild(l);var g=document.createRange();g.setStart(l,0);g.setEnd(l,0);try{g.setStart(l,1),m.setStart=function(b,c){this.nativeRange.setStart(b,c);a(this)},m.setEnd=
function(b,c){this.nativeRange.setEnd(b,c);a(this)},d=function(b){return function(c){this.nativeRange[b](c);a(this)}}}catch(y){m.setStart=function(b,c){try{this.nativeRange.setStart(b,c)}catch(m){this.nativeRange.setEnd(b,c),this.nativeRange.setStart(b,c)}a(this)},m.setEnd=function(b,c){try{this.nativeRange.setEnd(b,c)}catch(m){this.nativeRange.setStart(b,c),this.nativeRange.setEnd(b,c)}a(this)},d=function(b,c){return function(m){try{this.nativeRange[b](m)}catch(f){this.nativeRange[c](m),this.nativeRange[b](m)}a(this)}}}m.setStartBefore=
d("setStartBefore","setEndBefore");m.setStartAfter=d("setStartAfter","setEndAfter");m.setEndBefore=d("setEndBefore","setStartBefore");m.setEndAfter=d("setEndAfter","setStartAfter");g.selectNodeContents(l);m.selectNodeContents=g.startContainer==l&&g.endContainer==l&&0==g.startOffset&&g.endOffset==l.length?function(b){this.nativeRange.selectNodeContents(b);a(this)}:function(a){this.setStart(a,0);this.setEnd(a,q.getEndOffset(a))};g.selectNodeContents(l);g.setEnd(l,3);d=document.createRange();d.selectNodeContents(l);
d.setEnd(l,4);d.setStart(l,2);-1==g.compareBoundaryPoints(g.START_TO_END,d)&1==g.compareBoundaryPoints(g.END_TO_START,d)?m.compareBoundaryPoints=function(a,e){e=e.nativeRange||e;a==e.START_TO_END?a=e.END_TO_START:a==e.END_TO_START&&(a=e.START_TO_END);return this.nativeRange.compareBoundaryPoints(a,e)}:m.compareBoundaryPoints=function(a,e){return this.nativeRange.compareBoundaryPoints(a,e.nativeRange||e)};b.util.isHostMethod(g,"createContextualFragment")&&(m.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)});
k.getBody(document).removeChild(l);g.detach();d.detach()})(),b.createNativeRange=function(a){a=a||document;return a.createRange()};else if(b.features.implementsTextRange){c=function(a){this.textRange=a;this.refresh()};c.prototype=new q(document);c.prototype.refresh=function(){var a,b,c=this.textRange;a=c.parentElement();var f=c.duplicate();f.collapse(!0);b=f.parentElement();f=c.duplicate();f.collapse(!1);c=f.parentElement();b=b==c?b:k.getCommonAncestor(b,c);b=b==a?b:k.getCommonAncestor(a,b);a=this.textRange;
0==a.compareEndPoints("StartToEnd",a)?b=a=l(this.textRange,b,!0,!0):(a=l(this.textRange,b,!0,!1),b=l(this.textRange,b,!1,!1));this.setStart(a.node,a.offset);this.setEnd(b.node,b.offset)};q.copyComparisonConstants(c);var a=function(){return this}();"undefined"==typeof a.Range&&(a.Range=c);b.createNativeRange=function(a){a=a||document;return a.body.createTextRange()}}b.features.implementsTextRange&&(c.rangeToTextRange=function(a){if(a.collapsed)return d(new f(a.startContainer,a.startOffset),!0);var b=
d(new f(a.startContainer,a.startOffset),!0),c=d(new f(a.endContainer,a.endOffset),!1);a=k.getDocument(a.startContainer).body.createTextRange();a.setEndPoint("StartToStart",b);a.setEndPoint("EndToEnd",c);return a});c.prototype.getName=function(){return"WrappedRange"};b.WrappedRange=c;b.createRange=function(a){a=a||document;return new c(b.createNativeRange(a))};b.createRangyRange=function(a){a=a||document;return new q(a)};b.createIframeRange=function(a){return b.createRange(k.getIframeDocument(a))};
b.createIframeRangyRange=function(a){return b.createRangyRange(k.getIframeDocument(a))};b.addCreateMissingNativeApiListener(function(a){a=a.document;"undefined"==typeof a.createRange&&(a.createRange=function(){return b.createRange(this)});a=a=null})});g.createModule("WrappedSelection",function(b,g){function l(a){return(a||window).getSelection()}function d(a){return(a||window).document.selection}function c(a,e,b){var c=b?"end":"start";b=b?"start":"end";a.anchorNode=e[c+"Container"];a.anchorOffset=
e[c+"Offset"];a.focusNode=e[b+"Container"];a.focusOffset=e[b+"Offset"]}function k(a){a.anchorNode=a.focusNode=null;a.anchorOffset=a.focusOffset=0;a.rangeCount=0;a.isCollapsed=!0;a._ranges.length=0}function f(a){var e;a instanceof F?(e=a._selectionNativeRange,e||(e=b.createNativeRange(y.getDocument(a.startContainer)),e.setEnd(a.endContainer,a.endOffset),e.setStart(a.startContainer,a.startOffset),a._selectionNativeRange=e,a.attachListener("detach",function(){this._selectionNativeRange=null}))):a instanceof
D?e=a.nativeRange:b.features.implementsDomRange&&a instanceof y.getWindow(a.startContainer).Range&&(e=a);return e}function q(a){var e=a.getNodes(),b;a:if(e.length&&1==e[0].nodeType){b=1;for(var c=e.length;b<c;++b)if(!y.isAncestorOf(e[0],e[b])){b=!1;break a}b=!0}else b=!1;if(!b)throw Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return e[0]}function a(a,e){var b=new D(e);a._ranges=[b];c(a,b,!1);a.rangeCount=1;a.isCollapsed=b.collapsed}function e(e){e._ranges.length=
0;if("None"==e.docSelection.type)k(e);else{var m=e.docSelection.createRange();if(m&&"undefined"!=typeof m.text)a(e,m);else{e.rangeCount=m.length;for(var f,q=y.getDocument(m.item(0)),d=0;d<e.rangeCount;++d)f=b.createRange(q),f.selectNode(m.item(d)),e._ranges.push(f);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed;c(e,e._ranges[e.rangeCount-1],!1)}}}function m(a,b){for(var c=a.docSelection.createRange(),m=q(b),f=y.getDocument(c.item(0)),f=y.getBody(f).createControlRange(),k=0,d=c.length;k<d;++k)f.add(c.item(k));
try{f.add(m)}catch(l){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}f.select();e(a)}function v(a,e,b){this.nativeSelection=a;this.docSelection=e;this._ranges=[];this.win=b;this.refresh()}function x(a,b){for(var c=y.getDocument(b[0].startContainer),c=y.getBody(c).createControlRange(),m=0,f;m<rangeCount;++m){f=q(b[m]);try{c.add(f)}catch(k){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)");
}}c.select();e(a)}function z(a,e){if(a.anchorNode&&y.getDocument(a.anchorNode)!==y.getDocument(e))throw new p("WRONG_DOCUMENT_ERR");}function A(a){var e=[],b=new s(a.anchorNode,a.anchorOffset),c=new s(a.focusNode,a.focusOffset),m="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,k=a.rangeCount;f<k;++f)e[f]=F.inspect(a.getRangeAt(f));return"["+m+"(Ranges: "+e.join(", ")+")(anchor: "+b.inspect()+", focus: "+c.inspect()+"]"}b.requireModules(["DomUtil",
"DomRange","WrappedRange"]);b.config.checkSelectionRanges=!0;var y=b.dom,C=b.util,F=b.DomRange,D=b.WrappedRange,p=b.DOMException,s=y.DomPosition,r,M,t=b.util.isHostMethod(window,"getSelection"),K=b.util.isHostObject(document,"selection"),G=K&&(!t||b.config.preferTextRange);G?(r=d,b.isSelectionValid=function(a){a=(a||window).document;var e=a.selection;return"None"!=e.type||y.getDocument(e.createRange().parentElement())==a}):t?(r=l,b.isSelectionValid=function(){return!0}):g.fail("Neither document.selection or window.getSelection() detected.");
b.getNativeSelection=r;var t=r(),u=b.createNativeRange(document),S=y.getBody(document),Q=C.areHostObjects(t,C.areHostProperties(t,["anchorOffset","focusOffset"]));b.features.selectionHasAnchorAndFocus=Q;var W=C.isHostMethod(t,"extend");b.features.selectionHasExtend=W;var P="number"==typeof t.rangeCount;b.features.selectionHasRangeCount=P;var aa=!1,ca=!0;C.areHostMethods(t,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof t.rangeCount&&b.features.implementsDomRange&&function(){var a=document.createElement("iframe");
S.appendChild(a);var e=y.getIframeDocument(a);e.open();e.write("<html><head></head><body>12</body></html>");e.close();var b=y.getIframeWindow(a).getSelection(),c=e.documentElement.lastChild.firstChild,e=e.createRange();e.setStart(c,1);e.collapse(!0);b.addRange(e);ca=1==b.rangeCount;b.removeAllRanges();var m=e.cloneRange();e.setStart(c,0);m.setEnd(c,2);b.addRange(e);b.addRange(m);aa=2==b.rangeCount;e.detach();m.detach();S.removeChild(a)}();b.features.selectionSupportsMultipleRanges=aa;b.features.collapsedNonEditableSelectionsSupported=
ca;var Y=!1,U;S&&C.isHostMethod(S,"createControlRange")&&(U=S.createControlRange(),C.areHostProperties(U,["item","add"])&&(Y=!0));b.features.implementsControlRange=Y;M=Q?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var V;C.isHostMethod(t,"getRangeAt")?V=function(a,e){try{return a.getRangeAt(e)}catch(b){return null}}:Q&&(V=function(a){var e=y.getDocument(a.anchorNode),e=b.createRange(e);e.setStart(a.anchorNode,
a.anchorOffset);e.setEnd(a.focusNode,a.focusOffset);e.collapsed!==this.isCollapsed&&(e.setStart(a.focusNode,a.focusOffset),e.setEnd(a.anchorNode,a.anchorOffset));return e});b.getSelection=function(a){a=a||window;var e=a._rangySelection,b=r(a),c=K?d(a):null;e?(e.nativeSelection=b,e.docSelection=c,e.refresh(a)):(e=new v(b,c,a),a._rangySelection=e);return e};b.getIframeSelection=function(a){return b.getSelection(y.getIframeWindow(a))};U=v.prototype;if(!G&&Q&&C.areHostMethods(t,["removeAllRanges","addRange"])){U.removeAllRanges=
function(){this.nativeSelection.removeAllRanges();k(this)};var R=function(a,e){var c=F.getRangeDocument(e),c=b.createRange(c);c.collapseToPoint(e.endContainer,e.endOffset);a.nativeSelection.addRange(f(c));a.nativeSelection.extend(e.startContainer,e.startOffset);a.refresh()};U.addRange=P?function(a,e){if(Y&&K&&"Control"==this.docSelection.type)m(this,a);else if(e&&W)R(this,a);else{var k;aa?k=this.rangeCount:(this.removeAllRanges(),k=0);this.nativeSelection.addRange(f(a));this.rangeCount=this.nativeSelection.rangeCount;
this.rangeCount==k+1?(b.config.checkSelectionRanges&&(k=V(this.nativeSelection,this.rangeCount-1))&&!F.rangesEqual(k,a)&&(a=new D(k)),this._ranges[this.rangeCount-1]=a,c(this,a,na(this.nativeSelection)),this.isCollapsed=M(this)):this.refresh()}}:function(a,e){e&&W?R(this,a):(this.nativeSelection.addRange(f(a)),this.refresh())};U.setRanges=function(a){if(Y&&1<a.length)x(this,a);else{this.removeAllRanges();for(var e=0,b=a.length;e<b;++e)this.addRange(a[e])}}}else if(C.isHostMethod(t,"empty")&&C.isHostMethod(u,
"select")&&Y&&G)U.removeAllRanges=function(){try{var a=jQuery.browser.msie&&8>jQuery.browser.version&&"undefined"===typeof document.documentMode;a||this.docSelection.empty();"None"!=this.docSelection.type&&a&&this.docSelection.empty()}catch(e){}k(this)},U.addRange=function(a){if("Control"==this.docSelection.type)m(this,a);else try{D.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,c(this,a,!1)}catch(e){}},U.setRanges=function(a){this.removeAllRanges();
var e=a.length;1<e?x(this,a):e&&this.addRange(a[0])};else return g.fail("No means of selecting a Range or TextRange was found"),!1;U.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new p("INDEX_SIZE_ERR");return this._ranges[a]};var ba;if(G)ba=function(c){var m;b.isSelectionValid(c.win)?m=c.docSelection.createRange():(m=y.getBody(c.win.document).createTextRange(),m.collapse(!0));"Control"==c.docSelection.type?e(c):m&&"undefined"!=typeof m.text?a(c,m):k(c)};else if(C.isHostMethod(t,"getRangeAt")&&
"number"==typeof t.rangeCount)ba=function(a){if(Y&&K&&"Control"==a.docSelection.type)e(a);else if(a._ranges.length=a.rangeCount=a.nativeSelection.rangeCount,a.rangeCount){for(var m=0,f=a.rangeCount;m<f;++m)a._ranges[m]=new b.WrappedRange(a.nativeSelection.getRangeAt(m));c(a,a._ranges[a.rangeCount-1],na(a.nativeSelection));a.isCollapsed=M(a)}else k(a)};else if(Q&&"boolean"==typeof t.isCollapsed&&"boolean"==typeof u.collapsed&&b.features.implementsDomRange)ba=function(a){var e;e=a.nativeSelection;e.anchorNode?
(e=V(e,0),a._ranges=[e],a.rangeCount=1,e=a.nativeSelection,a.anchorNode=e.anchorNode,a.anchorOffset=e.anchorOffset,a.focusNode=e.focusNode,a.focusOffset=e.focusOffset,a.isCollapsed=M(a)):k(a)};else return g.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;U.refresh=function(a){var e=a?this._ranges.slice(0):null;ba(this);if(a){a=e.length;if(a!=this._ranges.length)return!1;for(;a--;)if(!F.rangesEqual(e[a],this._ranges[a]))return!1;return!0}};var Z=function(a,
e){var b=a.getAllRanges(),c=!1;a.removeAllRanges();for(var m=0,f=b.length;m<f;++m)c||e!==b[m]?a.addRange(b[m]):c=!0;a.rangeCount||k(a)};U.removeRange=Y?function(a){if("Control"==this.docSelection.type){var b=this.docSelection.createRange();a=q(a);for(var c=y.getDocument(b.item(0)),c=y.getBody(c).createControlRange(),m,f=!1,k=0,d=b.length;k<d;++k)m=b.item(k),m!==a||f?c.add(b.item(k)):f=!0;c.select();e(this)}else Z(this,a)}:function(a){Z(this,a)};var na;!G&&Q&&b.features.implementsDomRange?(na=function(a){var e=
!1;a.anchorNode&&(e=1==y.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset));return e},U.isBackwards=function(){return na(this)}):na=U.isBackwards=function(){return!1};U.toString=function(){for(var a=[],e=0,b=this.rangeCount;e<b;++e)a[e]=""+this._ranges[e];return a.join("")};U.collapse=function(a,e){z(this,a);var c=b.createRange(y.getDocument(a));c.collapseToPoint(a,e);this.removeAllRanges();this.addRange(c);this.isCollapsed=!0};U.collapseToStart=function(){if(this.rangeCount){var a=
this._ranges[0];this.collapse(a.startContainer,a.startOffset)}else throw new p("INVALID_STATE_ERR");};U.collapseToEnd=function(){if(this.rangeCount){var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)}else throw new p("INVALID_STATE_ERR");};U.selectAllChildren=function(a){z(this,a);var e=b.createRange(y.getDocument(a));e.selectNodeContents(a);this.removeAllRanges();this.addRange(e)};U.deleteFromDocument=function(){if(Y&&K&&"Control"==this.docSelection.type){for(var a=this.docSelection.createRange(),
e;a.length;)e=a.item(0),a.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){a=this.getAllRanges();this.removeAllRanges();e=0;for(var b=a.length;e<b;++e)a[e].deleteContents();this.addRange(a[b-1])}};U.getAllRanges=function(){return this._ranges.slice(0)};U.setSingleRange=function(a){this.setRanges([a])};U.containsNode=function(a,e){for(var b=0,c=this._ranges.length;b<c;++b)if(this._ranges[b].containsNode(a,e))return!0;return!1};U.toHtml=function(){var a="";if(this.rangeCount){for(var a=
F.getRangeDocument(this._ranges[0]).createElement("div"),e=0,b=this._ranges.length;e<b;++e)a.appendChild(this._ranges[e].cloneContents());a=a.innerHTML}return a};U.getName=function(){return"WrappedSelection"};U.inspect=function(){return A(this)};U.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null};v.inspect=A;b.Selection=v;b.selectionPrototype=U;b.addCreateMissingNativeApiListener(function(a){"undefined"==typeof a.getSelection&&(a.getSelection=function(){return b.getSelection(this)});
a=null})});window.rangy=g})();define("vendor/rangy-core",function(){});define("aloha/rangy-core",["jquery","vendor/rangy-core"],function(g){return window.rangy});define("util/class",[],function(){var g=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){function n(){!g&&this._constructor&&this._constructor.apply(this,arguments)}var l=this.prototype;g=!0;var d=new this;g=!1;for(var c=0;c<arguments.length;c++){var k=arguments[c],f;for(f in k)d[f]="function"==
typeof k[f]&&"function"==typeof l[f]&&b.test(k[f])?function(b,a){return function(){var e=this._super;this._super=l[b];var c=a.apply(this,arguments);this._super=e;return c}}(f,k[f]):k[f]}n.prototype=d;n.constructor=n;n.extend=arguments.callee;return n};return this.Class});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/lang",[],function(){});(function(g){var b=g.GENTICS;b.Utils.applyProperties=function(b,l){for(var d in l)l.hasOwnProperty(d)&&(b[d]=l[d])};
b.Utils.uniqeString4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};b.Utils.guid=function(){var g=b.Utils.uniqeString4;return g()+g()+"-"+g()+"-"+g()+"-"+g()+"-"+g()+g()+g()}})(window);define("aloha/ecma5shims",[],function(){function g(b){var c=null;if(b){do c=b;while(null!=(b=b.parentNode))}return c}function b(b,c){return(b.contains(c)&&16)+(c.contains(b)&&8)+(0<=b.sourceIndex&&0<=c.sourceIndex?(b.sourceIndex<c.sourceIndex&&4)+(b.sourceIndex>c.sourceIndex&&2):1)}function n(b){return null!=
b.sourceIndex?b:b.parentNode.insertBefore(document.createComment(""),b)}var l,d={bind:function(b){var c=this.obj||this,q=Function.prototype.bind,a=Array.prototype.slice.call(arguments,1);return q?q.apply(c,arguments):function(){return c.apply(b,0===arguments.length?a:a.concat(Array.prototype.slice.call(arguments)))}},trim:function(){var b=this.obj||this,c=String.prototype.trim;return c?c.call(b):b.replace(/^\s+/,"").replace(/\s+$/,"")},indexOf:function(b,c){var q=this.obj||this,a=Array.prototype.indexOf;
if(a)return a.call(q,b,c);void 0===c&&(c=0);0>c&&(c+=q.length);0>c&&(c=0);for(a=q.length;c<a;c++)if(void 0!==q[c]&&q[c]===b)return c;return-1},forEach:function(b,c){var q=this.obj||this,a=Array.prototype.forEach;if(a)return a.call(q,b,c);var e,a=0;for(e=q.length;a<e;a++)void 0!==q[a]&&b.call(c,q[a],a,q)},map:function(b,c,q){var a=this.obj||this,e=Array.prototype.map,m="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,d=[];if(e)d=e.call(a,b,c);else{var e=[],g,d=
0;for(g=a.length;d<g;d++)void 0!==a[d]&&(e[d]=b.call(c,a[d],d,a));d=e}return m?l(d):d},filter:function(b,c,q){var a=this.obj||this,e=Array.prototype.filter,m="boolean"==typeof arguments[arguments.length-1]?Array.prototype.pop.call(arguments):!1,d=[];if(e)d=e.call(a,b,c);else{var e=[],g,n,d=0;for(n=a.length;d<n;d++)void 0!==a[d]&&b.call(c,g=a[d],d,a)&&e.push(g);d=e}return m?l(d):d},every:function(b,c){var q=this.obj||this,a=Array.prototype.every;if(a)return a.call(q,b,c);var e,a=0;for(e=q.length;a<
e;a++)if(void 0!==q[a]&&!b.call(c,q[a],a,q))return!1;return!0},some:function(b,c){var q=this.obj||this,a=Array.prototype.some;if(a)return a.call(q,b,c);var e,a=0;for(e=q.length;a<e;a++)if(void 0!==q[a]&&b.call(c,q[a],a,q))return!0;return!1},hasAttribute:function(b){var c=this.obj||this;return c.hasAttribute?c.hasAttribute(b):!!c.getAttribute(b)}};l=function(b){var c=function(){};c.prototype=d;c=new c;c.obj=b;return c};for(var c in d)d.hasOwnProperty(c)&&(l[c]=d[c]);l.Node="undefined"!=typeof window.Node?
window.Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32};l.compareDocumentPosition=function(c,f){if(document.documentElement.compareDocumentPosition)return c.compareDocumentPosition(f);
if(!document.documentElement.contains)throw"neither compareDocumentPosition nor contains is supported by this browser.";if(c==f)return 0;if(g(c)!=g(f))return 1;if(null!=c.sourceIndex&&null!=f.sourceIndex)return b(c,f);if(c==document)return 20;if(f==document)return 10;var q=n(c),a=n(f),e=b(q,a);c!=q&&q.parentNode.removeChild(q);f!=a&&a.parentNode.removeChild(a);return e};l.getComputedStyle=function(b,c){return window.getComputedStyle?window.getComputedStyle(b,c):b.currentStyle?b.currentStyle:null};
return l});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/dom",["jquery","util/class","aloha/ecma5shims"],function(g,b,n){var l=window.GENTICS,d={P:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,LI:!0};b=b.extend({wordRegex:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
nonWordRegex:/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0525\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971\u0972\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA2D\uFA30-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
mergeableTags:"b code del em i ins strong sub sup #text".split(" "),nonWordBoundaryTags:"a b code del em i ins span strong sub sup #text".split(" "),nonEmptyTags:["br"],tags:{flow:"a abbr address area article aside audio b bdi bdo blockquote br button canvas cite code command datalist del details dfn div dl em embed fieldset figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr i iframe img input ins kbd keygen label map mark math menu meter nav noscript object ol output p pre progress q ruby s samp script section select small span strong style sub sup svg table textarea time u ul var video wbr #text".split(" "),
phrasing:"a abbr area audio b bdi bdo br button canvas cite code command datalist del dfn em embed i iframe img input ins kbd keygen label map mark math meter noscript object output progress q ruby samp script select small span strong sub sup svg textarea time u var video wbr #text".split(" ")},children:{a:"phrasing",abbr:"phrasing",address:"flow",area:"empty",article:"flow",aside:"flow",audio:"source",b:"phrasing",base:"empty",bdo:"phrasing",blockquote:"phrasing",body:"flow",br:"empty",button:"phrasing",
canvas:"phrasing",caption:"flow",cite:"phrasing",code:"phrasing",col:"empty",colgroup:"col",command:"empty",datalist:["phrasing","option"],dd:"flow",del:"phrasing",div:"flow",details:["summary","flow"],dfn:"flow",dl:["dt","dd"],dt:"phrasing",em:"phrasing",embed:"empty",fieldset:["legend","flow"],figcaption:"flow",figure:["figcaption","flow"],footer:"flow",form:"flow",h1:"phrasing",h2:"phrasing",h3:"phrasing",h4:"phrasing",h5:"phrasing",h6:"phrasing",header:"flow",hgroup:"h1 h2 h3 h4 h5 h6".split(" "),
hr:"empty",i:"phrasing",iframe:"#text",img:"empty",input:"empty",ins:"phrasing",kbd:"phrasing",keygen:"empty",label:"phrasing",legend:"phrasing",li:"flow",link:"empty",map:"area",mark:"phrasing",menu:["li","flow"],meta:"empty",meter:"phrasing",nav:"flow",noscript:"phrasing",object:"param",ol:"li",optgroup:"option",option:"#text",output:"phrasing",p:"phrasing",param:"empty",pre:"phrasing",progress:"phrasing",q:"phrasing",rp:"phrasing",rt:"phrasing",ruby:["phrasing","rt","rp"],s:"phrasing",samp:"pharsing",
script:"#script",section:"flow",select:["option","optgroup"],small:"phrasing",source:"empty",span:"phrasing",strong:"phrasing",style:"phrasing",sub:"phrasing",summary:"phrasing",sup:"phrasing",table:"caption colgroup thead tbody tfoot tr".split(" "),tbody:"tr",td:"flow",textarea:"#text",tfoot:"tr",th:"phrasing",thead:"tr",time:"phrasing",title:"#text",tr:["th","td"],track:"empty",u:"phrasing",ul:"li","var":"phrasing",video:"source",wbr:"empty"},blockLevelElements:"p h1 h2 h3 h4 h5 h6 blockquote div pre".split(" "),
listElements:["li","ol","ul"],split:function(b,k,f){var q=g(b.startContainer),a=b.startOffset,e,m,d,l,n,A,y,C,F;f&&(q=g(b.endContainer),a=b.endOffset);1>k.length&&(k=g(document.body));f=!b.isCollapsed()&&!f;m=q.parents().get();m.unshift(q.get(0));g.each(m,function(a,b){if(k.filter(function(){return this==b}).length)return 0<a&&(e=m.slice(0,a)),!1});if(!e)return!0;e=e.reverse();q=0;for(A=e.length;q<A;++q)if(y=e[q],q===A-1)3===y.nodeType?(n=document.createTextNode(y.data.substring(a,y.data.length)),
y.data=y.data.substring(0,a)):(C=g(y),n=C.contents(),C=C.clone(!1).empty(),n=C.append(n.slice(a,n.length)).get(0)),f&&b.endContainer===y&&(b.endContainer=n,b.endOffset-=a,b.clearCaches()),l?l.prepend(n):g(y).after(n);else{C=g(y).clone(!1).empty();d?l.prepend(C):d=C;for(l=C;;){F=e[q+1].nextSibling;if(!F)break;l.append(F)}if(f&&b.endContainer===y){b.endContainer=C.get(0);y=e[q+1];for(C=0;;){y=y.previousSibling;if(!y)break;C++}b.endOffset-=C;b.clearCaches()}}g(e[0]).after(d);return g([e[0],d?d.get(0):
n])},allowsNesting:function(b,k){if(!(b&&b.nodeName&&k&&k.nodeName))return!1;var f=b.nodeName.toLowerCase(),q=k.nodeName.toLowerCase();return this.children[f]?this.children[f]==q||g.isArray(this.children[f])&&0<=g.inArray(q,this.children[f])||g.isArray(this.tags[this.children[f]])&&0<=g.inArray(q,this.tags[this.children[f]])?!0:!1:!1},addMarkup:function(b,k,f){3===b.startContainer.nodeType&&0<b.startOffset&&b.startOffset<b.startContainer.data.length&&this.split(b,g(b.startContainer).parent(),!1);
3===b.endContainer.nodeType&&0<b.endOffset&&b.endOffset<b.endContainer.data.length&&this.split(b,g(b.endContainer).parent(),!0);var q=b.getRangeTree();this.recursiveAddMarkup(q,k,b,f);this.doCleanup({merge:!0,removeempty:!0},b)},recursiveAddMarkup:function(b,k,f,q){var a,e;f=0;for(e=b.length;f<e;++f)"full"==b[f].type&&this.allowsNesting(k.get(0),b[f].domobj)?!q&&b[f].domobj.nodeName==k.get(0).nodeName||3===b[f].domobj.nodeType&&0===g.trim(b[f].domobj.data).length||(g(b[f].domobj).wrap(k),q||3===b[f].domobj.nodeType||
(a=new l.Utils.RangeObject,a.startContainer=a.endContainer=b[f].domobj.parentNode,a.startOffset=0,a.endOffset=a.endContainer.childNodes.length,this.removeMarkup(a,k,g(b[f].domobj.parentNode)))):(q||b[f].domobj&&b[f].domobj.nodeName!==k.get(0).nodeName)&&b[f].children&&0<b[f].children.length&&this.recursiveAddMarkup(b[f].children,k)},findHighestElement:function(b,k,f){k=k.toLowerCase();var q,a=b;for(b=f?function(){return f.filter(function(){return a==this}).length}:function(){return!1};!b()&&a;)a.nodeName.toLowerCase()===
k&&(q=a),a=a.parentNode;return q},removeMarkup:function(b,k,f){var q=k.get(0).nodeName,a=this.findHighestElement(b.startContainer,q,f),e=this.findHighestElement(b.endContainer,q,f),m=!1;a&&0<b.startOffset&&(this.split(b,g(a).parent(),!1),m=!0);e&&(3===b.endContainer.nodeType&&b.endOffset<b.endContainer.data.length&&(this.split(b,g(e).parent(),!0),m=!0),1===b.endContainer.nodeType&&b.endOffset<b.endContainer.childNodes.length&&(this.split(b,g(e).parent(),!0),m=!0));m&&b.correctRange();if(f=(f=this.findHighestElement(b.getCommonAncestorContainer(),
q,f))?f.parentNode:b.getCommonAncestorContainer())q=b.getRangeTree(f),this.recursiveRemoveMarkup(q,k),this.doCleanup({merge:!0,removeempty:!0},b,f)},recursiveRemoveMarkup:function(b,k){var f,q,a;f=0;for(q=b.length;f<q;++f)"full"==b[f].type&&b[f].domobj.nodeName==k.get(0).nodeName&&(a=g(b[f].domobj).contents(),0<a.length?a.first().unwrap():g(b[f].domobj).remove()),b[f].children&&this.recursiveRemoveMarkup(b[f].children,k)},doCleanup:function(b,k,f){var q=this,a,e,m,d,x;"undefined"===typeof b&&(b={});
"undefined"===typeof b.merge&&(b.merge=!1);"undefined"===typeof b.removeempty&&(b.removeempty=!1);"undefined"===typeof f&&k&&(f=k.getCommonAncestorContainer());e=a=!1;m=g(f);d=k.startOffset;x=k.endOffset;m.contents().each(function(){var f,n;try{n=this.nodeType,f=q.getIndexInParent(this)}catch(y){return}switch(n){case 1:a&&a.nodeName==this.nodeName?(k.startContainer===m&&d>f&&(k.startOffset-=1,e=!0),k.endContainer===m&&x>f&&(k.endOffset-=1,e=!0),g(a).append(g(this).contents()),e|=q.doCleanup(b,k,a),
g(this).remove()):(e|=q.doCleanup(b,k,this),n=!1,b.removeempty&&(l.Utils.Dom.isBlockLevelElement(this)&&0===this.childNodes.length&&(n=!0),0<=g.inArray(this.nodeName.toLowerCase(),q.mergeableTags)&&0===g(this).text().length&&0===this.childNodes.length&&(n=!0)),n?(k.startContainer===this.parentNode&&d>f&&(k.startOffset-=1,e=!0),k.endContainer===this.parentNode&&x>f&&(k.endOffset-=1,e=!0),g(this).remove()):a=(b.mergeable?b.mergeable(this):0<=g.inArray(this.nodeName.toLowerCase(),q.mergeableTags))?this:
!1);break;case 3:if(a&&3===a.nodeType&&b.merge)k.startContainer===this?(k.startContainer=a,k.startOffset+=a.nodeValue.length,e=!0):k.startContainer===a.parentNode&&k.startOffset===q.getIndexInParent(a)+1&&(k.startContainer=a,k.startOffset=a.nodeValue.length,e=!0),k.endContainer===this?(k.endContainer=a,k.endOffset+=a.nodeValue.length,e=!0):k.endContainer===a.parentNode&&k.endOffset===q.getIndexInParent(a)+1&&(k.endContainer=a,k.endOffset=a.nodeValue.length,e=!0),a.data+=this.data;else if(""!==this.nodeValue||
!b.removeempty){a=this;break}k.startContainer===this.parentNode&&k.startOffset>f&&(k.startOffset-=1,e=!0);k.endContainer===this.parentNode&&k.endOffset>f&&(k.endOffset-=1,e=!0);g(this).remove();if(a&&(!a.nextSibling||3!==a.nextSibling.nodeType))for(f=a.data.length-1;0<=f&&1<a.data.length;f--)"\u200b"===a.data.charAt(f)&&(a.deleteData(f,1),k.startContainer===a&&k.startOffset>f&&(k.startOffset--,e=!0),k.endContainer===a&&k.endOffset>f&&(k.endOffset--,e=!0))}});e&&k.clearCaches();return e},getIndexInParent:function(b){if(!b)return!1;
var k=0;for(b=b.previousSibling;b;)k++,b=b.previousSibling;return k},isBlockLevelElement:function(b){return b?1===b.nodeType&&0<=g.inArray(b.nodeName.toLowerCase(),this.blockLevelElements)?!0:!1:!1},isLineBreakElement:function(b){return b?1===b.nodeType&&"br"==b.nodeName.toLowerCase():!1},isListElement:function(b){return b?1===b.nodeType&&0<=g.inArray(b.nodeName.toLowerCase(),this.listElements):!1},isSplitObject:function(b){return 1===b.nodeType&&d.hasOwnProperty(b.nodeName)},searchAdjacentTextNode:function(b,
k,f,q){if(!b||1!==b.nodeType||0>k||k>b.childNodes.length)return!1;"undefined"===typeof q&&(q={blocklevel:!0,list:!0,linebreak:!0});"undefined"===typeof q.blocklevel&&(q.blocklevel=!0);"undefined"===typeof q.list&&(q.list=!0);"undefined"===typeof q.linebreak&&(q.linebreak=!0);"undefined"===typeof f&&(f=!0);var a,e=b;f&&0<k&&(a=b.childNodes[k-1]);for(!f&&k<b.childNodes.length&&(a=b.childNodes[k]);e;)if(a){if(3===a.nodeType&&0<g.trim(a.data).length)return a;if(q.blocklevel&&this.isBlockLevelElement(a)||
q.linebreak&&this.isLineBreakElement(a)||q.list&&this.isListElement(a))return!1;3===a.nodeType?a=f?a.previousSibling:a.nextSibling:(e=a,a=f?a.lastChild:a.firstChild)}else{if(q.blocklevel&&this.isBlockLevelElement(e)||q.list&&this.isListElement(e))return!1;a=f?e.previousSibling:e.nextSibling;e=e.parentNode}},insertIntoDOM:function(b,k,f,q,a){var e=k.getContainerParents(f,q),m=this,d;f||(f=g(document.body));0===e.length?d=f.get(0):g.each(e,function(a,e){if(m.allowsNesting(e,b.get(0)))return d=e,!1});
"undefined"===typeof d&&0<f.length&&(d=f.get(0));if(!this.allowsNesting(d,b.get(0))&&!a)return!1;if("undefined"!==typeof d){f=this.split(k,g(d),q);if(!0===f){f=k.startContainer;a=k.startOffset;q&&(f=k.endContainer,a=k.endOffset);if(0===a)return k=g(f).contents(),0<k.length?k.eq(0).before(b):g(f).append(b),!0;g(f).contents().eq(a-1).after(b);return!0}if(f)return f.eq(0).after(b),!0}return!1},removeFromDOM:function(b,k,f){if(f){f=this.getIndexInParent(b);var q=g(b).contents().length,a=b.parentNode;
k.startContainer==a&&k.startOffset>f?k.startOffset+=q-1:k.startContainer==b&&(k.startContainer=a,k.startOffset=f+k.startOffset);k.endContainer==a&&k.endOffset>f?k.endOffset+=q-1:k.endContainer==b&&(k.endContainer=a,k.endOffset=f+k.endOffset);g(b).contents().unwrap();this.doCleanup({merge:!0},k,a)}},removeRange:function(b){if(!b||b.isCollapsed())return!1;3==b.startContainer.nodeType&&0<b.startOffset&&b.startOffset<b.startContainer.data.length&&this.split(b,g(b.startContainer).parent(),!1);3==b.endContainer.nodeType&&
0<b.endOffset&&b.endOffset<b.endContainer.data.length&&this.split(b,g(b.endContainer).parent(),!0);var k=b.getRangeTree();b.endContainer=b.startContainer;b.endOffset=b.startOffset;this.recursiveRemoveRange(k,b);this.doCleanup({merge:!0},b);b.clearCaches()},recursiveRemoveRange:function(b,k){var f;for(f=0;f<b.length;++f)"full"==b[f].type?(0<g(k.startContainer).parents().andSelf().filter(b[f].domobj).length&&(k.startContainer=k.endContainer=b[f].domobj.parentNode,k.startOffset=k.endOffset=this.getIndexInParent(b[f].domobj)),
g(b[f].domobj).remove()):"partial"==b[f].type&&b[f].children&&this.recursiveRemoveRange(b[f].children,k)},extendToWord:function(b,k){var f=this.searchWordBoundary(b.startContainer,b.startOffset,!0),q=this.searchWordBoundary(b.endContainer,b.endOffset,!1);if(k||!(b.startContainer==f.container&&b.startOffset==f.offset||b.endContainer==q.container&&b.endOffset==q.offset))b.startContainer=f.container,b.startOffset=f.offset,b.endContainer=q.container,b.endOffset=q.offset,b.correctRange(),b.clearCaches()},
isWordBoundaryElement:function(b){return b&&b.nodeName?-1==g.inArray(b.nodeName.toLowerCase(),this.nonWordBoundaryTags):!1},searchWordBoundary:function(b,k,f){"undefined"===typeof f&&(f=!0);for(var q=!1,a,e;!q;)if(3===b.nodeType)if(f){for(e=a=b.data.substring(0,k).search(this.nonWordRegex);-1!=e;)a=e,e=b.data.substring(a+1,k).search(this.nonWordRegex),-1!=e&&(e=e+a+1);-1!=a?(k=a+1,q=!0):(k=this.getIndexInParent(b),b=b.parentNode)}else a=b.data.substring(k).search(this.nonWordRegex),-1!=a?(k+=a,q=
!0):(k=this.getIndexInParent(b)+1,b=b.parentNode);else 1===b.nodeType&&(f?0<k?this.isWordBoundaryElement(b.childNodes[k-1])?q=!0:(b=b.childNodes[k-1],k=3===b.nodeType?b.data.length:b.childNodes.length):this.isWordBoundaryElement(b)?q=!0:(k=this.getIndexInParent(b),b=b.parentNode):k<b.childNodes.length?this.isWordBoundaryElement(b.childNodes[k])?q=!0:(b=b.childNodes[k],k=0):this.isWordBoundaryElement(b)?q=!0:(k=this.getIndexInParent(b)+1,b=b.parentNode));3!==b.nodeType&&(q=this.searchAdjacentTextNode(b,
k,!f))&&(b=q,k=f?0:b.data.length);return{container:b,offset:k}},isEmpty:function(b){if(!b)return!0;if(-1!=g.inArray(b.nodeName.toLowerCase(),this.nonEmptyTags))return!1;if(3===b.nodeType)return-1==b.data.search(/\S/);var k,f;k=0;for(f=b.childNodes.length;k<f;++k)if(!this.isEmpty(b.childNodes[k]))return!1;return!0},setCursorAfter:function(b){var k=new l.Utils.RangeObject;this.getIndexInParent(b);var f;3==b.nodeType?(f=b,b=f.nodeValue.length):b.nextSibling&&3==b.nextSibling.nodeType?(f=b.nextSibling,
b=0):(f=b.parentNode,b=this.getIndexInParent(b)+1);k.startContainer=k.endContainer=f;k.startOffset=k.endOffset=b;k.select();return k},selectDomNode:function(b){var k=new l.Utils.RangeObject;k.startContainer=k.endContainer=b.parentNode;k.startOffset=this.getIndexInParent(b);k.endOffset=k.startOffset+1;k.select()},setCursorInto:function(b){var k=new l.Utils.RangeObject;k.startContainer=k.endContainer=b;k.startOffset=k.endOffset=0;k.select()},isEditingHost:function(b){return b&&1==b.nodeType&&("true"==
b.contentEditable||b.parentNode&&9==b.parentNode.nodeType&&"on"==b.parentNode.designMode)},isEditable:function(b){return b&&!this.isEditingHost(b)&&(1!=b.nodeType||"false"!=b.contentEditable)&&(this.isEditingHost(b.parentNode)||this.isEditable(b.parentNode))},getEditingHostOf:function(b){if(this.isEditingHost(b))return b;if(this.isEditable(b)){for(b=b.parentNode;!this.isEditingHost(b);)b=b.parentNode;return b}return null},inSameEditingHost:function(b,k){return this.getEditingHostOf(b)&&this.getEditingHostOf(b)==
this.getEditingHostOf(k)},isBlockNode:function(b){return b&&(b.nodeType==n.Node.ELEMENT_NODE&&-1==n(["inline","inline-block","inline-table","none"]).indexOf(n.getComputedStyle(b).display)||b.nodeType==n.Node.DOCUMENT_NODE||b.nodeType==n.Node.DOCUMENT_FRAGMENT_NODE)},getFirstVisibleChild:function(b,k){if(!b||b.nodeType==n.Node.TEXT_NODE&&this.isEmpty(b)||b.nodeType==n.Node.ELEMENT_NODE&&0==b.offsetHeight&&-1===g.inArray(b.nodeName.toLowerCase(),this.nonEmptyTags))return null;if(b.nodeType==n.Node.TEXT_NODE||
b.nodeType==n.Node.ELEMENT_NODE&&0==b.childNodes.length||!g(b).contentEditable())return k?b:null;var f;for(f=0;f<b.childNodes.length;++f){var q=this.getFirstVisibleChild(b.childNodes[f],!0);if(null!=q)return q}return null},getLastVisibleChild:function(b,k){if(!b||b.nodeType==n.Node.TEXT_NODE&&this.isEmpty(b)||b.nodeType==n.Node.ELEMENT_NODE&&0==b.offsetHeight&&-1===g.inArray(b.nodeName.toLowerCase(),this.nonEmptyTags))return null;if(b.nodeType==n.Node.TEXT_NODE||b.nodeType==n.Node.ELEMENT_NODE&&0==
b.childNodes.length||!g(b).contentEditable())return k?b:null;var f;for(f=b.childNodes.length-1;0<=f;--f){var q=this.getLastVisibleChild(b.childNodes[f],!0);if(null!=q)return q}return null}});l.Utils.Dom=new b;return l.Utils.Dom});define("aloha/pluginmanager",["jquery","util/class"],function(g,b){function n(b,c){if(0===b.length)c&&c();else{var k=b.length,f=function(){0===--k&&c&&c()},q,a;for(q=0;q<b.length;q++)a=b[q],a.settings=a.settings||{},"undefined"===typeof a.settings.enabled&&(a.settings.enabled=
!0),a.settings.enabled&&a.checkDependencies()?(a=a.init())&&"function"===typeof a.done?a.done(f):f():f()}}var l=window.Aloha;return new (b.extend({plugins:{},init:function(b,c){var k=this.plugins,f=l&&l.settings&&l.settings.plugins,q;for(q in f)f.hasOwnProperty(q)&&k[q]&&(k[q].settings=f[q]||{});var a;if(k&&0===c.length)for(a in c=[],k)k.hasOwnProperty(a)&&c.push(a);f=c;q=[];var e;for(e=0;e<f.length;e++)(a=k[f[e]])&&q.push(a);n(q,b)},register:function(b){if(!b.name)throw Error("Plugin does not have an name.");
if(this.plugins[b.name])throw Error('Already registered the plugin "'+b.name+'"!');this.plugins[b.name]=b},makeClean:function(b){for(var c in this.plugins)this.plugins.hasOwnProperty(c)&&(l.Log.isDebugEnabled()&&l.Log.debug(this,"Passing contents of HTML Element with id { "+b.attr("id")+" } for cleaning to plugin { "+c+" }"),this.plugins[c].makeClean(b))},toString:function(){return"pluginmanager"}}))});define("aloha/core",["jquery","aloha/pluginmanager"],function(g,b){function n(){var b=g.browser,
c=b.version;return!(b.webkit&&532.5>parseFloat(c)||b.mozilla&&1.9>parseFloat(c)||b.msie&&7>c||b.opera&&11>c)}function l(){g("html").mousedown(function(b){var c;if(c=d.activeEditable)if(c=!d.eventHandled)b=g(b.target),c=!(b.is(".aloha-dialog")||b.closest(".aloha").length);c&&d.deactivateEditable()}).mouseup(function(){d.eventHandled=!1})}var d=window.Aloha,c=[{fn:null,event:null,deferred:null},{fn:function(b,c){if(n())g.browser.webkit?g("html").addClass("aloha-webkit"):g.browser.opera?g("html").addClass("aloha-opera"):
g.browser.msie?g("html").addClass("aloha-ie"+parseInt(g.browser.version,10)):g.browser.mozilla&&g("html").addClass("aloha-mozilla"),-1!==navigator.appVersion.indexOf("Win")?d.OSName="Win":-1!==navigator.appVersion.indexOf("Mac")?d.OSName="Mac":-1!==navigator.appVersion.indexOf("X11")?d.OSName="Unix":-1!==navigator.appVersion.indexOf("Linux")&&(d.OSName="Linux"),l(),d.settings.base=d.getAlohaUrl(),d.Log.init(),d.settings.errorhandling&&(window.onerror=function(a,b,c){d.Log.error(d,"Error message: "+
a+"\nURL: "+b+"\nLine Number: "+c);return!0}),b(),c();else{var q=window.console;if(q){var a=q.error?"error":q.log?"log":null;if(a)q[a]("This browser is not supported")}}},event:null,deferred:null},{fn:function(b,c){d.RepositoryManager.init();b();c()},event:null,deferred:null},{fn:function(c,f){if(0===d.loadedPlugins.length){var q=b.plugins,a;for(a in q)q.hasOwnProperty(a)&&d.loadedPlugins.push(a)}var e=!1;b.init(function(){e||(c(),e=!0);f()},d.loadedPlugins);e||(c(),e=!0)},event:"aloha-plugins-loaded",
deferred:null},{fn:function(b,c){var q;for(q=0;q<d.editables.length;q++)d.editables[q].ready||d.editables[q].init();b();c()},event:null,deferred:null},{fn:null,event:"aloha-ready",deferred:null}];g.extend(!0,d,{version:"${version}",editables:[],activeEditable:null,settings:{},defaults:{},ui:{},OSName:"Unknown",loadedPlugins:[],_pluginBaseUrlByName:{},init:function(){d.initialize(c)},getLoadedPlugins:function(){return this.loadedPlugins},isPluginLoaded:function(b){var c=!1;g.each(this.loadedPlugins,
function(q,a){if(b===a.toString())return c=!0,!1});return c},activateEditable:function(b){var c=d.editables,q;for(q=0;q<c.length;q++)c[q]!==b&&c[q].isActive&&c[q].blur();d.activeEditable=b},getActiveEditable:function(){return d.activeEditable},deactivateEditable:function(){d.activeEditable&&(d.activeEditable.blur(),d.activeEditable=null)},getEditableById:function(b){var c=g("#"+b);c.length&&"textarea"===c[0].nodeName.toLowerCase()&&(b+="-aloha");for(c=0;c<d.editables.length;c++)if(d.editables[c].getId()===
b)return d.editables[c];return null},isEditable:function(b){var c,q;c=0;for(q=d.editables.length;c<q;c++)if(d.editables[c].originalObj.get(0)===b)return!0;return!1},getEditableHost:function(){var b=function(b){var c;for(c=0;c<d.editables.length;c++)if(d.editables[c].originalObj[0]===b)return d.editables[c];return null};return function(c){if(!c||0===c.length)return null;var q=b(c[0]);q||c.parents().each(function(a,e){if(q=b(e))return!1});return q}}(),log:function(b,c,q){"undefined"!==typeof d.Log&&
d.Log.log(b,c,q)},registerEditable:function(b){d.editables.push(b)},unregisterEditable:function(b){b=g.inArray(b,d.editables);-1!==b&&d.editables.splice(b,1)},isModified:function(){var b;for(b=0;b<d.editables.length;b++)if(d.editables[b].isModified&&d.editables[b].isModified())return!0;return!1},getAlohaUrl:function(b){return d.settings.baseUrl||""},getPluginUrl:function(b){if(!b)return null;(b=d.settings._pluginBaseUrlByName[b])&&(b.match("^(/|http[s]?:).*")||(b=d.getAlohaUrl()+"/"+b));return b},
disableObjectResizing:function(){try{var b;try{b=document.queryCommandSupported("enableObjectResizing")}catch(c){b=!1,d.Log.log("enableObjectResizing is not supported.")}b&&(document.execCommand("enableObjectResizing",!1,!1),d.Log.log("enableObjectResizing disabled."))}catch(q){d.Log.error(q,"Could not disable enableObjectResizing")}},toString:function(){return"Aloha"}});return d});define("aloha/console",["aloha/core","util/class","jquery"],function(g,b,n){b=b.extend({init:function(){"undefined"!==
typeof g.settings.logLevels&&g.settings.logLevels||(g.settings.logLevels={error:!0,warn:!0});"undefined"!==typeof g.settings.logHistory&&g.settings.logHistory||(g.settings.logHistory={});g.settings.logHistory.maxEntries||(g.settings.logHistory.maxEntries=100);g.settings.logHistory.highWaterMark||(g.settings.logHistory.highWaterMark=90);g.settings.logHistory.levels||(g.settings.logHistory.levels={error:!0,warn:!0});this.flushLogHistory();g.trigger("aloha-logger-ready")},logHistory:[],highWaterMarkReached:!1,
log:function(b,d,c){"undefined"===typeof d&&(c=b);"string"!==typeof d&&d&&d.toString&&(d=d.toString());"undefined"===typeof c&&(c=d,d=void 0);"undefined"!==typeof b&&b||(b="log");b=b.toLowerCase();if("undefined"!==typeof g.settings.logLevels&&g.settings.logLevels[b]){d=d||"Unkown Aloha Component";this.addToLogHistory({level:b,component:d,message:c,date:new Date});var k=window.console;switch(b){case "error":window.console&&k.error&&(d||c?k.error(d+": "+c):k.error("Error occured without message and component"));
break;case "warn":window.console&&k.warn&&k.warn(d+": "+c);break;case "info":window.console&&k.info&&k.info(d+": "+c);break;case "debug":window.console&&k.log&&k.log(d+" ["+b+"]: "+c);break;default:window.console&&k.log&&k.log(d+" ["+b+"]: "+c)}}},error:function(b,d){this.log("error",b,d)},warn:function(b,d){this.log("warn",b,d)},info:function(b,d){this.log("info",b,d)},debug:function(b,d){this.log("debug",b,d)},deprecated:function(b,d){this.log("warn",b,d);if(g.settings.logLevels.deprecated)throw Error(d);
},isLogLevelEnabled:function(b){return g.settings&&g.settings.logLevels&&g.settings.logLevels[b]},isErrorEnabled:function(){return this.isLogLevelEnabled("error")},isWarnEnabled:function(){return this.isLogLevelEnabled("warn")},isInfoEnabled:function(){return this.isLogLevelEnabled("info")},isDebugEnabled:function(){return this.isLogLevelEnabled("debug")},addToLogHistory:function(b){g.settings.logHistory||this.init();if(!(0>=g.settings.logHistory.maxEntries)&&g.settings.logHistory.levels[b.level])for(this.logHistory.push(b),
!this.highWaterMarkReached&&this.logHistory.length>=g.settings.logHistory.maxEntries*g.settings.logHistory.highWaterMark/100&&(g.trigger("aloha-log-full"),this.highWaterMarkReached=!0);this.logHistory.length>g.settings.logHistory.maxEntries;)this.logHistory.shift()},getLogHistory:function(){return this.logHistory},flushLogHistory:function(){this.logHistory=[];this.highWaterMarkReached=!1}});b=new b;return g.Log=g.Console=b});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||
{};define("util/range",["jquery","util/dom","util/class","aloha/console","aloha/rangy-core"],function(g,b,n,l,d){function c(b,a){var e=[],c;for(c=1===b.nodeType?b:b.parentNode;c&&c!==a&&9!==c.nodeType;)1===c.nodeType&&e.push(c),c=c.parentNode;return e}var k=window.GENTICS,f=window.Aloha;k.Utils.RangeObject=n.extend({_constructor:function(b){"object"===typeof b?("undefined"!==typeof b.startContainer&&(this.startContainer=b.startContainer),"undefined"!==typeof b.startOffset&&(this.startOffset=b.startOffset),
"undefined"!==typeof b.endContainer&&(this.endContainer=b.endContainer),"undefined"!==typeof b.endOffset&&(this.endOffset=b.endOffset)):!0===b&&this.initializeFromUserSelection()},startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0,deleteContents:function(){b.removeRange(this)},log:function(b){l.deprecated("Utils.RangeObject",'log() is deprecated. use console.log() from module "aloha/console" instead: '+b)},isCollapsed:function(){return!this.endContainer||this.startContainer===
this.endContainer&&this.startOffset===this.endOffset},getCommonAncestorContainer:function(){if(this.commonAncestorContainer)return this.commonAncestorContainer;this.updateCommonAncestorContainer();return this.commonAncestorContainer},getContainerParents:function(b,a){var e=a?this.endContainer:this.startContainer;return e?g(c(e,b?b[0]:null)):!1},getStartContainerParents:function(b){return this.getContainerParents(b,!1)},getEndContainerParents:function(b){return this.getContainerParents(b,!0)},updateCommonAncestorContainer:function(b){if(b)this.commonAncestorContainer=
b;else{var a=this.getStartContainerParents(),e=this.getEndContainerParents(),c;if(!(0<a.length&&0<e.length))return l.warn("aloha/range","could not find commonAncestorContainer"),!1;for(c=0;c<a.length;c++)if(-1!=e.index(a[c])){this.commonAncestorContainer=a[c];break}}l.debug(b?"commonAncestorContainer was set successfully":"commonAncestorContainer was calculated successfully");return!0},getCollapsedIERange:function(b,a){var e=document.body.createTextRange(),c,f,k;k=this.searchElementToLeft(b,a);k.element?
(c=document.body.createTextRange(),c.moveToElementText(k.element),e.setEndPoint("StartToEnd",c),0!==k.characters?e.moveStart("character",k.characters):(e.moveStart("character",1),e.moveStart("character",-1))):(this.searchElementToRight(b,a),f=3==b.nodeType?b.parentNode:b,c=document.body.createTextRange(),c.moveToElementText(f),e.setEndPoint("StartToStart",c),0!==k.characters&&e.moveStart("character",k.characters));e.collapse();return e},select:function(){var b;if("undefined"===typeof this.startContainer||
"undefined"===typeof this.endContainer)return l.warn("can not select an empty range"),!1;b=d.createRange();b.setStart(this.startContainer,this.startOffset);b.setEnd(this.endContainer,this.endOffset);d.getSelection().setSingleRange(b)},searchElementToLeft:function(b,a){var e,c=0;3===b.nodeType?(c=a,e=b.previousSibling):0<a&&(e=b.childNodes[a-1]);for(;e&&3===e.nodeType;)c+=e.data.length,e=e.previousSibling;return{element:e,characters:c}},searchElementToRight:function(b,a){var e,c=0;3===b.nodeType?(c=
b.data.length-a,e=b.nextSibling):a<b.childNodes.length&&(e=b.childNodes[a]);for(;e&&3===e.nodeType;)c+=e.data.length,e=e.nextSibling;return{element:e,characters:c}},update:function(b){l.debug("now updating rangeObject");this.initializeFromUserSelection(b);this.updateCommonAncestorContainer()},initializeFromUserSelection:function(b){b=d.getSelection();if(!b||!b.rangeCount)return!1;b=b.getRangeAt(0);if(!b)return!1;this.startContainer=b.startContainer;this.endContainer=b.endContainer;this.startOffset=
b.startOffset;this.endOffset=b.endOffset;this.correctRange()},correctRange:function(){var b,a;this.clearCaches();if(this.isCollapsed()){if(1===this.startContainer.nodeType){if(0<this.startOffset&&3===this.startContainer.childNodes[this.startOffset-1].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset-1];this.startOffset=this.startContainer.data.length;this.endContainer=this.startContainer;this.endOffset=this.startOffset;return}if(0<this.startOffset&&1===this.startContainer.childNodes[this.startOffset-
1].nodeType){if(b=k.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!0)){this.startContainer=this.endContainer=b;this.startOffset=this.endOffset=b.data.length;return}if(b=k.Utils.Dom.searchAdjacentTextNode(this.startContainer,this.startOffset,!1)){this.startContainer=this.endContainer=b;this.startOffset=this.endOffset=0;return}}if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType){this.startContainer=this.startContainer.childNodes[this.startOffset];
this.startOffset=0;this.endContainer=this.startContainer;this.endOffset=0;return}}3===this.startContainer.nodeType&&0===this.startOffset&&(b=k.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,k.Utils.Dom.getIndexInParent(this.startContainer),!0))&&0<g(b).closest(f.activeEditable.obj).length&&(this.startContainer=this.endContainer=b,this.startOffset=this.endOffset=b.data.length)}else{if(1===this.startContainer.nodeType)if(this.startOffset<this.startContainer.childNodes.length&&3===this.startContainer.childNodes[this.startOffset].nodeType)this.startContainer=
this.startContainer.childNodes[this.startOffset],this.startOffset=0;else if(this.startOffset<this.startContainer.childNodes.length&&1===this.startContainer.childNodes[this.startOffset].nodeType){b=!1;for(a=this.startContainer.childNodes[this.startOffset];!1===b&&a.childNodes&&0<a.childNodes.length;)a=a.childNodes[0],3===a.nodeType&&(b=a);!1!==b&&(this.startContainer=b,this.startOffset=0)}3===this.startContainer.nodeType&&this.startOffset===this.startContainer.data.length&&(b=k.Utils.Dom.searchAdjacentTextNode(this.startContainer.parentNode,
k.Utils.Dom.getIndexInParent(this.startContainer)+1,!1))&&(this.startContainer=b,this.startOffset=0);if(3===this.endContainer.nodeType&&0===this.endOffset)if(this.endContainer.previousSibling&&3===this.endContainer.previousSibling.nodeType)this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length;else if(this.endContainer.previousSibling&&1===this.endContainer.previousSibling.nodeType&&this.endContainer.parentNode){b=this.endContainer.parentNode;for(a=0;a<b.childNodes.length;++a)if(b.childNodes[a]==
this.endContainer){this.endOffset=a;break}this.endContainer=b}1==this.endContainer.nodeType&&0===this.endOffset&&this.endContainer.previousSibling&&(3===this.endContainer.previousSibling.nodeType?(this.endContainer=this.endContainer.previousSibling,this.endOffset=this.endContainer.data.length):1===this.endContainer.previousSibling.nodeType&&this.endContainer.previousSibling.childNodes&&0<this.endContainer.previousSibling.childNodes.length&&(this.endContainer=this.endContainer.previousSibling,this.endOffset=
this.endContainer.childNodes.length));if(1==this.endContainer.nodeType)if(0<this.endOffset&&3===this.endContainer.childNodes[this.endOffset-1].nodeType)this.endContainer=this.endContainer.childNodes[this.endOffset-1],this.endOffset=this.endContainer.data.length;else if(0<this.endOffset&&1===this.endContainer.childNodes[this.endOffset-1].nodeType){b=!1;for(a=this.endContainer.childNodes[this.endOffset-1];!1===b&&a.childNodes&&0<a.childNodes.length;)a=a.childNodes[a.childNodes.length-1],3===a.nodeType&&
(b=a);!1!==b&&(this.endContainer=b,this.endOffset=this.endContainer.data.length)}}},clearCaches:function(){this.commonAncestorContainer=void 0},getRangeTree:function(b){"undefined"===typeof b&&(b=this.getCommonAncestorContainer());this.inselection=!1;return this.recursiveGetRangeTree(b)},recursiveGetRangeTree:function(b){var a=0,e=this,c=[];g(b).contents().each(function(f){var d="none",l=!1,g=!1,y=!1,n=!1,F=!1,D=!1;e.isCollapsed()&&b===e.startContainer&&e.startOffset===f&&(c[a]=new k.Utils.RangeTree,
c[a].type="collapsed",c[a].domobj=void 0,e.inselection=!1,y=!0,a++);if(!e.inselection&&!y)switch(this.nodeType){case 3:this===e.startContainer&&(e.inselection=!0,d=0<e.startOffset?"partial":"full",l=e.startOffset,g=this.length);break;case 1:this===e.startContainer&&0===e.startOffset&&(e.inselection=!0,d="full"),b===e.startContainer&&e.startOffset===f&&(e.inselection=!0,d="full")}if(e.inselection&&!y){"none"==d&&(d="full");switch(this.nodeType){case 3:this===e.endContainer&&(e.inselection=!1,e.endOffset<
this.length&&(d="partial"),!1===l&&(l=0),g=e.endOffset);break;case 1:this===e.endContainer&&0===e.endOffset&&(e.inselection=!1)}b===e.endContainer&&e.endOffset<=f&&(e.inselection=!1,d="none")}c[a]=new k.Utils.RangeTree;c[a].domobj=this;c[a].type=d;"partial"==d&&(c[a].startOffset=l,c[a].endOffset=g);c[a].children=e.recursiveGetRangeTree(this);if(0<c[a].children.length){for(f=0;f<c[a].children.length;++f)switch(c[a].children[f].type){case "none":n=!0;break;case "full":D=!0;break;case "partial":F=!0}F||
D&&n?c[a].type="partial":!D||F||n||(c[a].type="full")}a++});this.isCollapsed()&&b===this.startContainer&&this.startOffset==b.childNodes.length&&(c[a]=new k.Utils.RangeTree,c[a].type="collapsed",c[a].domobj=void 0);return c},findMarkup:function(b,a,e){e=e?this.endContainer:this.startContainer;var m;a=a?a[0]:null;if(e){a=c(e,a);e=0;for(m=a.length;e<m;e++)if(b.apply(a[e]))return a[e];return!1}},getText:function(){return this.isCollapsed()?"":this.recursiveGetText(this.getRangeTree())},recursiveGetText:function(b){if(!b)return"";
var a=this,e="";g.each(b,function(){"full"==this.type?e+=g(this.domobj).text():"partial"==this.type&&3===this.domobj.nodeType?e+=g(this.domobj).text().substring(this.startOffset,this.endOffset):"partial"==this.type&&1===this.domobj.nodeType&&this.children&&(e+=a.recursiveGetText(this.children))});return e}});k.Utils.RangeTree=n.extend({domobj:{},type:null,children:[]});return k.Utils.RangeObject});define("util/functions",[],function(){return{identity:function(g){return g},noop:function(){},returnTrue:function(){return!0},
returnFalse:function(){return!1},complement:function(g){return function(){return!g.apply(this,arguments)}}}});define("util/arrays",["util/functions"],function(g){function b(b,c){var a,e,m=[];a=0;for(e=b.length;a<e;a++)m.push(c(b[a]));return m}function n(b,c){return b.map(c)}function l(b,c){var a,e,m,k=[];a=0;for(e=b.length;a<e;a++)m=b[a],c(m)&&k.push(m);return k}function d(b,c){var a,e;a=0;for(e=b.length;a<e;a++)if(c===b[a])return a;return-1}function c(b,c){return-1!==d(b,c)}function k(b,c){var a,
e;a=0;for(e=b.length;a<e;a++)if(c(b[a]))return!0;return!1}return{filter:l,indexOf:d,reduce:function(b,c,a){var e,m;e=0;for(m=b.length;e<m;e++)c=a(c,b[e]);return c},forEach:function(b,c){var a,e;a=0;for(e=b.length;a<e;a++)c(b[a],a,b)},some:k,every:function(b,c){return!k(b,g.complement(c))},map:Array.prototype.map?n:b,contains:c,equal:function(b,c,a){var e,m=b.length;if(m!==c.length)return!1;if(a)for(e=0;e<m;e++){if(!a(b[e],c[e]))return!1}else for(e=0;e<m;e++)if(b[e]!==c[e])return!1;return!0},applyNotNull:function(b,
c){return null==b?null:c(b)},sortUnique:function(b,c){var a;if(c)for(b.sort(c),a=1;a<b.length;a++)0===c(b[a],b[a-1])&&b.splice(a--,1);else for(b.sort(),a=1;a<b.length;a++)b[a]==b[a-1]&&b.splice(a--,1);return b},intersect:function(b,k){return l(b,function(a){return c(k,a)})},second:function(b){return b[1]},last:function(b){return b.length?b[b.length-1]:null}}});define("util/strings",["jquery"],function(g){var b=/\s+/;return{words:function(g){g=g.split(b);g.length&&""===g[0]&&g.shift();g.length&&""===
g[g.length-1]&&g.pop();return g},dashesToCamelCase:function(b){return b.replace(/[\-]([a-z])/gi,function(b,d){return d.toUpperCase()})},camelCaseToDashes:function(b){return b.replace(/[A-Z]/g,function(b){return"-"+b.toLowerCase()})},splitIncl:function(b,l){for(var d=[],c=0,k;null!=(k=l.exec(b));)c<k.index&&(d.push(b.substring(c,k.index)),c=k.index),c+=k[0].length,d.push(k[0]);c<b.length&&d.push(b.substring(c,b.length));return d},empty:function(b){return""===b||null==b}}});define("PubSub",[],function(){var g=
{},b={},n=0;return{sub:function(l,d){if("function"!==typeof d)return-1;var c=g[l];c||(c=g[l]=[]);c.push(++n);b[n]={channel:l,callback:d};return n},unsub:function(l){if(-1===l||!b[l])return!1;var d=b[l]&&g[b[l].channel];delete b[l];for(var c=d.length;c;)if(d[--c]===l)return d.splice(c,1),!0;return!1},pub:function(l,d){var c=l.split("."),k,f=c.length,q="",a=0;for(k=0;k<f;++k){var q=q+((0===k?"":".")+c[k]),e;var m=q;e=d;if(g[m]){e?"object"!==typeof e&&(e={data:e}):e={};e.channel=m;for(var m=g[m].slice(),
v=void 0,v=0;v<m.length;++v)b[m[v]].callback(e);e=v}else e=0;a+=e}return a}}});define("util/maps",[],function(){return{isEmpty:function(g){for(var b in g)if(g.hasOwnProperty(b))return!1;return!0},fillTuples:function(g,b){for(var n=b.length,l;n--;)l=b[n],g[l[0]]=l[1];return g},fillKeys:function(g,b,n){for(var l=b.length;l--;)g[b[l]]=n;return g},keys:function(g){var b=[],n;for(n in g)g.hasOwnProperty(n)&&b.push(n);return b},forEach:function(g,b){for(var n in g)g.hasOwnProperty(n)&&b(g[n],n,g)}}});define("util/html",
["jquery","util/dom","util/maps","util/arrays"],function(g,b,n,l){function d(b){return 3===b.nodeType&&!b.length}var c={A:!0,B:!0,EM:!0,FONT:!0,I:!0,S:!0,SPAN:!0,STRIKE:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0},k="address article aside audio blockquote canvas dd div dl fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr noscript ol output p pre section table tfoot ul video".split(" "),f={};n.fillKeys(f,k,!0);n.fillKeys(f,l.map(k,function(b){return b.toUpperCase()}),!0);return{BLOCKLEVEL_ELEMENTS:k,
isBlock:function(b){return f[b.nodeName]},isIgnorableWhitespace:d,isInlineFormattable:function(b){return c[b.nodeName]},isProppedBlock:function(b){if(!f[b.nodeName])return!1;var a=!1;b=b.children;var e=b.length,c;for(c=0;c<e;c++)if(!a&&"br"===b[c].nodeName.toLowerCase())a=!0;else if(!d(b[c]))return!1;return a},isEditingHost:function(b){return 1===b.nodeType&&"true"===b.contentEditable},findNodeRight:function(b,a){for(;b&&!a(b);)b=b.previousSibling;return b},allowNestedParagraph:function(c){return c.obj[0]&&
b.allowsNesting(c.obj[0],g("<p>")[0])?!0:!1}}});define("aloha/engine",["aloha/core","aloha/ecma5shims","util/maps","util/html","jquery"],function(g,b,n,l,d){function c(a,b){return a.hasAttribute?a.hasAttribute(b):"undefined"!=typeof a.attributes[b]}function k(a){return null===a||!a||a===gc}function f(a,e){"string"==typeof e&&(e=[e]);"object"==typeof e&&(e=b(e).map(function(a){return a.toUpperCase()}));return a&&1==a.nodeType&&k(a.namespaceURI)&&("undefined"==typeof e||-1!=b(e).indexOf(a.tagName))}
function q(a){return a&&1==a.nodeType&&k(a.namespaceURI)}function a(a,b){return a&&1==a.nodeType&&k(a.namespaceURI)&&b.toUpperCase()===a.nodeName}function e(a,b){var e;if(e=a)if(e=1==a.nodeType)if(e=k(a.namespaceURI))a:{e=a.nodeName;var c,m;e=e.toUpperCase();c=0;for(m=b.length;c<m;c++)if(b[c].toUpperCase()===e){e=!0;break a}e=!1}return e}function m(a,b){return a&&1==a.nodeType&&k(a.namespaceURI)&&b[a.nodeName]}function v(a){var b,e=0;if(!a||!a.style)return 0;if("undefined"!==typeof a.style.length)return a.style.length;
for(b in a.style)a.style[b]&&0!==a.style[b]&&"false"!==a.style[b]&&e++;return e}function x(a){if(!a)return null;var b=[],e;for(e=a.length>>>0;e--;)b[e]=a[e];return b}function z(a){for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function A(a){return a.hasChildNodes()?a.firstChild:z(a)}function y(a){if(a.previousSibling){for(a=a.previousSibling;a.hasChildNodes();)a=a.lastChild;return a}return a.parentNode&&a.parentNode.nodeType==b.Node.ELEMENT_NODE?a.parentNode:null}function C(a,
e){return a&&e&&Boolean(b.compareDocumentPosition(a,e)&b.Node.DOCUMENT_POSITION_CONTAINED_BY)}function F(a,b){return(a||b)&&(a==b||C(a,b))}function D(a,e){return e&&a&&Boolean(b.compareDocumentPosition(e,a)&b.Node.DOCUMENT_POSITION_CONTAINED_BY)}function p(a,e){return Boolean(b.compareDocumentPosition(a,e)&b.Node.DOCUMENT_POSITION_FOLLOWING)}function s(a){for(var b=[];a.parentNode;)b.unshift(a.parentNode),a=a.parentNode;return b}function r(a){for(var b=[],e=z(a);null!=(a=A(a))&&a!=e;)b.push(a);return b}
function M(a){return{"xx-small":1,small:2,medium:3,large:4,"x-large":5,"xx-large":6,"xxx-large":7}[a]}function t(a){return"ltr"==a.dir?"ltr":"rtl"==a.dir?"rtl":q(a.parentNode)?t(a.parentNode):"ltr"}function K(a){for(var b=0;a.previousSibling;)b++,a=a.previousSibling;return b}function G(a){switch(a.nodeType){case b.Node.PROCESSING_INSTRUCTION_NODE:case b.Node.DOCUMENT_TYPE_NODE:return 0;case b.Node.TEXT_NODE:case b.Node.COMMENT_NODE:return a.length;default:return a.childNodes.length}}function u(a,
e,c,m){if(a==c){if(e==m)return"equal";if(e<m)return"before";if(e>m)return"after"}var f=b.compareDocumentPosition(c,a);if(f&b.Node.DOCUMENT_POSITION_FOLLOWING){m=u(c,m,a,e);if("before"==m)return"after";if("after"==m)return"before"}if(f&b.Node.DOCUMENT_POSITION_CONTAINS){for(;c.parentNode!=a;)c=c.parentNode;if(K(c)<e)return"after"}return"before"}function S(a){for(;null!=a.parentNode;)a=a.parentNode;return a}function Q(a,b){return"after"!==u(a,0,b.startContainer,b.startOffset)||"before"!==u(a,G(a),b.endContainer,
b.endOffset)?!1:S(a)==S(b.startContainer)}function W(a,b){"undefined"==typeof b&&(b=function(){return!0});for(var e=a.startContainer,e=e.hasChildNodes()&&a.startOffset<e.childNodes.length?e.childNodes[a.startOffset]:a.startOffset==G(e)?z(e):A(e),c=a.endContainer,c=c.hasChildNodes()&&a.endOffset<c.childNodes.length?c.childNodes[a.endOffset]:z(c),m=[];p(e,c);)Q(e,a)&&b(e)?(m.push(e),e=z(e)):e=A(e);return m}function P(a,b){"undefined"==typeof b&&(b=function(){return!0});for(var e=a.startContainer,e=
e.hasChildNodes()&&a.startOffset<e.childNodes.length?e.childNodes[a.startOffset]:a.startOffset==G(e)?z(e):A(e),c=a.endContainer,c=c.hasChildNodes()&&a.endOffset<c.childNodes.length?c.childNodes[a.endOffset]:z(c),m=[];p(e,c);)Q(e,a)&&b(e)&&m.push(e),e=A(e);return m}function aa(a){if("currentcolor"==a.toLowerCase())return null;var e=document.createElement("span");document.body.appendChild(e);e.style.color="black";var c=document.createElement("span");e.appendChild(c);c.style.color=a;a=b.getComputedStyle(c).color;
if("rgb(0, 0, 0)"==a&&(e.color="white",a=b.getComputedStyle(c).color,"rgb(0, 0, 0)"!=a))return null;document.body.removeChild(e);return/^rgba\([0-9]+, [0-9]+, [0-9]+, 1\)$/.test(a)?a.replace("rgba","rgb").replace(", 1)",")"):"transparent"==a?"rgba(0, 0, 0, 0)":a}function ca(a){a=a.toLowerCase();if(-1!=b("aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkgrey darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkslategrey darkturquoise darkviolet deeppink deepskyblue dimgray dimgrey dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray green greenyellow grey honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightgrey lightpink lightsalmon lightseagreen lightskyblue lightslategray lightslategrey lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray slategrey snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" ")).indexOf(a))return a;
a=aa(a);var e=/^rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)$/.exec(a);return e?"#"+parseInt(e[1],10).toString(16).replace(/^.$/,"0$&")+parseInt(e[2],10).toString(16).replace(/^.$/,"0$&")+parseInt(e[3],10).toString(16).replace(/^.$/,"0$&"):/^#[abcdef0123456789]+$/i.exec(a)?a:null}function Y(a){a=b(a).trim();if(/^[\-+]?[0-9]+(\.[0-9]+)?([eE][\-+]?[0-9]+)?$/.test(a)){var e;"+"==a[0]?(a=a.slice(1),e="relative-plus"):"-"==a[0]?(a=a.slice(1),e="relative-minus"):e="absolute";a=parseInt(a,10);"relative-plus"==e&&
(a+=3);"relative-minus"==e&&(a=3-a);1>a&&(a=1);7<a&&(a=7);a={1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[a]}return a}function U(a){a=Y(a);if(-1==d.inArray(a,"xx-small x-small small medium large x-large xx-large xxx-large".split(" "))&&!/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc|px)$/.test(a))return null;var e=document.createElement("font");document.body.appendChild(e);"xxx-large"==a?e.size=7:e.style.fontSize=a;a=parseInt(b.getComputedStyle(e).fontSize,10);document.body.removeChild(e);
for(var c=1;7>c;){e=document.createElement("font");e.size=c;document.body.appendChild(e);var m=parseInt(b.getComputedStyle(e).fontSize,10);e.size=1+c;var f=parseInt(b.getComputedStyle(e).fontSize,10);document.body.removeChild(e);if(a<(f+m)/2)return String(c);c++}return"7"}function V(a,b,e,c){var m;0==Hc&&"undefined"!=typeof e?hb=e:0==Hc&&(hb=null,hb=e);Hc++;try{m=c()}catch(f){throw Hc--,f;}Hc--;return m}function R(a,b){a=a.toLowerCase();return V(a,"action",b,function(a){return function(){return-1!=
d.inArray(a,"copy cut paste selectall stylewithcss usecss".split(" "))||null!==b}}(a))}function ba(a){var b=new window.GENTICS.Utils.RangeObject;b.startContainer=a.startContainer;b.startOffset=a.startOffset;b.endContainer=a.endContainer;b.endOffset=a.endOffset;b.select()}function Z(a,b,e,c){var m=a.toLowerCase(),f=b,k=e;if(1==arguments.length||4<=arguments.length&&"undefined"==typeof f)f=!1;if(2>=arguments.length||4<=arguments.length&&"undefined"==typeof k)k="";return V(m,"action",c,function(a,b,
e){return function(){if(!R(a))return!1;fa[a].action(e,c);ba(c);return!0}}(m,f,k))}function na(a,b){a=a.toLowerCase();return V(a,"state",b,function(a){return function(){return R(a,b)?"undefined"!=typeof Pb(a,b)?Pb(a,b):fa[a].state(b):!1}}(a))}function ka(a,b){a=a.toLowerCase();return V(a,"value",b,function(){return fa.hasOwnProperty(a)&&fa[a].hasOwnProperty("value")?"fontsize"==a&&void 0!==xb("fontsize",b)?U(xb("fontsize",b)):"undefined"!=typeof xb(a,b)?xb(a,b):fa[a].value(b):""})}function ja(a){return m(a,
ya)}function ea(a){return a&&(a.nodeType==b.Node.ELEMENT_NODE&&!md[b.getComputedStyle(a).display]||a.nodeType==b.Node.DOCUMENT_NODE||a.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE)}function da(a){return a&&!ea(a)}function wa(a){return a&&a.nodeType==b.Node.ELEMENT_NODE&&("true"==a.contentEditable||a.parentNode&&a.parentNode.nodeType==b.Node.DOCUMENT_NODE&&"on"==a.parentNode.designMode)}function L(a){return a&&!wa(a)&&(a.nodeType!=b.Node.ELEMENT_NODE||"false"!=a.contentEditable||d(a).hasClass("aloha-table-wrapper"))&&
(wa(a.parentNode)||L(a.parentNode))}function Pa(a){var b;for(b=0;b<a.childNodes.length;b++)if(L(a.childNodes[b])||Pa(a.childNodes[b]))return!0;return!1}function Ua(a){if(wa(a))return a;if(L(a)){for(a=a.parentNode;!wa(a);)a=a.parentNode;return a}return null}function ra(a,b){return Ua(a)&&Ua(a)==Ua(b)}function db(e){if(!a(e,"br"))return!1;for(var c=e.parentNode;"inline"==b.getComputedStyle(c).display;)c=c.parentNode;var m=c.style.height,f=c.style.maxHeight,k=c.style.minHeight;c.style.height="auto";
c.style.maxHeight="none";d.browser.msie&&8>d.browser.version||(c.style.minHeight="0");var q=document.createTextNode("\u200b"),l=c.offsetHeight;if(0==l)throw"isCollapsedLineBreak: original height is zero, bug?";e.parentNode.insertBefore(q,e.nextSibling);e=c.offsetHeight;q.parentNode.removeChild(q);c.style.height=m;c.style.maxHeight=f;d.browser.msie&&8>d.browser.version||(c.style.minHeight=k);return l<e-5}function Qa(e){if(!a(e,"br")||a(e.parentNode,"li")&&1==e.parentNode.childNodes.length)return!1;
for(var c=e.parentNode;"inline"==b.getComputedStyle(c).display;)c=c.parentNode;var m=c.style.height,f=c.style.maxHeight,k=c.style.minHeight,q=c.contentEditable;c.style.height="auto";c.style.maxHeight="none";c.style.minHeight="0";d.browser.msie&&7>=d.browser.version&&(c.contentEditable="false");var l=c.offsetHeight;if(0==l)throw"isExtraneousLineBreak: original height is zero, bug?";var v=e.style.display;e.style.display="none";var g=c.offsetHeight;c.style.height=m;c.style.maxHeight=f;c.style.minHeight=
k;d.browser.msie&&7>=d.browser.version&&(c.contentEditable=q);e.style.display=v;return l==g}function Za(a){return a&&a.nodeType==b.Node.TEXT_NODE&&(""==a.data||/^[\t\n\r ]+$/.test(a.data)&&a.parentNode&&a.parentNode.nodeType==b.Node.ELEMENT_NODE&&-1!=d.inArray(b.getComputedStyle(a.parentNode).whiteSpace,["normal","nowrap"])||/^[\t\r ]+$/.test(a.data)&&a.parentNode&&a.parentNode.nodeType==b.Node.ELEMENT_NODE&&"pre-line"==b.getComputedStyle(a.parentNode).whiteSpace||/^[\t\n\r ]+$/.test(a.data)&&a.parentNode&&
a.parentNode.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE)}function bb(e){if(!Za(e))return!1;if(""==e.data)return!0;var c=e.parentNode;if(!c||b(s(e)).some(function(a){return a.nodeType==b.Node.ELEMENT_NODE&&"none"==b.getComputedStyle(a).display}))return!0;for(;!ea(c)&&c.parentNode;)c=c.parentNode;for(var m=e;m!=c;){m=y(m);if(ea(m)||a(m,"br"))return!0;if(m.nodeType==b.Node.TEXT_NODE&&!Za(m)||a(m,"img"))break}m=e;for(e=z(c);m!=e;){m=A(m);if(ea(m)||a(m,"br"))return!0;if(m&&m.nodeType==b.Node.TEXT_NODE&&!Za(m)||
a(m,"img"))break}return!1}function xa(e){var c;if(!e||b(s(e).concat(e)).filter(function(a){return a.nodeType==b.Node.ELEMENT_NODE},!0).some(function(a){return"none"==b.getComputedStyle(a).display}))return!1;if(ea(e)||e.nodeType==b.Node.TEXT_NODE&&!bb(e)||a(e,"img")||a(e,"br")&&!Qa(e))return!0;for(c=0;c<e.childNodes.length;c++)if(xa(e.childNodes[c]))return!0;return!1}function Ia(a){return a&&!xa(a)}function ma(a){var e;if(db(a)&&!Qa(a))return!0;if(!da(a)||a.nodeType!=b.Node.ELEMENT_NODE)return!1;var c=
!1;for(e=0;e<a.childNodes.length;e++){if(!Ia(a.childNodes[e])&&!ma(a.childNodes[e]))return!1;ma(a.childNodes[e])&&(c=!0)}return c}function Va(a){var e;if(a&&a.nodeType!==b.Node.TEXT_NODE)e=!1;else{e=0;a=a.data;for(var c=a.length;e<c&&"\u200b"===a.charAt(e);)e++;e=e===c}return!e}function va(a){var b;if(b=a)(b=!a.hasChildNodes())||(b=l.isBlock(a)?(b=l.findNodeRight(a.lastChild,xa))&&"br"===b.nodeName.toLowerCase()&&!l.findNodeRight(b.previousSibling,xa):!1,b=b||!l.findNodeRight(a.lastChild,Va)),b=b&&
wa(a.parentNode)&&!a.previousSibling&&!a.nextSibling;return b}function oa(a){var b=a.parentNode,e=K(a);b.removeChild(a);return{node:b,offset:e}}function T(){var a;if(hb)a=hb;else if(g.getSelection().rangeCount)a=g.getSelection().getRangeAt(0);else return null;if(-1==d.inArray(a.startContainer.nodeType,[b.Node.TEXT_NODE,b.Node.ELEMENT_NODE])||-1==d.inArray(a.endContainer.nodeType,[b.Node.TEXT_NODE,b.Node.ELEMENT_NODE])||!(a.startContainer.ownerDocument&&a.endContainer.ownerDocument&&D(a.startContainer,
a.startContainer.ownerDocument)&&D(a.endContainer,a.endContainer.ownerDocument)))throw"Invalid active range; test bug?";return a}function Fa(a,e,c,m){-1==c&&(c=e.childNodes.length);var f=a.parentNode,k=K(a),d,q=[m];for(d=0;d<g.getSelection().rangeCount;d++)q.push(g.getSelection().getRangeAt(d));var l=[];b(q).forEach(function(a){l.push([a.startContainer,a.startOffset]);l.push([a.endContainer,a.endOffset])});b(l).forEach(function(a){a[0]==e&&a[1]>c&&a[1]++;a[0]!=f||a[1]!=k&&a[1]!=k+1||(a[0]=e,a[1]+=
c-k);a[0]==f&&a[1]>k+1&&a[1]--});e.childNodes.length==c?e.appendChild(a):e.insertBefore(a,e.childNodes[c]);var v=null;if(l[0][1]>l[0][0].childNodes.length&&l[1][1]>l[1][0].childNodes.length)m.setStart(a,0),m.setEnd(a,0);else{m.setStart(l[0][0],l[0][1]);m.setEnd(l[1][0],l[1][1]);g.getSelection().removeAllRanges();for(d=1;d<q.length;d++)v=g.createRange(),v.setStart(l[2*d][0],l[2*d][1]),v.setEnd(l[2*d+1][0],l[2*d+1][1]),g.getSelection().addRange(v);v&&(m=v)}}function Ha(a,b){d.browser.msie&&7<=d.browser.version&&
"undefined"!==typeof a.attributes[d.expando]&&d(a).removeAttr(d.expando);var e=a.attributes,c;for(c=0;c<e.length;c++){var m=e[c];if("undefined"===typeof m.specified||m.specified)"function"===typeof b.setAttributeNS?b.setAttributeNS(m.namespaceURI,m.name,m.value):b.setAttribute(m.name,m.value)}}function Ba(b,e,c){if(a(b,e)||!b.parentNode)return b;e=b.ownerDocument.createElement(e);b.parentNode.insertBefore(e,b);for(Ha(b,e);b.childNodes.length;)Fa(b.firstChild,e,e.childNodes.length,c);b.parentNode.removeChild(b);
c.startContainer===b&&(c.startContainer=e);c.endContainer===b&&(c.endContainer=e);return e}function mb(a){var b=a.previousSibling;if(b){for(;b.hasChildNodes();)b=b.lastChild;for(;Ia(b)&&!Qa(b)&&b!=a.parentNode;)b=y(b);L(b)&&Qa(b)&&b.parentNode.removeChild(b)}}function Kb(a){for(var b=a;b.hasChildNodes();)b=b.lastChild;for(;Ia(b)&&!Qa(b)&&b!=a;)b=y(b);L(b)&&Qa(b)&&b.parentNode.removeChild(b)}function Vb(a){mb(a);Kb(a)}function Ya(b,e,c,m){var f;"undefined"==typeof e&&(e=function(){return!1});"undefined"==
typeof c&&(c=function(){return null});if(!b.length||!L(b[0]))return null;da(b[b.length-1])&&!a(b[b.length-1],"br")&&a(b[b.length-1].nextSibling,"br")&&b.push(b[b.length-1].nextSibling);c=L(b[0].previousSibling)&&e(b[0].previousSibling)?b[0].previousSibling:L(b[b.length-1].nextSibling)&&e(b[b.length-1].nextSibling)?b[b.length-1].nextSibling:c();if(!c)return null;if(!c.parentNode){b[0].parentNode.insertBefore(c,b[0]);f=m.startContainer;var k=m.startOffset,d=m.endContainer,q=m.endOffset;f==c.parentNode&&
k>=K(c)&&m.setStart(f,k+1);d==c.parentNode&&q>=K(c)&&m.setEnd(d,q+1);hb&&hb!==m&&(f=hb.startContainer,k=hb.startOffset,d=hb.endContainer,q=hb.endOffset,f==c.parentNode&&k>=K(c)&&hb.setStart(f,k+1),d==c.parentNode&&q>=K(c)&&hb.setEnd(d,q+1))}k=b[0].parentNode;if(p(c,b[0]))for(!da(c)&&da(c.lastChild)&&da(b[0])&&!a(c.lastChild,"BR")&&c.appendChild(c.ownerDocument.createElement("br")),f=0;f<b.length;f++)Fa(b[f],c,-1,m);else for(!da(c)&&da(c.firstChild)&&da(b[b.length-1])&&!a(b[b.length-1],"BR")&&c.insertBefore(c.ownerDocument.createElement("br"),
c.firstChild),f=b.length-1;0<=f;f--)Fa(b[f],c,0,m);L(k)&&!k.hasChildNodes()&&k.parentNode.removeChild(k);if(L(c.nextSibling)&&e(c.nextSibling)){for(!da(c)&&da(c.lastChild)&&da(c.nextSibling.firstChild)&&!a(c.lastChild,"BR")&&c.appendChild(c.ownerDocument.createElement("br"));c.nextSibling.hasChildNodes();)Fa(c.nextSibling.firstChild,c,-1,m);c.parentNode.removeChild(c.nextSibling)}Vb(c);return c}function Sa(c,f){if((nd[f]||e(f,"colgroup table tbody tfoot thead tr".split(" ")))&&"object"==typeof c&&
c.nodeType==b.Node.TEXT_NODE&&!/^[ \t\n\f\r]*$/.test(c.data)||(Pd[f]||e(f,["script","style","plaintext","xmp"]))&&("object"!=typeof c||c.nodeType!=b.Node.TEXT_NODE)||"object"==typeof c&&(c.nodeType==b.Node.DOCUMENT_NODE||c.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE||c.nodeType==b.Node.DOCUMENT_TYPE_NODE))return!1;q(c)&&(c=c.tagName.toLowerCase());if("string"!=typeof c)return!0;if(q(f)){for(var k=f;k;){if("a"==c&&a(k,"a")||ya[c.toUpperCase()]&&m(k,Od)||/^h[1-6]$/.test(c)&&q(k)&&/^H[1-6]$/.test(k.tagName))return!1;
k=k.parentNode}f=f.tagName.toLowerCase()}if("object"==typeof f&&(f.nodeType==b.Node.ELEMENT_NODE||f.nodeType==b.Node.DOCUMENT_FRAGMENT_NODE))return!0;if("string"!=typeof f)return!1;switch(f){case "colgroup":return"col"==c;case "table":return-1!=d.inArray(c,"caption col colgroup tbody td tfoot th thead tr".split(" "));case "tbody":case "thead":case "tfoot":return-1!=d.inArray(c,["td","th","tr"]);case "tr":return-1!=d.inArray(c,["td","th"]);case "dl":return-1!=d.inArray(c,["dt","dd"]);case "dir":case "ol":case "ul":return-1!=
d.inArray(c,["dir","li","ol","ul"]);case "hgroup":return/^h[1-6]$/.test(c)}return-1!=d.inArray(c,"body caption col colgroup frame frameset head html tbody td tfoot th thead tr".split(" "))||-1!=d.inArray(c,["dd","dt"])&&"dl"!=f||"li"==c&&"ol"!=f&&"ul"!=f?!1:(k=pd[f.toUpperCase()])&&k[c.toUpperCase()]?!1:!0}function Ub(a,e){return e.collapsed?!1:Q(a,e)||a==e.startContainer&&a.nodeType==b.Node.TEXT_NODE&&G(a)!=e.startOffset||a==e.endContainer&&a.nodeType==b.Node.TEXT_NODE&&0!=e.endOffset||a.hasChildNodes()&&
b(a.childNodes).every(function(a){return Ub(a,e)})&&!(D(e.startContainer,a)&&e.startContainer.nodeType==b.Node.TEXT_NODE&&0!=e.startOffset||D(e.endContainer,a)&&e.endContainer.nodeType==b.Node.TEXT_NODE&&e.endOffset!=G(e.endContainer))?!0:!1}function Oa(a,b){"undefined"==typeof b&&(b=function(){return!0});for(var e=a.startContainer;Ub(e.parentNode,a);)e=e.parentNode;for(var c=z(a.endContainer),m=[];p(e,c);)Ub(e,a)&&b(e)&&m.push(e),e=A(e);return m}function wb(a){if(!q(a))return!1;if(-1!=d.inArray(a.tagName,
"B EM I S SPAN STRIKE STRONG SUB SUP U".split(" "))&&(0==a.attributes.length||1==a.attributes.length&&c(a,"style")))return!0;if("FONT"==a.tagName||"A"==a.tagName){var b=a.attributes.length;c(a,"style")&&b--;"FONT"==a.tagName&&(c(a,"color")&&b--,c(a,"face")&&b--,c(a,"size")&&b--);"A"==a.tagName&&c(a,"href")&&b--;if(0==b)return!0}return!1}function Wa(a){return q(a)&&-1!=d.inArray(a.tagName,"A B EM FONT I S SPAN STRIKE STRONG SUB SUP U".split(" "))?0==a.attributes.length?!0:1<a.attributes.length?!1:
c(a,"style")&&0==v(a)||"A"==a.tagName&&c(a,"href")||"FONT"==a.tagName&&(c(a,"color")||c(a,"face")||c(a,"size"))||("B"==a.tagName||"STRONG"==a.tagName)&&c(a,"style")&&1==v(a)&&""!=a.style.fontWeight||("I"==a.tagName||"EM"==a.tagName)&&c(a,"style")&&1==v(a)&&""!=a.style.fontStyle||("A"==a.tagName||"FONT"==a.tagName||"SPAN"==a.tagName)&&c(a,"style")&&1==v(a)&&""==a.style.textDecoration||-1!=d.inArray(a.tagName,"A FONT S SPAN STRIKE U".split(" "))&&c(a,"style")&&1==v(a)&&("line-through"==a.style.textDecoration||
"underline"==a.style.textDecoration||"overline"==a.style.textDecoration||"none"==a.style.textDecoration)?!0:!1:!1}function Ta(a,b,e){return null===b&&null===e||"string"==typeof b&&"string"==typeof e&&b==e&&!fa[a].hasOwnProperty("equivalentValues")||"string"==typeof b&&"string"==typeof e&&fa[a].hasOwnProperty("equivalentValues")&&fa[a].equivalentValues(b,e)?!0:!1}function lb(a,e,c){if(Ta(a,e,c))return!0;if("fontsize"!=a||"string"!=typeof e||"string"!=typeof c)return!1;var m=lb;if(void 0===m.sizeMap){m.sizeMap=
{};var f=document.createElement("font");document.body.appendChild(f);b("xx-small small medium large x-large xx-large xxx-large".split(" ")).forEach(function(a){f.size=M(a);m.sizeMap[a]=b.getComputedStyle(f).fontSize});document.body.removeChild(f)}return e===m.sizeMap[c]||c===m.sizeMap[e]}function za(e,m){if(e.nodeType!=b.Node.ELEMENT_NODE&&(!e.parentNode||e.parentNode.nodeType!=b.Node.ELEMENT_NODE))return null;if(e.nodeType!=b.Node.ELEMENT_NODE)return za(e.parentNode,m);if("createlink"==m||"unlink"==
m){for(;e&&(!q(e)||"A"!=e.tagName||!c(e,"href"));)e=e.parentNode;return e?e.getAttribute("href"):null}if("backcolor"==m||"hilitecolor"==m){for(;("rgba(0, 0, 0, 0)"==b.getComputedStyle(e).backgroundColor||""===b.getComputedStyle(e).backgroundColor||"transparent"==b.getComputedStyle(e).backgroundColor)&&e.parentNode&&e.parentNode.nodeType==b.Node.ELEMENT_NODE;)e=e.parentNode;return"rgba(0, 0, 0, 0)"==b.getComputedStyle(e).backgroundColor||""===b.getComputedStyle(e).backgroundColor||"transparent"==b.getComputedStyle(e).backgroundColor?
"rgb(255, 255, 255)":b.getComputedStyle(e).backgroundColor}if("subscript"==m||"superscript"==m){for(var f=!1,k=!1;da(e);)b.getComputedStyle(e),a(e,"sub")?f=!0:a(e,"sup")&&(k=!0),e=e.parentNode;return f&&k?"mixed":f?"subscript":k?"superscript":null}if("strikethrough"==m){do{if(-1!=b.getComputedStyle(e).textDecoration.indexOf("line-through"))return"line-through";e=e.parentNode}while(e&&e.nodeType==b.Node.ELEMENT_NODE);return null}if("underline"==m){do{if(-1!=b.getComputedStyle(e).textDecoration.indexOf("underline"))return"underline";
e=e.parentNode}while(e&&e.nodeType==b.Node.ELEMENT_NODE);return null}if(!fa[m].hasOwnProperty("relevantCssProperty"))throw"Bug: no relevantCssProperty for "+m+" in getEffectiveCommandValue";return b.getComputedStyle(e)[fa[m].relevantCssProperty].toString()}function Xa(m,f){if(("backcolor"==f||"hilitecolor"==f)&&"inline"!=b.getComputedStyle(m).display)return null;if("createlink"==f||"unlink"==f)return q(m)&&"A"==m.tagName&&c(m,"href")?m.getAttribute("href"):null;if("subscript"==f||"superscript"==f)return a(m,
"sup")?"superscript":a(m,"sub")?"subscript":null;if("strikethrough"==f&&""!=m.style.textDecoration)return-1!=m.style.textDecoration.indexOf("line-through")?"line-through":null;if("strikethrough"==f&&e(m,["S","STRIKE"]))return"line-through";if("underline"==f&&""!=m.style.textDecoration)return-1!=m.style.textDecoration.indexOf("underline")?"underline":null;if("underline"==f&&a(m,"U"))return"underline";var d=fa[f].relevantCssProperty;if(null===d)return null;if(""!=m.style[d])return m.style[d];if(k(m.namespaceURI)&&
"FONT"==m.tagName){if("color"==d&&c(m,"color"))return m.color;if("fontFamily"==d&&c(m,"face"))return m.face;if("fontSize"==d&&c(m,"size"))return d=parseInt(m.size,10),1>d&&(d=1),7<d&&(d=7),{1:"xx-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"}[d]}return"fontWeight"!=d||"B"!=m.tagName&&"STRONG"!=m.tagName?"fontStyle"!=d||"I"!=m.tagName&&"EM"!=m.tagName?null:"italic":"bold"}function rb(a,b,e,c){for(var m=a;wb(m)&&1==m.childNodes.length&&wb(m.firstChild)&&(!Wa(m)||!Ta(b,
Xa(m,b),e));)m=m.firstChild;if(m!=a&&Wa(m)&&Ta(b,Xa(m,b),e)&&lb(b,za(m,b),e)){for(;m.hasChildNodes();)Fa(m.firstChild,m.parentNode,K(m),c);a.parentNode.insertBefore(m,a.nextSibling);Fa(a,m,-1,c)}}function gb(a){var b=[];a=d.makeArray(a);var e,c,m,f,k,q;for(e=0;e<a.length;e++)for(m=a[e],c=0;c<qd.length;c++){f=qd[c];k=m;1!=k.nodeType&&(k=k.parentNode);for(q=null;k&&1==k.nodeType&&null===(q=Xa(k,f));)k=k.parentNode;b.push([m,f,q])}return b}function dc(b,e,c){if(!L(b)||null===Xa(b,e))return[];if(Wa(b)){e=
Array.prototype.slice.call(x(b.childNodes));var m;for(m=0;m<e.length;m++)Fa(e[m],b.parentNode,K(b),c);b.parentNode.removeChild(b);return e}"strikethrough"==e&&-1!=b.style.textDecoration.indexOf("line-through")&&(b.style.textDecoration="line-through"==b.style.textDecoration?"":b.style.textDecoration.replace("line-through",""),""==b.getAttribute("style")&&b.removeAttribute("style"));"underline"==e&&-1!=b.style.textDecoration.indexOf("underline")&&(b.style.textDecoration="underline"==b.style.textDecoration?
"":b.style.textDecoration.replace("underline",""),""==b.getAttribute("style")&&b.removeAttribute("style"));null!==fa[e].relevantCssProperty&&(b.style[fa[e].relevantCssProperty]="",""==b.getAttribute("style")&&b.removeAttribute("style"));k(b.namespaceURI)&&"FONT"==b.tagName&&("forecolor"==e&&b.removeAttribute("color"),"fontname"==e&&b.removeAttribute("face"),"fontsize"==e&&b.removeAttribute("size"));!a(b,"A")||"createlink"!=e&&"unlink"!=e||b.removeAttribute("href");return null===Xa(b,e)?[]:[Ba(b,"span",
c)]}function Qb(e,c,m,f){var k=[],q,l;if(e.parentNode&&null!==m&&(Sa(e,"span")&&(rb(e.previousSibling,c,m,f),rb(e.nextSibling,c,m,f),Ya([e],function(a){return Wa(a)&&Ta(c,Xa(a,c),m)&&lb(c,za(a,c),m)},function(){return null},f)),!lb(c,za(e,c),m)))if(!Sa(e,"span")){for(q=0;q<e.childNodes.length;q++){if(e.childNodes[q].nodeType==b.Node.ELEMENT_NODE&&(l=Xa(e.childNodes[q],c),null!==l&&!Ta(c,m,l)))continue;k.push(e.childNodes[q])}for(q=0;q<k.length;q++)Qb(k[q],c,m,f)}else if(!lb(c,za(e,c),m)){k=null;Rb||
("bold"!=c||"bold"!=m&&"700"!=m||(k=e.ownerDocument.createElement("b")),"italic"==c&&"italic"==m&&(k=e.ownerDocument.createElement("i")),"strikethrough"==c&&"line-through"==m&&(k=e.ownerDocument.createElement("s")),"underline"==c&&"underline"==m&&(k=e.ownerDocument.createElement("u")),"forecolor"==c&&ca(m)&&(k=e.ownerDocument.createElement("span"),d(k).css("color",ca(m))),"fontname"==c&&(k=e.ownerDocument.createElement("font"),k.face=m));if("createlink"==c||"unlink"==c)for(k=e.ownerDocument.createElement("a"),
k.setAttribute("href",m),q=e.parentNode;q;)a(q,"A")&&(q=Ba(q,"span",f)),q=q.parentNode;"fontsize"!=c||-1==d.inArray(m,"xx-small small medium large x-large xx-large xxx-large".split(" "))||Rb&&"xxx-large"!=m||(k=e.ownerDocument.createElement("font"),k.size=M(m));"subscript"!=c&&"superscript"!=c||"subscript"!=m||(k=e.ownerDocument.createElement("sub"));"subscript"!=c&&"superscript"!=c||"superscript"!=m||(k=e.ownerDocument.createElement("sup"));k||(k=e.ownerDocument.createElement("span"));e.parentNode.insertBefore(k,
e);q=fa[c].relevantCssProperty;null===q||lb(c,za(k,c),m)||(k.style[q]=m);"strikethrough"==c&&"line-through"==m&&"line-through"!=za(k,"strikethrough")&&(k.style.textDecoration="line-through");"underline"==c&&"underline"==m&&"underline"!=za(k,"underline")&&(k.style.textDecoration="underline");Fa(e,k,k.childNodes.length,f);if(e.nodeType==b.Node.ELEMENT_NODE&&!Ta(c,za(e,c),m)){Fa(e,k.parentNode,K(k),f);k.parentNode.removeChild(k);k=[];for(q=0;q<e.childNodes.length;q++){if(e.childNodes[q].nodeType==b.Node.ELEMENT_NODE&&
(l=Xa(e.childNodes[q],c),null!==l&&!Ta(c,m,l)))continue;k.push(e.childNodes[q])}for(q=0;q<k.length;q++)Qb(k[q],c,m,f)}}}function Db(a,e,c,m){if(a.parentNode&&a.parentNode.nodeType==b.Node.ELEMENT_NODE&&!lb(e,za(a,e),c)){for(var f=a.parentNode,k=[];L(f)&&f.nodeType==b.Node.ELEMENT_NODE&&!lb(e,za(f,e),c);)k.push(f),f=f.parentNode;if(k.length){var d=Xa(k[k.length-1],e);if(null!==d||d==c)if(null===c||lb(e,za(k[k.length-1].parentNode,e),c))for(;k.length;)for(f=k.pop(),null!==Xa(f,e)&&(d=Xa(f,e)),c=Array.prototype.slice.call(x(f.childNodes)),
null!==Xa(f,e)&&dc(f,e,m),f=0;f<c.length;f++){var q=c[f];q!=a&&(q.nodeType!=b.Node.ELEMENT_NODE||null===Xa(q,e)||Ta(e,d,Xa(q,e)))&&q!=k[k.length-1]&&Qb(q,e,d,m)}}}}function $a(a,e){b(a).forEach(function(a){var c=a[0],m=a[1];a=a[2];var f=c;f&&f.nodeType==b.Node.ELEMENT_NODE||(f=f.parentNode);for(;f&&f.nodeType==b.Node.ELEMENT_NODE&&null===Xa(f,m);)f=f.parentNode;null===a&&f&&f.nodeType==b.Node.ELEMENT_NODE?Db(c,m,null,e):(f&&f.nodeType==b.Node.ELEMENT_NODE&&!Ta(m,Xa(f,m),a)||(!f||f.nodeType!=b.Node.ELEMENT_NODE)&&
null!==a)&&Qb(c,m,a,e)})}function Aa(a,e,c){c=c||T();if(b(Oa(c)).filter(function(a){return a.nodeType==b.Node.TEXT_NODE},!0).some(L)){if(L(c.startContainer)&&c.startContainer.nodeType==b.Node.TEXT_NODE&&0!=c.startOffset&&c.startOffset!=G(c.startContainer)){var m=c.startContainer.splitText(c.startOffset),f=g.createRange();if(c.startContainer==c.endContainer){var k=c.endOffset-c.startOffset;f.setEnd(m,k);c.setEnd(m,k)}f.setStart(m,0);g.getSelection().removeAllRanges();g.getSelection().addRange(f);c.setStart(m,
0)}L(c.endContainer)&&c.endContainer.nodeType==b.Node.TEXT_NODE&&0!=c.endOffset&&c.endOffset!=G(c.endContainer)&&(m=c,f=[m.startContainer,m.startOffset],k=[m.endContainer,m.endOffset],m.endContainer.splitText(m.endOffset),m.setStart(f[0],f[1]),m.setEnd(k[0],k[1]),g.getSelection().removeAllRanges(),g.getSelection().addRange(m));b(Oa(T(),function(a){return L(a)&&a.nodeType==b.Node.ELEMENT_NODE})).forEach(function(b){dc(b,a,c)});b(Oa(c,L)).forEach(function(b){Db(b,a,e,c);Qb(b,a,e,c)})}else fa[a].hasOwnProperty("inlineCommandActivatedValues")&&
hc(a,-1!=b(fa[a].inlineCommandActivatedValues).indexOf(e),c),"subscript"==a&&Wb("superscript",c),"superscript"==a&&Wb("subscript",c),null===e?Gc(a,c):fa[a].hasOwnProperty("value")&&ld(a,e,c)}function ha(a,e){var c;if(a.nodeType===b.Node.TEXT_NODE&&e<a.length)for(c=e;c<a.length;c++)if("\t"!==a.data.charAt(c)&&"\r"!==a.data.charAt(c)&&"\n"!==a.data.charAt(c)||160===a.data.charCodeAt(c))return!1;if(a.nextSibling&&a.nextSibling.className&&0<=a.nextSibling.className.indexOf("aloha-table-wrapper"))return a.nextSibling;
if(a.parentNode&&a.parentNode.nextSibling&&a.parentNode.nextSibling.className&&0<=a.parentNode.nextSibling.className.indexOf("aloha-table-wrapper"))return a.parentNode.nextSibling;if(a.parentNode&&a.parentNode.nextSibling&&Za(a.parentNode.nextSibling)&&a.parentNode.nextSibling.nextSibling&&a.parentNode.nextSibling.nextSibling.className&&0<=a.parentNode.nextSibling.nextSibling.className.indexOf("aloha-table-wrapper"))return a.parentNode.nextSibling.nextSibling}function Ca(a,e){var c;if(a.nodeType===
b.Node.TEXT_NODE&&0<e)for(c=e-1;0<=c;c--)if("\t"!==a.data.charAt(c)&&"\r"!==a.data.charAt(c)&&"\n"!==a.data.charAt(c)||160===a.data.charCodeAt(c))return!1;return a.previousSibling&&a.previousSibling.className&&0<=a.previousSibling.className.indexOf("aloha-table-wrapper")?a.previousSibling:a.parentNode&&a.parentNode.previousSibling&&a.parentNode.previousSibling.className&&0<=a.parentNode.previousSibling.className.indexOf("aloha-table-wrapper")?a.parentNode.previousSibling:a.parentNode&&a.parentNode.previousSibling&&
Za(a.parentNode.previousSibling)&&a.parentNode.previousSibling.previousSibling&&a.parentNode.previousSibling.previousSibling.className&&0<=a.parentNode.previousSibling.previousSibling.className.indexOf("aloha-table-wrapper")?a.parentNode.previousSibling.previousSibling:!1}function Na(b,e){return!b.parentNode&&0==e||0<=e-1&&e-1<b.childNodes.length&&xa(b.childNodes[e-1])&&(ea(b.childNodes[e-1])||a(b.childNodes[e-1],"br"))}function yb(a,b){return!a.parentNode&&b==G(a)||b<a.childNodes.length&&xa(a.childNodes[b])&&
ea(a.childNodes[b])}function la(a,b){return Na(a,b)||yb(a,b)}function Eb(a){for(var b=0;!la(a,b);){if(0<=b-1&&b-1<a.childNodes.length&&xa(a.childNodes[b-1]))return!1;0!=b&&a.hasChildNodes()?(a=a.childNodes[b-1],b=G(a)):(b=K(a),a=a.parentNode)}return!0}function ib(a){for(var b=G(a);!la(a,b);){if(b<a.childNodes.length&&xa(a.childNodes[b]))return!1;b!=G(a)&&a.hasChildNodes()?(a=a.childNodes[b],b=0):(b=1+K(a),a=a.parentNode)}return!0}function Ga(b,e){var c,m=b[0].parentNode;if(L(m)&&m.parentNode){-1!=
d.inArray(m.firstChild,b)&&mb(m);c=-1!=d.inArray(m.firstChild,b);var f=-1!=d.inArray(m.lastChild,b),k=c&&Eb(m),q=f&&ib(m);if(!c&&f){for(c=b.length-1;0<=c;c--)Fa(b[c],m.parentNode,1+K(m),e);q&&!ib(b[b.length-1])&&b[b.length-1].parentNode.insertBefore(document.createElement("br"),b[b.length-1].nextSibling);Kb(m)}else{if(!c)for(c=m.cloneNode(!1),m.removeAttribute("id"),m.parentNode.insertBefore(c,m);b[0].previousSibling;)Fa(m.firstChild,c,c.childNodes.length,e);for(c=0;c<b.length;c++)Fa(b[c],m.parentNode,
K(m),e);k&&!Eb(b[0])&&b[0].parentNode.insertBefore(document.createElement("br"),b[0]);da(b[b.length-1])&&!a(b[b.length-1],"br")&&a(m.firstChild,"br")&&!da(m)&&m.removeChild(m.firstChild);m.hasChildNodes()?mb(m):(m.parentNode===e.startContainer&&m.parentNode===e.endContainer&&e.startContainer===e.endContainer&&e.startOffset===e.endOffset&&m.parentNode.childNodes.length===e.startOffset&&(e.startOffset=m.parentNode.childNodes.length-1,e.endOffset=e.startOffset),m.parentNode.removeChild(m),q&&!ib(b[b.length-
1])&&b[b.length-1].parentNode.insertBefore(document.createElement("br"),b[b.length-1].nextSibling));!b[b.length-1].nextSibling&&b[b.length-1].parentNode&&Kb(b[b.length-1].parentNode)}}}function jb(a){if(!q(a))return!1;if("BLOCKQUOTE"==a.tagName)return!0;if("DIV"!=a.tagName)return!1;if("undefined"!==typeof a.style.length){var b;for(b=0;b<a.style.length;b++)if(/^(-[a-z]+-)?margin/.test(a.style[b]))return!0}else for(b in a.style)if(/^(-[a-z]+-)?margin/.test(b)&&a.style[b]&&0!==a.style[b])return!0;return!1}
function tb(a){if(!jb(a)||"BLOCKQUOTE"!=a.tagName&&"DIV"!=a.tagName)return!1;var b;for(b=0;b<a.attributes.length;b++)if(!k(a.attributes[b].namespaceURI)||-1==d.inArray(a.attributes[b].name,["style","class","dir"]))return!1;if("undefined"!==typeof a.style.length)for(b=0;b<a.style.length;b++){if(!/^(-[a-z]+-)?(margin|border|padding)/.test(a.style[b]))return!1}else for(var e in a.style)if(!/^(-[a-z]+-)?(margin|border|padding)/.test(e)&&a.style[e]&&0!==a.style[e]&&"false"!==a.style[e])return!1;return!0}
function Lb(a){return e(a,"address div h1 h2 h3 h4 h5 h6 listing p pre xmp".split(" "))}function Yb(a){return Lb(a)||e(a,["li","dt","dd"])}function Fb(){return document.createElement("br")}function nb(c){c&&(wa(c)||a(c.lastChild,"br")||b(c.childNodes).some(xa)||(d.browser.msie?d.browser.msie&&7>=d.browser.version&&e(c,"p h1 h2 h3 h4 h5 h6 pre blockquote".split(" "))&&(c.firstChild||c.appendChild(document.createTextNode("\u200b"))):c.appendChild(Fb())))}function eb(c,m){var k;if(L(c))if(b(s(c)).every(function(a){return!ra(c,
a)||!Sa(c,a)})&&!f(c,rc))if(e(c,["dd","dt"]))Ya([c],function(b){return a(b,"dl")&&!b.attributes.length},function(){return document.createElement("dl")},m);else{if(ja(c)){c=Ba(c,rc,m);nb(c);eb(c,m);var q=r(c);for(k=0;k<q.length;k++)eb(q[k],m)}}else{for(var q=gb([c]),l;!Sa(c,c.parentNode);){for(k=c.parentNode.childNodes.length-1;0<=k;--k)3==c.parentNode.childNodes[k].nodeType&&0==c.parentNode.childNodes[k].data.length&&(c.parentNode.removeChild(c.parentNode.childNodes[k]),m.startContainer==c.parentNode&&
m.startOffset>k&&m.startOffset--,m.endContainer==c.parentNode&&m.endOffset>k&&m.endOffset--);if(1==c.parentNode.childNodes.length){k=m.startOffset;l=m.endOffset;m.startContainer===c.parentNode&&m.startOffset>K(c)&&(k=m.startOffset+(d(c).contents().length-1));m.endContainer===c.parentNode&&m.endOffset>K(c)&&(l=m.endOffset+(d(c).contents().length-1));d(c).contents().unwrap();m.startOffset=k;m.endOffset=l;break}else if(k=c.parentNode,Ga([c],m),k===c.parentNode){k=m.startOffset;l=m.endOffset;m.startContainer===
c.parentNode&&m.startOffset>K(c)&&(k=m.startOffset+(d(c).contents().length-1));m.endContainer===c.parentNode&&m.endOffset>K(c)&&(l=m.endOffset+(d(c).contents().length-1));d(c).contents().unwrap();m.startOffset=k;m.endOffset=l;break}}$a(q,m)}}function Gb(c,m){function f(a){return e(a,["OL","UL"])}if(a(c,"LI")&&L(c)&&L(c.parentNode))for(var k=null;b(c.childNodes).some(f);){var d=c.lastChild;e(d,["OL","UL"])||!k&&d.nodeType==b.Node.TEXT_NODE&&/^[ \t\n\f\r]*$/.test(d.data)?(k=null,Fa(d,c.parentNode,1+
K(c),m)):(k||(k=c.ownerDocument.createElement("li"),c.parentNode.insertBefore(k,c.nextSibling)),Fa(d,k,0,m))}}function Mb(b,c){e(b,["OL","UL"])&&L(b)&&d(b).children("ol,ul").each(function(b,e){a(e.previousSibling,"LI")&&Fa(e,e.previousSibling,e.previousSibling.childNodes.length,c)})}function Ea(e){var c=e.startContainer,m=e.startOffset,f=e.endContainer;e=e.endOffset;var k=b(s(c).concat(c)).filter(function(b){return a(b,"li")}).slice(-1);k.length&&(m=K(k[0]),c=k[0].parentNode);if(!Na(c,m)){do 0==m?
(m=K(c),c=c.parentNode):m--;while(!la(c,m))}for(;0==m&&c.parentNode;)m=K(c),c=c.parentNode;k=b(s(f).concat(f)).filter(function(b){return a(b,"li")}).slice(-1);k.length&&(e=1+K(k[0]),f=k[0].parentNode);if(!yb(f,e)){do e==G(f)?(e=1+K(f),f=f.parentNode):e++;while(!la(f,e))}for(;e==G(f)&&f.parentNode;)e=1+K(f),f=f.parentNode;k=g.createRange();k.setStart(c,m);k.setEnd(f,e);return k}function Zb(){var c=Ea(T()),m=W(c,function(a){return L(a)&&!jb(a)&&(e(a,["ol","ul"])||e(a.parentNode,["ol","ul"])||Sa(a,"li"))});
if(!m.length)return"none";if(b(m).every(function(b){return a(b,"ol")||a(b.parentNode,"ol")||a(b.parentNode,"li")&&a(b.parentNode.parentNode,"ol")})&&!b(m).some(function(b){return a(b,"ul")||b.querySelector&&b.querySelector("ul")}))return"ol";if(b(m).every(function(b){return a(b,"ul")||a(b.parentNode,"ul")||a(b.parentNode,"li")&&a(b.parentNode.parentNode,"ul")})&&!b(m).some(function(b){return a(b,"ol")||b.querySelector&&b.querySelector("ol")}))return"ul";c=b(m).some(function(b){return a(b,"ol")||a(b.parentNode,
"ol")||b.querySelector&&b.querySelector("ol")||a(b.parentNode,"li")&&a(b.parentNode.parentNode,"ol")});m=b(m).some(function(b){return a(b,"ul")||a(b.parentNode,"ul")||b.querySelector&&b.querySelector("ul")||a(b.parentNode,"li")&&a(b.parentNode.parentNode,"ul")});return c&&m?"mixed":c?"mixed ol":m?"mixed ul":"none"}function Ja(a){for(;a&&a.nodeType!=b.Node.ELEMENT_NODE||a.nodeType==b.Node.ELEMENT_NODE&&-1!=d.inArray(b.getComputedStyle(a).display,["inline","none"]);)a=a.parentNode;if(!a||a.nodeType!=
b.Node.ELEMENT_NODE)return"left";var e=b.getComputedStyle(a).textAlign.replace(/^-(moz|webkit)-/,"").replace(/^auto$/,"start");return"start"==e?"ltr"==t(a)?"left":"right":"end"==e?"ltr"==t(a)?"right":"left":-1!=d.inArray(e,["center","justify","left","right"])?e:"left"}function $b(a){var e=[];void 0!==xb("createlink",a)&&e.push(["createlink",xb("createlink",a)]);b("bold italic strikethrough subscript superscript underline".split(" ")).forEach(function(b){void 0!==Pb(b,a)&&e.push([b,Pb(b,a)])});b(["fontname",
"fontsize","forecolor","hilitecolor"]).forEach(function(b){void 0!==xb(b,a)&&e.push([b,xb(b,a)])});return e}function ua(a){var e=[],c=b(Oa(a)).filter(function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE})[0];if(!c)return e;e.push(["createlink",fa.createlink.value(a)]);b("bold italic strikethrough subscript superscript underline".split(" ")).forEach(function(a){-1!=b(fa[a].inlineCommandActivatedValues).indexOf(za(c,a))?e.push([a,!0]):e.push([a,!1])});b(["fontname","fontsize","forecolor","hilitecolor"]).forEach(function(b){e.push([b,
fa[b].value(a)])});e.push(["fontsize",za(c,"fontsize")]);return e}function Hb(a,e){function c(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE}var m,f,k,d=b(Oa(e)).filter(function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE})[0];if(d)for(m=0;m<a.length;m++){f=a[m][0];k=a[m][1];if("boolean"==typeof k&&na(f,e)!=k)Z(f,!1,k,e);else if("string"!=typeof k||"fontsize"==f||Ta(f,ka(f,e),k))if("string"==typeof k&&"fontsize"==f&&(void 0!==xb("fontsize",e)&&xb("fontsize",e)!==k||void 0===xb("fontsize",e)&&!lb(f,
za(d,"fontsize"),k)))Z("fontsize",!1,k,e);else continue;else Z(f,!1,k,e);d=b(Oa(e)).filter(c)[0]||d}else for(m=0;m<a.length;m++)f=a[m][0],k=a[m][1],"boolean"==typeof k&&hc(f,k,e),"string"==typeof k&&ld(f,k,e)}function Bc(a,b,e){if(0==a)return"";if(1==a&&!b&&!e)return" ";if(1==a)return"\u00a0";var c="",m;for(m=b?"\u00a0 ":" \u00a0";3<a;)c+=m,a-=2;return 3==a?c+(b||e?b&&!e?"\u00a0\u00a0 ":!b&&e?" \u00a0\u00a0":b&&e?"\u00a0 \u00a0":"impossible":" \u00a0 "):c+(b||e?b&&!e?"\u00a0 ":!b&&e?" \u00a0":b&&
e?"\u00a0\u00a0":"impossible":"\u00a0 ")}function Ib(a,e){if(L(a)||wa(a)){for(var c=a,m=e;;)if(0<=m-1&&ra(c,c.childNodes[m-1]))c=c.childNodes[m-1],m=G(c);else if(0==m&&!Eb(c)&&ra(c,c.parentNode))m=K(c),c=c.parentNode;else if(c.nodeType==b.Node.TEXT_NODE&&-1==d.inArray(b.getComputedStyle(c.parentNode).whiteSpace,["pre","pre-wrap"])&&0!=m&&/[ \xa0]/.test(c.data[m-1]))m--;else break;for(var f=c,k=m,q=0,l=!1;;)if(k<f.childNodes.length&&ra(f,f.childNodes[k]))f=f.childNodes[k],k=0;else if(k==G(f)&&!ib(f)&&
ra(f,f.parentNode))k=1+K(f),f=f.parentNode;else if(f.nodeType==b.Node.TEXT_NODE&&-1==d.inArray(b.getComputedStyle(f.parentNode).whiteSpace,["pre","pre-wrap"])&&k!=G(f)&&/[ \xa0]/.test(f.data[k]))l&&" "==f.data[k]?f.deleteData(k,1):(l=" "==f.data[k],k++,q++);else break;for(q=Bc(q,0==m&&Eb(c),k==G(f)&&ib(f));"before"==u(c,m,f,k);)m<c.childNodes.length?(c=c.childNodes[m],m=0):c.nodeType!=b.Node.TEXT_NODE||m==G(c)?(m=1+K(c),c=c.parentNode):(l=q[0],q=q.slice(1),l!=c.data[m]&&(c.insertData(m,l),c.deleteData(m+
1,1)),m++)}}function ab(c,m,f,k,d){var q,l={},v;3>arguments.length?q=c:(q=g.createRange(),q.setStart(c,m),q.setEnd(f,k));2==arguments.length&&(l=m);5==arguments.length&&(l=d);var y=null!=l.blockMerging?!!l.blockMerging:!0,n=null!=l.stripWrappers?!!l.stripWrappers:!0;if(q){var z=q.startContainer;v=q.startOffset;for(var A=q.endContainer,F=q.endOffset,p;z.hasChildNodes();)if(v==G(z)&&ra(z,z.parentNode)&&da(z))v=1+K(z),z=z.parentNode;else{if(v==G(z))break;p=z.childNodes[v];if(ea(p)||p.nodeType==b.Node.ELEMENT_NODE&&
!p.hasChildNodes()||p.nodeType!=b.Node.ELEMENT_NODE&&p.nodeType!=b.Node.TEXT_NODE)break;z=p;v=0}for(;A.hasChildNodes();)if(0==F&&ra(A,A.parentNode)&&da(A))F=K(A),A=A.parentNode;else{if(0==F)break;p=A.childNodes[F-1];if(ea(p)||p.nodeType==b.Node.ELEMENT_NODE&&!p.hasChildNodes()||p.nodeType!=b.Node.ELEMENT_NODE&&p.nodeType!=b.Node.TEXT_NODE)break;A=p;F=G(p)}if("after"!==u(A,F,z,v))return q.setEnd(q.startContainer,q.startOffset),q;A.nodeType==b.Node.TEXT_NODE&&F==G(A)&&z!=A&&(F=1+K(A),A=A.parentNode);
q.setStart(z,v);q.setEnd(A,F);for(var H=q.startContainer;ra(H,H.parentNode)&&da(H);)H=H.parentNode;if(!ea(H)&&!wa(H)||!Sa("span",H)||e(H,["td","th"]))H=null;for(var s=q.endContainer;ra(s,s.parentNode)&&da(s);)s=s.parentNode;if(!ea(s)&&!wa(s)||!Sa("span",s)||e(s,["td","th"]))s=null;l=ua(q);if(z==A&&L(z)&&z.nodeType==b.Node.TEXT_NODE)return p=z.parentNode,z.deleteData(v,F-v),0<v&&" "===z.data.substr(v-1,1)&&v<z.data.length&&" "===z.data.substr(v,1)&&z.replaceData(v-1,1,"\u00a0"),Ib(z,v),q.setStart(q.startContainer,
q.startOffset),q.setEnd(q.startContainer,q.startOffset),Hb(l,q),!L(p)&&!wa(p)||da(p)||nb(p),q;L(z)&&z.nodeType==b.Node.TEXT_NODE&&z.deleteData(v,G(z)-v);var r=W(q,function(a){return L(a)&&!e(a,"thead tbody tfoot tr th td".split(" "))});for(v=0;v<r.length;v++){var N=r[v];p=N.parentNode;p.removeChild(N);if(n||!C(p,z)&&p!=z)for(;L(p)&&da(p)&&0==G(p);)N=p.parentNode,N.removeChild(p),p=N;!L(p)&&!wa(p)||da(p)||nb(p)}L(A)&&A.nodeType==b.Node.TEXT_NODE&&A.deleteData(0,F);Ib(q.startContainer,q.startOffset);
Ib(q.endContainer,q.endOffset);if(!(y&&H&&s&&ra(H,s)&&H!=s))return q.setEnd(q.startContainer,q.startOffset),s=H||s,va(s)&&(s=oa(s),q.setStart(s.node,s.offset),q.setEnd(s.node,s.offset)),Hb(l,q),q;1==H.children.length&&ma(H.firstChild)&&H.removeChild(H.firstChild);1==s.children.length&&ma(s.firstChild)&&s.removeChild(s.firstChild);if(C(H,s)){for(p=s;p.parentNode!=H;)p=p.parentNode;q.setStart(H,K(p));q.setEnd(H,K(p));if(!s.hasChildNodes()){for(;L(s)&&1==s.parentNode.childNodes.length&&s.parentNode!=
H;)p=s,p.removeChild(s),s=p;L(s)&&!da(s)&&da(s.previousSibling)&&da(s.nextSibling)&&s.parentNode.insertBefore(document.createElement("br"),s.nextSibling);L(s)&&s.parentNode.removeChild(s);Hb(l,q);return q}if(!da(s.firstChild))return Hb(l,q),q;n=[];for(n.push(s.firstChild);!a(n[n.length-1],"br")&&da(n[n.length-1].nextSibling);)n.push(n[n.length-1].nextSibling);for(y=gb(n);n[0].parentNode!=H;)Ga(n,q);L(n[0].previousSibling)&&a(n[0].previousSibling,"br")&&n[0].parentNode.removeChild(n[0].previousSibling)}else if(D(H,
s)){q.setStart(H,G(H));q.setEnd(H,G(H));for(p=H;p.parentNode!=s;)p=p.parentNode;da(p.nextSibling)&&a(H.lastChild,"br")&&H.removeChild(H.lastChild);s=[];!p.nextSibling||a(p.nextSibling,"br")||ea(p.nextSibling)||s.push(p.nextSibling);s.length&&s[s.length-1].nextSibling&&!a(s[s.length-1].nextSibling,"br")&&!ea(s[s.length-1].nextSibling)&&s.push(s[s.length-1].nextSibling);y=gb(s);b(s).forEach(function(a){Fa(a,H,-1,q)});a(p.nextSibling,"br")&&p.parentNode.removeChild(p.nextSibling)}else{q.setStart(H,G(H));
q.setEnd(H,G(H));da(s.firstChild)&&a(H.lastChild,"br")&&H.removeChild(H.lastChild);for(y=gb([].slice.call(x(s.childNodes)));s.hasChildNodes();)Fa(s.firstChild,H,-1,q);for(;!s.hasChildNodes();)p=s.parentNode,p.removeChild(s),s=p}$a(y,q);va(H)&&(s=oa(H),q.setStart(s.node,s.offset),q.setEnd(s.node,s.offset),H=s.node);nb(H);Hb(l,q);return q}}function wc(a,b){a.hasChildNodes()?Ga([].slice.call(x(a.childNodes)),b):a.parentNode.removeChild(a)}function vc(a,b){a&&d(a).find("ul,ol,li").each(function(){d(this).contents().each(function(){if(Za(this)){var a=
K(this);b.startContainer===this.parentNode&&b.startOffset>a?b.startOffset--:b.startContainer===this&&(b.startContainer=this.parentNode,b.startOffset=a);b.endContainer===this.parentNode&&b.endOffset>a?b.endOffset--:b.endContainer===this&&(b.endContainer=this.parentNode,b.endOffset=a);d(this).remove()}})})}function sb(a,b){if(a.length){var c=a[0];if(e(c.parentNode,["OL","UL"])){var m=c.parentNode.tagName;Ya(a,function(a){return f(a,m)},function(){return c.ownerDocument.createElement(m)},b)}else{var k=
Ya(a,function(a){return tb(a)},function(){return c.ownerDocument.createElement("blockquote")},b);eb(k,b)}}}function cb(c,m){if(L(c))if(tb(c))wc(c,m);else if(jb(c))c.removeAttribute("class"),c.removeAttribute("dir"),c.style.margin="",c.style.padding="",c.style.border="",""==c.getAttribute("style")&&c.removeAttribute("style"),Ba(c,"div",m);else{for(var f=c.parentNode,k=[];L(f)&&f.nodeType==b.Node.ELEMENT_NODE&&!tb(f)&&!e(f,["ol","ul"]);)k.push(f),f=f.parentNode;if(!L(f)||!tb(f))for(f=c.parentNode,k=
[];L(f)&&f.nodeType==b.Node.ELEMENT_NODE&&!jb(f)&&!e(f,["ol","ul"]);)k.push(f),f=f.parentNode;if(e(c,["OL","UL"])&&(!L(f)||!jb(f))){c.removeAttribute("reversed");c.removeAttribute("start");c.removeAttribute("type");k=[].slice.call(x(c.childNodes));if(c.attributes.length&&!e(c.parentNode,["OL","UL"]))Ba(c,"div",m);else{var q=gb([].slice.call(x(c.childNodes)));wc(c,m);$a(q,m)}for(q=0;q<k.length;q++)eb(k[q],m)}else if(L(f)&&jb(f)){k.push(f);for(q=f;k.length;){var f=k.pop(),d=c.parentNode==f?c:k[k.length-
1];da(d)&&!a(d,"BR")&&a(d.nextSibling,"BR")&&d.parentNode.removeChild(d.nextSibling);var l=[].slice.call(x(f.childNodes),0,K(d)),f=[].slice.call(x(f.childNodes),1+K(d));sb(l,m);sb(f,m)}cb(q,m)}}}function Sb(c,m){function k(){return document.createElement("li")}function q(a){return e(a,["ol","ul"])}function d(a){return function(b){return f(b,a)}}function l(a){return function(){return document.createElement(a)}}function v(a,b,e){return function(){if(!(L(b[0].parentNode)&&tb(b[0].parentNode)&&L(b[0].parentNode.previousSibling)&&
f(b[0].parentNode.previousSibling,a)))return document.createElement(a);var c=b[0].parentNode.previousSibling;Gb(c.lastChild,e);L(c.lastChild)&&f(c.lastChild,a)||c.appendChild(document.createElement(a));return c.lastChild}}var g=Zb()==c?"disable":"enable";c=c.toUpperCase();var y="OL"==c?"UL":"OL",n=[];(function(){var b;for(b=m.endContainer;b!=m.commonAncestorContainer;b=b.parentNode)a(b,"li")&&n.unshift(b);for(b=m.startContainer;b;b=b.parentNode)a(b,"li")&&n.unshift(b)})();b(n).forEach(function(a){Gb(a,
m)});var z=Ea(m);"enable"==g&&b(P(z,function(a){return L(a)&&f(a,y)})).forEach(function(a){if(L(a.previousSibling)&&f(a.previousSibling,c)||L(a.nextSibling)&&f(a.nextSibling,c)){a=[].slice.call(x(a.childNodes));var b=gb(a);Ga(a,m);Ya(a,function(a){return f(a,c)},function(){return null},m);$a(b,m)}else Ba(a,c,m)});z=W(z,function(a){return L(a)&&!jb(a)&&(e(a,["OL","UL"])||e(a.parentNode,["OL","UL"])||Sa(a,"li"))});"enable"==g&&(z=b(z).filter(function(a){return!e(a,["ol","ul"])||e(a.parentNode,["ol",
"ul"])}));var A;if("disable"==g)for(;z.length;)if(g=[],g.push(z.shift()),f(g[0],c))cb(g[0],m);else{for(;z.length&&z[0]==g[g.length-1].nextSibling&&!f(z[0],c);)g.push(z.shift());A=gb(g);Ga(g,m);var C;for(C=0;C<g.length;C++)eb(g[C],m);$a(A,m)}else for(;z.length;){for(g=[];!g.length||z.length&&z[0]==g[g.length-1].nextSibling;)if(e(z[0],["p","div"]))g.push(Ba(z[0],"li",m)),z.shift();else if(e(z[0],["li","ol","ul"]))g.push(z.shift());else{for(A=[];!A.length||z.length&&z[0]==A[A.length-1].nextSibling&&
da(z[0])&&da(A[A.length-1])&&!a(A[A.length-1],"br");)A.push(z.shift());g.push(Ya(A,void 0,k,m))}f(g[0].parentNode,c)||b(g).every(q)||(f(g[0].parentNode,y)?(A=gb(g),Ga(g,m),Ya(g,d(c),l(c),m),$a(A,m)):eb(Ya(g,d(c),v(c,g,m),m),m))}}function Ob(m,f){function k(e){return function(c){return a(c,"div")&&b(c.attributes).every(function(a){return"align"==a.name&&a.value.toLowerCase()==e||"style"==a.name&&1==v(c)&&c.style.textAlign==e})}}function q(a){return function(){var b=document.createElement("div");b.setAttribute("style",
"text-align: "+a);return b}}for(var d=Ea(f),l=P(d,function(e){return e.nodeType==b.Node.ELEMENT_NODE&&L(e)&&(c(e,"align")||""!=e.style.textAlign||a(e,"center"))}),d=0;d<l.length;d++){var g=l[d];g.removeAttribute("align");g.style.textAlign="";""==g.getAttribute("style")&&g.removeAttribute("style");e(g,["div","span","center"])&&!g.attributes.length&&wc(g,f);a(g,"center")&&g.attributes.length&&Ba(g,"div",f)}d=Ea(hb);l=[];for(l=W(d,function(a){return L(a)&&Sa(a,"div")&&Ja(a)!=m});l.length;){d=[];for(d.push(l.shift());l.length&&
l[0]==d[d.length-1].nextSibling;)d.push(l.shift());Ya(d,k(m),q(m),f)}}function Qc(a,e){var c;if(a.collapsed){c=a.startOffset;if(e){if(a.startContainer&&a.startContainer.nodeType===b.Node.TEXT_NODE)for(;c<a.startContainer.data.length&&"\u200b"===a.startContainer.data.charAt(c);)c++}else if(a.startContainer&&a.startContainer.nodeType===b.Node.TEXT_NODE)for(;0<c&&"\u200b"===a.startContainer.data.charAt(c-1);)c--;c!==a.startOffset&&(a.setStart(a.startContainer,c),a.setEnd(a.startContainer,c))}}var gc=
"http://www.w3.org/1999/xhtml",Rb=!1,hb=null,fa={},Pb,hc,ub,Wb,xb,ld,Gc,Hc=0,ya={ADDRESS:!0,ARTICLE:!0,ASIDE:!0,BLOCKQUOTE:!0,CAPTION:!0,CENTER:!0,COL:!0,COLGROUP:!0,DD:!0,DETAILS:!0,DIR:!0,DIV:!0,DL:!0,DT:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,HGROUP:!0,HR:!0,LI:!0,LISTING:!0,MENU:!0,NAV:!0,OL:!0,P:!0,PLAINTEXT:!0,PRE:!0,SECTION:!0,SUMMARY:!0,TABLE:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0,UL:!0,XMP:!0},md={inline:!0,"inline-block":!0,
"inline-table":!0,none:!0};(function(){var a={},b={},e=null;ub=function(c){if(!e||e.startContainer!=c.startContainer||e.endContainer!=c.endContainer||e.startOffset!=c.startOffset||e.endOffset!=c.endOffset)if(e={startContainer:c.startContainer,endContainer:c.endContainer,startOffset:c.startOffset,endOffset:c.endOffset},!n.isEmpty(a)||!n.isEmpty(b))return a={},b={},!0;return!1};Pb=function(b,e){ub(e);return a[b]};hc=function(b,e,c){ub(c);a[b]=e};Wb=function(b,e){ub(e);delete a[b]};xb=function(a,e){ub(e);
return b[a]};ld=function(a,e,c){ub(c);b[a]=e;"backcolor"==a?b.hilitecolor=e:"hilitecolor"==a&&(b.backcolor=e)};Gc=function(a,e){ub(e);delete b[a];"backcolor"==a?delete b.hilitecolor:"hilitecolor"==a&&delete b.backcolor}})();var Od={A:!0,ABBR:!0,B:!0,BDI:!0,BDO:!0,CITE:!0,CODE:!0,DFN:!0,EM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,I:!0,KBD:!0,MARK:!0,P:!0,PRE:!0,Q:!0,RP:!0,RT:!0,RUBY:!0,S:!0,SAMP:!0,SMALL:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0,VAR:!0,ACRONYM:!0,LISTING:!0,STRIKE:!0,XMP:!0,BIG:!0,BLINK:!0,
FONT:!0,MARQUEE:!0,NOBR:!0,TT:!0},nd={colgroup:!0,table:!0,tbody:!0,tfoot:!0,thead:!0,tr:!0},Pd={script:!0,style:!0,plaintext:!0,xmp:!0},zb=d.extend({H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0},ya),ec={CAPTION:!0,COL:!0,COLGROUP:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0},Ab={DD:!0,DT:!0},pd={A:d.extend({A:!0},ya),DD:Ab,DT:Ab,LI:{LI:!0},NOBR:d.extend({NOBR:!0},ya),H1:zb,H2:zb,H3:zb,H4:zb,H5:zb,H6:zb,TD:ec,TH:ec,ABBR:ya,B:ya,BDI:ya,BDO:ya,CITE:ya,CODE:ya,DFN:ya,EM:ya,I:ya,KBD:ya,MARK:ya,P:ya,PRE:ya,
Q:ya,RP:ya,RT:ya,RUBY:ya,S:ya,SAMP:ya,SMALL:ya,SPAN:ya,STRONG:ya,SUB:ya,SUP:ya,U:ya,VAR:ya,ACRONYM:ya,LISTING:ya,STRIKE:ya,XMP:ya,BIG:ya,BLINK:ya,FONT:ya,MARQUEE:ya,TT:ya},qd="subscript bold fontname fontsize forecolor hilitecolor italic strikethrough underline".split(" ");fa.backcolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||ca(a)||"transparent"==a.toLowerCase())&&Aa("backcolor",a,b)},standardInlineValueCommand:!0,relevantCssProperty:"backgroundColor",
equivalentValues:function(a,b){return aa(a)===aa(b)}};fa.bold={action:function(a,b){na("bold",b)?Aa("bold","normal",b):Aa("bold","bold",b)},inlineCommandActivatedValues:["bold","600","700","800","900"],relevantCssProperty:"fontWeight",equivalentValues:function(a,b){return a==b||"bold"==a&&"700"==b||"700"==a&&"bold"==b||"normal"==a&&"400"==b||"400"==a&&"normal"==b}};fa.createlink={action:function(e,m){""!==e&&(b(Oa(T())).forEach(function(m){b(s(m)).forEach(function(b){L(b)&&a(b,"a")&&c(b,"href")&&
b.setAttribute("href",e)})}),Aa("createlink",e,m))},standardInlineValueCommand:!0};fa.fontname={action:function(a,b){Aa("fontname",a,b)},standardInlineValueCommand:!0,relevantCssProperty:"fontFamily"};fa.fontsize={action:function(a,b){""!==a&&(a=Y(a),(-1!=d.inArray(a,"xx-small x-small small medium large x-large xx-large xxx-large".split(" "))||/^[0-9]+(\.[0-9]+)?(cm|mm|in|pt|pc)$/.test(a))&&Aa("fontsize",a,b))},indeterm:function(){return 2<=b(Oa(T(),function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE})).map(function(a){return za(a,
"fontsize")},!0).filter(function(a,e,c){return-1==b(c.slice(0,e)).indexOf(a)}).length},value:function(a){var e=Oa(a,function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE})[0];void 0===e&&(e=a.startContainer);a=za(e,"fontsize");return U(a)},relevantCssProperty:"fontSize"};fa.forecolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||ca(a)||"transparent"==a.toLowerCase())&&Aa("forecolor",a,b)},standardInlineValueCommand:!0,relevantCssProperty:"color",
equivalentValues:function(a,b){return aa(a)===aa(b)}};fa.hilitecolor={action:function(a,b){/^([0-9a-fA-F]{3}){1,2}$/.test(a)&&(a="#"+a);(/^(rgba?|hsla?)\(.*\)$/.test(a)||ca(a)||"transparent"==a.toLowerCase())&&Aa("hilitecolor",a,b)},indeterm:function(){return 2<=b(Oa(T(),function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE})).map(function(a){return za(a,"hilitecolor")},!0).filter(function(a,e,c){return-1==b(c.slice(0,e)).indexOf(a)}).length},standardInlineValueCommand:!0,relevantCssProperty:"backgroundColor",
equivalentValues:function(a,b){return aa(a)===aa(b)}};fa.italic={action:function(a,b){na("italic",b)?Aa("italic","normal",b):Aa("italic","italic",b)},inlineCommandActivatedValues:["italic","oblique"],relevantCssProperty:"fontStyle"};fa.removeformat={action:function(a,c){function m(a){return L(a)&&e(a,"abbr acronym b bdi bdo big blink cite code dfn em font i ins kbd mark nobr q s samp small span strike strong sub sup tt u var".split(" "))}var f,k;f=Oa(T(),m);b(f).forEach(function(a){for(;a.hasChildNodes();)Fa(a.firstChild,
a.parentNode,K(a),T());a.parentNode.removeChild(a)});L(T().startContainer)&&T().startContainer.nodeType==b.Node.TEXT_NODE&&0!=T().startOffset&&T().startOffset!=G(T().startContainer)&&(T().startContainer==T().endContainer?(f=T().endOffset-T().startOffset,k=T().startContainer.splitText(T().startOffset),T().setStart(k,0),T().setEnd(k,f)):T().setStart(T().startContainer.splitText(T().startOffset),0));L(T().endContainer)&&T().endContainer.nodeType==b.Node.TEXT_NODE&&0!=T().endOffset&&T().endOffset!=G(T().endContainer)&&
(k=[T().startContainer,T().startOffset],f=[T().endContainer,T().endOffset],T().setEnd(document.documentElement,0),f[0].splitText(f[1]),T().setStart(k[0],k[1]),T().setEnd(f[0],f[1]));b(Oa(T(),L)).forEach(function(a){for(;m(a.parentNode)&&ra(a.parentNode,a);)Ga([a],T())});b("subscript bold fontname fontsize forecolor hilitecolor italic strikethrough underline".split(" ")).forEach(function(a){Aa(a,null,c)})}};fa.strikethrough={action:function(a,b){na("strikethrough",b)?Aa("strikethrough",null,b):Aa("strikethrough",
"line-through",b)},inlineCommandActivatedValues:["line-through"]};fa.subscript={action:function(a,b){var e=na("subscript",b);Aa("subscript",null,b);e||Aa("subscript","subscript",b)},indeterm:function(){var a=Oa(T(),function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE});return b(a).some(function(a){return"subscript"==za(a,"subscript")})&&b(a).some(function(a){return"subscript"!=za(a,"subscript")})||b(a).some(function(a){return"mixed"==za(a,"subscript")})},inlineCommandActivatedValues:["subscript"]};
fa.superscript={action:function(a,b){var e=na("superscript",b);Aa("superscript",null,b);e||Aa("superscript","superscript",b)},indeterm:function(){var a=Oa(T(),function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE});return b(a).some(function(a){return"superscript"==za(a,"superscript")})&&b(a).some(function(a){return"superscript"!=za(a,"superscript")})||b(a).some(function(a){return"mixed"==za(a,"superscript")})},inlineCommandActivatedValues:["superscript"]};fa.underline={action:function(a,b){na("underline",
b)?Aa("underline",null,b):Aa("underline","underline",b)},inlineCommandActivatedValues:["underline"]};fa.unlink={action:function(){var b=T(),e=[],m;for(m=b.startContainer;m;m=m.parentNode)a(m,"A")&&c(m,"href")&&e.unshift(m);for(m=b.startContainer;m!=z(b.endContainer);m=A(m))a(m,"A")&&c(m,"href")&&(Q(m,b)||C(m,b.endContainer)||m==b.endContainer)&&e.push(m);for(m=0;m<e.length;m++)dc(e[m],"unlink",b)},standardInlineValueCommand:!0};var rc="p";fa["delete"]={action:function(c,m){var f;d.browser.msie&&7>=
d.browser.version&&Qc(m,!1);if(m.collapsed){Ib(m.startContainer,m.startOffset);for(var k=m.startContainer,q=m.startOffset,l=f=!1;;)if(0<q&&(f=a(k.childNodes[q-1],"br")||!1,l=a(k.childNodes[q-1],"hr")||!1),0==q&&L(k.previousSibling)&&Ia(k.previousSibling))k.parentNode.removeChild(k.previousSibling);else if(0<=q-1&&q-1<k.childNodes.length&&L(k.childNodes[q-1])&&(Ia(k.childNodes[q-1])||f||l)){if(k.removeChild(k.childNodes[q-1]),q--,f||l){m.setStart(k,q);m.setEnd(k,q);return}}else if(0==q&&da(k)||Ia(k))q=
K(k),k=k.parentNode;else{if(0<=q-1&&q-1<k.childNodes.length&&L(k.childNodes[q-1])&&a(k.childNodes[q-1],"a")){wc(k.childNodes[q-1],m);return}if(0<=q-1&&q-1<k.childNodes.length&&!ea(k.childNodes[q-1])&&!e(k.childNodes[q-1],["br","img"]))k=k.childNodes[q-1],q=G(k);else break}if(f=Ca(k,q))f.parentNode.removeChild(f);else if(k.nodeType==b.Node.TEXT_NODE&&0!=q)m.setStart(k,q-1),m.setEnd(k,q-1),ab(k,q-1,k,q);else if(k.nodeType==b.Node.TEXT_NODE&&0==q&&d.browser.msie)q=1,m.setStart(k,q),m.setEnd(k,q),m.startOffset=
0,ab(m);else if(!da(k))if(0<=q-1&&q-1<k.childNodes.length&&e(k.childNodes[q-1],["br","hr","img"]))m.setStart(k,q),m.setEnd(k,q),ab(m);else if(e(k,["li","dt","dd"])&&k==k.parentNode.firstChild&&0==q){q=[];for(f=k.parentNode;f;f=f.parentNode)a(f,"li")&&q.unshift(f);for(f=0;f<q.length;f++)Gb(q[f],m);f=gb([k]);Ga([k],m);$a(f,m);e(k,["dd","dt"])&&b(s(k)).every(function(a){return!ra(k,a)||!Sa(k,a)})&&(k=Ba(k,rc,m));eb(k,m);for(f=0;f<q.length;f++)Mb(q[f].parentNode,m)}else{f=k;for(l=q;;)if(0==l)l=K(f),f=
f.parentNode;else if(0<=l-1&&l-1<f.childNodes.length&&L(f.childNodes[l-1])&&Ia(f.childNodes[l-1]))f.removeChild(f.childNodes[l-1]),l--;else break;if(0==q&&b(s(k).concat(k)).filter(function(a){return L(a)&&ra(a,k)&&jb(a)}).length)for(q=g.createRange(),q.setStart(k,0),q.setEnd(k,0),q=Ea(q),q=W(q,function(a){return L(a)&&!Pa(a)}),f=0;f<q.length;f++)cb(q[f],m);else if(!a(f.childNodes[l],"table"))if(0<=l-1&&l-1<f.childNodes.length&&a(f.childNodes[l-1],"table"))m.setStart(f,l-1),m.setEnd(f,l);else if(0==
q&&(a(f.childNodes[l-1],"hr")||a(f.childNodes[l-1],"br")&&(a(f.childNodes[l-1].previousSibling,"br")||!da(f.childNodes[l-1].previousSibling))))m.setStart(k,q),m.setEnd(k,q),ab(f,l-1,f,l);else{if(e(f.childNodes[l],["li","dt","dd"])&&da(f.childNodes[l].firstChild)&&0!=l){var v=f.childNodes[l-1];da(v.lastChild)&&!a(v.lastChild,"br")&&v.appendChild(document.createElement("br"));da(v.lastChild)&&v.appendChild(document.createElement("br"))}if(e(f.childNodes[l],["li","dt","dd"])&&e(f.childNodes[l-1],["li",
"dt","dd"]))f=f.childNodes[l-1],l=G(f),k=f.nextSibling,q=0;else for(;0<=l-1&&l-1<f.childNodes.length;)L(f.childNodes[l-1])&&Ia(f.childNodes[l-1])?(f.removeChild(f.childNodes[l-1]),l--):(f=f.childNodes[l-1],l=G(f));v=g.createRange();v.setStart(f,l);v.setEnd(k,q);ab(v);F(document.body,m.startContainer)||(v.startContainer.hasChildNodes()||v.startContainer.nodeType==b.Node.TEXT_NODE||wa(v.startContainer)?(m.setStart(v.startContainer,v.startOffset),m.setEnd(v.startContainer,v.startOffset)):(m.setStart(v.startContainer.parentNode,
K(v.startContainer)),m.setEnd(v.startContainer.parentNode,K(v.startContainer))))}}}else ab(m)}};var sc="address dd div dt h1 h2 h3 h4 h5 h6 p pre".split(" ");fa.formatblock={action:function(c){function m(a){return function(e){return L(e)&&ra(e,a)&&f(e,sc)&&!b(r(e)).some(ja)}}function k(a){return function(b){return f(b,a)&&!b.attributes.length}}function q(){return!1}function l(a){return function(){return document.createElement(a)}}var v;/^<.*>$/.test(c)&&(c=c.slice(1,-1));c=c.toLowerCase();if(-1!=
b(sc).indexOf(c)){var g=Ea(T()),y=W(g,function(a){return L(a)&&(Lb(a)||Sa(a,"p")||e(a,["dd","dt"]))&&!b(r(a)).some(ja)}),n=gb(y);for(v=0;v<y.length;v++)for(var z=y[v];b(s(z)).some(m(z));)Ga([z],g);for($a(n,g);y.length;){if(Yb(y[0]))v=[].slice.call(x(y[0].childNodes)),n=gb(v),wc(y[0],g),$a(n,g),y.shift();else for(v=[],v.push(y.shift());y.length&&y[0]==v[v.length-1].nextSibling&&!Yb(y[0])&&!a(v[v.length-1],"BR");)v.push(y.shift());eb(Ya(v,-1==d.inArray(c,["div","p"])?k(c):q,l(c),g),g)}}},indeterm:function(){var a=
Ea(T()),a=P(a,function(a){return xa(a)&&L(a)&&!a.hasChildNodes()});if(!a.length)return!1;var e=null,c;for(c=0;c<a.length;c++){for(var m=a[c];L(m.parentNode)&&ra(m,m.parentNode)&&!f(m,sc);)m=m.parentNode;var k="";L(m)&&f(m,sc)&&!b(r(m)).some(ja)&&(k=m.tagName);if(null===e)e=k;else if(e!=k)return!0}return!1},value:function(){var a=Ea(T()),a=P(a,function(a){return xa(a)&&L(a)&&!a.hasChildNodes()});if(!a.length)return"";for(a=a[0];L(a.parentNode)&&ra(a,a.parentNode)&&!f(a,sc);)a=a.parentNode;return L(a)&&
f(a,sc)&&!b(r(a)).some(ja)?a.tagName.toLowerCase():""}};fa.forwarddelete={action:function(c,m){d.browser.msie&&7>=d.browser.version&&Qc(m,!0);if(m.collapsed){Ib(m.startContainer,m.startOffset);for(var f=m.startContainer,k=m.startOffset;;)if(k==G(f)&&L(f.nextSibling)&&Ia(f.nextSibling))f.parentNode.removeChild(f.nextSibling);else if(k<f.childNodes.length&&L(f.childNodes[k])&&Ia(f.childNodes[k]))f.removeChild(f.childNodes[k]);else if(k<f.childNodes.length&&ma(f.childNodes[k]))k++;else if(k==G(f)&&da(f)||
Ia(f))k=1+K(f),f=f.parentNode;else if(k<f.childNodes.length&&!ea(f.childNodes[k])&&!e(f.childNodes[k],["br","img"]))f=f.childNodes[k],k=0;else break;Ib(m.startContainer,m.startOffset);var q=ha(f,k);if(q)q.parentNode.removeChild(q);else if(f.nodeType==b.Node.TEXT_NODE&&k!=G(f)){m.setStart(f,k);m.setEnd(f,k);for(q=k+1;q!=f.length&&/^[\u0300-\u036f\u0591-\u05bd\u05c1\u05c2]$/.test(f.data[q]);)q++;ab(f,k,f,q)}else if(!da(f))if(k<f.childNodes.length&&e(f.childNodes[k],["br","hr","img"]))m.setStart(f,k),
m.setEnd(f,k),ab(f,k,f,k+1);else{for(var l=f,q=k;;)if(q==G(l))q=1+K(l),l=l.parentNode;else if(q<l.childNodes.length&&L(l.childNodes[q])&&Ia(l.childNodes[q]))l.removeChild(l.childNodes[q]);else break;if(!a(l.childNodes[q-1],"table"))if(a(l.childNodes[q],"table"))m.setStart(l,q),m.setEnd(l,q+1);else if(k==G(f)&&e(l.childNodes[q],["br","hr"]))m.setStart(f,k),m.setEnd(f,k),ab(l,q,l,q+1);else{for(;q<l.childNodes.length;)L(l.childNodes[q])&&Ia(l.childNodes[q])?l.removeChild(l.childNodes[q]):(l=l.childNodes[q],
q=0);f=ab(f,k,l,q);m.setStart(f.startContainer,f.startOffset);m.setEnd(f.endContainer,f.endOffset)}}}else ab(m)}};fa.indent={action:function(){var b=[],c;for(c=T().endContainer;c!=T().commonAncestorContainer;c=c.parentNode)a(c,"LI")&&b.unshift(c);for(c=T().startContainer;c!=T().commonAncestorContainer;c=c.parentNode)a(c,"LI")&&b.unshift(c);for(c=T().commonAncestorContainer;c;c=c.parentNode)a(c,"LI")&&b.unshift(c);for(c=0;c<b.length;c++)Gb(b[c],T());b=Ea(T());c=[];c=W(b,function(a){return L(a)&&(Sa(a,
"div")||Sa(a,"ol"))});for(c.length&&a(c[0],"LI")&&e(c[0].parentNode,["OL","UL"])&&a(c[0].previousSibling,"LI")&&Gb(c[0].previousSibling,b);c.length;){var m=[];for(m.push(c.shift());c.length&&c[0]==m[m.length-1].nextSibling;)m.push(c.shift());sb(m,b)}}};fa.inserthorizontalrule={action:function(a,e){for(;0==e.startOffset&&e.startContainer.parentNode;)e.setStart(e.startContainer.parentNode,K(e.startContainer));for(;e.endOffset==G(e.endContainer)&&e.endContainer.parentNode;)e.setEnd(e.endContainer.parentNode,
1+K(e.endContainer));ab(e,{blockMerging:!1});if(L(T().startContainer)||wa(T().startContainer)){T().startContainer.nodeType==b.Node.TEXT_NODE&&0==T().startOffset&&(T().setStart(T().startContainer.parentNode,K(T().startContainer)),T().collapse(!0));T().startContainer.nodeType==b.Node.TEXT_NODE&&T().startOffset==G(T().startContainer)&&(T().setStart(T().startContainer.parentNode,1+K(T().startContainer)),T().collapse(!0));var c=document.createElement("hr");e.insertNode(c);eb(c,e);e.setStart(c.parentNode,
1+K(c));e.setEnd(c.parentNode,1+K(c));g.getSelection().removeAllRanges();g.getSelection().addRange(e)}}};fa.inserthtml={action:function(a,e){ab(e);if(L(e.startContainer)||wa(e.startContainer)){var c=e.createContextualFragment(a),m=c.lastChild;if(m){var f=r(c);ea(e.startContainer)&&b(e.startContainer.childNodes).filter(function(a,b){return L(a)&&ma(a)&&K(a)>=b.startOffset},!0).forEach(function(a){a.parentNode.removeChild(a)});e.insertNode(c);ea(e.startContainer)&&nb(e.startContainer);e.setStart(m.parentNode,
1+K(m));e.setEnd(m.parentNode,1+K(m));for(c=0;c<f.length;c++)eb(f[c],e);ba(e)}}}};fa.insertimage={action:function(b){if(""!==b){var e=T();ab(e,{stripWrappers:!1});if(L(T().startContainer)||wa(T().startContainer)){ea(e.startContainer)&&1==e.startContainer.childNodes.length&&a(e.startContainer.firstChild,"br")&&0==e.startOffset&&e.startContainer.removeChild(e.startContainer.firstChild);var c=document.createElement("img");c.setAttribute("src",b);e.insertNode(c);e.setStart(c.parentNode,1+K(c));e.setEnd(c.parentNode,
1+K(c));g.getSelection().removeAllRanges();g.getSelection().addRange(e);c.removeAttribute("width");c.removeAttribute("height")}}}};fa.insertlinebreak={action:function(a,e){ab(e,{stripWrappers:!1});if(L(e.startContainer)||wa(e.startContainer))if(e.startContainer.nodeType!=b.Node.ELEMENT_NODE||Sa("br",e.startContainer))if(e.startContainer.nodeType==b.Node.ELEMENT_NODE||Sa("br",e.startContainer.parentNode)){var c,m;e.startContainer.nodeType==b.Node.TEXT_NODE&&0==e.startOffset&&(c=e.startContainer.parentNode,
m=K(e.startContainer),g.getSelection().collapse(c,m),e.setStart(c,m),e.setEnd(c,m));e.startContainer.nodeType==b.Node.TEXT_NODE&&e.startOffset==G(e.startContainer)&&(c=e.startContainer.parentNode,m=1+K(e.startContainer),g.getSelection().collapse(c,m),e.setStart(c,m),e.setEnd(c,m));c=document.createElement("br");e.insertNode(c);g.getSelection().collapse(c.parentNode,1+K(c));e.setStart(c.parentNode,1+K(c));e.setEnd(c.parentNode,1+K(c));db(c)&&(e.insertNode(Fb()),g.getSelection().collapse(c.parentNode,
1+K(c)),e.setStart(c.parentNode,1+K(c)),e.setEnd(c.parentNode,1+K(c)));d.browser.msie&&8>d.browser.version&&c.parentNode.removeAttribute("style")}}};fa.insertorderedlist={action:function(a,b){Sb("ol",b)},indeterm:function(){return/^mixed( ol)?$/.test(Zb())},state:function(){return"ol"==Zb()}};var rd={LI:!0,DT:!0,DD:!0};fa.insertparagraph={action:function(c,m){var f;ab(m);vc(Ua(m.startContainer),m);if(L(m.startContainer)||wa(m.startContainer)){var k=m.startContainer,q=m.startOffset;k.nodeType==b.Node.TEXT_NODE&&
0!=q&&q!=G(k)&&k.splitText(q);k.nodeType==b.Node.TEXT_NODE&&q==G(k)&&(q=1+K(k),k=k.parentNode);if(k.nodeType==b.Node.TEXT_NODE||k.nodeType==b.Node.COMMENT_NODE)q=K(k),k=k.parentNode;g.getSelection().collapse(k,q);m.setStart(k,q);m.setEnd(k,q);for(var d=k;!Yb(d)&&L(d.parentNode)&&ra(k,d.parentNode);)d=d.parentNode;if(!L(d)||!ra(d,k)||!Yb(d)){var l=rc;f=Ea(m);f=W(f,function(a){return Sa(a,"p")}).slice(0,1);if(!f.length){if(!Sa(l,m.startContainer))return;d=document.createElement(l);m.insertNode(d);d.appendChild(Fb());
g.getSelection().collapse(d,0);m.setStart(d,0);m.setEnd(d,0);return}for(;f[f.length-1].nextSibling&&Sa(f[f.length-1].nextSibling,"p");)f.push(f[f.length-1].nextSibling);d=Ya(f,function(){return!1},function(){return document.createElement(l)},m)}if(d){var v;if("ADDRESS"==d.tagName||"LISTING"==d.tagName||"PRE"==d.tagName){var y=document.createElement("br");f=d.offsetHeight;m.insertNode(y);v=d.offsetHeight;g.getSelection().collapse(k,q+1);m.setStart(k,q+1);m.setEnd(k,q+1);f!=v||D(A(y),d)||(m.insertNode(Fb()),
g.getSelection().collapse(k,q+1),m.setEnd(k,q+1))}else if(rd[d.tagName]&&(!d.hasChildNodes()||1==d.childNodes.length&&a(d.firstChild,"br"))){if(Ga([d],m),e(d,["dd","dt"])&&b(s(d)).every(function(a){return!ra(d,a)||!Sa(d,a)})&&(d=Ba(d,rc,m)),eb(d,m),a(d,"li")&&a(d.nextSibling,"li")&&e(d.nextSibling.firstChild,["ol","ul"])){k=d.nextSibling;q=d.nextSibling.childNodes.length;for(f=0;f<q;f++)d.appendChild(k.childNodes[0]);k.parentNode.removeChild(k)}}else{q=g.createRange();q.setStart(m.startContainer,
m.startOffset);for(q.setEnd(d,G(d));0==q.startOffset&&q.startContainer!=d;)q.setStart(q.startContainer.parentNode,K(q.startContainer));for(;q.startOffset==G(q.startContainer)&&q.startContainer!=d;)q.setStart(q.startContainer.parentNode,1+K(q.startContainer));k=W(q);k=!k.length||1==k.length&&a(k[0],"br");k=/^H[1-6]$/.test(d.tagName)&&k?rc:"DT"==d.tagName&&k?"dd":"DD"==d.tagName&&k?"dt":d.tagName.toLowerCase();k=document.createElement(k);Ha(d,k);k.removeAttribute("id");d.parentNode.insertBefore(k,d.nextSibling);
v=P(q);q=q.extractContents();y=r(q);for(f=0;f<y.length;f++)y[f].nodeType==b.Node.ELEMENT_NODE&&-1==b(v).indexOf(y[f])&&y[f].removeAttribute("id");f=[];if(v=q.firstChild){do Za(v)||f.push(v);while(null!=(v=v.nextSibling))}a(k,"li")&&f.length&&e(f[0],["ul","ol"])&&(f=k.offsetHeight,y=Fb(),k.appendChild(y),v=k.offsetHeight,f!==v&&k.removeChild(y));k.appendChild(q);nb(d);nb(k);g.getSelection().collapse(k,0);m.setStart(k,0);m.setEnd(k,0)}}}}};fa.inserttext={action:function(a,e){var c;ab(e,{stripWrappers:!1});
if(L(e.startContainer)||wa(e.startContainer))if(1<a.length)for(c=0;c<a.length;c++)fa.inserttext.action(a[c],e);else if(""!=a)if("\n"==a)fa.insertparagraph.action("",e);else{c=e.startContainer;var m=e.startOffset;0<=m-1&&m-1<c.childNodes.length&&c.childNodes[m-1].nodeType==b.Node.TEXT_NODE&&(c=c.childNodes[m-1],m=G(c));0<=m&&m<c.childNodes.length&&c.childNodes[m].nodeType==b.Node.TEXT_NODE&&(c=c.childNodes[m],m=0);var f=c.nodeType==b.Node.ELEMENT_NODE?c:c.parentNode;" "==a&&f.nodeType==b.Node.ELEMENT_NODE&&
-1==d.inArray(b.getComputedStyle(f).whiteSpace,["pre","pre-wrap"])&&(a="\u00a0");f=$b(e);c.nodeType==b.Node.TEXT_NODE?(c.insertData(m,a),g.getSelection().collapse(c,m),e.setStart(c,m),g.getSelection().extend(c,m+1),e.setEnd(c,m+1)):(1==c.childNodes.length&&db(c.firstChild)&&c.removeChild(c.firstChild),c=document.createTextNode(a),e.insertNode(c),g.getSelection().collapse(c,0),e.setStart(c,0),g.getSelection().extend(c,1),e.setEnd(c,1));Hb(f,e);Ib(e.startContainer,e.startOffset);Ib(e.endContainer,e.endOffset);
g.getSelection().collapseToEnd();e.collapse(!1)}}};fa.insertunorderedlist={action:function(a,b){Sb("ul",b)},indeterm:function(){return/^mixed( ul)?$/.test(Zb())},state:function(){return"ul"==Zb()}};fa.justifycenter={action:function(a,b){Ob("center",b)},indeterm:function(){var a=P(Ea(T()),function(a){return L(a)&&xa(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"center"==Ja(a)})&&b(a).some(function(a){return"center"!=Ja(a)})},state:function(){var a=P(Ea(T()),function(a){return L(a)&&
xa(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"center"==Ja(a)})},value:function(){var a=P(Ea(T()),function(a){return L(a)&&xa(a)&&!a.hasChildNodes()});return a.length?Ja(a[0]):"left"}};fa.justifyfull={action:function(a,b){Ob("justify",b)},indeterm:function(){var a=P(Ea(T()),function(a){return L(a)&&xa(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"justify"==Ja(a)})&&b(a).some(function(a){return"justify"!=Ja(a)})},state:function(){var a=P(Ea(T()),function(a){return L(a)&&
xa(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"justify"==Ja(a)})},value:function(){var a=P(Ea(T()),function(a){return L(a)&&xa(a)&&!a.hasChildNodes()});return a.length?Ja(a[0]):"left"}};fa.justifyleft={action:function(a,b){Ob("left",b)},indeterm:function(){var a=P(Ea(T()),function(a){return L(a)&&xa(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"left"==Ja(a)})&&b(a).some(function(a){return"left"!=Ja(a)})},state:function(){var a=P(Ea(T()),function(a){return L(a)&&
xa(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"left"==Ja(a)})},value:function(){var a=P(Ea(T()),function(a){return L(a)&&xa(a)&&!a.hasChildNodes()});return a.length?Ja(a[0]):"left"}};fa.justifyright={action:function(a,b){Ob("right",b)},indeterm:function(){var a=P(Ea(T()),function(a){return L(a)&&xa(a)&&!a.hasChildNodes()});return b(a).some(function(a){return"right"==Ja(a)})&&b(a).some(function(a){return"right"!=Ja(a)})},state:function(){var a=P(Ea(T()),function(a){return L(a)&&
xa(a)&&!a.hasChildNodes()});return a.length&&b(a).every(function(a){return"right"==Ja(a)})},value:function(){var a=P(Ea(T()),function(a){return L(a)&&xa(a)&&!a.hasChildNodes()});return a.length?Ja(a[0]):"left"}};fa.outdent={action:function(){var c=[];(function(){var b;for(b=T().endContainer;b!=T().commonAncestorContainer;b=b.parentNode)a(b,"li")&&c.unshift(b);for(b=T().startContainer;b;b=b.parentNode)a(b,"li")&&c.unshift(b)})();b(c).forEach(function(a){Gb(a,T())});for(var m=Ea(T()),f=W(m,function(c){return L(c)&&
(!b(r(c)).some(L)||e(c,["ol","ul"])||a(c,"li")&&e(c.parentNode,["ol","ul"]))});f.length;){for(;f.length&&(e(f[0],["OL","UL"])||!e(f[0].parentNode,["OL","UL"]));)cb(f.shift(),m);if(!f.length)break;var k=[];for(k.push(f.shift());f.length&&f[0]==k[k.length-1].nextSibling&&!e(f[0],["OL","UL"]);)k.push(f.shift());var q=gb(k);Ga(k,m);b(k).forEach(eb);$a(q,m)}}};fa.selectall={action:function(){var a=document.body;a||(a=document.documentElement);a?g.getSelection().selectAllChildren(a):g.getSelection().removeAllRanges()}};
fa.stylewithcss={action:function(a){Rb="false"!=String(a).toLowerCase()},state:function(){return Rb}};fa.usecss={action:function(a){Rb="false"==String(a).toLowerCase()}};(function(){var a=[],e;for(e in fa)fa.hasOwnProperty(e)&&a.push(e);b(a).forEach(function(a){null==fa[a].relevantCssProperty&&(fa[a].relevantCssProperty=null);null!=fa[a].inlineCommandActivatedValues&&null==fa[a].indeterm&&(fa[a].indeterm=function(e){e=b(Oa(e,function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE})).map(function(b){return za(b,
a)});var c=b(e).filter(function(e){return-1!=b(fa[a].inlineCommandActivatedValues).indexOf(e)});return 1<=c.length&&1<=e.length-c.length});null!=fa[a].inlineCommandActivatedValues&&(fa[a].state=function(e){var c=Oa(e,function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE});return 0==c.length?-1!=b(fa[a].inlineCommandActivatedValues).indexOf(za(e.startContainer,a)):b(c).every(function(e){return-1!=b(fa[a].inlineCommandActivatedValues).indexOf(za(e,a))})});null!=fa[a].standardInlineValueCommand&&(fa[a].indeterm=
function(){var e=b(Oa(T())).filter(function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE},!0).map(function(b){return za(b,a)}),c;for(c=1;c<e.length;c++)if(e[c]!=e[c-1])return!0;return!1},fa[a].value=function(e){var c=Oa(e,function(a){return L(a)&&a.nodeType==b.Node.TEXT_NODE})[0];"undefined"==typeof c&&(c=e.startContainer);return za(c,a)})})})();return{commands:fa,execCommand:Z,queryCommandIndeterm:function(a,b){a=a.toLowerCase();return V(a,"indeterm",b,function(a){return function(){return R(a,b)?
fa[a].indeterm(b):!1}}(a))},queryCommandState:na,queryCommandValue:ka,queryCommandEnabled:R,queryCommandSupported:function(a){a=a.toLowerCase();return fa.hasOwnProperty(a)},copyAttributes:Ha,createEndBreak:Fb,isEndBreak:function(b){return a(b,"br")&&b.parentNode.lastChild===b},ensureContainerEditable:nb,isEditingHost:wa,isEditable:L,getStateOverride:Pb,setStateOverride:hc,resetOverrides:ub,unsetStateOverride:Wb}});define("aloha/selection","aloha/core jquery util/class util/range util/arrays util/strings aloha/console PubSub aloha/engine aloha/ecma5shims aloha/rangy-core".split(" "),
function(g,b,n,l,d,c,k,f,q,a){function e(a,e){var c=g.activeEditable?g.activeEditable.obj.parent()[0]:null,c=b(a).parentsUntil(c).get(),m;m=[];var f,k,q;1===a.nodeType&&"BODY"!==a.nodeName&&"HTML"!==a.nodeName?m.push(a.cloneNode(!1).outerHTML):m.push("#"+a.nodeType);q=0;for(k=c.length;q<k;q++){f=c[q];if("BODY"===f.nodeName||"HTML"===f.nodeName)break;m.push(f.cloneNode(!1).outerHTML)}m=m.join("");return e&&a===e.node&&d.equal(e.parents,c)&&m===e.html?null:{node:a,parents:c,html:m}}function m(a){var e;
b.browser.msie&&a.startContainer===a.endContainer&&a.startOffset===a.endOffset&&3==a.startContainer.nodeType&&a.startOffset==a.startContainer.data.length&&a.startContainer.nextSibling&&(e=a.startContainer.nextSibling,"OL"===e.nodeName||"UL"===e.nodeName)&&(" "==a.startContainer.data[a.startContainer.data.length-1]?a.startOffset=a.endOffset=a.startOffset-1:a.startContainer.data+=" ")}var v=window.GENTICS,x=null,z=null;l=n.extend({_constructor:function(){this.rangeObject={};this.preventSelectionChangedFlag=
!1;this.tagHierarchy={textNode:{},abbr:{textNode:!0},b:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0,strong:!0},pre:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0},blockquote:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0,cite:!0,q:!0,code:!0,abbr:!0,p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0},ins:{textNode:!0,b:!0,i:!0,
em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,u:!0,p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0},ul:{li:!0},ol:{li:!0},li:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,ul:!0,ol:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,del:!0,ins:!0,u:!0,a:!0},tr:{td:!0,th:!0},table:{tr:!0},div:{textNode:!0,b:!0,i:!0,em:!0,sup:!0,sub:!0,br:!0,span:!0,img:!0,ul:!0,ol:!0,table:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,del:!0,ins:!0,u:!0,p:!0,div:!0,pre:!0,blockquote:!0,a:!0},h1:{textNode:!0,b:!0,i:!0,em:!0,
sup:!0,sub:!0,br:!0,span:!0,img:!0,a:!0,del:!0,ins:!0,u:!0}};this.tagHierarchy={textNode:this.tagHierarchy.textNode,abbr:this.tagHierarchy.abbr,br:this.tagHierarchy.textNode,img:this.tagHierarchy.textNode,b:this.tagHierarchy.b,strong:this.tagHierarchy.b,code:this.tagHierarchy.b,q:this.tagHierarchy.b,blockquote:this.tagHierarchy.blockquote,cite:this.tagHierarchy.b,i:this.tagHierarchy.b,em:this.tagHierarchy.b,sup:this.tagHierarchy.b,sub:this.tagHierarchy.b,span:this.tagHierarchy.b,del:this.tagHierarchy.del,
ins:this.tagHierarchy.ins,u:this.tagHierarchy.b,p:this.tagHierarchy.b,pre:this.tagHierarchy.pre,a:this.tagHierarchy.b,ul:this.tagHierarchy.ul,ol:this.tagHierarchy.ol,li:this.tagHierarchy.li,td:this.tagHierarchy.li,div:this.tagHierarchy.div,h1:this.tagHierarchy.h1,h2:this.tagHierarchy.h1,h3:this.tagHierarchy.h1,h4:this.tagHierarchy.h1,h5:this.tagHierarchy.h1,h6:this.tagHierarchy.h1,table:this.tagHierarchy.table};this.replacingElements={h1:{p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,pre:!0,blockquote:!0}};
this.replacingElements={h1:this.replacingElements.h1,h2:this.replacingElements.h1,h3:this.replacingElements.h1,h4:this.replacingElements.h1,h5:this.replacingElements.h1,h6:this.replacingElements.h1,pre:this.replacingElements.h1,p:this.replacingElements.h1,blockquote:this.replacingElements.h1};this.allowedToStealElements={h1:{textNode:!0}};this.allowedToStealElements={h1:this.allowedToStealElements.h1,h2:this.allowedToStealElements.h1,h3:this.allowedToStealElements.h1,h4:this.allowedToStealElements.h1,
h5:this.allowedToStealElements.h1,h6:this.allowedToStealElements.h1,p:this.tagHierarchy.b}},SelectionTree:function(){this.domobj={};this.selection=void 0;this.children=[]},onChange:function(a,b,e){this.updateSelectionTimeout&&window.clearTimeout(this.updateSelectionTimeout);var c=this;this.updateSelectionTimeout=window.setTimeout(function(){var m=new g.Selection.SelectionRange(!0);if(m.startContainer&&"HTML"!==m.startContainer.nodeName&&"BODY"!==m.startContainer.nodeName)g.Selection._updateSelection(b,
m);else if(!this.updateSelectionTimeout)c.onChange(a,b,10+2*(e||5))},e||5)},preventSelectionChanged:function(){this.preventSelectionChangedFlag=!0},isSelectionChangedPrevented:function(){var a=this.preventSelectionChangedFlag;this.preventSelectionChangedFlag=!1;return a},isSelectionEditable:function(){return this.rangeObject.commonAncestorContainer&&b(this.rangeObject.commonAncestorContainer).contentEditable()},isFloatingMenuVisible:function(){var a=b(g.Selection.rangeObject.commonAncestorContainer).attr("data-aloha-floatingmenu-visible");
return"undefined"!==a&&"true"===a?!0:!1},updateSelection:function(a){return this._updateSelection(a,null)},_updateSelection:function(a,c){if(a&&a.originalEvent&&!0===a.originalEvent.stopSelectionUpdate||"undefined"===typeof c)return!1;this.rangeObject=c=c||new g.Selection.SelectionRange(!0);c.update();if(c&&c.startContainer&&c.endContainer&&0<b(c.commonAncestorContainer).closest(".aloha-editable").length){var m=!(3===c.startContainer.nodeType&&!b(c.startContainer.parentNode).contentEditable()),q=
!(3===c.endContainer.nodeType&&!b(c.endContainer.parentNode).contentEditable());if(!m||!q)return g.getSelection().removeAllRanges(),!0}if(this.isSelectionChangedPrevented())return!0;g.trigger("aloha-selection-changed-before",[this.rangeObject,a]);g.trigger("aloha-selection-changed",[this.rangeObject,a]);var m=this.rangeObject,d=m.startContainer,q=m.endContainer;if(d&&q){if(d=e(d,x),q=e(q,z),d||q)x=d,z=q,f.pub("aloha.selection.context-change",{range:m,event:a})}else k.warn("aloha/selection","encountered range object without start or end container");
g.trigger("aloha-selection-changed-after",[this.rangeObject,a]);return!0},getSelectionTree:function(a){if(!a)return this.rangeObject.getSelectionTree();if(!a.commonAncestorContainer)return g.Log.error(this,"the rangeObject is missing the commonAncestorContainer"),!1;this.inselection=!1;v.Utils.Dom.doCleanup({merge:!0},a)&&(a.update(),a.select());return this.recursiveGetSelectionTree(a,a.commonAncestorContainer)},recursiveGetSelectionTree:function(a,e){var c=0,m=this,f=[];b(e).contents().each(function(b){var k=
"none",q=!1,d=!1,l=!1,v=!1,x=!1,n=!1;a.isCollapsed()&&e===a.startContainer&&a.startOffset==b&&(f[c]=new g.Selection.SelectionTree,f[c].selection="collapsed",f[c].domobj=void 0,m.inselection=!1,l=!0,c++);if(!m.inselection&&!l){var z;try{z=this.nodeType}catch(A){return}switch(z){case 3:this===a.startContainer&&(m.inselection=!0,k=0<a.startOffset?"partial":"full",q=a.startOffset,d=this.length);break;case 1:this===a.startContainer&&0===a.startOffset&&(m.inselection=!0,k="full"),e===a.startContainer&&
a.startOffset===b&&(m.inselection=!0,k="full")}}if(m.inselection&&!l){"none"==k&&(k="full");switch(this.nodeType){case 3:this===a.endContainer&&(m.inselection=!1,a.endOffset<this.length&&(k="partial"),!1===q&&(q=0),d=a.endOffset);break;case 1:this===a.endContainer&&0===a.endOffset&&(m.inselection=!1)}e===a.endContainer&&a.endOffset<=b&&(m.inselection=!1,k="none")}f[c]=new g.Selection.SelectionTree;f[c].domobj=this;f[c].selection=k;"partial"==k&&(f[c].startOffset=q,f[c].endOffset=d);f[c].children=
m.recursiveGetSelectionTree(a,this);k=f[c].children.length;if(0<k){for(b=0;b<k;++b)switch(f[c].children[b].selection){case "none":v=!0;break;case "full":n=!0;break;case "partial":x=!0}x||n&&v?f[c].selection="partial":!n||x||v||(f[c].selection="full")}c++});a.isCollapsed()&&e===a.startContainer&&a.startOffset==e.childNodes.length&&(f[c]=new g.Selection.SelectionTree,f[c].selection="collapsed",f[c].domobj=void 0);return f},getRangeObject:function(){return this.rangeObject},isRangeObjectWithinMarkup:function(a,
e,c,m,f){var k=this;a=b(e?a.endContainer:a.startContainer).parents();var q=!1,d=-1;"undefined"!==typeof m&&"function"!==typeof m&&g.Log.error(this,"parameter tagComparator is not a function");"undefined"===typeof m&&(m=function(a,b){return k.standardTextLevelSemanticsComparator(a,b)});0<a.length&&a.each(function(){if(this===f)return g.Log.debug(k,"reached limit dom obj"),!1;if(m(this,c))return!1===q&&(q=[]),g.Log.debug(k,"reached object equal to markup"),d++,q[d]=this,!0});return q},standardSectionsAndGroupingContentComparator:function(a,
b){if(1!==a.nodeType)return g.Log.debug(this,"only element nodes (nodeType == 1) can be compared"),!1;if(!b[0].nodeName)return!1;var e=g.Selection.replacingElements[a.nodeName.toLowerCase()];return e&&e[b[0].nodeName.toLowerCase()]},standardTagNameComparator:function(a,b){if(1===a.nodeType)return a.nodeName!=b[0].nodeName?!1:!0;g.Log.debug(this,"only element nodes (nodeType == 1) can be compared");return!1},standardTextLevelSemanticsComparator:function(a,b){if(1===a.nodeType)return a.nodeName==b[0].nodeName&&
this.standardAttributesComparator(a,b)?!0:!1;g.Log.debug(this,"only element nodes (nodeType == 1) can be compared");return!1},standardAttributesComparator:function(a,b){var e=c.words(a&&a.className||""),m=c.words(b.length&&b[0].className||"");d.sortUnique(e);d.sortUnique(m);return d.equal(e,m)},changeMarkup:function(e,c,m){var f=c[0].tagName.toLowerCase(),k,d,l=this.isRangeObjectWithinMarkup(e,!1,c,m,k),v=this.isRangeObjectWithinMarkup(e,!0,c,m,k),x,n,z,A;if(this.replacingElements[f])d=e,e=new this.SelectionRange(e),
f=g.activeEditable?g.activeEditable.obj.get(0):b("body"),e.update(f),c.isReplacingElement=!0;else if(e.isCollapsed())return g.Log.debug(this,"early returning from applying markup because nothing is currently selected"),!1;k=g.activeEditable?g.activeEditable.obj[0]:b("body");c.isReplacingElement||0!==e.startOffset||null!=(z=this.getTextNodeSibling(!1,e.commonAncestorContainer.parentNode,e.startContainer))&&(A=this.isRangeObjectWithinMarkup({startContainer:z,startOffset:0},!1,c,m,k));c.isReplacingElement||
e.endOffset!==e.endContainer.length||null!=(x=this.getTextNodeSibling(!0,e.commonAncestorContainer.parentNode,e.endContainer))&&(n=this.isRangeObjectWithinMarkup({startContainer:x,startOffset:0},!1,c,m,k));if(!c.isReplacingElement&&l&&!v)g.Log.info(this,"markup 2 non-markup"),this.prepareForRemoval(e.getSelectionTree(),c,m),b(l).addClass("preparedForRemoval"),this.insertCroppedMarkups(l,e,!1,m);else if(!c.isReplacingElement&&l&&v)g.Log.info(this,"markup 2 markup"),this.prepareForRemoval(e.getSelectionTree(),
c,m),this.splitRelevantMarkupObject(l,v,e,m);else if(!c.isReplacingElement&&(!l&&v||n||A))g.Log.info(this,"non-markup 2 markup OR with next2markup"),A&&n?(l=new g.Selection.SelectionRange(e),l.startContainer=b(A[A.length-1]).textNodes()[0],l.startOffset=0,l.endContainer=b(n[n.length-1]).textNodes().last()[0],l.endOffset=l.endContainer.length,l.update(),this.applyMarkup(l.getSelectionTree(),e,c,m),g.Log.info(this,"double extending previous markup(previous and after selection), actually wrapping it ...")):
!A||n||v?A&&!n&&v?(l=new g.Selection.SelectionRange(e),l.startContainer=b(A[A.length-1]).textNodes()[0],l.startOffset=0,l.endContainer=b(v[v.length-1]).textNodes().last()[0],l.endOffset=l.endContainer.length,l.update(),this.applyMarkup(l.getSelectionTree(),e,c,m),g.Log.info(this,"double extending previous markup(previous and relevant at the end), actually wrapping it ...")):!A&&n?(this.extendExistingMarkupWithSelection(n,e,!0,m),g.Log.info(this,"extending following markup backwards")):this.extendExistingMarkupWithSelection(v,
e,!0,m):(this.extendExistingMarkupWithSelection(A,e,!1,m),g.Log.info(this,"extending previous markup"));else if(c.isReplacingElement||!(l||v||A||n)){g.Log.info(this,"non-markup 2 non-markup");e.startContainer!==e.endContainer?v=!1:1!=e.startContainer.nodeType?v=!1:(v=e.startContainer.firstChild,v=!v||!v.nextSibling&&"BR"==v.nodeName);if(v){c=c.clone();m=e.startContainer!==e.endContainer?!1:1!=e.startContainer.nodeType?!1:q.isEndBreak(e.startContainer);m&&c[0].appendChild(q.createEndBreak());g.activeEditable&&
b.browser.mozilla&&g.activeEditable.obj.focus();q.isEditable(e.startContainer)?(q.copyAttributes(e.startContainer,c[0]),b(e.startContainer).after(c[0]).remove()):q.isEditingHost(e.startContainer)&&(b(e.startContainer).append(c[0]),q.ensureContainerEditable(c[0]));d.startContainer=c[0];d.endContainer=c[0];d.startOffset=0;d.endOffset=0;return}this.applyMarkup(e.getSelectionTree(),e,c,m,{setRangeObject2NewMarkup:!0});d.startContainer=e.startContainer;d.endContainer=e.endContainer;d.startOffset=e.startOffset;
d.endOffset=e.endOffset}c.isReplacingElement&&(d&&d.startContainer.className&&-1<d.startContainer.className.indexOf("preparedForRemoval")&&(m=b(d.startContainer).parents(c[0].tagName).get(0),d.startContainer=m,e.startContainer=m),d&&d.endContainer.className&&-1<d.endContainer.className.indexOf("preparedForRemoval")&&(m=b(d.endContainer).parents(c[0].tagName).get(0),d.endContainer=m,e.endContainer=m));b(".preparedForRemoval").zap();c.isReplacingElement?(a.Node.ELEMENT_NODE===d.startContainer.nodeType&&
d.startContainer.childNodes&&d.startContainer.childNodes.length<d.startOffset&&(d.startOffset=d.startContainer.childNodes.length,e.startOffset=d.startContainer.childNodes.length),a.Node.ELEMENT_NODE===d.endContainer.nodeType&&d.endContainer.childNodes&&d.endContainer.childNodes.length<d.endOffset&&(d.endOffset=d.endContainer.childNodes.length,e.endOffset=d.endContainer.childNodes.length),e.endContainer=d.endContainer,e.endOffset=d.endOffset,e.startContainer=d.startContainer,e.startOffset=d.startOffset,
d.update(),d.select()):(e.update(),e.select())},areMarkupObjectsAsLongAsRangeObject:function(a,e,c){var m,f,k;if(0!==c.startOffset)return!1;m=0;for(k=a.length;m<k;m++)if(f=b(a[m]),f.textNodes().first()[0]!==c.startContainer)return!1;m=0;for(a=e.length;m<a;m++)if(f=b(e[m]),f=f.textNodes().last()[0],f!==c.endContainer||f.length!=c.endOffset)return!1;return!0},splitRelevantMarkupObject:function(a,e,c,m){b(a).addClass("preparedForRemoval");b(e).addClass("preparedForRemoval");if(this.areMarkupObjectsAsLongAsRangeObject(a,
e,c))return!0;var f=this.intersectRelevantMarkupObjects(a,e);f?(this.insertCroppedMarkups([f],c,!1,m),this.insertCroppedMarkups([f],c,!0,m)):(this.insertCroppedMarkups(a,c,!1,m),this.insertCroppedMarkups(e,c,!0,m));return!0},intersectRelevantMarkupObjects:function(a,b){var e=!1,c,m,f,k,q,d;if(!a||!b)return e;q=a.length;d=b.length;for(c=0;c<q;c++)for(m=a[c],f=0;f<d;f++)k=b[f],m===k&&(e=m);return e},extendExistingMarkupWithSelection:function(a,e,c,m){var f,k,q,d,l,v,g;c||(f=!0);c&&(k=!0);c=[];q=0;for(d=
a.length;q<d;q++)c[q]=new this.SelectionRange,l=a[q],k&&!f&&(c[q].startContainer=e.startContainer,c[q].startOffset=e.startOffset,v=b(l).textNodes(!0),g=v.length-1,c[q].endContainer=v[g],c[q].endOffset=v[g].length,c[q].update(),this.applyMarkup(c[q].getSelectionTree(),e,this.getClonedMarkup4Wrapping(l),m,{setRangeObject2NewMarkup:!0})),!k&&f&&(v=b(l).textNodes(!0),c[q].startContainer=v[0],c[q].startOffset=0,c[q].endContainer=e.endContainer,c[q].endOffset=e.endOffset,c[q].update(),this.applyMarkup(c[q].getSelectionTree(),
e,this.getClonedMarkup4Wrapping(l),m,{setRangeObject2NewMarkup:!0}));return!0},getClonedMarkup4Wrapping:function(a){a=b(a.outerHTML).removeClass("preparedForRemoval").empty();0===a.attr("class").length&&a.removeAttr("class");return a},insertCroppedMarkups:function(a,e,c,m){var f,k,q,d,l;c?k=!0:f=!0;c=[];for(d=0;d<a.length;d++){c[d]=new this.SelectionRange;l=a[d];if(f&&!k){q=b(l).textNodes(!0);c[d].startContainer=q[0];c[d].startOffset=0;if(c[d].startContainer===e.startContainer&&c[d].startOffset===
e.startOffset)continue;0===e.startOffset?(c[d].endContainer=this.getTextNodeSibling(!1,l,e.startContainer),c[d].endOffset=c[d].endContainer.length):(c[d].endContainer=e.startContainer,c[d].endOffset=e.startOffset);c[d].update();this.applyMarkup(c[d].getSelectionTree(),e,this.getClonedMarkup4Wrapping(l),m,{setRangeObject2NextSibling:!0})}!f&&k&&(c[d].startContainer=e.endContainer,c[d].startOffset=e.endOffset,q=b(l).textNodes(!0),c[d].endContainer=q[q.length-1],c[d].endOffset=q[q.length-1].length,c[d].update(),
this.applyMarkup(c[d].getSelectionTree(),e,this.getClonedMarkup4Wrapping(l),m,{setRangeObject2PreviousSibling:!0}))}return!0},changeMarkupOnSelection:function(a){var b=this.getRangeObject();this.changeMarkup(b,a,this.getStandardTagComparator(a));v.Utils.Dom.doCleanup({merge:!0},b);b.update();b.select();this.rangeObject=b},applyMarkup:function(a,b,e,c,m){var f,k;m=m||{};this.prepareForRemoval(a,e,c);a=this.optimizeSelectionTree4Markup(a,e,c);for(f=0;f<a.length;f++)k=a[f],k.wrappable?this.wrapMarkupAroundSelectionTree(k.elements,
b,e,c,m):(g.Log.debug(this,"dive further into non-wrappable object"),this.applyMarkup(k.element.children,b,e,c,m))},getMarkupType:function(a){var e=b(a)[0].nodeName.toLowerCase();a.outerHtml&&g.Log.debug(this,"Node name detected: "+e+" for: "+a.outerHtml());if("#text"==e)return"textNode";if(this.replacingElements[e])return"sectionOrGroupingContent";if(this.tagHierarchy[e])return"textLevelSemantics";g.Log.warn(this,"unknown markup passed to this.getMarkupType(...): "+a.outerHtml())},getStandardTagComparator:function(a){var b=
this;switch(this.getMarkupType(a)){case "textNode":a=function(a,b){return!1};break;case "sectionOrGroupingContent":a=function(a,e){return b.standardSectionsAndGroupingContentComparator(a,e)};break;default:a=function(a,e){return b.standardTextLevelSemanticsComparator(a,e)}}return a},prepareForRemoval:function(a,e,c){var m,f;"undefined"!==typeof c&&"function"!==typeof c&&g.Log.error(this,"parameter tagComparator is not a function");"undefined"===typeof c&&(c=this.getStandardTagComparator(e));for(m=
0;m<a.length;m++)f=a[m],f.domobj&&("full"==f.selection||"partial"==f.selection&&e.isReplacingElement)&&1===f.domobj.nodeType&&c(f.domobj,e)&&(g.Log.debug(this,"Marking for removal: "+f.domobj.nodeName),b(f.domobj).addClass("preparedForRemoval")),"none"!=f.selection&&0<f.children.length&&this.prepareForRemoval(f.children,e,c)},wrapMarkupAroundSelectionTree:function(a,e,c,m,f){var k=[],q=-1,d="",l="",v,x,n;g.Log.debug(this,"The formatting <"+c[0].tagName+"> will be wrapped around the selection");for(v=
0;v<a.length;v++)if(x=a[v],x.domobj&&!this.canTag1WrapTag2(x.domobj.parentNode.tagName.toLowerCase(),c[0].tagName.toLowerCase()))g.Log.info(this,"Skipping the wrapping of <"+c[0].tagName.toLowerCase()+"> because this tag is not allowed inside <"+x.domobj.parentNode.tagName.toLowerCase()+">");else if(!x.domobj||3!==x.domobj.nodeType||0!==b.trim(x.domobj.nodeValue).length){if(x.domobj&&"partial"==x.selection&&!c.isReplacingElement)if(void 0!==x.startOffset&&void 0===x.endOffset)q++,d+=x.domobj.data.substr(0,
x.startOffset),x.domobj.data=x.domobj.data.substr(x.startOffset,x.domobj.data.length-x.startOffset),k[q]=x.domobj;else if(void 0!==x.endOffset&&void 0===x.startOffset)q++,l+=x.domobj.data.substr(x.endOffset,x.domobj.data.length-x.endOffset),x.domobj.data=x.domobj.data.substr(0,x.endOffset),k[q]=x.domobj;else if(void 0!==x.endOffset&&void 0!==x.startOffset){if(x.startOffset==x.endOffset){g.Log.debug(this,"skipping empty selection");continue}q++;d+=x.domobj.data.substr(0,x.startOffset);n=x.domobj.data.substr(x.startOffset,
x.endOffset-x.startOffset);l+=x.domobj.data.substr(x.endOffset,x.domobj.data.length-x.endOffset);x.domobj.data=n;k[q]=x.domobj}else g.Log.debug(this,"diving into object"),this.applyMarkup(x.children,e,c,m,f);x.domobj&&("full"==x.selection||"partial"==x.selection&&c.isReplacingElement)&&(q++,k[q]=x.domobj)}0<k.length&&(k=b(k),b.each(k,function(a,e){b.browser.msie&&3==e.nodeType&&!e.nextSibling&&!e.previousSibling&&e.parentNode&&"li"==e.parentNode.nodeName.toLowerCase()&&(e.data=b.trim(e.data))}),a=
k.wrapAll(c).parent(),a.before(d).after(l),f.setRangeObject2NewMarkup&&(d=k.textNodes(),-1!=d.index(e.startContainer)&&(e.startOffset=0),-1!=d.index(e.endContainer)&&(e.endOffset=e.endContainer.length)),f.setRangeObject2NextSibling&&(d=!0,l=a.textNodes(!0).last()[0],-1!=k.index(e.startContainer)&&(e.startContainer=this.getTextNodeSibling(d,a.parent(),l),e.startOffset=0),-1!=k.index(e.endContainer)&&(e.endContainer=this.getTextNodeSibling(d,a.parent(),l),e.endOffset-=l.length)),f.setRangeObject2PreviousSibling&&
(d=!1,l=a.textNodes(!0).first()[0],-1!=k.index(e.startContainer)&&(e.startContainer=this.getTextNodeSibling(d,a.parent(),l),e.startOffset=0),-1!=k.index(e.endContainer)&&(e.endContainer=this.getTextNodeSibling(d,a.parent(),l),e.endOffset=e.endContainer.length)))},getTextNodeSibling:function(a,e,c){e=b(e).textNodes(!0);c=e.index(c);return-1==c?!1:e[c+(a?1:-1)]||!1},optimizeSelectionTree4Markup:function(a,e,c){var m=[],f=0,k=0,q=this,d,l,v,g;"undefined"===typeof c&&(c=function(a,b){return q.standardTextLevelSemanticsComparator(b)});
for(d=0;d<a.length;d++)if(a[d].domobj&&"none"!=a[d].selection)if(e.isReplacingElement&&c(e[0],b(a[d].domobj)))void 0!==m[f]&&f++,m[f]={},m[f].wrappable=!0,m[f].elements=[],m[f].elements[k]=a[d],f++;else if(this.canMarkupBeApplied2ElementAsWhole([a[d]],e))if(void 0===m[f]&&(m[f]={},m[f].wrappable=!0,m[f].elements=[]),e.isReplacingElement){g=d;for(l=d-1;0<=l;l--)if(this.canMarkupBeApplied2ElementAsWhole([a[l]],e)&&this.isMarkupAllowedToStealSelectionTreeElement(a[l],e))g=l;else break;v=d;for(l=d+1;l<
a.length;l++)if(this.canMarkupBeApplied2ElementAsWhole([a[l]],e)&&this.isMarkupAllowedToStealSelectionTreeElement(a[l],e))v=l;else break;k=0;for(l=g;l<=v;l++)m[f].elements[k]=a[l],m[f].elements[k].selection="full",k++;k=0}else m[f].elements[k]=a[d],k++;else void 0!==m[f]&&f++,m[f]={},m[f].wrappable=!1,m[f].element=a[d],k=0,f++;return m},isMarkupAllowedToStealSelectionTreeElement:function(a,b){if(!a.domobj)return!1;var e=a.domobj.nodeName.toLowerCase(),e="#text"==e?"textNode":e,c=b[0].nodeName.toLowerCase();
return(c=this.allowedToStealElements[c])&&c[e]},canMarkupBeApplied2ElementAsWhole:function(a,b){var e,c,m;b.jquery&&(e=b[0].tagName);b.tagName&&(e=b.tagName);for(c=0;c<a.length;c++)if(m=a[c],m.domobj&&("none"!=m.selection||b.isReplacingElement)&&(!this.canTag1WrapTag2(e,m.domobj.nodeName)||0<m.children.length&&!this.canMarkupBeApplied2ElementAsWhole(m.children,b)))return!1;return!0},canTag1WrapTag2:function(a,b){a="#text"==a?"textNode":a.toLowerCase();b="#text"==b?"textNode":b.toLowerCase();var e=
this.tagHierarchy[a];return e&&this.tagHierarchy[b]?e[b]:!0},mayInsertTag:function(a){var b;if("object"==typeof this.rangeObject.unmodifiableMarkupAtStart){for(b=0;b<this.rangeObject.unmodifiableMarkupAtStart.length;++b)if(!this.canTag1WrapTag2(this.rangeObject.unmodifiableMarkupAtStart[b].nodeName,a))return!1;return!0}g.Log.warn(this,"Unable to determine whether tag "+a+" may be inserted");return!0},toString:function(){return"Aloha.Selection"},SelectionRange:v.Utils.RangeObject.extend({_constructor:function(a){this._super(a);
a&&(a.commonAncestorContainer&&(this.commonAncestorContainer=a.commonAncestorContainer),a.selectionTree&&(this.selectionTree=a.selectionTree),a.limitObject&&(this.limitObject=a.limitObject),a.markupEffectiveAtStart&&(this.markupEffectiveAtStart=a.markupEffectiveAtStart),a.unmodifiableMarkupAtStart&&(this.unmodifiableMarkupAtStart=a.unmodifiableMarkupAtStart),a.splitObject&&(this.splitObject=a.splitObject))},commonAncestorContainer:void 0,selectionTree:void 0,markupEffectiveAtStart:[],unmodifiableMarkupAtStart:[],
limitObject:void 0,splitObject:void 0,select:function(){this._super();g.Selection.updateSelection()},update:function(a){this.updatelimitObject();this.updateMarkupEffectiveAtStart();this.updateCommonAncestorContainer(a);this.selectionTree=void 0},getSelectionTree:function(){this.selectionTree||(this.selectionTree=g.Selection.getSelectionTree(this));return this.selectionTree},getSelectedSiblings:function(a){var b=this.getSelectionTree();return this.recursionGetSelectedSiblings(a,b)},recursionGetSelectedSiblings:function(a,
b){var e=!1,c=!1,m;for(m=0;m<b.length;++m)if(b[m].domobj===a)c=!0,e=[];else if(!c&&b[m].children){if(e=this.recursionGetSelectedSiblings(a,b[m].children),!1!==e)break}else if(c&&b[m].domobj&&"collapsed"!=b[m].selection&&"none"!=b[m].selection)e.push(b[m].domobj);else if(c&&"none"==b[m].selection)break;return e},updateMarkupEffectiveAtStart:function(){this.markupEffectiveAtStart=[];this.unmodifiableMarkupAtStart=[];var a=this.getStartContainerParents(),b=!1,e,c,m;for(c=0;c<a.length;c++)m=a[c],b||m===
this.limitObject?(b=!0,this.unmodifiableMarkupAtStart.push(m)):(this.markupEffectiveAtStart[c]=m,!e&&v.Utils.Dom.isSplitObject(m)&&(e=!0,this.splitObject=m));e||(this.splitObject=!1)},updatelimitObject:function(){if(g.editables&&0<g.editables.length){var a=this.getStartContainerParents(),e=g.editables,c,m,f,k;for(c=0;c<a.length;c++)for(m=a[c],f=0;f<e.length;f++)if(k=e[f].obj[0],m===k)return this.limitObject=m,!0}this.limitObject=b("body");return!0},toString:function(a){return a?"Aloha.Selection.SelectionRange {start ["+
this.startContainer.nodeValue+"] offset "+this.startOffset+", end ["+this.endContainer.nodeValue+"] offset "+this.endOffset+"}":"Aloha.Selection.SelectionRange"}})});var A=n.extend({_constructor:function(a){this._nativeSelection=a;this.ranges=[];this.preventChange=!1},anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0,isCollapsed:!1,rangeCount:0,collapse:function(a,b){this._nativeSelection.collapse(a,b)},collapseToStart:function(){throw"NOT_IMPLEMENTED";},extend:function(a,b){},modify:function(a,
b,e){},collapseToEnd:function(){this._nativeSelection.collapseToEnd()},selectAllChildren:function(a){throw"NOT_IMPLEMENTED";},deleteFromDocument:function(){throw"NOT_IMPLEMENTED";},getRangeAt:function(a){a=this._nativeSelection.getRangeAt(a);m(a);return a},addRange:function(a){this._nativeSelection.addRange(a);var b=this._nativeSelection._ranges;m(a);b[0]=a;g.Selection.updateSelection()},removeRange:function(a){this._nativeSelection.removeRange()},removeAllRanges:function(){this._nativeSelection.removeAllRanges()},
refresh:function(a){},toString:function(){return"Aloha.Selection"},getRangeCount:function(){return this._nativeSelection.rangeCount}});g.getSelection=function(a){a=a!==document||a!==window?window:a;return new A(window.rangy.getSelection(a))};g.createRange=function(a){return window.rangy.createRange(a)};n=new l;return g.Selection=n});define("aloha/block-jump",["aloha/core","jquery","aloha/console"],function(g,b,n){function l(c,f){c.deleteData(0,c.length);""!==f&&(c.nextSibling&&3===c.nextSibling.nodeType?
c.nextSibling.insertData(0,f):c.previousSibling&&3===c.previousSibling.nodeType?c.previousSibling.insertData(c.previousSibling.length,f):c.insertData(0,f));setTimeout(function(){0===c.length&&b(c).remove()},0)}function d(){if(c){var b=c.nodeValue.replace(/\u200b/,"");b===c.nodeValue&&n.warn("Expected to remove the zero width text node fix, but couldn't find it");l(c,b);c=null}}var c=null;return{removeZeroWidthTextNodeFix:d,insertZeroWidthTextNodeFix:function(k,f){d();c=document.createTextNode("\u200b");
f?b(k).after(c):b(k).before(c);g.bind("aloha-selection-changed",function(b){d();g.unbind(b)});return c}}});define("aloha/markup","aloha/core util/class util/html jquery aloha/ecma5shims aloha/console aloha/block-jump".split(" "),function(g,b,n,l,d,c,k){function f(a){return"false"===l(a).attr("contenteditable")}function q(a){return a&&3===a.nodeType}function a(a){return a?q(a)?a.length:a.childNodes.length:0}function e(a){return a?a.nextSibling?q(a.nextSibling)&&!(0<a.nextSibling.data.replace(/\s+/g,
"").length)||"BR"===a.nextSibling.nodeName&&a.nextSibling===a.parentNode.lastChild||""===a.nextSibling.innerHTML&&!f(a.nextSibling)?e(a.nextSibling):a.nextSibling:a.parentNode?e(a.parentNode):null:null}function m(a){return a?a.previousSibling?!q(a.previousSibling)||0<a.previousSibling.data.replace(/\s+/g,"").length?""!==a.previousSibling.innerHTML||f(a.previousSibling)?a.previousSibling:m(a.previouSibling):m(a.previousSibling):a.parentNode?m(a.parentNode):null:null}function v(a,b){return A?d.compareDocumentPosition(a,
b)&16:0<l(a).find(b).length}function x(a){var b;if(b=window.$_alohaPlaceholder){b=a.startContainer;a=a.endContainer;var e=window.$_alohaPlaceholder;b=!(e.is(b)||e.is(a)||v(e[0],b)||v(e[0],a))}b&&(0===window.$_alohaPlaceholder.html().replace(/^(&nbsp;)*$/,"").length&&window.$_alohaPlaceholder.remove(),window.$_alohaPlaceholder=null)}var z=window.GENTICS,A=!!(l.browser.msie&&9>parseInt(l.browser.version,10));g.Markup=b.extend({keyHandlers:{},addKeyHandler:function(a,b){this.keyHandlers[a]||(this.keyHandlers[a]=
[]);this.keyHandlers[a].push(b)},removeKeyHandler:function(a){this.keyHandlers[a]&&(this.keyHandlers[a]=null)},insertBreak:function(){var a=g.Selection.rangeObject,b,e,c;a.isCollapsed()||this.removeSelectedMarkup();c=l("<br/>");z.Utils.Dom.insertIntoDOM(c,a,g.activeEditable.obj);if(e=z.Utils.Dom.searchAdjacentTextNode(c.parent().get(0),z.Utils.Dom.getIndexInParent(c.get(0))+1,!1))b=e.data.search(/\S/),0<b&&(e.data=e.data.substring(b));a.startContainer=a.endContainer=c.get(0).parentNode;a.startOffset=
a.endOffset=z.Utils.Dom.getIndexInParent(c.get(0))+1;a.correctRange();a.clearCaches();a.select()},preProcessKeyStrokes:function(a){if("keydown"!==a.type)return!1;var b,e;if(this.keyHandlers[a.keyCode])for(b=this.keyHandlers[a.keyCode],e=0;e<b.length;++e)if(!b[e](a))return!1;return 37===a.keyCode||39===a.keyCode?g.getSelection().getRangeCount()&&(b=g.getSelection().getRangeAt(0),this.processCursor(b,a.keyCode))?(x(g.Selection.rangeObject),!0):!1:8===a.keyCode?(a.preventDefault(),g.execCommand("delete",
!1),!1):46===a.keyCode?(g.execCommand("forwarddelete",!1),!1):13===a.keyCode?(!a.shiftKey&&n.allowNestedParagraph(g.activeEditable)?g.execCommand("insertparagraph",!1):g.execCommand("insertlinebreak",!1),!1):!0},processCursor:function(b,c){if(!b.collapsed)return!0;k.removeZeroWidthTextNodeFix();var d=b.startContainer,v=g.getSelection();if(!d)return!0;var n,p;if(l.browser.msie&&7>=parseInt(l.browser.version,10)&&q(d))if(37==c){for(p=b.startOffset;0<p&&"\u200b"===d.data.charAt(p-1);)p--;p!=b.startOffset&&
(b.setStart(b.startContainer,p),b.setEnd(b.startContainer,p),v=g.getSelection(),v.removeAllRanges(),v.addRange(b))}else if(39==c){for(p=b.startOffset;p<d.data.length&&"\u200b"===d.data.charAt(p);)p++;p!=b.startOffset&&(b.setStart(b.startContainer,p),b.setEnd(b.startContainer,p),v.removeAllRanges(),v.addRange(b))}if(A&&!l(d).contentEditable()&&(p=l(d).parents("[contenteditable=false]"),0<p.length))if(p.parent().hasClass("aloha-editable"))n=p[0];else return!0;var s;if(!n){s=37===c||38===c;p=b.startOffset;
if(q(d))if(s){if(1!==p&&!(0===p||p<=d.data.length-d.data.replace(/^\s+/,"").length))return!0}else{n=d;v=a(n);if(v===p)n=!0;else{var r=q(n);n=r&&n.data.replace(/\s+$/,"").length===p?!0:1!==v||r?!1:"BR"===n.childNodes[0].nodeName}if(!n)return!0}else d=d.childNodes[p===a(d)?p-1:p];n=s?m(d):e(d)}return f(n)?(d=n,n=new z.Utils.RangeObject,p=s?m(d):e(d),!p||f(p)?(p=l("<div>&nbsp;</div>"),s?l(d).before(p):l(d).after(p),n.startContainer=n.endContainer=p[0],n.startOffset=n.endOffset=0,x(n),window.$_alohaPlaceholder=
p):(3===b.startContainer.nodeType&&b.startContainer===b.endContainer&&""!==b.startContainer.nodeValue&&(s?1===b.startOffset:b.endOffset+1===b.endContainer.length)||1===b.startContainer.nodeType&&(!b.startOffset||b.startContainer.childNodes[b.startOffset]&&1===b.startContainer.childNodes[b.startOffset].nodeType)?(p=k.insertZeroWidthTextNodeFix(d,s),n.startContainer=n.endContainer=p,n.startOffset=n.endOffset=s?1:0):(n.startContainer=n.endContainer=p,n.startOffset=n.endOffset=s?a(p):0,s||k.insertZeroWidthTextNodeFix(d,
!0)),x(n)),n.select(),g.trigger("aloha-block-selected",d),g.Selection.preventSelectionChanged(),!1):!0},processShiftEnter:function(a){this.insertHTMLBreak(a.getSelectionTree(),a)},processEnter:function(a){a.splitObject?this.splitRangeObject(a):this.insertHTMLBreak(a.getSelectionTree(),a)},insertHTMLCode:function(a){var b=g.Selection.rangeObject;this.insertHTMLBreak(b.getSelectionTree(),b,l(a))},insertHTMLBreak:function(a,b,e){var c,m,f,k,q;e=e||l("<br/>");c=0;for(m=a.length;c<m;++c)if(f=a[c],k=f.domobj?
l(f.domobj):void 0,"none"!==f.selection)if("collapsed"==f.selection)0<c?(f=l(a[c-1].domobj),f.after(e)):(f=l(a[1].domobj),f.before(e)),b.startContainer=b.endContainer=e[0].parentNode,b.startOffset=b.endOffset=z.Utils.Dom.getIndexInParent(e[0])+1,b.correctRange();else if(f.domobj&&3===f.domobj.nodeType){f.domobj.nextSibling&&1==f.domobj.nextSibling.nodeType&&g.Selection.replacingElements[f.domobj.nextSibling.nodeName.toLowerCase()]&&k.after("<br/>");if(this.needEndingBreak()){for(q=f.domobj;q;)if(q.nextSibling)q=
!1;else{q=q.parentNode;if(z.Utils.Dom.isBlockLevelElement(q)||z.Utils.Dom.isListElement(q))break;q===b.limitObject&&(q=!1)}q&&l(q).append('<br class="aloha-cleanme" />')}k.between(e,f.startOffset);k=0;for(f=e[0];f;)f=f.previousSibling,++k;b.startContainer=e[0].parentNode;b.endContainer=e[0].parentNode;b.startOffset=k;b.endOffset=k;b.correctRange()}else f.domobj&&1===f.domobj.nodeType&&(0===k.parent().find("br.aloha-ephemera").length&&(l(b.limitObject).find("br.aloha-ephemera").remove(),l(b.commonAncestorContainer).append(this.getFillUpElement(b.splitObject))),
k.after(e),b.startContainer=b.commonAncestorContainer,b.endContainer=b.startContainer,b.startOffset=c+2,b.endOffset=c+2,b.update());b.select()},needEndingBreak:function(){return!l.browser.msie},getSelectedText:function(){var a=g.Selection.rangeObject;return a.isCollapsed()?!1:this.getFromSelectionTree(a.getSelectionTree(),!0)},getFromSelectionTree:function(a,b){var e="",c,m,f,k;c=0;for(m=a.length;c<m;c++)f=a[c],"partial"==f.selection?3===f.domobj.nodeType?e+=f.domobj.data.substring(f.startOffset,
f.endOffset):1===f.domobj.nodeType&&f.children&&(b?e+=this.getFromSelectionTree(f.children,b):(k=l(f.domobj.outerHTML).empty(),k.html(this.getFromSelectionTree(f.children,b)),e+=k.outerHTML())):"full"==f.selection&&(3===f.domobj.nodeType?e+=l(f.domobj).text():1===f.domobj.nodeType&&f.children&&(e+=b?l(f.domobj).text():l(f.domobj).outerHTML()));return e},getSelectedMarkup:function(){var a=g.Selection.rangeObject;return a.isCollapsed()?null:this.getFromSelectionTree(a.getSelectionTree(),!1)},removeSelectedMarkup:function(){var a=
g.Selection.rangeObject,b;a.isCollapsed()||(b=new g.Selection.SelectionRange,this.removeFromSelectionTree(a.getSelectionTree(),b),b.update(),z.Utils.Dom.doCleanup({merge:!0,removeempty:!0},g.Selection.rangeObject),g.Selection.rangeObject=b,b.correctRange(),b.update(),b.select(),g.Selection.updateSelection())},removeFromSelectionTree:function(a,b){var e,c,m,f,k;m=0;for(k=a.length;m<k;m++)f=a[m],"partial"==f.selection?3===f.domobj.nodeType?(c="",0<f.startOffset&&(c+=f.domobj.data.substring(0,f.startOffset)),
f.endOffset<f.domobj.data.length&&(c+=f.domobj.data.substring(f.endOffset,f.domobj.data.length)),f.domobj.data=c,b.startContainer||(b.startContainer=b.endContainer=f.domobj,b.startOffset=b.endOffset=f.startOffset)):1===f.domobj.nodeType&&f.children&&(this.removeFromSelectionTree(f.children,b),e?e.nodeName==f.domobj.nodeName&&(l(e).append(l(f.domobj).contents()),l(f.domobj).remove()):e=f.domobj):"full"==f.selection&&(b.startContainer||((c=z.Utils.Dom.searchAdjacentTextNode(f.domobj.parentNode,z.Utils.Dom.getIndexInParent(f.domobj)+
1,!1,{blocklevel:!1}))?(b.startContainer=b.endContainer=c,b.startOffset=b.endOffset=0):(b.startContainer=b.endContainer=f.domobj.parentNode,b.startOffset=b.endOffset=z.Utils.Dom.getIndexInParent(f.domobj)+1)),l(f.domobj).remove())},splitRangeObject:function(a,b){l(a.splitObject);var e,c;a.update(a.splitObject);e=a.getSelectionTree();c=this.getSplitFollowUpContainer(a);this.splitRangeObjectHelper(e,a,c);c.hasClass("preparedForRemoval")&&c.removeClass("preparedForRemoval");e=this.getInsertAfterObject(a,
c);l(c).insertAfter(e);"li"!==a.splitObject.nodeName.toLowerCase()||g.Selection.standardTextLevelSemanticsComparator(a.splitObject,c)||l(a.splitObject).remove();a.startContainer=null;e=c.contents();0<e.length&&1==e.get(0).nodeType&&"br"===e.get(0).nodeName.toLowerCase()&&(a.startContainer=c.get(0));a.startContainer||(a.startContainer=c.textNodes(!0,!0).first().get(0));a.startContainer||(a.startContainer=c.textNodes(!1).first().parent().get(0));a.startContainer?(a.endContainer=a.startContainer,a.startOffset=
0,a.endOffset=0):(a.startContainer=a.endContainer=c.parent().get(0),a.startOffset=a.endOffset=z.Utils.Dom.getIndexInParent(c.get(0)));a.update();a.select()},getInsertAfterObject:function(a,b){var e,c,m;for(c=0;c<a.markupEffectiveAtStart.length;c++)if(m=a.markupEffectiveAtStart[c],m===a.splitObject&&(e=!0),e&&g.Selection.canTag1WrapTag2(l(m).parent()[0].nodeName,b[0].nodeName))return m;return!1},getFillUpElement:function(a){return l.browser.msie?!1:l('<br class="aloha-cleanme"/>')},removeElementContentWhitespaceObj:function(a){var b=
0,e=[],c,m;for(c=0;c<a.length;++c)m=a[c],m.isElementContentWhitespace&&(e[e.length]=c);for(c=0;c<e.length;++c)m=e[c],a.splice(m-b,1),++b},splitRangeObjectHelper:function(a,b,e,c){e||g.Log.warn(this,"no followUpContainer, no inBetweenMarkup, nothing to do...");var m=this.getFillUpElement(b.splitObject),f=l(b.splitObject),k=!1,q,d,v,x,n;if(0<a.length)for(v=e.contents(),v.length!==a.length&&this.removeElementContentWhitespaceObj(v),d=0,n=a.length;d<n;++d)q=a[d],"none"===q.selection&&!1===k||q.domobj&&
3===q.domobj.nodeType&&q===a[a.length-1]&&q.startOffset===q.domobj.data.length?1<e.textNodes().length||1===q.domobj.nodeType&&0===q.children.length?v.eq(d).remove():z.Utils.Dom.isSplitObject(e[0])?m?e.html(m):e.empty():(e.empty(),e.addClass("preparedForRemoval")):"none"!==q.selection?(q.domobj&&3===q.domobj.nodeType&&void 0!==q.startOffset&&(k=q.domobj.data,0<q.startOffset?q.domobj.data=k.substr(0,q.startOffset):1<a.length?l(q.domobj).remove():(x=l(q.domobj).parent(),z.Utils.Dom.isSplitObject(x[0])?
m?x.html(m):x.empty():x.remove()),0<k.length-q.startOffset?v[d].data=k.substr(q.startOffset,k.length):1<v.length?v.eq(d).remove():z.Utils.Dom.isBlockLevelElement(e[0])?m?e.html(m):e.empty():(e.empty(),e.addClass("preparedForRemoval"))),k=!0,0<q.children.length&&this.splitRangeObjectHelper(q.children,b,v.eq(d),c)):"none"===q.selection&&!0===k&&l(q.domobj).remove();else g.Log.error(this,"can not split splitObject due to an empty selection tree");f.find("br.aloha-ephemera:gt(0)").remove();e.find("br.aloha-ephemera:gt(0)").remove();
f.find(".preparedForRemoval").remove();e.find(".preparedForRemoval").remove();0===f.contents().length&&z.Utils.Dom.isSplitObject(f[0])&&m&&f.html(m);0===e.contents().length&&z.Utils.Dom.isSplitObject(e[0])&&m&&e.html(m)},getSplitFollowUpContainer:function(a){var b;switch(a.splitObject.nodeName.toLowerCase()){case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":if((b=l(a.splitObject).textNodes(":not(.aloha-cleanme)").last()[0])&&a.startContainer===b&&a.startOffset===b.length)return b=l("<p></p>"),
a=l(a.splitObject.outerHTML).contents(),b.append(a),b;break;case "li":if("br"===a.startContainer.nodeName.toLowerCase()&&l(a.startContainer).hasClass("aloha-ephemera"))return b=l("<p></p>"),a=l(a.splitObject.outerHTML).contents(),b.append(a),b;if(!a.splitObject.nextSibling&&0===l.trim(l(a.splitObject).text()).length)return b=l("<p></p>")}return l(a.splitObject.outerHTML)},transformDomObject:function(a,b,e){var c=l(a);b=l("<"+b+">");var m,f=c[0].cloneNode(!1).attributes;if(f)for(m=0;m<f.length;++m)("undefined"===
typeof f[m].specified||f[m].specified)&&b.attr(f[m].nodeName,f[m].nodeValue);c[0].style&&c[0].style.cssText&&(b[0].style.cssText=c[0].style.cssText);c.contents().appendTo(b);c.replaceWith(b);e&&(e.startContainer==a&&(e.startContainer=b.get(0)),e.endContainer==a&&(e.endContainer=b.get(0)));return b},toString:function(){return"Aloha.Markup"}});g.Markup=new g.Markup;return g.Markup});define("aloha/observable",["jquery"],function(g){return{_eventHandlers:null,bind:function(b,g,l){this._eventHandlers=
this._eventHandlers||{};this._eventHandlers[b]||(this._eventHandlers[b]=[]);this._eventHandlers[b].push({handler:g,scope:l||window})},unbind:function(b,n){this._eventHandlers=this._eventHandlers||{};this._eventHandlers[b]&&(this._eventHandlers[b]=n?g.grep(this._eventHandlers[b],function(b){return b.handler===n?!1:!0}):[])},trigger:function(b){this._eventHandlers=this._eventHandlers||{};if(this._eventHandlers[b]){var n=[];g.each(arguments,function(b,d){0<b&&n.push(d)});g.each(this._eventHandlers[b],
function(b,d){d.handler.apply(d.scope,n)})}},unbindAll:function(){this._eventHandlers=null}}});define("aloha/registry",["jquery","aloha/observable","util/class"],function(g,b,n){return n.extend(b,{_entries:null,_ids:null,_constructor:function(){this._entries={};this._ids=[]},register:function(b,d){this._entries[b]=d;this._ids.push(b);this.trigger("register",d,b)},unregister:function(b){var d,c=this._entries[b];delete this._entries[b];for(d in this._ids)if(this._ids.hasOwnProperty(d)&&this._ids[d]===
b){this._ids.splice(d,1);break}this.trigger("unregister",c,b)},get:function(b){return this._entries[b]},has:function(b){return this._entries[b]?!0:!1},getEntries:function(){return g.extend({},this._entries)},getIds:function(){return g.extend([],this._ids)}})});define("aloha/contenthandlermanager",["aloha/core","aloha/registry","util/class"],function(g,b,n){return new (b.extend({createHandler:function(b){if("function"!==typeof b.handleContent)throw"ContentHandler has no function handleContent().";
return new (n.extend({handleContent:function(b){}},b))},handleContent:function(b,d,c){var k=d?d.contenthandler:this.getIds();if(!k)return b;var f,q;for(f=0;f<k.length&&((q=this.get(k[f]))&&(b=q.handleContent(b,d,c||g.activeEditable)),null!==b);f++);return b}}))});define("util/trees",["jquery"],function(g){function b(a,b,e){var c=g.type(a),f,k,q;if("array"===c){c=e?a:[];q=f=0;for(k=a.length;q<k;q++)e=b(a[q]),e.length&&(c[f++]=e[0]);f!==c.length&&(c=c.slice(0,f))}else if("object"===c)for(f in c=e?a:
{},a)a.hasOwnProperty(f)&&(e=b(a[f]),e.length?c[f]=e[0]:delete c[f]);else c=a;return c}function n(a,e){return b(a,e,!0)}function l(a,b){var e,c,f;if(1===a.nodeType)for(c=a.firstChild;c;)e=b(c),f=c.nextSibling,e.length?e[0]!==c&&a.replaceChild(e[0],c):a.removeChild(c),c=f;return a}function d(a,b,e,c){return[e(b(c),a)]}function c(a,b,e,c){return[b(e(c,a))]}function k(a,b,e,c){return b(c)?[]:[e(c,a)]}function f(a,b,e,c){a=e(c,a);return b(a)?[]:[a]}function q(a,b,e,c){function f(c){return a(f,b,e,c)}
return f(c)[0]}function a(a){a=g.type(a);return"object"!==a&&"array"!==a}function e(e,c,f){function k(b){return a(b)?[c(b)]:[q(b,k)]}var q=f?n:b;return k(e)[0]}return{prewalk:function(a,e,c){return q(d,e,c?n:b,a)},postwalk:function(a,e,f){return q(c,e,f?n:b,a)},preprune:function(a,e,c){return q(k,e,c?n:b,a)},postprune:function(a,e,c){return q(f,e,c?n:b,a)},prewalkDom:function(a,b,e){return q(d,b,l,e?a:a.cloneNode(!0))},postwalkDom:function(a,b,e){return q(c,b,l,e?a:a.cloneNode(!0))},prepruneDom:function(a,
b,e){return q(k,b,l,e?a:a.cloneNode(!0))},postpruneDom:function(a,b,e){return q(f,b,l,e?a:a.cloneNode(!0))},isLeaf:a,leaves:e,clone:function(a){function e(a){return[b(a,e)]}return e(a)[0]},flatten:function(a){var b=[];e(a,function(a){b.push(a);return a},!0);return b},walk:b,walkInplace:n,walkDomInplace:l}});define("util/browser",["jquery"],function(g){return{ie7:g.browser.msie&&8>parseInt(g.browser.version,10)}});define("util/dom2","aloha/core jquery util/functions util/maps util/arrays util/strings util/browser util/dom util/range".split(" "),
function(g,b,n,l,d,c,k,f,q){function a(a,b,e){for(;b;){var c=b.nextSibling;a.insertBefore(b,e);b=c}}function e(a){var b=a.outerHTML;if("undefined"!==typeof b)return b;try{return R?R.serializeToString(a):a.xml}catch(e){return a.xml}}function m(a){var b=[];a=e(a.cloneNode(!1));for(var c;null!=(c=V.exec(a));)b.push(c[1]);return b}function v(a,b){var e={},m,f,k,q,d,l,v;l=0;for(d=a.length;l<d;l++)if(k=a[l],k.className)for(f=c.words(k.className),v=0;v<f.length;v++)q=f[v],b[q]&&((m=e[q])?m.push(k):e[q]=
[k]);return e}function x(a){for(var b=0;a.previousSibling;)b++,a=a.previousSibling;return b}function z(a){var b=0;for(a=a.firstChild;a;)b+=1,a=a.nextSibling;return b}function A(a,b){return 1===a.nodeType&&b>=z(a)||3===a.nodeType&&b===a.length&&!a.nextSibling}function y(a,b){1===a.nodeType&&b<z(a)?a=a.childNodes[b]:3===a.nodeType&&b===a.length&&(a=a.nextSibling||a.parentNode);return a}function C(a,b,e){e?b.appendChild(a):b.parentNode.insertBefore(a,b)}function p(a,b){this.node=a;this.atEnd=b}function D(a,
b){return new p(a,b)}function s(a,b){return D(y(a,b),A(a,b))}function r(a,b){for(var e=[],c=a.parentNode;c&&!b(c);)e.push(c),c=c.parentNode;return e}function t(a,b){var e=r(a,b),c=e.length?e[e.length-1]:a;c.parentNode&&e.push(c.parentNode);return e}function M(a,b){if(b(a))return[];var e=r(a,b);e.unshift(a);return e}function E(a,b){if(b(a))return[a];var e=t(a,b);e.unshift(a);return e}function K(a,b){var e=a.parentNode,c=a.nodeValue;if(0===b||b>=c.length)return a;var m=document.createTextNode(c.substring(0,
b)),c=document.createTextNode(c.substring(b,c.length));e.insertBefore(m,a);e.insertBefore(c,a);e.removeChild(a);return m}function G(a,b,e,c,m,f){b===m&&(m=f.length,0===e?(b=f.parentNode,e=x(f)):e<m?b=f:e===m?(b=f.parentNode,e=x(f)+1):(b=f.nextSibling,e-=m),a[c].call(a,b,e))}function u(a,b,e){if(3===a.nodeType){var c=e.startContainer,m=e.startOffset,f=e.endContainer,k=e.endOffset;b=K(a,b);G(e,c,m,"setStart",a,b);G(e,f,k,"setEnd",a,b)}}function S(a,b,e,c){for(;a&&!e(a,c);){var m=a.nextSibling;b(a,c);
a=m}}function Q(a,b,e){S(a,b,n.returnFalse,e)}function W(a,b,e){1===a.nodeType&&Q(a.firstChild,function(a){W(a,b,e)});b(a,e)}function P(a){a&&(this.startContainer=a.startContainer,this.startOffset=a.startOffset,this.endContainer=a.endContainer,this.endOffset=a.endOffset,this.commonAncestorContainer=a.commonAncestorContainer,this.collapsed=a.collapsed)}function aa(a,b){b.atEnd?a.setStart(b.node,z(b.node)):a.setStart(b.node.parentNode,x(b.node))}function ca(a,b){b.atEnd?a.setEnd(b.node,z(b.node)):a.setEnd(b.node.parentNode,
x(b.node))}function Y(a,b){a.setStart(b.startContainer,b.startOffset);a.setEnd(b.endContainer,b.endOffset)}function U(a,b,e){if(!a.collapsed){for(var c=s(a.startContainer,a.startOffset),m=s(a.endContainer,a.endOffset),f=!1;!c.equals(m)&&b(c)&&c.next();)f=!0;e=e||b;b=!1;for(3===a.endContainer.nodeType&&0<a.endOffset&&a.endOffset<a.endContainer.length&&m.next()&&e(m)&&m.prev();!m.equals(c)&&e(m)&&m.prev();)b=!0;f&&aa(a,c);b&&ca(a,m)}}var V=/\s([^\/<>\s=]+)(?:=(?:"[^"]*"|'[^']*'|[^>\/\s]+))?/g,R=window.XMLSerializer&&
new window.XMLSerializer;p.prototype.next=function(){var a=this.node,b;if(this.atEnd||1!==a.nodeType){if(b=a.nextSibling)this.atEnd=!1;else{b=a.parentNode;if(!b)return!1;this.atEnd=!0}this.node=b}else(b=a.firstChild)?this.node=b:this.atEnd=!0;return!0};p.prototype.prev=function(){var a=this.node,b;if(this.atEnd)(b=a.lastChild)?this.node=b:this.atEnd=!1;else{if(b=a.previousSibling)1===a.nodeType&&(this.atEnd=!0);else if(b=a.parentNode,!b)return!1;this.node=b}return!0};p.prototype.equals=function(a){return a.node===
this.node&&a.atEnd===this.atEnd};p.prototype.clone=function(a){return a(a.node,a.atEnd)};p.prototype.insert=function(a){return C(a,this.node,this.atEnd)};P.prototype.update=function(){if(this.startContainer&&this.endContainer){this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset;var a=M(this.startContainer,n.returnFalse),b=M(this.endContainer,n.returnFalse);this.commonAncestorContainer=d.intersect(a,b)[0]}};P.prototype.setStart=function(a,b){this.startContainer=
a;this.startOffset=b;this.update()};P.prototype.setEnd=function(a,b){this.endContainer=a;this.endOffset=b;this.update()};return{moveNextAll:a,attrNames:m,attrs:function(a){var e=[],c=m(a),f,k;f=0;for(k=c.length;f<k;f++){var q=c[f],d=b.attr(a,q),d=null==d?"":d.toString();e.push([q,d])}return e},indexByClass:function(a,e){var c;c=k.ie7?a.getElementsByTagName("*"):b(a).find("."+l.keys(e).join(",."));return v(c,e)},indexByName:function(a,e){var c,m={},f;c=0;for(f=e.length;c<f;c++){var k=e[c];m[k]=b.makeArray(a.getElementsByTagName(k))}return m},
indexByClassHaveList:v,outerHtml:e,removeShallow:function(b){var e=b.parentNode;a(e,b.firstChild,b);e.removeChild(b)},wrap:function(a,b){a.parentNode.replaceChild(b,a);b.appendChild(a)},insert:C,cursor:D,cursorFromBoundaryPoint:s,nodeAtOffset:y,isAtEnd:A,parentsUntil:r,parentsUntilIncl:t,childAndParentsUntil:M,childAndParentsUntilIncl:E,childAndParentsUntilNode:function(a,b){return M(a,function(a){return a===b})},childAndParentsUntilInclNode:function(a,b){return E(a,function(a){return a===b})},next:function(a,
b,e){for(;a&&!b(a,e);)a=a.nextSibling;return a},parent:function(a,b,e){for(;a&&!b(a,e);)a=a.parentNode;return a},isTextNode:function(a){return 3===a.nodeType},nodeIndex:x,splitTextNode:K,splitTextContainers:function(a){u(a.startContainer,a.startOffset,a);u(a.endContainer,a.endOffset,a)},walk:Q,walkRec:W,walkUntil:S,walkUntilNode:function(a,b,e,c){S(a,b,function(a){return a===e},c)},stableRange:function(a){return new P(a)},trimRange:U,trimRangeClosingOpening:function(a,b,e){e=e||b;U(a,function(a){return a.atEnd||
b(a.node)},function(a){a=a.atEnd?a.node.lastChild:a.node.previousSibling;return!a||e(a)})},setRangeFromRef:Y,setRangeStartFromCursor:aa,setRangeEndFromCursor:ca,splitTextNodeAdjustRange:u,insertSelectText:function(a,b){if(a.length){u(b.startContainer,b.startOffset,b);var e=y(b.startContainer,b.startOffset),c=A(b.startContainer,b.startOffset);if(c||3!==e.nodeType){var m;(m=c?e.lastChild:e.previousSibling)&&3===m.nodeType?(m.insertData(m.length,a),b.setStart(m,m.length-a.length)):(m=document.createTextNode(a),
C(m,e,c),b.setStart(m,0));b.setEnd(m,m.length)}else e.insertData(0,a),b.setStart(e,0),b.setEnd(e,a.length)}},areRangesEq:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},collapseToEnd:function(a){a.setStart(a.endContainer,a.endOffset)},extendToWord:function(a){var b=new q(a);f.extendToWord(b);Y(a,b)},rangeFromRangeObject:function(a){var b=g.createRange();b.setStart(a.startContainer,a.startOffset);b.setEnd(a.endContainer,
a.endOffset);return b},cloneShallow:function(a){return a.cloneNode(!1)},setStyle:function(a,e,c){b(a).css(e,null==c?"":c)},getStyle:function(a,b){b=c.dashesToCamelCase(b);return 1===a.nodeType?a.style[b]:null},getComputedStyle:function(a,b){if(a.currentStyle)return a.currentStyle[b];var e=a.ownerDocument;return e.defaultView&&e.defaultView.getComputedStyle&&(e=e.defaultView.getComputedStyle(a,null))?e[b]||e.getPropertyValue(b):null}}});define("util/misc",[],function(){return{anyRx:function(g,b){var n,
l;n=0;for(l=g.length;n<l;n++)if(g[n].test(b))return!0;return!1}}});define("aloha/ephemera","jquery aloha/core aloha/console util/strings util/trees util/arrays util/maps util/dom2 util/functions util/misc util/browser PubSub".split(" "),function(g,b,n,l,d,c,k,f,q,a,e,m){function v(a){a=g(a);var b=a.attr("data-aloha-ephemera-attr"),c;e.ie7||a.removeAttr("data-aloha-ephemera-attr");if("string"===typeof b)for(c=l.words(b),b=0;b<c.length;b++)a.removeAttr(c[b])}function x(b,e,m,f){m=m[e];return!m||!0!==
m&&-1===c.indexOf(m,b.nodeName)?a.anyRx(f,e):!0}function z(a,b){var e=null,c=f.attrNames(a),m,k,q;k=0;for(q=c.length;k<q;k++)m=c[k],x(a,m,b.attrMap,b.attrRxs)&&(e=e||g(a),e.removeAttr(m))}function A(a,b){var e=a.className;if(e&&-1!==e.indexOf(C)){e=l.words(e);if(-1!==c.indexOf(e,"aloha-cleanme")||-1!==c.indexOf(e,"aloha-ephemera"))return g.removeData(a),!1;if(-1!==c.indexOf(e,"aloha-ephemera-wrapper")||-1!==c.indexOf(e,"aloha-ephemera-filler"))return f.moveNextAll(a.parentNode,a.firstChild,a.nextSibling),
g.removeData(a),!1;-1!==c.indexOf(e,"aloha-ephemera-attr")&&v(a);var m=c.filter(e,function(a){return!b.classMap[a]});m.length!==e.length&&(0===m.length?g(a).removeAttr("class"):a.className=m.join(" "))}z(a,b);return!0}var y={classMap:{"aloha-ephemera-wrapper":!0,"aloha-ephemera-filler":!0,"aloha-ephemera-attr":!0,"aloha-ephemera":!0,"aloha-cleanme":!0},attrMap:{hidefocus:!0,hideFocus:!0,tabindex:!0,tabIndex:!0,contenteditable:["TABLE"],contentEditable:["TABLE"]},attrRxs:[/^(?:nodeIndex|sizcache|sizset|jquery)[\w\d]*$/i],
pruneFns:[]},C="aloha-";return{ephemera:function(a){a&&(y=a);m.pub("aloha.ephemera",{ephemera:y});return y},classes:function(){var a=Array.prototype.slice.call(arguments);k.fillKeys(y.classMap,a,!0);var b=a,e,c;e=0;for(c=b.length;e<c;e++)-1===b[e].indexOf(C)&&(n.warn('Class "'+b[e]+'" was set to be ephemeral,which hurts peformance. Add the common substring "'+C+'" to the class to fix this problem.'),C="");m.pub("aloha.ephemera.classes",{ephemera:y,newClasses:a})},attributes:function(){var a=Array.prototype.slice.call(arguments);
k.fillKeys(y.attrMap,a,!0);m.pub("aloha.ephemera.attributes",{ephemera:y,newAttributes:a})},markElement:function(a){g(a).addClass("aloha-ephemera")},markAttr:function(a,b){a=g(a);var e=a.attr("data-aloha-ephemera-attr");null==e||""===e?e=b:-1===c.indexOf(l.words(e),b)&&(e+=" "+b);a.attr("data-aloha-ephemera-attr",e);a.addClass("aloha-ephemera-attr")},markWrapper:function(a){g(a).addClass("aloha-ephemera-wrapper")},markFiller:function(a){g(a).addClass("aloha-ephemera-filler")},prune:function(a,b){function e(a){var m;
a:{m=b;var f=e;if(1===a.nodeType){if(!A(a,m)){m=[];break a}a=d.walkDomInplace(a,f)}m=(a=c.reduce(m.pruneFns,a,c.applyNotNull))?[a]:[]}return m}b=b||y;return e(a)[0]},isAttrEphemeral:x}});define("aloha/copypaste",["jquery","aloha/core"],function(g,b){function n(l){var d=b.createRange(),c=b.getSelection();d.setStart(l.startContainer,l.startOffset);d.setEnd(l.endContainer,l.endOffset);c.removeAllRanges();c.addRange(d)}return{getEditableAt:function(l){if(!l||!l.commonAncestorContainer)return null;l=g(l.commonAncestorContainer);
return l.length?b.getEditableHost(l):null},getRange:function(){var l=b.getSelection();return l.getRangeCount()?l.getRangeAt(0):null},selectAllOf:function(b){n({startContainer:b,endContainer:b,startOffset:0,endOffset:b.childNodes?b.childNodes.length:b.length});g(b).focus()},setSelectionAt:n}});define("aloha/command",["aloha/core","aloha/registry","aloha/engine","util/dom","aloha/contenthandlermanager"],function(g,b,n,l,d){var c={execCommand:function(b,c,q,a){var e={commandId:b,preventDefault:!1};g.trigger("aloha-command-will-execute",
e);if(!0!==e.preventDefault){if(!a){if(!g.getSelection().getRangeCount())return;a=g.getSelection().getRangeAt(0)}"inserthtml"===b.toLowerCase()&&(q=d.handleContent(q,{contenthandler:g.settings.contentHandler.insertHtml,command:"insertHtml"}));n.execCommand(b,c,q,a);g.getSelection().getRangeCount()&&(a=g.getSelection().getRangeAt(0),c=a.commonAncestorContainer,c.parentNode&&(c=c.parentNode),q=new window.GENTICS.Utils.RangeObject,q.startContainer=a.startContainer,q.startOffset=a.startOffset,q.endContainer=
a.endContainer,q.endOffset=a.endOffset,l.doCleanup({merge:!0,removeempty:!1},q,c),q.select());g.trigger("aloha-command-executed",b)}},queryCommandEnabled:function(b,c){if(!c){if(!g.getSelection().getRangeCount())return;c=g.getSelection().getRangeAt(0)}return n.queryCommandEnabled(b,c)},queryCommandIndeterm:function(b,c){if(!c){if(!g.getSelection().getRangeCount())return;c=g.getSelection().getRangeAt(0)}return n.queryCommandIndeterm(b,c)},queryCommandState:function(b,c){if(!c){if(!g.getSelection().getRangeCount())return;
c=g.getSelection().getRangeAt(0)}return n.queryCommandState(b,c)},queryCommandSupported:function(b){return n.queryCommandSupported(b)},queryCommandValue:function(b,c){if(!c){if(!g.getSelection().getRangeCount())return;c=g.getSelection().getRangeAt(0)}return n.queryCommandValue(b,c)},querySupportedCommands:function(){var b=[],c;for(c in n.commands)n.commands.hasOwnProperty(c)&&b.push(c);return b},getStateOverride:n.getStateOverride,setStateOverride:n.setStateOverride,resetOverrides:n.resetOverrides,
unsetStateOverride:n.unsetStateOverride},c=new (b.extend(c));g.execCommand=c.execCommand;g.queryCommandEnabled=c.queryCommandEnabled;g.queryCommandIndeterm=c.queryCommandIndeterm;g.queryCommandState=c.queryCommandState;g.queryCommandSupported=c.queryCommandSupported;g.queryCommandValue=c.queryCommandValue;g.querySupportedCommands=c.querySupportedCommands;return c});define("aloha/state-override","aloha/core jquery aloha/command util/dom2 util/maps util/range PubSub".split(" "),function(g,b,n,l,d,c,
k){function f(){e=m=null}function q(b,c,f){a&&(m=c,e=e||{},e[b]=f)}var a=!1!==g.settings.stateOverride,e=null,m=null;g.bind("aloha-selection-changed",function(a,b){m&&!l.areRangesEq(m,b)&&(f(),k.pub("aloha.selection.context-change",{range:b,event:a}))});return{enabled:function(b){null!=b&&(a=b);return a},keyPressHandler:function(a){if(e&&!a.altKey&&!a.ctrlKey&&a.which){var b=g.getSelection();if(b.getRangeCount()){var c=String.fromCharCode(a.which),m=b.getRangeAt(0);l.insertSelectText(c,m);d.forEach(e,
function(a,b){a(b,m)});l.collapseToEnd(m);b.removeAllRanges();b.addRange(m);a.preventDefault()}}},setWithRangeObject:function(b,e,m){a&&(q(b,l.rangeFromRangeObject(e),function(a,b){var e=new c(b);m(a,e);l.setRangeFromRef(b,e)}),e.select())},set:q,clear:f}});define("aloha/editable","aloha/core util/class jquery aloha/pluginmanager aloha/selection aloha/markup aloha/contenthandlermanager aloha/console aloha/block-jump aloha/ephemera util/dom2 PubSub aloha/copypaste aloha/command aloha/state-override".split(" "),
function(g,b,n,l,d,c,k,f,q,a,e,m,v,x,z){function A(a){return k.handleContent(a.getContents(),{contenthandler:g.settings.contentHandler.smartContentChange},a)}var y=window.unescape,C=window.GENTICS,p=!1,D={};g.defaults.contentHandler={};g.defaults.contentHandler.initEditable=["blockelement","sanitize"];g.defaults.contentHandler.getContents=["blockelement","sanitize","basic"];"undefined"===typeof g.settings.contentHandler&&(g.settings.contentHandler={});var s=function(a){return n(a).html()},r={65:"a"},
t={"ctrl+a":function(){var a=v.getEditableAt(v.getRange());if(a)return v.selectAllOf(a.obj[0]),!1}};n(document).keydown(function(a){if(g.activeEditable){var b=r[a.which];if(b){var e=a.altKey?"alt":a.ctrlKey?"ctrl":a.shiftKey?"shift":null,b=(e?e+"+":"")+b;if(t[b])return t[b](a)}}});g.Editable=b.extend({_constructor:function(a){a.attr("id")||a.attr("id",C.Utils.guid());this.originalObj=this.obj=a;this.ready=!1;this.sccDelimiters=[":",";",".","!","?",",",y("%u0009"),y("%u0020"),y("%u0008"),y("%u007F"),
"Enter"];this.sccIdle=5E3;this.sccDelay=500;this.sccTimerDelay=this.sccTimerIdle=!1;this.keyCodeMap={93:"Apps",18:"Alt",20:"CapsLock",17:"Control",40:"Down",35:"End",13:"Enter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",36:"Home",45:"Insert",37:"Left",224:"Meta",34:"PageDown",33:"PageUp",19:"Pause",44:"PrintScreen",39:"Right",145:"Scroll",16:"Shift",38:"Up",91:"Win",92:"Win"};this.placeholderClass="aloha-placeholder";g.registerEditable(this)},
init:function(){var a=this;(this.settings=g.settings)&&g.settings.smartContentChange&&(g.settings.smartContentChange.delimiters&&(this.sccDelimiters=g.settings.smartContentChange.delimiters),g.settings.smartContentChange.idle&&(this.sccIdle=g.settings.smartContentChange.idle),g.settings.smartContentChange.delay&&(this.sccDelay=g.settings.smartContentChange.delay));if(this.check(this.obj)){"undefined"===typeof g.settings.contentHandler.getContents&&(g.settings.contentHandler.getContents=g.defaults.contentHandler.getContents);
"undefined"===typeof g.settings.contentHandler.initEditable&&(g.settings.contentHandler.initEditable=g.defaults.contentHandler.initEditable);var b=a.obj.html(),b=k.handleContent(b,{contenthandler:g.settings.contentHandler.initEditable,command:"initEditable"},a);a.obj.html(b);g.bind("aloha-plugins-loaded",function(){a.obj.addClass("aloha-editable").contentEditable(!0);a.obj.mousedown(function(b){if(!g.eventHandled)return g.eventHandled=!0,a.activate(b)});a.obj.mouseup(function(a){g.eventHandled=!1});
a.obj.focus(function(b){return a.activate(b)});a.obj.add(".aloha-block",a.obj).keydown(function(b){var e=c.preProcessKeyStrokes(b);a.keyCode=b.which;e||a.smartContentChange(b);return e}).keypress(z.keyPressHandler);a.obj.keypress(function(a){g.activeEditable.smartContentChange(a)});a.obj.keyup(function(a){if(27===a.keyCode)return g.deactivateEditable(),!1});a.obj.contentEditableSelectionChange(function(b){d.onChange(a.obj,b);return a.obj});a.setUnmodified();a.snapshotContent=a.getContents();n.browser.mozilla&&
a.initEmptyEditable();a.initPlaceholder();a.ready=!0;window.setTimeout(function(){g.disableObjectResizing()},20);g.trigger("aloha-editable-created",[a]);m.pub("aloha.editable.created",{data:a})})}else this.destroy()},isActive:!1,originalContent:null,range:void 0,check:function(){var a=this,b=this.obj,e=b.get(0).nodeName.toLowerCase(),c="a abbr address article aside b bdo blockquote cite code command del details dfn div dl em footer h1 h2 h3 h4 h5 h6 header i ins menu nav p pre q ruby section small span strong sub sup var".split(" "),
m;for(m=0;m<c.length;++m)if(e===c[m])return!0;switch(e){case "textarea":case "input":return e=n('<div id="'+this.getId()+'-aloha" class="aloha-'+e+'" />').insertAfter(b),e.height(b.height()).width(b.width()).html(b.val()),b.hide(),b.parents("form:first").submit(function(){b.val(a.getContents())}),this.obj=e,!0}return!1},initPlaceholder:function(){g.settings.placeholder&&this.isEmpty()&&this.addPlaceholder()},isEmpty:function(){var a=n.trim(this.getContents());return 0===a.length||("<br>"===a?!0:!1)},
initEmptyEditable:function(){var a=this.obj;this.empty(this.getContents())&&n(a).prepend('<br class="aloha-cleanme" />')},addPlaceholder:function(){var a=n("<div>"),b=n("<span>"),e,c=this.obj;e=C.Utils.Dom.allowsNesting(c[0],a[0])?a:b;0===n("."+this.placeholderClass,c).length&&(n.each(g.settings.placeholder,function(a,b){c.is(a)&&e.html(b)}),e.is(":empty")||(e.addClass(this.placeholderClass).addClass("aloha-ephemera"),n(c).append(e)),n("br",c).remove())},removePlaceholder:function(a,b){var e=this.placeholderClass,
c;0!==n("."+this.placeholderClass,a).length&&(!0===b?window.setTimeout(function(){c=new d.SelectionRange;c.startContainer=c.endContainer=a.get(0);c.startOffset=c.endOffset=0;n("."+e,a).remove();c.select()},100):n("."+e,a).remove())},destroy:function(){this===g.getActiveEditable()&&this.blur();switch(this.originalObj.get(0).nodeName.toLowerCase()){case "textarea":case "input":this.originalObj.val(this.getContents()),this.obj.remove(),this.originalObj.show()}this.ready=!1;this.removePlaceholder(this.obj);
this.obj.removeClass("aloha-editable").contentEditable(!1).unbind("mousedown click dblclick focus keydown keypress keyup");g.trigger("aloha-editable-destroyed",[this]);m.pub("aloha.editable.destroyed",{data:this});g.unregisterEditable(this)},setUnmodified:function(){this.originalContent=this.getContents()},isModified:function(){return this.originalContent!==this.getContents()},toString:function(){return"Aloha.Editable"},isDisabled:function(){return!this.obj.contentEditable()||"false"===this.obj.contentEditable()},
disable:function(){return this.isDisabled()||this.obj.contentEditable(!1)},enable:function(){return this.isDisabled()&&this.obj.contentEditable(!0)},activate:function(a){var b=g.getActiveEditable();p?p=!1:a&&"focus"===a.type&&null!==b&&b.obj.parent().get(0)===a.currentTarget||this.isActive||this.isDisabled()||(this.obj.addClass("aloha-editable-active"),g.activateEditable(this),p=!0,this.removePlaceholder(this.obj,!0),p=!1,this.isActive=!0,g.trigger("aloha-editable-activated",{oldActive:b,editable:this}),
m.pub("aloha.editable.activated",{data:{old:b,editable:this}}))},blur:function(){this.obj.blur();this.isActive=!1;this.initPlaceholder();this.obj.removeClass("aloha-editable-active");g.trigger("aloha-editable-deactivated",{editable:this});g.activeEditable.smartContentChange({type:"blur"},null)},empty:function(a){return null===a||""===n.trim(a)||"<br/>"===a},getContents:function(b){var e=this.obj.html(),c=D[this.getId()];if(!c||e!==c.raw){q.removeZeroWidthTextNodeFix();var m=this.obj.clone(!1);this.removePlaceholder(m);
m=n(a.prune(m[0]));l.makeClean(m);m=n("<div>"+k.handleContent(m.html(),{contenthandler:g.settings.contentHandler.getContents,command:"getContents"},this)+"</div>");c=D[this.getId()]={};c.raw=e;c.element=m}if(b)return c.element.clone().contents();null==c.serialized&&(c.serialized=s(c.element[0]));return c.serialized},setContents:function(a,b){var e=null;g.getActiveEditable()===this&&(g.deactivateEditable(),e=this);this.obj.html(a);null!==e&&e.activate();this.smartContentChange({type:"set-contents"});
return b?this.obj.contents():s(this.obj[0])},getId:function(){return this.obj.attr("id")},smartContentChange:function(a){function b(){null==k&&(k=e.getSnapshotContent());return k}var e=this,c=null,m;if(a&&(a.metaKey||a.crtlKey||a.altKey))return!1;a&&a.originalEvent&&(m=/U\+(\w{4})/,m.exec(a.originalEvent.keyIdentifier),c=this.keyCodeMap[this.keyCode]||String.fromCharCode(a.which)||"unknown");var k=null;0<=n.inArray(c,this.sccDelimiters)?(clearTimeout(this.sccTimerIdle),clearTimeout(this.sccTimerDelay),
this.sccTimerDelay=window.setTimeout(function(){g.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:a.originalEvent.keyIdentifier,keyCode:a.keyCode,"char":c,triggerType:"keypress",getSnapshotContent:b});A(e);f.debug("Aloha.Editable","smartContentChanged: event type keypress triggered")},this.sccDelay)):a&&"paste"===a.type?(g.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:null,keyCode:null,"char":null,triggerType:"paste",getSnapshotContent:b}),A(e)):a&&"blur"===a.type?
(g.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:null,keyCode:null,"char":null,triggerType:"blur",getSnapshotContent:b}),A(e)):a&&"block-change"===a.type?(g.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:null,keyCode:null,"char":null,triggerType:"block-change",getSnapshotContent:b}),A(e)):null!==c&&(clearTimeout(this.sccTimerDelay),clearTimeout(this.sccTimerIdle),this.sccTimerIdle=window.setTimeout(function(){g.trigger("aloha-smart-content-changed",{editable:e,keyIdentifier:null,
keyCode:null,"char":null,triggerType:"idle",getSnapshotContent:b});A(e)},this.sccIdle))},getSnapshotContent:function(){var a=this.snapshotContent;this.snapshotContent=this.getContents();return a}});g.Editable.setContentSerializer=function(a){s=a};g.Editable.getContentSerializer=function(){return s}});define("aloha/plugin",["aloha/core","jquery","util/class","aloha/pluginmanager","aloha/console"],function(g,b,n,l,d){var c=n.extend({name:null,defaults:{},settings:{},dependencies:[],_constructor:function(b){"string"!==
typeof b?d.error("Cannot initialise unnamed plugin, skipping"):this.name=b},checkDependencies:function(){var c=this,f=!0;b.each(c.dependencies,function(b,a){if(!g.isPluginLoaded(a.toString()))return f=!1,d.error("plugin."+c.name,'Required plugin "'+a+'" not found.'),!1});return f},init:function(){},getEditableConfig:function(c){var f=null,q=!1,a=this;this.settings.editables&&b.each(this.settings.editables,function(e,m){var d;if(c.is(e))if(q=!0,m instanceof Array)f=[],f=b.merge(f,m);else if("object"===
typeof m)for(d in f={},f["aloha-editable-selector"]=e,m)m.hasOwnProperty(d)&&(m[d]instanceof Array?f[d]=m[d]:"object"===typeof m[d]?(f[d]={},f[d]=b.extend(!0,f[d],a.config[d],m[d])):f[d]=m[d]);else f=m});q||(f="undefined"!==typeof this.settings.config&&this.settings.config?this.settings.config:this.config);return f},makeClean:function(b){},getUID:function(b){d.deprecated("plugin","getUID() is deprecated. Use plugin.name instead.");return this.name},toString:function(){return this.name},log:function(b,
c){d.deprecated("plugin","log() is deprecated. Use Aloha.console instead.");d.log(b,this,c)}});c.create=function(k,f){var q=new (c.extend(f))(k);q.settings=b.extendObjects(!0,q.defaults,g.settings[k]);l.register(q);return q};return c});define("aloha/jquery.aloha",["aloha/core","aloha/selection","jquery","aloha/console"],function(g,b,n,l){function d(b,c,a,e){if(c===e.target||!/textarea|input|select/i.test(e.target.nodeName)&&"text"!==e.target.type)return b.apply(c,a)}function c(b){var c,a,e,m;if("string"===
typeof b.data){c=b.handler;a=b.data.toLowerCase().split(" ");e={};for(m=0;m<a.length;m++)e[a[m]]=!0;b.handler=function(a){if(this===a.target){var b="keypress"!==a.type&&n.hotkeys.specialKeys[a.which],m="";a.altKey&&"alt"!==b&&(m+="alt+");a.ctrlKey&&"ctrl"!==b&&(m+="ctrl+");a.metaKey&&!a.ctrlKey&&"meta"!==b&&(m+="meta+");a.shiftKey&&"shift"!==b&&(m+="shift+");if(b){if(e[m+b])return d(c,this,arguments,a)}else if(b=String.fromCharCode(a.which).toLowerCase(),e[m+b]||e[m+n.hotkeys.shiftNums[b]]||"shift+"===
m&&e[n.hotkeys.shiftNums[b]])return d(c,this,arguments,a)}}}}var k=window.XMLSerializer;n.fn.between=function(b,c){var a;3!==this[0].nodeType?(a=this.children().size(),c>a&&(c=a),0>=c?this.prepend(b):this.children().eq(c-1).after(b)):0>=c?this.before(b):(c>=this[0].length||(a=this[0].data,this[0].data=a.substring(0,c),this.after(a.substring(c,a.length))),this.after(b))};n.fn.contentEditable=function(b){var c=n(this),a="contenteditable";n.browser.msie&&7==parseInt(n.browser.version,10)&&(a="contentEditable");
if("undefined"===typeof b){if("undefined"===typeof c[0]){l.warn("The jquery object did not contain any valid elements.");return}return"undefined"===typeof c[0].isContentEditable?(l.warn("Could not determine whether the is editable or not. I assume it is."),!0):c[0].isContentEditable}""===b?c.removeAttr(a):c.attr(a,b&&"false"!==b?"true":"false");return c};n.fn.aloha=function(){var b=this;g.bind("aloha-plugins-loaded",function(){b.each(function(b,a){g.isEditable(a)||(new g.Editable(n(a))).init()})});
return b};n.fn.mahalo=function(){return this.each(function(){g.isEditable(this)&&g.getEditableById(n(this).attr("id")).destroy()})};n.fn.alohaText=function(){return this.each(function(){g.isEditable(this)&&g.getEditableById(n(this).attr("id")).getContents()})};n.fn.contentEditableSelectionChange=function(c){var k=this;this.keyup(function(a){b.getRangeObject();c(a)});this.dblclick(function(a){c(a)});this.mousedown(function(a){k.selectionStarted=!0});n(document).mouseup(function(a){b.eventOriginalTarget=
k;k.selectionStarted&&c(a);b.eventOriginalTarget=!1;k.selectionStarted=!1});return this};n.fn.outerHtml=n.fn.outerHtml||function(){var b=n(this).get(0);if("undefined"!=typeof b.outerHTML)return b.outerHTML;try{return(new k).serializeToString(b)}catch(c){try{return b.xml}catch(a){}}};n.fn.zap=function(){return this.each(function(){n(this.childNodes).insertBefore(this)}).remove()};n.fn.textNodes=function(b,c){var a=[],e=function(m){var k,d;if(3===m.nodeType&&n.trim(m.data)&&!c||3===m.nodeType&&c||"BR"==
m.nodeName&&!b)a.push(m);else for(k=0,d=m.childNodes.length;k<d;++k)e(m.childNodes[k])};e(this[0]);return n(a)};n.extendObjects=n.fn.extendObjects=function(b,c){var a,e,m,k,d;a=1;var l=b||{},g=arguments.length,y=!1,p;"boolean"===typeof l&&(y=l,l=c||{},a=2);"object"===typeof l||n.isFunction(l)||(l={});g===a&&(l=this,--a);for(p=a;p<g;p++)if(null!=(a=arguments[p]))for(e in a)a.hasOwnProperty(e)&&(m=l[e],k=a[e],l!==k&&(y&&k&&(n.isPlainObject(k)||!0===(d=n.isArray(k)))?(d?(d=!1,m=m&&n.isArray(m)?m:[]):
m=m&&n.isPlainObject(m)?m:{},n.isArray(k)?l[e]=k:l[e]=n.extendObjects(y,m,k)):void 0!==k&&(l[e]=k)));return l};n.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",
115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};n.each(["keydown","keyup","keypress"],function(){n.event.special[this]={add:c}})});define("aloha/sidebar",["aloha/core","jquery","aloha/selection","PubSub"],function(g,b,n,l){var d=+new Date;b.easing.easeOutExpo||
b.extend(b.easing,{easeOutExpo:function(a,b,c,f,k){return b==k?c+f:f*(-Math.pow(2,-10*b/k)+1)+c},easeOutElastic:function(a,b,c,f,k){a=Math;var q=1.70158,d=0,l=f;if(!b)return c;if(1==(b/=k))return c+f;d||(d=0.3*k);l<a.abs(f)?(l=f,q=d/4):q=d/(2*a.PI)*a.asin(f/l);return l*a.pow(2,-10*b)*a.sin(2*(b*k-q)*a.PI/d)+f+c}});var c=function(a){this.id=null;this.folds={};this.button=null;this.title=b('<div class="aloha-sidebar-panel-title"><span class="aloha-sidebar-panel-title-arrow"></span><span class="aloha-sidebar-panel-title-text">Untitled</span></div>');
this.content=b('<div class="aloha-sidebar-panel-content"><div class="aloha-sidebar-panel-content-inner"><div class="aloha-sidebar-panel-content-inner-text"></div></div></div>');this.effectiveElement=this.element=null;this.expanded=!1;this.isActive=!0;this.init(a)},k=function(a){var c=this;this.id="aloha-sidebar-"+ ++d;this.panels={};this.container=b('<div class="aloha-ui aloha-sidebar-bar"><div class="aloha-sidebar-handle"><span class="aloha-sidebar-handle-icon"></span></div><div class="aloha-sidebar-inner"><ul class="aloha-sidebar-panels"></ul></div></div>');
this.width=300;this.isCompletelyOpen=this.isOpen=this.opened=!1;this.settings={rotateIcons:!b.browser.msie,overlayPage:!0};b(function(){"undefined"!==typeof g.settings.sidebar&&g.settings.sidebar.disabled||c.init(a)})},f=null,q=null;b.extend(k.prototype,{init:function(a){var c=this,f;"object"===typeof a&&(f=a.panels,delete a.panels);b.extend(this,a);"object"===typeof f&&b.each(f,function(){c.addPanel(this,!0)});a=this.container;"right"===this.position&&a.addClass("aloha-sidebar-right");a.hide().appendTo(b("body")).click(function(){c.barClicked.apply(c,
arguments)}).find(".aloha-sidebar-panels").width(this.width);a.width(this.width);this.width=a.width();this.updateHeight();this.initToggler();this.container.css("right"===this.position?"marginRight":"marginLeft",-this.width);this.opened&&this.open(0);this.toggleHandleIcon(this.isOpen);this.subscribeToEvents();b(window).resize(function(){c.updateHeight();c.correctHeight()});this.correctHeight()},show:function(){this.container.css("display","block");return this},hide:function(){this.container.css("display",
"none");return this},checkActivePanels:function(a){var c=[];if("undefined"!==typeof a&&"undefined"!==typeof a.markupEffectiveAtStart){var f=a.markupEffectiveAtStart.length,k;for(k=0;k<f;++k)c.push(b(a.markupEffectiveAtStart[k]))}var q=this;b.each(this.panels,function(){q.showActivePanel(this,c)});this.correctHeight()},subscribeToEvents:function(){var a=this;l.sub("aloha.selection.context-change",function(b){a.isOpen&&a.checkActivePanels(b.range);a.lastRange=b.range});g.bind("aloha-editable-deactivated",
function(b,c){a.isOpen&&a.checkActivePanels();a.lastRange=null});this.container.mousedown(function(a){a.originalEvent.stopSelectionUpdate=!0;g.eventHandled=!0});this.container.mouseup(function(a){a.originalEvent.stopSelectionUpdate=!0;g.eventHandled=!1})},correctHeight:function(){if(this.isOpen)if(this.isCompletelyOpen){var a=b(window).height(),c=[],k=[],d;for(d in this.panels)this.panels.hasOwnProperty(d)&&this.panels[d].isActive&&(k.push(this.panels[d]),c.push(d));if(0!==k.length&&(c=c.sort().join(","),
q!==c||f!==a)){f=a;q=c;for(var a=this.container.find(".aloha-sidebar-inner").height()-(k[0].title.outerHeight()+10)*k.length,l,g,n,p=0,s=Math,D;0<k.length&&0<a;){a+=p;p=0;n=[];for(D=k.length-1;0<=D;--D)c=k[D],l=c.content.find(".aloha-sidebar-panel-content-inner"),d=s.min(l.height("auto").height(),s.floor(a/(D+1))),l.height(d),a-=d,g=l.find(".aloha-sidebar-panel-content-inner-text"),g.height()>d?(n.push(c),p+=d,l.css({"overflow-x":"hidden","overflow-y":"scroll"})):l.css("overflow-y","hidden"),c.expanded&&
c.expand();k=n}}}else this.correctHeightWhenCompletelyOpen=!0},showActivePanel:function(a,c){c.push(null);a.content.parent("li");var f=a.activeOn,k=b(),q=0,d=c.length,l;for(l=0;l<d;++l)f(c[l])&&(++q,c[l]&&b.merge(k,c[l]));q?a.activate(k):a.deactivate()},initToggler:function(){var a=this,c=this.container,f=c.find(".aloha-sidebar-handle-icon"),k,q="right"===this.position;this.opened&&this.rotateHandleArrow(q?0:180,0);b(function(){"undefined"!==typeof g.settings.sidebar&&g.settings.sidebar.handle&&g.settings.sidebar.handle.top&&
(b(c.find(".aloha-sidebar-handle"))[0].style.top=g.settings.sidebar.handle.top)});c.find(".aloha-sidebar-handle").click(function(){k&&clearInterval(k);f.stop().css("marginLeft",4);a.isOpen?(b(this).removeClass("aloha-sidebar-toggled"),a.close(),a.isOpen=!1):(b(this).addClass("aloha-sidebar-toggled"),a.open(),a.isOpen=!0)}).hover(function(){var c=a.isOpen?-1:1;k&&clearInterval(k);f.stop();b(this).stop().animate(q?{marginLeft:"-="+5*c}:{marginRight:"-="+5*c},200);k=setInterval(function(){c*=-1;f.animate(q?
{left:"-="+4*c}:{right:"-="+4*c},300)},300)},function(){k&&clearInterval(k);f.stop().css(q?"left":"right",5);b(this).stop().animate(q?{marginLeft:0}:{marginRight:0},600,"easeOutElastic")})},roundCorners:function(){var a=this.container,b=a.find(".aloha-sidebar-panels>li:not(.aloha-sidebar-deactivated)");a.find(".aloha-sidebar-panel-top, .aloha-sidebar-panel-bottom").removeClass("aloha-sidebar-panel-top").removeClass("aloha-sidebar-panel-bottom");b.first().find(".aloha-sidebar-panel-title").addClass("aloha-sidebar-panel-top");
b.last().find(".aloha-sidebar-panel-content").addClass("aloha-sidebar-panel-bottom")},updateHeight:function(){var a=b(window).height();this.container.height(a).find(".aloha-sidebar-inner").height(a)},barClicked:function(a){this.handleBarclick(b(a.target))},handleBarclick:function(a){a.hasClass("aloha-sidebar-panel-title")?this.togglePanel(a):a.hasClass("aloha-sidebar-panel-content")||a.hasClass("aloha-sidebar-handle")||a.hasClass("aloha-sidebar-bar")||this.handleBarclick(a.parent())},getPanelById:function(a){return this.panels[a]},
getPanelByElement:function(a){a="LI"===a[0].tagName?a:a.parent("li");return this.getPanelById(a[0].id)},togglePanel:function(a){this.getPanelByElement(a).toggle()},rotateHandleIcon:function(a,b){var c=this.container.find(".aloha-sidebar-handle-icon");c.animate({angle:a},{duration:"number"===typeof b||"string"===typeof b?b:500,easing:"easeOutExpo",step:function(a,b){c.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+
a+"deg)"})}})},toggleHandleIcon:function(a){a^="right"===this.position;if(this.settings.rotateIcons)this.rotateHandleIcon(a?180:0,0);else{var b=this.container.find(".aloha-sidebar-handle-icon");a?b.addClass("aloha-sidebar-handle-icon-left"):b.removeClass("aloha-sidebar-handle-icon-left")}},open:function(a,c){if(this.isOpen)return this;var f="right"===this.position,k=f?{marginRight:0}:{marginLeft:0},q=this;this.toggleHandleIcon(!0);this.container.animate(k,"number"===typeof a||"string"===typeof a?
a:500,"easeOutExpo");this.settings.overlayPage||b("body").animate(f?{marginRight:"+="+this.width}:{marginLeft:"+="+this.width},500,"easeOutExpo",function(){q.isCompletelyOpen=!0;q.correctHeightWhenCompletelyOpen&&q.correctHeight()});this.isOpen=!0;this.correctHeight();this.lastRange&&this.checkActivePanels(this.lastRange);b("body").trigger("aloha-sidebar-opened",this);return this},close:function(a,c){if(!this.isOpen)return this;var f="right"===this.position,k=f?{marginRight:-this.width}:{marginLeft:-this.width};
this.toggleHandleIcon(!1);this.container.animate(k,"number"===typeof a||"string"===typeof a?a:500,"easeOutExpo");this.settings.overlayPage||b("body").animate(f?{marginRight:"-="+this.width}:{marginLeft:"-="+this.width},500,"easeOutExpo");this.isCompletelyOpen=this.isOpen=!1;return this},activatePanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));a&&a.activate(b);this.roundCorners();return this},expandPanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));a&&a.expand(b);return this},
collapsePanel:function(a,b){"string"===typeof a&&(a=this.getPanelById(a));a&&a.collapse(b);return this},addPanel:function(a,b){a instanceof c||(a.width||(a.width=this.width),a.sidebar=this,a=new c(a));this.panels[a.id]=a;this.container.find(".aloha-sidebar-panels").append(a.element);this.checkActivePanels(n.getRangeObject());return a}});b.extend(c.prototype,{init:function(a){this.setTitle(a.title).setContent(a.content);delete a.title;delete a.content;b.extend(this,a);this.id||(this.id="aloha-sidebar-"+
++d);this.element=b('<li id="'+this.id+'">').append(this.title,this.content);this.expanded&&this.content.height("auto");this.toggleTitleIcon(this.expanded);this.coerceActiveOn();this.title.attr("unselectable","on").css("-moz-user-select","none").each(function(){this.onselectstart=function(){return!1}});"function"===typeof this.onInit&&this.onInit.apply(this)},toggleTitleIcon:function(a){if(this.sidebar.settings.rotateIcons)this.rotateTitleIcon(a?90:0);else{var b=this.title.find(".aloha-sidebar-panel-title-arrow");
a?b.addClass("aloha-sidebar-panel-title-arrow-down"):b.removeClass("aloha-sidebar-panel-title-arrow-down")}},coerceActiveOn:function(){if("function"!==typeof this.activeOn){var a=this.activeOn;this.activeOn=function(){var b=typeof a;return"boolean"===b?function(){return a}:"undefined"===b?function(){return!0}:"string"===b?function(b){return b?b.is(a):!1}:function(){return!1}}()}},activate:function(a){this.isActive=!0;this.content.parent("li").show().removeClass("aloha-sidebar-deactivated");this.effectiveElement=
a;"function"===typeof this.onActivate&&this.onActivate.call(this,a)},deactivate:function(){this.isActive&&(this.isActive=!1,this.content.parent("li").hide().addClass("aloha-sidebar-deactivated"),this.effectiveElement=null)},toggle:function(){this.expanded?this.collapse():this.expand()},expand:function(a){var b=this,c=this.content,f=c.height(),k=c.height("auto").height();c.height(f).stop().animate({height:k},500,"easeOutExpo",function(){"function"===typeof a&&a.call(b)});this.element.removeClass("collapsed");
this.toggleTitleIcon(!0);this.expanded=!0;return this},collapse:function(a,b){var c=this;this.element.addClass("collapsed");this.content.stop().animate({height:3},250,"easeOutExpo",function(){"function"===typeof b&&b.call(c)});this.toggleTitleIcon(!1);this.expanded=!1;return this},setTitle:function(a){this.title.find(".aloha-sidebar-panel-title-text").html(a);return this},setContent:function(a){a&&""!==a||(a="&nbsp;");this.content.find(".aloha-sidebar-panel-content-inner-text").html(a);return this},
rotateTitleIcon:function(a,b){var c=this.title.find(".aloha-sidebar-panel-title-arrow");c.animate({angle:a},{duration:"number"===typeof b?b:500,easing:"easeOutExpo",step:function(a,b){c.css({"-o-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)"})}})},renderEffectiveParents:function(a,c){for(var f=a.first(),k=[],q=[],d=this.activeOn,l,g;0<f.length&&!f.is(".aloha-editable");){if(d(f)){q.push("<span>"+f[0].tagName.toLowerCase()+
"</span>");l=q.length;for(g=[];l--;)g.push(q[l]);k.push('<div class="aloha-sidebar-panel-parent"><div class="aloha-sidebar-panel-parent-path">'+g.join("")+'</div><div class="aloha-sidebar-panel-parent-contentaloha-sidebar-opened">'+("function"===typeof c?c(f):"----")+"</div></div>")}f=f.parent()}this.setContent(k.join(""));b(".aloha-sidebar-panel-parent-path").click(function(){var a=b(this).parent().find(".aloha-sidebar-panel-parent-content");a.hasClass("aloha-sidebar-opened")?a.hide().removeClass("aloha-sidebar-opened"):
a.show().addClass("aloha-sidebar-opened")});this.content.height("auto").find(".aloha-sidebar-panel-content-inner").height("auto")}});var a=new k({position:"left",width:250}),k=new k({position:"right",width:250});g.Sidebar={left:a,right:k};return g.Sidebar});window.GENTICS=window.GENTICS||{};window.GENTICS.Utils=window.GENTICS.Utils||{};define("util/position",["jquery"],function(g){var b=window.GENTICS;b.Utils.Position={};b.Utils.Position.w=g(window);b.Utils.Position.Scroll={top:0,left:0,isScrolling:!1};
b.Utils.Position.ScrollCorrection={top:100,left:50};b.Utils.Position.Mouse={x:0,y:0,oldX:0,oldY:0,isMoving:!1,triggeredMouseStop:!0};b.Utils.Position.mouseStopCallbacks=[];b.Utils.Position.mouseMoveCallbacks=[];b.Utils.Position.update=function(){var b=this.w.scrollTop(),l=this.w.scrollLeft();if(this.Scroll.isScrolling)this.Scroll.top==b&&this.Scroll.left==l&&(this.Scroll.isScrolling=!1);else if(this.Scroll.top!=b||this.Scroll.left!=l)this.Scroll.isScrolling=!0;this.Scroll.top=b;this.Scroll.left=l;
if(this.Mouse.x==this.Mouse.oldX&&this.Mouse.y==this.Mouse.oldY){if(this.Mouse.isMoving=!1,!this.Mouse.triggeredMouseStop)for(this.Mouse.triggeredMouseStop=!0,b=0;b<this.mouseStopCallbacks.length;b++)this.mouseStopCallbacks[b].call()}else for(this.Mouse.isMoving=!0,this.Mouse.triggeredMouseStop=!1,b=0;b<this.mouseMoveCallbacks.length;b++)this.mouseMoveCallbacks[b].call();this.Mouse.oldX=this.Mouse.x;this.Mouse.oldY=this.Mouse.y};b.Utils.Position.addMouseStopCallback=function(b){this.mouseStopCallbacks.push(b);
return this.mouseStopCallbacks.length-1};b.Utils.Position.addMouseMoveCallback=function(b){this.mouseMoveCallbacks.push(b);return this.mouseMoveCallbacks.length-1};g(function(){window.setInterval(function(){b.Utils.Position.update()},500)});g("html").mousemove(function(g){b.Utils.Position.Mouse.x=g.pageX;b.Utils.Position.Mouse.y=g.pageY})});define("aloha/repositoryobjects",["aloha/core","util/class"],function(g,b){var n=window.GENTICS;g.RepositoryObject=function(){};g.RepositoryDocument=b.extend({_constructor:function(b){this.type=
"document";b.id&&b.name&&b.repositoryId&&(n.Utils.applyProperties(this,b),this.baseType="document")}});g.RepositoryFolder=b.extend({_constructor:function(b){this.type="folder";b.id&&b.name&&b.repositoryId&&(n.Utils.applyProperties(this,b),this.baseType="folder")}})});define("aloha/repositorymanager",["jquery","util/class","aloha/core","aloha/console","aloha/repositoryobjects"],function(g,b,n,l,d){function c(a,b){var e={items:a,results:a.length};b&&(e.numItems=b.numItems,e.hasMoreItems=b.hasMoreItems,
e.timeout=b.timeout);return e}function k(a,b){a(b)}var f=function(a){return a?function(a,b){return a.filter(b)}:function(a,b){var e=[],c;for(c=0;c<a.length;c++)b(a[c])&&e.push(a[c]);return e}}(Array.prototype.hasOwnProperty("filter")),q=function(a){return"function"===typeof a.query},a=function(a){return"function"===typeof a.getChildren},e=function(a){return"function"===typeof a.getSelectedFolder};b=b.extend({repositories:[],settings:n.settings&&n.settings.repositories||{},initialized:!1,init:function(){"undefined"===
typeof this.settings.timeout&&(this.settings.timeout=5E3);var a;for(a=0;a<this.repositories.length;a++)this.initRepository(this.repositories[a]);this.initialized=!0},register:function(a){this.getRepository(a.repositoryId)?l.warn(this,'A repository with name "'+a.repositoryId+'" already registerd. Ignoring this.'):(this.repositories.push(a),this.initialized&&this.initRepository(a))},initRepository:function(a){a.settings||(a.settings={});this.settings[a.repositoryId]&&g.extend(a.settings,this.settings[a.repositoryId]);
a.init()},getRepository:function(a){var b;for(b=0;b<this.repositories.length;b++)if(this.repositories[b].repositoryId===a)return this.repositories[b];return null},query:function(a,b){var e=this,d,n=[],y={numItems:0,hasMoreItems:!1},p,s=a.timeout&&parseInt(a.timeout,10)||e.settings.timeout,D=window.setTimeout(function(){y=y||{};y.timeout=!0;0<p&&(l.warn(e,p+" repositories did not return before the configured timeout of "+s+"ms."),p=0);clearTimeout(D);var a=c(n,y);b(a)},s),r=function(a,m){if(0!==p){if(a&&
a.length){if(!a[0].repositoryId){var f=this.repositoryId,k;for(k=0;k<a.length;k++)a[k].repositoryId=f}g.merge(n,a)}m&&y?(y.numItems=g.isNumeric(m.numItems)&&g.isNumeric(y.numItems)?y.numItems+m.numItems:void 0,y.hasMoreItems="boolean"===typeof m.hasMoreItems&&"boolean"===typeof y.hasMoreItems?y.hasMoreItems||m.hasMoreItems:void 0,m.timeout&&(y.timeout=!0)):y=void 0;l.debug(e,"The repository "+this.repositoryId+"returned with "+a.length+" results.");0===--p&&(clearTimeout(D),f=c(n,y),b(f))}};d=a.repositoryId?
[e.getRepository(a.repositoryId)]:e.repositories;var t=f(d,q);if(0===t.length)clearTimeout(D),k(b,c(n,y));else{var J=function(a){return function(){r.apply(a,arguments)}};p=t.length;for(d=0;d<t.length;d++)t[d].query(a,J(t[d]))}},getChildren:function(b,e){var c=this,k,q=[],d=0,p=b.timeout&&parseInt(b.timeout,10)||c.settings.timeout,s=window.setTimeout(function(){0<d&&(l.warn(c,d+" repositories did not respond before the configured timeout of "+p+"ms."),d=0);clearTimeout(s);e(q)},p),D=function(a){0!==
d&&(a&&g.merge(q,a),0===--d&&(clearTimeout(s),e(q)))},r=b.repositoryId?[c.getRepository(b.repositoryId)]:c.repositories;b.repositoryFilter&&b.repositoryFilter.length&&(r=f(r,function(a){return-1<g.inArray(a.repositoryId,b.repositoryFilter)}));if("aloha"===b.inFolderId){for(k=0;k<r.length;k++)q.push(new n.RepositoryFolder({id:r[k].repositoryId,name:r[k].repositoryName,repositoryId:r[k].repositoryId,type:"repository",hasMoreItems:!0}));clearTimeout(s);e(q)}else if(r=f(r,a),0===r.length)clearTimeout(s),
e(q);else for(d=r.length,k=0;k<r.length;k++)r[k].getChildren(b,D)},makeClean:function(a){var b=this,e={},c=0,f=b.repositories.length;a.find("[data-gentics-aloha-repository="+this.prefix+"]").each(function(){for(;c<f;)e.makeClean(a),c+=1;l.debug(b,"Passing contents of HTML Element with id { "+this.attr("id")+" } for cleaning to repository { "+e.repositoryId+" }");e.makeClean(this)})},markObject:function(a,b){if(a)if(b){var e=this.getRepository(b.repositoryId);e?(g(a).attr({"data-gentics-aloha-repository":b.repositoryId,
"data-gentics-aloha-object-id":b.id}),e.markObject(a,b)):l.error(this,'Trying to apply a repository "'+b.name+'" to an object, but item has no repositoryId.')}else g(a).removeAttr("data-gentics-aloha-repository").removeAttr("data-gentics-aloha-object-id")},getObject:function(a,b){var e=g(a),c=e.attr("data-gentics-aloha-object-id"),e=e.attr("data-gentics-aloha-repository"),f=this.getRepository(e);if(f&&c){this.itemCache||(this.itemCache=[]);var k=this.itemCache[e];k||(k=this.itemCache[e]=[]);k[c]?
b([k[c]]):f.getObjectById(c,function(a){k[c]=a[0];b(a)})}},folderOpened:function(a){var b=this.getRepository(a.repositoryId);"function"===typeof b.folderOpened&&b.folderOpened(a)},folderClosed:function(a){var b=this.getRepository(a.repositoryId);"function"===typeof b.folderClosed&&b.folderClosed(a)},folderSelected:function(a){var b=this.getRepository(a.repositoryId);"function"===typeof b.folderSelected&&b.folderSelected(a)},getSelectedFolder:function(){var a=f(this.repositories,e),b,c;for(b=0;b<a.length;b++)if(c=
a[b].getSelectedFolder())return c;return null},toString:function(){return"repositorymanager"}});n.RepositoryManager=new b;return n.RepositoryManager});define("aloha/repository",["aloha/core","util/class","aloha/repositorymanager"],function(g,b,n){b=b.extend({_constructor:function(b,d){this.repositoryId=b;this.settings={};this.repositoryName=d||b;n.register(this)},init:function(){},query:null,getChildren:null,makeClean:function(b){},markObject:function(b,d){},setTemplate:function(b){this.template=
b?b:null},hasTemplate:function(){return this.template?!0:!1},getTemplate:function(){return this.template},getObjectById:function(b,d){return!0}});return g.AbstractRepository=b});(function(g){function b(){var b,a,e=Aloha.settings.plugins&&Aloha.settings.plugins.load,c=Aloha.settings.baseUrl,f,k=/\/aloha.js(\?\S*)?$/,d=/\/[^\/]*\.js$/,l;if(!e||!c)for(b=document.getElementsByTagName("script"),l=0;l<b.length;l++){a=b[l];f=a.getAttribute("data-aloha-plugins");if(null!=f){e||(e=f);c||(c=a.src.replace(d,
""));break}!c&&k.test(a.src)&&(c=a.src.replace(k,""))}"string"===typeof e&&""!==e&&(e=e.replace(/\s+/g,"").split(","));return{baseUrl:c,plugins:e||[]}}function n(){for(var b=document.getElementsByTagName("script"),a=0;a<b.length;a++)if("true"===b[a].getAttribute("data-aloha-defer-init"))return!0;return!1}function l(b){var a={},e=[],c={},f={},k,d,l=Aloha.settings.basePath||"",g=Aloha.settings.bundles||{},n;for(n=0;n<b.length;n++){k=b[n].split("/");d=k[0];k=k[1];d=g[d]?l+g[d]:l+"../plugins/"+d;var p=
a,D=d,s=k,r=["nls","css","vendor","res"],t=void 0,M=void 0;p[s]=D+"/"+s+"/lib";for(M=0;M<r.length;M++)t=r[M],p[s+"/"+t]=D+"/"+s+"/"+t;c[k]=d+"/"+k;e.push(k+"/"+k+"-plugin");f[k]={jquery:"aloha/jquery"}}return{paths:a,entryPoints:e,baseUrlByName:c,names:[],map:f}}function d(){var b={},a=Array.prototype.slice.call(arguments),e,c,f;for(c=0;c<a.length;c++)for(e in f=a[c],f)f.hasOwnProperty(e)&&(b[e]=a[c][e]);return b}function c(b,a){define(b,function(){return a})}function k(){Aloha.features={};Aloha.defaults=
{};Aloha.settings=Aloha.settings||{};Aloha.initialize=f.start;var k=b(),a=l(k.plugins);Aloha.settings.baseUrl=k.baseUrl;Aloha.settings.loadedPlugins=a.names;Aloha.settings._pluginBaseUrlByName=a.baseUrlByName;k=d({aloha:{jquery:"aloha/jquery"},"aloha/jquery":{jquery:"jquery"},jqueryui:{jquery:"aloha/jquery"},vendor:{jquery:"aloha/jquery"},util:{jquery:"aloha/jquery"},RepositoryBrowser:{jquery:"aloha/jquery"},jstree:{jquery:"aloha/jquery"},jqgrid:{jquery:"aloha/jquery"},"jqgrid-locale-en":{jquery:"aloha/jquery"},
"jqgrid-locale-de":{jquery:"aloha/jquery"},"jquery-layout":{jquery:"aloha/jquery"}},a.map);k={config:{i18n:{locale:Aloha.settings.locale||"en"}},map:k};(g.__DEPS__||(g.__DEPS__={})).lang=k.locale;var e=d(k,Aloha.settings.requireConfig);e.paths=d({jquery:"vendor/jquery-1.7.2",jqueryui:"vendor/jquery-ui-1.9.0.custom-aloha"},{PubSub:"vendor/pubsub/js/pubsub-unminified",Class:"vendor/class",RepositoryBrowser:"vendor/repository-browser/js/repository-browser-unminified",jstree:"vendor/jquery.jstree",jqgrid:"vendor/jquery.jqgrid",
"jquery-layout":"vendor/jquery.layout-1.3.0-rc30.7","jqgrid-locale-en":"vendor/grid.locale.en","jqgrid-locale-de":"vendor/grid.locale.de","repository-browser-i18n-de":"vendor/repository-browser/js/repository-browser-unminified","repository-browser-i18n-en":"vendor/repository-browser/js/repository-browser-unminified"},a.paths,e.paths);for(var m in e.paths)e.paths[m]="../../aloha/src/lib/"+e.paths[m];m=Aloha.settings.predefinedModules||{};Aloha.settings.jQuery&&(m.jquery=Aloha.settings.jQuery);for(var v in m)m.hasOwnProperty(v)&&
(c(v,m[v]),delete e.paths[v]);var n=require;Aloha.require=function(a){return 1===arguments.length&&"function"===typeof a?n(["aloha"],a):n.apply(this,arguments)};Aloha.bind=function(a,b){Aloha.require(["aloha/jquery"],function(e){Aloha.bind=function(a,b){switch(f.getReadiness(a)){case "deferred":var c=f.getPhaseByEvent(a);c.deferred||(c.deferred=e.Deferred());c.deferred.done(b);break;case "immediate":b();break;case "normal":e(Aloha,"body").bind(a,b);break;default:throw"Unknown readiness";}return this};
Aloha.bind(a,b)});return this};Aloha.trigger=function(a,b){Aloha.require(["aloha/jquery"],function(e){Aloha.trigger=function(a,b){var c=f.getPhaseByEvent(a);c&&c.deferred&&(e(c.deferred.resolve),c.deferred=null);e(Aloha,"body").trigger(a,b);return this};Aloha.trigger(a,b)});return this};Aloha.unbind=function(a){Aloha.require(["aloha/jquery"],function(b){Aloha.unbind=function(a){b(Aloha,"body").unbind(a)};Aloha.unbind(a)})};Aloha.ready=function(a){this.bind("aloha-ready",a);return this};var z=Aloha.settings.jQuery;
define("aloha/jquery",["jquery"],function(a){return z||a});Aloha.jQuery=z;define("aloha","aloha/jquery util/json2 aloha/rangy-core util/class util/lang util/range util/dom aloha/core aloha/editable aloha/console aloha/markup aloha/plugin aloha/selection aloha/command aloha/jquery.aloha aloha/sidebar util/position aloha/repositorymanager aloha/repository aloha/repositoryobjects aloha/contenthandlermanager".split(" "),function(a){Aloha.features.jquery=!0;Aloha.jQuery=a;Aloha.settings=a.extendObjects(!0,
{},Aloha.defaults,Aloha.settings);return Aloha});require(e,["aloha","aloha/jquery"],function(b,c){require(e,a.entryPoints,function(){c(function(){window.rangy.init();b.init()})})})}var f={phases:[],completed:[],start:function(b,a){f.phases=f.phases.concat(b);f.proceed(0,b,a)},proceed:function(b,a,e){if(b<a.length){var c=a[b],k=function(){f.proceed(++b,a,e)},d=function(){f.completed.push(c);c.event&&Aloha.trigger(c.event)};c.fn?c.fn(d,k):(d(),k())}else e&&e()},getPhaseByEvent:function(b){var a;for(a=
0;a<f.phases.length;a++)if(b===f.phases[a].event)return f.phases[a];return null},getReadiness:function(b){var a;for(a=0;a<f.completed.length;a++)if(b===f.completed[a].event)return"immediate";return f.getPhaseByEvent(b)?"deferred":"normal"}};g.Aloha=g.Aloha||{};g.Aloha.deferInit||n()?g.Aloha.deferInit=k:Aloha._load=k})(window);define("ui/context",["aloha","jquery","util/class"],function(g,b,n){var l;l=b("#aloha-ui-context");l.length||(l=b("<div>",{"class":"aloha",id:"aloha-ui-context"}),b(function(){l.appendTo("body")}));
g=n.extend({surfaces:[],containers:[]});b.extend(g,{selector:"#aloha-ui-context",element:l});return g});define("ui/scopes",["jquery","PubSub","util/maps"],function(g,b,n){function l(a,b){if(d.hasOwnProperty(b))for(var c=d[b],f=0;f<c.length;f++){var k=c[f];a.push(k);l(a,k)}}var d={"Aloha.empty":[],"Aloha.global":["Aloha.empty"],"Aloha.continuoustext":["Aloha.global"]},c=[],k={},f=!1;Aloha.bind("aloha-selection-changed-before",function(){f=!1});Aloha.bind("aloha-selection-changed-after",function(a,
b,c){"undefined"===typeof c||f||q.setScope("Aloha.continuoustext")});var q={enterScope:function(a,e){e=e||"_globalCounter";var c=k[a];c||(c=k[a]={});var f=c[e]||0;c[e]=f+1;f||b.pub("aloha.ui.scope.change")},leaveScope:function(a,e,c){e=e||"_globalCounter";var f=k[a];if(f){var d=f[e];d&&((d-=1)&&!c?f[e]=d:(delete f[e],n.isEmpty(f)&&delete k[a],b.pub("aloha.ui.scope.change")))}},isActiveScope:function(a){return k[a]||-1!==g.inArray(a,c)?!0:!1},getPrimaryScope:function(){return c[0]},setScope:function(a){f=
!0;c[0]!=a&&(c=[a],l(c,a),b.pub("aloha.ui.scope.change"))},createScope:function(a,b){b?"string"===typeof b&&(b=[b]):b=["Aloha.empty"];d[a]=b}};return q});define("ui/container",["jquery","util/class","ui/scopes"],function(g,b,n){function l(b,d){switch(g.type(d)){case "function":return d;case "object":if(d.scope)return c[d.scope]?c[d.scope]:c[d.scope]=function(){return n.isActiveScope(d.scope)};throw"Invalid showOn configuration";default:return k}}var d=0,c={},k=function(){return!0};b=b.extend({element:null,
_constructor:function(b,c){var a=l(this,c.showOn),e;a.showOnId||(a.showOnId=++d);e=a.showOnId;var m=b.containers[e];this.context=b;m||(m=b.containers[e]={shouldShow:a,containers:[]});m.containers.push(this)},show:function(){},hide:function(){},focus:function(){},foreground:function(){},childVisible:function(b,c){},childFocus:function(b){},childForeground:function(b){}});g.extend(b,{showContainersForContext:function(b,c){var a,e,m;if(b.containers)for(e in m=b.containers,m)if(m.hasOwnProperty(e)){a=
m[e];var k=a.containers;a=a.shouldShow(c)?"show":"hide";for(var d=void 0,d=0;d<k.length;d++)k[d][a]()}}});return b});define("ui/surface",["aloha/core","jquery","util/class","ui/container"],function(g,b,n,l){var d=n.extend({_constructor:function(b){b.surfaces.push(this)},isActive:function(){return!0}});b.extend(d,{range:null,show:function(c){b.each(c.surfaces,function(b,c){c.show()})},hide:function(c){b.each(c.surfaces,function(b,c){c.hide()})},trackRange:function(b){b.bind("mousedown",function(b){b.originalEvent.stopSelectionUpdate=
!0;g.eventHandled=!0;d.suppressHide=!0;g.activeEditable&&(b=g.getSelection(),d.range=0<b.getRangeCount()?b.getRangeAt(0):null)});b.bind("mouseup",function(b){b.originalEvent.stopSelectionUpdate=!0;g.eventHandled=!1;d.suppressHide=!1})}});return d});define("ui/component",["aloha/core","jquery","util/class"],function(g,b,n){var l=0;return n.extend({id:0,isInstance:!0,container:null,type:null,visible:!0,_constructor:function(){this.id=l++;this.init()},adoptParent:function(b){this.container=b},init:function(){},
isVisible:function(){return this.visible},show:function(b){!1===b?this.hide():this.visible||(this.visible=!0,this.element.show(),this.container&&this.container.childVisible(this,!0))},hide:function(){this.visible&&(this.visible=!1,this.element.hide(),this.container&&this.container.childVisible(this,!1))},focus:function(){this.element.focus();this.container&&this.container.childFocus(this)},foreground:function(){this.container&&this.container.childForeground(this)},enable:function(b){},disable:function(){}})});
define("jqueryui",["jquery"],function(g){(function(b,g){function l(c,k){var a,e;a=c.nodeName.toLowerCase();if("area"===a){a=c.parentNode;e=a.name;if(!c.href||!e||"map"!==a.nodeName.toLowerCase())return!1;a=b("img[usemap=#"+e+"]")[0];return!!a&&d(a)}return(/input|select|textarea|button|object/.test(a)?!c.disabled:"a"===a?c.href||k:k)&&d(c)}function d(c){return!b(c).parents().andSelf().filter(function(){return"hidden"===b.css(this,"visibility")||b.expr.filters.hidden(this)}).length}var c=0,k=/^ui-id-\d+$/;
b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),b.fn.extend({_focus:b.fn.focus,focus:function(c,k){return"number"===typeof c?this.each(function(){var a=this;setTimeout(function(){b(a).focus();k&&k.call(a)},c)}):this._focus.apply(this,
arguments)},scrollParent:function(){var c;c=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||
!c.length?b(document):c},zIndex:function(c){if(c!==g)return this.css("zIndex",c);if(this.length){c=b(this[0]);for(var k;c.length&&c[0]!==document;){k=c.css("position");if("absolute"===k||"relative"===k||"fixed"===k)if(k=parseInt(c.css("zIndex"),10),!isNaN(k)&&0!==k)return k;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){k.test(this.id)&&b(this).removeAttr("id")})}}),b("<a>").outerWidth(1).jquery||
b.each(["Width","Height"],function(c,k){function a(a,c,m,f){b.each(e,function(){c-=parseFloat(b.css(a,"padding"+this))||0;m&&(c-=parseFloat(b.css(a,"border"+this+"Width"))||0);f&&(c-=parseFloat(b.css(a,"margin"+this))||0)});return c}var e="Width"===k?["Left","Right"]:["Top","Bottom"],m=k.toLowerCase(),d={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+k]=function(e){return e===g?d["inner"+k].call(this):this.each(function(){b(this).css(m,
a(this,e)+"px")})};b.fn["outer"+k]=function(e,c){return"number"!==typeof e?d["outer"+k].call(this,e):this.each(function(){b(this).css(m,a(this,e,!0,c)+"px")})}}),b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(c){return function(k){return!!b.data(k,c)}}):function(c,k,a){return!!b.data(c,a[3])},focusable:function(c){return l(c,!isNaN(b.attr(c,"tabindex")))},tabbable:function(c){var k=b.attr(c,"tabindex"),a=isNaN(k);return(a||0<=k)&&l(c,!a)}}),b(function(){var c=document.body,
k=c.appendChild(k=document.createElement("div"));k.offsetHeight;b.extend(k.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===k.offsetHeight;b.support.selectstart="onselectstart"in k;c.removeChild(k).style.display="none"}),b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),
b.extend(b.ui,{plugin:{add:function(c,k,a){var e;c=b.ui[c].prototype;for(e in a)c.plugins[e]=c.plugins[e]||[],c.plugins[e].push([k,a[e]])},call:function(b,c,a){var e=b.plugins[c];if(e&&b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType)for(c=0;c<e.length;c++)b.options[e[c][0]]&&e[c][1].apply(b.element,a)}},contains:b.contains,hasScroll:function(c,k){if("hidden"===b(c).css("overflow"))return!1;var a=k&&"left"===k?"scrollLeft":"scrollTop",e=!1;if(0<c[a])return!0;c[a]=1;e=0<c[a];c[a]=0;return e},
isOverAxis:function(b,c,a){return b>c&&b<c+a},isOver:function(c,k,a,e,m,d){return b.ui.isOverAxis(c,a,m)&&b.ui.isOverAxis(k,e,d)}}))})(g);(function(b,g){var l=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(k){for(var f=0,d;null!=(d=k[f]);f++)try{b(d).triggerHandler("remove")}catch(a){}c(k)};b.widget=function(c,f,d){var a,e,m,l,g=c.split(".")[0];c=c.split(".")[1];a=g+"-"+c;d||(d=f,f=b.Widget);b.expr[":"][a.toLowerCase()]=function(e){return!!b.data(e,a)};b[g]=b[g]||{};e=b[g][c];m=b[g][c]=
function(a,b){if(!this._createWidget)return new m(a,b);arguments.length&&this._createWidget(a,b)};b.extend(m,e,{version:d.version,_proto:b.extend({},d),_childConstructors:[]});l=new f;l.options=b.widget.extend({},l.options);b.each(d,function(a,e){b.isFunction(e)&&(d[a]=function(){var b=function(){return f.prototype[a].apply(this,arguments)},c=function(b){return f.prototype[a].apply(this,b)};return function(){var a=this._super,m=this._superApply,f;this._super=b;this._superApply=c;f=e.apply(this,arguments);
this._super=a;this._superApply=m;return f}}())});m.prototype=b.widget.extend(l,{widgetEventPrefix:c},d,{constructor:m,namespace:g,widgetName:c,widgetBaseClass:a,widgetFullName:a});e?(b.each(e._childConstructors,function(a,e){var c=e.prototype;b.widget(c.namespace+"."+c.widgetName,m,e._proto)}),delete e._childConstructors):f._childConstructors.push(m);b.widget.bridge(c,m)};b.widget.extend=function(c){for(var f=d.call(arguments,1),q=0,a=f.length,e,m;q<a;q++)for(e in f[q])m=f[q][e],f[q].hasOwnProperty(e)&&
m!==g&&(c[e]=b.isPlainObject(m)?b.widget.extend({},c[e],m):m);return c};b.widget.bridge=function(c,f){var q=f.prototype.widgetFullName;b.fn[c]=function(a){var e="string"===typeof a,m=d.call(arguments,1),l=this;a=!e&&m.length?b.widget.extend.apply(null,[a].concat(m)):a;e?this.each(function(){var e,f=b.data(this,q);if(!f)return b.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+a+"'");if(!b.isFunction(f[a])||"_"===a.charAt(0))return b.error("no such method '"+
a+"' for "+c+" widget instance");e=f[a].apply(f,m);if(e!==f&&e!==g)return l=e&&e.jquery?l.pushStack(e.get()):e,!1}):this.each(function(){var e=b.data(this,q);e?e.option(a||{})._init():new f(a,this)});return l}};b.Widget=function(b,c){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,f){f=b(f||this.defaultElement||this)[0];this.element=b(f);this.uuid=l++;this.eventNamespace=
"."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),c);this.bindings=b();this.hoverable=b();this.focusable=b();f!==this&&(b.data(f,this.widgetName,this),b.data(f,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=b(f.style?f.ownerDocument:f.document||f),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,
_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:b.noop,widget:function(){return this.element},option:function(c,f){var d=c,a,e,m;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof c)if(d={},a=c.split("."),c=a.shift(),a.length){e=d[c]=b.widget.extend({},this.options[c]);for(m=0;m<a.length-1;m++)e[a[m]]=e[a[m]]||{},e=e[a[m]];c=a.pop();if(f===g)return e[c]===g?null:e[c];e[c]=f}else{if(f===g)return this.options[c]===g?null:this.options[c];d[c]=f}this._setOptions(d);return this},_setOptions:function(b){for(var c in b)this._setOption(c,
b[c]);return this},_setOption:function(b,c){this.options[b]=c;"disabled"===b&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!c).attr("aria-disabled",c),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,f){f?(c=b(c),this.bindings=this.bindings.add(c)):(f=c,c=this.element);var d=this;b.each(f,
function(a,e){function m(){if(!0!==d.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof e?d[e]:e).apply(d,arguments)}"string"!==typeof e&&(m.guid=e.guid=e.guid||m.guid||b.guid++);var f=a.match(/^(\w+)\s*(.*)$/),l=f[1]+d.eventNamespace;(f=f[2])?d.widget().delegate(f,l,m):c.bind(l,m)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.unbind(c).undelegate(c)},_delay:function(b,c){var d=this;return setTimeout(function(){return("string"===
typeof b?d[b]:b).apply(d,arguments)},c||0)},_hoverable:function(c){this.hoverable=this.hoverable.add(c);this._on(c,{mouseenter:function(c){b(c.currentTarget).addClass("ui-state-hover")},mouseleave:function(c){b(c.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(c){this.focusable=this.focusable.add(c);this._on(c,{focusin:function(c){b(c.currentTarget).addClass("ui-state-focus")},focusout:function(c){b(c.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(c,f,d){var a,
e=this.options[c];d=d||{};f=b.Event(f);f.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();f.target=this.element[0];if(c=f.originalEvent)for(a in c)a in f||(f[a]=c[a]);this.element.trigger(f,d);return!(b.isFunction(e)&&!1===e.apply(this.element[0],[f].concat(d))||f.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(c,f){b.Widget.prototype["_"+c]=function(d,a,e){"string"===typeof a&&(a={effect:a});var m,l=a?!0===a||"number"===typeof a?f:a.effect||f:c;a=
a||{};"number"===typeof a&&(a={duration:a});m=!b.isEmptyObject(a);a.complete=e;a.delay&&d.delay(a.delay);if(m&&b.effects&&(b.effects.effect[l]||!1!==b.uiBackCompat&&b.effects[l]))d[c](a);else if(l!==c&&d[l])d[l](a.duration,a.easing,e);else d.queue(function(a){b(this)[c]();e&&e.call(d[0]);a()})}});!1!==b.uiBackCompat&&(b.Widget.prototype._getCreateOptions=function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]})})(g);(function(b,g){var l=!1;b(document).mouseup(function(b){l=
!1});b.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(b){return d._mouseDown(b)}).bind("click."+this.widgetName,function(c){if(!0===b.data(c.target,d.widgetName+".preventClickEvent"))return b.removeData(c.target,d.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);
this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!l){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var c=this,k=1===d.which,f="string"===typeof this.options.cancel&&d.target.nodeName?b(d.target).closest(this.options.cancel).length:!1;if(!k||f||!this._mouseCapture(d))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=!1!==this._mouseStart(d),!this._mouseStarted))return d.preventDefault(),!0;!0===b.data(d.target,this.widgetName+".preventClickEvent")&&b.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return c._mouseMove(b)};this._mouseUpDelegate=function(b){return c._mouseUp(b)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);d.preventDefault();return l=!0}},_mouseMove:function(d){if(b.browser.msie&&!(9<=document.documentMode||d.button))return this._mouseUp(d);if(this._mouseStarted)return this._mouseDrag(d),d.preventDefault();this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,d))?this._mouseDrag(d):this._mouseUp(d));return!this._mouseStarted},_mouseUp:function(d){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&b.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return!0}})})(g);
(function(b,n){function l(a,b,e){return[parseInt(a[0],10)*(v.test(a[0])?b/100:1),parseInt(a[1],10)*(v.test(a[1])?e/100:1)]}b.ui=b.ui||{};var d,c=Math.max,k=Math.abs,f=Math.round,q=/left|center|right/,a=/top|center|bottom/,e=/[\+\-]\d+%?/,m=/^\w+/,v=/%$/,x=b.fn.position;b.position={scrollbarWidth:function(){if(d!==n)return d;var a,e,c=b("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");e=c.children()[0];b("body").append(c);a=e.offsetWidth;
c.css("overflow","scroll");e=e.offsetWidth;a===e&&(e=c[0].clientWidth);c.remove();return d=a-e},getScrollInfo:function(a){var e=a.isWindow?"":a.element.css("overflow-x"),c=a.isWindow?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight;return{width:"scroll"===e||"auto"===e&&a.width<a.element[0].scrollWidth?b.position.scrollbarWidth():0,height:c?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=b(a||window);var e=b.isWindow(a[0]);return{element:a,
isWindow:e,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:e?a.width():a.outerWidth(),height:e?a.height():a.outerHeight()}}};b.fn.position=function(d){if(!d||!d.of)return x.apply(this,arguments);d=b.extend({},d);var g,v,n,p,s,r=b(d.of),t=b.position.getWithinInfo(d.within),J=b.position.getScrollInfo(t),M=r[0],E=(d.collision||"flip").split(" "),K={};9===M.nodeType?(v=r.width(),n=r.height(),p={top:0,left:0}):b.isWindow(M)?(v=r.width(),n=r.height(),p={top:r.scrollTop(),
left:r.scrollLeft()}):M.preventDefault?(d.at="left top",v=n=0,p={top:M.pageY,left:M.pageX}):(v=r.outerWidth(),n=r.outerHeight(),p=r.offset());s=b.extend({},p);b.each(["my","at"],function(){var b=(d[this]||"").split(" "),c,f;1===b.length&&(b=q.test(b[0])?b.concat(["center"]):a.test(b[0])?["center"].concat(b):["center","center"]);b[0]=q.test(b[0])?b[0]:"center";b[1]=a.test(b[1])?b[1]:"center";c=e.exec(b[0]);f=e.exec(b[1]);K[this]=[c?c[0]:0,f?f[0]:0];d[this]=[m.exec(b[0])[0],m.exec(b[1])[0]]});1===E.length&&
(E[1]=E[0]);"right"===d.at[0]?s.left+=v:"center"===d.at[0]&&(s.left+=v/2);"bottom"===d.at[1]?s.top+=n:"center"===d.at[1]&&(s.top+=n/2);g=l(K.at,v,n);s.left+=g[0];s.top+=g[1];return this.each(function(){var a,e,m=b(this),q=m.outerWidth(),x=m.outerHeight(),M=parseInt(b.css(this,"marginLeft"),10)||0,aa=parseInt(b.css(this,"marginTop"),10)||0,ca=q+M+(parseInt(b.css(this,"marginRight"),10)||0)+J.width,Y=x+aa+(parseInt(b.css(this,"marginBottom"),10)||0)+J.height,U=b.extend({},s),V=l(K.my,m.outerWidth(),
m.outerHeight());"right"===d.my[0]?U.left-=q:"center"===d.my[0]&&(U.left-=q/2);"bottom"===d.my[1]?U.top-=x:"center"===d.my[1]&&(U.top-=x/2);U.left+=V[0];U.top+=V[1];b.support.offsetFractions||(U.left=f(U.left),U.top=f(U.top));a={marginLeft:M,marginTop:aa};b.each(["left","top"],function(e,c){if(b.ui.position[E[e]])b.ui.position[E[e]][c](U,{targetWidth:v,targetHeight:n,elemWidth:q,elemHeight:x,collisionPosition:a,collisionWidth:ca,collisionHeight:Y,offset:[g[0]+V[0],g[1]+V[1]],my:d.my,at:d.at,within:t,
elem:m})});b.fn.bgiframe&&m.bgiframe();d.using&&(e=function(a){var b=p.left-U.left,e=b+v-q,f=p.top-U.top,l=f+n-x,g={target:{element:r,left:p.left,top:p.top,width:v,height:n},element:{element:m,left:U.left,top:U.top,width:q,height:x},horizontal:0>e?"left":0<b?"right":"center",vertical:0>l?"top":0<f?"bottom":"middle"};v<q&&k(b+e)<v&&(g.horizontal="center");n<x&&k(f+l)<n&&(g.vertical="middle");c(k(b),k(e))>c(k(f),k(l))?g.important="horizontal":g.important="vertical";d.using.call(this,a,g)});m.offset(b.extend(U,
{using:e}))})};b.ui.position={fit:{left:function(a,b){var e=b.within,m=e.isWindow?e.scrollLeft:e.offset.left,f=e.width,k=a.left-b.collisionPosition.marginLeft,e=m-k,d=k+b.collisionWidth-f-m;b.collisionWidth>f?0<e&&0>=d?(m=a.left+e+b.collisionWidth-f-m,a.left+=e-m):a.left=0<d&&0>=e?m:e>d?m+f-b.collisionWidth:m:a.left=0<e?a.left+e:0<d?a.left-d:c(a.left-k,a.left)},top:function(a,b){var e=b.within,m=e.isWindow?e.scrollTop:e.offset.top,f=b.within.height,k=a.top-b.collisionPosition.marginTop,e=m-k,d=k+
b.collisionHeight-f-m;b.collisionHeight>f?0<e&&0>=d?(m=a.top+e+b.collisionHeight-f-m,a.top+=e-m):a.top=0<d&&0>=e?m:e>d?m+f-b.collisionHeight:m:a.top=0<e?a.top+e:0<d?a.top-d:c(a.top-k,a.top)}},flip:{left:function(a,b){var e=b.within,c=e.offset.left+e.scrollLeft,m=e.width,f=e.isWindow?e.scrollLeft:e.offset.left,d=a.left-b.collisionPosition.marginLeft,e=d-f,q=d+b.collisionWidth-m-f,d="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:
0,g=-2*b.offset[0];if(0>e){if(c=a.left+d+l+g+b.collisionWidth-m-c,0>c||c<k(e))a.left+=d+l+g}else 0<q&&(c=a.left-b.collisionPosition.marginLeft+d+l+g-f,0<c||k(c)<q)&&(a.left+=d+l+g)},top:function(a,b){var e=b.within,c=e.offset.top+e.scrollTop,m=e.height,f=e.isWindow?e.scrollTop:e.offset.top,d=a.top-b.collisionPosition.marginTop,e=d-f,q=d+b.collisionHeight-m-f,d="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,l="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,g=-2*
b.offset[1];0>e?(c=a.top+d+l+g+b.collisionHeight-m-c,a.top+d+l+g>e&&(0>c||c<k(e))&&(a.top+=d+l+g)):0<q&&(c=a.top-b.collisionPosition.marginTop+d+l+g-f,a.top+d+l+g>q&&(0<c||k(c)<q)&&(a.top+=d+l+g))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,e,c,m,f=document.getElementsByTagName("body")[0];c=document.createElement("div");
a=document.createElement(f?"div":"body");e={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&b.extend(e,{position:"absolute",left:"-1000px",top:"-1000px"});for(m in e)a.style[m]=e[m];a.appendChild(c);e=f||document.documentElement;e.insertBefore(a,e.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=b(c).offset().left;b.support.offsetFractions=10<c&&11>c;a.innerHTML="";e.removeChild(a)})();!1!==b.uiBackCompat&&function(a){var b=a.fn.position;a.fn.position=
function(e){if(!e||!e.offset)return b.call(this,e);var c=e.offset.split(" "),m=e.at.split(" ");1===c.length&&(c[1]=c[0]);/^\d/.test(c[0])&&(c[0]="+"+c[0]);/^\d/.test(c[1])&&(c[1]="+"+c[1]);1===m.length&&(/left|center|right/.test(m[0])?m[1]="center":(m[1]=m[0],m[0]="center"));return b.call(this,a.extend(e,{at:m[0]+c[0]+" "+m[1]+c[1],offset:n}))}}(g)})(g);(function(b,g){b.widget("ui.draggable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,
containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&
this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(l){var d=this.options;if(this.helper||d.disabled||b(l.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(l);if(!this.handle)return!1;b(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return!0},_mouseStart:function(l){var d=this.options;this.helper=this._createHelper(l);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();b.ui.ddmanager&&(b.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset=
{top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:l.pageX-this.offset.left,top:l.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(l);this.originalPageX=l.pageX;this.originalPageY=l.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(!1===this._trigger("start",l))return this._clear(),!1;this._cacheHelperProportions();
b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,l);this._mouseDrag(l,!0);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,l);return!0},_mouseDrag:function(l,d){this.position=this._generatePosition(l);this.positionAbs=this._convertPositionTo("absolute");if(!d){var c=this._uiHash();if(!1===this._trigger("drag",l,c))return this._mouseUp({}),!1;this.position=c.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==
this.options.axis||(this.helper[0].style.top=this.position.top+"px");b.ui.ddmanager&&b.ui.ddmanager.drag(this,l);return!1},_mouseStop:function(l){var d=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(d=b.ui.ddmanager.drop(this,l));this.dropped&&(d=this.dropped,this.dropped=!1);for(var c=this.element[0],k=!1;c&&(c=c.parentNode);)c==document&&(k=!0);if(!k&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!d||"valid"==this.options.revert&&d||!0===this.options.revert||b.isFunction(this.options.revert)&&
this.options.revert.call(this.element,d)){var f=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==f._trigger("stop",l)&&f._clear()})}else!1!==this._trigger("stop",l)&&this._clear();return!1},_mouseUp:function(l){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,l);return b.ui.mouse.prototype._mouseUp.call(this,l)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(l){var d=this.options.handle&&b(this.options.handle,this.element).length?!1:!0;b(this.options.handle,this.element).find("*").andSelf().each(function(){this==l.target&&(d=!0)});return d},_createHelper:function(l){var d=this.options;l=b.isFunction(d.helper)?b(d.helper.apply(this.element[0],[l])):"clone"==d.helper?this.element.clone().removeAttr("id"):this.element;l.parents("body").length||l.appendTo("parent"==d.appendTo?this.element[0].parentNode:
d.appendTo);l[0]==this.element[0]||/(fixed|absolute)/.test(l.css("position"))||l.css("position","absolute");return l},_adjustOffsetFromHelper:function(l){"string"==typeof l&&(l=l.split(" "));b.isArray(l)&&(l={left:+l[0],top:+l[1]||0});"left"in l&&(this.offset.click.left=l.left+this.margins.left);"right"in l&&(this.offset.click.left=this.helperProportions.width-l.right+this.margins.left);"top"in l&&(this.offset.click.top=l.top+this.margins.top);"bottom"in l&&(this.offset.click.top=this.helperProportions.height-
l.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var l=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(l.left+=this.scrollParent.scrollLeft(),l.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)l={top:0,left:0};return{top:l.top+(parseInt(this.offsetParent.css("borderTopWidth"),
10)||0),left:l.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),
10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var l=this.options;"parent"==l.containment&&(l.containment=this.helper[0].parentNode);if("document"==l.containment||"window"==l.containment)this.containment=["document"==l.containment?0:b(window).scrollLeft()-this.offset.relative.left-
this.offset.parent.left,"document"==l.containment?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==l.containment?0:b(window).scrollLeft())+b("document"==l.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==l.containment?0:b(window).scrollTop())+(b("document"==l.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(l.containment)||
l.containment.constructor==Array)l.containment.constructor==Array&&(this.containment=l.containment);else{var l=b(l.containment),d=l[0];if(d){l.offset();var c="hidden"!=b(d).css("overflow");this.containment=[(parseInt(b(d).css("borderLeftWidth"),10)||0)+(parseInt(b(d).css("paddingLeft"),10)||0),(parseInt(b(d).css("borderTopWidth"),10)||0)+(parseInt(b(d).css("paddingTop"),10)||0),(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(b(d).css("borderLeftWidth"),10)||0)-(parseInt(b(d).css("paddingRight"),
10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(b(d).css("borderTopWidth"),10)||0)-(parseInt(b(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=l}}},_convertPositionTo:function(l,d){d||(d=this.position);var c="absolute"==l?1:-1,k="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])?
this.scrollParent:this.offsetParent,f=/(html|body)/i.test(k[0].tagName);return{top:d.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:k.scrollTop())*c,left:d.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:k.scrollLeft())*c}},_generatePosition:function(l){var d=this.options,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],
this.offsetParent[0])?this.scrollParent:this.offsetParent,k=/(html|body)/i.test(c[0].tagName),f=l.pageX,q=l.pageY;if(this.originalPosition){var a;this.containment&&(this.relative_container?(a=this.relative_container.offset(),a=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):a=this.containment,l.pageX-this.offset.click.left<a[0]&&(f=a[0]+this.offset.click.left),l.pageY-this.offset.click.top<a[1]&&(q=a[1]+this.offset.click.top),l.pageX-this.offset.click.left>
a[2]&&(f=a[2]+this.offset.click.left),l.pageY-this.offset.click.top>a[3]&&(q=a[3]+this.offset.click.top));d.grid&&(q=d.grid[1]?this.originalPageY+Math.round((q-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,q=a?q-this.offset.click.top<a[1]||q-this.offset.click.top>a[3]?q-this.offset.click.top<a[1]?q+d.grid[1]:q-d.grid[1]:q:q,f=d.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,f=a?f-this.offset.click.left<a[0]||f-this.offset.click.left>
a[2]?f-this.offset.click.left<a[0]?f+d.grid[0]:f-d.grid[0]:f:f)}return{top:q-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():k?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():k?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||
this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(l,d,c){c=c||this._uiHash();b.ui.plugin.call(this,l,[d,c]);"drag"==l&&(this.positionAbs=this._convertPositionTo("absolute"));return b.Widget.prototype._trigger.call(this,l,d,c)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(l,d){var c=b(this).data("draggable"),
k=c.options,f=b.extend({},d,{item:c.element});c.sortables=[];b(k.connectToSortable).each(function(){var k=b.data(this,"sortable");k&&!k.options.disabled&&(c.sortables.push({instance:k,shouldRevert:k.options.revert}),k.refreshPositions(),k._trigger("activate",l,f))})},stop:function(l,d){var c=b(this).data("draggable"),k=b.extend({},d,{item:c.element});b.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&
(this.instance.options.revert=!0),this.instance._mouseStop(l),this.instance.options.helper=this.instance.options._helper,"original"==c.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",l,k))})},drag:function(l,d){var c=b(this).data("draggable"),k=this;b.each(c.sortables,function(f){this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;
this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(k).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},l.target=this.instance.currentItem[0],this.instance._mouseCapture(l,!0),this.instance._mouseStart(l,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=
c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",l),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(l)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",
l,this.instance._uiHash(this.instance)),this.instance._mouseStop(l,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",l),c.dropped=!1)})}});b.ui.plugin.add("draggable","cursor",{start:function(l,d){var c=b("body"),k=b(this).data("draggable").options;c.css("cursor")&&(k._cursor=c.css("cursor"));c.css("cursor",k.cursor)},stop:function(l,d){var c=b(this).data("draggable").options;
c._cursor&&b("body").css("cursor",c._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(l,d){var c=b(d.helper),k=b(this).data("draggable").options;c.css("opacity")&&(k._opacity=c.css("opacity"));c.css("opacity",k.opacity)},stop:function(l,d){var c=b(this).data("draggable").options;c._opacity&&b(d.helper).css("opacity",c._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(l,d){var c=b(this).data("draggable");c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName&&
(c.overflowOffset=c.scrollParent.offset())},drag:function(l,d){var c=b(this).data("draggable"),k=c.options,f=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(k.axis&&"x"==k.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-l.pageY<k.scrollSensitivity?c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop+k.scrollSpeed:l.pageY-c.overflowOffset.top<k.scrollSensitivity&&(c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop-k.scrollSpeed)),k.axis&&"y"==k.axis||(c.overflowOffset.left+
c.scrollParent[0].offsetWidth-l.pageX<k.scrollSensitivity?c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft+k.scrollSpeed:l.pageX-c.overflowOffset.left<k.scrollSensitivity&&(c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft-k.scrollSpeed))):(k.axis&&"x"==k.axis||(l.pageY-b(document).scrollTop()<k.scrollSensitivity?f=b(document).scrollTop(b(document).scrollTop()-k.scrollSpeed):b(window).height()-(l.pageY-b(document).scrollTop())<k.scrollSensitivity&&(f=b(document).scrollTop(b(document).scrollTop()+
k.scrollSpeed))),k.axis&&"y"==k.axis||(l.pageX-b(document).scrollLeft()<k.scrollSensitivity?f=b(document).scrollLeft(b(document).scrollLeft()-k.scrollSpeed):b(window).width()-(l.pageX-b(document).scrollLeft())<k.scrollSensitivity&&(f=b(document).scrollLeft(b(document).scrollLeft()+k.scrollSpeed))));!1!==f&&b.ui.ddmanager&&!k.dropBehaviour&&b.ui.ddmanager.prepareOffsets(c,l)}});b.ui.plugin.add("draggable","snap",{start:function(l,d){var c=b(this).data("draggable"),k=c.options;c.snapElements=[];b(k.snap.constructor!=
String?k.snap.items||":data(draggable)":k.snap).each(function(){var f=b(this),k=f.offset();this!=c.element[0]&&c.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:k.top,left:k.left})})},drag:function(l,d){for(var c=b(this).data("draggable"),k=c.options,f=k.snapTolerance,q=d.offset.left,a=q+c.helperProportions.width,e=d.offset.top,m=e+c.helperProportions.height,g=c.snapElements.length-1;0<=g;g--){var n=c.snapElements[g].left,z=n+c.snapElements[g].width,A=c.snapElements[g].top,
y=A+c.snapElements[g].height;if(n-f<q&&q<z+f&&A-f<e&&e<y+f||n-f<q&&q<z+f&&A-f<m&&m<y+f||n-f<a&&a<z+f&&A-f<e&&e<y+f||n-f<a&&a<z+f&&A-f<m&&m<y+f){if("inner"!=k.snapMode){var p=Math.abs(A-m)<=f,s=Math.abs(y-e)<=f,D=Math.abs(n-a)<=f,r=Math.abs(z-q)<=f;p&&(d.position.top=c._convertPositionTo("relative",{top:A-c.helperProportions.height,left:0}).top-c.margins.top);s&&(d.position.top=c._convertPositionTo("relative",{top:y,left:0}).top-c.margins.top);D&&(d.position.left=c._convertPositionTo("relative",{top:0,
left:n-c.helperProportions.width}).left-c.margins.left);r&&(d.position.left=c._convertPositionTo("relative",{top:0,left:z}).left-c.margins.left)}var t=p||s||D||r;"outer"!=k.snapMode&&(p=Math.abs(A-e)<=f,s=Math.abs(y-m)<=f,D=Math.abs(n-q)<=f,r=Math.abs(z-a)<=f,p&&(d.position.top=c._convertPositionTo("relative",{top:A,left:0}).top-c.margins.top),s&&(d.position.top=c._convertPositionTo("relative",{top:y-c.helperProportions.height,left:0}).top-c.margins.top),D&&(d.position.left=c._convertPositionTo("relative",
{top:0,left:n}).left-c.margins.left),r&&(d.position.left=c._convertPositionTo("relative",{top:0,left:z-c.helperProportions.width}).left-c.margins.left));!c.snapElements[g].snapping&&(p||s||D||r||t)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,l,b.extend(c._uiHash(),{snapItem:c.snapElements[g].item}));c.snapElements[g].snapping=p||s||D||r||t}else c.snapElements[g].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,l,b.extend(c._uiHash(),{snapItem:c.snapElements[g].item})),
c.snapElements[g].snapping=!1}}});b.ui.plugin.add("draggable","stack",{start:function(l,d){var c=b(this).data("draggable").options,c=b.makeArray(b(c.stack)).sort(function(c,k){return(parseInt(b(c).css("zIndex"),10)||0)-(parseInt(b(k).css("zIndex"),10)||0)});if(c.length){var k=parseInt(c[0].style.zIndex)||0;b(c).each(function(b){this.style.zIndex=k+b});this[0].style.zIndex=k+c.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(l,d){var c=b(d.helper),k=b(this).data("draggable").options;
c.css("zIndex")&&(k._zIndex=c.css("zIndex"));c.css("zIndex",k.zIndex)},stop:function(l,d){var c=b(this).data("draggable").options;c._zIndex&&b(d.helper).css("zIndex",c._zIndex)}})})(g);(function(b,g){b.widget("ui.droppable",{version:"1.9.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var l=this.options,d=l.accept;this.isover=0;this.isout=1;this.accept=b.isFunction(d)?d:function(b){return b.is(d)};
this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};b.ui.ddmanager.droppables[l.scope]=b.ui.ddmanager.droppables[l.scope]||[];b.ui.ddmanager.droppables[l.scope].push(this);l.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var l=b.ui.ddmanager.droppables[this.options.scope],d=0;d<l.length;d++)l[d]==this&&l.splice(d,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(l,d){"accept"==l&&(this.accept=b.isFunction(d)?
d:function(b){return b.is(d)});b.Widget.prototype._setOption.apply(this,arguments)},_activate:function(l){var d=b.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);d&&this._trigger("activate",l,this.ui(d))},_deactivate:function(l){var d=b.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);d&&this._trigger("deactivate",l,this.ui(d))},_over:function(l){var d=b.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!=
this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",l,this.ui(d)))},_out:function(l){var d=b.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!=this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",l,this.ui(d)))},_drop:function(l,d){var c=d||b.ui.ddmanager.current;
if(!c||(c.currentItem||c.element)[0]==this.element[0])return!1;var k=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=b.data(this,"droppable");if(f.options.greedy&&!f.options.disabled&&f.options.scope==c.options.scope&&f.accept.call(f.element[0],c.currentItem||c.element)&&b.ui.intersect(c,b.extend(f,{offset:f.element.offset()}),f.options.tolerance))return k=!0,!1});return k?!1:this.accept.call(this.element[0],c.currentItem||c.element)?(this.options.activeClass&&
this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",l,this.ui(c)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});b.ui.intersect=function(l,d,c){if(!d.offset)return!1;var k=(l.positionAbs||l.position.absolute).left,f=k+l.helperProportions.width,q=(l.positionAbs||l.position.absolute).top,a=q+l.helperProportions.height,
e=d.offset.left,m=e+d.proportions.width,g=d.offset.top,n=g+d.proportions.height;switch(c){case "fit":return e<=k&&f<=m&&g<=q&&a<=n;case "intersect":return e<k+l.helperProportions.width/2&&f-l.helperProportions.width/2<m&&g<q+l.helperProportions.height/2&&a-l.helperProportions.height/2<n;case "pointer":return b.ui.isOver((l.positionAbs||l.position.absolute).top+(l.clickOffset||l.offset.click).top,(l.positionAbs||l.position.absolute).left+(l.clickOffset||l.offset.click).left,g,e,d.proportions.height,
d.proportions.width);case "touch":return(q>=g&&q<=n||a>=g&&a<=n||q<g&&a>n)&&(k>=e&&k<=m||f>=e&&f<=m||k<e&&f>m);default:return!1}};b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(l,d){var c=b.ui.ddmanager.droppables[l.options.scope]||[],k=d?d.type:null,f=(l.currentItem||l.element).find(":data(droppable)").andSelf(),q=0;a:for(;q<c.length;q++)if(!(c[q].options.disabled||l&&!c[q].accept.call(c[q].element[0],l.currentItem||l.element))){for(var a=0;a<f.length;a++)if(f[a]==
c[q].element[0]){c[q].proportions.height=0;continue a}c[q].visible="none"!=c[q].element.css("display");c[q].visible&&("mousedown"==k&&c[q]._activate.call(c[q],d),c[q].offset=c[q].element.offset(),c[q].proportions={width:c[q].element[0].offsetWidth,height:c[q].element[0].offsetHeight})}},drop:function(l,d){var c=!1;b.each(b.ui.ddmanager.droppables[l.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&b.ui.intersect(l,this,this.options.tolerance)&&(c=this._drop.call(this,
d)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],l.currentItem||l.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,d)))});return c},dragStart:function(l,d){l.element.parentsUntil("body").bind("scroll.droppable",function(){l.options.refreshPositions||b.ui.ddmanager.prepareOffsets(l,d)})},drag:function(l,d){l.options.refreshPositions&&b.ui.ddmanager.prepareOffsets(l,d);b.each(b.ui.ddmanager.droppables[l.options.scope]||[],function(){if(!this.options.disabled&&
!this.greedyChild&&this.visible){var c=b.ui.intersect(l,this,this.options.tolerance);if(c=c||1!=this.isover?c&&0==this.isover?"isover":null:"isout"){var k;if(this.options.greedy){var f=this.options.scope,q=this.element.parents(":data(droppable)").filter(function(){return b.data(this,"droppable").options.scope===f});q.length&&(k=b.data(q[0],"droppable"),k.greedyChild="isover"==c?1:0)}k&&"isover"==c&&(k.isover=0,k.isout=1,k._out.call(k,d));this[c]=1;this["isout"==c?"isover":"isout"]=0;this["isover"==
c?"_over":"_out"].call(this,d);k&&"isout"==c&&(k.isout=0,k.isover=1,k._over.call(k,d))}}})},dragStop:function(l,d){l.element.parentsUntil("body").unbind("scroll.droppable");l.options.refreshPositions||b.ui.ddmanager.prepareOffsets(l,d)}}})(g);(function(b,g){b.widget("ui.resizable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,
maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var c=this,k=this.options;this.element.addClass("ui-resizable");b.extend(this,{_aspectRatio:!!k.aspectRatio,aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,
marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=k.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",
sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var f=this.handles.split(",");this.handles={};for(var d=0;d<f.length;d++){var a=b.trim(f[d]),e=b('<div class="ui-resizable-handle ui-resizable-'+a+'"></div>');e.css({zIndex:k.zIndex});"se"==a&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[a]=".ui-resizable-"+a;this.element.append(e)}}this._renderAxis=function(a){a=
a||this.element;for(var e in this.handles){this.handles[e].constructor==String&&(this.handles[e]=b(this.handles[e],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var c=b(this.handles[e],this.element),f=0,f=/sw|ne|nw|se|n|s/.test(e)?c.outerHeight():c.outerWidth(),c=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join("");a.css(c,f);this._proportionallyResize()}b(this.handles[e])}};
this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!c.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);c.axis=a&&a[1]?a[1]:"se"}});k.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){k.disabled||(b(this).removeClass("ui-resizable-autohide"),c._handles.show())}).mouseleave(function(){k.disabled||c.resizing||(b(this).addClass("ui-resizable-autohide"),
c._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var c=function(c){b(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){c(this.element);var k=this.element;k.after(this.originalElement.css({position:k.css("position"),width:k.outerWidth(),height:k.outerHeight(),top:k.css("top"),left:k.css("left")})).remove()}this.originalElement.css("resize",
this.originalResizeStyle);c(this.originalElement);return this},_mouseCapture:function(c){var k=!1,f;for(f in this.handles)b(this.handles[f])[0]==c.target&&(k=!0);return!this.options.disabled&&k},_mouseStart:function(c){var k=this.options,f=this.element.position(),d=this.element;this.resizing=!0;this.documentScroll={top:b(document).scrollTop(),left:b(document).scrollLeft()};(d.is(".ui-draggable")||/absolute/.test(d.css("position")))&&d.css({position:"absolute",top:f.top,left:f.left});this._renderProxy();
var f=l(this.helper.css("left")),a=l(this.helper.css("top"));k.containment&&(f+=b(k.containment).scrollLeft()||0,a+=b(k.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:f,top:a};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:f,top:a};this.sizeDiff={width:d.outerWidth()-
d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:c.pageX,top:c.pageY};this.aspectRatio="number"==typeof k.aspectRatio?k.aspectRatio:this.originalSize.width/this.originalSize.height||1;k=b(".ui-resizable-"+this.axis).css("cursor");b("body").css("cursor","auto"==k?this.axis+"-resize":k);d.addClass("ui-resizable-resizing");this._propagate("start",c);return!0},_mouseDrag:function(b){var k=this.helper,f=this.originalMousePosition,d=this._change[this.axis];if(!d)return!1;f=
d.apply(this,[b,b.pageX-f.left||0,b.pageY-f.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)f=this._updateRatio(f,b);f=this._respectSize(f,b);this._propagate("resize",b);k.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(f);this._trigger("resize",b,this.ui());return!1},_mouseStop:function(c){this.resizing=
!1;var k=this.options;if(this._helper){var f=this._proportionallyResizeElements,d=f.length&&/textarea/i.test(f[0].nodeName),f=d&&b.ui.hasScroll(f[0],"left")?0:this.sizeDiff.height,d=d?0:this.sizeDiff.width,d={width:this.helper.width()-d,height:this.helper.height()-f},f=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,a=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;k.animate||this.element.css(b.extend(d,{top:a,left:f}));
this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!k.animate&&this._proportionallyResize()}b("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",c);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var k=this.options,f,q,a,k={minWidth:d(k.minWidth)?k.minWidth:0,maxWidth:d(k.maxWidth)?k.maxWidth:Infinity,minHeight:d(k.minHeight)?k.minHeight:0,maxHeight:d(k.maxHeight)?k.maxHeight:Infinity};
if(this._aspectRatio||b)b=k.minHeight*this.aspectRatio,q=k.minWidth/this.aspectRatio,f=k.maxHeight*this.aspectRatio,a=k.maxWidth/this.aspectRatio,b>k.minWidth&&(k.minWidth=b),q>k.minHeight&&(k.minHeight=q),f<k.maxWidth&&(k.maxWidth=f),a<k.maxHeight&&(k.maxHeight=a);this._vBoundaries=k},_updateCache:function(b){this.offset=this.helper.offset();d(b.left)&&(this.position.left=b.left);d(b.top)&&(this.position.top=b.top);d(b.height)&&(this.size.height=b.height);d(b.width)&&(this.size.width=b.width)},_updateRatio:function(b,
k){var f=this.position,q=this.size,a=this.axis;d(b.height)?b.width=b.height*this.aspectRatio:d(b.width)&&(b.height=b.width/this.aspectRatio);"sw"==a&&(b.left=f.left+(q.width-b.width),b.top=null);"nw"==a&&(b.top=f.top+(q.height-b.height),b.left=f.left+(q.width-b.width));return b},_respectSize:function(b,k){var f=this._vBoundaries,q=this.axis,a=d(b.width)&&f.maxWidth&&f.maxWidth<b.width,e=d(b.height)&&f.maxHeight&&f.maxHeight<b.height,m=d(b.width)&&f.minWidth&&f.minWidth>b.width,l=d(b.height)&&f.minHeight&&
f.minHeight>b.height;m&&(b.width=f.minWidth);l&&(b.height=f.minHeight);a&&(b.width=f.maxWidth);e&&(b.height=f.maxHeight);var g=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height,A=/sw|nw|w/.test(q),q=/nw|ne|n/.test(q);m&&A&&(b.left=g-f.minWidth);a&&A&&(b.left=g-f.maxWidth);l&&q&&(b.top=n-f.minHeight);e&&q&&(b.top=n-f.maxHeight);(f=!b.width&&!b.height)&&!b.left&&b.top?b.top=null:f&&!b.top&&b.left&&(b.left=null);return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var c=
this.helper||this.element,k=0;k<this._proportionallyResizeElements.length;k++){var f=this._proportionallyResizeElements[k];if(!this.borderDif){var d=[f.css("borderTopWidth"),f.css("borderRightWidth"),f.css("borderBottomWidth"),f.css("borderLeftWidth")],a=[f.css("paddingTop"),f.css("paddingRight"),f.css("paddingBottom"),f.css("paddingLeft")];this.borderDif=b.map(d,function(b,c){var f=parseInt(b,10)||0,k=parseInt(a[c],10)||0;return f+k})}f.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||
0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var c=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||b('<div style="overflow:hidden;"></div>');var k=b.browser.msie&&7>b.browser.version,f=k?1:0,k=k?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+k,height:this.element.outerHeight()+k,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++c.zIndex});
this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,k,f){return{width:this.originalSize.width+k}},w:function(b,k,f){return{left:this.originalPosition.left+k,width:this.originalSize.width-k}},n:function(b,k,f){return{top:this.originalPosition.top+f,height:this.originalSize.height-f}},s:function(b,k,f){return{height:this.originalSize.height+f}},se:function(c,k,f){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[c,k,f]))},
sw:function(c,k,f){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[c,k,f]))},ne:function(c,k,f){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[c,k,f]))},nw:function(c,k,f){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[c,k,f]))}},_propagate:function(c,k){b.ui.plugin.call(this,c,[k,this.ui()]);"resize"!=c&&this._trigger(c,k,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","alsoResize",{start:function(c,k){var f=b(this).data("resizable").options,d=function(a){b(a).each(function(){var a=b(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!=typeof f.alsoResize||f.alsoResize.parentNode?
d(f.alsoResize):f.alsoResize.length?(f.alsoResize=f.alsoResize[0],d(f.alsoResize)):b.each(f.alsoResize,function(a){d(a)})},resize:function(c,k){var f=b(this).data("resizable"),d=f.options,a=f.originalSize,e=f.originalPosition,m={height:f.size.height-a.height||0,width:f.size.width-a.width||0,top:f.position.top-e.top||0,left:f.position.left-e.left||0},l=function(a,e){b(a).each(function(){var a=b(this),c=b(this).data("resizable-alsoresize"),f={},d=e&&e.length?e:a.parents(k.originalElement[0]).length?
["width","height"]:["width","height","top","left"];b.each(d,function(a,b){var e=(c[b]||0)+(m[b]||0);e&&0<=e&&(f[b]=e||null)});a.css(f)})};"object"!=typeof d.alsoResize||d.alsoResize.nodeType?l(d.alsoResize):b.each(d.alsoResize,function(a,b){l(a,b)})},stop:function(c,k){b(this).removeData("resizable-alsoresize")}});b.ui.plugin.add("resizable","animate",{stop:function(c,k){var f=b(this).data("resizable"),d=f.options,a=f._proportionallyResizeElements,e=a.length&&/textarea/i.test(a[0].nodeName),m=e&&
b.ui.hasScroll(a[0],"left")?0:f.sizeDiff.height,e={width:f.size.width-(e?0:f.sizeDiff.width),height:f.size.height-m},m=parseInt(f.element.css("left"),10)+(f.position.left-f.originalPosition.left)||null,l=parseInt(f.element.css("top"),10)+(f.position.top-f.originalPosition.top)||null;f.element.animate(b.extend(e,l&&m?{top:l,left:m}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var e={width:parseInt(f.element.css("width"),10),height:parseInt(f.element.css("height"),10),top:parseInt(f.element.css("top"),
10),left:parseInt(f.element.css("left"),10)};a&&a.length&&b(a[0]).css({width:e.width,height:e.height});f._updateCache(e);f._propagate("resize",c)}})}});b.ui.plugin.add("resizable","containment",{start:function(c,k){var f=b(this).data("resizable"),d=f.element,a=f.options.containment;if(d=a instanceof b?a.get(0):/parent/.test(a)?d.parent().get(0):a)if(f.containerElement=b(d),/document/.test(a)||a==document)f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:b(document),
left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight};else{var e=b(d),m=[];b(["Top","Right","Left","Bottom"]).each(function(a,b){m[a]=l(e.css("padding"+b))});f.containerOffset=e.offset();f.containerPosition=e.position();f.containerSize={height:e.innerHeight()-m[3],width:e.innerWidth()-m[1]};var a=f.containerOffset,g=f.containerSize.height,n=f.containerSize.width,n=b.ui.hasScroll(d,"left")?d.scrollWidth:n,g=b.ui.hasScroll(d)?d.scrollHeight:g;f.parentData=
{element:d,left:a.left,top:a.top,width:n,height:g}}},resize:function(c,k){var f=b(this).data("resizable"),d=f.options,a=f.containerOffset,e=f.position,m=f._aspectRatio||c.shiftKey,l={top:0,left:0},g=f.containerElement;g[0]!=document&&/static/.test(g.css("position"))&&(l=a);e.left<(f._helper?a.left:0)&&(f.size.width+=f._helper?f.position.left-a.left:f.position.left-l.left,m&&(f.size.height=f.size.width/f.aspectRatio),f.position.left=d.helper?a.left:0);e.top<(f._helper?a.top:0)&&(f.size.height+=f._helper?
f.position.top-a.top:f.position.top,m&&(f.size.width=f.size.height*f.aspectRatio),f.position.top=f._helper?a.top:0);f.offset.left=f.parentData.left+f.position.left;f.offset.top=f.parentData.top+f.position.top;d=Math.abs(f.offset.left-l.left+f.sizeDiff.width);a=Math.abs((f._helper?f.offset.top-l.top:f.offset.top-a.top)+f.sizeDiff.height);l=f.containerElement.get(0)==f.element.parent().get(0);e=/relative|absolute/.test(f.containerElement.css("position"));l&&e&&(d-=f.parentData.left);d+f.size.width>=
f.parentData.width&&(f.size.width=f.parentData.width-d,m&&(f.size.height=f.size.width/f.aspectRatio));a+f.size.height>=f.parentData.height&&(f.size.height=f.parentData.height-a,m&&(f.size.width=f.size.height*f.aspectRatio))},stop:function(c,k){var f=b(this).data("resizable"),d=f.options,a=f.containerOffset,e=f.containerPosition,m=f.containerElement,l=b(f.helper),g=l.offset(),n=l.outerWidth()-f.sizeDiff.width,l=l.outerHeight()-f.sizeDiff.height;f._helper&&!d.animate&&/relative/.test(m.css("position"))&&
b(this).css({left:g.left-e.left-a.left,width:n,height:l});f._helper&&!d.animate&&/static/.test(m.css("position"))&&b(this).css({left:g.left-e.left-a.left,width:n,height:l})}});b.ui.plugin.add("resizable","ghost",{start:function(c,k){var f=b(this).data("resizable"),d=f.options,a=f.size;f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof d.ghost?
d.ghost:"");f.ghost.appendTo(f.helper)},resize:function(c,k){var f=b(this).data("resizable");f.ghost&&f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})},stop:function(c,k){var f=b(this).data("resizable");f.ghost&&f.helper&&f.helper.get(0).removeChild(f.ghost.get(0))}});b.ui.plugin.add("resizable","grid",{resize:function(c,k){var f=b(this).data("resizable"),d=f.options,a=f.size,e=f.originalSize,m=f.originalPosition,l=f.axis;d.grid="number"==typeof d.grid?[d.grid,d.grid]:d.grid;
var g=Math.round((a.width-e.width)/(d.grid[0]||1))*(d.grid[0]||1),d=Math.round((a.height-e.height)/(d.grid[1]||1))*(d.grid[1]||1);/^(se|s|e)$/.test(l)?(f.size.width=e.width+g,f.size.height=e.height+d):/^(ne)$/.test(l)?(f.size.width=e.width+g,f.size.height=e.height+d,f.position.top=m.top-d):(/^(sw)$/.test(l)?(f.size.width=e.width+g,f.size.height=e.height+d):(f.size.width=e.width+g,f.size.height=e.height+d,f.position.top=m.top-d),f.position.left=m.left-g)}});var l=function(b){return parseInt(b,10)||
0},d=function(b){return!isNaN(parseInt(b,10))}})(g);(function(b,g){b.widget("ui.selectable",b.ui.mouse,{version:"1.9.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var l=this;this.element.addClass("ui-selectable");this.dragged=!1;var d;this.refresh=function(){d=b(l.options.filter,l.element[0]);d.addClass("ui-selectee");d.each(function(){var c=b(this),k=c.offset();b.data(this,"selectable-item",{element:this,$element:c,left:k.left,top:k.top,right:k.left+
c.outerWidth(),bottom:k.top+c.outerHeight(),startselected:!1,selected:c.hasClass("ui-selected"),selecting:c.hasClass("ui-selecting"),unselecting:c.hasClass("ui-unselecting")})})};this.refresh();this.selectees=d.addClass("ui-selectee");this._mouseInit();this.helper=b("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(l){var d=
this;this.opos=[l.pageX,l.pageY];if(!this.options.disabled){var c=this.options;this.selectees=b(c.filter,this.element[0]);this._trigger("start",l);b(c.appendTo).append(this.helper);this.helper.css({left:l.clientX,top:l.clientY,width:0,height:0});c.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=b.data(this,"selectable-item");c.startselected=!0;l.metaKey||l.ctrlKey||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=
!0,d._trigger("unselecting",l,{unselecting:c.element}))});b(l.target).parents().andSelf().each(function(){var c=b.data(this,"selectable-item");if(c){var f=!l.metaKey&&!l.ctrlKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(f?"ui-unselecting":"ui-selected").addClass(f?"ui-selecting":"ui-unselecting");c.unselecting=!f;c.selecting=f;(c.selected=f)?d._trigger("selecting",l,{selecting:c.element}):d._trigger("unselecting",l,{unselecting:c.element});return!1}})}},_mouseDrag:function(l){var d=
this;this.dragged=!0;if(!this.options.disabled){var c=this.options,k=this.opos[0],f=this.opos[1],q=l.pageX,a=l.pageY;if(k>q)var e=q,q=k,k=e;f>a&&(e=a,a=f,f=e);this.helper.css({left:k,top:f,width:q-k,height:a-f});this.selectees.each(function(){var e=b.data(this,"selectable-item");if(e&&e.element!=d.element[0]){var g=!1;"touch"==c.tolerance?g=!(e.left>q||e.right<k||e.top>a||e.bottom<f):"fit"==c.tolerance&&(g=e.left>k&&e.right<q&&e.top>f&&e.bottom<a);g?(e.selected&&(e.$element.removeClass("ui-selected"),
e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,d._trigger("selecting",l,{selecting:e.element}))):(e.selecting&&((l.metaKey||l.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),d._trigger("unselecting",
l,{unselecting:e.element}))),!e.selected||l.metaKey||l.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,d._trigger("unselecting",l,{unselecting:e.element})))}});return!1}},_mouseStop:function(l){var d=this;this.dragged=!1;b(".ui-unselecting",this.element[0]).each(function(){var c=b.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=!1;c.startselected=!1;d._trigger("unselected",l,{unselected:c.element})});
b(".ui-selecting",this.element[0]).each(function(){var c=b.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=!1;c.selected=!0;c.startselected=!0;d._trigger("selected",l,{selected:c.element})});this._trigger("stop",l);this.helper.remove();return!1}})})(g);(function(b,g){b.widget("ui.sortable",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,
forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===b.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=
this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(l,d){"disabled"===l?(this.options[l]=d,this.widget().toggleClass("ui-sortable-disabled",!!d)):b.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(l,d){var c=this;if(this.reverting||this.options.disabled||
"static"==this.options.type)return!1;this._refreshItems(l);var k=null;b(l.target).parents().each(function(){if(b.data(this,c.widgetName+"-item")==c)return k=b(this),!1});b.data(l.target,c.widgetName+"-item")==c&&(k=b(l.target));if(!k)return!1;if(this.options.handle&&!d){var f=!1;b(this.options.handle,k).find("*").andSelf().each(function(){this==l.target&&(f=!0)});if(!f)return!1}this.currentItem=k;this._removeCurrentsFromItems();return!0},_mouseStart:function(l,d,c){d=this.options;this.currentContainer=
this;this.refreshPositions();this.helper=this._createHelper(l);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:l.pageX-this.offset.left,top:l.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=
this.helper.css("position");this.originalPosition=this._generatePosition(l);this.originalPageX=l.pageX;this.originalPageY=l.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();d.containment&&this._setContainment();d.cursor&&(b("body").css("cursor")&&(this._storedCursor=b("body").css("cursor")),b("body").css("cursor",d.cursor));
d.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",d.opacity));d.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",d.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",l,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-
1;0<=c;c--)this.containers[c]._trigger("activate",l,this._uiHash(this));b.ui.ddmanager&&(b.ui.ddmanager.current=this);b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,l);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(l);return!0},_mouseDrag:function(l){this.position=this._generatePosition(l);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var d=this.options,c=
!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-l.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+d.scrollSpeed:l.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-l.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+
d.scrollSpeed:l.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(l.pageY-b(document).scrollTop()<d.scrollSensitivity?c=b(document).scrollTop(b(document).scrollTop()-d.scrollSpeed):b(window).height()-(l.pageY-b(document).scrollTop())<d.scrollSensitivity&&(c=b(document).scrollTop(b(document).scrollTop()+d.scrollSpeed)),l.pageX-b(document).scrollLeft()<d.scrollSensitivity?c=b(document).scrollLeft(b(document).scrollLeft()-
d.scrollSpeed):b(window).width()-(l.pageX-b(document).scrollLeft())<d.scrollSensitivity&&(c=b(document).scrollLeft(b(document).scrollLeft()+d.scrollSpeed)));!1!==c&&b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,l)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(d=this.items.length-
1;0<=d;d--){var c=this.items[d],k=c.item[0],f=this._intersectsWithPointer(c);if(f&&c.instance===this.currentContainer&&k!=this.currentItem[0]&&this.placeholder[1==f?"next":"prev"]()[0]!=k&&!b.contains(this.placeholder[0],k)&&("semi-dynamic"==this.options.type?!b.contains(this.element[0],k):1)){this.direction=1==f?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(c))this._rearrange(l,c);else break;this._trigger("change",l,this._uiHash());break}}this._contactContainers(l);
b.ui.ddmanager&&b.ui.ddmanager.drag(this,l);this._trigger("sort",l,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(l,d){if(l){b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,l);if(this.options.revert){var c=this,k=this.placeholder.offset();this.reverting=!0;b(this.helper).animate({left:k.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:k.top-this.offset.parent.top-this.margins.top+
(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(l)})}else this._clear(l,d);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var l=this.containers.length-1;0<=l;l--)this.containers[l]._trigger("deactivate",null,this._uiHash(this)),this.containers[l].containerCache.over&&
(this.containers[l]._trigger("out",null,this._uiHash(this)),this.containers[l].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem));
return this},serialize:function(l){var d=this._getItemsAsjQuery(l&&l.connected),c=[];l=l||{};b(d).each(function(){var k=(b(l.item||this).attr(l.attribute||"id")||"").match(l.expression||/(.+)[-=_](.+)/);k&&c.push((l.key||k[1]+"[]")+"="+(l.key&&l.expression?k[1]:k[2]))});!c.length&&l.key&&c.push(l.key+"=");return c.join("&")},toArray:function(l){var d=this._getItemsAsjQuery(l&&l.connected),c=[];l=l||{};d.each(function(){c.push(b(l.item||this).attr(l.attribute||"id")||"")});return c},_intersectsWith:function(b){var d=
this.positionAbs.left,c=d+this.helperProportions.width,k=this.positionAbs.top,f=k+this.helperProportions.height,q=b.left,a=q+b.width,e=b.top,m=e+b.height,g=this.offset.click.top,n=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?k+g>e&&k+g<m&&d+n>q&&d+n<a:q<d+this.helperProportions.width/2&&c-this.helperProportions.width/
2<a&&e<k+this.helperProportions.height/2&&f-this.helperProportions.height/2<m},_intersectsWithPointer:function(l){var d="x"===this.options.axis||b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,l.top,l.height);l="y"===this.options.axis||b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,l.left,l.width);d=d&&l;l=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();return d?this.floating?c&&"right"==c||"down"==l?2:1:l&&("down"==l?2:1):!1},_intersectsWithSides:function(l){var d=
b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,l.top+l.height/2,l.height);l=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,l.left+l.width/2,l.width);var c=this._getDragVerticalDirection(),k=this._getDragHorizontalDirection();return this.floating&&k?"right"==k&&l||"left"==k&&!l:c&&("down"==c&&d||"up"==c&&!d)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!=b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=
this.positionAbs.left-this.lastPositionAbs.left;return 0!=b&&(0<b?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(l){var d=[],c=[],k=this._connectWith();if(k&&l)for(l=k.length-1;0<=l;l--)for(var f=b(k[l]),q=f.length-1;0<=q;q--){var a=b.data(f[q],this.widgetName);a&&a!=this&&!a.options.disabled&&c.push([b.isFunction(a.options.items)?
a.options.items.call(a.element):b(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}c.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(l=c.length-1;0<=l;l--)c[l][0].each(function(){d.push(this)});return b(d)},_removeCurrentsFromItems:function(){for(var b=this.currentItem.find(":data("+
this.widgetName+"-item)"),d=0;d<this.items.length;d++)for(var c=0;c<b.length;c++)b[c]==this.items[d].item[0]&&this.items.splice(d,1)},_refreshItems:function(l){this.items=[];this.containers=[this];var d=this.items,c=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],l,{item:this.currentItem}):b(this.options.items,this.element),this]],k=this._connectWith();if(k&&this.ready)for(var f=k.length-1;0<=f;f--)for(var q=b(k[f]),a=q.length-1;0<=a;a--){var e=b.data(q[a],this.widgetName);
e&&e!=this&&!e.options.disabled&&(c.push([b.isFunction(e.options.items)?e.options.items.call(e.element[0],l,{item:this.currentItem}):b(e.options.items,e.element),e]),this.containers.push(e))}for(f=c.length-1;0<=f;f--)for(l=c[f][1],k=c[f][0],a=0,q=k.length;a<q;a++)e=b(k[a]),e.data(this.widgetName+"-item",l),d.push({item:e,instance:l,width:0,height:0,left:0,top:0})},refreshPositions:function(l){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var d=this.items.length-
1;0<=d;d--){var c=this.items[d];if(c.instance==this.currentContainer||!this.currentContainer||c.item[0]==this.currentItem[0]){var k=this.options.toleranceElement?b(this.options.toleranceElement,c.item):c.item;l||(c.width=k.outerWidth(),c.height=k.outerHeight());k=k.offset();c.left=k.left;c.top=k.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)k=this.containers[d].element.offset(),this.containers[d].containerCache.left=
k.left,this.containers[d].containerCache.top=k.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();return this},_createPlaceholder:function(l){l=l||this;var d=l.options;if(!d.placeholder||d.placeholder.constructor==String){var c=d.placeholder;d.placeholder={element:function(){var k=b(document.createElement(l.currentItem[0].nodeName)).addClass(c||l.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
c||(k.style.visibility="hidden");return k},update:function(b,f){if(!c||d.forcePlaceholderSize)f.height()||f.height(l.currentItem.innerHeight()-parseInt(l.currentItem.css("paddingTop")||0,10)-parseInt(l.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(l.currentItem.innerWidth()-parseInt(l.currentItem.css("paddingLeft")||0,10)-parseInt(l.currentItem.css("paddingRight")||0,10))}}}l.placeholder=b(d.placeholder.element.call(l.element,l.currentItem));l.currentItem.after(l.placeholder);d.placeholder.update(l,
l.placeholder)},_contactContainers:function(l){for(var d=null,c=null,k=this.containers.length-1;0<=k;k--)b.contains(this.currentItem[0],this.containers[k].element[0])||(this._intersectsWith(this.containers[k].containerCache)?d&&b.contains(this.containers[k].element[0],d.element[0])||(d=this.containers[k],c=k):this.containers[k].containerCache.over&&(this.containers[k]._trigger("out",l,this._uiHash(this)),this.containers[k].containerCache.over=0));if(d)if(1===this.containers.length)this.containers[c]._trigger("over",
l,this._uiHash(this)),this.containers[c].containerCache.over=1;else if(this.currentContainer!=this.containers[c]){for(var d=1E4,k=null,f=this.positionAbs[this.containers[c].floating?"left":"top"],q=this.items.length-1;0<=q;q--)if(b.contains(this.containers[c].element[0],this.items[q].item[0])){var a=this.containers[c].floating?this.items[q].item.offset().left:this.items[q].item.offset().top;Math.abs(a-f)<d&&(d=Math.abs(a-f),k=this.items[q],this.direction=0<a-f?"down":"up")}if(k||this.options.dropOnEmpty)this.currentContainer=
this.containers[c],k?this._rearrange(l,k,null,!0):this._rearrange(l,null,this.containers[c].element,!0),this._trigger("change",l,this._uiHash()),this.containers[c]._trigger("change",l,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",l,this._uiHash(this)),this.containers[c].containerCache.over=1}},_createHelper:function(l){var d=this.options;l=b.isFunction(d.helper)?b(d.helper.apply(this.element[0],[l,this.currentItem])):
"clone"==d.helper?this.currentItem.clone():this.currentItem;l.parents("body").length||b("parent"!=d.appendTo?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(l[0]);l[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==l[0].style.width||d.forceHelperSize)&&l.width(this.currentItem.width());(""==l[0].style.height||
d.forceHelperSize)&&l.height(this.currentItem.height());return l},_adjustOffsetFromHelper:function(l){"string"==typeof l&&(l=l.split(" "));b.isArray(l)&&(l={left:+l[0],top:+l[1]||0});"left"in l&&(this.offset.click.left=l.left+this.margins.left);"right"in l&&(this.offset.click.left=this.helperProportions.width-l.right+this.margins.left);"top"in l&&(this.offset.click.top=l.top+this.margins.top);"bottom"in l&&(this.offset.click.top=this.helperProportions.height-l.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var l=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(l.left+=this.scrollParent.scrollLeft(),l.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)l={top:0,left:0};return{top:l.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:l.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var l=this.options;"parent"==l.containment&&(l.containment=this.helper[0].parentNode);if("document"==l.containment||"window"==l.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b("document"==l.containment?document:window).width()-this.helperProportions.width-this.margins.left,(b("document"==l.containment?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(l.containment)){var d=b(l.containment)[0],l=b(l.containment).offset(),c="hidden"!=b(d).css("overflow");this.containment=[l.left+(parseInt(b(d).css("borderLeftWidth"),10)||0)+(parseInt(b(d).css("paddingLeft"),10)||0)-this.margins.left,l.top+(parseInt(b(d).css("borderTopWidth"),10)||0)+(parseInt(b(d).css("paddingTop"),10)||0)-this.margins.top,l.left+(c?Math.max(d.scrollWidth,
d.offsetWidth):d.offsetWidth)-(parseInt(b(d).css("borderLeftWidth"),10)||0)-(parseInt(b(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,l.top+(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(b(d).css("borderTopWidth"),10)||0)-(parseInt(b(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(l,d){d||(d=this.position);var c="absolute"==l?1:-1,k="absolute"!=this.cssPosition||this.scrollParent[0]!=
document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(k[0].tagName);return{top:d.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:k.scrollTop())*c,left:d.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:k.scrollLeft())*c}},_generatePosition:function(l){var d=this.options,c="absolute"!=this.cssPosition||
this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,k=/(html|body)/i.test(c[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var f=l.pageX,q=l.pageY;this.originalPosition&&(this.containment&&(l.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),l.pageY-this.offset.click.top<
this.containment[1]&&(q=this.containment[1]+this.offset.click.top),l.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),l.pageY-this.offset.click.top>this.containment[3]&&(q=this.containment[3]+this.offset.click.top)),d.grid&&(q=this.originalPageY+Math.round((q-this.originalPageY)/d.grid[1])*d.grid[1],q=this.containment?q-this.offset.click.top<this.containment[1]||q-this.offset.click.top>this.containment[3]?q-this.offset.click.top<this.containment[1]?
q+d.grid[1]:q-d.grid[1]:q:q,f=this.originalPageX+Math.round((f-this.originalPageX)/d.grid[0])*d.grid[0],f=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<this.containment[0]?f+d.grid[0]:f-d.grid[0]:f:f));return{top:q-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():k?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():k?0:c.scrollLeft())}},_rearrange:function(b,d,c,k){c?c[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?d.item[0]:d.item[0].nextSibling);var f=this.counter=this.counter?++this.counter:1;this._delay(function(){f==this.counter&&this.refreshPositions(!k)})},_clear:function(l,d){this.reverting=!1;var c=[];!this._noFinalSort&&this.currentItem.parent().length&&
this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var k in this._storedCSS)if("auto"==this._storedCSS[k]||"static"==this._storedCSS[k])this._storedCSS[k]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!d&&c.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&
this.domPosition.parent==this.currentItem.parent()[0]||d||c.push(function(b){this._trigger("update",b,this._uiHash())});this===this.currentContainer||d||(c.push(function(b){this._trigger("remove",b,this._uiHash())}),c.push(function(b){return function(c){b._trigger("receive",c,this._uiHash(this))}}.call(this,this.currentContainer)),c.push(function(b){return function(c){b._trigger("update",c,this._uiHash(this))}}.call(this,this.currentContainer)));for(k=this.containers.length-1;0<=k;k--)d||c.push(function(b){return function(c){b._trigger("deactivate",
c,this._uiHash(this))}}.call(this,this.containers[k])),this.containers[k].containerCache.over&&(c.push(function(b){return function(c){b._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[k])),this.containers[k].containerCache.over=0);this._storedCursor&&b("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",
l,this._uiHash());for(k=0;k<c.length;k++)c[k].call(this,l);this._trigger("stop",l,this._uiHash())}return this.fromOutside=!1}d||this._trigger("beforeStop",l,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(k=0;k<c.length;k++)c[k].call(this,l);this._trigger("stop",l,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===b.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(l){var d=l||this;return{helper:d.helper,placeholder:d.placeholder||b([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:l?l.element:null}}})})(g);(function(b,n){var l=0,d={},c={};d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="hide";c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="show";b.widget("ui.accordion",{version:"1.9.0",options:{active:0,animate:{},
collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var c=this.accordionId="ui-accordion-"+(this.element.attr("id")||++l),f=this.options;this.prevShow=this.prevHide=b();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(f.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();f.collapsible||!1!==f.active||(f.active=0);0>f.active&&(f.active+=this.headers.length);this.active=this._findActive(f.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.originalHeight=
this.element[0].style.height;this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(f){var a=b(this),e=a.attr("id"),m=a.next(),d=m.attr("id");e||(e=c+"-header-"+f,a.attr("id",e));d||(d=c+"-panel-"+f,m.attr("id",d));a.attr("aria-controls",d);m.attr("aria-labelledby",e)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?
this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(f.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():b()}},_createIcons:function(){var c=this.options.icons;c&&(b("<span>").addClass("ui-accordion-header-icon ui-icon "+c.header).prependTo(this.headers),
this.active.children(".ui-accordion-header-icon").removeClass(c.header).addClass(c.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();b=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&(this.element.css("height",this.originalHeight),b.css("height",
""))},_setOption:function(b,c){"active"===b?this._activate(c):("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(c)),this._super(b,c),"collapsible"!==b||c||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"===b&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!c))},_keydown:function(c){if(!c.altKey&&!c.ctrlKey){var f=b.ui.keyCode,d=this.headers.length,a=this.headers.index(c.target),
e=!1;switch(c.keyCode){case f.RIGHT:case f.DOWN:e=this.headers[(a+1)%d];break;case f.LEFT:case f.UP:e=this.headers[(a-1+d)%d];break;case f.SPACE:case f.ENTER:this._eventHandler(c);break;case f.HOME:e=this.headers[0];break;case f.END:e=this.headers[d-1]}e&&(b(c.target).attr("tabIndex",-1),b(e).attr("tabIndex",0),e.focus(),c.preventDefault())}},_panelKeyDown:function(c){c.keyCode===b.ui.keyCode.UP&&c.ctrlKey&&b(c.currentTarget).prev().focus()},refresh:function(){var c,f,d=this.options.heightStyle,a=
this.element.parent();this.element.css("height",this.originalHeight);"fill"===d?(b.support.minHeight||(f=a.css("overflow"),a.css("overflow","hidden")),c=a.height(),this.element.siblings(":visible").each(function(){var a=b(this),m=a.css("position");"absolute"!==m&&"fixed"!==m&&(c-=a.outerHeight(!0))}),f&&a.css("overflow",f),this.headers.each(function(){c-=b(this).outerHeight(!0)}),this.headers.next().each(function(){b(this).height(Math.max(0,c-b(this).innerHeight()+b(this).height()))}).css("overflow",
"auto")):"auto"===d&&(c=0,this.headers.next().each(function(){c=Math.max(c,b(this).height("").height())}).height(c));"content"!==d&&this.element.height(this.element.height())},_activate:function(c){c=this._findActive(c)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:b.noop}))},_findActive:function(c){return"number"===typeof c?this.headers.eq(c):b()},_setupEvents:function(c){var f={};c&&(b.each(c.split(" "),function(b,a){f[a]="_eventHandler"}),
this._on(this.headers,f))},_eventHandler:function(c){var f=this.options,d=this.active,a=b(c.currentTarget),e=a[0]===d[0],m=e&&f.collapsible,l=m?b():a.next(),g=d.next(),l={oldHeader:d,oldPanel:g,newHeader:m?b():a,newPanel:l};c.preventDefault();e&&!f.collapsible||!1===this._trigger("beforeActivate",c,l)||(f.active=m?!1:this.headers.index(a),this.active=e?b():a,this._toggle(l),d.removeClass("ui-accordion-header-active ui-state-active"),f.icons&&d.children(".ui-accordion-header-icon").removeClass(f.icons.activeHeader).addClass(f.icons.header),
e||(a.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),f.icons&&a.children(".ui-accordion-header-icon").removeClass(f.icons.header).addClass(f.icons.activeHeader),a.next().addClass("ui-accordion-content-active")))},_toggle:function(c){var f=c.newPanel,d=this.prevShow.length?this.prevShow:c.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=f;this.prevHide=d;this.options.animate?this._animate(f,d,c):(d.hide(),f.show(),this._toggleComplete(c));
d.attr({"aria-expanded":"false","aria-hidden":"true"});d.prev().attr("aria-selected","false");f.length&&d.length?d.prev().attr("tabIndex",-1):f.length&&this.headers.filter(function(){return 0===b(this).attr("tabIndex")}).attr("tabIndex",-1);f.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(b,f,q){var a,e,m,l=this,g=0,n=b.length&&(!f.length||b.index()<f.index()),A=this.options.animate||{},n=n&&A.down||A,y=function(){l._toggleComplete(q)};
"number"===typeof n&&(m=n);"string"===typeof n&&(e=n);e=e||n.easing||A.easing;m=m||n.duration||A.duration;if(!f.length)return b.animate(c,m,e,y);if(!b.length)return f.animate(d,m,e,y);a=b.show().outerHeight();f.animate(d,{duration:m,easing:e,step:function(a,b){b.now=Math.round(a)}});b.hide().animate(c,{duration:m,easing:e,complete:y,step:function(b,e){e.now=Math.round(b);"height"!==e.prop?g+=e.now:"content"!==l.options.heightStyle&&(e.now=Math.round(a-f.outerHeight()-g),g=0)}})},_toggleComplete:function(b){var c=
b.oldPanel;c.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");c.length&&(c.parent()[0].className=c.parent()[0].className);this._trigger("activate",null,b)}});!1!==b.uiBackCompat&&(function(b,c){b.extend(c.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var d=c._create;c._create=function(){if(this.options.navigation){var a=this,e=this.element.find(this.options.header),c=e.next(),
f=e.add(c).find("a").filter(this.options.navigationFilter)[0];f&&e.add(c).each(function(e){if(b.contains(this,f))return a.options.active=Math.floor(e/2),!1})}d.call(this)}}(g,g.ui.accordion.prototype),function(b,c){b.extend(c.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var d=c._create,a=c._setOption;b.extend(c,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();d.call(this)},_setOption:function(b,c){if("autoHeight"===b||"clearStyle"===
b||"fillSpace"===b)this.options.heightStyle=this._mergeHeightStyle();a.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(g,g.ui.accordion.prototype),function(b,c){b.extend(c.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var d=c._createIcons;c._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);
d.call(this)}}(g,g.ui.accordion.prototype),function(b,c){c.activate=c._activate;var d=c._findActive;c._findActive=function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));return d.call(this,a)}}(g,g.ui.accordion.prototype),g.ui.accordion.prototype.resize=g.ui.accordion.prototype.refresh,function(b,c){b.extend(c.options,{change:null,changestart:null});var d=c._trigger;c._trigger=function(a,b,c){var f=d.apply(this,arguments);if(!f)return!1;"beforeActivate"===
a?f=d.call(this,"changestart",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,newHeader:c.newHeader,newContent:c.newPanel}):"activate"===a&&(f=d.call(this,"change",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,newHeader:c.newHeader,newContent:c.newPanel}));return f}}(g,g.ui.accordion.prototype),function(b,c){b.extend(c.options,{animate:null,animated:"slide"});var d=c._create;c._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?
{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);d.call(this)}}(g,g.ui.accordion.prototype))})(g);(function(b,g){var l=0;b.widget("ui.autocomplete",{version:"1.9.0",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var d,c,k;this.isMultiLine=this._isMultiLine();
this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on({keydown:function(f){if(this.element.prop("readOnly"))c=k=d=!0;else{c=k=d=!1;var q=b.ui.keyCode;switch(f.keyCode){case q.PAGE_UP:d=!0;this._move("previousPage",f);break;case q.PAGE_DOWN:d=!0;this._move("nextPage",f);break;case q.UP:d=!0;this._keyEvent("previous",f);break;case q.DOWN:d=!0;this._keyEvent("next",f);break;case q.ENTER:case q.NUMPAD_ENTER:this.menu.active&&
(d=!0,f.preventDefault(),this.menu.select(f));break;case q.TAB:this.menu.active&&this.menu.select(f);break;case q.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(f),f.preventDefault());break;default:c=!0,this._searchTimeout(f)}}},keypress:function(f){if(d)d=!1,f.preventDefault();else if(!c){var k=b.ui.keyCode;switch(f.keyCode){case k.PAGE_UP:this._move("previousPage",f);break;case k.PAGE_DOWN:this._move("nextPage",f);break;case k.UP:this._keyEvent("previous",f);break;case k.DOWN:this._keyEvent("next",
f)}}},input:function(b){k?(k=!1,b.preventDefault()):this._searchTimeout(b)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(b),this._change(b))}});this._initSource();this.menu=b("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:b(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,
{mousedown:function(c){c.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var d=this.menu.element[0];b(c.target).closest(".ui-menu-item").length||this._delay(function(){var a=this;this.document.one("mousedown",function(e){e.target===a.element[0]||e.target===d||b.contains(d,e.target)||a.close()})})},menufocus:function(c,d){if(this.isNewMenu&&(this.isNewMenu=!1,c.originalEvent&&/^mouse/.test(c.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){b(c.target).trigger(c.originalEvent)});
return}var a=d.item.data("ui-autocomplete-item")||d.item.data("item.autocomplete");!1!==this._trigger("focus",c,{item:a})?c.originalEvent&&/^key/.test(c.originalEvent.type)&&this._value(a.value):this.liveRegion.text(a.value)},menuselect:function(b,c){var a=c.item.data("ui-autocomplete-item")||c.item.data("item.autocomplete"),e=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e;this.selectedItem=a}));!1!==this._trigger("select",
b,{item:a})&&this._value(a.value);this.term=this._value();this.close(b);this.selectedItem=a}});this.liveRegion=b("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);b.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();
this.liveRegion.remove()},_setOption:function(b,c){this._super(b,c);"source"===b&&this._initSource();"appendTo"===b&&this.menu.element.appendTo(this.document.find(c||"body")[0]);"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var d,c,k=this;b.isArray(this.options.source)?(d=this.options.source,this.source=function(c,k){k(b.ui.autocomplete.filter(d,
c.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(f,d){k.xhr&&k.xhr.abort();k.xhr=b.ajax({url:c,data:f,dataType:"json",success:function(a,b){d(a)},error:function(){d([])}})}):this.source=this.options.source},_searchTimeout:function(b){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,b))},this.options.delay)},search:function(b,c){b=null!=b?b:this._value();this.term=this._value();
if(b.length<this.options.minLength)return this.close(c);if(!1!==this._trigger("search",c))return this._search(b)},_search:function(b){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:b},this._response())},_response:function(){var b=this,c=++l;return function(k){c===l&&b.__response(k);b.pending--;b.pending||b.element.removeClass("ui-autocomplete-loading")}},__response:function(b){b&&(b=this._normalize(b));this._trigger("response",null,{content:b});
!this.options.disabled&&b&&b.length&&!this.cancelSearch?(this._suggest(b),this._trigger("open")):this._close()},close:function(b){this.cancelSearch=!0;this._close(b)},_close:function(b){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",b))},_change:function(b){this.previous!==this._value()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(d){return d.length&&d[0].label&&d[0].value?d:b.map(d,function(c){return"string"===
typeof c?{label:c,value:c}:b.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(d){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,d);this.menu.refresh();c.show();this._resizeMenu();c.position(b.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(d,c){var k=
this;b.each(c,function(b,c){k._renderItemData(d,c)})},_renderItemData:function(b,c){return this._renderItem(b,c).data("ui-autocomplete-item",c)},_renderItem:function(d,c){return b("<li>").append(b("<a>").text(c.label)).appendTo(d)},_move:function(b,c){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(b)||this.menu.isLastItem()&&/^next/.test(b))this._value(this.term),this.menu.blur();else this.menu[b](c);else this.search(null,c)},widget:function(){return this.menu.element},
_value:function(b){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(b,c){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(b,c),c.preventDefault()}});b.extend(b.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(d,c){var k=RegExp(b.ui.autocomplete.escapeRegex(c),"i");return b.grep(d,function(b){return k.test(b.label||b.value||b)})}});b.widget("ui.autocomplete",b.ui.autocomplete,{options:{messages:{noResults:"No search results.",
results:function(b){return b+(1<b?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments);this.options.disabled||this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.text(c))}})})(g);(function(b,g){var l,d,c,k,f=function(){var a=b(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},q=function(a){var e=a.name,c=a.form,f=b([]);
e&&(f=c?b(c).find("[name='"+e+"']"):b("[name='"+e+"']",a.ownerDocument).filter(function(){return!this.form}));return f};b.widget("ui.button",{version:"1.9.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",
this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,e=this.options,m="checkbox"===this.type||"radio"===this.type,g="ui-state-hover"+(m?"":" ui-state-active");null===e.label&&(e.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||(b(this).addClass("ui-state-hover"),
this===l&&b(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||b(this).removeClass(g)}).bind("click"+this.eventNamespace,function(a){e.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass("ui-state-focus")});m&&(this.element.bind("change"+this.eventNamespace,function(){k||
a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){e.disabled||(k=!1,d=a.pageX,c=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){e.disabled||d===a.pageX&&c===a.pageY||(k=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled||k)return!1;b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,
function(){if(e.disabled||k)return!1;b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");var c=a.element[0];q(c).not(c).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(e.disabled)return!1;b(this).addClass("ui-state-active");l=this;a.document.one("mouseup",function(){l=null})}).bind("mouseup"+this.eventNamespace,function(){if(e.disabled)return!1;
b(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(e.disabled)return!1;a.keyCode!==b.ui.keyCode.SPACE&&a.keyCode!==b.ui.keyCode.ENTER||b(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",e.disabled);this._resetButton()},_determineButtonType:function(){var a,
b;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),
(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?q(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
e=b("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),c=this.options.icons,f=c.primary&&c.secondary,k=[];c.primary||c.secondary?(this.options.text&&k.push("ui-button-text-icon"+(f?"s":c.primary?"-primary":"-secondary")),c.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+c.primary+"'></span>"),c.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+c.secondary+"'></span>"),this.options.text||(k.push(f?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||a.attr("title",b.trim(e)))):k.push("ui-button-text-only");a.addClass(k.join(" "))}}});b.widget("ui.buttonset",{version:"1.9.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var a=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(g);
(function(b,g){function l(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};b.extend(this._defaults,this.regional[""]);this.dpDiv=d(b('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function d(c){return c.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){b(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&b(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&b(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){b.datepicker._isDisabledDatepicker(f.inline?c.parent()[0]:f.input[0])||(b(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
b(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&b(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&b(this).addClass("ui-datepicker-next-hover"))})}function c(c,a){b.extend(c,a);for(var e in a)if(null==a[e]||a[e]==g)c[e]=a[e];return c}b.extend(b.ui,{datepicker:{version:"1.9.0"}});var k=(new Date).getTime(),f;b.extend(l.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){c(this._defaults,b||{});return this},_attachDatepicker:function(c,a){var e=null,m;for(m in this._defaults){var f=c.getAttribute("date:"+m);if(f){e=e||{};try{e[m]=eval(f)}catch(k){e[m]=f}}}m=c.nodeName.toLowerCase();f="div"==m||"span"==m;c.id||(this.uuid+=1,c.id="dp"+this.uuid);var d=this._newInst(b(c),f);d.settings=b.extend({},a||{},e||{});"input"==m?this._connectDatepicker(c,d):f&&this._inlineDatepicker(c,d)},_newInst:function(c,
a){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?d(b('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(c,a){var e=b(c);a.append=b([]);a.trigger=b([]);e.hasClass(this.markerClassName)||(this._attachments(e,a),e.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(b,e,c){a.settings[e]=c}).bind("getData.datepicker",function(b,e){return this._get(a,e)}),this._autoSize(a),b.data(c,"datepicker",a),a.settings.disabled&&this._disableDatepicker(c))},_attachments:function(c,a){var e=this._get(a,"appendText"),m=this._get(a,"isRTL");a.append&&a.append.remove();e&&(a.append=b('<span class="'+this._appendClass+'">'+e+"</span>"),c[m?"before":"after"](a.append));c.unbind("focus",this._showDatepicker);a.trigger&&a.trigger.remove();e=this._get(a,"showOn");"focus"!=
e&&"both"!=e||c.focus(this._showDatepicker);if("button"==e||"both"==e){var e=this._get(a,"buttonText"),f=this._get(a,"buttonImage");a.trigger=b(this._get(a,"buttonImageOnly")?b("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):b('<button type="button"></button>').addClass(this._triggerClass).html(""==f?e:b("<img/>").attr({src:f,alt:e,title:e})));c[m?"before":"after"](a.trigger);a.trigger.click(function(){b.datepicker._datepickerShowing&&b.datepicker._lastInput==c[0]?b.datepicker._hideDatepicker():
(b.datepicker._datepickerShowing&&b.datepicker._lastInput!=c[0]&&b.datepicker._hideDatepicker(),b.datepicker._showDatepicker(c[0]));return!1})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var a=new Date(2009,11,20),e=this._get(b,"dateFormat");if(e.match(/[DM]/)){var c=function(a){for(var b=0,e=0,c=0;c<a.length;c++)a[c].length>b&&(b=a[c].length,e=c);return e};a.setMonth(c(this._get(b,e.match(/MM/)?"monthNames":"monthNamesShort")));a.setDate(c(this._get(b,e.match(/DD/)?"dayNames":
"dayNamesShort"))+20-a.getDay())}b.input.attr("size",this._formatDate(b,a).length)}},_inlineDatepicker:function(c,a){var e=b(c);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(a.dpDiv).bind("setData.datepicker",function(b,e,c){a.settings[e]=c}).bind("getData.datepicker",function(b,e){return this._get(a,e)}),b.data(c,"datepicker",a),this._setDate(a,this._getDefaultDate(a),!0),this._updateDatepicker(a),this._updateAlternate(a),a.settings.disabled&&this._disableDatepicker(c),
a.dpDiv.css("display","block"))},_dialogDatepicker:function(f,a,e,m,k){f=this._dialogInst;f||(this.uuid+=1,this._dialogInput=b('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),b("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},b.data(this._dialogInput[0],"datepicker",f));c(f.settings,m||{});a=a&&a.constructor==Date?this._formatDate(f,a):a;this._dialogInput.val(a);
this._pos=k?k.length?k:[k.pageX,k.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");f.settings.onSelect=e;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);b.blockUI&&b.blockUI(this.dpDiv);
b.data(this._dialogInput[0],"datepicker",f);return this},_destroyDatepicker:function(c){var a=b(c),e=b.data(c,"datepicker");if(a.hasClass(this.markerClassName)){var m=c.nodeName.toLowerCase();b.removeData(c,"datepicker");"input"==m?(e.append.remove(),e.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=m&&"span"!=m||a.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(c){var a=b(c),e=b.data(c,"datepicker");if(a.hasClass(this.markerClassName)){var m=c.nodeName.toLowerCase();if("input"==m)c.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==m||"span"==m)a=a.children("."+this._inlineClass),a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=b.map(this._disabledInputs,
function(a){return a==c?null:a})}},_disableDatepicker:function(c){var a=b(c),e=b.data(c,"datepicker");if(a.hasClass(this.markerClassName)){var m=c.nodeName.toLowerCase();if("input"==m)c.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==m||"span"==m)a=a.children("."+this._inlineClass),a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=b.map(this._disabledInputs,function(a){return a==c?null:a});this._disabledInputs[this._disabledInputs.length]=c}},_isDisabledDatepicker:function(b){if(!b)return!1;for(var a=0;a<this._disabledInputs.length;a++)if(this._disabledInputs[a]==b)return!0;return!1},_getInst:function(c){try{return b.data(c,"datepicker")}catch(a){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(f,a,e){var m=this._getInst(f);if(2==arguments.length&&"string"==typeof a)return"defaults"==
a?b.extend({},b.datepicker._defaults):m?"all"==a?b.extend({},m.settings):this._get(m,a):null;var k=a||{};"string"==typeof a&&(k={},k[a]=e);if(m){this._curInst==m&&this._hideDatepicker();var d=this._getDateDatepicker(f,!0),l=this._getMinMaxDate(m,"min"),A=this._getMinMaxDate(m,"max");c(m.settings,k);null!==l&&k.dateFormat!==g&&k.minDate===g&&(m.settings.minDate=this._formatDate(m,l));null!==A&&k.dateFormat!==g&&k.maxDate===g&&(m.settings.maxDate=this._formatDate(m,A));this._attachments(b(f),m);this._autoSize(m);
this._setDate(m,d);this._updateAlternate(m);this._updateDatepicker(m)}},_changeDatepicker:function(b,a,e){this._optionDatepicker(b,a,e)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,a){var e=this._getInst(b);e&&(this._setDate(e,a),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(b,a){var e=this._getInst(b);e&&!e.inline&&this._setDateFromField(e,a);return e?this._getDate(e):null},_doKeyDown:function(c){var a=
b.datepicker._getInst(c.target),e=!0,m=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=!0;if(b.datepicker._datepickerShowing)switch(c.keyCode){case 9:b.datepicker._hideDatepicker();e=!1;break;case 13:return e=b("td."+b.datepicker._dayOverClass+":not(."+b.datepicker._currentClass+")",a.dpDiv),e[0]&&b.datepicker._selectDay(c.target,a.selectedMonth,a.selectedYear,e[0]),(c=b.datepicker._get(a,"onSelect"))?(e=b.datepicker._formatDate(a),c.apply(a.input?a.input[0]:null,[e,a])):b.datepicker._hideDatepicker(),
!1;case 27:b.datepicker._hideDatepicker();break;case 33:b.datepicker._adjustDate(c.target,c.ctrlKey?-b.datepicker._get(a,"stepBigMonths"):-b.datepicker._get(a,"stepMonths"),"M");break;case 34:b.datepicker._adjustDate(c.target,c.ctrlKey?+b.datepicker._get(a,"stepBigMonths"):+b.datepicker._get(a,"stepMonths"),"M");break;case 35:(c.ctrlKey||c.metaKey)&&b.datepicker._clearDate(c.target);e=c.ctrlKey||c.metaKey;break;case 36:(c.ctrlKey||c.metaKey)&&b.datepicker._gotoToday(c.target);e=c.ctrlKey||c.metaKey;
break;case 37:(c.ctrlKey||c.metaKey)&&b.datepicker._adjustDate(c.target,m?1:-1,"D");e=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&b.datepicker._adjustDate(c.target,c.ctrlKey?-b.datepicker._get(a,"stepBigMonths"):-b.datepicker._get(a,"stepMonths"),"M");break;case 38:(c.ctrlKey||c.metaKey)&&b.datepicker._adjustDate(c.target,-7,"D");e=c.ctrlKey||c.metaKey;break;case 39:(c.ctrlKey||c.metaKey)&&b.datepicker._adjustDate(c.target,m?-1:1,"D");e=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&b.datepicker._adjustDate(c.target,
c.ctrlKey?+b.datepicker._get(a,"stepBigMonths"):+b.datepicker._get(a,"stepMonths"),"M");break;case 40:(c.ctrlKey||c.metaKey)&&b.datepicker._adjustDate(c.target,7,"D");e=c.ctrlKey||c.metaKey;break;default:e=!1}else 36==c.keyCode&&c.ctrlKey?b.datepicker._showDatepicker(this):e=!1;e&&(c.preventDefault(),c.stopPropagation())},_doKeyPress:function(c){var a=b.datepicker._getInst(c.target);if(b.datepicker._get(a,"constrainInput")){var a=b.datepicker._possibleChars(b.datepicker._get(a,"dateFormat")),e=String.fromCharCode(c.charCode==
g?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||" ">e||!a||-1<a.indexOf(e)}},_doKeyUp:function(c){c=b.datepicker._getInst(c.target);if(c.input.val()!=c.lastVal)try{b.datepicker.parseDate(b.datepicker._get(c,"dateFormat"),c.input?c.input.val():null,b.datepicker._getFormatConfig(c))&&(b.datepicker._setDateFromField(c),b.datepicker._updateAlternate(c),b.datepicker._updateDatepicker(c))}catch(a){b.datepicker.log(a)}return!0},_showDatepicker:function(f){f=f.target||f;"input"!=f.nodeName.toLowerCase()&&
(f=b("input",f.parentNode)[0]);if(!b.datepicker._isDisabledDatepicker(f)&&b.datepicker._lastInput!=f){var a=b.datepicker._getInst(f);b.datepicker._curInst&&b.datepicker._curInst!=a&&(b.datepicker._curInst.dpDiv.stop(!0,!0),a&&b.datepicker._datepickerShowing&&b.datepicker._hideDatepicker(b.datepicker._curInst.input[0]));var e=b.datepicker._get(a,"beforeShow"),e=e?e.apply(f,[f,a]):{};if(!1!==e){c(a.settings,e);a.lastVal=null;b.datepicker._lastInput=f;b.datepicker._setDateFromField(a);b.datepicker._inDialog&&
(f.value="");b.datepicker._pos||(b.datepicker._pos=b.datepicker._findPos(f),b.datepicker._pos[1]+=f.offsetHeight);var m=!1;b(f).parents().each(function(){m|="fixed"==b(this).css("position");return!m});e={left:b.datepicker._pos[0],top:b.datepicker._pos[1]};b.datepicker._pos=null;a.dpDiv.empty();a.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});b.datepicker._updateDatepicker(a);e=b.datepicker._checkOffset(a,e,m);a.dpDiv.css({position:b.datepicker._inDialog&&b.blockUI?"static":m?"fixed":
"absolute",display:"none",left:e.left+"px",top:e.top+"px"});if(!a.inline){var e=b.datepicker._get(a,"showAnim"),k=b.datepicker._get(a,"duration"),d=function(){var e=a.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var c=b.datepicker._getBorders(a.dpDiv);e.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()})}};a.dpDiv.zIndex(b(f).zIndex()+1);b.datepicker._datepickerShowing=!0;if(b.effects&&(b.effects.effect[e]||b.effects[e]))a.dpDiv.show(e,b.datepicker._get(a,
"showOptions"),k,d);else a.dpDiv[e||"show"](e?k:null,d);e&&k||d();a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus();b.datepicker._curInst=a}}}},_updateDatepicker:function(c){this.maxRows=4;var a=b.datepicker._getBorders(c.dpDiv);f=c;c.dpDiv.empty().append(this._generateHTML(c));this._attachHandlers(c);var e=c.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-a[0],top:-a[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()});c.dpDiv.find("."+this._dayOverClass+" a").mouseover();
a=this._getNumberOfMonths(c);e=a[1];c.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<e&&c.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em");c.dpDiv[(1!=a[0]||1!=a[1]?"add":"remove")+"Class"]("ui-datepicker-multi");c.dpDiv[(this._get(c,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");c==b.datepicker._curInst&&b.datepicker._datepickerShowing&&c.input&&c.input.is(":visible")&&!c.input.is(":disabled")&&c.input[0]!=document.activeElement&&
c.input.focus();if(c.yearshtml){var m=c.yearshtml;setTimeout(function(){m===c.yearshtml&&c.yearshtml&&c.dpDiv.find("select.ui-datepicker-year:first").replaceWith(c.yearshtml);m=c.yearshtml=null},0)}},_getBorders:function(b){var a=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(a(b.css("border-left-width"))),parseFloat(a(b.css("border-top-width")))]},_checkOffset:function(c,a,e){var m=c.dpDiv.outerWidth(),f=c.dpDiv.outerHeight(),k=c.input?c.input.outerWidth():0,d=c.input?c.input.outerHeight():
0,l=document.documentElement.clientWidth+(e?0:b(document).scrollLeft()),g=document.documentElement.clientHeight+(e?0:b(document).scrollTop());a.left-=this._get(c,"isRTL")?m-k:0;a.left-=e&&a.left==c.input.offset().left?b(document).scrollLeft():0;a.top-=e&&a.top==c.input.offset().top+d?b(document).scrollTop():0;a.left-=Math.min(a.left,a.left+m>l&&l>m?Math.abs(a.left+m-l):0);a.top-=Math.min(a.top,a.top+f>g&&g>f?Math.abs(f+d):0);return a},_findPos:function(c){for(var a=this._getInst(c),a=this._get(a,
"isRTL");c&&("hidden"==c.type||1!=c.nodeType||b.expr.filters.hidden(c));)c=c[a?"previousSibling":"nextSibling"];c=b(c).offset();return[c.left,c.top]},_hideDatepicker:function(c){var a=this._curInst;if(a&&(!c||a==b.data(c,"datepicker"))&&this._datepickerShowing){c=this._get(a,"showAnim");var e=this._get(a,"duration"),m=function(){b.datepicker._tidyDialog(a)};if(b.effects&&(b.effects.effect[c]||b.effects[c]))a.dpDiv.hide(c,b.datepicker._get(a,"showOptions"),e,m);else a.dpDiv["slideDown"==c?"slideUp":
"fadeIn"==c?"fadeOut":"hide"](c?e:null,m);c||m();this._datepickerShowing=!1;(c=this._get(a,"onClose"))&&c.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(c){if(b.datepicker._curInst){c=
b(c.target);var a=b.datepicker._getInst(c[0]);(c[0].id!=b.datepicker._mainDivId&&0==c.parents("#"+b.datepicker._mainDivId).length&&!(c.hasClass(b.datepicker.markerClassName)||c.closest("."+b.datepicker._triggerClass).length||!b.datepicker._datepickerShowing||b.datepicker._inDialog&&b.blockUI)||c.hasClass(b.datepicker.markerClassName)&&b.datepicker._curInst!=a)&&b.datepicker._hideDatepicker()}},_adjustDate:function(c,a,e){c=b(c);var m=this._getInst(c[0]);this._isDisabledDatepicker(c[0])||(this._adjustInstDate(m,
a+("M"==e?this._get(m,"showCurrentAtPos"):0),e),this._updateDatepicker(m))},_gotoToday:function(c){c=b(c);var a=this._getInst(c[0]);if(this._get(a,"gotoCurrent")&&a.currentDay)a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear;else{var e=new Date;a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear()}this._notifyChange(a);this._adjustDate(c)},_selectMonthYear:function(c,a,e){c=b(c);var m=
this._getInst(c[0]);m["selected"+("M"==e?"Month":"Year")]=m["draw"+("M"==e?"Month":"Year")]=parseInt(a.options[a.selectedIndex].value,10);this._notifyChange(m);this._adjustDate(c)},_selectDay:function(c,a,e,m){var f=b(c);b(m).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=b("a",m).html(),f.selectedMonth=f.currentMonth=a,f.selectedYear=f.currentYear=e,this._selectDate(c,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},
_clearDate:function(c){c=b(c);this._getInst(c[0]);this._selectDate(c,"")},_selectDate:function(c,a){var e=b(c),e=this._getInst(e[0]);a=null!=a?a:this._formatDate(e);e.input&&e.input.val(a);this._updateAlternate(e);var m=this._get(e,"onSelect");m?m.apply(e.input?e.input[0]:null,[a,e]):e.input&&e.input.trigger("change");e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.focus(),this._lastInput=null)},_updateAlternate:function(c){var a=
this._get(c,"altField");if(a){var e=this._get(c,"altFormat")||this._get(c,"dateFormat"),m=this._getDate(c),f=this.formatDate(e,m,this._getFormatConfig(c));b(a).each(function(){b(this).val(f)})}},noWeekends:function(b){b=b.getDay();return[0<b&&6>b,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1},parseDate:function(c,a,e){if(null==c||null==a)throw"Invalid arguments";
a="object"==typeof a?a.toString():a+"";if(""==a)return null;for(var m=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,m="string"!=typeof m?m:(new Date).getFullYear()%100+parseInt(m,10),f=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,k=(e?e.dayNames:null)||this._defaults.dayNames,d=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,l=(e?e.monthNames:null)||this._defaults.monthNames,g=e=-1,n=-1,p=-1,s=!1,r=function(a){(a=K+1<c.length&&c.charAt(K+1)==a)&&K++;return a},t=function(b){var e=
r(b);b=RegExp("^\\d{1,"+("@"==b?14:"!"==b?20:"y"==b&&e?4:"o"==b?3:2)+"}");b=a.substring(E).match(b);if(!b)throw"Missing number at position "+E;E+=b[0].length;return parseInt(b[0],10)},J=function(e,c,m){e=b.map(r(e)?m:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var f=-1;b.each(e,function(b,e){var c=e[1];if(a.substr(E,c.length).toLowerCase()==c.toLowerCase())return f=e[0],E+=c.length,!1});if(-1!=f)return f+1;throw"Unknown name at position "+E;},M=function(){if(a.charAt(E)!=
c.charAt(K))throw"Unexpected literal at position "+E;E++},E=0,K=0;K<c.length;K++)if(s)"'"!=c.charAt(K)||r("'")?M():s=!1;else switch(c.charAt(K)){case "d":n=t("d");break;case "D":J("D",f,k);break;case "o":p=t("o");break;case "m":g=t("m");break;case "M":g=J("M",d,l);break;case "y":e=t("y");break;case "@":var G=new Date(t("@"));e=G.getFullYear();g=G.getMonth()+1;n=G.getDate();break;case "!":G=new Date((t("!")-this._ticksTo1970)/1E4);e=G.getFullYear();g=G.getMonth()+1;n=G.getDate();break;case "'":r("'")?
M():s=!0;break;default:M()}if(E<a.length&&(f=a.substr(E),!/^\s+/.test(f)))throw"Extra/unparsed characters found in date: "+f;-1==e?e=(new Date).getFullYear():100>e&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=m?0:-100));if(-1<p){g=1;n=p;do{m=this._getDaysInMonth(e,g-1);if(n<=m)break;g++;n-=m}while(1)}G=this._daylightSavingAdjust(new Date(e,g-1,n));if(G.getFullYear()!=e||G.getMonth()+1!=g||G.getDate()!=n)throw"Invalid date";return G},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(b,a,e){if(!a)return"";var c=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,f=(e?e.dayNames:null)||this._defaults.dayNames,k=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort;e=(e?e.monthNames:null)||this._defaults.monthNames;var d=
function(a){(a=s+1<b.length&&b.charAt(s+1)==a)&&s++;return a},l=function(a,b,e){b=""+b;if(d(a))for(;b.length<e;)b="0"+b;return b},g=function(a,b,e,c){return d(a)?c[b]:e[b]},n="",p=!1;if(a)for(var s=0;s<b.length;s++)if(p)"'"!=b.charAt(s)||d("'")?n+=b.charAt(s):p=!1;else switch(b.charAt(s)){case "d":n+=l("d",a.getDate(),2);break;case "D":n+=g("D",a.getDay(),c,f);break;case "o":n+=l("o",Math.round(((new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime()-(new Date(a.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":n+=l("m",a.getMonth()+1,2);break;case "M":n+=g("M",a.getMonth(),k,e);break;case "y":n+=d("y")?a.getFullYear():(10>a.getYear()%100?"0":"")+a.getYear()%100;break;case "@":n+=a.getTime();break;case "!":n+=1E4*a.getTime()+this._ticksTo1970;break;case "'":d("'")?n+="'":p=!0;break;default:n+=b.charAt(s)}return n},_possibleChars:function(b){for(var a="",e=!1,c=function(a){(a=f+1<b.length&&b.charAt(f+1)==a)&&f++;return a},f=0;f<b.length;f++)if(e)"'"!=b.charAt(f)||c("'")?a+=b.charAt(f):
e=!1;else switch(b.charAt(f)){case "d":case "m":case "y":case "@":a+="0123456789";break;case "D":case "M":return null;case "'":c("'")?a+="'":e=!0;break;default:a+=b.charAt(f)}return a},_get:function(b,a){return b.settings[a]!==g?b.settings[a]:this._defaults[a]},_setDateFromField:function(b,a){if(b.input.val()!=b.lastVal){var e=this._get(b,"dateFormat"),c=b.lastVal=b.input?b.input.val():null,f,k;f=k=this._getDefaultDate(b);var d=this._getFormatConfig(b);try{f=this.parseDate(e,c,d)||k}catch(l){this.log(l),
c=a?"":c}b.selectedDay=f.getDate();b.drawMonth=b.selectedMonth=f.getMonth();b.drawYear=b.selectedYear=f.getFullYear();b.currentDay=c?f.getDate():0;b.currentMonth=c?f.getMonth():0;b.currentYear=c?f.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(c,a,e){var m=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(a){try{return b.datepicker.parseDate(b.datepicker._get(c,
"dateFormat"),a,b.datepicker._getFormatConfig(c))}catch(e){}for(var m=(a.toLowerCase().match(/^c/)?b.datepicker._getDate(c):null)||new Date,f=m.getFullYear(),k=m.getMonth(),m=m.getDate(),d=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=d.exec(a);l;){switch(l[2]||"d"){case "d":case "D":m+=parseInt(l[1],10);break;case "w":case "W":m+=7*parseInt(l[1],10);break;case "m":case "M":k+=parseInt(l[1],10);m=Math.min(m,b.datepicker._getDaysInMonth(f,k));break;case "y":case "Y":f+=parseInt(l[1],10),m=Math.min(m,b.datepicker._getDaysInMonth(f,
k))}l=d.exec(a)}return new Date(f,k,m)};if(a=(a=null==a||""===a?e:"string"==typeof a?f(a):"number"==typeof a?isNaN(a)?e:m(a):new Date(a.getTime()))&&"Invalid Date"==a.toString()?e:a)a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);return this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(b){if(!b)return null;b.setHours(12<b.getHours()?b.getHours()+2:0);return b},_setDate:function(b,a,e){var c=!a,f=b.selectedMonth,k=b.selectedYear;a=this._restrictMinMax(b,this._determineDate(b,
a,new Date));b.selectedDay=b.currentDay=a.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=a.getMonth();b.drawYear=b.selectedYear=b.currentYear=a.getFullYear();f==b.selectedMonth&&k==b.selectedYear||e||this._notifyChange(b);this._adjustInstDate(b);b.input&&b.input.val(c?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&""==b.input.val()?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_attachHandlers:function(c){var a=this._get(c,
"stepMonths"),e="#"+c.id.replace(/\\\\/g,"\\");c.dpDiv.find("[data-handler]").map(function(){b(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+k].datepicker._adjustDate(e,-a,"M")},next:function(){window["DP_jQuery_"+k].datepicker._adjustDate(e,+a,"M")},hide:function(){window["DP_jQuery_"+k].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+k].datepicker._gotoToday(e)},selectDay:function(){window["DP_jQuery_"+k].datepicker._selectDay(e,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+k].datepicker._selectMonthYear(e,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+k].datepicker._selectMonthYear(e,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(c){var a=new Date,a=this._daylightSavingAdjust(new Date(a.getFullYear(),a.getMonth(),a.getDate())),e=this._get(c,"isRTL"),m=this._get(c,"showButtonPanel"),f=this._get(c,"hideIfNoPrevNext"),k=this._get(c,
"navigationAsDateFormat"),d=this._getNumberOfMonths(c),l=this._get(c,"showCurrentAtPos"),g=this._get(c,"stepMonths"),n=1!=d[0]||1!=d[1],p=this._daylightSavingAdjust(c.currentDay?new Date(c.currentYear,c.currentMonth,c.currentDay):new Date(9999,9,9)),s=this._getMinMaxDate(c,"min"),r=this._getMinMaxDate(c,"max"),l=c.drawMonth-l,t=c.drawYear;0>l&&(l+=12,t--);if(r)for(var J=this._daylightSavingAdjust(new Date(r.getFullYear(),r.getMonth()-d[0]*d[1]+1,r.getDate())),J=s&&J<s?s:J;this._daylightSavingAdjust(new Date(t,
l,1))>J;)l--,0>l&&(l=11,t--);c.drawMonth=l;c.drawYear=t;var J=this._get(c,"prevText"),J=k?this.formatDate(J,this._daylightSavingAdjust(new Date(t,l-g,1)),this._getFormatConfig(c)):J,J=this._canAdjustMonth(c,-1,t,l)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+J+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"e":"w")+'">'+J+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+J+'"><span class="ui-icon ui-icon-circle-triangle-'+
(e?"e":"w")+'">'+J+"</span></a>",M=this._get(c,"nextText"),M=k?this.formatDate(M,this._daylightSavingAdjust(new Date(t,l+g,1)),this._getFormatConfig(c)):M,f=this._canAdjustMonth(c,1,t,l)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+M+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"w":"e")+'">'+M+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+M+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"w":
"e")+'">'+M+"</span></a>",g=this._get(c,"currentText"),M=this._get(c,"gotoCurrent")&&c.currentDay?p:a,g=k?this.formatDate(g,M,this._getFormatConfig(c)):g,k=c.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(c,"closeText")+"</button>",m=m?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(e?k:"")+(this._isInRange(c,M)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
g+"</button>":"")+(e?"":k)+"</div>":"",k=parseInt(this._get(c,"firstDay"),10),k=isNaN(k)?0:k,g=this._get(c,"showWeek"),M=this._get(c,"dayNames");this._get(c,"dayNamesShort");var E=this._get(c,"dayNamesMin"),K=this._get(c,"monthNames"),G=this._get(c,"monthNamesShort"),u=this._get(c,"beforeShowDay"),S=this._get(c,"showOtherMonths"),Q=this._get(c,"selectOtherMonths");this._get(c,"calculateWeek");for(var W=this._getDefaultDate(c),P="",aa=0;aa<d[0];aa++){var ca="";this.maxRows=4;for(var Y=0;Y<d[1];Y++){var U=
this._daylightSavingAdjust(new Date(t,l,c.selectedDay)),V=" ui-corner-all",R="";if(n){R+='<div class="ui-datepicker-group';if(1<d[1])switch(Y){case 0:R+=" ui-datepicker-group-first";V=" ui-corner-"+(e?"right":"left");break;case d[1]-1:R+=" ui-datepicker-group-last";V=" ui-corner-"+(e?"left":"right");break;default:R+=" ui-datepicker-group-middle",V=""}R+='">'}for(var R=R+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+V+'">'+(/all|left/.test(V)&&0==aa?e?f:J:"")+(/all|right/.test(V)&&
0==aa?e?J:f:"")+this._generateMonthYearHeader(c,l,t,s,r,0<aa||0<Y,K,G)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),ba=g?'<th class="ui-datepicker-week-col">'+this._get(c,"weekHeader")+"</th>":"",V=0;7>V;V++)var Z=(V+k)%7,ba=ba+("<th"+(5<=(V+k+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+M[Z]+'">'+E[Z]+"</span></th>");R+=ba+"</tr></thead><tbody>";ba=this._getDaysInMonth(t,l);t==c.selectedYear&&l==c.selectedMonth&&(c.selectedDay=Math.min(c.selectedDay,ba));V=(this._getFirstDayOfMonth(t,
l)-k+7)%7;ba=Math.ceil((V+ba)/7);this.maxRows=ba=n?this.maxRows>ba?this.maxRows:ba:ba;for(var Z=this._daylightSavingAdjust(new Date(t,l,1-V)),na=0;na<ba;na++){for(var R=R+"<tr>",ka=g?'<td class="ui-datepicker-week-col">'+this._get(c,"calculateWeek")(Z)+"</td>":"",V=0;7>V;V++){var ja=u?u.apply(c.input?c.input[0]:null,[Z]):[!0,""],ea=Z.getMonth()!=l,da=ea&&!Q||!ja[0]||s&&Z<s||r&&Z>r,ka=ka+('<td class="'+(5<=(V+k+6)%7?" ui-datepicker-week-end":"")+(ea?" ui-datepicker-other-month":"")+(Z.getTime()==U.getTime()&&
l==c.selectedMonth&&c._keyEvent||W.getTime()==Z.getTime()&&W.getTime()==U.getTime()?" "+this._dayOverClass:"")+(da?" "+this._unselectableClass+" ui-state-disabled":"")+(ea&&!S?"":" "+ja[1]+(Z.getTime()==p.getTime()?" "+this._currentClass:"")+(Z.getTime()==a.getTime()?" ui-datepicker-today":""))+'"'+(ea&&!S||!ja[2]?"":' title="'+ja[2]+'"')+(da?"":' data-handler="selectDay" data-event="click" data-month="'+Z.getMonth()+'" data-year="'+Z.getFullYear()+'"')+">"+(ea&&!S?"&#xa0;":da?'<span class="ui-state-default">'+
Z.getDate()+"</span>":'<a class="ui-state-default'+(Z.getTime()==a.getTime()?" ui-state-highlight":"")+(Z.getTime()==p.getTime()?" ui-state-active":"")+(ea?" ui-priority-secondary":"")+'" href="#">'+Z.getDate()+"</a>")+"</td>");Z.setDate(Z.getDate()+1);Z=this._daylightSavingAdjust(Z)}R+=ka+"</tr>"}l++;11<l&&(l=0,t++);R+="</tbody></table>"+(n?"</div>"+(0<d[0]&&Y==d[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");ca+=R}P+=ca}P+=m+(b.browser.msie&&7>parseInt(b.browser.version,10)&&!c.inline?
'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");c._keyEvent=!1;return P},_generateMonthYearHeader:function(b,a,e,c,f,k,d,l){var g=this._get(b,"changeMonth"),n=this._get(b,"changeYear"),p=this._get(b,"showMonthAfterYear"),s='<div class="ui-datepicker-title">',r="";if(k||!g)r+='<span class="ui-datepicker-month">'+d[a]+"</span>";else{d=c&&c.getFullYear()==e;for(var t=f&&f.getFullYear()==e,r=r+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
J=0;12>J;J++)(!d||J>=c.getMonth())&&(!t||J<=f.getMonth())&&(r+='<option value="'+J+'"'+(J==a?' selected="selected"':"")+">"+l[J]+"</option>");r+="</select>"}p||(s+=r+(!k&&g&&n?"":"&#xa0;"));if(!b.yearshtml)if(b.yearshtml="",k||!n)s+='<span class="ui-datepicker-year">'+e+"</span>";else{l=this._get(b,"yearRange").split(":");var M=(new Date).getFullYear();d=function(a){a=a.match(/c[+-].*/)?e+parseInt(a.substring(1),10):a.match(/[+-].*/)?M+parseInt(a,10):parseInt(a,10);return isNaN(a)?M:a};a=d(l[0]);
l=Math.max(a,d(l[1]||""));a=c?Math.max(a,c.getFullYear()):a;l=f?Math.min(l,f.getFullYear()):l;for(b.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';a<=l;a++)b.yearshtml+='<option value="'+a+'"'+(a==e?' selected="selected"':"")+">"+a+"</option>";b.yearshtml+="</select>";s+=b.yearshtml;b.yearshtml=null}s+=this._get(b,"yearSuffix");p&&(s+=(!k&&g&&n?"":"&#xa0;")+r);return s+"</div>"},_adjustInstDate:function(b,a,e){var c=b.drawYear+("Y"==e?a:0),f=b.drawMonth+
("M"==e?a:0);a=Math.min(b.selectedDay,this._getDaysInMonth(c,f))+("D"==e?a:0);c=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(c,f,a)));b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear();"M"!=e&&"Y"!=e||this._notifyChange(b)},_restrictMinMax:function(b,a){var e=this._getMinMaxDate(b,"min"),c=this._getMinMaxDate(b,"max"),e=e&&a<e?e:a;return c&&e>c?c:e},_notifyChange:function(b){var a=this._get(b,"onChangeMonthYear");a&&a.apply(b.input?
b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(b,a){return this._determineDate(b,this._get(b,a+"Date"),null)},_getDaysInMonth:function(b,a){return 32-this._daylightSavingAdjust(new Date(b,a,32)).getDate()},_getFirstDayOfMonth:function(b,a){return(new Date(b,a,1)).getDay()},_canAdjustMonth:function(b,a,e,c){var f=this._getNumberOfMonths(b);e=this._daylightSavingAdjust(new Date(e,
c+(0>a?a:f[0]*f[1]),1));0>a&&e.setDate(this._getDaysInMonth(e.getFullYear(),e.getMonth()));return this._isInRange(b,e)},_isInRange:function(b,a){var e=this._getMinMaxDate(b,"min"),c=this._getMinMaxDate(b,"max");return(!e||a.getTime()>=e.getTime())&&(!c||a.getTime()<=c.getTime())},_getFormatConfig:function(b){var a=this._get(b,"shortYearCutoff"),a="string"!=typeof a?a:(new Date).getFullYear()%100+parseInt(a,10);return{shortYearCutoff:a,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,
"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,a,e,c){a||(b.currentDay=b.selectedDay,b.currentMonth=b.selectedMonth,b.currentYear=b.selectedYear);a=a?"object"==typeof a?a:this._daylightSavingAdjust(new Date(c,e,a)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,"dateFormat"),a,this._getFormatConfig(b))}});b.fn.datepicker=function(c){if(!this.length)return this;
b.datepicker.initialized||(b(document).mousedown(b.datepicker._checkExternalClick).find(document.body).append(b.datepicker.dpDiv),b.datepicker.initialized=!0);var a=Array.prototype.slice.call(arguments,1);return"string"==typeof c&&("isDisabled"==c||"getDate"==c||"widget"==c)||"option"==c&&2==arguments.length&&"string"==typeof arguments[1]?b.datepicker["_"+c+"Datepicker"].apply(b.datepicker,[this[0]].concat(a)):this.each(function(){"string"==typeof c?b.datepicker["_"+c+"Datepicker"].apply(b.datepicker,
[this].concat(a)):b.datepicker._attachDatepicker(this,c)})};b.datepicker=new l;b.datepicker.initialized=!1;b.datepicker.uuid=(new Date).getTime();b.datepicker.version="1.9.0";window["DP_jQuery_"+k]=b})(g);(function(b,g){var l={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};b.widget("ui.dialog",{version:"1.9.0",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,
height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(c){var k=b(this).css(c).offset().top;0>k&&b(this).css("top",c.top-k)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.options.title=this.options.title||this.originalTitle;var c=this,k=this.options,f=k.title||"&#160;",d=(this.uiDialog=b("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+k.dialogClass).css({display:"none",outline:0,zIndex:k.zIndex}).attr("tabIndex",-1).keydown(function(a){k.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===b.ui.keyCode.ESCAPE&&(c.close(a),a.preventDefault())}).mousedown(function(a){c.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(d);
var a=(this.uiDialogTitlebar=b("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(d),e=b("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();c.close(a)}).appendTo(a);(this.uiDialogTitlebarCloseText=b("<span>")).addClass("ui-icon ui-icon-closethick").text(k.closeText).appendTo(e);var f=b("<span>").uniqueId().addClass("ui-dialog-title").html(f).prependTo(a),m=(this.uiDialogButtonPane=
b("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=b("<div>")).addClass("ui-dialog-buttonset").appendTo(m);d.attr({role:"dialog","aria-labelledby":f.attr("id")});a.find("*").add(a).disableSelection();this._hoverable(e);this._focusable(e);k.draggable&&b.fn.draggable&&this._makeDraggable();k.resizable&&b.fn.resizable&&this._makeResizable();this._createButtons(k.buttons);this._isOpen=!1;b.fn.bgiframe&&d.bgiframe();this._on(d,{keydown:function(a){if(k.modal&&
a.keyCode===b.ui.keyCode.TAB){var e=b(":tabbable",d),c=e.filter(":first"),e=e.filter(":last");if(a.target===e[0]&&!a.shiftKey)return c.focus(1),!1;if(a.target===c[0]&&a.shiftKey)return e.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var b,k=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",
this.originalTitle);b=k.parent.children().eq(k.index);b.length&&b[0]!==this.element[0]?b.before(this.element):k.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(c){var k=this,f,d;if(this._isOpen&&!1!==this._trigger("beforeClose",c))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this.uiDialog.hide(this.options.hide,function(){k._trigger("close",c)}):(this.uiDialog.hide(),this._trigger("close",c)),b.ui.dialog.overlay.resize(),this.options.modal&&
(f=0,b(".ui-dialog").each(function(){this!==k.uiDialog[0]&&(d=b(this).css("z-index"),isNaN(d)||(f=Math.max(f,d)))}),b.ui.dialog.maxZ=f),this},isOpen:function(){return this._isOpen},moveToTop:function(c,k){var f=this.options;if(f.modal&&!c||!f.stack&&!f.modal)return this._trigger("focus",k);f.zIndex>b.ui.dialog.maxZ&&(b.ui.dialog.maxZ=f.zIndex);this.overlay&&(b.ui.dialog.maxZ+=1,b.ui.dialog.overlay.maxZ=b.ui.dialog.maxZ,this.overlay.$el.css("z-index",b.ui.dialog.overlay.maxZ));f={scrollTop:this.element.scrollTop(),
scrollLeft:this.element.scrollLeft()};b.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",b.ui.dialog.maxZ);this.element.attr(f);this._trigger("focus",k);return this},open:function(){if(!this._isOpen){var c;c=this.options;var k=this.uiDialog;this._size();this._position(c.position);k.show(c.show);this.overlay=c.modal?new b.ui.dialog.overlay(this):null;this.moveToTop(!0);c=this.element.find(":tabbable");c.length||(c=this.uiDialogButtonPane.find(":tabbable"),c.length||(c=k));c.eq(0).focus();this._isOpen=
!0;this._trigger("open");return this}},_createButtons:function(c){var k=this,f=!1;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();"object"===typeof c&&null!==c&&b.each(c,function(){return!(f=!0)});f?(b.each(c,function(c,a){a=b.isFunction(a)?{click:a,text:c}:a;var e=b("<button type='button'>").attr(a,!0).unbind("click").click(function(){a.click.apply(k.element[0],arguments)}).appendTo(k.uiButtonSet);b.fn.button&&e.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):
this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function c(b){return{position:b.position,offset:b.offset}}var k=this,f=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,a){b(this).addClass("ui-dialog-dragging");k._trigger("dragStart",f,c(a))},drag:function(b,a){k._trigger("drag",b,c(a))},stop:function(d,a){f.position=[a.position.left-k.document.scrollLeft(),a.position.top-
k.document.scrollTop()];b(this).removeClass("ui-dialog-dragging");k._trigger("dragStop",d,c(a));b.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function k(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===g?this.options.resizable:c;var f=this,d=this.options,a=this.uiDialog.css("position");c="string"===typeof c?c:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,
maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:c,start:function(a,c){b(this).addClass("ui-dialog-resizing");f._trigger("resizeStart",a,k(c))},resize:function(a,b){f._trigger("resize",a,k(b))},stop:function(a,c){b(this).removeClass("ui-dialog-resizing");d.height=b(this).height();d.width=b(this).width();f._trigger("resizeStop",a,k(c));b.ui.dialog.overlay.resize()}}).css("position",a).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},
_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(c){var k=[],f=[0,0],d;if(c){if("string"===typeof c||"object"===typeof c&&"0"in c)k=c.split?c.split(" "):[c[0],c[1]],1===k.length&&(k[1]=k[0]),b.each(["left","top"],function(a,b){+k[a]===k[a]&&(f[a]=k[a],k[a]=b)}),c={my:k.join(" "),at:k.join(" "),offset:f.join(" ")};c=b.extend({},b.ui.dialog.prototype.options.position,c)}else c=b.ui.dialog.prototype.options.position;(d=this.uiDialog.is(":visible"))||
this.uiDialog.show();this.uiDialog.position(c);d||this.uiDialog.hide()},_setOptions:function(c){var k=this,f={},q=!1;b.each(c,function(a,b){k._setOption(a,b);a in l&&(q=!0);a in d&&(f[a]=b)});q&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(c,k){var f,d=this.uiDialog;switch(c){case "buttons":this._createButtons(k);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+k);break;case "dialogClass":d.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
k);break;case "disabled":k?d.addClass("ui-dialog-disabled"):d.removeClass("ui-dialog-disabled");break;case "draggable":(f=d.is(":data(draggable)"))&&!k&&d.draggable("destroy");!f&&k&&this._makeDraggable();break;case "position":this._position(k);break;case "resizable":(f=d.is(":data(resizable)"))&&!k&&d.resizable("destroy");f&&"string"===typeof k&&d.resizable("option","handles",k);f||!1===k||this._makeResizable(k);break;case "title":b(".ui-dialog-title",this.uiDialogTitlebar).html(""+(k||"&#160;"))}this._super(c,
k)},_size:function(){var c,d,f=this.options,l=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});f.minWidth>f.width&&(f.width=f.minWidth);c=this.uiDialog.css({height:"auto",width:f.width}).outerHeight();d=Math.max(0,f.minHeight-c);"auto"===f.height?b.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),c=this.element.css("height","auto").height(),l||this.uiDialog.hide(),this.element.height(Math.max(c,d))):this.element.height(Math.max(f.height-
c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});b.extend(b.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(b){b=b.attr("id");b||(b=this.uuid+=1);return"ui-dialog-title-"+b},overlay:function(c){this.$el=b.ui.dialog.overlay.create(c)}});b.extend(b.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:b.map("focus mousedown mouseup keydown keypress click".split(" "),function(b){return b+".dialog-overlay"}).join(" "),create:function(c){0===
this.instances.length&&(setTimeout(function(){b.ui.dialog.overlay.instances.length&&b(document).bind(b.ui.dialog.overlay.events,function(c){if(b(c.target).zIndex()<b.ui.dialog.overlay.maxZ)return!1})},1),b(window).bind("resize.dialog-overlay",b.ui.dialog.overlay.resize));var d=this.oldInstances.pop()||b("<div>").addClass("ui-widget-overlay");b(document).bind("keydown.dialog-overlay",function(f){var l=b.ui.dialog.overlay.instances;0!==l.length&&l[l.length-1]===d&&c.options.closeOnEscape&&!f.isDefaultPrevented()&&
f.keyCode&&f.keyCode===b.ui.keyCode.ESCAPE&&(c.close(f),f.preventDefault())});d.appendTo(document.body).css({width:this.width(),height:this.height()});b.fn.bgiframe&&d.bgiframe();this.instances.push(d);return d},destroy:function(c){var d=b.inArray(c,this.instances),f=0;-1!==d&&this.oldInstances.push(this.instances.splice(d,1)[0]);0===this.instances.length&&b([document,window]).unbind(".dialog-overlay");c.height(0).width(0).remove();b.each(this.instances,function(){f=Math.max(f,this.css("z-index"))});
this.maxZ=f},height:function(){var c,d;return b.browser.msie?(c=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c<d?b(window).height()+"px":c+"px"):b(document).height()+"px"},width:function(){var c,d;return b.browser.msie?(c=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c<d?b(window).width()+"px":
c+"px"):b(document).width()+"px"},resize:function(){var c=b([]);b.each(b.ui.dialog.overlay.instances,function(){c=c.add(this)});c.css({width:0,height:0}).css({width:b.ui.dialog.overlay.width(),height:b.ui.dialog.overlay.height()})}});b.extend(b.ui.dialog.overlay.prototype,{destroy:function(){b.ui.dialog.overlay.destroy(this.$el)}})})(g);(function(b,g){var l=!1;b.widget("ui.menu",{version:"1.9.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",
at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,b.proxy(function(b){this.options.disabled&&b.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");
this._on({"mousedown .ui-menu-item > a":function(b){b.preventDefault()},"click .ui-state-disabled > a":function(b){b.preventDefault()},"click .ui-menu-item:has(a)":function(d){var c=b(d.target).closest(".ui-menu-item");!l&&c.not(".ui-state-disabled").length&&(l=!0,this.select(d),c.has(".ui-menu").length?this.expand(d):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(d){var c=
b(d.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(d,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,c){var k=this.active||this.element.children(".ui-menu-item").eq(0);c||this.focus(b,k)},blur:function(d){this._delay(function(){b.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(d)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(d){b(d.target).closest(".ui-menu").length||
this.collapseAll(d);l=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var d=
b(this);d.data("ui-menu-submenu-carat")&&d.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(d){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var k,f,l,a,e=!0;switch(d.keyCode){case b.ui.keyCode.PAGE_UP:this.previousPage(d);break;case b.ui.keyCode.PAGE_DOWN:this.nextPage(d);break;case b.ui.keyCode.HOME:this._move("first","first",d);break;case b.ui.keyCode.END:this._move("last","last",d);break;case b.ui.keyCode.UP:this.previous(d);
break;case b.ui.keyCode.DOWN:this.next(d);break;case b.ui.keyCode.LEFT:this.collapse(d);break;case b.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(d);break;case b.ui.keyCode.ENTER:case b.ui.keyCode.SPACE:this._activate(d);break;case b.ui.keyCode.ESCAPE:this.collapse(d);break;default:e=!1,k=this.previousFilter||"",f=String.fromCharCode(d.keyCode),l=!1,clearTimeout(this.filterTimer),f===k?l=!0:f=k+f,a=RegExp("^"+c(f),"i"),k=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(b(this).children("a").text())}),
k=l&&-1!==k.index(this.active.next())?this.active.nextAll(".ui-menu-item"):k,k.length||(f=String.fromCharCode(d.keyCode),a=RegExp("^"+c(f),"i"),k=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(b(this).children("a").text())})),k.length?(this.focus(d,k),1<k.length?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}e&&d.preventDefault()},_activate:function(b){this.active.is(".ui-state-disabled")||
(this.active.children("a[aria-haspopup='true']").length?this.expand(b):this.select(b))},refresh:function(){var d,c=this.options.icons.submenu,k=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});d=k.add(this.element);d.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});d.children(":not(.ui-menu-item)").each(function(){var c=b(this);/[^\-\u2014\u2013\s]/.test(c.text())||c.addClass("ui-widget-content ui-menu-divider")});d.children(".ui-state-disabled").attr("aria-disabled","true");k.each(function(){var f=b(this),d=f.prev("a"),a=b("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(a);f.attr("aria-labelledby",d.attr("id"))});this.active&&!b.contains(this.element[0],this.active[0])&&
this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(b,c){var k;this.blur(b,b&&"focus"===b.type);this._scrollIntoView(c);this.active=c.first();k=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",k.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},
this.delay);k=c.children(".ui-menu");k.length&&/^mouse/.test(b.type)&&this._startOpening(k);this.activeMenu=c.parent();this._trigger("focus",b,{item:c})},_scrollIntoView:function(d){var c,k,f;this._hasScroll()&&(c=parseFloat(b.css(this.activeMenu[0],"borderTopWidth"))||0,k=parseFloat(b.css(this.activeMenu[0],"paddingTop"))||0,c=d.offset().top-this.activeMenu.offset().top-c-k,k=this.activeMenu.scrollTop(),f=this.activeMenu.height(),d=d.height(),0>c?this.activeMenu.scrollTop(k+c):c+d>f&&this.activeMenu.scrollTop(k+
c-f+d))},blur:function(b,c){c||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(d){var c=b.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden",
"true");d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(d,c){clearTimeout(this.timer);this.timer=this._delay(function(){var k=c?this.element:b(d&&d.target).closest(this.element.find(".ui-menu"));k.length||(k=this.element);this._close(k);this.blur(d);this.activeMenu=k},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element);b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},
collapse:function(b){var c=this.active&&this.active.parent().closest(".ui-menu-item",this.element);c&&c.length&&(this._close(),this.focus(b,c))},expand:function(b){var c=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();c&&c.length&&(this._open(c.parent()),this._delay(function(){this.focus(b,c)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},
isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(b,c,k){var f;this.active&&(f="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[b+"All"](".ui-menu-item").eq(0));f&&f.length&&this.active||(f=this.activeMenu.children(".ui-menu-item")[c]());this.focus(k,f)},nextPage:function(d){var c,k,f;this.active?this.isLastItem()||(this._hasScroll()?(k=this.active.offset().top,f=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=
b(this);return 0>c.offset().top-k-f}),this.focus(d,c)):this.focus(d,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(d)},previousPage:function(d){var c,k,f;this.active?this.isFirstItem()||(this._hasScroll()?(k=this.active.offset().top,f=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=b(this);return 0<c.offset().top-k+f}),this.focus(d,c)):this.focus(d,this.activeMenu.children(".ui-menu-item").first())):this.next(d)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(d){this.active=this.active||b(d.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(d,!0);this._trigger("select",d,c)}})})(g);(function(b,g){b.widget("ui.progressbar",{version:"1.9.0",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,
"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(b){if(b===g)return this._value();this._setOption("value",
b);return this},_setOption:function(b,d){"value"===b&&(this.options.value=d,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(b,d)},_value:function(){var b=this.options.value;"number"!==typeof b&&(b=0);return Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var b=this.value(),d=this._percentage();this.oldValue!==b&&(this.oldValue=b,this._trigger("change"));this.valueDiv.toggle(b>
this.min).toggleClass("ui-corner-right",b===this.options.max).width(d.toFixed(0)+"%");this.element.attr("aria-valuenow",b)}})})(g);(function(b,g){b.widget("ui.slider",b.ui.mouse,{version:"1.9.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var l,d=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),k=d.values&&d.values.length||1,f=[];this._mouseSliding=
this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);d.range&&(!0===d.range&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+
("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(l=c.length;l<k;l++)f.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=c.add(b(f.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).mouseenter(function(){d.disabled||b(this).addClass("ui-state-hover")}).mouseleave(function(){b(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?
b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(c){b(this).data("ui-slider-handle-index",c)});this._on(this.handles,{keydown:function(c){var a,e,m,f=b(c.target).data("ui-slider-handle-index");switch(c.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(c.preventDefault(),
!this._keySliding&&(this._keySliding=!0,b(c.target).addClass("ui-state-active"),a=this._start(c,f),!1===a))return}m=this.options.step;a=this.options.values&&this.options.values.length?e=this.values(f):e=this.value();switch(c.keyCode){case b.ui.keyCode.HOME:e=this._valueMin();break;case b.ui.keyCode.END:e=this._valueMax();break;case b.ui.keyCode.PAGE_UP:e=this._trimAlignValue(a+(this._valueMax()-this._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:e=this._trimAlignValue(a-(this._valueMax()-this._valueMin())/
5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(a===this._valueMax())return;e=this._trimAlignValue(a+m);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(a===this._valueMin())return;e=this._trimAlignValue(a-m)}this._slide(c,f,e)},keyup:function(c){var a=b(c.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(c,a),this._change(c,a),b(c.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();
this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(l){var d,c,k,f,q,a=this;q=this.options;if(q.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();d=this._normValueFromMouse({x:l.pageX,y:l.pageY});c=this._valueMax()-this._valueMin()+1;this.handles.each(function(e){var m=
Math.abs(d-a.values(e));c>m&&(c=m,k=b(this),f=e)});!0===q.range&&this.values(1)===q.min&&(f+=1,k=b(this.handles[f]));if(!1===this._start(l,f))return!1;this._mouseSliding=!0;this._handleIndex=f;k.addClass("ui-state-active").focus();q=k.offset();this._clickOffset=b(l.target).parents().andSelf().is(".ui-slider-handle")?{left:l.pageX-q.left-k.width()/2,top:l.pageY-q.top-k.height()/2-(parseInt(k.css("borderTopWidth"),10)||0)-(parseInt(k.css("borderBottomWidth"),10)||0)+(parseInt(k.css("marginTop"),10)||
0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(l,f,d);return this._animateOff=!0},_mouseStart:function(b){return!0},_mouseDrag:function(b){var d=this._normValueFromMouse({x:b.pageX,y:b.pageY});this._slide(b,this._handleIndex,d);return!1},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation=
"vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var d;"horizontal"===this.orientation?(d=this.elementSize.width,b=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(d=this.elementSize.height,b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));d=b/d;1<d&&(d=1);0>d&&(d=0);"vertical"===this.orientation&&(d=1-d);b=this._valueMax()-this._valueMin();d=this._valueMin()+d*b;return this._trimAlignValue(d)},_start:function(b,
d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());return this._trigger("start",b,c)},_slide:function(b,d,c){var k;this.options.values&&this.options.values.length?(k=this.values(d?0:1),2===this.options.values.length&&!0===this.options.range&&(0===d&&c>k||1===d&&c<k)&&(c=k),c!==this.values(d)&&(k=this.values(),k[d]=c,b=this._trigger("slide",b,{handle:this.handles[d],value:c,values:k}),this.values(d?0:
1),!1!==b&&this.values(d,c,!0))):c!==this.value()&&(b=this._trigger("slide",b,{handle:this.handles[d],value:c}),!1!==b&&this.value(c))},_stop:function(b,d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());this._trigger("stop",b,c)},_change:function(b,d){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=
this.values(d),c.values=this.values());this._trigger("change",b,c)}},value:function(b){if(arguments.length)this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);else return this._value()},values:function(l,d){var c,k,f;if(1<arguments.length)this.options.values[l]=this._trimAlignValue(d),this._refreshValue(),this._change(null,l);else if(arguments.length)if(b.isArray(arguments[0])){c=this.options.values;k=arguments[0];for(f=0;f<c.length;f+=1)c[f]=this._trimAlignValue(k[f]),
this._change(null,f);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(l):this.value();else return this._values()},_setOption:function(l,d){var c,k=0;b.isArray(this.options.values)&&(k=this.options.values.length);b.Widget.prototype._setOption.apply(this,arguments);switch(l){case "disabled":d?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",
!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<k;c+=1)this._change(null,c);this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},
_values:function(b){var d,c;if(arguments.length)return d=this.options.values[b],d=this._trimAlignValue(d);d=this.options.values.slice();for(c=0;c<d.length;c+=1)d[c]=this._trimAlignValue(d[c]);return d},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var d=0<this.options.step?this.options.step:1,c=(b-this._valueMin())%d;b-=c;2*Math.abs(c)>=d&&(b+=0<c?d:-d);return parseFloat(b.toFixed(5))},_valueMin:function(){return this.options.min},
_valueMax:function(){return this.options.max},_refreshValue:function(){var l,d,c,k,f,q=this.options.range,a=this.options,e=this,m=this._animateOff?!1:a.animate,g={};if(this.options.values&&this.options.values.length)this.handles.each(function(c,f){d=(e.values(c)-e._valueMin())/(e._valueMax()-e._valueMin())*100;g["horizontal"===e.orientation?"left":"bottom"]=d+"%";b(this).stop(1,1)[m?"animate":"css"](g,a.animate);if(!0===e.options.range)if("horizontal"===e.orientation){if(0===c)e.range.stop(1,1)[m?
"animate":"css"]({left:d+"%"},a.animate);if(1===c)e.range[m?"animate":"css"]({width:d-l+"%"},{queue:!1,duration:a.animate})}else{if(0===c)e.range.stop(1,1)[m?"animate":"css"]({bottom:d+"%"},a.animate);if(1===c)e.range[m?"animate":"css"]({height:d-l+"%"},{queue:!1,duration:a.animate})}l=d});else{c=this.value();k=this._valueMin();f=this._valueMax();d=f!==k?(c-k)/(f-k)*100:0;g["horizontal"===this.orientation?"left":"bottom"]=d+"%";this.handle.stop(1,1)[m?"animate":"css"](g,a.animate);if("min"===q&&"horizontal"===
this.orientation)this.range.stop(1,1)[m?"animate":"css"]({width:d+"%"},a.animate);if("max"===q&&"horizontal"===this.orientation)this.range[m?"animate":"css"]({width:100-d+"%"},{queue:!1,duration:a.animate});if("min"===q&&"vertical"===this.orientation)this.range.stop(1,1)[m?"animate":"css"]({height:d+"%"},a.animate);if("max"===q&&"vertical"===this.orientation)this.range[m?"animate":"css"]({height:100-d+"%"},{queue:!1,duration:a.animate})}}})})(g);(function(b){function g(b){return function(){var d=
this.element.val();b.apply(this,arguments);this._refresh();d!==this.element.val()&&this._trigger("change")}}b.widget("ui.spinner",{version:"1.9.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",
this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var l={},d=this.element;b.each(["min","max","step"],function(b,k){var f=d.attr(k);void 0!==f&&f.length&&(l[k]=f)});return l},_events:{keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");
this.previous=this.element.val()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.uiSpinner.removeClass("ui-state-active"),this.previous!==this.element.val()&&this._trigger("change",b))},mousewheel:function(b,d){if(d){if(!this.spinning&&!this._start(b))return!1;this._spin((0<d?1:-1)*this.options.step,b);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(b)},100);b.preventDefault()}},"mousedown .ui-spinner-button":function(l){function d(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c}))}var c;c=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();l.preventDefault();d.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;d.call(this)});!1!==this._start(l)&&this._repeat(null,b(l.currentTarget).hasClass("ui-spinner-up")?1:-1,l)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(l){if(b(l.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(l))return!1;this._repeat(null,b(l.currentTarget).hasClass("ui-spinner-up")?1:-1,l)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var b=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(b);this.element.attr("role","spinbutton");this.buttons=b.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(0.5*
b.height())&&0<b.height()&&b.height(b.height());this.options.disabled&&this.disable()},_keydown:function(l){var d=this.options,c=b.ui.keyCode;switch(l.keyCode){case c.UP:return this._repeat(null,1,l),!0;case c.DOWN:return this._repeat(null,-1,l),!0;case c.PAGE_UP:return this._repeat(null,d.page,l),!0;case c.PAGE_DOWN:return this._repeat(null,-d.page,l),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(b){if(!this.spinning&&!1===this._trigger("start",b))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(b,d,c){b=b||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,d,c)},b);this._spin(d*this.options.step,c)},_spin:function(b,d){var c=this.value()||0;this.counter||
(this.counter=1);c=this._adjustValue(c+b*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",d,{value:c})||(this._value(c),this.counter++)},_increment:function(l){var d=this.options.incremental;return d?b.isFunction(d)?d(l):Math.floor(l*l*l/5E4-l*l/500+17*l/200+1):1},_precision:function(){var b=this._precisionOf(this.options.step);null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min)));return b},_precisionOf:function(b){b=b.toString();var d=b.indexOf(".");
return-1===d?0:b.length-d-1},_adjustValue:function(b){var d,c=this.options;d=null!==c.min?c.min:0;b=Math.round((b-d)/c.step)*c.step;b=d+b;b=parseFloat(b.toFixed(this._precision()));return null!==c.max&&b>c.max?c.max:null!==c.min&&b<c.min?c.min:b},_stop:function(b){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",b))},_setOption:function(b,d){if("culture"===b||"numberFormat"===b){var c=this._parse(this.element.val());this.options[b]=
d;this.element.val(this._format(c))}else"max"!==b&&"min"!==b&&"step"!==b||"string"!==typeof d||(d=this._parse(d)),this._super(b,d),"disabled"===b&&(d?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:g(function(b){this._super(b);this._value(this.element.val())}),_parse:function(b){"string"===typeof b&&""!==b&&(b=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(b,10,this.options.culture):
+b);return""===b||isNaN(b)?null:b},_format:function(b){return""===b?"":window.Globalize&&this.options.numberFormat?Globalize.format(b,this.options.numberFormat,this.options.culture):b},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(b,d){var c;""!==b&&(c=this._parse(b),null!==c&&(d||(c=this._adjustValue(c)),b=this._format(c)));this.element.val(b);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:g(function(b){this._stepUp(b)}),_stepUp:function(b){this._spin((b||1)*this.options.step)},stepDown:g(function(b){this._stepDown(b)}),_stepDown:function(b){this._spin((b||1)*-this.options.step)},pageUp:g(function(b){this._stepUp((b||1)*this.options.page)}),pageDown:g(function(b){this._stepDown((b||1)*this.options.page)}),
value:function(b){if(!arguments.length)return this._parse(this.element.val());g(this._value).call(this,b)},widget:function(){return this.uiSpinner}})})(g);(function(b,g){function l(b){b=b.cloneNode(!1);return 1<b.hash.length&&b.href.replace(c,"")===location.href.replace(c,"")}var d=0,c=/#.*$/;b.widget("ui.tabs",{version:"1.9.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var c=
this,f=this.options,d=f.active;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",f.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){b(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){b(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===d&&(location.hash&&this.anchors.each(function(a,
b){if(b.hash===location.hash)return d=a,!1}),null===d&&(d=this.tabs.filter(".ui-tabs-active").index()),null===d||-1===d)&&(d=this.tabs.length?0:!1);!1!==d&&(d=this.tabs.index(this.tabs.eq(d)),-1===d&&(d=f.collapsible?!1:0));f.active=d;!f.collapsible&&!1===f.active&&this.anchors.length&&(f.active=0);b.isArray(f.disabled)&&(f.disabled=b.unique(f.disabled.concat(b.map(this.tabs.filter(".ui-state-disabled"),function(a){return c.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?
this._findActive(this.options.active):b();this._refresh();this.active.length&&this.load(f.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):b()}},_tabKeydown:function(c){var f=b(this.document[0].activeElement).closest("li"),d=this.tabs.index(f),a=!0;if(!this._handlePageNav(c)){switch(c.keyCode){case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:d++;break;case b.ui.keyCode.UP:case b.ui.keyCode.LEFT:a=!1;d--;break;case b.ui.keyCode.END:d=
this.anchors.length-1;break;case b.ui.keyCode.HOME:d=0;break;case b.ui.keyCode.SPACE:c.preventDefault();clearTimeout(this.activating);this._activate(d);return;case b.ui.keyCode.ENTER:c.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}c.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,a);c.ctrlKey||(f.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",
d)},this.delay))}},_panelKeydown:function(c){!this._handlePageNav(c)&&c.ctrlKey&&c.keyCode===b.ui.keyCode.UP&&(c.preventDefault(),this.active.focus())},_handlePageNav:function(c){if(c.altKey&&c.keyCode===b.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(c.altKey&&c.keyCode===b.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(c,f){function d(){c>a&&(c=0);0>c&&(c=a);return c}for(var a=this.tabs.length-
1;-1!==b.inArray(d(),this.options.disabled);)c=f?c+1:c-1;return c},_focusNextTab:function(b,c){b=this._findNextTab(b,c);this.tabs.eq(b).focus();return b},_setOption:function(b,c){"active"===b?this._activate(c):"disabled"===b?this._setupDisabled(c):(this._super(b,c),"collapsible"===b&&(this.element.toggleClass("ui-tabs-collapsible",c),c||!1!==this.options.active||this._activate(0)),"event"===b&&this._setupEvents(c),"heightStyle"===b&&this._setupHeightStyle(c))},_tabId:function(b){return b.attr("aria-controls")||
"ui-tabs-"+ ++d},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var c=this.options,f=this.tablist.children(":has(a[href])");c.disabled=b.map(f.filter(".ui-state-disabled"),function(b){return f.index(b)});this._processTabs();!1!==c.active&&this.anchors.length?this.active.length&&!b.contains(this.tablist[0],this.active[0])?this.tabs.length===c.disabled.length?(c.active=!1,this.active=b()):this._activate(this._findNextTab(Math.max(0,
c.active-1),!1)):c.active=this.tabs.index(this.active):(c.active=!1,this.active=b());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",
tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var c=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return b("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",
tabIndex:-1});this.panels=b();this.anchors.each(function(f,d){var a,e,m,g=b(d).uniqueId().attr("id"),n=b(d).closest("li"),z=n.attr("aria-controls");l(d)?(a=d.hash,e=c.element.find(c._sanitizeSelector(a))):(m=c._tabId(n),a="#"+m,e=c.element.find(a),e.length||(e=c._createPanel(m),e.insertAfter(c.panels[f-1]||c.tablist)),e.attr("aria-live","polite"));e.length&&(c.panels=c.panels.add(e));z&&n.data("ui-tabs-aria-controls",z);n.attr({"aria-controls":a.substring(1),"aria-labelledby":g});e.attr("aria-labelledby",
g)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(c){return b("<div>").attr("id",c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(c){b.isArray(c)&&(c.length?c.length===this.anchors.length&&(c=!0):c=!1);for(var f=0,d;d=this.tabs[f];f++)!0===c||-1!==b.inArray(f,c)?b(d).addClass("ui-state-disabled").attr("aria-disabled",
"true"):b(d).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=c},_setupEvents:function(c){var f={click:function(b){b.preventDefault()}};c&&b.each(c.split(" "),function(b,a){f[a]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,f);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(c){var f,d,a=this.element.parent();
"fill"===c?(b.support.minHeight||(d=a.css("overflow"),a.css("overflow","hidden")),f=a.height(),this.element.siblings(":visible").each(function(){var a=b(this),c=a.css("position");"absolute"!==c&&"fixed"!==c&&(f-=a.outerHeight(!0))}),d&&a.css("overflow",d),this.element.children().not(this.panels).each(function(){f-=b(this).outerHeight(!0)}),this.panels.each(function(){b(this).height(Math.max(0,f-b(this).innerHeight()+b(this).height()))}).css("overflow","auto")):"auto"===c&&(f=0,this.panels.each(function(){f=
Math.max(f,b(this).height("").height())}).height(f))},_eventHandler:function(c){var f=this.options,d=this.active,a=b(c.currentTarget).closest("li"),e=a[0]===d[0],m=e&&f.collapsible,l=m?b():this._getPanelForTab(a),g=d.length?this._getPanelForTab(d):b(),d={oldTab:d,oldPanel:g,newTab:m?b():a,newPanel:l};c.preventDefault();a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||e&&!f.collapsible||!1===this._trigger("beforeActivate",c,d)||(f.active=m?!1:this.tabs.index(a),this.active=
e?b():a,this.xhr&&this.xhr.abort(),g.length||l.length||b.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(a),c),this._toggle(c,d))},_toggle:function(c,f){function d(){e.running=!1;e._trigger("activate",c,f)}function a(){f.newTab.closest("li").addClass("ui-tabs-active ui-state-active");m.length&&e.options.show?e._show(m,e.options.show,d):(m.show(),d())}var e=this,m=f.newPanel,l=f.oldPanel;this.running=!0;l.length&&this.options.hide?this._hide(l,this.options.hide,
function(){f.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");a()}):(f.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),l.hide(),a());l.attr({"aria-expanded":"false","aria-hidden":"true"});f.oldTab.attr("aria-selected","false");m.length&&l.length?f.oldTab.attr("tabIndex",-1):m.length&&this.tabs.filter(function(){return 0===b(this).attr("tabIndex")}).attr("tabIndex",-1);m.attr({"aria-expanded":"true","aria-hidden":"false"});f.newTab.attr({"aria-selected":"true",
tabIndex:0})},_activate:function(c){c=this._findActive(c);c[0]!==this.active[0]&&(c.length||(c=this.active),c=c.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:b.noop}))},_findActive:function(c){return!1===c?b():this.tabs.eq(c)},_getIndex:function(b){"string"===typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();this.tabs.add(this.panels).each(function(){b.data(this,"ui-tabs-destroy")?b(this).remove():b(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var c=b(this),f=c.data("ui-tabs-aria-controls");f?c.attr("aria-controls",f):c.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var f=this.options.disabled;!1!==f&&(c===g?f=!1:(c=this._getIndex(c),f=b.isArray(f)?b.map(f,function(b){return b!==c?b:null}):b.map(this.tabs,function(b,a){return a!==c?a:null})),this._setupDisabled(f))},disable:function(c){var f=this.options.disabled;if(!0!==f){if(c===g)f=!0;else{c=
this._getIndex(c);if(-1!==b.inArray(c,f))return;f=b.isArray(f)?b.merge([c],f).sort():[c]}this._setupDisabled(f)}},load:function(c,f){c=this._getIndex(c);var d=this,a=this.tabs.eq(c),e=a.find(".ui-tabs-anchor"),m=this._getPanelForTab(a),g={tab:a,panel:m};l(e[0])||(this.xhr=b.ajax(this._ajaxSettings(e,f,g)))&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),m.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){m.html(a);d._trigger("load",f,g)},1)}).complete(function(b,
c){setTimeout(function(){"abort"===c&&d.panels.stop(!1,!0);a.removeClass("ui-tabs-loading");m.removeAttr("aria-busy");b===d.xhr&&delete d.xhr},1)}))},_ajaxSettings:function(c,f,d){var a=this;return{url:c.attr("href"),beforeSend:function(c,m){return a._trigger("beforeLoad",f,b.extend({jqXHR:c,ajaxSettings:m},d))}}},_getPanelForTab:function(c){c=b(c).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}});!1!==b.uiBackCompat&&(b.ui.tabs.prototype._ui=function(b,c){return{tab:b,
panel:c,index:this.anchors.index(b)}},b.widget("ui.tabs",b.ui.tabs,{url:function(b,c){this.anchors.eq(b).attr("href",c)}}),b.widget("ui.tabs",b.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var c=this;this._on({tabsbeforeload:function(f,d){b.data(d.tab[0],"cache.tabs")?f.preventDefault():d.jqXHR.success(function(){c.options.cache&&b.data(d.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(c,f,d){var a=this.options.ajaxOptions;return b.extend({},a,{error:function(b,
c,f){try{a.error(b,c,d.tab.closest("li").index(),d.tab[0])}catch(k){}}},this._superApply(arguments))},_setOption:function(b,c){"cache"===b&&!1===c&&this.anchors.removeData("cache.tabs");this._super(b,c)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(b,c){this.anchors.eq(b).removeData("cache.tabs");this._superApply(arguments)}}),b.widget("ui.tabs",b.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),b.widget("ui.tabs",b.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},
_create:function(){this._super();this._on({tabsbeforeload:function(b,c){if(b.target===this.element[0]&&this.options.spinner){var d=c.tab.find("span"),a=d.html();d.html(this.options.spinner);c.jqXHR.complete(function(){d.html(a)})}}})}}),b.widget("ui.tabs",b.ui.tabs,{options:{enable:null,disable:null},enable:function(c){var f=this.options,d;if(c&&!0===f.disabled||b.isArray(f.disabled)&&-1!==b.inArray(c,f.disabled))d=!0;this._superApply(arguments);d&&this._trigger("enable",null,this._ui(this.anchors[c],
this.panels[c]))},disable:function(c){var f=this.options,d;if(c&&!1===f.disabled||b.isArray(f.disabled)&&-1===b.inArray(c,f.disabled))d=!0;this._superApply(arguments);d&&this._trigger("disable",null,this._ui(this.anchors[c],this.panels[c]))}}),b.widget("ui.tabs",b.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(c,f,d){d===g&&(d=this.anchors.length);var a,e=this.options;f=b(e.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,
f));var m=c.indexOf("#")?this._tabId(f):c.replace("#","");f.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);f.attr("aria-controls",m);c=d>=this.tabs.length;a=this.element.find("#"+m);a.length||(a=this._createPanel(m),c?0<d?a.insertAfter(this.panels.eq(-1)):a.appendTo(this.element):a.insertBefore(this.panels[d]));a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();c?f.appendTo(this.tablist):f.insertBefore(this.tabs[d]);e.disabled=b.map(e.disabled,function(a){return a>=
d?++a:a});this.refresh();1===this.tabs.length&&!1===e.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[d],this.panels[d]));return this},remove:function(c){c=this._getIndex(c);var f=this.options,d=this.tabs.eq(c).remove(),a=this._getPanelForTab(d).remove();d.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(c+(c+1<this.anchors.length?1:-1));f.disabled=b.map(b.grep(f.disabled,function(a){return a!==c}),function(a){return a>=c?--a:a});this.refresh();this._trigger("remove",
null,this._ui(d.find("a")[0],a[0]));return this}}),b.widget("ui.tabs",b.ui.tabs,{length:function(){return this.anchors.length}}),b.widget("ui.tabs",b.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(c){c=c.is("li")?c.find("a[href]"):c;c=c[0];return b(c).closest("li").attr("aria-controls")||c.title&&c.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++d}}),b.widget("ui.tabs",b.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(c){return b(this.options.panelTemplate).attr("id",
c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),b.widget("ui.tabs",b.ui.tabs,{_create:function(){var b=this.options;null===b.active&&b.selected!==g&&(b.active=-1===b.selected?!1:b.selected);this._super();b.selected=b.active;!1===b.selected&&(b.selected=-1)},_setOption:function(b,c){if("selected"!==b)return this._super(b,c);var d=this.options;this._super("active",-1===c?!1:c);d.selected=d.active;!1===d.selected&&(d.selected=-1)},_eventHandler:function(b){this._superApply(arguments);
this.options.selected=this.options.active;!1===this.options.selected&&(this.options.selected=-1)}}),b.widget("ui.tabs",b.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(b,c,d){var a=this._superApply(arguments);if(!a)return!1;"beforeActivate"===b&&d.newTab.length?a=this._super("select",c,{tab:d.newTab.find(".ui-tabs-anchor")[0],
panel:d.newPanel[0],index:d.newTab.closest("li").index()}):"activate"===b&&d.newTab.length&&(a=this._super("show",c,{tab:d.newTab.find(".ui-tabs-anchor")[0],panel:d.newPanel[0],index:d.newTab.closest("li").index()}));return a}}),b.widget("ui.tabs",b.ui.tabs,{select:function(b){b=this._getIndex(b);if(-1===b)if(this.options.collapsible&&-1!==this.options.selected)b=this.options.selected;else return;this.anchors.eq(b).trigger(this.options.event+this.eventNamespace)}}),function(){var c=0;b.widget("ui.tabs",
b.ui.tabs,{options:{cookie:null},_create:function(){var b=this.options,c;null==b.active&&b.cookie&&(c=parseInt(this._cookie(),10),-1===c&&(c=!1),b.active=c);this._super()},_cookie:function(f){var d=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++c)];arguments.length&&(d.push(!1===f?-1:f),d.push(this.options.cookie));return b.cookie.apply(null,d)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(b){this._superApply(arguments);
this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),b.widget("ui.tabs",b.ui.tabs,{_trigger:function(c,f,d){d=b.extend({},d);"load"===c&&(d.panel=d.panel[0],d.tab=d.tab.find(".ui-tabs-anchor")[0]);return this._super(c,f,d)}}),b.widget("ui.tabs",b.ui.tabs,{options:{fx:null},_getFx:function(){var c,f,d=this.options.fx;d&&(b.isArray(d)?(c=d[0],f=d[1]):c=f=d);return d?{show:f,hide:c}:
null},_toggle:function(b,c){function d(){e.running=!1;e._trigger("activate",b,c)}function a(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");m.length&&g.show?m.animate(g.show,g.show.duration,function(){d()}):(m.show(),d())}var e=this,m=c.newPanel,l=c.oldPanel,g=this._getFx();if(!g)return this._super(b,c);e.running=!0;l.length&&g.hide?l.animate(g.hide,g.hide.duration,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");a()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
l.hide(),a())}}))})(g);(function(b){function g(c,d){var f=(c.attr("aria-describedby")||"").split(/\s+/);f.push(d);c.data("ui-tooltip-id",d).attr("aria-describedby",b.trim(f.join(" ")))}function l(c){var d=c.data("ui-tooltip-id"),f=(c.attr("aria-describedby")||"").split(/\s+/),d=b.inArray(d,f);-1!==d&&f.splice(d,1);c.removeData("ui-tooltip-id");(f=b.trim(f.join(" ")))?c.attr("aria-describedby",f):c.removeAttr("aria-describedby")}var d=0;b.widget("ui.tooltip",{version:"1.9.0",options:{content:function(){return b(this).attr("title")},
hide:!0,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={}},_setOption:function(c,d){var f=this;"disabled"===c?(this[d?"_disable":"_enable"](),this.options[c]=d):(this._super(c,d),"content"===c&&b.each(this.tooltips,function(b,a){f._updateContent(a)}))},_disable:function(){var c=this;b.each(this.tooltips,function(d,f){var l=
b.Event("blur");l.target=l.currentTarget=f[0];c.close(l,!0)});this.element.find(this.options.items).andSelf().each(function(){var c=b(this);c.is("[title]")&&c.data("ui-tooltip-title",c.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var c=b(this);c.data("ui-tooltip-title")&&c.attr("title",c.data("ui-tooltip-title"))})},open:function(c){var d=b(c?c.target:this.element).closest(this.options.items);d.length&&(this.options.track&&d.data("ui-tooltip-id")?
(this._find(d).position(b.extend({of:d},this.options.position)),this._off(this.document,"mousemove")):(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("tooltip-open",!0),this._updateContent(d,c)))},_updateContent:function(b,d){var f;f=this.options.content;var l=this;if("string"===typeof f)return this._open(d,b,f);(f=f.call(b[0],function(a){b.data("tooltip-open")&&l._delay(function(){this._open(d,b,a)})}))&&this._open(d,b,f)},_open:function(c,d,f){function l(b){e.of=b;a.position(e)}
var a,e;f&&(a=this._find(d),a.length?a.find(".ui-tooltip-content").html(f):(d.is("[title]")&&(c&&"mouseover"===c.type?d.attr("title",""):d.removeAttr("title")),a=this._tooltip(d),g(d,a.attr("id")),a.find(".ui-tooltip-content").html(f),this.options.track&&c&&/^mouse/.test(c.originalEvent.type)?(e=b.extend({},this.options.position),this._on(this.document,{mousemove:l}),l(c)):a.position(b.extend({of:d},this.options.position)),a.hide(),this._show(a,this.options.show),this._trigger("open",c,{tooltip:a}),
this._on(d,{mouseleave:"close",focusout:"close",keyup:function(a){a.keyCode===b.ui.keyCode.ESCAPE&&(a=b.Event(a),a.currentTarget=d[0],this.close(a,!0))}})))},close:function(c,d){var f=this,q=b(c?c.currentTarget:this.element),a=this._find(q);this.closing||!d&&c&&"focusout"!==c.type&&this.document[0].activeElement===q[0]||(q.data("ui-tooltip-title")&&q.attr("title",q.data("ui-tooltip-title")),l(q),a.stop(!0),this._hide(a,this.options.hide,function(){b(this).remove();delete f.tooltips[this.id]}),q.removeData("tooltip-open"),
this._off(q,"mouseleave focusout keyup"),this._off(this.document,"mousemove"),this.closing=!0,this._trigger("close",c,{tooltip:a}),this.closing=!1)},_tooltip:function(c){var k="ui-tooltip-"+d++,f=b("<div>").attr({id:k,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));b("<div>").addClass("ui-tooltip-content").appendTo(f);f.appendTo(this.document[0].body);b.fn.bgiframe&&f.bgiframe();this.tooltips[k]=c;return f},_find:function(c){return(c=
c.data("ui-tooltip-id"))?b("#"+c):b()},_destroy:function(){var c=this;b.each(this.tooltips,function(d,f){var l=b.Event("blur");l.target=l.currentTarget=f[0];c.close(l,!0);b("#"+d).remove();f.data("ui-tooltip-title")&&(f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))})}})})(g);g.effects||function(b,n){var l=!1!==b.uiBackCompat;b.effects={effect:{}};(function(d,c){function k(a,b,c){var e=n[b.type]||{};if(null==a)return c||!b.def?null:b.def;a=e.floor?~~a:parseFloat(a);return isNaN(a)?
b.def:e.mod?(a+e.mod)%e.mod:0>a?0:e.max<a?e.max:a}function f(a){var b=m(),c=b._rgba=[];a=a.toLowerCase();p(e,function(e,m){var f,d=m.re.exec(a);f=d&&m.parse(d);d=m.space||"rgba";if(f)return f=b[d](f),b[g[d].cache]=f[g[d].cache],c=b._rgba=f._rgba,!1});return c.length?("0,0,0,0"===c.join()&&d.extend(c,y.transparent),b):y[a]}function l(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var a=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],m=d.Color=function(a,b,c,e){return new d.Color.fn.parse(a,b,c,e)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},n={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},z=m.support={},A=d("<p>")[0],y,p=d.each;A.style.cssText="background-color:rgba(1,1,1,.5)";
z.rgba=-1<A.style.backgroundColor.indexOf("rgba");p(g,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});m.fn=d.extend(m.prototype,{parse:function(a,e,l,q){if(a===c)return this._rgba=[null,null,null,null],this;if(a.jquery||a.nodeType)a=d(a).css(e),e=c;var n=this,x=d.type(a),z=this._rgba=[];e!==c&&(a=[a,e,l,q],x="array");if("string"===x)return this.parse(f(a)||y._default);if("array"===x)return p(g.rgba.props,function(b,c){z[c.idx]=k(a[c.idx],c)}),this;if("object"===x)return a instanceof
m?p(g,function(b,c){a[c.cache]&&(n[c.cache]=a[c.cache].slice())}):p(g,function(c,e){var m=e.cache;p(e.props,function(b,c){if(!n[m]&&e.to){if("alpha"===b||null==a[b])return;n[m]=e.to(n._rgba)}n[m][c.idx]=k(a[b],c,!0)});n[m]&&0>b.inArray(null,n[m].slice(0,3))&&(n[m][3]=1,e.from&&(n._rgba=e.from(n[m])))}),this},is:function(a){var b=m(a),c=!0,e=this;p(g,function(a,m){var f,d=b[m.cache];d&&(f=e[m.cache]||m.to&&m.to(e._rgba)||[],p(m.props,function(a,b){if(null!=d[b.idx])return c=d[b.idx]===f[b.idx]}));
return c});return c},_space:function(){var a=[],b=this;p(g,function(c,e){b[e.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var c=m(a),e=c._space(),f=g[e],d=0===this.alpha()?m("transparent"):this,l=d[f.cache]||f.to(d._rgba),q=l.slice(),c=c[f.cache];p(f.props,function(a,e){var m=e.idx,f=l[m],d=c[m],g=n[e.type]||{};null!==d&&(null===f?q[m]=d:(g.mod&&(d-f>g.mod/2?f+=g.mod:f-d>g.mod/2&&(f-=g.mod)),q[m]=k((d-f)*b+f,e)))});return this[e](q)},blend:function(a){if(1===this._rgba[3])return this;
var b=this._rgba.slice(),c=b.pop(),e=m(a)._rgba;return m(d.map(b,function(a,b){return(1-c)*e[b]+c*a}))},toRgbaString:function(){var a="rgba(",b=d.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===b[3]&&(b.pop(),a="rgb(");return a+b.join()+")"},toHslaString:function(){var a="hsla(",b=d.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===b[3]&&(b.pop(),a="hsl(");return a+b.join()+")"},toHexString:function(a){var b=this._rgba.slice(),c=b.pop();
a&&b.push(~~(255*c));return"#"+d.map(b,function(a,b){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});m.fn.parse.prototype=m.fn;g.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,e=a[2]/255;a=a[3];var m=Math.max(b,c,e),f=Math.min(b,c,e),d=m-f,k=m+f,l=0.5*k,k=0===l||1===l?l:0.5>=l?d/k:d/(2-k);return[Math.round(f===m?0:b===m?60*(c-e)/d+360:c===
m?60*(e-b)/d+120:60*(b-c)/d+240)%360,k,l,null==a?1:a]};g.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],e=a[2];a=a[3];c=0.5>=e?e*(1+c):e+c-e*c;e=2*e-c;return[Math.round(255*l(e,c,b+1/3)),Math.round(255*l(e,c,b)),Math.round(255*l(e,c,b-1/3)),a]};p(g,function(b,e){var f=e.props,l=e.cache,q=e.to,g=e.from;m.fn[b]=function(a){q&&!this[l]&&(this[l]=q(this._rgba));if(a===c)return this[l].slice();var b,e=d.type(a),v="array"===e||"object"===e?
a:arguments,n=this[l].slice();p(f,function(a,b){var c=v["object"===e?a:b.idx];null==c&&(c=n[b.idx]);n[b.idx]=k(c,b)});return g?(b=m(g(n)),b[l]=n,b):m(n)};p(f,function(c,e){m.fn[c]||(m.fn[c]=function(m){var f=d.type(m),k="alpha"===c?this._hsla?"hsla":"rgba":b,l=this[k](),q=l[e.idx];if("undefined"===f)return q;"function"===f&&(m=m.call(this,q),f=d.type(m));if(null==m&&e.empty)return this;"string"===f&&(f=a.exec(m))&&(m=q+parseFloat(f[2])*("+"===f[1]?1:-1));l[e.idx]=m;return this[k](l)})})});p("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),
function(a,b){d.cssHooks[b]={set:function(a,c){var e,k="";if("string"!==d.type(c)||(e=f(c))){c=m(e||c);if(!z.rgba&&1!==c._rgba[3]){for(e="backgroundColor"===b?a.parentNode:a;(""===k||"transparent"===k)&&e&&e.style;)try{k=d.css(e,"backgroundColor"),e=e.parentNode}catch(l){}c=c.blend(k&&"transparent"!==k?k:"_default")}c=c.toRgbaString()}try{a.style[b]=c}catch(q){}}};d.fx.step[b]=function(a){a.colorInit||(a.start=m(a.elem,b),a.end=m(a.end),a.colorInit=!0);d.cssHooks[b].set(a.elem,a.start.transition(a.end,
a.pos))}});d.cssHooks.borderColor={expand:function(a){var b={};p(["Top","Right","Bottom","Left"],function(c,e){b["border"+e+"Color"]=a});return b}};y=d.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(g);(function(){function d(){var c=
this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,d={},a,e;if(c&&c.length&&c[0]&&c[c[0]])for(e=c.length;e--;)a=c[e],"string"===typeof c[a]&&(d[b.camelCase(a)]=c[a]);else for(a in c)"string"===typeof c[a]&&(d[a]=c[a]);return d}var c=["add","remove","toggle"],k={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};b.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],
function(c,d){b.fx.step[d]=function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)g.style(a.elem,d,a.end),a.setAttr=!0}});b.effects.animateClass=function(f,l,a,e){var m=b.speed(l,a,e);return this.queue(function(){var a=b(this),e=a.attr("class")||"",l,q=m.children?a.find("*").andSelf():a,q=q.map(function(){return{el:b(this),start:d.call(this)}});l=function(){b.each(c,function(b,c){if(f[c])a[c+"Class"](f[c])})};l();q=q.map(function(){this.end=d.call(this.el[0]);var a=this.start,c=this.end,
e={},m,f;for(m in c)f=c[m],a[m]===f||k[m]||!b.fx.step[m]&&isNaN(parseFloat(f))||(e[m]=f);this.diff=e;return this});a.attr("class",e);q=q.map(function(){var a=this,c=b.Deferred(),e=g.extend({},m,{queue:!1,complete:function(){c.resolve(a)}});this.el.animate(this.diff,e);return c.promise()});b.when.apply(b,q.get()).done(function(){l();b.each(arguments,function(){var a=this.el;b.each(this.diff,function(b){a.css(b,"")})});m.complete.call(a[0])})})};b.fn.extend({_addClass:b.fn.addClass,addClass:function(c,
d,a,e){return d?b.effects.animateClass.call(this,{add:c},d,a,e):this._addClass(c)},_removeClass:b.fn.removeClass,removeClass:function(c,d,a,e){return d?b.effects.animateClass.call(this,{remove:c},d,a,e):this._removeClass(c)},_toggleClass:b.fn.toggleClass,toggleClass:function(c,d,a,e,m){return"boolean"===typeof d||d===n?a?b.effects.animateClass.call(this,d?{add:c}:{remove:c},a,e,m):this._toggleClass(c,d):b.effects.animateClass.call(this,{toggle:c},d,a,e)},switchClass:function(c,d,a,e,m){return b.effects.animateClass.call(this,
{add:d,remove:c},a,e,m)}})})();(function(){function d(c,f,d,a){b.isPlainObject(c)&&(f=c,c=c.effect);c={effect:c};f===n&&(f={});b.isFunction(f)&&(a=f,d=null,f={});if("number"===typeof f||b.fx.speeds[f])a=d,d=f,f={};b.isFunction(d)&&(a=d,d=null);f&&b.extend(c,f);d=d||f.duration;c.duration=b.fx.off?0:"number"===typeof d?d:d in b.fx.speeds?b.fx.speeds[d]:b.fx.speeds._default;c.complete=a||f.complete;return c}function c(c){return!c||"number"===typeof c||b.fx.speeds[c]?!0:"string"!==typeof c||b.effects.effect[c]?
!1:l&&b.effects[c]?!1:!0}b.extend(b.effects,{version:"1.9.0",save:function(b,c){for(var d=0;d<c.length;d++)null!==c[d]&&b.data("ui-effects-"+c[d],b[0].style[c[d]])},restore:function(b,c){var d,a;for(a=0;a<c.length;a++)null!==c[a]&&(d=b.data("ui-effects-"+c[a]),d===n&&(d=""),b.css(c[a],d))},setMode:function(b,c){"toggle"===c&&(c=b.is(":hidden")?"show":"hide");return c},getBaseline:function(b,c){var d,a;switch(b[0]){case "top":d=0;break;case "middle":d=0.5;break;case "bottom":d=1;break;default:d=b[0]/
c.height}switch(b[1]){case "left":a=0;break;case "center":a=0.5;break;case "right":a=1;break;default:a=b[1]/c.width}return{x:a,y:d}},createWrapper:function(c){if(c.parent().is(".ui-effects-wrapper"))return c.parent();var f={width:c.outerWidth(!0),height:c.outerHeight(!0),"float":c.css("float")},d=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:c.width(),height:c.height()},e=document.activeElement;try{e.id}catch(m){e=
document.body}c.wrap(d);(c[0]===e||b.contains(c[0],e))&&b(e).focus();d=c.parent();"static"===c.css("position")?(d.css({position:"relative"}),c.css({position:"relative"})):(b.extend(f,{position:c.css("position"),zIndex:c.css("z-index")}),b.each(["top","left","bottom","right"],function(a,b){f[b]=c.css(b);isNaN(parseInt(f[b],10))&&(f[b]="auto")}),c.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));c.css(a);return d.css(f).show()},removeWrapper:function(c){var f=document.activeElement;
c.parent().is(".ui-effects-wrapper")&&(c.parent().replaceWith(c),(c[0]===f||b.contains(c[0],f))&&b(f).focus());return c},setTransition:function(c,f,d,a){a=a||{};b.each(f,function(b,m){var f=c.cssUnit(m);0<f[0]&&(a[m]=f[0]*d+f[1])});return a}});b.fn.extend({effect:function(c,f,q,a){function e(a){function c(){b.isFunction(f)&&f.call(e[0]);b.isFunction(a)&&a()}var e=b(this),f=m.complete,d=m.mode;(e.is(":hidden")?"hide"===d:"show"===d)?c():z.call(e[0],m,c)}var m=d.apply(this,arguments),g=m.mode,n=m.queue,
z=b.effects.effect[m.effect],A=!z&&l&&b.effects[m.effect];return b.fx.off||!z&&!A?g?this[g](m.duration,m.complete):this.each(function(){m.complete&&m.complete.call(this)}):z?!1===n?this.each(e):this.queue(n||"fx",e):A.call(this,{options:m,duration:m.duration,callback:m.complete,mode:m.mode})},_show:b.fn.show,show:function(b){if(c(b))return this._show.apply(this,arguments);var f=d.apply(this,arguments);f.mode="show";return this.effect.call(this,f)},_hide:b.fn.hide,hide:function(b){if(c(b))return this._hide.apply(this,
arguments);var f=d.apply(this,arguments);f.mode="hide";return this.effect.call(this,f)},__toggle:b.fn.toggle,toggle:function(k){if(c(k)||"boolean"===typeof k||b.isFunction(k))return this.__toggle.apply(this,arguments);var f=d.apply(this,arguments);f.mode="toggle";return this.effect.call(this,f)},cssUnit:function(c){var f=this.css(c),d=[];b.each(["em","px","%","pt"],function(a,b){0<f.indexOf(b)&&(d=[parseFloat(f),b])});return d}})})();(function(){var d={};b.each(["Quad","Cubic","Quart","Quint","Expo"],
function(b,k){d[k]=function(f){return Math.pow(f,b+2)}});b.extend(d,{Sine:function(b){return 1-Math.cos(b*Math.PI/2)},Circ:function(b){return 1-Math.sqrt(1-b*b)},Elastic:function(b){return 0===b||1===b?b:-Math.pow(2,8*(b-1))*Math.sin((80*(b-1)-7.5)*Math.PI/15)},Back:function(b){return b*b*(3*b-2)},Bounce:function(b){for(var d,f=4;b<((d=Math.pow(2,--f))-1)/11;);return 1/Math.pow(4,3-f)-7.5625*Math.pow((3*d-2)/22-b,2)}});b.each(d,function(c,d){b.easing["easeIn"+c]=d;b.easing["easeOut"+c]=function(b){return 1-
d(1-b)};b.easing["easeInOut"+c]=function(b){return 0.5>b?d(2*b)/2:1-d(-2*b+2)/2}})})()}(g);(function(b,g){var l=/up|down|vertical/,d=/up|left|vertical|horizontal/;b.effects.effect.blind=function(c,k){var f=b(this),q="position top bottom left right height width".split(" "),a=b.effects.setMode(f,c.mode||"hide"),e=c.direction||"up",m=l.test(e),g=m?"height":"width",n=m?"top":"left",e=d.test(e),z={},A="show"===a,y,p,s;f.parent().is(".ui-effects-wrapper")?b.effects.save(f.parent(),q):b.effects.save(f,q);
f.show();y=b.effects.createWrapper(f).css({overflow:"hidden"});p=y[g]();s=parseFloat(y.css(n))||0;z[g]=A?p:0;e||(f.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),z[n]=A?s:p+s);A&&(y.css(g,0),e||y.css(n,s+p));y.animate(z,{duration:c.duration,easing:c.easing,queue:!1,complete:function(){"hide"===a&&f.hide();b.effects.restore(f,q);b.effects.removeWrapper(f);k()}})}})(g);(function(b,g){b.effects.effect.bounce=function(l,d){var c=b(this),k="position top bottom left right height width".split(" "),
f=b.effects.setMode(c,l.mode||"effect"),q="hide"===f,a="show"===f,e=l.direction||"up",f=l.distance,m=l.times||5,g=2*m+(a||q?1:0),n=l.duration/g,z=l.easing,A="up"===e||"down"===e?"top":"left",e="up"===e||"left"===e,y,p,s=c.queue(),r=s.length;(a||q)&&k.push("opacity");b.effects.save(c,k);c.show();b.effects.createWrapper(c);f||(f=c["top"===A?"outerHeight":"outerWidth"]()/3);a&&(p={opacity:1},p[A]=0,c.css("opacity",0).css(A,e?2*-f:2*f).animate(p,n,z));q&&(f/=Math.pow(2,m-1));p={};for(a=p[A]=0;a<m;a++)y=
{},y[A]=(e?"-=":"+=")+f,c.animate(y,n,z).animate(p,n,z),f=q?2*f:f/2;q&&(y={opacity:0},y[A]=(e?"-=":"+=")+f,c.animate(y,n,z));c.queue(function(){q&&c.hide();b.effects.restore(c,k);b.effects.removeWrapper(c);d()});1<r&&s.splice.apply(s,[1,0].concat(s.splice(r,g+1)));c.dequeue()}})(g);(function(b,g){b.effects.effect.clip=function(l,d){var c=b(this),k="position top bottom left right height width".split(" "),f="show"===b.effects.setMode(c,l.mode||"hide"),q="vertical"===(l.direction||"vertical"),a=q?"height":
"width",q=q?"top":"left",e={},m,g;b.effects.save(c,k);c.show();m=b.effects.createWrapper(c).css({overflow:"hidden"});m="IMG"===c[0].tagName?m:c;g=m[a]();f&&(m.css(a,0),m.css(q,g/2));e[a]=f?g:0;e[q]=f?0:g/2;m.animate(e,{queue:!1,duration:l.duration,easing:l.easing,complete:function(){f||c.hide();b.effects.restore(c,k);b.effects.removeWrapper(c);d()}})}})(g);(function(b,g){b.effects.effect.drop=function(l,d){var c=b(this),k="position top bottom left right opacity height width".split(" "),f=b.effects.setMode(c,
l.mode||"hide"),q="show"===f,a=l.direction||"left",e="up"===a||"down"===a?"top":"left",a="up"===a||"left"===a?"pos":"neg",m={opacity:q?1:0},g;b.effects.save(c,k);c.show();b.effects.createWrapper(c);g=l.distance||c["top"===e?"outerHeight":"outerWidth"](!0)/2;q&&c.css("opacity",0).css(e,"pos"===a?-g:g);m[e]=(q?"pos"===a?"+=":"-=":"pos"===a?"-=":"+=")+g;c.animate(m,{queue:!1,duration:l.duration,easing:l.easing,complete:function(){"hide"===f&&c.hide();b.effects.restore(c,k);b.effects.removeWrapper(c);
d()}})}})(g);(function(b,g){b.effects.effect.explode=function(l,d){function c(){n.push(this);n.length===k*f&&(q.css({visibility:"visible"}),b(n).remove(),a||q.hide(),d())}var k=l.pieces?Math.round(Math.sqrt(l.pieces)):3,f=k,q=b(this),a="show"===b.effects.setMode(q,l.mode||"hide"),e=q.show().css("visibility","hidden").offset(),m=Math.ceil(q.outerWidth()/f),g=Math.ceil(q.outerHeight()/k),n=[],z,A,y,p,s,r;for(z=0;z<k;z++)for(p=e.top+z*g,r=z-(k-1)/2,A=0;A<f;A++)y=e.left+A*m,s=A-(f-1)/2,q.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-A*m,top:-z*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:g,left:y+(a?s*m:0),top:p+(a?r*g:0),opacity:a?0:1}).animate({left:y+(a?0:s*m),top:p+(a?0:r*g),opacity:a?1:0},l.duration||500,l.easing,c)}})(g);(function(b,g){b.effects.effect.fade=function(l,d){var c=b(this),k=b.effects.setMode(c,l.mode||"toggle");c.animate({opacity:k},{queue:!1,duration:l.duration,easing:l.easing,complete:d})}})(g);(function(b,g){b.effects.effect.fold=
function(l,d){var c=b(this),k="position top bottom left right height width".split(" "),f=b.effects.setMode(c,l.mode||"hide"),g="show"===f,a="hide"===f,f=l.size||15,e=/([0-9]+)%/.exec(f),m=!!l.horizFirst,v=g!==m,n=v?["width","height"]:["height","width"],z=l.duration/2,A,y={},p={};b.effects.save(c,k);c.show();A=b.effects.createWrapper(c).css({overflow:"hidden"});v=v?[A.width(),A.height()]:[A.height(),A.width()];e&&(f=parseInt(e[1],10)/100*v[a?0:1]);g&&A.css(m?{height:0,width:f}:{height:f,width:0});
y[n[0]]=g?v[0]:f;p[n[1]]=g?v[1]:0;A.animate(y,z,l.easing).animate(p,z,l.easing,function(){a&&c.hide();b.effects.restore(c,k);b.effects.removeWrapper(c);d()})}})(g);(function(b,g){b.effects.effect.highlight=function(l,d){var c=b(this),k=["backgroundImage","backgroundColor","opacity"],f=b.effects.setMode(c,l.mode||"show"),g={backgroundColor:c.css("backgroundColor")};"hide"===f&&(g.opacity=0);b.effects.save(c,k);c.show().css({backgroundImage:"none",backgroundColor:l.color||"#ffff99"}).animate(g,{queue:!1,
duration:l.duration,easing:l.easing,complete:function(){"hide"===f&&c.hide();b.effects.restore(c,k);d()}})}})(g);(function(b,g){b.effects.effect.pulsate=function(l,d){var c=b(this),k=b.effects.setMode(c,l.mode||"show"),f="show"===k,g="hide"===k,k=2*(l.times||5)+(f||"hide"===k?1:0),a=l.duration/k,e=0,m=c.queue(),v=m.length;if(f||!c.is(":visible"))c.css("opacity",0).show(),e=1;for(f=1;f<k;f++)c.animate({opacity:e},a,l.easing),e=1-e;c.animate({opacity:e},a,l.easing);c.queue(function(){g&&c.hide();d()});
1<v&&m.splice.apply(m,[1,0].concat(m.splice(v,k+1)));c.dequeue()}})(g);(function(b,g){b.effects.effect.puff=function(l,d){var c=b(this),k=b.effects.setMode(c,l.mode||"hide"),f="hide"===k,g=parseInt(l.percent,10)||150,a=g/100,e={height:c.height(),width:c.width()};b.extend(l,{effect:"scale",queue:!1,fade:!0,mode:k,complete:d,percent:f?g:100,from:f?e:{height:e.height*a,width:e.width*a}});c.effect(l)};b.effects.effect.scale=function(l,d){var c=b(this),k=b.extend(!0,{},l),f=b.effects.setMode(c,l.mode||
"effect"),g=parseInt(l.percent,10)||(0===parseInt(l.percent,10)?0:"hide"===f?0:100),a=l.direction||"both",e=l.origin,m={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()},v="horizontal"!==a?g/100:1,g="vertical"!==a?g/100:1;k.effect="size";k.queue=!1;k.complete=d;"effect"!==f&&(k.origin=e||["middle","center"],k.restore=!0);k.from=l.from||("show"===f?{height:0,width:0}:m);k.to={height:m.height*v,width:m.width*g,outerHeight:m.outerHeight*v,outerWidth:m.outerWidth*
g};k.fade&&("show"===f&&(k.from.opacity=0,k.to.opacity=1),"hide"===f&&(k.from.opacity=1,k.to.opacity=0));c.effect(k)};b.effects.effect.size=function(l,d){var c,k,f,g,a=b(this),e="position top bottom left right width height overflow opacity".split(" "),m="position top bottom left right overflow opacity".split(" "),v=["width","height","overflow"],n=["fontSize"],z=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],A=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
y=b.effects.setMode(a,l.mode||"effect"),p=l.restore||"effect"!==y,s=l.scale||"both",r=l.origin||["middle","center"],t,N=a.css("position");"show"===y&&a.show();t={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()};a.from=l.from||t;a.to=l.to||t;f=a.from.height/t.height;g=a.from.width/t.width;c=a.to.height/t.height;k=a.to.width/t.width;if("box"===s||"both"===s)f!==c&&(e=e.concat(z),a.from=b.effects.setTransition(a,z,f,a.from),a.to=b.effects.setTransition(a,z,c,a.to)),
g!==k&&(e=e.concat(A),a.from=b.effects.setTransition(a,A,g,a.from),a.to=b.effects.setTransition(a,A,k,a.to));"content"!==s&&"both"!==s||f===c||(e=e.concat(n),a.from=b.effects.setTransition(a,n,f,a.from),a.to=b.effects.setTransition(a,n,c,a.to));b.effects.save(a,p?e:m);a.show();b.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);r&&(r=b.effects.getBaseline(r,t),a.from.top=(t.outerHeight-a.outerHeight())*r.y,a.from.left=(t.outerWidth-a.outerWidth())*r.x,a.to.top=(t.outerHeight-a.to.outerHeight)*
r.y,a.to.left=(t.outerWidth-a.to.outerWidth)*r.x);a.css(a.from);if("content"===s||"both"===s)z=z.concat(["marginTop","marginBottom"]).concat(n),A=A.concat(["marginLeft","marginRight"]),v=e.concat(z).concat(A),a.find("*[width]").each(function(){var a=b(this),e=a.height(),m=a.width();p&&b.effects.save(a,v);a.from={height:e*f,width:m*g};a.to={height:e*c,width:m*k};f!==c&&(a.from=b.effects.setTransition(a,z,f,a.from),a.to=b.effects.setTransition(a,z,c,a.to));g!==k&&(a.from=b.effects.setTransition(a,A,
g,a.from),a.to=b.effects.setTransition(a,A,k,a.to));a.css(a.from);a.animate(a.to,l.duration,l.easing,function(){p&&b.effects.restore(a,v)})});a.animate(a.to,{queue:!1,duration:l.duration,easing:l.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity);"hide"===y&&a.hide();b.effects.restore(a,p?e:m);p||("static"===N?a.css({position:"relative",top:a.to.top,left:a.to.left}):b.each(["top","left"],function(b,c){a.css(c,function(c,e){var m=parseInt(e,10),f=b?a.to.left:a.to.top;return"auto"===
e?f+"px":m+f+"px"})}));b.effects.removeWrapper(a);d()}})}})(g);(function(b,g){b.effects.effect.shake=function(l,d){var c=b(this),k="position top bottom left right height width".split(" "),f=b.effects.setMode(c,l.mode||"effect"),g=l.direction||"left",a=l.distance||20,e=l.times||3,m=2*e+1,v=Math.round(l.duration/m),n="up"===g||"down"===g?"top":"left",z="up"===g||"left"===g,g={},A={},y={},p=c.queue(),s=p.length;b.effects.save(c,k);c.show();b.effects.createWrapper(c);g[n]=(z?"-=":"+=")+a;A[n]=(z?"+=":
"-=")+2*a;y[n]=(z?"-=":"+=")+2*a;c.animate(g,v,l.easing);for(a=1;a<e;a++)c.animate(A,v,l.easing).animate(y,v,l.easing);c.animate(A,v,l.easing).animate(g,v/2,l.easing).queue(function(){"hide"===f&&c.hide();b.effects.restore(c,k);b.effects.removeWrapper(c);d()});1<s&&p.splice.apply(p,[1,0].concat(p.splice(s,m+1)));c.dequeue()}})(g);(function(b,g){b.effects.effect.slide=function(l,d){var c=b(this),k="position top bottom left right width height".split(" "),f=b.effects.setMode(c,l.mode||"show"),g="show"===
f,a=l.direction||"left",e="up"===a||"down"===a?"top":"left",a="up"===a||"left"===a,m,v={};b.effects.save(c,k);c.show();m=l.distance||c["top"===e?"outerHeight":"outerWidth"](!0);b.effects.createWrapper(c).css({overflow:"hidden"});g&&c.css(e,a?isNaN(m)?"-"+m:-m:m);v[e]=(g?a?"+=":"-=":a?"-=":"+=")+m;c.animate(v,{queue:!1,duration:l.duration,easing:l.easing,complete:function(){"hide"===f&&c.hide();b.effects.restore(c,k);b.effects.removeWrapper(c);d()}})}})(g);(function(b,g){b.effects.effect.transfer=
function(l,d){var c=b(this),k=b(l.to),f="fixed"===k.css("position"),g=b("body"),a=f?g.scrollTop():0,g=f?g.scrollLeft():0,e=k.offset(),k={top:e.top-a,left:e.left-g,height:k.innerHeight(),width:k.innerWidth()},e=c.offset(),m=b('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(l.className).css({top:e.top-a,left:e.left-g,height:c.innerHeight(),width:c.innerWidth(),position:f?"fixed":"absolute"}).animate(k,l.duration,l.easing,function(){m.remove();d()})}})(g)});define("ui/tab",
"aloha/core jquery ui/container ui/component PubSub jqueryui".split(" "),function(g,b,n,l,d){var c=0,k={};g=n.extend({_elemBySlot:null,_groupBySlot:null,_groupByComponent:null,_constructor:function(f,d,a){var e,m,k,l,g;this._elemBySlot={};this._groupBySlot={};this._groupByComponent={};this._super(f,d);this.container=d.container;this.list=this.container.data("list");this.panels=this.container.data("panels");this.id="tab-ui-container-"+ ++c;this.panel=b("<div>",{id:this.id,unselectable:"on"});this.handle=
b('<li><a href="'+location.href.replace(/#.*$/,"")+"#"+this.id+'">'+d.label+"</a></li>");for(f=0;f<a.length;f++)if("string"===typeof a[f])1===a[f].length&&10===a[f].charCodeAt(0)?this.panel.append("<div>",{unselectable:"on"}):(m=b("<span>",{unselectable:"on"}),this._elemBySlot[a[f]]=m,this.panel.append(m));else for(l=b("<div>",{"class":"aloha-ui-component-group aloha-ui-hidden",unselectable:"on"}).appendTo(this.panel),g={element:l,visibleCounter:0},k=a[f],e=0;e<k.length;e++)this._groupBySlot[k[e]]=
g,k[e]&&1===k[e].length&&10===k[e].charCodeAt(0)?l.append(b("<div>",{unselectable:"on"})):(m=b("<span>",{unselectable:"on"}),this._elemBySlot[k[e]]=m,l.append(m));this.panel.append(b("<div>",{"class":"aloha-ui-clear",unselectable:"on"}));this.handle.appendTo(this.list);this.panel.appendTo(this.panels);this.container.tabs("refresh");d=d.container.data("aloha-tabs");this.index=d.length;d.push(this)},adoptInto:function(b,c){var a=this._elemBySlot[b];if(!a)return!1;k[b]=c;c.adoptParent(this);a.append(c.element);
if(a=this._groupBySlot[b])this._groupByComponent[c.id]=a,c.isVisible()&&(a.visibleCounter||a.element.removeClass("aloha-ui-hidden"),a.visibleCounter+=1);return!0},foreground:function(){this.container.tabs("select",this.index)},childForeground:function(b){this.foreground()},hasVisibleComponents:function(){var b=this._elemBySlot,c;for(c in b)if(b.hasOwnProperty(c)&&k[c]&&k[c].visible)return!0;return!1},childVisible:function(b,c){c?b.container.show():b.container.hasVisibleComponents()||b.container.hide();
var a=this._groupByComponent[b.id];a&&(c?(0===a.visibleCounter&&a.element.removeClass("aloha-ui-hidden"),a.visibleCounter+=1):(a.visibleCounter-=1,0===a.visibleCounter&&a.element.addClass("aloha-ui-hidden")))},show:function(){this.list.children().length&&(this.handle.show(),this.visible=!0,this.container.show(),this.container.find(".ui-tabs-active").length&&this.container.tabs("option","selected")!==this.index||this.foreground())},hide:function(){var b=this.list.children();if(0!==b.length&&(this.handle.hide(),
this.visible=!1,this.index===this.container.tabs("option","selected"))){var b=this.container.data("aloha-tabs"),c;for(c=0;c<b.length;++c)if(b[c].visible){this.container.tabs("select",c);return}this.handle.removeClass("ui-tabs-active");this.container.hide()}}});b.extend(g,{createContainer:function(){var c=b("<div>",{unselectable:"on"}),k=b("<ul>",{unselectable:"on"}).appendTo(c),a=b("<div>",{unselectable:"on"}).appendTo(c);c.data("list",k).data("panels",a).data("aloha-tabs",[]).tabs({select:function(a,
b){var k=c.data("aloha-tabs");c.data("aloha-active-container",k[b.index]);d.pub("aloha.ui.container.selected",{data:k[b.index]})}});return c}});return g});define("ui/subguarded",["aloha/core","jquery","PubSub"],function(g,b,n){function l(a){a.alohaUid||(a.alohaUid=++f);return a.alohaUid}function d(a,b){q[a.alohaUid]||(q[a.alohaUid]=[]);q[a.alohaUid].push(b);return q[a.alohaUid]}function c(b,c){a[b]||(a[b]=[]);a[b].push(c);return a[b]}function k(b){var c=a[b]||[],f;for(f=0;f<c.length;f++)c[f].apply(null,
[q[c[f].alohaUid]||[]].concat(arguments))}var f=0,q={},a={};return function(){var a=Array.prototype.slice.call(arguments),b=a.shift();"string"===typeof b&&(b=[b]);var f=a.shift();l(f);d(f,a);for(var q,z=function(a,b,c){k(q,a,b,c)},A=function(){k(q)},a=0;a<b.length;a++)q=b[a],c(q,f),g.bind(q,z),n.sub(q,A)}});define("vendor/amplify.store",["util/json2"],function(){var g={};(function(b,g){function l(a,b){d.addType(a,function(m,f,k){var l,q=f,y=(new Date).getTime();if(!m){q={};k=[];f=0;try{for(m=b.length;m=
b.key(f++);)c.test(m)&&(l=s.parse(b.getItem(m)),l.expires&&l.expires<=y?k.push(m):q[m.replace(c,"")]=l.data);for(;m=k.pop();)b.removeItem(m)}catch(p){}return q}m="__amplify__"+m;if(f===g)if(l=(l=b.getItem(m))?s.parse(l):{expires:-1},l.expires&&l.expires<=y)b.removeItem(m);else return l.data;else if(null===f)b.removeItem(m);else{l=s.stringify({data:f,expires:k.expires?y+k.expires:null});try{b.setItem(m,l)}catch(r){d[a]();try{b.setItem(m,l)}catch(D){throw d.error();}}}return q})}var d=b.store=function(a,
b,c,f){f=d.type;c&&c.type&&c.type in d.types&&(f=c.type);return d.types[f](a,b,c||{})};d.types={};d.type=null;d.addType=function(a,b){d.type||(d.type=a);d.types[a]=b;d[a]=function(b,c,e){e=e||{};e.type=a;return d(b,c,e)}};d.error=function(){return"amplify.store quota exceeded"};var c=/^__amplify__/,k;for(k in{localStorage:1,sessionStorage:1})try{window[k].getItem&&l(k,window[k])}catch(f){}if(window.globalStorage)try{l("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===
d.type&&(d.type="globalStorage")}catch(q){}(function(){if(!d.types.localStorage){var a=document.createElement("div");a.style.display="none";document.getElementsByTagName("head")[0].appendChild(a);try{a.addBehavior("#default#userdata"),a.load("amplify")}catch(b){a.parentNode.removeChild(a);return}d.addType("userData",function(b,c,e){a.load("amplify");var f,k,l=c,q=(new Date).getTime();if(!b){l={};k=[];for(b=0;c=a.XMLDocument.documentElement.attributes[b++];)f=s.parse(c.value),f.expires&&f.expires<=
q?k.push(c.name):l[c.name]=f.data;for(;b=k.pop();)a.removeAttribute(b);a.save("amplify");return l}b=b.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(c===g)if(f=(c=a.getAttribute(b))?s.parse(c):{expires:-1},f.expires&&f.expires<=q)a.removeAttribute(b);else return f.data;else null===c?a.removeAttribute(b):(k=a.getAttribute(b),f=s.stringify({data:c,expires:e.expires?q+e.expires:null}),a.setAttribute(b,f));try{a.save("amplify")}catch(p){null===
k?a.removeAttribute(b):a.setAttribute(b,k);d.userData();try{a.setAttribute(b,f),a.save("amplify")}catch(r){throw null===k?a.removeAttribute(b):a.setAttribute(b,k),d.error();}}return l})}})();(function(){function a(a){return a===g?g:s.parse(s.stringify(a))}var b={},c={};d.addType("memory",function(f,d,k){if(!f)return a(b);if(d===g)return a(b[f]);c[f]&&(clearTimeout(c[f]),delete c[f]);if(null===d)return delete b[f],null;b[f]=d;k.expires&&(c[f]=setTimeout(function(){delete b[f];delete c[f]},k.expires));
return d})})()})(g);return g});define("ui/floating","jquery aloha/core ui/surface ui/subguarded PubSub vendor/amplify.store util/browser".split(" "),function(g,b,n,l,d,c,k){function f(a,b,c,e){"absolute"===v&&(b.top+=m.scrollTop(),b.left+=m.scrollLeft());x.offset=b;a.stop().animate(b,c,function(){e(b);d.pub("aloha.floating.changed",{position:g.extend({},x)})})}function q(a){c.store("Aloha.FloatingMenu.pinned","true");c.store("Aloha.FloatingMenu.top",a.top);c.store("Aloha.FloatingMenu.left",a.left)}
function a(a,b,c,e,m){for(b=0;b<a.length;b++)if(a[b][0].isActive())a[b][1](c,e,m)}function e(a){if(g.browser.msie){var b=a.$element.parent();a.$element.appendTo("body");a.$element.css("position",v);b.length?a.$element.appendTo(b):a.$element.detach()}else a.$element.css("position",v)}var m=g(window),v=k.ie7?"absolute":"fixed",x={style:v,offset:{top:0,left:0}};return{getPinState:function(){return"true"===c.store("Aloha.FloatingMenu.pinned")?{top:parseInt(c.store("Aloha.FloatingMenu.top"),10),left:parseInt(c.store("Aloha.FloatingMenu.left"),
10),isPinned:!0}:{top:null,left:null,isPinned:!1}},makeFloating:function(b,c){l(["aloha-selection-changed","aloha.ui.container.selected"],a,b,function(){b._move()});var f=function(){var a;a=c.pinLeft;var e=c.pinTop;0>e?e=0:e>m.height()&&(e=m.height()/2);0>a?a=0:a>m.width()&&(a=m.width()/2);a={top:e,left:a};c.setFloatingPosition(a);b.$element.css({top:a.top,left:a.left})};m.scroll(function(){b._move(0)});m.resize(function(){c.isFloatingMode||f()});b.addPin();e(b);c.isFloatingMode||f();b.$element.css("z-index",
10100).draggable({distance:20,stop:function(a,b){c.setFloatingPosition(b.position);c.isFloatingMode||q(b.position)}})},floatSurface:function(a,b,c,e){"number"!==typeof c&&(c=500);var d=(parseInt(g("body").css("marginTop"),10)||0)+(parseInt(g("body").css("paddingTop"),10)||0);a=a.$element;var k=b.obj.offset(),l=k.top,k=k.left,q=m.scrollTop(),v=l-q-d,n=k+a.width()-m.width();0<n&&(k=Math.max(0,k-n));v>=a.height()?(b={top:l-q,left:k},b.top-=a.height()+10):(b=v+a.height()>v+b.obj.height()?{top:l+b.obj.height(),
left:k}:{top:d,left:k},b.top+=10);f(a,b,c,e)},togglePinSurface:function(a,b,e){a=a.$element;e?(c.store("Aloha.FloatingMenu.pinned",null),c.store("Aloha.FloatingMenu.top",null),c.store("Aloha.FloatingMenu.left",null),a.find(".aloha-ui-pin").removeClass("aloha-ui-pin-down")):(q(b),a.find(".aloha-ui-pin").addClass("aloha-ui-pin-down"));a.css({position:"fixed",top:b.top})},POSITION_STYLE:v}});(function(){function g(b,c,k,f,l,a){c[b]&&(k.push(b),!0!==c[b]&&1!==c[b]||f.push(l+b+"/"+a))}function b(b,c,k,
f,l){c=f+c+"/"+l;require._fileExists(b.toUrl(c))&&k.push(c)}function n(b,c,k){for(var f in c)!c.hasOwnProperty(f)||b.hasOwnProperty(f)&&!k?"object"===typeof c[f]&&n(b[f],c[f],k):b[f]=c[f]}var l=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(d){var c=d.config();return{version:"2.0.1",load:function(d,f,q,a){a=a||{};a.locale&&(c.locale=a.locale);var e=l.exec(d),m=e[1],v=e[4],x=e[5],z=v.split("-"),A=[],y={},p,s="";e[5]?(m=e[1],d=m+x):(x=e[4],v=c.locale,v||(v=c.locale="undefined"===
typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),z=v.split("-"));if(a.isBuild){A.push(d);b(f,"root",A,m,x);for(p=0;p<z.length;p++)a=z[p],s+=(s?"-":"")+a,b(f,s,A,m,x);f(A,function(){q()})}else f([d],function(a){var b=[],c;g("root",a,b,A,m,x);for(p=0;p<z.length;p++)c=z[p],s+=(s?"-":"")+c,g(s,a,b,A,m,x);f(A,function(){var c,e,d;for(c=b.length-1;-1<c&&b[c];c--){d=b[c];e=a[d];if(!0===e||1===e)e=f(m+d+"/"+x);n(y,e)}y.t=function(a,b){return this[a]?this[a]:b?b:
a};q(y)})})}}})})();define("ui/nls/i18n",{root:{"button.dismiss.label":"Dismiss","button.bold.label":"Bold","button.italic.label":"Italic","button.strikethrough.label":"Strikethrough","button.subscript.label":"Subscript","button.superscript.label":"Superscript","button.underline.label":"Underline","button.yes.label":"Yes","button.no.label":"No","button.p.label":"Paragraph","button.h1.label":"Heading 1","button.h2.label":"Heading 2","button.h3.label":"Heading 3","button.h4.label":"Heading 4","button.h5.label":"Heading 5",
"button.h6.label":"Heading 6","button.pre.label":"Preformatted text","button.removeFormatting.label":"Remove formatting","button.ol.label":"Insert ordered list","button.ul.label":"Insert unordered list","button.indent.label":"Indent list","button.outdent.label":"Outdent list","button.createLink.label":"Insert link","button.removeLink.label":"Remove link","button.createAbbr.label":"Insert abbreviation","button.characterPicker.label":"Pick special characters","button.createLink.label":"Insert link",
"button.removeLink.label":"Remove link","button.createAbbr.label":"Insert abbreviation","button.characterPicker.label":"Pick special characters","button.justifyLeft.label":"Align to the left","button.justifyRight.label":"Align to the right","button.justifyCenter.label":"Center","button.justifyFull.label":"Justify","button.horizontalRule.label":"Insert horizontal rule","button.createLanguageAnnotation.label":"Insert language annotation","button.metaview.label":"Switch between meta and normal view",
"button.quote.label":"Format selection as quote","button.blockquote.label":"Format selection as blockquote","tab.format.label":"Format","tab.insert.label":"Insert","tab.abbr.label":"Abbreviation","tab.img.label":"Image","tab.link.label":"Link","tab.list.label":"List","tab.table.label":"Table","tab.col.label":"Table Column","tab.row.label":"Table Row","tab.cell.label":"Table Cell","tab.wai-lang.label":"Language annotation"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("ui/toolbar",
"jquery aloha/core ui/surface ui/tab ui/floating ui/context i18n!ui/nls/i18n jqueryui".split(" "),function(g,b,n,l,d,c,k){var f=n.extend({_moveTimeout:null,$_container:null,_tabBySlot:null,_tabs:[],_constructor:function(b,a){var c,m,v,n;this._super(b);this.$element=g("<div>",{"class":"aloha-ui aloha-ui-toolbar",unselectable:"on"});this.$_container=l.createContainer().appendTo(this.$element);this._tabBySlot={};for(v=0;v<a.length;v++){c=a[v];m=new l(b,{label:k.t(c.label,c.label),showOn:c.showOn,container:this.$_container},
c.components);for(n in m._elemBySlot)m._elemBySlot.hasOwnProperty(n)&&(this._tabBySlot[n]=m);this._tabs.push({tab:m,settings:c})}d.makeFloating(this,f)},adoptInto:function(b,a){var c=this._tabBySlot[b];return c&&c.adoptInto(b,a)},getActiveContainer:function(){return this.$_container.data("aloha-active-container")},getContainers:function(){return this.$_container.data("aloha-tabs")},_move:function(c){var a=this;a._moveTimeout&&clearTimeout(a._moveTimeout);a._moveTimeout=setTimeout(function(){a._moveTimeout=
null;b.activeEditable&&f.isFloatingMode&&d.floatSurface(a,b.activeEditable,c,f.setFloatingPosition)},20)},addPin:function(){var b=g('<div class="aloha-ui-pin">'),a=this.$element;a.find(".ui-tabs").append(b);a.find(".ui-tabs").hover(function(){a.addClass("aloha-ui-hover")},function(){a.removeClass("aloha-ui-hover")});f.isFloatingMode||b.addClass("aloha-ui-pin-down");var c=this;b.click(function(){f.isFloatingMode=!f.isFloatingMode;var a;f.isFloatingMode?a={top:f.pinTop,left:f.pinLeft}:(a=c.$element.offset(),
a.top-=g(window).scrollTop());f.setFloatingPosition(a);d.togglePinSurface(c,a,f.isFloatingMode)})},show:function(){f.$surfaceContainer.children().detach();f.$surfaceContainer.append(this.$element);f.$surfaceContainer.stop().fadeTo(200,1);var b=f.getFloatingPosition();this.$element.stop().css({top:b.top,left:b.left});this._move()},hide:function(){f.$surfaceContainer.stop().fadeOut(200,function(){f.$surfaceContainer.children().detach()})}});g.extend(f,{$surfaceContainer:null,isFloatingMode:!0,pinLeft:0,
pinTop:0,init:function(){f.$surfaceContainer=g("<div>",{"class":"aloha aloha-surface aloha-toolbar",unselectable:"on"}).hide();g(function(){f.$surfaceContainer.appendTo("body")});n.trackRange(f.$surfaceContainer);var b=d.getPinState();f.pinTop=b.top;f.pinLeft=b.left;f.isFloatingMode=!b.isPinned},setFloatingPosition:function(b){f.pinTop=b.top;f.pinLeft=b.left},getFloatingPosition:function(){return{top:f.pinTop,left:f.pinLeft}}});f.init();return f});define("ui/settings",["jquery","util/arrays","util/maps",
"util/trees"],function(g,b,n,l){function d(b,c,a){var e,m,d=[],k;for(e=0;e<b.length;e++)if(m=b[e],!c[m.label]&&(k=l.postprune(m.components,a)))m=g.extend({},m),m.components=k,d.push(m);return d}function c(b,c,a){var e,m,d=[],k,n,A;for(e=0;e<b.length;e++)m=b[e],k=m.components||[],n=c[m.label],!m.exclusive&&n&&(A=l.postprune(n.components,a))&&(k=k.concat(A)),m=g.extend({},n||{},m),m.components=k,d.push(m);return d}function k(b,c){var a,e=n.fillKeys({},c,!0);for(a=0;a<b.length;a++)e[b[a].label]=!0,n.fillKeys(e,
l.flatten(b[a].components),!0);return e}return{defaultToolbarSettings:{tabs:[{label:"tab.format.label",showOn:{scope:"Aloha.continuoustext"},components:["bold strong italic emphasis underline \n subscript superscript strikethrough quote".split(" "),"formatLink formatAbbr formatNumeratedHeaders toggleDragDrop \n toggleMetaView wailang toggleFormatlessPaste".split(" "),"alignLeft alignCenter alignRight alignJustify \n orderedList unorderedList indentList outdentList colorPicker".split(" "),["formatBlock"]]},
{label:"tab.insert.label",showOn:{scope:"Aloha.continuoustext"},components:["createTable characterPicker insertLink insertImage insertAbbr insertToc insertHorizontalRule insertTag".split(" ")]},{label:"tab.link.label",showOn:{scope:"link"},components:["editLink","removeLink","linkBrowser"]},{label:"tab.img.label",showOn:{scope:"image"},components:[["imageSource","\n","imageTitle"],["imageResizeWidth","\n","imageResizeHeight"],"imageAlignLeft imageAlignRight imageAlignNone imageIncPadding \n imageCropButton imageCnrReset imageCnrRatio imageDecPadding".split(" "),
["imageBrowser"]]},{label:"tab.abbr.label",showOn:{scope:"abbr"},components:[["abbrText","removeAbbr"]]},{label:"tab.wai-lang.label",showOn:{scope:"wai-lang"},components:[["wailangfield","removewailang"]]},{label:"tab.table.label",showOn:{scope:"table.cell"},components:[["mergecells","splitcells","tableCaption","tableSummary","naturalFit"],["formatTable"]]},{label:"tab.col.label",showOn:{scope:"table.column"},components:["addcolumnleft addcolumnright deletecolumns columnheader mergecellsColumn splitcellsColumn formatColumn".split(" ")]},
{label:"tab.row.label",showOn:{scope:"table.row"},components:["addrowbefore addrowafter deleterows rowheader mergecellsRow splitcellsRow formatRow".split(" ")]},{label:"tab.cell.label",showOn:{scope:"table.cell"},components:[["alignTop","alignMiddle","alignBottom","formatCell"]]}]},combineToolbarSettings:function(f,l,a){function e(a){return"array"===g.type(a)?!a.length:v[a]}var m=n.fillTuples({},b.map(l,function(a){return[a.label,a]})),v=k(f,a);f=c(f,m,e);l=d(l,v,e);return f.concat(l)}}});define("ui/ui-plugin",
"jquery aloha ui/context ui/container ui/surface ui/toolbar ui/scopes ui/settings PubSub jqueryui".split(" "),function(g,b,n,l,d,c,k,f,q){var a=new n,e=new c(a,function(){var a=b.settings.toolbar,c=f.defaultToolbarSettings;return a?f.combineToolbarSettings(a.tabs||[],c.tabs,a.exclude||[]):c.tabs}());b.bind("aloha-editable-activated",function(b,c){d.show(a);l.showContainersForContext(a,b)});b.bind("aloha-editable-deactivated",function(b,c){d.suppressHide||d.hide(a)});q.sub("aloha.ui.scope.change",
function(){l.showContainersForContext(a);k.getPrimaryScope();var b=e._tabs,c=k.getPrimaryScope(),f,d;for(d=0;d<b.length;d++)if(f=b[d].settings,"object"===g.type(f.showOn)&&f.showOn.scope===c){b[d].tab.foreground();break}});return{adoptInto:function(a,b){return e.adoptInto(a,b)},showToolbar:function(b){d.show(a);l.showContainersForContext(a,b)}}});define("ui/ui",["jquery","ui/ui-plugin"],function(g,b){var n={};return{adopt:function(l,d,c){"string"!==g.type(l)?(c=d,d=l,l=c.name):c=g.extend({name:l},
c);d.isInstance||(d=c?d.extend(c):d,d=new d);n[l]=d;b.adoptInto(l,d);return d},getAdoptedComponent:function(b){return n[b]||null}}});define("ui/utils",["jquery","jqueryui"],function(g){function b(b){return b.html||b.text||b.tooltip}function n(b){return'<img class="aloha-ui-inline-icon" src="'+b+'">'}return{wrapWithLabel:function(b,d){return g("<label>",{"class":"aloha-ui-label"}).append(g("<span>",{"class":"aloha-ui-label-text",text:b})).append(d)},makeButton:function(l,d,c){l.button({label:b(d),
text:!(!d.text&&!d.html),icons:{primary:d.icon||d.iconUrl&&"aloha-ui-inline-icon-container"||null,secondary:c&&"aloha-jqueryui-icon ui-icon-triangle-1-s"||null}});d.iconUrl&&l.button("widget").children(".ui-button-icon-primary").append(n(d.iconUrl));return l},makeButtonElement:function(b){return g("<button>",b).attr("type","button")},makeButtonLabel:b,makeButtonLabelWithIcon:function(l){var d=b(l);l.iconUrl&&(d=n(l.iconUrl)+d);return d},makeButtonIconFromUrl:n}});define("ui/vendor/jquery-ui-autocomplete-html",
["jquery","jqueryui"],function(g){(function(b){function g(c,d){var f=RegExp(b.ui.autocomplete.escapeRegex(d),"i");return b.grep(c,function(c){return f.test(b("<div>").html(c.label||c.value||c).text())})}var l=b.ui.autocomplete.prototype,d=l._initSource;b.extend(l,{_initSource:function(){this.options.html&&b.isArray(this.options.source)?this.source=function(b,d){d(g(this.options.source,b.term))}:d.call(this)},_renderItem:function(c,d){return b("<li></li>").data("item.autocomplete",d).append(b("<a></a>")[this.options.html?
"html":"text"](d.label)).appendTo(c)}})})(g)});define("ui/port-helper-attribute-field","jquery ui/ui ui/component ui/scopes ui/context ui/utils aloha/repositorymanager aloha/selection aloha/console ui/vendor/jquery-ui-autocomplete-html".split(" "),function(g,b,n,l,d,c,k,f,q){return function(a){function e(a,b){b.item&&s(b.item.obj);l()}function m(){l()}function l(){q();P&&ca!==g(P).attr(aa)&&(Q||k.markObject(P),""===y()&&A())}function q(){var a=g(P);K&&a.removeClass(K);if(!E){var b=a.attr("data-original-background-color");
a.css("background-color",b||"");a.attr("style")||a.removeAttr("style");a.removeAttr("data-original-background-color")}}function z(a,b){return a.replace(/\{([^}]+)\}/g,function(a,c){return c in b?b[c]:""})}function A(){null!==M&&(G.css("color","#AAA"),G.val(M))}function y(){return G.val()}function p(a){G.val(a);G.css("color","black")}function s(a){if(Q=a){var b=a[N];p(b);W=b;r(aa,a[t]);k.markObject(P,a)}else W=null}function r(a,b,c,e){if(P){var m=!0;"undefined"!=typeof e&&(e.match(RegExp(c))||(m=!1));
m?g(P).attr(a,b):g(P).removeAttr(a)}}var t=a.valueField||"id",N=a.displayField||"name",J=a.objectTypeFilter||["all"],M=a.placeholder,E=!!a.noTargetHighlight,K=a.targetHighlightClass,G=a.element?g(a.element):g('<input id="aloha-attribute-field-'+a.name+'">'),u,S,Q,W,P,aa,ca;a.cls&&G.addClass(a.cls);a.width&&G.width(a.width);u=b.adopt(a.name,n,{scope:a.scope,init:function(){a.element?this.element=G:a.label?(this.element=c.wrapWithLabel(a.label,G),a.labelClass&&this.element.addClass(a.labelClass)):this.element=
g("<span>").append(G);G.autocomplete({html:!0,appendTo:d.selector,source:function(a,b){k.query({queryString:a.term,objectTypeFilter:J},function(a){b(g.map(a.items,function(a){return{label:z(S,a),value:a.name,obj:a}}))})},select:e})}});G.bind("focus",function(a,b){if(g(a.target).is(":visible")){var c=g(P);K&&c.addClass(K);E||(q(),c.context&&c.context.style&&c.context.style["background-color"]&&c.attr("data-original-background-color",c.context.style["background-color"]),c.css("background-color","#80B5F2"));
y()===M&&p("")}}).bind("blur",m).bind("keydown",function(a){13!=a.keyCode&&27!=a.keyCode||a.preventDefault()}).bind("keyup",function(a){Q&&W!==y()&&(W=Q=null);Q||r(aa,y());if(13==a.keyCode||27==a.keyCode)f.getRangeObject().select(),l()});A();Aloha.bind("aloha-editable-deactivated",m);var Y={getInputElem:function(){return G[0]},hasInputElem:function(){return!0},getInputId:function(){return G.attr("id")},hide:function(){G.hide()},show:function(){G.show()},foreground:function(){u.foreground()},focus:function(){u.focus();
G.focus()},getTargetObject:function(){return P},setTargetObject:function(a,b){P=a;aa=b;s(null);a&&b?(ca=g(a).attr(b),p(g(P).attr(aa)),k.getObject(a,function(a){a&&0<a.length&&s(a[0])})):p("")},setAttribute:r,getItem:function(){return Q},setItem:s,setValue:p,getValue:y,addListener:function(a,b){G.bind(a,g.proxy(b,Y))},setObjectTypeFilter:function(a){J=a},setTemplate:function(a){S=a},setPlaceholder:A};return Y}});define("ui/button",["jquery","ui/component","ui/utils","jqueryui"],function(g,b,n){return b.extend({init:function(){this._super();
this.createButtonElement();n.makeButton(this.buttonElement,this).button("widget").tooltip({tooltipClass:"aloha aloha-ui-tooltip",position:{my:"left top",at:"right bottom"}}).click(g.proxy(function(){this.buttonElement.tooltip("close",null,!0);this._onClick()},this))},_onClick:function(){this.click()},click:function(){},createButtonElement:function(){var b=n.makeButtonElement();this["class"]&&b.addClass(this["class"]);return this.element=this.buttonElement=b},disable:function(){this.element.button("option",
"disabled",!1)},enable:function(b){this.element.button("option","disabled",!1===b)}})});define("ui/toggleButton",["jquery","ui/button","jqueryui"],function(g,b){return b.extend({_checked:!1,setState:function(b){this._checked!==b&&((this._checked=b)?this.element.addClass("aloha-button-active"):this.element.removeClass("aloha-button-active"))},getState:function(){return this._checked},_onClick:function(){this.setState(!this._checked);this.click()}})});define("link/nls/i18n",{root:{"button.addlink.tooltip":"Insert Link",
"button.removelink.tooltip":"Remove Link","newlink.defaulttext":"New Link","floatingmenu.tab.link":"Link","link.target.self":"Self","link.target.blank":"Blank","link.target.parent":"Parent","link.target.top":"Top","link.target.framename":"Framename","link.target.legend":"Target","link.title.legend":"Title",insertLink:"ctrl+k"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("aloha/nls/i18n",{root:{"plugin.abbr.floatingmenu.tab.abbr":"Abbreviation","floatingmenu.tab.format":"Format",
"floatingmenu.tab.insert":"Insert",yes:"Yes",no:"No",cancel:"Cancel","repository.no_item_found":"No item found.","repository.loading":"Loading","repository.no_items_found_yet":"No items found yet..."},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("util/keys",["jquery"],function(g){var b=function(){var b={};g.each({8:"backspace",9:"tab",13:"enter",16:"shift control alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",37:"left up right down",45:"insert",46:"delete",48:"0 1 2 3 4 5 6 7 8 9",
65:"a b c d e f g h i j k l m n o p q r s t u v w x y z",112:"f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13 f14 f15"},function(l,d){var c=parseInt(l,10);g.each(d.split(" "),function(d,f){b[c+d]=f})});return b}();return{getToken:function(g){return b[g]},keyCodeTokenMap:g.extend({},b)}});define("link/link-plugin","aloha aloha/plugin aloha/ephemera jquery ui/port-helper-attribute-field ui/ui ui/scopes ui/surface ui/button ui/toggleButton i18n!link/nls/i18n i18n!aloha/nls/i18n aloha/console PubSub util/keys".split(" "),
function(g,b,n,l,d,c,k,f,q,a,e,m,v,x,z){function A(){l(document).bind("keydown.aloha-link.pointer-fix",function(a){(a.metaKey||"control"===z.getToken(a.keyCode))&&l("body").addClass("aloha-link-pointer")}).bind("keyup.aloha-link.pointer-fix",function(a){(a.metaKey||"control"===z.getToken(a.keyCode))&&l("body").removeClass("aloha-link-pointer")})}function y(a){a.obj.delegate("a","click.aloha-link.meta-click-link",function(a){if(a.metaKey||a.ctrlKey)return g.activeEditable.blur(),window.setTimeout(function(){location.href=
a.target},0),a.stopPropagation(),!1})}function p(a,b){var c,e=!1;!a.ignoreNextSelectionChangedEvent&&g.Selection.isSelectionEditable()&&null!=g.activeEditable?(c=a.findLinkMarkup(b))?(a.toggleLinkScope(!0),a.hrefField.setTargetObject(c,"href"),0==l("#"+a.hrefField.getInputId()).length&&(null!==a.hrefUpdateInt&&clearInterval(a.hrefUpdateInt),a.hrefUpdateInt=setInterval(function(){0<l("#"+a.hrefField.getInputId()).length&&(a.hrefField.setTargetObject(c,"href"),clearInterval(a.hrefUpdateInt))},200)),
g.trigger("aloha-link-selected"),e=!0,x.pub("aloha.link.selected",{input:a.hrefField.getInputElem(),href:a.hrefField.getValue(),element:a.hrefField.getTargetObject()})):(a.toggleLinkScope(!1),a.hrefField.setTargetObject(null),g.trigger("aloha-link-unselected")):a.toggleLinkScope(!1);a.ignoreNextSelectionChangedEvent=!1;return e}var s=window.GENTICS,r="",t,N={merge:!0,mergeable:function(a){return"aloha-new-link"===a.className&&a.nextSibling&&"aloha-new-link"===a.nextSibling.className}};n.classes("aloha-link-pointer",
"aloha-link-text");return b.create("link",{config:["a"],targetregex:"",target:"",cssclassregex:null,cssclass:"",objectTypeFilter:[],onHrefChange:null,ignoreNextSelectionChangedEvent:!1,hrefUpdateInt:null,hotKey:{insertLink:e.t("insertLink","ctrl+k")},hrefValue:"http://",init:function(){var a=this;"undefined"!=typeof this.settings.targetregex&&(this.targetregex=this.settings.targetregex);"undefined"!=typeof this.settings.target&&(this.target=this.settings.target);"undefined"!=typeof this.settings.cssclassregex&&
(this.cssclassregex=this.settings.cssclassregex);"undefined"!=typeof this.settings.cssclass&&(this.cssclass=this.settings.cssclass);"undefined"!=typeof this.settings.objectTypeFilter&&(this.objectTypeFilter=this.settings.objectTypeFilter);"undefined"!=typeof this.settings.onHrefChange&&(this.onHrefChange=this.settings.onHrefChange);"undefined"!=typeof this.settings.hotKey&&l.extend(!0,this.hotKey,this.settings.hotKey);"undefined"!=typeof this.settings.hrefValue&&(this.hrefValue=this.settings.hrefValue);
this.createButtons();this.subscribeEvents();this.bindInteractions();g.bind("aloha-plugins-loaded",function(){a.initSidebar(g.Sidebar.right);x.pub("aloha.link.ready",{plugin:a})})},nsSel:function(){var a=[];l.each(arguments,function(){a.push("."+(""==this?"aloha-link":"aloha-link-"+this))});return l.trim(a.join(" "))},nsClass:function(){var a=[];l.each(arguments,function(){a.push(""==this?"aloha-link":"aloha-link-"+this)});return l.trim(a.join(" "))},initSidebar:function(a){var b=this;b.sidebar=a;
a.addPanel({id:b.nsClass("sidebar-panel-target"),title:e.t("floatingmenu.tab.link"),content:"",expanded:!0,activeOn:"a, link",onInit:function(){var a=this;this.setContent('<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+e.t("link.target.legend")+'</legend><ul><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_self" /><span>'+e.t("link.target.self")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_blank" /><span>'+
e.t("link.target.blank")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_parent" /><span>'+e.t("link.target.parent")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="_top" /><span>'+e.t("link.target.top")+'</span></li><li><input type="radio" name="targetGroup" class="'+b.nsClass("radioTarget")+'" value="framename" /><span>'+e.t("link.target.framename")+'</span></li><li><input type="text" class="'+
b.nsClass("framename")+'" /></li></ul></fieldset></div><div class="'+b.nsClass("title-container")+'" ><fieldset><legend>'+e.t("link.title.legend")+'</legend><input type="text" class="'+b.nsClass("linkTitle")+'" /></fieldset></div>');l(b.nsSel("framename")).live("keyup",function(){l(a.effective).attr("target",l(this).val().replace('"',"&quot;").replace("'","&#39;"))});l(b.nsSel("radioTarget")).live("change",function(){"framename"==l(this).val()?l(b.nsSel("framename")).slideDown():(l(b.nsSel("framename")).slideUp().val(""),
l(a.effective).attr("target",l(this).val()))});l(b.nsSel("linkTitle")).live("keyup",function(){l(a.effective).attr("title",l(this).val().replace('"',"&quot;").replace("'","&#39;"))})},onActivate:function(a){var c=this;c.effective=a;if(null!=l(c.effective).attr("target")){var e=!0;l(b.nsSel("framename")).hide().val("");l(b.nsSel("radioTarget")).each(function(){l(this).removeAttr("checked");l(this).val()===l(c.effective).attr("target")&&(e=!1,l(this).attr("checked","checked"))});e&&(l(b.nsSel('radioTarget[value="framename"]')).attr("checked",
"checked"),l(b.nsSel("framename")).val(l(c.effective).attr("target")).show())}else l(b.nsSel("radioTarget")).first().attr("checked","checked"),l(c.effective).attr("target",l(b.nsSel("radioTarget")).first().val());c=this;c.effective=a;l(b.nsSel("linkTitle")).val(l(c.effective).attr("title"))}});a.show()},subscribeEvents:function(){var a=this,b={},c=0;g.bind("aloha-editable-created",function(e,m){var f=a.getEditableConfig(m.obj),f=-1!==l.inArray("a",f);if(b[m.getId()]=f)m.obj.bind("keydown.aloha-link",
a.hotKey.insertLink,function(){a.findLinkMarkup()?(a.hrefField.foreground(),a.hrefField.focus()):a.insertLink(!0);return!1}),m.obj.find("a").each(function(){a.addLinkEventHandlers(this)}),0===c++&&A()});g.bind("aloha-editable-destroyed",function(a,b){b.obj.unbind(".aloha-link");0===--c&&l(document).unbind(".aloha-link.pointer-fix")});g.bind("aloha-editable-activated",function(c,e){b[g.activeEditable.getId()]?(a._formatLinkButton.show(),a._insertLinkButton.show()):(a._formatLinkButton.hide(),a._insertLinkButton.hide());
y(e.editable)});var e=!1;g.bind("aloha-selection-changed",function(c,m){var f=!1;g.activeEditable&&b[g.activeEditable.getId()]&&(f=p(a,m))&&e!==f&&a.hrefField.foreground();e=f});var m=this;g.bind("aloha-editable-deactivated",function(a,b){e&&(setTimeout(function(){e||m.toggleLinkScope(!1)},100),e=!1);b.editable.obj.unbind(".aloha-link.meta-click-link")})},toggleLinkScope:function(a){this._isScopeActive===a&&g.activeEditable&&this._isScopeActive_editableId===g.activeEditable.getId()||(this._isScopeActive=
a,this._isScopeActive_editableId=g.activeEditable&&g.activeEditable.getId(),a?(this.hrefField.show(),this._insertLinkButton.hide(),g.activeEditable&&"A"===g.activeEditable.obj[0].nodeName?this._removeLinkButton.hide():this._removeLinkButton.show(),this._formatLinkButton.setState(!0),k.enterScope(this.name,"link")):(this.hrefField.hide(),this._insertLinkButton.show(),this._removeLinkButton.hide(),this._formatLinkButton.setState(!1),k.leaveScope(this.name,"link",!0)))},addLinkEventHandlers:function(a){var b=
this;l(a).mouseenter(function(c){g.Log.debug(b,"mouse over link.");b.mouseOverLink=a;b.updateMousePointer()});l(a).mouseleave(function(a){g.Log.debug(b,"mouse left link.");b.mouseOverLink=null;b.updateMousePointer()});l(a).click(function(a){if(a.metaKey)return g.activeEditable.blur(),window.setTimeout(function(){location.href=a.target},0),a.stopPropagation(),!1})},createButtons:function(){var b=this;this._formatLinkButton=c.adopt("formatLink",a,{tooltip:e.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",
scope:"Aloha.continuoustext",click:function(){b.formatLink()}});this._insertLinkButton=c.adopt("insertLink",q,{tooltip:e.t("button.addlink.tooltip"),icon:"aloha-icon aloha-icon-link",scope:"Aloha.continuoustext",click:function(){b.insertLink(!1)}});this.hrefField=d({name:"editLink",width:320,valueField:"url",cls:"aloha-link-href-field",scope:"Aloha.continuoustext",noTargetHighlight:!0,targetHighlightClass:"aloha-focus"});this.hrefField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.hrefField.setObjectTypeFilter(this.objectTypeFilter);
this._removeLinkButton=c.adopt("removeLink",q,{tooltip:e.t("button.removelink.tooltip"),icon:"aloha-icon aloha-icon-unlink",scope:"Aloha.continuoustext",click:function(){b.removeLink()}})},bindInteractions:function(){var a=this;this.hrefField.addListener("keyup",function(b){if("escape"===z.getToken(b.keyCode)){var c=a.hrefField.getValue();"/"==c[0]||"#"==c[0]||c.match(/^.*\.([a-z]){2,4}$/i)||c.match(/^([a-z]){3,10}:\/\/.+/i)||c.match(/^(mailto|tel):.+/i)||(c=a.hrefField.getValue(),a.hrefField.setValue(c),
c!=a.hrefValue&&""!=c||a.removeLink(!1))}a.hrefChange();"enter"===z.getToken(b.keyCode)?(b=g.Selection.getRangeObject(),a.ignoreNextSelectionChangedEvent=!0,b.startContainer=b.endContainer,b.startOffset=b.endOffset,b.select(),a.ignoreNextSelectionChangedEvent=!0,c=l(a.hrefField.getInputElem()).attr("value"),c!=a.hrefValue&&""!=c||a.removeLink(!1),window.setTimeout(function(){k.setScope("Aloha.continuoustext")},100)):(t=l(a.hrefField.getInputElem()).attr("value"),r!=t&&(r=t))});l(document).keydown(function(b){g.Log.debug(a,
"Meta key down.");a.metaKey=b.metaKey;a.updateMousePointer()}).keyup(function(b){g.Log.debug(a,"Meta key up.");a.metaKey=b.metaKey;a.updateMousePointer()})},updateMousePointer:function(){this.metaKey&&this.mouseOverLink?(g.Log.debug(this,"set pointer"),l(this.mouseOverLink).removeClass("aloha-link-text"),l(this.mouseOverLink).addClass("aloha-link-pointer")):(l(this.mouseOverLink).removeClass("aloha-link-pointer"),l(this.mouseOverLink).addClass("aloha-link-text"))},findLinkMarkup:function(a){"undefined"==
typeof a&&(a=g.Selection.getRangeObject());if(g.activeEditable){var b=g.activeEditable.obj;b[0]&&"A"===b[0].nodeName&&(b=b.parent());return a.findMarkup(function(){return"A"==this.nodeName},b)}return null},formatLink:function(){g.activeEditable&&(this.findLinkMarkup(g.Selection.getRangeObject())?this.removeLink():this.insertLink())},insertLink:function(a){var b=this,c=g.Selection.getRangeObject(),m;c.startContainer&&c.endContainer&&!this.findLinkMarkup(c)&&(this.hrefField.foreground(),c.isCollapsed()&&
!1!==a&&s.Utils.Dom.extendToWord(c),c.isCollapsed()?(a=e.t("newlink.defaulttext"),m=l('<a href="'+b.hrefValue+'" class="aloha-new-link">'+a+"</a>"),s.Utils.Dom.insertIntoDOM(m,c,l(g.activeEditable.obj)),c.startContainer=c.endContainer=m.contents().get(0),c.startOffset=0,c.endOffset=a.length):(m=l('<a href="'+b.hrefValue+'" class="aloha-new-link"></a>'),s.Utils.Dom.addMarkup(c,m,!1),s.Utils.Dom.doCleanup(N,c)),g.activeEditable.obj.find("a.aloha-new-link").each(function(a){b.addLinkEventHandlers(this);
l(this).removeClass("aloha-new-link")}),c.select(),this.hrefField.focus(),this.hrefField.hasInputElem()&&l(this.hrefField.getInputElem()).attr("value",b.hrefValue).select(),a=g.createRange(),a.setStart(c.startContainer,c.startOffset),a.setEnd(c.endContainer,c.endOffset),x.pub("aloha.link.insert",{range:a}),this.hrefChange())},removeLink:function(a){var b=g.Selection.getRangeObject(),c=this.findLinkMarkup();this.hrefField.setItem(null);c&&(s.Utils.Dom.removeFromDOM(c,b,!0),b.startContainer=b.endContainer,
b.startOffset=b.endOffset,b.select(),"undefined"!=typeof a&&!0!==a||k.setScope("Aloha.continuoustext"))},hrefChange:function(){""!=this.target&&this.hrefField.setAttribute("target",this.target,this.targetregex,this.hrefField.getValue());null!=this.cssclassregex&&this.hrefField.setAttribute("class",this.cssclass,this.cssclassregex,this.hrefField.getValue());var a=this.hrefField.getValue(),b=this.hrefField.getTargetObject();g.trigger("aloha-link-href-change",{href:a,obj:b,item:this.hrefField.getItem()});
x.pub("aloha.link.changed",{href:a,element:b,input:this.hrefField.getInputElem()});"function"==typeof this.onHrefChange&&this.onHrefChange.call(this,this.hrefField.getTargetObject(),this.hrefField.getValue(),this.hrefField.getItem())}})});define("ui/dialog",["jquery","ui/component","i18n!ui/nls/i18n"],function(g,b,n){function l(b){var c={};b.text&&(c.text=b.text);b.html&&(c.html=b.html);return g("<div>",c)}function d(b){return function(){b.apply(this);g(this).dialog("destroy").remove()}}function c(b){for(var c in b)b.hasOwnProperty(c)&&
(b[c]=d(b[c]));return b}function k(b,c){var a="aloha aloha-dialog";b.cls&&(a+=" "+b.cls);return{resizable:!1,modal:!0,title:b.title||c,dialogClass:a,zIndex:10200}}return{confirm:function(b){var d=b.buttons||{},a=n.t("button.yes.label"),e=n.t("button.no.label");null!==d.Yes&&"Yes"!==a&&(d[a]=d.Yes,delete d.Yes);null!==d.No&&"No"!==e&&(d[e]=d.No,delete d.No);d[a]=d[a]||b.yes||g.noop;d[e]=d[e]||b.no||g.noop;if(b.answer){var m=d[a],v=d[e];d[a]=function(){m();b.answer(!0)};d[e]=function(){v();b.answer(!1)}}var x=
l(b).dialog(g.extend(k(b,"Confirm"),{buttons:c(d)}));return function(){x.dialog("destroy").remove()}},alert:function(b){var d={};d[n.t("button.dismiss.label")]=g.noop;var a=l(b).dialog(g.extend(k(b,"Alert"),{buttons:c(d)}));return function(){a.dialog("destroy").remove()}},modal:function(b){b=l(b).dialog(g.extend(k(b,""),b));b.parent().find(".ui-dialog-titlebar").remove();return b},progress:function(b){var c=g("<div>").progressbar({value:null!=b.value?b.value:100}),a=l(b).dialog(g.extend(k(b,"Progress"),
{open:function(){g(this).append(c)}}));return function(b){null!=b?c.progressbar({value:b}):a.dialog("destroy").remove()}}}});define("ui/multiSplit",["jquery","ui/component","ui/button","ui/utils"],function(g,b,n,l){return b.extend({_activeButton:null,_isOpen:!1,init:function(){this._super();var b=this,c=this.element=g("<div>",{"class":"aloha-multisplit"});this.contentElement=g("<div>",{"class":"aloha-multisplit-content"}).appendTo(c);this.toggleButton=l.makeButtonElement({"class":"aloha-multisplit-toggle",
click:function(){b.toggle()}}).button().appendTo(c);this.buttons=[];var k=this.getButtons();0===k.length&&c.hide();for(c=0;c<k.length;c++)this.addButton(k[c]);g("body").click(function(c){b._isOpen&&!b.element.is(c.target)&&0===b.element.find(c.target).length&&b.close()})},addButton:function(b){var c=this,k=new (n.extend({tooltip:b.tooltip,icon:b.wide?b.icon:"aloha-large-icon "+b.icon,iconOnly:b.wide?!1:!0,init:function(){this._super();b.init&&b.init.call(this)},click:function(){b.click.apply(c,arguments);
c.close()}}));b.wide||k.element.addClass("aloha-large-button");c.buttons[b.name]={settings:b,component:k,element:k.element,visible:!0};var f=this.contentElement.children(".aloha-ui-multisplit-fullwidth");!b.wide&&f.length?f.before(k.element[0]):this.contentElement.append(k.element[0])},setActiveButton:function(b){b||(b=null);null!==this._activeButton&&this.buttons[this._activeButton].element.removeClass("aloha-multisplit-active");this._activeButton=b;null!==b&&this.buttons[b].element.addClass("aloha-multisplit-active")},
toggle:function(){this.element.toggleClass("aloha-multisplit-open");this._isOpen=!this._isOpen},open:function(){this.element.addClass("aloha-multisplit-open");this._isOpen=!0},close:function(){this.element.removeClass("aloha-multisplit-open");this._isOpen=!1},show:function(b){b||(b=null);null!==b&&void 0!==this.buttons[b]&&(this.buttons[b].element.show(),this.buttons[b].visible=!0,this.element.show())},hide:function(b){var c,k=!1;b||(b=null);if(null!==b&&void 0!==this.buttons[b]){this.buttons[b].element.hide();
this.buttons[b].visible=!1;for(c in this.buttons)if(this.buttons.hasOwnProperty(c)&&this.buttons[c].visible){this.element.show();k=!0;break}k||this.element.hide()}}})});define("ui/port-helper-multi-split",["aloha/core","jquery","ui/ui","ui/multiSplit"],function(g,b,n,l){return function(d){var c;c=n.adopt(d.name,l,{scope:d.scope,getButtons:function(){var c=[];b.each(d.items,function(b,d){c.push({tooltip:d.tooltip,text:d.text,name:d.name,icon:d.iconClass,click:d.click,init:function(){d.cls&&this.element.addClass(d.cls);
d.init&&d.init.call(this)},wide:d.wide})});return c}});return{pushItem:function(b){c.addButton(b)},showItem:function(b){c.show(b)},hideItem:function(b){c.hide(b)},setActiveItem:function(b){c.setActiveButton(b)}}}});define("table/nls/i18n",{root:{"floatingmenu.tab.table":"Table","floatingmenu.tab.tablelayout":"Table Layout","deleterows.confirm":"Do you really want to delete the selected rows?","deletecolumns.confirm":"Do you really want to delete the selected columns?","deletetable.confirm":"Do you really want to delete the table?",
Table:"Table","button.createtable.tooltip":"Insert Table","button.addcolleft.tooltip":"Add Column left","button.addcolright.tooltip":"Add Column right","button.delcols.tooltip":"Delete Columns","button.addrowbefore.tooltip":"Add Row before","button.addrowafter.tooltip":"Add Row after","button.delrows.tooltip":"Delete Rows","button.caption.tooltip":"Table caption","button.naturalfit.tooltip":"Reset table sizing","empty.caption":"Table caption","button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting",
"button.rowheader.tooltip":"Format row as table header","button.columnheader.tooltip":"Format column as table header","button.mergecells.tooltip":"Merge Cells","button.splitcells.tooltip":"Split Cells","table.label.target":"Summary","table.sidebar.title":"Table","table.mergeCells.notRectangular":"Only a rectangular selection can be merged","table.addColumns.nonConsecutive":"Please select a single column or a consecutive range of columns","table.createTable.nestedTablesNoSupported":"Sorry, nested tables are not supported"},
ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("table/table-create-layer",["jquery"],function(g){CreateLayer=function(b){this.TablePlugin=b};CreateLayer.prototype.parameters={elemId:"aloha-table-createLayer",className:"aloha-table-createdialog",numX:10,numY:10,layer:void 0,target:void 0};CreateLayer.prototype.config={};CreateLayer.prototype.visible=!1;CreateLayer.prototype.show=function(){var b=this.get("layer");null==b?this.create():(this.setPosition(b),b.find("td").removeClass("hover"),
b.show());this.visible=!0};CreateLayer.prototype.create=function(){var b=this,n=g("<div></div>");n.id=this.get("elemId");n.addClass(this.get("className"));var l=g("<table></table>");l.css("width",15*(this.get("numX")+6));for(var d,c,k=0;k<this.get("numY");k++){d=g("<tr></tr>");for(var f=0;f<this.get("numX");f++)c=g("<td>\u00a0</td>"),0==k&&0==f&&c.addClass("hover"),c.bind("mouseover",{rowId:k,colId:f},function(c){b.handleMouseOver(c,l)}),c.bind("click",{rowId:k,colId:f},function(c){b.TablePlugin.createTable(c.data.colId+
1,c.data.rowId+1);b.hide()}),d.append(c);l.append(d)}n.append(l);this.set("layer",n);this.setPosition();n.bind("click",function(b){b.stopPropagation()}).mousedown(function(b){b.stopPropagation()});g("body").append(n).bind("click",function(c){b.visible&&c.target!==b.get("target")[0]&&!g.contains(b.get("target")[0],c.target)&&b.hide()})};CreateLayer.prototype.handleMouseOver=function(b,n){for(var l=b.data.rowId,d=b.data.colId,c=n.find("tr"),k=0;k<=c.length;k++)for(var f=g(c[k]).find("td"),q=0;q<=f.length;q++)k<=
l&&q<=d?g(f[q]).addClass("hover"):g(f[q]).removeClass("hover")};CreateLayer.prototype.setPosition=function(){var b=g(this.get("target")),n=b.offset();this.get("layer").css("left",n.left+"px");this.get("layer").css("top",n.top+b.height()+"px")};CreateLayer.prototype.hide=function(){this.get("layer").hide();this.visible=!1};CreateLayer.prototype.get=function(b){if(this.config[b])return this.config[b];if(this.parameters[b])return this.parameters[b]};CreateLayer.prototype.set=function(b,g){this.config[b]?
this.config[b]=g:this.parameters[b]=g};return CreateLayer});define("table/table-plugin-utils",["jquery"],function(g){var b={cellIndexToGridColumn:function(g,l,d){var c=null;b.walkCells(g,function(b,f,g,a,e){if(b===l&&f===d)return c=g,!1});return c},walkCells:function(g,l){for(var d=[],c=0;c<g.length;c++){for(var k=g[c].cells,f=0,q=0;q<k.length;q++){for(var a=k[q],e=b.colspan(a),a=b.rowspan(a);d[q+f];)d[q+f]-=1,f+=1;if(!1===l(c,q,q+f,e,a))return;for(var m=0;m<e;m++){if(d[q+f+m])throw"an impossible case has occurred";
d[q+f+m]=a-1}f+=e-1}for(;q+f<d.length;f++)d[q+f]&&(d[q+f]-=1)}},makeGrid:function(g){var l=[];b.walkCells(g,function(b,c,k,f,q){c=g[b].cells[c];for(var a=0;a<q;a++){l[b+a]=l[b+a]||[];for(var e=0;e<f;e++)l[b+a][k+e]={cell:c,colspan:f,rowspan:q,spannedX:e,spannedY:a}}});return l},containsDomCell:function(b){return 0===b.spannedX&&0===b.spannedY},leftDomCell:function(b,l,d){do{var c=b[l][d];if(0===c.spannedY)return c.cell;d-=c.spannedX+1}while(0<=d);return null},splitCell:function(n,l){var d=g(n),c=
b.colspan(n),k=b.rowspan(n);if(1!==c||1!==k){for(var f=d.parent(),q=f.parent().children(),f=f.index(),a=d.index(),e=b.makeGrid(q),a=b.cellIndexToGridColumn(q,f,a),m=0;m<k;m++)for(var v=0===m?1:0;v<c;v++){var x=b.leftDomCell(e,f+m,a);null==x?q.eq(f+m).prepend(l()):g(x).after(l())}d.removeAttr("colSpan");d.removeAttr("rowSpan")}},rowspan:function(b){return parseInt(g(b).attr("rowspan"))||1},colspan:function(b){return parseInt(g(b).attr("colspan"))||1},walkGrid:function(b,l){for(var d=0;d<b.length;d++)for(var c=
0;c<b[d].length;c++)if(!1===l(b[d][c],c,d))return},walkGridInsideRect:function(g,l,d){b.walkGrid(g,function(b,k,f){if(f>=l.top&&f<l.bottom&&k>=l.left&&k<l.right)return d(b,k,f)})},leftTrimArray:function(b){for(var l=0;l<b.length;l++)if(null!=b[l])return b.slice(l,b.length);return[]},makeContour:function(g,l){var d=[],c=[],k=[],f=[];b.walkGrid(g,function(b,a,e){if(l(b,a,e)){if(null==d[e]||a<d[e])d[e]=a;if(null==c[e]||a>c[e])c[e]=a;if(null==k[a]||e<k[a])k[a]=e;if(null==f[a]||e>f[a])f[a]=e}});d=b.leftTrimArray(d);
c=b.leftTrimArray(c);k=b.leftTrimArray(k);f=b.leftTrimArray(f);return{left:d,right:c,top:k,bottom:f}},indexOfAnyBut:function(b,l){for(var d=0;d<b.length;d++)if(l!==b[d])return d;return-1},isConsecutive:function(b){for(var l=1;l<b.length;l++)if(1!==Math.abs(b[l]-b[l-1]))return!1;return!0},resizeCellWidth:function(b,l){g(b).css("width",l);g(b).find(".aloha-table-cell-editable").eq(0).css({width:l,"word-wrap":"break-word"})},getMinColWidth:function(n){var l=n.closest("tbody").children("tr"),d=n.closest("tr"),
c=b.cellIndexToGridColumn(l,l.index(d),d.children().index(n)),k="";b.walkCells(l,function(b,d,a,e,m){if(a===c&&(b=g(g(l[b]).children()[d]),!(1<e)))for(e=b.text().split(" "),b=0;b<e.length;b++)e[b].length>k.length&&(k=e[b])});d=g("<span></span>");d.css("text-indent",-9999);d.css("display","inline");d.text(k);g(n).append(d);n=d.width();g(d).remove();return n},getCellResizeBoundaries:function(n,l,d){var c,k;b.walkCells(l,function(f,q,a,e,m){f=g(g(l[f]).children()[q]);if(f.hasClass("aloha-table-selectrow")||
f.closest("tr").hasClass("aloha-table-selectcolumn"))return!0;a===n&&1===e&&(c=f.offset().left+b.getCellBorder(f)+f.width()-b.getMinColWidth(f));a===n-1&&1===e&&(k=f.offset().left+b.getCellBorder(f)+b.getCellPadding(f)+b.getMinColWidth(f));if(c&&k)return d(c,k),!1})},getCellBorder:function(b){return(b.outerWidth()-b.innerWidth())/2},getCellPadding:function(b){return b.innerWidth()-b.width()}};return b});define("table/table-cell",["jquery","table/table-plugin-utils"],function(g,b){var n=function(b,
d){null==b&&(b="<td>&nbsp;</td>");b=g(b).get(0);this.obj=g(b);this.tableObj=d;d.cells.push(this)};n.prototype.tableObj=void 0;n.prototype.obj=void 0;n.prototype.wrapper=void 0;n.prototype.hasFocus=!1;n.prototype.activate=function(){var l=this,d=l.obj;d.wrapInner("<div/>");var c=d.children("div").eq(0);c.contentEditable(!0);c.addClass("aloha-table-cell-editable");c.bind("focus",function(c){1<b.colspan(l.obj)||1<b.rowspan(l.obj)?l.tableObj.tablePlugin._splitcellsButton.enable(!0):l.tableObj.tablePlugin._splitcellsButton.enable(!1);
c.currentTarget&&(c.currentTarget.indexOf=function(){return-1});l._editableFocus(c)});c.bind("mousedown",function(c){c.currentTarget&&(c.currentTarget.indexOf=function(){return-1});l._editableMouseDown(c);l.tableObj.selection.baseCellPosition=[l._virtualY(),l._virtualX()];if(c.shiftKey){c=l.tableObj.selection.lastBaseCellPosition[1];var f=l.tableObj.selection.lastBaseCellPosition[0],d=l.tableObj.selection.baseCellPosition,a=d[1];a>c&&(a=c,c=d[1]);var e=d[0];e>f&&(e=f,f=d[0]);var m=e,v=c,n=f,z=a,A=
l.tableObj;c=A.obj.children().children("tr");c=b.makeGrid(c);A.selection.selectedCells=[];var y=A.get("classCellSelected");b.walkGrid(c,function(a,c,e){b.containsDomCell(a)&&(e>=m&&e<=n&&c>=z&&c<=v?(g(a.cell).addClass(y),A.selection.selectedCells.push(a.cell)):g(a.cell).removeClass(y))});A.selection.notifyCellsSelected()}else l.tableObj.selection.lastBaseCellPosition=l.tableObj.selection.baseCellPosition,l._editableMouseDown(c),l._startCellSelection()});c.bind("blur",function(b){l._editableBlur(b)});
c.bind("keyup",function(b){l._editableKeyUp(b)});c.bind("keydown",function(b){l._editableKeyDown(b)});c.bind("mouseover",function(b){l._selectCellRange()});c.contentEditableSelectionChange(function(b){Aloha.Selection.onChange(c,b);return c});d.bind("mousedown",function(b){window.setTimeout(function(){l.wrapper.trigger("focus");l._selectAll(c)},1);b.shiftKey||(l.tableObj.selection.unselectCells(),l._startCellSelection());b.stopPropagation()});d.get(0)&&(d.get(0).onselectstart=function(){return!1});
this.wrapper=d.children();this.wrapper.get(0)&&(this.wrapper.get(0).onselectstart=function(){window.event.cancelBubble=!0},this.wrapper.get(0).ondragstart=function(){return!1});return this};n.prototype.deactivate=function(){var b=g(this.obj.children(".aloha-table-cell-editable"));b.length&&(b.parent().append(b.contents()),b.remove(),this.obj.unbind("click"),this.obj.unbind("mousedown"),""==g.trim(this.obj.attr("class"))&&this.obj.removeAttr("class"))};n.prototype.toString=function(){return"TableCell"};
n.prototype._editableFocus=function(b){this.hasFocus||(this.tableObj.focus(),this.obj.addClass("aloha-table-cell_active"),this.hasFocus=!0,this.tableObj.selection.selectionType="cell")};n.prototype._editableBlur=function(b){this.hasFocus=!1;this.obj.removeClass("aloha-table-cell_active")};n.prototype._virtualX=function(){var l=this.tableObj.obj.children().children("tr"),d=this.obj.parent().index(),c=this.obj.index();return b.cellIndexToGridColumn(l,d,c)};n.prototype._virtualY=function(){return this.obj.parent("tr").index()};
n.prototype._startCellSelection=function(){if(!this.tableObj.selection.cellSelectionMode){this.tableObj.selection.unselectCells();this.tableObj.selection.cellSelectionMode=!0;var b=this;g("body").bind("mouseup.cellselection",function(){b._endCellSelection()});this.tableObj.selection.baseCellPosition=[this._virtualY(),this._virtualX()]}};n.prototype._endCellSelection=function(){this.tableObj.selection.cellSelectionMode&&(this.tableObj.selection.cellSelectionMode=!1,this.tableObj.selection.baseCellPosition=
null,this.tableObj.selection.lastSelectionRange=null,this.tableObj.selection.selectionType="cell",g("body").unbind("mouseup.cellselection"))};n.prototype._getSelectedRect=function(){var b=this._virtualX(),d=this._virtualY(),c=this.tableObj.selection.baseCellPosition,k=c[1];k>b&&(k=b,b=c[1]);var f=c[0];f>d&&(f=d,d=c[0]);return{top:f,right:b,bottom:d,left:k}};n.prototype._selectCellRange=function(){if(!this.tableObj.selection.resizeMode&&this.tableObj.selection.cellSelectionMode){var l=this._getSelectedRect(),
d=this.tableObj,c=d.obj.children().children("tr"),c=b.makeGrid(c);d.selection.selectedCells=[];var k=d.get("classCellSelected");b.walkGrid(c,function(c,q,a){b.containsDomCell(c)&&(a>=l.top&&a<=l.bottom&&q>=l.left&&q<=l.right?(g(c.cell).addClass(k),d.selection.selectedCells.push(c.cell)):g(c.cell).removeClass(k))});d.selection.notifyCellsSelected()}};n.prototype._selectAll=function(b){b=b.jquery?b.get(0):b;if(g.browser.msie)document.getSelection?(d=document.getSelection(),c=document.createRange(),
c.selectNodeContents(b),d.removeAllRanges(),d.addRange(c)):document.selection&&(c=document.body.createTextRange(),c.moveToElementText(b),c.select());else{var d=window.getSelection();if(d.setBaseAndExtent)d.setBaseAndExtent(b,0,b,Math.max(0,b.innerText.length-1));else{window.opera&&"<BR>"==b.innerHTML.substring(b.innerHTML.length-4)&&(b.innerHTML+="&#160;");var c=document.createRange();c.selectNodeContents(b);d.removeAllRanges();d.addRange(c)}}};n.prototype._editableMouseDown=function(b){this.tableObj.selection.unselectCells();
this.tableObj.hasFocus&&b.stopPropagation()};n.prototype._editableKeyUp=function(b){};n.prototype._editableKeyDown=function(b){this._checkForEmptyEvent(b);this.obj[0]!==this.tableObj.obj.find("tr:last td:last")[0]||9!=b.keyCode||b.altKey||b.shiftKey||b.ctrlKey||(this.tableObj.addRow(this.obj.parent().index()+1),this.tableObj.cells[this.tableObj.cells.length-1]._selectAll(this.wrapper.get(0)),b.stopPropagation())};n.prototype._checkForEmptyEvent=function(b){b=g(this.wrapper);var d=b.text();0<b.children().length||
""!==d||(this.wrapper.text("\u00a0"),this.wrapper.get(0).blur(),this.wrapper.get(0).focus())};n.getContainer=function(b){return g(b.firstChild).hasClass("aloha-table-cell-editable")?b.firstChild:b};return n});define("table/table-selection","aloha jquery table/table-plugin-utils table/table-cell ui/dialog i18n!table/nls/i18n".split(" "),function(g,b,n,l,d,c){function k(a){return{top:a.top[0],right:a.right[0]+1,bottom:a.bottom[0]+1,left:a.left[0]}}function f(a,b,c){var f=!0;-1!==n.indexOfAnyBut(b.top,
b.top[0])||-1!==n.indexOfAnyBut(b.right,b.right[0])||-1!==n.indexOfAnyBut(b.bottom,b.bottom[0])||-1!==n.indexOfAnyBut(b.left,b.left[0])?f=!1:(b=k(b),n.walkGridInsideRect(a,b,function(a){if(!c(a))return f=!1}));return f}var q=function(a){this.table=a};q.prototype.selectionType=void 0;q.prototype.selectedCells=[];q.prototype.selectedColumnIdxs=[];q.prototype.selectedRowIdxs=[];q.prototype.cellSelectionMode=!1;q.prototype.baseCellPosition=null;q.prototype.lastSelectionRange=null;q.prototype.selectColumns=
function(a){this.unselectCells();var c=this.table.getRows();c.shift();for(var c=n.makeGrid(c),m=0;m<a.length;m++)if(-1===b.inArray(a[m],this.selectedColumnIdxs)){this.selectedColumnIdxs.push(a[m]);for(var f=0;f<c.length;f++){var d=c[f][a[m]];n.containsDomCell(d)&&(b(d.cell).addClass(this.table.get("classCellSelected")),this.selectedCells.push(d.cell))}}this.selectionType="column"};q.prototype.selectRows=function(a){this.unselectCells();var c=this.table.getRows();a.sort(function(a,b){return a-b});
for(var m=0;m<a.length;m++)if(c[a[m]]){for(var f=0;f<this.selectedRowIdxs.length;f++)if(a[m]==this.selectedRowIdxs[f])return;this.selectedRowIdxs.push(a[m]);for(f=1;f<c[a[m]].cells.length;f++)this.selectedCells.push(c[a[m]].cells[f]),b(c[a[m]].cells[f]).addClass(this.table.get("classCellSelected"))}this.selectionType="row"};q.prototype.selectAll=function(){var a=b.map(this.table.getRows(),function(a,b){return b});a.shift();this.selectRows(a)};q.prototype.notifyCellsSelected=function(){g.trigger("aloha-table-selection-changed")};
q.prototype._notifyCellsUnselected=function(){g.trigger("aloha-table-selection-changed")};q.prototype.isHeader=function(){if(0==this.selectedCells.length)return!1;for(var a=0;a<this.selectedCells.length;a++)if(!this.selectedCells[a]||"th"!=this.selectedCells[a].nodeName.toLowerCase())return!1;return!0};q.prototype.unselectCells=function(){var a;if(!this.cellSelectionMode&&0<this.selectedCells.length){a=this.table.getRows();for(var c=0;c<a.length;c++)for(var m=1;m<a[c].cells.length;m++)b(a[c].cells[m]).removeClass(this.table.get("classCellSelected"));
this.selectedCells=[];this.selectedColumnIdxs=[];this.selectedRowIdxs=[];this.selectionType="cell";this._notifyCellsUnselected()}};q.prototype.selectionIndex=function(a){for(var b=0;b<this.selectedCells.length;b++)if(this.selectedCells[b]===a)return b;return-1};q.prototype.mergeCells=function(){var a=this.selectedCells;if(0!==a.length){var e=function(c){return-1!=b.inArray(c.cell,a)},m=n.makeGrid(this.table.getRows()),q=n.makeContour(m,e);if(f(m,q,e)){var x=k(q),e=b(m[x.top][x.left].cell),z=b(l.getContainer(e.get(0)));
n.walkGridInsideRect(m,x,function(a,c,e){if(c-a.spannedX!==x.left||e-a.spannedY!==x.top){a=a.cell;c=b(l.getContainer(a)).contents();for(e=0;e<c.length;e++)if("string"!==typeof c[e]||""!==b.trim(c[e])){z.append(" ");z.append(c);break}b(a).remove()}});e.attr({rowspan:x.bottom-x.top,colspan:x.right-x.left});this.selectedCells=[e.get(0)];this.cellSelectionMode=!1;this.lastSelectionRange=this.baseCellPosition=null;this.selectionType="cell";g.trigger("aloha-table-selection-changed")}else d.alert({title:c.t("Table"),
text:c.t("table.mergeCells.notRectangular")})}};q.prototype.splitCells=function(){var a=this,c=this.selectedCells;0<c.length&&(b(c).each(function(){n.splitCell(this,function(){return a.table.newActiveCell().obj})}),this.cellSelectionMode=!1,this.lastSelectionRange=this.baseCellPosition=null,this.selectionType="cell",g.trigger("aloha-table-selection-changed"))};q.prototype.cellsAreMergeable=function(){var a=this.selectedCells;if(2>a.length)return!1;var c=function(c){return-1!=b.inArray(c.cell,a)},
m=n.makeGrid(this.table.getRows()),d=n.makeContour(m,c);return f(m,d,c)?!0:!1};q.prototype.cellsAreSplitable=function(){var a=0;return 0<this.selectedCells.length?(b(this.selectedCells).each(function(){var b=n.colspan(this),c=n.rowspan(this);(1<b||1<c)&&a++}),0<a?!0:!1):!1};return q});define("table/table","aloha jquery ui/scopes ui/dialog i18n!table/nls/i18n table/table-cell table/table-selection table/table-plugin-utils".split(" "),function(g,b,n,l,d,c,k,f){function q(a,c,e,m){for(var f,d=!1,k=0;k<
e.length;k++)m.showItem(e[k].name);m.setActiveItem();for(k=0;k<c.length;k++)if(b(a[0]).hasClass(c[k].cssClass)){d=!0;f=c[k].name;break}b(a).each(function(a){b(this).hasClass(f)||(d=!1)});d&&m.setActiveItem(f)}function a(a,b){var c=-1,e=null;"before"===a?e=b.selectedCells[0]:"after"===a&&(e=b.selectedCells[b.selectedCells.length-1]);e&&1==e.nodeType&&(c=e.parentNode.rowIndex);return c}var e=window.GENTICS,m=function(a,c){this.obj=b(a);var m,d,l=this.getRows(),g=l.length,q,n=0,p=[g],s;for(m=0;m<g;m++){d=
b(l[m]);d=d.children("td, th");q=d.length;q=f.cellIndexToGridColumn(l,m,q-1)+1;s=parseInt(d.last().attr("colspan"),10);0==s||isNaN(s)||(1==s&&d.last().removeAttr("colspan"),q+=s-1);rowSpan=parseInt(d.last().attr("rowspan"),10);if(1<rowSpan)for(d=1;d<rowSpan-1;d++)p[m+d]=1<s?p[m+d]+s:p[m+d]+1;p[m]+=q;p[m]>n&&(n=p[m])}for(m=0;m<g;m++)d=n-p[m],0<d&&b(l[m]).append(Array(d+1).join("<td></td>"));this.obj.attr("id")||this.obj.attr("id",e.Utils.guid());this.tablePlugin=c;this.selection=new k(this);this.refresh()};
b.extend(m.prototype,{obj:void 0,tableWrapper:void 0,cells:void 0,numRows:void 0,numCols:void 0,isActive:!1,hasFocus:!1,parentEditable:void 0,mousedown:!1,clickedColumnId:-1,clickedRowId:-1,columnsToSelect:[],rowsToSelect:[],fmPluginId:void 0});m.prototype.refresh=function(){this.numCols=this.countVirtualCols();var a=this.getRows();this.numRows=a.length;this.cells=[];for(var c=0;c<a.length;c++)for(var e=b(a[c]).children(),m=0;m<e.length;m++)this.newCell(e[m])};m.prototype.countVirtualCols=function(){var a=
this.obj.children().children("tr:first-child").children();return a.length-a.filter("."+this.get("classLeftUpperCorner")).length};m.prototype.get=function(a){return this.tablePlugin.get(a)};m.prototype.set=function(a,b){this.tablePlugin.set(a,b)};m.prototype.activate=function(){if(!this.isActive){var a=this,c;this.obj.addClass(this.get("className"));this.obj.contentEditable(!1);""==this.obj.attr("id")&&this.obj.attr("id",e.Utils.guid());this.selection.selectionType=void 0;c=this.obj.children("tbody");
0===c.length&&(c=this.obj);c.bind("keydown",function(b){b.ctrlKey||b.shiftKey||0<a.selection.selectedCells.length&&0<a.selection.selectedCells[0].length&&a.selection.selectedCells[0][0].firstChild.focus()});c.delegate("td","mousemove",function(c){var e=b(this);if(!b(this).hasClass("aloha-table-selectrow")&&!b(this).closest("tr").hasClass("aloha-table-selectcolumn")){var m=a.tablePlugin.rowResize;if(a.tablePlugin.colResize&&3>c.pageX-e.offset().left)return e.css("cursor","col-resize"),a.attachColumnResize(e);
if(m&&3>c.pageY-e.offset().top)return e.css("cursor","row-resize"),a.attachRowResize(e);m&&(m=e.closest("tr"),0<m.next("tr").length?m=!1:(c=c.pageY-(m.offset().top+m.outerHeight()),m=-3<c&&3>c));if(m)return e.css("cursor","row-resize"),a.attachRowResize(e,!0);e.css("cursor","default");return a.detachRowColResize(e)}});c.bind("mousemove",function(c){var e=b(this).closest("table"),m;if(m=a.tablePlugin.tableResize)c=c.pageX-(e.offset().left+e.outerWidth()),m=-5<c&&5>c;if(m)return a.attachTableResizeWidth(e)});
c.bind("mousedown",function(b){a.hasFocus||a.focus();b.stopPropagation();b.preventDefault();return!1});c=b('<div class="'+this.get("classTableWrapper")+'" data-block-skip-scope="true"></div>');this.obj.wrap(c);c=this.obj.parent();c.alohaBlock&&c.alohaBlock();c=this.obj.parents("."+this.get("classTableWrapper"));c.get(0).onresizestart=function(a){return!1};c.get(0).oncontrolselect=function(a){return!1};c.get(0).ondragstart=function(a){return!1};c.get(0).onmovestart=function(a){return!1};this.tableWrapper=
this.obj.parents("."+this.get("classTableWrapper")).get(0);b(this.cells).each(function(){this.activate()});this.attachSelectionColumn();this.attachSelectionRow();this.makeCaptionEditable();this.checkWai();this.isActive=!0;g.trigger("aloha-table-activated")}};m.prototype.makeCaptionEditable=function(){var a=this.obj.find("caption").eq(0);a&&this.tablePlugin.makeCaptionEditable(a)};m.prototype.checkWai=function(){var a=this.wai;a&&(a.removeClass(this.get("waiGreen")),a.removeClass(this.get("waiRed")),
""!=b.trim(this.obj[0].summary)?a.addClass(this.get("waiGreen")):a.addClass(this.get("waiRed")))};m.prototype.attachSelectionColumn=function(){var a=b("<td>"),c,e,m,f;a.html("\u00a0");m=this.obj.context.rows;for(f=0;f<m.length;f++)e=b(m[f]),c=a.clone(),c.addClass(this.get("classSelectionColumn")),c.css("width",this.get("selectionArea")+"px"),e.prepend(c),this.attachRowSelectionEventsToCell(c)};m.prototype.attachRowSelectionEventsToCell=function(a){var b=this;a.unbind("mousedown");a.unbind("mouseover");
a.get(0).onselectstart=function(){return!1};a.bind("mousedown",function(a){return b.rowSelectionMouseDown(a)});a.bind("mouseover",function(a){if(b.mousedown)return b.rowSelectionMouseOver(a)})};m.prototype.rowSelectionMouseDown=function(a){this.focus();0==this.selection.selectedCells.length&&(this.rowsToSelect=[]);this.clickedRowId=a.currentTarget.parentNode.rowIndex;if(a.metaKey){var c=b.inArray(this.clickedRowId,this.rowsToSelect);0<=c?this.rowsToSelect.splice(c,1):this.rowsToSelect.push(this.clickedRowId)}else if(a.shiftKey){this.rowsToSelect.sort(function(a,
b){return a-b});var e=this.rowsToSelect[0],c=this.clickedRowId;e>c&&(e=c,c=this.rowsToSelect[0]);for(this.rowsToSelect=[];e<=c;e++)this.rowsToSelect.push(e)}else this.rowsToSelect=[this.clickedRowId];this.selectRows();a.preventDefault();a.stopPropagation();this.tablePlugin.summary.focus();return!1};m.prototype.rowSelectionMouseOver=function(a){var c=a.currentTarget.parentNode.rowIndex,e;if(this.mousedown&&0<=this.clickedRowId){b.inArray(c,this.rowsToSelect);e=c<this.clickedRowId?c:this.clickedRowId;
c=c<this.clickedRowId?this.clickedRowId:c;for(this.rowsToSelect=[];e<=c;e++)this.rowsToSelect.push(e);this.selectRows();a.preventDefault();a.stopPropagation();return!1}};m.prototype.attachSelectionRow=function(){var a=this,c=b("<td>");c.html("\u00a0");for(var e=0,m=0;m<this.obj.context.rows.length;m++){for(var d=0,k=0;k<this.obj.context.rows[m].cells.length;k++)var l=f.colspan(this.obj.context.rows[m].cells[k]),d=d+l;e<d&&(e=d)}d=b("<tr>");d.addClass(this.get("classSelectionRow"));d.css("height",
this.get("selectionArea")+"px");for(m=0;m<e;m++)k=c.clone(),0<m?this.attachColumnSelectEventsToCell(k):(k=b("<td>").clone(),k.addClass(this.get("classLeftUpperCorner")),this.wai=b("<div/>").width(25).height(12).click(function(b){a.focus();a.selection.selectAll();a.tablePlugin.activeTable.selection.selectionType="cell";a.tablePlugin.updateFloatingMenuScope();a._removeCursorSelection();a.tablePlugin.settings.summaryinsidebar&&(a.tablePlugin.sidebar.open(),a.tablePlugin.sidebarPanel.activate(a.obj),
a.tablePlugin.sidebar.correctHeight());try{a.tablePlugin.summary.focus(),b.stopPropagation(),b.preventDefault()}catch(c){}return!1}),k.append(this.wai)),d.append(k);b(document).bind("mouseup",function(b){a.columnSelectionMouseUp(b)});this.obj.find("tr:first").before(d)};m.prototype.attachColumnSelectEventsToCell=function(a){var b=this;a.unbind("mousedown");a.unbind("mouseover");a.get(0).onselectstart=function(){return!1};a.bind("mousedown",function(a){b.columnSelectionMouseDown(a)});a.bind("mouseover",
function(a){b.columnSelectionMouseOver(a)})};m.prototype.columnSelectionMouseDown=function(a){this.focus();0==this.selection.selectedCells.length&&(this.columnsToSelect=[]);this.clickedColumnId=b(a.currentTarget.parentNode).children().index(a.currentTarget);if(a.metaKey){var c=b.inArray(this.clickedColumnId,this.columnsToSelect);0<=c?this.columnsToSelect.splice(c,1):this.columnsToSelect.push(this.clickedColumnId)}else if(a.shiftKey){this.columnsToSelect.sort(function(a,b){return a-b});var e=this.columnsToSelect[0],
c=this.clickedColumnId;e>c&&(e=c,c=this.columnsToSelect[0]);for(this.columnsToSelect=[];e<=c;e++)this.columnsToSelect.push(e)}else this.columnsToSelect=[this.clickedColumnId];this.selectColumns();a.preventDefault();a.stopPropagation();return!1};m.prototype.columnSelectionMouseOver=function(a){var b=a.currentTarget.cellIndex;a=[];var c;if(this.mouseDownColIdx){c=b<this.mouseDownColIdx?b:this.mouseDownColIdx;for(b=b<this.mouseDownColIdx?this.mouseDownColIdx:b;c<=b;c++)a.push(c);this.selectColumns(a)}};
m.prototype.columnSelectionMouseUp=function(a){this.mouseDownColIdx=!1};m.prototype.deleteRows=function(){var a=[],c={},e=this;if(0!==this.selection.selectedCells.length){for(var m=0;m<this.selection.selectedCells.length;m++)c[this.selection.selectedCells[m].parentNode.rowIndex]=!0;for(rowId in c)a.push(rowId);c=!1;a.length==this.numRows&&(c=!0);if(c){var k=this;l.confirm({title:d.t("Table"),text:d.t("deletetable.confirm"),yes:function(){k.deleteTable()}})}else{a.sort(function(a,b){return a-b});var g=
a[0];g>this.numRows-a.length&&g--;var q=this.getRows();b.each(a,function(a,b){for(var c=q[b],m=0;m<c.cells.length;m++)f.splitCell(c.cells[m],function(){return e.newActiveCell().obj})});var n=f.makeGrid(q);b.each(a,function(a,c){for(var e=n[c],m=0;m<e.length;){var d=e[m],k=f.rowspan(d.cell);1<k&&b(d.cell).attr("rowspan",k-1);m+=d.colspan}b(q[c]).remove()});this.numRows-=a.length;window.setTimeout(function(){b(q[1].cells[g+1]).focus()},5);this.selection.unselectCells()}}};m.prototype.deleteColumns=
function(){var a=[],c=this.getRows(),e=this,m,k=f.makeGrid(c);if(this.selection.selectedColumnIdxs.length==k[0].length-1)l.confirm({title:d.t("Table"),text:d.t("deletetable.confirm"),yes:function(){e.deleteTable()}});else{a.sort(function(a,b){return a-b});for(var g=this.selection.selectedColumnIdxs.sort(function(a,b){return b-a}),q=0;q<g.length;q++){for(var n=g[q],p=0;p<c.length;p++)if(m=k[p][n]){if(0===m.spannedX){if(1<m.colspan){var s=this.newActiveCell().obj;b(m.cell).after(s);s.attr("rowspan",
m.rowspan);s.attr("colspan",m.colspan-1)}b(m.cell).remove()}else b(m.cell).attr("colspan",m.colspan-1);p+=m.rowspan-1}k=f.makeGrid(c)}this.numCols-=a.length;window.setTimeout(function(){b(c[1].cells[1]).focus()},5);this.selection.unselectCells()}};m.prototype.deleteTable=function(){for(var a=-1,b=0;b<this.tablePlugin.TableRegistry.length;b++)if(this.tablePlugin.TableRegistry[b].obj.attr("id")==this.obj.attr("id")){a=b;break}0<=a&&(this.deactivate(),this.selection.selectionType=void 0,this.tablePlugin.TableRegistry.splice(b,
1),a=g.Selection.rangeObject,a.endContainer=this.obj.get(0).parentNode,a.startContainer=a.endContainer,a.endOffset=e.Utils.Dom.getIndexInParent(this.obj.get(0)),a.startOffset=a.endOffset,a.clearCaches(),this.obj.remove(),this.parentEditable.obj.focus(),a.correctRange(),a.select())};m.prototype.addRowBeforeSelection=function(b){b=a("before",this.selection);-1!==b&&this.addRow(b)};m.prototype.addRowAfterSelection=function(){var b=a("after",this.selection);-1!==b&&this.addRow(b+1)};m.prototype.addRow=
function(a){this.countVirtualCols();for(var c=this.obj.children().children("tr"),e=0;1>e;e++){var m=b("<tr>"),d=b("<td>");d.addClass(this.get("classSelectionColumn"));this.attachRowSelectionEventsToCell(d);m.append(d);d=f.makeGrid(c);if(a>=d.length)for(var k=1;k<d[0].length;k++)m.append(this.newActiveCell().obj);else for(k=1;k<d[a].length;){var l=d[a][k];if(f.containsDomCell(l))for(var g=l.colspan;g--;)m.append(this.newActiveCell().obj);else b(l.cell).attr("rowspan",l.rowspan+1);k+=l.colspan}a>=c.length?
c.eq(c.length-1).after(m):c.eq(a).before(m)}this.numRows+=1};m.prototype.addColumnsRight=function(){this.addColumns("right")};m.prototype.addColumnsLeft=function(){this.addColumns("left")};m.prototype.addColumns=function(a){var c=b("<td>"),e=this.getRows(),m,k;m=this.selection.selectedColumnIdxs;if(0!==m.length)if(m.sort(function(a,b){return a-b}),f.isConsecutive(m)){if("left"===a){k=m[0];for(var g=0;g<this.selection.selectedColumnIdxs.length;g++)this.selection.selectedColumnIdxs[g]+=1}else k=m[m.length-
1];for(var q=f.makeGrid(e),g=0;g<e.length;g++){m=c.clone();m.html("\u00a0");0==g?this.attachColumnSelectEventsToCell(m):(cellObj=this.newActiveCell(m.get(0)),m=cellObj.obj);var n=f.leftDomCell(q,g,k);null==n?b(e[g]).prepend(m):"left"===a&&f.containsDomCell(q[g][k])?b(n).before(m):b(n).after(m);this.numCols++}}else l.alert({title:d.t("Table"),text:d.t("table.addColumns.nonConsecutive")})};m.prototype.focus=function(){this.hasFocus||(this.parentEditable.isActive||this.parentEditable.obj.focus(),this.tablePlugin.setFocusedTable(this))};
m.prototype.focusOut=function(){this.hasFocus&&(this.tablePlugin.setFocusedTable(void 0),this.selection.selectionType=void 0)};m.prototype._removeCursorSelection=function(){var a=g.getSelection();a&&a._nativeSelection&&0!=a._nativeSelection._ranges.length&&(a=a.getRangeAt(0),null!=a.startContainer&&0===b(a.startContainer).closest("table").length&&0!==this.selection.selectedCells.length&&(a=c.getContainer(this.selection.selectedCells[0]),b(a).focus()))};m.prototype.selectColumns=function(a){a=a?a:
this.columnsToSelect;n.setScope(this.tablePlugin.name+".column");this.selection.selectColumns(a);this.tablePlugin._columnheaderButton.setState(this.selection.isHeader());q(this.selection.selectedCells,this.tablePlugin.columnConfig,this.tablePlugin.columnMSItems,this.tablePlugin.columnMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();this.selection.notifyCellsSelected();this._removeCursorSelection()};m.prototype.selectRows=function(){n.setScope(this.tablePlugin.name+".row");this.selection.selectRows(this.rowsToSelect);
this.tablePlugin._rowheaderButton.setState(this.selection.isHeader());q(this.selection.selectedCells,this.tablePlugin.rowConfig,this.tablePlugin.rowMSItems,this.tablePlugin.rowMSButton);this.obj.find("div.aloha-ui-table-cell-editable").blur();this.selection.notifyCellsSelected();this._removeCursorSelection()};m.prototype.deactivate=function(){var a=this.obj.parent();a.mahaloBlock&&a.mahaloBlock();this.obj.removeClass(this.get("className"));""==b.trim(this.obj.attr("class"))&&this.obj.removeAttr("class");
this.obj.removeAttr("contenteditable");this.obj.parents("."+this.get("classTableWrapper")).length&&this.obj.unwrap();this.obj.find("tr."+this.get("classSelectionRow")+":first").remove();var c=this;b.each(this.obj.context.rows,function(){b(this).children("td."+c.get("classSelectionColumn")).remove()});this.obj.find("td, th").removeClass(this.get("classCellSelected"));this.obj.find("td, th").removeClass("aloha-table-cell_active");this.obj.find("td, th").css("cursor","");this.obj.unbind();this.obj.children("tbody").unbind();
for(a=0;a<this.cells.length;a++)this.cells[a].deactivate();this.obj.find("caption div").each(function(){b(this).contents().unwrap()});this.isActive=!1};m.prototype.attachColumnResize=function(a){var c=this;c.detachRowColResize(a);var e=a.closest("tbody").children("tr"),m=a.closest("tr"),d=f.cellIndexToGridColumn(e,e.index(m),m.children().index(a)),k=function(a){var c,m;f.walkCells(e,function(k,l,g,q,v){k=b(b(e[k]).children()[l]);if(k.hasClass("aloha-table-selectrow")||k.closest("tr").hasClass("aloha-table-selectcolumn")||
1<q)return!0;g===d?(m||(m=k.width()-a),f.resizeCellWidth(k,m)):g===d-1&&(c||(c=k.width()+a),f.resizeCellWidth(k,c));return!0})};a.bind("mousedown.resize",function(){var m=b("<div></div>");m.css({height:b(a).closest("tbody").innerHeight(),width:b(a).outerWidth()-b(a).innerWidth(),top:b(a).closest("tbody").offset().top,left:b(a).offset().left,position:"absolute","background-color":"#80B5F2"});b("body").append(m);f.getCellResizeBoundaries(d,e,function(e,f){c.selection.resizeMode=!0;b("body").bind("mousemove.dnd_col_resize",
function(a){a.pageX>f&&a.pageX<e&&m.css("left",a.pageX)});b("body").bind("mouseup.dnd_col_resize",function(d){var l=0;d.pageX<f?l=f-a.offset().left:d.pageX>f&&d.pageX<e?l=d.pageX-a.offset().left:d.pageX>e&&(l=e-a.offset().left);0!==l&&k(l);b("body").unbind("mousemove.dnd_col_resize");b("body").unbind("mouseup.dnd_col_resize");c.selection.resizeMode=!1;m.remove()})})})};m.prototype.attachRowResize=function(a,c){var e=this;e.detachRowColResize(a);a.bind("mousedown.resize",function(){var m=b("<div></div>");
m.css({width:a.closest("tbody").innerWidth(),height:a.outerHeight()-a.innerHeight(),top:c?a.offset().top+a.outerHeight():a.offset().top,left:a.closest("tbody").offset().left,position:"absolute","background-color":"#80B5F2"});b("body").append(m);e.selection.resizeMode=!0;b("body").bind("mousemove.dnd_row_resize",function(b){var e=b.pageY,f;f=c?a.closest("tr").offset().top:a.closest("tr").prev("tr").offset().top;e>f&&m.css("top",b.pageY)});b("body").bind("mouseup.dnd_row_resize",function(f){var d=0,
d=c?f.pageY-(a.offset().top+a.outerHeight()):f.pageY-a.offset().top;f=c?a.closest("tr"):a.closest("tr").prev("tr");d=f.height()+d;0>d&&(d=1);f.css("height",d);b("body").unbind("mousemove.dnd_row_resize");b("body").unbind("mouseup.dnd_row_resize");e.selection.resizeMode=!1;m.remove()})})};m.prototype.attachTableResizeWidth=function(a){var c=this,e=a.closest(".aloha-table-wrapper"),m=a.find("tr:not(.aloha-table-selectcolumn) td:last-child"),d;b.each(m,function(){if(!b(this).attr("colspan")||2>b(this).attr("colspan"))return d=
b(this),!1});m.css("cursor","col-resize");var k=function(c){var e=a.find("tr"),m=d.closest("tr"),k=f.cellIndexToGridColumn(e,e.index(m),m.children().index(d)),l=c-f.getCellBorder(d)-f.getCellPadding(d);f.walkCells(e,function(a,c,m,d,g){a=b(b(e[a]).children()[c]);if(a.hasClass("aloha-table-selectrow")||a.closest("tr").hasClass("aloha-table-selectcolumn")||1<d)return!0;m===k?f.resizeCellWidth(a,l):f.resizeCellWidth(a,a.width());return!0})};m.bind("mousedown.resize",function(){var l=b("<div></div>");
l.css({height:a.children("tbody").innerHeight(),width:d.outerWidth()-d.innerWidth(),top:a.find("tbody").offset().top,left:a.offset().left+a.outerWidth(),position:"absolute","background-color":"#80B5F2"});b("body").append(l);var g=e.offset().left+e.width(),q=d.offset().left+(d.innerWidth()-d.width())+f.getMinColWidth(d);c.selection.resizeMode=!0;b("body").bind("mousemove.dnd_col_resize",function(a){a.pageX>q&&a.pageX<g&&l.css("left",a.pageX)});b("body").bind("mouseup.dnd_col_resize",function(a){var e=
0;a.pageX<=q?e=q-d.offset().left:a.pageX>q&&a.pageX<g?e=a.pageX-d.offset().left:a.pageX>g&&(e=g-d.offset().left);k(e);b("body").unbind("mousemove.dnd_col_resize");b("body").unbind("mouseup.dnd_col_resize");m.unbind("mousedown.resize");m.css("cursor","default");c.selection.resizeMode=!1;l.remove()})})};m.prototype.detachRowColResize=function(a){return a.unbind("mousedown.resize")};m.prototype.toString=function(){return"Table"};m.prototype.newCell=function(a){return new c(a,this)};m.prototype.newActiveCell=
function(a){a=new c(a,this);a.activate();return a};m.prototype.getRows=function(){var a=this.obj.get(0).rows;return b.makeArray(a)};return m});define("table/table-plugin","aloha jquery aloha/plugin aloha/pluginmanager ui/ui ui/scopes ui/button ui/toggleButton ui/dialog ui/port-helper-attribute-field ui/port-helper-multi-split i18n!table/nls/i18n i18n!aloha/nls/i18n table/table-create-layer table/table table/table-plugin-utils util/dom aloha/console".split(" "),function(g,b,n,l,d,c,k,f,q,a,e,m,v,x,
z,A,y,p){function s(a){var b=K(a),c;if(c=G.Utils.Dom.isEditable(a))if(c=!(0<b.parents(".aloha-editable table").length)){a:{var e,m=b.parents();for(c=0;c<m.length;c++){e=m.eq(c);if(e.is(".aloha-editable")){c=!1;break a}if(e.is(".aloha-block")){c=!0;break a}}c=!1}c=!c}return c?(c=new z(a,u),a=K(y.getEditingHostOf(a)),c.parentEditable=g.getEditableById(a.attr("id")),u.TableRegistry.push(c),a=b.is("table")?"table":"table table",b.find(a).length&&p.warn("Table Plugin","Nested tables found. They will not be initialized."),
g.activeEditable===c.parentEditable&&c.activate(),c):null}function r(a,c){var e,m,f=a.selection.isHeader(),d;for(e=0;e<a.selection.selectedCells.length;e++){d=a.selection.selectedCells[e];for(m=0;m<a.cells.length;m++)if(d===a.cells[m].obj[0]){cell=a.cells[m];break}m=f?g.Markup.transformDomObject(d,"td").removeAttr("scope").get(0):g.Markup.transformDomObject(d,"th").attr("scope",c).get(0);null!=cell&&(cell.obj[0]=m,cell.deactivate(),cell.activate());b(a.selection.selectedCells[e]).bind("mousedown",
function(a){var c=b(this).children("div").eq(0);window.setTimeout(function(){c.trigger("focus")},1)})}}function t(a,c,e){for(var m=!0,f=0;f<e.length;f++)if(0>b(e[f]).attr("class").indexOf(c)){m=!1;break}if(m)for(f=0;f<e.length;f++)b(e[f]).removeClass(c);else for(f=0;f<e.length;f++)for(b(e[f]).addClass(c),m=0;m<a.length;m++)a[m].cssClass!=c&&b(e[f]).removeClass(a[m].cssClass)}function N(){var a=[],c=S;b.each(arguments,function(){a.push("."+(""==this?c:c+"-"+this))});return b.trim(a.join(" "))}function J(){var a=
[],c=S;b.each(arguments,function(){a.push(""==this?c:c+"-"+this)});return b.trim(a.join(" "))}function M(a,c){var e=a.endContainer,m=a.startContainer,f=3==e.nodeType?e.length:e.childNodes.length;3==m.nodeType&&"P"==m.parentNode.tagName&&1==m.parentNode.childNodes.length&&/^(\s|%A0)$/.test(escape(m.data))&&(m.data="",a.startOffset=0,e==m&&(a.endOffset=0));G.Utils.Dom.allowsNesting(3==m.nodeType?m.parentNode:m,c)||(0==a.startOffset&&b(3==m.nodeType?m.parentNode:m).addClass("aloha-table-cleanme"),a.endOffset==
f&&b(3==e.nodeType?e.parentNode:e).addClass("aloha-table-cleanme"))}function E(){for(var a=b(".aloha-table-cleanme").removeClass("aloha-table-cleanme"),c=0;c<a.length;c++)""!=b.trim(b(a[c]).html())||G.Utils.Dom.isEditingHost(a[c])||b(a[c]).remove()}var K=b,G=window.GENTICS,u=new n("table");u.createLayer=void 0;u.config=["table"];u.TableRegistry=[];u.activeTable=void 0;u.parameters={className:"aloha-table",classSelectionRow:"aloha-table-selectcolumn",classSelectionColumn:"aloha-table-selectrow",classLeftUpperCorner:"aloha-table-leftuppercorner",
classTableWrapper:"aloha-table-wrapper",classCellSelected:"aloha-cell-selected",waiRed:"aloha-wai-red",waiGreen:"aloha-wai-green",selectionArea:10};u.checkConfig=function(a){if("object"==typeof a&&a.length){for(var b=[],c=0;c<a.length;c++)a[c]&&b.push({name:a[c].name,text:a[c].text?a[c].text:a[c].name,tooltip:a[c].tooltip?a[c].tooltip:a[c].text,iconClass:a[c].iconClass?a[c].iconClass:"aloha-icon-"+a[c].name,cssClass:a[c].cssClass?a[c].cssClass:a[c].name});a=b}else a=[];return a};u.init=function(){var a=
this,c={};this.tableConfig=this.checkConfig(this.tableConfig||this.settings.tableConfig);this.columnConfig=this.checkConfig(this.columnConfig||this.settings.columnConfig);this.rowConfig=this.checkConfig(this.rowConfig||this.settings.rowConfig);this.cellConfig=this.checkConfig(this.cellConfig||this.settings.cellConfig);this.tableResize=void 0===this.settings.tableResize?!1:this.settings.tableResize;this.colResize=void 0===this.settings.colResize?!1:this.settings.colResize;this.rowResize=void 0===this.settings.rowResize?
!1:this.settings.rowResize;b.browser.msie&&8>parseInt(b.browser.version,10)&&(this.rowResize=this.colResize=this.tableResize=!1);this.createLayer=new x(this);g.bind("aloha-editable-created",function(e,m){var f=a.getEditableConfig(m.obj);c[m.getId()]=-1!==b.inArray("table",f);m.obj.bind("mousedown",function(a){u.setFocusedTable(void 0)});m.obj.find("table").each(function(a,b){s(b)})});this.initTableButtons();g.bind("aloha-table-selection-changed",function(){"undefined"!==typeof u.activeTable&&u.activeTable.selection&&
(u.updateFloatingMenuScope(),u.activeTable.selection.cellsAreSplitable()?(a._splitcellsButton.enable(!0),a._splitcellsRowButton.enable(!0),a._splitcellsColumnButton.enable(!0)):(a._splitcellsButton.enable(!1),a._splitcellsRowButton.enable(!1),a._splitcellsColumnButton.enable(!1)),u.activeTable.selection.cellsAreMergeable()?(a._mergecellsButton.enable(!0),a._mergecellsRowButton.enable(!0),a._mergecellsColumnButton.enable(!0)):(a._mergecellsButton.enable(!1),a._mergecellsRowButton.enable(!1),a._mergecellsColumnButton.enable(!1)))});
g.bind("aloha-selection-changed",function(b,e){e.startContainer&&g.activeEditable&&(c[g.activeEditable.getId()]&&g.Selection.mayInsertTag("table")?a._createTableButton.show():a._createTableButton.hide(),a.activeTable&&(e.findMarkup(function(){return"TABLE"===this.nodeName},g.activeEditable.obj)?(u.updateFloatingMenuScope(),u.setActiveCellStyle()):(a.activeTable.selection.cellSelectionMode=!1,a.activeTable.selection.baseCellPosition=null,a.activeTable.selection.lastSelectionRange=null,a.activeTable.focusOut())))});
g.bind("aloha-editable-activated",function(c,e){a._splitcellsButton.enable(!1);a._mergecellsButton.enable(!1);a._splitcellsRowButton.enable(!1);a._mergecellsRowButton.enable(!1);a._splitcellsColumnButton.enable(!1);a._mergecellsColumnButton.enable(!1);e.editable.obj.find("table").each(function(){for(var a=u.TableRegistry,c=0;c<a.length;c++)if(a[c].obj.attr("id")===b(this).attr("id"))return a[c].activate(),!0;s(this)})});g.bind("aloha-editable-deactivated",function(){u.activeTable&&u.activeTable.selection.unselectCells();
u.setFocusedTable(void 0);for(var a=u.TableRegistry,b=0;b<a.length;b++)a[b].deactivate()});g.bind("aloha-smart-content-changed",function(){g.activeEditable&&g.activeEditable.obj.find("table").each(function(){-1==u.indexOfTableInRegistry(this)&&s(this)&&(this.id=G.Utils.guid())})});this.settings.summaryinsidebar&&g.bind("aloha-plugins-loaded",function(){a.initSidebar(g.Sidebar.right.show())})};var S="aloha-table";u.initSidebar=function(a){var c=this;c.sidebar=a;c.sidebarPanel=a.addPanel({id:J("sidebar-panel"),
title:m.t("table.sidebar.title"),content:"",expanded:!0,activeOn:"table",onInit:function(){var a=this;this.setContent('<label class="'+J("label")+'" for="'+J("textarea")+'" >'+m.t("table.label.target")+'</label><textarea id="'+J("textarea")+'" class="'+J("textarea")+'" />');b(N("textarea")).live("keyup",function(){b(a.effective).attr("summary",b(N("textarea")).val());var e=b('div[class*="wai"]',"table#"+b(a.effective).attr("id"));e.removeClass(c.get("waiGreen"));e.removeClass(c.get("waiRed"));""!=
b(N("textarea")).val().trim()?e.addClass(c.get("waiGreen")):e.addClass(c.get("waiRed"))})},onActivate:function(a){this.effective=a;b(N("textarea")).val(b(this.effective).attr("summary"))}});a.show()};u.isEditableTable=function(a){return G.Utils.Dom.isEditable(a)};u.indexOfTableInRegistry=function(a){for(var b=this.TableRegistry,c=0;c<b.length;c++)if(b[c].obj[0].id==a.id)return c;return-1};u.getTableFromRegistry=function(a){a=this.indexOfTableInRegistry(a);return-1<a?this.TableRegistry[a]:null};u.isSelectionInTable=
function(){var a=g.Selection.getRangeObject(),a=b(a.commonAncestorContainer);return 0==a.length?!1:a.parents(".aloha-editable table").length?!0:!1};u.preventNestedTables=function(){return this.isSelectionInTable()?(q.alert({title:m.t("Table"),text:m.t("table.createTable.nestedTablesNoSupported")}),!0):!1};u.initMergeSplitCellsBtns=function(){this._mergecellsButton=d.adopt("mergecells",k,{tooltip:m.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".cell",click:function(){u.activeTable&&
u.activeTable.selection.mergeCells()}});this._splitcellsButton=d.adopt("splitcells",k,{tooltip:m.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".cell",click:function(){var a;u.activeTable&&(0<u.activeTable.selection.selectedCells.length?u.activeTable.selection.splitCells():(a=u.selectedOrActiveCells(),0<a.length&&(A.splitCell(a,function(){return u.activeTable.newActiveCell().obj}),g.trigger("aloha-table-selection-changed"))))}});this._mergecellsRowButton=d.adopt("mergecellsRow",
k,{tooltip:m.t("button.mergecells.tooltip"),icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".row",click:function(){u.activeTable&&u.activeTable.selection.mergeCells()}});this._splitcellsRowButton=d.adopt("splitcellsRow",k,{tooltip:m.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".row",click:function(){u.activeTable&&u.activeTable.selection.splitCells()}});this._mergecellsColumnButton=d.adopt("mergecellsColumn",k,{tooltip:m.t("button.mergecells.tooltip"),
icon:"aloha-icon aloha-icon-mergecells",scope:this.name+".column",click:function(){u.activeTable&&u.activeTable.selection.mergeCells()}});this._splitcellsColumnButton=d.adopt("splitcellsColumn",k,{tooltip:m.t("button.splitcells.tooltip"),icon:"aloha-icon aloha-icon-splitcells",scope:this.name+".column",click:function(){u.activeTable&&u.activeTable.selection.splitCells()}})};u.initNaturalFitBtn=function(){var a=this;if(this.colResize||this.rowResize)this._tableNaturalFitButton=d.adopt("naturalFit",
k,{tooltip:m.t("button.naturalfit.tooltip"),icon:"aloha-icon aloha-icon-table-naturalfit",scope:this.name+".cell",click:function(){if(a.activeTable){var c=a.activeTable.obj;c.find("td, th").each(function(){b(this).find("div").css("width","");b(this).css("width","")});c.find("tr").each(function(){b(this).css("height","")})}}})};u.initRowsBtns=function(){var a=this;this._addrowbeforeButton=d.adopt("addrowbefore",k,{tooltip:m.t("button.addrowbefore.tooltip"),icon:"aloha-icon aloha-icon-addrowbefore",
scope:this.name+".row",click:function(){a.activeTable&&a.activeTable.addRowBeforeSelection()}});this._addrowafterButton=d.adopt("addrowafter",k,{tooltip:m.t("button.addrowafter.tooltip"),icon:"aloha-icon aloha-icon-addrowafter",scope:this.name+".row",click:function(){a.activeTable&&a.activeTable.addRowAfterSelection()}});this._deleterowsButton=d.adopt("deleterows",k,{tooltip:m.t("button.delrows.tooltip"),icon:"aloha-icon aloha-icon-deleterows",scope:this.name+".row",click:function(){if(a.activeTable){var b=
a.activeTable;q.confirm({title:m.t("Table"),text:m.t("deleterows.confirm"),yes:function(){b.deleteRows()}})}}});this._rowheaderButton=d.adopt("rowheader",f,{tooltip:m.t("button.rowheader.tooltip"),icon:"aloha-icon aloha-icon-rowheader",scope:this.name+".row",click:function(){a.activeTable&&(a.activeTable.refresh(),r(a.activeTable,"column"),a.activeTable.selection.unselectCells(),a.activeTable.selection.selectRows(a.activeTable.selection.selectedRowIdxs))}});this.rowMSItems=[];b.each(this.rowConfig,
function(b,c){a.rowMSItems.push({name:c.name,text:m.t(c.text),tooltip:m.t(c.tooltip),iconClass:"aloha-icon aloha-row-layout "+c.iconClass,click:function(){a.activeTable&&(t(a.rowConfig,c.cssClass,a.activeTable.selection.selectedCells),a.activeTable.selectRows())}})});0<this.rowMSItems.length&&this.rowMSItems.push({name:"removeFormat",text:m.t("button.removeFormat.text"),tooltip:m.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var c=
a.activeTable.selection.selectedCells,e=0;e<c.length;e++)for(var m=0;m<a.rowConfig.length;m++)b(c[e]).removeClass(a.rowConfig[m].cssClass);a.activeTable.selectRows()}}});this.rowMSButton=e({items:this.rowMSItems,name:"formatRow",hideIfEmpty:!0,scope:this.name+".row"})};u.initColumnBtns=function(){var a=this;this._addcolumnleftButton=d.adopt("addcolumnleft",k,{tooltip:m.t("button.addcolleft.tooltip"),icon:"aloha-icon aloha-icon-addcolumnleft",scope:this.name+".column",click:function(){a.activeTable&&
a.activeTable.addColumnsLeft()}});this._addcolumnrightButton=d.adopt("addcolumnright",k,{tooltip:m.t("button.addcolright.tooltip"),icon:"aloha-icon aloha-icon-addcolumnright",scope:this.name+".column",click:function(){a.activeTable&&a.activeTable.addColumnsRight()}});this._deletecolumnsButton=d.adopt("deletecolumns",k,{tooltip:m.t("button.delcols.tooltip"),icon:"aloha-icon aloha-icon-deletecolumns",scope:this.name+".column",click:function(){if(a.activeTable){var b=a.activeTable;q.confirm({title:m.t("Table"),
text:m.t("deletecolumns.confirm"),yes:function(){b.deleteColumns()}})}}});this._columnheaderButton=d.adopt("columnheader",f,{tooltip:m.t("button.columnheader.tooltip"),icon:"aloha-icon aloha-icon-columnheader",scope:this.name+".column",click:function(){a.activeTable&&(a.activeTable.refresh(),r(a.activeTable,"row"),a.activeTable.selection.unselectCells(),a.activeTable.selection.selectColumns(a.activeTable.selection.selectedColumnIdxs))}});this.columnMSItems=[];b.each(this.columnConfig,function(b,c){var e=
{name:c.name,text:m.t(c.text),tooltip:m.t(c.tooltip),iconClass:"aloha-icon aloha-column-layout "+c.iconClass,click:function(b,e,m){a.activeTable&&(t(a.columnConfig,c.cssClass,a.activeTable.selection.selectedCells),a.activeTable.selectColumns())}};a.columnMSItems.push(e)});0<this.columnMSItems.length&&this.columnMSItems.push({name:"removeFormat",text:m.t("button.removeFormat.text"),tooltip:m.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var c=
a.activeTable.selection.selectedCells,e=0;e<c.length;e++)for(var m=0;m<a.columnConfig.length;m++)b(c[e]).removeClass(a.columnConfig[m].cssClass);a.activeTable.selectColumns()}}});this.columnMSButton=e({items:this.columnMSItems,name:"formatColumn",hideIfEmpty:!0,scope:this.name+".column"})};u.initCellBtns=function(){var a=this;this.cellMSItems=[];b.each(this.cellConfig,function(b,c){var e={name:c.name,text:m.t(c.text),tooltip:m.t(c.tooltip),iconClass:"aloha-icon aloha-column-layout "+c.iconClass,click:function(b,
e,m){a.activeTable&&(t(a.cellConfig,c.cssClass,a.selectedOrActiveCells()),a.setActiveCellStyle())}};a.cellMSItems.push(e)});0<this.cellMSItems.length&&this.cellMSItems.push({name:"removeFormat",text:m.t("button.removeFormat.text"),tooltip:m.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(a.activeTable){for(var c=a.selectedOrActiveCells(),e=0;e<c.length;e++)for(var m=0;m<a.cellConfig.length;m++)b(c[e]).removeClass(a.cellConfig[m].cssClass);a.setActiveCellStyle()}}});
this.cellMSButton=e({items:this.cellMSItems,name:"formatCell",hideIfEmpty:!0,scope:this.name+".cell"})};u.initTableButtons=function(){var l=this;c.createScope(this.name+".row","Aloha.continuoustext");c.createScope(this.name+".column","Aloha.continuoustext");c.createScope(this.name+".cell","Aloha.continuoustext");this._createTableButton=d.adopt("createTable",k,{tooltip:m.t("button.createtable.tooltip"),icon:"aloha-icon aloha-icon-createTable",scope:"Aloha.continuoustext",click:function(){u.createDialog(this.element)}});
this.initColumnBtns();this.initRowsBtns();this.initCellBtns();this.initMergeSplitCellsBtns();this.initNaturalFitBtn();this.tableMSItems=[];var q=this.tableConfig;b.each(q,function(a,b){l.tableMSItems.push({name:b.name,text:m.t(b.text),tooltip:m.t(b.tooltip),iconClass:"aloha-icon aloha-table-layout "+b.iconClass,click:function(){if(l.activeTable)if(l.activeTable.obj.hasClass(b.cssClass)){for(a=0;a<q.length;a++)l.activeTable.obj.removeClass(q[a].cssClass);l.tableMSButton.setActiveItem()}else{for(var a=
0;a<q.length;a++)l.activeTable.obj.removeClass(q[a].cssClass);l.activeTable.obj.addClass(b.cssClass);l.tableMSButton.setActiveItem(b.cssClass)}}})});0<this.tableMSItems.length&&this.tableMSItems.push({name:"removeFormat",text:m.t("button.removeFormat.text"),tooltip:m.t("button.removeFormat.tooltip"),cls:"aloha-ui-multisplit-fullwidth",wide:!0,click:function(){if(l.activeTable){for(var a=0;a<q.length;a++)l.activeTable.obj.removeClass(l.tableConfig[a].cssClass);l.tableMSButton.setActiveItem()}}});this.tableMSButton=
e({items:this.tableMSItems,name:"formatTable",hideIfEmpty:!0,scope:this.name+".cell"});this._tableCaptionButton=d.adopt("tableCaption",f,{tooltip:m.t("button.caption.tooltip"),icon:"aloha-icon aloha-icon-table-caption",scope:this.name+".cell",click:function(){if(l.activeTable)if(l.activeTable.obj.children("caption").is("caption"))l.activeTable.obj.children("caption").remove();else{var a=m.t("empty.caption"),c=b("<caption></caption>");l.activeTable.obj.prepend(c);l.makeCaptionEditable(c,a);a=c.find("div").eq(0);
c=a.contents().eq(0);if(0<c.length){var e=new G.Utils.RangeObject;e.startContainer=e.endContainer=c.get(0);e.startOffset=0;e.endOffset=c.text().length;l.activeTable.obj.find("div.aloha-table-cell-editable").blur();a.focus();e.select();g.Selection.updateSelection()}}}});this.summary=a({width:275,name:"tableSummary",noTargetHighlight:!0,scope:this.name+".cell"});this.summary.addListener("keyup",function(a){l.activeTable&&l.activeTable.checkWai()})};u.makeCaptionEditable=function(a,c){var e=a.children("div");
0===e.length?(e=b("<div></div>"),b(e).addClass("aloha-ui"),b(e).addClass("aloha-editable-caption"),0<a.contents().length?e.append(a.contents()):c&&e.text(c),a.append(e)):1<e.length&&(a.children("div:not(:first-child)").each(function(){$this=b(this);e.eq(0).append($this.contents());$this.remove()}),e=e.eq(0));e.contentEditable(!0)};u.createDialog=function(a){this.createLayer.set("target",a);this.createLayer.show()};u.createTable=function(a,c){if(!this.preventNestedTables())if(g.activeEditable&&"undefined"!==
typeof g.activeEditable.obj){for(var e=document.createElement("table"),m=e.id=G.Utils.guid(),f=document.createElement("tbody"),d=0;d<c;d++){for(var k=document.createElement("tr"),l=0;l<a;l++){var q=document.createTextNode("\u00a0"),v=document.createElement("td");v.appendChild(q);k.appendChild(v)}f.appendChild(k)}e.appendChild(f);M(g.Selection.getRangeObject(),e);G.Utils.Dom.insertIntoDOM(b(e),g.Selection.getRangeObject(),g.activeEditable.obj);E();var e=document.getElementById(m),n=s(e);n&&(K.browser.msie?
window.setTimeout(function(){n.cells[0].wrapper.get(0).focus()},20):n.cells[0].wrapper.get(0).focus());n.focus();u.activeTable.selection.selectionType="cell";u.updateFloatingMenuScope()}else this.error("There is no active Editable where the table can be\t\t\t\tinserted!")};u.setFocusedTable=function(a){null==a&&null!=this.activeTable&&this.activeTable.selection.unselectCells();for(var b=0;b<u.TableRegistry.length;b++)u.TableRegistry[b].hasFocus=!1;"undefined"!=typeof a&&(this.summary.setTargetObject(a.obj,
"summary"),a.obj.children("caption").is("caption")&&(this._tableCaptionButton.setState(!0),b=a.obj.children("caption"),this.makeCaptionEditable(b)),a.hasFocus=!0);u.activeTable=a;for(b=0;b<this.tableMSItems.length;b++)this.tableMSButton.showItem(this.tableMSItems[b].name);this.tableMSButton.setActiveItem();if(this.activeTable)for(b=0;b<this.tableConfig.length;b++)this.activeTable.obj.hasClass(this.tableConfig[b].cssClass)&&this.tableMSButton.setActiveItem(this.tableConfig[b].name)};u.error=function(a){g.Log.error(this,
a)};u.debug=function(a){g.Log.debug(this,a)};u.info=function(a){g.Log.info(this,a)};u.log=function(a){g.log("log",this,a)};u.get=function(a){if(this.config[a])return this.config[a];if(this.parameters[a])return this.parameters[a]};u.set=function(a,b){this.config[a]?this.config[a]=b:this.parameters[a]=b};u.makeClean=function(a){var c=this;a.find("table").each(function(){c.getTableFromRegistry(this)&&((new z(this,c)).deactivate(),b(this).attr("id",null))})};u.toString=function(){return this.prefix};
u.updateFloatingMenuScope=function(){null!=u.activeTable&&null!=u.activeTable.selection.selectionType&&c.setScope(u.name+"."+u.activeTable.selection.selectionType)};u.setActiveCellStyle=function(){var a=!1,c;this.cellMSButton.setActiveItem();for(var e=this.selectedOrActiveCells(),m=0;m<this.cellConfig.length;m++)if(b(e[0]).hasClass(this.cellConfig[m].cssClass)){c=this.cellConfig[m].name;a=!0;break}b(e).each(function(e){b(this).hasClass(c)||(a=!1)});a&&this.cellMSButton.setActiveItem(c)};u.selectedOrActiveCells=
function(){var a=this.activeTable.selection.selectedCells;return!a||1>a.length?(a=function(){var a=g.Selection.getRangeObject();return g.activeEditable?a.findMarkup(function(){return"td"===this.nodeName.toLowerCase()},g.activeEditable.obj):null}())?[a]:[]:a};l.register(u);return u});define("format/nls/i18n",{root:{"button.strong.tooltip":"Strong","button.em.tooltip":"Emphasize","button.b.tooltip":"Bold","button.i.tooltip":"Italic","button.u.tooltip":"Underline","button.cite.tooltip":"Cite","button.q.tooltip":"Tooltip",
"button.code.tooltip":"Code","button.abbr.tooltip":"Abbreviation","button.del.tooltip":"Strikethrough","button.s.tooltip":"Strikethrough","button.sub.tooltip":"Subscript","button.sup.tooltip":"Superscript","button.p.tooltip":"Paragraph","button.h1.tooltip":"Heading 1","button.h2.tooltip":"Heading 2","button.h3.tooltip":"Heading 3","button.h4.tooltip":"Heading 4","button.h5.tooltip":"Heading 5","button.h6.tooltip":"Heading 6","button.pre.tooltip":"Preformatted text","button.title.tooltip":"Title",
"button.removeFormat.tooltip":"Remove formatting","button.removeFormat.text":"Remove formatting",GENTICS_button_p:"GENTICS_button_p",GENTICS_button_h1:"GENTICS_button_h1",GENTICS_button_h2:"GENTICS_button_h2",GENTICS_button_h3:"GENTICS_button_h3",GENTICS_button_h4:"GENTICS_button_h4",GENTICS_button_h5:"GENTICS_button_h5",GENTICS_button_h6:"GENTICS_button_h6",GENTICS_button_pre:"GENTICS_button_pre",GENTICS_button_title:"GENTICS_button_title",formatBold:"Ctrl+b",formatItalic:"Ctrl+i",formatUnderline:"Ctrl+u",
formatParagraph:"Alt+Ctrl+0",formatH1:"Alt+Ctrl+1",formatH2:"Alt+Ctrl+2",formatH3:"Alt+Ctrl+3",formatH4:"Alt+Ctrl+4",formatH5:"Alt+Ctrl+5",formatH6:"Alt+Ctrl+6",formatPre:"Alt+Ctrl+P",formatDel:"Ctrl+\\",formatSub:"Ctrl+,",formatSup:"Ctrl+.","floatingmenu.tab.format":"Format","format.class.legend":"CSS class","format.class.none":"none"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("format/format-plugin","aloha aloha/plugin aloha/state-override jquery util/arrays util/maps ui/ui ui/toggleButton ui/port-helper-multi-split PubSub i18n!format/nls/i18n i18n!aloha/nls/i18n aloha/selection".split(" "),
function(g,b,n,l,d,c,k,f,q,a,e,m){function v(a){var b=l(".aloha-cell-selected");if(0<b.length){var c=0;b.each(function(){var b=l(this).find("div"),e=b.find(a);0<e.length&&(e.contents().unwrap(),c++);b.contents().wrap("<"+a+"></"+a+">")});c===b.length&&b.find(a).contents().unwrap();return!0}return!1}function x(a,b){var c=t[b];N.hasOwnProperty(b)&&(c=N[b]);return k.adopt(c,f,{tooltip:e.t("button."+b+".tooltip"),icon:"aloha-icon aloha-icon-"+c,scope:"Aloha.continuoustext",click:function(){v(b)||a.addMarkup(b);
return!1}})}function z(a,b){return{name:b,tooltip:e.t("button."+b+".tooltip"),iconClass:"aloha-icon "+e.t("aloha-large-icon-"+b),markup:l("<"+b+">"),click:function(){var c;v(b)?c=!1:(a.changeMarkup(b),g.activeEditable&&l.browser.mozilla&&g.activeEditable.obj.focus(),g.activeEditable&&g.trigger("aloha-format-block"),c=void 0);return c}}}function A(a,b){return{name:b,text:e.t("button."+b+".text"),tooltip:e.t("button."+b+".tooltip"),wide:!0,cls:"aloha-ui-multisplit-fullwidth",click:function(){a.removeFormat()}}}
function y(a,b){b.select();s(a,g.Selection.getRangeObject())}function p(a,b,c){r.Utils.Dom.addMarkup(b,c);y(a,b)}function s(a,b){var c,e,m,f,d;l.each(a.buttons,function(a,e){var d=!1,k=E[e.markup[0].nodeName]||[e.markup[0].nodeName];for(m=0;m<b.markupEffectiveAtStart.length;m++)for(c=b.markupEffectiveAtStart[m],f=0;f<k.length;f++)g.Selection.standardTextLevelSemanticsComparator(c,l("<"+k[f]+">"))&&(e.handle.setState(!0),d=!0);d||e.handle.setState(!1)});if(0<a.multiSplitItems.length){e=!1;for(m=0;m<
b.markupEffectiveAtStart.length&&!e;m++)for(c=b.markupEffectiveAtStart[m],f=0;f<a.multiSplitItems.length&&!e;f++)d=a.multiSplitItems[f],d.markup&&g.Selection.standardTextLevelSemanticsComparator(c,d.markup)&&(a.multiSplitButton.setActiveItem(d.name),e=!0);e||a.multiSplitButton.setActiveItem(null)}}var r=window.GENTICS,t={b:"bold",strong:"bold",i:"italic",em:"italic",del:"strikethrough",sub:"subscript",sup:"superscript",u:"underline",s:"strikethrough"},N={strong:"strong",em:"emphasis",s:"strikethrough2"},
J={u:!0,em:!0,strong:!0,b:!0,i:!0,cite:!0,q:!0,code:!0,abbr:!0,del:!0,s:!0,sub:!0,sup:!0},M={p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,pre:!0},E={B:["STRONG","B"],I:["EM","I"],STRONG:["STRONG","B"],EM:["EM","I"]};return b.create("format",{config:"b i sub sup p h1 h2 h3 h4 h5 h6 pre removeFormat".split(" "),availableButtons:"u strong del em b i s sub sup p h1 h2 h3 h4 h5 h6 pre removeFormat".split(" "),hotKey:{formatBold:"ctrl+b",formatItalic:"ctrl+i",formatParagraph:"alt+ctrl+0",formatH1:"alt+ctrl+1",
formatH2:"alt+ctrl+2",formatH3:"alt+ctrl+3",formatH4:"alt+ctrl+4",formatH5:"alt+ctrl+5",formatH6:"alt+ctrl+6",formatPre:"ctrl+p",formatDel:"ctrl+d",formatSub:"alt+shift+s",formatSup:"ctrl+shift+s"},init:function(){var a=this;"undefined"!==typeof this.settings.hotKey&&l.extend(!0,this.hotKey,this.settings.hotKey);this.initButtons();g.bind("aloha-plugins-loaded",function(){a.initSidebar(g.Sidebar.right)});g.bind("aloha-editable-activated",function(b,c){a.applyButtonConfig(c.editable.obj);c.editable.obj.bind("keydown.aloha.format",
a.hotKey.formatBold,function(){a.addMarkup("b");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatItalic,function(){a.addMarkup("i");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatParagraph,function(){a.changeMarkup("p");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH1,function(){a.changeMarkup("h1");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH2,function(){a.changeMarkup("h2");return!1});c.editable.obj.bind("keydown.aloha.format",
a.hotKey.formatH3,function(){a.changeMarkup("h3");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH4,function(){a.changeMarkup("h4");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH5,function(){a.changeMarkup("h5");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatH6,function(){a.changeMarkup("h6");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatPre,function(){a.changeMarkup("pre");return!1});c.editable.obj.bind("keydown.aloha.format",
a.hotKey.formatDel,function(){a.addMarkup("del");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSub,function(){a.addMarkup("sub");return!1});c.editable.obj.bind("keydown.aloha.format",a.hotKey.formatSup,function(){a.addMarkup("sup");return!1})});g.bind("aloha-editable-deactivated",function(a,b){b.editable.obj.unbind("keydown.aloha.format")})},applyButtonConfig:function(a){a=this.getEditableConfig(a);var b,c;if("object"===typeof a){var e=[];l.each(a,function(a,b){"number"===typeof a&&
"string"===typeof b||e.push(a)});0<e.length&&(a=e)}this.formatOptions=a;for(b in this.buttons)this.buttons.hasOwnProperty(b)&&(-1!==l.inArray(b,a)?this.buttons[b].handle.show():this.buttons[b].handle.hide());c=this.multiSplitItems.length;for(b=0;b<c;b++)-1!==l.inArray(this.multiSplitItems[b].name,a)?this.multiSplitButton.showItem(this.multiSplitItems[b].name):this.multiSplitButton.hideItem(this.multiSplitItems[b].name)},initButtons:function(){var b=this;this.buttons={};this.multiSplitItems=[];l.each(this.availableButtons,
function(a,c){var e=!1;"number"!==typeof a&&"string"!==typeof c&&(e=c,c=a);J[c]?b.buttons[c]={handle:x(b,c),markup:l("<"+c+">",{"class":e||""})}:M[c]?b.multiSplitItems.push(z(b,c)):"removeFormat"===c?b.multiSplitItems.push(A(b,c)):g.log("warn",b,'Button "'+c+'" is not defined')});this.multiSplitButton=q({name:"formatBlock",items:this.multiSplitItems,hideIfEmpty:!0,scope:"Aloha.continuoustext"});a.sub("aloha.selection.context-change",function(a){s(b,a.range)})},initSidebar:function(a){var b=this;b.sidebar=
a;a.addPanel({id:b.nsClass("sidebar-panel-class"),title:e.t("floatingmenu.tab.format"),content:"",expanded:!0,activeOn:this.formatOptions||!1,onInit:function(){},onActivate:function(a){var c=this;c.effective=a;if(a[0]){c.format=a[0].nodeName.toLowerCase();var m=l("<div>").attr("class",b.nsClass("target-container")),f=l("<fieldset>");f.append(l("<legend>"+c.format+" "+e.t("format.class.legend")).append(l("<select>")));m.append(f);var d='<div class="'+b.nsClass("target-container")+'"><fieldset><legend>'+
e.t("format.class.legend")+'</legend><select name="targetGroup" class="'+b.nsClass("radioTarget")+'"><option value="">'+e.t("format.class.none")+"</option>";b.config[c.format]&&b.config[c.format]["class"]&&l.each(b.config[c.format]["class"],function(a,b){d+='<option value="'+a+'" >'+b+"</option>"});d+="</select></fieldset></div>";c=this;this.setContent(d);l(b.nsSel("framename")).live("keyup",function(){l(c.effective).attr("target",l(this).val().replace('"',"&quot;").replace("'","&#39;"))});c=this;
c.effective=a;l(b.nsSel("linkTitle")).val(l(c.effective).attr("title"))}}});a.show()},nsClass:function(){var a=[];l.each(arguments,function(){a.push(""==this?"aloha-format":"aloha-format-"+this)});return l.trim(a.join(" "))},nsSel:function(){var a=[];l.each(arguments,function(){a.push("."+(""==this?"aloha-format":"aloha-format-"+this))});return l.trim(a.join(" "))},addMarkup:function(a){var b=this,c=l("<"+a+">"),e=g.Selection.rangeObject;if("undefined"!==typeof a&&""!=a){var m=E[c[0].nodeName]||[c[0].nodeName],
f=e.findMarkup(function(){return-1!==d.indexOf(m,this.nodeName)},g.activeEditable.obj);if(f)e.isCollapsed()?r.Utils.Dom.removeFromDOM(f,e,!0):r.Utils.Dom.removeMarkup(e,l(f),g.activeEditable.obj),y(b,e);else{if(e.isCollapsed()&&(r.Utils.Dom.extendToWord(e),e.isCollapsed()&&n.enabled())){n.setWithRangeObject(t[a],e,function(a,e){p(b,e,c)});return}p(b,e,c)}}},changeMarkup:function(a){g.Selection.changeMarkupOnSelection(l("<"+a+">"))},removeFormat:function(){var a="u strong em b i q del s code sub sup p h1 h2 h3 h4 h5 h6 pre quote blockquote".split(" "),
b=g.Selection.rangeObject,c;this.settings.removeFormats&&(a=this.settings.removeFormats);if(!b.isCollapsed()){for(c=0;c<a.length;c++)r.Utils.Dom.removeMarkup(b,l("<"+a[c]+">"),g.activeEditable.obj);b.select()}},toString:function(){return"format"}})});define("list/nls/i18n",{root:{"button.createulist.tooltip":"Insert Unordered List","button.createolist.tooltip":"Insert Ordered List","button.indentlist.tooltip":"Indent List","button.outdentlist.tooltip":"Outdent List","floatingmenu.tab.list":"Lists"},
ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("list/list-plugin","aloha jquery aloha/plugin ui/ui ui/scopes ui/button ui/toggleButton i18n!list/nls/i18n i18n!aloha/nls/i18n aloha/engine PubSub".split(" "),function(g,b,n,l,d,c,k,f,q,a,e){function m(a,c){b(a).find(a.nodeName).each(function(){var a=g.Selection.getSelectionTree();v(a,this)&&g.Markup.transformDomObject(this,c,g.Selection.rangeObject)});g.Markup.transformDomObject(a,c,g.Selection.rangeObject)}function v(a,c){var e=!1;b.each(a,
function(a,b){if(b.domobj===c&&"none"!==b.selection||v(b.children,c))e=!0});return e}var x=window.GENTICS,z=n.create("list",{config:["ul","ol"],transformableElements:{p:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,ul:!0,ol:!0},init:function(){var a=this;this._orderedListButton=l.adopt("orderedList",k,{tooltip:f.t("button.createolist.tooltip"),icon:"aloha-icon aloha-icon-orderedlist",scope:"Aloha.continuoustext",click:function(){a.transformList(!0)}});this._unorderedListButton=l.adopt("unorderedList",k,
{tooltip:f.t("button.createulist.tooltip"),icon:"aloha-icon aloha-icon-unorderedlist",scope:"Aloha.continuoustext",click:function(){a.transformList(!1)}});this._indentListButton=l.adopt("indentList",c,{tooltip:f.t("button.indentlist.tooltip"),icon:"aloha-icon aloha-icon-indent",scope:"Aloha.continuoustext",click:function(){a.indentList()}});this._outdentListButton=l.adopt("outdentList",c,{tooltip:f.t("button.outdentlist.tooltip"),icon:"aloha-icon aloha-icon-outdent",scope:"Aloha.continuoustext",click:function(){a.outdentList()}});
d.createScope("Aloha.List","Aloha.continuoustext");e.sub("aloha.selection.context-change",function(c){var e,m=c.range;a._outdentListButton.show(!1);a._indentListButton.show(!1);a._unorderedListButton.setState(!1);a._orderedListButton.setState(!1);for(c=0;c<m.markupEffectiveAtStart.length;c++){e=m.markupEffectiveAtStart[c];if(g.Selection.standardTagNameComparator(e,b("<ul></ul>"))){a._unorderedListButton.setState(!0);a._outdentListButton.show(!0);a._indentListButton.show(!0);break}if(g.Selection.standardTagNameComparator(e,
b("<ol></ol>"))){a._orderedListButton.setState(!0);a._outdentListButton.show(!0);a._indentListButton.show(!0);break}}g.activeEditable&&a.applyButtonConfig(g.activeEditable.obj)});g.Markup.addKeyHandler(9,function(b){return a.processTab(b)})},applyButtonConfig:function(a){a=this.getEditableConfig(a);g.Selection.rangeObject.unmodifiableMarkupAtStart[0]&&(-1!=b.inArray("ul",a)&&-1!=g.Selection.canTag1WrapTag2(g.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ul")?this._unorderedListButton.show(!0):
this._unorderedListButton.show(!1),-1!=b.inArray("ol",a)&&-1!=g.Selection.canTag1WrapTag2(g.Selection.rangeObject.unmodifiableMarkupAtStart[0].nodeName,"ol")?this._orderedListButton.show(!0):this._orderedListButton.show(!1))},processTab:function(a){return 9===a.keyCode?a.shiftKey?this.outdentList():this.indentList():!0},getStartingDomObjectToTransform:function(){var a=g.Selection.rangeObject,b,c;for(b=0;b<a.markupEffectiveAtStart.length;b++)if(c=a.markupEffectiveAtStart[b],this.transformableElements[c.nodeName.toLowerCase()])return c;
return!1},getNearestSelectedListItem:function(){var a=g.Selection.rangeObject,b,c;for(b=0;b<a.markupEffectiveAtStart.length;b++)if(c=a.markupEffectiveAtStart[b],x.Utils.Dom.isListElement(c))return c;return!1},transformList:function(c){var e=this.getStartingDomObjectToTransform(),f,d,k,l;this._outdentListButton.show(!0);this._indentListButton.show(!0);if(!e&&(g.Selection.changeMarkupOnSelection(b("<p></p>")),e=this.getStartingDomObjectToTransform(),!e)){g.Selection.rangeObject.startContainer.contentEditable?
(c=c?b("<ol></ol>"):b("<ul></ul>"),d=b("<li></li>"),c.append(d),k=d.get(0),e=g.getActiveEditable().obj,k.appendChild(document.createTextNode("")),e.append(c),e.focus(),c=g.createRange(),e=g.getSelection(),c.setStart(k.firstChild,0),c.setEnd(k.firstChild,0),e.removeAllRanges(),e.addRange(c),g.Selection.updateSelection()):g.Log.error(this,"Could not transform selection into a list");return}k=e.nodeName.toLowerCase();if("ul"!=k||c)if("ul"==k&&c)m(e,"ol"),this.mergeAdjacentLists(b(e));else if("ol"!=k||
c)if("ol"==k&&c)c=b(e),k=c.parent(),0<k.length&&x.Utils.Dom.isListElement(k.get(0))?"li"===k.get(0).nodeName.toLowerCase()?(k.after(c.children()),c.remove()):c.children().unwrap():(c=b(e),b.each(c.children("li"),function(b,c){l=g.Markup.transformDomObject(c,"p",g.Selection.rangeObject);l.after(l.children("ol,ul"));a.ensureContainerEditable(l.get(0))}),c.children().unwrap());else{k=g.Selection.rangeObject.getSelectedSiblings(e);c=c?b("<ol></ol>"):b("<ul></ul>");d=b("<li></li>");c.append(d);b(e).contents().appendTo(d);
b(e).replaceWith(c);g.Selection.rangeObject.startContainer==e&&(g.Selection.rangeObject.startContainer=d.get(0));g.Selection.rangeObject.endContainer==e&&(g.Selection.rangeObject.endContainer=d.get(0));if(k)for(e=!1,f=0;f<k.length;++f)if(x.Utils.Dom.isBlockLevelElement(k[f]))e&&(e=!1),d=g.Markup.transformDomObject(k[f],"li",g.Selection.rangeObject),c.append(d);else if(3!=k[f].nodeType||0!==b.trim(k[f].data).length)e||(e=b("<li></li>"),c.append(e),d=e),e.append(k[f]);this.mergeAdjacentLists(c);k=d.get(0);
x.Utils.Dom.isEmpty(k)&&(c=g.createRange(),e=g.getSelection(),k.appendChild(document.createTextNode("")),c.selectNodeContents(k.lastChild),e.removeAllRanges(),e.addRange(c),g.Selection.updateSelection())}else m(e,"ul"),this.mergeAdjacentLists(b(e));else c=b(e),k=c.parent(),0<k.length&&x.Utils.Dom.isListElement(k.get(0))?"li"===k.get(0).nodeName.toLowerCase()?(k.after(c.children()),c.remove()):c.children().unwrap():(c=b(e),b.each(c.children("li"),function(b,c){l=g.Markup.transformDomObject(c,"p",g.Selection.rangeObject);
l.after(l.children("ol,ul"));a.ensureContainerEditable(l.get(0))}),c.children().unwrap());this.refreshSelection()},indentList:function(){var a=this.getNearestSelectedListItem(),c,e,m;if(a){m=b(a).prev("li");if(0===m.length)return!1;b(a).parent();e=g.Selection.rangeObject.getSelectedSiblings(a);c=b(a).parent().clone(!1).empty();c.append(a);m.append(c);if(e)for(a=0;a<e.length;++a)c.append(b(e[a]));this.mergeAdjacentLists(c,!0);this.refreshSelection();return!1}return!0},outdentList:function(){var a=
this.getNearestSelectedListItem(),c,e,m,f,d;if(a){e=b(a);m=e.parent();c=m.parents("ul,ol");f=m.parent("li");if(0<c.length&&x.Utils.Dom.isListElement(c.get(0))){d=(a=g.Selection.rangeObject.getSelectedSiblings(a))&&0<a.length?b(a[a.length-1]):e;0<d.nextAll("li").length&&(c=m.clone(!1).empty(),c.append(d.nextAll()),d.append(c));0<f.length?f.after(e):m.before(e);if(a&&0<a.length)for(c=a.length-1;0<=c;--c)e.after(b(a[c]));0===m.contents("li").length&&m.remove();0<f.length&&0===f.contents().length&&f.remove();
this.refreshSelection()}return!1}return!0},refreshSelection:function(){g.Selection.rangeObject.update();g.Selection.rangeObject.select();g.Selection.updateSelection()},mergeAdjacentLists:function(a,c){for(var e=a.get(0),m;e.previousSibling&&1===e.previousSibling.nodeType&&this.isMergable(e.previousSibling,e,c);)e=e.previousSibling;for(a=b(e);e.nextSibling&&(1===e.nextSibling.nodeType&&this.isMergable(e.nextSibling,e,c)||3===e.nextSibling.nodeType&&0===b.trim(e.nextSibling.data).length);)m=b(e.nextSibling),
1==e.nextSibling.nodeType&&m.contents().appendTo(a),m.remove()},isMergable:function(a,b,c){return c?"ul"==a.nodeName.toLowerCase()||"ol"==a.nodeName.toLowerCase():a.nodeName==b.nodeName}});a.commands.insertorderedlist={action:function(a,b){z.transformList(!0);b&&g.Selection.rangeObject&&(b.startContainer=g.Selection.rangeObject.startContainer,b.startOffset=g.Selection.rangeObject.startOffset,b.endContainer=g.Selection.rangeObject.endContainer,b.endOffset=g.Selection.rangeObject.endOffset)},indeterm:function(){},
state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=rangeObject.markupEffectiveAtStart[i];if(g.Selection.standardTagNameComparator(effectiveMarkup,b("<ul></ul>")))break;if(g.Selection.standardTagNameComparator(effectiveMarkup,b("<ol></ol>")))return!0}return!1}};a.commands.insertunorderedlist={action:function(a,b){z.transformList(!1);b&&g.Selection.rangeObject&&(b.startContainer=g.Selection.rangeObject.startContainer,b.startOffset=g.Selection.rangeObject.startOffset,
b.endContainer=g.Selection.rangeObject.endContainer,b.endOffset=g.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){for(i=0;i<rangeObject.markupEffectiveAtStart.length;i++){effectiveMarkup=rangeObject.markupEffectiveAtStart[i];if(g.Selection.standardTagNameComparator(effectiveMarkup,b("<ul></ul>")))return!0;if(g.Selection.standardTagNameComparator(effectiveMarkup,b("<ol></ol>")))break}return!1}};a.commands.indent={action:function(a,b){z.indentList();b&&g.Selection.rangeObject&&
(b.startContainer=g.Selection.rangeObject.startContainer,b.startOffset=g.Selection.rangeObject.startOffset,b.endContainer=g.Selection.rangeObject.endContainer,b.endOffset=g.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){return!1}};a.commands.outdent={action:function(a,b){z.outdentList();b&&g.Selection.rangeObject&&(b.startContainer=g.Selection.rangeObject.startContainer,b.startOffset=g.Selection.rangeObject.startOffset,b.endContainer=g.Selection.rangeObject.endContainer,
b.endOffset=g.Selection.rangeObject.endOffset)},indeterm:function(){},state:function(){return!1}};return z});define("image/nls/i18n",{root:{"size.natural":"Original size","button.addimg.tooltip":"add image ref","floatingmenu.tab.img":"Image","floatingmenu.tab.formatting":"Formatting","floatingmenu.tab.resize":"Resize","floatingmenu.tab.crop":"Crop","button.uploadimg.tooltip":"Upload img","button.uploadimg.label":"Upload","button.img.align.left.tooltip":"Left align","button.img.align.right.tooltip":"Right Align",
"button.img.align.none.tooltip":"No alignment","field.img.title.label":"Title","field.img.title.tooltip":"Title","field.img.label":"URL","field.img.tooltip":"Source","border ":"Add Border to Image","padding.increase ":"Increase Padding","padding.decrease ":"Decrease Padding","size.increase ":"Increase Size","size.decrease ":"Decrease Size",Resize:"Resize",Crop:"Crop",Reset:"Reset",Accept:"Accept",Cancel:"Cancel",height:"Height",width:"Width","button.toggle.tooltip":"Toggle keep aspect ratio","field.img.src.label":"Source",
"field.img.src.tooltip":"Source"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("image/image-floatingMenu","jquery util/class i18n!image/nls/i18n i18n!aloha/nls/i18n ui/ui ui/scopes ui/button ui/toggleButton ui/port-helper-attribute-field".split(" "),function(g,b,n,l,d,c,k,f,q){return b.extend({_constructor:function(){},init:function(a){a.floatingMenuControl=this;this.plugin=a;c.createScope(a.name,"Aloha.empty");this._addUIInsertButton();this._addUIMetaButtons();this._addUIResetButton();
this._addUIAlignButtons();this._addUIMarginButtons();this._addUICropButtons();this._addUIResizeButtons();this._addUIAspectRatioToggleButton()},_addUIAspectRatioToggleButton:function(){var a=this.plugin;this._imageCnrRatioButton=d.adopt("imageCnrRatio",f,{tooltip:n.t("button.toggle.tooltip"),icon:"aloha-icon-cnr-ratio",scope:a.name,click:function(){a.toggleKeepAspectRatio()}});!1!==a.settings.fixedAspectRatio&&(this._imageCnrRatioButton.setState(!0),a.keepAspectRatio=!0)},_addUIResetButton:function(){var a=
this.plugin;this._imageCnrResetButton=d.adopt("imageCnrReset",k,{tooltip:n.t("Reset"),icon:"aloha-icon-cnr-reset",scope:a.name,click:function(){a.reset()}})},_addUIInsertButton:function(){var a=this.plugin;this._insertImageButton=d.adopt("insertImage",k,{tooltip:n.t("button.addimg.tooltip"),icon:"aloha-button aloha-image-insert",scope:"Aloha.continuoustext",click:function(){a.insertImg()}})},_addUIMetaButtons:function(){var a=this.plugin;this.imgSrcField=q({label:n.t("field.img.src.label"),labelClass:"aloha-image-input-label",
tooltip:n.t("field.img.src.tooltip"),name:"imageSource",scope:a.name});this.imgSrcField.setTemplate("<span><b>{name}</b><br/>{url}</span>");this.imgSrcField.setObjectTypeFilter(a.objectTypeFilter);this.imgTitleField=q({label:n.t("field.img.title.label"),labelClass:"aloha-image-input-label",tooltip:n.t("field.img.title.tooltip"),name:"imageTitle",scope:a.name});this.imgTitleField.setObjectTypeFilter()},_addUIAlignButtons:function(){var a=this.plugin;this._imageAlignLeftButton=d.adopt("imageAlignLeft",
k,{tooltip:n.t("button.img.align.left.tooltip"),icon:"aloha-img aloha-image-align-left",scope:a.name,click:function(){var b=g(a.getPluginFocus());b.add(b.parent()).css("float","left")}});this._imageAlignRightButton=d.adopt("imageAlignRight",k,{tooltip:n.t("button.img.align.right.tooltip"),icon:"aloha-img aloha-image-align-right",scope:a.name,click:function(){var b=g(a.getPluginFocus());b.add(b.parent()).css("float","right")}});this._imageAlignNoneButton=d.adopt("imageAlignNone",k,{tooltip:n.t("button.img.align.none.tooltip"),
icon:"aloha-img aloha-image-align-none",scope:a.name,click:function(){var b=g(a.getPluginFocus());b.add(b.parent()).css({"float":"none",display:"inline-block"})}})},_addUIMarginButtons:function(){var a=this.plugin;this._imageIncPaddingButton=d.adopt("imageIncPadding",k,{tooltip:n.t("padding.increase"),icon:"aloha-img aloha-image-padding-increase",scope:a.name,click:function(){g(a.getPluginFocus()).increase("padding")}});this._imageDecPaddingButton=d.adopt("imageDecPadding",k,{tooltip:n.t("padding.decrease"),
icon:"aloha-img aloha-image-padding-decrease",scope:a.name,click:function(){g(a.getPluginFocus()).decrease("padding")}})},_addUICropButtons:function(){var a=this.plugin;c.createScope("Aloha.img",["Aloha.global"]);this._imageCropButton=d.adopt("imageCropButton",f,{tooltip:n.t("Crop"),icon:"aloha-icon-cnr-crop",scope:a.name,click:function(){this.getState()?a.crop():a.endCrop()}})},_addUIResizeButtons:function(){var a=this.plugin;this.imgResizeHeightField=q({label:n.t("height"),labelClass:"aloha-image-input-label",
name:"imageResizeHeight",width:50,scope:a.name});this.imgResizeHeightField.maxValue=a.settings.maxHeight;this.imgResizeHeightField.minValue=a.settings.minHeight;this.imgResizeWidthField=q({label:n.t("width"),labelClass:"aloha-image-input-label",name:"imageResizeWidth",width:50,scope:a.name});this.imgResizeWidthField.maxValue=a.settings.maxWidth;this.imgResizeWidthField.minValue=a.settings.minWidth},setScope:function(){c.setScope(this.plugin.name)},doLayout:function(){}})});define("image/vendor/jcrop/jquery.jcrop.min",
["jquery"],function(g){(function(b){b.Jcrop=function(g,l){function d(a){return""+parseInt(a)+"px"}function c(a){a=b(a).offset();return[a.left,a.top]}function k(a){return[a.pageX-R[0],a.pageY-R[1]]}function f(a,b){return function(c){if(r.aspectRatio)switch(a){case "e":c[1]=b.y+1;break;case "w":c[1]=b.y+1;break;case "n":c[0]=b.x+1;break;case "s":c[0]=b.x+1}else switch(a){case "e":c[1]=b.y2;break;case "w":c[1]=b.y2;break;case "n":c[0]=b.x2;break;case "s":c[0]=b.x2}ja.setCurrent(c);ea.update()}}function q(a){var b=
a;wa.watchKeys();return function(a){ja.moveOffset([a[0]-b[0],a[1]-b[1]]);b=a;ea.update()}}function a(a){switch(a){case "n":return"sw";case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function e(b){return function(e){if(r.disabled||"move"==b&&!r.allowMove)return!1;ba=!0;var m=k(e);R=c(N);da.setCursor("move"==b?b:b+"-resize");if("move"==b)da.activateHandlers(q(m),v);else{var m=ja.getFixed(),d=a(b),l=ja.getCorner(a(d));
ja.setPressed(ja.getCorner(d));ja.setCurrent(l);da.activateHandlers(f(b,m),v)}e.stopPropagation();e.preventDefault();return!1}}function m(a){return{x:parseInt(a.x*U),y:parseInt(a.y*V),x2:parseInt(a.x2*U),y2:parseInt(a.y2*V),w:parseInt(a.w*U),h:parseInt(a.h*V)}}function v(a){a=ja.getFixed();a.w>r.minSelect[0]&&a.h>r.minSelect[1]?(ea.enableHandles(),ea.done()):ea.release();da.setCursor(r.allowSelect?"crosshair":"default")}function x(a){ja.setCurrent(a);ea.update()}function z(){var a=b("<div></div>").addClass(r.baseClass+
"-tracker");b.browser.msie&&a.css({opacity:0,backgroundColor:"white"});return a}function A(a){y([a[0]/U,a[1]/V,a[2]/U,a[3]/V])}function y(a){ja.setPressed([a[0],a[1]]);ja.setCurrent([a[2],a[3]]);ea.update()}function p(a){"object"!=typeof a&&(a={});r=b.extend(r,a);"function"!==typeof r.onChange&&(r.onChange=function(){});"function"!==typeof r.onSelect&&(r.onSelect=function(){})}function s(a){r.allowResize?a?ea.enableOnly():ea.enableHandles():ea.disableHandles();da.setCursor(r.allowSelect?"crosshair":
"default");ea.setCursor(r.allowMove?"move":"default");E.css("backgroundColor",r.bgColor);"setSelect"in r&&(A(l.setSelect),ea.done(),delete r.setSelect);"trueSize"in r&&(U=r.trueSize[0]/J,V=r.trueSize[1]/M);P=r.maxSize[0]||0;aa=r.maxSize[1]||0;ca=r.minSize[0]||0;Y=r.minSize[1]||0;"outerImage"in r&&(N.attr("src",r.outerImage),delete r.outerImage);ea.refresh()}"object"!==typeof g&&(g=b(g)[0]);"object"!==typeof l&&(l={});"trackDocument"in l||(l.trackDocument=b.browser.msie?!1:!0,b.browser.msie&&"8"==
b.browser.version.split(".")[0]&&(l.trackDocument=!0));"keySupport"in l||(l.keySupport=b.browser.msie?!1:!0);var r={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,borderOpacity:0.4,handleOpacity:0.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],maxSize:[0,
0],minSize:[0,0],onChange:function(){},onSelect:function(){}};p(l);var t=b(g),N=t.clone().removeAttr("id").css({position:"absolute"});N.width(t.width());N.height(t.height());t.after(N).hide();(function(a,b,c){var e=a.width(),m=a.height();e>b&&0<b&&(e=b,m=b/a.width()*a.height());m>c&&0<c&&(m=c,e=c/a.height()*a.width());U=a.width()/e;V=a.height()/m;a.width(e).height(m)})(N,r.boxWidth,r.boxHeight);var J=N.width(),M=N.height(),E=b("<div />").width(J).height(M).addClass(r.baseClass+"-holder").css({position:"relative",
backgroundColor:r.bgColor}).insertAfter(t).append(N);r.addClass&&E.addClass(r.addClass);var K=b("<img />").attr("src",N.attr("src")).css("position","absolute").width(J).height(M),G=b("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}).append(K),u=b("<div />").width("100%").height("100%").css("zIndex",320),S=b("<div />").css({position:"absolute",zIndex:300}).insertBefore(N).append(G,u),Q=r.boundary,W=z().width(J+2*Q).height(M+2*Q).css({position:"absolute",
top:d(-Q),left:d(-Q),zIndex:290}).mousedown(function(a){if(r.disabled||!r.allowSelect)return!1;ba=!0;R=c(N);ea.disableHandles();"crosshair"!=Z&&(da.setCursor("crosshair"),Z="crosshair");var b=k(a);ja.setPressed(b);da.activateHandlers(x,v);wa.watchKeys();ea.update();a.stopPropagation();a.preventDefault();return!1}),P,aa,ca,Y,U,V,R=c(N),ba,Z,na,ka,ja=function(){function a(){if(!r.aspectRatio){var b=d-m,l=k-f;P&&Math.abs(b)>P&&(d=0<b?m+P:m-P);aa&&Math.abs(l)>aa&&(k=0<l?f+aa:f-aa);Y&&Math.abs(l)<Y&&(k=
0<l?f+Y:f-Y);ca&&Math.abs(b)<ca&&(d=0<b?m+ca:m-ca);0>m&&(d-=m,m-=m);0>f&&(k-=f,f-=f);0>d&&(m-=d,d-=d);0>k&&(f-=k,k-=k);d>J&&(b=d-J,m-=b,d-=b);k>M&&(b=k-M,f-=b,k-=b);m>J&&(b=m-M,k-=b,f-=b);f>M&&(b=f-M,k-=b,f-=b);return e(c(m,f,d,k))}var b=r.aspectRatio,l=r.minSize[0]/U,g=r.maxSize[0]/U,q=d-m,v=k-f,n=Math.abs(q),x=Math.abs(v);0==g&&(g=10*J);n/x<b?(n=k,w=x*b,x=0>q?m-w:w+m,0>x?(x=0,h=Math.abs((x-m)/b),n=0>v?f-h:h+f):x>J&&(x=J,h=Math.abs((x-m)/b),n=0>v?f-h:h+f)):(x=d,h=n/b,n=0>v?f-h:f+h,0>n?(n=0,w=Math.abs((n-
f)*b),x=0>q?m-w:w+m):n>M&&(n=M,w=Math.abs(n-f)*b,x=0>q?m-w:w+m));x>m?(x-m<l?x=m+l:x-m>g&&(x=m+g),n=n>f?f+(x-m)/b:f-(x-m)/b):x<m&&(m-x<l?x=m-l:m-x>g&&(x=m-g),n=n>f?f+(m-x)/b:f-(m-x)/b);0>x?(m-=x,x=0):x>J&&(m-=x-J,x=J);0>n?(f-=n,n=0):n>M&&(f-=n-M,n=M);return last=e(c(m,f,x,n))}function b(a){0>a[0]&&(a[0]=0);0>a[1]&&(a[1]=0);a[0]>J&&(a[0]=J);a[1]>M&&(a[1]=M);return[a[0],a[1]]}function c(a,b,e,m){var f=a,d=e,k=b,l=m;e<a&&(f=e,d=a);m<b&&(k=m,l=b);return[Math.round(f),Math.round(k),Math.round(d),Math.round(l)]}
function e(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var m=0,f=0,d=0,k=0,l,g;return{flipCoords:c,setPressed:function(a){a=b(a);d=m=a[0];k=f=a[1]},setCurrent:function(a){a=b(a);l=a[0]-d;g=a[1]-k;d=a[0];k=a[1]},getOffset:function(){return[l,g]},moveOffset:function(a){var b=a[0];a=a[1];0>m+b&&(b-=b+m);0>f+a&&(a-=a+f);M<k+a&&(a+=M-(k+a));J<d+b&&(b+=J-(d+b));m+=b;d+=b;f+=a;k+=a},getCorner:function(b){var c=a();switch(b){case "ne":return[c.x2,c.y];case "nw":return[c.x,c.y];case "se":return[c.x2,
c.y2];case "sw":return[c.x,c.y2]}},getFixed:a}}(),ea=function(){function a(c){c=b("<div />").css({position:"absolute",opacity:r.borderOpacity}).addClass(r.baseClass+"-"+c);G.append(c);return c}function c(a,m){var f=b("<div />").mousedown(e(a)).css({cursor:a+"-resize",position:"absolute",zIndex:m});u.append(f);return f}function f(a){var b=r.handleSize,e=F,m=b;switch(a){case "n":case "s":b="100%";break;case "e":case "w":m="100%"}return c(a,p++).width(b).height(m).css({top:d(-e+1),left:d(-e+1)})}function k(a){for(i in a)t[a[i]]=
c(a[i],p++).css({top:d(-F+1),left:d(-F+1),opacity:r.handleOpacity}).addClass(r.baseClass+"-handle")}function l(a){var b=Math.round(a.h/2-F),c=Math.round(a.w/2-F);west=-F+1;var e=a.w-F;a=a.h-F;"e"in t&&t.e.css({top:d(b),left:d(e)})&&t.w.css({top:d(b)})&&t.s.css({top:d(a),left:d(c)})&&t.n.css({left:d(c)});"ne"in t&&t.ne.css({left:d(e)})&&t.se.css({top:d(a),left:d(e)})&&t.sw.css({top:d(a)});"b"in t&&t.b.css({top:d(a)})&&t.r.css({left:d(e)})}function g(){var a=ja.getFixed();ja.setPressed([a.x,a.y]);ja.setCurrent([a.x2,
a.y2]);q()}function q(){if(A)return v()}function v(){var a=ja.getFixed(),b=a.h;S.width(a.w).height(b);var b=a.x,c=a.y;K.css({top:d(-c),left:d(-b)});S.css({top:d(c),left:d(b)});r.drawBorders&&s.right.css({left:d(a.w-1)})&&s.bottom.css({top:d(a.h-1)});C&&l(a);A||(S.show(),N.css("opacity",r.bgOpacity),A=!0);r.onChange(m(a))}function n(){C=!0;if(r.allowResize)return l(ja.getFixed()),u.show(),!0}function x(){C=!1;u.hide()}function y(a){(na=a)?x():n()}var A,p=370,s={},t={},C=!1,F=r.handleOffset;r.drawBorders&&
(s={top:a("hline").css("top",b.browser.msie?d(-1):d(0)),bottom:a("hline"),left:a("vline"),right:a("vline")});r.dragEdges&&(t.t=f("n"),t.b=f("s"),t.r=f("e"),t.l=f("w"));r.sideHandles&&k(["n","s","e","w"]);r.cornerHandles&&k(["sw","nw","ne","se"]);var H=z().mousedown(e("move")).css({cursor:"move",position:"absolute",zIndex:360});G.append(H);x();return{updateVisible:q,update:v,release:function(){x();S.hide();N.css("opacity",1);A=!1},refresh:g,setCursor:function(a){H.css("cursor",a)},enableHandles:n,
enableOnly:function(){C=!0},showHandles:function(){C&&(l(ja.getFixed()),u.show())},disableHandles:x,animMode:y,done:function(){y(!1);g()}}}(),da=function(){function a(b){e(k(b))}function c(l){l.preventDefault();l.stopPropagation();ba&&(ba=!1,f(k(l)),r.onSelect(m(ja.getFixed())),W.css({zIndex:290}),d&&b(document).unbind("mousemove",a).unbind("mouseup",c),e=function(){},f=function(){});return!1}var e=function(){},f=function(){},d=r.trackDocument;d||W.mousemove(a).mouseup(c).mouseout(c);N.before(W);
return{activateHandlers:function(m,k){ba=!0;e=m;f=k;W.css({zIndex:450});d&&b(document).mousemove(a).mouseup(c);return!1},setCursor:function(a){W.css("cursor",a)}}}(),wa=function(){function a(b,c,e){r.allowMove&&(ja.moveOffset([c,e]),ea.updateVisible());b.preventDefault();b.stopPropagation()}var c=b('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(function(b){if(b.ctrlKey)return!0;var c=(ka=b.shiftKey?!0:!1)?10:1;switch(b.keyCode){case 37:a(b,-c,0);break;case 39:a(b,c,0);
break;case 38:a(b,0,-c);break;case 40:a(b,0,c);break;case 27:ea.release();break;case 9:return!0}return nothing(b)}).blur(function(a){c.hide()}),e=b("<div />").css({position:"absolute",overflow:"hidden"}).append(c);r.keySupport&&e.insertBefore(N);return{watchKeys:function(){r.keySupport&&(c.show(),c.focus())}}}();u.hide();s(!0);Q={animateTo:function(a){var b=a[0]/U,c=a[1]/V,e=a[2]/U,m=a[3]/V;if(!na){a=ja.flipCoords(b,c,e,m);var b=ja.getFixed(),f=initcr=[b.x,b.y,b.x2,b.y2],d=r.animationDelay,k=f[0],
l=f[1],e=f[2],m=f[3],g=a[0]-initcr[0],q=a[1]-initcr[1],v=a[2]-initcr[2],n=a[3]-initcr[3],x=0,z=r.swingSpeed;ea.animMode(!0);var A=function(){return function(){x+=(100-x)/z;f[0]=k+x/100*g;f[1]=l+x/100*q;f[2]=e+x/100*v;f[3]=m+x/100*n;100>x?window.setTimeout(A,d):ea.done();99.8<=x&&(x=100);y(f)}}();window.setTimeout(A,d)}},setSelect:A,setOptions:function(a){p(a);s()},tellSelect:function(){return m(ja.getFixed())},tellScaled:function(){return ja.getFixed()},disable:function(){r.disabled=!0;ea.disableHandles();
ea.setCursor("default");da.setCursor("default")},enable:function(){r.disabled=!1;s()},cancel:function(){ea.done();da.activateHandlers(null,null)},focus:wa.watchKeys,getBounds:function(){return[J*U,M*V]},getWidgetSize:function(){return[J,M]},release:ea.release,destroy:function(){E.remove();t.show()}};t.data("Jcrop",Q);return Q};b.fn.Jcrop=function(g){function l(d){var c=g.useImg||d.src,k=new Image;k.onload=function(){b.Jcrop(d,g)};k.src=c}"object"!==typeof g&&(g={});this.each(function(){if(b(this).data("Jcrop")){if("api"==
g)return b(this).data("Jcrop");b(this).data("Jcrop").setOptions(g)}else l(this)});return this}})(g)});define("image/vendor/mousewheel/mousewheel",["jquery"],function(g){(function(b){function g(c){var d=c||window.event,f=[].slice.call(arguments,1),l=0,a=0,e=0;c=b.event.fix(d);c.type="mousewheel";d.wheelDelta&&(l=d.wheelDelta/120);d.detail&&(l=-d.detail/3);e=l;void 0!==d.axis&&d.axis===d.HORIZONTAL_AXIS&&(e=0,a=-1*l);void 0!==d.wheelDeltaY&&(e=d.wheelDeltaY/120);void 0!==d.wheelDeltaX&&(a=-1*d.wheelDeltaX/
120);f.unshift(c,l,a,e);return(b.event.dispatch||b.event.handle).apply(this,f)}var l=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var d=l.length;d;)b.event.fixHooks[l[--d]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=l.length;b;)this.addEventListener(l[--b],g,!1);else this.onmousewheel=g},teardown:function(){if(this.removeEventListener)for(var b=l.length;b;)this.removeEventListener(l[--b],g,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(b){return b?
this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(g)});define("image/image-plugin","jquery aloha/plugin image/image-floatingMenu i18n!aloha/nls/i18n i18n!image/nls/i18n jqueryui image/vendor/jcrop/jquery.jcrop.min image/vendor/mousewheel/mousewheel".split(" "),function(g,b,n,l,d){var c=g,k=window.GENTICS,f=window.Aloha,q=!1;String.prototype.toInteger=String.prototype.toInteger||function(){return parseInt(String(this).replace(/px$/,
"")||0,10)};String.prototype.toFloat=String.prototype.toInteger||function(){return parseFloat(String(this).replace(/px$/,"")||0,10)};Number.prototype.toInteger=Number.prototype.toInteger||String.prototype.toInteger;Number.prototype.toFloat=Number.prototype.toFloat||String.prototype.toFloat;g.extend(!0,g.fn,{increase:g.fn.increase||function(a){var b=g(this),c,f;if(!b.length)return b;c=b.css(a).toFloat();f=Math.round(1.2*(c||1));c===f&&f++;b.css(a,f);return b},decrease:g.fn.decrease||function(a){var b=
g(this),c,f;if(!b.length)return b;c=b.css(a).toFloat();f=Math.round(0.8*(c||0));c===f&&0<f&&f--;b.css(a,f);return b}});return b.create("image",{defaultSettings:{maxWidth:1600,minWidth:3,maxHeight:1200,minHeight:3,autoCorrectManualInput:!0,fixedAspectRatio:!1,autoResize:!1,ui:{meta:!0,crop:!0,resizable:!0},handles:"ne, se, sw, nw",onCropped:function(a,b){f.Log.info("Default onCropped invoked",a,b)},onReset:function(a){f.Log.info("Default onReset invoked",a);return!1},onResize:function(a){f.Log.info("Default onResize invoked",
a)},onResized:function(a){f.Log.info("Default onResized invoked",a)}},_onCropped:function(a,b){c("body").trigger("aloha-image-cropped",[a,b]);this.keepAspectRatio&&(this.aspectRatioValue=this.imageObj.width()/this.imageObj.height());this.onCropped(a,b)},_onReset:function(a){c("body").trigger("aloha-image-reset",a);c("#"+this.ui.imgResizeHeightField.getInputId()).val(a.height());c("#"+this.ui.imgResizeWidthField.getInputId()).val(a.width());return this.onReset(a)},_onResize:function(a){c("body").trigger("aloha-image-resize",
a);c("#"+this.ui.imgResizeHeightField.getInputId()).val(a.height());c("#"+this.ui.imgResizeWidthField.getInputId()).val(a.width());this.onResize(a)},_onResized:function(a){c("body").trigger("aloha-image-resized",a);c("#"+this.ui.imgResizeHeightField.getInputId()).val(a.height());c("#"+this.ui.imgResizeWidthField.getInputId()).val(a.width());this.onResized(a)},imageObj:null,jcAPI:null,keepAspectRatio:!1,aspectRatioValue:!1,restoreProps:[],objectTypeFilter:[],init:function(){f.getPluginUrl("image");
"undefined"!=typeof this.settings.objectTypeFilter&&(this.objectTypeFilter=this.settings.objectTypeFilter);this.config=this.defaultSettings;this.settings=g.extend(!0,this.defaultSettings,this.settings);"number"===typeof this.settings.fixedAspectRatio?(this.aspectRatioValue=this.settings.fixedAspectRatio,this.keepAspectRatio=!0):this.keepAspectRatio=!0===this.settings.fixedAspectRatio?!0:!1;this.initializeUI();this.bindInteractions();this.subscribeEvents()},initializeUI:function(){this.ui=new n;this.ui.init(this)},
bindInteractions:function(){var a=this;if(a.settings.ui.resizable)try{document.execCommand("enableObjectResizing",!1,!1)}catch(b){f.Log.info(b,"Could not disable enableObjectResizing")}a.settings.ui.meta&&(a.ui.imgSrcField.addListener("keyup",function(b){a.srcChange()}),a.ui.imgSrcField.addListener("blur",function(b){b=g(a.ui.imgSrcField.getTargetObject());""===b.attr("src")&&b.remove()}));a.settings.onCropped&&"function"===typeof a.settings.onCropped&&(a.onCropped=a.settings.onCropped);a.settings.onReset&&
"function"===typeof a.settings.onReset&&(a.onReset=a.settings.onReset);a.settings.onResized&&"function"===typeof a.settings.onResized&&(a.onResized=a.settings.onResized);a.settings.onResize&&"function"===typeof a.settings.onResize&&(a.onResize=this.settings.onResize)},subscribeEvents:function(){var a=this,b=this.settings;g("img").filter(b.globalselector).unbind();g("img").filter(b.globalselector).click(function(b){a.clickImage(b)});f.bind("aloha-drop-files-in-editable",function(b,c){for(var e,d=c.filesObjs.length,
l;0<=--d;)l=c.filesObjs[d],l.file.type.match(/image\//)&&(a.getEditableConfig(c.editable),e=g("<img/>"),e.css({"max-width":that.maxWidth,"max-height":that.maxHeight}),e.attr("id",l.id),"undefined"===typeof l.src?e.attr("src",l.data):e.attr("src",l.src),k.Utils.Dom.insertIntoDOM(e,c.range,g(f.activeEditable.obj)))});f.bind("aloha-selection-changed",function(b,c,e){e&&e.target&&a.settings.ui.resizable&&!g(e.target).hasClass("ui-resizable-handle")&&(a.endResize(),a.imageObj=null,f.trigger("aloha-image-unselected"));
null!==f.activeEditable&&(c=a.findImgMarkup(c),b=a.getEditableConfig(f.activeEditable.obj),"undefined"!==typeof b?(a.ui._insertImageButton.show(),c?(a.ui._insertImageButton.show(),a.ui.setScope(),a.settings.ui.meta&&(a.ui.imgSrcField.setTargetObject(c,"src"),a.ui.imgTitleField.setTargetObject(c,"title")),a.ui.imgSrcField.foreground(),a.ui.imgSrcField.focus()):a.settings.ui.meta&&a.ui.imgSrcField.setTargetObject(null),a.ui.doLayout()):a.ui._insertImageButton.hide())});f.bind("aloha-editable-created",
function(b,c){try{document.execCommand("enableObjectResizing",!1,!1)}catch(e){f.Log.info(e,"Could not disable enableObjectResizing")}c.obj.delegate("img","mouseup",function(b){q||(a.clickImage(b),b.stopPropagation())})});a._subscribeToResizeFieldEvents()},autoResize:function(a){var b=g("#"+this.ui.imgResizeWidthField.getInputId()),c=g("#"+this.ui.imgResizeHeightField.getInputId()),f=this.imageObj.width(),d=this.imageObj.height(),k=!1;if(f<this.settings.minWidth||f>this.settings.maxWidth||d<this.settings.minHeight||
d>this.settings.maxHeight)k=!0;var l=f/d;return k?(f>this.settings.maxWidth&&(f=this.settings.maxWidth,d=f/l),d>this.settings.maxHeight&&(d=this.settings.maxHeight,f=d*l),f<this.settings.minWidth&&a&&(f=this.settings.minWidth,d=f/l),d<this.settings.minHeight&&a&&(d=this.settings.minHeight,f*=l),b.val(f),c.val(d),this.setSizeByFieldValue(),!0):!1},toggleKeepAspectRatio:function(){this.keepAspectRatio=!this.keepAspectRatio;if("undefined"===typeof this.jcAPI||null===this.jcAPI)this.endResize(),this.aspectRatioValue=
this.keepAspectRatio?"number"!==typeof this.settings.fixedAspectRatio?this.imageObj.width()/this.imageObj.height():this.settings.fixedAspectRatio:!1,this.startResize()},_subscribeToResizeFieldEvents:function(){function a(a){var b=a.data.fieldName;if(8===a.keyCode||46===a.keyCode)m._updateFields(b,c(this).val(),!1)&&("undefined"!==typeof m.jcAPI&&null!==m.jcAPI?m.setCropAreaByFieldValue():m.setSizeByFieldValue());else if(57>=a.keyCode&&48<=a.keyCode||105>=a.keyCode&&96<=a.keyCode)m._updateFields(b,
c(this).val(),!1)&&("undefined"!==typeof m.jcAPI&&null!==m.jcAPI?m.setCropAreaByFieldValue():m.setSizeByFieldValue());else{var e=0;if(38===a.keyCode||107===a.keyCode)e=1;else if(40===a.keyCode||109===a.keyCode)e=-1;if(a.shiftKey||a.metaKey||a.ctrlKey)e*=10;var f=!1;0>e&&(f=!0);e=parseInt(c(this).val(),10)+e;m._updateFields(b,e,f)&&("undefined"!==typeof m.jcAPI&&null!==m.jcAPI?m.setCropAreaByFieldValue():m.setSizeByFieldValue())}a.preventDefault();return!1}function b(a,e){var f=a.data.fieldName;if(a.shiftKey||
a.metaKey||a.ctrlKey)e*=10;var d=parseInt(c(this).val(),10)+e,k=!1;0>e&&(k=!0);m._updateFields(f,d,k)&&("undefined"!==typeof m.jcAPI&&null!==m.jcAPI?m.setCropAreaByFieldValue():m.setSizeByFieldValue());return!1}var m=this,f=c("#"+m.ui.imgResizeHeightField.getInputId()),d={fieldName:"height",maxValue:m.ui.imgResizeHeightField.maxValue,minValue:m.ui.imgResizeHeightField.minValue};f.live("keyup",d,a);f.live("mousewheel",d,b);f=c("#"+m.ui.imgResizeWidthField.getInputId());d={fieldName:"width",maxValue:m.ui.imgResizeWidthField.maxValue,
minValue:m.ui.imgResizeWidthField.minValue};f.live("keyup",d,a);f.live("mousewheel",d,b)},setSize:function(a,b){this.imageObj.width(a);this.imageObj.height(b);var c=this.imageObj.closest(".Aloha_Image_Resize");c.height(b);c.width(a);this._onResize(this.imageObj);this._onResized(this.imageObj)},clickImage:function(a){this.endResize();var b=this.imageObj=g(a.target);if(!b.hasClass("aloha-ui")){this.ui.setScope();b.closest(".aloha-editable");this.ui._imageCnrRatioButton.setState(this.keepAspectRatio);
this.restoreProps.push({obj:a.srcElement,src:this.imageObj.attr("src"),width:this.imageObj.width(),height:this.imageObj.height()});a=c("#"+this.ui.imgResizeHeightField.getInputId());a.val(this.imageObj.height());a.css("background-color","");a=c("#"+this.ui.imgResizeWidthField.getInputId());a.val(this.imageObj.width());a.css("background-color","");this.settings.ui.meta&&(this.ui.imgSrcField.setTargetObject(this.imageObj,"src"),this.ui.imgTitleField.setTargetObject(this.imageObj,"title"));f.Selection.preventSelectionChanged();
try{this.ui.imgSrcField.focus()}catch(m){}this.aspectRatioValue=this.imageObj.width()/this.imageObj.height();this.settings.ui.resizable&&this.startResize();this.settings.autoResize&&this.autoResize(!0);f.Selection.preventSelectionChangedFlag=!1;f.trigger("aloha-image-selected")}},findImgMarkup:function(a){var b,c;"undefined"===typeof a&&(a=f.Selection.getRangeObject());c=g(a.startContainer);try{if(f.activeEditable&&("undefined"!==typeof a.startContainer&&"undefined"!==typeof a.startContainer.childNodes&&
"undefined"!==typeof a.startOffset&&"undefined"!==typeof a.startContainer.childNodes[a.startOffset]&&"img"===a.startContainer.childNodes[a.startOffset].nodeName.toLowerCase()&&a.startOffset+1===a.endOffset||c.hasClass("Aloha_Image_Resize")))return b=c.find("img")[0],b.css||(b.css=""),b.title||(b.title=""),b.src||(b.src=""),b}catch(d){f.Log.debug(d,"Error finding img markup.")}return null},getPluginFocus:function(){return this.imageObj},_updateFields:function(a,b,c){var f=null,d=null,k=null,l=null,
q=null,n=null,p=null;if("width"==a)f=g("#"+this.ui.imgResizeWidthField.getInputId()),d=g("#"+this.ui.imgResizeHeightField.getInputId()),k=1/this.aspectRatioValue,l=this.settings.minWidth,q=this.settings.maxWidth,n=this.settings.minHeight,p=this.settings.maxHeight;else if("height"==a)f=g("#"+this.ui.imgResizeHeightField.getInputId()),d=g("#"+this.ui.imgResizeWidthField.getInputId()),k=this.aspectRatioValue,l=this.settings.minHeight,q=this.settings.maxHeight,n=this.settings.minWidth,p=this.settings.maxWidth;
else return!1;if(isNaN(b))return f.css("background-color","red"),!1;f.val(b);a=!0;b>q?this.settings.autoCorrectManualInput?(f.val(q),b=f.val(),f.css("background-color",""),a=!0):(f.css("background-color","red"),a=!1):b<l?c?(f.val(l),b=f.val(),a=!0):(this.settings.autoCorrectManualInput?f.css("background-color","wheat"):f.css("background-color","red"),a=!1):(f.css("background-color",""),a=!0);l=!0;this.keepAspectRatio&&(b=Math.round(b*k),b>p?this.settings.autoCorrectManualInput?(d.val(p),f.val(d.val()/
k),f.val(),f.css("background-color",""),d.css("background-color",""),l=!0):(b.css("background-color","red"),l=!1):b<n?c?(d.val(n),f.val(d.val()/k),f.val(),a=!0):(this.settings.autoCorrectManualInput?(d.val(b),d.css("background-color","wheat")):d.css("background-color","red"),l=!1):(d.val(b),d.css("background-color",""),l=!0));return a&&l?!0:!1},setSizeByFieldValue:function(){var a=c("#"+this.ui.imgResizeWidthField.getInputId()).val(),b=c("#"+this.ui.imgResizeHeightField.getInputId()).val();this.setSize(a,
b)},setCropAreaByFieldValue:function(){var a=this.jcAPI.tellSelect(),b=c("#"+this.ui.imgResizeWidthField.getInputId()).val(),b=parseInt(b,10),m=c("#"+this.ui.imgResizeHeightField.getInputId()).val(),m=parseInt(m,10);this.jcAPI.setSelect([a.x,a.y,a.x+b,a.y+m])},insertImg:function(){var a=f.Selection.getRangeObject(),b=this.getEditableConfig(f.activeEditable.obj),c=f.getPluginUrl("image");a.isCollapsed()?(b="max-width: "+b.maxWidth+"; max-height: "+b.maxHeight,c=g('<img style="'+b+'" src="'+c+'/img/blank.jpg" title="" />'),
k.Utils.Dom.insertIntoDOM(c,a,g(f.activeEditable.obj))):f.Log.error("img cannot markup a selection")},srcChange:function(){this.imageObj.attr("src",this.ui.imgSrcField.getValue())},positionCropButtons:function(){var a=g(".jcrop-tracker:first"),b=a.offset(),c=b.top,b=b.left,f=a.height(),a=a.width(),d=g("#aloha-CropNResize-btns");0===c&&0===b&&d.hide();c=parseInt(c+f+3,10);b=parseInt(b+a/2-d.width()/2+10,10);0==b&&0==c||d.offset({top:c,left:b})},initCropButtons:function(){var a=this,b;g("body").append('<div id="aloha-CropNResize-btns" display="none"><button class="cnr-crop-apply" title="'+
d.t("Accept")+'"></button><button class="cnr-crop-cancel" title="'+d.t("Cancel")+'"></button></div>');b=g("#aloha-CropNResize-btns");b.find(".cnr-crop-apply").click(function(){a.acceptCrop()});b.find(".cnr-crop-cancel").click(function(){a.endCrop()});this.interval=setInterval(function(){a.positionCropButtons()},10)},destroyCropButtons:function(){g("#aloha-CropNResize-btns").remove();clearInterval(this.interval)},_disableSelection:function(a){a.find("*").attr("unselectable","on").css({"-moz-user-select":"none",
"-webkit-user-select":"none","user-select":"none"})},crop:function(){var a=this;a.initCropButtons();a.settings.ui.resizable&&a.endResize();a.jcAPI=g.Jcrop(a.imageObj,{onSelect:function(){a._onCropSelect();window.setTimeout(function(){a.ui.setScope()},10)}});a._disableSelection(c(".jcrop-holder"));a._disableSelection(c("#imageContainer"));a._disableSelection(c("#aloha-CropNResize-btns"));c("body").trigger("aloha-image-crop-start",[a.imageObj])},_onCropSelect:function(){g("#aloha-CropNResize-btns").fadeIn("slow");
g(".jcrop-handle").mousedown(function(){g("#aloha-CropNResize-btns").hide()});g(".jcrop-tracker").mousedown(function(){g("#aloha-CropNResize-btns").hide()});if("undefined"!==typeof this.jcAPI&&null!==this.jcAPI){this.positionCropButtons();var a=this.jcAPI.tellSelect();g("#"+this.ui.imgResizeWidthField.getInputId()).val(a.w);g("#"+this.ui.imgResizeHeightField.getInputId()).val(a.h)}},endCrop:function(){this.jcAPI&&(this.jcAPI.destroy(),this.jcAPI=null);this.destroyCropButtons();this.ui._imageCropButton.setState(!1);
this.settings.ui.resizable&&this.startResize();c("body").trigger("aloha-image-crop-stop",[this.imageObj]);c("#"+this.ui.imgResizeHeightField.getInputId()).val(this.imageObj.height());c("#"+this.ui.imgResizeWidthField.getInputId()).val(this.imageObj.width())},acceptCrop:function(){this._onCropped(this.imageObj,this.jcAPI.tellSelect());this.endCrop()},startResize:function(){var a=this,b=this.imageObj,c=a.keepAspectRatio?a.aspectRatioValue:!1,b=this.imageObj.css({height:this.imageObj.height(),width:this.imageObj.width(),
position:"relative","max-height":"","max-width":""});b.resizable({maxHeight:a.settings.maxHeight,minHeight:a.settings.minHeight,maxWidth:a.settings.maxWidth,minWidth:a.settings.minWidth,aspectRatio:c,handles:a.settings.handles,grid:a.settings.grid,resize:function(b,c){q=!0;a._onResize(a.imageObj)},stop:function(b,c){q=!1;a._onResized(a.imageObj);this.enableCrop&&window.setTimeout(function(){a.ui.setScope();that.done(b)},10)}});b.css("display","inline-block");g(".ui-wrapper").attr("contentEditable",
!1).addClass("aloha-image-box-active Aloha_Image_Resize aloha").css({position:"relative",display:"inline-block","float":a.imageObj.css("float")}).bind("resizestart",function(a){a.preventDefault()}).bind("mouseup",function(a){a.originalEvent.stopSelectionUpdate=!0})},endResize:function(){this.imageObj&&this.imageObj.closest(".aloha-editable");this.imageObj&&this.imageObj.is(":ui-resizable")&&this.imageObj.resizable("destroy").css({top:0,left:0})},resetSize:function(){var a=this,b=new Image;b.onload=
function(){var c=a.getPluginFocus();a.settings.ui.resizable&&a.endResize();g(c).add(c.parent()).css({width:b.width+"px",height:b.height+"px","max-width":"","max-height":""});a.settings.ui.resizable&&a.resize()};b.src=a.getPluginFocus().attr("src")},reset:function(){this.settings.ui.crop&&this.endCrop();this.settings.ui.resizable&&this.endResize();if(!this._onReset(this.imageObj))for(var a=0;a<this.restoreProps.length;a++)if(this.imageObj.get(0)===this.restoreProps[a].obj){this.imageObj.attr("src",
this.restoreProps[a].src);this.imageObj.width(this.restoreProps[a].width);this.imageObj.height(this.restoreProps[a].height);break}}})});define("highlighteditables/highlighteditables-plugin",["aloha","jquery","aloha/plugin"],function(g,b,n){var l=window.GENTICS;return n.create("highlighteditables",{config:["highlight"],init:function(){var b=this,c;l.Utils.Position.addMouseMoveCallback(function(){var k,f;for(k=0;k<g.editables.length;k++)f=g.editables[k],c=b.getEditableConfig(f.obj),g.activeEditable||
f.isDisabled()||"highlight"!=c||f.obj.addClass("aloha-editable-highlight")});l.Utils.Position.addMouseStopCallback(function(){b.fade()});g.bind("aloha-editable-activated",function(c,f){b.fade()})},fade:function(){var d,c,k=function(){b(this).css("outline","")};for(d=0;d<g.editables.length;d++)c=g.editables[d].obj,c.hasClass("aloha-editable-highlight")&&c.css("outline",c.css("outlineColor")+" "+c.css("outlineStyle")+" 5px").removeClass("aloha-editable-highlight").animate({outlineWidth:"0px"},300,"swing",
k)}})});define("contenthandler/contenthandler-utils",["jquery"],function(g){return{wrapContent:function(b){return"string"===typeof b?g("<div>"+b+"</div>"):b instanceof g?g("<div>").append(b):null},isProppedParagraph:function(b){b=g.trim(b);if(!b)return!1;b=g("<div>"+b+"</div>")[0];return b.firstChild===b.lastChild&&"p"===b.firstChild.nodeName.toLowerCase()?(b=b.firstChild.children)&&1===b.length&&"br"===b[0].nodeName.toLowerCase():!1}}});define("contenthandler/wordcontenthandler",["jquery","aloha",
"aloha/contenthandlermanager","contenthandler/contenthandler-utils","util/dom"],function(g,b,n,l,d){function c(a){switch(a[0].nodeName.toLowerCase()){case "table":return 0===a.find("tbody,tr").length;case "tbody":return 0===a.find("tr").length;case "tr":return 0===a.find("td,th").length;default:return""===g.trim(a.text())}}function k(b){if(0===b.length||!a.test(b[0].outerHTML))return!1;b=b.find("*");var c,e;for(c=0;c<b.length;c++)if((e=b.eq(c).attr("style"))&&0<=e.toLowerCase().indexOf("mso")||(e=
b.eq(c).attr("class"))&&0<=e.toLowerCase().indexOf("mso"))return!0;return!1}function f(a){a.find("p.MsoTitle").each(function(){b.Markup.transformDomObject(g(this),"h1")});a.find("p.MsoSubtitle").each(function(){b.Markup.transformDomObject(g(this),"h2")})}var q=g,a=/mso/,e=/^#(.*)/;return n.createHandler({handleContent:function(a){var b=l.wrapContent(a);if(!b)return a;k(b)&&this.transformWordContent(b);return b.html()},isOrderedList:function(a){return"Wingdings"==a.css("fontFamily")||"Symbol"==a.css("fontFamily")?
!1:a.text().match(/^([0-9]{1,3}\.)|([0-9]{1,3}\)|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\)))$/)?!0:!1},transformListsFromWord:function(a){var b=this,c,e;e=a.find("p.MsoListParagraphCxSpFirst,p.MsoListParagraphCxSpMiddle,p.MsoListParagraphCxSpLast,p.MsoListParagraph,p span");e.each(function(){var a=q(this),b=a.css("font-family")||"",c=a.css("mso-list")||"",e=a.attr("style")||"";a.hasClass("MsoListParagraphCxSpFirst")||a.hasClass("MsoListParagraph")?a.addClass("aloha-list-element"):0<=b.indexOf("Symbol")?
a.closest("p").addClass("aloha-list-element"):0<=b.indexOf("Wingdings")?a.closest("p").addClass("aloha-list-element"):""!==c?a.closest("p").addClass("aloha-list-element"):0<=e.indexOf("mso-list")&&a.closest("p").addClass("aloha-list-element")});a.find("p span span span").each(function(){var a=q(this),b;0===q.trim(a.text()).replace(/&nbsp;/g,"").length&&(b=q.trim(a.parent().parent().text()).replace(/&nbsp;/g,""),b.match(/^([0-9]{1,3}\.)|([0-9]{1,3}\))|([a-zA-Z]{1,5}\.)|([a-zA-Z]{1,5}\))|(.)$/)&&(a.closest("p").addClass("aloha-list-element"),
a.parent().parent().addClass("aloha-list-bullet")))});e="p.aloha-list-element";c=":not("+e+", font)";e=a.find(e);0<e.length&&e.each(function(){var a=q(this),e,m,f,d,k,l,g,n;a.removeClass("aloha-list-element");a.find("font").each(function(){q(this).contents().unwrap()});n=[];g=parseFloat(a.css("marginLeft"));isNaN(g)&&(g=0);l=[];k=a.nextUntil(c);d=q(a.find("span.aloha-list-bullet"));0===d.length&&(d=a.find("span").eq(0));f=b.isOrderedList(d);d.remove();m=q(f?"<ol></ol>":"<ul></ul>");l.push(m);e=q("<li></li>");
m.append(e);a.contents().appendTo(e);a.replaceWith(m);k.each(function(){var a=q(this),c,k;if(!a.is("font")){a.find("font").each(function(){q(this).contents().unwrap()});c=parseFloat(a.css("marginLeft"));isNaN(c)&&(c=0);d=q(a.find("span.aloha-list-bullet"));0===d.length&&(d=a.find("span").eq(0));f=b.isOrderedList(d);d.remove();if(c>g)k=q(f?"<ol></ol>":"<ul></ul>"),m.children(":last").append(k),m=k,l.push(m),n.push(c),g=c;else if(c<g&&0<n.length){for(;0<n.length&&n[n.length-1]>c;)n.pop(),l.pop();m=
l[l.length-1];g=c}e=q("<li></li>");m.append(e);a.contents().appendTo(e);a.remove()}})})},removeParagraphNumbering:function(a){a=a.find("h1,h2,h3,h4,h5,h6");0<a.length&&a.each(function(){var a=q(this),b=a.find("span"),a=a.find("a");b.each(function(){q.trim(q(this).text()).match(/^([\.\(]?[\d\D][\.\(]?){1,4}$/)&&q(this).remove()});a.each(function(){"undefined"===typeof q(this).attr("href")&&q(this).contents().unwrap()})})},transformToc:function(a){a.find("[class*=MsoToc]").each(function(){var a=q(this),
b=a.find("span"),a=a.find("a");b.each(function(){q(this).attr("style")&&-1<q(this).attr("style").search("mso-hide")&&q(this).remove();q(this).contents().unwrap()});a.each(function(){q(this).contents().unwrap()})})},transformWordContent:function(a){this.transformToc(a);this.removeParagraphNumbering(a);this.transformListsFromWord(a);f(a);a=a.find("*");var b,d,k;for(k=0;k<a.length;k++)d=a.eq(k),b=d[0].nodeName.toLowerCase(),"a"===b?(b=d.attr("href"))&&e.test(g.trim(b))&&d.contents().unwrap():"div"===
b||"span"===b?d.contents().unwrap():"td"!==b&&c(d)&&d.contents().unwrap()}})});define("contenthandler/genericcontenthandler",["jquery","aloha","aloha/contenthandlermanager","contenthandler/contenthandler-utils"],function(g,b,n,l){function d(b){b.find("table").removeAttr("cellpadding").removeAttr("cellspacing").removeAttr("border").removeAttr("border-top").removeAttr("border-bottom").removeAttr("border-left").removeAttr("border-right");b.find("td").each(function(){var b;(b=g.trim(this.innerHTML))?
(b=g("<div>"+b+"</div>")[0],b=b.firstChild===b.lastChild&&"p"===b.firstChild.nodeName.toLowerCase()?(b=b.firstChild.children)&&1===b.length&&"br"===b[0].nodeName.toLowerCase():!1):b=!1;b&&(this.innerHTML="&nbsp;");b=g(">p",this);1===b.length&&b.contents().unwrap()});b.find("td,tr").removeAttr("width").removeAttr("height").removeAttr("valign");b.find("colgroup").remove()}return n.createHandler({handleContent:function(c){var k=l.wrapContent(c);if(!k)return c;if(k.find(".aloha-block").length)return k.html();
d(k);this.cleanLists(k);this.removeComments(k);this.unwrapTags(k);this.removeStyles(k);this.removeNamespacedElements(k);c=!0;b.settings.contentHandler&&b.settings.contentHandler.handler&&b.settings.contentHandler.handler.generic&&"undefinded"!==typeof b.settings.contentHandler.handler.generic.transformFormattings&&!b.settings.contentHandler.handler.generic.transformFormattings&&(c=!1);c&&this.transformFormattings(k);return k.html()},cleanLists:function(b){b.find("ul,ol").find(">:not(li)").remove()},
transformFormattings:function(c){c.find("strong,em,s,u,strike").each(function(){"STRONG"===this.nodeName?b.Markup.transformDomObject(g(this),"b"):"EM"===this.nodeName?b.Markup.transformDomObject(g(this),"i"):"S"===this.nodeName||"STRIKE"==this.nodeName?b.Markup.transformDomObject(g(this),"del"):"U"===this.nodeName&&g(this).contents().unwrap()})},transformLinks:function(b){b.find("a").each(function(){"undefined"===typeof g(this).attr("href")&&g(this).contents().unwrap()})},removeComments:function(b){var d=
this;b.contents().each(function(){8===this.nodeType?g(this).remove():d.removeComments(g(this))})},unwrapTags:function(c){c.find("span,font,div").not(".aloha-wai-lang").each(function(){"DIV"==this.nodeName?"<br>"===this.innerHTML?g(this).contents().unwrap():g(b.Markup.transformDomObject(g(this),"p").append("<br>")).contents().unwrap():g(this).contents().unwrap()})},removeStyles:function(b){var d=this;b.children("style").filter(function(){return"false"!==this.contentEditable}).remove();b.children().filter(function(){return"false"!==
this.contentEditable}).each(function(){g(this).removeAttr("style").removeClass();d.removeStyles(g(this))})},removeNamespacedElements:function(b){b.find("*").each(function(){var b=this.prefix?this.prefix:this.scopeName?this.scopeName:void 0;if(b&&"HTML"!==b||0<=this.nodeName.indexOf(":")){var b=g(this),c=b.contents();c.length?c.unwrap():b.remove()}})}})});p.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i;p.RELATIVE="__relative__";window.Sanitize=p;p.prototype.clean_node=function(g){function b(b,
d){var f;for(f=0;f<d.length;f++)if(d[f]==b)return f;return-1}function n(){var b=[],d={},f,l;for(f=0;f<arguments.length;f++)if(arguments[f]&&arguments[f].length)for(l=0;l<arguments[f].length;l++)d[arguments[f][l]]||(d[arguments[f][l]]=!0,b.push(arguments[f][l]));return b}function l(c){for(var d,f=0;f<this.filters.length;f++)if(!this.filters[f](c)){d=c.cloneNode(!0);this.current_element.appendChild(d);return}switch(c.nodeType){case 1:var g,a,e,m,v,x,z;g=[];f=c;m=!1;for(a=0;a<this.transformers.length;a++)if(e=
this.transformers[a]({allowed_elements:this.allowed_elements,config:this.config,node:c,node_name:c.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}),null!=e)if("object"==typeof e){if(e.whitelist_nodes&&e.whitelist_nodes instanceof Array)for(m=0;m<e.whitelist_nodes.length;m++)-1==b(e.whitelist_nodes[m],this.whitelist_nodes)&&this.whitelist_nodes.push(e.whitelist_nodes[m]);m=e.whitelist?!0:!1;e.attr_whitelist&&(g=n(g,e.attr_whitelist));f=e.node?e.node:f}else throw Error("transformer output must be an object or null");
c=this.jQuery;c=c.browser.msie&&"7.0"===c.browser.version;e=f.nodeName.toLowerCase();a=this.current_element;if(this.allowed_elements[e]||m){this.current_element=this.dom.createElement(f.nodeName);a.appendChild(this.current_element);m=n(this.config.attributes[e],this.config.attributes.__ALL__,g);for(g=0;g<m.length;g++)if(d=m[g],v=f.attributes[d])x=!0,this.config.protocols[e]&&this.config.protocols[e][d]&&(x=this.config.protocols[e][d],x=(z=v.nodeValue.toLowerCase().match(p.REGEX_PROTOCOL))?-1!=b(z[1],
x):-1!=b(p.RELATIVE,x)),x&&(!c||c&&"style"!==d)&&(x=document.createAttribute(d),x.value=v.nodeValue,this.current_element.setAttributeNode(x));if(this.config.add_attributes[e])for(d in this.config.add_attributes[e])if(!c||c&&"style"!==d)x=document.createAttribute(d),x.value=this.config.add_attributes[e][d],this.current_element.setAttributeNode(x)}else if(-1!=b(f,this.whitelist_nodes)){for(this.current_element=f.cloneNode(!0);0<this.current_element.childNodes.length;)this.current_element.removeChild(this.current_element.firstChild);
a.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[e])for(g=0;g<f.childNodes.length;g++)l.call(this,f.childNodes[g]);this.current_element.normalize&&this.current_element.normalize();this.current_element=a;break;case 3:d=c.cloneNode(!1);this.current_element.appendChild(d);break;case 5:d=c.cloneNode(!1);this.current_element.appendChild(d);break;case 8:this.config.allow_comments&&(d=c.cloneNode(!1),this.current_element.appendChild(d))}}var d=
this.dom.createDocumentFragment();this.current_element=d;this.whitelist_nodes=[];for(i=0;i<g.childNodes.length;i++)l.call(this,g.childNodes[i]);d.normalize&&d.normalize();return d};define("vendor/sanitize",function(){});define("contenthandler/sanitizecontenthandler","aloha/core jquery aloha/contenthandlermanager aloha/plugin aloha/console vendor/sanitize".split(" "),function(g,b,n,l,d){function c(c){var d=["restricted","basic","relaxed"],a=g.defaults.supports,a=g.settings.contentHandler.sanitize&&
-1<b.inArray(g.settings.contentHandler.sanitize,d)?g.defaults.sanitize[g.settings.contentHandler.sanitize]:g.defaults.sanitize.relaxed;g.settings.contentHandler.allows&&(a=g.settings.contentHandler.allows);c&&(a=c);a.filters=[function(a){return"false"!=a.contentEditable}];k=new p(a,b)}var k;g.defaults.sanitize||(g.defaults.sanitize={});g.defaults.sanitize.restricted={elements:"b em i strong u del p span div br".split(" ")};g.defaults.sanitize.basic={elements:"a abbr b blockquote br cite code dd del dl dt em i li ol p pre q small strike strong sub sup u ul".split(" "),
attributes:{a:["href"],blockquote:["cite"],q:["cite"],abbr:["title"]},protocols:{a:{href:["ftp","http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},q:{cite:["http","https","__relative__"]}}};g.defaults.sanitize.relaxed={elements:"a abbr b blockquote br caption cite code col colgroup dd del dl dt em h1 h2 h3 h4 h5 h6 i img li ol p pre q small strike strong sub sup table tbody td tfoot th thead tr u ul span hr object div".split(" "),attributes:{a:"href title id class target data-gentics-aloha-repository data-gentics-aloha-object-id".split(" "),
div:["id","class","style"],abbr:["title"],blockquote:["cite"],br:["class"],col:["span","width"],colgroup:["span","width"],img:"align alt height src title width class data-caption data-align data-width data-original-image".split(" "),ol:["start","type"],p:["class","style","id"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width"],th:"abbr axis colspan rowspan scope width".split(" "),ul:["type"],span:["class","style","lang","xml:lang","role"]},protocols:{a:{href:["ftp",
"http","https","mailto","__relative__"]},blockquote:{cite:["http","https","__relative__"]},img:{src:["http","https","__relative__"]},q:{cite:["http","https","__relative__"]}}};return n.createHandler({handleContent:function(f){var d,a;if(g.activeEditable&&g.settings.contentHandler&&g.settings.contentHandler.handler&&g.settings.contentHandler.handler.sanitize)if(g.settings.contentHandler.handler.sanitize&&(a=g.settings.contentHandler.handler.sanitize),"undefined"!==typeof a["#"+g.activeEditable.getId()])d=
a;else for(var e=g.activeEditable.obj.attr("class").split(" "),m=0;m<e.length;m++)"undefined"!==typeof a["."+e[m]]&&(d=a["."+e[m]]);"undefined"!==typeof k&&"undefined"===typeof d||c(d);"string"===typeof f?f=b("<div>"+f+"</div>").get(0):f instanceof b&&(f=b("<div>").append(f).get(0));return b("<div>").append(k.clean_node(f)).html()}})});define("contenthandler/blockelementcontenthandler","jquery aloha/core aloha/contenthandlermanager contenthandler/contenthandler-utils util/functions util/html".split(" "),
function(g,b,n,l,d,c){function k(a,b){var e=c.findNodeRight(b.lastChild,x);e&&"br"===e.nodeName.toLowerCase()&&g(e).remove()}function f(a,b){var c=g(b);c.filter(m).remove();g.browser.msie&&(c.filter("br.aloha-end-br").remove(),c.filter(e).each(k));c.children(v).each(f)}function q(a,b){var c=g(b);c.filter(m).append("\u200b");c.children(v).each(q)}function a(b,c){var e=g(c);e.filter(m).append("<br/>");e.children(v).each(a)}var e=c.BLOCKLEVEL_ELEMENTS.join(),m=c.BLOCKLEVEL_ELEMENTS.join(":empty,")+":empty",
v=":not(.aloha-block)",x=d.complement(c.isIgnorableWhitespace);return n.createHandler({handleContent:function(b,c){if(!c)return b;var e=l.wrapContent(b);if(!e)return b;switch(c.command){case "initEditable":e.children(v).each(f);g.browser.msie&&7>=g.browser.version&&e.children(v).each(q);break;case "getContents":e.children(v).each(a)}return e.html()}})});define("contenthandler/contenthandler-plugin","jquery aloha/plugin aloha/contenthandlermanager contenthandler/wordcontenthandler contenthandler/genericcontenthandler contenthandler/sanitizecontenthandler contenthandler/blockelementcontenthandler".split(" "),
function(g,b,n,l,d,c,k){var f={word:l,generic:d,sanitize:c,blockelement:k};return b.create("contenthandler",{init:function(){for(var b in f)f.hasOwnProperty(b)&&n.register(b,f[b])}})});define("commands/inserthtml","aloha/core jquery aloha/command aloha/selection util/dom aloha/contenthandlermanager aloha/console".split(" "),function(g,b,n,l,d,c,k){n.register("inserthtml",{action:function(f,l){function a(c){var m=b(c);if(!d.insertIntoDOM(m,l,e,!1))for(m=m.contents(),(d.isBlockLevelElement(c)||d.isListElement(c))&&
a(b("<br/>").get(0)),n=m.length-1;0<=n;--n)a(m[n])}var e=b(d.getEditingHostOf(l.startContainer)),m=l.commonAncestorContainer,n,x=[];f=c.handleContent(f,{contenthandler:g.settings.contentHandler.insertHtml});if("string"===typeof f)f=b("<div>"+f+"</div>");else if(f instanceof b)f=b("<div>").append(f);else throw"INVALID_VALUE_ERR";x=f.contents();d.removeRange(l);for(n=x.length-1;0<=n;--n)a(x[n]);0<x.length?l=d.setCursorAfter(x.get(x.length-1)):l.select();d.doCleanup({merge:!0,removeempty:!0},l,m);try{l.select()}catch(z){k.warn("Error:",
z)}}})});define("commands/commands-plugin",["aloha/command","./inserthtml"],function(g,b){});define("block/blockmanager","aloha jquery ui/scopes aloha/observable aloha/registry util/class util/strings util/maps".split(" "),function(g,b,n,l,d,c,k,f){var q=window.GENTICS,a=new (c.extend(l,{defaults:{"aloha-block-type":"DefaultBlock"},blockTypes:null,blocks:null,_highlightedBlocks:null,_activeBlock:null,_dragdropEnabled:!0,_constructor:function(){n.createScope("Aloha.Block");this.blockTypes=new d;this.blocks=
new d;this._highlightedBlocks={}},registerEventHandlers:function(){var a=this;this._registerEventHandlersForDeactivatingAlohaBlock();this._registerEventHandlersForDeterminingCurrentlyActiveBlock();this._registerEventHandlersForBlockDeletion();this._registerEventHandlersForCutCopyPaste();this._registerEventHandlersForEditableActivated();g.bind("aloha-selection-changed",function(c,f,d){f&&0<b(f.getCommonAncestorContainer()).parents(".aloha-block").length||a._deactivateHighlightedBlocks()})},_registerEventHandlersForDeactivatingAlohaBlock:function(){var a=
this;b(document).bind("click",function(c){f.isEmpty(a._highlightedBlocks)||0<b(c.target).closest(".aloha-ui,.aloha-block-do-not-deactivate,.aloha-block").length||a._deactivateHighlightedBlocks()})},_registerEventHandlersForDeterminingCurrentlyActiveBlock:function(){var a=this;this.bind("block-selection-change",function(b){a._activeBlock=0<b.length?b[0]:null})},_registerEventHandlersForBlockDeletion:function(){var a=this;g.bind("aloha-command-will-execute",function(c,f){var d=f.commandId,k=0===g.getSelection().getRangeCount()||
1===g.getSelection().getRangeCount()&&g.getSelection().getRangeAt(0).endContainer===g.getSelection().getRangeAt(0).startContainer&&g.getSelection().getRangeAt(0).endContainer===b("body")[0]||1===g.getSelection().getRangeCount()&&g.getSelection().getRangeAt(0).endContainer===g.getSelection().getRangeAt(0).startContainer&&g.getSelection().getRangeAt(0).startOffset+1===g.getSelection().getRangeAt(0).endOffset;if(a._activeBlock&&("delete"===d||"forwarddelete"===d)&&k)f.preventDefault=!0,a._activeBlock.destroy();
else if(!a._activeBlock&&("delete"===d||"forwarddelete"===d)&&1===g.getSelection().getRangeCount()&&!1===g.getSelection().getRangeAt(0).collapsed){var l;l=function(a){for(var c,e=0,m=a.length;e<m;e++)if(c=a[e],1===c.domobj.nodeType){var f=b(c.domobj);"full"===c.selection&&f.is(".aloha-block")?f.remove():l(c.children)}};l(g.Selection.getSelectionTree())}});b(window.document).keydown(function(c){if(0<b(c.target).closest(".aloha-ui").length)return!0;if(a._activeBlock&&(46===c.which||8===c.which)&&!1===
a._activeBlock._isInsideNestedEditable&&(b.browser.msie&&8>=parseInt(b.browser.version,10)&&a._activeBlock.$element.parents(".aloha-editable,.aloha-block").first().hasClass("aloha-editable")||a._activeBlock.shouldDestroy()))return a._activeBlock.destroy(),c.preventDefault(),!1})},_registerEventHandlersForCutCopyPaste:function(){var a=this,c=!1,f=!1,d=null;b(window.document).keydown(function(d){g.activeEditable&&a._activeBlock&&b.contains(a._activeBlock.$element.get(0),g.activeEditable.obj.get(0))||
(a._activeBlock&&(d.ctrlKey||d.metaKey)&&67===d.which&&(c=!0,a._activeBlock.$element.attr("data-aloha-block-copy-only-block","true"),q.Utils.Dom.selectDomNode(a._activeBlock.$element[0])),a._activeBlock&&(d.ctrlKey||d.metaKey)&&88===d.which&&(f=!0,a._activeBlock.$element.attr("data-aloha-block-copy-only-block","true"),q.Utils.Dom.selectDomNode(a._activeBlock.$element[0])))});b(window.document).keyup(function(b){f||!c||67!==b.which&&18!==b.which&&91!==b.which||(c=!1,a._activeBlock.$element.removeAttr("data-aloha-block-copy-only-block"),
d&&(d=null));!f||67!==b.which&&18!==b.which&&88!==b.which||(f=!1)})},_registerEventHandlersForEditableActivated:function(){var a=this;g.bind("aloha-editable-activated",function(b,c){if(c.editable){var f=a.getBlock(c.editable.obj.closest(".aloha-block"));f&&f.activate()}})},initializeBlockLevelDragDrop:function(){var a=this;b.each(g.editables,function(b,c){c.obj.data("block-dragdrop",a._dragdropEnabled);a.createBlockLevelSortableForEditableOrBlockCollection(c.obj)});g.bind("aloha-editable-created",
function(b,c){c.obj.data("block-dragdrop",a._dragdropEnabled);a.createBlockLevelSortableForEditableOrBlockCollection(c.obj)})},createBlockLevelSortableForEditableOrBlockCollection:function(a){a.hasClass("aloha-block-blocklevel-sortable")||(a.addClass("aloha-block-blocklevel-sortable").sortable({revert:100,handle:".aloha-block-draghandle-blocklevel",connectWith:".aloha-block-blocklevel-sortable.aloha-block-dropzone",disabled:!this._dragdropEnabled,start:function(a,b){b.item.data("block-sort-allowed",
0<b.item.parents(".aloha-block-dropzone").length)},change:function(a,b){b.item.data("block-sort-allowed",0<b.placeholder.parents(".aloha-block-dropzone").length)},stop:function(a,c){c.item.data("block-sort-allowed")||b(this).sortable("cancel");c.item.removeData("block-sort-allowed")}}),a.get(0).ondragstart=function(a,b){if(!b||!b.helper||!b.helper.is(".aloha-block"))return!1})},setDragDropState:function(a){this._dragdropEnabled=a},getDragDropState:function(){return this._dragdropEnabled},registerBlockType:function(a,
b){n.createScope("Aloha.Block."+a,"Aloha.Block");this.blockTypes.register(a,b)},_blockify:function(a,c){var f=b(a),d=g.require("block/block-plugin"),k=f[0].tagName.toLowerCase();-1===b.inArray(k,d.settings.rootTags)?g.Log.error("block/blockmanager","Blocks can only be created from ["+d.settings.rootTags.join(", ")+"] element. You passed "+k+"."):(d=this.getConfig(f,c),this.blockTypes.has(d["aloha-block-type"])?(f=new (this.blockTypes.get(d["aloha-block-type"]))(f,d),f.$element.addClass("aloha-block-"+
d["aloha-block-type"]),this.blocks.register(f.getId(),f)):g.Log.error("block/blockmanager","Block Type "+d["aloha-block-type"]+" not found!"))},_unblockify:function(a){(a=this.getBlock(a))&&a.unblock()},getConfig:function(a,c){var f=a.clone(!0),d=f.data(),l={};f.removeData();for(var g in d)d.hasOwnProperty(g)&&(l[k.camelCaseToDashes(g)]=d[g]);return b.extend({},this.defaults,c,l)},getBlock:function(a){"object"===typeof a&&(a=b(a),a.hasClass("aloha-block-inner")&&(a=a.parent()),a=a.attr("id"));return this.blocks.get(a)},
_unregisterBlock:function(a){a="object"===typeof a?a.getId():a;this.blocks.unregister(a)},_deactivateHighlightedBlocks:function(){b.each(b.extend({},this._highlightedBlocks),function(b){(b=a.getBlock(b))&&b.deactivate()})},_getHighlightedBlocks:function(){var a={};b.each(this.blocks.getEntries(),function(b,c){c.isActive()&&(a[b]=c)});return a},_setHighlighted:function(a){this._highlightedBlocks[a.id]=!0},_setUnhighlighted:function(a){delete this._highlightedBlocks[a.id]}}));g.Block=g.Block||{};return g.Block.BlockManager=
a});define("block/editormanager",["aloha/registry"],function(g){return new (g.extend({createEditor:function(b){if(!this.has(b.type))throw'Editor for type "'+b.type+'" not found.';return new (this.get(b.type))(b)}}))});define("block/sidebarattributeeditor",["jquery","block/blockmanager","aloha/sidebar","block/editormanager","util/class"],function(g,b,n,l,d){return new (d.extend({_sidebar:null,init:function(){this._sidebar=n.right.show();b.bind("block-selection-change",this._onBlockSelectionChange,
this)},_onBlockSelectionChange:function(b){var d=this;this._sidebar&&g.each(b,function(){var b=this.getSchema(),c=this,a=[];b&&d._sidebar.addPanel({title:c.getTitle(),expanded:!0,onInit:function(){var e=g("<form />");e.submit(function(){return!1});g.each(b,function(b,f){var d=l.createEditor(f);d.bind("change",function(a){c.attr(b,a)});c.bind("change",function(){d.setValue(c.attr(b))});e.append(d.render());d.setValue(c.attr(b));a.push(d)});this.setContent(e)},deactivate:function(){g.each(a,function(a,
b){b._deactivate()});this.isActive=!1;this.effectiveElement=null}})})}}))});define("block/block","aloha jquery block/blockmanager aloha/observable ui/scopes util/class PubSub".split(" "),function(g,b,n,l,d,c,k){function f(a){a=a.closest(".aloha-editable");return a.length?!!a.data("block-dragdrop"):!0}var q=window.GENTICS;l=c.extend(l,{title:null,id:null,$element:null,_currentlyRendering:!1,_initialized:!1,_isInsideNestedEditable:!1,_constructor:function(a,c){var e=this;this.$element=a;a.attr("id")?
this.id=a.attr("id"):(this.id=q.Utils.guid(),a.attr("id",this.id));a.contentEditable(!1);a.addClass("aloha-block");this.isDraggable()&&(a.find("img").attr("draggable","false"),a.find("a").attr("draggable","false"));b.each(c,function(a,b){e._setAttribute(a,b)});this._onElementClickHandler=function(a){b(a.target).closest(".aloha-block").get(0)===e.$element.get(0)&&(e._fixScrollPositionBugsInIE(),e.activate(a.target,a))};this._connectThisBlockToDomElement(a,function(){k.pub("aloha.block.initialized",
{block:e})});this._initialized=!0},_onElementClickHandler:null,_preventSelectionChangedEventHandler:function(a){"dblclick"===a.type||b(a.target).is(".aloha-editable")||g.Selection.preventSelectionChanged()},_connectThisBlockToDomElement:function(a,c){var e=this,f=b(a);this._disconnectFromDomElement();this.$element=f;this.$element.bind("click",this._onElementClickHandler);this.$element.bind("mousedown",this._preventSelectionChangedEventHandler);this.$element.bind("focus",this._preventSelectionChangedEventHandler);
this.$element.bind("dblclick",this._preventSelectionChangedEventHandler);this.init(this.$element,function(){window.setTimeout(function(){e._postProcessElementIfNeeded();c&&c()},5)})},_disconnectFromDomElement:function(){this.$element&&(this.$element.unbind("click",this._onElementClickHandler),this.$element.unbind("mousedown",this._preventSelectionChangedEventHandler),this.$element.unbind("focus",this._preventSelectionChangedEventHandler),this.$element.unbind("dblclick",this._preventSelectionChangedEventHandler))},
_fixScrollPositionBugsInIE:function(){var a=b(window).scrollTop();window.setTimeout(function(){b(window).scrollTop()!==a&&b(window).scrollTop(a)},10)},init:function(a,b){b()},shouldDestroy:function(){var a=this.$element.parent().closest(".aloha-block,.aloha-editable,.aloha-block-collection");return a.hasClass("aloha-block-collection")&&"div"===this.$element[0].tagName.toLowerCase()?!0:a.hasClass("aloha-editable")},destroy:function(a){if(this.shouldDestroy()||!0===a){var b=this,c=new q.Utils.RangeObject;
c.startContainer=c.endContainer=this.$element.parent()[0];c.startOffset=c.endOffset=q.Utils.Dom.getIndexInParent(this.$element[0]);n.trigger("block-delete",this);this.free();var e="span"===this.$element[0].tagName.toLowerCase();this.$element.fadeOut("fast",function(){b.$element.remove();n.trigger("block-selection-change",[]);window.setTimeout(function(){e&&c.select()},5)})}},unblock:function(){this.deactivate();this._disconnectFromDomElement();this.$element.removeClass("aloha-block");this.$element.children(".aloha-block-handle").remove();
this.free()},free:function(){n._unregisterBlock(this);this.unbindAll()},getId:function(){return this.id},getSchema:function(){return null},getTitle:function(){return this.title},isDraggable:function(){return"div"===this.$element[0].tagName.toLowerCase()&&this.$element.parents(".aloha-editable,.aloha-block,.aloha-block-collection").first().hasClass("aloha-block-collection")?!0:this.$element.parents(".aloha-editable,.aloha-block").first().hasClass("aloha-editable")},activate:function(a,c){var e=[];
b.each(n._getHighlightedBlocks(),function(){this.deactivate()});"true"!==this.$element.attr("data-block-skip-scope")&&d.setScope("Aloha.Block."+this.attr("aloha-block-type"));this.$element.addClass("aloha-block-active");this._highlight();e.push(this);this.$element.parents(".aloha-block").each(function(){var a=n.getBlock(this);a&&(a._highlight(),e.push(a))});b(a).closest(".aloha-editable,.aloha-block,.aloha-table-cell-editable,.aloha-table-cell_active").first().hasClass("aloha-block")?(this._isInsideNestedEditable=
!1,g.getSelection().removeAllRanges()):(this._isInsideNestedEditable=!0,c&&g.Selection.updateSelection(c));n.trigger("block-activate",e);n.trigger("block-selection-change",e)},deactivate:function(){var a=this,b=[this];this._unhighlight();this.$element.parents(".aloha-block").each(function(){b.push(this);a._unhighlight()});this.$element.removeClass("aloha-block-active");n.trigger("block-deactivate",b);n.trigger("block-selection-change",[])},isActive:function(){return this.$element.hasClass("aloha-block-active")},
_highlight:function(){this.$element.addClass("aloha-block-highlighted");n._setHighlighted(this)},_unhighlight:function(){this.$element.removeClass("aloha-block-highlighted");n._setUnhighlighted(this)},_update:function(){var a=this;!this._currentlyRendering&&this._initialized&&(this._currentlyRendering=!0,this.update(this.$element,function(){a._postProcessElementIfNeeded()}),this._currentlyRendering=!1)},update:function(a,b){b()},_postProcessElementIfNeeded:function(){this.createEditablesIfNeeded();
this._checkThatNestedBlocksAreStillConsistent();this._makeNestedBlockCollectionsSortable();this.renderBlockHandlesIfNeeded();this.isDraggable()&&"span"===this.$element[0].tagName.toLowerCase()?(this._setupDragDropForInlineElements(),this._disableUglyInternetExplorerDragHandles()):this.isDraggable()&&"div"===this.$element[0].tagName.toLowerCase()&&(this._setupDragDropForBlockElements(),this._disableUglyInternetExplorerDragHandles());this._hideDragHandlesIfDragDropDisabled();this._attachDropzoneHighlightEvents()},
_checkThatNestedBlocksAreStillConsistent:function(){this.$element.find(".aloha-block").each(function(){var a=n.getBlock(this);a&&a.$element[0]!==this&&a._connectThisBlockToDomElement(this)})},_makeNestedBlockCollectionsSortable:function(){var a=this;this.$element.find(".aloha-block-collection").each(function(){var c=b(this);c.closest(".aloha-block").get(0)===a.$element.get(0)&&n.createBlockLevelSortableForEditableOrBlockCollection(c)})},_disableUglyInternetExplorerDragHandles:function(){b.browser.msie&&
(this.$element.get(0).onresizestart=function(a){return!1},this.$element.get(0).oncontrolselect=function(a){return!1},this.$element.get(0).onmovestart=function(a){return!1})},_hideDragHandlesIfDragDropDisabled:function(){this._dd_isDragdropEnabled()||this.$element.find(".aloha-block-draghandle").each(function(){var a=b(this);f(a)||a.removeClass("aloha-block-draghandle")})},_attachDropzoneHighlightEvents:function(){var a=this;this.$element.delegate(".aloha-block-draghandle","mousedown",function(){var c=
a.$element.parents(".aloha-editable").first().data("block-dropzones")||[];b.each(c,function(a,c){var e=b(c);b(e).each(function(){b(this).data("block-dragdrop")&&b(this).addClass("aloha-block-dropzone")})});b(document).one("mouseup.aloha-block-dropzone",function(c){c=a.$element.parents(".aloha-editable").first().data("block-dropzones")||[];b.each(c,function(a,c){b(c).removeClass("aloha-block-dropzone")})})})},_setupDragDropForInlineElements:function(){var a=this,c=null,e=!1,f=null,d=null,k=function(){if(c){var k=
b(c);k.is(".aloha-block-dropInlineElementIntoEmptyBlock")?(k.children().remove(),k.append(f)):k.is(".aloha-block-droppable-right")?(k.html(k.html()+" "),k.after(f)):(0<k.prev("[data-i]").length&&k.prev("[data-i]").html(k.prev("[data-i]").html()+" "),k.html(" "+k.html()),k.before(f));f.removeClass("ui-draggable").css({left:0,top:0});a._fixScrollPositionBugsInIE()}b(".aloha-block-dropInlineElementIntoEmptyBlock").removeClass("aloha-block-dropInlineElementIntoEmptyBlock");d.droppable("destroy");d=null;
e=!0},l=[];this.$element.draggable({handle:".aloha-block-draghandle",scope:"aloha-block-inlinedragdrop",disabled:!this._dd_isDragdropEnabled(),revert:function(){return null===c||!e},revertDuration:250,stop:function(){b.browser.msie&&7===parseInt(b.browser.version,10)&&k();b.each(l,function(){a._dd_traverseDomTreeAndRemoveSpans(this)});f=null;l=[]},start:function(){e=!1;l=[];b(".aloha-editable").children("p:empty").html("&nbsp;");var g={tolerance:"pointer",addClasses:!1,scope:"aloha-block-inlinedragdrop",
over:function(e,d){-1===b.inArray(this,l)&&l.push(this);var k=1===b(this).contents().length&&1===b(this).children("br").length;f=d.draggable;b(this).is(":empty")||k||"&nbsp;"===b(this).html()?(b(this).addClass("aloha-block-dropInlineElementIntoEmptyBlock"),c=this):(a._dd_traverseDomTreeAndWrapCharactersWithSpans(this),b("span[data-i]",this).droppable({tolerance:"pointer",addClasses:!1,scope:"aloha-block-inlinedragdrop",over:function(){c&&b(c).removeClass("aloha-block-droppable");c=this;b(this).addClass("aloha-block-droppable")},
out:function(){b(this).removeClass("aloha-block-droppable");c===this&&(c=null)}}),b.ui.ddmanager.prepareOffsets(d.draggable.data("draggable"),e))},out:function(){b(this).removeClass("aloha-block-dropInlineElementIntoEmptyBlock")},drop:function(){b.browser.msie&&7===parseInt(b.browser.version,10)||k()}};d=b(".aloha-editable.aloha-block-dropzone").children(":not(.aloha-block)");d.droppable(g);b(".aloha-table-cell-editable").droppable(g)}})},_dd_traverseDomTreeAndWrapCharactersWithSpans:function(a){for(var b,
c=0,e=a.childNodes.length;c<e;c++)if(b=a.childNodes[c],1===b.nodeType)if(!~b.className.indexOf("aloha-block")&&void 0===b.attributes["data-i"])this._dd_traverseDomTreeAndWrapCharactersWithSpans(b);else{if(b.attributes["data-i"])break}else 3===b.nodeType&&(b=this._dd_insertSpans(b),c+=b,e+=b)},_dd_splitText:function(a){a=a.split(/(?=\b)/);for(var b=[],c=!1,e=0,f=a.length;e<f;e++)/[^\t\n\r ]/.test(a[e])?c?(b.push(" "+a[e]),c=!1):b.push(a[e]):c=!0;c&&(b[b.length-1]+=" ");return b},_dd_insertSpans:function(a){var c=
a.nodeValue;if(!/[^\t\n\r ]/.test(c))return 0;for(var e=document.createDocumentFragment(),c=this._dd_splitText(c),f=c.length,d,k,l,g=0,q=0;q<f;q++)k=c[q],0!==k.length&&(l=Math.floor(k.length/2),d=parseInt(b.browser.version,10),!b.browser.msie||7!==d&&8!==d||(l=0),0<l&&(d=document.createElement("span"),d.appendChild(document.createTextNode(k.substr(0,l))),d.setAttribute("data-i",q),e.appendChild(d),g++),d=document.createElement("span"),k=k.substr(l),d.appendChild(document.createTextNode(k)),d.setAttribute("data-i",
q),d.setAttribute("class","aloha-block-droppable-right"),e.appendChild(d),g++);a.parentNode.replaceChild(e,a);return g-1},_dd_traverseDomTreeAndRemoveSpans:function(a){var b=[],c;c=function(a){for(var e=!1,m,d,f,k=0,l=a.childNodes.length;k<l;k++)f=a.childNodes[k],1===f.nodeType&&(void 0!==f.attributes["data-i"]?(e||(e=!0,m="",d=void 0),e&&(m+=f.firstChild.nodeValue,d&&b.push(d),d=f)):(e&&(e=!1,d.parentNode.replaceChild(document.createTextNode(m),d)),~f.className.indexOf("aloha-block")||c(f)));e&&
d.parentNode.replaceChild(document.createTextNode(m),d)};c(a);a=0;for(var e=b.length;a<e;a++)b[a].parentNode.removeChild(b[a])},_dd_isDragdropEnabled:function(){return f(this.$element.parent())},_setupDragDropForBlockElements:function(){this.$element.find(".aloha-block-draghandle").addClass("aloha-block-draghandle-blocklevel")},createEditablesIfNeeded:function(){this.$element.find(".aloha-editable").aloha()},renderBlockHandlesIfNeeded:function(){this.isDraggable()&&0===this.$element.children(".aloha-block-draghandle").length&&
this.$element.prepend('<span class="aloha-block-handle aloha-block-draghandle aloha-cleanme"></span>')},attr:function(a,c,e){var d=this,f=!1;if(2<=arguments.length){if("aloha-block-"===a.substr(0,12)){g.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")");return}this._getAttribute(a)!==c&&(f=!0);this._setAttribute(a,c)}else if("object"===typeof a)b.each(a,function(a,b){"aloha-block-"===a.substr(0,12)?
g.Log.error("block/block","It is not allowed to set internal block attributes (starting with aloha-block-) through Block.attr() (You tried to set "+a+")"):(d._getAttribute(a)!==b&&(f=!0),d._setAttribute(a,b))});else return"string"===typeof a?this._getAttribute(a):this._getAttributes();f&&!e&&(this._update(),this.trigger("change"),g.activeEditable&&g.activeEditable.smartContentChange({type:"block-change"}));return null},_setAttribute:function(a,b){this.$element.attr("data-"+a.toLowerCase(),b)},_getAttribute:function(a){return this.$element.attr("data-"+
a.toLowerCase())},_getAttributes:function(){var a={};b.each(this.$element[0].attributes,function(b,c){"data-"===c.name.substr(0,5)&&(a[c.name.substr(5).toLowerCase()]=c.value)});return a}});c=l.extend({update:function(a,b){b()}});var a=l.extend({title:"Debugging",init:function(a,b){this.update(a,b)},update:function(a,c){a.css({display:"block"});var e='<table class="debug-block">';b.each(this.attr(),function(a,b){e+="<tr><th>"+a+"</th><td>"+b+"</td></tr>"});e+="</table>";a.html(e);c()}}),e=l.extend({title:"EmptyBlock",
init:function(){},activate:function(){},deactivate:function(){},renderBlockHandlesIfNeeded:function(){}});return{AbstractBlock:l,DefaultBlock:c,DebugBlock:a,EmptyBlock:e}});define("block/blockcontenthandler",["jquery","aloha/contenthandlermanager","block/blockmanager"],function(g,b,n){return b.createHandler({handleContent:function(b){"string"===typeof b?b=g("<div>"+b+"</div>"):b instanceof g&&(b=g("<div>").append(b));0<b.find('.aloha-block[data-aloha-block-copy-only-block="true"]').length&&(b.find(".aloha-block:not([id])").remove(),
b.find(".aloha-block + span:empty").remove(),b.find("div:empty").remove(),b.find("br.Apple-interchange-newline").remove(),b.find(".aloha-block").prev("br").remove(),b.find("div > br:only-child").parent().remove());b.find(".aloha-block").each(function(){var b=g(this),c={},k={};g.each(b[0].attributes,function(a,b){"id"!==b.nodeName&&(b.nodeName.match(/^data-/)?k[b.nodeName.substr(5)]=b.nodeValue:c[b.nodeName]=b.nodeValue)});var f=GENTICS.Utils.guid(),l=g("<"+this.tagName+"/>").attr(c).attr("id",f).removeClass("aloha-block-active").removeClass("aloha-block").html(b.html());
b.replaceWith(l);window.setTimeout(function(){n._blockify(g("#"+f),k)},50)});return b.html()}})});define("block/editor",["jquery","aloha/observable","util/class"],function(g,b,n){b=n.extend(b,{schema:null,_constructor:function(a){this.schema=a},render:function(){},getValue:function(){},setValue:function(a){},destroy:function(){},_deactivate:function(){this.trigger("change",this.getValue());this.destroy()}});n=b.extend({formInputElementDefinition:null,_$formInputElement:null,render:function(){var a=
g('<div class="aloha-block-editor" />'),b=GENTICS.Utils.guid();a.append(this.renderLabel().attr("id",b));a.append(this.renderFormElement().attr("id",b));return a},renderLabel:function(){var a=g("<label />");a.html(this.schema.label);return a},renderFormElement:function(){var a=this;this._$formInputElement=g(this.formInputElementDefinition);this.afterRenderFormElement(this._$formInputElement);this._$formInputElement.change(function(){a.trigger("change",a.getValue())});return this._$formInputElement},
afterRenderFormElement:function(a){},getValue:function(){return this._$formInputElement.val()},setValue:function(a){this._$formInputElement.val(a)},destroy:function(){this._$formInputElement.remove()}});var l=n.extend({formInputElementDefinition:'<input type="text" />'}),d=n.extend({formInputElementDefinition:'<input type="range" />',afterRenderFormElement:function(a){this.schema.range&&(this.schema.range.min&&a.attr("min",this.schema.range.min),this.schema.range.max&&a.attr("max",this.schema.range.max),
this.schema.range.step&&a.attr("step",this.schema.range.step))}}),c=n.extend({formInputElementDefinition:'<input type="url" />'}),k=n.extend({formInputElementDefinition:'<input type="email" />'}),f=n.extend({formInputElementDefinition:"<select />",afterRenderFormElement:function(a){g.each(this.schema.values,function(){a.append(g("<option />").attr("value",this.key).html(this.label))})}}),q=n.extend({formInputElementDefinition:"<button />",afterRenderFormElement:function(a){var b=this;a.html(this.schema.buttonLabel);
a.click(function(){b.schema.callback()})}});return{AbstractEditor:b,AbstractFormElementEditor:n,StringEditor:l,NumberEditor:d,UrlEditor:c,EmailEditor:k,SelectEditor:f,ButtonEditor:q}});define("block/nls/i18n",{root:{"button.toggledragdrop.tooltip":"Toggle Drag & Drop"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("block/block-plugin","aloha aloha/plugin jquery aloha/contenthandlermanager block/blockmanager block/sidebarattributeeditor block/block block/editormanager block/blockcontenthandler block/editor ui/ui ui/toggleButton i18n!block/nls/i18n i18n!aloha/nls/i18n jqueryui".split(" "),
function(g,b,n,l,d,c,k,f,q,a,e,m,v,x){var z=["div","span"];b=b.create("block",{config:[],settings:{},init:function(){var b=this;this.settings.rootTags||(this.settings.rootTags=z);d.registerBlockType("DebugBlock",k.DebugBlock);d.registerBlockType("DefaultBlock",k.DefaultBlock);d.registerBlockType("EmptyBlock",k.EmptyBlock);f.register("string",a.StringEditor);f.register("number",a.NumberEditor);f.register("url",a.UrlEditor);f.register("email",a.EmailEditor);f.register("select",a.SelectEditor);f.register("button",
a.ButtonEditor);l.register("block",q);d.setDragDropState(b.isDragDropEnabled());d.registerEventHandlers();d.initializeBlockLevelDragDrop();g.bind("aloha-plugins-loaded",function(){b._createBlocks();!1!==b.settings.sidebarAttributeEditor&&c.init()});this.createButtons();g.bind("aloha-editable-created",function(a,c){b.setDropzones(c.obj)});g.bind("aloha-editable-activated",function(a,c){b.applyButtonConfig(c.editable)})},applyButtonConfig:function(a){this._isDragdropToggleEnabled(a)?(this._toggleDragDropButton.show(),
this._toggleDragDropButton.setState(this._getDragdropState(a))):this._toggleDragDropButton.hide()},_isDragdropToggleEnabled:function(a){a=this.getEditableConfig(a.obj);return(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal||"toggleDragdrop"===a[0]||!0==a.toggleDragdrop||"true"==a.toggleDragdrop||1==a.toggleDragdrop||"1"==a.toggleDragdrop)&&this.isDragDropEnabled()},_getDragdropState:function(a){return this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal?
d.getDragDropState():a.obj.data("block-dragdrop")},_toggleDragdropState:function(a){if(this.settings&&this.settings.config&&this.settings.config.toggleDragdropGlobal){var b=!d.getDragDropState();d.setDragDropState(b);for(var c=0;c<g.editables.length;c++)a=g.editables[c],this._setDragDropStateForEditable(a.obj,b)}else b=!a.obj.data("block-dragdrop"),this._setDragDropStateForEditable(a.obj,b)},createButtons:function(){var a=this;this._toggleDragDropButton=e.adopt("toggleDragDrop",m,{tooltip:v.t("button.toggledragdrop.tooltip"),
icon:"aloha-icon aloha-icon-toggledragdrop",scope:"Aloha.continuoustext",click:function(){a._toggleDragdropState(g.activeEditable)}})},setDropzones:function(a){var b=this.getEditableConfig(a);(b=b&&b.dropzones||this.settings.dropzones)?a.data("block-dropzones",b):a.data("block-dropzones",[".aloha-editable"])},isDragDropEnabled:function(){return this.settings&&"undefined"!==typeof this.settings.dragdrop?!0===this.settings.dragdrop||"true"===this.settings.dragdrop||1===this.settings.dragdrop||"1"===
this.settings.dragdrop:!0},_createBlocks:function(){this.settings.defaults||(this.settings.defaults={});n.each(this.settings.defaults,function(a,b){n(a).alohaBlock(b)})},_setDragDropStateForEditable:function(a,b){a.data("block-dragdrop",b);a.hasClass("ui-sortable")&&a.sortable("option","disabled",!b);a.find(".aloha-block.ui-draggable").each(function(){n(this).draggable("option","disabled",!b)});a.find(".aloha-block-handle").each(function(){b?n(this).addClass("aloha-block-draghandle"):n(this).removeClass("aloha-block-draghandle")})}});
n.fn.alohaBlock=function(a){a=a||{};n(this).each(function(b,c){d._blockify(c,a)});return n(this)};n.fn.mahaloBlock=function(){n(this).each(function(a,b){d._unblockify(b)})};return b});define("abbr/nls/i18n",{root:{"floatingmenu.tab.abbr":"Abbreviation","button.addabbr.tooltip":"insert abbreviation","button.abbr.tooltip":"format as abbreviation","newabbr.defaulttext":"Abbr"},ca:!0,de:!0,mk:!0,"pt-br":!0,ru:!0,uk:!0,"zh-hans":!0});define("abbr/abbr-plugin","aloha jquery aloha/plugin ui/ui ui/toggleButton ui/button ui/scopes ui/port-helper-attribute-field i18n!abbr/nls/i18n i18n!aloha/nls/i18n".split(" "),
function(g,b,n,l,d,c,k,f,q,a){var e=window.GENTICS;return n.create("abbr",{config:["abbr"],init:function(){this.createButtons();this.subscribeEvents();this.bindInteractions()},createButtons:function(){var a=this;this._formatAbbrButton=l.adopt("formatAbbr",d,{tooltip:q.t("button.abbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",scope:"Aloha.continuoustext",click:function(){a.formatAbbr()}});this._insertAbbrButton=l.adopt("insertAbbr",c,{tooltip:q.t("button.addabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr",
scope:"Aloha.continuoustext",click:function(){a.insertAbbr(!1)}});k.createScope("abbr","Aloha.continuoustext");this.abbrField=f({width:320,name:"abbrText",scope:"abbr"});this.remAbbrButton=l.adopt("removeAbbr",c,{tooltip:q.t("button.remabbr.tooltip"),icon:"aloha-icon aloha-icon-abbr-rem",scope:"abbr",click:function(){a.removeAbbr()}})},bindInteractions:function(){var a=this;this.abbrField.addListener("blur",function(b,c){""==this.getValue()&&a.removeAbbr()});for(var b=0;b<g.editables.length;b++)g.editables[b].obj.keydown(function(b){if(b.metaKey&&
71==b.which)return a.findAbbrMarkup()?(a.abbrField.foreground(),a.abbrField.focus()):a.insertAbbr(),b.stopPropagation(),b.preventDefault(),!1})},subscribeEvents:function(){var a=this,c={};g.bind("aloha-editable-activated",function(){if(g.activeEditable&&g.activeEditable.obj){var e=a.getEditableConfig(g.activeEditable.obj);c[g.activeEditable.getId()]=-1!==b.inArray("abbr",e)}});g.bind("aloha-editable-destroyed",function(){g.activeEditable&&g.activeEditable.obj&&delete c[g.activeEditable.getId()]});
g.bind("aloha-selection-changed",function(b,e){if(g.activeEditable)if(c[g.activeEditable.getId()]){a._formatAbbrButton.show();a._insertAbbrButton.show();var d=a.findAbbrMarkup(e);d?(a._insertAbbrButton.hide(),a._formatAbbrButton.setState(!0),k.setScope("abbr"),a.abbrField.setTargetObject(d,"title")):(a._formatAbbrButton.setState(!1),a.abbrField.setTargetObject(null))}else a._formatAbbrButton.hide(),a._insertAbbrButton.hide()})},findAbbrMarkup:function(a){"undefined"==typeof a&&(a=g.Selection.getRangeObject());
return g.activeEditable?a.findMarkup(function(){return"abbr"==this.nodeName.toLowerCase()},g.activeEditable.obj):null},formatAbbr:function(){var a=g.Selection.getRangeObject();g.activeEditable&&(this.findAbbrMarkup(a)?this.removeAbbr():this.insertAbbr())},insertAbbr:function(a){var c=g.Selection.getRangeObject();if(!this.findAbbrMarkup(c)){c.isCollapsed()&&!1!=a&&e.Utils.Dom.extendToWord(c);if(c.isCollapsed()){a=q.t("newabbr.defaulttext");var d=b('<abbr title="">'+a+"</abbr>");e.Utils.Dom.insertIntoDOM(d,
c,b(g.activeEditable.obj));c.startContainer=c.endContainer=d.contents().get(0);c.startOffset=0;c.endOffset=a.length}else d=b('<abbr title=""></abbr>'),e.Utils.Dom.addMarkup(c,d,!1);c.select();this.abbrField.foreground();this.abbrField.focus()}},removeAbbr:function(){var a=g.Selection.getRangeObject(),b=this.findAbbrMarkup();b&&(e.Utils.Dom.removeFromDOM(b,a,!0),a.select())},makeClean:function(a){},toString:function(){return"abbr"}})});(function(){function g(b,d){for(var f in d){var l=d[f];void 0!==
l&&(b[f]=l)}return b}var b=function(){},n=function(c,d){var f;f=d&&d.hasOwnProperty("constructor")?d.constructor:function(){return c.apply(this,arguments)};b.prototype=c.prototype;f.prototype=new b;d&&g(f.prototype,d);f.prototype.constructor=f;f.__super__=c.prototype;return f},l;l="undefined"!==typeof exports?exports:this.Undo={};l.Stack=function(){this.commands=[];this.savePosition=this.stackPosition=-1};g(l.Stack.prototype,{execute:function(b){this._clearRedo();b.execute();this.commands.push(b);
this.stackPosition++;this.changed()},undo:function(){this.commands[this.stackPosition].undo();this.stackPosition--;this.changed()},canUndo:function(){return 0<=this.stackPosition},redo:function(){this.stackPosition++;this.commands[this.stackPosition].redo();this.changed()},canRedo:function(){return this.stackPosition<this.commands.length-1},save:function(){this.savePosition=this.stackPosition;this.changed()},dirty:function(){return this.stackPosition!=this.savePosition},_clearRedo:function(){this.commands=
this.commands.slice(0,this.stackPosition+1)},changed:function(){}});l.Command=function(b){this.name=b};var d=Error("override me!");g(l.Command.prototype,{execute:function(){throw d;},undo:function(){throw d;},redo:function(){this.execute()}});l.Command.extend=function(b){b=n(this,b);b.extend=l.Command.extend;return b}}).call(this);define("undo/vendor/undo",function(){});t.prototype.diff_main=function(g,b,n,l){"undefined"==typeof l&&(l=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*
this.Diff_Timeout);if(null==g||null==b)throw Error("Null input. (diff_main)");if(g==b)return g?[[0,g]]:[];"undefined"==typeof n&&(n=!0);var d=n,c=this.diff_commonPrefix(g,b);n=g.substring(0,c);g=g.substring(c);b=b.substring(c);var c=this.diff_commonSuffix(g,b),k=g.substring(g.length-c);g=g.substring(0,g.length-c);b=b.substring(0,b.length-c);g=this.diff_compute_(g,b,d,l);n&&g.unshift([0,n]);k&&g.push([0,k]);this.diff_cleanupMerge(g);return g};t.prototype.diff_compute_=function(g,b,n,l){if(!g)return[[1,
b]];if(!b)return[[-1,g]];var d=g.length>b.length?g:b,c=g.length>b.length?b:g,k=d.indexOf(c);return-1!=k?(n=[[1,d.substring(0,k)],[0,c],[1,d.substring(k+c.length)]],g.length>b.length&&(n[0][0]=n[2][0]=-1),n):1==c.length?[[-1,g],[1,b]]:(d=this.diff_halfMatch_(g,b))?(b=d[1],c=d[3],g=d[4],d=this.diff_main(d[0],d[2],n,l),n=this.diff_main(b,c,n,l),d.concat([[0,g]],n)):n&&100<g.length&&100<b.length?this.diff_lineMode_(g,b,l):this.diff_bisect_(g,b,l)};t.prototype.diff_lineMode_=function(g,b,n){var l=this.diff_linesToChars_(g,
b);g=l[0];b=l[1];l=l[2];g=this.diff_bisect_(g,b,n);this.diff_charsToLines_(g,l);this.diff_cleanupSemantic(g);g.push([0,""]);for(var d=b=0,c=0,k=l="";b<g.length;){switch(g[b][0]){case 1:c++;k+=g[b][1];break;case -1:d++;l+=g[b][1];break;case 0:if(1<=d&&1<=c){l=this.diff_main(l,k,!1,n);g.splice(b-d-c,d+c);b=b-d-c;for(d=l.length-1;0<=d;d--)g.splice(b,0,l[d]);b+=l.length}d=c=0;k=l=""}b++}g.pop();return g};t.prototype.diff_bisect_=function(g,b,n){for(var l=g.length,d=b.length,c=Math.ceil((l+d)/2),k=2*c,
f=Array(k),q=Array(k),a=0;a<k;a++)f[a]=-1,q[a]=-1;f[c+1]=0;q[c+1]=0;for(var a=l-d,e=0!=a%2,m=0,v=0,x=0,z=0,p=0;p<c&&!((new Date).getTime()>n);p++){for(var y=-p+m;y<=p-v;y+=2){var s=c+y,r;r=y==-p||y!=p&&f[s-1]<f[s+1]?f[s+1]:f[s-1]+1;for(var t=r-y;r<l&&t<d&&g.charAt(r)==b.charAt(t);)r++,t++;f[s]=r;if(r>l)v+=2;else if(t>d)m+=2;else if(e&&(s=c+a-y,0<=s&&s<k&&-1!=q[s])){var H=l-q[s];if(r>=H)return this.diff_bisectSplit_(g,b,r,t,n)}}for(y=-p+x;y<=p-z;y+=2){s=c+y;H=y==-p||y!=p&&q[s-1]<q[s+1]?q[s+1]:q[s-
1]+1;for(r=H-y;H<l&&r<d&&g.charAt(l-H-1)==b.charAt(d-r-1);)H++,r++;q[s]=H;if(H>l)z+=2;else if(r>d)x+=2;else if(!e&&(s=c+a-y,0<=s&&s<k&&-1!=f[s]&&(r=f[s],t=c+r-s,H=l-H,r>=H)))return this.diff_bisectSplit_(g,b,r,t,n)}}return[[-1,g],[1,b]]};t.prototype.diff_bisectSplit_=function(g,b,n,l,d){var c=g.substring(0,n),k=b.substring(0,l);g=g.substring(n);b=b.substring(l);c=this.diff_main(c,k,!1,d);d=this.diff_main(g,b,!1,d);return c.concat(d)};t.prototype.diff_linesToChars_=function(g,b){function n(b){for(var c=
"",a=0,e=-1,m=l.length;e<b.length-1;){e=b.indexOf("\n",a);-1==e&&(e=b.length-1);var k=b.substring(a,e+1),a=e+1;(d.hasOwnProperty?d.hasOwnProperty(k):void 0!==d[k])?c+=String.fromCharCode(d[k]):(c+=String.fromCharCode(m),d[k]=m,l[m++]=k)}return c}var l=[],d={};l[0]="";var c=n(g),k=n(b);return[c,k,l]};t.prototype.diff_charsToLines_=function(g,b){for(var n=0;n<g.length;n++){for(var l=g[n][1],d=[],c=0;c<l.length;c++)d[c]=b[l.charCodeAt(c)];g[n][1]=d.join("")}};t.prototype.diff_commonPrefix=function(g,
b){if(!g||!b||g.charAt(0)!=b.charAt(0))return 0;for(var n=0,l=Math.min(g.length,b.length),d=l,c=0;n<d;)g.substring(c,d)==b.substring(c,d)?c=n=d:l=d,d=Math.floor((l-n)/2+n);return d};t.prototype.diff_commonSuffix=function(g,b){if(!g||!b||g.charAt(g.length-1)!=b.charAt(b.length-1))return 0;for(var n=0,l=Math.min(g.length,b.length),d=l,c=0;n<d;)g.substring(g.length-d,g.length-c)==b.substring(b.length-d,b.length-c)?c=n=d:l=d,d=Math.floor((l-n)/2+n);return d};t.prototype.diff_commonOverlap_=function(g,
b){var n=g.length,l=b.length;if(0==n||0==l)return 0;n>l?g=g.substring(n-l):n<l&&(b=b.substring(0,n));n=Math.min(n,l);if(g==b)return n;for(var l=0,d=1;;){var c=g.substring(n-d),c=b.indexOf(c);if(-1==c)return l;d+=c;if(0==c||g.substring(n-d)==b.substring(0,d))l=d,d++}};t.prototype.diff_halfMatch_=function(g,b){function n(a,b,d){for(var f=a.substring(d,d+Math.floor(a.length/4)),k=-1,l="",g,q,n,p;-1!=(k=b.indexOf(f,k+1));){var s=c.diff_commonPrefix(a.substring(d),b.substring(k)),r=c.diff_commonSuffix(a.substring(0,
d),b.substring(0,k));l.length<r+s&&(l=b.substring(k-r,k)+b.substring(k,k+s),g=a.substring(0,d-r),q=a.substring(d+s),n=b.substring(0,k-r),p=b.substring(k+s))}return 2*l.length>=a.length?[g,q,n,p,l]:null}if(0>=this.Diff_Timeout)return null;var l=g.length>b.length?g:b,d=g.length>b.length?b:g;if(4>l.length||2*d.length<l.length)return null;var c=this,k=n(l,d,Math.ceil(l.length/4)),l=n(l,d,Math.ceil(l.length/2));if(k||l)k=l?k?k[4].length>l[4].length?k:l:l:k;else return null;var f,q;g.length>b.length?(l=
k[0],d=k[1],f=k[2],q=k[3]):(f=k[0],q=k[1],l=k[2],d=k[3]);return[l,d,f,q,k[4]]};t.prototype.diff_cleanupSemantic=function(g){for(var b=!1,n=[],l=0,d=null,c=0,k=0,f=0,q=0,a=0;c<g.length;)0==g[c][0]?(n[l++]=c,k=q,f=a,a=q=0,d=g[c][1]):(1==g[c][0]?q+=g[c][1].length:a+=g[c][1].length,null!==d&&d.length<=Math.max(k,f)&&d.length<=Math.max(q,a)&&(g.splice(n[l-1],0,[-1,d]),g[n[l-1]+1][0]=1,l--,l--,c=0<l?n[l-1]:-1,a=q=f=k=0,d=null,b=!0)),c++;b&&this.diff_cleanupMerge(g);this.diff_cleanupSemanticLossless(g);
for(c=1;c<g.length;){if(-1==g[c-1][0]&&1==g[c][0]){b=g[c-1][1];n=g[c][1];if(l=this.diff_commonOverlap_(b,n))g.splice(c,0,[0,n.substring(0,l)]),g[c-1][1]=b.substring(0,b.length-l),g[c+1][1]=n.substring(l),c++;c++}c++}};t.prototype.diff_cleanupSemanticLossless=function(g){function b(a,b){if(!a||!b)return 5;var e=0;if(a.charAt(a.length-1).match(n)||b.charAt(0).match(n))if(e++,a.charAt(a.length-1).match(l)||b.charAt(0).match(l))if(e++,a.charAt(a.length-1).match(d)||b.charAt(0).match(d))e++,(a.match(c)||
b.match(k))&&e++;return e}for(var n=/[^a-zA-Z0-9]/,l=/\s/,d=/[\r\n]/,c=/\n\r?\n$/,k=/^\r?\n\r?\n/,f=1;f<g.length-1;){if(0==g[f-1][0]&&0==g[f+1][0]){var q=g[f-1][1],a=g[f][1],e=g[f+1][1],m=this.diff_commonSuffix(q,a);if(m)var v=a.substring(a.length-m),q=q.substring(0,q.length-m),a=v+a.substring(0,a.length-m),e=v+e;for(var m=q,v=a,x=e,z=b(q,a)+b(a,e);a.charAt(0)===e.charAt(0);){var q=q+a.charAt(0),a=a.substring(1)+e.charAt(0),e=e.substring(1),p=b(q,a)+b(a,e);p>=z&&(z=p,m=q,v=a,x=e)}g[f-1][1]!=m&&(m?
g[f-1][1]=m:(g.splice(f-1,1),f--),g[f][1]=v,x?g[f+1][1]=x:(g.splice(f+1,1),f--))}f++}};t.prototype.diff_cleanupEfficiency=function(g){for(var b=!1,n=[],l=0,d="",c=0,k=!1,f=!1,q=!1,a=!1;c<g.length;)0==g[c][0]?(g[c][1].length<this.Diff_EditCost&&(q||a)?(n[l++]=c,k=q,f=a,d=g[c][1]):(l=0,d=""),q=a=!1):(-1==g[c][0]?a=!0:q=!0,d&&(k&&f&&q&&a||d.length<this.Diff_EditCost/2&&3==k+f+q+a)&&(g.splice(n[l-1],0,[-1,d]),g[n[l-1]+1][0]=1,l--,d="",k&&f?(q=a=!0,l=0):(l--,c=0<l?n[l-1]:-1,q=a=!1),b=!0)),c++;b&&this.diff_cleanupMerge(g)};
t.prototype.diff_cleanupMerge=function(g){g.push([0,""]);for(var b=0,n=0,l=0,d="",c="",k;b<g.length;)switch(g[b][0]){case 1:l++;c+=g[b][1];b++;break;case -1:n++;d+=g[b][1];b++;break;case 0:1<n+l?(0!==n&&0!==l&&(k=this.diff_commonPrefix(c,d),0!==k&&(0<b-n-l&&0==g[b-n-l-1][0]?g[b-n-l-1][1]+=c.substring(0,k):(g.splice(0,0,[0,c.substring(0,k)]),b++),c=c.substring(k),d=d.substring(k)),k=this.diff_commonSuffix(c,d),0!==k&&(g[b][1]=c.substring(c.length-k)+g[b][1],c=c.substring(0,c.length-k),d=d.substring(0,
d.length-k))),0===n?g.splice(b-n-l,n+l,[1,c]):0===l?g.splice(b-n-l,n+l,[-1,d]):g.splice(b-n-l,n+l,[-1,d],[1,c]),b=b-n-l+(n?1:0)+(l?1:0)+1):0!==b&&0==g[b-1][0]?(g[b-1][1]+=g[b][1],g.splice(b,1)):b++,n=l=0,c=d=""}""===g[g.length-1][1]&&g.pop();n=!1;for(b=1;b<g.length-1;)0==g[b-1][0]&&0==g[b+1][0]&&(g[b][1].substring(g[b][1].length-g[b-1][1].length)==g[b-1][1]?(g[b][1]=g[b-1][1]+g[b][1].substring(0,g[b][1].length-g[b-1][1].length),g[b+1][1]=g[b-1][1]+g[b+1][1],g.splice(b-1,1),n=!0):g[b][1].substring(0,
g[b+1][1].length)==g[b+1][1]&&(g[b-1][1]+=g[b+1][1],g[b][1]=g[b][1].substring(g[b+1][1].length)+g[b+1][1],g.splice(b+1,1),n=!0)),b++;n&&this.diff_cleanupMerge(g)};t.prototype.diff_xIndex=function(g,b){var n=0,l=0,d=0,c=0,k;for(k=0;k<g.length;k++){1!==g[k][0]&&(n+=g[k][1].length);-1!==g[k][0]&&(l+=g[k][1].length);if(n>b)break;d=n;c=l}return g.length!=k&&-1===g[k][0]?c:c+(b-d)};t.prototype.diff_prettyHtml=function(g){for(var b=[],n=/&/g,l=/</g,d=/>/g,c=/\n/g,k=0;k<g.length;k++){var f=g[k][0],q=g[k][1].replace(n,
"&amp;").replace(l,"&lt;").replace(d,"&gt;").replace(c,"&para;<br>");switch(f){case 1:b[k]='<ins style="background:#e6ffe6;">'+q+"</ins>";break;case -1:b[k]='<del style="background:#ffe6e6;">'+q+"</del>";break;case 0:b[k]="<span>"+q+"</span>"}}return b.join("")};t.prototype.diff_text1=function(g){for(var b=[],n=0;n<g.length;n++)1!==g[n][0]&&(b[n]=g[n][1]);return b.join("")};t.prototype.diff_text2=function(g){for(var b=[],n=0;n<g.length;n++)-1!==g[n][0]&&(b[n]=g[n][1]);return b.join("")};t.prototype.diff_levenshtein=
function(g){for(var b=0,n=0,l=0,d=0;d<g.length;d++){var c=g[d][1];switch(g[d][0]){case 1:n+=c.length;break;case -1:l+=c.length;break;case 0:b+=Math.max(n,l),l=n=0}}return b+=Math.max(n,l)};t.prototype.diff_toDelta=function(g){for(var b=[],n=0;n<g.length;n++)switch(g[n][0]){case 1:b[n]="+"+encodeURI(g[n][1]);break;case -1:b[n]="-"+g[n][1].length;break;case 0:b[n]="="+g[n][1].length}return b.join("\t").replace(/%20/g," ")};t.prototype.diff_fromDelta=function(g,b){for(var n=[],l=0,d=0,c=b.split(/\t/g),
k=0;k<c.length;k++){var f=c[k].substring(1);switch(c[k].charAt(0)){case "+":try{n[l++]=[1,decodeURI(f)]}catch(q){throw Error("Illegal escape in diff_fromDelta: "+f);}break;case "-":case "=":var a=parseInt(f,10);if(isNaN(a)||0>a)throw Error("Invalid number in diff_fromDelta: "+f);f=g.substring(d,d+=a);"="==c[k].charAt(0)?n[l++]=[0,f]:n[l++]=[-1,f];break;default:if(c[k])throw Error("Invalid diff operation in diff_fromDelta: "+c[k]);}}if(d!=g.length)throw Error("Delta length ("+d+") does not equal source text length ("+
g.length+").");return n};t.prototype.match_main=function(g,b,n){if(null==g||null==b||null==n)throw Error("Null input. (match_main)");n=Math.max(0,Math.min(n,g.length));return g==b?0:g.length?g.substring(n,n+b.length)==b?n:this.match_bitap_(g,b,n):-1};t.prototype.match_bitap_=function(g,b,n){function l(a,e){var d=a/b.length,f=Math.abs(n-e);return c.Match_Distance?d+f/c.Match_Distance:f?1:d}if(b.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var d=this.match_alphabet_(b),
c=this,k=this.Match_Threshold,f=g.indexOf(b,n);-1!=f&&(k=Math.min(l(0,f),k),f=g.lastIndexOf(b,n+b.length),-1!=f&&(k=Math.min(l(0,f),k)));for(var q=1<<b.length-1,f=-1,a,e,m=b.length+g.length,v,x=0;x<b.length;x++){a=0;for(e=m;a<e;)l(x,n+e)<=k?a=e:m=e,e=Math.floor((m-a)/2+a);m=e;a=Math.max(1,n-e+1);var z=Math.min(n+e,g.length)+b.length;e=Array(z+2);for(e[z+1]=(1<<x)-1;z>=a;z--){var p=d[g.charAt(z-1)];e[z]=0===x?(e[z+1]<<1|1)&p:(e[z+1]<<1|1)&p|(v[z+1]|v[z])<<1|1|v[z+1];if(e[z]&q&&(p=l(x,z-1),p<=k))if(k=
p,f=z-1,f>n)a=Math.max(1,2*n-f);else break}if(l(x+1,n)>k)break;v=e}return f};t.prototype.match_alphabet_=function(g){for(var b={},n=0;n<g.length;n++)b[g.charAt(n)]=0;for(n=0;n<g.length;n++)b[g.charAt(n)]|=1<<g.length-n-1;return b};t.prototype.patch_addContext_=function(g,b){if(0!=b.length){for(var n=b.substring(g.start2,g.start2+g.length1),l=0;b.indexOf(n)!=b.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,n=b.substring(g.start2-l,g.start2+g.length1+
l);l+=this.Patch_Margin;(n=b.substring(g.start2-l,g.start2))&&g.diffs.unshift([0,n]);(l=b.substring(g.start2+g.length1,g.start2+g.length1+l))&&g.diffs.push([0,l]);g.start1-=n.length;g.start2-=n.length;g.length1+=n.length+l.length;g.length2+=n.length+l.length}};t.prototype.patch_make=function(g,b,n){var l;if("string"==typeof g&&"string"==typeof b&&"undefined"==typeof n)l=g,b=this.diff_main(l,b,!0),2<b.length&&(this.diff_cleanupSemantic(b),this.diff_cleanupEfficiency(b));else if(g&&"object"==typeof g&&
"undefined"==typeof b&&"undefined"==typeof n)b=g,l=this.diff_text1(b);else if("string"==typeof g&&b&&"object"==typeof b&&"undefined"==typeof n)l=g;else if("string"==typeof g&&"string"==typeof b&&n&&"object"==typeof n)l=g,b=n;else throw Error("Unknown call format to patch_make.");if(0===b.length)return[];n=[];g=new r;for(var d=0,c=0,k=0,f=l,q=0;q<b.length;q++){var a=b[q][0],e=b[q][1];d||0===a||(g.start1=c,g.start2=k);switch(a){case 1:g.diffs[d++]=b[q];g.length2+=e.length;l=l.substring(0,k)+e+l.substring(k);
break;case -1:g.length1+=e.length;g.diffs[d++]=b[q];l=l.substring(0,k)+l.substring(k+e.length);break;case 0:e.length<=2*this.Patch_Margin&&d&&b.length!=q+1?(g.diffs[d++]=b[q],g.length1+=e.length,g.length2+=e.length):e.length>=2*this.Patch_Margin&&d&&(this.patch_addContext_(g,f),n.push(g),g=new r,d=0,f=l,c=k)}1!==a&&(c+=e.length);-1!==a&&(k+=e.length)}d&&(this.patch_addContext_(g,f),n.push(g));return n};t.prototype.patch_deepCopy=function(g){for(var b=[],n=0;n<g.length;n++){var l=g[n],d=new r;d.diffs=
[];for(var c=0;c<l.diffs.length;c++)d.diffs[c]=l.diffs[c].slice();d.start1=l.start1;d.start2=l.start2;d.length1=l.length1;d.length2=l.length2;b[n]=d}return b};t.prototype.patch_apply=function(g,b){if(0==g.length)return[b,[]];g=this.patch_deepCopy(g);var n=this.patch_addPadding(g);b=n+b+n;this.patch_splitMax(g);for(var l=0,d=[],c=0;c<g.length;c++){var k=g[c].start2+l,f=this.diff_text1(g[c].diffs),q,a=-1;if(f.length>this.Match_MaxBits){if(q=this.match_main(b,f.substring(0,this.Match_MaxBits),k),-1!=
q&&(a=this.match_main(b,f.substring(f.length-this.Match_MaxBits),k+f.length-this.Match_MaxBits),-1==a||q>=a))q=-1}else q=this.match_main(b,f,k);if(-1==q)d[c]=!1,l-=g[c].length2-g[c].length1;else if(d[c]=!0,l=q-k,k=-1==a?b.substring(q,q+f.length):b.substring(q,a+this.Match_MaxBits),f==k)b=b.substring(0,q)+this.diff_text2(g[c].diffs)+b.substring(q+f.length);else if(k=this.diff_main(f,k,!1),f.length>this.Match_MaxBits&&this.diff_levenshtein(k)/f.length>this.Patch_DeleteThreshold)d[c]=!1;else{this.diff_cleanupSemanticLossless(k);
for(var f=0,e,a=0;a<g[c].diffs.length;a++){var m=g[c].diffs[a];0!==m[0]&&(e=this.diff_xIndex(k,f));1===m[0]?b=b.substring(0,q+e)+m[1]+b.substring(q+e):-1===m[0]&&(b=b.substring(0,q+e)+b.substring(q+this.diff_xIndex(k,f+m[1].length)));-1!==m[0]&&(f+=m[1].length)}}}b=b.substring(n.length,b.length-n.length);return[b,d]};t.prototype.patch_addPadding=function(g){for(var b=this.Patch_Margin,n="",l=1;l<=b;l++)n+=String.fromCharCode(l);for(l=0;l<g.length;l++)g[l].start1+=b,g[l].start2+=b;var l=g[0],d=l.diffs;
if(0==d.length||0!=d[0][0])d.unshift([0,n]),l.start1-=b,l.start2-=b,l.length1+=b,l.length2+=b;else if(b>d[0][1].length){var c=b-d[0][1].length;d[0][1]=n.substring(d[0][1].length)+d[0][1];l.start1-=c;l.start2-=c;l.length1+=c;l.length2+=c}l=g[g.length-1];d=l.diffs;0==d.length||0!=d[d.length-1][0]?(d.push([0,n]),l.length1+=b,l.length2+=b):b>d[d.length-1][1].length&&(c=b-d[d.length-1][1].length,d[d.length-1][1]+=n.substring(0,c),l.length1+=c,l.length2+=c);return n};t.prototype.patch_splitMax=function(g){for(var b=
this.Match_MaxBits,n=0;n<g.length;n++)if(g[n].length1>b){var l=g[n];g.splice(n--,1);for(var d=l.start1,c=l.start2,k="";0!==l.diffs.length;){var f=new r,q=!0;f.start1=d-k.length;f.start2=c-k.length;""!==k&&(f.length1=f.length2=k.length,f.diffs.push([0,k]));for(;0!==l.diffs.length&&f.length1<b-this.Patch_Margin;){var k=l.diffs[0][0],a=l.diffs[0][1];1===k?(f.length2+=a.length,c+=a.length,f.diffs.push(l.diffs.shift()),q=!1):-1===k&&1==f.diffs.length&&0==f.diffs[0][0]&&a.length>2*b?(f.length1+=a.length,
d+=a.length,q=!1,f.diffs.push([k,a]),l.diffs.shift()):(a=a.substring(0,b-f.length1-this.Patch_Margin),f.length1+=a.length,d+=a.length,0===k?(f.length2+=a.length,c+=a.length):q=!1,f.diffs.push([k,a]),a==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(a.length))}k=this.diff_text2(f.diffs);k=k.substring(k.length-this.Patch_Margin);a=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);""!==a&&(f.length1+=a.length,f.length2+=a.length,0!==f.diffs.length&&0===f.diffs[f.diffs.length-
1][0]?f.diffs[f.diffs.length-1][1]+=a:f.diffs.push([0,a]));q||g.splice(++n,0,f)}}};t.prototype.patch_toText=function(g){for(var b=[],n=0;n<g.length;n++)b[n]=g[n];return b.join("")};t.prototype.patch_fromText=function(g){var b=[];if(!g)return b;g=g.split("\n");for(var n=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;n<g.length;){var d=g[n].match(l);if(!d)throw Error("Invalid patch string: "+g[n]);var c=new r;b.push(c);c.start1=parseInt(d[1],10);""===d[2]?(c.start1--,c.length1=1):"0"==d[2]?c.length1=0:
(c.start1--,c.length1=parseInt(d[2],10));c.start2=parseInt(d[3],10);""===d[4]?(c.start2--,c.length2=1):"0"==d[4]?c.length2=0:(c.start2--,c.length2=parseInt(d[4],10));for(n++;n<g.length;){d=g[n].charAt(0);try{var k=decodeURI(g[n].substring(1))}catch(f){throw Error("Illegal escape in patch_fromText: "+k);}if("-"==d)c.diffs.push([-1,k]);else if("+"==d)c.diffs.push([1,k]);else if(" "==d)c.diffs.push([0,k]);else if("@"==d)break;else if(""!==d)throw Error('Invalid patch mode "'+d+'" in: '+k);n++}}return b};
r.prototype.toString=function(){for(var g=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],b,n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:b="+";break;case -1:b="-";break;case 0:b=" "}g[n+1]=b+encodeURI(this.diffs[n][1])+"\n"}return g.join("").replace(/%20/g," ")};window.diff_match_patch=t;window.patch_obj=r;window.DIFF_DELETE=
-1;window.DIFF_INSERT=1;window.DIFF_EQUAL=0;define("undo/vendor/diff_match_patch_uncompressed",function(){});define("undo/undo-plugin",["aloha","jquery","aloha/plugin","undo/vendor/undo","undo/vendor/diff_match_patch_uncompressed"],function(g,b,n){function l(b){b=d.patch_deepCopy(b);for(var c=0;c<b.length;c++)for(var l=0;l<b[c].diffs.length;l++)b[c].diffs[l][0]=-b[c].diffs[l][0];return b}var d=new t,c=!1;return n.create("undo",{init:function(){this.stack=new Undo.Stack;var b=this,f=Undo.Command.extend({constructor:function(b,
a){this.editable=b;this.patch=a},execute:function(){},undo:function(){this.phase(l(this.patch))},redo:function(){this.phase(this.patch)},phase:function(b){var a=this.editable.getContents();b=d.patch_apply(b,a)[0];this.reset(b)},reset:function(b){c=!0;var a=null;g.getActiveEditable()===this.editable&&(g.deactivateEditable(),a=this.editable);this.editable.obj.html(b);null!==a&&a.activate();this.editable.smartContentChange({type:"blur"});c=!1}});this.stack.changed=function(){};g.bind("aloha-editable-created",
function(c,a){a.obj.bind("keydown","ctrl+z shift+ctrl+z",function(a){a.preventDefault();a.shiftKey?b.redo():b.undo()})});g.bind("aloha-smart-content-changed",function(l,a){var e=a.getSnapshotContent();if(!c){var m=a.editable.getContents(),e=d.patch_make(e,m);0!==e.length&&b.stack.execute(new f(a.editable,e))}})},toString:function(){return"undo"},undo:function(){null!==g.getActiveEditable()&&g.getActiveEditable().smartContentChange({type:"blur"});this.stack.canUndo()&&this.stack.undo()},redo:function(){null!==
g.getActiveEditable()&&g.getActiveEditable().smartContentChange({type:"blur"});this.stack.canRedo()&&this.stack.redo()},stack:void 0})});define("paste/paste-plugin","jquery aloha/core aloha/plugin aloha/command contenthandler/contenthandler-utils aloha/console aloha/copypaste".split(" "),function(g,b,n,l,d,c,k){function f(a,b){b.css({top:e.scrollTop(),left:e.scrollLeft()-200}).contents().remove();var c=k.getEditableAt(a);c&&c.obj.blur();k.setSelectionAt({startContainer:b[0],endContainer:b[0],startOffset:0,
endOffset:0});b.focus()}function q(a,e,f){a.metaKey=null;a.stopPropagation();window.setTimeout(function(){if(e){var l=x.html();m&&/^&nbsp;/.test(l)&&(l=l.substring(6));var g=k.getEditableAt(e);g&&g.obj.focus();k.setSelectionAt(e);g=e.startContainer;if(1===g.nodeType?"p"===g.nodeName.toLowerCase()&&d.isProppedParagraph(g.outerHTML):3===g.nodeType&&"p"===g.parentNode.nodeName.toLowerCase()&&1===g.parentNode.childNodes.length&&v.test(window.escape(g.data)))3===e.startContainer.nodeType?e.startContainer.data=
"":e.startContainer.innerHTML=" ",e.startOffset=0,e.endContainer===e.startContainer&&(e.endOffset=0);b.queryCommandSupported("insertHTML")?b.execCommand("insertHTML",!1,l):c.error("Common.Paste",'Command "insertHTML" not available. Enable the plugin "common/commands".')}x.contents().remove();"function"===typeof f&&f();b.activeEditable.smartContentChange(a)},10)}function a(a,b){m?a.bind("beforepaste",function(a){z=k.getRange();f(z,x);a.stopPropagation()}):a.bind("paste",function(a){var b=k.getRange();
f(b,x);m&&document.selection.createRange().execCommand("paste");q(a,b)})}var e=g(window),m=!!g.browser.msie,v=/^(\s|%A0)$/,x=g('<div style="position:absolute; clip:rect(0px,0px,0px,0px); width:1px; height:1px;"></div>').contentEditable(!0),z=null;return n.create("paste",{settings:{},init:function(){g("body").append(x);var c=!this.settings.noclipboardaccess;b.bind("aloha-editable-created",function(b,e){a(e.obj,c)});m&&x.bind("paste",function(a){q(a,z,function(){z=null})})},register:function(a){c.deprecated("Plugins.Paste",
"register() for pasteHandler is deprecated.  Use the ContentHandler Plugin instead.")}})});Aloha._load&&Aloha._load()})();require=define=null;(function(p,t){var r,s,g=function(){},b=function(a){for(var b in a)return 0;return 1},n={}.toString,l=function(a){return"[object Function]"==n.call(a)},d=function(a){return"[object String]"==n.call(a)},c=function(a){return"[object Array]"==n.call(a)},k=function(a,b){if(a)for(var c=0;a[c];)b(a[c++])},f=function(a,b){for(var c in b)a[c]=b[c];return a},q=function(a,b){return f(Error(a),{src:"dojoLoader",info:b})},a=1,e=function(){return"_"+a++},m=function(a,b,c){return va(a,b,c,0,m)},v=this,x=v.document,
z=x&&x.createElement("DiV"),A=m.has=function(a){return l(y[a])?y[a]=y[a](v,x,z):y[a]},y=A.cache=t.hasCache;A.add=function(a,b,c,e){(void 0===y[a]||e)&&(y[a]=b);return c&&A(a)};for(var C in p.has)A.add(C,p.has[C],0,1);var F=0,D=[],H=0,N=g,J=g,M;m.isXdUrl=g;m.initSyncLoader=function(a,b,c){H||(H=a,N=b,J=c);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:D,modules:Z,execQ:T,getModule:Ta,injectModule:nb,setArrived:mb,signal:P,finishExec:Ca,execModule:yb,dojoRequirePlugin:H,
getLegacyMode:function(){return F},guardCheckComplete:Eb}};var E=location.protocol,K=location.host;m.isXdUrl=function(a){return/^\./.test(a)?!1:/^\/\//.test(a)?!0:(a=a.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(a[1]!=E||K&&a[2]!=K)};A.add("dojo-force-activex-xhr",!x.addEventListener&&"file:"==window.location.protocol);A.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(A("native-xhr")&&!A("dojo-force-activex-xhr"))M=function(){return new XMLHttpRequest};else{var G=["Msxml2.XMLHTTP","Microsoft.XMLHTTP",
"Msxml2.XMLHTTP.4.0"],u;for(r=0;3>r;)try{if(u=G[r++],new ActiveXObject(u))break}catch(S){}M=function(){return new ActiveXObject(u)}}m.getXhr=M;A.add("dojo-gettext-api",1);m.getText=function(a,b,c){var e=M();e.open("GET",Ga(a),!1);e.send(null);if(200==e.status||!location.host&&!e.status)c&&c(e.responseText,b);else throw q("xhrFailed",e.status);return e.responseText};var Q=new Function("return eval(arguments[0]);");m.eval=function(a,b){return Q(a+"\r\n////@ sourceURL="+b)};var W={},P=m.signal=function(a,
b){var e=W[a];k(e&&e.slice(0),function(a){a.apply(null,c(b)?b:[b])})},aa=m.on=function(a,b){var c=W[a]||(W[a]=[]);c.push(b);return{remove:function(){for(var a=0;a<c.length;a++)if(c[a]===b){c.splice(a,1);break}}}},ca=[],Y={},U=[],V={},R=m.map={},ba=[],Z={},na="",ka={},ja={},ea={},da=0,wa=function(a){var b,c,e,d;for(b in ja)c=ja[b],(e=b.match(/^url\:(.+)/))?ka["url:"+za(e[1],a)]=c:"*now"==b?d=c:"*noref"!=b&&(e=Oa(b,a),ka[e.mid]=ka["url:"+e.url]=c);d&&d(oa(a));ja={}},L=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
function(a){return"\\"+a})},Pa=function(a,b){b.splice(0,b.length);for(var c in a)b.push([c,a[c],RegExp("^"+L(c)+"(/|$)"),c.length]);b.sort(function(a,b){return b[3]-a[3]});return b},Ua=function(a,b){k(a,function(a){b.push([d(a[0])?RegExp("^"+L(a[0])+"$"):a[0],a[1]])})},ra=function(a){var b=a.name;b||(b=a,a={name:b});a=f({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&(R[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));V[b]=a},db=[],Qa=function(a,b,c){for(var e in a){"waitSeconds"==
e&&(m.waitms=1E3*(a[e]||0));"cacheBust"==e&&(na=a[e]?d(a[e])?a[e]:(new Date).getTime()+"":"");if("baseUrl"==e||"combo"==e)m[e]=a[e];if("async"==e){var l=a[e];m.legacyMode=F=d(l)&&/sync|legacyAsync/.test(l)?l:l?!1:"sync";m.async=!F}a[e]!==y&&(m.rawConfig[e]=a[e],"has"!=e&&A.add("config-"+e,a[e],0,b))}m.baseUrl||(m.baseUrl="./");/\/$/.test(m.baseUrl)||(m.baseUrl+="/");for(e in a.has)A.add(e,a.has[e],0,b);k(a.packages,ra);for(s in a.packagePaths)k(a.packagePaths[s],function(a){var b=s+"/"+a;d(a)&&(a=
{name:a});a.location=b;ra(a)});Pa(f(R,a.map),ba);k(ba,function(a){a[1]=Pa(a[1],[]);"*"==a[0]&&(ba.star=a)});Pa(f(Y,a.paths),U);Ua(a.aliases,ca);if(b)db.push({config:a.config});else for(e in a.config)b=Ta(e,c),b.config=f(b.config||{},a.config[e]);a.cache&&(wa(),ja=a.cache,a.cache["*noref"]&&wa());P("config",[a,m.rawConfig])};A("dojo-cdn");var Za=x.getElementsByTagName("script");r=0;for(var bb,xa,Ia,ma;r<Za.length;)if(bb=Za[r++],(Ia=bb.getAttribute("src"))&&(ma=Ia.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&
(xa=ma[3]||"",t.baseUrl=t.baseUrl||xa,da=bb),Ia=bb.getAttribute("data-dojo-config")||bb.getAttribute("djConfig"))ea=m.eval("({ "+Ia+" })","data-dojo-config"),da=bb;m.rawConfig={};Qa(t,1);A("dojo-cdn")&&((V.dojo.location=xa)&&(xa+="/"),V.dijit.location=xa+"../dijit/",V.dojox.location=xa+"../dojox/");Qa(p,1);Qa(ea,1);var Va=function(a){Eb(function(){k(a.deps,nb)})},va=function(a,b,k,l,n){var v;if(d(a)){if((v=Ta(a,l,!0))&&v.executed)return v.result;throw q("undefinedModule",a);}c(a)||(Qa(a,0,l),a=b,
b=k);if(c(a))if(a.length){k="require*"+e();for(var x,z=[],y=0;y<a.length;)x=a[y++],z.push(Ta(x,l));v=f(Sa("",k,0,""),{injected:2,deps:z,def:b||g,require:l?l.require:m,gc:1});Z[v.mid]=v;Va(v);var p=la&&"sync"!=F;Eb(function(){yb(v,p)});v.executed||T.push(v);ib()}else b&&b();return n},oa=function(a){if(!a)return m;var b=a.require;b||(b=function(c,e,d){return va(c,e,d,a,b)},a.require=f(b,m),b.module=a,b.toUrl=function(b){return za(b,a)},b.toAbsMid=function(b){return lb(b,a)},b.syncLoadNls=function(b){b=
Oa(b,a);var c=Z[b.mid];if(!c||!c.executed)if(tb=ka[b.mid]||ka["url:"+b.url])Fb(tb),c=Z[b.mid];return c&&c.executed&&c.result});return b},T=[],Fa=[],Ha={},Ba=function(a){a.injected=1;Ha[a.mid]=1;a.url&&(Ha[a.url]=a.pack||1);Zb()},mb=function(a){a.injected=2;delete Ha[a.mid];a.url&&delete Ha[a.url];b(Ha)&&(Ea(),"xd"==F&&(F="sync"))},Kb=m.idle=function(){return!Fa.length&&b(Ha)&&!T.length&&!la},Vb=function(a,b){if(b)for(var c=0;c<b.length;c++)if(b[c][2].test(a))return b[c];return 0},Ya=function(a){var b=
[],c,e;for(a=a.replace(/\\/g,"/").split("/");a.length;)c=a.shift(),".."==c&&b.length&&".."!=e?(b.pop(),e=b[b.length-1]):"."!=c&&b.push(e=c);return b.join("/")},Sa=function(a,b,c,e){var d=m.isXdUrl(e);return{pid:a,mid:b,pack:c,url:e,executed:0,def:0,isXd:d,isAmd:!!(d||V[a]&&V[a].isAmd)}},Ub=function(a,b,c,e,d,f,m,g,n){var v,x,z,y;y=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||y&&!b)return Sa(0,a,0,a);a=Ya(y?b.mid+"/../"+a:a);if(/^\./.test(a))throw q("irrationalPath",a);b&&(z=Vb(b.mid,f));(z=(z=z||
f.star)&&Vb(a,z[1]))&&(a=z[1]+a.substring(z[3]));b=(ma=a.match(/^([^\/]+)(\/(.+))?$/))?ma[1]:"";(v=c[b])?a=b+"/"+(x=ma[3]||v.main):b="";var p=0;k(g,function(b){var c=a.match(b[0]);c&&0<c.length&&(p=l(b[1])?a.replace(b[0],b[1]):b[1])});if(p)return Ub(p,0,c,e,d,f,m,g,n);if(c=e[a])return n?Sa(c.pid,c.mid,c.pack,c.url):e[a];e=(z=Vb(a,m))?z[1]+a.substring(z[3]):b?v.location+"/"+x:A("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(e)||(e=d+e);return Sa(b,a,v,Ya(e+".js"))},Oa=function(a,b){return Ub(a,
b,V,Z,m.baseUrl,ba,U,ca)},wb=function(a,b,c){return a.normalize?a.normalize(b,function(a){return lb(a,c)}):lb(b,c)},Wa=0,Ta=function(a,b,c){var e,d;(e=a.match(/^(.+?)\!(.*)$/))?(d=Ta(e[1],b,c),"sync"!=F||d.executed||(nb(d),2!==d.injected||d.executed||Eb(function(){yb(d)}),d.executed?Aa(d):T.unshift(d)),5!==d.executed||d.load||Aa(d),d.load?(e=wb(d,e[2],b),a=d.mid+"!"+(d.dynamic?++Wa+"!":"")+e):(e=e[2],a=d.mid+"!"+ ++Wa+"!waitingForPlugin"),a={plugin:d,mid:a,req:oa(b),prid:e}):a=Oa(a,b);return Z[a.mid]||
!c&&(Z[a.mid]=a)},lb=m.toAbsMid=function(a,b){return Oa(a,b).mid},za=m.toUrl=function(a,b){var c=Oa(a+"/x",b),e=c.url;return Ga(0===c.pid?a:e.substring(0,e.length-5))},Xa={injected:2,executed:5,def:3,result:3},rb=function(a){return Z[a]=f({mid:a},Xa)},gb=rb("require"),dc=rb("exports"),Qb=rb("module"),Db={},$a=0,Aa=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},ha=function(a){var b={};k(a.loadQ,function(c){var e=wb(a,c.prid,c.req.module),d=a.dynamic?
c.mid.replace(/waitingForPlugin$/,e):a.mid+"!"+e,e=f(f({},c),{mid:d,prid:e,injected:0});Z[d]||jb(Z[d]=e);b[c.mid]=Z[d];mb(c);delete Z[c.mid]});a.loadQ=0;var c=function(a){for(var c=a.deps||[],e=0;e<c.length;e++)(a=b[c[e].mid])&&(c[e]=a)},e;for(e in Z)c(Z[e]);k(T,c)},Ca=function(a){m.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=$a++;k(a.provides,function(a){a()});a.loadQ&&(Aa(a),ha(a));for(r=0;r<T.length;)T[r]===a?T.splice(r,1):r++;/^require\*/.test(a.mid)&&delete Z[a.mid]},Na=[],yb=
function(a,b){if(4===a.executed)return m.trace("loader-circular-dependency",[Na.concat(a.mid).join("->")]),!a.def||b?Db:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return Db;var c=a.mid,e=a.deps||[],d,f=[],k=0;for(a.executed=4;d=e[k++];){d=d===gb?oa(a):d===dc?a.cjs.exports:d===Qb?a.cjs:yb(d,b);if(d===Db)return a.executed=0,m.trace("loader-exec-module",["abort",c]),Db;f.push(d)}m.trace("loader-run-factory",[a.mid]);var c=a.def,g;D.unshift(a);if(A("config-dojo-loader-catches"))try{g=l(c)?c.apply(null,
f):c}catch(n){P("error",a.result=q("factoryThrew",[a,n]))}else g=l(c)?c.apply(null,f):c;a.result=void 0===g&&a.cjs?a.cjs.exports:g;D.shift(a);Ca(a)}return a.result},la=0,Eb=function(a){try{la++,a()}finally{la--}Kb()&&P("idle",[])},ib=function(){la||Eb(function(){N();for(var a,b,c=0;c<T.length;)a=$a,b=T[c],yb(b),a!=$a?(N(),c=0):c++})};void 0===A("dojo-loader-eval-hint-url")&&A.add("dojo-loader-eval-hint-url",1);var Ga=function(a){a+="";return a+(na?(/\?/.test(a)?"&":"?")+na:"")},jb=function(a){var b=
a.plugin;5!==b.executed||b.load||Aa(b);var c=function(b){a.result=b;mb(a);Ca(a);ib()};b.load?b.load(a.prid,a.req,c):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],T.unshift(b),nb(b))},tb=0,Lb=0,Yb=0,Fb=function(a,b){A("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Yb=1;if(A("config-dojo-loader-catches"))try{a===tb?tb.call(null):m.eval(a,A("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(c){P("error",q("evalModuleThrew",b))}else a===tb?tb.call(null):m.eval(a,A("dojo-loader-eval-hint-url")?b.url:b.mid);
Yb=0},nb=function(a){var b=a.mid,c=a.url;if(!(a.executed||a.injected||Ha[b]||a.url&&(a.pack&&Ha[a.url]===a.pack||1==Ha[a.url])))if(Ba(a),a.plugin)jb(a);else{var e=function(){Gb(a);if(2!==a.injected){if(A("dojo-enforceDefine")){P("error",q("noDefine",a));return}mb(a);f(a,Xa);m.trace("loader-define-nonmodule",[a.url])}F?!D.length&&ib():ib()};if(tb=ka[b]||ka["url:"+a.url])m.trace("loader-inject",["cache",a.mid,c]),Fb(tb,a),e();else{if(F)if(a.isXd)"sync"==F&&(F="xd");else if(!a.isAmd||"sync"==F){var d=
function(d){if("sync"==F){D.unshift(a);Fb(d,a);D.shift();Gb(a);a.cjs||(mb(a),Ca(a));if(a.finish){d=b+"*finish";var f=a.finish;delete a.finish;ua(d,["dojo",("dojo/require!"+f.join(",")).replace(/\./g,"/")],function(a){k(f,function(b){a.require(b)})});T.unshift(Ta(d))}e()}else(d=J(a,d))?(Fb(d,a),e()):(Lb=a,m.injectUrl(Ga(c),e,a),Lb=0)};m.trace("loader-inject",["xhr",a.mid,c,"sync"!=F]);if(A("config-dojo-loader-catches"))try{m.getText(c,"sync"!=F,d)}catch(l){P("error",q("xhrInjectFailed",[a,l]))}else m.getText(c,
"sync"!=F,d);return}m.trace("loader-inject",["script",a.mid,c]);Lb=a;m.injectUrl(Ga(c),e,a);Lb=0}}},eb=function(a,b,c){m.trace("loader-define-module",[a.mid,b]);var e=a.mid;if(2===a.injected)return P("error",q("multipleDefine",a)),a;f(a,{deps:b,def:c,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var d=0;b[d];d++)b[d]=Ta(b[d],a);F&&!Ha[e]&&(Va(a),T.push(a),ib());mb(a);l(c)||b.length||(a.result=c,Ca(a));return a},Gb=function(a,
b){for(var c=[],e,d;Fa.length;)d=Fa.shift(),b&&(d[0]=b.shift()),e=d[0]&&Ta(d[0])||a,c.push([e,d[1],d[2]]);wa(a);k(c,function(a){Va(eb.apply(null,a))})},Mb=0,Ea=g,Zb=g,Ea=function(){Mb&&clearTimeout(Mb);Mb=0},Zb=function(){Ea();m.waitms&&(Mb=window.setTimeout(function(){Ea();P("error",q("timeout",Ha))},m.waitms))};A.add("ie-event-behavior",x.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Ja=function(a,b,c,e){if(A("ie-event-behavior"))return a.attachEvent(c,
e),function(){a.detachEvent(c,e)};a.addEventListener(b,e,!1);return function(){a.removeEventListener(b,e,!1)}},$b=Ja(window,"load","onload",function(){m.pageLoaded=1;"complete"!=x.readyState&&(x.readyState="complete");$b()}),Za=x.getElementsByTagName("script");for(r=0;!da;)/^dojo/.test((bb=Za[r++])&&bb.type)||(da=bb);m.injectUrl=function(a,b,c){c=c.node=x.createElement("script");var e=Ja(c,"load","onreadystatechange",function(a){a=a||window.event;var c=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(c.readyState))e(),
d(),b&&b()}),d=Ja(c,"error","onerror",function(b){e();d();P("error",q("scriptError",[a,b]))});c.type="text/javascript";c.charset="utf-8";c.src=a;da.parentNode.insertBefore(c,da);return c};m.log=function(){try{for(var a=0;a<arguments.length;a++);}catch(b){}};m.trace=g;var ua=function(a,b,c){var e=arguments.length,f=["require","exports","module"],k=[0,a,b];1==e?k=[0,l(a)?f:[],a]:2==e&&d(a)?k=[a,l(b)?f:[],b]:3==e&&(k=[a,b,c]);m.trace("loader-define",k.slice(0,2));if((e=k[0]&&Ta(k[0]))&&!Ha[e.mid])Va(eb(e,
k[1],k[2]));else if(!A("ie-event-behavior")||Yb)Fa.push(k);else{e=e||Lb;if(!e)for(a in Ha)if((f=Z[a])&&f.node&&"interactive"===f.node.readyState){e=f;break}e?(wa(e),Va(eb(e,k[1],k[2]))):P("error",q("ieDefineFailed",k[0]));ib()}};ua.amd={vendor:"dojotoolkit.org"};f(f(m,t.loaderPatch),p.loaderPatch);aa("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(c){}});f(m,{uid:e,cache:ka,packs:V});if(v.define)P("error",q("defineAlreadyDefined",0));else{v.define=ua;v.require=
m;k(db,function(a){Qa(a)});var Hb=ea.deps||p.deps||t.deps,Bc=ea.callback||p.callback||t.callback;m.boot=Hb||Bc?[Hb||[],Bc]:0}})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../put-selector",main:"put",name:"put-selector"},
{location:"../xstyle",name:"xstyle"},{location:".",name:"dojo"}]});
require({cache:{"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(p,t,r){function s(b){return n[b]=new Function("item","index","array",b)}function g(b){var d=!b;return function(f,l,a){var e=0,m=f&&f.length||0,g;m&&"string"==typeof f&&(f=f.split(""));"string"==typeof l&&(l=n[l]||s(l));if(a)for(;e<m;++e){if(g=!l.call(a,f[e],e,f),b^g)return!g}else for(;e<m;++e)if(g=!l(f[e],e,f),b^g)return!g;return d}}function b(b){var k=1,f=0,g=0;b||(k=f=g=-1);return function(a,e,m,n){if(n&&
0<k)return d.lastIndexOf(a,e,m);n=a&&a.length||0;var x=b?n+g:f;m===l?m=b?f:n+g:0>m?(m=n+m,0>m&&(m=f)):m=m>=n?n+g:m;for(n&&"string"==typeof a&&(a=a.split(""));m!=x;m+=k)if(a[m]==e)return m;return-1}}var n={},l,d={every:g(!1),some:g(!0),indexOf:b(!0),lastIndexOf:b(!1),forEach:function(b,d,f){var l=0,a=b&&b.length||0;a&&"string"==typeof b&&(b=b.split(""));"string"==typeof d&&(d=n[d]||s(d));if(f)for(;l<a;++l)d.call(f,b[l],l,b);else for(;l<a;++l)d(b[l],l,b)},map:function(b,d,f,l){var a=0,e=b&&b.length||
0;l=new (l||Array)(e);e&&"string"==typeof b&&(b=b.split(""));"string"==typeof d&&(d=n[d]||s(d));if(f)for(;a<e;++a)l[a]=d.call(f,b[a],a,b);else for(;a<e;++a)l[a]=d(b[a],a,b);return l},filter:function(b,d,f){var l=0,a=b&&b.length||0,e=[],m;a&&"string"==typeof b&&(b=b.split(""));"string"==typeof d&&(d=n[d]||s(d));if(f)for(;l<a;++l)m=b[l],d.call(f,m,l,b)&&e.push(m);else for(;l<a;++l)m=b[l],d(m,l,b)&&e.push(m);return e},clearCache:function(){n={}}};r.mixin(p,d);return d})},"dojo/_base/kernel":function(){define(["../has",
"./config","require","module"],function(p,t,r,s){var g,b={},n={},l={config:t,global:this,dijit:b,dojox:n},b={dojo:["dojo",l],dijit:["dijit",b],dojox:["dojox",n]};s=r.map&&r.map[s.id.match(/[^\/]+/)[0]];for(g in s)b[g]?b[g][0]=s[g]:b[g]=[s[g],{}];for(g in b)s=b[g],s[1]._scopeName=s[0],t.noGlobals||(this[s[0]]=s[1]);l.scopeMap=b;l.baseUrl=l.config.baseUrl=r.baseUrl;l.isAsync=r.async;l.locale=t.locale;s="$Rev: 43d05c6 $".match(/\d+/);l.version={major:1,minor:9,patch:1,flag:"",revision:s?+s[0]:NaN,toString:function(){var b=
l.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l);l.exit=function(){};"undefined"!=typeof console||(console={});var b="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" "),d;for(s=0;d=b[s++];)console[d]||function(){var b=d+"";console[b]="log"in console?function(){var d=Array.apply({},arguments);d.unshift(b+
":");console.log(d.join(" "))}:function(){};console[b]._fake=!0}();p.add("dojo-debug-messages",!!t.isDebug);l.deprecated=l.experimental=function(){};p("dojo-debug-messages")&&(l.deprecated=function(b,d,f){b="DEPRECATED: "+b;d&&(b+=" "+d);f&&(b+=" -- will be removed in version: "+f);console.warn(b)},l.experimental=function(b,d){var f="EXPERIMENTAL: "+b+" -- APIs subject to change without notice.";d&&(f+=" "+d);console.warn(f)});if(t.modulePaths){l.deprecated("dojo.modulePaths","use paths configuration");
p={};for(g in t.modulePaths)p[g.replace(/\./g,"/")]=t.modulePaths[g];r({paths:p})}l.moduleUrl=function(b,d){l.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var f=null;b&&(f=r.toUrl(b.replace(/\./g,"/")+(d?"/"+d:"")+"/*.*").replace(/\/\*\.\*/,"")+(d?"":"/"));return f};l._hasResource={};return l})},"dojo/has":function(){define(["require","module"],function(p,t){var r=p.has||function(){};r.add("dom-addeventlistener",!!document.addEventListener);r.add("touch","ontouchstart"in document||0<window.navigator.msMaxTouchPoints);
r.add("device-width",screen.availWidth||innerWidth);var s=document.createElement("form");r.add("dom-attributes-explicit",0==s.attributes.length);r.add("dom-attributes-specified-flag",0<s.attributes.length&&40>s.attributes.length);r.clearElement=function(g){g.innerHTML="";return g};r.normalize=function(g,b){var n=g.match(/[\?:]|[^:\?]*/g),l=0,d=function(b){var k=n[l++];if(":"==k)return 0;if("?"==n[l++]){if(!b&&r(k))return d();d(!0);return d(b)}return k||0};return(g=d())&&b(g)};r.load=function(g,b,
n){g?b([g],n):n()};return r})},"dojo/_base/config":function(){define(["../has","require"],function(p,t){var r={},s=t.rawConfig,g;for(g in s)r[g]=s[g];r.locale||"undefined"==typeof navigator||(r.locale=(navigator.language||navigator.userLanguage).toLowerCase());return r})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(p,t){t.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var r=t("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):
[],s=r.length,g=function(b,d,f){var l,a=0,e=p.global;if(!f)if(b.length){l=b[a++];try{f=p.scopeMap[l]&&p.scopeMap[l][1]}catch(m){}f=f||(l in e?e[l]:d?e[l]={}:void 0)}else return e;for(;f&&(l=b[a++]);)f=l in f?f[l]:d?f[l]={}:void 0;return f},b=Object.prototype.toString,n=function(b,d,f){return(f||[]).concat(Array.prototype.slice.call(b,d||0))},l=/\{([^\}]+)\}/g,d={_extraNames:r,_mixin:function(b,d,f){var l,a,e,m={};for(l in d)a=d[l],l in b&&(b[l]===a||l in m&&m[l]===a)||(b[l]=f?f(a):a);if(t("bug-for-in-skips-shadowed")&&
d)for(e=0;e<s;++e)l=r[e],a=d[l],l in b&&(b[l]===a||l in m&&m[l]===a)||(b[l]=f?f(a):a);return b},mixin:function(b,k){b||(b={});for(var f=1,l=arguments.length;f<l;f++)d._mixin(b,arguments[f]);return b},setObject:function(b,d,f){var l=b.split(".");b=l.pop();return(f=g(l,!0,f))&&b?f[b]=d:void 0},getObject:function(b,d,f){return g(b.split("."),d,f)},exists:function(b,k){return void 0!==d.getObject(b,!1,k)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:function(b){return b&&
(b instanceof Array||"array"==typeof b)},isFunction:function(c){return"[object Function]"===b.call(c)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||d.isArray(b)||d.isFunction(b))},isArrayLike:function(b){return b&&void 0!==b&&!d.isString(b)&&!d.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(d.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!d.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,k){for(var f=1,l=arguments.length;f<
l;f++)d._mixin(b.prototype,arguments[f]);return b},_hitchArgs:function(b,k){var f=d._toArray(arguments,2),l=d.isString(k);return function(){var a=d._toArray(arguments),e=l?(b||p.global)[k]:k;return e&&e.apply(b||this,f.concat(a))}},hitch:function(b,k){if(2<arguments.length)return d._hitchArgs.apply(p,arguments);k||(k=b,b=null);if(d.isString(k)){b=b||p.global;if(!b[k])throw['lang.hitch: scope["',k,'"] is null (scope="',b,'")'].join("");return function(){return b[k].apply(b,arguments||[])}}return b?
function(){return k.apply(b,arguments||[])}:k},delegate:function(){function b(){}return function(k,f){b.prototype=k;var l=new b;b.prototype=null;f&&d._mixin(l,f);return l}}(),_toArray:t("ie")?function(){function b(c,d,l){l=l||[];for(d=d||0;d<c.length;d++)l.push(c[d]);return l}return function(d){return(d.item?b:n).apply(this,arguments)}}():n,partial:function(b){return d.hitch.apply(p,[null].concat(d._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||d.isFunction(b))return b;if(b.nodeType&&
"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var k,f,l;if(d.isArray(b))for(k=[],f=0,l=b.length;f<l;++f)f in b&&k.push(d.clone(b[f]));else k=b.constructor?new b.constructor:{};return d._mixin(k,b,d.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,k,f){return b.replace(f||l,d.isFunction(k)?k:function(b,a){return d.getObject(a,
!1,k)})}};d.mixin(p,d);return d})},"dojo/sniff":function(){define(["./has"],function(p){var t=navigator,r=t.userAgent,t=t.appVersion,s=parseFloat(t);p.add("air",0<=r.indexOf("AdobeAIR"));p.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0);p.add("khtml",0<=t.indexOf("Konqueror")?s:void 0);p.add("webkit",parseFloat(r.split("WebKit/")[1])||void 0);p.add("chrome",parseFloat(r.split("Chrome/")[1])||void 0);p.add("safari",0<=t.indexOf("Safari")&&!p("chrome")?parseFloat(t.split("Version/")[1]):void 0);
p.add("mac",0<=t.indexOf("Macintosh"));p.add("quirks","BackCompat"==document.compatMode);if(r.match(/(iPhone|iPod|iPad)/)){var g=RegExp.$1.replace(/P/,"p"),b=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",b=parseFloat(b.replace(/_/,".").replace(/_/g,""));p.add(g,b);p.add("ios",b)}p.add("android",parseFloat(r.split("Android ")[1])||void 0);p.add("bb",(0<=r.indexOf("BlackBerry")||0<=r.indexOf("BB10"))&&parseFloat(r.split("Version/")[1])||void 0);p.add("svg","undefined"!==typeof SVGAngle);p("webkit")||(0<=r.indexOf("Opera")&&
p.add("opera",9.8<=s?parseFloat(r.split("Version/")[1])||s:s),0<=r.indexOf("Gecko")&&!p("khtml")&&!p("webkit")&&p.add("mozilla",s),p("mozilla")&&p.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0),document.all&&!p("opera")&&(r=parseFloat(t.split("MSIE ")[1])||void 0,(t=document.documentMode)&&5!=t&&Math.floor(r)!=t&&(r=t),p.add("ie",r)),p.add("wii","undefined"!=typeof opera&&opera.wiiremote));return p})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window",
"./dom","./dom-style"],function(p,t,r,s){function g(b,d,f,l,a,e){e=e||"px";b=b.style;isNaN(d)||(b.left=d+e);isNaN(f)||(b.top=f+e);0<=l&&(b.width=l+e);0<=a&&(b.height=a+e)}function b(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function n(c){return"border-box"==l.boxModel||"table"==c.tagName.toLowerCase()||b(c)}var l={boxModel:"content-box"};p("ie")&&(l.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");
l.getPadExtents=function(b,d){b=r.byId(b);var f=d||s.getComputedStyle(b),l=s.toPixelValue,a=l(b,f.paddingLeft),e=l(b,f.paddingTop),m=l(b,f.paddingRight),f=l(b,f.paddingBottom);return{l:a,t:e,r:m,b:f,w:a+m,h:e+f}};l.getBorderExtents=function(b,d){b=r.byId(b);var f=s.toPixelValue,l=d||s.getComputedStyle(b),a="none"!=l.borderLeftStyle?f(b,l.borderLeftWidth):0,e="none"!=l.borderTopStyle?f(b,l.borderTopWidth):0,m="none"!=l.borderRightStyle?f(b,l.borderRightWidth):0,f="none"!=l.borderBottomStyle?f(b,l.borderBottomWidth):
0;return{l:a,t:e,r:m,b:f,w:a+m,h:e+f}};l.getPadBorderExtents=function(b,d){b=r.byId(b);var f=d||s.getComputedStyle(b),g=l.getPadExtents(b,f),f=l.getBorderExtents(b,f);return{l:g.l+f.l,t:g.t+f.t,r:g.r+f.r,b:g.b+f.b,w:g.w+f.w,h:g.h+f.h}};l.getMarginExtents=function(b,d){b=r.byId(b);var f=d||s.getComputedStyle(b),l=s.toPixelValue,a=l(b,f.marginLeft),e=l(b,f.marginTop),m=l(b,f.marginRight),f=l(b,f.marginBottom);return{l:a,t:e,r:m,b:f,w:a+m,h:e+f}};l.getMarginBox=function(b,d){b=r.byId(b);var f=d||s.getComputedStyle(b),
g=l.getMarginExtents(b,f),a=b.offsetLeft-g.l,e=b.offsetTop-g.t,m=b.parentNode,n=s.toPixelValue;if(p("mozilla")){var x=parseFloat(f.left),f=parseFloat(f.top);isNaN(x)||isNaN(f)?m&&m.style&&(m=s.getComputedStyle(m),"visible"!=m.overflow&&(a+="none"!=m.borderLeftStyle?n(b,m.borderLeftWidth):0,e+="none"!=m.borderTopStyle?n(b,m.borderTopWidth):0)):(a=x,e=f)}else(p("opera")||8==p("ie")&&!p("quirks"))&&m&&(m=s.getComputedStyle(m),a-="none"!=m.borderLeftStyle?n(b,m.borderLeftWidth):0,e-="none"!=m.borderTopStyle?
n(b,m.borderTopWidth):0);return{l:a,t:e,w:b.offsetWidth+g.w,h:b.offsetHeight+g.h}};l.getContentBox=function(b,d){b=r.byId(b);var f=d||s.getComputedStyle(b),g=b.clientWidth,a=l.getPadExtents(b,f),e=l.getBorderExtents(b,f);g?(f=b.clientHeight,e.w=e.h=0):(g=b.offsetWidth,f=b.offsetHeight);p("opera")&&(a.l+=e.l,a.t+=e.t);return{l:a.l,t:a.t,w:g-a.w-e.w,h:f-a.h-e.h}};l.setContentSize=function(b,d,f){b=r.byId(b);var q=d.w;d=d.h;n(b)&&(f=l.getPadBorderExtents(b,f),0<=q&&(q+=f.w),0<=d&&(d+=f.h));g(b,NaN,NaN,
q,d)};var d={l:0,t:0,w:0,h:0};l.setMarginBox=function(c,k,f){c=r.byId(c);var q=f||s.getComputedStyle(c);f=k.w;var a=k.h,e=n(c)?d:l.getPadBorderExtents(c,q),q=l.getMarginExtents(c,q);if(p("webkit")&&b(c)){var m=c.style;0<=f&&!m.width&&(m.width="4px");0<=a&&!m.height&&(m.height="4px")}0<=f&&(f=Math.max(f-e.w-q.w,0));0<=a&&(a=Math.max(a-e.h-q.h,0));g(c,k.l,k.t,f,a)};l.isBodyLtr=function(b){b=b||t.doc;return"ltr"==(t.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};l.docScroll=function(b){b=
b||t.doc;var d=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in d?{x:d.pageXOffset,y:d.pageYOffset}:(d=p("quirks")?t.body(b):b.documentElement)&&{x:l.fixIeBiDiScrollLeft(d.scrollLeft||0,b),y:d.scrollTop||0}};p("ie")&&(l.getIeDocumentElementOffset=function(b){b=b||t.doc;b=b.documentElement;if(8>p("ie")){var d=b.getBoundingClientRect(),f=d.left,d=d.top;7>p("ie")&&(f+=b.clientLeft,d+=b.clientTop);return{x:0>f?0:f,y:0>d?0:d}}return{x:0,y:0}});l.fixIeBiDiScrollLeft=function(b,d){d=d||t.doc;
var f=p("ie");if(f&&!l.isBodyLtr(d)){var g=p("quirks"),a=g?t.body(d):d.documentElement,e=t.global;6==f&&!g&&e.frameElement&&a.scrollHeight>a.clientHeight&&(b+=a.clientLeft);return 8>f||g?b+a.clientWidth-a.scrollWidth:-b}return b};l.position=function(b,d){b=r.byId(b);var f=t.body(b.ownerDocument),g=b.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};if(9>p("ie")){var a=l.getIeDocumentElementOffset(b.ownerDocument);g.x-=a.x+(p("quirks")?f.clientLeft+f.offsetLeft:0);g.y-=
a.y+(p("quirks")?f.clientTop+f.offsetTop:0)}d&&(f=l.docScroll(b.ownerDocument),g.x+=f.x,g.y+=f.y);return g};l.getMarginSize=function(b,d){b=r.byId(b);var f=l.getMarginExtents(b,d||s.getComputedStyle(b)),g=b.getBoundingClientRect();return{w:g.right-g.left+f.w,h:g.bottom-g.top+f.h}};l.normalizeEvent=function(b){"layerX"in b||(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!p("dom-addeventlistener")){var d=b.target,d=d&&d.ownerDocument||document,f=p("quirks")?d.body:d.documentElement,g=l.getIeDocumentElementOffset(d);
b.pageX=b.clientX+l.fixIeBiDiScrollLeft(f.scrollLeft||0,d)-g.x;b.pageY=b.clientY+(f.scrollTop||0)-g.y}};return l})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(p,t,r){var s={global:p.global,doc:this.document||null,body:function(g){g=g||p.doc;return g.body||g.getElementsByTagName("body")[0]},setContext:function(g,b){p.global=s.global=g;p.doc=s.doc=b},withGlobal:function(g,b,n,l){var d=p.global;try{return p.global=s.global=g,s.withDoc.call(null,g.document,b,n,l)}finally{p.global=
s.global=d}},withDoc:function(g,b,n,l){var d=s.doc,c=r("quirks"),k=r("ie"),f,q,a;try{return p.doc=s.doc=g,p.isQuirks=r.add("quirks","BackCompat"==p.doc.compatMode,!0,!0),r("ie")&&(a=g.parentWindow)&&a.navigator&&(f=parseFloat(a.navigator.appVersion.split("MSIE ")[1])||void 0,(q=g.documentMode)&&5!=q&&Math.floor(f)!=q&&(f=q),p.isIE=r.add("ie",f,!0,!0)),n&&"string"==typeof b&&(b=n[b]),b.apply(n,l||[])}finally{p.doc=s.doc=d,p.isQuirks=r.add("quirks",c,!0,!0),p.isIE=r.add("ie",k,!0,!0)}}};t.mixin(p,s);
return s})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(p,t){if(7>=p("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(r){}var s={};p("ie")?s.byId=function(b,g){if("string"!=typeof b)return b;var l=g||t.doc,d=b&&l.getElementById(b);if(!d||d.attributes.id.value!=b&&d.id!=b){l=l.all[b];if(!l||l.nodeName)l=[l];for(var c=0;d=l[c++];)if(d.attributes&&d.attributes.id&&d.attributes.id.value==b||d.id==b)return d}else return d}:s.byId=function(b,g){return("string"==
typeof b?(g||t.doc).getElementById(b):b)||null};s.isDescendant=function(b,g){try{for(b=s.byId(b),g=s.byId(g);b;){if(b==g)return!0;b=b.parentNode}}catch(l){}return!1};p.add("css-user-select",function(b,g,l){if(!l)return!1;b=l.style;g=["Khtml","O","ms","Moz","Webkit"];l=g.length;var d="userSelect";do if("undefined"!==typeof b[d])return d;while(l--&&(d=g[l]+"UserSelect"));return!1});var g=p("css-user-select");s.setSelectable=g?function(b,n){s.byId(b).style[g]=n?"":"none"}:function(b,g){b=s.byId(b);var l=
b.getElementsByTagName("*"),d=l.length;if(g)for(b.removeAttribute("unselectable");d--;)l[d].removeAttribute("unselectable");else for(b.setAttribute("unselectable","on");d--;)l[d].setAttribute("unselectable","on")};return s})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(p,t){function r(d,a,e){a=a.toLowerCase();if(p("ie")){if("auto"==e){if("height"==a)return d.offsetHeight;if("width"==a)return d.offsetWidth}if("fontweight"==a)switch(e){case 700:return"bold";default:return"normal"}}a in
c||(c[a]=k.test(a));return c[a]?b(d,e):e}var s,g={};s=p("webkit")?function(b){var a;if(1==b.nodeType){var c=b.ownerDocument.defaultView;a=c.getComputedStyle(b,null);!a&&b.style&&(b.style.display="",a=c.getComputedStyle(b,null))}return a||{}}:p("ie")&&(9>p("ie")||p("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){return 1==b.nodeType?b.ownerDocument.defaultView.getComputedStyle(b,null):{}};g.getComputedStyle=s;var b;b=p("ie")?function(b,a){if(!a)return 0;if("medium"==
a)return 4;if(a.slice&&"px"==a.slice(-2))return parseFloat(a);var c=b.style,d=b.runtimeStyle,f=c.left,k=d.left;d.left=b.currentStyle.left;try{c.left=a,a=c.pixelLeft}catch(l){a=0}c.left=f;d.left=k;return a}:function(b,a){return parseFloat(a)||0};g.toPixelValue=b;var n=function(b,a){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return a?{}:null}},l=9>p("ie")||10>p("ie")&&p("quirks")?function(b){try{return n(b).Opacity/100}catch(a){return 1}}:function(b){return s(b).opacity},
d=9>p("ie")||10>p("ie")&&p("quirks")?function(b,a){""===a&&(a=1);var c=100*a;1===a?(b.style.zoom="",n(b)&&(b.style.filter=b.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(b.style.zoom=1,n(b)?n(b,1).Opacity=c:b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+c+")",n(b,1).Enabled=!0);if("tr"==b.tagName.toLowerCase())for(c=b.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&d(c,a);return a}:function(b,a){return b.style.opacity=a},c={left:!0,
top:!0},k=/margin|padding|width|height|max|min|offset/,f={cssFloat:1,styleFloat:1,"float":1};g.get=function(b,a){var c=t.byId(b),d=arguments.length;if(2==d&&"opacity"==a)return l(c);a=f[a]?"cssFloat"in c.style?"cssFloat":"styleFloat":a;var k=g.getComputedStyle(c);return 1==d?k:r(c,a,k[a]||c.style[a])};g.set=function(b,a,c){var m=t.byId(b),k=arguments.length,l="opacity"==a;a=f[a]?"cssFloat"in m.style?"cssFloat":"styleFloat":a;if(3==k)return l?d(m,c):m.style[a]=c;for(var n in a)g.set(b,n,a[n]);return g.getComputedStyle(m)};
return g})},"dojo/aspect":function(){define([],function(){function p(b,d,c,k){var f=b[d],g="around"==d,a;if(g){var e=c(function(){return f.advice(this,arguments)});a={remove:function(){e&&(e=b=c=null)},advice:function(a,b){return e?e.apply(a,b):f.advice(a,b)}}}else a={remove:function(){if(a.advice){var e=a.previous,f=a.next;f||e?(e?e.next=f:b[d]=f,f&&(f.previous=e)):delete b[d];b=c=a.advice=null}},id:s++,advice:c,receiveArguments:k};if(f&&!g)if("after"==d){for(;f.next&&(f=f.next););f.next=a;a.previous=
f}else"before"==d&&(b[d]=a,a.next=f,f.previous=a);else b[d]=a;return a}function t(b){return function(d,c,k,f){var g=d[c],a;g&&g.target==d||(d[c]=a=function(){for(var b=s,c=arguments,d=a.before;d;)c=d.advice.apply(this,c)||c,d=d.next;if(a.around)var f=a.around.advice(this,c);for(d=a.after;d&&d.id<b;){if(d.receiveArguments)var k=d.advice.apply(this,c),f=k===r?f:k;else f=d.advice.call(this,f,c);d=d.next}return f},g&&(a.around={advice:function(a,b){return g.apply(a,b)}}),a.target=d);d=p(a||g,b,k,f);k=
null;return d}}var r,s=0,g=t("after"),b=t("before"),n=t("around");return{before:b,around:n,after:g}})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(p,t,r,s,g,b,n,l,d){r.add("dojo-preload-i18n-Api",1);var c=p.i18n={},k=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,f=function(a,b,c,e){var d=[c+e];b=b.split("-");for(var f="",m=0;m<b.length;m++)if(f+=(f?"-":"")+b[m],!a||a[f])d.push(c+f+"/"+e),d.specificity=
f;return d},q={},a=function(a,b,c){c=c?c.toLowerCase():p.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},e=p.getL10nName=function(b,c,e){return d.id+"!"+a(b,c,e)},m=function(a,c,e,d,m,k){a([c],function(l){var g=b.clone(l.root),n=f(!l._v1x&&l,m,e,d);a(n,function(){for(var a=1;a<n.length;a++)g=b.mixin(b.clone(g),arguments[a]);q[c+"/"+m]=g;g.$locale=n.specificity;k()})})},v=function(a){var c=g.extraLocale||[],c=b.isArray(c)?c:[c];c.push(a);return c},
x=function(a,c,e){if(r("dojo-preload-i18n-Api")){var d=a.split("*"),f="preload"==d[1];f&&(q[a]||(q[a]=1,F(d[2],l.parse(d[3]),1,c)),e(1));(d=f)||(y&&C.push([a,c,e]),d=y);if(d)return}a=k.exec(a);var g=a[1]+"/",n=a[5]||a[4],x=g+n,d=(a=a[5]&&a[4])||p.locale||"",z=x+"/"+d;a=a?[d]:v(d);var A=a.length,t=function(){--A||e(b.delegate(q[z]))};s.forEach(a,function(a){var b=x+"/"+a;r("dojo-preload-i18n-Api")&&D(b);q[b]?t():m(c,x,g,n,a,t)})};if(r("dojo-unit-tests"))var z=c.unitTests=[];r("dojo-preload-i18n-Api");
var A=c.normalizeLocale=function(a){a=a?a.toLowerCase():p.locale;return"root"==a?"ROOT":a},y=0,C=[],F=c._preloadLocalizations=function(a,b,c,e){function d(a,b){e.isXdUrl(t.toUrl(a+".js"))||c?e([a],b):J([a],b,e)}function f(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function m(c){c=A(c);f(c,function(c){if(0<=s.indexOf(b,c)){var e=a.replace(/\./g,"/")+"_"+c;y++;d(e,function(a){for(var b in a)q[t.toAbsMid(b)+"/"+c]=a[b];for(--y;!y&&C.length;)x.apply(null,C.shift())});
return!0}return!1})}e=e||t;m();s.forEach(p.config.extraLocale,m)},D=function(){},H={},N=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
J=function(a,b,c){var e=[];s.forEach(a,function(a){function b(c){c=N(c,D,a,H);c===H?e.push(q[d]=H.result):(c instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+d,c),c={}),e.push(q[d]=/nls\/[^\/]+\/[^\/]+$/.test(d)?c:{root:c,_v1x:1}))}var d=c.toUrl(a+".js");if(q[d])e.push(q[d]);else{var f=c.syncLoadNls(a);if(f)e.push(f);else if(n)n.get({url:d,sync:!0,load:b,error:function(){e.push(q[d]={})}});else try{c.getText(d,!0,b)}catch(m){e.push(q[d]={})}}});b&&b.apply(null,e)},D=function(a){for(var b,
c=a.split("/"),e=p.global[c[0]],d=1;e&&d<c.length-1;e=e[c[d++]]);e&&((b=e[c[d]])||(b=e[c[d].replace(/-/g,"_")]),b&&(q[a]=b));return b};c.getLocalization=function(b,c,e){var d;b=a(b,c,e);x(b,t.isXdUrl(t.toUrl(b+".js"))?t:function(a,b){J(a,b,t)},function(a){d=a});return d};r("dojo-unit-tests")&&z.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=N("{prop:1}",D,"nonsense",H);a.is({prop:1},b);a.is(void 0,b[1]);b=N("({prop:1})",D,"nonsense",H);a.is({prop:1},b);a.is(void 0,b[1]);b=N("{'prop-x':1}",
D,"nonsense",H);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=N("({'prop-x':1})",D,"nonsense",H);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=N("define({'prop-x':1})",D,"nonsense",H);a.is(H,b);a.is({"prop-x":1},H.result);b=N("define('some/module', {'prop-x':1})",D,"nonsense",H);a.is(H,b);a.is({"prop-x":1},H.result);b=N("this is total nonsense and should throw an error",D,"nonsense",H);a.is(b instanceof Error,!0)})});return b.mixin(c,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:x,cache:q,
getL10nName:e})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){p._xhrObj=e._create;var v=p.config;p.objectToQuery=s.objectToQuery;p.queryToObject=s.queryToObject;p.fieldToObject=b.fieldToObject;p.formToObject=b.toObject;p.formToQuery=b.toQuery;p.formToJson=b.toJson;p._blockAsync=!1;var x=p._contentHandlers=
p.contentHandlers={text:function(a){return a.responseText},json:function(a){return d.fromJson(a.responseText||null)},"json-comment-filtered":function(a){l.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");a=a.responseText;var b=a.indexOf("/*"),c=a.lastIndexOf("*/");
if(-1==b||-1==c)throw Error("JSON was not comment filtered");return d.fromJson(a.substring(b+2,c))},javascript:function(a){return p.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&t("dom-qsa2.1")&&!b.querySelectorAll&&t("dom-parser")&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(t("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];k.some(c,function(c){try{var e=new ActiveXObject(c);
e.async=!1;e.loadXML(a.responseText);b=e}catch(d){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?x["json-comment-filtered"](a):x.json(a)}};p._ioSetArgs=function(a,e,d,f){var m={args:a,url:a.url},k=null;if(a.form){var k=g.byId(a.form),l=k.getAttributeNode("action");m.url=m.url||(l?l.value:null);k=b.toObject(k)}l=[{}];k&&l.push(k);a.content&&l.push(a.content);a.preventCache&&l.push({"dojo.preventCache":(new Date).valueOf()});
m.query=s.objectToQuery(c.mixin.apply(null,l));m.handleAs=a.handleAs||"text";var q=new n(function(a){a.canceled=!0;e&&e(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});q.addCallback(d);var x=a.load;x&&c.isFunction(x)&&q.addCallback(function(b){return x.call(a,b,m)});var z=a.error;z&&c.isFunction(z)&&q.addErrback(function(b){return z.call(a,b,m)});var y=a.handle;y&&c.isFunction(y)&&q.addBoth(function(b){return y.call(a,b,m)});q.addErrback(function(a){return f(a,
q)});v.ioPublish&&p.publish&&!1!==m.args.ioPublish&&(q.addCallbacks(function(a){p.publish("/dojo/io/load",[q,a]);return a},function(a){p.publish("/dojo/io/error",[q,a]);return a}),q.addBoth(function(a){p.publish("/dojo/io/done",[q,a]);return a}));q.ioArgs=m;return q};var z=function(a){a=x[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},A=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},y=function(a){0>=C&&(C=0,v.ioPublish&&p.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&
p.publish("/dojo/io/stop"))},C=0;q.after(a,"_onAction",function(){C-=1});q.after(a,"_onInFlight",y);p._ioCancelAll=a.cancelAll;p._ioNotifyStart=function(a){v.ioPublish&&p.publish&&!1!==a.ioArgs.args.ioPublish&&(C||p.publish("/dojo/io/start"),C+=1,p.publish("/dojo/io/send",[a]))};p._ioWatch=function(b,e,d,f){b.ioArgs.options=b.ioArgs.args;c.mixin(b,{response:b.ioArgs,isValid:function(a){return e(b)},isReady:function(a){return d(b)},handleResponse:function(a){return f(b)}});a(b);y(b)};p._ioAddQueryToUrl=
function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null)};p.xhr=function(a,b,c){var d,f=p._ioSetArgs(b,function(a){d&&d.cancel()},z,A),m=f.ioArgs;"postData"in b?m.query=b.postData:"putData"in b?m.query=b.putData:"rawBody"in b?m.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&p._ioAddQueryToUrl(m);var k={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:m};"undefined"!==typeof b.headers&&(k.headers=
b.headers);"undefined"!==typeof b.contentType&&(k.headers||(k.headers={}),k.headers["Content-Type"]=b.contentType);"undefined"!==typeof m.query&&(k.data=m.query);"undefined"!==typeof b.sync&&(k.sync=b.sync);p._ioNotifyStart(f);try{d=e(m.url,k,!0)}catch(l){return f.cancel(),f}f.ioArgs.xhr=d.response.xhr;d.then(function(){f.resolve(f)}).otherwise(function(a){m.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);f.reject(a)});return f};p.xhrGet=function(a){return p.xhr("GET",
a)};p.rawXhrPost=p.xhrPost=function(a){return p.xhr("POST",a,!0)};p.rawXhrPut=p.xhrPut=function(a){return p.xhr("PUT",a,!0)};p.xhrDelete=function(a){return p.xhr("DELETE",a)};p._isDocumentOk=function(a){return m.checkStatus(a.status)};p._getText=function(a){var b;p.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};c.mixin(p.xhr,{_xhrObj:p._xhrObj,fieldToObject:b.fieldToObject,formToObject:b.toObject,objectToQuery:s.objectToQuery,formToQuery:b.toQuery,formToJson:b.toJson,queryToObject:s.queryToObject,
contentHandlers:x,_ioSetArgs:p._ioSetArgs,_ioCancelAll:p._ioCancelAll,_ioNotifyStart:p._ioNotifyStart,_ioWatch:p._ioWatch,_ioAddQueryToUrl:p._ioAddQueryToUrl,_isDocumentOk:p._isDocumentOk,_getText:p._getText,get:p.xhrGet,post:p.xhrPost,put:p.xhrPut,del:p.xhrDelete});return p.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(p,t,r){p._name="browser";t.mixin(p,{isBrowser:!0,isFF:r("ff"),isIE:r("ie"),isKhtml:r("khtml"),isWebKit:r("webkit"),isMozilla:r("mozilla"),isMoz:r("mozilla"),
isOpera:r("opera"),isSafari:r("safari"),isChrome:r("chrome"),isMac:r("mac"),isIos:r("ios"),isAndroid:r("android"),isWii:r("wii"),isQuirks:r("quirks"),isAir:r("air")});return r})},"dojo/io-query":function(){define(["./_base/lang"],function(p){var t={};return{objectToQuery:function(r){var s=encodeURIComponent,g=[],b;for(b in r){var n=r[b];if(n!=t[b]){var l=s(b)+"=";if(p.isArray(n))for(var d=0,c=n.length;d<c;++d)g.push(l+s(n[d]));else g.push(l+s(n))}}return g.join("&")},queryToObject:function(r){var s=
decodeURIComponent;r=r.split("&");for(var g={},b,n,l=0,d=r.length;l<d;++l)if(n=r[l],n.length){var c=n.indexOf("=");0>c?(b=s(n),n=""):(b=s(n.slice(0,c)),n=s(n.slice(c+1)));"string"==typeof g[b]&&(g[b]=[g[b]]);p.isArray(g[b])?g[b].push(n):g[b]=n}return g}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(p,t,r,s){var g={fieldToObject:function(b){var g=null;if(b=t.byId(b)){var l=b.name,d=(b.type||"").toLowerCase();if(l&&d&&!b.disabled)if("radio"==d||"checkbox"==
d)b.checked&&(g=b.value);else if(b.multiple)for(g=[],b=[b.firstChild];b.length;)for(l=b.pop();l;l=l.nextSibling)if(1==l.nodeType&&"option"==l.tagName.toLowerCase())l.selected&&g.push(l.value);else{l.nextSibling&&b.push(l.nextSibling);l.firstChild&&b.push(l.firstChild);break}else g=b.value}return g},toObject:function(b){var n={};b=t.byId(b).elements;for(var l=0,d=b.length;l<d;++l){var c=b[l],k=c.name,f=(c.type||"").toLowerCase();if(k&&f&&0>"file|submit|image|reset|button".indexOf(f)&&!c.disabled){var q=
n,a=k,c=g.fieldToObject(c);if(null!==c){var e=q[a];"string"==typeof e?q[a]=[e,c]:p.isArray(e)?e.push(c):q[a]=c}"image"==f&&(n[k+".x"]=n[k+".y"]=n[k].x=n[k].y=0)}}return n},toQuery:function(b){return r.objectToQuery(g.toObject(b))},toJson:function(b,n){return s.stringify(g.toObject(b),null,n?4:0)}};return g})},"dojo/json":function(){define(["./has"],function(p){var t="undefined"!=typeof JSON;p.add("json-parse",t);p.add("json-stringify",t&&'{"a":1}'==JSON.stringify({a:0},function(p,g){return g||1}));
if(p("json-stringify"))return JSON;var r=function(p){return('"'+p.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:p("json-parse")?JSON.parse:function(p,g){if(g&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(p))throw new SyntaxError("Invalid characters in JSON");return eval("("+p+")")},stringify:function(p,g,b){function n(d,c,k){g&&
(d=g(k,d));var f;f=typeof d;if("number"==f)return isFinite(d)?d+"":"null";if("boolean"==f)return d+"";if(null===d)return"null";if("string"==typeof d)return r(d);if("function"==f||"undefined"==f)return l;if("function"==typeof d.toJSON)return n(d.toJSON(k),c,k);if(d instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,c){a=d["getUTC"+b]()+(c?1:0);return 10>a?"0"+a:a});if(d.valueOf()!==d)return n(d.valueOf(),c,k);var q=b?c+b:"",a=b?
" ":"",e=b?"\n":"";if(d instanceof Array){var a=d.length,m=[];for(k=0;k<a;k++)f=n(d[k],q,k),"string"!=typeof f&&(f="null"),m.push(e+q+f);return"["+m.join(",")+e+c+"]"}m=[];for(k in d){var v;if(d.hasOwnProperty(k)){if("number"==typeof k)v='"'+k+'"';else if("string"==typeof k)v=r(k);else continue;f=n(d[k],q,k);"string"==typeof f&&m.push(e+q+v+":"+a+f)}}return"{"+m.join(",")+e+c+"}"}var l;"string"==typeof g&&(b=g,g=null);return n(p,"","")}}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),
function(p,t,r,s,g,b,n){var l=function(){},d=Object.freeze||function(){},c=p.Deferred=function(k){function f(b){if(e)throw Error("This deferred has already been resolved");a=b;e=!0;q()}function q(){for(var c;!c&&p;){var d=p;p=p.next;if(c=d.progress==l)e=!1;var f=x?d.error:d.resolved;g("config-useDeferredInstrumentation")&&x&&t.instrumentRejected&&t.instrumentRejected(a,!!f);if(f)try{var m=f(a);m&&"function"===typeof m.then?m.then(b.hitch(d.deferred,"resolve"),b.hitch(d.deferred,"reject"),b.hitch(d.deferred,
"progress")):(f=c&&void 0===m,c&&!f&&(x=m instanceof Error),d.deferred[f&&x?"reject":"resolve"](f?a:m))}catch(k){d.deferred.reject(k)}else x?d.deferred.reject(a):d.deferred.resolve(a)}}var a,e,m,n,x,z,p,y=this.promise=new r;this.isResolved=y.isResolved=function(){return 0==n};this.isRejected=y.isRejected=function(){return 1==n};this.isFulfilled=y.isFulfilled=function(){return 0<=n};this.isCanceled=y.isCanceled=function(){return m};this.resolve=this.callback=function(a){this.fired=n=0;this.results=
[a,null];f(a)};this.reject=this.errback=function(a){x=!0;this.fired=n=1;g("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(a,!!p);f(a);this.results=[null,a]};this.progress=function(a){for(var b=p;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,l);return this};y.then=this.then=function(a,b,d){var f=d==l?this:new c(y.cancel);a={resolved:a,error:b,progress:d,deferred:f};p?z=z.next=a:p=z=a;e&&q();return f.promise};var C=this;y.cancel=
this.cancel=function(){if(!e){var a=k&&k(C);e||(a instanceof Error||(a=new s(a)),a.log=!1,C.reject(a))}m=!0};d(y)};b.extend(c,{addCallback:function(c){return this.addCallbacks(b.hitch.apply(p,arguments))},addErrback:function(c){return this.addCallbacks(null,b.hitch.apply(p,arguments))},addBoth:function(c){var d=b.hitch.apply(p,arguments);return this.addCallbacks(d,d)},fired:-1});c.when=p.when=n;return c})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise",
"./promise/instrumentation"],function(p,t,r,s,g){var b=Object.freeze||function(){},n=function(b,c,a,e,d){2===c&&k.instrumentRejected&&0===b.length&&k.instrumentRejected(a,!1,e,d);for(d=0;d<b.length;d++)l(b[d],c,a,e)},l=function(b,l,a,e){var m=b[l],g=b.deferred;if(m)try{var n=m(a);if(0===l)"undefined"!==typeof n&&c(g,l,n);else{if(n&&"function"===typeof n.then){b.cancel=n.cancel;n.then(d(g,1),d(g,2),d(g,0));return}c(g,1,n)}}catch(z){c(g,2,z)}else c(g,l,a);2===l&&k.instrumentRejected&&k.instrumentRejected(a,
!!m,e,g.promise)},d=function(b,d){return function(a){c(b,d,a)}},c=function(b,c,a){if(!b.isCanceled())switch(c){case 0:b.progress(a);break;case 1:b.resolve(a);break;case 2:b.reject(a)}},k=function(c){var d=this.promise=new s,a=this,e,m,g,x=!1,z=[];Error.captureStackTrace&&(Error.captureStackTrace(a,k),Error.captureStackTrace(d,k));this.isResolved=d.isResolved=function(){return 1===e};this.isRejected=d.isRejected=function(){return 2===e};this.isFulfilled=d.isFulfilled=function(){return!!e};this.isCanceled=
d.isCanceled=function(){return x};this.progress=function(b,c){if(e){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}n(z,0,b,null,a);return d};this.resolve=function(b,c){if(e){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}n(z,e=1,m=b,null,a);z=null;return d};var p=this.reject=function(b,c){if(e){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}Error.captureStackTrace&&Error.captureStackTrace(g={},p);n(z,e=2,m=b,g,
a);z=null;return d};this.then=d.then=function(a,b,c){var f=[c,a,b];f.cancel=d.cancel;f.deferred=new k(function(a){return f.cancel&&f.cancel(a)});e&&!z?l(f,e,m,g):z.push(f);return f.deferred.promise};this.cancel=d.cancel=function(a,b){if(!e){if(c){var d=c(a);a="undefined"===typeof d?a:d}x=!0;if(!e)return"undefined"===typeof a&&(a=new r),p(a),a;if(2===e&&m===a)return a}else if(!0===b)throw Error("This deferred has already been fulfilled.");};b(d)};k.prototype.toString=function(){return"[object Deferred]"};
g&&g(k);return k})},"dojo/errors/CancelError":function(){define(["./create"],function(p){return p("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(p){return function(t,r,s,g){s=s||Error;var b=function(g){if(s===Error){Error.captureStackTrace&&Error.captureStackTrace(this,b);var l=Error.call(this,g),d;for(d in l)l.hasOwnProperty(d)&&(this[d]=l[d]);this.message=g;this.stack=l.stack}else s.apply(this,arguments);r&&r.apply(this,arguments)};
b.prototype=p.delegate(s.prototype,g);b.prototype.name=t;return b.prototype.constructor=b}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(p){function t(){throw new TypeError("abstract");}return p.extend(function(){},{then:function(p,s,g){t()},cancel:function(p,s){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(p){return this.then(p,p)},otherwise:function(p){return this.then(null,p)},trace:function(){return this},
traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(p,t,r,s){function g(b,c,a){var e="";b&&b.stack&&(e+=b.stack);c&&c.stack&&(e+="\n    ----------------------------------------\n    rejected"+c.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));a&&a.stack&&(e+="\n    ----------------------------------------\n"+a.stack);console.error(b,e)}function b(b,
c,a,e){c||g(b,a,e)}function n(b,g,a,e){g?s.some(d,function(a,c){if(a.error===b)return d.splice(c,1),!0}):s.some(d,function(a){return a.error===b})||d.push({error:b,rejection:a,deferred:e,timestamp:(new Date).getTime()});c||(c=setTimeout(l,k))}function l(){var b=(new Date).getTime(),q=b-k;d=s.filter(d,function(a){return a.timestamp<q?(g(a.error,a.rejection,a.deferred),!1):!0});c=d.length?setTimeout(l,d[0].timestamp+k-b):!1}var d=[],c=!1,k=1E3;return function(c){var d=t("config-useDeferredInstrumentation");
if(d){p.on("resolved",r.hitch(console,"log","resolved"));p.on("rejected",r.hitch(console,"log","rejected"));p.on("progress",r.hitch(console,"log","progress"));var a=[];"string"===typeof d&&(a=d.split(","),d=a.shift());if("report-rejections"===d)c.instrumentRejected=b;else if("report-unhandled-rejections"===d||!0===d||1===d)c.instrumentRejected=n,k=parseInt(a[0],10)||k;else throw Error("Unsupported instrumentation usage <"+d+">");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise",
"../Evented"],function(p,t,r){function s(n){setTimeout(function(){b.apply(g,n)},0)}var g=new r,b=g.emit;g.emit=null;t.prototype.trace=function(){var b=p._toArray(arguments);this.then(function(l){s(["resolved",l].concat(b))},function(l){s(["rejected",l].concat(b))},function(l){s(["progress",l].concat(b))});return this};t.prototype.traceRejected=function(){var b=p._toArray(arguments);this.otherwise(function(l){s(["rejected",l].concat(b))});return this};return g})},"dojo/Evented":function(){define(["./aspect",
"./on"],function(p,t){function r(){}var s=p.after;r.prototype={on:function(g,b){return t.parse(this,g,b,function(g,l){return s(g,"on"+l,b,!0)})},emit:function(g,b){var n=[this];n.push.apply(n,arguments);return t.emit.apply(t,n)}};return r})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(p,t,r){function s(b,c,e,m,k){if(m=c.match(/(.*):(.*)/))return c=m[2],m=m[1],l.selector(m,c).call(k,b,e);r("touch")&&(d.test(c)&&(e=F(e)),r("event-orientationchange")||
"orientationchange"!=c||(c="resize",b=window,e=F(e)));a&&(e=a(e));if(b.addEventListener){var g=c in f,q=g?f[c]:c;b.addEventListener(q,e,g);return{remove:function(){b.removeEventListener(q,e,g)}}}if(x&&b.attachEvent)return x(b,"on"+c,e);throw Error("Target must be an event emitter");}function g(){this.cancelable=!1;this.defaultPrevented=!0}function b(){this.bubbles=!1}var n=window.ScriptEngineMajorVersion;r.add("jscript",n&&n()+ScriptEngineMinorVersion()/10);r.add("event-orientationchange",r("touch")&&
!r("android"));r.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);r.add("event-focusin",function(a,b,c){return!!c.attachEvent});var l=function(a,b,c,e){return"function"!=typeof a.on||"function"==typeof b||a.nodeType?l.parse(a,b,c,s,e,this):a.on(b,c)};l.pausable=function(a,b,c,e){var d;a=l(a,b,function(){if(!d)return c.apply(this,arguments)},e);a.pause=function(){d=!0};a.resume=function(){d=!1};return a};l.once=function(a,
b,c,e){var d=l(a,b,function(){d.remove();return c.apply(this,arguments)});return d};l.parse=function(a,b,c,e,d,f){if(b.call)return b.call(f,a,c);if(-1<b.indexOf(",")){b=b.split(/\s*,\s*/);for(var m=[],k=0,l;l=b[k++];)m.push(e(a,l,c,d,f));m.remove=function(){for(var a=0;a<m.length;a++)m[a].remove()};return m}return e(a,b,c,d,f)};var d=/^touch/;l.selector=function(a,b,c){return function(e,d){function f(b){for(m=m&&m.matches?m:t.query;!m.matches(b,a,e);)if(b==e||!1===c||!(b=b.parentNode)||1!=b.nodeType)return;
return b}var m="function"==typeof a?{matches:a}:this,k=b.bubble;return k?l(e,k(f),d):l(e,b,function(a){var b=f(a.target);return b&&d.call(b,a)})}};var c=[].slice,k=l.emit=function(a,e,d){var f=c.call(arguments,2),m="on"+e;if("parentNode"in a){var k=f[0]={},l;for(l in d)k[l]=d[l];k.preventDefault=g;k.stopPropagation=b;k.target=a;k.type=e;d=k}do a[m]&&a[m].apply(a,f);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},f=r("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!r("event-stopimmediatepropagation"))var q=
function(){this.modified=this.immediatelyStopped=!0},a=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=q,a.apply(this,arguments)}};if(r("dom-addeventlistener"))l.emit=function(a,b,c){if(a.dispatchEvent&&document.createEvent){var e=a.ownerDocument.createEvent("HTMLEvents");e.initEvent(b,!!c.bubbles,!!c.cancelable);for(var d in c)d in e||(e[d]=c[d]);return a.dispatchEvent(e)&&e}return k.apply(l,arguments)};else{l._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||
b.document||b).parentWindow||window).event);if(!a)return a;try{e&&a.type==e.type&&a.srcElement==e.target&&(a=e)}catch(c){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=z,a.preventDefault=A),a.type){case "keypress":var d="charCode"in a?a.charCode:a.keyCode;10==d?(d=0,a.keyCode=13):13==d||27==d?d=0:3==d&&(d=99);a.charCode=d;d=a;d.keyChar=
d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}return a};var e,m=function(a){this.handle=a};m.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var v=function(a){return function(b){b=l._fixEvent(b,this);var c=a.call(this,b);b.modified&&(e||setTimeout(function(){e=null}),e=b);return c}},x=function(a,b,c){c=v(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>r("jscript"))&&!r("config-_allow_leaks")){"undefined"==
typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var e=a[b];if(!e||!e.listeners){var d=e,e=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");e.listeners=[];a[b]=e;e.global=this;d&&e.listeners.push(_dojoIEListeners_.push(d)-1)}e.listeners.push(a=e.global._dojoIEListeners_.push(c)-1);return new m(a)}return p.after(a,b,c,!0)},z=function(){this.cancelBubble=
!0},A=l._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(r("touch"))var y=function(){},C=window.orientation,F=function(a){return function(b){var c=b.corrected;if(!c){var e=b.type;try{delete b.type}catch(d){}if(b.type){if(r("mozilla")){var c={},f;for(f in b)c[f]=b[f]}else y.prototype=b,c=new y;c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=
b,c.type=e;b.corrected=c;if("resize"==e){if(C==window.orientation)return null;C=window.orientation;c.type="orientationchange";return a.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);var e=c.changedTouches[0],m;for(m in e)delete c[m],c[m]=e[m]}return a.call(this,c)}};return l})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(p,t){return function(r,s,g,b){var n=r&&"function"===typeof r.then,l=n&&r instanceof t;if(!n)return 1<arguments.length?s?s(r):r:(new p).resolve(r);
l||(n=new p(r.cancel),r.then(n.resolve,n.reject,n.progress),r=n.promise);return s||g||b?r.then(s,g,b):r}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(p,t){p.fromJson=function(p){return eval("("+p+")")};p._escapeString=t.stringify;p.toJsonIndentStr="\t";p.toJson=function(r,s){return t.stringify(r,function(g,b){if(b){var n=b.__json__||b.json;if("function"==typeof n)return n.call(b)}return b},s&&p.toJsonIndentStr)};return p})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),
function(p,t,r,s,g,b){function n(){for(var b=+new Date,f=0,g;f<c.length&&(g=c[f]);f++){var a=g.response,e=a.options;g.isCanceled&&g.isCanceled()||g.isValid&&!g.isValid(a)?(c.splice(f--,1),l._onAction&&l._onAction()):g.isReady&&g.isReady(a)?(c.splice(f--,1),g.handleResponse(a),l._onAction&&l._onAction()):g.startTime&&g.startTime+(e.timeout||0)<b&&(c.splice(f--,1),g.cancel(new t("Timeout exceeded",a)),l._onAction&&l._onAction())}l._onInFlight&&l._onInFlight(g);c.length||(clearInterval(d),d=null)}function l(b){b.response.options.timeout&&
(b.startTime=+new Date);b.isFulfilled()||(c.push(b),d||(d=setInterval(n,50)),b.response.options.sync&&n())}var d=null,c=[];l.cancelAll=function(){try{s.forEach(c,function(b){try{b.cancel(new r("All requests canceled."))}catch(c){}})}catch(b){}};g&&b&&g.doc.attachEvent&&b(g.global,"unload",function(){l.cancelAll()});return l})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),
function(p,t,r,s,g,b,n,l){function d(b){return k(b)}function c(b){return b.data||b.text}p.deepCopy=function(b,c){for(var a in c){var e=b[a],d=c[a];e!==d&&(e&&"object"===typeof e&&d&&"object"===typeof d?p.deepCopy(e,d):b[a]=d)}return b};p.deepCreate=function(b,c){c=c||{};var a=n.delegate(b),e,d;for(e in b)(d=b[e])&&"object"===typeof d&&(a[e]=p.deepCreate(d,c[e]));return p.deepCopy(a,c)};var k=Object.freeze||function(b){return b};p.deferred=function(b,g,a,e,m,v){var x=new s(function(a){g&&g(x,b);return a&&
(a instanceof t||a instanceof r)?a:new r("Request canceled",b)});x.response=b;x.isValid=a;x.isReady=e;x.handleResponse=m;a=x.then(d).otherwise(function(a){a.response=b;throw a;});p.notify&&a.then(n.hitch(p.notify,"emit","load"),n.hitch(p.notify,"emit","error"));e=a.then(c);m=new l;for(var z in e)e.hasOwnProperty(z)&&(m[z]=e[z]);m.response=a;k(m);v&&x.then(function(a){v.call(x,a)},function(a){v.call(x,b,a)});x.promise=m;x.then=m.then;return x};p.addCommonMethods=function(c,d){b.forEach(d||["GET","POST",
"PUT","DELETE"],function(a){c[("DELETE"===a?"DEL":a).toLowerCase()]=function(b,d){d=n.delegate(d||{});d.method=a;return c(b,d)}})};p.parseArgs=function(b,c,a){var e=c.data,d=c.query;e&&!a&&"object"===typeof e&&(c.data=g.objectToQuery(e));d?("object"===typeof d&&(d=g.objectToQuery(d)),c.preventCache&&(d+=(d?"&":"")+"request.preventCache="+ +new Date)):c.preventCache&&(d="request.preventCache="+ +new Date);b&&d&&(b+=(~b.indexOf("?")?"&":"?")+d);return{url:b,options:c,getHeader:function(a){return null}}};
p.checkStatus=function(b){b=b||0;return 200<=b&&300>b||304===b||1223===b||!b}})},"dojo/errors/RequestError":function(){define(["./create"],function(p){return p("RequestError",function(p,r){this.response=r})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(p,t){return p("RequestTimeoutError",null,t,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(p,t,r,s,g){function b(a,
b){var c=a.xhr;a.status=a.xhr.status;a.text=c.responseText;"xml"===a.options.handleAs&&(a.data=c.responseXML);if(!b)try{r(a)}catch(e){b=e}b?this.reject(b):s.checkStatus(c.status)?this.resolve(a):(b=new p("Unable to load "+a.url+" status: "+c.status,a),this.reject(b))}function n(a){return this.xhr.getResponseHeader(a)}function l(e,m,z){var r=s.parseArgs(e,s.deepCreate(a,m),g("native-formdata")&&m&&m.data&&m.data instanceof FormData);e=r.url;m=r.options;var y,C=s.deferred(r,f,d,c,b,function(){y&&y()}),
F=r.xhr=l._create();if(!F)return C.cancel(new p("XHR was not created")),z?C:C.promise;r.getHeader=n;k&&(y=k(F,C,r));var D=m.data,H=!m.sync,N=m.method;try{F.open(N,e,H,m.user||q,m.password||q);m.withCredentials&&(F.withCredentials=m.withCredentials);var J=m.headers;e="application/x-www-form-urlencoded";if(J)for(var M in J)"content-type"===M.toLowerCase()?e=J[M]:J[M]&&F.setRequestHeader(M,J[M]);e&&!1!==e&&F.setRequestHeader("Content-Type",e);J&&"X-Requested-With"in J||F.setRequestHeader("X-Requested-With",
"XMLHttpRequest");s.notify&&s.notify.emit("send",r,C.promise.cancel);F.send(D)}catch(E){C.reject(E)}t(C);F=null;return z?C:C.promise}g.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});g.add("dojo-force-activex-xhr",function(){return g("activex")&&!document.addEventListener&&"file:"===window.location.protocol});g.add("native-xhr2",function(){if(g("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==
typeof a.upload)}});g.add("native-formdata",function(){return"function"===typeof FormData});var d,c,k,f;g("native-xhr2")?(d=function(a){return!this.isFulfilled()},f=function(a,b){b.xhr.abort()},k=function(a,b,c){function e(a){b.handleResponse(c)}function d(a){a=new p("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,a)}function f(a){a.lengthComputable&&(c.loaded=a.loaded,c.total=a.total,b.progress(c))}a.addEventListener("load",e,!1);a.addEventListener("error",d,!1);a.addEventListener("progress",
f,!1);return function(){a.removeEventListener("load",e,!1);a.removeEventListener("error",d,!1);a.removeEventListener("progress",f,!1);a=null}}):(d=function(a){return a.xhr.readyState},c=function(a){return 4===a.xhr.readyState},f=function(a,b){var c=b.xhr,e=typeof c.abort;"function"!==e&&"object"!==e&&"unknown"!==e||c.abort()});var q,a={data:null,query:null,sync:!1,method:"GET"};l._create=function(){throw Error("XMLHTTP not available");};if(g("native-xhr")&&!g("dojo-force-activex-xhr"))l._create=function(){return new XMLHttpRequest};
else if(g("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),l._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP"),l._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(m){}}s.addCommonMethods(l);return l})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(p,t,r,s){function g(b){var c=l[b.options.handleAs];b.data=c?c(b):b.data||b.text;return b}
s.add("activex","undefined"!==typeof ActiveXObject);s.add("dom-parser",function(b){return"DOMParser"in b});var b;if(s("activex")){var n=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];b=function(b){var c=b.data;c&&s("dom-qsa2.1")&&!c.querySelectorAll&&s("dom-parser")&&(c=(new DOMParser).parseFromString(b.text,"application/xml"));if(!c||!c.documentElement){var k=b.text;r.some(n,function(b){try{var d=new ActiveXObject(b);d.async=!1;d.loadXML(k);c=d}catch(a){return!1}return!0})}return c}}var l=
{javascript:function(b){return t.eval(b.text||"")},json:function(b){return p.parse(b.text||null)},xml:b};g.register=function(b,c){l[b]=c};return g})},"dojo/selector/_loader":function(){define(["../has","require"],function(p,t){var r=document.createElement("div");p.add("dom-qsa2.1",!!r.querySelectorAll);p.add("dom-qsa3",function(){try{return r.innerHTML="<p class='TEST'></p>",1==r.querySelectorAll(".TEST:empty").length}catch(g){}});var s;return{load:function(g,b,n,l){l=t;g="default"==g?p("config-selectorEngine")||
"css3":g;g="css2"==g||"lite"==g?"./lite":"css2.1"==g?p("dom-qsa2.1")?"./lite":"./acme":"css3"==g?p("dom-qsa3")?"./lite":"./acme":"acme"==g?"./acme":(l=b)&&g;if("?"==g.charAt(g.length-1)){g=g.substring(0,g.length-1);var d=!0}if(d&&(p("dom-compliant-qsa")||s))return n(s);l([g],function(b){"./lite"!=g&&(s=b);n(b)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(p,t,r,s,g){var b=s.trim,n=r.forEach,l="BackCompat"==g.doc.compatMode,
d=!1,c=function(){return!0},k=function(a){a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var c=function(c,e){return b(a.slice(c,e))},e=[],f=-1,m=-1,k=-1,l=-1,g=-1,q=-1,n=-1,v,x="",z="",p,y=0,s=a.length,r=null,A=null,t=function(){0<=q&&(r.id=c(q,y).replace(/\\/g,""),q=-1);if(0<=n){var a=n==y?null:c(n,y);r[0>">~+".indexOf(a)?"tag":"oper"]=a;n=-1}0<=g&&(r.classes.push(c(g+1,y).replace(/\\/g,"")),g=-1)};x=z,z=a.charAt(y),y<s;y++)"\\"!=x&&(r||(p=y,r={query:null,pseudos:[],attrs:[],classes:[],tag:null,
oper:null,id:null,getTag:function(){return d?this.otag:this.tag}},n=y),v?z==v&&(v=null):"'"==z||'"'==z?v=z:0<=f?"]"==z?(A.attr?A.matchFor=c(k||f+1,y):A.attr=c(f+1,y),!(f=A.matchFor)||'"'!=f.charAt(0)&&"'"!=f.charAt(0)||(A.matchFor=f.slice(1,-1)),A.matchFor&&(A.matchFor=A.matchFor.replace(/\\/g,"")),r.attrs.push(A),A=null,f=k=-1):"="==z&&(k=0<="|~^$*".indexOf(x)?x:"",A.type=k+z,A.attr=c(f+1,y-k.length),k=y+1):0<=m?")"==z&&(0<=l&&(A.value=c(m+1,y)),l=m=-1):"#"==z?(t(),q=y+1):"."==z?(t(),g=y):":"==z?
(t(),l=y):"["==z?(t(),f=y,A={}):"("==z?(0<=l&&(A={name:c(l+1,y),value:null},r.pseudos.push(A)),m=y):" "==z&&x!=z&&(t(),0<=l&&r.pseudos.push({name:c(l+1,y)}),r.loops=r.pseudos.length||r.attrs.length||r.classes.length,r.oquery=r.query=c(p,y),r.otag=r.tag=r.oper?null:r.tag||"*",r.tag&&(r.tag=r.tag.toUpperCase()),e.length&&e[e.length-1].oper&&(r.infixOper=e.pop(),r.query=r.infixOper.query+" "+r.query),e.push(r),r=null));return e},f=function(a,b){return a?b?function(){return a.apply(window,arguments)&&
b.apply(window,arguments)}:a:b},q=function(a,b){var c=b||[];a&&c.push(a);return c},a=function(a){return 1==a.nodeType},e=function(a,b){return a?"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(d?a.getAttribute(b):a.getAttribute(b,2))||"":""},m={"*=":function(a,b){return function(c){return 0<=e(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==e(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+e(c,a);var d=c.lastIndexOf(b);return-1<d&&d==
c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+e(b,a)+" ").indexOf(c)}},"|=":function(a,b){var c=b+"-";return function(d){d=e(d,a);return d==b||0==d.indexOf(c)}},"=":function(a,b){return function(c){return e(c,a)==b}}},v="undefined"==typeof g.doc.firstChild.nextElementSibling,x=v?"nextSibling":"nextElementSibling",z=v?"previousSibling":"previousElementSibling",A=v?a:c,y=function(a){for(;a=a[z];)if(A(a))return!1;return!0},C=function(a){for(;a=a[x];)if(A(a))return!1;
return!0},F=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,e=b.children||b.childNodes,d=a._i||a.getAttribute("_i")||-1,f=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!e)return-1;e=e.length;if(f==e&&0<=d&&0<=f)return d;t("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",e):b._l=e;d=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[x])A(b)&&(t("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(d=c));return d},D=function(a){return!(F(a)%2)},H=function(a){return F(a)%
2},N={checked:function(a,b){return function(a){return!("checked"in a?!a.checked:!a.selected)}},disabled:function(a,b){return function(a){return a.disabled}},enabled:function(a,b){return function(a){return!a.disabled}},"first-child":function(){return y},"last-child":function(){return C},"only-child":function(a,b){return function(a){return y(a)&&C(a)}},empty:function(a,b){return function(a){var b=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},
contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=k(b)[0],e={el:1};"*"!=c.tag&&(e.tag=1);c.classes.length||(e.classes=1);var d=M(c,e);return function(a){return!d(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return H;if("even"==b)return D;if(-1!=b.indexOf("n")){var e=b.split("n",2),d=e[0]?"-"==e[0]?-1:c(e[0]):1,f=e[1]?c(e[1]):0,m=0,k=-1;0<d?0>f?f=f%d&&d+f%d:0<f&&(f>=d&&(m=f-f%d),f%=d):
0>d&&(d*=-1,0<f&&(k=f,f%=d));if(0<d)return function(a){a=F(a);return a>=m&&(0>k||a<=k)&&a%d==f};b=f}var l=c(b);return function(a){return F(a)==l}}},J=9>t("ie")||9==t("ie")&&t("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return d?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},M=function(b,e){if(!b)return c;e=e||{};var k=null;"el"in e||(k=f(k,a));"tag"in e||"*"!=b.tag&&(k=f(k,function(a){return a&&
(d?a.tagName:a.tagName.toUpperCase())==b.getTag()}));"classes"in e||n(b.classes,function(a,b,c){var e=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");k=f(k,function(a){return e.test(a.className)});k.count=b});"pseudos"in e||n(b.pseudos,function(a){var b=a.name;N[b]&&(k=f(k,N[b](b,a.value)))});"attrs"in e||n(b.attrs,function(a){var b,c=a.attr;a.type&&m[a.type]?b=m[a.type](c,a.matchFor):c.length&&(b=J(c));b&&(k=f(k,b))});"id"in e||b.id&&(k=f(k,function(a){return!!a&&a.id==b.id}));k||"default"in e||(k=c);return k},
E=function(b){return function(c,e,d){for(;c=c[x];)if(!v||a(c)){d&&!ka(c,d)||!b(c)||e.push(c);break}return e}},K=function(a){return function(b,c,e){for(b=b[x];b;){if(A(b)){if(e&&!ka(b,e))break;a(b)&&c.push(b)}b=b[x]}return c}},G=function(a){a=a||c;return function(b,c,e){for(var d=0,f=b.children||b.childNodes;b=f[d++];)A(b)&&(!e||ka(b,e))&&a(b,d)&&c.push(b);return c}},u={},S=function(a){var b=u[a.query];if(b)return b;var e=a.infixOper,e=e?e.oper:"",d=M(a,{el:1}),f="*"==a.tag,m=g.doc.getElementsByClassName;
if(e)m={el:1},f&&(m.tag=1),d=M(a,m),"+"==e?b=E(d):"~"==e?b=K(d):">"==e&&(b=G(d));else if(a.id)d=!a.loops&&f?c:M(a,{el:1,id:1}),b=function(b,c){var e=p.byId(a.id,b.ownerDocument||b);if(e&&d(e)){if(9==b.nodeType)return q(e,c);for(var f=e.parentNode;f&&f!=b;)f=f.parentNode;if(f)return q(e,c)}};else if(m&&/\{\s*\[native code\]\s*\}/.test(String(m))&&a.classes.length&&!l)var d=M(a,{el:1,classes:1,id:1}),k=a.classes.join(" "),b=function(a,b,c){b=q(0,b);for(var e,f=0,m=a.getElementsByClassName(k);e=m[f++];)d(e,
a)&&ka(e,c)&&b.push(e);return b};else f||a.loops?(d=M(a,{el:1,tag:1,id:1}),b=function(b,c,e){c=q(0,c);for(var f,m=0,k=(f=a.getTag())?b.getElementsByTagName(f):[];f=k[m++];)d(f,b)&&ka(f,e)&&c.push(f);return c}):b=function(b,c,e){c=q(0,c);for(var d=0,f=a.getTag(),f=f?b.getElementsByTagName(f):[];b=f[d++];)ka(b,e)&&c.push(b);return c};return u[a.query]=b},Q={},W={},P=function(a){var c=k(b(a));if(1==c.length){var e=S(c[0]);return function(a){if(a=e(a,[]))a.nozip=!0;return a}}return function(a){a=q(a);
for(var b,e,d=c.length,f,m,k=0;k<d;k++){m=[];b=c[k];e=a.length-1;0<e&&(f={},m.nozip=!0);e=S(b);for(var l=0;b=a[l];l++)e(b,m,f);if(!m.length)break;a=m}return m}},aa=t("ie")?"commentStrip":"nozip",ca=!!g.doc.querySelectorAll,Y=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,U=function(a,b,c,e){return c?(b?b+" ":"")+c+(e?" "+e:""):a},V=/([^[]*)([^\]]*])?/g,R=function(a,b,c){return b.replace(Y,U)+(c||"")},ba=function(a,b){a=a.replace(V,R);if(ca){var c=W[a];if(c&&!b)return c}if(c=Q[a])return c;var c=a.charAt(0),
e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(b=!0);if(!ca||b||-1!=">~+".indexOf(c)||t("ie")&&-1!=a.indexOf(":")||l&&0<=a.indexOf(".")||-1!=a.indexOf(":contains")||-1!=a.indexOf(":checked")||-1!=a.indexOf("|=")){var d=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return Q[a]=2>d.length?P(a):function(a){for(var b=0,c=[],e;e=d[b++];)c=c.concat(P(e)(a));return c}}var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return W[a]=function(b){try{if(9!=b.nodeType&&!e)throw"";var c=b.querySelectorAll(f);
c[aa]=!0;return c}catch(d){return ba(a,!0)(b)}}},Z=0,na=t("ie")?function(a){return d?a.getAttribute("_uid")||a.setAttribute("_uid",++Z)||Z:a.uniqueID}:function(a){return a._uid||(a._uid=++Z)},ka=function(a,b){if(!b)return 1;var c=na(a);return b[c]?0:b[c]=1},ja=function(b){if(b&&b.nozip)return b;if(!b||!b.length)return[];if(2>b.length)return[b[0]];var c=[];Z++;var e,f;if(t("ie")&&d){var m=Z+"";for(e=0;e<b.length;e++)(f=b[e])&&f.getAttribute("_zipIdx")!=m&&(c.push(f),f.setAttribute("_zipIdx",m))}else if(t("ie")&&
b.commentStrip)try{for(e=0;e<b.length;e++)(f=b[e])&&a(f)&&c.push(f)}catch(k){}else for(e=0;e<b.length;e++)(f=b[e])&&f._zipIdx!=Z&&(c.push(f),f._zipIdx=Z);return c},ea=function(a,b){b=b||g.doc;d="div"===(b.ownerDocument||b).createElement("div").tagName;var c=ba(a)(b);return c&&c.nozip?c:ja(c)};ea.filter=function(a,b,c){for(var e=[],d=k(b),d=1!=d.length||/[^\w#\.]/.test(b)?function(a){return-1!=r.indexOf(ea(b,p.byId(c)),a)}:M(d[0]),f=0,m;m=a[f];f++)d(m)&&e.push(m);return e};return ea})},"dojo/selector/lite":function(){define(["../has",
"../_base/kernel"],function(p,t){var r=document.createElement("div"),s=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector,g=r.querySelectorAll,b=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;p.add("dom-matches-selector",!!s);p.add("dom-qsa",!!g);var n=function(b,f){if(c&&-1<b.indexOf(","))return c(b,f);var q=f?f.ownerDocument||f:t.doc||document,a=(g?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(b);
f=f||q;if(a){if(a[2]){var e=t.byId?t.byId(a[2],q):q.getElementById(a[2]);if(!e||a[1]&&a[1]!=e.tagName.toLowerCase())return[];if(f!=q)for(q=e;q!=f;)if(q=q.parentNode,!q)return[];return a[3]?n(a[3],e):[e]}if(a[3]&&f.getElementsByClassName)return f.getElementsByClassName(a[4]);if(a[5])if(e=f.getElementsByTagName(a[5]),a[4]||a[6])b=(a[4]||"")+a[6];else return e}if(g)return 1===f.nodeType&&"object"!==f.nodeName.toLowerCase()?l(f,b,f.querySelectorAll):f.querySelectorAll(b);e||(e=f.getElementsByTagName("*"));
for(var a=[],q=0,m=e.length;q<m;q++){var v=e[q];1==v.nodeType&&d(v,b,f)&&a.push(v)}return a},l=function(c,d,l){var a=c,e=c.getAttribute("id"),m=e||"__dojo__",g=c.parentNode,n=/^\s*[+~]/.test(d);if(n&&!g)return[];e?m=m.replace(/'/g,"\\$&"):c.setAttribute("id",m);n&&g&&(c=c.parentNode);d=d.match(b);for(g=0;g<d.length;g++)d[g]="[id='"+m+"'] "+d[g];d=d.join(",");try{return l.call(c,d)}finally{e||a.removeAttribute("id")}};if(!p("dom-matches-selector"))var d=function(){function b(a,c,e){var d=c.charAt(0);
if('"'==d||"'"==d)c=c.slice(1,-1);c=c.replace(/\\/g,"");var f=l[e||""];return function(b){return(b=b.getAttribute(a))&&f(b,c)}}function c(a){return function(b,c){for(;(b=b.parentNode)!=c;)if(a(b,c))return!0}}function d(a){return function(b,c){b=b.parentNode;return a?b!=c&&a(b,c):b==c}}function a(a,b){return a?function(c,e){return b(c)&&a(c,e)}:b}var e="div"==r.tagName?"toLowerCase":"toUpperCase",m={"":function(a){a=a[e]();return function(b){return b.tagName==a}},".":function(a){var b=" "+a+" ";return function(c){return-1<
c.className.indexOf(a)&&-1<(" "+c.className+" ").indexOf(b)}},"#":function(a){return function(b){return b.id==a}}},l={"^=":function(a,b){return 0==a.indexOf(b)},"*=":function(a,b){return-1<a.indexOf(b)},"$=":function(a,b){return a.substring(a.length-b.length,a.length)==b},"~=":function(a,b){return-1<(" "+a+" ").indexOf(" "+b+" ")},"|=":function(a,b){return 0==(a+"-").indexOf(b+"-")},"=":function(a,b){return a==b},"":function(a,b){return!0}},g={};return function(e,l,n){var v=g[l];if(!v){if(l.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,
function(e,l,g,n,x,z,p){n?v=a(v,m[g||""](n.replace(/\\/g,""))):l?v=(" "==l?c:d)(v):x&&(v=a(v,b(x,p,z)));return""}))throw Error("Syntax error in query");if(!v)return!0;g[l]=v}return v(e,n)}}();if(!p("dom-qsa"))var c=function(c,d){for(var l=c.match(b),a=[],e=0;e<l.length;e++){c=new String(l[e].replace(/\s*$/,""));c.indexOf=escape;for(var m=n(c,d),g=0,x=m.length;g<x;g++){var z=m[g];a[z.sourceIndex]=z}}l=[];for(e in a)l.push(a[e]);return l};n.match=s?function(b,c,d){return d&&9!=d.nodeType?l(d,c,function(a){return s.call(b,
a)}):s.call(b,c)}:d;return n})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(p,t,r){return p("dojo.dnd.Target",r,{constructor:function(){this.isSource=!1;t.remove(this.node,"dojoDndSource")}})})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(p,t,r){function s(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function g(a,b,c){var e,d,f,m,k,l,g,q=this._inherited=this._inherited||{};"string"==typeof a&&(e=a,a=b,b=c);c=0;
m=a.callee;(e=e||m.nom)||s("can't deduce a name to call inherited()",this.declaredClass);k=this.constructor._meta;f=k.bases;g=q.p;if(e!=D){if(q.c!==m&&(g=0,l=f[0],k=l._meta,k.hidden[e]!==m)){(d=k.chains)&&"string"==typeof d[e]&&s("calling chained method with inherited: "+e,this.declaredClass);do if(k=l._meta,d=l.prototype,k&&(d[e]===m&&d.hasOwnProperty(e)||k.hidden[e]===m))break;while(l=f[++g]);g=l?g:-1}if(l=f[++g])if(d=l.prototype,l._meta&&d.hasOwnProperty(e))c=d[e];else{m=A[e];do if(d=l.prototype,
(c=d[e])&&(l._meta?d.hasOwnProperty(e):c!==m))break;while(l=f[++g])}c=l&&c||A[e]}else{if(q.c!==m&&(g=0,(k=f[0]._meta)&&k.ctor!==m)){for((d=k.chains)&&"manual"===d.constructor||s("calling chained constructor with inherited",this.declaredClass);(l=f[++g])&&(!(k=l._meta)||k.ctor!==m););g=l?g:-1}for(;(l=f[++g])&&!(c=(k=l._meta)?k.ctor:l););c=l&&c}q.c=c;q.p=g;if(c)return!0===b?c:c.apply(this,b||a)}function b(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function n(a,b,c){var e=
this.getInherited(a,b);if(e)return e.apply(this,c||b||a)}function l(a){for(var b=this.constructor._meta.bases,c=0,e=b.length;c<e;++c)if(b[c]===a)return!0;return this instanceof a}function d(a,b){for(var c in b)c!=D&&b.hasOwnProperty(c)&&(a[c]=b[c]);if(t("bug-for-in-skips-shadowed"))for(var e=r._extraNames,d=e.length;d;)c=e[--d],c!=D&&b.hasOwnProperty(c)&&(a[c]=b[c])}function c(a){x.safeMixin(this.prototype,a);return this}function k(a,b){return x([this].concat(a),b||{})}function f(a,b){return function(){var c=
arguments,e=c,d=c[0],f,m;m=a.length;var k;if(!(this instanceof c.callee))return v(c);if(b&&(d&&d.preamble||this.preamble))for(k=Array(a.length),k[0]=c,f=0;;){(d=c[0])&&(d=d.preamble)&&(c=d.apply(this,c)||c);d=a[f].prototype;(d=d.hasOwnProperty("preamble")&&d.preamble)&&(c=d.apply(this,c)||c);if(++f==m)break;k[f]=c}for(f=m-1;0<=f;--f)d=a[f],(d=(m=d._meta)?m.ctor:d)&&d.apply(this,k?k[f]:c);(d=this.postscript)&&d.apply(this,e)}}function q(a,b){return function(){var c=arguments,e=c,d=c[0];if(!(this instanceof
c.callee))return v(c);b&&(d&&(d=d.preamble)&&(e=d.apply(this,e)||e),(d=this.preamble)&&d.apply(this,e));a&&a.apply(this,c);(d=this.postscript)&&d.apply(this,c)}}function a(a){return function(){var b=arguments,c=0,e,d;if(!(this instanceof b.callee))return v(b);for(;e=a[c];++c)if(e=(d=e._meta)?d.ctor:e){e.apply(this,b);break}(e=this.postscript)&&e.apply(this,b)}}function e(a,b,c){return function(){var e,d,f=0,m=1;c&&(f=b.length-1,m=-1);for(;e=b[f];f+=m)d=e._meta,(e=(d?d.hidden:e.prototype)[a])&&e.apply(this,
arguments)}}function m(a){C.prototype=a.prototype;a=new C;C.prototype=null;return a}function v(a){var b=a.callee,c=m(b);b.apply(c,a);return c}function x(n,v,p){"string"!=typeof n&&(p=v,v=n,n="");p=p||{};var t,C,G,u,S,Q,W,P=1,aa=v;if("[object Array]"==y.call(v)){P=n;G=[];u=[{cls:0,refs:[]}];Q={};for(var ca=1,Y=v.length,U=0,V,R,ba,Z;U<Y;++U){(V=v[U])?"[object Function]"!=y.call(V)&&s("mixin #"+U+" is not a callable constructor.",P):s("mixin #"+U+" is unknown. Did you use dojo.require to pull it in?",
P);R=V._meta?V._meta.bases:[V];ba=0;for(V=R.length-1;0<=V;--V)Z=R[V].prototype,Z.hasOwnProperty("declaredClass")||(Z.declaredClass="uniqName_"+F++),Z=Z.declaredClass,Q.hasOwnProperty(Z)||(Q[Z]={count:0,refs:[],cls:R[V]},++ca),Z=Q[Z],ba&&ba!==Z&&(Z.refs.push(ba),++ba.count),ba=Z;++ba.count;u[0].refs.push(ba)}for(;u.length;){ba=u.pop();G.push(ba.cls);for(--ca;C=ba.refs,1==C.length;){ba=C[0];if(!ba||--ba.count){ba=0;break}G.push(ba.cls);--ca}if(ba)for(U=0,Y=C.length;U<Y;++U)ba=C[U],--ba.count||u.push(ba)}ca&&
s("can't build consistent linearization",P);V=v[0];G[0]=V?V._meta&&V===G[G.length-V._meta.bases.length]?V._meta.bases.length:1:0;Q=G;G=Q[0];P=Q.length-G;v=Q[P]}else Q=[0],v?"[object Function]"==y.call(v)?(G=v._meta,Q=Q.concat(G?G.bases:v)):s("base class is not a callable constructor.",n):null!==v&&s("unknown base class. Did you use dojo.require to pull it in?",n);if(v)for(C=P-1;;--C){t=m(v);if(!C)break;G=Q[C];(G._meta?d:z)(t,G.prototype);u=new Function;u.superclass=v;u.prototype=t;v=t.constructor=
u}else t={};x.safeMixin(t,p);G=p.constructor;G!==A.constructor&&(G.nom=D,t.constructor=G);for(C=P-1;C;--C)(G=Q[C]._meta)&&G.chains&&(W=z(W||{},G.chains));t["-chains-"]&&(W=z(W||{},t["-chains-"]));G=!W||!W.hasOwnProperty(D);Q[0]=u=W&&"manual"===W.constructor?a(Q):1==Q.length?q(p.constructor,G):f(Q,G);u._meta={bases:Q,hidden:p,chains:W,parents:aa,ctor:p.constructor};u.superclass=v&&v.prototype;u.extend=c;u.createSubclass=k;u.prototype=t;t.constructor=u;t.getInherited=b;t.isInstanceOf=l;t.inherited=
H;t.__inherited=g;n&&(t.declaredClass=n,r.setObject(n,u));if(W)for(S in W)t[S]&&"string"==typeof W[S]&&S!=D&&(G=t[S]=e(S,Q,"after"===W[S]),G.nom=S);return u}var z=r.mixin,A=Object.prototype,y=A.toString,C=new Function,F=0,D="constructor",H=p.config.isDebug?n:g;p.safeMixin=x.safeMixin=function(a,b){var c,e;for(c in b)e=b[c],e===A[c]&&c in A||c==D||("[object Function]"==y.call(e)&&(e.nom=c),a[c]=e);if(t("bug-for-in-skips-shadowed"))for(var d=r._extraNames,f=d.length;f;)c=d[--f],e=b[c],e===A[c]&&c in
A||c==D||("[object Function]"==y.call(e)&&(e.nom=c),a[c]=e);return a};return p.declare=x})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(p,t,r){function s(d){if("string"==typeof d||d instanceof String){if(d&&!b.test(d))return n[0]=d,n;d=d.split(b);d.length&&!d[0]&&d.shift();d.length&&!d[d.length-1]&&d.pop();return d}return d?t.filter(d,function(b){return b}):[]}var g,b=/\s+/,n=[""],l={};return g={contains:function(b,c){return 0<=(" "+r.byId(b).className+" ").indexOf(" "+
c+" ")},add:function(b,c){b=r.byId(b);c=s(c);var k=b.className,f,k=k?" "+k+" ":" ";f=k.length;for(var l=0,a=c.length,e;l<a;++l)(e=c[l])&&0>k.indexOf(" "+e+" ")&&(k+=e+" ");f<k.length&&(b.className=k.substr(1,k.length-2))},remove:function(b,c){b=r.byId(b);var k;if(void 0!==c){c=s(c);k=" "+b.className+" ";for(var f=0,l=c.length;f<l;++f)k=k.replace(" "+c[f]+" "," ");k=p.trim(k)}else k="";b.className!=k&&(b.className=k)},replace:function(b,c,k){b=r.byId(b);l.className=b.className;g.remove(l,k);g.add(l,
c);b.className!==l.className&&(b.className=l.className)},toggle:function(b,c,k){b=r.byId(b);if(void 0===k){c=s(c);for(var f=0,l=c.length,a;f<l;++f)a=c[f],g[g.contains(b,a)?"remove":"add"](b,a)}else g[k?"add":"remove"](b,c);return k}}})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f){r.isAsync||l(0,function(){require(["dojo/dnd/AutoSource",
"dojo/dnd/Target"])});var q=t("dojo.dnd.Source",k,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,b){s.mixin(this,s.mixin({},b));var c=this.accept;if(c.length){this.accept={};for(var f=0;f<c.length;++f)this.accept[c[f]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&g.add(this.node,
"dojoDndSource");this.targetState="";this.accept&&g.add(this.node,"dojoDndTarget");this.horizontal&&g.add(this.node,"dojoDndHorizontal");this.topics=[d.subscribe("/dnd/source/over",s.hitch(this,"onDndSourceOver")),d.subscribe("/dnd/start",s.hitch(this,"onDndStart")),d.subscribe("/dnd/drop",s.hitch(this,"onDndDrop")),d.subscribe("/dnd/cancel",s.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,
f=!1,k=0;k<d.length;++k)if(d[k]in this.accept){f=!0;break}if(!f)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==f.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){q.superclass.destroy.call(this);p.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){q.superclass.onMouseMove.call(this,a);var e=f.manager();
if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&e.startDrag(this,d,this.copyState(c.getCopyKeyState(a),!0))}this.isDragging&&(d=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=b.position(this.current,!0)),d=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==b.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/
2),this.current!=this.targetAnchor||d!=this.before)&&(this._markTargetAnchor(d),e.canDrop(!this.current||e.source!=this||!(this.current.id in this.selection)))}},onMouseDown:function(a){this.mouseDown||!this._legalMouseDown(a)||this.skipForm&&c.isFormElement(a)||(this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,q.superclass.onMouseDown.call(this,a))},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,q.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=
!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=f.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?"":"Disabled");this==a&&f.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==
d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,d){var f=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return f.call(this,a.getItem(b.id).data,c)}:d?function(b){var e=
a.getItem(b.id);b=b.cloneNode(!0);b.id=c.getUniqueId();return{node:b,data:e.data,type:e.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();d||this.creator||a.selectNone();this.insertNodes(!0,b,this.before,this.current);!d&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=f},onDropInternal:function(a,b){var d=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?
function(a,b){return d.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id);a=a.cloneNode(!0);a.id=c.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=d}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){q.superclass.onOverEvent.call(this);
f.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){q.superclass.onOutEvent.call(this);f.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(this.current!=this.targetAnchor||this.before!=a)this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&
this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!n.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(g.contains(a,"dojoDndHandle"))return!0;
if(g.contains(a,"dojoDndItem")||g.contains(a,"dojoDndIgnore"))break}return!1}});return q})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(p,t,r,s,g){function b(g,l){var d=function(b,d){return t(b,g,function(f){if(l)return l(f,d);if(!s.isDescendant(f.relatedTarget,b))return d.call(this,f)})};d.bubble=function(c){return b(g,function(b,d){var l=c(b.target),a=b.relatedTarget;if(l&&l!=(a&&1==a.nodeType&&c(a)))return d.call(l,b)})};return d}r.add("dom-quirks",
g.doc&&"BackCompat"==g.doc.compatMode);r.add("events-mouseenter",g.doc&&"onmouseenter"in g.doc.createElement("div"));r.add("events-mousewheel",g.doc&&"onmousewheel"in g.doc);g=r("dom-quirks")&&r("ie")||!r("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(b,l){return b.button&l},isLeft:function(b){return b.button&1},isMiddle:function(b){return b.button&4},isRight:function(b){return b.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,l){return b.button==l},isLeft:function(b){return 0==
b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};p.mouseButtons=g;p=r("events-mousewheel")?"mousewheel":function(b,l){return t(b,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;l.call(this,b)})};return{_eventHandler:b,enter:b("mouseover"),leave:b("mouseout"),wheel:p,isLeft:g.isLeft,isMiddle:g.isMiddle,isRight:g.isRight}})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(p,t,r,s,g){var b=0,n=[],
l=0;t=function(){b=1;p._postLoad=p.config.afterOnLoad=!0;d()};var d=function(){if(!l){for(l=1;b&&(!s||0==s._Q.length)&&(r.idle?r.idle():1)&&n.length;){var c=n.shift();try{c()}catch(d){if(d.info=d.message,r.signal)r.signal("error",d);else throw d;}}l=0}};r.on&&r.on("idle",d);s&&(s._onQEmpty=d);var c=p.ready=p.addOnLoad=function(b,c,a){var e=g._toArray(arguments);"number"!=typeof b?(a=c,c=b,b=1E3):e.shift();a=a?g.hitch.apply(p,e):function(){c()};a.priority=b;for(e=0;e<n.length&&b>=n[e].priority;e++);
n.splice(e,0,a);d()},k=p.config.addOnLoad;if(k)c[g.isArray(k)?"apply":"call"](p,k);p.config.parseOnLoad&&!p.isAsync&&c(99,function(){p.parser||(p.deprecated("Add explicit require(['dojo/parser']);","","2.0"),r(["dojo/parser"]))});s?s(t):t();return c})},"dojo/domReady":function(){define(["./has"],function(p){function t(a){d.push(a);l&&r()}function r(){if(!c){for(c=!0;d.length;)try{d.shift()(g)}catch(a){}c=!1;t._onQEmpty()}}var s=this,g=document,b={loaded:1,complete:1},n="string"!=typeof g.readyState,
l=!!b[g.readyState],d=[],c;t.load=function(a,b,c){t(c)};t._Q=d;t._onQEmpty=function(){};n&&(g.readyState="loading");if(!l){var k=[],f=function(a){a=a||s.event;l||"readystatechange"==a.type&&!b[g.readyState]||(n&&(g.readyState="complete"),l=1,r())},q=function(a,b){a.addEventListener(b,f,!1);d.push(function(){a.removeEventListener(b,f,!1)})};if(!p("dom-addeventlistener")){var q=function(a,b){b="on"+b;a.attachEvent(b,f);d.push(function(){a.detachEvent(b,f)})},a=g.createElement("div");try{a.doScroll&&
null===s.frameElement&&k.push(function(){try{return a.doScroll("left"),1}catch(b){}})}catch(e){}}q(g,"DOMContentLoaded");q(s,"load");"onreadystatechange"in g?q(g,"readystatechange"):n||k.push(function(){return b[g.readyState]});if(k.length){var m=function(){if(!l){for(var a=k.length;a--;)if(k[a]()){f("poller");return}setTimeout(m,30)}};m()}}return t})},"dojo/topic":function(){define(["./Evented"],function(p){var t=new p;return{publish:function(p,s){return t.emit.apply(t,arguments)},subscribe:function(p,
s){return t.on.apply(t,arguments)}}})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(p,t,r,s){var g=r.getObject("dojo.dnd",!0);g.getCopyKeyState=function(b){return b[p("mac")?"metaKey":"ctrlKey"]};g._uniqueId=0;g.getUniqueId=function(){var b;do b=t._scopeName+"Unique"+ ++g._uniqueId;while(s.byId(b));return b};g._empty={};g.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" button textarea input select option ".indexOf(" "+
b.tagName.toLowerCase()+" ")};return g})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f){var q=t("dojo.dnd.Selector",f,{constructor:function(a,b){b||(b={});this.singular=b.singular;this.autoSync=b.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(d(this.node,c.press,s.hitch(this,
"onMouseDown")),d(this.node,c.release,s.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new l,b=k._empty,c;for(c in this.selection)c in b||a.push(g.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(g.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=k._empty,c;for(c in this.selection)if(!(c in a)){var d=
g.byId(c);this.delItem(c);b.destroy(d)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){b=b||r.global;var c=this.selection,d=k._empty,f;for(f in c)f in d||a.call(b,this.getItem(f),f,this)},sync:function(){q.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],b=k._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);p.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,
b,c,d){var f=this._normalizedCreator;this._normalizedCreator=function(b,c){var e=f.call(this,b,c);a?(this.anchor?this.anchor!=e.node&&(this._removeItemClass(e.node,"Anchor"),this._addItemClass(e.node,"Selected")):(this.anchor=e.node,this._removeItemClass(e.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[e.node.id]=1):(this._removeItemClass(e.node,"Selected"),this._removeItemClass(e.node,"Anchor"));return e};q.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=
f;return this},destroy:function(){q.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!k.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,n.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){k.getCopyKeyState(a)||this._removeSelection();var b=this.getAllNodes();if(b.length&&(this.anchor||(this.anchor=b[0],this._addItemClass(this.anchor,
"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var c=0,d;c<b.length&&(d=b[c],d!=this.anchor&&d!=this.current);++c);for(++c;c<b.length;++c){d=b[c];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?k.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,
"Anchor"),this.selection[this.current.id]=1):k.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||
(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=d(this.node,c.move,s.hitch(this,"onMouseMove"))},
onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=k._empty,b;for(b in this.selection)if(!(b in a)){var c=g.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return q})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),
function(p,t,r,s,g,b){function n(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}function l(a){if(a.canHaveChildren)try{a.innerHTML="";return}catch(b){}for(var c;c=a.lastChild;)d(c,a)}function d(a,b){a.firstChild&&l(a);b&&(r("ie")&&b.canHaveChildren&&"removeNode"in a?a.removeNode(!1):b.removeChild(a))}var c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],
col:["table","colgroup"],li:["ul"]},k=/<\s*([\w\:]+)/,f={},q=0,a="__"+t._scopeName+"ToDomId",e;for(e in c)c.hasOwnProperty(e)&&(t=c[e],t.pre="option"==e?'<select multiple="multiple">':"<"+t.join("><")+">",t.post="</"+t.reverse().join("></")+">");var m;8>=r("ie")&&(m=function(a){a.__dojo_html5_tested="yes";var b=v("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
function(b){a.createElement(b)});x(b)});p.toDom=function(b,e){e=e||s.doc;var d=e[a];d||(e[a]=d=++q+"",f[d]=e.createElement("div"));8>=r("ie")&&!e.__dojo_html5_tested&&e.body&&m(e);b+="";var l=b.match(k),g=l?l[1].toLowerCase():"",d=f[d];if(l&&c[g])for(l=c[g],d.innerHTML=l.pre+b+l.post,l=l.length;l;--l)d=d.firstChild;else d.innerHTML=b;if(1==d.childNodes.length)return d.removeChild(d.firstChild);for(g=e.createDocumentFragment();l=d.firstChild;)g.appendChild(l);return g};p.place=function(a,b,c){b=g.byId(b);
"string"==typeof a&&(a=/^\s*</.test(a)?p.toDom(a,b.ownerDocument):g.byId(a));if("number"==typeof c){var e=b.childNodes;!e.length||e.length<=c?b.appendChild(a):n(a,e[0>c?0:c])}else switch(c){case "before":n(a,b);break;case "after":c=a;(e=b.parentNode)&&(e.lastChild==b?e.appendChild(c):e.insertBefore(c,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":p.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){n(a,b.firstChild);break}default:b.appendChild(a)}return a};
var v=p.create=function(a,c,e,d){var f=s.doc;e&&(e=g.byId(e),f=e.ownerDocument);"string"==typeof a&&(a=f.createElement(a));c&&b.set(a,c);e&&p.place(a,e,d);return a};p.empty=function(a){l(g.byId(a))};var x=p.destroy=function(a){(a=g.byId(a))&&d(a,a.parentNode)}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(p,t,r,s,g,b){function n(b,d){var f=b.getAttributeNode&&b.getAttributeNode(d);return f&&f.specified}var l={innerHTML:1,className:1,
htmlFor:t("ie"),value:1},d={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};p.has=function(c,k){var f=k.toLowerCase();return l[b.names[f]||k]||n(s.byId(c),d[f]||k)};p.get=function(c,k){c=s.byId(c);var f=k.toLowerCase(),g=b.names[f]||k,a=c[g];if(l[g]&&"undefined"!=typeof a||"href"!=g&&("boolean"==typeof a||r.isFunction(a)))return a;f=d[f]||k;return n(c,f)?c.getAttribute(f):null};p.set=function(c,k,f){c=s.byId(c);if(2==arguments.length){for(var q in k)p.set(c,q,k[q]);return c}q=
k.toLowerCase();var a=b.names[q]||k,e=l[a];if("style"==a&&"string"!=typeof f)return g.set(c,f),c;if(e||"boolean"==typeof f||r.isFunction(f))return b.set(c,k,f);c.setAttribute(d[q]||k,f);return c};p.remove=function(b,k){s.byId(b).removeAttribute(d[k.toLowerCase()]||k)};p.getNodeProp=function(c,k){c=s.byId(c);var f=k.toLowerCase(),l=b.names[f]||k;if(l in c&&"href"!=l)return c[l];f=d[f]||k;return n(c,f)?c.getAttribute(f):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),
function(p,t,r,s,g,b,n,l){var d={},c=0,k=t._scopeName+"attrid";p.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};p.get=function(b,c){b=g.byId(b);var a=c.toLowerCase();return b[p.names[a]||c]};p.set=function(f,q,a){f=g.byId(f);if(2==arguments.length&&"string"!=typeof q){for(var e in q)p.set(f,e,q[e]);return f}e=q.toLowerCase();e=p.names[e]||q;if("style"==e&&"string"!=typeof a)return b.set(f,
a),f;if("innerHTML"==e)return r("ie")&&f.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(n.empty(f),f.appendChild(n.toDom(a,f.ownerDocument))):f[e]=a,f;if(s.isFunction(a)){var m=f[k];m||(m=c++,f[k]=m);d[m]||(d[m]={});var v=d[m][e];if(v)l.disconnect(v);else try{delete f[e]}catch(x){}a?d[m][e]=l.connect(f,e,a):f[e]=null;return f}f[e]=a;return f}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
function(p,t,r,s,g,b,n,l){function d(c,e,d,f,k){f=l.hitch(d,f);if(!c||!c.addEventListener&&!c.attachEvent)return s.after(c||p.global,e,f,!0);"string"==typeof e&&"on"==e.substring(0,2)&&(e=e.substring(2));c||(c=p.global);if(!k)switch(e){case "keypress":e=a;break;case "mouseenter":e=b.enter;break;case "mouseleave":e=b.leave}return t(c,e,f,k)}function c(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}n.add("events-keypress-typed",function(){var a={charCode:0};
try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!n("opera")});var k={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},f=n("mac")?"metaKey":"ctrlKey",q=function(a,b){var e=l.mixin({},a,b);c(e);e.preventDefault=function(){a.preventDefault()};e.stopPropagation=function(){a.stopPropagation()};return e},a;a=n("events-keypress-typed")?function(a,
b){var c=t(a,"keydown",function(a){var c=a.keyCode,e=13!=c&&32!=c&&(27!=c||!n("ie"))&&(48>c||90<c)&&(96>c||111<c)&&(186>c||192<c)&&(219>c||222<c)&&229!=c;if(e||a.ctrlKey){e=e?0:c;if(a.ctrlKey){if(3==c||13==c)return b.call(a.currentTarget,a);e=95<e&&106>e?e-48:!a.shiftKey&&65<=e&&90>=e?e+32:k[e]||e}c=q(a,{type:"keypress",faux:!0,charCode:e});b.call(a.currentTarget,c);if(n("ie"))try{a.keyCode=c.keyCode}catch(d){}}}),e=t(a,"keypress",function(a){var c=a.charCode;a=q(a,{charCode:32<=c?c:0,faux:!0});return b.call(this,
a)});return{remove:function(){c.remove();e.remove()}}}:n("opera")?function(a,b){return t(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,q(a,{charCode:c}))})}:function(a,b){return t(a,"keypress",function(a){c(a);return b.call(this,a)})};var e={_keypress:a,connect:function(a,b,c,e,f){var k=arguments,l=[],g=0;l.push("string"==typeof k[0]?null:k[g++],k[g++]);var q=k[g+1];l.push("string"==typeof q||"function"==
typeof q?k[g++]:null,k[g++]);for(q=k.length;g<q;g++)l.push(k[g]);return d.apply(this,l)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return r.subscribe(a,l.hitch(b,c))},publish:function(a,b){return r.publish.apply(r,[a].concat(b))},connectPublisher:function(a,b,c){var d=function(){e.publish(a,arguments)};return c?e.connect(b,c,d):e.connect(b,d)},isCopyKey:function(a){return a[f]}};e.unsubscribe=e.disconnect;l.mixin(p,e);return e})},"dojo/_base/event":function(){define(["./kernel",
"../on","../has","../dom-geometry"],function(p,t,r,s){if(t._fixEvent){var g=t._fixEvent;t._fixEvent=function(b,l){(b=g(b,l))&&s.normalizeEvent(b);return b}}var b={fix:function(b,l){return t._fixEvent?t._fixEvent(b,l):b},stop:function(b){r("dom-addeventlistener")||b&&b.preventDefault?(b.preventDefault(),b.stopPropagation()):(b=b||window.event,b.cancelBubble=!0,t._preventDefault.call(b))}};p.fixEvent=b.fix;p.stopEvent=b.stop;return b})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(p,
t){return p.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,
NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(p,t,r){t=t.NodeList;var s=t.prototype;s.connect=t._adaptAsForEach(function(){return p.connect.apply(this,arguments)});
s.coords=t._adaptAsMap(p.coords);t.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");r.forEach(t.events,function(g){var b="on"+g;s[b]=function(g,l){return this.connect(b,g,l)}});return p.NodeList=t})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(p,t,r,s,g,b,n,l){function d(a,b){var c=
function(c,e){if("string"==typeof e&&(e=r.byId(e),!e))return new b([]);var d="string"==typeof c?a(c,e):c?c.end&&c.on?c:[c]:[];return d.end&&d.on?d:new b(d)};c.matches=a.match||function(a,b,e){return 0<c.filter([a],b,e).length};c.filter=a.filter||function(a,b,e){return c(b,e).filter(function(b){return-1<g.indexOf(a,b)})};if("function"!=typeof a){var e=a.search;a=function(a,b){return e(b||document,a)}}return c}t.add("array-extensible",function(){return 1==b.delegate([],{length:1}).length&&!t("bug-for-in-skips-shadowed")});
var c=Array.prototype,k=c.slice,f=c.concat,q=g.forEach,a=function(a,b,c){b=[0].concat(k.call(b,0));c=c||p.global;return function(e){b[0]=e;return a.apply(c,b)}},e=function(a){var c=this instanceof m&&t("array-extensible");"number"==typeof a&&(a=Array(a));var e=a&&"length"in a?a:arguments;if(c||!e.sort){for(var d=c?this:[],f=d.length=e.length,k=0;k<f;k++)d[k]=e[k];if(c)return d;e=d}b._mixin(e,v);e._NodeListCtor=function(a){return m(a)};return e},m=e,v=m.prototype=t("array-extensible")?[]:{};m._wrap=
v._wrap=function(a,b,c){a=new (c||this._NodeListCtor||m)(a);return b?a._stash(b):a};m._adaptAsMap=function(b,c){return function(){return this.map(a(b,arguments,c))}};m._adaptAsForEach=function(b,c){return function(){this.forEach(a(b,arguments,c));return this}};m._adaptAsFilter=function(b,c){return function(){return this.filter(a(b,arguments,c))}};m._adaptWithCondition=function(b,c,e){return function(){var d=arguments,f=a(b,d,e);if(c.call(e||p.global,d))return this.map(f);this.forEach(f);return this}};
q(["slice","splice"],function(a){var b=c[a];v[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});q(["indexOf","lastIndexOf","every","some"],function(a){var b=g[a];v[a]=function(){return b.apply(p,[this].concat(k.call(arguments,0)))}});b.extend(e,{constructor:m,_NodeListCtor:m,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return s(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};
return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=k.call(this,0),c=g.map(arguments,function(a){return k.call(a,0)});return this._wrap(f.apply(b,c),this)},map:function(a,b){return this._wrap(g.map(this,a,b),this)},forEach:function(a,b){q(this,a,b);return this},filter:function(a){var b=arguments,c=this,e=0;if("string"==typeof a){c=x._filterResult(this,b[0]);if(1==b.length)return c._stash(this);e=1}return this._wrap(g.filter(c,b[e],b[e+1]),
this)},instantiate:function(a,c){var e=b.isFunction(a)?a:b.getObject(a);c=c||{};return this.forEach(function(a){new e(c,a)})},at:function(){var a=new this._NodeListCtor(0);q(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var x=d(l,e);p.query=d(l,function(a){return e(a)});x.load=function(a,b,c){n.load(a,b,function(a){c(d(a,e))})};p._filterQueryResult=x._filterResult=function(a,b,c){return new e(x.filter(a,b,c))};p.NodeList=x.NodeList=e;return x})},
"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(p,t,r,s,g,b,n,l){p.byId=t.byId;p.isDescendant=t.isDescendant;p.setSelectable=t.setSelectable;p.getAttr=s.get;p.setAttr=s.set;p.hasAttr=s.has;p.removeAttr=s.remove;p.getNodeProp=s.getNodeProp;p.attr=function(b,c,k){return 2==arguments.length?s["string"==typeof c?"get":"set"](b,c):s.set(b,c,k)};p.hasClass=b.contains;p.addClass=b.add;p.removeClass=
b.remove;p.toggleClass=b.toggle;p.replaceClass=b.replace;p._toDom=p.toDom=n.toDom;p.place=n.place;p.create=n.create;p.empty=function(b){n.empty(b)};p._destroyElement=p.destroy=function(b){n.destroy(b)};p._getPadExtents=p.getPadExtents=l.getPadExtents;p._getBorderExtents=p.getBorderExtents=l.getBorderExtents;p._getPadBorderExtents=p.getPadBorderExtents=l.getPadBorderExtents;p._getMarginExtents=p.getMarginExtents=l.getMarginExtents;p._getMarginSize=p.getMarginSize=l.getMarginSize;p._getMarginBox=p.getMarginBox=
l.getMarginBox;p.setMarginBox=l.setMarginBox;p._getContentBox=p.getContentBox=l.getContentBox;p.setContentSize=l.setContentSize;p._isBodyLtr=p.isBodyLtr=l.isBodyLtr;p._docScroll=p.docScroll=l.docScroll;p._getIeDocumentElementOffset=p.getIeDocumentElementOffset=l.getIeDocumentElementOffset;p._fixIeBiDiScrollLeft=p.fixIeBiDiScrollLeft=l.fixIeBiDiScrollLeft;p.position=l.position;p.marginBox=function(b,c){return c?l.setMarginBox(b,c):l.getMarginBox(b)};p.contentBox=function(b,c){return c?l.setContentSize(b,
c):l.getContentBox(b)};p.coords=function(b,c){p.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");b=t.byId(b);var k=r.getComputedStyle(b),k=l.getMarginBox(b,k),f=l.position(b,c);k.x=f.x;k.y=f.y;return k};p.getProp=g.get;p.setProp=g.set;p.prop=function(b,c,k){return 2==arguments.length?g["string"==typeof c?"get":"set"](b,c):g.set(b,c,k)};p.getStyle=r.get;p.setStyle=r.set;p.getComputedStyle=r.getComputedStyle;p.__toPixelValue=p.toPixelValue=r.toPixelValue;p.style=function(b,c,k){switch(arguments.length){case 1:return r.get(b);
case 2:return r["string"==typeof c?"get":"set"](b,c)}return r.set(b,c,k)};return p})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(p,t,r,s,g,b,n,l,d){function c(a){return function(b,c,e){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,e)}}var k=function(a){return 1==a.length&&"string"==typeof a[0]},f=function(a){var b=a.parentNode;b&&b.removeChild(a)},
q=t.NodeList,a=q._adaptWithCondition,e=q._adaptAsForEach,m=q._adaptAsMap;s.extend(q,{_normalize:function(a,c){var e=!0===a.parse;if("string"==typeof a.template){var d=a.templateFunc||p.string&&p.string.substitute;a=d?d(a.template,a):a}d=typeof a;"string"==d||"number"==d?(a=b.toDom(a,c&&c.ownerDocument),a=11==a.nodeType?s._toArray(a.childNodes):[a]):s.isArrayLike(a)?s.isArray(a)||(a=s._toArray(a)):a=[a];e&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,
c,e,d){if(1==c.nodeType||"only"!=e)for(var f,m=a.length,k=m-1;0<=k;k--){var l=d?this._cloneNode(a[k]):a[k];if(a._runParse&&p.parser&&p.parser.parse)for(f||(f=c.ownerDocument.createElement("div")),f.appendChild(l),p.parser.parse(f),l=f.firstChild;f.firstChild;)f.removeChild(f.firstChild);k==m-1?b.place(l,c,e):c.parentNode.insertBefore(l,c);c=l}},position:m(n.position),attr:a(c(l),k),style:a(c(d),k),addClass:e(g.add),removeClass:e(g.remove),toggleClass:e(g.toggle),replaceClass:e(g.replace),empty:e(b.empty),
removeAttr:e(l.remove),marginBox:m(n.getMarginBox),place:function(a,c){var e=t(a)[0];return this.forEach(function(a){b.place(a,e,c)})},orphan:function(a){return(a?t._filterResult(this,a):this).forEach(f)},adopt:function(a,b){return t(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new q;this.map(function(c){t(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,e=0;if("string"==typeof a){c=t._filterResult(this,
b[0]);if(1==b.length)return c._stash(this);e=1}return this._wrap(r.filter(c,b[e],b[e+1]),this)},addContent:function(a,c){a=this._normalize(a,this[0]);for(var e=0,d;d=this[e];e++)a.length?this._place(a,d,c,0<e):b.empty(d);return this}});return q})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(p,t,r,s,g,b,n,l,d,c){function k(c,e,d){return m&&d?function(a,c){return b(a,d,c)}:a?function(a,d){var f=
b(a,e,d),m=b(a,c,function(a){(!H||(new Date).getTime()>H+1E3)&&d.call(this,a)});return{remove:function(){f.remove();m.remove()}}}:function(a,e){return b(a,c,e)}}function f(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function q(a,e,d){if(x=!a.target.disabled&&f(a.target))z=a.target,A=a.touches?a.touches[0].pageX:a.clientX,y=a.touches?a.touches[0].pageY:a.clientY,C=("object"==typeof x?x.x:"number"==typeof x?x:0)||4,F=("object"==typeof x?x.y:"number"==typeof x?x:0)||4,v||(v=!0,c.doc.addEventListener(e,
function(a){x=x&&a.target==z&&Math.abs((a.touches?a.touches[0].pageX:a.clientX)-A)<=C&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-y)<=F},!0),c.doc.addEventListener(d,function(a){if(x){D=(new Date).getTime();var c=a.target;"LABEL"===c.tagName&&(c=r.byId(c.getAttribute("for"))||c);setTimeout(function(){b.emit(c,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a=function(a){c.doc.addEventListener(a,function(b){b._dojo_click||!((new Date).getTime()<=D+1E3)||"INPUT"==b.target.tagName&&
s.contains(b.target,"dijitOffScreen")||(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"!=a||"INPUT"==b.target.tagName&&"radio"!=b.target.type&&"checkbox"!=b.target.type||"TEXTAREA"==b.target.tagName||"AUDIO"==b.target.tagName||"VIDEO"==b.target.tagName||b.preventDefault())},!0)},a("click"),a("mousedown"),a("mouseup"))}var a=n("touch"),e=5>n("ios"),m=navigator.msPointerEnabled,v,x,z,A,y,C,F,D,H,N;a&&(m?d(function(){c.doc.addEventListener("MSPointerDown",function(a){q(a,
"MSPointerMove","MSPointerUp")},!0)}):d(function(){function a(b){var c=g.delegate(b,{bubbles:!0});6<=n("ios")&&(c.touches=b.touches,c.altKey=b.altKey,c.changedTouches=b.changedTouches,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.targetTouches=b.targetTouches);return c}N=c.body();c.doc.addEventListener("touchstart",function(a){H=(new Date).getTime();var c=N;N=a.target;b.emit(c,"dojotouchout",{relatedTarget:N,bubbles:!0});b.emit(N,"dojotouchover",{relatedTarget:c,bubbles:!0});q(a,
"touchmove","touchend")},!0);b(c.doc,"touchmove",function(d){H=(new Date).getTime();var f=c.doc.elementFromPoint(d.pageX-(e?0:c.global.pageXOffset),d.pageY-(e?0:c.global.pageYOffset));f&&(N!==f&&(b.emit(N,"dojotouchout",{relatedTarget:f,bubbles:!0}),b.emit(f,"dojotouchover",{relatedTarget:N,bubbles:!0}),N=f),b.emit(f,"dojotouchmove",a(d)))});b(c.doc,"touchend",function(d){H=(new Date).getTime();var f=c.doc.elementFromPoint(d.pageX-(e?0:c.global.pageXOffset),d.pageY-(e?0:c.global.pageYOffset))||c.body();
b.emit(f,"dojotouchend",a(d))})}));t={press:k("mousedown","touchstart","MSPointerDown"),move:k("mousemove","dojotouchmove","MSPointerMove"),release:k("mouseup","dojotouchend","MSPointerUp"),cancel:k(l.leave,"touchcancel",a?"MSPointerCancel":null),over:k("mouseover","dojotouchover","MSPointerOver"),out:k("mouseout","dojotouchout","MSPointerOut"),enter:l._eventHandler(k("mouseover","dojotouchover","MSPointerOver")),leave:l._eventHandler(k("mouseout","dojotouchout","MSPointerOut"))};return p.touch=t})},
"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a){t=t("dojo.dnd.Container",d,{skipForm:!1,allowNested:!1,constructor:function(a,c){this.node=b.byId(a);c||(c={});this.creator=c.creator||null;this.skipForm=c.skipForm;this.parent=c.dropParent&&b.byId(c.dropParent);this.map={};this.current=null;this.containerState=
"";n.add(this.node,"dojoDndContainer");c&&c._skipStartup||this.startup();this.events=[k(this.node,q.over,s.hitch(this,"onMouseOver")),k(this.node,q.out,s.hitch(this,"onMouseOut")),k(this.node,"dragstart",s.hitch(this,"onSelectStart")),k(this.node,"selectstart",s.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(b,c){c=c||r.global;var d=this.map,f=a._empty,k;for(k in d)k in
f||b.call(c,d[k],k,this);return c},clearItems:function(){this.map={}},getAllNodes:function(){return f((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var b={};this.getAllNodes().forEach(function(c){if(c.id){var d=this.getItem(c.id);if(d){b[c.id]=d;return}}else c.id=a.getUniqueId();var d=c.getAttribute("dndType"),f=c.getAttribute("dndData");b[c.id]={data:f||c.innerHTML,type:d?d.split(/\s*,\s*/):["text"]}},this);this.map=b;return this},insertNodes:function(a,b,c){this.parent.firstChild?
b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);return this},destroy:function(){p.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,
b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var b=this.parent.getElementsByTagName("tbody");b&&b.length&&(this.parent=b[0])}this.defaultCreator=a._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&b!=this.node;)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&
this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(b){this.skipForm&&a.isFormElement(b)||(b.stopPropagation(),b.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,
b){var c="dojoDnd"+a,d=a.toLowerCase()+"State";n.replace(this.node,c+b,c+this[d]);this[d]=b},_addItemClass:function(a,b){n.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){n.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&n.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(b,c){var d=(this.creator||this.defaultCreator).call(this,b,c);s.isArray(d.type)||(d.type=["text"]);
d.node.id||(d.node.id=a.getUniqueId());n.add(d.node,"dojoDndItem");return d}});a._createNode=function(b){return b?function(a){return l.create(b,{innerHTML:a})}:a._createSpan};a._createTrTd=function(a){var b=l.create("tr");l.create("td",{innerHTML:a},b);return b};a._createSpan=function(a){return l.create("span",{innerHTML:a})};a._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};a._defaultCreator=function(b){b=b.tagName.toLowerCase();var c="tbody"==b||"thead"==b?a._createTrTd:a._createNode(a._defaultCreatorNodes[b]);
return function(b,e){var d=b&&s.isObject(b),f,k;d&&b.tagName&&b.nodeType&&b.getAttribute?(f=b.getAttribute("dndData")||b.innerHTML,d=(d=b.getAttribute("dndType"))?d.split(/\s*,\s*/):["text"],k=b):(f=d&&b.data?b.data:b,d=d&&b.type?b.type:["text"],k=("avatar"==e?a._createSpan:c)(String(f)));k.id||(k.id=a.getUniqueId());return{node:k,data:f,type:d}}};return t})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a){var e=t("dojo.dnd.Manager",[b],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:n("touch")?0:16,OFFSET_Y:n("touch")?-64:16,overSource:function(a){this.avatar&&(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update());c.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=
!1,this.avatar.update(),c.publish("/dnd/source/over",null)):c.publish("/dnd/source/over",null)},startDrag:function(a,b,e){function f(a){a.preventDefault();a.stopPropagation()}q.autoScrollStart(s.doc);this.source=a;this.nodes=b;this.copy=Boolean(e);this.avatar=this.makeAvatar();s.body().appendChild(this.avatar.node);c.publish("/dnd/start",a,b,this.copy);this.events=[d(s.doc,k.move,r.hitch(this,"onMouseMove")),d(s.doc,k.release,r.hitch(this,"onMouseUp")),d(s.doc,"keydown",r.hitch(this,"onKeyDown")),
d(s.doc,"keyup",r.hitch(this,"onKeyUp")),d(s.doc,"dragstart",f),d(s.body(),"selectstart",f)];a="dojoDnd"+(e?"Copy":"Move");g.add(s.body(),a)},canDrop:function(a){a=Boolean(this.target&&a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){g.remove(s.body(),["dojoDndCopy","dojoDndMove"]);p.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new a(this)},
updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(q.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(f.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b));n("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(f.getCopyKeyState(a)));c.publish("/dnd/drop/before",this.source,this.nodes,
b,this.target,a);c.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else c.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case l.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case l.ESCAPE:c.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==l.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);
this.updateAvatar();g.replace(s.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});f._manager=null;e.manager=f.manager=function(){f._manager||(f._manager=new e);return f._manager};return e})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(p,t,r,s,g,b){var n={};p.setObject("dojo.dnd.autoscroll",n);n.getViewport=b.getBox;n.V_TRIGGER_AUTOSCROLL=32;n.H_TRIGGER_AUTOSCROLL=32;n.V_AUTOSCROLL_VALUE=
16;n.H_AUTOSCROLL_VALUE=16;var l,d=r.doc,c=Infinity,k=Infinity;n.autoScrollStart=function(f){d=f;l=b.getBox(d);f=r.body(d).parentNode;c=Math.max(f.scrollHeight-l.h,0);k=Math.max(f.scrollWidth-l.w,0)};n.autoScroll=function(f){var g=l||b.getBox(d),a=r.body(d).parentNode,e=0,m=0;f.clientX<n.H_TRIGGER_AUTOSCROLL?e=-n.H_AUTOSCROLL_VALUE:f.clientX>g.w-n.H_TRIGGER_AUTOSCROLL&&(e=Math.min(n.H_AUTOSCROLL_VALUE,k-a.scrollLeft));f.clientY<n.V_TRIGGER_AUTOSCROLL?m=-n.V_AUTOSCROLL_VALUE:f.clientY>g.h-n.V_TRIGGER_AUTOSCROLL&&
(m=Math.min(n.V_AUTOSCROLL_VALUE,c-a.scrollTop));window.scrollBy(e,m)};n._validNodes={div:1,p:1,td:1};n._validOverflow={auto:1,scroll:1};n.autoScrollNodes=function(b){for(var c,a,e,d,k,l,p=0,A=0,y=b.target;y;){if(1==y.nodeType&&y.tagName.toLowerCase()in n._validNodes){e=g.getComputedStyle(y);d=e.overflow.toLowerCase()in n._validOverflow;k=e.overflowX.toLowerCase()in n._validOverflow;l=e.overflowY.toLowerCase()in n._validOverflow;if(d||k||l)c=s.getContentBox(y,e),a=s.position(y,!0);if(d||k){e=Math.min(n.H_TRIGGER_AUTOSCROLL,
c.w/2);k=b.pageX-a.x;if(t("webkit")||t("opera"))k+=r.body().scrollLeft;p=0;0<k&&k<c.w&&(k<e?p=-e:k>c.w-e&&(p=e),y.scrollLeft+=p)}if(d||l){d=Math.min(n.V_TRIGGER_AUTOSCROLL,c.h/2);l=b.pageY-a.y;if(t("webkit")||t("opera"))l+=r.body().scrollTop;A=0;0<l&&l<c.h&&(l<d?A=-d:l>c.h-d&&(A=d),y.scrollTop+=A)}if(p||A)return}try{y=y.parentNode}catch(C){y=null}}n.autoScroll(b)};return n})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),
function(p,t,r,s,g,b,n){t.add("rtl-adjust-position-for-verticalScrollBar",function(b,c){var k=r.body(c),f=n.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},k,"last"),l=n.create("div",{style:{overflow:"hidden",direction:"ltr"}},f,"last"),a=0!=g.position(l).x;f.removeChild(l);k.removeChild(f);return a});t.add("position-fixed-support",function(b,c){var k=r.body(c),f=n.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},k,"last"),l=n.create("span",{style:{position:"fixed",left:"0",top:"0"}},f,"last"),a=g.position(l).x!=g.position(f).x;f.removeChild(l);k.removeChild(f);return a});var l={getBox:function(b){b=b||r.doc;var c="BackCompat"==b.compatMode?r.body(b):b.documentElement,k=g.docScroll(b);if(t("touch")){var f=l.get(b);b=f.innerWidth||c.clientWidth;c=f.innerHeight||c.clientHeight}else b=c.clientWidth,c=c.clientHeight;return{l:k.x,t:k.y,w:b,h:c}},get:function(b){if(t("ie")&&
l!==document.parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var c=b._parentWindow;b._parentWindow=null;return c}return b.parentWindow||b.defaultView},scrollIntoView:function(d,c){try{d=s.byId(d);var k=d.ownerDocument||r.doc,f=r.body(k),l=k.documentElement||f.parentNode,a=t("ie"),e=t("webkit");if(d!=f&&d!=l)if(!(t("mozilla")||a||e||t("opera"))&&"scrollIntoView"in d)d.scrollIntoView(!1);else{var m="BackCompat"==k.compatMode,n=Math.min(f.clientWidth||l.clientWidth,
l.clientWidth||f.clientWidth),x=Math.min(f.clientHeight||l.clientHeight,l.clientHeight||f.clientHeight),k=e||m?f:l,p=c||g.position(d),A=d.parentNode,e=function(c){return 6>=a||7==a&&m?!1:t("position-fixed-support")&&"fixed"==b.get(c,"position").toLowerCase()};if(!e(d))for(;A;){A==f&&(A=k);var y=g.position(A),C=e(A),F="rtl"==b.getComputedStyle(A).direction.toLowerCase();if(A==k){y.w=n;y.h=x;k==l&&a&&F&&(y.x+=k.offsetWidth-y.w);if(0>y.x||!a||9<=a)y.x=0;if(0>y.y||!a||9<=a)y.y=0}else{var D=g.getPadBorderExtents(A);
y.w-=D.w;y.h-=D.h;y.x+=D.l;y.y+=D.t;var H=A.clientWidth,N=y.w-H;0<H&&0<N&&(F&&t("rtl-adjust-position-for-verticalScrollBar")&&(y.x+=N),y.w=H);H=A.clientHeight;N=y.h-H;0<H&&0<N&&(y.h=H)}C&&(0>y.y&&(y.h+=y.y,y.y=0),0>y.x&&(y.w+=y.x,y.x=0),y.y+y.h>x&&(y.h=x-y.y),y.x+y.w>n&&(y.w=n-y.x));var J=p.x-y.x,M=p.y-y.y,E=J+p.w-y.w,K=M+p.h-y.h,G,u;0<E*J&&(A.scrollLeft||A==k||A.scrollWidth>A.offsetHeight)&&(G=Math[0>J?"max":"min"](J,E),F&&(8==a&&!m||9<=a)&&(G=-G),u=A.scrollLeft,A.scrollLeft+=G,G=A.scrollLeft-u,
p.x-=G);0<K*M&&(A.scrollTop||A==k||A.scrollHeight>A.offsetHeight)&&(G=Math.ceil(Math[0>M?"max":"min"](M,K)),u=A.scrollTop,A.scrollTop+=G,G=A.scrollTop-u,p.y-=G);A=A!=k&&!C&&A.parentNode}}}catch(S){console.error("scrollIntoView: "+S),d.scrollIntoView(!1)}}};p.setObject("dojo.window",l);return l})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),function(p,t,r,s,g,b,n,l){return p("dojo.dnd.Avatar",null,
{constructor:function(b){this.manager=b;this.construct()},construct:function(){var d=b.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),c=this.manager.source,k,f=b.create("tbody",null,d),l=b.create("tr",null,f),a=b.create("td",null,l),e=Math.min(5,this.manager.nodes.length),m=0;n("highcontrast")&&b.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},a);b.create("span",{innerHTML:c.generateText?this._generateText():""},a);for(s.set(l,{"class":"dojoDndAvatarHeader",
style:{opacity:0.9}});m<e;++m)c.creator?k=c._normalizedCreator(c.getItem(this.manager.nodes[m].id).data,"avatar").node:(k=this.manager.nodes[m].cloneNode(!0),"tr"==k.tagName.toLowerCase()&&(l=b.create("table"),b.create("tbody",null,l).appendChild(k),k=l)),k.id="",l=b.create("tr",null,f),a=b.create("td",null,l),a.appendChild(k),s.set(l,{"class":"dojoDndAvatarItem",style:{opacity:(9-m)/10}});this.node=d},destroy:function(){b.destroy(this.node);this.node=!1},update:function(){g.toggle(this.node,"dojoDndAvatarCanDrop",
this.manager.canDropFlag);if(n("highcontrast")){var b=r.byId("a11yIcon"),c="+";this.manager.canDropFlag&&!this.manager.copy?c="< ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(c="x"):c="o";b.innerHTML=c}l("tr.dojoDndAvatarHeader td span"+(n("highcontrast")?" span":""),this.node).forEach(function(b){b.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(p,t,r,s,g,b,n){g.add("highcontrast",function(){var b=n.doc.createElement("div");b.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(t.blankGif||p.toUrl("./resources/blank.gif"))+");";n.body().appendChild(b);var d=s.getComputedStyle(b),c=d.backgroundImage,d=d.borderTopColor==d.borderRightColor||c&&("none"==c||"url(invalid-url:)"==c);8>=g("ie")?b.outerHTML="":n.body().removeChild(b);return d});b(function(){g("highcontrast")&&
r.add(n.body(),"dj_a11y")});return g})},"dojo/dnd/AutoSource":function(){define(["../_base/declare","./Source"],function(p,t){return p("dojo.dnd.AutoSource",t,{constructor:function(){this.autoSync=!0}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(p,t,r,s){return t("dojo.fx.Toggler",null,{node:null,showFunc:r.fadeIn,hideFunc:r.fadeOut,showDuration:200,hideDuration:200,constructor:function(g){p.mixin(this,g);this.node=g.node;this._showArgs=
p.mixin({},g);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=p.mixin({},g);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);s.after(this.showAnim,"beforeBegin",p.hitch(this.hideAnim,"stop",!0),!0);s.after(this.hideAnim,"beforeBegin",p.hitch(this.showAnim,"stop",!0),!0)},show:function(g){return this.showAnim.play(g||0)},hide:function(g){return this.hideAnim.play(g||
0)}})})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(p,t,r,s,g,b,n,l,d){var c=r.mixin,k={},f=k._Line=function(a,b){this.start=a;this.end=b};f.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var q=k.Animation=function(a){c(this,a);r.isArray(this.curve)&&(this.curve=new f(this.curve[0],this.curve[1]))};q.prototype=new s;r.extend(q,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,
_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(t.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(e){console.error("exception in animation handler for:",a),console.error(e)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||
this.delay,e=r.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(e,c),this;e();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&
this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?
this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=
0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var a=0,e=null,m={run:function(){}};r.extend(q,{_startTimer:function(){this._timer||(this._timer=b.after(m,"run",r.hitch(this,"_cycle"),!0),a++);e||(e=setInterval(r.hitch(m,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,a--);0>=a&&(clearInterval(e),e=null,a=0)}});var v=n("ie")?function(a){var b=
a.style;b.width.length||"auto"!=d.get(a,"width")||(b.width="auto")}:function(){};k._fade=function(a){a.node=l.byId(a.node);var e=c({properties:{}},a);a=e.properties.opacity={};a.start="start"in e?e.start:function(){return+d.get(e.node,"opacity")||0};a.end=e.end;a=k.animateProperty(e);b.after(a,"beforeBegin",r.partial(v,e.node),!0);return a};k.fadeIn=function(a){return k._fade(c({end:1},a))};k.fadeOut=function(a){return k._fade(c({end:0},a))};k._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*
Math.PI)/2};var x=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof g&&(c.tempColor=new g)}};x.prototype.getValue=function(a){var b={},c;for(c in this._properties){var e=this._properties[c],d=e.start;d instanceof g?b[c]=g.blendColors(d,e.end,a,e.tempColor).toCss():r.isArray(d)||(b[c]=(e.end-d)*a+d+("opacity"!=c?e.units||"px":0))}return b};k.animateProperty=function(a){var e=a.node=l.byId(a.node);a.easing||(a.easing=p._defaultEasing);a=new q(a);b.after(a,"beforeBegin",r.hitch(a,
function(){var a={},b;for(b in this.properties){if("width"==b||"height"==b)this.node.display="block";var f=this.properties[b];r.isFunction(f)&&(f=f(e));f=a[b]=c({},r.isObject(f)?f:{end:f});r.isFunction(f.start)&&(f.start=f.start(e));r.isFunction(f.end)&&(f.end=f.end(e));var m=0<=b.toLowerCase().indexOf("color"),k=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;c=d.get(a,b);return"opacity"==b?+c:m?c:parseFloat(c)};"end"in f?"start"in f||(f.start=k(e,b)):f.end=
k(e,b);m?(f.start=new g(f.start),f.end=new g(f.end)):f.start="opacity"==b?+f.start:parseFloat(f.start)}this.curve=new x(a)}),!0);b.after(a,"onAnimate",r.hitch(d,"set",a.node),!0);return a};k.anim=function(a,b,c,e,d,f){return k.animateProperty({node:a,duration:c||q.prototype.duration,properties:b,easing:e,onEnd:d}).play(f||0)};c(p,k);p._Animation=q;return k})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(p,t,r,s){var g=p.Color=function(b){b&&this.setColor(b)};
g.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:s.transparentColor||[0,0,0,0]};t.extend(g,{r:255,g:255,b:255,a:1,_set:function(b,g,l,d){this.r=b;this.g=g;this.b=l;this.a=d},setColor:function(b){t.isString(b)?g.fromString(b,this):t.isArray(b)?g.fromArray(b,
this):(this._set(b.r,b.g,b.b,b.a),b instanceof g||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+r.map(["r","g","b"],function(b){b=this[b].toString(16);return 2>b.length?"0"+b:b},this).join("")},toCss:function(b){var g=this.r+", "+this.g+", "+this.b;return(b?"rgba("+g+", "+this.a:"rgb("+g)+")"},toString:function(){return this.toCss(!0)}});g.blendColors=p.blendColors=
function(b,n,l,d){var c=d||new g;r.forEach(["r","g","b","a"],function(d){c[d]=b[d]+(n[d]-b[d])*l;"a"!=d&&(c[d]=Math.round(c[d]))});return c.sanitize()};g.fromRgb=p.colorFromRgb=function(b,n){var l=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return l&&g.fromArray(l[1].split(/\s*,\s*/),n)};g.fromHex=p.colorFromHex=function(b,n){var l=n||new g,d=4==b.length?4:8,c=(1<<d)-1;b=Number("0x"+b.substr(1));if(isNaN(b))return null;r.forEach(["b","g","r"],function(k){var f=b&c;b>>=d;l[k]=4==d?17*f:f});l.a=
1;return l};g.fromArray=p.colorFromArray=function(b,n){var l=n||new g;l._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));isNaN(l.a)&&(l.a=1);return l.sanitize()};g.fromString=p.colorFromString=function(b,n){var l=g.named[b];return l&&g.fromArray(l,n)||g.fromRgb(b,n)||g.fromHex(b,n)};return g})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(p,t,r){return p([t,r],{})})},"dgrid/Grid":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),
function(p,t,r,s,g,b,n){function l(b,c){c&&c.nodeType&&b.appendChild(c)}function d(b,c,a,e){if(this.formatter){e=this.formatter;var d=this.grid.formatterScope;a.innerHTML="string"===typeof e&&d?d[e](c,b):e(c,b)}else null!=c&&a.appendChild(document.createTextNode(c))}var c=8>s("ie")&&!s("quirks"),k=/[^\._a-zA-Z0-9-]/g;t=t(b,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(b){return"string"==typeof b?this.columns[b]:this.cell(b).column},listType:"grid",cell:function(b,
c){if(b.column&&b.element)return b;b.target&&b.target.nodeType&&(b=b.target);var a;if(b.nodeType){do{if(this._rowIdToObject[b.id])break;var e=b.columnId;if(e){c=e;a=b;break}b=b.parentNode}while(b&&b!=this.domNode)}if(!a&&"undefined"!=typeof c){var d=this.row(b);if(e=d&&d.element)for(var e=e.getElementsByTagName("td"),k=0;k<e.length;k++)if(e[k].columnId==c){a=e[k];break}}if(null!=b)return{row:d||this.row(b),column:c&&this.column(c),element:a}},createRowCells:function(b,d,a){var e=g("table.dgrid-row-table[role=presentation]"),
m=9>s("ie")||s("quirks")?g(e,"tbody"):e,l,n,p,r,y,t,F,D,H,N;a=a||this.subRows;n=0;for(p=a.length;n<p;n++)for(t=a[n],l=g(m,"tr"),t.className&&g(l,"."+t.className),r=0,y=t.length;r<y;r++){F=t[r];D=F.id;H=F.className||F.field&&"field-"+F.field;H=g(b+(".dgrid-cell.dgrid-cell-padding"+(D?".dgrid-column-"+D:"")+(H?"."+H:"")).replace(k,"-")+"[role="+("th"===b?"columnheader":"gridcell")+"]");H.columnId=D;c?(D=g(H,"!dgrid-cell-padding div.dgrid-cell-padding"),H.contents=D):D=H;if(N=F.colSpan)H.colSpan=N;if(N=
F.rowSpan)H.rowSpan=N;d(D,F);l.appendChild(H)}return e},left:function(b,c){b.element||(b=this.cell(b));return this.cell(this._move(b,-(c||1),"dgrid-cell"))},right:function(b,c){b.element||(b=this.cell(b));return this.cell(this._move(b,c||1,"dgrid-cell"))},renderRow:function(b,c){var a=this.createRowCells("td",function(a,m){var k=b;m.get?k=m.get(b):"field"in m&&"_item"!=m.field&&(k=k[m.field]);m.renderCell?l(a,m.renderCell(b,k,a,c)):d.call(m,b,k,a,c)},c&&c.subRows);return g("div[role=row]>",a)},renderHeader:function(){var b=
this,d=this.headerNode,a=d.childNodes.length;for(d.setAttribute("role","row");a--;)g(d.childNodes[a],"!");a=this.createRowCells("th",function(a,b){var d=b.headerNode=a;c&&(a=a.parentNode);var f=b.field;f&&(a.field=f);b.renderHeaderCell?l(d,b.renderHeaderCell(d)):("label"in b||b.field)&&d.appendChild(document.createTextNode("label"in b?b.label:b.field));!1!==b.sortable&&f&&"_item"!=f&&(a.sortable=!0,a.className+=" dgrid-sortable")},this.subRows&&this.subRows.headerRows);this._rowIdToObject[a.id=this.id+
"-header"]=this.columns;d.appendChild(a);this._sortListener&&this._sortListener.remove();this._sortListener=r(a,"click,keydown",function(a){if("click"==a.type||32==a.keyCode||!s("opera")&&13==a.keyCode){var c=a.target,k,l,g;do if(c.sortable){g=[{attribute:k=c.field||c.columnId,descending:(l=b._sort[0])&&l.attribute==k&&!l.descending}];k={bubbles:!0,cancelable:!0,grid:b,parentType:a.type,sort:g};r.emit(a.target,"dgrid-sort",k)&&(b._sortNode=c,b.set("sort",g));break}while((c=c.parentNode)&&c!=d)}})},
resize:function(){var b=this.headerNode.firstChild,c=this.contentNode,a;this.inherited(arguments);if(!s("ie")||7<s("ie")&&!s("quirks"))c.style.width="",c&&b&&(a=b.offsetWidth)!=c.offsetWidth&&(c.style.width=a+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(b,c){this.inherited(arguments);this.updateSortArrow(this._sort)},updateSortArrow:function(b,c){this._lastSortedArrow&&(g(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),
g(this._lastSortedArrow,"!"),delete this._lastSortedArrow);c&&(this._sort=b);if(b[0]){var a=b[0].attribute,e=b[0].descending,d=this._sortNode,k,l,n;delete this._sortNode;if(!d)for(n in k=this.columns,k)if(l=k[n],l.field==a){d=l.headerNode;break}d&&(d=d.contents||d,this._lastSortedArrow=g(d.firstChild,"-div.dgrid-sort-arrow.ui-icon[role=presentation]"),this._lastSortedArrow.innerHTML="&nbsp;",g(d,e?".dgrid-sort-down":".dgrid-sort-up"),this.resize())}},styleColumn:function(b,c){return this.addCssRule("#"+
n.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+b,c)},_configColumns:function(b,c){var a=[],e=c instanceof Array;n.each(c,function(d,k){"string"==typeof d&&(c[k]=d={label:d});e||d.field||(d.field=k);k=d.id=d.id||(isNaN(k)?k:b+k);e&&(this.columns[k]=d);this._configColumn&&this._configColumn(d,k,c,b);d.grid=this;"function"===typeof d.init&&d.init();a.push(d)},this);return e?c:a},_destroyColumns:function(){var b=this.subRows,c=b&&b.length,a,e,d,k;this.cleanup();for(a=0;a<c;a++)for(e=0,k=b[a].length;e<
k;e++)d=b[a][e],"function"===typeof d.destroy&&d.destroy()},configStructure:function(){var b=this.subRows,c=this._columns=this.columns;this.columns=!c||c instanceof Array?{}:c;if(b)for(c=0;c<b.length;c++)b[c]=this._configColumns(c+"-",b[c]);else this.subRows=[this._configColumns("",c)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(b){this._destroyColumns();this.subRows=null;this.columns=b;this._updateColumns()},_setSubRows:function(b){this._destroyColumns();this.subRows=
b;this._updateColumns()},setColumns:function(b){p.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4");this.set("columns",b)},setSubRows:function(b){p.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 0.4");this.set("subRows",b)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});
t.appendIfNode=l;t.defaultRenderCell=d;return t})},"put-selector/put":function(){(function(p){var t,r=/[-+,> ]/;p([],t=function(p,g){function b(k){function f(){v&&m&&v!=m&&(m==k&&(g||(g=r.test(y)&&p.createDocumentFragment()))||m).insertBefore(v,e||null)}for(var g,a,e,m,v,x=arguments,z=x[0],t=0;t<x.length;t++){var y=x[t];if("object"==typeof y){a=!1;if(y instanceof Array){v=p.createDocumentFragment();for(var C=0;C<y.length;C++)v.appendChild(b(y[C]));y=v}if(y.nodeType)v=y,f(),m=y,e=0;else for(C in y)v[C]=
y[C]}else if(a)a=!1,v.appendChild(p.createTextNode(y));else{1>t&&(k=null);a=!0;if(z=y.replace(n,function(a,g,q,n,r,z){g&&(f(),"-"==g||"+"==g?(m=(e=v||m).parentNode,v=null,"+"==g&&(e=e.nextSibling)):("<"==g?m=v=(v||m).parentNode:(","==g?m=k:v&&(m=v),v=null),e=0),v&&(m=v));if((a=!q&&n)||!v&&(q||r))"$"==a?(a=x[++t],m.appendChild(p.createTextNode(a))):(a=a||b.defaultTag,(g=c&&x[t+1]&&x[t+1].name)&&(a="<"+a+' name="'+g+'">'),v=d&&~(l=a.indexOf("|"))?p.createElementNS(d[a.slice(0,l)],a.slice(l+1)):p.createElement(a));
if(q)if("$"==n&&(n=x[++t]),"#"==q)v.id=n;else if(g=(a=v.className)&&(" "+a+" ").replace(" "+n+" "," "),"."==q)v.className=a?(g+n).substring(1):n;else if("!"==y){var C;c?b("div",v,"<").innerHTML="":(C=v.parentNode)&&C.removeChild(v)}else g=g.substring(1,g.length-1),g!=a&&(v.className=g);r&&("$"==z&&(z=x[++t]),"style"==r?v.style.cssText=z:(q="!"==r.charAt(0)?(r=r.substring(1))&&"removeAttribute":"setAttribute",z=""===z?r:z,d&&~(l=r.indexOf("|"))?v[q+"NS"](d[r.slice(0,l)],r.slice(l+1),z):v[q](r,z)));
return""}))throw new SyntaxError("Unexpected char "+z+" in "+y);f();m=z=v||m}}k&&g&&k.appendChild(g);return z}r=g||r;var n=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,l,d=!1;p=p||document;var c="object"==typeof p.createElement;b.addNamespace=function(b,c){p.createElementNS?(d||(d={}))[b]=c:p.namespaces.add(b,c)};b.defaultTag="div";b.forDocument=t;return b})})(function(p,t,r){r=r||t;"function"===typeof define?define([],function(){return r()}):"undefined"==
typeof window?require("./node-html")(module,r):put=r()})},"dgrid/List":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has ./util/misc dojo/has!touch?./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(p,t,r,s,g,b,n,l){function d(a,b){var c=document.body,e;l(c,a,".dgrid-scrollbar-measure");e=a["offset"+b]-a["client"+b];l(a,"!dgrid-scrollbar-measure");c.removeChild(a);return e}function c(a){var b=a?"."+a.replace(v,"."):
"";this._class&&(b="!"+this._class.replace(v,"!")+b);l(this.domNode,b);this._class=a}function k(){return this._class}function f(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function q(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)}n("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var a,e;s.add("dom-scrollbar-width",function(a,b,c){return d(c,"Width")});s.add("dom-scrollbar-height",
function(a,b,c){return d(c,"Height")});var m=0,v=/ +/g,x=7>s("ie")&&!s("quirks")?function(){var a,b,c;this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,c=this._prevWinDims||[],c[0]!==b||c[1]!==a)&&(this.resize(),this._prevWinDims=[b,a])}:function(){this._started&&this.resize()};return t(s("touch")?b:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:!0,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=
a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,b){var e=this.domNode=b||l("div"),d;a?(this.params=a,t.safeMixin(this,a),d=a["class"]||a.className||e.className,this._sort=a.sort||[],delete this.sort):this._sort=[];this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();
this.id=e.id=e.id||this.id||"dgrid_"+m++;this.buildRendering();d&&c.call(this,d);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this,c,e,d,f;f=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();a.className="";l(a,"[role=grid].ui-widget.dgrid.dgrid-"+this.listType);c=this.headerNode=l(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?
"":".dgrid-header-hidden"));(s("quirks")||8>s("ie"))&&l(a,"div.dgrid-spacer");e=this.bodyNode=l(a,"div.dgrid-scroller");e.tabIndex=-1;this.headerScrollNode=l(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");d=this.footerNode=l("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));l(a,d);f&&(a.className+=" dgrid-rtl"+(s("webkit")?"":" dgrid-rtl-nonwebkit"));r(e,"scroll",function(d){b.showHeader&&(c.scrollLeft=d.scrollLeft||e.scrollLeft);d.stopPropagation();r.emit(a,"scroll",
{scrollTarget:e})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=l(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=r(window,"resize",g.throttleDelayed(x,this)))},postCreate:s("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var b=
this.bodyNode,c=this.headerNode,d=this.footerNode,f=c.offsetHeight,m=this.showFooter?d.offsetHeight:0,k=s("quirks")||7>s("ie");this.headerScrollNode.style.height=b.style.marginTop=f+"px";b.style.marginBottom=m+"px";k&&(b.style.height="",b.style.height=Math.max(this.domNode.offsetHeight-f-m,0)+"px",m&&(d.style.bottom="1px",setTimeout(function(){d.style.bottom=""},0)));a||(a=s("dom-scrollbar-width"),e=s("dom-scrollbar-height"),s("ie")&&(a++,e++),g.addCssRule(".dgrid-scrollbar-width","width: "+a+"px"),
g.addCssRule(".dgrid-scrollbar-height","height: "+e+"px"),17==a||k||(g.addCssRule(".dgrid-header","right: "+a+"px"),g.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+a+"px")));k&&(c.style.width=b.clientWidth+"px",setTimeout(function(){c.scrollLeft=b.scrollLeft},0))},addCssRule:function(a,b){var c=g.addCssRule(a,b);this.cleanAddedRules&&this._listeners.push(c);return c},on:function(a,b){var c=r(this.domNode,a,b);s("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){var a=
this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var c=document.getElementById(b);c&&this.removeRow(c,!0)}for(b=0;b<a.length;b++)(c=a[b])&&c.cancel();this.observers=[];this._numObservers=0;this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this.cleanup();l(this.domNode,"!");this.inherited(arguments)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=
0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,c,e,d){if(b){var f=this.insertRow(a,b,c,e,d);l(f,".ui-state-highlight");setTimeout(function(){l(f,"!ui-state-highlight")},250);return f}},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(this.maintainOddEven&&-1<(a.className+" ").indexOf("dgrid-row ")&&l(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++);while((a=a.nextSibling)&&a.rowIndex!=
b)}},renderArray:function(a,b,c){function e(a){p=m.insertRow(a,x,null,k++,c);p.observerIndex=v;return p}function d(a){"undefined"!==typeof v&&(l[v].cancel(),l[v]=0,m._numObservers--);if(a)throw a;}function f(a){(n=b?b.parentNode:m.contentNode)&&n.parentNode&&(n!==m.contentNode||a.length)?(n.insertBefore(x,b||null),(p=a[a.length-1])&&m.adjustRowIndices(p)):l[v]&&d();return q=a}c=c||{};var m=this,k=c.start||0,l=this.observers,g,q,n,v;b||(this._lastCollection=a);a.observe&&(m._numObservers++,v=l.push(a.observe(function(a,
e,d){var f,k,l;-1<e&&q[e]&&(g=q.splice(e,1)[0],g.parentNode==n&&((f=g.nextSibling)&&e!=d&&f.rowIndex--,m.removeRow(g)),m._processScroll&&m._processScroll());if(-1<d){if(q.length){if(k=q[d],!k&&(k=q[d-1]))k=(k.connected||k).nextSibling}else k=m._getFirstRowSibling&&m._getFirstRowSibling(n);l=b&&b.parentNode||k&&k.parentNode||m.contentNode;if(g=m.newRow(a,l,k,c.start+d,c))if(g.observerIndex=v,q.splice(d,0,g),!f||d<e)f=(f=g.previousSibling)&&f.rowIndex+1!=g.rowIndex&&0!=g.rowIndex?f:g;c.count++}e!=d&&
f&&m.adjustRowIndices(f);m._onNotification(q,a,e,d)},!0))-1);var x=document.createDocumentFragment(),p;if(a.map){if(q=a.map(e,console.error),q.then)return q.then(f,d)}else{q=[];for(var s=0,r=a.length;s<r;s++)q[s]=e(a[s])}return f(q)},_onNotification:function(a,b,c,e){},renderHeader:function(){},_autoId:0,insertRow:function(a,b,c,e,d){var f=d.parentId,f=this.id+"-row-"+(f?f+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),m=document.getElementById(f),k=m&&m.previousSibling;
m&&this.removeRow(m);m=this.renderRow(a,d);m.className=(m.className||"")+" ui-state-default dgrid-row "+(1==e%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[m.id=f]=a;b.insertBefore(m,c||null);k&&this.adjustRowIndices(k);m.rowIndex=e;return m},renderRow:function(a,b){return l("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||l(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var c=
a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,e){var d,f;f=d=a.element;b=b||1;do if(a=d[0>b?"previousSibling":"nextSibling"]){do if((d=a)&&-1<(d.className+" ").indexOf(c+" ")){f=d;b+=0>b?
1:-1;break}while(a=(!e||!d.hidden)&&d[0>b?"lastChild":"firstChild"])}else if(d=d.parentNode,d===this.bodyNode||d===this.headerNode)break;while(b);return f},up:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:s("touch")?function(a){return this.useTouchScroll?this.inherited(arguments):q.call(this,a)}:q,getScrollPosition:s("touch")?function(){return this.useTouchScroll?
this.inherited(arguments):f.call(this)}:f,get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:k,_setClass:c,_getClassName:k,_setClassName:c,_setSort:function(a,b){this._sort=
"string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();this._lastCollection&&(a.length&&("string"!=typeof a&&(b=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(c,e){var d=c[a],f=e[a];void 0===d&&(d="");void 0===f&&(f="");return d==f?0:d>f==!b?1:-1})),this.renderArray(this._lastCollection))},sort:function(a,b){p.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4");this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=
this.headerNode;this.showHeader=a;l(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(a){p.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;l(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dgrid/util/misc":function(){define(["put-selector/put"],function(p){var t=[],r,s,g,b=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,
n={defaultDelay:15,throttle:function(b,d,c){var k=!1;c=c||n.defaultDelay;return function(){k||(k=!0,b.apply(d,arguments),setTimeout(function(){k=!1},c))}},throttleDelayed:function(b,d,c){var k=!1;c=c||n.defaultDelay;return function(){if(!k){k=!0;var f=arguments;setTimeout(function(){k=!1;b.apply(d,f)},c)}}},debounce:function(b,d,c){var k;c=c||n.defaultDelay;return function(){k&&(clearTimeout(k),k=null);var f=arguments;k=setTimeout(function(){b.apply(d,f)},c)}},each:function(b,d,c){var k,f;if(b)if("number"===
typeof b.length)for(k=0,f=b.length;k<f;k++)d.call(c,b[k],k,b);else for(k in b)d.call(c,b[k],k,b)},addCssRule:function(b,d){r||(r=p(document.getElementsByTagName("head")[0],"style"),r=r.sheet||r.styleSheet,s=r.deleteRule?"deleteRule":"removeRule",g=r.cssRules?"cssRules":"rules");var c=t.length;t[c]=(r.cssRules||r.rules).length;r.addRule?r.addRule(b,d):r.insertRule(b+"{"+d+"}",t[c]);return{get:function(b){return r[g][t[c]].style[b]},set:function(b,d){"undefined"!==typeof t[c]&&(r[g][t[c]].style[b]=
d)},remove:function(){var b=t[c],d,l;if(void 0!==b)for(r[s](b),t[c]=void 0,d=c+1,l=t.length;d<l;d++)t[d]>b&&t[d]--}}},escapeCssIdentifier:function(l){return l.replace(b,"\\$1")}};return n})},"xstyle/has-class":function(){define(["dojo/has"],function(p){var t={};return function(){for(var r,s=arguments,g=0;g<s.length;g++)if(r=s[g],!t[r]){t[r]=!0;var b=r.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),n=p(b[2]),l=-b[4];(0<l?l<=n&&(-b[5]||l)>=n:!!n)==!b[1]&&(document.documentElement.className+=" has-"+
r)}}})},"xstyle/css":function(){define(["require"],function(p){function t(p,s,g){var b=document.documentElement;p=b.insertBefore(document.createElement(p),b.firstChild);p.id=s;s=(p.currentStyle||getComputedStyle(p,null))[g];b.removeChild(p);return s}return{load:function(r,s,g,b){function n(){var b=t("x-parse",null,"content");b&&"none"!=b?s([eval(b)],g):g()}var l=s.toUrl(r),d=s.cache&&s.cache["url:"+l];if(d)return d.xCss&&(d=d.cssText),p(["./util/createStyleSheet"],function(b){b(d)}),n();if("none"==
t("div",r.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return n();p(["./core/load-css"],function(b){b(l,n)})}}})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on ./util/misc put-selector/put".split(" "),function(p,t,r,s,g,b,n,l){return r([p,t],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:1,pagingMethod:"debounce",pagingDelay:n.defaultDelay,keepScrollPosition:!1,
rowHeight:22,postCreate:function(){this.inherited(arguments);var d=this;b(this.bodyNode,"scroll",n[this.pagingMethod](function(b){d._processScroll(b)},null,this.pagingDelay))},renderQuery:function(b,c,k){function f(a){l(x,"!");if(a)throw q._refreshDeferred&&(q._refreshDeferred.reject(a),delete q._refreshDeferred),a;}var q=this,a={query:b,count:0,node:c,options:k},e=this.preload,m;if(!c){var n={node:l(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:b,next:a,options:k};n.node.style.height=
"0";a.node=c=l(this.contentNode,"div.dgrid-preload");a.previous=n}c.rowIndex=this.minRowsPerPage;e?((a.next=e.next)&&this.bodyNode.scrollTop>=e.node.offsetTop?a.previous=e:(a.next=e,a.previous=e.previous),a.previous.next=a,a.next.previous=a):this.preload=a;var x=l(c,"-div.dgrid-loading");l(x,"div.dgrid-below").innerHTML=this.loadingMessage;k=s.mixin(this.get("queryOptions"),k,{start:0,count:this.minRowsPerPage,query:b});this._trackError(function(){return m=b(k)});if("undefined"===typeof m)f();else return g.when(q.renderArray(m,
c,k),function(b){return g.when("undefined"===typeof m.total?m.length:m.total,function(e){var d=b.length,f=c.parentNode,k=q.noDataNode;l(x,"!");q._total=e;0===e&&(k&&(l(k,"!"),delete q.noDataNode),q.noDataNode=k=l("div.dgrid-no-data"),f.insertBefore(k,q._getFirstRowSibling(f)),k.innerHTML=q.noDataMessage);for(k=f=0;k<d;k++)f+=q._calcRowHeight(b[k]);d&&f&&(q.rowHeight=f/d);e-=d;a.count=e;c.rowIndex=d;e?c.style.height=Math.min(e*q.rowHeight,q.maxEmptySpace)+"px":c.style.display="none";q._previousScrollPosition&&
(q.scrollTo(q._previousScrollPosition),delete q._previousScrollPosition);q._processScroll();q._refreshDeferred&&(q._refreshDeferred.resolve(m),delete q._refreshDeferred);return b},f)},f),m},refresh:function(d){var c=this,k=d&&d.keepScrollPosition,f;"undefined"===typeof k&&(k=this.keepScrollPosition);k&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store)return k=this._refreshDeferred=new g,f=c.renderQuery(function(b){return c.store.query(c.query,b)}),"undefined"===
typeof f&&k.reject(),k.then(function(d){setTimeout(function(){b.emit(c.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:c,results:d})},0);delete c._refreshDeferred;return d},function(b){delete c._refreshDeferred;throw b;})},resize:function(){this.inherited(arguments);this._processScroll()},_getFirstRowSibling:function(b){return b.lastChild},_calcRowHeight:function(b){var c=b.previousSibling;return c&&c.offsetTop!=b.offsetTop?b.offsetHeight:0},lastScrollTop:0,_processScroll:function(b){function c(a,
b,c,e){var d=q.farOffRemoval,f=a.node;if(b>2*d){for(var m,g=f[c],n=0,v=0,x=[];m=g;){var p=q._calcRowHeight(m);if(n+p+d>b||0>g.className.indexOf("dgrid-row")&&0>g.className.indexOf("dgrid-loading"))break;g=m[c];n+=p;v+=m.count||1;q.removeRow(m,!0);x.push(m)}a.count+=v;e?(f.rowIndex-=v,k(a)):f.style.height=f.offsetHeight+n+"px";var s=l("div",x);setTimeout(function(){l(s,"!")},1)}}function k(a,b){a.node.style.height=Math.min(a.count*q.rowHeight,b?Infinity:q.maxEmptySpace)+"px"}function f(a,b){do a=b?
a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var q=this,a=q.bodyNode;b=b&&b.scrollTop||this.getScrollPosition().y;var e=a.offsetHeight+b,m,n,x=q.preload,p=q.lastScrollTop,r=q.bufferRows*q.rowHeight,y=r-q.rowHeight,t,F,D,H=!0;for(q.lastScrollTop=b;x&&!x.node.offsetWidth;)x=x.previous;for(;x&&x!=m;){m=q.preload;q.preload=x;n=x.node;var N=n.offsetTop;if(e+1+y<N)x=f(x,H=!1);else if(b-1-y>N+n.offsetHeight)x=f(x,H=!0);else{var J=((n.rowIndex?b-r:e)-N)/q.rowHeight,N=(e-b+2*r)/q.rowHeight,M=Math.max(Math.min((b-
p)*q.rowHeight,q.maxRowsPerPage/2),q.maxRowsPerPage/-2),N=N+Math.min(Math.abs(M),10);0==n.rowIndex&&(J-=N);J=Math.max(J,0);10>J&&0<J&&N+J<q.maxRowsPerPage&&(N+=Math.max(0,J),J=0);N=Math.min(Math.max(N,q.minRowsPerPage),q.maxRowsPerPage,x.count);if(0==N)x=f(x,H);else{var N=Math.ceil(N),J=Math.min(Math.floor(J),x.count-N),E=s.mixin(q.get("queryOptions"),x.options);x.count-=N;var K=n,G,u=q.queryRowsOverlap;if(M=0<n.rowIndex&&x){var S=x.previous;S&&(c(S,b-(S.node.offsetTop+S.node.offsetHeight),"nextSibling"),
0<J&&S.node==n.previousSibling?(J=Math.min(x.count,J),x.previous.count+=J,k(x.previous,!0),n.rowIndex+=J,u=0):N+=J,x.count-=J);E.start=n.rowIndex-u;E.count=Math.min(N+u,q.maxRowsPerPage);n.rowIndex=E.start+E.count}else x.next&&(c(x.next,x.next.node.offsetTop-e,"previousSibling",!0),K=n.nextSibling,K==x.next.node?(x.next.count+=x.count-J,x.next.node.rowIndex=J+N,k(x.next),x.count=J,u=0):G=!0),E.start=x.count,E.count=Math.min(N+u,q.maxRowsPerPage);G&&K&&K.offsetWidth&&(G=K.offsetTop);k(x);n=l(K,"-div.dgrid-loading[style=height:"+
N*q.rowHeight+"px]");l(n,"div.dgrid-"+(M?"below":"above")).innerHTML=q.loadingMessage;n.count=N;E.query=x.query;if(!(E.start>q._total||0>E.count)){var Q=x.query(E);if(void 0===q._trackError(function(){return Q})){l(n,"!");return}(function(a,b,c,e,d){D=g.when(q.renderArray(d,a,E),function(b){F=d;K=a.nextSibling;l(a,"!");if(e&&K&&K.offsetWidth){var f=q.getScrollPosition();q.scrollTo({x:f.x,y:f.y+K.offsetTop-e,preserveMomentum:!0})}g.when(d.total||d.length,function(a){q._total=a;c&&(c.count=a-c.node.rowIndex,
k(c))});q._processScroll();return b},function(b){l(a,"!");throw b;})}).call(this,n,a,M,G,Q);x=x.previous}}}}D&&(t=this._refreshDeferred)&&(delete this._refreshDeferred,g.when(D,function(){t.resolve(F)}))},removeRow:function(b,c){if(b){var k=b.previousSibling,f=b.nextSibling,l;if(l=k)l=k.observerIndex,l=null!=l?l:k.previousObserverIndex;k=l;if(l=f)l=f.observerIndex,l=null!=l?l:f.nextObserverIndex;f=b.observerIndex;b.observerIndex=void 0;c&&(b.nextObserverIndex=l,b.previousObserverIndex=k);-1<f&&f!==
k&&f!==l&&(k=this.observers,l=k[f])&&(l.cancel(),this._numObservers--,k[f]=0)}this.inherited(arguments)}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(p,t,r,s,g,b,n){function l(b){return b}function d(b){if("object"!==typeof b)b=Error(b);else if("cancel"===b.dojoType)return;b.grid=this;g.emit(this.domNode,"dgrid-error",{grid:this,error:b,cancelable:!0,bubbles:!0})&&console.error(b)}
return t(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};b.before(this,"configStructure",r.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments);this.store&&this._updateNotifyHandle(this.store)},destroy:function(){this.inherited(arguments);this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(b){b.set&&
(this._columnsWithSet[b.field]=b)},_updateNotifyHandle:function(c){this._notifyHandle&&(this._notifyHandle.remove(),delete this._notifyHandle);"function"===typeof c.notify&&(this._notifyHandle=b.after(c,"notify",r.hitch(this,"_onNotify"),!0))},_setStore:function(b,d,f){this._updateNotifyHandle(b);this.store=b;this.dirty={};this.set("query",d,f)},_setQuery:function(b,d){var f=d&&d.sort;this.query=void 0!==b?b:this.query;this.queryOptions=d||this.queryOptions;f?this.set("sort",f):this.refresh()},setStore:function(b,
d,f){p.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4");this.set("store",b,d,f)},setQuery:function(b,d){p.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4");this.set("query",b,d)},_getQueryOptions:function(){var b=r.delegate(this.queryOptions,{});this._sort.length&&(b.sort=this._sort);return b},_getQuery:function(){var b=this.query;return"object"==typeof b&&null!=b?r.delegate(b,{}):b},_setSort:function(b,d){this.store&&(this._lastCollection=null);this.inherited(arguments)},
_onNotify:function(b,d){this.inherited(arguments);b&&1>this._numObservers&&this.refresh({keepScrollPosition:!0})},insertRow:function(b,d,f,l,a){var e=this.store,m=this.dirty,e=e&&e.getIdentity(b),g;e in m&&!(e in this._updating)&&(g=m[e]);g&&(b=r.delegate(b,g));return this.inherited(arguments)},updateDirty:function(b,d,f){var l=this.dirty,a=l[b];a||(a=l[b]={});a[d]=f},setDirty:function(b,d,f){p.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(b,d,f)},save:function(){function b(a,
c){return function(b){var e=d._columnsWithSet,m=d._updating,g,n;if("function"===typeof b.set)b.set(c);else for(g in c)b[g]=c[g];for(g in e)n=e[g].set(b),void 0!==n&&(b[g]=n);m[a]=!0;return s.when(f.put(b),function(){delete l[a];delete m[a]})}}var d=this,f=this.store,l=this.dirty,a=new s,e=a.promise,m=function(a){var b;return d.getBeforePut||!(b=d.row(a).data)?function(){return f.get(a)}:function(){return b}},g;for(g in l)var n=b(g,l[g]),e=e.then(m(g)).then(n);a.resolve();return e},revert:function(){this.dirty=
{};this.refresh()},_trackError:function(b){var k;"string"==typeof b&&(b=r.hitch(this,b));try{k=b()}catch(f){d.call(this,f)}return s.when(k,l,r.hitch(this,d))},newRow:function(){this.noDataNode&&(n(this.noDataNode,"!"),delete this.noDataNode);return this.inherited(arguments)},removeRow:function(b,d){var f={element:b};!d&&this.noDataMessage&&this.up(f).element===b&&this.down(f).element===b&&(this.noDataNode=n(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})})},
"dgrid/Selection":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/Deferred dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),function(p,t,r,s,g,b,n,l,d){function c(a,b){for(var c=a.unselectable=b?"on":"",e=a.getElementsByTagName("*"),d=e.length;--d;)"INPUT"!==e[d].tagName&&"TEXTAREA"!==e[d].tagName&&(e[d].unselectable=c)}function k(a,e){var d=a.bodyNode,f=e?"text":21>g("ff")?"-moz-none":"none";q?d.style[q]=f:
g("dom-selectstart")?e||a._selectstartHandle?e&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=s(d,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(c(d,!e),e||a._unselectableHandle)?e&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=b.after(a,"renderRow",function(a){c(a,!0);return a})}g.add("mspointer",function(a,b,c){return"onmspointerdown"in
c});g.add("css-user-select",function(a,b,c){a=c.style;b=["Khtml","O","ms","Moz","Webkit"];c=b.length;var e="userSelect";do if("undefined"!==typeof a[e])return e;while(c--&&(e=b[c]+"UserSelect"));return!1});g.add("dom-selectstart","undefined"!==typeof document.onselectstart);var f=g("mac")?"metaKey":"ctrlKey",q=g("css-user-select"),a=g("mspointer")?"MSPointerDown":"mousedown",e=g("mspointer")?"MSPointerUp":"mouseup";return t(null,{selectionDelegate:".dgrid-row",selectionEvents:a+","+e+",dgrid-cellfocusin",
deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a);this._initSelectionEvents()},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._deselectionHandle&&
this._deselectionHandle.remove()},_setSelectionMode:function(a){a!=this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(a){p.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4");this.set("selectionMode",a)},_setAllowTextSelection:function(a){"undefined"!==typeof a?k(this,a):k(this,"none"===this.selectionMode);this.allowTextSelection=
a},_handleSelect:function(b,c){if(this[this._selectionHandlerName]&&!("dgrid-cellfocusin"===b.type&&"mousedown"===b.parentType||b.type===e&&c!=this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=b;if(!b.keyCode||!b.ctrlKey||32==b.keyCode)if(!b.shiftKey&&b.type===a&&this.isSelected(c))this._waitForMouseUp=c;else this[this._selectionHandlerName](b,c);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,b){var c=a.keyCode?a.ctrlKey:a[f];this._lastSelected===
b?this.select(b,null,!c||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var c=this._lastSelected,e=a.keyCode?a.ctrlKey:a[f],d;a.shiftKey||(d=e?null:!0,c=null);this.select(b,c,d);c||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:a[f])||this.clearSelection(null,!0);this._multipleSelectionHandler(a,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,
null)},_initSelectionEvents:function(){var a=this,c=this.selectionDelegate;g("touch")?s(this.contentNode,l.selector(c,l.tap),function(b){a._handleSelect(b,this)}):s(this.contentNode,s.selector(c,this.selectionEvents),function(b){a._handleSelect(b,this)});this.addKeyHandler&&this.addKeyHandler(32,function(b){a._handleSelect(b,b.target)});if(this.allowSelectAll)this.on("keydown",function(b){b[f]&&65==b.keyCode&&(b.preventDefault(),a[a.allSelected?"clearSelection":"selectAll"]())});this._setStore&&b.after(this,
"_setStore",function(){a._updateDeselectionAspect()});this._updateDeselectionAspect()},_updateDeselectionAspect:function(){var a=this,c=this.store;this._deselectionSignal&&this._deselectionSignal.remove();this._deselectionSignal=c&&c.notify?b.after(c,"notify",function(b,c){var e=c||b&&b[this.idProperty||"id"];if(e){var d=(e=a.row(e))&&a.selection[e.id];if(d)a[(b?"":"de")+"select"](e,null,d)}},!0):b.before(this,"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(c)})},
allowSelect:function(a){return!0},_selectionEventQueue:function(a,b){var c=this,e="dgrid-"+(a?"select":"deselect"),d=this[e],f=this._selectionTriggerEvent;f&&(f=f.type);if(d)return d;setTimeout(this._fireSelectionEvent=function(){if(d){var a={bubbles:!0,grid:c};f&&(a.parentType=f);a[b]=d;s.emit(c.contentNode,e,a);d=null;delete c[e]}},0);return d=this[e]=[]},select:function(a,b,c){void 0===c&&(c=!0);a.element||(a=this.row(a));if(!1===c||this.allowSelect(a)){var e=this.selection,f=e[a.id];null===c&&
(c=!f);var k=a.element;c||this.allSelected?e[a.id]=c:delete this.selection[a.id];k&&(c?d(k,".dgrid-selected.ui-state-active"):d(k,"!dgrid-selected!ui-state-active"));c!=f&&k&&this._selectionEventQueue(c,"rows").push(a);if(b)for(b.element||(b=this.row(b)),b=b.element,e=a.element,e=b&&(b.compareDocumentPosition?2==b.compareDocumentPosition(e):b.sourceIndex>e.sourceIndex)?"down":"up";a.element!=b&&(a=this[e](a));)this.select(a,null,c)}},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,
b){this.allSelected=!1;for(var c in this.selection)a!==c&&this.deselect(c);b||(this._lastSelected=null)},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this.select(b.id)}},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&(this.clearSelection(),
this._fireSelectionEvent&&this._fireSelectionEvent());this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this,b=this.inherited(arguments);r.when(b,function(b){var c=a.selection,e,d,f;for(e=0;e<b.length;e++)d=a.row(b[e]),(f=d.id in c?c[d.id]:a.allSelected)&&a.select(d,null,f)});return b}})})},"dgrid/selector":function(){define("dojo/_base/kernel dojo/_base/array dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),function(p,t,r,s,g,b){return function(n,
l){function d(b){return!a.allowSelect(a.row(b))}function c(b){return function(c){var d=c.rows,f=d.length;c="false";var m;for(m=0;m<f;m++){var k=a.cell(d[m],n.id).element;k&&(k=(k.contents||k).input)&&!k.disabled&&(k.checked=b,k.setAttribute("aria-checked",b))}if("checkbox"==e.type){d=a.selection;f=!1;for(m in d)if(d[m]!=a.allSelected){f=!0;break}e.indeterminate=f;e.checked=a.allSelected;f?c="mixed":a.allSelected&&(c="true");e.setAttribute("aria-checked",c)}}}function k(e){if("click"==e.type||32==
e.keyCode||!g("opera")&&13==e.keyCode||0===e.keyCode){var d=a.row(e),f=a._lastSelected&&a.row(a._lastSelected);a._selectionTriggerEvent=e;"radio"==l?f&&f.id==d.id||(a.clearSelection(),a.select(d,null,!0),a._lastSelected=d.element):d?(e.shiftKey?c(!0)({rows:[d]}):f=null,f=e.shiftKey?f:null,a.select(f||d,d,f?void 0:null),a._lastSelected=d.element):(b(this,(a.allSelected?"!":".")+"dgrid-select-all"),a[a.allSelected?"clearSelection":"selectAll"]());a._selectionTriggerEvent=null}}function f(){a._hasSelectorInputListener=
!0;q.push(a.on(".dgrid-selector:click,.dgrid-selector:keydown",k));var b=a._handleSelect;a._handleSelect=function(a){this.cell(a).column!=n&&b.apply(this,arguments)};if("function"==typeof n.disabled){var e=a.allowSelect,f=n.disabled;a.allowSelect=function(a){var b=e.call(this,a);return f===d?b:b&&!f.call(n,a.data)}}n.disabled=d;q.push(a.on("dgrid-select",c(!0)));q.push(a.on("dgrid-deselect",c(!1)))}var q=[],a,e;n||(n={});n.type&&(n.selectorType=n.type,p.deprecated("columndef.type","use columndef.selectorType instead",
"dgrid 0.4"));n.selectorType=l=l||n.selectorType||"checkbox";n.sortable=!1;var m="function"==typeof l?l:function(c,e,d){var m=e.parentNode,k;a._hasSelectorInputListener||f();k=n.disabled;b(m&&m.contents?m:e,".dgrid-selector");e=e.input||(e.input=b(e,"input[type="+l+"]",{tabIndex:isNaN(n.tabIndex)?-1:n.tabIndex,disabled:k&&("function"==typeof k?k.call(n,d):k),checked:c}));e.setAttribute("aria-checked",!!c);return e};s.after(n,"init",function(){a=n.grid});s.after(n,"destroy",function(){t.forEach(q,
function(a){a.remove()});a._hasSelectorInputListener=!1});n.renderCell=function(b,c,e,d,f){c=(c=b&&a.row(b))&&a.selection[c.id];m(c,e,b)};n.renderHeaderCell=function(b){var c="label"in n?n.label:n.field||"";"radio"!=l&&a.allowSelectAll?m(!1,b,{}):(b.appendChild(document.createTextNode(c)),a._hasSelectorInputListener||f());e=b.lastChild};return n}})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),
function(p,t,r,s,g,b,n,l,d,c){function k(a,b,d,f){f=this.grid.isRTL?"right":"left";var k=".dgrid-expando-icon";b&&(k+=".ui-icon.ui-icon-triangle-1-"+(d?"se":"e"));a=c("div"+k+"[style=margin-"+f+": "+a*(this.indentWidth||9)+"px; float: "+f+"]");a.innerHTML="&nbsp;";return a}function f(a){var b=this,d=this.style.height;d&&(this.style.display="0px"==d?"none":"block");a&&(c(this,".dgrid-tree-resetting"),setTimeout(function(){c(b,"!dgrid-tree-resetting")}));this.style.height=""}function q(a){var e=a.renderCell||
l.defaultRenderCell,m,q;a||(a={});a.shouldExpand=a.shouldExpand||function(a,b,c){return c};b.after(a,"init",function(){var e=a.grid,l=".dgrid-content .dgrid-column-"+a.id,p=[];if(!e.store)throw Error("dgrid tree column plugin requires a store to operate.");a.renderExpando||(a.renderExpando=k);p.push(e.on(a.expandOn||".dgrid-expando-icon:click,"+l+":dblclick,"+l+":keydown",function(a){var b=e.row(a);e.store.mayHaveChildren&&!e.store.mayHaveChildren(b.data)||"keydown"==a.type&&32!=a.keyCode||"dblclick"==
a.type&&q&&1<q.count&&b.id==q.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||e.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(q&&q.id==e.row(a).id?q.count++:q={id:e.row(a).id,count:1})}));n("touch")&&p.push(e.on(d.selector(l,d.dbltap),function(){e.expand(this)}));e._expanded||(e._expanded={});p.push(b.after(e,"insertRow",function(b){var c=this.row(b);a.shouldExpand(c,m,this._expanded[c.id])&&this.expand(b,!0,!0);return b}));p.push(b.before(e,"removeRow",function(a,b){var d=
a.connected;d&&(s(">.dgrid-row",d).forEach(function(a){e.removeRow(a,!0)}),b||c(d,"!"))}));a.collapseOnRefresh&&p.push(b.after(e,"cleanup",function(){this._expanded={}}));e._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};e.expand=function(b,d,m){var k=b.element?b:e.row(b),l=n("transitionend");b=k.element;if((b=-1<b.className.indexOf("dgrid-expando-icon")?b:s(".dgrid-expando-icon",b)[0])&&b.mayHaveChildren&&(m||d!==!!this._expanded[k.id])){var q=void 0===d?
!this._expanded[k.id]:d;c(b,".ui-icon-triangle-1-"+(q?"se":"e")+"!ui-icon-triangle-1-"+(q?"e":"se"));var v=b.preloadNode;d=k.element;var p,t,z,A;if(!v){p=d.connected=c("div.dgrid-tree-container");var v=b.preloadNode=c(d,"+",p,"div.dgrid-preload"),u=function(a){return e.store.getChildren(k.data,a)};u.level=b.level;a.allowDuplicates&&(A={parentId:k.id});r.when(e.renderQuery?e._trackError(function(){return e.renderQuery(u,v,A)}):e.renderArray(u(A),v,{query:u}),function(){if(e._expanded[k.id]&&l){var a=
p.scrollHeight;p.style.height=a?a+"px":"auto"}});l?g(p,l,f):f.call(p)}p=d.connected;p.hidden=!q;t=p.style;!l||m?(t.display=q?"block":"none",t.height=""):(q?(t.display="block",z=p.scrollHeight,t.height="0px"):(c(p,".dgrid-tree-resetting"),t.height=p.scrollHeight+"px"),setTimeout(function(){c(p,"!dgrid-tree-resetting");t.height=q?z?z+"px":"auto":"0px"}));q?this._expanded[k.id]=!0:delete this._expanded[k.id]}};b.after(a,"destroy",function(){t.forEach(p,function(a){a.remove()});delete e.expand;delete e._calcRowHeight})});
a.renderCell=function(b,d,f,k){var l=a.grid,g=Number(k&&k.query&&k.query.level)+1,q=!l.store.mayHaveChildren||l.store.mayHaveChildren(b),n=k.parentId,g=m=isNaN(g)?0:g,l=a.renderExpando(g,q,l._expanded[(n?n+"-":"")+l.store.getIdentity(b)],b);l.level=g;l.mayHaveChildren=q;(b=e.call(a,b,d,f,k))&&b.nodeType?(c(f,l),c(f,b)):f.insertBefore(l,f.firstChild)};return a}q.defaultRenderExpando=k;return q})},"dgrid/util/has-css3":function(){define(["dojo/has","xstyle/css!../css/has-transforms3d.css"],function(p){var t=
["ms","O","Moz","Webkit"];p.add("css-transitions",function(p,s,g){p=g.style;if(void 0!==p.transitionProperty)return!0;for(s=t.length;s--;)if(void 0!==p[t[s]+"TransitionProperty"])return t[s];return!1});p.add("transitionend",function(){var r=p("css-transitions");return r?!0===r?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[r]:!1});p.add("css-transforms",function(p,s,g){p=g.style;if(void 0!==p.transformProperty)return!0;for(s=t.length;s--;)if(void 0!==
p[t[s]+"Transform"])return t[s];return!1});p.add("css-transforms3d",function(p,s,g){g.className="has-csstransforms3d";document.body.appendChild(g);p=g.offsetLeft;if(9===p)return!0;if(9<p)return(g=t[p-10])||!1;document.body.removeChild(g);g.className="";return!1});return p})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-geometry dojo/has ../util/misc put-selector/put dojo/_base/html xstyle/css!../css/extensions/ColumnResizer.css".split(" "),
function(p,t,r,s,g,b,n,l,d){function c(a){for(var b=a.length,c=b,d=a[0].length,f=Array(b);b--;)f[b]=Array(d);for(var k={},b=0;b<c;b++)for(var l=f[b],g=a[b],q=0,n=0;q<d;q++){var p=g[n],s;if("undefined"==typeof l[q]){l[q]=p.id;if(p.rowSpan&&1<p.rowSpan){s=f;for(var r=p.rowSpan,t=b,E=q,K=p.id,G=1;G<r;G++)s[t+G][E]=K}if(0<b&&p.colSpan&&1<p.colSpan)for(s=1;s<p.colSpan;s++)if(l[++q]=p.id,p.rowSpan&&1<p.rowSpan)for(var r=f,t=p.rowSpan,E=b,K=q,G=p.id,u=1;u<t;u++)r[E+u][K]=G;k[p.id]=a[0][q].id;n++}}return k}
function k(a,b,c,d){if(!(0>=c)){var f=a.columns[b],k={grid:a,columnId:b,width:c,bubbles:!0,cancelable:!0};d&&(k.parentType=d);if(!a._resizedColumns||t.emit(a.headerNode,"dgrid-columnresize",k))return"auto"===c?delete f.width:(f.width=c,c+="px"),(d=a._columnSizes[b])?d.set("width",c):d=l.addCssRule("#"+l.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+b,"width: "+c+";"),a._columnSizes[b]=d,a.resize(),!0}}var f,q=0,a={create:function(){f=d("div.dgrid-column-resizer")},destroy:function(){d(f,"!");
f=null},show:function(a){a=b.position(a.domNode,!0);f.style.top=a.y+"px";f.style.height=a.h+"px";d(document.body,f)},move:function(a){f.style.left=a+"px"},hide:function(){f.parentNode.removeChild(f)}};return p(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);q++||a.create()},destroy:function(){this.inherited(arguments);for(var b in this._columnSizes)this._columnSizes[b].remove();--q||a.destroy()},resizeColumnWidth:function(a,
b){return k(this,a,b)},configStructure:function(){var a=this._oldColumnSizes=s.mixin({},this._columnSizes),b;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(b in a)b in this._columnSizes||a[b].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,c;"width"in a&&((c=this._oldColumnSizes[b])?c.set("width",a.width+"px"):c=l.addCssRule("#"+this.domNode.id+" .dgrid-column-"+b,"width: "+a.width+"px;"),this._columnSizes[b]=c)},renderHeader:function(){this.inherited(arguments);
if(!this.resizerDisabled){var a=this,b;if(this.columnSets&&this.columnSets.length)for(var f=this.columnSets.length;f--;)b=s.mixin(b||{},c(this.columnSets[f]));else this.subRows&&1<this.subRows.length&&(b=c(this.subRows));for(var f=r(".dgrid-cell",a.headerNode),k=f.length;k--;){var g=f[k],q=g.columnId,p=a.columns[q],C=g.childNodes;if(p&&!1!==p.resizable){p=d("div.dgrid-resize-header-container");for(g.contents=p;0<C.length;)d(p,C[0]);d(g,p,"div.dgrid-resize-handle.resizeNode-"+q).columnId=b?b[q]:q}}a.mouseMoveListen||
(t(a.headerNode,".dgrid-resize-handle:mousedown"+(n("touch")?",.dgrid-resize-handle:touchstart":""),function(b){a._resizeMouseDown(b,this);a.mouseMoveListen.resume();a.mouseUpListen.resume()}),a._listeners.push(a.mouseMoveListen=t.pausable(document,"mousemove"+(n("touch")?",touchmove":""),l.throttleDelayed(function(b){a._updateResizerPosition(b)}))),a._listeners.push(a.mouseUpListen=t.pausable(document,"mouseup"+(n("touch")?",touchend":""),function(b){a._resizeMouseUp(b);a.mouseMoveListen.pause();
a.mouseUpListen.pause()})),a.mouseMoveListen.pause(),a.mouseUpListen.pause())}},_resizeMouseDown:function(b,c){b.preventDefault();g.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(b);this._targetCell=r(".dgrid-column-"+c.columnId,this.headerNode)[0];this._updateResizerPosition(b);a.show(this)},_resizeMouseUp:function(b){var c=this._columnSizes,d,f,l;this.adjustLastColumn&&(l=this.headerNode.clientWidth-1);this._resizedColumns||(d=r(".dgrid-cell",this.headerNode),this.columnSets&&
this.columnSets.length?d=d.filter(function(a){return"0"==a.columnId.split("-")[0]&&!(a.columnId in c)}):this.subRows&&1<this.subRows.length&&(d=d.filter(function(a){return"0"==a.columnId.charAt(0)&&!(a.columnId in c)})),f=d.map(function(a){return a.offsetWidth}),d.forEach(function(a,b){this.resizeColumnWidth(a.columnId,f[b])},this),this._resizedColumns=!0);g.setSelectable(this.domNode,!0);d=this._targetCell;var q=this._getResizeMouseLocation(b)-this._startX,n=d.offsetWidth+q,p=this._getResizedColumnWidths(),
s=p.totalWidth,p=p.lastColId,t=r(".dgrid-column-"+p,this.headerNode)[0].offsetWidth;n<this.minWidth&&(n=this.minWidth);k(this,d.columnId,n,b.type)&&d.columnId!=p&&this.adjustLastColumn&&(s+q<l?k(this,p,"auto",b.type):t-q<=this.minWidth&&k(this,p,this.minWidth,b.type));a.hide();delete this._startX;delete this._targetCell},_updateResizerPosition:function(b){if(this._targetCell){b=this._getResizeMouseLocation(b);var c=this._targetCell.offsetWidth,d=b;c+(b-this._startX)<this.minWidth&&(d=this._startX-
(c-this.minWidth));a.move(d)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=r(".dgrid-cell",this.headerNode);this.columnSets&&this.columnSets.length?b=b.filter(function(a){return"0"==a.columnId.split("-")[1]}):this.subRows&&1<this.subRows.length&&(b=b.filter(function(a){return"0"==a.columnId.charAt(0)}));var c=b.length;if(!c)return{};for(var d=
b[c-1].columnId;c--;)a+=b[c].offsetWidth;return{totalWidth:a,lastColId:d}}})})},"dgrid/extensions/ColumnHider":function(){define("dojo/_base/declare dojo/has dojo/on ../util/misc put-selector/put dojo/i18n!./nls/columnHider xstyle/css!../css/extensions/ColumnHider.css".split(" "),function(p,t,r,s,g,b){var n,l,d=t("ie"),c=d&&t("quirks"),k=8>d||c?"htmlFor":"for";return p(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:b,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,
_renderHiderMenuEntries:function(){var b=this.subRows,c=!0,a,e,d,k;delete this._columnHiderFirstCheckbox;d=0;for(a=b.length;d<a;d++)for(k=0,e=b[d].length;k<e;k++)this._renderHiderMenuEntry(b[d][k]),c&&(c=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[b[d][k].id])},_renderHiderMenuEntry:function(b){var c=b.id,a,e,d;b.hidden&&this._hideColumn(c);b.unhidable||(a=g("div.dgrid-hider-menu-row"),e=this.domNode.id+"-hider-menu-check-"+c,this._columnHiderCheckboxes[c]=d=g(a,"input#"+e+".dgrid-hider-menu-check.hider-menu-check-"+
c+"[type=checkbox]"),g(a,"label.dgrid-hider-menu-label.hider-menu-label"+c+"["+k+"="+e+"]",b.label||b.field||""),g(this.hiderMenuNode,a),b.hidden||(d.checked=!0))},renderHeader:function(){var b=this,k=this.hiderMenuNode,a=this.hiderToggleNode,e;this.inherited(arguments);if(!this.hiderDisabled){if(k){for(e in this._columnHiderRules)this._columnHiderRules[e].remove();k.innerHTML=""}else a=this.hiderToggleNode=g(this.headerScrollNode,"button.ui-icon.dgrid-hider-toggle[type=button]"),this._listeners.push(r(a,
"click",function(a){b._toggleColumnHiderMenu(a)})),k=this.hiderMenuNode=g("div#dgrid-hider-menu-"+this.id+".dgrid-hider-menu[role=dialog][aria-label="+this.i18nColumnHider.popupLabel+"]"),this._listeners.push(r(k,"keyup",function(c){27===(c.charCode||c.keyCode)&&(b._toggleColumnHiderMenu(c),a.focus())})),k.style.display="none",g(this.domNode,k),this._listeners.push(r(k,".dgrid-hider-menu-check:"+(9>d||c?"click":"change"),function(a){b._updateColumnHiddenState(a.target.id.substr(b.id.length+18),!a.target.checked)})),
this._listeners.push(r(k,"mousedown",function(a){a.stopPropagation()})),l||(l=r.pausable(document,"mousedown",function(a){n&&n._toggleColumnHiderMenu(a)}),l.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()}},destroy:function(){this.inherited(arguments);for(var b in this._columnHiderRules)this._columnHiderRules[b].remove()},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_toggleColumnHiderMenu:function(){var b=this._hiderMenuOpened,c=this.hiderMenuNode,
a=this.domNode,e;c.style.display=b?"none":"";b?c.style.height="":(c.offsetHeight>a.offsetHeight-12&&(c.style.height=a.offsetHeight-12+"px"),(e=this._columnHiderFirstCheckbox)&&e.focus());l[b?"pause":"resume"]();n=b?null:this;this._hiderMenuOpened=!b},_hideColumn:function(b){var c="#"+s.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-",a;this._columnHiderRules[b]||(this._columnHiderRules[b]=s.addCssRule(c+b,"display: none;"),8!==t("ie")||t("quirks")||(a=s.addCssRule(".dgrid-row-table","display: inline-table;"),
window.setTimeout(function(){a.remove()},0)))},_updateColumnHiddenState:function(b,c){c?this._hideColumn(b):(this._columnHiderRules[b]&&this._columnHiderRules[b].remove(),delete this._columnHiderRules[b]);this.columns[b].hidden=c;r.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[b],hidden:c,bubbles:!0});this.resize()},toggleColumnHiddenState:function(b,c){"undefined"===typeof c&&(c=!this._columnHiderRules[b]);this._updateColumnHiddenState(b,c);this._columnHiderCheckboxes[b].checked=
!c}})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/on dojo/query dojo/dnd/Source put-selector/put xstyle/css!../css/extensions/ColumnReorder.css".split(" "),function(p,t,r,s,g,b,n){function l(b,c){var a=c[2],e=b[a?"columnSets":"subRows"][c[1]];return a?e[c[2]]:e}function d(b,c,a){c[2]?b.columnSets[c[1]][c[2]]=a:b.subRows[c[1]]=a}function c(b,c){return c.slice(("dgrid-"+b+"-").length)}var k=/(\d+)(?:-(\d+))?$/;p=t(b,{copyState:function(){return!1},
checkAcceptance:function(b,c){return b==this},_legalMouseDown:function(b){return-1<b.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(b){var g=this.grid,a=k.exec(c(g.id,b[0].getAttribute("dndType"))),e=a[2]?"columnSets":"subRows",m=l(g,a),n=g.columns;this.inherited(arguments);a&&setTimeout(function(){var c=r.map(b[0].parentNode.childNodes,function(a){return n[a.columnId]});d(g,a,c);c={grid:g,subRow:c,column:n[b[0].columnId],bubbles:!0,cancelable:!0,
parentType:"dnd"};c[e]=g[e];s.emit(g.domNode,"dgrid-columnreorder",c)?g.set(e,g[e]):(d(g,a,m),g.renderHeader(),this._sort&&this._sort.length&&this.updateSortArrow(this._sort))},0)}});t=t(null,{columnDndConstructor:p,_initSubRowDnd:function(b,c){var a,e,d,k;e=0;for(d=b.length;e<d;e++)k=b[e],!1!==k.reorderable&&(k=k.headerNode,"TH"!=k.tagName&&(k=k.parentNode),n(k,".dojoDndItem[dndType="+c+"]"),a||(a=k.parentNode));a&&this._columnDndSources.push(new this.columnDndConstructor(a,{horizontal:!0,grid:this}))},
renderHeader:function(){var b="dgrid-"+this.id+"-",c,a;this.inherited(arguments);if(!this.reorderDisabled)if(this._columnDndSources=[],this.columnSets)for(a=0,c=this.columnSets.length;a<c;a++)r.forEach(this.columnSets[a],function(c,d){this._initSubRowDnd(c,b+a+"-"+d)},this);else r.forEach(this.subRows,function(a,c){this._initSubRowDnd(a,b+c)},this)},_destroyColumns:function(){this._columnDndSources&&r.forEach(this._columnDndSources,function(b){b.destroy()});this.inherited(arguments)}});t.ColumnDndSource=
p;return t})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(p,t,r){return p(null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){r.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var p=r.getEnclosingWidget(this.domNode.parentNode);p&&p.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},
destroy:function(){this.inherited(arguments);r.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},resize:function(p){p&&t.setMarginBox(this.domNode,p);this.inherited(arguments)},_set:function(p,g){this[p]=g},watch:function(){},getParent:function(){return r.getEnclosingWidget(this.domNode.parentNode)}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(p,t,r,s){var g={},b={},n={length:0,add:function(l){if(b[l.id])throw Error("Tried to register widget with id=="+
l.id+" but that id is already registered");b[l.id]=l;this.length++},remove:function(l){b[l]&&(delete b[l],this.length--)},byId:function(l){return"string"==typeof l?b[l]:l},byNode:function(l){return b[l.getAttribute("widgetId")]},toArray:function(){var l=[],d;for(d in b)l.push(b[d]);return l},getUniqueId:function(l){var d;do d=l+"_"+(l in g?++g[l]:g[l]=0);while(b[d]);return"dijit"==s._scopeName?d:s._scopeName+"_"+d},findWidgets:function(l,d){function c(f){for(f=f.firstChild;f;f=f.nextSibling)if(1==
f.nodeType){var l=f.getAttribute("widgetId");l?(l=b[l])&&k.push(l):f!==d&&c(f)}}var k=[];c(l);return k},_destroyAll:function(){s._curFocus=null;s._prevFocus=null;s._activeStack=[];p.forEach(n.findWidgets(r.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(l){for(;l;){var d=1==l.nodeType&&l.getAttribute("widgetId");if(d)return b[d];l=l.parentNode}return null},_hash:b};return s.registry=n})},"dijit/main":function(){define(["dojo/_base/kernel"],
function(p){return p.dijit})},"dgrid/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/on dojo/topic dojo/has dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList put-selector/put ../Selection dojo/has!touch?../util/touch dojo/has!touch?./_DnD-touch-autoscroll xstyle/css!dojo/resources/dnd.css".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a){var e=p(d,{grid:null,getObject:function(a){var b=this.grid;return b.store.get(a.id.slice(b.id.length+
5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!=this.grid.bodyNode},onDrop:function(a,b,c){var e=this,d=this._targetAnchor=this.targetAnchor,f=this.grid,k=f.store;!this.before&&d&&(d=d.nextSibling);d=d&&f.row(d);s.when(d&&k.get(d.id),function(d){if(e!=a)e.onDropExternal(a,b,c,d);else e.onDropInternal(b,c,d)})},onDropInternal:function(a,b,c){var e=this.grid.store,d=this,f=this.grid,k=d._targetAnchor,l;k&&(l=this.before?k.previousSibling:k.nextSibling);(b||l!==a[0]&&(c||
f.down(f.row(a[0])).element!=a[0]))&&a.forEach(function(a){s.when(d.getObject(a),function(a){e[b&&e.copy?"copy":"put"](a,{before:c})})})},onDropExternal:function(a,b,c,e){var d=this.grid.store,f=a.grid;b.forEach(function(b,k){s.when(a.getObject(b),function(l){c||(f?s.when(f.store.getIdentity(l),function(c){!k&&a.selectNone();a.delItem(b.id);f.store.remove(c)}):a.deleteSelectedNodes());d[d.copy?"copy":"put"](l,{before:e})})})},onDndStart:function(a,b,e){this.inherited(arguments);a==this&&(this.grid.cancelTouchScroll&&
this.grid.cancelTouchScroll(),c.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(b){l("touch")&&this.isDragging&&1<a.countCurrentTouches(b,this.grid.touchNode)?(n.publish("/dnd/cancel"),c.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(b){l("touch")&&1!==a.countCurrentTouches(b,this.grid.touchNode)||this.inherited(arguments)},checkAcceptance:function(a,b){return a.getObject&&d.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);
var a=new k,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});p=p(q,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:e,postMixInProperties:function(){this.inherited(arguments);this.dndParams=t.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(b){c[b.id]=b.element}function b(a){delete c[a.id]}this.inherited(arguments);this.dndSource=new (this.dndConstructor||e)(this.bodyNode,t.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));
var c=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){r.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){r.forEach(a.rows,b)});g.after(this,"destroy",function(){delete this.dndSource._selectedNodes;c=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"==typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];f(b,".dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},
removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});p.GridSource=e;return p})},"dojox/form/CheckedMultiSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/dom-geometry dojo/dom-class dojo/dom-construct dojo/i18n dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Menu dijit/MenuItem dijit/Tooltip dijit/form/_FormSelectWidget dijit/form/ComboButton dojo/text!dojox/form/resources/_CheckedMultiSelectMenuItem.html dojo/text!dojox/form/resources/_CheckedMultiSelectItem.html dojo/text!dojox/form/resources/CheckedMultiSelect.html dojo/i18n!dojox/form/nls/CheckedMultiSelect dijit/form/CheckBox".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x,z,A,y){var C=p("dojox.form._CheckedMultiSelectItem",[d,c,k],{templateString:z,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled=this.option.disabled=this.option.disabled||!1;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=
this.option.label},_changeBox:function(){this.get("disabled")||this.get("readOnly")||(this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus())},_onClick:function(a){this.get("disabled")||this.get("readOnly")?s.stop(a):this.checkBox._onClick(a)},_updateBox:function(){this.checkBox.set("value",this.option.selected)},_setDisabledAttr:function(a){this.disabled=a||this.option.disabled;this.checkBox.set("disabled",
this.disabled);b.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(a){this.checkBox.set("readOnly",a);this.readOnly=a}}),F=p("dojox.form._CheckedMultiSelectMenu",q,{multiple:!1,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,c=this.domNode=n.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});a.parentNode&&a.parentNode.replaceChild(c,a);b.remove(a,"dijitMenuTable");c.className=a.className+" dojoxCheckedMultiSelectMenu";
a.className="dijitReset dijitMenuTable";a.setAttribute("role","listbox");c.setAttribute("role","presentation");c.appendChild(a)},resize:function(a){a&&(g.setMarginBox(this.domNode,a),"w"in a&&(this.menuTableNode.style.width="100%"))},onClose:function(){this.inherited(arguments);this.menuTableNode&&(this.menuTableNode.style.width="")},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled||a.readOnly)return!1;if(!this.multiple)this.onExecute();
a.onClick(b)}}),D=p("dojox.form._CheckedMultiSelectMenuItem",a,{templateString:x,option:null,parent:null,_iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"});this.disabled=this.option.disabled;this.checked=this.option.selected;this.label=this.option.label;this.readOnly=this.option.readOnly;this.inherited(arguments)},onChange:function(a){},_updateBox:function(){b.toggle(this.domNode,
"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected);this.domNode.setAttribute("aria-checked",this.option.selected);this.inputNode.checked=this.option.selected;this.parent.multiple||b.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(a){this.disabled||this.readOnly||(this.parent.multiple?(this.option.selected=!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected)):this.option.selected||(r.forEach(this.parent.getChildren(),
function(a){a.option.selected=!1}),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected)));this.inherited(arguments)}});return p("dojox.form.CheckedMultiSelect",m,{templateString:A,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],postMixInProperties:function(){this.inherited(arguments);this._nlsResources=l.getLocalization("dojox.form","CheckedMultiSelect",this.lang);"$_unset_$"==this.invalidMessage&&
(this.invalidMessage=this._nlsResources.invalidMessage)},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown&&(b.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),this.dropDownMenu=new F({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,onChange:t.hitch(this,"_updateSelection")}))},startup:function(){this.inherited(arguments);this.dropDown&&
(this.dropDownButton=new v({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode))},_onMouseDown:function(a){s.stop(a)},validator:function(){return this.required?r.some(this.getOptions(),function(a){return a.selected&&null!=a.value&&0!=a.value.toString().length}):!0},validate:function(a){e.hide(this.domNode);(a=this.isValid(a))||this.displayMessage(this.invalidMessage);return a},isValid:function(a){return this.validator()},
getErrorMessage:function(a){return this.invalidMessage},displayMessage:function(a){e.hide(this.domNode);a&&e.show(a,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(a,b){},_addOptionItem:function(a){var b;this.dropDown?(b=new D({option:a,parent:this.dropDownMenu}),this.dropDownMenu.addChild(b)):(b=new C({option:a,parent:this}),this.wrapperDiv.appendChild(b.domNode));this.onAfterAddOptionItem(b,a)},_refreshState:function(){this.validate(this.focused)},onChange:function(a){this._refreshState()},
reset:function(){this.inherited(arguments);e.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);r.forEach(this._getChildren(),function(a){a._updateBox()});n.empty(this.containerNode);var a=this;r.forEach(this.value,function(b){b=n.create("option",{value:b,label:b,selected:"selected"});n.place(b,a.containerNode)});if(this.dropDown&&this.dropDownButton){var b=0,c="";r.forEach(this.options,function(a){a.selected&&(b++,c=a.label)});this.dropDownButton.set("label",
this.multiple?t.replace(this._nlsResources.multiSelectLabelText,{num:b}):c)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():r.map(this.wrapperDiv.childNodes,function(a){return f.byNode(a)})},invertSelection:function(a){this.multiple&&(r.forEach(this.options,function(a){a.selected=!a.selected}),this._updateSelection())},_setDisabledAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDownButton.set("disabled",a);r.forEach(this._getChildren(),function(b){b&&
b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){this.inherited(arguments);"readOnly"in this.attributeMap&&this[this.attributeMap.readOnly].setAttribute("readonly",a);this.readOnly=a;r.forEach(this._getChildren(),function(b){b&&b.set&&b.set("readOnly",a)})},uninitialize:function(){e.hide(this.domNode);r.forEach(this._getChildren(),function(a){a.destroyRecursive()});this.inherited(arguments)}})})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x,z,A,y,C,F){function D(a){return function(b){l[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}q.add("dijit-legacy-requires",!a.isAsync);q.add("dojo-bidi",!1);q("dijit-legacy-requires")&&v(0,function(){p(["dijit/_base/manager"])});var H={};s=b("dijit._WidgetBase",[x,y],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:D("lang"),dir:"",_setDirAttr:D("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",
srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:s.blankGif||p.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},e;for(e in b.attributeMap)c.push(e);for(e in b)/^on/.test(e)&&(a[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,e.length-
9),b.attributeMap&&e in b.attributeMap||c.push(e))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=n.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,e.mixin(this,a));this.postMixInProperties();this.id||(this.id=F.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?
this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=A.body(this.ownerDocument);F.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&d.parentNode&&this.domNode!==d&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);t.forEach(this.constructor._setterAttrs,
function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(t.map(a,function(a){return a+"Rtl"})));d.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,t.forEach(this.getChildren(),function(a){a._started||
a._destroyed||!e.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();t.forEach(this._connects,e.hitch(this,"disconnect"));t.forEach(this._supportingWidgets,b);this.domNode&&t.forEach(F.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);
F.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?l.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){t.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;e.isObject(a)?
f.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,c){c=3<=arguments.length?c:this.attributeMap[a];t.forEach(e.isArray(c)?c:[c],function(c){var f=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":e.isFunction(b)&&(b=e.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?l.set(f,c,b):f.set(c,b);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(b));
break;case "innerHTML":f.innerHTML=b;break;case "class":d.replace(f,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(e.isFunction(d))var f=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!e.isFunction(this.focusNode)?"focusNode":"domNode",m=this[d]&&this[d].tagName,k;if((k=m)&&!(k=
H[m])){k=this[d];var l={},g;for(g in k)l[g.toLowerCase()]=!0;k=H[m]=l}g=k;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:g&&c.l in g&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return f||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",
g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;this._created&&b!==c&&(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var e,d=this["on"+a];d&&(e=d.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&m.emit(this.domNode,
a.toLowerCase(),b);return e},on:function(a,b){var c=this._onMap(a);return c?r.after(this,c,b,!0):this.own(m(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},e;for(e in b.prototype)/^on/.test(e)&&(c[e.replace(/^on/,"").toLowerCase()]=e)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?F.findWidgets(this.containerNode):
[]},getParent:function(){return F.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(g.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(z.subscribe(a,e.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=f.get(this.domNode,"display")},placeAt:function(a,b){var e=!a.tagName&&
F.byId(a);!e||!e.addChild||b&&"number"!==typeof b?(e=e?e.containerNode&&!/after|before|replace/.test(b||"")?e.containerNode:e.domNode:n.byId(a,this.ownerDocument),c.place(this.domNode,e,b),!this._started&&(this.getParent()||{})._started&&this.startup()):e.addChild(this,b);return this},defer:function(a,b){var c=setTimeout(e.hitch(this,function(){c&&(c=null,this._destroyed||e.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});q("dojo-bidi")&&s.extend(C);return s})},
"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(p,t,r,s){return p("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(g){var b=this._attrPairNames;return b[g]?b[g]:b[g]={s:"_"+g+"Setter",g:"_"+g+"Getter"}},postscript:function(g){g&&this.set(g)},_get:function(g,b){return"function"===typeof this[b.g]?this[b.g]():this[g]},get:function(g){return this._get(g,this._getAttrNames(g))},set:function(g,b){if("object"===typeof g){for(var n in g)g.hasOwnProperty(n)&&
"_watchCallbacks"!=n&&this.set(n,g[n]);return this}n=this._getAttrNames(g);var l=this._get(g,n);n=this[n.s];var d;"function"===typeof n?d=n.apply(this,Array.prototype.slice.call(arguments,1)):this[g]=b;if(this._watchCallbacks){var c=this;s(d,function(){c._watchCallbacks(g,l,b)})}return this},_changeAttrValue:function(g,b){var n=this.get(g);this[g]=b;this._watchCallbacks&&this._watchCallbacks(g,n,b);return this},watch:function(g,b){var n=this._watchCallbacks;if(!n)var l=this,n=this._watchCallbacks=
function(b,c,d,a){var e=function(a){if(a){a=a.slice();for(var e=0,g=a.length;e<g;e++)a[e].call(l,b,c,d)}};e(n["_"+b]);a||e(n["*"])};b||"function"!==typeof g?g="_"+g:(b=g,g="*");var d=n[g];"object"!==typeof d&&(d=n[g]=[]);d.push(b);var c={};c.unwatch=c.remove=function(){var c=r.indexOf(d,b);-1<c&&d.splice(c,1)};return c}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(p,t,r){return r("dijit.Destroyable",null,{destroy:function(p){this._destroyed=
!0},own:function(){p.forEach(arguments,function(p){var g="destroyRecursive"in p?"destroyRecursive":"destroy"in p?"destroy":"remove",b=t.before(this,"destroy",function(b){p[g](b)}),n=t.after(p,g,function(){b.remove();n.remove()},!0)},this);return arguments}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(p,t,r,s,g,b,n,l){var d=t("dijit._TemplatedMixin",l,{templateString:null,
templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(b){var d=this.declaredClass,f=this;return n.substitute(b,this,function(b,a){"!"==a.charAt(0)&&(b=s.getObject(a.substr(1),!1,f));if("undefined"==typeof b)throw Error(d+" template:"+a);return null==b?"":"!"==a.charAt(0)?b:b.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=p(this.templatePath,{sanitize:!0}));var b=d.getCachedTemplate(this.templateString,
this._skipNodeCache,this.ownerDocument),k;if(s.isString(b)){if(k=r.toDom(this._stringRepl(b),this.ownerDocument),1!=k.nodeType)throw Error("Invalid template: "+b);}else k=b.cloneNode(!0);this.domNode=k}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(b){var d=this.containerNode;if(b&&d)for(;b.hasChildNodes();)d.appendChild(b.firstChild)}});d._templateCache={};d.getCachedTemplate=function(b,k,f){var l=d._templateCache,a=b,e=l[a];
if(e){try{if(!e.ownerDocument||e.ownerDocument==(f||document))return e}catch(m){}r.destroy(e)}b=n.trim(b);if(k||b.match(/\$\{([^\}]+)\}/g))return l[a]=b;k=r.toDom(b,f);if(1!=k.nodeType)throw Error("Invalid template: "+b);return l[a]=k};b("ie")&&g(window,"unload",function(){var b=d._templateCache,k;for(k in b){var f=b[k];"object"==typeof f&&r.destroy(f);delete b[k]}});return d})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(p){return p.cache})},"dojo/text":function(){define(["./_base/kernel",
"require","./has","./request"],function(p,t,r,s){var g;g=function(b,d,f){s(b,{sync:!!d}).then(f)};var b={},n=function(b){if(b){b=b.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var d=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);d&&(b=d[1])}else b="";return b},l={},d={};p.cache=function(c,d,f){var l;"string"==typeof c?/\//.test(c)?(l=c,f=d):l=t.toUrl(c.replace(/\./g,"/")+(d?"/"+d:"")):(l=c+"",f=d);c=void 0!=f&&"string"!=typeof f?f.value:f;f=f&&f.sanitize;if("string"==typeof c)return b[l]=
c,f?n(c):c;if(null===c)return delete b[l],null;l in b||g(l,!0,function(a){b[l]=a});return f?n(b[l]):b[l]};return{dynamic:!0,normalize:function(b,d){var f=b.split("!"),l=f[0];return(/^\./.test(l)?d(l):l)+(f[1]?"!"+f[1]:"")},load:function(c,k,f){c=c.split("!");var q=1<c.length,a=c[0],e=k.toUrl(c[0]);c="url:"+e;var m=l,v=function(a){f(q?n(a):a)};a in b?m=b[a]:k.cache&&c in k.cache?m=k.cache[c]:e in b&&(m=b[e]);if(m===l)if(d[e])d[e].push(v);else{var p=d[e]=[v];g(e,!k.async,function(c){b[a]=b[e]=c;for(var f=
0;f<p.length;)p[f++](c);delete d[e]})}else v(m)}}})},"dojo/request":function(){define(["./request/default!"],function(p){return p})},"dojo/request/default":function(){define(["exports","require","../has"],function(p,t,r){var s=r("config-requestProvider");s||(s="./xhr");p.getPlatformDefaultId=function(){return"./xhr"};p.load=function(g,b,n,l){t(["platform"==g?"./xhr":s],function(b){n(b)})}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(p,t){var r={};t.setObject("dojo.string",
r);r.rep=function(p,g){if(0>=g||!p)return"";for(var b=[];;){g&1&&b.push(p);if(!(g>>=1))break;p+=p}return b.join("")};r.pad=function(p,g,b,n){b||(b="0");p=String(p);g=r.rep(b,Math.ceil((g-p.length)/b.length));return n?p+g:g+p};r.substitute=function(s,g,b,n){n=n||p.global;b=b?t.hitch(n,b):function(b){return b};return s.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(l,d,c){l=t.getObject(d,!1,g);c&&(l=t.getObject(c,!1,n).call(n,l,d));return b(l,d).toString()})};r.trim=String.prototype.trim?
t.trim:function(p){p=p.replace(/^\s+/,"");for(var g=p.length-1;0<=g;g--)if(/\S/.test(p.charAt(g))){p=p.substring(0,g+1);break}return p};return r})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(p,t,r,s,g,b,n,l,d){var c=g.delegate(l,{mouseenter:b.enter,mouseleave:b.leave,keypress:r._keypress}),k;r=s("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=
[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var c=b;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==b)break;for(;!c.nextSibling;)if(c=c.parentNode,c==b)return;c=c.nextSibling}},_processTemplateNode:function(b,
c,a){var e=!0,d=this.attachScope||this,k=c(b,"dojoAttachPoint")||c(b,"data-dojo-attach-point");if(k)for(var l=k.split(/\s*,\s*/);k=l.shift();)g.isArray(d[k])?d[k].push(b):d[k]=b,e="containerNode"!=k,this._attachPoints.push(k);if(c=c(b,"dojoAttachEvent")||c(b,"data-dojo-attach-event"))for(k=c.split(/\s*,\s*/),l=g.trim;c=k.shift();)if(c){var n=null;-1!=c.indexOf(":")?(n=c.split(":"),c=l(n[0]),n=l(n[1])):c=l(c);n||(n=c);this._attachEvents.push(a(b,c,g.hitch(d,n)))}return e},_attach:function(b,d,a){d=
d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?k||(k=p("./a11yclick")):c[d]||d;return n(b,d,a)},_detachTemplateNodes:function(){var b=this.attachScope||this;t.forEach(this._attachPoints,function(c){delete b[c]});this._attachPoints=[];t.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});g.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return r})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(p,t,r,s,g){return r("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);g.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,
scope:"dojo"}).then(s.hitch(this,function(b){this._startupWidgets=b;for(var l=0;l<b.length;l++)this._processTemplateNode(b[l],function(b,c){return b[c]},function(b,c,k){return c in b?b.connect(b,c,k):b.on(c,k,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(b,g,l){return g(b,"dojoType")||g(b,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){p.forEach(this._startupWidgets,function(b){b&&!b._started&&b.startup&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(p,
t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){function v(a){return eval("("+a+")")}function x(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<A){var b=a._nameCaseMap={},e;for(e in c)"_"!==e.charAt(0)&&(b[e.toLowerCase()]=e);b._extendCnt=A}return b}function z(a,b){var c=a.join();if(!y[c]){for(var e=[],d=0,f=a.length;d<f;d++){var m=a[d];e[e.length]=y[m]=y[m]||r.getObject(m)||~m.indexOf("/")&&(b?b(m):p(m))}d=e.shift();y[c]=e.length?d.createSubclass?d.createSubclass(e):d.extend.apply(d,e):d}return y[c]}new Date("X");
var A=0;d.after(r,"extend",function(){A++},!0);var y={},C={_clearCache:function(){A++;y={}},_functionFromScript:function(a,b){var c="",e="",d=a.getAttribute(b+"args")||a.getAttribute("args"),f=a.getAttribute("with"),d=(d||"").split(/\s*,\s*/);f&&f.length&&s.forEach(f.split(/\s*,\s*/),function(a){c+="with("+a+"){";e+="}"});return new Function(d,c+a.innerHTML+e)},instantiate:function(a,b,c){b=b||{};c=c||{};var e=(c.scope||t._scopeName)+"Type",d="data-"+(c.scope||t._scopeName)+"-",f=d+"type",m=d+"mixins",
k=[];s.forEach(a,function(a){var c=e in b?b[e]:a.getAttribute(f)||a.getAttribute(e);if(c){var d=a.getAttribute(m),c=d?[c].concat(d.split(/\s*,\s*/)):[c];k.push({node:a,types:c})}});return this._instantiate(k,b,c)},_instantiate:function(a,b,e,d){function f(a){b._started||e.noStart||s.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=s.map(a,function(a){var c=a.ctor||z(a.types,e.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+a.types.join()+
"'");return this.construct(c,a.node,b,e,a.scripts,a.inherited)},this);return d?c(a).then(f):f(a)},construct:function(b,c,f,m,g,n){function p(a){aa&&r.setObject(aa,a);for(W=0;W<R.length;W++)d[R[W].advice||"after"](a,R[W].method,r.hitch(a,R[W].func),!0);for(W=0;W<ba.length;W++)ba[W].call(a);for(W=0;W<Z.length;W++)a.watch(Z[W].prop,Z[W].func);for(W=0;W<na.length;W++)e(a,na[W].event,na[W].func);return a}var y=b&&b.prototype;m=m||{};var z={};m.defaults&&r.mixin(z,m.defaults);n&&r.mixin(z,n);var A;q("dom-attributes-explicit")?
A=c.attributes:q("dom-attributes-specified-flag")?A=s.filter(c.attributes,function(a){return a.specified}):(n=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),A=s.map(n.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==c.nodeName&&"value"==a||"enctype"==b?c.getAttribute(b):c.getAttributeNode(b).value}}));var C=m.scope||t._scopeName;n="data-"+C+"-";var Q={};"dojo"!==
C&&(Q[n+"props"]="data-dojo-props",Q[n+"type"]="data-dojo-type",Q[n+"mixins"]="data-dojo-mixins",Q[C+"type"]="dojoType",Q[n+"id"]="data-dojo-id");for(var W=0,P,C=[],aa,ca;P=A[W++];){var Y=P.name,U=Y.toLowerCase();P=P.value;switch(Q[U]||U){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":ca=P;break;case "data-dojo-id":case "jsid":aa=P;break;case "data-dojo-attach-point":case "dojoattachpoint":z.dojoAttachPoint=P;break;case "data-dojo-attach-event":case "dojoattachevent":z.dojoAttachEvent=
P;break;case "class":z["class"]=c.className;break;case "style":z.style=c.style&&c.style.cssText;break;default:if(Y in y||(Y=x(b)[U]||Y),Y in y)switch(typeof y[Y]){case "string":z[Y]=P;break;case "number":z[Y]=P.length?Number(P):NaN;break;case "boolean":z[Y]="false"!=P.toLowerCase();break;case "function":""===P||-1!=P.search(/[^\w\.]+/i)?z[Y]=new Function(P):z[Y]=r.getObject(P,!1)||new Function(P);C.push(Y);break;default:U=y[Y],z[Y]=U&&"length"in U?P?P.split(/\s*,\s*/):[]:U instanceof Date?""==P?new Date(""):
"now"==P?new Date:k.fromISOString(P):U instanceof l?t.baseUrl+P:v(P)}else z[Y]=P}}for(A=0;A<C.length;A++)Q=C[A].toLowerCase(),c.removeAttribute(Q),c[Q]=null;if(ca)try{ca=v.call(m.propsThis,"{"+ca+"}"),r.mixin(z,ca)}catch(V){throw Error(V.toString()+" in data-dojo-props='"+ca+"'");}r.mixin(z,f);g||(g=b&&(b._noScript||y._noScript)?[]:a("> script[type^='dojo/']",c));var R=[],ba=[],Z=[],na=[];if(g)for(W=0;W<g.length;W++)Q=g[W],c.removeChild(Q),f=Q.getAttribute(n+"event")||Q.getAttribute("event"),m=Q.getAttribute(n+
"prop"),ca=Q.getAttribute(n+"method"),C=Q.getAttribute(n+"advice"),A=Q.getAttribute("type"),Q=this._functionFromScript(Q,n),f?"dojo/connect"==A?R.push({method:f,func:Q}):"dojo/on"==A?na.push({event:f,func:Q}):z[f]=Q:"dojo/aspect"==A?R.push({method:ca,advice:C,func:Q}):"dojo/watch"==A?Z.push({prop:m,func:Q}):ba.push(Q);b=(g=b.markupFactory||y.markupFactory)?g(z,c,b):new b(z,c);return b.then?b.then(p):p(b)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,e=c(a.parent),
b={dir:b.getAttribute("dir")||e.dir,lang:b.getAttribute("lang")||e.lang,textDir:b.getAttribute(n)||e.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var e=[],d=[],m={},k=(b.scope||t._scopeName)+"Type",l="data-"+(b.scope||t._scopeName)+"-",g=l+"type",n=l+"textdir",l=l+"mixins",v=a.firstChild,x=b.inherited;if(!x){var r=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&r(a.parentNode,b)},x={dir:r(a,"dir"),lang:r(a,"lang"),textDir:r(a,n)},y;for(y in x)x[y]||delete x[y]}for(var x=
{inherited:x},A,C;;)if(v)if(1!=v.nodeType)v=v.nextSibling;else if(A&&"script"==v.nodeName.toLowerCase())(Y=v.getAttribute("type"))&&/^dojo\/\w/i.test(Y)&&A.push(v),v=v.nextSibling;else if(C)v=v.nextSibling;else{var Y=v.getAttribute(g)||v.getAttribute(k);y=v.firstChild;if(Y||y&&(3!=y.nodeType||y.nextSibling)){C=null;if(Y){var U=v.getAttribute(l);A=U?[Y].concat(U.split(/\s*,\s*/)):[Y];try{C=z(A,b.contextRequire)}catch(V){}C||s.forEach(A,function(a){~a.indexOf("/")&&!m[a]&&(m[a]=!0,d[d.length]=a)});
U=C&&!C.prototype._noScript?[]:null;x={types:A,ctor:C,parent:x,node:v,scripts:U};x.inherited=c(x);e.push(x)}else x={node:v,scripts:A,parent:x};A=U;C=v.stopParser||C&&C.prototype.stopParser&&!b.template;v=y}else v=v.nextSibling}else{if(!x||!x.node)break;v=x.node.nextSibling;C=!1;x=x.parent;A=x.scripts}var R=new f;d.length?(q("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+d.join(", ")),(b.contextRequire||p)(d,function(){R.resolve(s.filter(e,function(a){if(!a.ctor)try{a.ctor=
z(a.types,b.contextRequire)}catch(c){}for(var e=a.parent;e&&!e.types;)e=e.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!e||e.instantiate&&e.instantiateChildren;return a.instantiate}))})):R.resolve(e);return R.promise},_require:function(a,b){var c=v("{"+a.innerHTML+"}"),e=[],d=[],m=new f,k=b&&b.contextRequire||p,l;for(l in c)e.push(l),d.push(c[l]);k(d,function(){for(var a=0;a<e.length;a++)r.setObject(e[a],arguments[a]);m.resolve(arguments)});
return m.promise},_scanAmd:function(b,c){var e=new f,d=e.promise;e.resolve(!0);var m=this;a("script[type='dojo/require']",b).forEach(function(a){d=d.then(function(){return m._require(a,c)});a.parentNode.removeChild(a)});return d},parse:function(a,c){var e;!c&&a&&a.rootNode?(c=a,e=c.rootNode):!a||!r.isObject(a)||"nodeType"in a?e=a:c=a;e=e?b.byId(e):n.body();c=c||{};var d=c.template?{template:!0}:{},f=[],m=this,k=this._scanAmd(e,c).then(function(){return m.scan(e,c)}).then(function(a){return m._instantiate(a,
d,c,!0)}).then(function(a){return f=f.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});r.mixin(f,k);return f}};t.parser=C;g.parseOnLoad&&m(100,C,"parse");return C})},"dojo/_base/url":function(){define(["./kernel"],function(p){var t=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,r=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,s=function(){for(var g=arguments,b=[g[0]],n=1;n<g.length;n++)if(g[n]){var l=new s(g[n]+""),b=new s(b[0]+
"");if(""==l.path&&!l.scheme&&!l.authority&&!l.query)null!=l.fragment&&(b.fragment=l.fragment),l=b;else if(!l.scheme&&(l.scheme=b.scheme,!l.authority&&(l.authority=b.authority,"/"!=l.path.charAt(0)))){for(var b=(b.path.substring(0,b.path.lastIndexOf("/")+1)+l.path).split("/"),d=0;d<b.length;d++)"."==b[d]?d==b.length-1?b[d]="":(b.splice(d,1),d--):0<d&&(1!=d||""!=b[0])&&".."==b[d]&&".."!=b[d-1]&&(d==b.length-1?(b.splice(d,1),b[d-1]=""):(b.splice(d-1,2),d-=2));l.path=b.join("/")}b=[];l.scheme&&b.push(l.scheme,
":");l.authority&&b.push("//",l.authority);b.push(l.path);l.query&&b.push("?",l.query);l.fragment&&b.push("#",l.fragment)}this.uri=b.join("");g=this.uri.match(t);this.scheme=g[2]||(g[1]?"":null);this.authority=g[4]||(g[3]?"":null);this.path=g[5];this.query=g[7]||(g[6]?"":null);this.fragment=g[9]||(g[8]?"":null);null!=this.authority&&(g=this.authority.match(r),this.user=g[3]||null,this.password=g[4]||null,this.host=g[6]||g[7],this.port=g[9]||null)};s.prototype.toString=function(){return this.uri};
return p._Url=s})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(p,t,r){var s=p.some;return function(g){var b,n;g instanceof Array?n=g:g&&"object"===typeof g&&(b=g);var l,d=[];if(b){n=[];for(var c in b)Object.hasOwnProperty.call(b,c)&&(d.push(c),n.push(b[c]));l={}}else n&&(l=[]);if(!n||!n.length)return(new t).resolve(l);var k=new t;k.promise.always(function(){l=d=null});var f=n.length;s(n,function(c,a){b||d.push(a);r(c,function(b){k.isFulfilled()||(l[d[a]]=
b,0===--f&&k.resolve(l))},k.reject);return k.isFulfilled()});return k.promise}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(p,t){var r={};p.setObject("dojo.date.stamp",r);r.fromISOString=function(p,g){r._isoRegExp||(r._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=r._isoRegExp.exec(p),n=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);g&&(g=new Date(g),t.forEach(t.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(b){return g["get"+b]()}),function(c,d){b[d]=b[d]||c}));n=new Date(b[0]||1970,b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&n.setFullYear(b[0]||1970);var l=0,d=b[7]&&b[7].charAt(0);"Z"!=d&&(l=60*(b[8]||0)+(Number(b[9])||0),"-"!=d&&(l*=-1));d&&(l-=n.getTimezoneOffset());l&&n.setTime(n.getTime()+6E4*l)}return n};r.toISOString=function(p,g){var b=function(b){return 10>b?"0"+b:b};g=g||{};var n=[],l=g.zulu?"getUTC":"get",d="";"time"!=g.selector&&(d=p[l+"FullYear"](),d=["0000".substr((d+
"").length)+d,b(p[l+"Month"]()+1),b(p[l+"Date"]())].join("-"));n.push(d);if("date"!=g.selector){d=[b(p[l+"Hours"]()),b(p[l+"Minutes"]()),b(p[l+"Seconds"]())].join(":");l=p[l+"Milliseconds"]();g.milliseconds&&(d+="."+(100>l?"0":"")+b(l));if(g.zulu)d+="Z";else if("time"!=g.selector)var l=p.getTimezoneOffset(),c=Math.abs(l),d=d+((0<l?"-":"+")+b(Math.floor(c/60))+":"+b(c%60));n.push(d)}return n.join("T")};return r})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){k("dijit-legacy-requires")&&m(0,function(){p(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return r("dijit.Menu",e,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):t.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return q.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=s.byId(a,this.ownerDocument);var b;if("iframe"==a.tagName.toLowerCase()){var e=a;b=this._iframeContentWindow(e);b=f.body(b.document)}else b=a==f.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var m={node:a,
iframe:e};g.set(a,"_dijitMenu"+this.id,this._bindings.push(m));var k=d.hitch(this,function(a){var b=this.selector,d=b?function(a){return c.selector(b,a)}:function(a){return a},f=this;return[c(a,d(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();f._scheduleOpen(this,e,{x:a.pageX,y:a.pageY})}),c(a,d("keydown"),function(a){a.shiftKey&&a.keyCode==l.F10&&(a.stopPropagation(),a.preventDefault(),f._scheduleOpen(this,e))})]});m.connects=b?k(b):[];e&&(m.onloadHandler=
d.hitch(this,function(){var a=this._iframeContentWindow(e),a=f.body(a.document);m.connects=k(a)}),e.addEventListener?e.addEventListener("load",m.onloadHandler,!1):e.attachEvent("onload",m.onloadHandler))},unBindDomNode:function(a){var b;try{b=s.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&g.has(b,a)){for(var e=g.get(b,a)-1,d=this._bindings[e],f;f=d.connects.pop();)f.remove();(f=d.iframe)&&(f.removeEventListener?f.removeEventListener("load",d.onloadHandler,!1):f.detachEvent("onload",
d.onloadHandler));g.remove(b,a);delete this._bindings[e]}},_scheduleOpen:function(a,b,c){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:c})},1))},_openMyself:function(c){function e(){r.refocus&&t&&t.focus();a.close(r)}var d=c.target,f=c.iframe;c=c.coords;var m=!c;this.currentTarget=d;if(c){if(f){var d=b.position(f,!0),l=this._iframeContentWindow(f),l=b.docScroll(l.document),g=n.getComputedStyle(f),q=n.toPixelValue,p=(k("ie")&&
k("quirks")?0:q(f,g.paddingLeft))+(k("ie")&&k("quirks")?q(f,g.borderLeftWidth):0),f=(k("ie")&&k("quirks")?0:q(f,g.paddingTop))+(k("ie")&&k("quirks")?q(f,g.borderTopWidth):0);c.x+=d.x+p-l.x;c.y+=d.y+f-l.y}}else c=b.position(d,!0),c.x+=10,c.y+=10;var r=this,f=this._focusManager.get("prevNode"),d=this._focusManager.get("curNode"),t=!d||s.isDescendant(d,this.domNode)?f:d;a.open({popup:this,x:c.x,y:c.y,onExecute:e,onCancel:e,orient:this.isLeftToRight()?"L":"R"});this.focus();m||this.defer(function(){this._cleanUp(!0)});
this._onBlur=function(){this.inherited("_onBlur",arguments);a.close(this)}},destroy:function(){t.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){function v(){this._popupWrapper&&
(b.destroy(this._popupWrapper),delete this._popupWrapper)}r=r(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=n.position(this._firstAroundNode,!0),c=b.x-a.x,a=b.y-a.y;if(c||a)for(this._firstAroundPosition=b,b=0;b<this._stack.length;b++){var e=this._stack[b].wrapper.style;e.top=parseInt(e.top,10)+a+"px";"auto"==e.right?e.left=parseInt(e.left,10)+c+"px":e.right=parseInt(e.right,10)-c+"px"}this._aroundMoveListener=setTimeout(k.hitch(this,
"_repositionAll"),c||a?10:50)}},_createWrapper:function(a){var c=a._popupWrapper,e=a.domNode;c||(c=b.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),c.appendChild(e),e=e.style,e.display="",e.visibility="",e.position="",e.top="0px",a._popupWrapper=c,t.after(a,"destroy",v,!0));return c},moveOffScreen:function(a){var b=this._createWrapper(a);a=n.isBodyLtr(a.ownerDocument);var c={visibility:"hidden",top:"-9999px",
display:""};c[a?"left":"right"]="-9999px";c[a?"right":"left"]="auto";l.set(b,c);return b},hide:function(a){var b=this._createWrapper(a);l.set(b,{display:"none",height:"auto",overflow:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var m=this._stack,v=b.popup,p=v.domNode,r=b.orient||["below","below-alt","above","above-alt"],t=
b.parent?b.parent.isLeftToRight():n.isBodyLtr(v.ownerDocument),D=b.around,H=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;m.length&&(!b.parent||!s.isDescendant(b.parent.domNode,m[m.length-1].widget.domNode));)this.close(m[m.length-1].widget);var N=this.moveOffScreen(v);v.startup&&!v._started&&v.startup();var J,M=n.position(p);if("maxHeight"in b&&-1!=b.maxHeight)J=b.maxHeight||Infinity;else{J=e.getEffectiveBox(this.ownerDocument);var E=D?n.position(D,!1):{y:b.y-(b.padding||0),
h:2*(b.padding||0)};J=Math.floor(Math.max(E.y,J.h-(E.y+E.h)))}M.h>J&&(M=l.getComputedStyle(p),l.set(N,{overflowY:"scroll",height:J+"px",border:M.borderLeftWidth+" "+M.borderLeftStyle+" "+M.borderLeftColor}),p._originalStyle=p.style.cssText,p.style.border="none");g.set(N,{id:H,style:{zIndex:this._beginZIndex+m.length},"class":"dijitPopup "+(v.baseClass||v["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});0==m.length&&D&&(this._firstAroundNode=D,this._firstAroundPosition=
n.position(D,!0),this._aroundMoveListener=setTimeout(k.hitch(this,"_repositionAll"),50));d("config-bgIframe")&&!v.bgIframe&&(v.bgIframe=new a(N));H=v.orient?k.hitch(v,"orient"):null;r=D?q.around(N,D,r,t,H):q.at(N,b,"R"==r?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding,H);N.style.visibility="visible";p.style.visibility="visible";p=[];p.push(f(N,"keydown",k.hitch(this,function(a){if(a.keyCode==c.ESCAPE&&b.onCancel)a.stopPropagation(),a.preventDefault(),b.onCancel();else if(a.keyCode==c.TAB&&
(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));v.onCancel&&b.onCancel&&p.push(v.on("cancel",b.onCancel));p.push(v.on(v.onExecute?"execute":"change",k.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));m.push({widget:v,wrapper:N,parent:b.parent,onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:p});if(v.onOpen)v.onOpen(r);return r},close:function(a){for(var b=this._stack;a&&p.some(b,function(b){return b.widget==
a})||!a&&b.length;){var c=b.pop(),e=c.widget,d=c.onClose;if(e.onClose)e.onClose();for(var f;f=c.handlers.pop();)f.remove();e&&e.domNode&&this.hide(e);d&&d()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return m.popup=new r})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(p,
t,r,s,g,b,n){function l(c,d,f,l){var a=b.getEffectiveBox(c.ownerDocument);c.parentNode&&"body"==String(c.parentNode.tagName).toLowerCase()||g.body(c.ownerDocument).appendChild(c);var e=null;p.some(d,function(b){var d=b.corner,m=b.pos,k=0,g={w:{L:a.l+a.w-m.x,R:m.x-a.l,M:a.w}[d.charAt(1)],h:{T:a.t+a.h-m.y,B:m.y-a.t,M:a.h}[d.charAt(0)]},n=c.style;n.left=n.right="auto";f&&(k=f(c,b.aroundCorner,d,g,l),k="undefined"==typeof k?0:k);var v=c.style,p=v.display,x=v.visibility;"none"==v.display&&(v.visibility=
"hidden",v.display="");n=t.position(c);v.display=p;v.visibility=x;p={L:m.x,R:m.x-n.w,M:Math.max(a.l,Math.min(a.l+a.w,m.x+(n.w>>1))-n.w)}[d.charAt(1)];x={T:m.y,B:m.y-n.h,M:Math.max(a.t,Math.min(a.t+a.h,m.y+(n.h>>1))-n.h)}[d.charAt(0)];m=Math.max(a.l,p);v=Math.max(a.t,x);p=Math.min(a.l+a.w,p+n.w);x=Math.min(a.t+a.h,x+n.h);p-=m;x-=v;k+=n.w-p+(n.h-x);if(null==e||k<e.overflow)e={corner:d,aroundCorner:b.aroundCorner,x:m,y:v,w:p,h:x,overflow:k,spaceAvailable:g};return!k});e.overflow&&f&&f(c,e.aroundCorner,
e.corner,e.spaceAvailable,l);d=t.isBodyLtr(c.ownerDocument);var m=e.y,n=d?e.x:a.w-e.x-e.w;/relative|absolute/.test(r.get(g.body(c.ownerDocument),"position"))&&(m-=r.get(g.body(c.ownerDocument),"marginTop"),n-=(d?1:-1)*r.get(g.body(c.ownerDocument),d?"marginLeft":"marginRight"));var x=c.style;x.top=m+"px";x[d?"left":"right"]=n+"px";x[d?"right":"left"]="auto";return e}var d={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return n.place={at:function(b,k,f,g,a){f=p.map(f,function(a){var b={corner:a,aroundCorner:d[a],
pos:{x:k.x,y:k.y}};g&&(b.pos.x+="L"==a.charAt(1)?g.x:-g.x,b.pos.y+="T"==a.charAt(0)?g.y:-g.y);return b});return l(b,f,a)},around:function(b,d,f,g,a){function e(a,b){N.push({aroundCorner:a,corner:b,pos:{x:{L:C,R:C+D,M:C+(D>>1)}[a.charAt(1)],y:{T:F,B:F+H,M:F+(H>>1)}[a.charAt(0)]}})}var m;if("string"==typeof d||"offsetWidth"in d){if(m=t.position(d,!0),/^(above|below)/.test(f[0])){var n=t.getBorderExtents(d),x=d.firstChild?t.getBorderExtents(d.firstChild):{t:0,l:0,b:0,r:0},z=t.getBorderExtents(b),A=b.firstChild?
t.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0};m.y+=Math.min(n.t+x.t,z.t+A.t);m.h-=Math.min(n.t+x.t,z.t+A.t)+Math.min(n.b+x.b,z.b+A.b)}}else m=d;if(d.parentNode)for(n="absolute"==r.getComputedStyle(d).position,d=d.parentNode;d&&1==d.nodeType&&"BODY"!=d.nodeName;){x=t.position(d,!0);z=r.getComputedStyle(d);/relative|absolute/.test(z.position)&&(n=!1);if(!n&&/hidden|auto|scroll/.test(z.overflow)){var A=Math.min(m.y+m.h,x.y+x.h),y=Math.min(m.x+m.w,x.x+x.w);m.x=Math.max(m.x,x.x);m.y=Math.max(m.y,
x.y);m.h=A-m.y;m.w=y-m.x}"absolute"==z.position&&(n=!0);d=d.parentNode}var C=m.x,F=m.y,D="w"in m?m.w:m.w=m.width,H="h"in m?m.h:(s.deprecated("place.around: dijit/place.__Rectangle: { x:"+C+", y:"+F+", height:"+m.height+", width:"+D+" } has been deprecated.  Please use { x:"+C+", y:"+F+", h:"+m.height+", w:"+D+" }","","2.0"),m.h=m.height),N=[];p.forEach(f,function(a){var b=g;switch(a){case "above-centered":e("TM","BM");break;case "below-centered":e("BM","TM");break;case "after-centered":b=!b;case "before-centered":e(b?
"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":e(b?"TL":"TR",b?"TR":"TL");e(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":e(b?"BL":"BR",b?"TL":"TR");e(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":e(b?"TL":"TR",b?"BL":"BR");e(b?"TR":"TL",b?"BR":"BL");break;default:e(a.aroundCorner,a.corner)}});b=l(b,N,a,{w:D,h:H});b.aroundNodePos=m;return b}}})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],
function(p,t,r,s,g){var b=new p,n;r(function(){var l=g.getBox();b._rlh=t(window,"resize",function(){var c=g.getBox();if(l.h!=c.h||l.w!=c.w)l=c,b.emit("resize")});if(8==s("ie")){var d=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=d&&(d=screen.deviceXDPI,b.emit("resize"))},500)}s("ios")&&(t(document,"focusin",function(b){n=b.target}),t(document,"focusout",function(b){n=null}))});b.getEffectiveBox=function(b){b=g.getBox(b);var d=n&&n.tagName&&n.tagName.toLowerCase();s("ios")&&n&&!n.readOnly&&
("textarea"==d||"input"==d&&/^(color|email|number|password|search|tel|text|url)$/.test(n.type))&&(b.h*=0==orientation||180==orientation?0.66:0.4,d=n.getBoundingClientRect(),b.h=Math.max(b.h,d.top+d.height));return b};return b})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(p,t,r,s,g,b,n,l){l.add("config-bgIframe",!l("touch"));var d=new function(){var b=[];this.pop=function(){var d;
b.length?(d=b.pop(),d.style.display=""):(9>l("ie")?(d="<iframe src='"+(r.dojoBlankHtmlUrl||p.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",d=document.createElement(d)):(d=s.create("iframe"),d.src='javascript:""',d.className="dijitBackgroundIframe",d.setAttribute("role","presentation"),g.set(d,"opacity",0.1)),d.tabIndex=-1);return d};this.push=function(d){d.style.display="none";
b.push(d)}};t.BackgroundIframe=function(c){if(!c.id)throw Error("no id");if(l("config-bgIframe")){var k=this.iframe=d.pop();c.appendChild(k);7>l("ie")||l("quirks")?(this.resize(c),this._conn=n(c,"resize",b.hitch(this,"resize",c))):g.set(k,{width:"100%",height:"100%"})}};b.extend(t.BackgroundIframe,{resize:function(b){this.iframe&&g.set(this.iframe,{width:b.offsetWidth+"px",height:b.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(d.push(this.iframe),
delete this.iframe)}});return t.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(p,t,r,s,g){return p("dijit.DropDownMenu",[g,s],{templateString:r,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(b){this._moveToPopup(b);b.stopPropagation();b.preventDefault()},_onLeftArrow:function(){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();
else this.onCancel(!1);else evt.stopPropagation(),evt.preventDefault()}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(p,t,r,s,g,b){p=s("dijit._OnDijitClickMixin",null,{connect:function(g,l,d){return this.inherited(arguments,[g,"ondijitclick"==l?b:l,d])}});p.a11yclick=b;return p})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(p,t,r,s){function g(b){if((b.keyCode===
p.ENTER||b.keyCode===p.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(b=b.target;b;b=b.parentNode)if(b.dojoClick)return!0}var b;r(document,"keydown",function(l){g(l)?(b=l.target,l.preventDefault()):b=null});r(document,"keyup",function(l){g(l)&&l.target==b&&(b=null,r.emit(l.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:l.ctrlKey,shiftKey:l.shiftKey,metaKey:l.metaKey,altKey:l.altKey,_origType:l.type}))});var n=function(b,d){b.dojoClick=!0;return r(b,"click",d)};n.click=n;n.press=function(b,
d){var c=r(b,s.press,function(b){("mousedown"!=b.type||t.isLeft(b))&&d(b)}),k=r(b,"keydown",function(b){b.keyCode!==p.ENTER&&b.keyCode!==p.SPACE||d(b)});return{remove:function(){c.remove();k.remove()}}};n.release=function(b,d){var c=r(b,s.release,function(b){("mouseup"!=b.type||t.isLeft(b))&&d(b)}),k=r(b,"keyup",function(b){b.keyCode!==p.ENTER&&b.keyCode!==p.SPACE||d(b)});return{remove:function(){c.remove();k.remove()}}};n.move=s.move;return n})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e){return t("dijit._MenuBase",[f,e,a,q],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){g.toggle(this.domNode,"dijitMenuActive",a);g.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var b=k.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var a=this,e="string"==typeof this.childSelector?this.childSelector:b.hitch(this,"childSelector");this.own(l(this.containerNode,l.selector(e,n.enter),function(){a.onItemHover(k.byNode(this))}),l(this.containerNode,l.selector(e,n.leave),function(){a.onItemUnhover(k.byNode(this))}),l(this.containerNode,l.selector(e,c),function(b){a.onItemClick(k.byNode(this),b);b.stopPropagation();
b.preventDefault()}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,e){this.inherited(arguments);if(a&&(-1==e||a.popup&&1==e))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&
a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));
this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&
(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var c=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,
c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,c){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var e=a.popup;e.parentMenu=this;this.own(this._mouseoverHandle=l.once(e.domNode,"mouseover",b.hitch(this,"_onPopupHover")));var d=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){c&&d.focusChild(a);d._cleanUp()},onExecute:b.hitch(this,
"_cleanUp",!0),onClose:function(){d._mouseoverHandle&&(d._mouseoverHandle.remove(),delete d._mouseoverHandle)}},c);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(s.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),
this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q){function a(){}function e(b){return function(c,e,d,f){return c&&"string"==typeof e&&c[e]==a?c.on(e.substring(2).toLowerCase(),n.hitch(d,f)):b.apply(r,arguments)}}p.around(r,"connect",e);b.connect&&p.around(b,"connect",e);p=s("dijit._Widget",[k,f,q],{onClick:a,onDblClick:a,onKeyDown:a,onKeyPress:a,onKeyUp:a,onMouseDown:a,onMouseMove:a,onMouseOut:a,onMouseOver:a,onMouseLeave:a,onMouseEnter:a,onMouseUp:a,constructor:function(b){this._toConnect={};for(var c in b)this[c]===
a&&(this._toConnect[c.replace(/^on/,"").toLowerCase()]=b[c],delete b[c])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(b,c){return this[this._onMap(b)]===a?r.connect(this.domNode,b.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,c)},attr:function(a,c){if(t.isDebug){var e=arguments.callee._ach||(arguments.callee._ach={}),d=(arguments.callee.caller||"unknown caller").toString();e[d]||(b.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+d,"","2.0"),e[d]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.",
"","2.0");return this.containerNode?l("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});g("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});return p})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(p,t,r,s){s.extend(t,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});
return r("dijit._FocusMixin",null,{_focusManager:p})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){var v,x=new (t([k,b],{curNode:null,activeStack:[],constructor:function(){var a=n.hitch(this,function(a){r.isDescendant(this.curNode,a)&&this.set("curNode",
null);r.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});p.before(g,"empty",a);p.before(g,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(b,c){var e=this,d=b.document&&b.document.body;if(d){var f=l(b.document,"mousedown, touchstart",function(a){e._justMouseDowned=!0;setTimeout(function(){e._justMouseDowned=!1},0);a&&a.target&&null==a.target.parentNode||e._onTouchNode(c||a.target,"mouse")}),m=l(d,"focusin",function(b){v=(new Date).getTime();
if(b.target.tagName){var d=b.target.tagName.toLowerCase();"#document"!=d&&"body"!=d&&(a.isTabNavigable(b.target)?e._onFocusNode(c||b.target):e._onTouchNode(c||b.target))}}),k=l(d,"focusout",function(a){(new Date).getTime()<v+100||e._onBlurNode(c||a.target)});return{remove:function(){f.remove();m.remove();k.remove();d=f=m=k=null}}}},_onBlurNode:function(a){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(n.hitch(this,function(){this.set("prevNode",this.curNode);
this.set("curNode",null)}),0);this._justMouseDowned||(this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(n.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0))},_onTouchNode:function(a,b){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var c=[];try{for(;a;){var d=s.get(a,"dijitPopupParent");if(d)a=e.byId(d).domNode;else if(a.tagName&&"body"==
a.tagName.toLowerCase()){if(a===f.body())break;a=q.get(a.ownerDocument).frameElement}else{var m=a.getAttribute&&a.getAttribute("widgetId"),k=m&&e.byId(m);!k||"mouse"==b&&k.get("disabled")||c.unshift(m);a=a.parentNode}}}catch(l){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,
b){var c=this.activeStack,d=c.length-1,f=a.length-1;if(a[f]!=c[d]){this.set("activeStack",a);var m;for(m=d;0<=m&&c[m]!=a[m];m--)if(d=e.byId(c[m]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),this.emit("widget-blur",d,b);for(m++;m<=f;m++)if(d=e.byId(a[m]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));d(function(){var a=x.registerWin(q.get(document));c("ie")&&l(window,"unload",
function(){a&&(a.remove(),a=null)})});m.focus=function(a){x.focus(a)};for(var z in x)/^_/.test(z)||(m.focus[z]="function"==typeof x[z]?n.hitch(x,z):x[z]);x.watch(function(a,b,c){m.focus[a]=c});return x})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(p,t,r,s,g,b,n){var l={_isElementShown:function(b){var c=s.get(b);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=r.get(b,
"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return r.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var c;try{var k=b.contentDocument;if("designMode"in k&&"on"==k.designMode)return!0;c=k.body}catch(f){try{c=b.contentWindow.document.body}catch(l){return!1}}return c&&("true"==c.contentEditable||c.firstChild&&"true"==c.firstChild.contentEditable);default:return"true"==b.contentEditable}},isTabNavigable:function(b){return r.get(b,
"disabled")?!1:r.has(b,"tabIndex")?0<=r.get(b,"tabIndex"):l.hasDefaultTabStop(b)},_getTabNavigable:function(d){function c(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function k(a){return p[c(a)]||a}var f,g,a,e,m,n,p={},s=l._isElementShown,t=l.isTabNavigable,y=function(d){for(d=d.firstChild;d;d=d.nextSibling)if(1==d.nodeType&&!(9>=b("ie")&&"HTML"!==d.scopeName)&&s(d)){if(t(d)){var k=+r.get(d,"tabIndex");if(!r.has(d,"tabIndex")||
0==k)f||(f=d),g=d;else if(0<k){if(!a||k<e)e=k,a=d;if(!m||k>=n)n=k,m=d}k=c(d);r.get(d,"checked")&&k&&(p[k]=d)}"SELECT"!=d.nodeName.toUpperCase()&&y(d)}};s(d)&&y(d);return{first:k(f),last:k(g),lowest:k(a),highest:k(m)}},getFirstInTabbingOrder:function(b,c){var k=l._getTabNavigable(t.byId(b,c));return k.lowest?k.lowest:k.first},getLastInTabbingOrder:function(b,c){var k=l._getTabNavigable(t.byId(b,c));return k.last?k.last:k.highest}};g.mixin(n,l);return l})},"dojo/uacss":function(){define(["./dom-geometry",
"./_base/lang","./domReady","./sniff","./_base/window"],function(p,t,r,s,g){var b=g.doc.documentElement;g=s("ie");var n=s("opera"),l=Math.floor,d=s("ff"),c=p.boxModel.replace(/-/,""),n={dj_quirks:s("quirks"),dj_opera:n,dj_khtml:s("khtml"),dj_webkit:s("webkit"),dj_safari:s("safari"),dj_chrome:s("chrome"),dj_gecko:s("mozilla"),dj_ios:s("ios"),dj_android:s("android")};g&&(n.dj_ie=!0,n["dj_ie"+l(g)]=!0,n.dj_iequirks=s("quirks"));d&&(n["dj_ff"+l(d)]=!0);n["dj_"+c]=!0;var k="",f;for(f in n)n[f]&&(k+=f+
" ");b.className=t.trim(b.className+" "+k);r(function(){if(!p.isBodyLtr()){var c="dj_rtl dijitRtl "+k.replace(/ /g,"-rtl ");b.className=t.trim(b.className+" "+c+"dj_rtl dijitRtl "+k.replace(/ /g,"-rtl "))}});return s})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(p,t,r,s){r(function(){t("highcontrast")&&p.add(s.body(),"dijit_a11y")});return t})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f){t=t("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);p.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,b.hitch(this,"_setStateClass"))},this);for(var c in this.cssStateNodes||{})this._trackMouseState(this[c],this.cssStateNodes[c]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(b){if(!this.disabled)switch(b.type){case "mouseover":case "MSPointerOver":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(c){a=a.concat(p.map(a,function(a){return a+c}),"dijit"+c)}var a=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var c="mixed"==this.checked?"Mixed":
this.checked?"Checked":"";this.checked&&b(c);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var c=this.stateNode||this.domNode,d={};p.forEach(c.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&p.forEach(this._stateClasses,function(a){delete d[a]});p.forEach(a,function(a){d[a]=!0});var f=[],k;for(k in d)f.push(k);c.className=
f.join(" ");this._stateClasses=a},_subnodeCssMouseEvent:function(b,a,c){function d(c){s.toggle(b,a+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":s.toggle(b,a+"Hover",!0);break;case "mouseout":case "MSPointerOut":s.toggle(b,a+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":s.toggle(b,
a+"Focused",!0);break;case "blur":case "focusout":s.toggle(b,a+"Focused",!1)}},_trackMouseState:function(b,a){b._cssState=a}});l(function(){function b(a,c,e){if(!e||!r.isDescendant(e,c))for(;c&&c!=e;c=c.parentNode)if(c._cssState){var d=f.getEnclosingWidget(c);d&&(c==d.domNode?d._cssMouseEvent(a):d._subnodeCssMouseEvent(c,c._cssState,a))}}var a=c.body(),e;n(a,d.over,function(a){b(a,a.target,a.relatedTarget)});n(a,d.out,function(a){b(a,a.target,a.relatedTarget)});n(a,k.press,function(a){e=a.target;
b(a,e)});n(a,k.release,function(a){b(a,e);e=null});n(a,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=f.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return t})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(p,t,r,s,g,b,n,l,d,c){return t("dijit._KeyNavContainer",
[d,c,l],{connectKeyNavHandlers:function(c,d){var l=this._keyNavCodes={},a=b.hitch(this,"focusPrev"),e=b.hitch(this,"focusNext");p.forEach(c,function(b){l[b]=a});p.forEach(d,function(a){l[a]=e});l[g.HOME]=b.hitch(this,"focusFirstChild");l[g.END]=b.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){s.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);p.forEach(this.getChildren(),b.hitch(this,"_startupChild"))},addChild:function(b,
c){this.inherited(arguments);this._startupChild(b)},_startupChild:function(b){b.set("tabIndex","-1")},_getFirst:function(){var b=this.getChildren();return b.length?b[0]:null},_getLast:function(){var b=this.getChildren();return b.length?b[b.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=n.byNode(b))&&b.getParent()==this}})})},
"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(p,t,r,s){return t("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(g,b){var n=this.containerNode;if(0<b){for(n=n.firstChild;0<b;)1==n.nodeType&&b--,n=n.nextSibling;n?b="before":(n=this.containerNode,b="last")}r.place(g.domNode,n,b);this._started&&!g._started&&g.startup()},
removeChild:function(g){"number"==typeof g&&(g=this.getChildren()[g]);g&&(g=g.domNode)&&g.parentNode&&g.parentNode.removeChild(g)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(g,b){s.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var n=this.getChildren(),l=p.indexOf(n,g);return n[l+b]},getIndexOfChild:function(g){return p.indexOf(this.getChildren(),g)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(p,t,r,s,g,b,n,l){return t("dijit._KeyNavMixin",l,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);r.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var d=this._keyNavCodes={};d[s.HOME]=g.hitch(this,"focusFirstChild");d[s.END]=g.hitch(this,"focusLastChild");d[this.isLeftToRight()?s.LEFT_ARROW:s.RIGHT_ARROW]=g.hitch(this,"_onLeftArrow");d[this.isLeftToRight()?s.RIGHT_ARROW:s.LEFT_ARROW]=g.hitch(this,"_onRightArrow");d[s.UP_ARROW]=g.hitch(this,
"_onUpArrow");d[s.DOWN_ARROW]=g.hitch(this,"_onDownArrow")}var c=this,d="string"==typeof this.childSelector?this.childSelector:g.hitch(this,"childSelector");this.own(b(this.domNode,"keypress",g.hitch(this,"_onContainerKeypress")),b(this.domNode,"keydown",g.hitch(this,"_onContainerKeydown")),b(this.domNode,"focus",g.hitch(this,"_onContainerFocus")),b(this.containerNode,b.selector(d,"focusin"),function(b){c._onChildFocus(n.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(b,c){b&&(this.focusedChild&&b!==this.focusedChild&&this._onChildBlur(this.focusedChild),
b.set("tabIndex",this.tabIndex),b.focus(c?"end":"start"))},_onContainerFocus:function(b){b.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){r.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(b){r.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(b){b&&b!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),b.set("tabIndex",this.tabIndex),this.lastFocused=b,this._set("focusedChild",b))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(b,c,k,f){b&&this.focusChild(b)},_keyboardSearchCompare:function(b,c){var k=b.domNode,k=(b.label||(k.focusNode?k.focusNode.label:"")||k.innerText||k.textContent||"").replace(/^\s+/,"").substr(0,c.length).toLowerCase();return c.length&&k==c?-1:0},_onContainerKeydown:function(b){var c=
this._keyNavCodes[b.keyCode];c?(c(b,this.focusedChild),b.stopPropagation(),b.preventDefault(),this._searchString=""):b.keyCode!=s.SPACE||!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey||(b.stopImmediatePropagation(),b.preventDefault(),this._keyboardSearch(b," "))},_onContainerKeypress:function(b){b.charCode<s.SPACE||b.ctrlKey||b.altKey||b.metaKey||b.charCode==s.SPACE&&this._searchTimer||(b.preventDefault(),b.stopPropagation(),this._keyboardSearch(b,String.fromCharCode(b.charCode).toLowerCase()))},
_keyboardSearch:function(b,c){var k=null,f,l=0;g.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=c;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;f=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var b=this.focusedChild||null;if(1==a||!b)if(b=this._getNextFocusableChild(b,1),!b)return;a=b;do{var d=this._keyboardSearchCompare(b,f);d&&0==l++&&
(k=b);if(-1==d){l=-1;break}b=this._getNextFocusableChild(b,1)}while(b!=a)})();this.onKeyboardSearch(k,b,f,l)},_onChildBlur:function(){},_getNextFocusableChild:function(b,c){var k=b;do{if(b)b=this._getNext(b,c);else if(b=this[0<c?"_getFirst":"_getLast"](),!b)break;if(null!=b&&b!=k&&b.isFocusable())return b}while(b!=k);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(b,c){if(b)for(b=b.domNode;b;)if((b=b[0>c?"previousSibling":"nextSibling"])&&"getAttribute"in
b){var k=n.byNode(b);if(k)return k}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f){n=p("dijit.MenuItem"+(b("dojo-bidi")?"_NoBidi":""),[l,d,c,k],{templateString:f,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var a="",
c;c=b.search(/{\S}/);if(0<=c){var a=b.charAt(c+1),d=b.substr(0,c);b=b.substr(c+3);c=d+a+b;b=d+'<span class="dijitMenuItemShortcutKey">'+a+"</span>"+b}else c=b;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",a)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){!b||"label"in this.params||this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);
r.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&r.set(this.accelKeyNode,"id",this.id+"_accel");t.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==b("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(c){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(b){s.toggle(this.domNode,"dijitMenuItemSelected",b)},setLabel:function(b){g.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",b)},setDisabled:function(b){g.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=b?"":"none",this.accelKeyNode.innerHTML=b,r.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});b("dojo-bidi")&&
(n=p("dijit.MenuItem",n,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return n})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(p,t){return p("dijit._Contained",null,{_getSibling:function(p){var s=this.domNode;do s=s[p+"Sibling"];while(s&&1!=s.nodeType);return s&&t.byNode(s)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},
getIndexInParent:function(){var p=this.getParent();return p&&p.getIndexOfChild?p.getIndexOfChild(this):-1}})})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x){var z=t("dijit._MasterTooltip",
[a,e],{duration:f.defaultDuration,templateString:v,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new m(this.domNode);this.fadeIn=r.fadeIn({node:this.domNode,duration:this.duration,onEnd:l.hitch(this,"_onShow")});this.fadeOut=r.fadeOut({node:this.domNode,duration:this.duration,onEnd:l.hitch(this,"_onHide")})},show:function(a,b,c,e,d){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;
else{this.containerNode.innerHTML=a;d&&this.set("textDir",d);this.containerNode.align=e?"right":"left";var f=q.around(this.domNode,b,c&&c.length?c:A.defaultPosition,!e,l.hitch(this,"orient")),m=f.aroundNodePos;"M"==f.corner.charAt(0)&&"M"==f.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-f.y+"px",this.connectorNode.style.left=""):"M"==f.corner.charAt(1)&&"M"==f.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>
1)-f.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");n.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b}},orient:function(a,c,e,d,f){this.connectorNode.style.top="";var m=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight",
"TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[c+"-"+e];this.domNode.style.width="auto";var l=b.position(this.domNode);9==k("ie")&&(l.w+=2);var g=Math.min(Math.max(d,1),l.w);b.setMarginBox(this.domNode,{w:g});"B"==e.charAt(0)&&"B"==c.charAt(0)?(a=b.position(a),c=this.connectorNode.offsetHeight,a.h>m?(this.connectorNode.style.top=m-(f.h+c>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-c/
2,0),a.h-c)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,l.w-d)},_onShow:function(){k("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play())},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),
this._onDeck=null)}});k("dojo-bidi")&&z.extend({_setAutoTextDir:function(a){this.applyTextDir(a);p.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});x.showTooltip=function(a,b,c,e,d){c&&(c=p.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));A._masterTT||(x._masterTT=A._masterTT=new z);return A._masterTT.show(a,b,
c,e,d)};x.hideTooltip=function(a){return A._masterTT&&A._masterTT.hide(a)};var A=t("dijit.Tooltip",a,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(a){p.forEach(this._connections||[],function(a){p.forEach(a,function(a){a.remove()})},this);this._connectIds=p.filter(l.isArrayLike(a)?a:a?[a]:[],function(a){return s.byId(a,this.ownerDocument)},this);this._connections=p.map(this._connectIds,function(a){a=s.byId(a,this.ownerDocument);var b=this.selector,e=b?function(a){return c.selector(b,
a)}:function(a){return a},f=this;return[c(a,e(d.enter),function(){f._onHover(this)}),c(a,e("focusin"),function(){f._onHover(this)}),c(a,e(d.leave),l.hitch(f,"_onUnHover")),c(a,e("focusout"),l.hitch(f,"_onUnHover"))]},this);this._set("connectId",a)},addTarget:function(a){a=a.id||a;-1==p.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=p.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},
buildRendering:function(){this.inherited(arguments);g.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;p.forEach(l.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},_onHover:function(a){this._showTimer||(this._showTimer=this.defer(function(){this.open(a)},this.showDelay))},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);this.close()},open:function(a){this._showTimer&&
(this._showTimer.remove(),delete this._showTimer);var b=this.getContent(a);b&&(A.show(b,a,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=a,this.onShow(a,this.position))},close:function(){this._connectNode&&(A.hide(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close();p.forEach(this._connections||[],function(a){p.forEach(a,function(a){a.remove()})},
this);this.inherited(arguments)}});A._MasterTooltip=z;A.show=x.showTooltip;A.hide=x.hideTooltip;A.defaultPosition=["after-centered","before-centered"];return A})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(p,t,r,s,g){var b={};p.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(g){b[g]=s[g]});r.mixin(b,{defaultDuration:t.defaultDuration||200});r.mixin(g,b);return g})},
"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q){return g("dijit.form._FormSelectWidget",q,{multiple:!1,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,
getOptions:function(a){var b=this.options||[];if(null==a)return b;if(d.isArray(a))return p.map(a,"return this.getOptions(item);",this);d.isString(a)&&(a={value:a});d.isObject(a)&&(p.some(b,function(b,c){for(var e in a)if(!(e in b)||b[e]!=a[e])return!1;a=c;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){p.forEach(d.isArray(a)?a:[a],function(a){a&&d.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(d.isArray(a)?a:[a]);
p.forEach(a,function(a){a&&(this.options=p.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){p.forEach(d.isArray(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(a,b,c){var l=this.store;c=c||{};if(l!==a){for(var g;g=this._notifyConnections.pop();)g.remove();a.get||(d.mixin(a,{_oldAPI:!0,get:function(a){var b=
new t;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new t(function(){e.abort&&e.abort()});c.total=new t;var e=this.fetch(d.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return new f(c)}}),a.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[r.after(a,"onNew",d.hitch(this,"_onNewItem"),!0),r.after(a,
"onDelete",d.hitch(this,"_onDeleteItem"),!0),r.after(a,"onSet",d.hitch(this,"_onSetItem"),!0)]));this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();c.query&&(this._set("query",c.query),this._set("queryOptions",c.queryOptions));a&&(this._loadingStore=!0,this.onLoadDeferred=new t,this._queryRes=a.query(this.query,this.queryOptions),k(this._queryRes,d.hitch(this,function(f){if(this.sortByLabel&&!c.sort&&
f.length)if(a.getValue)f.sort(s.createSortFunction([{attribute:a.getLabelAttributes(f[0])[0]}],a));else{var k=this.labelAttr;f.sort(function(a,b){return a[k]>b[k]?1:b[k]>a[k]?-1:0})}c.onFetch&&(f=c.onFetch.call(this,f,c));p.forEach(f,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&this._queryRes.observe(d.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0);this._loadingStore=!1;this.set("value","_pendingValue"in this?
this._pendingValue:b);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(f):this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)}));return l},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=d.isArray(a)?p.map(a,function(a){return d.isObject(a)?a:{value:a}}):d.isObject(a)?[a]:[{value:a}];a=p.filter(this.getOptions(a),
function(a){return a&&a.value});var c=this.getOptions()||[];this.multiple||a[0]&&a[0].value||!c.length||(a[0]=c[0]);p.forEach(c,function(b){b.selected=p.some(a,function(a){return a.value===b.value})});c=p.map(a,function(a){return a.value});if("undefined"!=typeof c&&"undefined"!=typeof c[0]){var f=p.map(a,function(a){return a.label});this._setDisplay(this.multiple?f:f[0]);this.inherited(arguments,[this.multiple?c:c[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=p.map([].concat(this.get("selectedOptions")),
function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(p.forEach(this._getChildren(),function(a){a.destroyRecursive()}),p.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);
if(a&&a[0]){var b=this;p.forEach(this._getChildren(),function(c){var d=p.some(a,function(a){return c.option&&a===c.option.value});d&&!b.multiple&&(b.focusedChild=c);n.toggle(c.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d);c.domNode.setAttribute("aria-selected",d?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=p.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?
p.map(p.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=
this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);b.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?c("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?
{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+l._scopeName+"-value")||a.getAttribute("value"),label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);r.after(this,"onChange",d.hitch(this,"_updateSelection"));var a=this.store;
a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this.setStore(a,this._oValue))},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},
_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(p){var t={};p.setObject("dojo.data.util.sorter",t);t.basicComparator=function(p,s){var g=-1;null===p&&(p=void 0);null===s&&(s=void 0);if(p==s)g=0;else if(p>s||null==p)g=1;return g};t.createSortFunction=function(p,s){function g(b,a,c,d){return function(f,k){var l=d.getValue(f,b),g=d.getValue(k,b);return a*c(l,g)}}for(var b=[],n,l=s.comparatorMap,d=t.basicComparator,
c=0;c<p.length;c++){n=p[c];var k=n.attribute;if(k){n=n.descending?-1:1;var f=d;l&&("string"!==typeof k&&"toString"in k&&(k=k.toString()),f=l[k]||d);b.push(g(k,n,f,s))}}return function(c,a){for(var e=0;e<b.length;){var d=b[e++](c,a);if(0!==d)return d}return 0}};return t})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(p,t,r){var s=function(g){function b(b){g[b]||(g[b]=function(){var l=arguments;return r(g,function(d){Array.prototype.unshift.call(l,
d);return s(p[b].apply(p,l))})})}if(!g)return g;g.then&&(g=t.delegate(g));b("forEach");b("filter");b("map");g.total||(g.total=r(g,function(b){return b.length}));return g};t.setObject("dojo.store.util.QueryResults",s);return s})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(p,t,r,s){return p("dijit.form._FormValueWidget",[r,s],{_layoutHackIE7:function(){if(7==t("ie"))for(var g=this.domNode,b=g.parentNode,n=g.firstChild||
g,l=n.style.filter,d=this;b&&0==b.clientHeight;)(function(){var c=d.connect(b,"onscroll",function(){d.disconnect(c);n.style.filter=(new Date).getMilliseconds();d.defer(function(){n.style.filter=l})})})(),b=b.parentNode}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(p,t,r,s,g,b,n,l){t("dijit-legacy-requires")&&s(0,function(){require(["dijit/form/_FormValueWidget"])});
return p("dijit.form._FormWidget",[g,n,b,l],{setDisabled:function(b){r.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){r.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){r.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=
this.name&&!t("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(p,t,r,s,g,b,n,l,d,c){return t("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,
intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);r.set(this.focusNode,"disabled",b);this.valueNode&&r.set(this.valueNode,"disabled",b);this.focusNode.setAttribute("aria-disabled",b?"true":"false");b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",p.forEach(g.isArray(b)?b:[b],function(b){b=this[b];l("webkit")||c.hasDefaultTabStop(b)?
b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var c=this.own(n(this.focusNode,"focus",function(){l.remove();c.remove()}))[0],l=this.own(n(this.ownerDocumentBody,"mouseup, touchend",g.hitch(this,function(a){l.remove();c.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)});
this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=s.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},compare:function(b,c){return"number"==typeof b&&"number"==typeof c?isNaN(b)&&isNaN(c)?0:b-c:b>c?1:b<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(b,c){void 0!=this._lastValueReported||null!==c&&this._onChangeActive||(this._resetValue=this._lastValueReported=
b);this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,this._lastValueReported);(this.intermediateChanges||c||void 0===c)&&this._pendingOnChange&&(this._lastValueReported=b,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(b)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&
(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(p,t,r,s,g,b,n){return p("dijit.form._FormValueMixin",n,{readOnly:!1,_setReadOnlyAttr:function(b){t.set(this.focusNode,"readOnly",b);this._set("readOnly",b)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&
(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(b,d){this._handleOnChange(b,d)},_handleOnChange:function(b,d){this._set("value",b);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/ComboButton":function(){define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(p,t,
r,s,g){return p("dijit.form.ComboButton",s,{templateString:g,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(b){b.keyCode==t[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(r.focus(this._popupStateNode),b.stopPropagation(),b.preventDefault())},_onArrowKeyDown:function(b){b.keyCode==
t[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(r.focus(this.titleNode),b.stopPropagation(),b.preventDefault())},focus:function(b){this.disabled||r.focus("start"==b?this.titleNode:this._popupStateNode)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html".split(" "),function(p,t,r,s,g,b,n,l,d){return p("dijit.form.DropDownButton",[b,n,l],{baseClass:"dijitDropDownButton",
templateString:d,_fillContent:function(){if(this.srcNodeRef){var b=r("*",this.srcNodeRef);this.inherited(arguments,[b[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var b=r("[widgetId]",this.dropDownContainer)[0];b&&(this.dropDown=s.byNode(b));delete this.dropDownContainer}this.dropDown&&g.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var b=this.dropDown;return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var d=
this.dropDown,f=d.on("load",t.hitch(this,function(){f.remove();b()}));d.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html".split(" "),function(p,t,r,s,g,b,n,l,d,c){s("dijit-legacy-requires")&&n(0,function(){p(["dijit/form/DropDownButton","dijit/form/ComboButton",
"dijit/form/ToggleButton"])});n=t("dijit.form.Button"+(s("dojo-bidi")?"_NoBidi":""),[l,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:c,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},_fillContent:function(c){!c||this.params&&"label"in this.params||!(c=b.trim(c.innerHTML))||(this.label=c)},_setShowLabelAttr:function(b){this.containerNode&&r.toggle(this.containerNode,
"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(b){g.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},_setLabelAttr:function(c){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=b.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});s("dojo-bidi")&&(n=t("dijit.form.Button",n,{_setLabelAttr:function(b){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,
this.titleNode.title)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return n})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(p,t,r,s){var g=p("dijit.form._ButtonMixin"+(r("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(b){b.stopPropagation();b.preventDefault();this.disabled||this.valueNode.click(b);return!1},_onClick:function(b){if(this.disabled)return b.stopPropagation(),
b.preventDefault(),!1;!1===this.onClick(b)&&b.preventDefault();cancelled=b.defaultPrevented;if(!cancelled&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var l=s.byNode(g);if(l&&"function"==typeof l._onSubmit){l._onSubmit(b);b.preventDefault();cancelled=!0;break}}return!cancelled},postCreate:function(){this.inherited(arguments);t.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(b){this._set("label",
b);(this.containerNode||this.focusNode).innerHTML=b}});r("dojo-bidi")&&(g=p("dijit.form._ButtonMixin",g,{_setLabelAttr:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return g})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(p,t,r,s,g,
b,n,l,d,c,k,f,q,a,e,m){return p("dijit._HasDropDown",m,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){this.disabled||this.readOnly||(a.preventDefault(),this._docHandler=this.own(k(this.ownerDocument,f.release,c.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown())},_onDropDownMouseUp:function(a){a&&this._docHandler&&(this._docHandler.remove(),
this._docHandler=null);var c=this.dropDown,e=!1;if(a&&this._opened){var d=b.position(this._buttonNode,!0);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w&&a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(d=a.target;d&&!e;)g.contains(d,"dijitPopup")?e=!0:d=d.parentNode;if(e){d=a.target;if(c.onItemClick){for(var f;d&&!(f=q.byNode(d));)d=d.parentNode;if(f&&f.onClick&&f.getParent)f.getParent().onItemClick(f,a)}return}}}this._opened?c.focus&&!1!==c.autoFocus&&(this._focusDropDownTimer=this.defer(function(){c.focus();delete this._focusDropDownTimer})):
this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||
"Down";g.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(k(this._buttonNode,f.press,c.hitch(this,"_onDropDownMouseDown")),k(this._buttonNode,"click",c.hitch(this,"_onDropDownClick")),k(a,"keydown",c.hitch(this,"_onKey")),k(a,"keyup",c.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},
_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),a.preventDefault()):b&&this._opened&&a.keyCode==d.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==d.DOWN_ARROW||(a.keyCode==d.ENTER||a.keyCode==d.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase()))&&(this._toggleOnKeyUp=
!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(c.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new t,b=c.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},
toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,d=a.domNode,f=this._aroundNode||this.domNode,m=this,k=e.open({parent:this,popup:a,around:f,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){m.closeDropDown(!0)},onCancel:function(){m.closeDropDown(!0)},onClose:function(){s.set(m._popupStateNode,"popupActive",!1);g.remove(m._popupStateNode,"dijitHasDropDownOpen");
m._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&f.offsetWidth>a._popupWrapper.offsetWidth)f={w:f.offsetWidth-(a._popupWrapper.offsetWidth-a.domNode.offsetWidth)},c.isFunction(a.resize)?a.resize(f):b.setMarginBox(d,f);s.set(this._popupStateNode,"popupActive","true");g.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===d.getAttribute("role")||
d.getAttribute("aria-labelledby")||d.setAttribute("aria-labelledby",this.id);return k},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus(),e.close(this.dropDown),this._opened=!1)}})})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),
function(p,t,r,s,g,b,n,l,d){s("dijit-legacy-requires")&&b(0,function(){p(["dijit/form/RadioButton"])});return t("dijit.form.CheckBox",[n,l],{templateString:d,baseClass:"dijitCheckBox",_setValueAttr:function(b,d){"string"==typeof b&&(this.inherited(arguments),b=!0);this._created&&this.set("checked",b,d)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},
_fillContent:function(){},_onFocus:function(){this.id&&g("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&g("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(p,t,r,s){return p("dijit.form.ToggleButton",[r,s],{baseClass:"dijitToggleButton",setChecked:function(g){t.deprecated("setChecked("+
g+") is deprecated. Use set('checked',"+g+") instead.","","2.0");this.set("checked",g)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(p,t){return p("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(p){var s=this.checked;this._set("checked",!s);var g=this.inherited(arguments);this.set("checked",g?this.checked:s);return g},_setCheckedAttr:function(p,s){this._set("checked",p);var g=this.focusNode||this.domNode;
this._created&&t.get(g,"checked")!=!!p&&t.set(g,"checked",!!p);g.setAttribute(this._aria_attr,String(p));this._handleOnChange(p,s)},postCreate:function(){this.inherited(arguments);var p=this.focusNode||this.domNode;this.checked&&p.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(p,t){return p("dijit.form._CheckBoxMixin",null,{type:"checkbox",
value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(p){this._set("readOnly",p);t.set(this.focusNode,"readOnly",p)},_setLabelAttr:void 0,_getSubmitValue:function(p){return null==p||""===p?"on":p},_setValueAttr:function(p){p=this._getSubmitValue(p);this._set("value",p);t.set(this.focusNode,"value",p)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));t.set(this.focusNode,"value",this.value)},_onClick:function(p){return this.readOnly?
(p.stopPropagation(),p.preventDefault(),!1):this.inherited(arguments)}})})},"dojox/form/FileInput":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/fx dojo/dom-attr dojo/dom-class dojo/text!./resources/FileInput.html dijit/form/_FormWidget dijit/_Templated".split(" "),function(p,t,r,s,g,b,n,l){t.experimental("dojox.form.FileInput");return p("dojox.form.FileInput",n,{label:"Browse ...",cancelText:"Cancel",name:"uploadFile",templateString:b,startup:function(){this._listener=this.connect(this.fileInput,
"onchange","_matchValue");this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue")},postCreate:function(){},_matchValue:function(){this.inputNode.value=this.fileInput.value;this.inputNode.value&&(this.cancelNode.style.visibility="visible",r.fadeIn({node:this.cancelNode,duration:275}).play())},setLabel:function(b,c){this.titleNode.innerHTML=b},reset:function(b){this.disconnect(this._listener);this.disconnect(this._keyListener);this.fileInput&&this.domNode.removeChild(this.fileInput);
r.fadeOut({node:this.cancelNode,duration:275}).play();this.fileInput=document.createElement("input");this.fileInput.setAttribute("type","file");this.fileInput.setAttribute("id",this.id);this.fileInput.setAttribute("name",this.name);g.add(this.fileInput,"dijitFileInputReal");this.domNode.appendChild(this.fileInput);this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");this._listener=this.connect(this.fileInput,"onchange","_matchValue");this.inputNode.value=""}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(p,t,r,s,g,b,n){b.extend(p,{waiRole:"",waiState:""});return g("dijit._Templated",[t,r],{widgetsInTemplate:!1,constructor:function(){n.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(b,d){var c=this.inherited(arguments),k=d(b,"waiRole");k&&b.setAttribute("role",k);(k=d(b,"waiState"))&&s.forEach(k.split(/\s*,\s*/),function(c){-1!=c.indexOf("-")&&(c=c.split("-"),b.setAttribute("aria-"+
c[0],c[1]))});return c}})})},"dojox/form/Uploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/dom-form dijit dijit/form/Button ./uploader/_Base ./uploader/_HTML5 ./uploader/_IFrame ./uploader/_Flash dojo/i18n!./nls/Uploader dojo/text!./resources/Uploader.html".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x,z,A){return t("dojox.form.Uploader",
[e,a,m,v,x],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:z.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:A,baseClass:"dijitUploader "+a.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.force=this.force.toLowerCase();this.supports("multiple")?this.uploadType="form"===this.force?"form":"html5":this.uploadType="flash"===this.force?"flash":"iframe";this.inherited(arguments)},
buildRendering:function(){this.inherited(arguments);n.set(this.domNode,{overflow:"hidden",position:"relative"});this._buildDisplay();c.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=k.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(a){for(var b=0,c,e=[];c=a[b++];)c&&c.name&&e.push(c.name);
this.displayInput.value=e.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(a){},onBegin:function(a){},onProgress:function(a){},onComplete:function(a){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(a){},upload:function(a){a=a||{};a.uploadType=this.uploadType;this.inherited(arguments)},
submit:function(a){a=a?a.tagName?a:this.getForm():this.getForm();a=f.toObject(a);a.uploadType=this.uploadType;this.upload(a)},reset:function(){delete this._files;this._disconnectButton();s.forEach(this._inputs,k.destroy,dojo);this._inputs=[];this._nameIndex=0;this._createInput()},getFileList:function(){var a=[];this.supports("multiple")?s.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},this):s.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+
1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this);return a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(a){console.error("Uploader value is read only")},_setDisabledAttr:function(a){this.disabled!=a&&this.inputNode&&(this.inherited(arguments),n.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:n.get(a,"width"),h:n.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/
60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(n.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var a=this._getFileFieldName();this.focusNode=this.inputNode=k.create("input",{type:"file",name:a,"aria-labelledby":this.id+"_label"},this.domNode,"first");this.supports("multiple")&&
this.multiple&&c.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);n.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(g.connect(this.inputNode,"change",this,function(a){this._files=this.inputNode.files;this.onChange(this.getFileList(a));!this.supports("multiple")&&this.multiple&&this._createInput()}));-1<this.tabIndex&&(this.inputNode.tabIndex=this.tabIndex,
this._cons.push(g.connect(this.inputNode,"focus",this,function(){l.add(this.domNode,this.focusedClass)})),this._cons.push(g.connect(this.inputNode,"blur",this,function(){l.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){s.forEach(this._cons,g.disconnect);this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/has dojo/_base/declare dojo/_base/event dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),
function(p,t,r,s,g,b,n,l,d,c){g.add("FormData",function(){return!!window.FormData});g.add("xhr-sendAsBinary",function(){var b=window.XMLHttpRequest&&new window.XMLHttpRequest;return b&&!!b.sendAsBinary});g.add("file-multiple",function(){return!!{"true":1,"false":1}[s.get(document.createElement("input",{type:"file"}),"multiple")]});return b("dojox.form.uploader._Base",[l,d,c],{getForm:function(){if(!this.form)for(var b=this.domNode;b&&b.tagName&&b!==document.body;){if("form"==b.tagName.toLowerCase()){this.form=
b;break}b=b.parentNode}return this.form},getUrl:function(){this.uploadUrl&&(this.url=this.uploadUrl);if(this.url)return this.url;this.getForm()&&(this.url=this.form.action);return this.url},connectForm:function(){this.url=this.getUrl();!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(b){n.stop(b);this.submit(this.form)}))},supports:function(b){switch(b){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return g("file-multiple");case "FormData":return g(b);
case "sendAsBinary":return g("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(b){return b.substring(b.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(b){var c=Math.round(b/1024*1E5)/1E5,d=Math.round(b/1048576*1E5)/1E5,a=Math.round(b/1073741824*1E5)/1E5,e=b;1<c&&(e=c.toFixed(1)+" kb");1<d&&(e=d.toFixed(1)+" mb");1<a&&(e=a.toFixed(1)+" gb");return{kb:c,mb:d,gb:a,bytes:b,value:e}}})})},"dojox/form/uploader/_HTML5":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo"],function(p,t,r,s){return p("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(g){this.upload(g[0])})},_drop:function(g){s.stopEvent(g);this._files=g.dataTransfer.files;this.onChange(this.getFileList())},upload:function(g){this.onBegin(this.getFileList());
this.uploadWithFormData(g)},addDropTarget:function(g,b){b||(this.connect(g,"dragenter",s.stopEvent),this.connect(g,"dragover",s.stopEvent),this.connect(g,"dragleave",s.stopEvent));this.connect(g,"drop","_drop")},uploadWithFormData:function(g){if(this.getUrl()){var b=new FormData,n=this._getFileFieldName();r.forEach(this._files,function(d,c){b.append(n,d)},this);if(g){g.uploadType=this.uploadType;for(var l in g)b.append(l,g[l])}this.createXhr().send(b)}else console.error("No upload url found.",this)},
_xhrProgress:function(g){if(g.lengthComputable){var b={bytesLoaded:g.loaded,bytesTotal:g.total,type:g.type,timeStamp:g.timeStamp};"load"==g.type?(b.percent="100%",b.decimal=1):(b.decimal=g.loaded/g.total,b.percent=Math.ceil(g.loaded/g.total*100)+"%");this.onProgress(b)}},createXhr:function(){var g=new XMLHttpRequest,b;g.upload.addEventListener("progress",t.hitch(this,"_xhrProgress"),!1);g.addEventListener("load",t.hitch(this,"_xhrProgress"),!1);g.addEventListener("error",t.hitch(this,function(g){this.onError(g);
clearInterval(b)}),!1);g.addEventListener("abort",t.hitch(this,function(g){this.onAbort(g);clearInterval(b)}),!1);g.onreadystatechange=t.hitch(this,function(){if(4===g.readyState){clearInterval(b);try{this.onComplete(JSON.parse(g.responseText.replace(/^\{\}&&/,"")))}catch(n){console.error("Error parsing server result:",n),console.error(g.responseText),this.onError("Error parsing server result:",n)}}});g.open("POST",this.getUrl());g.setRequestHeader("Accept","application/json");b=setInterval(t.hitch(this,
function(){}),250);return g}})})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),function(p,t,r,s,g,b,n,l){n.isDebug&&r(["./_firebug/firebug"]);var d=n.require;d&&(d=b.map(g.isArray(d)?d:[d],function(b){return b.replace(/\./g,"/")}),p.isAsync?r(d):l(1,function(){r(d)}));return p})},
"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(p){return p})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(p,t,r){var s=window,g={addOnWindowUnload:function(b,g){p.windowUnloaded||r(s,"unload",p.windowUnloaded=function(){});r(s,"unload",t.hitch(b,g))},addOnUnload:function(b,g){r(s,"beforeunload",t.hitch(b,
g))}};p.addOnWindowUnload=g.addOnWindowUnload;p.addOnUnload=g.addOnUnload;return g})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),function(p,t,r,s,g,b,n){var l=function(a){return a.replace(/\./g,"/")},d=/\/\/>>built/,c=[],k=[],f=function(a,b,e){c.push(e);n.forEach(a.split(","),function(a){a=E(a,b.module);k.push(a);K(a)});q()},q=function(){var a,b;for(b in J)if(a=J[b],void 0===a.noReqPluginCheck&&(a.noReqPluginCheck=/loadInit\!/.test(b)||
/require\!/.test(b)?1:0),!a.executed&&!a.noReqPluginCheck&&a.injected==y)return;P(function(){var a=c;c=[];n.forEach(a,function(a){a(1)})})},a=function(a,b,c){var e=/\(|\)/g,d=1;for(e.lastIndex=b;(b=e.exec(a))&&(d=")"==b[0]?d-1:d+1,0!=d););if(0!=d)throw"unmatched paren around character "+e.lastIndex+" in: "+a;return[p.trim(a.substring(c,e.lastIndex))+";\n",e.lastIndex]},e=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,m=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,
v=/(^|\s)(require|define)\s*\(/m,x=function(b,c){var d,f,k,l=[],g=[];d=[];for(c=c||b.replace(e,function(a){m.lastIndex=v.lastIndex=0;return m.test(a)||v.test(a)?"":a});d=m.exec(c);)f=m.lastIndex,k=f-d[0].length,f=a(c,f,k),"loadInit"==d[2]?l.push(f[0]):g.push(f[0]),m.lastIndex=f[1];d=l.concat(g);return d.length||!v.test(c)?[b.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),d.join(""),d]:0},z=r.initSyncLoader(f,q,function(a,b){var c,e,f=[],m=[];if(d.test(b)||!(c=x(b)))return 0;e=a.mid+
"-*loadInit";for(var k in E("dojo",a).result.scopeMap)f.push(k),m.push('"'+k+'"');return"// xdomain rewrite of "+a.mid+"\ndefine('"+e+"',{\n\tnames:"+g.stringify(f)+",\n\tdef:function("+f.join(",")+"){"+c[1]+"}});\n\ndefine("+g.stringify(f.concat(["dojo/loadInit!"+e]))+", function("+f.join(",")+"){\n"+c[0]+"});"}),A=z.sync,y=z.requested,C=z.arrived,F=z.nonmodule,D=z.executing,H=z.executed,N=z.syncExecStack,J=z.modules,M=z.execQ,E=z.getModule,K=z.injectModule,G=z.setArrived,u=z.signal,S=z.finishExec,
Q=z.execModule,W=z.getLegacyMode,P=z.guardCheckComplete,f=z.dojoRequirePlugin;p.provide=function(a){var c=N[0],e=b.mixin(E(l(a),r.module),{executed:D,result:b.getObject(a,!0)});G(e);c&&(c.provides||(c.provides=[])).push(function(){e.result=b.getObject(a);delete e.provides;e.executed!==H&&S(e)});return e.result};t.add("config-publishRequireResult",1,0,0);p.require=function(a,c){var e=function(a,b){var c=E(l(a),r.module);if(N.length&&N[0].finish)N[0].finish.push(a);else{if(c.executed)return c.result;
b&&(c.result=F);var e=W();K(c);e=W();c.executed!==H&&c.injected===C&&z.guardCheckComplete(function(){Q(c)});if(c.executed)return c.result;e==A?c.cjs?M.unshift(c):N.length&&(N[0].finish=[a]):M.push(c)}}(a,c);t("config-publishRequireResult")&&!b.exists(a)&&void 0!==e&&b.setObject(a,e);return e};p.loadInit=function(a){a()};p.registerModulePath=function(a,b){var c={};c[a.replace(/\./g,"/")]=b;r({paths:c})};p.platformRequire=function(a){a=(a.common||[]).concat(a[p._name]||a["default"]||[]);for(var c;a.length;)b.isArray(c=
a.shift())?p.require.apply(p,c):p.require(c)};p.requireIf=p.requireAfterIf=function(a,b,c){a&&p.require(b,c)};p.requireLocalization=function(a,b,c){r(["../i18n"],function(e){e.getLocalization(a,b,c)})};return{extractLegacyApiApplications:x,require:f,loadInit:function(a,b,c){b([a],function(a){b(a.names,function(){for(var e="",d=[],m=0;m<arguments.length;m++)e+="var "+a.names[m]+"= arguments["+m+"]; ",d.push(arguments[m]);eval(e);var k=b.module,g=[],q,e={provide:function(a){a=l(a);a=E(a,k);a!==k&&G(a)},
require:function(a,b){a=l(a);b&&(E(a,k).result=F);g.push(a)},requireLocalization:function(a,b,c){q||(q=["dojo/i18n"]);c=(c||p.locale).toLowerCase();a=l(a)+"/nls/"+(/root/i.test(c)?"":c+"/")+l(b);E(a,k).isXd&&q.push("dojo/i18n!"+a)},loadInit:function(a){a()}},m={},n;try{for(n in e)m[n]=p[n],p[n]=e[n];a.def.apply(null,d)}catch(v){u("error",[{src:s.id,id:"failedDojoLoadInit"},v])}finally{for(n in e)p[n]=m[n]}q&&(g=g.concat(q));g.length?f(g.join(","),b,c):c()})})}}})},"dojox/form/uploader/_IFrame":function(){define("dojo/query dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-form dojo/request/iframe".split(" "),
function(p,t,r,s,g,b,n){return r("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(b){var d={},c;this.getForm();var k=this.getUrl(),f=this;b=b||{};b.uploadType=this.uploadType;c=t.place('<form enctype="multipart/form-data" method="post"></form>',this.domNode);g.forEach(this._inputs,function(b,a){""!==b.value&&(c.appendChild(b),d[b.name]=b.value)},this);
if(b)for(nm in b)void 0===d[nm]&&t.create("input",{name:nm,value:b[nm],type:"hidden"},c);n.post(k,{form:c,handleAs:"json",content:b}).then(function(d){t.destroy(c);if(b.ERROR||b.error)f.onError(d);else f.onComplete(d)},function(b){console.error("error parsing server result",b);t.destroy(c);f.onError(b)})}})})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f){function q(a){return!this.isFulfilled()}function a(a){return!!this._finished}function e(a,c){if(!c)try{var e=a.options,d=v.doc(v._frame),f=e.handleAs;if("html"!==f){if("xml"===f)if("html"===d.documentElement.tagName.toLowerCase()){l("a",d.documentElement).orphan();var m=d.documentElement.innerText,m=m.replace(/>\s+</g,"><");a.text=b.trim(m)}else a.data=d;else a.text=d.getElementsByTagName("textarea")[0].value;g(a)}else a.data=d}catch(k){c=k}c?this.reject(c):this._finished?
this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function m(a){this._callNext()}function v(b,c,d){var f=s.parseArgs(b,s.deepCreate(A,c),!0);b=f.url;c=f.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");v._frame||(v._frame=v.create(v._iframeName,z+"();"));b=s.deferred(f,null,q,a,e,m);b._callNext=function(){this._calledNext||(this._calledNext=!0,v._currentDfd=null,v._fireNextRequest())};b._legacy=d;v._dfdQueue.push(b);
v._fireNextRequest();r(b);return d?b:b.promise}var x=p.id.replace(/[\/\.\-]/g,"_"),z=x+"_onload";f.global[z]||(f.global[z]=function(){var a=v._currentDfd;if(a){var b=c.byId(a.response.options.form)||a._tmpForm;if(b){for(var e=a._contentToClean,d=0;d<e.length;d++)for(var f=e[d],m=0;m<b.childNodes.length;m++){var l=b.childNodes[m];if(l.name===f){k.destroy(l);break}}a._originalAction&&b.setAttribute("action",a._originalAction);a._originalMethod&&(b.setAttribute("method",a._originalMethod),b.method=a._originalMethod);
a._originalTarget&&(b.setAttribute("target",a._originalTarget),b.target=a._originalTarget)}a._tmpForm&&(k.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else v._fireNextRequest()});var A={method:"POST"};v.create=function(a,b,c){if(f.global[a])return f.global[a];if(f.global.frames[a])return f.global.frames[a];c||(d("config-useXDomain")&&!d("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
c=d("config-dojoBlankHtmlUrl")||t.toUrl("dojo/resources/blank.html"));b=k.place('<iframe id="'+a+'" name="'+a+'" src="'+c+'" onload="'+b+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',f.body());return f.global[a]=b};v.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=f.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(f.doc.frames[b]&&
f.doc.frames[b].document)return f.doc.frames[b].document}return null};v.setSrc=function(a,b,c){a=f.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{c?a.location.replace(b):a.location=b}catch(e){}};v._iframeName=x+"_IoIframe";v._notifyStart=function(){};v._dfdQueue=[];v._currentDfd=null;v._fireNextRequest=function(){var a;try{if(!v._currentDfd&&v._dfdQueue.length){do a=v._currentDfd=v._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&v._dfdQueue.length);if(!a||a.canceled||
a.isCanceled&&a.isCanceled())v._currentDfd=null;else{var e=a.response,d=e.options,m=a._contentToClean=[],l=c.byId(d.form),g=s.notify,q=d.data||null,p;a._legacy||"POST"!==d.method||l?"GET"===d.method&&l&&-1<e.url.indexOf("?")&&(p=e.url.slice(e.url.indexOf("?")+1),q=b.mixin(n.queryToObject(p),q)):l=a._tmpForm=k.create("form",{name:x+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},f.body());if(l){if(!a._legacy){var r=l;do r=r.parentNode;while(r!==f.doc.documentElement);r||(l.style.position=
"absolute",l.style.left="-1000px",l.style.top="-1000px",f.body().appendChild(l));l.name||(l.name=x+"_form")}if(q){var r=function(a,b){k.create("input",{type:"hidden",name:a,value:b},l);m.push(a)},t;for(t in q){var z=q[t];if(b.isArray(z)&&1<z.length)for(p=0;p<z.length;p++)r(t,z[p]);else l[t]?l[t].value=z:r(t,z)}}var u=l.getAttributeNode("action"),A=l.getAttributeNode("method"),Q=l.getAttributeNode("target");e.url&&(a._originalAction=u?u.value:null,u?u.value=e.url:l.setAttribute("action",e.url));a._legacy?
A&&A.value||(A?A.value=d.method:l.setAttribute("method",d.method)):(a._originalMethod=A?A.value:null,A?A.value=d.method:l.setAttribute("method",d.method));a._originalTarget=Q?Q.value:null;Q?Q.value=v._iframeName:l.setAttribute("target",v._iframeName);l.target=v._iframeName;g&&g.emit("send",e,a.promise.cancel);v._notifyStart(e);l.submit()}else d="",e.options.data&&(d=e.options.data,"string"!==typeof d&&(d=n.objectToQuery(d))),r=e.url+(-1<e.url.indexOf("?")?"&":"?")+d,g&&g.emit("send",e,a.promise.cancel),
v._notifyStart(e),v.setSrc(v._frame,r,!0)}}}catch(W){a.reject(W)}};s.addCommonMethods(v,["GET","POST"]);return v})},"dojox/form/uploader/_Flash":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/array dojox/embed/Flash".split(" "),function(p,t,r,s,g,b,n,l,d,c){return g("dojox.form.uploader._Flash",[],{swfPath:b.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),preventCache:!0,
skipServerCheck:!0,serverTimeout:2E3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles");this.inherited(arguments)},onReady:function(b){},onLoad:function(b){},onFileChange:function(b){},onFileProgress:function(b){},getFlashFileList:function(){return this._files},
flashReset:function(){this.flashMovie.reset();this._files=[];this._fileMap={}},uploadFlash:function(b){this.onBegin(this.getFileList());b=b||{};b.returnType="F";b.uploadType=this.uploadType;this.flashMovie.doUpload(b)},_change:function(b){this._files=this._files.concat(b);d.forEach(b,function(b){b.bytesLoaded=0;b.bytesTotal=b.size;this._fileMap[b.name+"_"+b.size]=b},this);this.onChange(this._files);this.onFileChange(b)},_complete:function(b){this._getCustomEvent().type="load";this.onComplete(b)},
_progress:function(b){this._fileMap[b.name+"_"+b.bytesTotal].bytesLoaded=b.bytesLoaded;var c=this._getCustomEvent();this.onFileProgress(b);this.onProgress(c)},_error:function(b){this.onError(b)},_onFlashBlur:function(b){},_getCustomEvent:function(){var b={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()},c;for(c in this._fileMap)b.bytesTotal+=this._fileMap[c].bytesTotal,b.bytesLoaded+=this._fileMap[c].bytesLoaded;b.decimal=b.bytesLoaded/b.bytesTotal;b.percent=Math.ceil(b.bytesLoaded/
b.bytesTotal*100)+"%";return b},_connectFlash:function(){this._subs=[];this._cons=[];var b=l.hitch(this,function(b,c){this._subs.push(n.subscribe(this.id+b,this,c))});b("/filesSelected","_change");b("/filesUploaded","_complete");b("/filesProgress","_progress");b("/filesError","_error");b("/filesCanceled","onCancel");b("/stageBlur","_onFlashBlur");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&s.set(this.domNode,"tabIndex",this.tabIndex)},
_createFlashUploader:function(){var b=this.btnSize.w,d=this.btnSize.h;if(b){var g=this.getUrl();if(g){if(0>g.toLowerCase().indexOf("http")&&0!=g.indexOf("/")){var a=window.location.href.split("/");a.pop();a=a.join("/")+"/";g=a+g}}else console.warn("Warning: no uploadUrl provided.");this.inputNode=r.create("div",{className:"dojoxFlashNode"},this.domNode,"first");t.set(this.inputNode,{position:"absolute",top:"-2px",width:b+"px",height:d+"px",opacity:0});b={expressInstall:!0,path:(this.swfPath.uri||
this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():""),width:b,height:d,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:g,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};
this.flashObject=new c(b,this.inputNode);this.flashObject.onError=l.hitch(function(a){console.error("Flash Error: "+a)});this.flashObject.onReady=l.hitch(this,function(){this.onReady(this)});this.flashObject.onLoad=l.hitch(this,function(a){this.flashMovie=a;this.flashReady=!0;this.onLoad(this)});this._connectFlash()}else setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode);this._createFlashUploader()}),200)}})})},"dojox/embed/Flash":function(){define(["dojo"],function(p){function t(d){d=
p.delegate(n,d);if(!("path"in d))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),null;"id"in d||(d.id=g+b++);return d}var r,s,g="dojox-embed-flash-",b=0,n={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};p.isIE?(r=function(b){b=t(b);if(!b)return null;var c,k=b.path;if(b.vars){var f=[];for(c in b.vars)f.push(c+"="+b.vars[c]);b.params.FlashVars=f.join("&");delete b.vars}k=
'<object id="'+b.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+b.width+'" height="'+b.height+'"'+(b.style?' style="'+b.style+'"':"")+'><param name="movie" value="'+k+'" />';if(b.params)for(c in b.params)k+='<param name="'+c+'" value="'+b.params[c]+'" />';return{id:b.id,markup:k+"</object>"}},s=function(){for(var b=10,c=null;!c&&7<b;)try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b--)}catch(k){}return c?(b=c.GetVariable("$version").split(" ")[1].split(","),{major:null!=
b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}(),p.addOnWindowUnload(function(){console.warn("***************UNLOAD");var b=function(){};p.query("object").reverse().style("display","none").forEach(function(c){for(var k in c)if("FlashVars"!=k&&p.isFunction(c[k]))try{c[k]=b}catch(f){}})})):(r=function(b){b=t(b);if(!b)return null;var c,k=b.path;if(b.vars){var f=[];for(c in b.vars)f.push(c+"="+b.vars[c]);b.params.flashVars=f.join("&");
delete b.vars}k='<embed type="application/x-shockwave-flash" src="'+k+'" id="'+b.id+'" width="'+b.width+'" height="'+b.height+'"'+(b.style?' style="'+b.style+'" ':"")+'pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(b.params)for(c in b.params)k+=" "+c+'="'+b.params[c]+'"';return{id:b.id,markup:k+" />"}},s=function(){var b=navigator.plugins["Shockwave Flash"];return b&&b.description?(b=b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),
{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}());var l=function(b,c){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=dojox.embed.Flash.available;this.minimumVersion=b.minimumVersion||9;this.domNode=this.movie=this.id=null;c&&(c=p.byId(c));setTimeout(p.hitch(this,
function(){if(b.expressInstall||this.available&&this.available>=this.minimumVersion)if(b&&c)this.init(b,c);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),100)};p.extend(l,{onReady:function(b){},onLoad:function(b){},onError:function(b){},_onload:function(){clearInterval(this._poller);delete this._poller;
delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(b,c){this.destroy();c=p.byId(c||this.domNode);if(!c)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var k=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;dojox.embed.Flash.initialized&&(this.id=dojox.embed.Flash.place(b,c),this.domNode=c,setTimeout(p.hitch(this,function(){this.movie=this.byId(this.id,b.doc);this.onReady(this.movie);this._poller=setInterval(p.hitch(this,
function(){try{k=this.movie.PercentLoaded()}catch(b){console.warn("this.movie.PercentLoaded() failed",b,this.movie)}if(100==k)this._onload();else if(0==k&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(b){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var b=p.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),c;for(c in this)b[c]||
delete this[c];this._poller?p.connect(this,"onLoad",this,"_destroy"):this._destroy()}},byId:function(b,c){c=c||document;return c.embeds[b]?c.embeds[b]:c[b]?c[b]:window[b]?window[b]:document[b]?document[b]:null}});p.mixin(l,{minSupported:8,available:s.major,supported:s.major>=s.required,minimumRequired:s.required,version:s,initialized:!1,onInitialize:function(){l.initialized=!0},__ie_markup__:function(b){return r(b)},proxy:function(b,c){p.forEach(p.isArray(c)?c:[c],function(b){this[b]=p.hitch(this,
function(){return function(){return eval(this.movie.CallFunction('<invoke name="'+b+'" returntype="javascript"><arguments>'+p.map(arguments,function(b){return __flash__toXML(b)}).join("")+"</arguments></invoke>"))}.apply(this,arguments||[])})},b)}});l.place=function(b,c){var k=r(b);c=p.byId(c);c||(c=p.doc.createElement("div"),c.id=k.id+"-container",p.body().appendChild(c));return k?(c.innerHTML=k.markup,k.id):null};l.onInitialize();p.setObject("dojox.embed.Flash",l);return l})},"dojox/form/uploader/FileList":function(){define("dojo/_base/fx dojo/dom-style dojo/dom-class dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_base/manager dojox/form/uploader/_Base dojo/text!../resources/UploaderFileList.html".split(" "),
function(p,t,r,s,g,b,n,l,d){return s("dojox.form.uploader.FileList",l,{uploaderId:"",uploader:null,headerIndex:"#",headerType:"Type",headerFilename:"File Name",headerFilesize:"Size",_upCheckCnt:0,rowAmt:0,templateString:d,postCreate:function(){this.setUploader();this.hideProgress()},reset:function(){for(var b=0;b<this.rowAmt;b++)this.listNode.deleteRow(0);this.rowAmt=0},setUploader:function(){if(!this.uploaderId&&!this.uploader)console.warn("uploaderId not passed to UploaderFileList");else if(this.uploaderId&&
!this.uploader)this.uploader=n.byId(this.uploaderId);else if(4<this._upCheckCnt){console.warn("uploader not found for ID ",this.uploaderId);return}this.uploader?(this.connect(this.uploader,"onChange","_onUploaderChange"),this.connect(this.uploader,"reset","reset"),this.connect(this.uploader,"onBegin",function(){this.showProgress(!0)}),this.connect(this.uploader,"onProgress","_progress"),this.connect(this.uploader,"onComplete",function(){setTimeout(g.hitch(this,function(){this.hideProgress(!0)}),1250)}),
(this._fileSizeAvail={html5:1,flash:1}[this.uploader.uploadType])||(this.sizeHeader.style.display="none")):(this._upCheckCnt++,setTimeout(g.hitch(this,"setUploader"),250))},hideProgress:function(b){this._hideShowProgress(b?{ani:!0,endDisp:"none",beg:15,end:0}:{endDisp:"none",ani:!1})},showProgress:function(b){this._hideShowProgress(b?{ani:!0,endDisp:"block",beg:0,end:15}:{endDisp:"block",ani:!1})},_progress:function(b){this.percentTextNode.innerHTML=b.percent;t.set(this.percentBarNode,"width",b.percent)},
_hideShowProgress:function(b){var d=this.progressNode,f=function(){t.set(d,"display",b.endDisp)};b.ani?(t.set(d,"display","block"),p.animateProperty({node:d,properties:{height:{start:b.beg,end:b.end,units:"px"}},onEnd:f}).play()):f()},_onUploaderChange:function(c){this.reset();b.forEach(c,function(b,c){this._addRow(c+1,this.getFileType(b.name),b.name,b.size)},this)},_addRow:function(b,d,f,l){var a,e=this.listNode.insertRow(-1);a=e.insertCell(-1);r.add(a,"dojoxUploaderIndex");a.innerHTML=b;a=e.insertCell(-1);
r.add(a,"dojoxUploaderIcon");a.innerHTML=d;a=e.insertCell(-1);r.add(a,"dojoxUploaderFileName");a.innerHTML=f;this._fileSizeAvail&&(a=e.insertCell(-1),r.add(a,"dojoxUploaderSize"),a.innerHTML=this.convertBytes(l).value);this.rowAmt++}})})},"dojox/validate/web":function(){define(["./_base","./regexp"],function(p,t){p.isIpAddress=function(p,s){return RegExp("^"+t.ipAddress(s)+"$","i").test(p)};p.isUrl=function(p,s){return RegExp("^"+t.url(s)+"$","i").test(p)};p.isEmailAddress=function(p,s){return RegExp("^"+
t.emailAddress(s)+"$","i").test(p)};p.isEmailAddressList=function(p,s){return RegExp("^"+t.emailAddressList(s)+"$","i").test(p)};p.getEmailAddressList=function(r,s){s||(s={});s.listSeparator||(s.listSeparator="\\s;,");return p.isEmailAddressList(r,s)?r.split(RegExp("\\s*["+s.listSeparator+"]\\s*")):[]};return p})},"dojox/validate/_base":function(){define(["dojo/_base/lang","dojo/regexp","dojo/number","./regexp"],function(p,t,r,s){var g=p.getObject("dojox.validate",!0);g.isText=function(b,g){g="object"==
typeof g?g:{};return/^\s*$/.test(b)||"number"==typeof g.length&&g.length!=b.length||"number"==typeof g.minlength&&g.minlength>b.length||"number"==typeof g.maxlength&&g.maxlength<b.length?!1:!0};g._isInRangeCache={};g.isInRange=function(b,n){b=r.parse(b,n);if(isNaN(b))return!1;n="object"==typeof n?n:{};var l="number"==typeof n.max?n.max:Infinity,d="number"==typeof n.min?n.min:-Infinity,c=g._isInRangeCache,k=b+"max"+l+"min"+d+"dec"+("string"==typeof n.decimal?n.decimal:".");if("undefined"!=typeof c[k])return c[k];
c[k]=!(b<d||b>l);return c[k]};g.isNumberFormat=function(b,g){return RegExp("^"+s.numberFormat(g)+"$","i").test(b)};g.isValidLuhn=function(b){var g=0,l,d;p.isString(b)||(b=String(b));b=b.replace(/[- ]/g,"");l=b.length%2;for(var c=0;c<b.length;c++)d=parseInt(b.charAt(c)),c%2==l&&(d*=2),9<d&&(d-=9),g+=d;return!(g%10)};return g})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(p,t){var r={};t.setObject("dojo.regexp",r);r.escapeString=function(p,g){return p.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
function(b){return g&&-1!=g.indexOf(b)?b:"\\"+b})};r.buildGroupRE=function(p,g,b){if(!(p instanceof Array))return g(p);for(var n=[],l=0;l<p.length;l++)n.push(g(p[l]));return r.group(n.join("|"),b)};r.group=function(p,g){return"("+(g?"?:":"")+p+")"};return r})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(p,t,r,s,g){var b={};p.setObject("dojo.number",b);b.format=function(l,d){d=p.mixin({},d||{});var c=t.normalizeLocale(d.locale),
c=t.getLocalization("dojo.cldr","number",c);d.customs=c;c=d.pattern||c[(d.type||"decimal")+"Format"];return isNaN(l)||Infinity==Math.abs(l)?null:b._applyPattern(l,c,d)};b._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;b._applyPattern=function(l,d,c){c=c||{};var k=c.customs.group,f=c.customs.decimal;d=d.split(";");var g=d[0];d=d[0>l?1:0]||"-"+g;if(-1!=d.indexOf("%"))l*=100;else if(-1!=d.indexOf("\u2030"))l*=1E3;else if(-1!=d.indexOf("\u00a4"))k=c.customs.currencyGroup||k,f=c.customs.currencyDecimal||f,d=
d.replace(/\u00a4{1,3}/,function(a){return c[["symbol","currency","displayName"][a.length-1]]||c.currency||""});else if(-1!=d.indexOf("E"))throw Error("exponential notation not supported");var a=b._numberPatternRE,g=g.match(a);if(!g)throw Error("unable to find a number expression in pattern: "+d);!1===c.fractional&&(c.places=0);return d.replace(a,b._formatAbsolute(l,g[0],{decimal:f,group:k,places:c.places,round:c.round}))};b.round=function(b,d,c){c=10/(c||10);return(c*+b).toFixed(d)/c};if(0==(0.9).toFixed()){var n=
b.round;b.round=function(b,d,c){var k=Math.pow(10,-d||0),f=Math.abs(b);if(!b||f>=k)k=0;else if(f/=k,0.5>f||0.95<=f)k=0;return n(b,d,c)+(0<b?k:-k)}}b._formatAbsolute=function(l,d,c){c=c||{};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);d=d.split(".");var k="string"==typeof c.places&&c.places.indexOf(","),f=c.places;k?f=c.places.substring(k+1):0<=f||(f=(d[1]||[]).length);0>c.round||(l=b.round(l,f,c.round));l=String(Math.abs(l)).split(".");var g=l[1]||"";d[1]||c.places?(k&&(c.places=
c.places.substring(0,k)),k=void 0!==c.places?c.places:d[1]&&d[1].lastIndexOf("0")+1,k>g.length&&(l[1]=s.pad(g,k,"0",!0)),f<g.length&&(l[1]=g.substr(0,f))):l[1]&&l.pop();f=d[0].replace(",","");k=f.indexOf("0");-1!=k&&(k=f.length-k,k>l[0].length&&(l[0]=s.pad(l[0],k)),-1==f.indexOf("#")&&(l[0]=l[0].substr(l[0].length-k)));var f=d[0].lastIndexOf(","),a,e;-1!=f&&(a=d[0].length-f-1,d=d[0].substr(0,f),f=d.lastIndexOf(","),-1!=f&&(e=d.length-f-1));d=[];for(f=l[0];f;)k=f.length-a,d.push(0<k?f.substr(k):f),
f=0<k?f.slice(0,k):"",e&&(a=e,delete e);l[0]=d.reverse().join(c.group||",");return l.join(c.decimal||".")};b.regexp=function(l){return b._parseInfo(l).regexp};b._parseInfo=function(l){l=l||{};var d=t.normalizeLocale(l.locale),d=t.getLocalization("dojo.cldr","number",d),c=l.pattern||d[(l.type||"decimal")+"Format"],k=d.group,f=d.decimal,q=1;if(-1!=c.indexOf("%"))q/=100;else if(-1!=c.indexOf("\u2030"))q/=1E3;else{var a=-1!=c.indexOf("\u00a4");a&&(k=d.currencyGroup||k,f=d.currencyDecimal||f)}d=c.split(";");
1==d.length&&d.push("-"+d[0]);d=g.buildGroupRE(d,function(a){a="(?:"+g.escapeString(a,".")+")";return a.replace(b._numberPatternRE,function(a){var c={signed:!1,separator:l.strict?k:[k,""],fractional:l.fractional,decimal:f,exponent:!1};a=a.split(".");var e=l.places;1==a.length&&1!=q&&(a[1]="###");1==a.length||0===e?c.fractional=!1:(void 0===e&&(e=l.pattern?a[1].lastIndexOf("0")+1:Infinity),e&&void 0==l.fractional&&(c.fractional=!0),!l.places&&e<a[1].length&&(e+=","+a[1].length),c.places=e);a=a[0].split(",");
1<a.length&&(c.groupSize=a.pop().length,1<a.length&&(c.groupSize2=a.pop().length));return"("+b._realNumberRegexp(c)+")"})},!0);a&&(d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,b,c,d){a=g.escapeString(l[["symbol","currency","displayName"][c.length-1]]||l.currency||"");b=b?"[\\s\\xa0]":"";d=d?"[\\s\\xa0]":"";return l.strict?b+a+d:(b&&(b+="*"),d&&(d+="*"),"(?:"+b+a+d+")?")}));return{regexp:d.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:k,decimal:f,factor:q}};b.parse=function(l,d){var c=b._parseInfo(d),
k=RegExp("^"+c.regexp+"$").exec(l);if(!k)return NaN;var f=k[1];if(!k[1]){if(!k[2])return NaN;f=k[2];c.factor*=-1}f=f.replace(RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,".");return f*c.factor};b._realNumberRegexp=function(l){l=l||{};"places"in l||(l.places=Infinity);"string"!=typeof l.decimal&&(l.decimal=".");"fractional"in l&&!/^0/.test(l.places)||(l.fractional=[!0,!1]);"exponent"in l||(l.exponent=[!0,!1]);"eSigned"in l||(l.eSigned=[!0,!1]);var d=b._integerRegexp(l),c=g.buildGroupRE(l.fractional,
function(b){var c="";b&&0!==l.places&&(c="\\"+l.decimal,c=Infinity==l.places?"(?:"+c+"\\d+)?":c+("\\d{"+l.places+"}"));return c},!0),k=g.buildGroupRE(l.exponent,function(c){return c?"([eE]"+b._integerRegexp({signed:l.eSigned})+")":""}),d=d+c;c&&(d="(?:(?:"+d+")|(?:"+c+"))");return d+k};b._integerRegexp=function(b){b=b||{};"signed"in b||(b.signed=[!0,!1]);"separator"in b?"groupSize"in b||(b.groupSize=3):b.separator="";var d=g.buildGroupRE(b.signed,function(b){return b?"[-+]":""},!0),c=g.buildGroupRE(b.separator,
function(c){if(!c)return"(?:\\d+)";c=g.escapeString(c);" "==c?c="\\s":"\u00a0"==c&&(c="\\s\\xa0");var d=b.groupSize,q=b.groupSize2;return q?(c="(?:0|[1-9]\\d{0,"+(q-1)+"}(?:["+c+"]\\d{"+q+"})*["+c+"]\\d{"+d+"})",0<d-q?"(?:"+c+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":c):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+c+"]\\d{"+d+"})*)"},!0);return d+c};return b})},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(p,t,r){var s=p.getObject("validate.regexp",!0,r);return s=r.validate.regexp=
{ipAddress:function(g){g="object"==typeof g?g:{};"boolean"!=typeof g.allowDottedDecimal&&(g.allowDottedDecimal=!0);"boolean"!=typeof g.allowDottedHex&&(g.allowDottedHex=!0);"boolean"!=typeof g.allowDottedOctal&&(g.allowDottedOctal=!0);"boolean"!=typeof g.allowDecimal&&(g.allowDecimal=!0);"boolean"!=typeof g.allowHex&&(g.allowHex=!0);"boolean"!=typeof g.allowIPv6&&(g.allowIPv6=!0);"boolean"!=typeof g.allowHybrid&&(g.allowHybrid=!0);var b=[];g.allowDottedDecimal&&b.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");
g.allowDottedHex&&b.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");g.allowDottedOctal&&b.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");g.allowDecimal&&b.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");g.allowHex&&b.push("0[xX]0*[\\da-fA-F]{1,8}");g.allowIPv6&&b.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");g.allowHybrid&&b.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");
g="";0<b.length&&(g="("+b.join("|")+")");return g},host:function(g){g="object"==typeof g?g:{};"boolean"!=typeof g.allowIP&&(g.allowIP=!0);"boolean"!=typeof g.allowLocal&&(g.allowLocal=!1);"boolean"!=typeof g.allowPort&&(g.allowPort=!0);"boolean"!=typeof g.allowNamed&&(g.allowNamed=!1);var b=g.allowPort?"(\\:\\d+)?":"",n="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)";g.allowIP&&(n+="|"+s.ipAddress(g));g.allowLocal&&(n+="|localhost");g.allowNamed&&
(n+="|^[^-][a-zA-Z0-9_-]*");return"("+n+")"+b},url:function(g){g="object"==typeof g?g:{};"scheme"in g||(g.scheme=[!0,!1]);return t.buildGroupRE(g.scheme,function(b){return b?"(https?|ftps?)\\://":""})+s.host(g)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},emailAddress:function(g){g="object"==typeof g?g:{};"boolean"!=typeof g.allowCruft&&(g.allowCruft=!1);g.allowPort=!1;var b="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@"+s.host(g);g.allowCruft&&(b="<?(mailto\\:)?"+
b+">?");return b},emailAddressList:function(g){g="object"==typeof g?g:{};"string"!=typeof g.listSeparator&&(g.listSeparator="\\s;,");var b=s.emailAddress(g);return"("+b+"\\s*["+g.listSeparator+"]\\s*)*"+b+"\\s*["+g.listSeparator+"]?\\s*"},numberFormat:function(g){g="object"==typeof g?g:{};"undefined"==typeof g.format&&(g.format="###-###-####");return t.buildGroupRE(g.format,function(b){return t.escapeString(b,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},
province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(g){g="object"==typeof g?g:{};"boolean"!=typeof g.allowTerritories&&(g.allowTerritories=!0);"boolean"!=typeof g.allowMilitary&&(g.allowMilitary=!0);var b="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";g.allowTerritories&&(b+="|AS|FM|GU|MH|MP|PW|PR|VI");g.allowMilitary&&(b+="|AA|AE|AP");return"("+b+")"}}}})},
"dojox/main":function(){define(["dojo/_base/kernel"],function(p){return p.dojox})},"dojox/validate/check":function(){define(["dojo/_base/kernel","dojo/_base/lang","./_base"],function(p,t,r){p.experimental("dojox.validate.check");r.check=function(p,g){var b=[],n=[],l={isSuccessful:function(){return!this.hasInvalid()&&!this.hasMissing()},hasMissing:function(){return 0<b.length},getMissing:function(){return b},isMissing:function(a){for(var c=0;c<b.length;c++)if(a==b[c])return!0;return!1},hasInvalid:function(){return 0<
n.length},getInvalid:function(){return n},isInvalid:function(a){for(var b=0;b<n.length;b++)if(a==n[b])return!0;return!1}},d=function(a,b){return"undefined"==typeof b[a]};if(g.trim instanceof Array)for(var c=0;c<g.trim.length;c++){var k=p[g.trim[c]];d("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||(k.value=k.value.replace(/(^\s*|\s*$)/g,""))}if(g.uppercase instanceof Array)for(c=0;c<g.uppercase.length;c++)k=p[g.uppercase[c]],d("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=
k.type||(k.value=k.value.toUpperCase());if(g.lowercase instanceof Array)for(c=0;c<g.lowercase.length;c++)k=p[g.lowercase[c]],d("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||(k.value=k.value.toLowerCase());if(g.ucfirst instanceof Array)for(c=0;c<g.ucfirst.length;c++)k=p[g.ucfirst[c]],d("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||(k.value=k.value.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase()}));if(g.digit instanceof
Array)for(c=0;c<g.digit.length;c++)k=p[g.digit[c]],d("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||(k.value=k.value.replace(/\D/g,""));if(g.required instanceof Array)for(c=0;c<g.required.length;c++)if(t.isString(g.required[c]))if(k=p[g.required[c]],!d("type",k)&&("text"==k.type||"textarea"==k.type||"password"==k.type||"file"==k.type)&&/^\s*$/.test(k.value))b[b.length]=k.name;else if(!(d("type",k)||"select-one"!=k.type&&"select-multiple"!=k.type||-1!=k.selectedIndex&&!/^\s*$/.test(k.options[k.selectedIndex].value)))b[b.length]=
k.name;else if(k instanceof Array){for(var f=!1,q=0;q<k.length;q++)k[q].checked&&(f=!0);f||(b[b.length]=k[0].name)}if(g.required instanceof Array)for(c=0;c<g.required.length;c++)if(t.isObject(g.required[c])){var a,e;for(e in g.required[c])k=p[e],a=g.required[c][e];if(k instanceof Array){for(q=f=0;q<k.length;q++)k[q].checked&&f++;f<a&&(b[b.length]=k[0].name)}else if(!d("type",k)&&"select-multiple"==k.type){for(q=f=0;q<k.options.length;q++)k.options[q].selected&&!/^\s*$/.test(k.options[q].value)&&f++;
f<a&&(b[b.length]=k.name)}}if(t.isObject(g.dependencies))for(e in g.dependencies)k=p[e],d("type",k)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||/\S+/.test(k.value)||l.isMissing(k.name)||(c=p[g.dependencies[e]],"text"!=c.type&&"textarea"!=c.type&&"password"!=c.type||/^\s*$/.test(c.value)||(b[b.length]=k.name));if(t.isObject(g.constraints))for(e in g.constraints)if((k=p[e])&&(d("tagName",k)||!(0<=k.tagName.toLowerCase().indexOf("input")||0<=k.tagName.toLowerCase().indexOf("textarea"))||
!/^\s*$/.test(k.value))){q=!0;if(t.isFunction(g.constraints[e]))q=g.constraints[e](k.value);else if(t.isArray(g.constraints[e]))if(t.isArray(g.constraints[e][0]))for(c=0;c<g.constraints[e].length&&(q=r.evaluateConstraint(g,g.constraints[e][c],e,k),q);c++);else q=r.evaluateConstraint(g,g.constraints[e],e,k);q||(n[n.length]=k.name)}if(t.isObject(g.confirm))for(e in g.confirm)k=p[e],c=p[g.confirm[e]],d("type",k)||d("type",c)||"text"!=k.type&&"textarea"!=k.type&&"password"!=k.type||c.type!=k.type||c.value==
k.value||l.isInvalid(k.name)||/^\s*$/.test(c.value)||(n[n.length]=k.name);return l};r.evaluateConstraint=function(p,g,b,n){p=g[0];g=g.slice(1);g.unshift(n.value);return"undefined"!=typeof p?p.apply(null,g):!1};return r.check})},"dojox/widget/Calendar":function(){define(["dojo/_base/kernel","dojo/_base/declare","./_CalendarBase","./_CalendarDay","./_CalendarMonthYear"],function(p,t,r,s,g){p.experimental("dojox/widget/Calendar");return t("dojox.widget.Calendar",[r,s,g],{})})},"dojox/widget/_CalendarBase":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container dijit/_WidgetsInTemplateMixin dijit/typematic dojo/_base/declare dojo/date dojo/date/stamp dojo/date/locale dojo/dom-style dojo/dom-class dojo/_base/fx dojo/on dojo/_base/array dojo/_base/lang dojo/text!./Calendar/Calendar.html".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){return b("dojox.widget._CalendarBase",[p,t,r,s],{templateString:m,_views:null,useFx:!0,value:new Date,constraints:null,footerFormat:"medium",constructor:function(){this._views=[];this.value=new Date},_setConstraintsAttr:function(a){if(a=this.constraints=a)"string"==typeof a.min&&(a.min=l.fromISOString(a.min)),"string"==typeof a.max&&(a.max=l.fromISOString(a.max))},postMixInProperties:function(){this.inherited(arguments);this.value=this.parseInitialValue(this.value)},
parseInitialValue:function(a){if(!a||-1===a)return new Date;a.getFullYear||isNaN(a)||("string"==typeof this.value&&(a=parseInt(a)),a=this._makeDate(a));return a},_makeDate:function(a){return a},postCreate:function(){this.displayMonth=new Date(this.get("value"));this._isInvalidDate(this.displayMonth)&&(this.displayMonth=new Date);var b={parent:this,_getValueAttr:e.hitch(this,function(){return new Date(this._internalValue||this.value)}),_getDisplayMonthAttr:e.hitch(this,function(){return new Date(this.displayMonth)}),
_getConstraintsAttr:e.hitch(this,function(){return this.constraints}),getLang:e.hitch(this,function(){return this.lang}),isDisabledDate:e.hitch(this,this.isDisabledDate),getClassForDate:e.hitch(this,this.getClassForDate),addFx:this.useFx?e.hitch(this,this.addFx):function(){}};a.forEach(this._views,function(a){a=(new a(b)).placeAt(this);var d=a.getHeader();d&&(this.header.appendChild(d),c.set(d,"display","none"));c.set(a.domNode,"visibility","hidden");a.on("valueSelected",e.hitch(this,"_onDateSelected"));
a.set("value",this.get("value"))},this);2>this._views.length&&c.set(this.header,"cursor","auto");this.inherited(arguments);this._children=this.getChildren();this._currentChild=0;this.footer.innerHTML="Today: "+d.format(new Date,{formatLength:this.footerFormat,selector:"date",locale:this.lang});q(this.footer,"click",e.hitch(this,"goToToday"));var f=this._children[0];c.set(f.domNode,"top","0px");c.set(f.domNode,"visibility","visible");f.getHeader()&&c.set(f.getHeader(),"display","");k.toggle(this.container,
"no-header",!f.useHeader);f.onDisplay();var m=this,f=function(a,b,c){g.addMouseListener(m[a],m,function(a){0<=a&&m._adjustDisplay(b,c)},0.8,500)};f("incrementMonth","month",1);f("decrementMonth","month",-1);this._updateTitleStyle()},addFx:function(a,b){},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a){a||(a=new Date);a.getFullYear||(a=l.fromISOString(a+""));return this._isInvalidDate(a)?!1:!this.value||n.compare(a,this.value)?
(a=new Date(a),this.displayMonth=new Date(a),this._internalValue=a,this.isDisabledDate(a,this.lang)||0!=this._currentChild||(this.value=a,this.onChange(a)),this._children&&0<this._children.length&&this._children[this._currentChild].set("value",this.value),!0):!1},isDisabledDate:function(a,b){var c=this.constraints,e=n.compare;return c&&(c.min&&0<e(c.min,a,"date")||c.max&&0>e(c.max,a,"date"))},onValueSelected:function(a){},_onDateSelected:function(a,b,c){this.displayMonth=a;this.set("value",a);this._transitionVert(-1)||
(b||0===b||(b=this.get("value")),this.onValueSelected(b))},onChange:function(a){},onHeaderClick:function(a){this._transitionVert(1)},goToToday:function(){this.set("value",new Date);this.onValueSelected(this.get("value"))},_transitionVert:function(a){var b=this._children[this._currentChild],e=this._children[this._currentChild+a];if(!e)return!1;c.set(e.domNode,"visibility","visible");var d=c.get(this.containerNode,"height");e.set("value",this.displayMonth);b.header&&c.set(b.header,"display","none");
e.header&&c.set(e.header,"display","");c.set(e.domNode,"top",-1*d+"px");c.set(e.domNode,"visibility","visible");this._currentChild+=a;a*=d;c.set(e.domNode,"top",-1*a+"px");a=f.animateProperty({node:b.domNode,properties:{top:a},onEnd:function(){c.set(b.domNode,"visibility","hidden")}});d=f.animateProperty({node:e.domNode,properties:{top:0},onEnd:function(){e.onDisplay()}});k.toggle(this.container,"no-header",!e.useHeader);a.play();d.play();b.onBeforeUnDisplay();e.onBeforeDisplay();this._updateTitleStyle();
return!0},_updateTitleStyle:function(){k.toggle(this.header,"navToPanel",this._currentChild<this._children.length-1)},_slideTable:function(a,b,e){a=a.domNode;var d=a.cloneNode(!0),m=c.get(a,"width");a.parentNode.appendChild(d);c.set(a,"left",m*b+"px");e();b=f.animateProperty({node:d,properties:{left:m*b*-1},duration:500,onEnd:function(){d.parentNode.removeChild(d)}});e=f.animateProperty({node:a,properties:{left:0},duration:500});b.play();e.play()},_addView:function(a){this._views.push(a)},getClassForDate:function(a,
b){},_adjustDisplay:function(a,b,c){var e=this._children[this._currentChild],d=this.displayMonth=e.adjustDate(this.displayMonth,b);this._slideTable(e,b,function(){e.set("value",d)})}})})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(p,t,r,s,g,b){var n=b.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?
this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(r.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(b,d,c,k,f,g,a,e){if(f!=this._obj){this.stop();this._initialDelay=a||500;this._subsequentDelay=g||0.9;this._minDelay=e||10;this._obj=f;this._node=c;this._count=this._currentTimeout=-1;this._callback=r.hitch(d,k);this._evt={faux:!0};for(var m in b)"layerX"!=m&&"layerY"!=
m&&(d=b[m],"function"!=typeof d&&"undefined"!=typeof d&&(this._evt[m]=d));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(b,d,c,k,f,g,a){var e="keyCode"in d?"keyCode":"charCode"in d?"charCode":"charOrCode",m=[s(b,"keyCode"in d?"keydown":"charCode"in d?"keypress":t._keypress,r.hitch(this,function(m){m[e]!=d[e]||void 0!==d.ctrlKey&&d.ctrlKey!=m.ctrlKey||
void 0!==d.altKey&&d.altKey!=m.altKey||void 0!==d.metaKey&&d.metaKey!=(m.metaKey||!1)||void 0!==d.shiftKey&&d.shiftKey!=m.shiftKey?n._obj==d&&n.stop():(m.stopPropagation(),m.preventDefault(),n.trigger(m,c,b,k,d,f,g,a))})),s(b,"keyup",r.hitch(this,function(){n._obj==d&&n.stop()}))];return{remove:function(){p.forEach(m,function(a){a.remove()})}}},addMouseListener:function(b,d,c,k,f,q){var a=[s(b,"mousedown",r.hitch(this,function(a){a.preventDefault();n.trigger(a,d,b,c,b,k,f,q)})),s(b,"mouseup",r.hitch(this,
function(a){this._obj&&a.preventDefault();n.stop()})),s(b,"mouseout",r.hitch(this,function(a){this._obj&&a.preventDefault();n.stop()})),s(b,"dblclick",r.hitch(this,function(a){a.preventDefault();9>g("ie")&&(n.trigger(a,d,b,c,b,k,f,q),setTimeout(r.hitch(this,n.stop),50))}))];return{remove:function(){p.forEach(a,function(a){a.remove()})}}},addListener:function(b,d,c,k,f,g,a,e){var m=[this.addKeyListener(d,c,k,f,g,a,e),this.addMouseListener(b,k,f,g,a,e)];return{remove:function(){p.forEach(m,function(a){a.remove()})}}}};
return n})},"dojo/date":function(){define(["./has","./_base/lang"],function(p,t){var r={getDaysInMonth:function(p){var g=p.getMonth();return 1==g&&r.isLeapYear(p)?29:[31,28,31,30,31,30,31,31,30,31,30,31][g]},isLeapYear:function(p){p=p.getFullYear();return!(p%400)||!(p%4)&&!!(p%100)},getTimezoneName:function(p){var g=p.toString(),b="",n=g.indexOf("(");if(-1<n)b=g.substring(++n,g.indexOf(")"));else if(n=/([A-Z\/]+) \d{4}$/,g=g.match(n))b=g[1];else if(g=p.toLocaleString(),n=/ ([A-Z\/]+)$/,g=g.match(n))b=
g[1];return"AM"==b||"PM"==b?"":b},compare:function(p,g,b){p=new Date(+p);g=new Date(+(g||new Date));"date"==b?(p.setHours(0,0,0,0),g.setHours(0,0,0,0)):"time"==b&&(p.setFullYear(0,0,0),g.setFullYear(0,0,0));return p>g?1:p<g?-1:0},add:function(p,g,b){var n=new Date(+p),l=!1,d="Date";switch(g){case "day":break;case "weekday":var c;(g=b%5)?c=parseInt(b/5):(g=0<b?5:-5,c=0<b?(b-5)/5:(b+5)/5);var k=p.getDay(),f=0;6==k&&0<b?f=1:0==k&&0>b&&(f=-1);k+=g;if(0==k||6==k)f=0<b?2:-2;b=7*c+g+f;break;case "year":d=
"FullYear";l=!0;break;case "week":b*=7;break;case "quarter":b*=3;case "month":l=!0;d="Month";break;default:d="UTC"+g.charAt(0).toUpperCase()+g.substring(1)+"s"}if(d)n["set"+d](n["get"+d]()+b);l&&n.getDate()<p.getDate()&&n.setDate(0);return n},difference:function(p,g,b){g=g||new Date;b=b||"day";var n=g.getFullYear()-p.getFullYear(),l=1;switch(b){case "quarter":p=p.getMonth();g=g.getMonth();p=Math.floor(p/3)+1;g=Math.floor(g/3)+1;l=g+4*n-p;break;case "weekday":n=Math.round(r.difference(p,g,"day"));
b=parseInt(r.difference(p,g,"week"));l=n%7;if(0==l)n=5*b;else{var d=0,c=p.getDay();g=g.getDay();b=parseInt(n/7);l=n%7;p=new Date(p);p.setDate(p.getDate()+7*b);p=p.getDay();if(0<n)switch(!0){case 6==c:d=-1;break;case 0==c:d=0;break;case 6==g:d=-1;break;case 0==g:d=-2;break;case 5<p+l:d=-2}else if(0>n)switch(!0){case 6==c:d=0;break;case 0==c:d=1;break;case 6==g:d=2;break;case 0==g:d=1;break;case 0>p+l:d=2}n=n+d-2*b}l=n;break;case "year":l=n;break;case "month":l=g.getMonth()-p.getMonth()+12*n;break;
case "week":l=parseInt(r.difference(p,g,"day")/7);break;case "day":l/=24;case "hour":l/=60;case "minute":l/=60;case "second":l/=1E3;case "millisecond":l*=g.getTime()-p.getTime()}return Math.round(l)}};t.mixin(t.getObject("dojo.date",!0),r);return r})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(p,t,r,s,g,b,n,l,d){function c(a,b,c,d){return d.replace(/([a-z])\1*/ig,
function(f){var k,l,g=f.charAt(0);f=f.length;var p=["abbr","wide","narrow"];switch(g){case "G":k=b[4>f?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":k=a.getFullYear();switch(f){case 1:break;case 2:if(!c.fullYear){k=String(k);k=k.substr(k.length-2);break}default:l=!0}break;case "Q":case "q":k=Math.ceil((a.getMonth()+1)/3);l=!0;break;case "M":case "L":k=a.getMonth();3>f?(k+=1,l=!0):(g=["months","L"==g?"standAlone":"format",p[f-3]].join("-"),k=b[g][k]);break;case "w":k=q._getWeekOfYear(a,
0);l=!0;break;case "d":k=a.getDate();l=!0;break;case "D":k=q._getDayOfYear(a);l=!0;break;case "e":case "c":if(k=a.getDay(),2>f){k=(k-s.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":k=a.getDay();3>f?(k+=1,l=!0):(g=["days","c"==g?"standAlone":"format",p[f-3]].join("-"),k=b[g][k]);break;case "a":g=12>a.getHours()?"am":"pm";k=c[g]||b["dayPeriods-format-wide-"+g];break;case "h":case "H":case "K":case "k":l=a.getHours();switch(g){case "h":k=l%12||12;break;case "H":k=l;break;case "K":k=l%12;break;case "k":k=
l||24}l=!0;break;case "m":k=a.getMinutes();l=!0;break;case "s":k=a.getSeconds();l=!0;break;case "S":k=Math.round(a.getMilliseconds()*Math.pow(10,f-3));l=!0;break;case "v":case "z":if(k=q._getZone(a,!0,c))break;f=4;case "Z":g=q._getZone(a,!1,c);g=[0>=g?"+":"-",n.pad(Math.floor(Math.abs(g)/60),2),n.pad(Math.abs(g)%60,2)];4==f&&(g.splice(0,0,"GMT"),g.splice(3,0,":"));k=g.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+d);}l&&(k=n.pad(k,f));return k})}function k(a,
b,c,d){var f=function(a){return a};b=b||f;c=c||f;d=d||f;var k=a.match(/(''|[^'])+/g),l="'"==a.charAt(0);t.forEach(k,function(a,e){a?(k[e]=(l?c:b)(a.replace(/''/g,"'")),l=!l):k[e]=""});return d(k.join(""))}function f(a,c,d,f){f=b.escapeString(f);d.strict||(f=f.replace(" a"," ?a"));return f.replace(/([a-z])\1*/ig,function(b){var f;f=b.charAt(0);var k=b.length,l="",g="";d.strict?(1<k&&(l="0{"+(k-1)+"}"),2<k&&(g="0{"+(k-2)+"}")):(l="0?",g="0{0,2}");switch(f){case "y":f="\\d{2,4}";break;case "M":case "L":f=
2<k?"\\S+?":"1[0-2]|"+l+"[1-9]";break;case "D":f="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+l+"[1-9][0-9]|"+g+"[1-9]";break;case "d":f="3[01]|[12]\\d|"+l+"[1-9]";break;case "w":f="[1-4][0-9]|5[0-3]|"+l+"[1-9]";break;case "E":case "e":case "c":f=".+?";break;case "h":f="1[0-2]|"+l+"[1-9]";break;case "k":f="1[01]|"+l+"\\d";break;case "H":f="1\\d|2[0-3]|"+l+"\\d";break;case "K":f="1\\d|2[0-4]|"+l+"[1-9]";break;case "m":case "s":f="[0-5]\\d";break;case "S":f="\\d{"+k+"}";break;case "a":k=d.am||c["dayPeriods-format-wide-am"];
l=d.pm||c["dayPeriods-format-wide-pm"];f=k+"|"+l;d.strict||(k!=k.toLowerCase()&&(f+="|"+k.toLowerCase()),l!=l.toLowerCase()&&(f+="|"+l.toLowerCase()),-1!=f.indexOf(".")&&(f+="|"+f.replace(/\./g,"")));f=f.replace(/\./g,"\\.");break;default:f=".*"}a&&a.push(b);return"("+f+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var q={};p.setObject(d.id.replace(/\//g,"."),q);q._getZone=function(a,b,c){return b?r.getTimezoneName(a):a.getTimezoneOffset()};q.format=function(a,b){b=b||{};var d=g.normalizeLocale(b.locale),
f=b.formatLength||"short",d=q._getGregorianBundle(d),l=[],n=p.hitch(this,c,a,d,b);if("year"==b.selector)return k(d["dateFormatItem-yyyy"]||"yyyy",n);var r;"date"!=b.selector&&(r=b.timePattern||d["timeFormat-"+f])&&l.push(k(r,n));"time"!=b.selector&&(r=b.datePattern||d["dateFormat-"+f])&&l.push(k(r,n));return 1==l.length?l[0]:d["dateTimeFormat-"+f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return l[b]})};q.regexp=function(a){return q._parseInfo(a).regexp};q._parseInfo=function(a){a=a||{};
var b=g.normalizeLocale(a.locale),b=q._getGregorianBundle(b),c=a.formatLength||"short",d=a.datePattern||b["dateFormat-"+c],l=a.timePattern||b["timeFormat-"+c],c="date"==a.selector?d:"time"==a.selector?l:b["dateTimeFormat-"+c].replace(/\{(\d+)\}/g,function(a,b){return[l,d][b]}),n=[];return{regexp:k(c,p.hitch(this,f,n,b,a)),tokens:n,bundle:b}};q.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,d=q._parseInfo(b),f=d.tokens,k=d.bundle,c=RegExp("^"+d.regexp.replace(c,"")+"$",d.strict?"":"i").exec(a&&
a.replace(c,""));if(!c)return null;var l=["abbr","wide","narrow"],g=[1970,0,1,0,0,0,0],n="",c=t.every(c,function(a,c){if(!c)return!0;var e=f[c-1],d=e.length,e=e.charAt(0);switch(e){case "y":if(2!=d&&b.strict)g[0]=a;else if(100>a)a=Number(a),e=""+(new Date).getFullYear(),d=100*e.substring(0,2),e=Math.min(Number(e.substring(2,4))+20,99),g[0]=a<e?d+a:d-100+a;else{if(b.strict)return!1;g[0]=a}break;case "M":case "L":if(2<d){if(d=k["months-"+("L"==e?"standAlone":"format")+"-"+l[d-3]].concat(),b.strict||
(a=a.replace(".","").toLowerCase(),d=t.map(d,function(a){return a.replace(".","").toLowerCase()})),a=t.indexOf(d,a),-1==a)return!1}else a--;g[1]=a;break;case "E":case "e":case "c":d=k["days-"+("c"==e?"standAlone":"format")+"-"+l[d-3]].concat();b.strict||(a=a.toLowerCase(),d=t.map(d,function(a){return a.toLowerCase()}));a=t.indexOf(d,a);if(-1==a)return!1;break;case "D":g[1]=0;case "d":g[2]=a;break;case "a":d=b.am||k["dayPeriods-format-wide-am"];e=b.pm||k["dayPeriods-format-wide-pm"];if(!b.strict){var q=
/\./g;a=a.replace(q,"").toLowerCase();d=d.replace(q,"").toLowerCase();e=e.replace(q,"").toLowerCase()}if(b.strict&&a!=d&&a!=e)return!1;n=a==e?"p":a==d?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;g[3]=a;break;case "m":g[4]=a;break;case "s":g[5]=a;break;case "S":g[6]=a}return!0}),d=+g[3];"p"===n&&12>d?g[3]=d+12:"a"===n&&12==d&&(g[3]=0);d=new Date(g[0],g[1],g[2],g[3],g[4],g[5],g[6]);b.strict&&d.setFullYear(g[0]);var p=f.join(""),s=-1!=p.indexOf("d"),p=-1!=p.indexOf("M");
if(!c||p&&d.getMonth()>g[1]||s&&d.getDate()>g[2])return null;if(p&&d.getMonth()<g[1]||s&&d.getDate()<g[2])d=r.add(d,"hour",1);return d};var a=[];q.addCustomFormats=function(b,c){a.push({pkg:b,name:c})};q._getGregorianBundle=function(b){var c={};t.forEach(a,function(a){a=g.getLocalization(a.pkg,a.name,b);c=p.mixin(c,a)},this);return c};q.addCustomFormats(d.id.replace(/\/date\/locale$/,".cldr"),"gregorian");q.getNames=function(a,b,c,d){var f;d=q._getGregorianBundle(d);a=[a,c,b];"standAlone"==c&&(c=
a.join("-"),f=d[c],1==f[0]&&(f=void 0));a[1]="format";return(f||d[a.join("-")]).concat()};q.isWeekend=function(a,b){var c=s.getWeekend(b),d=(a||new Date).getDay();c.end<c.start&&(c.end+=7,d<c.start&&(d+=7));return d>=c.start&&d<=c.end};q._getDayOfYear=function(a){return r.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};q._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=(c-b+7)%7,d=Math.floor((q._getDayOfYear(a)+d-1)/7);c==b&&d++;
return d};return q})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(p,t){var r={};p.setObject("dojo.cldr.supplemental",r);r.getFirstDayOfWeek=function(p){p={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,
pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[r._region(p)];return void 0===p?1:p};r._region=function(p){p=t.normalizeLocale(p);p=p.split("-");var g=p[1];g?4==g.length&&(g=p[2]):g={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",
eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",
ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",
uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",
crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",
khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",
nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",
teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[p[0]];return g};r.getWeekend=function(p){var g=r._region(p);p={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[g];g={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,
iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[g];void 0===p&&(p=6);void 0===g&&(g=0);return{start:p,end:g}};return r})},"dojox/widget/_CalendarDay":function(){define(["dojo/_base/declare","./_CalendarDayView"],function(p,t){return p("dojox.widget._CalendarDay",null,{parent:null,constructor:function(){this._addView(t)}})})},"dojox/widget/_CalendarDayView":function(){define("dojo/_base/declare ./_CalendarView dijit/_TemplatedMixin dojo/query dojo/dom-class dojo/_base/event dojo/date dojo/date/locale dojo/text!./Calendar/CalendarDay.html dojo/cldr/supplemental dojo/NodeList-dom".split(" "),
function(p,t,r,s,g,b,n,l,d,c){return p("dojox.widget._CalendarDayView",[t,r],{templateString:d,datePart:"month",dayWidth:"narrow",postCreate:function(){this.cloneClass(".dijitCalendarDayLabelTemplate",6);this.cloneClass(".dijitCalendarDateTemplate",6);this.cloneClass(".dijitCalendarWeekTemplate",5);var b=l.getNames("days",this.dayWidth,"standAlone",this.getLang()),d=c.getFirstDayOfWeek(this.getLang());s(".dijitCalendarDayLabel",this.domNode).forEach(function(c,a){this._setText(c,b[(a+d)%7])},this)},
onDisplay:function(){this._addedFx||(this._addedFx=!0,this.addFx(".dijitCalendarDateTemplate div",this.domNode))},_onDayClick:function(c){if("undefined"!=typeof c.target._date){var d=new Date(this.get("displayMonth")),l=c.target.parentNode;(l=g.contains(l,"dijitCalendarPreviousMonth")?-1:g.contains(l,"dijitCalendarNextMonth")?1:0)&&(d=n.add(d,"month",l));d.setDate(c.target._date);this.isDisabledDate(d)?b.stop(c):this.parent._onDateSelected(d)}},_setValueAttr:function(b){this._populateDays()},_populateDays:function(){var b=
new Date(this.get("displayMonth"));b.setDate(1);var d=b.getDay(),g=n.getDaysInMonth(b),a=n.getDaysInMonth(n.add(b,"month",-1)),e=new Date,m=this.get("value"),p=c.getFirstDayOfWeek(this.getLang());p>d&&(p-=7);var r=n.compare,t=this._lastDate,t=null==t||t.getMonth()!=b.getMonth()||t.getFullYear()!=b.getFullYear();this._lastDate=b;t?(s(".dijitCalendarDateTemplate",this.domNode).forEach(function(c,l){l+=p;var t=new Date(b),z,D="dijitCalendar",H=0;l<d?(z=a-d+l+1,H=-1,D+="Previous"):l>=d+g?(z=l-d-g+1,H=
1,D+="Next"):(z=l-d+1,D+="Current");H&&(t=n.add(t,"month",H));t.setDate(z);r(t,e,"date")||(D="dijitCalendarCurrentDate "+D);r(t,m,"date")||r(t,m,"month")||r(t,m,"year")||(D="dijitCalendarSelectedDate "+D);this.isDisabledDate(t,this.getLang())&&(D=" dijitCalendarDisabledDate "+D);(z=this.getClassForDate(t,this.getLang()))&&(D=z+" "+D);c.className=D+"Month dijitCalendarDateTemplate";c.dijitDateValue=t.valueOf();D=s(".dijitCalendarDateLabel",c)[0];this._setText(D,t.getDate());D._date=D.parentNode._date=
t.getDate()},this),t=l.getNames("months","wide","standAlone",this.getLang()),this._setText(this.monthLabelNode,t[b.getMonth()]),this._setText(this.yearLabelNode,b.getFullYear())):s(".dijitCalendarDateTemplate",this.domNode).removeClass("dijitCalendarSelectedDate").filter(function(a){return-1<a.className.indexOf("dijitCalendarCurrent")&&a._date==m.getDate()}).addClass("dijitCalendarSelectedDate")}})})},"dojox/widget/_CalendarView":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-construct dojo/query dojo/date dojo/_base/window".split(" "),
function(p,t,r,s,g,b){return p("dojox.widget._CalendarView",t,{headerClass:"",useHeader:!0,cloneClass:function(b,l,d){var c=s(b,this.domNode)[0];if(d)for(d=s(b,this.domNode)[0],b=0;b<l;b++)c.parentNode.insertBefore(c.cloneNode(!0),d);else for(b=0;b<l;b++)c.parentNode.appendChild(c.cloneNode(!0))},_setText:function(g,l){g.innerHTML!=l&&(r.empty(g),g.appendChild(b.doc.createTextNode(l)))},getHeader:function(){return this.header||(this.header=r.create("span",{"class":this.headerClass}))},onValueSelected:function(b){},
adjustDate:function(b,l){return g.add(b,this.datePart,l)},onDisplay:function(){},onBeforeDisplay:function(){},onBeforeUnDisplay:function(){}})})},"dojox/widget/_CalendarMonthYear":function(){define(["dojo/_base/declare","./_CalendarMonthYearView"],function(p,t){return p("dojox.widget._CalendarMonthYear",null,{constructor:function(){this._addView(t)}})})},"dojox/widget/_CalendarMonthYearView":function(){define("dojo/_base/declare ./_CalendarView dijit/_TemplatedMixin dojo/query dojo/dom-class dojo/_base/connect dojo/_base/event dojo/_base/lang dojo/date/locale dojo/text!./Calendar/CalendarMonthYear.html".split(" "),
function(p,t,r,s,g,b,n,l,d,c){return p("dojox.widget._CalendarMonthYearView",[t,r],{templateString:c,datePart:"year",displayedYears:10,useHeader:!1,postCreate:function(){this.cloneClass(".dojoxCal-MY-G-Template",5,".dojoxCal-MY-btns");this.monthContainer=this.yearContainer=this.myContainer;s(".dojoxCalendarYearLabel",this.myContainer).forEach(function(b,c){var d="dojoxCalendarIncrease";switch(c){case 0:d="dojoxCalendarDecrease";case 1:g.remove(b,"dojoxCalendarYearLabel"),g.add(b,d)}});this._decBtn=
s(".dojoxCalendarDecrease",this.myContainer)[0];this._incBtn=s(".dojoxCalendarIncrease",this.myContainer)[0];s(".dojoxCal-MY-M-Template",this.domNode).filter(function(b){return 1==b.cellIndex}).addClass("dojoxCal-MY-M-last");b.connect(this,"onBeforeDisplay",l.hitch(this,function(){this._cachedDate=new Date(this.get("value").getTime());this._populateYears(this._cachedDate.getFullYear());this._populateMonths();this._updateSelectedMonth();this._updateSelectedYear()}));b.connect(this,"_populateYears",
l.hitch(this,function(){this._updateSelectedYear()}));b.connect(this,"_populateMonths",l.hitch(this,function(){this._updateSelectedMonth()}));this._cachedDate=this.get("value");this._populateYears();this._populateMonths();this.addFx(".dojoxCalendarMonthLabel,.dojoxCalendarYearLabel ",this.myContainer)},_setValueAttr:function(b){b&&b.getFullYear()&&this._populateYears(b.getFullYear())},getHeader:function(){return null},_getMonthNames:function(b){return this._monthNames=this._monthNames||d.getNames("months",
b,"standAlone",this.getLang())},_populateMonths:function(){var b,c=this._getMonthNames("abbr"),d=this.get("value").getFullYear(),a=c[this.get("value").getMonth()],e=this.get("displayedYear");s(".dojoxCalendarMonthLabel",this.monthContainer).forEach(l.hitch(this,function(m,l){this._setText(m,c[l]);b=a===c[l]&&d===e;g.toggle(m.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],b)}));var m=this.get("constraints");if(m){(new Date).setFullYear(this._year);var n=-1,p=12;if(m.min){var r=
m.min.getFullYear();r>this._year?n=12:r==this._year&&(n=m.min.getMonth())}m.max&&(r=m.max.getFullYear(),r<this._year?p=-1:r==this._year&&(p=m.max.getMonth()));s(".dojoxCalendarMonthLabel",this.monthContainer).forEach(l.hitch(this,function(a,b){g[b<n||b>p?"add":"remove"](a,"dijitCalendarDisabledDate")}))}},_populateYears:function(b){var c,d=this.get("constraints"),a=this.get("value").getFullYear(),e=b||a,m=e-Math.floor(this.displayedYears/2);b=d&&d.min?d.min.getFullYear():m-1E4;this._displayedYear=
e;var e=s(".dojoxCalendarYearLabel",this.yearContainer),n=d&&d.max?d.max.getFullYear()-m:e.length,p;e.forEach(l.hitch(this,function(b,e){e<=n&&this._setText(b,m+e);p=m+e==a;g.toggle(b.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],p);g.toggle(b,"dijitCalendarDisabledDate",e>n);c=m+e==a;g.toggle(b.parentNode,["dijitCalendarSelectedDate","dijitCalendarCurrentDate"],c)}));this._incBtn&&g.toggle(this._incBtn,"dijitCalendarDisabledDate",n<e.length);this._decBtn&&g.toggle(this._decBtn,
"dijitCalendarDisabledDate",b>=m);this.getHeader()&&this._setText(this.getHeader(),m+" - "+(m+11))},_updateSelectedYear:function(){this._year=String((this._cachedDate||this.get("value")).getFullYear());this._updateSelectedNode(".dojoxCalendarYearLabel",l.hitch(this,function(b){return null!==this._year&&b.innerHTML==this._year}))},_updateSelectedMonth:function(){var b=(this._cachedDate||this.get("value")).getMonth();this._month=b;this._updateSelectedNode(".dojoxCalendarMonthLabel",function(c,d){return d==
b})},_updateSelectedNode:function(b,c){s(b,this.domNode).forEach(function(a,b,d){g.toggle(a.parentNode,"dijitCalendarSelectedDate",c(a,b,d))});var d=s(".dojoxCal-MY-M-Template div",this.myContainer).filter(function(a){return g.contains(a.parentNode,"dijitCalendarSelectedDate")})[0];d&&(d=g.contains(d,"dijitCalendarDisabledDate"),g.toggle(this.okBtn,"dijitDisabled",d))},onClick:function(b){function c(d){return g.contains(b.target,d)}if(c("dijitCalendarDisabledDate"))return n.stop(b),!1;if(c("dojoxCalendarMonthLabel"))this._month=
b.target.parentNode.cellIndex+2*b.target.parentNode.parentNode.rowIndex,this._cachedDate.setMonth(this._month),this._updateSelectedMonth();else if(c("dojoxCalendarYearLabel"))this._year=Number(b.target.innerHTML),this._cachedDate.setYear(this._year),this._populateMonths(),this._updateSelectedYear();else return c("dojoxCalendarDecrease")?this._populateYears(this._displayedYear-10):c("dojoxCalendarIncrease")&&this._populateYears(this._displayedYear+10),!0;n.stop(b);return!1},onOk:function(b){n.stop(b);
if(g.contains(this.okBtn,"dijitDisabled"))return!1;this.onValueSelected(this._cachedDate);return!1},onCancel:function(b){n.stop(b);this.onValueSelected(this.get("value"));return!1}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(p,t,r){t.switchTo(r);return t})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(p,t,r,s,g,b,n,l,d){var c=t.getObject("dojox.gfx",!0),k=c._base={};c._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};c._addClass=function(a,b){var c=a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};c._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};k._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;s("ie")&&(g.doc.documentElement.style.fontSize="100%");var c=l.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},g.body());for(b in a)c.style.fontSize=b,a[b]=16*Math.round(12*c.offsetHeight/16)/12/1E3;g.body().removeChild(c);return a};var f=null;k._getCachedFontMeasurements=
function(a){if(a||!f)f=k._getFontMeasurements();return f};var q=null,a={};k._getTextBox=function(b,c,e){var f,k,n=arguments.length,p;q||(q=l.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},g.body()));f=q;f.className="";k=f.style;k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";if(1<n&&c)for(p in c)p in a||(k[p]=c[p]);2<n&&e&&(f.className=e);f.innerHTML=b;return f.getBoundingClientRect?(f=f.getBoundingClientRect(),{l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||
f.bottom-f.top}):d.getMarginBox(f)};k._computeTextLocation=function(a,b,c,e){var d={};switch(a.align){case "end":d.x=a.x-b;break;case "middle":d.x=a.x-b/2;break;default:d.x=a.x}d.y=a.y-c*(e?0.75:1);return d};k._computeTextBoundingBox=function(a){if(!c._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var e=a.getFont()||c.defaultFont;a=a.getTextWidth();e=c.normalizedLength(e.size);b=k._computeTextLocation(b,a,e,!0);return{x:b.x,y:b.y,width:a,height:e}};k._isRendered=function(a){for(a=
a.parent;a&&a.getParent;)a=a.parent;return null!==a};var e=0;k._getUniqueId=function(){var a;do a=p._scopeName+"xUnique"+ ++e;while(n.byId(a));return a};k._fixMsTouchAction=function(a){a=a.rawNode;"undefined"!=typeof a.style.msTouchAction&&(a.style.msTouchAction="none")};t.mixin(c,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",
cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,
color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var e=a[b];if(e)return new e;e=a[b]=new Function;e.prototype=c["default"+b];return new e}}(),normalizeColor:function(a){return a instanceof r?a:new r(a)},normalizeParameters:function(a,
b){var c;if(b){var e={};for(c in a)c in b&&!(c in e)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return t.delegate(a);var e={};for(c in a)c in e||(e[c]=t.clone(c in b?b[c]:a[c]));return e},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var e=c.indexOf(".");0<=e&&5<c.length-e&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=
c.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var e=a[3].indexOf("/");b.size=0>e?a[3]:a[3].substring(0,e);var d=4;0>e&&("/"==a[4]?d=6:"/"==a[4].charAt(0)&&(d=5));d<a.length&&(b.family=a.slice(d).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return c._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*c.px_in_pt()},px2pt:function(a){return a/c.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;
if(2<a.length){var b=c.px_in_pt(),e=parseFloat(a);switch(a.slice(-2)){case "px":return e;case "pt":return e*b;case "in":return 72*e*b;case "pc":return 12*e*b;case "mm":return e*c.mm_in_pt*b;case "cm":return e*c.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var e="string"==typeof a?c[a]:a;e&&(b.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),
function(a){c[a]=e[a]}),"string"==typeof a?c.renderer=a:b.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return c.renderer=c[a]&&c[a].Surface===c.Surface?a:null}))}});return c})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(p,t,r,s,g){var b=null;r.add("vml",function(b,l,d){d.innerHTML='<v:shape adj="1"/>';b="adj"in d.firstChild;d.innerHTML="";return b});return{load:function(n,l,d){function c(){l(["dojox/gfx/"+
k],function(a){p.renderer=k;b=a;d(a)})}if(b&&"force"!=n)d(b);else{var k=g.forceGfxRenderer;n=!k&&(t.isString(g.gfxRenderer)?g.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var f,q;!k&&n.length;)switch(n.shift()){case "svg":"SVGAngle"in s.global&&(k="svg");break;case "vml":r("vml")&&(k="vml");break;case "silverlight":try{r("ie")?(f=new ActiveXObject("AgControl.AgControl"))&&f.IsVersionSupported("1.0")&&(q=!0):navigator.plugins["Silverlight Plug-In"]&&(q=!0)}catch(a){q=!1}finally{f=null}q&&
(k="silverlight");break;case "canvas":s.global.CanvasRenderingContext2D&&(k="canvas")}"canvas"===k&&!1!==g.canvasEvents&&(k="canvasWithEvents");"svg"==k&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(c):c()}}}})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(p,t,r,s,g){g=r("dojox.gfx.path.Path",g.Shape,{constructor:function(b){this.shape=t.clone(p.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last=
{};this.rawNode=b;this.segmented=!1},setAbsoluteMode:function(b){this._confirmSegmented();this.absolute="string"==typeof b?"absolute"==b:b;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var b=this.bbox,
g=this._getRealMatrix();this.bbox=null;for(var l=0,d=this.segments.length;l<d;++l)this._updateWithSegment(this.segments[l],g);g=this.bbox;this.bbox=b;return this.tbbox=g?[{x:g.l,y:g.t},{x:g.r,y:g.t},{x:g.r,y:g.b},{x:g.l,y:g.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(b,g,l){l&&(g=s.multiplyPoint(l,b,g),b=g.x,g=g.y);this.bbox&&"l"in this.bbox?(this.bbox.l>
b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>g&&(this.bbox.t=g),this.bbox.b<g&&(this.bbox.b=g)):this.bbox={l:b,b:g,r:b,t:g}},_updateWithSegment:function(b,g){var l=b.args,d=l.length,c;switch(b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(c=0;c<d;c+=2)this._updateBBox(l[c],l[c+1],g);this.last.x=l[d-2];this.last.y=l[d-1];this.absolute=!0;break;case "H":for(c=0;c<d;++c)this._updateBBox(l[c],this.last.y,g);this.last.x=l[d-1];this.absolute=!0;break;case "V":for(c=
0;c<d;++c)this._updateBBox(this.last.x,l[c],g);this.last.y=l[d-1];this.absolute=!0;break;case "m":c=0;"x"in this.last||(this._updateBBox(this.last.x=l[0],this.last.y=l[1],g),c=2);for(;c<d;c+=2)this._updateBBox(this.last.x+=l[c],this.last.y+=l[c+1],g);this.absolute=!1;break;case "l":case "t":for(c=0;c<d;c+=2)this._updateBBox(this.last.x+=l[c],this.last.y+=l[c+1],g);this.absolute=!1;break;case "h":for(c=0;c<d;++c)this._updateBBox(this.last.x+=l[c],this.last.y,g);this.absolute=!1;break;case "v":for(c=
0;c<d;++c)this._updateBBox(this.last.x,this.last.y+=l[c],g);this.absolute=!1;break;case "c":for(c=0;c<d;c+=6)this._updateBBox(this.last.x+l[c],this.last.y+l[c+1],g),this._updateBBox(this.last.x+l[c+2],this.last.y+l[c+3],g),this._updateBBox(this.last.x+=l[c+4],this.last.y+=l[c+5],g);this.absolute=!1;break;case "s":case "q":for(c=0;c<d;c+=4)this._updateBBox(this.last.x+l[c],this.last.y+l[c+1],g),this._updateBBox(this.last.x+=l[c+2],this.last.y+=l[c+3],g);this.absolute=!1;break;case "A":for(c=0;c<d;c+=
7)this._updateBBox(l[c+5],l[c+6],g);this.last.x=l[d-2];this.last.y=l[d-1];this.absolute=!0;break;case "a":for(c=0;c<d;c+=7)this._updateBBox(this.last.x+=l[c+5],this.last.y+=l[c+6],g);this.absolute=!1}var k=[b.action];for(c=0;c<d;++c)k.push(p.formatNumber(l[c],!0));"string"==typeof this.shape.path?this.shape.path+=k.join(""):Array.prototype.push.apply(this.shape.path,k)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(b,g){this.tbbox=null;var l=this._validSegments[b.toLowerCase()];
"number"==typeof l&&(l?g.length>=l&&(l={action:b,args:g.slice(0,g.length-g.length%l)},this.segments.push(l),this._updateWithSegment(l)):(l={action:b,args:[]},this.segments.push(l),this._updateWithSegment(l)))},_collectArgs:function(b,g){for(var l=0;l<g.length;++l){var d=g[l];"boolean"==typeof d?b.push(d?1:0):"number"==typeof d?b.push(d):d instanceof Array?this._collectArgs(b,d):"x"in d&&"y"in d&&b.push(d.x,d.y)}},moveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?
"M":"m",b);return this},lineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"L":"l",b);return this},hLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"H":"h",b);return this},vLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"V":"v",b);return this},curveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,
arguments);this._pushSegment(this.absolute?"C":"c",b);return this},smoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"S":"s",b);return this},qCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"Q":"q",b);return this},qSmoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"T":"t",b);return this},
arcTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"A":"a",b);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var b=this.shape.path;this.shape.path=[];this._setPath(b);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(b){b=t.isArray(b)?b:b.match(p.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};
this.last={};if(b){for(var g="",l=[],d=b.length,c=0;c<d;++c){var k=b[c],f=parseFloat(k);isNaN(f)?(g&&this._pushSegment(g,l),l=[],g=k):l.push(f)}this._pushSegment(g,l)}},setShape:function(b){this.inherited(arguments,["string"==typeof b?{path:b}:b]);this.segmented=!1;this.segments=[];p.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});r=r("dojox.gfx.path.TextPath",g,{constructor:function(b){"text"in this||(this.text=t.clone(p.defaultTextPath));"fontStyle"in this||(this.fontStyle=
t.clone(p.defaultFont))},getText:function(){return this.text},setText:function(b){this.text=p.makeParameters(this.text,"string"==typeof b?{text:b}:b);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?p.splitFontString(b):p.makeParameters(p.defaultFont,b);this._setFont();return this}});return p.path={Path:g,TextPath:r}})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(p,t){var r=p.matrix={},s={};
r._degToRad=function(g){return s[g]||(s[g]=Math.PI*g/180)};r._radToDeg=function(g){return g/Math.PI*180};r.Matrix2D=function(g){if(g)if("number"==typeof g)this.xx=this.yy=g;else if(g instanceof Array){if(0<g.length){for(var b=r.normalize(g[0]),n=1;n<g.length;++n){var l=b,d=r.normalize(g[n]),b=new r.Matrix2D;b.xx=l.xx*d.xx+l.xy*d.yx;b.xy=l.xx*d.xy+l.xy*d.yy;b.yx=l.yx*d.xx+l.yy*d.yx;b.yy=l.yx*d.xy+l.yy*d.yy;b.dx=l.xx*d.dx+l.xy*d.dy+l.dx;b.dy=l.yx*d.dx+l.yy*d.dy+l.dy}t.mixin(this,b)}}else t.mixin(this,
g)};t.extend(r.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});t.mixin(r,{identity:new r.Matrix2D,flipX:new r.Matrix2D({xx:-1}),flipY:new r.Matrix2D({yy:-1}),flipXY:new r.Matrix2D({xx:-1,yy:-1}),translate:function(g,b){return 1<arguments.length?new r.Matrix2D({dx:g,dy:b}):new r.Matrix2D({dx:g.x,dy:g.y})},scale:function(g,b){return 1<arguments.length?new r.Matrix2D({xx:g,yy:b}):"number"==typeof g?new r.Matrix2D({xx:g,yy:g}):new r.Matrix2D({xx:g.x,yy:g.y})},rotate:function(g){var b=Math.cos(g);g=Math.sin(g);
return new r.Matrix2D({xx:b,xy:-g,yx:g,yy:b})},rotateg:function(g){return r.rotate(r._degToRad(g))},skewX:function(g){return new r.Matrix2D({xy:Math.tan(g)})},skewXg:function(g){return r.skewX(r._degToRad(g))},skewY:function(g){return new r.Matrix2D({yx:Math.tan(g)})},skewYg:function(g){return r.skewY(r._degToRad(g))},reflect:function(g,b){1==arguments.length&&(b=g.y,g=g.x);var n=g*g,l=b*b,d=n+l,c=2*g*b/d;return new r.Matrix2D({xx:2*n/d-1,xy:c,yx:c,yy:2*l/d-1})},project:function(g,b){1==arguments.length&&
(b=g.y,g=g.x);var n=g*g,l=b*b,d=n+l,c=g*b/d;return new r.Matrix2D({xx:n/d,xy:c,yx:c,yy:l/d})},normalize:function(g){return g instanceof r.Matrix2D?g:new r.Matrix2D(g)},isIdentity:function(g){return 1==g.xx&&0==g.xy&&0==g.yx&&1==g.yy&&0==g.dx&&0==g.dy},clone:function(g){var b=new r.Matrix2D,n;for(n in g)"number"==typeof g[n]&&"number"==typeof b[n]&&b[n]!=g[n]&&(b[n]=g[n]);return b},invert:function(g){g=r.normalize(g);var b=g.xx*g.yy-g.xy*g.yx;return g=new r.Matrix2D({xx:g.yy/b,xy:-g.xy/b,yx:-g.yx/
b,yy:g.xx/b,dx:(g.xy*g.dy-g.yy*g.dx)/b,dy:(g.yx*g.dx-g.xx*g.dy)/b})},_multiplyPoint:function(g,b,n){return{x:g.xx*b+g.xy*n+g.dx,y:g.yx*b+g.yy*n+g.dy}},multiplyPoint:function(g,b,n){g=r.normalize(g);return"number"==typeof b&&"number"==typeof n?r._multiplyPoint(g,b,n):r._multiplyPoint(g,b.x,b.y)},multiplyRectangle:function(g,b){var n=r.normalize(g);b=b||{x:0,y:0,width:0,height:0};if(r.isIdentity(n))return{x:b.x,y:b.y,width:b.width,height:b.height};var l=r.multiplyPoint(n,b.x,b.y),d=r.multiplyPoint(n,
b.x,b.y+b.height),c=r.multiplyPoint(n,b.x+b.width,b.y),k=r.multiplyPoint(n,b.x+b.width,b.y+b.height),n=Math.min(l.x,d.x,c.x,k.x),f=Math.min(l.y,d.y,c.y,k.y),q=Math.max(l.x,d.x,c.x,k.x),l=Math.max(l.y,d.y,c.y,k.y);return{x:n,y:f,width:q-n,height:l-f}},multiply:function(g){for(var b=r.normalize(g),n=1;n<arguments.length;++n){var l=b,d=r.normalize(arguments[n]),b=new r.Matrix2D;b.xx=l.xx*d.xx+l.xy*d.yx;b.xy=l.xx*d.xy+l.xy*d.yy;b.yx=l.yx*d.xx+l.yy*d.yx;b.yy=l.yx*d.xy+l.yy*d.yy;b.dx=l.xx*d.dx+l.xy*d.dy+
l.dx;b.dy=l.yx*d.dx+l.yy*d.dy+l.dy}return b},_sandwich:function(g,b,n){return r.multiply(r.translate(b,n),g,r.translate(-b,-n))},scaleAt:function(g,b,n,l){switch(arguments.length){case 4:return r._sandwich(r.scale(g,b),n,l);case 3:return"number"==typeof n?r._sandwich(r.scale(g),b,n):r._sandwich(r.scale(g,b),n.x,n.y)}return r._sandwich(r.scale(g),b.x,b.y)},rotateAt:function(g,b,n){return 2<arguments.length?r._sandwich(r.rotate(g),b,n):r._sandwich(r.rotate(g),b.x,b.y)},rotategAt:function(g,b,n){return 2<
arguments.length?r._sandwich(r.rotateg(g),b,n):r._sandwich(r.rotateg(g),b.x,b.y)},skewXAt:function(g,b,n){return 2<arguments.length?r._sandwich(r.skewX(g),b,n):r._sandwich(r.skewX(g),b.x,b.y)},skewXgAt:function(g,b,n){return 2<arguments.length?r._sandwich(r.skewXg(g),b,n):r._sandwich(r.skewXg(g),b.x,b.y)},skewYAt:function(g,b,n){return 2<arguments.length?r._sandwich(r.skewY(g),b,n):r._sandwich(r.skewY(g),b.x,b.y)},skewYgAt:function(g,b,n){return 2<arguments.length?r._sandwich(r.skewYg(g),b,n):r._sandwich(r.skewYg(g),
b.x,b.y)}});p.Matrix2D=r.Matrix2D;return r})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(p,t,r,s,g,b,n,l,d,c){var k=p.shape={};k.Shape=r("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(g("gfxRegistry")){var b=k.register(this);
this.getUID=function(){return b}}},destroy:function(){g("gfxRegistry")&&k.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var b=
this.getBoundingBox();if(!b)return null;var d=this._getRealMatrix();return[c.multiplyPoint(d,b.x,b.y),c.multiplyPoint(d,b.x+b.width,b.y),c.multiplyPoint(d,b.x+b.width,b.y+b.height),c.multiplyPoint(d,b.x,b.y+b.height)]},getEventSource:function(){return this.rawNode},setClip:function(b){this.clip=b},getClip:function(){return this.clip},setShape:function(b){this.shape=p.makeParameters(this.shape,b);this.bbox=null;return this},setFill:function(b){if(!b)return this.fillStyle=null,this;var c=null;if("object"==
typeof b&&"type"in b)switch(b.type){case "linear":c=p.makeParameters(p.defaultLinearGradient,b);break;case "radial":c=p.makeParameters(p.defaultRadialGradient,b);break;case "pattern":c=p.makeParameters(p.defaultPattern,b)}else c=p.normalizeColor(b);this.fillStyle=c;return this},setStroke:function(b){if(!b)return this.strokeStyle=null,this;if("string"==typeof b||t.isArray(b)||b instanceof d)b={color:b};b=this.strokeStyle=p.makeParameters(p.defaultStroke,b);b.color=p.normalizeColor(b.color);return this},
setTransform:function(b){this.matrix=c.clone(b?c.normalize(b):c.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var b=this.getParent();b&&(b._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var b=this.getParent();b&&(b._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(b){return b?this.setTransform([this.matrix,b]):this},applyLeftTransform:function(b){return b?
this.setTransform([b,this.matrix]):this},applyTransform:function(b){return b?this.setTransform([this.matrix,b]):this},removeShape:function(b){this.parent&&this.parent.remove(this,b);return this},_setParent:function(b,c){this.parent=b;return this._updateParentMatrix(c)},_updateParentMatrix:function(b){this.parentMatrix=b?c.clone(b):null;return this._applyTransform()},_getRealMatrix:function(){for(var b=this.matrix,d=this.parent;d;)d.matrix&&(b=c.multiply(d.matrix,b)),d=d.parent;return b}});k._eventsProcessing=
{on:function(c,d){return b(this.getEventSource(),c,k.fixCallback(this,p.fixTarget,d))},connect:function(b,c,a){"on"==b.substring(0,2)&&(b=b.substring(2));return this.on(b,a?t.hitch(c,a):c)},disconnect:function(b){return b.remove()}};k.fixCallback=function(b,c,a,e){e||(e=a,a=null);if(t.isString(e)){a=a||s.global;if(!a[e])throw['dojox.gfx.shape.fixCallback: scope["',e,'"] is null (scope="',a,'")'].join("");return function(d){return c(d,b)?a[e].apply(a,arguments||[]):void 0}}return a?function(d){return c(d,
b)?e.apply(a,arguments||[]):void 0}:function(d){return c(d,b)?e.apply(a,arguments):void 0}};t.extend(k.Shape,k._eventsProcessing);k.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(b){var c=b.getParent();c&&c.remove(b,!0);this.children.push(b);return b._setParent(this,this._getRealMatrix())},remove:function(b,c){for(var a=0;a<this.children.length;++a)if(this.children[a]==b){c||(b.parent=null,b.parentMatrix=
null);this.children.splice(a,1);break}return this},clear:function(b){for(var c,a=0;a<this.children.length;++a)c=this.children[a],c.parent=null,c.parentMatrix=null,b&&c.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var b=null;n.forEach(this.children,function(d){var a=d.getBoundingBox();a&&((d=d.getTransform())&&(a=c.multiplyRectangle(d,a)),b?(b.x=Math.min(b.x,a.x),b.y=Math.min(b.y,a.y),b.endX=Math.max(b.endX,a.x+a.width),b.endY=Math.max(b.endY,a.y+a.height)):b=
{x:a.x,y:a.y,endX:a.x+a.width,endY:a.y+a.height})});b&&(b.width=b.endX-b.x,b.height=b.endY-b.y);return b}return null},_moveChildToFront:function(b){for(var c=0;c<this.children.length;++c)if(this.children[c]==b){this.children.splice(c,1);this.children.push(b);break}return this},_moveChildToBack:function(b){for(var c=0;c<this.children.length;++c)if(this.children[c]==b){this.children.splice(c,1);this.children.unshift(b);break}return this}};k.Surface=r("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=
this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){n.forEach(this._nodes,l.destroy);this._nodes=[];n.forEach(this._events,function(b){b&&b.remove()});this._events=[];this.rawNode=null;if(g("ie"))for(;this._parent.lastChild;)l.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(b){},whenLoaded:function(c,d){var a=t.hitch(c,d);if(this.isLoaded)a(this);
else b.once(this,"load",function(b){a(b)})}});t.extend(k.Surface,k._eventsProcessing);k.Rect=r("dojox.gfx.shape.Rect",k.Shape,{constructor:function(b){this.shape=p.getDefault("Rect");this.rawNode=b},getBoundingBox:function(){return this.shape}});k.Ellipse=r("dojox.gfx.shape.Ellipse",k.Shape,{constructor:function(b){this.shape=p.getDefault("Ellipse");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.rx,y:b.cy-b.ry,width:2*b.rx,height:2*b.ry}}return this.bbox}});
k.Circle=r("dojox.gfx.shape.Circle",k.Shape,{constructor:function(b){this.shape=p.getDefault("Circle");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:b.cx-b.r,y:b.cy-b.r,width:2*b.r,height:2*b.r}}return this.bbox}});k.Line=r("dojox.gfx.shape.Line",k.Shape,{constructor:function(b){this.shape=p.getDefault("Line");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var b=this.shape;this.bbox={x:Math.min(b.x1,b.x2),y:Math.min(b.y1,b.y2),width:Math.abs(b.x2-
b.x1),height:Math.abs(b.y2-b.y1)}}return this.bbox}});k.Polyline=r("dojox.gfx.shape.Polyline",k.Shape,{constructor:function(b){this.shape=p.getDefault("Polyline");this.rawNode=b},setShape:function(b,c){b&&b instanceof Array?(this.inherited(arguments,[{points:b}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[b]);return this},_normalizePoints:function(){var b=this.shape.points,c=b&&b.length;if(c&&"number"==typeof b[0]){for(var a=[],e=0;e<c;e+=
2)a.push({x:b[e],y:b[e+1]});this.shape.points=a}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var b=this.shape.points,c=b.length,a=b[0],e=a.x,d=a.y,k=a.x,l=a.y,g=1;g<c;++g)a=b[g],e>a.x&&(e=a.x),k<a.x&&(k=a.x),d>a.y&&(d=a.y),l<a.y&&(l=a.y);this.bbox={x:e,y:d,width:k-e,height:l-d}}return this.bbox}});k.Image=r("dojox.gfx.shape.Image",k.Shape,{constructor:function(b){this.shape=p.getDefault("Image");this.rawNode=b},getBoundingBox:function(){return this.shape},setStroke:function(){return this},
setFill:function(){return this}});k.Text=r(k.Shape,{constructor:function(b){this.fontStyle=null;this.shape=p.getDefault("Text");this.rawNode=b},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?p.splitFontString(b):p.makeParameters(p.defaultFont,b);this._setFont();return this},getBoundingBox:function(){var b=null;this.getShape().text&&(b=p._base._computeTextBoundingBox(this));return b}});k.Creator={createShape:function(b){switch(b.type){case p.defaultPath.type:return this.createPath(b);
case p.defaultRect.type:return this.createRect(b);case p.defaultCircle.type:return this.createCircle(b);case p.defaultEllipse.type:return this.createEllipse(b);case p.defaultLine.type:return this.createLine(b);case p.defaultPolyline.type:return this.createPolyline(b);case p.defaultImage.type:return this.createImage(b);case p.defaultText.type:return this.createText(b);case p.defaultTextPath.type:return this.createTextPath(b)}return null},createGroup:function(){return this.createObject(p.Group)},createRect:function(b){return this.createObject(p.Rect,
b)},createEllipse:function(b){return this.createObject(p.Ellipse,b)},createCircle:function(b){return this.createObject(p.Circle,b)},createLine:function(b){return this.createObject(p.Line,b)},createPolyline:function(b){return this.createObject(p.Polyline,b)},createImage:function(b){return this.createObject(p.Image,b)},createText:function(b){return this.createObject(p.Text,b)},createPath:function(b){return this.createObject(p.Path,b)},createTextPath:function(b){return this.createObject(p.TextPath,{}).setText(b)},
createObject:function(b,c){return null}};return k})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f){function q(a,b){return r.doc.createElementNS?r.doc.createElementNS(a,b):r.doc.createElement(b)}function a(a,b,c,e){return a.setAttributeNS?a.setAttributeNS(b,c,e):a.setAttribute(c,e)}function e(a){return m.useSvgWeb?
r.doc.createTextNode(a,!0):r.doc.createTextNode(a)}var m=c.svg={};m.useSvgWeb="undefined"!=typeof window.svgweb;var v=navigator.userAgent,x=t("ios"),z=t("android"),A=t("chrome")||z&&4<=z?"auto":"optimizeLegibility";m.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};m.getRef=function(a){return a&&"none"!=a?a.match(/^url\(#.+\)$/)?s.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?s.byId(a.slice(1)):null:null};m.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,
1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var y=0;m.Shape=g("dojox.gfx.svg.Shape",k.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=m.getRef(a))&&a.parentNode.removeChild(a)}this.clip&&(a=this.rawNode.getAttribute("clip-path"))&&(a=s.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);k.Shape.prototype.destroy.apply(this,
arguments)},setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var e,d=function(a){this.setAttribute(a,e[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":e=c.makeParameters(c.defaultLinearGradient,a);a=this._setFillObject(e,"linearGradient");b.forEach(["x1","y1","x2","y2"],d,a);break;case "radial":e=c.makeParameters(c.defaultRadialGradient,a);a=this._setFillObject(e,"radialGradient");
b.forEach(["cx","cy","r"],d,a);break;case "pattern":e=c.makeParameters(c.defaultPattern,a),a=this._setFillObject(e,"pattern"),b.forEach(["x","y","width","height"],d,a)}this.fillStyle=e;return this}this.fillStyle=e=c.normalizeColor(a);this.rawNode.setAttribute("fill",e.toCss());this.rawNode.setAttribute("fill-opacity",e.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(a){var b=this.rawNode;if(!a)return this.strokeStyle=null,b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",
0),this;if("string"==typeof a||p.isArray(a)||a instanceof d)a={color:a};a=this.strokeStyle=c.makeParameters(c.defaultStroke,a);a.color=c.normalizeColor(a.color);if(a){b.setAttribute("stroke",a.color.toCss());b.setAttribute("stroke-opacity",a.color.a);b.setAttribute("stroke-width",a.width);b.setAttribute("stroke-linecap",a.cap);"number"==typeof a.join?(b.setAttribute("stroke-linejoin","miter"),b.setAttribute("stroke-miterlimit",a.join)):b.setAttribute("stroke-linejoin",a.join);var e=a.style.toLowerCase();
e in m.dasharray&&(e=m.dasharray[e]);if(e instanceof Array){var e=p._toArray(e),f;for(f=0;f<e.length;++f)e[f]*=a.width;if("butt"!=a.cap){for(f=0;f<e.length;f+=2)e[f]-=a.width,1>e[f]&&(e[f]=1);for(f=1;f<e.length;f+=2)e[f]+=a.width}e=e.join(",")}b.setAttribute("stroke-dasharray",e);b.setAttribute("dojoGfxStrokeStyle",a.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof c.Surface);a=a.parent);return a},_setFillObject:function(b,e){var d=m.xmlns.svg;this.fillStyle=
b;var f=this._getParentSurface().defNode,k=this.rawNode.getAttribute("fill");if(k=m.getRef(k))if(k.tagName.toLowerCase()!=e.toLowerCase()){var l=k.id;k.parentNode.removeChild(k);k=q(d,e);k.setAttribute("id",l);f.appendChild(k)}else for(;k.childNodes.length;)k.removeChild(k.lastChild);else k=q(d,e),k.setAttribute("id",c._base._getUniqueId()),f.appendChild(k);if("pattern"==e)k.setAttribute("patternUnits","userSpaceOnUse"),d=q(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",
b.width.toFixed(8)),d.setAttribute("height",b.height.toFixed(8)),a(d,m.xmlns.xlink,"xlink:href",b.src),k.appendChild(d);else for(k.setAttribute("gradientUnits","userSpaceOnUse"),f=0;f<b.colors.length;++f){var l=b.colors[f],g=q(d,"stop"),n=l.color=c.normalizeColor(l.color);g.setAttribute("offset",l.offset.toFixed(8));g.setAttribute("stop-color",n.toCss());g.setAttribute("stop-opacity",n.a);k.appendChild(g)}this.rawNode.setAttribute("fill","url(#"+k.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");
this.rawNode.setAttribute("fill-rule","evenodd");return k},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke",
"none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=c.makeParameters(this.shape,a);for(var b in this.shape)"type"!=b&&this.rawNode.setAttribute(b,this.shape[b]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,
this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;"polyline"===b&&(a=p.clone(a),a.points=a.points.join(","));var c,e=l.get(this.rawNode,"clip-path");e&&(c=s.byId(e.match(/gfx_clip[\d]+/)[0]))&&c.removeChild(c.childNodes[0]);a?(c?(b=q(m.xmlns.svg,b),c.appendChild(b)):(e="gfx_clip"+ ++y,this.rawNode.setAttribute("clip-path","url(#"+e+")"),c=
q(m.xmlns.svg,"clipPath"),b=q(m.xmlns.svg,b),c.appendChild(b),this.rawNode.parentNode.appendChild(c),l.set(c,"id",e)),l.set(b,a)):(this.rawNode.removeAttribute("clip-path"),c&&c.parentNode.removeChild(c));return this},_removeClipNode:function(){var a,b=l.get(this.rawNode,"clip-path");b&&(a=s.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});m.Group=g("dojox.gfx.svg.Group",m.Shape,{constructor:function(){k.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;
this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);m.Shape.prototype.destroy.apply(this,arguments)}});m.Group.nodeType="g";m.Rect=g("dojox.gfx.svg.Rect",[m.Shape,k.Rect],{setShape:function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=null;for(var b in this.shape)"type"!=b&&"r"!=b&&this.rawNode.setAttribute(b,this.shape[b]);null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});m.Rect.nodeType="rect";
m.Ellipse=g("dojox.gfx.svg.Ellipse",[m.Shape,k.Ellipse],{});m.Ellipse.nodeType="ellipse";m.Circle=g("dojox.gfx.svg.Circle",[m.Shape,k.Circle],{});m.Circle.nodeType="circle";m.Line=g("dojox.gfx.svg.Line",[m.Shape,k.Line],{});m.Line.nodeType="line";m.Polyline=g("dojox.gfx.svg.Polyline",[m.Shape,k.Polyline],{setShape:function(a,b){a&&a instanceof Array?(this.shape=c.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=c.makeParameters(this.shape,
a);this.bbox=null;this._normalizePoints();for(var e=[],d=this.shape.points,f=0;f<d.length;++f)e.push(d[f].x.toFixed(8),d[f].y.toFixed(8));this.rawNode.setAttribute("points",e.join(" "));return this}});m.Polyline.nodeType="polyline";m.Image=g("dojox.gfx.svg.Image",[m.Shape,k.Image],{setShape:function(b){this.shape=c.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;for(var e in this.shape)"type"!=e&&"src"!=e&&b.setAttribute(e,this.shape[e]);b.setAttribute("preserveAspectRatio","none");a(b,
m.xmlns.xlink,"xlink:href",this.shape.src);b.__gfxObject__=this;return this}});m.Image.nodeType="image";m.Text=g("dojox.gfx.svg.Text",[m.Shape,k.Text],{setShape:function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var b=this.shape;a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("text-anchor",b.align);a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.setAttribute("text-rendering",
A);a.firstChild?a.firstChild.nodeValue=b.text:a.appendChild(e(b.text));return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,e=a.firstChild.nodeValue;b.appendChild(a);if(""!=e)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(b){a={x:0,y:0,width:0,height:0}}return a}});m.Text.nodeType="text";m.Path=g("dojox.gfx.svg.Path",
[m.Shape,f.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});m.Path.nodeType="path";m.TextPath=g("dojox.gfx.svg.TextPath",[m.Shape,f.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);
this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var b=this.rawNode;if(!b.firstChild){var d=q(m.xmlns.svg,"textPath"),f=e("");d.appendChild(f);b.appendChild(d)}d=(d=b.firstChild.getAttributeNS(m.xmlns.xlink,"href"))&&m.getRef(d);if(!d&&(f=this._getParentSurface())){var f=f.defNode,d=q(m.xmlns.svg,"path"),k=c._base._getUniqueId();d.setAttribute("id",k);f.appendChild(d);a(b.firstChild,m.xmlns.xlink,"xlink:href","#"+k)}d&&d.setAttribute("d",this.shape.path)}},
_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=q(m.xmlns.svg,"textPath"),c=e("");b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline","middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift",
"0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});m.TextPath.nodeType="text";var C=534<function(){var a=/WebKit\/(\d*)/.exec(v);return a?a[1]:0}();m.Surface=g("dojox.gfx.svg.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){k.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;
this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);C&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this},getDimensions:function(){return this.rawNode?{width:c.normalizedLength(this.rawNode.getAttribute("width")),height:c.normalizedLength(this.rawNode.getAttribute("height"))}:null}});m.createSurface=function(a,b,e){var d=new m.Surface;d.rawNode=q(m.xmlns.svg,"svg");d.rawNode.setAttribute("overflow","hidden");b&&d.rawNode.setAttribute("width",b);e&&d.rawNode.setAttribute("height",
e);b=q(m.xmlns.svg,"defs");d.rawNode.appendChild(b);d.defNode=b;d._parent=s.byId(a);d._parent.appendChild(d.rawNode);c._base._fixMsTouchAction(d);return d};t={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var F=k.Container;g={openBatch:function(){if(!this._batch){var a;
a=m.useSvgWeb?r.doc.createDocumentFragment(!0):r.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),F.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==
a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),F.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return F.clear.apply(this,arguments)},getBoundingBox:F.getBoundingBox,_moveChildToFront:F._moveChildToFront,
_moveChildToBack:F._moveChildToBack};f={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,e=q(m.xmlns.svg,a.nodeType);c.setRawNode(e);c.setShape(b);this.add(c);return c}};p.extend(m.Text,t);p.extend(m.TextPath,t);p.extend(m.Group,g);p.extend(m.Group,k.Creator);p.extend(m.Group,f);p.extend(m.Surface,g);p.extend(m.Surface,k.Creator);p.extend(m.Surface,f);m.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=x&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);
return!0};m.useSvgWeb&&(m.createSurface=function(a,b,e){var d=new m.Surface;if(!b||!e){var f=n.position(a);b=b||f.w;e=e||f.h}a=s.byId(a);var f=a.id?a.id+"_svgweb":c._base._getUniqueId(),k=q(m.xmlns.svg,"svg");k.id=f;k.setAttribute("width",b);k.setAttribute("height",e);svgweb.appendChild(k,a);k.addEventListener("SVGLoad",function(){d.rawNode=this;d.isLoaded=!0;var a=q(m.xmlns.svg,"defs");d.rawNode.appendChild(a);d.defNode=a;if(d.onLoad)d.onLoad(d)},!1);d.isLoaded=!1;return d},m.Surface.extend({destroy:function(){var a=
this.rawNode;svgweb.removeChild(a,a.parentNode)}}),t={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==arguments.length?b:p.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},p.extend(m.Shape,t),p.extend(m.Surface,t));return m})},"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),
function(p,t,r,s,g,b,n,l){function d(a,b){this.start=a;this.end=b}function c(a,b,c){this.start=a;this.end=b;this.units=c}function k(a,b){this.start=a;this.end=b;this.temp=new s}function f(a){this.values=a;this.length=a.length}function q(a,b){this.values=a;this.def=b?b:{}}function a(a,b){this.stack=a;this.original=b}function e(a,b,c,e){if(a.values)return new f(a.values);var d,m;m=a.start?t.normalizeColor(a.start):d=b?c?b[c]:b:e;a.end?a=t.normalizeColor(a.end):(d||(d=b?c?b[c]:b:e),a=d);return new k(m,
a)}var m=t.fx={};d.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};c.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};k.prototype.getValue=function(a){return s.blendColors(this.start,this.end,a,this.temp)};f.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};q.prototype.getValue=function(a){var b=p.clone(this.def),c;for(c in this.values)b[c]=this.values[c].getValue(a);return b};a.prototype.getValue=
function(a){var b=[];g.forEach(this.stack,function(c){if(c instanceof r.Matrix2D)b.push(c);else if("original"==c.name&&this.original)b.push(this.original);else if("matrix"==c.name){if(c.start instanceof r.Matrix2D&&c.end instanceof r.Matrix2D){var e=new r.Matrix2D,d;for(d in c.start)e[d]=(c.end[d]-c.start[d])*a+c.start[d];b.push(e)}}else c.name in r&&(e=r[c.name],"function"!=typeof e?b.push(e):(d=g.map(c.start,function(b,e){return(c.end[e]-b)*a+b}),e=e.apply(r,d),e instanceof r.Matrix2D&&b.push(e)))},
this);return b};var v=new s(0,0,0,0);m.animateStroke=function(a){a.easing||(a.easing=b._defaultEasing);var c=new b.Animation(a),m=a.shape,k;n.connect(c,"beforeBegin",c,function(){k=m.getStroke();var b=a.color,c={},l;b&&(c.color=e(b,k,"color",v));(b=a.style)&&b.values&&(c.style=new f(b.values));if(b=a.width){var g=b,n=k;g.values?l=new f(g.values):(b=g.start?g.start:l=n?n.width:1,g.end?l=g.end:"number"!=typeof l&&(l=n?n.width:1),l=new d(b,l));c.width=l}(b=a.cap)&&b.values&&(c.cap=new f(b.values));if(b=
a.join)b.values?c.join=new f(b.values):(l=b.start?b.start:k&&k.join||0,b=b.end?b.end:k&&k.join||0,"number"==typeof l&&"number"==typeof b&&(c.join=new d(l,b)));this.curve=new q(c,k)});n.connect(c,"onAnimate",m,"setStroke");return c};m.animateFill=function(a){a.easing||(a.easing=b._defaultEasing);var c=new b.Animation(a),d=a.shape,f;n.connect(c,"beforeBegin",c,function(){f=d.getFill();var b=a.color;b&&(this.curve=e(b,f,"",v))});n.connect(c,"onAnimate",d,"setFill");return c};m.animateFont=function(a){a.easing||
(a.easing=b._defaultEasing);var e=new b.Animation(a),d=a.shape,m;n.connect(e,"beforeBegin",e,function(){m=d.getFont();var b=a.style,e={},k,l;b&&b.values&&(e.style=new f(b.values));(b=a.variant)&&b.values&&(e.variant=new f(b.values));(b=a.weight)&&b.values&&(e.weight=new f(b.values));(b=a.family)&&b.values&&(e.family=new f(b.values));(b=a.size)&&b.units&&(k=parseFloat(b.start?b.start:d.font&&d.font.size||"0"),l=parseFloat(b.end?b.end:d.font&&d.font.size||"0"),e.size=new c(k,l,b.units));this.curve=
new q(e,m)});n.connect(e,"onAnimate",d,"setFont");return e};m.animateTransform=function(c){c.easing||(c.easing=b._defaultEasing);var e=new b.Animation(c),d=c.shape,f;n.connect(e,"beforeBegin",e,function(){f=d.getTransform();this.curve=new a(c.transform,f)});n.connect(e,"onAnimate",d,"setTransform");if("svg"===t.renderer&&10<=l("ie"))var m=[n.connect(e,"onBegin",e,function(){for(var a=d.getParent();a&&a.getParent;)a=a.getParent();a&&(d.__svgContainer=a.rawNode.parentNode)}),n.connect(e,"onAnimate",
e,function(){try{if(d.__svgContainer){var a=d.__svgContainer.style.visibility;d.__svgContainer.style.visibility="visible";d.__svgContainer.style.visibility=a}}catch(b){}}),n.connect(e,"onEnd",e,function(){g.forEach(m,n.disconnect);if(d.__svgContainer){var a=d.__svgContainer.style.visibility,b=d.__svgContainer;d.__svgContainer.style.visibility="visible";setTimeout(function(){try{b.style.visibility=a,b=null}catch(c){}},100)}delete d.__svgContainer})];return e};return m})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k){var f=r.utils={};t.mixin(f,{forEach:function(b,a,c){c=c||p.global;a.call(c,b);(b instanceof r.Surface||b instanceof r.Group)&&g.forEach(b.children,function(b){f.forEach(b,a,c)})},serialize:function(b){var a={},c;if((c=b instanceof r.Surface)||b instanceof r.Group){if(a.children=g.map(b.children,f.serialize),c)return a.children}else a.shape=b.getShape();b.getTransform&&(c=b.getTransform())&&(a.transform=c);b.getStroke&&(c=b.getStroke())&&(a.stroke=c);b.getFill&&(c=b.getFill())&&
(a.fill=c);b.getFont&&(c=b.getFont())&&(a.font=c);return a},toJson:function(b,a){return n.toJson(f.serialize(b),a)},deserialize:function(b,a){if(a instanceof Array)return g.map(a,t.hitch(null,f.deserialize,b));var c="shape"in a?b.createShape(a.shape):b.createGroup();"transform"in a&&c.setTransform(a.transform);"stroke"in a&&c.setStroke(a.stroke);"fill"in a&&c.setFill(a.fill);"font"in a&&c.setFont(a.font);"children"in a&&g.forEach(a.children,t.hitch(null,f.deserialize,c));return c},fromJson:function(b,
a){return f.deserialize(b,n.fromJson(a))},toSvg:function(c){var a=new l;if("svg"===r.renderer)try{var e=f._cleanSvg(f._innerXML(c.rawNode));a.callback(e)}catch(d){a.errback(d)}else{f._initSvgSerializerDeferred||f._initSvgSerializer();var k=f.toJson(c),e=function(){try{var e=c.getDimensions(),d=e.width,m=e.height,l=f._gfxSvgProxy.document.createElement("div");f._gfxSvgProxy.document.body.appendChild(l);b.withDoc(f._gfxSvgProxy.document,function(){s.style(l,"width",d);s.style(l,"height",m)},this);f._gfxSvgProxy[dojox._scopeName].gfx.createSurface(l,
d,m).whenLoaded(null,function(b){try{f._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(b,k);var c=f._cleanSvg(l.innerHTML);b.clear();b.destroy();f._gfxSvgProxy.document.body.removeChild(l);a.callback(c)}catch(e){a.errback(e)}})}catch(g){a.errback(g)}};0<f._initSvgSerializerDeferred.fired?e():f._initSvgSerializerDeferred.addCallback(e)}return a},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){f._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!f._initSvgSerializerDeferred){f._initSvgSerializerDeferred=
new l;var g=b.doc.createElement("iframe");s.style(g,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var a;d("ie")?g.onreadystatechange=function(){"complete"==g.contentWindow.document.readyState&&(g.onreadystatechange=function(){},a=setInterval(function(){g.contentWindow[p.scopeMap.dojo[1]._scopeName]&&g.contentWindow[p.scopeMap.dojox[1]._scopeName].gfx&&g.contentWindow[p.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(a),g.contentWindow.parent[p.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
g.contentWindow,g.contentWindow.parent[p.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:g.onload=function(){g.onload=function(){};a=setInterval(function(){g.contentWindow[p.scopeMap.dojo[1]._scopeName]&&g.contentWindow[p.scopeMap.dojox[1]._scopeName].gfx&&g.contentWindow[p.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(a),g.contentWindow.parent[p.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=g.contentWindow,g.contentWindow.parent[p.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var e=k.dojoxGfxSvgProxyFrameUrl||c.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");g.setAttribute("src",e.toString());b.body().appendChild(g)}},_innerXML:function(b){return b.innerXML?b.innerXML:b.xml?b.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(b):null},_cleanSvg:function(b){b&&(-1==b.indexOf('xmlns="http://www.w3.org/2000/svg"')&&(b=b.substring(4,b.length),b='<svg xmlns="http://www.w3.org/2000/svg"'+b),-1==b.indexOf('xmlns:xlink="http://www.w3.org/1999/xlink"')&&
(b=b.substring(4,b.length),b='<svg xmlns:xlink="http://www.w3.org/1999/xlink"'+b),-1===b.indexOf("xlink:href")&&(b=b.replace(/href\s*=/g,"xlink:href=")),b=b.replace(/<img\b([^>]*)>/gi,"<image $1 />"),b=b.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),b=b.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),b=b.replace(/[=]([^"']+?)(\s|>)/g,'="$1"$2'));return b}});return f})},"dojox/gfx/Moveable":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover".split(" "),
function(p,t,r,s,g,b,n,l,d){return t("dojox.gfx.Moveable",null,{constructor:function(c,k){this.shape=c;this.delay=k&&0<k.delay?k.delay:0;this.mover=k&&k.mover?k.mover:d;this.events=[this.shape.on(b.press,p.hitch(this,"onMouseDown"))]},destroy:function(){r.forEach(this.events,function(b){b.remove()});this.events=this.shape=null},onMouseDown:function(c){this.delay?(this.events.push(this.shape.on(b.move,p.hitch(this,"onMouseMove")),this.shape.on(b.release,p.hitch(this,"onMouseUp"))),this._lastX=c.clientX,
this._lastY=c.clientY):new this.mover(this.shape,c,this);s.stop(c)},onMouseMove:function(b){var d=b.clientY;if(Math.abs(b.clientX-this._lastX)>this.delay||Math.abs(d-this._lastY)>this.delay)this.onMouseUp(b),new this.mover(this.shape,b,this);s.stop(b)},onMouseUp:function(b){this.events.pop().remove()},onMoveStart:function(b){g.publish("/gfx/move/start",b);n.add(l.body(),"dojoMove")},onMoveStop:function(b){g.publish("/gfx/move/stop",b);n.remove(l.body(),"dojoMove")},onFirstMove:function(b){},onMove:function(b,
d){this.onMoving(b,d);this.shape.applyLeftTransform(d);this.onMoved(b,d)},onMoving:function(b,d){},onMoved:function(b,d){}})})},"dojox/gfx/Mover":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(p,t,r,s,g,b){return r("dojox.gfx.Mover",null,{constructor:function(n,l,d){this.shape=n;this.lastX=l.clientX;this.lastY=l.clientY;n=this.host=d;l=document;d=s(l,g.move,p.hitch(this,"onFirstMove"));this.events=[s(l,g.move,p.hitch(this,
"onMouseMove")),s(l,g.release,p.hitch(this,"destroy")),s(l,"dragstart",p.hitch(b,"stop")),s(l,"selectstart",p.hitch(b,"stop")),d];if(n&&n.onMoveStart)n.onMoveStart(this)},onMouseMove:function(g){var l=g.clientX,d=g.clientY;this.host.onMove(this,{dx:l-this.lastX,dy:d-this.lastY});this.lastX=l;this.lastY=d;b.stop(g)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){t.forEach(this.events,function(b){b.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);
this.events=this.shape=null}})})},"dojox/gesture/tap":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","./Base","../main"],function(p,t,r,s,g){p.experimental("dojox.gesture.tap");p=t(s,{defaultEvent:"tap",subEvents:["hold","doubletap"],holdThreshold:500,doubleTapTimeout:250,tapRadius:10,press:function(b,g){if(g.touches&&2<=g.touches.length)clearTimeout(b.tapTimeOut),delete b.context;else{var l=g.target;this._initTap(b,g);b.tapTimeOut=setTimeout(r.hitch(this,function(){this._isTap(b,
g)&&this.fire(l,{type:"tap.hold"});delete b.context}),this.holdThreshold)}},release:function(b,g){if(b.context&&this._isTap(b,g))switch(b.context.c){case 1:this.fire(g.target,{type:"tap"});break;case 2:this.fire(g.target,{type:"tap.doubletap"})}clearTimeout(b.tapTimeOut)},_initTap:function(b,g){b.context||(b.context={x:0,y:0,t:0,c:0});var l=(new Date).getTime();l-b.context.t<=this.doubleTapTimeout?b.context.c++:(b.context.c=1,b.context.x=g.screenX,b.context.y=g.screenY);b.context.t=l},_isTap:function(b,
g){var l=Math.abs(b.context.x-g.screenX),d=Math.abs(b.context.y-g.screenY);return l<=this.tapRadius&&d<=this.tapRadius}});g.gesture.tap=new p;g.gesture.tap.Tap=p;return g.gesture.tap})},"dojox/gesture/Base":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom dojo/on dojo/touch dojo/has ../main".split(" "),function(p,t,r,s,g,b,n,l,d){p.experimental("dojox.gesture.Base");s.getObject("gesture",!0,d);return t(null,{defaultEvent:" ",subEvents:[],touchOnly:!1,
_elements:null,constructor:function(b){s.mixin(this,b);this.init()},init:function(){this._elements=[];if(!l("touch")&&this.touchOnly)console.warn("Gestures:[",this.defaultEvent,"] is only supported on touch devices!");else{var b=this.defaultEvent;this.call=this._handle(b);this._events=[b];r.forEach(this.subEvents,function(d){this[d]=this._handle(b+"."+d);this._events.push(b+"."+d)},this)}},_handle:function(c){var d=this;return function(f,l){var a=arguments;2<a.length&&(f=a[1],l=a[2]);if(f&&(f.nodeType||
f.attachEvent||f.addEventListener)){var e=d._add(f,c,l);return{remove:function(){e.remove();d._remove(f,c)}}}return b(f,c,l)}},_add:function(c,d,f){var l=this._getGestureElement(c);if(!l){var l={target:c,data:{},handles:{}},a=s.hitch(this,"_process",l,"press"),e=s.hitch(this,"_process",l,"move"),m=s.hitch(this,"_process",l,"release"),g=s.hitch(this,"_process",l,"cancel"),p=l.handles;this.touchOnly?(p.press=b(c,"touchstart",a),p.move=b(c,"touchmove",e),p.release=b(c,"touchend",m),p.cancel=b(c,"touchcancel",
g)):(p.press=n.press(c,a),p.move=n.move(c,e),p.release=n.release(c,m),p.cancel=n.cancel(c,g));this._elements.push(l)}l.handles[d]=l.handles[d]?++l.handles[d]:1;return b(c,d,f)},_getGestureElement:function(b){for(var d=0,f;d<this._elements.length;d++)if(f=this._elements[d],f.target===b)return f},_process:function(b,d,f){f._locking=f._locking||{};f._locking[this.defaultEvent]||this.isLocked(f.currentTarget)||("INPUT"==f.target.tagName&&"radio"!=f.target.type&&"checkbox"!=f.target.type||"TEXTAREA"==
f.target.tagName||f.preventDefault(),f._locking[this.defaultEvent]=!0,this[d](b.data,f))},press:function(b,d){},move:function(b,d){},release:function(b,d){},cancel:function(b,d){},fire:function(c,d){c&&d&&(d.bubbles=!0,d.cancelable=!0,b.emit(c,d.type,d))},_remove:function(b,d){var f=this._getGestureElement(b);if(f&&f.handles){f.handles[d]--;var l=f.handles;r.some(this._events,function(a){return 0<l[a]})||(this._cleanHandles(l),f=r.indexOf(this._elements,f),0<=f&&this._elements.splice(f,1))}},_cleanHandles:function(b){for(var d in b)b[d].remove&&
b[d].remove(),delete b[d]},lock:function(b){this._lock=b},unLock:function(){this._lock=null},isLocked:function(b){return this._lock&&b?this._lock!==b&&g.isDescendant(b,this._lock):!1},destroy:function(){r.forEach(this._elements,function(b){this._cleanHandles(b.handles)},this);this._elements=null}})})},"dojox/gesture/swipe":function(){define(["dojo/_base/kernel","dojo/_base/declare","./Base","../main"],function(p,t,r,s){p.experimental("dojox.gesture.swipe");p=t(r,{defaultEvent:"swipe",subEvents:["end"],
press:function(g,b){b.touches&&2<=b.touches.length?delete g.context:(g.context||(g.context={x:0,y:0,t:0}),g.context.x=b.screenX,g.context.y=b.screenY,g.context.t=(new Date).getTime(),this.lock(b.currentTarget))},move:function(g,b){this._recognize(g,b,"swipe")},release:function(g,b){this._recognize(g,b,"swipe.end");delete g.context;this.unLock()},cancel:function(g,b){delete g.context;this.unLock()},_recognize:function(g,b,n){g.context&&(g=this._getSwipeInfo(g,b))&&(g.type=n,this.fire(b.target,g))},
_getSwipeInfo:function(g,b){var n,l,d={};l=g.context;d.time=(new Date).getTime()-l.t;n=b.screenX-l.x;l=b.screenY-l.y;if(0===n&&0===l)return null;d.dx=n;d.dy=l;return d}});s.gesture.swipe=new p;s.gesture.swipe.Swipe=p;return s.gesture.swipe})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(p,t,r,s){var g=p.getObject("dojox.html",!0),b={},n={},l=[];g.insertCssRule=function(b,c,k){k=g.getDynamicStyleSheet(k);var f=b+" {"+c+
"}";s("ie")?k.cssText+=f:k.sheet?k.sheet.insertRule(f,k._indicies.length):k.appendChild(r.doc.createTextNode(f));k._indicies.push(b+" "+c);return b};g.removeCssRule=function(d,c,k){var f,l=-1,a,e;for(a in b)if(!k||k===a){f=b[a];for(e=0;e<f._indicies.length;e++)if(d+" "+c===f._indicies[e]){l=e;break}if(-1<l)break}if(!f)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===l)return console.warn("The css rule was not found and could not be removed."),
!1;f._indicies.splice(l,1);s("ie")?f.removeRule(l):f.sheet&&f.sheet.deleteRule(l);return!0};g.modifyCssRule=function(b,c,k){};g.getStyleSheet=function(d){if(b[d||"default"])return b[d||"default"];if(!d)return!1;var c=g.getStyleSheets();if(c[d])return g.getStyleSheets()[d];for(var k in c)if(c[k].href&&-1<c[k].href.indexOf(d))return c[k];return!1};g.getDynamicStyleSheet=function(d){d||(d="default");b[d]||(r.doc.createStyleSheet?(b[d]=r.doc.createStyleSheet(),9>s("ie")&&(b[d].title=d)):(b[d]=r.doc.createElement("style"),
b[d].setAttribute("type","text/css"),r.doc.getElementsByTagName("head")[0].appendChild(b[d])),b[d]._indicies=[]);return b[d]};g.enableStyleSheet=function(b){if(b=g.getStyleSheet(b))b.sheet?b.sheet.disabled=!1:b.disabled=!1};g.disableStyleSheet=function(b){if(b=g.getStyleSheet(b))b.sheet?b.sheet.disabled=!0:b.disabled=!0};g.activeStyleSheet=function(b){var c=g.getToggledStyleSheets(),k;if(1===arguments.length)t.forEach(c,function(c){c.disabled=c.title===b?!1:!0});else for(k=0;k<c.length;k++)if(!1===
c[k].disabled)return c[k];return!0};g.getPreferredStyleSheet=function(){};g.getToggledStyleSheets=function(){var b;if(!l.length){var c=g.getStyleSheets();for(b in c)c[b].title&&l.push(c[b])}return l};g.getStyleSheets=function(){if(n.collected)return n;t.forEach(r.doc.styleSheets,function(b){var c=b.sheet?b.sheet:b;b=c.title||c.href;s("ie")?-1===c.cssText.indexOf("#default#VML")&&(c.href?n[b]=c:c.imports.length?t.forEach(c.imports,function(b){n[b.title||b.href]=b}):n[b]=c):(n[b]=c,n[b].id=c.ownerNode.id,
t.forEach(c.cssRules,function(b){b.href&&(n[b.href]=b.styleSheet,n[b.href].id=c.ownerNode.id)}))});n.collected=!0;return n};return g})},"dojox/charting/widget/Chart":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/_base/declare dojo/query dijit/_WidgetBase ../Chart dojo/has dojo/has!dojo-bidi?../bidi/widget/Chart dojox/lang/utils dojox/lang/functional dojox/lang/functional/lambda".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q){var a,e,m,v,x,z=function(a){return a},
A=t.getObject("dojox.charting");a=function(a,b,c){var e=eval("("+b+".prototype.defaultParams)"),d,f;for(d in e)d in c||(f=a.getAttribute(d),c[d]=k.coerceType(e[d],null==f||"undefined"==typeof f?e[d]:f));b=eval("("+b+".prototype.optionalParams)");for(d in b)d in c||(f=a.getAttribute(d),null!=f&&(c[d]=k.coerceType(b[d],f)))};e=function(b){var c=b.getAttribute("name"),e=b.getAttribute("type");if(!c)return null;var c={name:c,kwArgs:{}},d=c.kwArgs;if(e){A.axis2d[e]&&(e=p._scopeName+"x.charting.axis2d."+
e);var f=eval("("+e+")");f&&(d.type=f)}else e=p._scopeName+"x.charting.axis2d.Default";a(b,e,d);if(d.font||d.fontColor)d.tick||(d.tick={}),d.font&&(d.tick.font=d.font),d.fontColor&&(d.tick.fontColor=d.fontColor);return c};m=function(b){var c=b.getAttribute("name"),e=b.getAttribute("type");if(!c)return null;var c={name:c,kwArgs:{}},d=c.kwArgs;if(e){A.plot2d&&A.plot2d[e]&&(e=p._scopeName+"x.charting.plot2d."+e);var f=eval("("+e+")");f&&(d.type=f)}else e=p._scopeName+"x.charting.plot2d.Default";a(b,
e,d);var e=eval("("+e+".prototype.baseParams)"),m;for(m in e)m in d||(f=b.getAttribute(m),d[m]=k.coerceType(e[m],null==f||"undefined"==typeof f?e[m]:f));return c};v=function(b){var c=b.getAttribute("plot"),e=b.getAttribute("type");c||(c="default");var c={plot:c,kwArgs:{}},d=c.kwArgs;if(e){A.action2d[e]&&(e=p._scopeName+"x.charting.action2d."+e);var f=eval("("+e+")");if(!f)return null;c.action=f}else return null;a(b,e,d);return c};x=function(a){a=t.partial(s.get,a);var b=a("name");if(!b)return null;
var b={name:b,kwArgs:{}},c=b.kwArgs,e;e=a("plot");null!=e&&(c.plot=e);e=a("marker");null!=e&&(c.marker=e);e=a("stroke");null!=e&&(c.stroke=eval("("+e+")"));e=a("outline");null!=e&&(c.outline=eval("("+e+")"));e=a("shadow");null!=e&&(c.shadow=eval("("+e+")"));e=a("fill");null!=e&&(c.fill=eval("("+e+")"));e=a("font");null!=e&&(c.font=e);e=a("fontColor");null!=e&&(c.fontColor=eval("("+e+")"));e=a("legend");null!=e&&(c.legend=e);e=a("data");if(null!=e)return b.type="data",b.data=e?r.map(String(e).split(","),
Number):[],b;e=a("array");if(null!=e)return b.type="data",b.data=eval("("+e+")"),b;e=a("store");if(null!=e){b.type="store";b.data=eval("("+e+")");e=a("field");b.field=null!=e?e:"value";if(e=a("query"))c.query=e;if(e=a("queryOptions"))c.queryOptions=eval("("+e+")");if(e=a("start"))c.start=Number(e);if(e=a("count"))c.count=Number(e);if(e=a("sort"))c.sort=eval("("+e+")");if(e=a("valueFn"))c.valueFn=q.lambda(e);return b}return null};n=g(d("dojo-bidi")?"dojox.charting.widget.NonBidiChart":"dojox.charting.widget.Chart",
n,{theme:null,margins:null,stroke:void 0,fill:void 0,buildRendering:function(){this.inherited(arguments);var a=this.domNode,c=b("> .axis",a).map(e).filter(z),d=b("> .plot",a).map(m).filter(z),g=b("> .action",a).map(v).filter(z),n=b("> .series",a).map(x).filter(z);a.innerHTML="";var q=this.chart=new l(a,{margins:this.margins,stroke:this.stroke,fill:this.fill,textDir:this.textDir});this.theme&&q.setTheme(this.theme);c.forEach(function(a){q.addAxis(a.name,a.kwArgs)});d.forEach(function(a){q.addPlot(a.name,
a.kwArgs)});this.actions=g.map(function(a){return new a.action(q,a.plot,a.kwArgs)});f.foldl(n,function(a,b){if("data"==b.type)q.addSeries(b.name,b.data,b.kwArgs),a=!0;else{q.addSeries(b.name,[0],b.kwArgs);var c={};k.updateWithPattern(c,b.kwArgs,{query:"",queryOptions:null,start:0,count:1},!0);b.kwArgs.sort&&(c.sort=t.clone(b.kwArgs.sort));t.mixin(c,{onComplete:function(a){if("valueFn"in b.kwArgs){var c=b.kwArgs.valueFn;a=r.map(a,function(a){return c(b.data.getValue(a,b.field,0))})}else a=r.map(a,
function(a){return b.data.getValue(a,b.field,0)});q.addSeries(b.name,a,b.kwArgs).render()}});b.data.fetch(c)}return a},!1)&&q.render()},destroy:function(){this.chart.destroy();this.inherited(arguments)},resize:function(a){this.chart.resize.apply(this.chart,arguments)}});return d("dojo-bidi")?g("dojox.charting.widget.Chart",[n,c]):n})},"dojox/charting/Chart":function(){define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x){function z(a,b){a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max));return a||b}function A(a,b){var c={},e={};r.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(e[a.hAxis]=z(e[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(e[a.vAxis]=z(e[a.vAxis],{min:b.vmin,max:b.vmax}))});r.forEach(a,function(a){var d=c[a.name];if(a.hAxis){var f=e[a.hAxis];d.hmin=f.min;d.hmax=f.max}a.vAxis&&(f=e[a.vAxis],d.vmin=f.min,d.vmax=f.max);a.initializeScalers(b,
d)})}var y=t.getObject("charting",!0,p),C=x.lambda("item.clear()"),F=x.lambda("item.purgeGroup()"),D=x.lambda("item.destroy()"),H=x.lambda("item.dirty = false"),N=x.lambda("item.dirty = true"),J=x.lambda("item.name");p=s(c("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(a,c){c||(c={});this.margins=c.margins?c.margins:{l:10,t:10,r:10,b:10};this.stroke=c.stroke;this.fill=c.fill;this.delayInMs=c.delayInMs||200;this.title=c.title;this.titleGap=c.titleGap;this.titlePos=
c.titlePos;this.titleFont=c.titleFont;this.titleFontColor=c.titleFontColor;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in c&&(this.htmlLabels=c.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=b.byId(a);var e=n.getMarginBox(a);this.surface=m.createSurface(this.node,e.w||400,e.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},destroy:function(){r.forEach(this.series,D);r.forEach(this.stack,D);
x.forIn(this.axes,D);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&l.destroy(this.chartTitle)},getCoords:function(){var a=this.node,b=g.getComputedStyle(a),b=n.getMarginBox(a,b),a=n.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this.dirty=!0;return this},addAxis:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!y.axis2d||!y.axis2d[c])throw Error("Can't find axis: "+c+" - Check require() dependencies.");c=new y.axis2d[c](this,
b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=c;this.dirty=!0;return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){a in this.axes&&(this.axes[a].destroy(),delete this.axes[a],this.dirty=!0);return this},addPlot:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!y.plot2d||!y.plot2d[c])throw Error("Can't find plot: "+c+" - didn't you forget to dojo.require() it?");c=new y.plot2d[c](this,b)}else c=new c(this,
b);c.name=a;c.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=this.stack.length,this.stack.push(c));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);x.forIn(this.plots,function(a,c,e){a>b&&(e[c]=a-1)});var c=r.filter(this.series,function(b){return b.plot!=a});c.length<this.series.length&&
(r.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},r.forEach(c,function(a,b){this.runs[a.plot]=b},this),this.series=c);this.dirty=!0}return this},getPlotOrder:function(){return x.map(this.stack,J)},setPlotOrder:function(a){var b={},c=x.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&x.forEach(this.stack,function(a){a=a.name;a in b||c.push(a)});a=x.map(c,function(a){return this.stack[this.plots[a]]},this);x.forEach(a,
function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){b=new q(this,b,c);b.name=a;a in this.runs?
(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));this.dirty=!0;!("ymin"in b)&&"min"in b&&(b.ymin=b.min);!("ymax"in b)&&"max"in b&&(b.ymax=b.max);return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);x.forIn(this.runs,function(a,c,e){a>b&&(e[c]=a-1)});this.dirty=!0}return this},updateSeries:function(a,
b,c){a in this.runs&&(a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,!1),this._invalidateDependentPlots(a.plot,!0)));return this},getSeriesOrder:function(a){return x.map(x.filter(this.series,function(b){return b.plot==a}),J)},setSeriesOrder:function(a){var b,c={},e=x.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var e=this.series[this.runs[a]];if(b){if(e.plot!=b)return!1}else b=e.plot;c[a]=1;return!0},this);x.forEach(this.series,function(a){var d=
a.name;d in c||a.plot!=b||e.push(d)});this.series=x.map(e,function(a){return this.series[this.runs[a]]},this).concat(x.filter(this.series,function(a){return a.plot!=b}));x.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=
this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),this.setSeriesOrder(c)}return this},resize:function(a,b){switch(arguments.length){case 1:n.setMarginBox(this.node,a);break;case 2:n.setMarginBox(this.node,{w:a,h:b})}var c=n.getMarginBox(this.node),e=this.surface.getDimensions();return e.width!=c.w||e.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};x.forIn(this.axes,function(b){b.initialized()&&
(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,e){var d=this.axes[a];d&&(d.setWindow(b,c),r.forEach(this.stack,function(b){if(b.hAxis==a||b.vAxis==a)b.zoom=e}));return this},setWindow:function(a,b,c,e,d){"plotArea"in this||this.calculateGeometry();x.forIn(this.axes,function(d){var f,m;f=d.getScaler().bounds;m=f.span/(f.upper-f.lower);d.vertical?(f=b,m=e/m/f):(f=a,m=c/m/f);d.setWindow(f,m)});r.forEach(this.stack,function(a){a.zoom=
d});return this},zoomIn:function(a,b,c){var e=this.axes[a];if(e){var e=e.getScaler().bounds,d=Math.min(b[0],b[1]),f=Math.max(b[0],b[1]),d=b[0]<e.lower?e.lower:d,f=b[1]>e.upper?e.upper:f;this.setAxisWindow(a,(e.upper-e.lower)/(f-d),d-e.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=r.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);A(a,this.plotArea);return this},
fullGeometry:function(){this._makeDirty();r.forEach(this.stack,C);this.theme||this.setTheme(new f);r.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!y.plot2d||!y.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new y.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this);r.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},
this);var a=this.dim=this.surface.getDimensions();a.width=m.normalizedLength(a.width);a.height=m.normalizedLength(a.height);x.forIn(this.axes,C);A(this.stack,a);var b=this.offsets={l:0,r:0,t:0,b:0},e=this;x.forIn(this.axes,function(a){c("dojo-bidi")&&e._resetLeftBottom(a);x.forIn(a.getOffsets(),function(a,c){b[c]=Math.max(a,b[c])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=
this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var d=m.normalizedLength(m.splitFontString(this.titleFont).size);b["top"==this.titlePos?"t":"b"]+=d+this.titleGap}x.forIn(this.margins,function(a,c){b[c]+=a});this.plotArea={width:a.width-b.l-b.r,height:a.height-b.t-b.b};x.forIn(this.axes,C);A(this.stack,this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=
null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();x.forEachRev(this.stack,function(a){a.render(this.dim,this.offsets)},this);x.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var b=this.offsets,d=this.dim,f=Math.max(0,d.width-b.l-b.r),k=Math.max(0,d.height-b.t-b.b);r.forEach(this.series,F);x.forIn(this.axes,F);r.forEach(this.stack,F);var g=this.surface.children;
if(e.dispose)for(var n=0;n<g.length;++n)e.dispose(g[n]);this.chartTitle&&this.chartTitle.tagName&&l.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(d,b);this._renderPlotBackground(d,b,f,k);x.foldr(this.stack,function(a,c){return c.render(d,b),0},0);this._nativeClip||this._renderChartBackground(d,b);this.title&&(f="canvas"==m.renderer&&this.htmlLabels||!c("ie")&&!c("opera")&&this.htmlLabels?"html":"gfx",k=m.normalizedLength(m.splitFontString(this.titleFont).size),
this.chartTitle=a.createText[f](this,this.surface,d.width/2,"top"==this.titlePos?k+this.margins.t:d.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor));x.forIn(this.axes,function(a){a.render(d,b)});this._makeClean();return this},_renderChartBackground:function(a,b){var c=this.theme,e,f=void 0!==this.fill?this.fill:c.chart&&c.chart.fill,c=void 0!==this.stroke?this.stroke:c.chart&&c.chart.stroke;if("inherit"==f)for(e=this.node,f=new d(g.get(e,"backgroundColor"));0==f.a&&e!=
document.documentElement;)f=new d(g.get(e,"backgroundColor")),e=e.parentNode;f&&(this._nativeClip?(f=k.prototype._shapeFill(k.prototype._plotFill(f,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(f)):(f=k.prototype._plotFill(f,a,b),b.l&&(e={x:0,y:0,width:b.l,height:a.height+1},this.surface.createRect(e).setFill(k.prototype._shapeFill(f,e))),b.r&&(e={x:a.width-b.r,y:0,width:b.r+1,height:a.height+2},this.surface.createRect(e).setFill(k.prototype._shapeFill(f,
e))),b.t&&(e={x:0,y:0,width:a.width+1,height:b.t},this.surface.createRect(e).setFill(k.prototype._shapeFill(f,e))),b.b&&(e={x:0,y:a.height-b.b,width:a.width+1,height:b.b+2},this.surface.createRect(e).setFill(k.prototype._shapeFill(f,e)))));c&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(c)},_renderPlotBackground:function(a,b,c,e){var d=this.theme,f=d.plotarea&&d.plotarea.fill,d=d.plotarea&&d.plotarea.stroke,m={x:b.l-1,y:b.t-1,width:c+2,height:e+2};f&&(f=k.prototype._shapeFill(k.prototype._plotFill(f,
a,b),m),this.surface.createRect(m).setFill(f));d&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:e+1}).setStroke(d)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(t.hitch(this,function(){this.render()}),this.delayInMs));return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var e=this.series[this.runs[a]].plot;e in this.plots&&(e=this.stack[this.plots[e]])&&
e.fireEvent(a,b,c)}return this},_makeClean:function(){r.forEach(this.axes,H);r.forEach(this.stack,H);r.forEach(this.series,H);this.dirty=!1},_makeDirty:function(){r.forEach(this.axes,N);r.forEach(this.stack,N);r.forEach(this.series,N);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],e,d=b?"vAxis":"hAxis";c[d]?(e=this.axes[c[d]])&&e.dependOnData()&&(e.dirty=!0,r.forEach(this.stack,function(a){a[d]&&a[d]==c[d]&&(a.dirty=!0)})):c.dirty=!0}},setDir:function(a){return this},
_resetLeftBottom:function(a){},formatTruncatedLabel:function(a,b,c){}});return c("dojo-bidi")?s("dojox.charting.Chart",[p,v]):p})},"dojox/charting/Element":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(p,t,r,s,g){return r("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,constructor:function(b){this.chart=b;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol="...";this._events=
[]},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.getGroup().removeShape();var b=this.getGroup().children;if(g.dispose)for(var n=0;n<b.length;++n)g.dispose(b[n],!0);this.getGroup().rawNode&&t.empty(this.getGroup().rawNode);this.getGroup().clear();g.dispose&&g.dispose(this.getGroup(),!0);this.getGroup()!=this.group&&(this.group.rawNode&&t.empty(this.group.rawNode),this.group.clear(),g.dispose&&g.dispose(this.group,!0));this.group=null}this.dirty=!0;this._events.length&&(p.forEach(this._events,
function(b){b.shape.disconnect(b.handle)}),this._events=[]);return this},cleanGroup:function(b){this.destroyHtmlElements();b||(b=this.chart.surface);if(this.group){var n;b=this.getGroup().children;if(g.dispose)for(var l=0;l<b.length;++l)g.dispose(b[l],!0);this.getGroup().rawNode&&(n=this.getGroup().bgNode,t.empty(this.getGroup().rawNode));this.getGroup().clear();n&&this.getGroup().rawNode.appendChild(n)}else this.group=b.createGroup();this.dirty=!0;return this},getGroup:function(){return this.group},
destroyHtmlElements:function(){this.htmlElements.length&&(p.forEach(this.htmlElements,t.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},getTextWidth:function(b,g){return s._base._getTextBox(b,{font:g}).w||0},getTextWithLimitLength:function(b,g,l,d){if(!b||0>=b.length)return{text:"",truncated:d||!1};if(!l||0>=l)return{text:b,truncated:d||!1};var c=b.substring(0,1)+this.trailingSymbol,k=this.getTextWidth(c,g);if(l<=k)return{text:c,truncated:!0};if(this.getTextWidth(b,g)<=l)return{text:b,
truncated:d||!1};d=0;for(c=b.length;d<c;){if(2>=c-d){for(;this.getTextWidth(b.substring(0,d)+this.trailingSymbol,g)>l;)d-=1;return{text:b.substring(0,d)+this.trailingSymbol,truncated:!0}}k=d+Math.round(0.618*(c-d));this.getTextWidth(b.substring(0,k),g)<l?d=k:c=k}},getTextWithLimitCharCount:function(b,g,l,d){return!b||0>=b.length?{text:"",truncated:d||!1}:!l||0>=l||b.length<=l?{text:b,truncated:d||!1}:{text:b.substring(0,l)+this.trailingSymbol,truncated:!0}},_plotFill:function(b,g,l){if(!b||!b.type||
!b.space)return b;var d=b.space,c;switch(b.type){case "linear":if("plot"===d||"shapeX"===d||"shapeY"===d){b=s.makeParameters(s.defaultLinearGradient,b);b.space=d;if("plot"===d||"shapeX"===d)c=g.height-l.t-l.b,b.y1=l.t+c*b.y1/100,b.y2=l.t+c*b.y2/100;if("plot"===d||"shapeY"===d)c=g.width-l.l-l.r,b.x1=l.l+c*b.x1/100,b.x2=l.l+c*b.x2/100}break;case "radial":"plot"===d&&(b=s.makeParameters(s.defaultRadialGradient,b),b.space=d,d=g.width-l.l-l.r,g=g.height-l.t-l.b,b.cx=l.l+d*b.cx/100,b.cy=l.t+g*b.cy/100,
b.r=b.r*Math.sqrt(d*d+g*g)/200);break;case "pattern":if("plot"===d||"shapeX"===d||"shapeY"===d){b=s.makeParameters(s.defaultPattern,b);b.space=d;if("plot"===d||"shapeX"===d)c=g.height-l.t-l.b,b.y=l.t+c*b.y/100,b.height=c*b.height/100;if("plot"===d||"shapeY"===d)c=g.width-l.l-l.r,b.x=l.l+c*b.x/100,b.width=c*b.width/100}}return b},_shapeFill:function(b,g){if(!b||!b.space)return b;var l=b.space,d;switch(b.type){case "linear":if("shape"===l||"shapeX"===l||"shapeY"===l){b=s.makeParameters(s.defaultLinearGradient,
b);b.space=l;if("shape"===l||"shapeX"===l)d=g.width,b.x1=g.x+d*b.x1/100,b.x2=g.x+d*b.x2/100;if("shape"===l||"shapeY"===l)d=g.height,b.y1=g.y+d*b.y1/100,b.y2=g.y+d*b.y2/100}break;case "radial":"shape"===l&&(b=s.makeParameters(s.defaultRadialGradient,b),b.space=l,b.cx=g.x+g.width/2,b.cy=g.y+g.height/2,b.r=b.r*g.width/200);break;case "pattern":if("shape"===l||"shapeX"===l||"shapeY"===l){b=s.makeParameters(s.defaultPattern,b);b.space=l;if("shape"===l||"shapeX"===l)d=g.width,b.x=g.x+d*b.x/100,b.width=
d*b.width/100;if("shape"===l||"shapeY"===l)d=g.height,b.y=g.y+d*b.y/100,b.height=d*b.height/100}}return b},_pseudoRadialFill:function(b,g,l,d,c){if(!b||"radial"!==b.type||"shape"!==b.space)return b;var k=b.space;b=s.makeParameters(s.defaultRadialGradient,b);b.space=k;if(4>arguments.length)return b.cx=g.x,b.cy=g.y,b.r=b.r*l/100,b;k=5>arguments.length?d:(c+d)/2;return{type:"linear",x1:g.x,y1:g.y,x2:g.x+b.r*l*Math.cos(k)/100,y2:g.y+b.r*l*Math.sin(k)/100,colors:b.colors}}})})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),
function(p,t,r,s,g,b){var n=r("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(b){b=b||{};var d=n.defaultTheme;t.forEach("chart plotarea axis grid series marker indicator".split(" "),function(c){this[c]=p.delegate(d[c],b[c])},this);b.seriesThemes&&b.seriesThemes.length?(this.colors=null,this.seriesThemes=b.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(b.colors||n.defaultColors).slice(0));this.markerThemes=null;b.markerThemes&&b.markerThemes.length&&
(this.markerThemes=b.markerThemes.slice(0));this.markers=b.markers?p.clone(b.markers):p.delegate(n.defaultMarkers);this.noGradConv=b.noGradConv;this.noRadialConv=b.noRadialConv;b.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var b=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,
markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});t.forEach("clone clear next skip addMixin post getTick".split(" "),function(d){this.hasOwnProperty(d)&&(b[d]=this[d])},this);return b},clear:function(){this._current=0},next:function(b,d,c){var k=g.merge,f;if(this.colors){f=p.delegate(this.series);var k=p.delegate(this.marker),n=new s(this.colors[this._current%this.colors.length]),a;f.stroke&&f.stroke.color?(f.stroke=p.delegate(f.stroke),a=new s(f.stroke.color),
f.stroke.color=new s(n),f.stroke.color.a=a.a):f.stroke={color:n};k.stroke&&k.stroke.color?(k.stroke=p.delegate(k.stroke),a=new s(k.stroke.color),k.stroke.color=new s(n),k.stroke.color.a=a.a):k.stroke={color:n};!f.fill||f.fill.type?f.fill=n:(a=new s(f.fill),f.fill=new s(n),f.fill.a=a.a);!k.fill||k.fill.type?k.fill=n:(a=new s(k.fill),k.fill=new s(n),k.fill.a=a.a)}else f=this.seriesThemes?k(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,k=this.markerThemes?k(this.marker,
this.markerThemes[this._current%this.markerThemes.length]):f;f={series:f,marker:k,symbol:k&&k.symbol||this._markers[this._current%this._markers.length]};++this._current;d&&(f=this.addMixin(f,b,d));c&&(f=this.post(f,b));return f},skip:function(){++this._current},addMixin:function(b,d,c,k){if(p.isArray(c))t.forEach(c,function(c){b=this.addMixin(b,d,c)},this);else{var f={};"color"in c&&("line"==d||"area"==d?(p.setObject("series.stroke.color",c.color,f),p.setObject("marker.stroke.color",c.color,f)):p.setObject("series.fill",
c.color,f));t.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(b){var a="marker"+b.charAt(0).toUpperCase()+b.substr(1),e=a in c;b in c&&(p.setObject("series."+b,c[b],f),e||p.setObject("marker."+b,c[b],f));e&&p.setObject("marker."+b,c[a],f)});"marker"in c&&(f.symbol=c.marker,f.symbol=c.marker);b=g.merge(b,f)}k&&(b=this.post(b,d));return b},post:function(b,d){var c=b.series.fill,k;return!this.noGradConv&&this.shapeSpaces[c.space]&&"linear"==c.type&&("bar"==
d?k={x1:c.y1,y1:c.x1,x2:c.y2,y2:c.x2}:this.noRadialConv||"shape"!=c.space||"slice"!=d&&"circle"!=d||(k={type:"radial",cx:0,cy:0,r:100}),k)?g.merge(b,{series:{fill:k}}):b},getTick:function(b,d){var c=this.axis.tick,k=b+"Tick",f=g.merge;c?this.axis[k]&&(c=f(c,this.axis[k])):c=this.axis[k];d&&(c?d[k]&&(c=f(c,d[k])):c=d[k]);return c},inspectObjects:function(b){t.forEach("chart plotarea axis grid series marker indicator".split(" "),function(d){b(this[d])},this);this.seriesThemes&&t.forEach(this.seriesThemes,
b);this.markerThemes&&t.forEach(this.markerThemes,b)},reverseFills:function(){this.inspectObjects(function(l){l&&l.fill&&(l.fill=b.reverse(l.fill))})},addMarker:function(b,d){this.markers[b]=d;this._buildMarkerArray()},setMarkers:function(b){this.markers=b;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var b in this.markers)this._markers.push(this.markers[b])}});p.mixin(n,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",
DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",
fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",
fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}}});return n})},"dojox/lang/utils":function(){define(["..",
"dojo/_base/lang"],function(p,t){var r=t.getObject("lang.utils",!0,p),s={},g=Object.prototype.toString,b=function(b){if(b)switch(g.call(b)){case "[object Array]":return b.slice(0);case "[object Object]":return t.delegate(b)}return b};t.mixin(r,{coerceType:function(b,l){switch(typeof b){case "number":return Number(eval("("+l+")"));case "string":return String(l);case "boolean":return Boolean(eval("("+l+")"))}return eval("("+l+")")},updateWithObject:function(g,l,d){if(!l)return g;for(var c in g)if(c in
l&&!(c in s)){var k=g[c];k&&"object"==typeof k?r.updateWithObject(k,l[c],d):g[c]=d?r.coerceType(k,l[c]):b(l[c])}return g},updateWithPattern:function(g,l,d,c){if(!l||!d)return g;for(var k in d)k in l&&!(k in s)&&(g[k]=c?r.coerceType(d[k],l[k]):b(l[k]));return g},merge:function(b,l){if(l){var d=g.call(b),c=g.call(l),k,f;switch(c){case "[object Array]":if(c==d){d=Array(Math.max(b.length,l.length));k=0;for(c=d.length;k<c;++k)d[k]=r.merge(b[k],l[k]);return d}return l.slice(0);case "[object Object]":if(c==
d&&b){d=t.delegate(b);for(k in l)k in b?(c=b[k],f=l[k],f!==c&&(d[k]=r.merge(c,f))):d[k]=t.clone(l[k]);return d}return t.clone(l)}}return l}});return r})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(p,t,r,s){function g(b,g){if(0>=b)return g[0].color;var l=g.length;if(1<=b)return g[l-1].color;for(var d=0;d<l;++d){var c=g[d];if(c.offset>=b)return d?(l=g[d-1],s.blendColors(new s(l.color),new s(c.color),(b-l.offset)/(c.offset-l.offset))):
c.color}return g[l-1].color}p=p.gradutils={};p.getColor=function(b,n){var l;if(b){switch(b.type){case "linear":l=Math.atan2(b.y2-b.y1,b.x2-b.x1);l=r.rotate(-l);var d=r.project(b.x2-b.x1,b.y2-b.y1),c=r.multiplyPoint(d,n),k=r.multiplyPoint(d,b.x1,b.y1),d=r.multiplyPoint(d,b.x2,b.y2),d=r.multiplyPoint(l,d.x-k.x,d.y-k.y).x;l=r.multiplyPoint(l,c.x-k.x,c.y-k.y).x/d;break;case "radial":l=n.x-b.cx,c=n.y-b.cy,l=Math.sqrt(l*l+c*c)/b.r}return g(l,b.colors)}return new s(b||[0,0,0,0])};p.reverse=function(b){if(b)switch(b.type){case "linear":case "radial":if(b=
t.delegate(b),b.colors){for(var g=b.colors,l=g.length,d=0,c,k=b.colors=Array(g.length);d<l;++d)c=g[d],k[d]={offset:1-c.offset,color:c.color};k.sort(function(b,c){return b.offset-c.offset})}}return b};return p})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(p,t,r){return t("dojox.charting.Series",r,{constructor:function(r,g,b){p.mixin(this,b);"string"!=typeof this.plot&&(this.plot="default");this.update(g)},clear:function(){this.dyn={}},update:function(r){p.isArray(r)?
this.data=r:(this.source=r,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(p,t,r,s,g){var b=p.getObject("dojox.charting.axis2d.common",!0),n=function(b){b.marginLeft="0px";b.marginTop="0px";b.marginRight="0px";b.marginBottom="0px";b.paddingLeft="0px";b.paddingTop="0px";b.paddingRight=
"0px";b.paddingBottom="0px";b.borderLeftWidth="0px";b.borderTopWidth="0px";b.borderRightWidth="0px";b.borderBottomWidth="0px"};return p.mixin(b,{createText:{gfx:function(b,d,c,k,f,g,a,e){return d.createText({x:c,y:k,text:g,align:f}).setFont(a).setFill(e)},html:function(b,d,c,k,f,q,a,e,m){d=t.doc.createElement("div");var p=d.style,x;b.getTextDir&&(d.dir=b.getTextDir(q));n(p);p.font=a;d.innerHTML=String(q).replace(/\s/g,"&nbsp;");p.color=e;p.position="absolute";p.left="-10000px";t.body().appendChild(d);
var z=s.normalizedLength(s.splitFontString(a).size);m||(d.getBoundingClientRect?(x=d.getBoundingClientRect(),x=x.width||x.right-x.left):x=r.getMarginBox(d).w);"rtl"==d.dir&&(c+=m?m:x);t.body().removeChild(d);p.position="relative";if(m)switch(p.width=m+"px",f){case "middle":p.textAlign="center";p.left=c-m/2+"px";break;case "end":p.textAlign="right";p.left=c-m+"px";break;default:p.left=c+"px",p.textAlign="left"}else switch(f){case "middle":p.left=Math.floor(c-x/2)+"px";break;case "end":p.left=Math.floor(c-
x)+"px";break;default:p.left=Math.floor(c)+"px"}p.top=Math.floor(k-z)+"px";p.whiteSpace="nowrap";m=t.doc.createElement("div");p=m.style;n(p);p.width="0px";p.height="0px";m.appendChild(d);b.node.insertBefore(m,b.node.firstChild);g("dojo-bidi")&&b.htmlElementsRegistry.push([m,c,k,f,q,a,e]);return m}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(p){return p})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang",
"dojo/_base/array"],function(p,t,r){var s=t.getObject("lang.functional",!0,p),g={},b=1<"ab".split(/a*/).length?String.prototype.split:function(b){var c=this.split.call(this,b);(b=b.exec(this))&&0==b.index&&c.unshift("");return c},n=function(d){var c=[],k=b.call(d,/\s*->\s*/m);if(1<k.length)for(;k.length;)d=k.pop(),c=k.pop().split(/\s*,\s*|\s+/m),k.length&&k.push("(function("+c.join(", ")+"){ return ("+d+"); })");else if(d.match(/\b_\b/))c=["_"];else{var k=d.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),f=
d.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(k||f)k&&(c.push("$1"),d="$1"+d),f&&(c.push("$2"),d+="$2");else{var k=d.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],l={};r.forEach(k,
function(a){l.hasOwnProperty(a)||(c.push(a),l[a]=1)})}}return{args:c,body:d}},l=function(b){return b.length?function(){var c=b.length-1,k=s.lambda(b[c]).apply(this,arguments);for(--c;0<=c;--c)k=s.lambda(b[c]).call(this,k);return k}:function(b){return b}};t.mixin(s,{rawLambda:function(b){return n(b)},buildLambda:function(b){b=n(b);return"function("+b.args.join(",")+"){return ("+b.body+");}"},lambda:function(b){if("function"==typeof b)return b;if(b instanceof Array)return l(b);if(g.hasOwnProperty(b))return g[b];
var c=n(b);return g[b]=new Function(c.args,"return ("+c.body+");")},clearLambdaCache:function(){g={}}});return s})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(p,t,r,s){var g={};t.mixin(s,{filter:function(b,n,l){"string"==typeof b&&(b=b.split(""));l=l||p.global;n=s.lambda(n);var d=[],c,k,f;if(t.isArray(b))for(k=0,f=b.length;k<f;++k)c=b[k],n.call(l,c,k,b)&&d.push(c);else if("function"==typeof b.hasNext&&"function"==
typeof b.next)for(k=0;b.hasNext();)c=b.next(),n.call(l,c,k++,b)&&d.push(c);else for(k in b)k in g||(c=b[k],n.call(l,c,k,b)&&d.push(c));return d},forEach:function(b,n,l){"string"==typeof b&&(b=b.split(""));l=l||p.global;n=s.lambda(n);var d,c;if(t.isArray(b))for(d=0,c=b.length;d<c;n.call(l,b[d],d,b),++d);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(d=0;b.hasNext();n.call(l,b.next(),d++,b));else for(d in b)d in g||n.call(l,b[d],d,b);return l},map:function(b,n,l){"string"==typeof b&&
(b=b.split(""));l=l||p.global;n=s.lambda(n);var d,c,k;if(t.isArray(b))for(d=Array(c=b.length),k=0;k<c;d[k]=n.call(l,b[k],k,b),++k);else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(d=[],k=0;b.hasNext();d.push(n.call(l,b.next(),k++,b)));else for(k in d=[],b)k in g||d.push(n.call(l,b[k],k,b));return d},every:function(b,n,l){"string"==typeof b&&(b=b.split(""));l=l||p.global;n=s.lambda(n);var d,c;if(t.isArray(b))for(d=0,c=b.length;d<c;++d){if(!n.call(l,b[d],d,b))return!1}else if("function"==
typeof b.hasNext&&"function"==typeof b.next)for(d=0;b.hasNext();){if(!n.call(l,b.next(),d++,b))return!1}else for(d in b)if(!(d in g||n.call(l,b[d],d,b)))return!1;return!0},some:function(b,n,l){"string"==typeof b&&(b=b.split(""));l=l||p.global;n=s.lambda(n);var d,c;if(t.isArray(b))for(d=0,c=b.length;d<c;++d){if(n.call(l,b[d],d,b))return!0}else if("function"==typeof b.hasNext&&"function"==typeof b.next)for(d=0;b.hasNext();){if(n.call(l,b.next(),d++,b))return!0}else for(d in b)if(!(d in g)&&n.call(l,
b[d],d,b))return!0;return!1}});return s})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(p,t,r){var s={};t.mixin(r,{keys:function(g){var b=[],n;for(n in g)n in s||b.push(n);return b},values:function(g){var b=[],n;for(n in g)n in s||b.push(g[n]);return b},filterIn:function(g,b,n){n=n||p.global;b=r.lambda(b);var l={},d,c;for(c in g)c in s||(d=g[c],b.call(n,d,c,g)&&(l[c]=d));return l},forIn:function(g,b,n){n=n||p.global;b=r.lambda(b);for(var l in g)l in
s||b.call(n,g[l],l,g);return n},mapIn:function(g,b,n){n=n||p.global;b=r.lambda(b);var l={},d;for(d in g)d in s||(l[d]=b.call(n,g[d],d,g));return l}});return r})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(p,t,r,s){var g={};p.mixin(s,{foldl:function(b,n,l,d){"string"==typeof b&&(b=b.split(""));d=d||r.global;n=s.lambda(n);var c,k;if(p.isArray(b))for(c=0,k=b.length;c<k;l=n.call(d,l,b[c],c,b),++c);else if("function"==typeof b.hasNext&&
"function"==typeof b.next)for(c=0;b.hasNext();l=n.call(d,l,b.next(),c++,b));else for(c in b)c in g||(l=n.call(d,l,b[c],c,b));return l},foldl1:function(b,n,l){"string"==typeof b&&(b=b.split(""));l=l||r.global;n=s.lambda(n);var d,c,k;if(p.isArray(b))for(d=b[0],c=1,k=b.length;c<k;d=n.call(l,d,b[c],c,b),++c);else if("function"==typeof b.hasNext&&"function"==typeof b.next){if(b.hasNext())for(d=b.next(),c=1;b.hasNext();d=n.call(l,d,b.next(),c++,b));}else for(c in k=!0,b)c in g||(k?(d=b[c],k=!1):d=n.call(l,
d,b[c],c,b));return d},foldr:function(b,g,l,d){"string"==typeof b&&(b=b.split(""));d=d||r.global;g=s.lambda(g);for(var c=b.length;0<c;--c,l=g.call(d,l,b[c],c,b));return l},foldr1:function(b,g,l){"string"==typeof b&&(b=b.split(""));l=l||r.global;g=s.lambda(g);for(var d=b.length,c=b[d-1],d=d-1;0<d;--d,c=g.call(l,c,b[d],d,b));return c},reduce:function(b,g,l){return 3>arguments.length?s.foldl1(b,g):s.foldl(b,g,l)},reduceRight:function(b,g,l){return 3>arguments.length?s.foldr1(b,g):s.foldr(b,g,l)},unfold:function(b,
g,l,d,c){c=c||r.global;g=s.lambda(g);l=s.lambda(l);b=s.lambda(b);for(var k=[];!b.call(c,d);k.push(g.call(c,d)),d=l.call(c,d));return k}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(p,t,r){p.mixin(r,{filterRev:function(p,g,b){"string"==typeof p&&(p=p.split(""));b=b||t.global;g=r.lambda(g);for(var n=[],l,d=p.length-1;0<=d;--d)l=p[d],g.call(b,l,d,p)&&n.push(l);return n},forEachRev:function(p,g,b){"string"==typeof p&&(p=p.split(""));
b=b||t.global;g=r.lambda(g);for(var n=p.length-1;0<=n;g.call(b,p[n],n,p),--n);},mapRev:function(p,g,b){"string"==typeof p&&(p=p.split(""));b=b||t.global;g=r.lambda(g);for(var n=p.length,l=Array(n),n=n-1,d=0;0<=n;l[d++]=g.call(b,p[n],n,p),--n);return l},everyRev:function(p,g,b){"string"==typeof p&&(p=p.split(""));b=b||t.global;g=r.lambda(g);for(var n=p.length-1;0<=n;--n)if(!g.call(b,p[n],n,p))return!1;return!0},someRev:function(p,g,b){"string"==typeof p&&(p=p.split(""));b=b||t.global;g=r.lambda(g);
for(var n=p.length-1;0<=n;--n)if(g.call(b,p[n],n,p))return!0;return!1}});return r})},"dojox/charting/widget/Legend":function(){define("dojo/_base/declare dijit/_WidgetBase dojox/gfx dojo/_base/array dojo/has dojo/has!dojo-bidi?../bidi/widget/Legend dojox/lang/functional dojo/dom dojo/dom-construct dojo/dom-class dijit/registry".split(" "),function(p,t,r,s,g,b,n,l,d,c,k){t=p(g("dojo-bidi")?"dojox.charting.widget.NonBidiLegend":"dojox.charting.widget.Legend",t,{chartRef:"",horizontal:!0,swatchSize:18,
legendBody:null,postCreate:function(){!this.chart&&this.chartRef&&(this.chart=k.byId(this.chartRef)||k.byNode(l.byId(this.chartRef)));this.chart=this.chart.chart||this.chart;this.refresh()},buildRendering:function(){this.domNode=d.create("table",{role:"group","aria-label":"chart legend","class":"dojoxLegendNode"});this.legendBody=d.create("tbody",null,this.domNode);this.inherited(arguments)},destroy:function(){this._surfaces&&s.forEach(this._surfaces,function(b){b.destroy()});this.inherited(arguments)},
refresh:function(){this._surfaces&&s.forEach(this._surfaces,function(a){a.destroy()});for(this._surfaces=[];this.legendBody.lastChild;)d.destroy(this.legendBody.lastChild);this.horizontal&&(c.add(this.domNode,"dojoxLegendHorizontal"),this._tr=d.create("tr",null,this.legendBody),this._inrow=0);var b=this.series||this.chart.series;if(0!=b.length)if("dojox.charting.plot2d.Pie"==b[0].chart.stack[0].declaredClass){var k=b[0].chart.stack[0];"number"==typeof k.run.data[0]?(b=n.map(k.run.data,"Math.max(x, 0)"),
b=n.map(b,"/this",n.foldl(b,"+",0)),s.forEach(b,function(a,b){this._addLabel(k.dyn[b],k._getLabel(100*a)+"%")},this)):s.forEach(k.run.data,function(a,b){this._addLabel(k.dyn[b],a.legend||a.text||a.y)},this)}else s.forEach(b,function(a){this._addLabel(a.dyn,a.legend||a.name)},this)},_addLabel:function(b,k){var a=d.create("td"),e=d.create("div",null,a),m=d.create("label",null,a),l=d.create("div",{style:{width:this.swatchSize+"px",height:this.swatchSize+"px","float":"left"}},e);c.add(e,"dojoxLegendIcon dijitInline");
c.add(m,"dojoxLegendText");this._tr?(this._tr.appendChild(a),++this._inrow===this.horizontal&&(this._tr=d.create("tr",null,this.legendBody),this._inrow=0)):d.create("tr",null,this.legendBody).appendChild(a);this._makeIcon(l,b);m.innerHTML=String(k);g("dojo-bidi")&&(m.dir=this.getTextDir(k,m.dir))},_makeIcon:function(b,c){var a=this.swatchSize,e=this.swatchSize,d=r.createSurface(b,e,a);this._surfaces.push(d);if(c.fill)d.createRect({x:2,y:2,width:e-4,height:a-4}).setFill(c.fill).setStroke(c.stroke);
else if(c.stroke||c.marker){var k={x1:0,y1:a/2,x2:e,y2:a/2};c.stroke&&d.createLine(k).setStroke(c.stroke);c.marker&&d.createPath({path:"M"+e/2+" "+a/2+" "+c.marker}).setFill(c.markerFill).setStroke(c.markerStroke)}else d.createRect({x:2,y:2,width:e-4,height:a-4}).setStroke("black"),d.createLine({x1:2,y1:2,x2:e-2,y2:a-2}).setStroke("black"),d.createLine({x1:2,y1:a-2,x2:e-2,y2:2}).setStroke("black")}});return g("dojo-bidi")?p("dojox.charting.widget.Legend",[t,b]):t})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q){n=s(r("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",n,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,
trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,b){this.opt=p.clone(this.defaultParams);k.updateWithObject(this.opt,b);k.updateWithPattern(this.opt,b,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0},setWindow:function(a,b){a!=this.scale&&(this._invalidMaxLabelSize=
!0);return this.inherited(arguments)},_groupLabelWidth:function(a,b,d){if(!a.length)return 0;50<a.length&&(a.length=50);p.isObject(a[0])&&(a=f.map(a,function(a){return a.text}));d&&(a=f.map(a,function(a){return 0==p.trim(a).length?"":a.substring(0,d)+this.trailingSymbol},this));a=a.join("<br>");return c._base._getTextBox(a,{font:b}).w||0},_getMaxLabelSize:function(a,b,c,d,f,k){if(null==this._maxLabelSize&&6==arguments.length){var g=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var n=
p.clone(g);delete n.to;delete n.from;var q=l.buildScaler(a,b,c,n,g.to-g.from);q.minMinorStep=0;this._majorStart=q.major.start;g=l.buildTicks(q,g);if(k&&g){var r=q=0,s=function(a){a.label&&this.push(a.label)},H=[];this.opt.majorLabels&&(t.forEach(g.major,s,H),q=this._groupLabelWidth(H,f,n.maxLabelCharCount),n.maxLabelSize&&(q=Math.min(n.maxLabelSize,q)));H=[];this.opt.dropLabels&&this.opt.minorLabels&&(t.forEach(g.minor,s,H),r=this._groupLabelWidth(H,f,n.maxLabelCharCount),n.maxLabelSize&&(r=Math.min(n.maxLabelSize,
r)));this._maxLabelSize={majLabelW:q,minLabelW:r,majLabelH:k,minLabelH:k}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(a,b,d){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||d!=this._oldSpan)&&Infinity!=a&&-Infinity!=b){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=d;var f=this.opt,k=this.chart.theme.axis,g=f.rotation%360,n=this.chart.theme.axis.tick.labelGap,q=f.font||
k.majorTick&&k.majorTick.font||k.tick&&k.tick.font,k=q?c.normalizedLength(c.splitFontString(q).size):0,q=this._getMaxLabelSize(a,b,d,g,q,k);"number"!=typeof n&&(n=4);if(q&&f.dropLabels){var f=Math.abs(Math.cos(g*Math.PI/180)),p=Math.abs(Math.sin(g*Math.PI/180));0>g&&(g+=360);switch(g){case 0:case 180:this.vertical?g=k:(g=q.majLabelW,k=q.minLabelW);break;case 90:case 270:this.vertical?(g=q.majLabelW,k=q.minLabelW):g=k;break;default:var g=this.vertical?Math.min(q.majLabelW,k/f):Math.min(q.majLabelW,
k/p),r=Math.sqrt(q.minLabelW*q.minLabelW+k*k),k=Math.min(r,this.vertical?k*f+q.minLabelW*p:q.minLabelW*f+k*p)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(g,k)+n;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((g+n)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=l.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var a={l:0,r:0,t:0,b:0};if(!this.scaler)return a;var b=this.opt,
d=this.chart.theme.axis,f=this.chart.theme.axis.tick.labelGap,k=b.titleFont||d.title&&d.title.font,d=0==b.titleGap?0:b.titleGap||d.title&&d.title.gap,l=this.chart.theme.getTick("major",b),g=this.chart.theme.getTick("minor",b),k=k?c.normalizedLength(c.splitFontString(k).size):0,n=b.rotation%360,q=b.leftBottom,p=Math.abs(Math.cos(n*Math.PI/180)),r=Math.abs(Math.sin(n*Math.PI/180));this.trailingSymbol=void 0===b.trailingSymbol||null===b.trailingSymbol?this.trailingSymbol:b.trailingSymbol;"number"!=typeof f&&
(f=4);0>n&&(n+=360);var s=this._getMaxLabelSize();if(s){var t=Math.ceil(Math.max(s.majLabelW,s.minLabelW))+1,J=Math.ceil(Math.max(s.majLabelH,s.minLabelH))+1;if(this.vertical)switch(s=q?"l":"r",n){case 0:case 180:a[s]=t;a.t=a.b=J/2;break;case 90:case 270:a[s]=J;a.t=a.b=t/2;break;default:45>=n||180<n&&225>=n?(a[s]=J*r/2+t*p,a[q?"t":"b"]=J*p/2+t*r,a[q?"b":"t"]=J*p/2):315<n||180>n&&135<n?(a[s]=J*r/2+t*p,a[q?"b":"t"]=J*p/2+t*r,a[q?"t":"b"]=J*p/2):90>n||180<n&&270>n?(a[s]=J*r+t*p,a[q?"t":"b"]=J*p+t*r):
(a[s]=J*r+t*p,a[q?"b":"t"]=J*p+t*r)}else switch(s=q?"b":"t",n){case 0:case 180:a[s]=J;a.l=a.r=t/2;break;case 90:case 270:a[s]=t;a.l=a.r=J/2;break;default:45<=n&&90>=n||225<=n&&270>=n?(a[s]=J*p/2+t*r,a[q?"r":"l"]=J*r/2+t*p,a[q?"l":"r"]=J*r/2):90<=n&&135>=n||270<=n&&315>=n?(a[s]=J*p/2+t*r,a[q?"l":"r"]=J*r/2+t*p,a[q?"r":"l"]=J*r/2):45>n||180<n&&225>n?(a[s]=J*p+t*r,a[q?"r":"l"]=J*r+t*p):(a[s]=J*p+t*r,a[q?"l":"r"]=J*r+t*p)}a[s]+=f+Math.max(0<l.length?l.length:0,0<g.length?g.length:0)+(b.title?k+d:0)}return a},
cleanGroup:function(a){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(a,b,c,f,k,l,g,n,q){if(!this.opt.enableCache||"html"==a)return d.createText[a](this.chart,b,c,f,k,l,g,n,q);0<this._textFreePool.length?(a=this._textFreePool.pop(),a.setShape({x:c,y:f,text:l,align:k}),b.add(a)):a=d.createText[a](this.chart,
b,c,f,k,l,g,n);this._textUsePool.push(a);return a},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(c);return c},render:function(a,b){var f,k,g,n,q,p,s,F,D,H,N,J,M,E,K=this._isRtl();if(!this.dirty||!this.scaler)return this;var G=this.opt;D=this.chart.theme.axis;var u=G.leftBottom,S=G.rotation%360,Q=0,W,P,Q=this.chart.theme.axis.tick.labelGap,aa=G.font||
D.majorTick&&D.majorTick.font||D.tick&&D.tick.font,ca=G.titleFont||D.title&&D.title.font,Y=G.fontColor||D.majorTick&&D.majorTick.fontColor||D.tick&&D.tick.fontColor||"black",U=G.titleFontColor||D.title&&D.title.fontColor||"black";q=0==G.titleGap?0:G.titleGap||D.title&&D.title.gap||15;var V=G.titleOrientation||D.title&&D.title.orientation||"axis",R=this.chart.theme.getTick("major",G),ba=this.chart.theme.getTick("minor",G),Z=this.chart.theme.getTick("micro",G),na="stroke"in G?G.stroke:D.stroke,ka=aa?
c.normalizedLength(c.splitFontString(aa).size):0;p=Math.abs(Math.cos(S*Math.PI/180));W=Math.abs(Math.sin(S*Math.PI/180));var ja=ca?c.normalizedLength(c.splitFontString(ca).size):0;"number"!=typeof Q&&(Q=4);0>S&&(S+=360);var ea=this._getMaxLabelSize(),ea=ea&&ea.majLabelW;if(this.vertical){M=a.height-b.b;E=void 0;N=b.t;J=void 0;D=(a.height-b.b+b.t)/2;H=void 0;W=ka*W+(ea||0)*p+Q+Math.max(0<R.length?R.length:0,0<ba.length?ba.length:0)+ja+q;s=0;F=-1;k=f=0;q=1;p=0;g=Q;n=0;switch(S){case 0:P="end";k=0.4*
ka;break;case 90:P="middle";f=-ka;break;case 180:P="start";k=0.4*-ka;break;case 270:P="middle";break;default:45>S?(P="end",k=0.4*ka):90>S?(P="end",k=0.4*ka):135>S?P="start":225>S?(P="start",k=0.4*-ka):270>S?(P="start",f=u?0:0.4*ka):315>S?(P="end",f=u?0:0.4*ka):(P="end",k=0.4*ka)}if(u)E=J=b.l,Q=V&&"away"==V?90:270,H=b.l-W+(270==Q?ja:0),q=-1,g=-g;else switch(E=J=a.width-b.r,Q=V&&"axis"==V?90:270,H=a.width-b.r+W-(270==Q?0:ja),P){case "start":P="end";break;case "end":P="start";break;case "middle":f+=
ka}}else{E=b.l;M=void 0;J=a.width-b.r;N=void 0;H=(a.width-b.r+b.l)/2;D=void 0;W=ka*p+(ea||0)*W+Q+Math.max(0<R.length?R.length:0,0<ba.length?ba.length:0)+ja+q;s=K?-1:1;q=k=f=F=0;p=1;g=0;n=Q;switch(S){case 0:P="middle";k=ka;break;case 90:P="start";f=0.4*-ka;break;case 180:P="middle";break;case 270:P="end";f=0.4*ka;break;default:45>S?(P="start",k=u?ka:0):135>S?(P="start",f=0.4*-ka):180>S?(P="start",k=u?0:-ka):225>S?(P="end",k=u?0:-ka):315>S?(P="end",k=u?0.4*ka:0):(P="end",k=u?ka:0)}if(u)M=N=a.height-
b.b,Q=V&&"axis"==V?180:0,D=a.height-b.b+W-(Q?ja:0);else switch(M=N=b.t,Q=V&&"away"==V?180:0,D=b.t-W+(Q?0:ja),p=-1,n=-n,P){case "start":P="end";break;case "end":P="start";break;case "middle":k-=ka}}this.cleanGroup();var da=this.group,u=this.scaler,V=this.ticks,wa=l.getTransformerFromModel(this.scaler),L=G.title&&Q||S||!this.opt.htmlLabels||r("ie")||r("opera")?"gfx":"html",Pa=q*R.length,Ua=p*R.length,ra=this._skipInterval;da.createLine({x1:E,y1:M,x2:J,y2:N}).setStroke(na);G.title&&(ca=d.createText[L](this.chart,
da,H,D,"middle",G.title,ca,U),"html"==L?this.htmlElements.push(ca):ca.setTransform(c.matrix.rotategAt(Q,H,D)));if(null==V)return this.dirty=!1,this;var db=0<V.major.length?(V.major[0].value-this._majorStart)/u.major.tick:0,Qa=this.opt.majorLabels;t.forEach(V.major,function(a,b){var e=wa(a.value),d=(K?J:E)+s*e,l=M+F*e;b+=db;this.createLine(da,{x1:d,y1:l,x2:d+Pa,y2:l+Ua}).setStroke(R);if(a.label&&(!ra||0==(b-(1+ra))%(1+ra))){var q=G.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,aa,G.maxLabelCharCount):
{text:a.label,truncated:!1},q=G.maxLabelSize?this.getTextWithLimitLength(q.text,aa,G.maxLabelSize,q.truncated):q,e=this.createText(L,da,d+(0<R.length?Pa:0)+g+(S?0:f),l+(0<R.length?Ua:0)+n+(S?0:k),P,q.text,aa,Y);q.truncated&&this.chart.formatTruncatedLabel(e,a.label,L);q.truncated&&this.labelTooltip(e,this.chart,a.label,q.text,aa,L);"html"==L?this.htmlElements.push(e):S&&e.setTransform([{dx:f,dy:k},c.matrix.rotategAt(S,d+(0<R.length?Pa:0)+g,l+(0<R.length?Ua:0)+n)])}},this);Pa=q*ba.length;Ua=p*ba.length;
Qa=this.opt.minorLabels&&u.minMinorStep<=u.minor.tick*u.bounds.scale;t.forEach(V.minor,function(a){var b=wa(a.value),e=(K?J:E)+s*b,d=M+F*b;this.createLine(da,{x1:e,y1:d,x2:e+Pa,y2:d+Ua}).setStroke(ba);if(Qa&&a.label){var l=G.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,aa,G.maxLabelCharCount):{text:a.label,truncated:!1},l=G.maxLabelSize?this.getTextWithLimitLength(l.text,aa,G.maxLabelSize,l.truncated):l,b=this.createText(L,da,e+(0<ba.length?Pa:0)+g+(S?0:f),d+(0<ba.length?Ua:0)+n+(S?0:
k),P,l.text,aa,Y);l.truncated&&this.chart.formatTruncatedLabel(b,a.label,L);l.truncated&&this.labelTooltip(b,this.chart,a.label,l.text,aa,L);"html"==L?this.htmlElements.push(b):S&&b.setTransform([{dx:f,dy:k},c.matrix.rotategAt(S,e+(0<ba.length?Pa:0)+g,d+(0<ba.length?Ua:0)+n)])}},this);Pa=q*Z.length;Ua=p*Z.length;t.forEach(V.micro,function(a){var b=wa(a.value);a=E+s*b;b=M+F*b;this.createLine(da,{x1:a,y1:b,x2:a+Pa,y2:b+Ua}).setStroke(Z)},this);this.dirty=!1;return this},labelTooltip:function(a,e,d,
f,k,l){var n=["dijit/Tooltip"],q={type:"rect"},r=["above","below"];f=c._base._getTextBox(f,{font:k}).w||0;k=k?c.normalizedLength(c.splitFontString(k).size):0;"html"==l?(p.mixin(q,b.position(a.firstChild,!0)),q.width=Math.ceil(f),q.height=Math.ceil(k),this._events.push({shape:dojo,handle:g.connect(a.firstChild,"onmouseover",this,function(a){require(n,function(a){a.show(d,q,r)})})}),this._events.push({shape:dojo,handle:g.connect(a.firstChild,"onmouseout",this,function(a){require(n,function(a){a.hide(q)})})})):
(l=a.getShape(),e=e.getCoords(),q=p.mixin(q,{x:l.x-f/2,y:l.y}),q.x+=e.x,q.y+=e.y,q.x=Math.round(q.x),q.y=Math.round(q.y),q.width=Math.ceil(f),q.height=Math.ceil(k),this._events.push({shape:a,handle:a.connect("onmouseenter",this,function(a){require(n,function(a){a.show(d,q,r)})})}),this._events.push({shape:a,handle:a.connect("onmouseleave",this,function(a){require(n,function(a){a.hide(q)})})}))},_isRtl:function(){return!1}});return r("dojo-bidi")?s("dojox.charting.axis2d.Default",[n,q]):n})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang",
"dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(p,t,r,s,g){return t("dojox.charting.axis2d.Invisible",r,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(b,n){this.opt=p.clone(this.defaultParams);g.updateWithObject(this.opt,n);g.updateWithPattern(this.opt,n,this.optionalParams)},dependOnData:function(){return!("min"in
this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(b,g){this.scale=b;this.offset=g;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(b,g,l){if(this.initialized())return this;var d=this.opt;this.labels=d.labels;this.scaler=s.buildScaler(b,
g,l,d);var c=this.scaler.bounds;"scale"in this&&(d.from=c.lower+this.offset,d.to=(c.upper-c.lower)/this.scale+d.from,!isFinite(d.from)||isNaN(d.from)||!isFinite(d.to)||isNaN(d.to)||d.to-d.from>=c.upper-c.lower?(delete d.from,delete d.to,delete this.scale,delete this.offset):(d.from<c.lower?(d.to+=c.lower-d.from,d.from=c.lower):d.to>c.upper&&(d.from+=c.upper-d.to,d.to=c.upper),this.offset=d.from-c.lower),this.scaler=s.buildScaler(b,g,l,d),1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset));
return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(p,t){return p("dojox.charting.axis2d.Base",t,{constructor:function(p,s){this.vertical=s&&s.vertical;this.opt={};this.opt.min=s&&s.min;this.opt.max=s&&s.max},clear:function(){return this},initialized:function(){return!1},calculate:function(p,s,g){return this},getScaler:function(){return null},getTicks:function(){return null},
getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(p,s){this.dirty=!1;return this}})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(p,t){function r(b,l){b=b.toLowerCase();for(var d=l.length-1;0<=d;--d)if(b===l[d])return!0;return!1}var s=p.getObject("dojox.charting.scaler.linear",!0),g=t.getNumericLabel,b=function(b,l,d,c,k,f,g){d=p.delegate(d);c||("major"==d.fixUpper&&(d.fixUpper="minor"),"major"==d.fixLower&&(d.fixLower="minor"));k||("minor"==
d.fixUpper&&(d.fixUpper="micro"),"minor"==d.fixLower&&(d.fixLower="micro"));f||("micro"==d.fixUpper&&(d.fixUpper="none"),"micro"==d.fixLower&&(d.fixLower="none"));var a=r(d.fixLower,["major"])?Math.floor(d.min/c)*c:r(d.fixLower,["minor"])?Math.floor(d.min/k)*k:r(d.fixLower,["micro"])?Math.floor(d.min/f)*f:d.min,e=r(d.fixUpper,["major"])?Math.ceil(d.max/c)*c:r(d.fixUpper,["minor"])?Math.ceil(d.max/k)*k:r(d.fixUpper,["micro"])?Math.ceil(d.max/f)*f:d.max;d.useMin&&(b=a);d.useMax&&(l=e);var m=!c||d.useMin&&
r(d.fixLower,["major"])?b:Math.ceil(b/c)*c,v=!k||d.useMin&&r(d.fixLower,["major","minor"])?b:Math.ceil(b/k)*k,t=!f||d.useMin&&r(d.fixLower,["major","minor","micro"])?b:Math.ceil(b/f)*f,z=c?(d.useMax&&r(d.fixUpper,["major"])?Math.round((l-m)/c):Math.floor((l-m)/c))+1:0,A=k?(d.useMax&&r(d.fixUpper,["major","minor"])?Math.round((l-v)/k):Math.floor((l-v)/k))+1:0;d=f?(d.useMax&&r(d.fixUpper,["major","minor","micro"])?Math.round((l-t)/f):Math.floor((l-t)/f))+1:0;var y=k?Math.round(c/k):0,C=f?Math.round(k/
f):0,F=c?Math.floor(Math.log(c)/Math.LN10):0,D=k?Math.floor(Math.log(k)/Math.LN10):0,H=g/(l-b);isFinite(H)||(H=1);return{bounds:{lower:a,upper:e,from:b,to:l,scale:H,span:g},major:{tick:c,start:m,count:z,prec:F},minor:{tick:k,start:v,count:A,prec:D},micro:{tick:f,start:t,count:d,prec:0},minorPerMajor:y,microPerMinor:C,scaler:s}};return p.mixin(s,{buildScaler:function(g,l,d,c,k,f){var q={fixUpper:"none",fixLower:"none",natural:!1};c&&("fixUpper"in c&&(q.fixUpper=String(c.fixUpper)),"fixLower"in c&&
(q.fixLower=String(c.fixLower)),"natural"in c&&(q.natural=Boolean(c.natural)));f=!f||3>f?3:f;"min"in c&&(g=c.min);"max"in c&&(l=c.max);c.includeZero&&(0<g&&(g=0),0>l&&(l=0));q.min=g;q.useMin=!0;q.max=l;q.useMax=!0;"from"in c&&(g=c.from,q.useMin=!1);"to"in c&&(l=c.to,q.useMax=!1);if(l<=g)return b(g,l,q,0,0,0,d);k||(k=l-g);k=Math.floor(Math.log(k)/Math.LN10);k=c&&"majorTickStep"in c?c.majorTickStep:Math.pow(10,k);var a=0,e=0,m;if(c&&"minorTickStep"in c)a=c.minorTickStep;else{do{a=k/10;if(!q.natural||
0.9<a)if(m=b(g,l,q,k,a,0,d),m.bounds.scale*m.minor.tick>f)break;a=k/5;if(!q.natural||0.9<a)if(m=b(g,l,q,k,a,0,d),m.bounds.scale*m.minor.tick>f)break;a=k/2;if(!q.natural||0.9<a)if(m=b(g,l,q,k,a,0,d),m.bounds.scale*m.minor.tick>f)break;return b(g,l,q,k,0,0,d)}while(0)}if(c&&"microTickStep"in c)e=c.microTickStep,m=b(g,l,q,k,a,e,d);else{do{e=a/10;if(!q.natural||0.9<e)if(m=b(g,l,q,k,a,e,d),3<m.bounds.scale*m.micro.tick)break;e=a/5;if(!q.natural||0.9<e)if(m=b(g,l,q,k,a,e,d),3<m.bounds.scale*m.micro.tick)break;
e=a/2;if(!q.natural||0.9<e)if(m=b(g,l,q,k,a,e,d),3<m.bounds.scale*m.micro.tick)break;e=0}while(0)}return e?m:b(g,l,q,k,a,0,d)},buildTicks:function(b,l){var d,c,k,f=b.major.start,q=b.minor.start,a=b.micro.start;if(l.microTicks&&b.micro.tick)d=b.micro.tick,c=a;else if(l.minorTicks&&b.minor.tick)d=b.minor.tick,c=q;else if(b.major.tick)d=b.major.tick,c=f;else return null;var e=1/b.bounds.scale;if(b.bounds.to<=b.bounds.from||isNaN(e)||!isFinite(e)||0>=d||isNaN(d)||!isFinite(d))return null;for(var m=[],
p=[],r=[];c<=b.bounds.to+e;)Math.abs(f-c)<d/2?(k={value:f},l.majorLabels&&(k.label=g(f,b.major.prec,l)),m.push(k),f+=b.major.tick,q+=b.minor.tick):Math.abs(q-c)<d/2?(l.minorTicks&&(k={value:q},l.minorLabels&&b.minMinorStep<=b.minor.tick*b.bounds.scale&&(k.label=g(q,b.minor.prec,l)),p.push(k)),q+=b.minor.tick):l.microTicks&&r.push({value:a}),a+=b.micro.tick,c+=d;return{major:m,minor:p,micro:r}},getTransformerFromModel:function(b){var l=b.bounds.from,d=b.bounds.scale;return function(b){return(b-l)*
d}},getTransformerFromPlot:function(b){var l=b.bounds.from,d=b.bounds.scale;return function(b){return b/d+l}}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(p){var t=function(g,b){return Math.abs(g-b)<=1E-6*(Math.abs(g)+Math.abs(b))},r=p.getObject("dojox.charting.scaler.common",!0),s={};return p.mixin(r,{doIfLoaded:function(g,b,n){if(void 0==s[g])try{s[g]=require(g)}catch(l){s[g]=null}return s[g]?b(s[g]):n()},getNumericLabel:function(g,b,n){var l="";r.doIfLoaded("dojo/number",
function(c){l=(n.fixed?c.format(g,{places:0>b?-b:0}):c.format(g))||""},function(){l=n.fixed?g.toFixed(0>b?-b:0):g.toString()});if(n.labelFunc){var d=n.labelFunc(l,g,b);if(d)return d}if(n.labels){for(var d=n.labels,c=0,k=d.length;c<k;){var f=Math.floor((c+k)/2);d[f].value<g?c=f+1:k=f}if(c<d.length&&t(d[c].value,g))return d[c].text;--c;if(0<=c&&c<d.length&&t(d[c].value,g))return d[c].text;c+=2;if(c<d.length&&t(d[c].value,g))return d[c].text}return l}})})},"dojox/charting/plot2d/Lines":function(){define(["dojo/_base/declare",
"./Default"],function(p,t){return p("dojox.charting.plot2d.Lines",t,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/Default":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(p,t,r,s,g,b,n,l,d,c,k){var f=d.lambda("item.purgeGroup()");return t("dojox.charting.plot2d.Default",[g,b],{defaultParams:{lines:!0,
areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(b,a){this.opt=p.clone(p.mixin(this.opt,this.defaultParams));c.updateWithObject(this.opt,a);c.updateWithPattern(this.opt,a,this.optionalParams);this.animate=this.opt.animate},createPath:function(b,a,c){var d;
this.opt.enableCache&&0<b._pathFreePool.length?(d=b._pathFreePool.pop(),d.setShape(c),a.add(d)):d=a.createPath(c);this.opt.enableCache&&b._pathUsePool.push(d);return d},buildSegments:function(b,a){for(var c=this.series[b],d=a?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,f=a?Math.min(c.data.length,Math.ceil(this._hScaler.bounds.to)):c.data.length,k=null,l=[];d<f;d++)if(null!=c.data[d]&&(a||null!=c.data[d].y))k||(k=[],l.push({index:d,rseg:k})),k.push(a&&c.data[d].hasOwnProperty("y")?c.data[d].y:
c.data[d]);else if(!this.opt.interpolate||a)k=null;return l},render:function(b,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(b,a);this.resetEvents();this.dirty=this.isDirty();var c;this.dirty&&(r.forEach(this.series,f),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),c=this.getGroup(),l.forEachRev(this.series,function(a){a.cleanGroup(c)}));for(var d=this.chart.theme,g,t,z=this.events(),A=this.series.length-1;0<=A;--A){var y=this.series[A];if(this.dirty||y.dirty)if(y.cleanGroup(),
this.opt.enableCache&&(y._pathFreePool=(y._pathFreePool?y._pathFreePool:[]).concat(y._pathUsePool?y._pathUsePool:[]),y._pathUsePool=[]),y.data.length){var C=d.next(this.opt.areas?"area":"line",[this.opt,y],!0),F,D=this._hScaler.scaler.getTransformerFromModel(this._hScaler),H=this._vScaler.scaler.getTransformerFromModel(this._vScaler),N=this._eventSeries[y.name]=Array(y.data.length);c=y.group;for(var J=r.some(y.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),M=this.buildSegments(A,
J),E=0;E<M.length;E++){var K=M[E];F=J?r.map(K.rseg,function(c,e){return{x:D(e+K.index+1)+a.l,y:b.height-a.b-H(c),data:c}},this):r.map(K.rseg,function(c){return{x:D(c.x)+a.l,y:b.height-a.b-H(c.y),data:c}},this);if(J&&this.opt.interpolate)for(;E<M.length;)E++,(K=M[E])&&(F=F.concat(r.map(K.rseg,function(c,e){return{x:D(e+K.index+1)+a.l,y:b.height-a.b-H(c),data:c}},this)));var G=this.opt.tension?n.curve(F,this.opt.tension):"";if(this.opt.areas&&1<F.length){var u=this._plotFill(C.series.fill,b,a),S=p.clone(F);
this.opt.tension?y.dyn.fill=c.createPath(G+" "+("L"+S[S.length-1].x+","+(b.height-a.b)+" L"+S[0].x+","+(b.height-a.b)+" L"+S[0].x+","+S[0].y)).setFill(u).getFill():(S.push({x:F[F.length-1].x,y:b.height-a.b}),S.push({x:F[0].x,y:b.height-a.b}),S.push(F[0]),y.dyn.fill=c.createPolyline(S).setFill(u).getFill())}if(this.opt.lines||this.opt.markers)g=C.series.stroke,C.series.outline&&(t=y.dyn.outline=n.makeStroke(C.series.outline),t.width=2*t.width+g.width);this.opt.markers&&(y.dyn.marker=C.symbol);var Q=
null,W=null,P=null;if(g&&C.series.shadow&&1<F.length){var aa=C.series.shadow,u=r.map(F,function(a){return{x:a.x+aa.dx,y:a.y+aa.dy}});this.opt.lines&&(y.dyn.shadow=this.opt.tension?c.createPath(n.curve(u,this.opt.tension)).setStroke(aa).getStroke():c.createPolyline(u).setStroke(aa).getStroke());this.opt.markers&&C.marker.shadow&&(aa=C.marker.shadow,P=r.map(u,function(a){return this.createPath(y,c,"M"+a.x+" "+a.y+" "+C.symbol).setStroke(aa).setFill(aa.color)},this))}if(this.opt.lines&&1<F.length){var ca;
t&&(y.dyn.outline=this.opt.tension?c.createPath(G).setStroke(t).getStroke():c.createPolyline(F).setStroke(t).getStroke());y.dyn.stroke=this.opt.tension?(ca=c.createPath(G)).setStroke(g).getStroke():(ca=c.createPolyline(F)).setStroke(g).getStroke();ca.setFilter&&C.series.filter&&ca.setFilter(C.series.filter)}G=null;if(this.opt.markers){var Y=C,Q=Array(F.length),W=Array(F.length);t=null;Y.marker.outline&&(t=n.makeStroke(Y.marker.outline),t.width=2*t.width+(Y.marker.stroke?Y.marker.stroke.width:0));
r.forEach(F,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var f="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&f.push(this.opt.styleFunc(a.data));Y=d.addMixin(C,"marker",f,!0)}else Y=d.post(C,"marker");f="M"+a.x+" "+a.y+" "+Y.symbol;t&&(W[b]=this.createPath(y,c,f).setStroke(t));Q[b]=this.createPath(y,c,f).setStroke(Y.marker.stroke).setFill(Y.marker.fill)},this);y.dyn.markerFill=Y.marker.fill;y.dyn.markerStroke=Y.marker.stroke;!G&&this.opt.labels&&(G=Q[0].getBoundingBox());
z?r.forEach(Q,function(a,b){var c={element:"marker",index:b+K.index,run:y,shape:a,outline:W[b]||null,shadow:P&&P[b]||null,cx:F[b].x,cy:F[b].y};J?(c.x=b+K.index+1,c.y=y.data[b+K.index]):(c.x=K.rseg[b].x,c.y=y.data[b+K.index].y);this._connectEvents(c);N[b+K.index]=c},this):delete this._eventSeries[y.name]}if(this.opt.labels){var U=G?G.width:2,V=G?G.height:2;r.forEach(F,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var f="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&f.push(this.opt.styleFunc(a.data));
Y=d.addMixin(C,"marker",f,!0)}else Y=d.post(C,"marker");this.createLabel(c,K.rseg[b],{x:a.x-U/2,y:a.y-V/2,width:U,height:V},Y)},this)}}y.dirty=!1}else y.dirty=!1,d.skip();else d.skip(),this._reconnectEvents(y.name)}s("dojo-bidi")&&this._checkOrientation(this.group,b,a);this.animate&&(g=this.getGroup(),k.animateTransform(p.delegate({shape:g,duration:1200,transform:[{name:"translate",start:[0,b.height-a.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=
!1;return this}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/has ./Base ../scaler/primitive dojox/gfx dojox/gfx/fx dojox/lang/utils".split(" "),function(p,t,r,s,g,b,n,l,d){return t("dojox.charting.plot2d.CartesianBase",g,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0},constructor:function(b,k){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=
[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=k&&k.hAxis||"x";this.vAxis=k&&k.vAxis||"y";this.series=[];this.opt=p.clone(this.baseParams);d.updateWithObject(this.opt,k)},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(b,d){this.inherited(arguments);if(!d&&this.chart._nativeClip){var f=this.chart.offsets,l=this.chart.dim,a=Math.max(0,l.width-f.l-f.r),l=Math.max(0,l.height-f.t-f.b);this.group.setClip({x:f.l,y:f.t,width:a,
height:l});this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||this.group},setAxis:function(b){b&&(this[b.vertical?"_vAxis":"_hAxis"]=b);return this},toPage:function(b){var d=this._hAxis,f=this._vAxis,l=d.getScaler(),a=f.getScaler(),e=l.scaler.getTransformerFromModel(l),m=a.scaler.getTransformerFromModel(a),g=this.chart.getCoords(),n=this.chart.offsets,p=this.chart.dim,
l=function(a){var b={};b.x=e(a[d.name])+g.x+n.l;b.y=g.y+p.height-n.b-m(a[f.name]);return b};return b?l(b):l},toData:function(b){var d=this._hAxis,f=this._vAxis,l=d.getScaler(),a=f.getScaler(),e=l.scaler.getTransformerFromPlot(l),m=a.scaler.getTransformerFromPlot(a),g=this.chart.getCoords(),n=this.chart.offsets,p=this.chart.dim,l=function(a){var b={};b[d.name]=e(a.x-g.x-n.l);b[f.name]=m(g.y+p.height-a.y-n.b);return b};return b?l(b):l},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||
this._vAxis&&this._vAxis.dirty},createLabel:function(b,d,f,l){if(this.opt.labels){var a,e=this.opt.labelFunc?this.opt.labelFunc.apply(this,[d,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(d.y)?d:d.y);if("inside"==this.opt.labelStyle){var m=n._base._getTextBox(e,{font:l.series.font});d=f.x+f.width/2;a=f.y+f.height/2+m.h/4;if(m.w>f.width||m.h>f.height)return}else d=f.x+f.width/2,a=f.y-this.opt.labelOffset;this.renderLabel(b,d,a,e,l,"inside"==this.opt.labelStyle)}},performZoom:function(b,
d){var f=this._vAxis.scale||1,g=this._hAxis.scale||1,a=b.height-d.b,e=this._hScaler.bounds,e=(e.from-e.lower)*e.scale,m=this._vScaler.bounds,m=(m.from-m.lower)*m.scale,n=f/this.lastWindow.vscale,s=g/this.lastWindow.hscale,t=(this.lastWindow.xoffset-e)/(1==this.lastWindow.hscale?g:this.lastWindow.hscale),A=(m-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?f:this.lastWindow.vscale),y=this.getGroup(),a=l.animateTransform(p.delegate({shape:y,duration:1200,transform:[{name:"translate",start:[0,0],
end:[d.l*(1-s),a*(1-n)]},{name:"scale",start:[1,1],end:[s,n]},{name:"original"},{name:"translate",start:[0,0],end:[t,A]}]},this.zoom));p.mixin(this.lastWindow,{vscale:f,hscale:g,xoffset:e,yoffset:m});this.zoomQueue.push(a);r.connect(a,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(c,d){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(d.hmin,
d.hmax,c.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=b.buildScaler(d.hmin,d.hmax,c.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(d.vmin,d.vmax,c.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=b.buildScaler(d.vmin,d.vmax,c.height);return this}})})},"dojox/charting/plot2d/Base":function(){define("dojo/_base/declare dojo/_base/array dojox/gfx ../Element ./common ../axis2d/common dojo/has".split(" "),function(p,t,r,s,g,b,n){p=p("dojox.charting.plot2d.Base",
s,{constructor:function(b,d){d&&d.tooltipFunc&&(this.tooltipFunc=d.tooltipFunc)},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(b){return this},assignAxes:function(b){t.forEach(this.axes,function(d){this[d]&&this.setAxis(b[this[d]])},this)},addSeries:function(b){this.series.push(b);return this},getSeriesStats:function(){return g.collectSimpleStats(this.series)},calculateAxes:function(b){this.initializeScalers(b,this.getSeriesStats());return this},initializeScalers:function(){return this},
isDataDirty:function(){return t.some(this.series,function(b){return b.dirty})},render:function(b,d){return this},renderLabel:function(l,d,c,k,f,g,a){l=b.createText[this.opt.htmlLabels&&"vml"!=r.renderer?"html":"gfx"](this.chart,l,d,c,a?a:"middle",k,f.series.font,f.series.fontColor);g&&(this.opt.htmlLabels&&"vml"!=r.renderer?l.style.pointerEvents="none":l.rawNode&&(l.rawNode.style.pointerEvents="none"));this.opt.htmlLabels&&"vml"!=r.renderer&&this.htmlElements.push(l);return l},getRequiredColors:function(){return this.series.length},
_getLabel:function(b){return g.getLabel(b,this.opt.fixed,this.opt.precision)}});n("dojo-bidi")&&p.extend({_checkOrientation:function(b,d,c){this.chart.applyMirroring(this.group,d,c)}});return p})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),function(p,t,r,s,g,b){var n=p.getObject("dojox.charting.plot2d.common",!0);return p.mixin(n,{doIfLoaded:b.doIfLoaded,makeStroke:function(b){if(!b)return b;
if("string"==typeof b||b instanceof r)b={color:b};return s.makeParameters(s.defaultStroke,b)},augmentColor:function(b,d){var c=new r(b),k=new r(d);k.a=c.a;return k},augmentStroke:function(b,d){var c=n.makeStroke(b);c&&(c.color=n.augmentColor(c.color,d));return c},augmentFill:function(b,d){new r(d);return"string"==typeof b||b instanceof r?n.augmentColor(b,d):b},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(b){for(var d=
p.delegate(n.defaultStats),c=0;c<b.length;++c)for(var k=b[c],f=0;f<k.data.length;f++)if(null!==k.data[f]){if("number"==typeof k.data[f]){var f=d.vmin,g=d.vmax;"ymin"in k&&"ymax"in k||t.forEach(k.data,function(a,b){if(null!==a){var c=b+1,e=a;isNaN(e)&&(e=0);d.hmin=Math.min(d.hmin,c);d.hmax=Math.max(d.hmax,c);d.vmin=Math.min(d.vmin,e);d.vmax=Math.max(d.vmax,e)}})}else{var a=d.hmin,e=d.hmax,f=d.vmin,g=d.vmax;"xmin"in k&&"xmax"in k&&"ymin"in k&&"ymax"in k||t.forEach(k.data,function(a,b){if(null!==a){var c=
"x"in a?a.x:b+1,e=a.y;isNaN(c)&&(c=0);isNaN(e)&&(e=0);d.hmin=Math.min(d.hmin,c);d.hmax=Math.max(d.hmax,c);d.vmin=Math.min(d.vmin,e);d.vmax=Math.max(d.vmax,e)}});"xmin"in k&&(d.hmin=Math.min(a,k.xmin));"xmax"in k&&(d.hmax=Math.max(e,k.xmax))}"ymin"in k&&(d.vmin=Math.min(f,k.ymin));"ymax"in k&&(d.vmax=Math.max(g,k.ymax));break}return d},calculateBarSize:function(b,d,c){c||(c=1);var k=d.gap,k=(b-2*k)/c;"minBarSize"in d&&(k=Math.max(k,d.minBarSize));"maxBarSize"in d&&(k=Math.min(k,d.maxBarSize));k=Math.max(k,
1);return{size:k,gap:(b-k*c)/2}},collectStackedStats:function(b){var d=p.clone(n.defaultStats);if(b.length){d.hmin=Math.min(d.hmin,1);d.hmax=g.foldl(b,"seed, run -> Math.max(seed, run.data.length)",d.hmax);for(var c=0;c<d.hmax;++c){var k=b[0].data[c],k=k&&("number"==typeof k?k:k.y);isNaN(k)&&(k=0);d.vmin=Math.min(d.vmin,k);for(var f=1;f<b.length;++f){var q=b[f].data[c],q=q&&("number"==typeof q?q:q.y);isNaN(q)&&(q=0);k+=q}d.vmax=Math.max(d.vmax,k)}}return d},curve:function(b,d){var c=b.slice(0);"x"==
d&&(c[c.length]=c[0]);return t.map(c,function(b,f){if(0==f)return"M"+b.x+","+b.y;if(!isNaN(d)){var l=b.x-c[f-1].x;return"C"+(b.x-l/d*(d-1))+","+c[f-1].y+" "+(b.x-l/d)+","+b.y+" "+b.x+","+b.y}if("X"==d||"x"==d||"S"==d){var a,e=c[f-1],l=c[f],m,g,n,p=1/6;1==f?(a="x"==d?c[c.length-2]:e,p=1/3):a=c[f-2];f==c.length-1?(m="x"==d?c[1]:l,p=1/3):m=c[f+1];g=Math.sqrt((l.x-e.x)*(l.x-e.x)+(l.y-e.y)*(l.y-e.y));n=Math.sqrt((l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y));var r=Math.sqrt((m.x-e.x)*(m.x-e.x)+(m.y-e.y)*(m.y-
e.y)),s=n*p,p=r*p;s>g/2&&p>g/2?(s=g/2,p=g/2):s>g/2?(s=g/2,p=g/2*r/n):p>g/2&&(p=g/2,s=g/2*n/r);"S"==d&&(a==e&&(s=0),l==m&&(p=0));g=e.x+s*(l.x-a.x)/n;a=e.y+s*(l.y-a.y)/n;n=l.x-p*(m.x-e.x)/r;e=l.y-p*(m.y-e.y)/r}return"C"+(g+","+a+" "+n+","+e+" "+l.x+","+l.y)}).join(" ")},getLabel:function(l,d,c){return b.doIfLoaded("dojo/number",function(b){return(d?b.format(l,{places:c}):b.format(l))||""},function(){return d?l.toFixed(c):l.toString()})}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],
function(p){var t=p.getObject("dojox.charting.scaler.primitive",!0);return p.mixin(t,{buildScaler:function(p,s,g,b){p==s&&(p-=0.5,s+=0.5);return{bounds:{lower:p,upper:s,from:p,to:s,scale:g/(s-p),span:g},scaler:t}},buildTicks:function(p,s){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(p){var s=p.bounds.from,g=p.bounds.scale;return function(b){return(b-s)*g}},getTransformerFromPlot:function(p){var s=p.bounds.from,g=p.bounds.scale;return function(b){return b/g+s}}})})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(p,t,r,s){return r("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(g){},raiseEvent:function(g){this.plotEvent(g);var b=p.delegate(g);b.originalEvent=g.type;b.originalPlot=g.plot;b.type="onindirect";t.forEach(this.chart.stack,function(g){g!==this&&g.plotEvent&&(b.plot=g,g.plotEvent(b))},
this)},connect:function(g,b){this.dirty=!0;return s.connect(this,"plotEvent",g,b)},events:function(){return!!this.plotEvent.after},resetEvents:function(){this._shapeEvents.length&&(t.forEach(this._shapeEvents,function(g){g.shape.disconnect(g.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(g,b){this._shapeEvents.push({shape:g.eventMask,handle:g.eventMask.connect(b,this,function(n){g.type=b;g.event=n;this.raiseEvent(g);g.event=null})})},
_connectEvents:function(g){g&&(g.chart=this.chart,g.plot=this,g.hAxis=this.hAxis||null,g.vAxis=this.vAxis||null,g.eventMask=g.eventMask||g.shape,this._connectSingleEvent(g,"onmouseover"),this._connectSingleEvent(g,"onmouseout"),this._connectSingleEvent(g,"onclick"))},_reconnectEvents:function(g){(g=this._eventSeries[g])&&t.forEach(g,this._connectEvents,this)},fireEvent:function(g,b,n,l){(g=this._eventSeries[g])&&g.length&&n<g.length&&(n=g[n],n.type=b,n.event=l||null,this.raiseEvent(n),n.event=null)}})})},
"dojox/charting/plot2d/Pie":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./Base ./_PlotEvents ./common dojox/gfx dojox/gfx/matrix dojox/lang/functional dojox/lang/utils dojo/has".split(" "),function(p,t,r,s,g,b,n,l,d,c,k){return r("dojox.charting.plot2d.Pie",[s,g],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,omitLabels:!1,stroke:{},outline:{},shadow:{},
fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelWiring:{}},constructor:function(b,d){this.opt=p.clone(this.defaultParams);c.updateWithObject(this.opt,d);c.updateWithPattern(this.opt,d,this.optionalParams);this.axes=[];this.run=null;this.dyn=[]},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this},setAxis:function(b){return this},addSeries:function(b){this.run=b;return this},getSeriesStats:function(){return p.delegate(b.defaultStats)},getRequiredColors:function(){return this.run?
this.run.data.length:0},render:function(b,c){if(!this.dirty)return this;this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var a=this.group,e=this.chart.theme;if(!this.run||!this.run.data.length)return this;var m=(b.width-c.l-c.r)/2,g=(b.height-c.t-c.b)/2,r=Math.min(m,g),s="font"in this.opt?this.opt.font:e.series.font,A,y=l._degToRad(this.opt.startAngle),C=y,F,D,H,N,J=this.run.data,M=this.events();this.dyn=[];"radius"in this.opt&&(r=this.opt.radius,N=r-this.opt.labelOffset);var E=
{cx:c.l+m,cy:c.t+g,r:r};if(this.opt.shadow||e.shadow){F=this.opt.shadow||e.shadow;var K=p.clone(E);K.cx+=F.dx;K.cy+=F.dy;a.createCircle(K).setFill(F.color).setStroke(F)}a.setFilter&&(this.opt.filter||e.filter)&&a.createCircle(E).setFill(e.series.stroke).setFilter(this.opt.filter||e.filter);if("number"==typeof J[0]){F=d.map(J,"x ? Math.max(x, 0) : 0");if(d.every(F,"<= 0"))return a.createCircle(E).setStroke(e.series.stroke),this.dyn=t.map(F,function(){return{}}),this;D=d.map(F,"/this",d.foldl(F,"+",
0));this.opt.labels&&(H=t.map(D,function(a){return 0<a?this._getLabel(100*a)+"%":""},this))}else{F=d.map(J,"x ? Math.max(x.y, 0) : 0");if(d.every(F,"<= 0"))return a.createCircle(E).setStroke(e.series.stroke),this.dyn=t.map(F,function(){return{}}),this;D=d.map(F,"/this",d.foldl(F,"+",0));this.opt.labels&&(H=t.map(D,function(a,b){if(0>a)return"";var c=J[b];return"text"in c?c.text:this._getLabel(100*a)+"%"},this))}var G=d.map(J,function(a,b){var c=[this.opt,this.run];null!==a&&"number"!=typeof a&&c.push(a);
this.opt.styleFunc&&c.push(this.opt.styleFunc(a));return e.next("slice",c,!0)},this);this.opt.labels&&(A=s?n.normalizedLength(n.splitFontString(s).size):0,F=d.foldl1(d.map(H,function(a,b){return n._base._getTextBox(a,{font:G[b].series.font}).w},this),"Math.max(a, b)")/2,0>this.opt.labelOffset&&(r=Math.min(m-2*F,g-A)+this.opt.labelOffset),N=r-this.opt.labelOffset);var u=Array(D.length);t.some(D,function(e,d){if(0>e)return!1;if(0==e)return this.dyn.push({fill:null,stroke:null}),!1;var m=J[d],k=G[d],
g;if(1<=e){g=this._plotFill(k.series.fill,b,c);g=this._shapeFill(g,{x:E.cx-E.r,y:E.cy-E.r,width:2*E.r,height:2*E.r});g=this._pseudoRadialFill(g,{x:E.cx,y:E.cy},E.r);var n=a.createCircle(E).setFill(g).setStroke(k.series.stroke);this.dyn.push({fill:g,stroke:k.series.stroke});M&&(m={element:"slice",index:d,run:this.run,shape:n,x:d,y:"number"==typeof m?m:m.y,cx:E.cx,cy:E.cy,cr:r},this._connectEvents(m),u[d]=m);return!1}var p=C+2*e*Math.PI;d+1==D.length&&(p=y+2*Math.PI);var n=p-C,v=E.cx+r*Math.cos(C),
s=E.cy+r*Math.sin(C),t=E.cx+r*Math.cos(p),z=E.cy+r*Math.sin(p);g=l._degToRad(this.opt.fanSize);if(k.series.fill&&"radial"===k.series.fill.type&&"fan"===this.opt.radGrad&&n>g){var A=a.createGroup(),F=Math.ceil(n/g),H=n/F;g=this._shapeFill(k.series.fill,{x:E.cx-E.r,y:E.cy-E.r,width:2*E.r,height:2*E.r});for(var N=0;N<F;++N){var S=0==N?v:E.cx+r*Math.cos(C+(N-0.2)*H),K=0==N?s:E.cy+r*Math.sin(C+(N-0.2)*H),Q=N==F-1?t:E.cx+r*Math.cos(C+(N+1+0.2)*H),P=N==F-1?z:E.cy+r*Math.sin(C+(N+1+0.2)*H);A.createPath().moveTo(E.cx,
E.cy).lineTo(S,K).arcTo(r,r,0,H>Math.PI,!0,Q,P).lineTo(E.cx,E.cy).closePath().setFill(this._pseudoRadialFill(g,{x:E.cx,y:E.cy},r,C+(N+0.5)*H,C+(N+0.5)*H))}A.createPath().moveTo(E.cx,E.cy).lineTo(v,s).arcTo(r,r,0,n>Math.PI,!0,t,z).lineTo(E.cx,E.cy).closePath().setStroke(k.series.stroke);n=A}else n=a.createPath().moveTo(E.cx,E.cy).lineTo(v,s).arcTo(r,r,0,n>Math.PI,!0,t,z).lineTo(E.cx,E.cy).closePath().setStroke(k.series.stroke),(g=k.series.fill)&&"radial"===g.type?(g=this._shapeFill(g,{x:E.cx-E.r,y:E.cy-
E.r,width:2*E.r,height:2*E.r}),"linear"===this.opt.radGrad&&(g=this._pseudoRadialFill(g,{x:E.cx,y:E.cy},r,C,p))):g&&"linear"===g.type&&(g=this._plotFill(g,b,c),g=this._shapeFill(g,n.getBoundingBox())),n.setFill(g);this.dyn.push({fill:g,stroke:k.series.stroke});M&&(m={element:"slice",index:d,run:this.run,shape:n,x:d,y:"number"==typeof m?m:m.y,cx:E.cx,cy:E.cy,cr:r},this._connectEvents(m),u[d]=m);C=p;return!1},this);if(this.opt.labels){var S=k("dojo-bidi")&&this.chart.isRightToLeft();if("default"==this.opt.labelStyle)C=
y,t.some(D,function(c,e){if(0>=c)return!1;var d=G[e];if(1<=c)return this.renderLabel(a,E.cx,E.cy+A/2,H[e],d,0<this.opt.labelOffset),!0;var m=C+2*c*Math.PI;e+1==D.length&&(m=y+2*Math.PI);if(this.opt.omitLabels&&0.001>m-C)return!1;var k=(C+m)/2,g=E.cx+N*Math.cos(k),k=E.cy+N*Math.sin(k)+A/2;this.renderLabel(a,S?b.width-g:g,k,H[e],d,0<this.opt.labelOffset);C=m;return!1},this);else if("columns"==this.opt.labelStyle){var C=y,Q=this.opt.omitLabels,W=[];t.forEach(D,function(a,b){var c=C+2*a*Math.PI;b+1==
D.length&&(c=y+2*Math.PI);var e=(C+c)/2;W.push({angle:e,left:0>Math.cos(e),theme:G[b],index:b,omit:Q?0.001>c-C:!1});C=c});m=n._base._getTextBox("a",{font:s}).h;this._getProperLabelRadius(W,m,1.1*E.r);t.forEach(W,function(c,e){if(!c.omit){var d=E.cx-2*E.r,m=E.cx+2*E.r,k=n._base._getTextBox(H[e],{font:c.theme.series.font}).w,g=E.cx+c.labelR*Math.cos(c.angle),l=E.cy+c.labelR*Math.sin(c.angle),m=c.left?d+k:m-k,d=c.left?d:m,q=a.createPath().moveTo(E.cx+E.r*Math.cos(c.angle),E.cy+E.r*Math.sin(c.angle));
Math.abs(c.labelR*Math.cos(c.angle))<2*E.r-k&&q.lineTo(g,l);q.lineTo(m,l).setStroke(c.theme.series.labelWiring);this.renderLabel(a,S?b.width-k-d:d,l,H[e],c.theme,!1,"left")}},this)}}var P=0;this._eventSeries[this.run.name]=d.map(J,function(a){return 0>=a?null:u[P++]});k("dojo-bidi")&&this._checkOrientation(this.group,b,c);return this},_getProperLabelRadius:function(b,c,a){var e,d,k=1,g=1;if(1==b.length)b[0].labelR=a;else{for(var l=0;l<b.length;l++){var n=Math.abs(Math.sin(b[l].angle));b[l].left?k>=
n&&(k=n,e=b[l]):g>=n&&(g=n,d=b[l])}e.labelR=d.labelR=a;this._calculateLabelR(e,b,c);this._calculateLabelR(d,b,c)}},_calculateLabelR:function(b,c,a){for(var e=b.index,d=c.length,k=b.labelR;!(c[e%d].left^c[(e+1)%d].left);)c[(e+1)%d].omit||(k=(Math.sin(c[e%d].angle)*k+(c[e%d].left?-a:a))/Math.sin(c[(e+1)%d].angle),k=k<b.labelR?b.labelR:k,c[(e+1)%d].labelR=k),e++;e=b.index;for(d=0==e?d-1:e-1;!(c[e].left^c[d].left);)c[d].omit||(k=(Math.sin(c[e].angle)*k+(c[e].left?a:-a))/Math.sin(c[d].angle),k=k<b.labelR?
b.labelR:k,c[d].labelR=k),e--,d--,e=0>e?e+c.length:e,d=0>d?d+c.length:d}})})},"dojox/charting/plot2d/ClusteredColumns":function(){define(["dojo/_base/declare","./Columns","./common"],function(p,t,r){return p("dojox.charting.plot2d.ClusteredColumns",t,{getBarProperties:function(){var p=r.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);return{gap:p.gap,width:p.size,thickness:p.size}}})})},"dojox/charting/plot2d/Columns":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k){var f=d.lambda("item.purgeGroup()");return r("dojox.charting.plot2d.Columns",[g,b],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(b,a){this.opt=p.clone(p.mixin(this.opt,this.defaultParams));c.updateWithObject(this.opt,a);c.updateWithPattern(this.opt,a,this.optionalParams);this.animate=this.opt.animate},getSeriesStats:function(){var b=
n.collectSimpleStats(this.series);b.hmin-=0.5;b.hmax+=0.5;return b},createRect:function(b,a,c){var d;this.opt.enableCache&&0<b._rectFreePool.length?(d=b._rectFreePool.pop(),d.setShape(c),a.add(d)):d=a.createRect(c);this.opt.enableCache&&b._rectUsePool.push(d);return d},render:function(b,a){if(this.zoom&&!this.isDataDirty())return this.performZoom(b,a);this.resetEvents();this.dirty=this.isDirty();var c;this.dirty&&(t.forEach(this.series,f),this._eventSeries={},this.cleanGroup(),c=this.getGroup(),l.forEachRev(this.series,
function(a){a.cleanGroup(c)}));for(var d=this.chart.theme,k=this._hScaler.scaler.getTransformerFromModel(this._hScaler),g=this._vScaler.scaler.getTransformerFromModel(this._vScaler),n=Math.max(0,this._vScaler.bounds.lower),r=g(n),y=this.events(),C=this.getBarProperties(),F=this.series.length-1;0<=F;--F){var D=this.series[F];if(this.dirty||D.dirty){D.cleanGroup();this.opt.enableCache&&(D._rectFreePool=(D._rectFreePool?D._rectFreePool:[]).concat(D._rectUsePool?D._rectUsePool:[]),D._rectUsePool=[]);
var H=d.next("column",[this.opt,D]),N=Array(D.data.length);c=D.group;for(var J=t.some(D.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),M=J?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,E=J?Math.min(D.data.length,Math.ceil(this._hScaler.bounds.to)):D.data.length;M<E;++M){var K=D.data[M];if(null!=K){var G=this.getValue(K,M,F,J),u=g(G.y),S=Math.abs(u-r),Q,W;this.opt.styleFunc||"number"!=typeof K?(Q="number"!=typeof K?[K]:[],this.opt.styleFunc&&Q.push(this.opt.styleFunc(K)),
Q=d.addMixin(H,"column",Q,!0)):Q=d.post(H,"column");if(1<=C.width&&0<=S){var P={x:a.l+k(G.x+0.5)+C.gap+C.thickness*F,y:b.height-a.b-(G.y>n?u:r),width:C.width,height:S};Q.series.shadow&&(W=p.clone(P),W.x+=Q.series.shadow.dx,W.y+=Q.series.shadow.dy,W=this.createRect(D,c,W).setFill(Q.series.shadow.color).setStroke(Q.series.shadow),this.animate&&this._animateColumn(W,b.height-a.b+r,S));var aa=this._plotFill(Q.series.fill,b,a),aa=this._shapeFill(aa,P),aa=this.createRect(D,c,P).setFill(aa).setStroke(Q.series.stroke);
aa.setFilter&&Q.series.filter&&aa.setFilter(Q.series.filter);D.dyn.fill=aa.getFill();D.dyn.stroke=aa.getStroke();if(y){var ca={element:"column",index:M,run:D,shape:aa,shadow:W,cx:G.x+0.5,cy:G.y,x:J?M:D.data[M].x,y:J?D.data[M]:D.data[M].y};this._connectEvents(ca);N[M]=ca}!isNaN(G.py)&&G.py>n&&(P.height=u-g(G.py));this.createLabel(c,K,P,Q);this.animate&&this._animateColumn(aa,b.height-a.b-r,S)}}}this._eventSeries[D.name]=N;D.dirty=!1}else d.skip(),this._reconnectEvents(D.name)}this.dirty=!1;s("dojo-bidi")&&
this._checkOrientation(this.group,b,a);return this},getValue:function(b,a,c,d){d?(c="number"==typeof b?b:b.y,b=a):(c=b.y,b=b.x-1);return{x:b,y:c}},getBarProperties:function(){var b=n.calculateBarSize(this._hScaler.bounds.scale,this.opt);return{gap:b.gap,width:b.size,thickness:0}},_animateColumn:function(b,a,c){0==c&&(c=1);k.animateTransform(p.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,a-a/c],end:[0,0]},{name:"scale",start:[1,1/c],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},
"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(p,t,r,s,g,b){var n=t("dojox.charting.Theme",s,{});p.mixin(n,{defineColors:function(l){l=l||{};var d,c=[],k=l.num||5;if(l.colors){d=l.colors.length;for(var f=0;f<k;f++)c.push(l.colors[f%d]);return c}return l.hue?(c=l.saturation||100,d=((l.high||90)+(l.low||30))/2,b.generate(g.fromHsv(l.hue,c,d),"monochromatic").colors):
l.generator?g.Palette.generate(l.base,l.generator).colors:c},generateGradient:function(b,d,c){b=p.delegate(b);b.colors=[{offset:0,color:d},{offset:1,color:c}];return b},generateHslColor:function(b,d){b=new r(b);var c=b.toHsl(),c=g.fromHsl(c.h,c.s,d);c.a=b.a;return c},generateHslGradient:function(b,d,c,k){b=new r(b);var f=b.toHsl();c=g.fromHsl(f.h,f.s,c);k=g.fromHsl(f.h,f.s,k);c.a=k.a=b.a;return n.generateGradient(d,c,k)}});n.defaultMarkers=s.defaultMarkers;n.defaultColors=s.defaultColors;n.defaultTheme=
s.defaultTheme;return n})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(p,t,r,s){p=t.getObject("color",!0,p);p.Color=r;p.blend=r.blendColors;p.fromRgb=r.fromRgb;p.fromHex=r.fromHex;p.fromArray=r.fromArray;p.fromString=r.fromString;p.greyscale=s.makeGrey;t.mixin(p,{fromCmy:function(g,b,n){t.isArray(g)?(b=g[1],n=g[2],g=g[0]):t.isObject(g)&&(b=g.m,n=g.y,g=g.c);b=1-b/100;n=1-n/100;return new r({r:Math.round(255*(1-g/100)),g:Math.round(255*
b),b:Math.round(255*n)})},fromCmyk:function(g,b,n,l){t.isArray(g)?(b=g[1],n=g[2],l=g[3],g=g[0]):t.isObject(g)&&(b=g.m,n=g.y,l=g.b,g=g.c);b/=100;n/=100;l/=100;g=1-Math.min(1,g/100*(1-l)+l);b=1-Math.min(1,b*(1-l)+l);n=1-Math.min(1,n*(1-l)+l);return new r({r:Math.round(255*g),g:Math.round(255*b),b:Math.round(255*n)})},fromHsl:function(g,b,n){t.isArray(g)?(b=g[1],n=g[2],g=g[0]):t.isObject(g)&&(b=g.s,n=g.l,g=g.h);b/=100;for(n/=100;0>g;)g+=360;for(;360<=g;)g-=360;var l,d;120>g?(l=(120-g)/60,d=g/60,g=0):
240>g?(l=0,d=(240-g)/60,g=(g-120)/60):(l=(g-240)/60,d=0,g=(360-g)/60);l=2*b*Math.min(l,1)+(1-b);d=2*b*Math.min(d,1)+(1-b);g=2*b*Math.min(g,1)+(1-b);0.5>n?(l*=n,d*=n,g*=n):(l=(1-n)*l+2*n-1,d=(1-n)*d+2*n-1,g=(1-n)*g+2*n-1);return new r({r:Math.round(255*l),g:Math.round(255*d),b:Math.round(255*g)})}});p.fromHsv=function(g,b,n){t.isArray(g)?(b=g[1],n=g[2],g=g[0]):t.isObject(g)&&(b=g.s,n=g.v,g=g.h);360==g&&(g=0);b/=100;n/=100;var l,d,c;if(0==b)d=c=l=n;else{var k=g/60;g=Math.floor(k);var f=k-g,k=n*(1-b),
q=n*(1-b*f);b=n*(1-b*(1-f));switch(g){case 0:l=n;d=b;c=k;break;case 1:l=q;d=n;c=k;break;case 2:l=k;d=n;c=b;break;case 3:l=k;d=q;c=n;break;case 4:l=b;d=k;c=n;break;case 5:l=n,d=k,c=q}}return new r({r:Math.round(255*l),g:Math.round(255*d),b:Math.round(255*c)})};t.extend(r,{toCmy:function(){var g=1-this.g/255,b=1-this.b/255;return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*g),y:Math.round(100*b)}},toCmyk:function(){var g,b,n,l=this.r/255;g=this.g/255;b=this.b/255;n=Math.min(1-l,1-g,1-b);g=(1-
g-n)/(1-n);b=(1-b-n)/(1-n);return{c:Math.round((1-l-n)/(1-n)*100),m:Math.round(100*g),y:Math.round(100*b),b:Math.round(100*n)}},toHsl:function(){var g=this.r/255,b=this.g/255,n=this.b/255,l=Math.min(g,n,b),d=Math.max(g,b,n),c=d-l,k=0,f=0,l=(l+d)/2;0<l&&1>l&&(f=c/(0.5>l?2*l:2-2*l));0<c&&(d==g&&d!=b&&(k+=(b-n)/c),d==b&&d!=n&&(k+=2+(n-g)/c),d==n&&d!=g&&(k+=4+(g-b)/c),k*=60);return{h:k,s:Math.round(100*f),l:Math.round(100*l)}},toHsv:function(){var g=this.r/255,b=this.g/255,n=this.b/255,l=Math.min(g,n,
b),d=Math.max(g,b,n),l=d-l,c=null,k=0==d?0:l/d;0==k?c=0:(c=g==d?60*(b-n)/l:b==d?120+60*(n-g)/l:240+60*(g-b)/l,0>c&&(c+=360));return{h:c,s:Math.round(100*k),v:Math.round(100*d)}}});return p})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(p,t,r,s){var g={};t.setObject("dojo.colors",g);var b=function(b,d,c){0>c&&++c;1<c&&--c;var k=6*c;return 1>k?b+(d-b)*k:1>2*c?d:2>3*c?b+(d-b)*(2/3-c)*6:b};p.colorFromRgb=r.fromRgb=function(g,d){var c=g.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);
if(c){var k=c[2].split(/\s*,\s*/),f=k.length,c=c[1];if("rgb"==c&&3==f||"rgba"==c&&4==f)return c=k[0],"%"==c.charAt(c.length-1)?(c=s.map(k,function(a){return 2.56*parseFloat(a)}),4==f&&(c[3]=k[3]),r.fromArray(c,d)):r.fromArray(k,d);if("hsl"==c&&3==f||"hsla"==c&&4==f){var c=(parseFloat(k[0])%360+360)%360/360,n=parseFloat(k[1])/100,a=parseFloat(k[2])/100,n=0.5>=a?a*(n+1):a+n-a*n,a=2*a-n,c=[256*b(a,n,c+1/3),256*b(a,n,c),256*b(a,n,c-1/3),1];4==f&&(c[3]=k[3]);return r.fromArray(c,d)}}return null};var n=
function(b,d,c){b=Number(b);return isNaN(b)?c:b<d?d:b>c?c:b};r.prototype.sanitize=function(){this.r=Math.round(n(this.r,0,255));this.g=Math.round(n(this.g,0,255));this.b=Math.round(n(this.b,0,255));this.a=n(this.a,0,1);return this};g.makeGrey=r.makeGrey=function(b,d){return r.fromArray([b,b,b,d])};t.mixin(r.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,
226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,
150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,
136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],
navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,
87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return r})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(p,t,r){function s(b,
c,k){var f=new r.Palette;f.colors=[];t.forEach(b.colors,function(b){var a="dg"==c?b.g+k:b.g,e="db"==c?b.b+k:b.b,d="da"==c?b.a+k:b.a;f.colors.push(new r.Color({r:Math.min(255,Math.max(0,"dr"==c?b.r+k:b.r)),g:Math.min(255,Math.max(0,a)),b:Math.min(255,Math.max(0,e)),a:Math.min(1,Math.max(0,d))}))});return f}function g(b,c,k){var f=new r.Palette;f.colors=[];t.forEach(b.colors,function(b){b=b.toCmy();var a="dm"==c?b.m+k:b.m,e="dy"==c?b.y+k:b.y;f.colors.push(r.fromCmy(Math.min(100,Math.max(0,"dc"==c?b.c+
k:b.c)),Math.min(100,Math.max(0,a)),Math.min(100,Math.max(0,e))))});return f}function b(b,c,k){var f=new r.Palette;f.colors=[];t.forEach(b.colors,function(b){b=b.toCmyk();var a="dm"==c?b.m+k:b.m,e="dy"==c?b.y+k:b.y,d="dk"==c?b.b+k:b.b;f.colors.push(r.fromCmyk(Math.min(100,Math.max(0,"dc"==c?b.c+k:b.c)),Math.min(100,Math.max(0,a)),Math.min(100,Math.max(0,e)),Math.min(100,Math.max(0,d))))});return f}function n(b,c,k){var f=new r.Palette;f.colors=[];t.forEach(b.colors,function(b){b=b.toHsl();var a="dl"==
c?b.l+k:b.l;f.colors.push(r.fromHsl(("dh"==c?b.h+k:b.h)%360,Math.min(100,Math.max(0,"ds"==c?b.s+k:b.s)),Math.min(100,Math.max(0,a))))});return f}function l(b,c,k){var f=new r.Palette;f.colors=[];t.forEach(b.colors,function(b){b=b.toHsv();var a="dv"==c?b.v+k:b.v;f.colors.push(r.fromHsv(("dh"==c?b.h+k:b.h)%360,Math.min(100,Math.max(0,"ds"==c?b.s+k:b.s)),Math.min(100,Math.max(0,a))))});return f}r.Palette=function(b){this.colors=[];b instanceof r.Palette?this.colors=b.colors.slice(0):b instanceof r.Color?
this.colors=[null,null,b,null,null]:p.isArray(b)?this.colors=t.map(b.slice(0),function(b){return p.isString(b)?new r.Color(b):b}):p.isString(b)&&(this.colors=[null,null,new r.Color(b),null,null])};p.extend(r.Palette,{transform:function(d){var c=s;if(d.use){var k=d.use.toLowerCase();0==k.indexOf("hs")?c="l"==k.charAt(2)?n:l:0==k.indexOf("cmy")&&(c="k"==k.charAt(3)?b:g)}else if("dc"in d||"dm"in d||"dy"in d)c="dk"in d?b:g;else if("dh"in d||"ds"in d)c="dv"in d?l:n;var k=this,f;for(f in d)"use"!=f&&(k=
c(k,f,d[f]));return k},clone:function(){return new r.Palette(this)}});p.mixin(r.Palette,{generators:{analogous:function(b){var c=b.high||60,k=b.low||18;b=(p.isString(b.base)?new r.Color(b.base):b.base).toHsv();var c=[(b.h+k+360)%360,(b.h+Math.round(k/2)+360)%360,b.h,(b.h-Math.round(c/2)+360)%360,(b.h-c+360)%360],k=Math.max(10,95>=b.s?b.s+5:100-(b.s-95)),f=1<b.s?b.s-1:21-b.s,g=92<=b.v?b.v-9:Math.max(b.v+9,20),a=90>=b.v?Math.max(b.v+5,20):95+Math.ceil((b.v-90)/2),e=[k,f,b.s,k,k],m=[g,a,b.v,g,a];return new r.Palette(t.map(c,
function(a,b){return r.fromHsv(a,e[b],m[b])}))},monochromatic:function(b){b=p.isString(b.base)?new r.Color(b.base):b.base;var c=b.toHsv(),k=9<c.s-30?c.s-30:c.s+30,f=c.s,g=20<c.v-20?c.v-20:c.v+60,a=20<c.v-50?c.v-50:c.v+30;return new r.Palette([r.fromHsv(c.h,k,100-0.8*(100-c.v)),r.fromHsv(c.h,f,a),b,r.fromHsv(c.h,k,a),r.fromHsv(c.h,f,g)])},triadic:function(b){b=p.isString(b.base)?new r.Color(b.base):b.base;var c=b.toHsv(),k=(c.h-157+360)%360,f=90<c.s?c.s-10:c.s+10,g=95<c.s?c.s-5:c.s+5,a=20<c.v-20?c.v-
20:c.v+20,e=20<c.v-30?c.v-30:c.v+30,m=70<c.v-30?c.v-30:c.v+30;return new r.Palette([r.fromHsv((c.h+57+360)%360,20<c.s?c.s-10:c.s+10,c.v),r.fromHsv(c.h,f,e),b,r.fromHsv(k,f,a),r.fromHsv(k,g,m)])},complementary:function(b){b=p.isString(b.base)?new r.Color(b.base):b.base;var c=b.toHsv(),k=360>2*c.h+137?2*c.h+137:Math.floor(c.h/2)-137,f=Math.max(c.s-10,0),g=100-0.9*(100-c.s),a=Math.min(100,c.s+20),e=Math.min(100,c.v+30),m=20<c.v?c.v-30:c.v+30;return new r.Palette([r.fromHsv(c.h,f,e),r.fromHsv(c.h,g,m),
b,r.fromHsv(k,a,m),r.fromHsv(k,c.s,c.v)])},splitComplementary:function(b){var c=p.isString(b.base)?new r.Color(b.base):b.base,k=b.da||30;b=c.toHsv();var f=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,g=(f-k+360)%360,k=(f+k)%360,f=Math.max(b.s-10,0),a=100-0.9*(100-b.s),e=Math.min(100,b.s+20),m=Math.min(100,b.v+30),l=20<b.v?b.v-30:b.v+30;return new r.Palette([r.fromHsv(g,f,m),r.fromHsv(g,a,l),c,r.fromHsv(k,e,l),r.fromHsv(k,b.s,b.v)])},compound:function(b){b=p.isString(b.base)?new r.Color(b.base):b.base;
var c=b.toHsv(),k=360>2*c.h+18?2*c.h+18:Math.floor(c.h/2)-18,f=360>2*c.h+120?2*c.h+120:Math.floor(c.h/2)-120,g=360>2*c.h+99?2*c.h+99:Math.floor(c.h/2)-99,a=10<c.s-40?c.s-40:c.s+40,e=80<c.s-10?c.s-10:c.s+10,m=10<c.s-25?c.s-25:c.s+25,l=10<c.v-40?c.v-40:c.v+40,n=80<c.v-20?c.v-20:c.v+20,c=Math.max(c.v,20);return new r.Palette([r.fromHsv(k,a,l),r.fromHsv(k,e,n),b,r.fromHsv(f,m,c),r.fromHsv(g,e,n)])},shades:function(b){b=p.isString(b.base)?new r.Color(b.base):b.base;var c=b.toHsv(),k=100==c.s&&0==c.v?0:
c.s,f=20<c.v-50?c.v-50:c.v+30,g=20<=c.v-25?c.v-25:c.v+55,a=20<=c.v-75?c.v-75:c.v+5,e=Math.max(c.v-10,20);return new r.Palette([new r.fromHsv(c.h,k,f),new r.fromHsv(c.h,k,g),b,new r.fromHsv(c.h,k,a),new r.fromHsv(c.h,k,e)])}},generate:function(b,c){if(p.isFunction(c))return c({base:b});if(r.Palette.generators[c])return r.Palette.generators[c]({base:b});throw Error("dojox.color.Palette.generate: the specified generator ('"+c+"') does not exist.");}});return r.Palette})},"dojox/charting/themes/common":function(){define(["dojo/_base/lang"],
function(p){return p.getObject("dojox.charting.themes",!0)})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(p){return p._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(p,t,r,s){var g=t("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=
0},add:function(b){if(this._hash[b.id])throw Error("Tried to register widget with id=="+b.id+" but that id is already registered");this._hash[b.id]=b;this.length++},remove:function(b){this._hash[b]&&(delete this._hash[b],this.length--)},forEach:function(b,g){g=g||r.global;var l=0,d;for(d in this._hash)b.call(g,this._hash[d],l++,this._hash);return this},filter:function(b,n){n=n||r.global;var l=new g,d=0,c;for(c in this._hash){var k=this._hash[c];b.call(n,k,d++,this._hash)&&l.add(k)}return l},byId:function(b){return this._hash[b]},
byClass:function(b){var n=new g,l,d;for(l in this._hash)d=this._hash[l],d.declaredClass==b&&n.add(d);return n},toArray:function(){var b=[],g;for(g in this._hash)b.push(this._hash[g]);return b},map:function(b,g){return p.map(this.toArray(),b,g)},every:function(b,g){g=g||r.global;var l=0,d;for(d in this._hash)if(!b.call(g,this._hash[d],l++,this._hash))return!1;return!0},some:function(b,g){g=g||r.global;var l=0,d;for(d in this._hash)if(b.call(g,this._hash[d],l++,this._hash))return!0;return!1}});p.forEach("forEach filter byClass map every some".split(" "),
function(b){s[b]=g.prototype[b]});return g})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(p,t,r,s,g,b,n,l){b.focus=function(d){if(d){var c="node"in d?d.node:d,k=d.bookmark;d=d.openedForWindow;var f=k?k.isCollapsed:!1;if(c){var n="iframe"==c.tagName.toLowerCase()?c.contentWindow:c;if(n&&n.focus)try{n.focus()}catch(a){}b._onFocusNode(c)}if(k&&g.withGlobal(d||g.global,l.isCollapsed)&&
!f){d&&d.focus();try{g.withGlobal(d||g.global,l.moveToBookmark,null,[k])}catch(e){}}}};b.watch("curNode",function(b,c,k){l._curFocus=k;l._prevFocus=c;k&&s.publish("focusNode",k)});b.watch("activeStack",function(b,c,k){l._activeStack=k});b.on("widget-blur",function(b,c){s.publish("widgetBlur",b,c)});b.on("widget-focus",function(b,c){s.publish("widgetFocus",b,c)});r.mixin(l,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return l.getBookmark().isCollapsed},getBookmark:function(){return(g.global==
window?n:new n.SelectionManager(g.global)).getBookmark()},moveToBookmark:function(b){return(g.global==window?n:new n.SelectionManager(g.global)).moveToBookmark(b)},getFocus:function(d,c){var k=!b.curNode||d&&t.isDescendant(b.curNode,d.domNode)?l._prevFocus:b.curNode;return{node:k,bookmark:k&&k==b.curNode&&g.withGlobal(c||g.global,l.getBookmark),openedForWindow:c}},_activeStack:[],registerIframe:function(d){return b.registerIframe(d)},unregisterIframe:function(b){b&&b.remove()},registerWin:function(d,
c){return b.registerWin(d,c)},unregisterWin:function(b){b&&b.remove()}});return l})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),function(p,t,r,s,g,b){var n=function(d){var c=d.document;this.getType=function(){if(c.getSelection){var b="text",f;try{f=d.getSelection()}catch(g){}f&&1==f.rangeCount&&(f=f.getRangeAt(0),f.startContainer==f.endContainer&&1==f.endOffset-f.startOffset&&3!=f.startContainer.nodeType&&(b=
"control"));return b}return c.selection.type.toLowerCase()};this.getSelectedText=function(){if(c.getSelection){var b=d.getSelection();return b?b.toString():""}return"control"==this.getType()?null:c.selection.createRange().text};this.getSelectedHtml=function(){if(c.getSelection){var b=d.getSelection();if(b&&b.rangeCount){var f,g="";for(f=0;f<b.rangeCount;f++){var a=b.getRangeAt(f).cloneContents(),e=c.createElement("div");e.appendChild(a);g+=e.innerHTML}return g}return null}return"control"==this.getType()?
null:c.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(c.getSelection){var b=d.getSelection();return b.anchorNode.childNodes[b.anchorOffset]}if((b=c.selection.createRange())&&b.item)return c.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var b=this.getSelectedElement();if(b)return b.parentNode}else if(c.getSelection){if(b=c.getSelection()){for(b=b.anchorNode;b&&1!=b.nodeType;)b=b.parentNode;
return b}}else return b=c.selection.createRange(),b.collapse(!0),b.parentElement();return null};this.hasAncestorElement=function(b){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(b){var c=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(c,arguments)};this.isTag=function(b,c){if(b&&b.tagName)for(var d=b.tagName.toLowerCase(),a=0;a<c.length;a++){var e=String(c[a]).toLowerCase();if(d==e)return e}return""};this.getParentOfType=
function(b,c){for(;b;){if(this.isTag(b,c).length)return b;b=b.parentNode}return null};this.collapse=function(b){if(c.getSelection){var f=d.getSelection();f.removeAllRanges?b?f.collapseToStart():f.collapseToEnd():f.collapse(b)}else f=c.selection.createRange(),f.collapse(b),f.select()};this.remove=function(){var b=c.selection;c.getSelection?(b=d.getSelection(),b.deleteFromDocument()):"none"!=b.type.toLowerCase()&&b.clear();return b};this.selectElementChildren=function(b,f){var g;b=t.byId(b);if(c.getSelection){var a=
d.getSelection();s("opera")?(g=a.rangeCount?a.getRangeAt(0):c.createRange(),g.setStart(b,0),g.setEnd(b,3==b.nodeType?b.length:b.childNodes.length),a.addRange(g)):a.selectAllChildren(b)}else if(g=b.ownerDocument.body.createTextRange(),g.moveToElementText(b),!f)try{g.select()}catch(e){}};this.selectElement=function(b,d){var l;b=t.byId(b);if(c.getSelection){var a=c.getSelection();l=c.createRange();a.removeAllRanges&&(s("opera")&&a.getRangeAt(0)&&(l=a.getRangeAt(0)),l.selectNode(b),a.removeAllRanges(),
a.addRange(l))}else try{a=b.tagName?b.tagName.toLowerCase():"",l="img"===a||"table"===a?g.body(c).createControlRange():g.body(c).createRange(),l.addElement(b),d||l.select()}catch(e){this.selectElementChildren(b,d)}};this.inSelection=function(b){if(b){var f,g;if(c.getSelection){var a=d.getSelection();a&&0<a.rangeCount&&(g=a.getRangeAt(0));if(g&&g.compareBoundaryPoints&&c.createRange)try{if(f=c.createRange(),f.setStart(b,0),1===g.compareBoundaryPoints(g.START_TO_END,f))return!0}catch(e){}}else{g=c.selection.createRange();
try{f=b.ownerDocument.body.createTextRange(),f.moveToElementText(b)}catch(m){}if(g&&f&&1===g.compareEndPoints("EndToStart",f))return!0}}return!1};this.getBookmark=function(){var k,f,g=c.selection,a=b.curNode;if(c.getSelection){if(g=d.getSelection())if(g.isCollapsed){if(k=a?a.tagName:"")if(k=k.toLowerCase(),"textarea"==k||"input"==k&&(!a.type||"text"==a.type.toLowerCase()))return g={start:a.selectionStart,end:a.selectionEnd,node:a,pRange:!0},{isCollapsed:g.end<=g.start,mark:g};k={isCollapsed:!0};g.rangeCount&&
(k.mark=g.getRangeAt(0).cloneRange())}else f=g.getRangeAt(0),k={isCollapsed:!1,mark:f.cloneRange()}}else if(g){k=a?a.tagName:"";k=k.toLowerCase();if(a&&k&&("button"==k||"textarea"==k||"input"==k)){if(g.type&&"none"==g.type.toLowerCase())return{isCollapsed:!0,mark:null};f=g.createRange();return{isCollapsed:f.text&&f.text.length?!1:!0,mark:{range:f,pRange:!0}}}k={};try{f=g.createRange(),k.isCollapsed=!("Text"==g.type?f.htmlText.length:f.length)}catch(e){return k.isCollapsed=!0,k}if("CONTROL"==g.type.toUpperCase())if(f.length)for(k.mark=
[],g=0,a=f.length;g<a;)k.mark.push(f.item(g++));else k.isCollapsed=!0,k.mark=null;else k.mark=f.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return k};this.moveToBookmark=function(b){if(b=b.mark)if(c.getSelection){var f=d.getSelection();f&&f.removeAllRanges?b.pRange?(f=b.node,f.selectionStart=b.start,f.selectionEnd=b.end):(f.removeAllRanges(),f.addRange(b)):console.warn("No idea how to restore selection for this browser!")}else if(c.selection&&b){var g;
b.pRange?g=b.range:r.isArray(b)?(g=c.body.createControlRange(),p.forEach(b,function(a){g.addElement(a)})):(g=c.body.createTextRange(),g.moveToBookmark(b));g.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},l=new n(window);l.SelectionManager=n;return l})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(p,t,r,s,g){var b={getViewport:function(){return r.getBox()}};b.placeOnScreen=s.at;b.placeOnScreenAroundElement=
function(b,g,d,c){var k;if(t.isArray(d))k=d;else{k=[];for(var f in d)k.push({aroundCorner:f,corner:d[f]})}return s.around(b,g,k,!0,c)};b.placeOnScreenAroundNode=b.placeOnScreenAroundElement;b.placeOnScreenAroundRectangle=b.placeOnScreenAroundElement;b.getPopupAroundAlignment=function(b,g){var d={};p.forEach(b,function(b){var k=g;switch(b){case "after":d[g?"BR":"BL"]=g?"BL":"BR";break;case "before":d[g?"BL":"BR"]=g?"BR":"BL";break;case "below-alt":k=!k;case "below":d[k?"BL":"BR"]=k?"TL":"TR";d[k?"BR":
"BL"]=k?"TR":"TL";break;case "above-alt":k=!k;default:d[k?"TL":"TR"]=k?"BL":"BR",d[k?"TR":"TL"]=k?"BR":"BL"}});return d};t.mixin(g,b);return g})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(p,t,r){var s=r._createWrapper;r._createWrapper=function(b){b.declaredClass||(b={_popupWrapper:b.parentNode&&p.contains(b.parentNode,"dijitPopup")?b.parentNode:null,domNode:b,destroy:function(){},ownerDocument:b.ownerDocument,ownerDocumentBody:t.body(b.ownerDocument)});
return s.call(this,b)};var g=r.open;r.open=function(b){if(b.orient&&"string"!=typeof b.orient&&!("length"in b.orient)){var n=[],l;for(l in b.orient)n.push({aroundCorner:l,corner:b.orient[l]});b.orient=n}return g.call(this,b)};return r})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(p,t){t.scrollIntoView=function(r,s){p.scrollIntoView(r,s)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],
function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(p,t,r){t.mixin(r,{hasWaiRole:function(p,g){var b=this.getWaiRole(p);return g?-1<b.indexOf(g):0<b.length},getWaiRole:function(r){return t.trim((p.get(r,"role")||"").replace("wairole:",""))},setWaiRole:function(r,g){p.set(r,"role",g)},removeWaiRole:function(r,g){var b=p.get(r,"role");b&&(g?(b=t.trim((" "+b+" ").replace(" "+g+" "," ")),p.set(r,"role",b)):r.removeAttribute("role"))},hasWaiState:function(p,
g){return p.hasAttribute?p.hasAttribute("aria-"+g):!!p.getAttribute("aria-"+g)},getWaiState:function(p,g){return p.getAttribute("aria-"+g)||""},setWaiState:function(p,g,b){p.setAttribute("aria-"+g,b)},removeWaiState:function(p,g){p.removeAttribute("aria-"+g)}});return r})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(p,t){t.getDocumentWindow=function(r){return p.get(r)}})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(p,t,r,s){return p("dijit.ToolbarSeparator",[r,s],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);t.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q){p=p("dijit.TooltipDialog",[l,k,c,d],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:f,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(b(this.containerNode,"keydown",g.hitch(this,"_onKey")))},orient:function(a,b,c){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+c];t.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems(this.containerNode);
n.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==
s.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==s.TAB){var b=a.target;this._getFocusItems(this.containerNode);this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(n.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey?a.stopPropagation():(n.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}}});r("dojo-bidi")&&p.extend({_setTitleAttr:function(a){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,a):a;this._set("title",a)},_setTextDirAttr:function(a){this._created&&this.textDir==a||(this._set("textDir",a),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return p})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/i18n!../nls/loading dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v){return c("dijit.layout.ContentPane",[r,s,g],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:p._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},
onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var e=new c(a,b);return!e.href&&e._contentSetter&&e._contentSetter.parseDeferred&&!e._contentSetter.parseDeferred.isFulfilled()?e._contentSetter.parseDeferred.then(function(){return e}):e},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=f.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=t.delegate(a,{content:c})}this.inherited(arguments,
[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=m.getLocalization("dijit","loading",this.lang);this.loadingMessage=b.substitute(this.loadingMessage,a);this.errorMessage=b.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(a){a._started||
a._destroyed||!t.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){d.forEach(this.getChildren(),function(a){a._started||a._destroyed||!t.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!t.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){p.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new k(t.hitch(this,"cancel"));this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){p.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new k(t.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new k(t.hitch(this,"cancel"));this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
t.isObject(this.ioArgs)&&t.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||e.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(b){this.isLoaded&&this._onUnloadHandler();var c=this._contentSetter;d.forEach(this.getChildren(),function(a){a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b);a._destroyed=!0});c&&(d.forEach(c.parseResults,function(a){a._destroyed||(a.destroyRecursive?
a.destroyRecursive(b):a.destroy&&a.destroy(b),a._destroyed=!0)}),delete c.parseResults);b||a.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;c&&c instanceof n._ContentSetter||(c=this._contentSetter=new n._ContentSetter({node:this.containerNode,_onError:t.hitch(this,this._onError),onContentError:t.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+
" could not change content due to "+b.message,b)}})}));var e=t.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=c.set(t.isObject(a)&&a.domNode?a.domNode:a,e),d=this;return v(e&&e.then?e:c.parseDeferred,function(){delete d._contentSetterParams;b||(d._started&&(d._startChildren(),d._scheduleLayout()),d._onLoadHandler(a))})},
_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query dojo/sniff ../registry ../Viewport ./utils".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k){return t("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var d=this.getParent();this._childOfLayoutWidget=d&&d.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(c.on("resize",b.hitch(this,"resize")))}},_checkIfSingleChild:function(){var b=[],c=!1;n("> *",this.containerNode).some(function(a){var e=
d.byNode(a);e&&e.resize?b.push(e):!/script|link|style/i.test(a.nodeName)&&a.offsetHeight&&(c=!0)});this._singleChild=1!=b.length||c?null:b[0];r.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(b,c){this._resizeCalled=!0;this._scheduleLayout(b,c)},_scheduleLayout:function(b,c){this._isShown()?this._layout(b,c):(this._needLayout=!0,this._changeSize=b,this._resultSize=c)},_layout:function(c,d){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
c&&s.setMarginBox(this.domNode,c);var a=this.containerNode;if(a===this.domNode){var e=d||{};b.mixin(e,c||{});"h"in e&&"w"in e||(e=b.mixin(s.getMarginBox(a),e));this._contentBox=k.marginBox2contentBox(a,e)}else this._contentBox=s.getContentBox(a);this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||s.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=
this.getChildren(),c,a=0;c=b[a++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,c=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!r.contains(b,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},
"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(p,t,r,s,g){function b(b){return b.substring(0,1).toUpperCase()+b.substring(1)}function n(b,c){var k=b.resize?b.resize(c):r.setMarginBox(b.domNode,c);k?g.mixin(b,k):(g.mixin(b,r.getMarginBox(b.domNode)),g.mixin(b,c))}var l={marginBox2contentBox:function(b,c){var g=s.getComputedStyle(b),f=r.getMarginExtents(b,g),l=r.getPadBorderExtents(b,g);return{l:s.toPixelValue(b,
g.paddingLeft),t:s.toPixelValue(b,g.paddingTop),w:c.w-(f.w+l.w),h:c.h-(f.h+l.h)}},layoutChildren:function(d,c,k,f,l){c=g.mixin({},c);t.add(d,"dijitLayoutContainer");k=p.filter(k,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(p.filter(k,function(a){return"center"==a.region||"client"==a.layoutAlign}));p.forEach(k,function(a){var e=a.domNode,d=a.region||a.layoutAlign;if(!d)throw Error("No region setting for "+a.id);var g=e.style;g.left=c.l+"px";g.top=c.t+"px";g.position="absolute";
t.add(e,"dijitAlign"+b(d));e={};f&&f==a.id&&(e["top"==a.region||"bottom"==a.region?"h":"w"]=l);"leading"==d&&(d=a.isLeftToRight()?"left":"right");"trailing"==d&&(d=a.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(e.w=c.w,n(a,e),c.h-=a.h,"top"==d?c.t+=a.h:g.top=c.t+c.h+"px"):"left"==d||"right"==d?(e.h=c.h,n(a,e),c.w-=a.w,"left"==d?c.l+=a.w:g.left=c.l+c.w+"px"):"client"!=d&&"center"!=d||n(a,c)})}};g.setObject("dijit.layout.utils",l);return l})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(p,t,r,s,g,b,n){var l={};t.setObject("dojo.html",l);var d=0;l._secureForInnerHtml=function(b){return b.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};l._emptyNode=b.empty;l._setNodeContent=function(c,d){b.empty(c);if(d)if("string"==typeof d&&(d=b.toDom(d,c.ownerDocument)),!d.nodeType&&t.isArrayLike(d))for(var f=d.length,g=0;g<d.length;g=f==d.length?g+1:0)b.place(d[g],c,"last");else b.place(d,c,"last");return c};l._ContentSetter=s("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:p._scopeName,startup:!0,constructor:function(b,k){t.mixin(this,b||{});k=this.node=g.byId(this.node||k);this.id||(this.id=["Setter",k?k.id||k.tagName:"",d++].join("_"))},set:function(b,d){void 0!==b&&(this.content=b);d&&this._mixin(d);this.onBegin();this.setContent();var f=this.onEnd();return f&&f.then?f:this.node},setContent:function(){var b=this.node;if(!b)throw Error(this.declaredClass+": setContent given no node");try{b=
l._setNodeContent(b,this.content)}catch(d){var f=this.onContentError(d);try{b.innerHTML=f}catch(g){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+g.message,g)}}this.node=b},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(r.forEach(this.parseResults,function(b){b.destroy&&b.destroy()}),delete this.parseResults);b.empty(this.node)},onBegin:function(){var b=
this.content;if(t.isString(b)&&(this.cleanContent&&(b=l._secureForInnerHtml(b)),this.extractContent)){var d=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);d&&(b=d[1])}this.empty();this.content=b;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(b){return"Error occurred setting content: "+b},onExecError:function(b){return"Error occurred executing scripts: "+
b},_mixin:function(b){var d={},f;for(f in b)f in d||(this[f]=b[f])},_parse:function(){var b=this.node;try{var d={};r.forEach(["dir","lang","textDir"],function(a){this[a]&&(d[a]=this[a])},this);var f=this;this.parseDeferred=n.parse({rootNode:b,noStart:!this.startup,inherited:d,scope:this.parserScope}).then(function(a){return f.parseResults=a},function(a){f._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(g){this._onError("Content",g,"Error parsing in _ContentSetter#"+this.id)}},
_onError:function(b,d,f){b=this["on"+b+"Error"].call(this,d);f?console.error(f,d):b&&l._setNodeContent(this.node,b,!0)}});l.set=function(b,d,f){void 0==d&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),d="");return f?(new l._ContentSetter(t.mixin(f,{content:d,node:b}))).set():l._setNodeContent(b,d,!0)};return l})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(p,t){return p("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},
onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var p=t._getTabNavigable(this.containerNode);this._firstFocusItem=p.lowest||p.first||this.closeButtonNode||this.domNode;this._lastFocusItem=p.last||p.highest||this._firstFocusItem}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(p,t,r,s,g,b){return t("dijit.form._FormMixin",
null,{state:"",_getDescendantFormWidgets:function(b){var g=[];p.forEach(b||this.getChildren(),function(b){"value"in b?g.push(b):g=g.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return g},reset:function(){p.forEach(this._getDescendantFormWidgets(),function(b){b.reset&&b.reset()})},validate:function(){var g=!1;return p.every(p.map(this._getDescendantFormWidgets(),function(l){l._hasBeenBlurred=!0;var d=l.disabled||!l.validate||l.validate();d||g||(b.scrollIntoView(l.containerNode||l.domNode),
l.focus(),g=!0);return d}),function(b){return b})},setValues:function(b){r.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(b){var g={};p.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(g[b.name]||(g[b.name]=[])).push(b)});for(var d in g)if(g.hasOwnProperty(d)){var c=g[d],k=s.getObject(d,!1,b);void 0!==k&&(k=[].concat(k),"boolean"==typeof c[0].checked?p.forEach(c,function(b){b.set("value",
-1!=p.indexOf(k,b._get("value")))}):c[0].multiple?c[0].set("value",k):p.forEach(c,function(b,c){b.set("value",k[c])}))}},getValues:function(){r.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};p.forEach(this._getDescendantFormWidgets(),function(g){var d=g.name;if(d&&!g.disabled){var c=g.get("value");"boolean"==typeof g.checked?/Radio/.test(g.declaredClass)?!1!==c?s.setObject(d,c,b):(c=s.getObject(d,
!1,b),void 0===c&&s.setObject(d,null,b)):(g=s.getObject(d,!1,b),g||(g=[],s.setObject(d,g,b)),!1!==c&&g.push(c)):(g=s.getObject(d,!1,b),"undefined"!=typeof g?s.isArray(g)?g.push(c):s.setObject(d,[g,c],b):s.setObject(d,c,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=p.map(this._descendants,function(b){return b.get("state")||""});return 0<=p.indexOf(b,"Error")?"Error":0<=p.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},
connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();p.forEach(this._descendants,function(b){b._started||b.startup()});b||this._onChildChange()},_onChildChange:function(b){b&&"state"!=b&&"disabled"!=b||this._set("state",this._getState());b&&"value"!=b&&"disabled"!=b&&"checked"!=b||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);
this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var b=this;this.own(g(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(g){g.target!=b.domNode&&b._onChildChange(g.type.replace("attrmodified-",""))}));this.watch("state",function(b,d,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare",
"./CheckBox","./_RadioButtonMixin"],function(p,t,r){return p("dijit.form.RadioButton",[t,r],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query ../registry".split(" "),function(p,t,r,s,g,b){return t("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var n=[];g("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(s.hitch(this,function(g){g.name==this.name&&
g.form==this.focusNode.form&&(g=b.getEnclosingWidget(g))&&n.push(g)}));return n},_setCheckedAttr:function(b){this.inherited(arguments);this._created&&b&&p.forEach(this._getRelatedWidgets(),s.hitch(this,function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_getSubmitValue:function(b){return null==b?"on":b},_onClick:function(b){return this.checked||this.disabled?(b.stopPropagation(),b.preventDefault(),!1):this.readOnly?(b.stopPropagation(),b.preventDefault(),p.forEach(this._getRelatedWidgets(),s.hitch(this,
function(b){r.set(this.focusNode||this.domNode,"checked",b.checked)})),!1):this.inherited(arguments)}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(p,t,r,s){return p("dijit.CheckedMenuItem",r,{baseClass:"dijitCheckedMenuItem",templateString:s,checked:!1,_setCheckedAttr:function(g){t.toggle(this.domNode,this.baseClass+"Checked",g);this.domNode.setAttribute("aria-checked",g?"true":"false");
this._set("checked",g)},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(g){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(g)}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(p,t,r,s,g,b,n){return p("dijit.PopupMenuItem",n,{_fillContent:function(){if(this.srcNodeRef){var b=s("*",this.srcNodeRef);
this.inherited(arguments,[b[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(b,d){var c=this.popup;g.open(r.delegate(b,{popup:this.popup,around:this.domNode}));d&&c.focus&&c.focus()},_closePopup:function(){g.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var g=s("[widgetId]",this.dropDownContainer)[0];this.popup=b.byNode(g)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",
this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&t.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(b){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(b),delete this.popup);this.inherited(arguments)}})})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane dojo/text!./templates/Dialog.html dojo/i18n!./nls/common".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x,z,A,y,C,F,D,H,N,J,M,E){y=s("dijit._DialogBase"+(m("dojo-bidi")?"_NoBidi":""),[F,H,N,D],{templateString:E,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=
a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=k.getLocalization("dijit","common");q.mixin(this,a);this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);r.after(this,"onExecute",q.hitch(this,"hide"),!0);r.after(this,"onCancel",q.hitch(this,"hide"),!0);this._modalconnects=[]},onLoad:function(){this._size();this._position();this.autofocus&&G.isTop(this)&&
(this._getFocusItems(this.domNode),A.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems(this.domNode);A.focus(this._firstFocusItem)},_endDrag:function(){var a=l.position(this.domNode),b=v.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==m("ie")?z:x)(a,{handle:this.titleBar}),
r.after(this._moveable,"onMoveStop",q.hitch(this,"_endDrag"),!0)):n.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":t.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:q.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();this._singleChild?"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle):
d.set(this.containerNode,{width:"auto",height:"auto"});var a=l.position(this.domNode),b=v.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;if(a.w>=b.w||a.h>=b.h){var c=l.position(this.containerNode),e=Math.min(a.w,b.w)-(a.w-c.w),a=Math.min(a.h,b.h)-(a.h-c.h);this._singleChild&&this._singleChild.resize?("undefined"==typeof this._singleChildOriginalStyle&&(this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText),this._singleChild.resize({w:e,h:a})):d.set(this.containerNode,
{width:e+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!n.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=v.getBox(this.ownerDocument),c=this._relativePosition,e=c?null:l.position(a);d.set(a,{left:Math.floor(b.l+(c?c.x:(b.w-e.w)/2))+"px",top:Math.floor(b.t+(c?c.y:(b.h-e.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==f.TAB){this._getFocusItems(this.domNode);var b=a.target;
this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(A.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey||(A.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==f.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(!this.open){this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=
!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),G.hide(this));var b=v.get(this.ownerDocument);this._modalconnects.push(a(b,"scroll",q.hitch(this,"resize")));this._modalconnects.push(a(this.domNode,"keydown",q.hitch(this,"_onKey")));d.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var e;this._fadeInDeferred=new g(q.hitch(this,function(){e.stop();delete this._fadeInDeferred}));b=this._fadeInDeferred.promise;e=c.fadeIn({node:this.domNode,
duration:this.duration,beforeBegin:q.hitch(this,function(){G.show(this,this.underlayAttrs)}),onEnd:q.hitch(this,function(){this.autofocus&&G.isTop(this)&&(this._getFocusItems(this.domNode),A.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return b}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new g(q.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));
this._fadeOutDeferred.then(q.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=c.fadeOut({node:this.domNode,duration:this.duration,onEnd:q.hitch(this,function(){this.domNode.style.display="none";G.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var e;e=this._modalconnects.pop();)e.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b}},resize:function(){"none"!=
this.domNode.style.display&&(this._size(),m("touch")||this._position())},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();G.hide(this);this.inherited(arguments)}});m("dojo-bidi")&&(y=s("dijit._DialogBase",y,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(a){this._created&&
this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var K=s("dijit.Dialog",[M,y],{});K._DialogBase=y;var G=K._DialogLevelManager={_beginZIndex:950,show:function(a,b){u[u.length-1].focus=A.curNode;var c=u[u.length-1].dialog?u[u.length-1].zIndex+2:K._DialogLevelManager._beginZIndex;d.set(a.domNode,"zIndex",c);J.show(b,c-1);u.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(u[u.length-1].dialog==a){u.pop();var c=u[u.length-1];1==u.length?J.hide():J.show(c.underlayAttrs,
c.zIndex-1);if(a.refocus&&(a=c.focus,!c.dialog||a&&b.isDescendant(a,c.dialog.domNode)||(c.dialog._getFocusItems(c.dialog.domNode),a=c.dialog._firstFocusItem),a))try{a.focus()}catch(e){}}else c=t.indexOf(t.map(u,function(a){return a.dialog}),a),-1!=c&&u.splice(c,1)},isTop:function(a){return u[u.length-1].dialog==a}},u=K._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];A.watch("curNode",function(a,b,c){a=u[u.length-1].dialog;if(c&&a&&!a._fadeOutDeferred&&c.ownerDocument==a.ownerDocument){do if(c==
a.domNode||n.contains(c,"dijitPopup"))return;while(c=c.parentNode);a.focus()}});m("dijit-legacy-requires")&&e(0,function(){p(["dijit/TooltipDialog"])});return K})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f){return t("dojo.dnd.Moveable",[b],{handle:"",delay:0,skip:!1,constructor:function(b,a){this.node=s.byId(b);a||(a={});this.handle=
a.handle?s.byId(a.handle):null;this.handle||(this.handle=this.node);this.delay=0<a.delay?a.delay:0;this.skip=a.skip;this.mover=a.mover?a.mover:k;this.events=[n(this.handle,d.press,r.hitch(this,"onMouseDown")),n(this.handle,"dragstart",r.hitch(this,"onSelectStart")),n(this.handle,"selectstart",r.hitch(this,"onSelectStart"))]},markupFactory:function(b,a,c){return new c(a,b)},destroy:function(){p.forEach(this.events,function(b){b.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||
!c.isFormElement(b)){if(this.delay)this.events.push(n(this.handle,d.move,r.hitch(this,"onMouseMove")),n(this.handle,d.release,r.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(b){if(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)this.onMouseUp(b),this.onDragDetected(b);b.stopPropagation();b.preventDefault()},onMouseUp:function(b){for(var a=0;2>a;++a)this.events.pop().remove();
b.stopPropagation();b.preventDefault()},onSelectStart:function(b){this.skip&&c.isFormElement(b)||(b.stopPropagation(),b.preventDefault())},onDragDetected:function(b){new this.mover(this.node,b,this)},onMoveStart:function(b){l.publish("/dnd/move/start",b);g.add(f.body(),"dojoMove");g.add(this.node,"dojoMoveItem")},onMoveStop:function(b){l.publish("/dnd/move/stop",b);g.remove(f.body(),"dojoMove");g.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(b,a){this.onMoving(b,a);var c=
b.node.style;c.left=a.l+"px";c.top=a.t+"px";this.onMoved(b,a)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q){return t("dojo.dnd.Mover",[d],{constructor:function(a,e,d){function f(a){a.preventDefault();a.stopPropagation()}this.node=b.byId(a);this.marginBox={l:e.pageX,
t:e.pageY};this.mouseButton=e.button;e=this.host=d;a=a.ownerDocument;this.events=[c(a,k.move,r.hitch(this,"onFirstMove")),c(a,k.move,r.hitch(this,"onMouseMove")),c(a,k.release,r.hitch(this,"onMouseUp")),c(a,"dragstart",f),c(a.body,"selectstart",f)];q.autoScrollStart(a);if(e&&e.onMoveStart)e.onMoveStart(this)},onMouseMove:function(a){q.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(s("webkit")&&
s("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,d=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=n.getMarginBox(this.node);c=g.doc.body;var f=l.getComputedStyle(c),k=n.getMarginBox(c,f),f=n.getContentBox(c,f);c=b.l-(f.l-k.l);b=b.t-(f.t-k.t)}this.marginBox.l=
c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(d&&d.onFirstMove)d.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){p.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(p,t){var r=t.prototype.onMove;return p("dojo.dnd.TimedMoveable",t,{timeout:40,constructor:function(p,g){g||(g={});g.timeout&&
"number"==typeof g.timeout&&0<=g.timeout&&(this.timeout=g.timeout)},onMoveStop:function(p){p._timer&&(clearTimeout(p._timer),r.call(this,p,p._leftTop));t.prototype.onMoveStop.apply(this,arguments)},onMove:function(p,g){p._leftTop=g;if(!p._timer){var b=this;p._timer=setTimeout(function(){p._timer=null;r.call(b,p,p._leftTop)},this.timeout)}}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f){var q=p("dijit.DialogUnderlay",[l,d],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){s.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(b(this.domNode,"keydown",t.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=n.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new c(this.domNode);var a=n.get(this.ownerDocument);this._modalConnects=[k.on("resize",t.hitch(this,"layout")),b(a,"scroll",
t.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});q.show=function(a,b){var c=q._singleton;!c||c._destroyed?c=f._underlay=q._singleton=new q(a):a&&c.set(a);g.set(c.domNode,"zIndex",b);c.open||c.show()};q.hide=function(){var a=
q._singleton;a&&!a._destroyed&&a.hide()};return q})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/_base/connect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x,z,A,y,C,F,D,H,N,J,M,E,K,G,u,S,Q,W,P){function aa(a){return v.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var ca=g("dijit._TreeNode",[N,J,M,E,K],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a)},labelType:"text",isExpandable:null,isExpanded:!1,state:"NotLoaded",
templateString:u,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";k.set(this.domNode,"backgroundPosition",b+" 0px");k.set(this.rowNode,
this.isLeftToRight()?"paddingLeft":"paddingRight",b);p.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,"row","Row");this.tree._startPaint(!0)},
_applyClassAndStyle:function(a,b,c){var e="_"+b+"Class";b+="Node";var f=this[e];this[e]=this.tree["get"+c+"Class"](a,this.isExpanded);d.replace(this[b],this[e]||"",f||"");k.set(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();a&&a.rowNode&&"none"!=a.rowNode.style.display?d.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling()):d.add(this.domNode,"dijitTreeIsRoot")},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened",
"dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;d.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return aa(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role",
"group");d.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=q.wipeIn({node:this.containerNode,duration:H.defaultDuration}),c=this._expandDeferred=new b(function(){a.stop()});t.after(a,"onEnd",function(){c.resolve(!0)},!0);a.play();return aa(c)},collapse:function(){if(this._collapseDeferred)return aa(this._collapseDeferred);this._expandDeferred&&
(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");d.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=q.wipeOut({node:this.containerNode,duration:H.defaultDuration}),c=this._collapseDeferred=new b(function(){a.stop()});t.after(a,"onEnd",function(){c.resolve(!0)},
!0);a.play();return aa(c)},indent:0,setChildItems:function(a){var b=this.tree,c=b.model,e=[],d=this.getChildren();p.forEach(d,function(a){M.prototype.removeChild.call(this,a)},this);this.defer(function(){p.forEach(d,function(a){if(!a._destroyed&&!a.getParent()){b.dndController.removeTreeNode(a);var e=function(a){var d=c.getIdentity(a.item),f=b._itemNodesMap[d];1==f.length?delete b._itemNodesMap[d]:(d=p.indexOf(f,a),-1!=d&&f.splice(d,1));p.forEach(a.getChildren(),e)};e(a);if(b.persist){var d=p.map(a.getTreePath(),
function(a){return b.model.getIdentity(a)}).join("/"),f;for(f in b._openedNodes)f.substr(0,d.length)==d&&delete b._openedNodes[f];b._saveExpandedNodes()}a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,p.forEach(a,function(a){var d=c.getIdentity(a),f=b._itemNodesMap[d],m;if(f)for(var g=0;g<f.length;g++)if(f[g]&&!f[g].getParent()){m=f[g];m.set("indent",this.indent+1);break}m||(m=this.tree._createTreeNode({item:a,tree:b,isExpandable:c.mayHaveChildren(a),label:b.getLabel(a),
labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),f?f.push(m):b._itemNodesMap[d]=[m]);this.addChild(m);(this.tree.autoExpand||this.tree._state(m))&&e.push(b._expandNode(m))},this),p.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=n(e);this.tree._startPaint(a);return aa(a)},getTreePath:function(){for(var a=
this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,this.collapse());p.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":
"false");d.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){F.focus(this.focusNode)}});a("dojo-bidi")&&ca.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),p.forEach(this.getChildren(),function(b){b.set("textDir",a)},this))}});var Y=g("dijit.Tree",[N,G,J,K],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,
openOnClick:!1,openOnDblClick:!1,templateString:S,persist:!1,autoExpand:!1,dndController:P,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){z.publish(this.id,v.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&
(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new b;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(x(this.containerNode,x.selector(".dijitTreeNode",A.enter),function(b){a._onNodeMouseEnter(D.byNode(this),b)}),x(this.containerNode,x.selector(".dijitTreeNode",A.leave),function(b){a._onNodeMouseLeave(D.byNode(this),
b)}),x(this.containerNode,C,function(b){var c=D.getEnclosingWidget(b.target);c.isInstanceOf(ca)&&a._onClick(c,b)}),x(this.containerNode,x.selector(".dijitTreeNode","dblclick"),function(b){a._onDblClick(D.byNode(this),b)}));this.model||this._store2model();this.own(t.after(this.model,"onChange",v.hitch(this,"_onItemChange"),!0),t.after(this.model,"onChildrenChange",v.hitch(this,"_onItemChildrenChange"),!0),t.after(this.model,"onDelete",v.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){v.isString(this.dndController)&&
(this.dndController=v.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=aa(this.pendingCommandsPromise);this.onLoadDeferred.then(v.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;e.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",
store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=v.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(a.getChildren=v.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new W(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(v.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,
label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",
this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),b.labelNode.setAttribute("role","presentation"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);
this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(v.hitch(this,function(){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(!0)}))}),v.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=v.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},
_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(v.hitch(this,function(){var c=p.map(a,function(a){return!a||v.isString(a)?a:b.model.getIdentity(a)}),e=[];p.forEach(c,function(a){e=e.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",e)}))},_setPathAttr:function(a){return a.length?aa(this.set("paths",[a]).then(function(a){return a[0]})):aa(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,
e){var d=a.shift(),f=p.filter(e,function(a){return a.getIdentity()==d})[0];if(f)return a.length?c._expandNode(f).then(function(){return b(a,f.getChildren())}):f;throw new Y.PathError("Could not expand path at "+d);}var c=this;return aa(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return n(p.map(a,function(a){a=p.map(a,function(a){return v.isString(a)?a:c.model.getIdentity(a)});if(a.length)return b(a,[c.rootNode]);throw new Y.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",
a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function a(c){return b._expandNode(c).then(function(){var b=p.filter(c.getChildren()||[],function(a){return a.isExpandable});return n(p.map(b,a))})}var b=this;return aa(a(this.rootNode))},collapseAll:function(){function a(c){var e=p.filter(c.getChildren()||[],function(a){return a.isExpandable}),e=n(p.map(e,a));return!c.isExpanded||
c==b.rootNode&&!b.showRoot?e:e.then(function(){return b._collapseNode(c)})}var b=this;return aa(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},
_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&b.isExpanded&&b.hasChildren();)c=b.getChildren(),b=c[c.length-1];else if(c=b.getParent(),this.showRoot||c!==this.rootNode)b=c;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,
b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&c.isTreeNode&&(this.showRoot||c!==this.rootNode)&&this.focusNode(c)}},focusLastChild:function(){var a=this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&
a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return l.isDescendant(a,b.expandoNode)||l.isDescendant(a,b.expandoNodeText)},__click:function(a,b,c,e){var d=this.isExpandoNode(b.target,a);a.isExpandable&&(c||d)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[e](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},
_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){e.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},
_getRootOrFirstNode:function(){e.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var c=this.model,e=a.item,d=this;a._loadDeferred||(a.markProcessing(),
a._loadDeferred=new b,c.getChildren(e,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(d,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));c=a._loadDeferred.then(v.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(c);return c},focusNode:function(a){this.focusChild(a)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=
this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),e=this.getTooltip(a);p.forEach(b,function(b){b.set({item:a,label:c,tooltip:e});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this.model.getIdentity(a);(c=this._itemNodesMap[c])&&p.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(p.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);
a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=s(this.cookieName);a&&p.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=p.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},
_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);s(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!v.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&c.setMarginBox(this.domNode,
a);this._nodePixelIndent=c.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(v.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=v.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&
this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});y(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new ca(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});a("dojo-bidi")&&Y.extend({_setTextDirAttr:function(a){a&&
this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});Y.PathError=f("TreePathError");Y._TreeNode=ca;return Y})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(p,t){p.cookie=function(p,s,g){var b=document.cookie,n;if(1==arguments.length)n=(n=b.match(RegExp("(?:^|; )"+t.escapeString(p)+"=([^;]*)")))?decodeURIComponent(n[1]):void 0;else{g=g||{};b=g.expires;if("number"==typeof b){var l=new Date;l.setTime(l.getTime()+864E5*b);b=g.expires=l}b&&b.toUTCString&&
(g.expires=b.toUTCString());s=encodeURIComponent(s);var b=p+"="+s,d;for(d in g)b+="; "+d,l=g[d],!0!==l&&(b+="="+l);document.cookie=b}return n};p.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return p.cookie})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k){r.isAsync||c(0,function(){k(["./fx/Toggler"])});r=r.fx={};c={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var f=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;s.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};f.prototype=new t;p.extend(f,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();
this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=g.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0),this._onEndCtx=g.after(this._current,"onEnd",p.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var c=g.after(this._current,
"beforeBegin",p.hitch(this,function(){this._fire("beforeBegin")}),!0),d=g.after(this._current,"onBegin",p.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),f=g.after(this._current,"onPlay",p.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();d.remove();f.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=g.after(this._current,"onAnimate",p.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=g.after(this._current,
"onEnd",p.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=g.after(this._current,"onPause",p.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;s.some(this._animations,function(a){if(a.duration<=c)return this._current=a,!0;c-=a.duration;return!1});this._current&&this._current.gotoPercent(c/
this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=g.after(this._current,"onStop",p.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();
this._onEndCtx&&this._onEndCtx.remove()}});p.extend(f,c);r.chain=function(a){return new f(a)};var q=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;s.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(g.after(a,"onEnd",p.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new b.Animation({curve:[0,1],duration:this.duration});var c=this;s.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),
function(a){c._connects.push(g.after(c._pseudoAnimation,a,function(){c._fire(a,arguments)},!0))})};p.extend(q,{_doAction:function(a,b){s.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",
arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;s.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){s.forEach(this._connects,function(a){a.remove()})}});p.extend(q,c);r.combine=function(a){return new q(a)};
r.wipeIn=function(a){var c=a.node=n.byId(a.node),d=c.style,f;a=b.animateProperty(p.mixin({properties:{height:{start:function(){f=d.overflow;d.overflow="hidden";if("hidden"==d.visibility||"none"==d.display)return d.height="1px",d.display="",d.visibility="",1;var a=l.get(c,"height");return Math.max(a,1)},end:function(){return c.scrollHeight}}}},a));var k=function(){d.height="auto";d.overflow=f};g.after(a,"onStop",k,!0);g.after(a,"onEnd",k,!0);return a};r.wipeOut=function(a){var c=(a.node=n.byId(a.node)).style,
d;a=b.animateProperty(p.mixin({properties:{height:{end:1}}},a));g.after(a,"beforeBegin",function(){d=c.overflow;c.overflow="hidden";c.display=""},!0);var f=function(){c.overflow=d;c.height="auto";c.display="none"};g.after(a,"onStop",f,!0);g.after(a,"onEnd",f,!0);return a};r.slideTo=function(a){var c=null,f=null,k=function(a){return function(){var b=l.getComputedStyle(a),g=b.position;c="absolute"==g?a.offsetTop:parseInt(b.top)||0;f="absolute"==g?a.offsetLeft:parseInt(b.left)||0;"absolute"!=g&&"relative"!=
g&&(b=d.position(a,!0),c=b.y,f=b.x,a.style.position="absolute",a.style.top=c+"px",a.style.left=f+"px")}}(a.node=n.byId(a.node));k();a=b.animateProperty(p.mixin({properties:{top:a.top||0,left:a.left||0}},a));g.after(a,"beforeBegin",k,!0);return a};return r})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(p,t,r,s){return r("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",
root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(g){s.mixin(this,g);this.connects=[];g=this.store;if(!g.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");g.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([t.after(g,"onNew",s.hitch(this,"onNewItem"),!0),t.after(g,"onDelete",s.hitch(this,"onDeleteItem"),!0),t.after(g,"onSet",s.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var g;g=
this.connects.pop();)g.remove()},getRoot:function(g,b){this.root?g(this.root):this.store.fetch({query:this.query,onComplete:s.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];g(this.root)}),onError:b})},mayHaveChildren:function(g){return p.some(this.childrenAttrs,function(b){return this.store.hasAttribute(g,b)},this)},getChildren:function(g,b,n){var l=this.store;if(l.isItemLoaded(g)){for(var d=
[],c=0;c<this.childrenAttrs.length;c++)var k=l.getValues(g,this.childrenAttrs[c]),d=d.concat(k);var f=0;this.deferItemLoadingUntilExpand||p.forEach(d,function(a){l.isItemLoaded(a)||f++});0==f?b(d):p.forEach(d,function(a,c){l.isItemLoaded(a)||l.loadItem({item:a,onItem:function(a){d[c]=a;0==--f&&b(d)},onError:n})})}else{var q=s.hitch(this,arguments.callee);l.loadItem({item:g,onItem:function(a){q(a,b,n)},onError:n})}},isItem:function(g){return this.store.isItem(g)},fetchItemByIdentity:function(g){this.store.fetchItemByIdentity(g)},
getIdentity:function(g){return this.store.getIdentity(g)},getLabel:function(g){return this.labelAttr?this.store.getValue(g,this.labelAttr):this.store.getLabel(g)},newItem:function(g,b,n){var l={parent:b,attribute:this.childrenAttrs[0]},d;this.newItemIdAttr&&g[this.newItemIdAttr]?this.fetchItemByIdentity({identity:g[this.newItemIdAttr],scope:this,onItem:function(c){c?this.pasteItem(c,null,b,!0,n):(d=this.store.newItem(g,l))&&void 0!=n&&this.pasteItem(d,b,b,!1,n)}}):(d=this.store.newItem(g,l))&&void 0!=
n&&this.pasteItem(d,b,b,!1,n)},pasteItem:function(g,b,n,l,d){var c=this.store,k=this.childrenAttrs[0];b&&p.forEach(this.childrenAttrs,function(d){if(c.containsValue(b,d,g)){if(!l){var a=p.filter(c.getValues(b,d),function(a){return a!=g});c.setValues(b,d,a)}k=d}});if(n)if("number"==typeof d){var f=c.getValues(n,k).slice();f.splice(d,0,g);c.setValues(n,k,f)}else c.setValues(n,k,c.getValues(n,k).concat(g))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(g,
b){b&&this.getChildren(b.item,s.hitch(this,function(g){this.onChildrenChange(b.item,g)}))},onDeleteItem:function(g){this.onDelete(g)},onSetItem:function(g,b){if(-1!=p.indexOf(this.childrenAttrs,b))this.getChildren(g,s.hitch(this,function(b){this.onChildrenChange(g,b)}));else this.onChange(g)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(p,t,r,s,g){return t("dijit.tree.ForestStoreModel",
g,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(b){this.root={store:this,root:!0,id:b.rootId,label:b.rootLabel,children:b.rootChildren}},mayHaveChildren:function(b){return b===this.root||this.inherited(arguments)},getChildren:function(b,g,l){b===this.root?this.root.children?g(this.root.children):this.store.fetch({query:this.query,onComplete:s.hitch(this,function(b){this.root.children=b;g(b)}),onError:l}):this.inherited(arguments)},isItem:function(b){return b===this.root?!0:this.inherited(arguments)},
fetchItemByIdentity:function(b){if(b.identity==this.root.id){var g=b.scope||r.global;b.onItem&&b.onItem.call(g,this.root)}else this.inherited(arguments)},getIdentity:function(b){return b===this.root?this.root.id:this.inherited(arguments)},getLabel:function(b){return b===this.root?this.root.label:this.inherited(arguments)},newItem:function(b,g,l){return g===this.root?(this.onNewRootItem(b),this.store.newItem(b)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(b,g,l,d,c){if(g===
this.root&&!d)this.onLeaveRoot(b);this.inherited(arguments,[b,g===this.root?null:g,l===this.root?null:l,d,c]);if(l===this.root)this.onAddToRoot(b)},onAddToRoot:function(b){},onLeaveRoot:function(b){},_requeryTop:function(){var b=this.root.children||[];this.store.fetch({query:this.query,onComplete:s.hitch(this,function(g){this.root.children=g;if(b.length!=g.length||p.some(b,function(b,d){return g[d]!=b}))this.onChildrenChange(this.root,g)})})},onNewItem:function(b,g){this._requeryTop();this.inherited(arguments)},
onDeleteItem:function(b){-1!=p.indexOf(this.root.children,b)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(b,g,l,d){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(p,t,r,s,g,b,n,l,d,c,k){return r("dijit.tree._dndSelector",k,{constructor:function(){this.selection=
{};this.anchor=null;this.events.push(l(this.tree.domNode,d.press,g.hitch(this,"onMouseDown")),l(this.tree.domNode,d.release,g.hitch(this,"onMouseUp")),l(this.tree.domNode,d.move,g.hitch(this,"onMouseMove")),l(this.tree.domNode,c.press,g.hitch(this,"onClickPress")),l(this.tree.domNode,c.release,g.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],c=this.selection,a;for(a in c)b.push(c[a]);return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);
this.selection=this.anchor=null},addTreeNode:function(b,c){this.setSelection(this.getSelectedTreeNodes().concat([b]));c&&(this.anchor=b);return b},removeTreeNode:function(c){var d=p.filter(this.getSelectedTreeNodes(),function(a){return!b.isDescendant(a.domNode,c.domNode)});this.setSelection(d);return c},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},setSelection:function(b){var c=this.getSelectedTreeNodes();p.forEach(this._setDifference(c,b),g.hitch(this,function(a){a.setSelected(!1);
this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));p.forEach(this._setDifference(b,c),g.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(b,c){p.forEach(c,function(a){a.__exclude__=!0});var a=p.filter(b,function(a){return!a.__exclude__});p.forEach(c,function(a){delete a.__exclude__});return a},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),c=[],a=[],e=[];p.forEach(b,function(b){var d=
b.getTreePath(),f=this.tree.model;a.push(b);c.push(d);d=p.map(d,function(a){return f.getIdentity(a)},this);e.push(d.join("/"))},this);b=p.map(a,function(a){return a.item});this.tree._set("paths",c);this.tree._set("path",c[0]||[]);this.tree._set("selectedNodes",a);this.tree._set("selectedNode",a[0]||null);this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,this.current))){n.isLeft(b)&&
b.preventDefault();var c="keydown"==b.type?this.tree.focusedChild:this.current;if(c){var a=t.isCopyKey(b),e=c.id;this.singular||b.shiftKey||!this.selection[e]?(this._doDeselect=!1,this.userSelect(c,a,b.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(b){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,t.isCopyKey(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(b,
c){if(b===c)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-c.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(c)&2?1:-1;if(document.createRange){var a=doc.createRange();a.setStartBefore(b);var e=doc.createRange();e.setStartBefore(c);return a.compareBoundaryPoints(a.END_TO_END,e)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(b,c,a){if(this.singular)this.anchor==
b&&c?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(a&&this.anchor){c=this._compareNodes(this.anchor.rowNode,b.rowNode);a=this.anchor;0>c?c=a:(c=b,b=a);for(a=[];c!=b;)a.push(c),c=this.tree._getNext(c);a.push(b);this.setSelection(a)}else this.selection[b.id]&&c?this.removeTreeNode(b):c?this.addTreeNode(b,!0):(this.setSelection([b]),this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,c){c=c||s.global;for(var a in this.selection)b.call(c,
this.getItem(a),a,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(p,t,r,s,g,b){return t("dijit.tree._dndContainer",null,{constructor:function(n,l){this.tree=n;this.node=n.domNode;s.mixin(this,l);this.containerState="";r.add(this.node,"dojoDndContainer");this.events=[g(this.node,b.enter,s.hitch(this,"onOverEvent")),g(this.node,b.leave,s.hitch(this,"onOutEvent")),p.after(this.tree,"_onNodeMouseEnter",
s.hitch(this,"onMouseOver"),!0),p.after(this.tree,"_onNodeMouseLeave",s.hitch(this,"onMouseOut"),!0),g(this.node,"dragstart, selectstart",function(b){b.preventDefault()})]},destroy:function(){for(var b;b=this.events.pop();)b.remove();this.node=this.parent=null},onMouseOver:function(b){this.current=b},onMouseOut:function(){this.current=null},_changeState:function(b,g){var d="dojoDnd"+b,c=b.toLowerCase()+"State";r.replace(this.node,d+g,d+this[c]);this[c]=g},_addItemClass:function(b,g){r.add(b,"dojoDndItem"+
g)},_removeItemClass:function(b,g){r.remove(b,"dojoDndItem"+g)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(p,t,r,s,g,b,n,l){r("dijit-legacy-requires")&&g(0,function(){p(["dijit/ToolbarSeparator"])});return t("dijit.Toolbar",[b,l,n],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',
baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ProgressBar":function(){define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),function(p,t,r,s,g,b,n,l){return t("dijit.ProgressBar",[b,n],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:l,_indeterminateHighContrastImagePath:p.toUrl("./themes/a11y/indeterminate_progress.gif"),
postMixInProperties:function(){this.inherited(arguments);this.params&&"value"in this.params||(this.value=this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update()},_setDirAttr:function(b){r.toggle(this.domNode,"dijitProgressBarRtl","rtl"==b);this.inherited(arguments)},update:function(b){s.mixin(this,b||{});b=this.internalProgress;var c=this.domNode,
g=1;this.indeterminate?c.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(g=Math.min(parseFloat(this.progress)/100,1),this.progress=g*this.maximum):(this.progress=Math.min(this.progress,this.maximum),g=this.maximum?this.progress/this.maximum:0),c.setAttribute("aria-valuenow",this.progress));c.setAttribute("aria-labelledby",this.labelNode.id);c.setAttribute("aria-valuemin",0);c.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(g);r.toggle(this.domNode,
"dijitProgressBarIndeterminate",this.indeterminate);b.style.width=100*g+"%";this.onChange()},_setValueAttr:function(b){this._set("value",b);Infinity==b?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:b})},_setLabelAttr:function(b){this._set("label",b);this.update()},_setIndeterminateAttr:function(b){this._set("indeterminate",b);this.update()},report:function(b){return this.label?this.label:this.indeterminate?"&#160;":g.format(b,{type:"percent",places:this.places,locale:this.lang})},
onChange:function(){}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(p,t,r,s,g,b,n,l,d,c,k){l=p("dijit.form.TextBox"+(n("dojo-bidi")?"_NoBidi":""),[l,d],{templateString:c,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',
_buttonInputDisabled:n("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var b=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==b||"file"==b)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>n("ie")&&this.defer(function(){try{var b=r.getComputedStyle(this.domNode);if(b){var c=b.fontFamily;
if(c){var a=this.domNode.getElementsByTagName("INPUT");if(a)for(b=0;b<a.length;b++)a[b].style.fontFamily=c}}}catch(e){}})},_setPlaceHolderAttr:function(c){this._set("placeHolder",c);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=t.create("span",{onmousedown:function(b){b.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(b(this._phspan,"touchend, MSPointerUp",g.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(c));
this._updatePlaceHolder()},_onInput:function(b){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(b,c,a){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){s.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){s.deprecated(this.declaredClass+
"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",b)},_onBlur:function(b){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),n("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(b){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});n("ie")&&(l.prototype._isTextSelected=function(){var b=this.ownerDocument.selection.createRange();
return b.parentElement()==this.textbox&&0<b.text.length},k._setSelectionRange=d._setSelectionRange=function(b,c,a){b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveStart("character",-99999),b.moveStart("character",c),b.moveEnd("character",a-c),b.select())});n("dojo-bidi")&&(l=p("dijit.form.TextBox",l,{_setPlaceHolderAttr:function(b){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return l})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/has dojo/keys dojo/_base/lang dojo/on ../main".split(" "),
function(p,t,r,s,g,b,n,l){var d=t("dijit.form._TextBoxMixin"+(s("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(b,d,f){var g;void 0!==b&&(g=this.filter(b),"string"!=typeof f&&(f=null===g||"number"==typeof g&&isNaN(g)?"":this.filter(this.format(g,this.constraints))));null==f||"number"==typeof f&&isNaN(f)||this.textbox.value==
f||(this.textbox.value=f,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[g,d])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(b){null==b?b="":"string"!=typeof b&&(b=String(b));this.textbox.value=b;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(b){return null==b?"":b.toString?b.toString():b},parse:function(b){return b},
_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(b){this._processInput(b);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(b){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(n(this.textbox,"keydown, keypress, paste, cut, input, compositionend",b.hitch(this,
function(c){var d;if("keydown"==c.type){d=c.keyCode;switch(d){case g.SHIFT:case g.ALT:case g.CTRL:case g.META:case g.CAPS_LOCK:case g.NUM_LOCK:case g.SCROLL_LOCK:return}if(!c.ctrlKey&&!c.metaKey&&!c.altKey){switch(d){case g.NUMPAD_0:case g.NUMPAD_1:case g.NUMPAD_2:case g.NUMPAD_3:case g.NUMPAD_4:case g.NUMPAD_5:case g.NUMPAD_6:case g.NUMPAD_7:case g.NUMPAD_8:case g.NUMPAD_9:case g.NUMPAD_MULTIPLY:case g.NUMPAD_PLUS:case g.NUMPAD_ENTER:case g.NUMPAD_MINUS:case g.NUMPAD_PERIOD:case g.NUMPAD_DIVIDE:return}if(65<=
d&&90>=d||48<=d&&57>=d||d==g.SPACE)return;d=!1;for(var f in g)if(g[f]===c.keyCode){d=!0;break}if(!d)return}}(d=32<=c.charCode?String.fromCharCode(c.charCode):c.charCode)||(d=65<=c.keyCode&&90>=c.keyCode||48<=c.keyCode&&57>=c.keyCode||c.keyCode==g.SPACE?String.fromCharCode(c.keyCode):c.keyCode);d||(d=229);if("keypress"==c.type){if("string"!=typeof d)return;if("a"<=d&&"z">=d||"A"<=d&&"Z">=d||"0"<=d&&"9">=d||" "===d)if(c.ctrlKey||c.metaKey||c.altKey)return}if("input"==c.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var l={faux:!0},a;for(a in c)"layerX"!=a&&"layerY"!=a&&(f=c[a],"function"!=typeof f&&"undefined"!=typeof f&&(l[a]=f));b.mixin(l,{charOrCode:d,_wasConsumed:!1,preventDefault:function(){l._wasConsumed=!0;c.preventDefault()},stopPropagation:function(){c.stopPropagation()}});!1===this.onInput(l)&&(l.preventDefault(),l.stopPropagation());l._wasConsumed||(this.defer(function(){this._onInput(l)}),"keypress"==c.type&&c.stopPropagation())})))},_blankValue:"",filter:function(c){if(null===
c)return this._blankValue;if("string"!=typeof c)return c;this.trim&&(c=b.trim(c));this.uppercase&&(c=c.toUpperCase());this.lowercase&&(c=c.toLowerCase());this.propercase&&(c=c.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}));return c},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(b){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},
_onFocus:function(c){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==c&&(this._selectOnClickHandle=n.once(this.domNode,"mouseup, touchend",b.hitch(this,function(b){this._isTextSelected()||d.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});
s("dojo-bidi")&&(d=t("dijit.form._TextBoxMixin",d,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));d._setSelectionRange=l._setSelectionRange=function(b,d,f){b.setSelectionRange&&b.setSelectionRange(d,f)};d.selectInputText=l.selectInputText=function(b,g,f){b=r.byId(b);isNaN(g)&&(g=0);
isNaN(f)&&(f=b.value?b.value.length:0);try{b.focus(),d._setSelectionRange(b,g,f)}catch(l){}};return d})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(p,t,r){return p("dijit.form.DateTextBox",r,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:t,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){var v=s("dijit.Calendar",[f,q,a],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){n.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new v._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:d.hitch(this,
"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,"keydown",d.hitch(this,"_onKeyDown")),c(this.dateRowsNode,"mouseover",d.hitch(this,"_onDayMouseOver")),c(this.dateRowsNode,"mouseout",d.hitch(this,"_onDayMouseOut")),c(this.dateRowsNode,"mousedown",d.hitch(this,"_onDayMouseDown")),c(this.dateRowsNode,"mouseup",d.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);
b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){(a=b.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(b.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||a.relatedTarget&&
a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",b.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),b.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&!b.contains(a,"dijitCalendarDisabledDate")&&(b.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&b.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,c,e=this.currentFocus;switch(a.keyCode){case l.RIGHT_ARROW:b=1;case l.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case l.DOWN_ARROW:b=1;case l.UP_ARROW:c="week";break;case l.PAGE_DOWN:b=1;case l.PAGE_UP:c=a.ctrlKey||a.altKey?"year":"month";break;case l.END:e=this.dateModule.add(e,"month",1),c="day";case l.HOME:e=new this.dateClassObj(e);e.setDate(1);break;default:return!0}c&&(e=this.dateModule.add(e,c,b));this._setCurrentFocusAttr(e);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});v._MonthDropDownButton=s("dijit.Calendar._MonthDropDownButton",m,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new v._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==k("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});v._MonthDropDown=s("dijit.Calendar._MonthDropDown",[q,e],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(a){this.domNode.innerHTML=p.map(a,
function(a,b){return a?"<div class='dijitCalendarMonthLabel' month='"+b+"'>"+a+"</div>":""}).join("")},_onClick:function(a){this.onChange(g.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){b.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return v})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e){var m=t("dijit.CalendarLite",[q,a],{templateString:e,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',
value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,c){"string"==
typeof a&&(a=b.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(c||"undefined"==typeof c))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},
_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var b=a.getDay(),c=this.dateModule.getDaysInMonth(a),e=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),d=new this.dateClassObj,f=r.getFirstDayOfWeek(this.lang);f>b&&(f-=7);if(!this.summary){var g=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",g[a.getMonth()])}this._date2cell={};p.forEach(this.dateCells,function(g,m){var k=m+f,l=new this.dateClassObj(a),
n="dijitCalendar",q=0;k<b?(k=e-b+k+1,q=-1,n+="Previous"):k>=b+c?(k=k-b-c+1,q=1,n+="Next"):(k=k-b+1,n+="Current");q&&(l=this.dateModule.add(l,"month",q));l.setDate(k);this.dateModule.compare(l,d,"date")||(n="dijitCalendarCurrentDate "+n);this.isDisabledDate(l,this.lang)?(n="dijitCalendarDisabledDate "+n,g.setAttribute("aria-disabled","true")):(n="dijitCalendarEnabledDate "+n,g.removeAttribute("aria-disabled"),g.setAttribute("aria-selected","false"));(q=this.getClassForDate(l,this.lang))&&(n=q+" "+
n);g.className=n+"Month dijitCalendarDateTemplate";n=l.valueOf();this._date2cell[n]=g;g.dijitDateValue=n;this._setText(this.dateLabels[m],l.getDateLocalized?l.getDateLocalized(this.lang):l.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;p.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,
{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?d.getObject(a.datePackage,!1):s;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?d.getObject(a.datePackage+".locale",!1):g},_createMonthWidget:function(){return m._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,
b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=r.getFirstDayOfWeek(this.lang);this.dayCellsHtml=f.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=f.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);n.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",
a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=d.hitch(this,function(a,b,e){return c(this[a],"click",d.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,e))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,e=this._getNodeByDate(c);a=this._patchDate(a);
this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(c,a,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();e&&e!=c&&(k("webkit")?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&
!a.dijitDateValue;a=a.parentNode);a&&!l.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,c){l.toggle(c,"dijitCalendarSelectedDate",a);c.setAttribute("aria-selected",a?"true":"false")}p.forEach(this._selectedCells||[],d.partial(b,!1));this._selectedCells=p.filter(p.map(a,this._getNodeByDate,this),function(a){return a});p.forEach(this._selectedCells,
d.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});m._MonthWidget=t("dijit.CalendarLite._MonthWidget",q,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),c=6==k("ie")?"":"<div class='dijitSpacer'>"+p.map(b,function(a){return"<div>"+a+"</div>"}).join("")+"</div>";this.domNode.innerHTML=c+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});return m})},
"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(p,t,r,s,g,b,n,l){new Date("X");return s("dijit.form._DateTimeTextBox",[b,n],{templateString:l,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:t.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,
c){var g=this._isInvalidDate(b),f=this._isInvalidDate(c);return g?f?0:-1:f?1:p.compare(b,c,this._selector)},autoWidth:!0,format:function(b,c){return b?this.dateLocaleModule.format(b,c):""},parse:function(b,c){return this.dateLocaleModule.parse(b,c)||(this._isEmpty(b)?null:void 0)},serialize:function(b,c){b.toGregorian&&(b=b.toGregorian());return r.toISOString(b,c)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){this.dateModule=
b.datePackage?g.getObject(b.datePackage,!1):p;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?g.getObject(b.datePackage+".locale",!1):t;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(b){b.selector=
this._selector;b.fullYear=!0;var c=r.fromISOString;"string"==typeof b.min&&(b.min=c(b.min));"string"==typeof b.max&&(b.max=c(b.max));this.inherited(arguments)},_isInvalidDate:function(b){return!b||isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,c,g){void 0!==b&&("string"==typeof b&&(b=r.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments);this.value instanceof
Date&&(this.filterString="");this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,c){var g=this._get("value");"value"==b&&g instanceof Date&&0==this.compare(c,g)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this._set("dropDownDefaultValue",b)},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var c=g.isString(this.popupClass)?g.getObject(this.popupClass,!1):this.popupClass,k=this,f=this.get("value");
this.dropDown=new c({onChange:function(b){k.set("value",b,!0)},id:this.id+"_popup",dir:k.dir,lang:k.lang,value:f,textDir:k.textDir,currentFocus:this._isInvalidDate(f)?this.dropDownDefaultValue:f,constraints:k.constraints,filterString:k.filterString,datePackage:k.params.datePackage,isDisabledDate:function(b){return!k.rangeCheck(b,k.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,c){this._setValueAttr(this.parse(b,
this.constraints),c,b)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(p,t,r){return p("dijit.form.RangeBoundTextBox",r,{rangeMessage:"",rangeCheck:function(p,g){return("min"in g?0<=this.compare(p,g.min):!0)&&("max"in g?0>=this.compare(p,g.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var p=this.get("value");if(null==p)return!1;var g=!1;"min"in this.constraints&&
(g=this.constraints.min,g=0>this.compare(p,"number"==typeof g&&0<=g&&0!=p?0:g));!g&&"max"in this.constraints&&(g=this.constraints.max,g=0<this.compare(p,"number"!=typeof g||0<g?g:0));return g},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(p){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(p))},getErrorMessage:function(p){var g=this.get("value");return null==g||""===g||"number"==typeof g&&
isNaN(g)||this.isInRange(p)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=t.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(p,t,r,s){return p("dijit.form.MappedTextBox",s,{postMixInProperties:function(){this.inherited(arguments);
this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(g){return g.toString?g.toString():""},toString:function(){var g=this.filter(this.get("value"));return null!=g?"string"==typeof g?g:this.serialize(g,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=r.place("<input type='hidden'"+(this.name&&!t("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+
"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(p,t,r,s,g,b){var n;return n=p("dijit.form.ValidationTextBox",s,{templateString:b,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",
regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,d){d!=n.prototype[b]&&(t.deprecated("ValidationTextBox id="+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",d))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",b);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},
validator:function(b,d){return RegExp("^(?:"+this._computeRegexp(d)+")"+(this.required?"":"?")+"$").test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,d))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:
this.invalidMessage?this.invalidMessage:this.promptMessage,d="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:b;return this.required&&this._isEmpty(this.textbox.value)?d:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var d="",c=this.disabled||this.isValid(b);c&&(this._maskValidSubsetError=!0);var g=this._isEmpty(this.textbox.value),f=!c&&b&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||
b)&&g||f)&&(this._maskValidSubsetError||f&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",c?"false":"true");"Error"==this.state?(this._maskValidSubsetError=b&&f,d=this.getErrorMessage(b)):"Incomplete"==this.state?(d=this.getPromptMessage(b),this._maskValidSubsetError=!this._hasBeenBlurred||b):g&&(d=this.getPromptMessage(b));this.set("message",d);return c},displayMessage:function(b){b&&this.focused?g.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):
g.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(b){this.constraints={};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){!b.locale&&this.lang&&(b.locale=this.lang);this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b)},_computeRegexp:function(b){var d=this.pattern;"function"==
typeof d&&(d=d.call(this,b));if(d!=this._lastRegExp){var c="";this._lastRegExp=d;".*"!=d&&d.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=b;break;case ")":c+="|$)";break;default:c+="(?:"+b+"|$)"}});try{"".search(c)}catch(g){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return d},postMixInProperties:function(){this.inherited(arguments);
this.messages=r.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");
this.inherited(arguments)}})})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(p,t,r,s,g,b,n,l){return p("dijit.form.Form",[g,b,n,l],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){t.set(this.domNode,"encType",b);s("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(b){var c={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:b?b.target:this.domNode,target:b?b.target:this.domNode};!1!==this.onReset(c)&&c.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(b){this.reset(b);b.stopPropagation();b.preventDefault();return!1},_onSubmit:function(b){var c=this.constructor.prototype;if(this.execute!=c.execute||this.onExecute!=c.onExecute)r.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(b)&&(b.stopPropagation(),b.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(p,t,r,s,g){return p("dijit.form.FilteringSelect",[s,g],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},
_callbackSetLabel:function(b,g,l,d){g&&g[this.searchAttr]!==this._lastQuery||!g&&b.length&&this.store.getIdentity(b[0])!=this._lastQuery||(b.length?this.set("item",b[0],d):this.set("value","",d||void 0===d&&!this.focused,this.textbox.value,null))},_openResultList:function(b,g,l){g[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(b,
g,l,d){this._onChangeActive||(g=null);if(void 0===d){if(null===b||""===b)if(b="",!t.isString(l)){this._setDisplayedValueAttr(l||"",g);return}var c=this;this._lastQuery=b;r(this.store.get(b),function(b){c._callbackSetLabel(b?[b]:[],void 0,void 0,g)})}else this.valueNode.value=b,this.inherited(arguments)},_setItemAttr:function(b,g,l){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(b){return b.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(b,
g){null==b&&(b="");if(!this._created){if(!("displayedValue"in this.params))return;g=!1}if(this.store){this.closeDropDown();var l=t.clone(this.query),d=this._getDisplayQueryString(b),c;this.store._oldAPI?c=d:(c=this._patternToRegExp(d),c.toString=function(){return d});this._lastQuery=l[this.searchAttr]=c;this._lastDisplayedValue=this.textbox.value=b;this._set("displayedValue",b);var k=this,f={ignoreCase:this.ignoreCase,deep:!0};t.mixin(f,this.fetchProperties);this._fetchHandle=this.store.query(l,f);
r(this._fetchHandle,function(b){k._fetchHandle=null;k._callbackSetLabel(b||[],l,f,g)},function(b){k._fetchHandle=null;k._cancelingQuery||console.error("dijit.form.FilteringSelect: "+b.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(p,t,r,s,g,b,n,l,d){return p("dijit.form.ComboBoxMixin",[l,b],{dropDownClass:n,hasDownArrow:!0,templateString:d,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(b){this._set("hasDownArrow",b);this._buttonNode.style.display=b?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(b){b.get||s.mixin(b,{_oldAPI:!0,get:function(b){var c=new t;this.fetchItemByIdentity({identity:b,
onItem:function(b){c.resolve(b)},onError:function(b){c.reject(b)}});return c.promise},query:function(b,c){var d=new t(function(){a.abort&&a.abort()});d.total=new t;var a=this.fetch(s.mixin({query:b,onBegin:function(a){d.total.resolve(a)},onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},c));return g(d)}});this._set("store",b)},postMixInProperties:function(){var b=this.params.store||this.store;b&&this._setStoreAttr(b);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var d=
this.declaredClass;s.mixin(this.store,{getValue:function(b,c){r.deprecated(d+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return b[c]},getLabel:function(b){r.deprecated(d+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return b.name},fetch:function(b){r.deprecated(d+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],s.hitch(this,function(c){(new c({objectStore:this})).fetch(b)}))}})}}})})},
"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(p,t,r,s,g,b,n,l,d,c,k){t=t("dijit.form._AutoCompleterMixin",k,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(b){var c=0;if("number"==typeof b.selectionStart)c=b.selectionStart;else if(l("ie")){var a=
b.ownerDocument.selection.createRange().duplicate();b=b.createTextRange();a.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",a),c=String(b.text).replace(/\r/g,"").length}catch(e){}}return c},_setCaretPos:function(b,d){d=parseInt(d);c.selectInputText(b,d,d)},_setDisabledAttr:function(b){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",b?"true":"false")},_onKey:function(b){if(!(32<=b.charCode)){var c=b.charCode||b.keyCode;if(c!=s.ALT&&c!=s.CTRL&&c!=s.META&&c!=
s.SHIFT){var a=this.dropDown,e=null;this._abortQuery();this.inherited(arguments);if(!(b.altKey||b.ctrlKey||b.metaKey))switch(this._opened&&(e=a.getHighlightedOption()),c){case s.PAGE_DOWN:case s.DOWN_ARROW:case s.PAGE_UP:case s.UP_ARROW:this._opened&&this._announceOption(e);b.stopPropagation();b.preventDefault();break;case s.ENTER:if(e){if(e==a.nextButton){this._nextSearch(1);b.stopPropagation();b.preventDefault();break}else if(e==a.previousButton){this._nextSearch(-1);b.stopPropagation();b.preventDefault();
break}b.stopPropagation();b.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case s.TAB:c=this.get("displayedValue");if(a&&(c==a._messages.previousMessage||c==a._messages.nextMessage))break;e&&this._selectOption(e);case s.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(b){var d=this.focusNode;c.selectInputText(d,d.value.length);var a=this.ignoreCase?"toLowerCase":"substr";0==b[a](0).indexOf(this.focusNode.value[a](0))?
(a=this.autoComplete?this._getCaretPos(d):d.value.length,a+1>d.value.length&&(d.value=b,c.selectInputText(d,a))):(d.value=b,c.selectInputText(d))},_openResultList:function(b,c,a){var e=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();b.length||0!=a.start?(this._nextSearch=this.dropDown.onPage=g.hitch(this,function(a){b.nextPage(-1!==a);this.focus()}),this.dropDown.createOptions(b,a,g.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in a?(a.direction?this.dropDown.highlightFirstOption():
a.direction||this.dropDown.highlightLastOption(),e&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(c[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();
this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var b=this.get("displayedValue"),c=this.dropDown;!c||b!=c._messages.previousMessage&&b!=c._messages.nextMessage?"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",b)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},
_setItemAttr:function(b,c,a){var e="";b&&(a||(a=this.store._oldAPI?this.store.getValue(b,this.searchAttr):b[this.searchAttr]),e=this._getValueField()!=this.searchAttr?this.store.getIdentity(b):a);this.set("value",e,c,a,b)},_announceOption:function(b){if(b){var c;if(b==this.dropDown.nextButton||b==this.dropDown.previousButton)c=b.innerHTML,this.item=void 0,this.value="";else{var a=this.dropDown.items[b.getAttribute("item")];c=(this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]).toString();
this.set("item",a,!1,c)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",r.get(b,"id"));this._autoCompleteText(c)}},_selectOption:function(b){this.closeDropDown();b&&this._announceOption(b);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=
void 0;this.inherited(arguments)},_startSearch:function(b){if(!this.dropDown){var c=this.id+"_popup";this.dropDown=new (g.isString(this.dropDownClass)?g.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:g.hitch(this,this._selectOption),id:c,dir:this.dir,textDir:this.textDir})}this._lastInput=b;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!(this.store||(this.store=new d({},this.srcNodeRef),"value"in
this.params))){var b=this.item=this.store.fetchSelectedItem();if(b){var c=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(b,c):b[c]}}},postCreate:function(){var c=b('label[for="'+this.id+'"]');c.length&&(c[0].id||(c[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",c[0].id));this.inherited(arguments);p.after(this,"onSearch",g.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(b){b=this.labelFunc(b,this.store);var c=this.labelType;"none"!=this.highlightMatch&&
"text"==this.labelType&&this._lastInput&&(b=this.doHighlight(b,this._lastInput),c="html");return{html:"html"==c,label:b}},doHighlight:function(b,c){var a=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),e=this.queryExpr.indexOf("${0}");c=n.escapeString(c);return this._escapeHtml(b.replace(RegExp((0==e?"^":"")+"("+c+")"+(e==this.queryExpr.length-4?"$":""),a),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(b){return b=
String(b).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(b,c){return(c._oldAPI?c.getValue(b,this.labelAttr||this.searchAttr):b[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(b,c,a,e){this._set("item",e||null);null==b&&(b="");this.inherited(arguments)}});l("dojo-bidi")&&t.extend({_setTextDirAttr:function(b){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",
b)}});return t})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(p,t,r,s,g,b){function n(b){return{id:b.value,value:b.value,name:r.trim(b.innerText||b.textContent||"")}}return p("dijit.form.DataList",g,{constructor:function(g,d){this.domNode=t.byId(d);r.mixin(this,g);this.id&&b.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:s("option",this.domNode).map(n)}])},destroy:function(){b.remove(this.id)},
fetchSelectedItem:function(){var b=s("> option[selected]",this.domNode)[0]||s("> option",this.domNode)[0];return b&&n(b)}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(p,t,r){return p("dojo.store.Memory",null,{constructor:function(p){for(var g in p)this[g]=p[g];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:r,get:function(p){return this.data[this.index[p]]},getIdentity:function(p){return p[this.idProperty]},
put:function(p,g){var b=this.data,n=this.index,l=this.idProperty,l=p[l]=g&&"id"in g?g.id:l in p?p[l]:Math.random();if(l in n){if(g&&!1===g.overwrite)throw Error("Object already exists");b[n[l]]=p}else n[l]=b.push(p)-1;return l},add:function(p,g){(g=g||{}).overwrite=!1;return this.put(p,g)},remove:function(p){var g=this.index,b=this.data;if(p in g)return b.splice(g[p],1),this.setData(b),!0},query:function(p,g){return t(this.queryEngine(p,g)(this.data))},setData:function(p){p.items?(this.idProperty=
p.identifier,p=this.data=p.items):this.data=p;this.index={};for(var g=0,b=p.length;g<b;g++)this.index[p[g][this.idProperty]]=g}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(p){return function(t,r){function s(b){b=p.filter(b,t);var g=r&&r.sort;g&&b.sort("function"==typeof g?g:function(b,c){for(var k,f=0;k=g[f];f++){var l=b[k.attribute],a=c[k.attribute];if(l!=a)return!!k.descending==(null==l||l>a)?-1:1}return 0});if(r&&(r.start||r.count)){var l=b.length;
b=b.slice(r.start||0,(r.start||0)+(r.count||Infinity));b.total=l}return b}switch(typeof t){default:throw Error("Can not query with a "+typeof t);case "object":case "undefined":var g=t;t=function(b){for(var n in g){var l=g[n];if(l&&l.test){if(!l.test(b[n],b))return!1}else if(l!=b[n])return!1}return!0};break;case "string":if(!this[t])throw Error("No filter function "+t+" was found in store");t=this[t];case "function":}s.matches=t;return s}})},"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),
function(p,t,r,s,g,b,n){return p("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(b){return RegExp("^"+b.replace(/(\\.)|(\*)|(\?)|\W/g,function(b,c,g,f){return g?".*":f?".":c?c:"\\"+b})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());
this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(b){if(!this.disabled&&!this.readOnly){var d=b.charOrCode;if(!("type"in b&&"key"==b.type.substring(0,3)&&(b.altKey||(b.ctrlKey||b.metaKey)&&"x"!=d&&"v"!=d||d==t.SHIFT))){this._prev_key_backspace=b=!1;switch(d){case t.DELETE:case t.BACKSPACE:b=
this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:b="string"==typeof d||229==d}if(b)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(l){this._abortQuery();var d=this,c=r.clone(this.query),k={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},f=g.substitute(this.queryExpr,[l.replace(/([\\\*\?])/g,
"\\$1")]),n,a=function(){var e=d._fetchHandle=d.store.query(c,k);d.disabled||d.readOnly||n!==d._lastQuery||b(e,function(f){d._fetchHandle=null;d.disabled||d.readOnly||n!==d._lastQuery||b(e.total,function(b){f.total=b;var e=d.pageSize;if(isNaN(e)||e>f.total)e=f.total;f.nextPage=function(b){k.direction=b=!1!==b;k.count=e;b?(k.start+=f.length,k.start>=f.total&&(k.count=0)):(k.start-=e,0>k.start&&(k.count=Math.max(e+k.start,0),k.start=0));0>=k.count?(f.length=0,d.onSearch(f,c,k)):a()};d.onSearch(f,c,
k)})},function(a){d._fetchHandle=null;d._cancelingQuery||console.error(d.declaredClass+" "+a.toString())})};r.mixin(k,this.fetchProperties);this.store._oldAPI?n=f:(n=this._patternToRegExp(f),n.toString=function(){return f});this._lastQuery=c[this.searchAttr]=n;this._queryDeferHandle=this.defer(a,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var b=this.list;b&&(this.store=n.byId(b))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),
function(p,t,r,s,g,b,n,l){return p("dijit.form._ComboBoxMenu",[g,b,l,n],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);
this.isLeftToRight()||(t.add(this.previousButton,"dijitMenuItemRtl"),t.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){t.add(b,"dijitMenuItemHover")},onUnhover:function(b){t.remove(b,"dijitMenuItemHover")},onSelect:function(b){t.add(b,"dijitMenuItemSelected")},
onDeselect:function(b){t.remove(b,"dijitMenuItemSelected")},_page:function(b){var c=0,g=this.domNode.scrollTop,f=r.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();c<f;){var l=this.getHighlightedOption();if(b){if(!l.previousSibling||"none"==l.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!l.nextSibling||"none"==l.nextSibling.style.display)break;this.selectNextNode()}l=this.domNode.scrollTop;c+=(l-g)*(b?-1:1);g=l}},handleKey:function(b){switch(b.keyCode){case s.DOWN_ARROW:return this.selectNextNode(),
!1;case s.PAGE_DOWN:return this._page(!1),!1;case s.UP_ARROW:return this.selectPreviousNode(),!1;case s.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(p,t,r,s,g){var b=t("dijit.form._ComboBoxMenuMixin"+(s("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=
g.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(b){this._set("value",b);this.onChange(b)},onClick:function(b){if(b==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(b==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(b)},onChange:function(){},onPage:function(){},
onClose:function(){this._setSelectedAttr(null)},_createOption:function(b,g){var d=this._createMenuItem(),c=g(b);c.html?d.innerHTML=c.label:d.appendChild(d.ownerDocument.createTextNode(c.label));""==d.innerHTML&&(d.innerHTML="&#160;");return d},createOptions:function(b,g,d){this.items=b;this.previousButton.style.display=0==g.start?"none":"";r.set(this.previousButton,"id",this.id+"_prev");p.forEach(b,function(b,c){var g=this._createOption(b,d);g.setAttribute("item",c);r.set(g,"id",this.id+c);this.nextButton.parentNode.insertBefore(g,
this.nextButton)},this);var c=!1;b.total&&!b.total.then&&-1!=b.total?g.start+g.count<b.total?c=!0:g.start+g.count>b.total&&g.count==b.length&&(c=!0):g.count==b.length&&(c=!0);this.nextButton.style.display=c?"":"none";r.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var b=this.containerNode;2<b.childNodes.length;)b.removeChild(b.childNodes[b.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},
selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});s("dojo-bidi")&&(b=t("dijit.form._ComboBoxMenuMixin",b,{_createOption:function(){var b=this.inherited(arguments);this.applyTextDir(b);return b}}));return b})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare",
"dojo/on","dojo/touch","./_ListBase"],function(p,t,r,s){return p("dijit.form._ListMouseMixin",s,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this.own(t(this.domNode,"mousedown",function(g){g.preventDefault()}));this._listConnect("click","_onClick");this._listConnect(r.press,"_onMouseDown");this._listConnect(r.release,"_onMouseUp");this._listConnect(r.over,"_onMouseOver");this._listConnect(r.out,"_onMouseOut")},_onClick:function(g,b){this._setSelectedAttr(b);this._deferredClick&&
this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(b)})},_onMouseDown:function(g,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(b)},_onMouseUp:function(g,b){this._isDragging=!1;var n=this.selected,l=this._hoveredNode;n&&b==n?this.defer(function(){this._onClick(g,n)}):l&&this.defer(function(){this._onClick(g,l)})},_onMouseOut:function(g,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),
this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(g,b){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=b;this.onHover(b);this._isDragging&&this._setSelectedAttr(b)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(p,t,r){return p("dijit.form._ListBase",null,{selected:null,_listConnect:function(p,g){var b=this;return b.own(t(b.containerNode,
t.selector(function(b,g,d){return b.parentNode==d},p),function(n){n.preventDefault();b[g](n,this)}))},selectFirstNode:function(){for(var p=this.containerNode.firstChild;p&&"none"==p.style.display;)p=p.nextSibling;this._setSelectedAttr(p)},selectLastNode:function(){for(var p=this.containerNode.lastChild;p&&"none"==p.style.display;)p=p.previousSibling;this._setSelectedAttr(p)},selectNextNode:function(){var p=this.selected;if(p){for(p=p.nextSibling;p&&"none"==p.style.display;)p=p.nextSibling;p?this._setSelectedAttr(p):
this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var p=this.selected;if(p){for(p=p.previousSibling;p&&"none"==p.style.display;)p=p.previousSibling;p?this._setSelectedAttr(p):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(p){if(this.selected!=p){var g=this.selected;if(g)this.onDeselect(g);p&&(r.scrollIntoView(p),this.onSelect(p));this._set("selected",p)}else if(p)this.onSelect(p)}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare",
"dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(p,t,r,s){return p("dijit.form.Textarea",[s,r],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);t.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),
function(p,t,r,s,g,b,n){r.add("textarea-needs-help-shrinking",function(){var g=b.body(),d=t.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},g,"last"),c=d.scrollHeight>=d.clientHeight;g.removeChild(d);return c});return p("dijit.form._ExpandingTextAreaMixin",
null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var b=this.textbox;b.style.overflowY="hidden";this.own(g(b,"focus, resize",s.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(n.on("resize",s.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(b){this.inherited(arguments);this.resize()},_estimateHeight:function(){var b=this.textbox;b.rows=(b.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},
resize:function(){function b(){var a=!1;""===d.value&&(d.value=" ",a=!0);var c=d.scrollHeight;a&&(d.value="");return c}var d=this.textbox;"hidden"==d.style.overflowY&&(d.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(b()||d.offsetHeight){var c=b()+Math.max(d.offsetHeight-d.clientHeight,0),g=c+"px";g!=d.style.height&&(d.style.height=g,d.rows=1);if(r("textarea-needs-help-shrinking")){var f=b(),n=d.style.minHeight,a=4,e=d.scrollTop;d.style.minHeight=g;for(d.style.height="auto";0<c;){d.style.minHeight=
Math.max(c-a,4)+"px";g=b();f-=g;c-=f;if(f<a)break;f=g;a<<=1}d.style.height=c+"px";d.style.minHeight=n;d.scrollTop=e}d.style.overflowY=b()>d.clientHeight?"auto":"hidden";"hidden"==d.style.overflowY&&(d.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(p,t,r,s){return p("dijit.form.SimpleTextarea",s,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);r("ie")&&this.cols&&t.add(this.textbox,"dijitTextAreaCols")},filter:function(g){g&&(g=g.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(g){if(this.maxLength){var b=parseInt(this.maxLength),n=this.textbox.value.replace(/\r/g,""),b=n.length-b;if(0<b){var l=this.textbox;if(l.selectionStart){var d=l.selectionStart,
c=0;r("opera")&&(c=(this.textbox.value.substring(0,d).match(/\r/g)||[]).length);this.textbox.value=n.substring(0,d-b-c)+n.substring(d-c);l.setSelectionRange(d-b,d-b)}else this.ownerDocument.selection&&(l.focus(),n=this.ownerDocument.selection.createRange(),n.moveStart("character",-b),n.text="",n.select())}}this.inherited(arguments)}})})},"dijit/form/NumberTextBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(p,t,r,s){var g=p("dijit.form.NumberTextBoxMixin",
null,{pattern:function(b){return"("+(this.focused&&this.editOptions?this._regExpGenerator(t.delegate(b,this.editOptions))+"|":"")+this._regExpGenerator(b)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:r.format,_regExpGenerator:r.regexp,postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(b){var g="number"==typeof b.places?b.places:0;g&&g++;"number"!=typeof b.max&&(b.max=9*Math.pow(10,15-g));"number"!=typeof b.min&&(b.min=-9*Math.pow(10,
15-g));this.inherited(arguments,[b]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(!this.disabled){var b=this.get("value");"number"!=typeof b||isNaN(b)||(b=this.format(b,this.constraints),void 0!==b&&(this.textbox.value=b));this.inherited(arguments)}},format:function(b,g){var l=String(b);if("number"!=typeof b)return l;if(isNaN(b))return"";if(!("rangeCheck"in this&&this.rangeCheck(b,g))&&!1!==g.exponent&&/\de[-+]?\d/i.test(l))return l;
this.editOptions&&this.focused&&(g=t.mixin({},g,this.editOptions));return this._formatter(b,g)},_parser:r.parse,parse:function(b,g){var l=this._parser(b,t.mixin({},g,this.editOptions&&this.focused?this.editOptions:{}));this.editOptions&&this.focused&&isNaN(l)&&(l=this._parser(b,g));return l},_getDisplayedValueAttr:function(){var b=this.inherited(arguments);return isNaN(b)?this.textbox.value:b},filter:function(b){return null==b||""===b?NaN:this.inherited(arguments)},serialize:function(b,g){return"number"!=
typeof b||isNaN(b)?"":this.inherited(arguments)},_setBlurValue:function(){var b=t.hitch(t.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(b,!0)},_setValueAttr:function(b,g,l){if(void 0!==b&&void 0===l)if(l=String(b),"number"==typeof b)if(isNaN(b))l="";else{if("rangeCheck"in this&&this.rangeCheck(b,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(l))l=void 0}else b?b=void 0:(l="",b=NaN);this.inherited(arguments,[b,g,l])},_getValueAttr:function(){var b=this.inherited(arguments);
if(isNaN(b)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+r._realNumberRegexp(t.delegate(this.constraints))+"$").test(this.textbox.value))return b=Number(this.textbox.value),isNaN(b)?void 0:b}else return b},isValid:function(b){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var g=this.get("value");return!isNaN(g)&&this.rangeCheck(g,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?
!0:this.inherited(arguments):!1}});p=p("dijit.form.NumberTextBox",[s,g],{baseClass:"dijitTextBox dijitNumberTextBox"});p.Mixin=g;return p})},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(p,t,r){return p("dijit.form.ComboBox",[t,r],{})})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(p,t,r,s,g){return p("dijit.form.TimeTextBox",g,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",
popupClass:s,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(b){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),b.keyCode){case t.ENTER:case t.TAB:case t.ESCAPE:case t.DOWN_ARROW:case t.UP_ARROW:break;default:this.defer(function(){var b=this.get("displayedValue");this.filterString=b&&!this.parse(b,this.constraints)?b.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()})}}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){return g("dijit._TimePicker",[e,m],{baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:s.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){l.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");
this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,e){a=[];for(b=0;b<this._maxIncrement;b++)(c=this._createOption(b))&&a.push(c);return a},_showText:function(){var a=s.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);var b=
function(a){return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds()},c=b(this._clickableIncrementDate),b=b(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=a("T00:00:00");this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=b/c;this._maxIncrement=86400/c;a=this._getFilteredNodes();p.forEach(a,function(a){this.domNode.appendChild(a)},this);!a.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints=
{}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in a)this._set(b,a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var c=new Date(this._refDate),e=this._clickableIncrementDate;c.setTime(c.getTime()+e.getHours()*a*36E5+e.getMinutes()*a*6E4+e.getSeconds()*a*1E3);"time"==this.constraints.selector&&c.setFullYear(1970,0,1);e=r.format(c,this.constraints);if(this.filterString&&0!==e.toLowerCase().indexOf(this.filterString))return null;
var d=this.ownerDocument.createElement("div");d.className=this.baseClass+"Item";d.date=c;d.idx=a;n.create("div",{"class":this.baseClass+"ItemInner",innerHTML:e},d);1>a%this._visibleIncrement&&-1<a%this._visibleIncrement?b.add(d,this.baseClass+"Marker"):a%this._clickableIncrement||b.add(d,this.baseClass+"Tick");this.isDisabledDate(c)&&b.add(d,this.baseClass+"ItemDisabled");this.value&&!t.compare(this.value,c,this.constraints.selector)&&(d.selected=!0,b.add(d,this.baseClass+"ItemSelected"),this._selectedDiv=
d,b.contains(d,this.baseClass+"Marker")?b.add(d,this.baseClass+"MarkerSelected"):b.add(d,this.baseClass+"TickSelected"),this._highlightOption(d,!0));return d},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(a){(a=a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a)&&(this._highlighted_option=null,this.set("value",a),this.onChange(a))},onChange:function(){},_highlightOption:function(a,c){if(a){if(c)this._highlighted_option&&
this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}b.toggle(a,this.baseClass+"ItemHover",c);b.contains(a,this.baseClass+"Marker")?b.toggle(a,this.baseClass+"MarkerHover",c):b.toggle(a,this.baseClass+"TickHover",c)}},handleKey:function(a){if(a.keyCode==d.DOWN_ARROW)return this.selectNextNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==d.UP_ARROW)return this.selectPreviousNode(),a.stopPropagation(),
a.preventDefault(),!1;if(a.keyCode==d.ENTER||a.keyCode===d.TAB){if(!this._keyboardSelected&&a.keyCode===d.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});return a.keyCode===d.TAB}},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,!1)},onClick:function(a){this._onOptionSelected({target:a})}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x){function z(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(n.hitch(this,a,b))}}var A=t("dijit.form._SelectMenu",f,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(l(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;n.isArray(b)&&
(b=b[b.length-1]);b&&p.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)}});g=t("dijit.form.Select"+(d("dojo-bidi")?"_NoBidi":""),[c,k,m],{baseClass:"dijitSelect dijitValidationTextBox",templateString:x,_buttonInputDisabled:d("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&
!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=a?a:0].value)}this.dropDown=new A({id:this.id+"_menu",parentWidget:this});s.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(b){if(b.value||b.label){var c=n.hitch(this,"_setValueAttr",b);b=new q({option:b,label:b.label||this.emptyLabel,onClick:c,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:b.disabled||!1});b.focusNode.setAttribute("role",
"option");return b}return new a({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();
return a.length?a[a.length-1]:null},childSelector:function(a){return(a=v.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,e){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{p.forEach(this._getChildren(),function(a){a.destroyRecursive()});var b=new q({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(b)}else this._updateSelection();
this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);r.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",
a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+a+"</span>"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":
"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?e.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):e.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);e.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=b.getLocalization("dijit.form","validate",this.lang).missingMessage},
postCreate:function(){this.inherited(arguments);this.own(l(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");9>d("ie")&&this.defer(function(){try{var a=domStyle.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(e){}})},_setStyleAttr:function(a){this.inherited(arguments);s.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,
"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0);this.inherited(arguments)},_onBlur:function(){e.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});d("dojo-bidi")&&(g=t("dijit.form.Select",g,{_setDisplay:function(a){this.inherited(arguments);
this.applyTextDir(this.containerNode)}}));g._Menu=A;g.prototype._onContainerKeydown=z("_onContainerKeydown");g.prototype._onContainerKeypress=z("_onContainerKeypress");return g})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(p,t,r,s,g,b){return p("dijit.MenuSeparator",[r,s,g],{templateString:b,buildRendering:function(){this.inherited(arguments);t.setSelectable(this.domNode,
!1)},isFocusable:function(){return!1}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(p,t,r,s){return p("dijit.form.NumberSpinner",[r,s.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(g,b){var n=this.constraints,l=isNaN(g),d=!isNaN(n.max),c=!isNaN(n.min);l&&0!=b&&(g=0<b?c?n.min:d?n.max:0:d?this.constraints.max:c?n.min:0);var k=g+b;if(l||isNaN(k))return g;d&&k>n.max&&(k=n.max);c&&k<n.min&&
(k=n.min);return k},_onKeyDown:function(g){if(!(this.disabled||this.readOnly||g.keyCode!=t.HOME&&g.keyCode!=t.END||g.ctrlKey||g.altKey||g.metaKey||"undefined"==typeof this.get("value"))){var b=this.constraints[g.keyCode==t.HOME?"min":"max"];"number"==typeof b&&this._setValueAttr(b,!1);g.stopPropagation();g.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),
function(p,t,r,s,g,b,n,l,d,c){return p("dijit.form._Spinner",l,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:d,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(b){return b},_arrowPressed:function(b,d,g){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),d*g),!1),c.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=
null},_typematicCallback:function(b,c,d){var a=this.smallDelta;c==this.textbox&&(c=d.keyCode,a=c==t.PAGE_UP||c==t.PAGE_DOWN?this.largeDelta:this.smallDelta,c=c==t.UP_ARROW||c==t.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==b?this._arrowReleased(c):this._arrowPressed(c,c==this.upArrowNode?1:-1,a)},_wheelTimer:null,_mouseWheeled:function(b){b.stopPropagation();b.preventDefault();var c=b.wheelDelta/120;Math.floor(c)!=c&&(c=0<b.wheelDelta?1:-1);b=b.detail?-1*b.detail:c;if(0!==b){var d=this[0<b?"upArrowNode":
"downArrowNode"];this._arrowPressed(d,b,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(d)},50)}},_setConstraintsAttr:function(b){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},
_setValueAttr:function(b,c){this.focusNode.setAttribute("aria-valuenow",b);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(b(this.domNode,g.wheel,r.hitch(this,"_mouseWheeled")),n.addListener(this.upArrowNode,this.textbox,{keyCode:t.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),n.addListener(this.downArrowNode,this.textbox,{keyCode:t.DOWN_ARROW,ctrlKey:!1,altKey:!1,
shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),n.addListener(this.upArrowNode,this.textbox,{keyCode:t.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),n.addListener(this.downArrowNode,this.textbox,{keyCode:t.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},
"dijit/form/HorizontalSlider":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x,z,A,y){var C=t("dijit.form._SliderMover",k,{onMouseMove:function(a){var b=
this.widget,c=b._abspos;c||(c=b._abspos=g.position(b.sliderBarContainer,!0),b._setPixelValue_=l.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(a){k.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}});r=t("dijit.form.HorizontalSlider",[z,A],{templateString:y,value:0,showButtons:!0,minimum:0,maximum:100,
discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:e.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(a){this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey||this._setValueAttr(this.value,
!0)},_onKeyDown:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey)){switch(a.keyCode){case n.HOME:this._setValueAttr(this.minimum,!1);break;case n.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?n.RIGHT_ARROW:n.LEFT_ARROW:case !1===this._descending?n.DOWN_ARROW:n.UP_ARROW:case !1===this._descending?n.PAGE_DOWN:n.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?n.LEFT_ARROW:n.RIGHT_ARROW:case !1===this._descending?
n.UP_ARROW:n.DOWN_ARROW:case !1===this._descending?n.PAGE_UP:n.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){this.disabled||this.readOnly||(d("ie")||m.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&this.clickSelect){m.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=g.position(this.sliderBarContainer,
!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var e=this.discreteValues;if(1>=e||Infinity==e)e=b;e--;a=Math.round(a/(b/e));this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*a/e+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=
a;this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments);var c=(a-this.minimum)/(this.maximum-this.minimum),e=!1===this._descending?this.remainingBar:this.progressBar,d=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(b&&0<this.slideDuration&&e.style[this._progressPixelSize]){var f=this,g={},m=parseFloat(e.style[this._progressPixelSize]),k=this.slideDuration*(c-m/100);0!=k&&(0>
k&&(k=0-k),g[this._progressPixelSize]={start:m,end:100*c,units:"%"},this._inProgressAnim=s.animateProperty({node:e,duration:k,onAnimate:function(a){d.style[f._progressPixelSize]=100-parseFloat(a[f._progressPixelSize])+"%"},onEnd:function(){delete f._inProgressAnim},properties:g}),this._inProgressAnim.play())}else e.style[this._progressPixelSize]=100*c+"%",d.style[this._progressPixelSize]=100*(1-c)+"%"},_bumpValue:function(a,c){if(!this.disabled&&!this.readOnly){var e=b.getComputedStyle(this.sliderBarContainer),
d=g.getContentBox(this.sliderBarContainer,e),e=this.discreteValues;if(1>=e||Infinity==e)e=d[this._pixelCount];e--;d=(this.value-this.minimum)*e/(this.maximum-this.minimum)+a;0>d&&(d=0);d>e&&(d=e);d=d*(this.maximum-this.minimum)/e+this.minimum;this._setValueAttr(d,c)}},_onClkBumper:function(a){this.disabled||this.readOnly||!this.clickSelect||this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===
this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==n.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==n.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){a.stopPropagation();a.preventDefault();this._bumpValue(0>a.wheelDelta?-1:1,!0)},startup:function(){this._started||(p.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},
_typematicCallback:function(a,b,c){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var a=f('label[for="'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",a[0].id));this.focusNode.setAttribute("aria-valuemin",
this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(v.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),v.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(a(this.domNode,q.wheel,l.hitch(this,"_mouseWheeled")));var b=t(C,{widget:this});this._movable=new c(this.sliderHandle,{mover:b});this._layoutHackIE7()},destroy:function(){this._movable.destroy();
this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});r._Mover=C;return r})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(p,t,r,s,g,b){s=p("dojo.dnd.move.constrainedMoveable",b,{constraints:function(){},within:!1,constructor:function(b,g){g||(g={});this.constraints=g.constraints;this.within=g.within},onFirstMove:function(b){var g=this.constraintBox=
this.constraints.call(this,b);g.r=g.l+g.w;g.b=g.t+g.h;this.within&&(b=t.getMarginSize(b.node),g.r-=b.w,g.b-=b.h)},onMove:function(b,g){var d=this.constraintBox,c=b.node.style;this.onMoving(b,g);g.l=g.l<d.l?d.l:d.r<g.l?d.r:g.l;g.t=g.t<d.t?d.t:d.b<g.t?d.b:g.t;c.left=g.l+"px";c.top=g.t+"px";this.onMoved(b,g)}});g=p("dojo.dnd.move.boxConstrainedMoveable",s,{box:{},constructor:function(b,g){var d=g&&g.box;this.constraints=function(){return d}}});p=p("dojo.dnd.move.parentConstrainedMoveable",s,{area:"content",
constructor:function(b,g){var d=g&&g.area;this.constraints=function(){var b=this.node.parentNode,g=r.getComputedStyle(b),f=t.getMarginBox(b,g);if("margin"==d)return f;var l=t.getMarginExtents(b,g);f.l+=l.l;f.t+=l.t;f.w-=l.w;f.h-=l.h;if("border"==d)return f;l=t.getBorderExtents(b,g);f.l+=l.l;f.t+=l.t;f.w-=l.w;f.h-=l.h;if("padding"==d)return f;l=t.getPadExtents(b,g);f.l+=l.l;f.t+=l.t;f.w-=l.w;f.h-=l.h;return f}}});return{constrainedMoveable:s,boxConstrainedMoveable:g,parentConstrainedMoveable:p}})},
"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(p,t,r,s,g){return t("dijit.layout.TabContainer",r,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(b){var g=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?p.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,
dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":g,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},b)},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?s:g)}})})},"dijit/layout/_TabContainerBase":function(){define("dojo/text!./templates/TabContainer.html ./StackContainer ./utils ../_TemplatedMixin dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),
function(p,t,r,s,g,b,n,l){return g("dijit.layout._TabContainerBase",[t,s],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:p,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&l.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||
b.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(b.add(this.domNode,"dijitTabContainerNested"),b.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),b.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),b.add(this.containerNode,"dijitTabPaneWrapperNested")):b.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(d){b.add(d.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},
layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var b=this.selectedChildWidget;if(this.doLayout){var c=this.tabPosition.replace(/-h/,"");this.tablist.region=c;c=[this.tablist,{domNode:this.tablistSpacer,region:c},{domNode:this.containerNode,region:"center"}];r.layoutChildren(this.domNode,this._contentBox,c);this._containerContentBox=r.marginBox2contentBox(this.containerNode,c[2]);b&&b.resize&&b.resize(this._containerContentBox)}else{if(this.tablist.resize){c=this.tablist.domNode.style;
c.width="0";var g=n.getContentBox(this.domNode).w;c.width="";this.tablist.resize({w:g})}b&&b.resize&&b.resize()}}},destroy:function(b){this.tablist&&this.tablist.destroy(b);this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget dojo/i18n!../nls/common".split(" "),function(p,t,r,s,g,b,
n,l,d,c,k,f,q,a){b("dijit-legacy-requires")&&d(0,function(){require(["dijit/layout/StackController"])});r=r("dijit.layout.StackContainer",a,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);s.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(l(this.domNode,"keydown",n.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();p.forEach(a,this._setupChild,this);
this.persist?this.selectedChildWidget=f.byId(t(this.id+"_selectedChild")):p.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},this);var b=this.selectedChildWidget;!b&&a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);c.publish(this.id+"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=
a.domNode,c=g.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",a.domNode,"replace"),d=a["aria-label"]||a.title||a.label;d&&c.setAttribute("aria-label",d);g.place(b,c);a._wrapper=c;this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.title=""},addChild:function(a,b){this.inherited(arguments);this._started&&(c.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){var b=
p.indexOf(this.getChildren(),a);this.inherited(arguments);g.destroy(a._wrapper);delete a._wrapper;this._started&&c.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var d=this.getChildren();d.length&&this.selectChild(d[Math.max(b-1,0)])}this._started&&this.layout()}},selectChild:function(a,b){var d;a=f.byId(a);this.selectedChildWidget!=a&&(d=this._transition(a,this.selectedChildWidget,b),this._set("selectedChildWidget",
a),c.publish(this.id+"-selectChild",a),this.persist&&t(this.id+"_selectedChild",this.selectedChildWidget.id));return k(d||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=p.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),
!0)},_onKeyDown:function(a){c.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&s.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&
s.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;p.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});r.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};n.extend(q,
r.ChildWidgetProperties);return r})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(p,t,r,s,g,b,n,l,d){return b("dijit.layout._LayoutWidget",[t,r,s],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);n.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);
var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),this.own(g.on("resize",p.hitch(this,"resize"))))}},resize:function(b,g){var f=this.domNode;b&&l.setMarginBox(f,b);var n=g||{};p.mixin(n,b||{});"h"in n&&"w"in n||(n=p.mixin(l.getMarginBox(f),n));var a=d.getComputedStyle(f),e=l.getMarginExtents(f,a),m=l.getBorderExtents(f,a),n=this._borderBox={w:n.w-(e.w+m.w),h:n.h-(e.h+m.h)},e=l.getPadExtents(f,a);this._contentBox={l:d.toPixelValue(f,a.paddingLeft),t:d.toPixelValue(f,a.paddingTop),
w:n.w-e.w,h:n.h-e.h};this.layout()},layout:function(){},_setupChild:function(b){n.add(b.domNode,this.baseClass+"-child "+(b.baseClass?this.baseClass+"-"+b.baseClass:""))},addChild:function(b,d){this.inherited(arguments);this._started&&this._setupChild(b)},removeChild:function(b){n.remove(b.domNode,this.baseClass+"-child"+(b.baseClass?" "+this.baseClass+"-"+b.baseClass:""));this.inherited(arguments)}})})},"dijit/layout/TabController":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f){f=p("dijit.layout._TabButton"+(g("dojo-bidi")?"_NoBidi":""),l.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:f,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);t.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var b=this.domNode;this.defer(function(){b.className=b.className},1)},_setCloseButtonAttr:function(c){this._set("closeButton",c);
s.toggle(this.domNode,"dijitClosable",c);this.closeNode.style.display=c?"":"none";c&&(c=b.getLocalization("dijit","common"),this.closeNode&&r.set(this.closeNode,"title",c.itemClose))},_setDisabledAttr:function(c){this.inherited(arguments);if(this.closeNode)if(c)r.remove(this.closeNode,"title");else{var a=b.getLocalization("dijit","common");r.set(this.closeNode,"title",a.itemClose)}},_setLabelAttr:function(b){this.inherited(arguments);this.showLabel||this.params.title||(this.iconNode.alt=n.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}});g("dojo-bidi")&&(f=p("dijit.layout._TabButton",f,{_setLabelAttr:function(b){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}}));p=p("dijit.layout.TabController",l,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:f,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var f=new c({id:this.id+
"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return s.contains(a,"dijitClosable")&&!s.contains(a,"dijitTabDisabled")}});this.own(f);var a=b.getLocalization("dijit","common"),e=this;f.addChild(new k({label:a.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){a=d.byNode(this.getParent().currentTarget);e.onCloseButtonClick(a.page)}}))}});p.TabButton=
f;return p})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch dojo/i18n!../nls/common".split(" "),function(p,t,r,s,g,b,n,l,d,c,k,f,q,a){s=t("dijit.layout._StackButton",a,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments);(this.focusNode||
this.domNode).setAttribute("role","tab")}});t=t("dijit.layout.StackController",[k,f,q],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:s,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return c.byId(this.id+"_"+a)},postCreate:function(){this.inherited(arguments);this.own(l.subscribe(this.containerId+"-startup",b.hitch(this,"onStartup")),l.subscribe(this.containerId+"-addChild",b.hitch(this,
"onAddChild")),l.subscribe(this.containerId+"-removeChild",b.hitch(this,"onRemoveChild")),l.subscribe(this.containerId+"-selectChild",b.hitch(this,"onSelectChild")),l.subscribe(this.containerId+"-containerKeyDown",b.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(n(this.containerNode,"click",b.hitch(this,function(a){var b=c.getEnclosingWidget(a.target);if(b!=this.containerNode&&!b.disabled&&b.page)for(a=a.target;a!==this.containerNode;a=a.parentNode)if(r.contains(a,this.buttonWidgetCloseClass)){this.onCloseButtonClick(b.page);
break}else if(a==b.domNode){this.onButtonClick(b.page);break}})))},onStartup:function(a){this.textDir=a.textDir;p.forEach(a.children,this.onAddChild,this);if(a.selected)this.onSelectChild(a.selected);var d=c.byId(this.containerId).containerNode,f=b.hitch(this,"pane2button");a={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var g=function(a,b){return n(d,"attrmodified-"+a,function(a){var c=f(a.detail&&a.detail.widget&&
a.detail.widget.id);c&&c.set(b,a.detail.newValue)})},k;for(k in a)this.own(g(k,a[k]))},destroy:function(a){this.destroyDescendants(a);this.inherited(arguments)},onAddChild:function(a,c){var d=new (b.isString(this.buttonWidget)?b.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,
title:a.tooltip,page:a});this.addChild(d,c);a.controlButton=d;if(!this._currentChild)this.onSelectChild(a);d=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+d.id:d.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",d)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy());delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=
this.pane2button(this._currentChild.id);b.set("checked",!1);b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button(a.id);b.set("checked",!0);this._currentChild=a;b.focusNode.setAttribute("tabIndex","0");c.byId(this.containerId)}},onButtonClick:function(a){var b=this.pane2button(a.id);d.focus(b.focusNode);this._currentChild&&this._currentChild.id===a.id&&b.set("checked",!0);c.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){c.byId(this.containerId).closeChild(a);this._currentChild&&
(a=this.pane2button(this._currentChild.id))&&d.focus(a.focusNode||a.domNode)},adjacent:function(a){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(a=!a);var b=this.getChildren(),c=p.indexOf(b,this.pane2button(this._currentChild.id)),d=b[c],f;do c=(c+(a?1:b.length-1))%b.length,f=b[c];while(f.disabled&&f!=d);return f},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var c=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case g.LEFT_ARROW:case g.UP_ARROW:a._djpage||
(c=!1);break;case g.PAGE_UP:a.ctrlKey&&(c=!1);break;case g.RIGHT_ARROW:case g.DOWN_ARROW:a._djpage||(c=!0);break;case g.PAGE_DOWN:a.ctrlKey&&(c=!0);break;case g.HOME:for(var d=this.getChildren(),f=0;f<d.length;f++){var k=d[f];if(!k.disabled){this.onButtonClick(k.page);break}}a.stopPropagation();a.preventDefault();break;case g.END:d=this.getChildren();for(f=d.length-1;0<=f;f--)if(k=d[f],!k.disabled){this.onButtonClick(k.page);break}a.stopPropagation();a.preventDefault();break;case g.DELETE:case 87:if(this._currentChild.closable&&
(a.keyCode==g.DELETE||a.ctrlKey))this.onCloseButtonClick(this._currentChild);a.stopPropagation();a.preventDefault();break;case g.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==c&&(this.onButtonClick(this.adjacent(c).page),a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page;this.onkeydown(a.e)}});t.StackButton=s;return t})},"dijit/layout/ScrollingTabController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x,z,A){f=t("dijit.layout.ScrollingTabController",[a,m],{baseClass:"dijitTabController dijitScrollingTabController",templateString:f,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+
this.tabPosition.substr(1).replace(/-.*/,"")+"None",r.add(a,"tabStrip-disabled"));r.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);g.set(this.domNode,"visibility","");this._postStartup=!0;this.own(l(this.containerNode,"attrmodified-label, attrmodified-iconclass",n.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments);g.set(this.containerNode,"width",g.get(this.containerNode,"width")+200+"px")},
onRemoveChild:function(a,b){var c=this.pane2button(a.id);this._selectedTab===c.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=d("> .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode))return this._btnWidth+=s.getMarginSize(a).w,!0;g.set(a,"display","none");return!1},this)},_getTabsWidth:function(){var a=this.getChildren();
if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+a.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||g.get(this.scrollNode,"width");return 0<b&&a<b},resize:function(a){this._dim=a;this.scrollNode.style.height="auto";var b=this._contentBox=e.marginBox2contentBox(this.domNode,{h:0,w:a.w});b.h=this.scrollNode.offsetHeight;s.setContentSize(this.domNode,b);b=this._enableBtn(this._contentBox.w);
this._buttons.style("display",b?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";e.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());
this._postResize=!0;return{h:this._contentBox.h,w:a.w}},_getScroll:function(){return this.isLeftToRight()||8>c("ie")||c("ie")&&c("quirks")||c("webkit")?this.scrollNode.scrollLeft:g.get(this.containerNode,"width")-g.get(this.scrollNode,"width")+(8<=c("ie")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||8>c("ie")||c("ie")&&c("quirks")||c("webkit"))return a;var b=g.get(this.containerNode,"width")-g.get(this.scrollNode,"width");return(8<=c("ie")?-1:1)*(a-b)},
onSelectChild:function(a){var b=this.pane2button(a.id);if(b){b=b.domNode;if(b!=this._selectedTab&&(this._selectedTab=b,this._postResize)){var c=this._getScroll();(c>b.offsetLeft||c+g.get(this.scrollNode,"width")<b.offsetLeft+g.get(b,"width"))&&this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=g.get(this.scrollNode,"width"),c=g.get(this.containerNode,"width")-b,e=this._getTabsWidth();if(a.length&&e>b)return{min:this.isLeftToRight()?
0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:c};a=this.isLeftToRight()?0:c;return{min:a,max:a}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=g.get(this.scrollNode,"width"),c=this._getScrollBounds(),a=a.offsetLeft+g.get(a,"width")/2-b/2;return a=Math.min(Math.max(a,c.min),c.max)},createSmoothScroll:function(a){if(0<arguments.length){var c=this._getScrollBounds();a=Math.min(Math.max(a,c.min),c.max)}else a=
this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var e=this,d=this.scrollNode,f=new b.Animation({beforeBegin:function(){this.curve&&delete this.curve;var c=d.scrollLeft,g=e._convertToScrollLeft(a);f.curve=new b._Line(c,g)},onAnimate:function(a){d.scrollLeft=a}});this._anim=f;this._setButtonClass(a);return f},_getBtnNode:function(a){for(a=a.target;a&&!r.contains(a,"tabStripButton");)a=a.parentNode;return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},
doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!r.contains(b,"dijitTabDisabled")){var c=0.75*g.get(this.scrollNode,"width")*a,c=this._getScroll()+c;this._setButtonClass(c);this.createSmoothScroll(c).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});q=t("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:q,
tabIndex:"",isFocusable:function(){return!1}});t("dijit.layout._ScrollingTabControllerButton",[z,q]);t("dijit.layout._ScrollingTabControllerMenuButton",[z,A,q],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new v({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var b=k.byId(this.containerId);p.forEach(b.getChildren(),function(a){var c=new x({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,
disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||b.textDir,onClick:function(){b.selectChild(a)}});this.dropDown.addChild(c)},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return f})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m){var v=r("dijit.layout._Splitter",[q,a],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?
1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);s.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=t(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",c=b.getMarginBox(this.child.domNode)[a],e=p.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=b.getContentBox(e.domNode)[a]-
10;return Math.min(this.child.maxSize,c+a)},_startDrag:function(a){this.cover||(this.cover=g.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after"));s.add(this.cover,"dijitSplitterCoverActive");this.fake&&g.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),s.add(this.domNode,"dijitSplitterShadow"),g.place(this.fake,this.domNode,"after"));s.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
this.fake&&s.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var e=this._factor,f=this.horizontal,m=f?"pageY":"pageX",l=a[m],p=this.domNode.style,f=f?"h":"w",q=n.getComputedStyle(this.child.domNode),r=b.getMarginBox(this.child.domNode,q)[f],t=this._computeMaxSize(),v=Math.max(this.child.minSize,b.getPadBorderExtents(this.child.domNode,q)[f]+10),f=this.region,x="top"==f||"bottom"==f?"top":"left",K=parseInt(p[x],10),G=this._resize,u=d.hitch(this.container,"_layoutChildren",
this.child.id),f=this.ownerDocument;this._handlers=this._handlers.concat([c(f,k.move,this._drag=function(a,b){var c=a[m]-l,d=e*c+r,f=Math.max(Math.min(d,t),v);(G||b)&&u(f);p[x]=c+K+e*(f-d)+"px"}),c(f,"dragstart",function(a){a.stopPropagation();a.preventDefault()}),c(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation();a.preventDefault()}),c(f,k.release,d.hitch(this,"_stopDrag"))]);a.stopPropagation();a.preventDefault()},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;
s.toggle(this.domNode,"dijitSplitterHover",a);s.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&s.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&g.destroy(this.fake),s.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&t(this._cookieName,this.child.domNode.style[this.horizontal?
"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var c=this.horizontal,e=1;switch(a.keyCode){case c?l.UP_ARROW:l.LEFT_ARROW:e*=-1;case c?l.DOWN_ARROW:l.RIGHT_ARROW:break;default:return}c=b.getMarginSize(this.child.domNode)[c?"h":"w"]+this._factor*e;this.container._layoutChildren(this.child.id,Math.max(Math.min(c,this._computeMaxSize()),this.child.minSize));a.stopPropagation();a.preventDefault()},destroy:function(){this._cleanupHandlers();
delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),x=r("dijit.layout._Gutter",[q,a],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);s.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});r=r("dijit.layout.BorderContainer",e,{gutters:!0,liveSplitters:!0,persist:!1,
baseClass:"dijitBorderContainer",_splitterClass:v,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var b=a.region,c=a.isLeftToRight();"leading"==b&&(b=c?"left":"right");"trailing"==b&&(b=c?"right":"left");b&&"center"!=b&&(a.splitter||this.gutters)&&!a._splitterWidget&&(c=a.splitter?this._splitterClass:x,d.isString(c)&&(c=d.getObject(c)),c=new c({id:a.id+"_splitter",container:this,child:a,region:b,
live:this.liveSplitters}),c.isSplitter=!0,a._splitterWidget=c,b="bottom"==b||b==(this.isLeftToRight()?"right":"left"),g.place(c.domNode,a.domNode,b?"before":"after"),c.startup())},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget);this.inherited(arguments)},getChildren:function(){return p.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return p.filter(this.getChildren(),function(b){return b.region==
a})[0]._splitterWidget},resize:function(a,c){if(!this.cs||!this.pe){var e=this.domNode;this.cs=n.getComputedStyle(e);this.pe=b.getPadExtents(e,this.cs);this.pe.r=n.toPixelValue(e,this.cs.paddingRight);this.pe.b=n.toPixelValue(e,this.cs.paddingBottom);n.set(e,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=[];p.forEach(this._getOrderedChildren(),function(a){c.push(a);a._splitterWidget&&c.push(a._splitterWidget)});m.layoutChildren(this.domNode,
{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},c,a,b)}},destroyRecursive:function(){p.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});r.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:Infinity};d.mixin(r.ChildWidgetProperties,e.ChildWidgetProperties);d.extend(f,r.ChildWidgetProperties);r._Splitter=v;r._Gutter=x;return r})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),
function(p,t,r,s,g,b,n,l){t=t("dijit.layout.LayoutContainer",n,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(p.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){this.inherited(arguments);b.region&&r.add(b.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var b=p.map(this.getChildren(),function(b,d){return{pane:b,weight:["center"==b.region?Infinity:0,b.layoutPriority,("sidebar"==this.design?1:
-1)*(/top|bottom/.test(b.region)?1:-1),d]}},this);b.sort(function(b,d){for(var f=b.weight,g=d.weight,a=0;a<f.length;a++)if(f[a]!=g[a])return f[a]-g[a];return 0});return p.map(b,function(b){return b.pane})},layout:function(){l.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(b,c){this.inherited(arguments);this._started&&this.layout()},removeChild:function(b){this.inherited(arguments);this._started&&this.layout();r.remove(b.domNode,this.baseClass+"Pane");s.set(b.domNode,
{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});s.set(b.domNode,/top|bottom/.test(b.region)?"width":"height","auto")}});t.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};g.extend(b,t.ChildWidgetProperties);return t})},"dijit/layout/AccordionContainer":function(){define("require dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/keys dojo/_base/lang dojo/sniff dojo/topic ../focus ../_base/manager dojo/ready ../_Widget ../_Container ../_TemplatedMixin ../_CssStateMixin ./StackContainer ./ContentPane dojo/text!./templates/AccordionButton.html ../a11yclick".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q,a,e,m,v,x,z,A,y,C,F){q=r("dijit.layout._AccordionButton",[v,z,A],{templateString:F,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var a=this.id.replace(" ","_");b.set(this.titleTextNode,
"id",a+"_title");this.focusNode.setAttribute("aria-labelledby",b.get(this.titleTextNode,"id"));g.setSelectable(this.domNode,!1)},getTitleHeight:function(){return d.getMarginSize(this.domNode).h},_onTitleClick:function(){this.getParent().selectChild(this.contentWidget,!0);a.focus(this.focusNode)},_onTitleKeyDown:function(a){return this.getParent()._onKeyDown(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a);this.focusNode.setAttribute("aria-expanded",a?"true":"false");this.focusNode.setAttribute("aria-selected",
a?"true":"false");this.focusNode.setAttribute("tabIndex",a?"0":"-1")}});f("dojo-bidi")&&q.extend({_setLabelAttr:function(a){this._set("label",a);b.set(this.titleTextNode,"innerHTML",a);this.applyTextDir(this.titleTextNode)},_setTitleAttr:function(a){this._set("title",a);b.set(this.titleTextNode,"title",a);this.applyTextDir(this.titleTextNode)}});var D=r("dijit.layout._AccordionInnerContainer"+(f("dojo-bidi")?"_NoBidi":""),[v,A],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=
l.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var a=this.contentWidget,b=k.isString(this.buttonWidget)?k.getObject(this.buttonWidget):this.buttonWidget;this.button=a._buttonWidget=(new b({contentWidget:a,label:a.title,title:a.tooltip,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,iconClass:a.iconClass,id:a.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=l.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",
this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);l.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var a=this.button,b=this.contentWidget;this._contentWidgetWatches=[b.watch("title",k.hitch(this,function(b,c,e){a.set("label",e)})),b.watch("tooltip",k.hitch(this,function(b,c,e){a.set("title",e)})),b.watch("iconClass",k.hitch(this,function(b,c,e){a.set("iconClass",e)}))]},_setSelectedAttr:function(a){this._set("selected",
a);this.button.set("selected",a);if(a&&(a=this.contentWidget,a.onSelected))a.onSelected()},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive();t.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments)},destroyDescendants:function(a){this.contentWidget.destroyRecursive(a)}});f("dojo-bidi")&&(D=r("dijit.layout._AccordionInnerContainer",D,
{postCreate:function(){this.inherited(arguments);var a=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(b,c,e){a.set("textDir",e)}))}}));r=r("dijit.layout.AccordionContainer",y,{duration:e.defaultDuration,buttonWidget:q,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&
this.selectedChildWidget._wrapperWidget.set("selected",!0))},layout:function(){var a=this.selectedChildWidget;if(a){var b=a._wrapperWidget.domNode,c=d.getMarginExtents(b),b=d.getPadBorderExtents(b),e=a._wrapperWidget.containerNode,f=d.getMarginExtents(e),e=d.getPadBorderExtents(e),g=this._contentBox,m=0;t.forEach(this.getChildren(),function(b){b!=a&&(m+=d.getMarginSize(b._wrapperWidget.domNode).h)});this._verticalSpace=g.h-m-c.h-b.h-f.h-e.h-a._buttonWidget.getTitleHeight();this._containerContentBox=
{h:this._verticalSpace,w:this._contentBox.w-c.w-b.w-f.w-e.w};a&&a.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=D({contentWidget:a,buttonWidget:this.buttonWidget,id:a.id+"_wrapper",dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,parent:this});this.inherited(arguments);l.place(a.domNode,a._wrapper,"replace")},removeChild:function(a){a._wrapperWidget&&(l.place(a.domNode,a._wrapperWidget.domNode,"after"),a._wrapperWidget.destroy(),delete a._wrapperWidget);n.remove(a.domNode,
"dijitHidden");this.inherited(arguments)},getChildren:function(){return t.map(this.inherited(arguments),function(a){return"dijit.layout._AccordionInnerContainer"==a.declaredClass?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop();t.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()});this.inherited(arguments)},_showChild:function(a){a._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},
_hideChild:function(a){a._wrapperWidget.containerNode.style.display="none";this.inherited(arguments)},_transition:function(a,b,c){8>f("ie")&&(c=!1);this._animation&&(this._animation.stop(!0),delete this._animation);var e=this;if(a){a._wrapperWidget.set("selected",!0);var g=this._showChild(a);this.doLayout&&a.resize&&a.resize(this._containerContentBox)}b&&(b._wrapperWidget.set("selected",!1),c||this._hideChild(b));if(c){var m=a._wrapperWidget.containerNode,k=b._wrapperWidget.containerNode;c=a._wrapperWidget.containerNode;
a=d.getMarginExtents(c);c=d.getPadBorderExtents(c);var l=a.h+c.h;k.style.height=e._verticalSpace-l+"px";this._animation=new s.Animation({node:m,duration:this.duration,curve:[1,this._verticalSpace-l-1],onAnimate:function(a){a=Math.floor(a);m.style.height=a+"px";k.style.height=e._verticalSpace-l-a+"px"},onEnd:function(){delete e._animation;m.style.height="auto";b._wrapperWidget.containerNode.style.display="none";k.style.height="auto";e._hideChild(b)}});this._animation.onStop=this._animation.onEnd;this._animation.play()}return g},
_onKeyDown:function(a,b){if(!this.disabled&&!a.altKey&&(b||a.ctrlKey)){var e=a.keyCode;if(b&&(e==c.LEFT_ARROW||e==c.UP_ARROW)||a.ctrlKey&&e==c.PAGE_UP)this._adjacent(!1)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault();else if(b&&(e==c.RIGHT_ARROW||e==c.DOWN_ARROW)||a.ctrlKey&&(e==c.PAGE_DOWN||e==c.TAB))this._adjacent(!0)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault()}}});f("dijit-legacy-requires")&&m(0,function(){p(["dijit/layout/AccordionPane"])});r._InnerContainer=
D;r._Button=q;return r})},"dijit/layout/AccordionPane":function(){define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(p,t,r){return p("dijit.layout.AccordionPane",r,{constructor:function(){t.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0")},onSelected:function(){}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q){r.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");b=q._iframeName;b=b.substring(0,b.lastIndexOf("_"));var a=s.delegate(q,{create:function(){return a._frame=q.create.apply(q,arguments)},get:null,post:null,send:function(a){var b,c=g._ioSetArgs(a,function(a){b&&b.cancel()},function(a){var c=null;a=a.ioArgs;try{var e=a.handleAs;"xml"===e||"html"===e?c=b.response.data:(c=b.response.text,"json"===e?c=t.fromJson(c):"javascript"===e&&(c=r.eval(c)))}catch(d){c=
d}return c},function(a,b){b.ioArgs._hasError=!0;return a}),d=c.ioArgs,k="GET",n=l.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&n&&(k="POST");a={method:k,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:n?null:a.content,data:n?a.content:null,timeout:a.timeout,ioArgs:d};a.method&&(a.method=a.method.toUpperCase());if(p.ioPublish&&r.publish&&!1!==d.args.ioPublish)var s=f.after(q,"_notifyStart",function(a){a.options.ioArgs===d&&(s.remove(),g._ioNotifyStart(c))},
!0);b=q(d.url,a,!0);d._callNext=b._callNext;b.then(function(){c.resolve(c)}).otherwise(function(a){c.ioArgs.error=a;c.reject(a)});return c},_iframeOnload:n.global[b+"_onload"]});s.setObject("dojo.io.iframe",a);return a})},"xstyle/core/load-css":function(){define([],function(){function p(a,b){var c=a[n]("link");c.rel="stylesheet";c.type="text/css";b&&(c.href=b);return c}function t(a,b){return a.lastIndexOf(".")<=a.lastIndexOf("/")?a+"."+b:a}function r(a){a=a.split("!");for(var b,c=1;b=a[c++];)b=b.split("=",
2),a[b[0]]=2==b.length?b[1]:!0;return a}function s(a){if(k["dom-create-style-element"])return b=document.createElement("style"),b.setAttribute("type","text/css"),b.appendChild(document.createTextNode(a)),f.insertBefore(b,f.firstChild),b;var b=document.createStyleSheet();b.cssText=a;return b.owningElement}var g="onreadystatechange",b="onload",n="createElement",l=!1,d=document,c="undefined"==typeof _css_cache?{}:_css_cache,k={"event-link-onload":null===document.createElement("link").onload&&!navigator.userAgent.match(/AppleWebKit/),
"dom-create-style-element":!document.createStyleSheet},f=d.head||(d.head=d.getElementsByTagName("head")[0]);if(!k["bundled-css"])var q=function(a,c){function d(a){if(a=a.sheet||a.styleSheet)for(var b=document.styleSheets,c=b.length;0<c;c--)if(b[c-1]==a)return!0}function f(a,b){d(a.link)?(n(a),b()):l||setTimeout(function(){f(a,b)},a.wait)}function n(a){a=a.link;a[g]=a[b]=null}function p(){q||(q=!0,c())}require.onError&&(require.onError=function(a){return function(){l=!0;a.apply(this,arguments)}}(require.onError));
var q;(function(a,c){var e=a.link;e[g]=e[b]=function(){e.readyState&&"complete"!=e.readyState||(k["event-link-onload"]=!0,n(a),c())}})(a,p);k["event-link-onload"]||f(a,p)};return function(a,b,g){for(var k=a.split(","),l=k.length,n=function(){0==--l&&b(C.sheet||C.styleSheet)},A=0;A<k.length;A++){a=k[A];var y=c[a];if(y)return C=s(y),n();a=r(a);var y=a.shift(),y=t(y,"css"),C=p(d);a="nowait"in a?"false"!=a.nowait:!(!g||!g.cssDeferLoad);q({link:C,url:y,wait:g&&g.cssWatchPeriod||25},n);a&&b(C);C.href=y;
f.appendChild(C)}}})},"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<span class="dijitInline dijitIcon dijitMenuExpand"></span>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</span>\n\t</td>\n</tr>\n',
"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n></div>\n',"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',
"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\tdata-dojo-attach-point="valueNode" role="presentation"\n/></span>\n',
"url:dijit/form/templates/ComboButton.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\n\t\t></div\n\t\t></td\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdata-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\n\t\t\tdata-dojo-attach-event="onkeydown:_onArrowKeyDown"\n\t\t\ttitle="${optionsTitle}"\n\t\t\trole="button" aria-haspopup="true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n\t\t></td\n\t\t><td style="display:none !important;"\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode" role="presentation"\n\t\t\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\t/></td></tr></tbody\n></table>\n',
"url:dojox/form/resources/_CheckedMultiSelectMenuItem.html":'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" role="menuitemcheckbox" tabIndex="-1"\n\tdojoAttachEvent="ondijitclick:_onClick"\n\t><td class="dijitReset dijitMenuItemIconCell" role="presentation"\n\t\t><div src="${_blankGif}" alt="" class="dijitMenuItemIcon ${_iconClass}" dojoAttachPoint="iconNode"\n\t\t\t><input class="dojoxCheckedMultiSelectCheckBoxInput" dojoAttachPoint="inputNode" type="${_type.type}"\n\t\t/></div></td\n\t><td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td\n\t><td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td\n\t><td class="dijitReset dijitMenuArrowCell" role="presentation">&nbsp;</td\n></tr>',
"url:dojox/form/resources/_CheckedMultiSelectItem.html":'<div class="dijitReset ${baseClass}"\n\t><input class="${baseClass}Box" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="checkBox" \n\t\tdata-dojo-attach-event="_onClick:_changeBox" type="${_type.type}" baseClass="${_type.baseClass}"\n\t/><div class="dijitInline ${baseClass}Label" data-dojo-attach-point="labelNode" data-dojo-attach-event="onclick:_onClick"></div\n></div>\n',"url:dojox/form/resources/CheckedMultiSelect.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}"\n\t><div data-dojo-attach-point="comboButtonNode"\n\t></div\n\t><div data-dojo-attach-point="selectNode" class="dijit dijitReset dijitInline ${baseClass}Wrapper" data-dojo-attach-event="onmousedown:_onMouseDown,onclick:focus"\n\t\t><select class="${baseClass}Select dojoxCheckedMultiSelectHidden" multiple="true" data-dojo-attach-point="containerNode,focusNode"></select\n\t\t><div data-dojo-attach-point="wrapperDiv"></div\n\t></div\n></div>',
"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><input\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point="focusNode"\n\t \tdata-dojo-attach-event="ondijitclick:_onClick"\n/></div>\n',"url:dojox/form/resources/FileInput.html":'<div class="dijitFileInput">\n\t<input id="${id}" class="dijitFileInputReal" type="file" dojoAttachPoint="fileInput" name="${name}" />\n\t<div class="dijitFakeInput">\n\t\t<input class="dijitFileInputVisible" type="text" dojoAttachPoint="focusNode, inputNode" />\n\t\t<div class="dijitInline dijitFileInputText" dojoAttachPoint="titleNode">${label}</div>\n\t\t<div class="dijitInline dijitFileInputButton" dojoAttachPoint="cancelNode" \n\t\t\tdojoAttachEvent="onclick:reset">${cancelText}</div>\n\t</div>\n</div>\n',
"url:dojox/form/resources/Uploader.html":'<span class="dijit dijitReset dijitInline"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t> \n\t<input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1" data-dojo-attach-point="valueNode" />\n</span>\n',
"url:dojox/form/resources/UploaderFileList.html":'<div class="dojoxUploaderFileList">\n\t<div data-dojo-attach-point="progressNode" class="dojoxUploaderFileListProgress">\n\t\t<div data-dojo-attach-point="percentBarNode" class="dojoxUploaderFileListProgressBar"></div>\n\t\t<div data-dojo-attach-point="percentTextNode" class="dojoxUploaderFileListPercentText">0%</div>\n\t</div>\n\t<table class="dojoxUploaderFileListTable">\n\t\t<thead>\n\t\t\t<tr class="dojoxUploaderFileListHeader">\n\t\t\t\t<th class="dojoxUploaderIndex">${headerIndex}</th>\n\t\t\t\t<th class="dojoxUploaderIcon">${headerType}</th>\n\t\t\t\t<th class="dojoxUploaderFileName">${headerFilename}</th>\n\t\t\t\t<th class="dojoxUploaderFileSize" data-dojo-attach-point="sizeHeader">${headerFilesize}</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody class="dojoxUploaderFileListContent" data-dojo-attach-point="listNode"></tbody>\n\t</table>\n<div>',
"url:dojox/widget/Calendar/Calendar.html":'<div class="dojoxCalendar">\n    <div tabindex="0" class="dojoxCalendarContainer" style="visibility: visible;" dojoAttachPoint="container">\n\t\t<div style="display:none">\n\t\t\t<div dojoAttachPoint="previousYearLabelNode"></div>\n\t\t\t<div dojoAttachPoint="nextYearLabelNode"></div>\n\t\t\t<div dojoAttachPoint="monthLabelSpacer"></div>\n\t\t</div>\n        <div class="dojoxCalendarHeader">\n            <div>\n                <div class="dojoxCalendarDecrease" dojoAttachPoint="decrementMonth"></div>\n            </div>\n            <div class="">\n                <div class="dojoxCalendarIncrease" dojoAttachPoint="incrementMonth"></div>\n            </div>\n            <div class="dojoxCalendarTitle" dojoAttachPoint="header" dojoAttachEvent="onclick: onHeaderClick">\n            </div>\n        </div>\n        <div class="dojoxCalendarBody" dojoAttachPoint="containerNode"></div>\n        <div class="">\n            <div class="dojoxCalendarFooter" dojoAttachPoint="footer">                        \n            </div>\n        </div>\n    </div>\n</div>\n',
"url:dojox/widget/Calendar/CalendarDay.html":'<div class="dijitCalendarDayLabels" style="left: 0px;" dojoAttachPoint="dayContainer">\n\t<div dojoAttachPoint="header">\n\t\t<div dojoAttachPoint="monthAndYearHeader">\n\t\t\t<span dojoAttachPoint="monthLabelNode" class="dojoxCalendarMonthLabelNode"></span>\n\t\t\t<span dojoAttachPoint="headerComma" class="dojoxCalendarComma">,</span>\n\t\t\t<span dojoAttachPoint="yearLabelNode" class="dojoxCalendarDayYearLabel"></span>\n\t\t</div>\n\t</div>\n\t<table cellspacing="0" cellpadding="0" border="0" style="margin: auto;">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td class="dijitCalendarDayLabelTemplate"><div class="dijitCalendarDayLabel"></div></td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody dojoAttachEvent="onclick: _onDayClick">\n\t\t\t<tr class="dijitCalendarWeekTemplate">\n\t\t\t\t<td class="dojoxCalendarNextMonth dijitCalendarDateTemplate">\n\t\t\t\t\t<div class="dijitCalendarDateLabel"></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n',
"url:dojox/widget/Calendar/CalendarMonthYear.html":'<div class="dojoxCal-MY-labels" style="left: 0px;"\t\n\tdojoAttachPoint="myContainer" dojoAttachEvent="onclick: onClick">\n\t\t<table cellspacing="0" cellpadding="0" border="0" style="margin: auto;">\n\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr class="dojoxCal-MY-G-Template">\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-M-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarMonthLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-M-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarMonthLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-Y-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarYearLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="dojoxCal-MY-Y-Template">\n\t\t\t\t\t\t\t\t\t\t<div class="dojoxCalendarYearLabel"></div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t </tr>\n\t\t\t\t\t\t <tr class="dojoxCal-MY-btns">\n\t\t\t\t\t\t \t <td class="dojoxCal-MY-btns" colspan="4">\n\t\t\t\t\t\t \t\t <span class="dijitReset dijitInline dijitButtonNode ok-btn" dojoAttachEvent="onclick: onOk" dojoAttachPoint="okBtn">\n\t\t\t\t\t\t \t \t \t <button\tclass="dijitReset dijitStretch dijitButtonContents">OK</button>\n\t\t\t\t\t\t\t\t </span>\n\t\t\t\t\t\t\t\t <span class="dijitReset dijitInline dijitButtonNode cancel-btn" dojoAttachEvent="onclick: onCancel" dojoAttachPoint="cancelBtn">\n\t\t\t\t\t\t \t \t\t <button\tclass="dijitReset dijitStretch dijitButtonContents">Cancel</button>\n\t\t\t\t\t\t\t\t </span>\n\t\t\t\t\t\t \t </td>\n\t\t\t\t\t\t </tr>\n\t\t\t\t</tbody>\n\t\t</table>\n</div>\n',
"url:dijit/templates/TooltipDialog.html":'<div role="alertdialog" tabIndex="-1">\n\t<div class="dijitTooltipContainer" role="presentation">\n\t\t<div class="dijitTooltipContents dijitTooltipFocusNode" data-dojo-attach-point="containerNode"></div>\n\t</div>\n\t<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\n</div>\n',"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="${role}" tabIndex="-1" aria-checked="${checked}">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<span class="dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n\t\t<span class="dijitMenuItemIconChar dijitCheckedMenuItemIconChar">${checkedChar}</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode,textDirNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\n</tr>\n',
"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabindex="0">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',
"url:dijit/templates/TreeNode.html":'<div class="dijitTreeNode" role="presentation"\n\t><div data-dojo-attach-point="rowNode" class="dijitTreeRow" role="presentation"\n\t\t><span data-dojo-attach-point="expandoNode" class="dijitInline dijitTreeExpando" role="presentation"></span\n\t\t><span data-dojo-attach-point="expandoNodeText" class="dijitExpandoText" role="presentation"></span\n\t\t><span data-dojo-attach-point="contentNode"\n\t\t\tclass="dijitTreeContent" role="presentation">\n\t\t\t<span role="presentation" class="dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span data-dojo-attach-point="labelNode,focusNode" class="dijitTreeLabel" role="treeitem" tabindex="-1" aria-selected="false"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeNodeContainer" role="presentation" style="display: none;"></div>\n</div>\n',
"url:dijit/templates/Tree.html":'<div role="tree">\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" data-dojo-attach-point="indentDetector"></div>\n\t<div class="dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point="rootLoadingIndicator"></div>\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeContainer" role="presentation">\n\t</div>\n</div>\n',"url:dijit/templates/ProgressBar.html":'<div class="dijitProgressBar dijitProgressBarEmpty" role="progressbar"\n\t><div  data-dojo-attach-point="internalProgress" class="dijitProgressBarFull"\n\t\t><div class="dijitProgressBarTile" role="presentation"></div\n\t\t><span style="visibility:hidden">&#160;</span\n\t></div\n\t><div data-dojo-attach-point="labelNode" class="dijitProgressBarLabel" id="${id}_label"></div\n\t><span data-dojo-attach-point="indeterminateHighContrastImage"\n\t\t   class="dijitInline dijitProgressBarIndeterminateHighContrastImage"></span\n></div>\n',
"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5" scope="col">\n\t\t\t\t<div data-dojo-attach-point="monthNode">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"></span>\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role="row">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n\t\t\t\t<div class="dijitCalendarYearLabel">\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n',
"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\taria-haspopup="true"\n\tdata-dojo-attach-point="_popupStateNode"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\n\t/></div\n></div>\n',
"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator" role="separator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>\n',"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="listbox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode,textDirNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitValidationContainer"\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t/></div\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n',
"url:dijit/form/templates/Spinner.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point="upArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point="downArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' data-dojo-attach-point="textbox,focusNode" type="${type}" data-dojo-attach-event="onkeydown:_onKeyDown"\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\n\t/></div\n></div>\n',
"url:dijit/form/templates/HorizontalSlider.html":'<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" data-dojo-attach-event="onkeydown:_onKeyDown, onkeyup:_onKeyUp"\n\trole="presentation"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" style="display:none" data-dojo-attach-point="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event="press:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input data-dojo-attach-point="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div class="dijitReset dijitSliderBarContainerH" role="presentation" data-dojo-attach-point="sliderBarContainer"\n\t\t\t\t><div role="presentation" data-dojo-attach-point="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event="press:_onBarClick"\n\t\t\t\t\t><div class="dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t><div data-dojo-attach-point="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event="press:_onHandleClick" role="slider"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" data-dojo-attach-point="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event="press:_onBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event="press:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" style="display:none" data-dojo-attach-point="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td data-dojo-attach-point="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n',
"url:dijit/layout/templates/TabContainer.html":'<div class="dijitTabContainer">\n\t<div class="dijitTabListWrapper" data-dojo-attach-point="tablistNode"></div>\n\t<div data-dojo-attach-point="tablistSpacer" class="dijitTabSpacer ${baseClass}-spacer"></div>\n\t<div class="dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point="containerNode"></div>\n</div>\n',"url:dijit/layout/templates/_TabButton.html":'<div role="presentation" data-dojo-attach-point="titleNode,innerDiv,tabContent" class="dijitTabInner dijitTabContent">\n\t<span role="presentation" class="dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point="iconNode"></span>\n\t<span data-dojo-attach-point=\'containerNode,focusNode\' class=\'tabLabel\'></span>\n\t<span class="dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point=\'closeNode\'\n\t\t  role="presentation">\n\t\t<span data-dojo-attach-point=\'closeText\' class=\'dijitTabCloseText\'>[x]</span\n\t\t\t\t></span>\n</div>\n',
"url:dijit/layout/templates/ScrollingTabController.html":'<div class="dijitTabListContainer-${tabPosition}" style="visibility:hidden">\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerMenuButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_menuBtn"\n\t\t data-dojo-props="containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\n\t\t data-dojo-attach-point="_menuBtn" showLabel="false" title="">&#9660;</div>\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_leftBtn"\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point="_leftBtn" data-dojo-attach-event="onClick: doSlideLeft">&#9664;</div>\n\t<div data-dojo-type="dijit.layout._ScrollingTabControllerButton"\n\t\t class="tabStripButton-${tabPosition}"\n\t\t id="${id}_rightBtn"\n\t\t data-dojo-props="iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point="_rightBtn" data-dojo-attach-event="onClick: doSlideRight">&#9654;</div>\n\t<div class=\'dijitTabListWrapper\' data-dojo-attach-point=\'tablistWrapper\'>\n\t\t<div role=\'tablist\' data-dojo-attach-event=\'onkeydown:onkeydown\'\n\t\t\t data-dojo-attach-point=\'containerNode\' class=\'nowrapTabStrip\'></div>\n\t</div>\n</div>',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'<div data-dojo-attach-event="ondijitclick:_onClick" class="dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point="focusNode" role="button">\n\t<span role="presentation" class="dijitInline dijitTabStripIcon" data-dojo-attach-point="iconNode"></span>\n\t<span data-dojo-attach-point="containerNode,titleNode" class="dijitButtonText"></span>\n</div>',"url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n",
"*now":function(p){p(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var p=this.require;p({cache:{}});!p.async&&p(["dojo"]);p.boot&&p.apply(null,p.boot)})();require("dojo/_base/array dojo/dom-geometry dojo/aspect dgrid/OnDemandGrid dgrid/Grid dgrid/Selection dgrid/selector dgrid/tree dgrid/extensions/ColumnResizer dgrid/extensions/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/DijitRegistry dgrid/extensions/DnD dojox/form/CheckedMultiSelect dojox/form/FileInput dojox/form/Uploader dojox/form/uploader/FileList dojox/validate/web dojox/validate/check dojox/widget/Calendar dojox/gfx dojox/gfx/fx dojox/gfx/utils dojox/gfx/Moveable dojox/gesture/tap dojox/gesture/swipe dojox/html/styles dojo/dom-construct dojox/charting/widget/Chart dojox/charting/widget/Legend dojox/charting/axis2d/Default dojox/charting/plot2d/Lines dojox/charting/plot2d/Pie dojox/charting/plot2d/ClusteredColumns dijit/Menu dijit/Dialog dijit/Tree dijit/Toolbar dijit/ProgressBar dijit/Tooltip dijit/form/TextBox dijit/form/DateTextBox dijit/form/Form dijit/form/FilteringSelect dijit/form/Textarea dijit/form/NumberTextBox dijit/form/ComboBox dijit/form/TimeTextBox dijit/form/Select dijit/form/NumberSpinner dijit/form/HorizontalSlider dijit/layout/ContentPane dijit/layout/TabContainer dijit/layout/BorderContainer dijit/layout/AccordionContainer dojo/io/iframe".split(" "),
function(p,t,r,s,g,b,n,l,d,c,k,f,q){dojo.array=p;dojo.domGeo=t;dojo.aspect=r;dgrid={};dgrid.OnDemandGrid=s;dgrid.Grid=g;dgrid.Selection=b;dgrid.selector=n;dgrid.tree=l;dgrid.ColumnResizer=d;dgrid.ColumnHider=c;dgrid.ColumnReorder=k;dgrid.DijitRegistry=f;dgrid.DnD=q;dojo.declare("FIRMOS.wsConnectionHandler",null,{constructor:function(){this.ws=null;this.reqId=0;this.openReq={};this.updateId=null;this.docLoaded=!1;this._createWS();this._logLoadingError=!0},documentLoaded:function(){console.log("DOCUMENT ONLOAD");
new FIRMOS.Menu({contextMenuForWindow:!0});this.docLoaded=!0},_createWS:function(){var a=this.getSessionId();this.ws=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-FREDB-"+(a?a:"NEW"));this.ws.binaryType="arraybuffer";this.ws.onmessage=this.wsMessageListener.bind(this);this.ws.onclose=this.wsCloseListener.bind(this);this.ws.onerror=this.wsErrorListener.bind(this);this.ws.onopen=this.wsOpenListener.bind(this)},
callServerFunction:function(a,b,c,d,f,g,k){var l=G_UI_COM.beforeCallServerFunction(a,b,c,d);if(!l.abort)if(l.uidPath&&(c=l.uidPath),l.params&&(d=l.params),this.docLoaded)if(1!=this.ws.readyState)switch(this.ws.readyState){case 0:console.log("WS CONNECTING => WAIT");setTimeout(this.callServerFunction.bind(this,a,b,c,d,f,g,k),10);break;case 2:console.log("WS CLOSING => WAIT");setTimeout(this.callServerFunction.bind(this,a,b,c,d,f,g,k),100);break;case 3:console.log("WS CLOSED => RECREATE"),this._createWS()}else console.log("WS OK => CALL"),
console.log(a+" - "+b+" - "+c+" - "+JSON.stringify(d)+" - BLOB: "+("undefined"!=typeof k)+" - STATE: "+this.ws.readyState),a={cn:a,fn:b,uidPath:c,rId:this.reqId,rType:"S"},g&&(a.cId=g),d&&(a.params=d),d=dojo.toJson(a),f||(f=this.handleServerFunctionResponse.bind(this)),this.openReq[this.reqId]={fn:f,uiState:G_UI_COM.getUIState(),messageObj:a},"undefined"==typeof k?this.ws.send(this.encodeString2Message(d)):(f=this.encodeString2Message(d),d=new Uint8Array(4),g=f.length,d[3]=g>>24,d[2]=g>>16&255,d[1]=
g>>8&255,d[0]=g&255,this.ws.send(new Blob([d,f,k]))),G_UI_COM.clearUIState(),this.reqId++;else this._logLoadingError&&(console.log("DOCUMENT LOADING => WAIT"),this._logLoadingError=!1),setTimeout(this.callServerFunction.bind(this,a,b,c,d,f,g,k),10)},handleAsyncServerRequest:function(a){this.handleServerFunctionResponse({},!0,a,G_UI_COM.getUIState())},handleSyncServerRequest:function(a){this.handleServerFunctionResponse({},!0,a,G_UI_COM.getUIState());a=dojo.toJson({rId:a.rid,rType:"SR"});this.ws.send(this.encodeString2Message(a))},
handleServerFunctionResponse:function(a,b,c,d){if(b){if(""!=c.output)switch(b=dojo.fromJson(c.output),b.actiontype){case "jsupdate":case "jsexecute":G_UI_COM.restoreUIState(d);this.updateId="";a.cId&&(this.updateId=a.cId);"undefined"!=typeof b.updateid&&""!=b.updateid&&(this.updateId=b.updateid);G_UI_COM.clearUpdateArea(b.id);eval(b.action);break;default:console.error("Server Function Error => Unknown action type: "+b.actiontype)}}else console.error("Server Function Error => "+c.cn+"."+c.fn+": "+
c.error)},wsMessageListener:function(a){a=dojo.fromJson(this.decodeMessage2String(a.data));a.session&&this.storeSessionId(a.session);if(a.error)this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!1,a,this.openReq[a.rid].uiState);else switch(a.rtype){case "SR":this.openReq[a.rid]?(this.openReq[a.rid].fn(this.openReq[a.rid].messageObj,!0,a,this.openReq[a.rid].uiState),delete this.openReq[a.rid]):console.error(" Error => Got answer for unknown request id: "+a.rid);break;case "S":this.handleSyncServerRequest(a);
break;case "A":this.handleAsyncServerRequest(a);break;default:console.error(" Error => Unknown Server Request Type: "+a.rtype)}},wsCloseListener:function(a){console.log("WS CLOSE "+JSON.stringify(a))},wsErrorListener:function(a){console.log("WS ERROR "+JSON.stringify(a))},wsOpenListener:function(a){console.log("WS OPEN "+JSON.stringify(a));this.callServerFunction("FIRMOS","init")},encodeString2Message:function(a){return a},decodeMessage2String:function(a){return a},storeSessionId:function(a){sessionStorage.setItem("sessionId",
a)},getSessionId:function(){return sessionStorage.getItem("sessionId")}});dojo.declare("FIRMOS.uiHandler",null,{constructor:function(a){this.clearUIState();this.dialog_=[];this.uiState_={};this.showSectionPathInProgress=!1;this.stores_={};this.formDBOs_={};this.selDepFuncs_={views:{},classes:{}};this.liveCharts_={};this.msgProgress_={};this.createdCSSRules_={};this.serverCom=a;this.buttonClickStates_={};this.sitemap_=null;this.storeDepData={}},refreshView:function(a){a.isInstanceOf(FIRMOS.GridBase)?
a.refresh():a.isInstanceOf(FIRMOS.Tree)?a.refresh():console.error("REFRESH VIEW TYPE UNKNOWN")},refreshStore:function(a){a=G_UI_COM.getStoreById(a);for(var b=0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},setMenu:function(a){this.menu_=a},isDialogAction:function(){this.dialogAction_=!0},setGridDetailsId:function(a){this.gridDetailsId_=a},setDropCoords:function(a){this.dropCoords_=a},getUIState:function(){return{dialogAction:this.dialogAction_,dialog:this.dialog_,menu:this.menu_,gridDetailsId:this.gridDetailsId_,
dropCoords:this.dropCoords_}},clearUIState:function(){this.dialogAction_=!1;this.dropCoords_=this.gridDetailsId_=this.menu_=null},restoreUIState:function(a){this.uiState_=a},closeDialog:function(){0<this.uiState_.dialog.length&&0<this.dialog_.length&&this.uiState_.dialog[this.uiState_.dialog.length-1].id==this.dialog_[this.dialog_.length-1].id&&this.dialog_[this.dialog_.length-1].hide(!0)},dialogLoaded:function(a){this.uiState_.dialogAction&&this.closeDialog();this.dialog_.push(a);a.show()},dialogClosed:function(a){if(this.dialog_[this.dialog_.length]==
a)this.dialog_.pop();else{for(var b=[],c=0;c<this.dialog_.length;c++)this.dialog_[c].id!=a&&(b[b.length]=this.dialog_[c]);this.dialog_=b}},showMessage:function(a){a.show();this.dialog_.push(a)},setWinTitle:function(a){a&&""!=a&&(document.title=a)},clearContentArea:function(a){this.serverCom.updateId=a;this.clearUpdateArea("");this.contentLoaded(new dijit.layout.ContentPane({}))},clearUpdateArea:function(a){if(""!=a){var b=dijit.byId(a);""==this.serverCom.updateId&&b&&(this.serverCom.updateId=a)}if(""!=
this.serverCom.updateId)if("FirmOSViewport"==this.serverCom.updateId)for(var b=dojo.byId("FirmOSViewport"),b=dijit.findWidgets(b),c=0;c<b.length;c++)b[c].destroyRecursive();else if(b=dijit.byId(this.serverCom.updateId)){c=b.getParent();if(c.isInstanceOf(dijit.layout.TabContainer)||c.isTCElem)return;if(b._contentId)var d=b._contentId;else d=b.id,this.serverCom.updateId=c.id,b=c;if(c=dijit.byId(d))c.region&&(b.updatingRegion_=c.region,b.updatingStyle_=c.style),b.removeChild(c),c.destroyRecursive()}(b=
dijit.byId(a))&&b.destroyRecursive()},contentLoaded:function(a,b){this.setWinTitle(b);this.uiState_.dialogAction&&this.closeDialog();if("FirmOSViewport"==this.serverCom.updateId){var c=dojo.byId("FirmOSViewport");a.placeAt(c);a.startup()}else(c=dijit.byId(this.serverCom.updateId))?(c.getParent(),c.updatingRegion_&&(a.set("region",c.updatingRegion_),delete c.updatingRegion_,a.set("style",c.updatingStyle_),delete c.updatingStyle_),c.isInstanceOf(dijit.layout.ContentPane)?c.set("content",a):c.addChild(a),
c._contentId&&(c._contentId=a.id),a.startup()):(console.error("NO CONTENT AREA FOUND FOR "+a.id),a.destroyRecursive());this.serverCom.updateId=null},formProxyLoaded:function(a){console.error("IMPLEMENT ME")},menuLoaded:function(a){if(0<a.length)if(this.uiState_.menu)this.uiState_.menu.entriesLoaded(a);else if(this.uiState_.dropCoords){var b=new FIRMOS.Menu;b.setCoords(this.uiState_.dropCoords.x,this.uiState_.dropCoords.y);b.entriesLoaded(a)}},updateStore:function(a,b){var c=this.getStoreById(a);c&&
(b.updated&&c.store.updateItems(b.updated),b.deleted&&c.store.deleteItems(b.deleted),b["new"]&&c.store.newItems(b["new"]))},registerStore:function(a){this.stores_[a.id]?this.stores_[a.id].store=a:this.stores_[a.id]={store:a,views:[]}},unregisterStore:function(a){delete this.stores_[a.id]},registerFormDBOs:function(a,b){this.formDBOs_[a.id]?console.error("Form "+a.id+" already registered"):this.formDBOs_[a.id]={form:a,ids:b}},unregisterFormDBOs:function(a,b){this.formDBOs_[a]?(G_SERVER_COM.callServerFunction("FIRMOS",
"unregisterDBO",null,{ids:b}),delete this.formDBOs_[a]):console.error("Form "+a+" not registered")},updateFormDBO:function(a){for(var b in this.formDBOs_)for(var c=0;c<this.formDBOs_[b].ids.length;c++)if(this.formDBOs_[b].ids[c]==a.uid){this.formDBOs_[b].form.updateValues(a);break}},updateForm:function(a,b){var c=dijit.byId(a+"_form");c&&c.isInstanceOf(FIRMOS.Form)&&c.updateValues(b)},registerSelDepFunc:function(a,b,c){this.selDepFuncs_.views[c.id]=c;this.selDepFuncs_.classes[a]||(this.selDepFuncs_.classes[a]=
{});this.selDepFuncs_.classes[a][b]||(this.selDepFuncs_.classes[a][b]={viewIds:{}});this.selDepFuncs_.classes[a][b].viewIds[c.id]=!0},unregisterSelDepFunc:function(a,b,c){this.selDepFuncs_.classes[a]&&this.selDepFuncs_.classes[a][b]&&(delete this.selDepFuncs_.classes[a][b].viewIds[c.id],0==Object.keys(this.selDepFuncs_.classes[a][b].viewIds).length&&(delete this.selDepFuncs_.classes[a][b].viewIds,0==Object.keys(this.selDepFuncs_.classes[a][b]).length&&(delete this.selDepFuncs_.classes[a][b],0==Object.keys(this.selDepFuncs_.classes[a]).length&&
delete this.selDepFuncs_.classes[a])));delete this.selDepFuncs_.views[c.id]},beforeCallServerFunction:function(a,b,c,d){var f={};if(this.selDepFuncs_.classes[a]&&this.selDepFuncs_.classes[a][b]){var g=[],k;for(k in this.selDepFuncs_.classes[a][b].viewIds)a=this.selDepFuncs_.views[k],g=g.concat(a.getSelectedIds()),dojo.mixin(d,a.contentParmas);c||1==g.length?(f.uidPath=c||[g[0]],d.selected=g,f.params=d):((c=dijit.byId(this.parentId).getParent()._contentId)&&G_UI_COM.clearContentArea(c),f.abort=!0)}return f},
registerLiveChart:function(a){this.liveCharts_[a.id]=a},unregisterLiveChart:function(a){delete this.liveCharts_[a.id]},updateLiveChart:function(a,b,c){this.liveCharts_[a]?this.liveCharts_[a].setData(b,c):console.error("updateLiveChart: "+a+" chart not found")},redefineLiveChart:function(a,b){this.liveCharts_[a]?this.liveCharts_[a].redefine(b):console.error("redefineLiveChart: "+a+" chart not found")},registerMsgProgress:function(a,b){this.msgProgress_[a]=b},unregisterMsgProgress:function(a){delete this.msgProgress_[a]},
updateMsgProgress:function(a,b){this.msgProgress_[a]?this.msgProgress_[a].updateProgress(b):console.error("updateMsgProgress: "+a+" message progress not registered")},registerStoreView:function(a,b){if(this.getStoreById(a)){for(var c=!1,d=0;d<this.stores_[a].views.length;d++)this.stores_[a].views[d].id==b.id&&(c=!0,this.stores_[a].views[d]=b);c||(this.stores_[a].views[this.stores_[a].views.length]=b)}else console.error("registerStoreView: "+a+" store not registered")},unregisterStoreView:function(a,
b){if(this.getStoreById(a)){for(var c=0;c<this.stores_[a].views.length;c++)if(this.stores_[a].views[c].id==b.id){this.stores_[a].views.splice(c,1);break}0==this.stores_[a].views.length&&this.stores_[a].store.destroy()}},getStore:function(a,b){var c=G_UI_COM.getStoreById(a);if(c)return c.store;this.storeDepData[a]&&(b._dependency=this.storeDepData[a],delete this.storeDepData[a]);return new FIRMOS.Store(b)},setStoreDepData:function(a,b){this.storeDepData[a]=b},setStoreDependency:function(a,b,c,d,f){var g=
{};g.filterfieldname=b;g.filtervalues=d;g.filterfieldtype=c;f&&(g.numfiltertype=f);(c=this.getStoreById(a))?c.store.params_.dependency[b+"_ref"]=g:(this.storeDepData[a]||(this.storeDepData[a]={}),this.storeDepData[a][b+"_ref"]=g)},deleteStoreDependency:function(a,b){var c=this.getStoreById(a);c?delete c.store.params_.dependency[b+"_ref"]:this.storeDepData[a]&&(delete this.storeDepData[a][b+"_ref"],0==Object.keys(this.storeDepData[a]).length&&delete this.storeDepData[a])},getStoreById:function(a){return this.stores_[a]},
invalidateSessionData:function(a){for(var b=0;b<a.length;b++){var c=this.getStoreById(a[b].storeid).store;if(a[b].queryids){a[b].queryids instanceof Array||(a[b].queryids=[a[b].queryids]);for(var d=0;b<a[d].queryids.length;d++)c.invalidateObserver(a[b].queryids[d])}else c.invalidateAllObservers()}},sortFuncSubSecOrd:function(a,b){return a._subSecOrd<b._subSecOrd?-1:a._subSecOrd>b._subSecOrd?1:0},createCSSRule:function(a,b){this.createdCSSRules_[a]||(dojox.html.insertCssRule("."+a,b),this.createdCSSRules_[a]=
b)},removeCSSRule:function(a){this.createdCSSRules_[a]&&(dojox.html.removeCssRule("."+a,this.createdCSSRules_[a]),delete this.createdCSSRules_[a])},toggleFormGroupStatus:function(a,b){var c=dojo.byId(b+"_tl"),d=dojo.byId(b+"_tr");if(dojo.hasClass(c,"firmosFormGroupShowLeft")){var f="";dojo.removeClass(c,"firmosFormGroupShowLeft");dojo.removeClass(d,"firmosFormGroupShowRight");dojo.addClass(c,"firmosFormGroupHideLeft");dojo.addClass(d,"firmosFormGroupHideRight")}else f="none",dojo.removeClass(c,"firmosFormGroupHideLeft"),
dojo.removeClass(d,"firmosFormGroupHideRight"),dojo.addClass(c,"firmosFormGroupShowLeft"),dojo.addClass(d,"firmosFormGroupShowRight");c=dojo.byId(a);c=dojo.query('tr[firmosGroup~="'+b+'"]',c);for(d=0;d<c.length;d++)dojo.style(c[d],"display",f)},addMenuEntries:function(a,b,c){for(var d=!0,f=0;f<b.length;f++){var g={};g.label=b[f].caption;g.disabled=b[f].disabled||c;if(b[f].icon){var k=b[f].icon.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(k,"background-image: url('"+b[f].icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");
g.iconClass=k}if(b[f].menu){k={};b[f].id&&(k.id=b[f].id);k=new dijit.Menu(k);g.disabled=this.addMenuEntries(k,b[f].menu,g.disabled)||g.disabled;g.popup=k;var l=new dijit.PopupMenuItem(g);k._parentUIElement=l;a.addChild(l)}else b[f].id&&(g.id=b[f].id),b[f].action&&(g._action=b[f].action,g.onClick=function(){G_SERVER_COM.callServerFunction(this._action["class"],this._action.func,this._action.uidPath,this._action.params)}),b[f].downloadId&&(g._downloadId=b[f].downloadId,g.onClick=function(){dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),
this._downloadId,!0)}),a.addChild(new dijit.MenuItem(g));d=d&&g.disabled}return d},_handleTabContainer:function(a,b,c,d){c.shift();if(0<c.length)b=1==c.length,this.showSectionPath(a,c,d)||console.error("Could not resolve given sub section path: container: "+a.id+", sections: "+JSON.stringify(c)),b&&(G_UI_COM.showSectionPathInProgress=!1);else if(d&&(a=a.getChildren()[0])&&a.isInstanceOf(FIRMOS.MultiContentContainer))for(c=a.getChildren(),d=0;d<c.length;d++)if(c[d].id==a.selectedChildWidget.id){d==
c.length-1?a.selectChild(c[0].id):a.selectChild(c[d+1].id);break}},showSectionPath:function(a,b,c){if("string"==typeof a){if("FirmOSViewport"==a)var d=dojo.byId("FirmOSViewport"),d=dijit.byId(d.children[0].id);else d=dijit.byId(a);d||console.error('Base container "'+a+'" not found.')}else d=a;if(d.isInstanceOf(dijit.layout.ContentPane))return d.hasChildren()?this.showSectionPath(d.getChildren()[0],b,c):!1;if(d.isInstanceOf(dijit.layout.BorderContainer)){a=d.getChildren();for(d=0;d<a.length;d++)if(this.showSectionPath(a[d],
b,c))return!0;return!1}if(d.isInstanceOf(FIRMOS.TabContainer)){var f=d.getChild(b[0]);if(f)return c=c&&d.selectedChildWidget.id==b[0],d.selectChild(f,this._handleTabContainer.bind(this,f,a,b,c)),!0;d.selectDefault();return!1}},registerSitemap:function(a){this.sitemap_=a},unregisterSitemap:function(a){delete this.sitemap_},_updateElement:function(a,b){a.set("disabled",b);a._parentUIElement&&a._parentUIElement.set("disabled",b)},_updateChildElements:function(a,b){if(a.isInstanceOf(dijit.Menu)||a.isInstanceOf(dijit.DropDownMenu)||
a.isInstanceOf(dijit.PopupMenuItem))for(var c=a.isInstanceOf(dijit.PopupMenuItem)?a.popup.getChildren():a.getChildren(),d=0;d<c.length;d++)this._updateElement(c[d],b),this._updateChildElements(c[d],b)},_updateParent:function(a){a=a._parentUIElement?a._parentUIElement.getParent():a.getParent();if(a.isInstanceOf(dijit.Menu)||a.isInstanceOf(dijit.DropDownMenu)){for(var b=a.getChildren(),c=!0,d=0;d<b.length;d++)if(!b[d].get("disabled")){c=!1;break}a.get("disabled")!=c&&(this._updateElement(a,c),this._updateParent(a))}},
updateUIElement:function(a,b,c){if(a=dijit.byId(a))this._updateElement(a,b),""!=c&&a.set("label",c),this._updateChildElements(a,b),this._updateParent(a)},updateUIElementSubmenu:function(a,b){var c=dijit.byId(a);if(c){c.destroyDescendants();var d=G_UI_COM.addMenuEntries(c,b,c.get("disabled"));this._updateElement(c,d)}},openUrl:function(a,b){b?window.open(a)||alert(G_TEXTS.openWindow.error):document.location.href=a}});G_SERVER_COM=new FIRMOS.wsConnectionHandler;G_UI_COM=new FIRMOS.uiHandler(G_SERVER_COM);
dojo.declare("FIRMOS.Dialog",dijit.Dialog,{onShow:function(){this.closable||dojo.style(this.closeButtonNode,"display","none")},hide:function(a){if(this.closable||a)G_UI_COM.dialogClosed(this.id),this.destroyRecursive()}});dojo.declare("FIRMOS.Message",FIRMOS.Dialog,{texts:G_TEXTS.msg,closable:!1,destroy:function(){this.progressBarId&&G_UI_COM.unregisterMsgProgress(this.progressBarId);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a;switch(this.type){case "msg_error":case "msg_warning":case "msg_info":case "msg_confirm":case "msg_wait":a=
"Wait"}var b='<div class="firmosMessageIcon'+a+'"></div><div class="firmosMessage'+a+'">'+this.msg+"</div>";this.progressBarId&&(b=b+'<div class="firmosMessageProgressBar" id="'+this.id+'_pb"></div>');b=b+'<div class="firmosMessageButtons'+a+'" id="'+this.id+'_buttons"></div>';this.set("content",b);switch(this.type){case "msg_error":case "msg_warning":case "msg_info":a=new dijit.form.Button({type:"button",label:this.texts.ok,onClick:this._onClick.bind(this)});a.placeAt(dojo.byId(this.id+"_buttons"));
break;case "msg_confirm":a=new dijit.form.Button({type:"button",label:this.texts.yes,onClick:this._onClick.bind(this,!0)});a.placeAt(dojo.byId(this.id+"_buttons"));a=new dijit.form.Button({type:"button",label:this.texts.no,onClick:this._onClick.bind(this,!1)});a.placeAt(dojo.byId(this.id+"_buttons"));break;case "msg_wait":this.sfClassname&&(a=new dijit.form.Button({type:"button",label:this.texts.abort,onClick:this._onClick.bind(this)}),a.placeAt(dojo.byId(this.id+"_buttons")))}this.progressBarId&&
(G_UI_COM.registerMsgProgress(this.progressBarId,this),this._pb=new dijit.ProgressBar({style:"width: 100%"}),this._pb.set("value",0),this._pb.set("label","0%"),this._pb.placeAt(dojo.byId(this.id+"_pb")))},updateProgress:function(a){this._pb.set("value",a);this._pb.set("label",Math.round(a)+"%")},_onClick:function(a){this.hide(!0);if(this.sfClassname){var b=dojo.clone(this.sfParams);"boolean"==typeof a&&(b.confirmed=a);G_SERVER_COM.callServerFunction(this.sfClassname,this.sfFunctionname,this.sfUidPath,
b)}}});dojo.declare("FIRMOS.Store",null,{idAttribute:"uid",labelAttributes:["text","objname","uid"],constructor:function(a){this.params_={};a._dependency?(this.params_.dependency=a._dependency,delete a._dependency):this.params_.dependency={};for(var b in a)this[b]=a[b];this._index={};this._dirtyItems={};this._orgItems={};this.queryId_=0;this.queryResults_={};G_UI_COM.registerStore(this)},destroy:function(){this.destroyClassname&&G_SERVER_COM.callServerFunction(this.destroyClassname,this.destroyFunctionname,
this.destroyUidPath,this.destroyParams);G_UI_COM.unregisterStore(this);G_UI_COM.setStoreDepData(this.id,this.params_.dependency);this.inherited(arguments)},close:function(a){return a&&a.abort&&a.abort()},containsValue:function(a,b,c){return-1<dojo.array.indexOf(this.getValues(a,b),c)},mayHaveChildren:function(a){return a.children?!0:!1},_getChildrenCallback:function(a,b,c){a.children=c;for(c=0;c<a.children.length;c++)this._index[this.getIdentity(a.children[c])]=!0,a.children[c].children&&"UNCHECKED"==
a.children[c].children&&(a.children[c].children=[],a.children[c]._loadChildren=!0);b(a)},getChildren:function(a,b){var c="function"==typeof b,d={};c||(d=b);d=this._doQuery(d,a);c&&(d.addCallback(this._getChildrenCallback.bind(this,a,b)),d.addErrback(b.bind(this,Error("Error in function getChildren"))));return dojo.store.util.QueryResults(d)},query:function(a,b){b.query=a;var c=this._doQuery(b);return dojo.store.util.QueryResults(c)},_doQuery:function(a,b){var c=new dojo.Deferred,d=this.queryId_++;
this.queryResults_[d]={};this.queryResults_[d].query=a.query;this.queryResults_[d].queryArgs=a;this.queryResults_[d].dataIds=[];this.queryResults_[d].observer=[];this.queryResults_[d].observerInfo=[];var f=dojo.clone(this.getParams);dojo.mixin(f,this.params_);if(b){this.queryResults_[d].parentId=this.getIdentity(b);var g=this.getIdentity(b);f.parentid=g}if(b&&b._childrenfunc_)var g=b._funcclassname_||this.getClassname,k=b._childrenfunc_,l=b.uidpath?b.uidpath instanceof Array?b.uidpath:[b.uidpath]:
[b.uid];else this.queryResults_[d].parentId="",l=this.getUidPath,g=this.getClassname,k=this.getFunctionname;f.queryid=d;a.query&&(f.query=a.query);"undefined"!=typeof a.count&&(f.count=a.count);"undefined"!=typeof a.start&&(f.start=a.start);if(a.sort){f.sort=[];for(var n=0;n<a.sort.length;n++)f.sort[n]={},f.sort[n].property=a.sort[n].attribute,f.sort[n].ascending=!a.sort[n].descending}c.total=new dojo.Deferred;c.observe=this._observe.bind(this,d);d=function(a,b,e,d){if(e)if(b=dojo.fromJson(d.output),
b.actiontype&&"jsexecute"==b.actiontype)c.reject(),eval(b.action);else{c.total.resolve(b.total);if(this.queryResults_[a]){for(e=0;e<b.data.length;e++)this.queryResults_[a].dataIds.push(this.getIdentity(b.data[e]));0==this.queryResults_[a].observer.length&&setTimeout(this._deleteResultCache.bind(this,a),2E3)}c.resolve(b.data)}else c.reject(d.error)}.bind(this,d);G_SERVER_COM.callServerFunction(g,k,l,f,d);return c},_fetchTotalCountCallback:function(a,b,c){a.onBegin&&a.onBegin.call(b,c,a)},_fetchCallback:function(a,
b,c){for(var d=0;d<c.length;d++)this._index[this.getIdentity(c[d])]=!0;if(a.onItem)for(d=0;d<c.length;d++)a.onItem.call(b,c[d],a);a.onComplete&&a.onComplete.call(b,a.onItem?null:c,a)},fetch:function(a){a=a||{};var b=a.scope||this,c=this._doQuery(a);c.request=a;c.addCallback(this._fetchCallback.bind(this,a,b));c.total.addCallback(this._fetchTotalCountCallback.bind(this,a,b));a.onError&&c.addErrback(function(c){return a.onError.call(b,c,a)});a.abort=function(){c.cancel()};return a},getAttributes:function(a){var b=
[],c;for(c in a)!a.hasOwnProperty(c)||"_"==c.charAt(0)&&"_"==c.charAt(1)||b.push(c);return b},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0,"dojo.data.api.Write":!0,"dojo.data.api.Notification":!0}},getLabel:function(a){for(var b=0;b<this.labelAttributes.length;b++){var c=this.getValue(a,this.labelAttributes[b]);if(c)return c}for(b in a)return a[b]},getLabelAttributes:function(a){return this.labelAttributes},getValue:function(a,b,c){if(b in a)return a[b];if(!a._loadChildren||
"children"!=b)return c},getValues:function(a,b){var c=this.getValue(a,b);return c instanceof Array?c:void 0===c?[]:[c]},hasAttribute:function(a,b){return b in a},isItem:function(a){return"object"==typeof a&&a&&void 0!=this.getIdentity(a)},isItemLoaded:function(a){return a&&!a._loadChildren},_loadItemCallback:function(a,b){var c=a.scope||this;delete b._loadChildren;var d=b instanceof Error?a.onError:a.onItem;d&&d.call(c,b)},loadItem:function(a){var b=a.scope||this;a.item._loadChildren?this.getChildren(a.item,
this._loadItemCallback.bind(this,a)):a.onItem&&a.onItem.call(b,a.item)},deleteItem:function(a){console.error("STORE DELETE NOT IMPLEMENTED: "+JSON.stringify(a));return!0},isDirty:function(a){return this._dirtyItems[this.getIdentity(a)]?!0:!1},newItem:function(a,b){console.error("STORE NEW ITEM NOT IMPLEMENTED: "+JSON.stringify(a)+" - "+JSON.stringify(b));return a},revert:function(){for(var a in this._dirtyItems){for(var b in this._dirtyItems[a])if(this._orgItems[a][b]!=this._dirtyItems[a][b])this.onSet(this._orgItems[a],
b,this._dirtyItems[a][b],this._orgItems[a][b]);delete this._dirtyItems[a];delete this._orgItems[a]}},save:function(a){console.error("SAVE ITEM NOT IMPLEMENTED: "+JSON.stringify(a));var b=a.scope||this,c;for(c in this._dirtyItems)delete this._dirtyItems[c],delete this._orgItems[c];a.onComplete&&a.onComplete.call(b,a)},setValue:function(a,b,c){if(b==this.idAttribute)throw Error("Can not change the identity attribute for an item");var d=a[b];d!=c&&(this._orgItems[this.getIdentity(a)]||(this._orgItems[this.getIdentity(a)]=
dojo.clone(a)),c?a[b]=c:delete a[b],this._dirtyItems[this.getIdentity(a)]=a,this.onSet(a,b,d,c))},setValues:function(a,b,c){if(!lang.isArray(c))throw Error("setValues expects to be passed an Array object as its value");this.setValue(a,b,c)},unsetAttribute:function(a,b){this.setValue(a,b)},onSet:function(a,b,c,d){},onNew:function(a,b){},onDelete:function(a){},fetchItemByIdentity:function(a){return this.fetch({query:this.idAttribute+"="+a.identity,onComplete:a.onItem,onError:a.onError,scope:a.scope})},
getIdentity:function(a){return a[this.idAttribute]},getIdentityAttributes:function(a){return[this.idAttribute]},_observe:function(a,b,c,d){c={};c.listener=b;c.remove=c.cancel=this._removeObserver.bind(this,c);c.queryId=a;this.queryResults_[a].observer.push(b);this.queryResults_[a].observerInfo.push(d||"");return c},invalidateObserver:function(a){delete this.queryResults_[a]},invalidateAllObservers:function(){for(var a in this.queryResults_)delete this.queryResults_[a]},_removeObserver:function(a){if(this.queryResults_[a.queryId]){if(0==
this.queryResults_[a.queryId].dataIds.length)return;var b=dojo.array.indexOf(this.queryResults_[a.queryId].observer,a.listener);-1<b&&(this.queryResults_[a.queryId].observer.splice(b,1),this.queryResults_[a.queryId].observerInfo.splice(b,1))}this._deleteResultCache(a.queryId)},_deleteResultCache:function(a){if(this.queryResults_[a]&&0==this.queryResults_[a].observer.length){if(this.clearClassname){var b=this.clearParams;b.queryid=a;G_SERVER_COM.callServerFunction(this.clearClassname,this.clearFunctionname,
this.clearUidPath,b)}delete this.queryResults_[a]}},get:function(a){var b={};b[this.idAttribute]=a;return b},remove:function(a){if(this.dragClassname){var b=dojo.clone(this.dragParams);dojo.mixin(b,this.params_);b.selected=a;G_SERVER_COM.callServerFunction(this.dragClassname,this.dragFunctionname,this.dragUidPath,b)}},put:function(a,b){if(this.dropClassname){var c=dojo.clone(this.dropParams);dojo.mixin(c,this.params_);c.selected=[];for(var d=0;d<a.length;d++)c.selected.push(this.getIdentity(a[d]));
b.before&&(c.target=b.source?b.source.getIdentity(b.before):this.getIdentity(b.before));b.mousePos&&G_UI_COM.setDropCoords(b.mousePos);G_SERVER_COM.callServerFunction(this.dropClassname,this.dropFunctionname,this.dropUidPath,c)}},_findItemInResultSets:function(a){var b=[],c;for(c in this.queryResults_)for(var d=0;d<this.queryResults_[c].dataIds.length;d++)if(this.queryResults_[c].dataIds[d]==a){b.push({queryId:c,pos:d});break}return b},_findChildrenCallResultSets:function(a){var b=[],c;for(c in this.queryResults_)this.queryResults_[c].parentId==
a&&b.push({queryId:c});return b},_removeChildrenQuerys:function(a){for(var b in this.queryResults_)if(this.queryResults_[b].parentId==a){for(var c=0;c<this.queryResults_[b].dataIds.length;c++)this._removeChildrenQuerys(this.queryResults_[b].dataIds[c]);delete this.queryResults_[b]}},newItems:function(a){for(var b=0;b<a.length;b++){var c=this._findItemInResultSets(this.getIdentity(a[b].item));if(0<c||this._index[this.getIdentity(a[b].item)])console.error("NEW ITEMS: Item "+this.getIdentity(a[b].item)+
" already in store!");else if(0==this._findChildrenCallResultSets(a[b].parentid).length)console.error("NEW ITEMS: Parent "+a[b].parentid+" not found or no children retrieved yet!");else if(""!=a[b].revid){var d=!0,c=this._findItemInResultSets(a[b].revid);if(0<c.length)for(var f=0;f<c.length;f++)if(a[b].parentid==this.queryResults_[c[f].queryId].parentId)for(var d=!1,g=this.queryResults_[c[f].queryId].observer.length,k=0;k<g;k++)a[b].revisprev&&(c[f].pos+=1),this.queryResults_[c[f].queryId].dataIds.splice(c[f].pos,
0,this.getIdentity(a[b].item)),this.queryResults_[c[f].queryId].observer[k](a[b].item,-1,c[f].pos);this._index[a[b].revid]&&(d=!1,this._index[this.getIdentity(a[b].item)]=!0,this.onNew(a[b].item));d&&(""!=a[b].parentid?console.error("RevId "+a[b].revid+" not found in any query for parent item "+a[b].parentid):console.error("RevId "+a[b].revid+" not found in any query"))}else{for(f in this.queryResults_)if(a[b].parentid==this.queryResults_[f].parentId)for(k=0;k<this.queryResults_[f].observer.length;k++)this.queryResults_[f].dataIds.unshift(this.getIdentity(a[b].item)),
this.queryResults_[f].observer[k](a[b].item,-1,0);this._index[this.getIdentity(a[b].item)]=!0;this.onNew(a[b].item)}}},deleteItems:function(a){for(var b=0;b<a.length;b++){var c=!0,d={};d[this.idAttribute]=a[b];var f=this._findItemInResultSets(a[b]);if(0<f.length)for(var c=!1,g=0;g<f.length;g++){this._removeChildrenQuerys(a[b]);this.queryResults_[f[g].queryId].dataIds.splice(f[g].pos,1);for(var k=this.queryResults_[f[g].queryId].observer.length,l=0;l<k;l++)this.queryResults_[f[g].queryId].observer[l](d,
f[g].pos,-1)}this._index[a[b]]&&(noFound=!1,delete this._index[a[b]],this.onDelete(d));c&&console.error("DeleteId "+a[b]+" not found in any query")}},updateItems:function(a){for(var b=!0,c=[],d=0;d<a.length;d++){var f=this._findItemInResultSets(this.getIdentity(a[d]));if(0<f.length)for(var b=!1,g=0;g<f.length;g++)for(var k=this.queryResults_[f[g].queryId].observer.length,l=0;l<k;l++)if(this.queryResults_[f[g].queryId].observerInfo[l]){for(var n=G_UI_COM.getStoreById(this.id).views,p=0;p<n.length;p++)if(n[p].id==
this.queryResults_[f[g].queryId].observerInfo[l]){n=n[p].storeAdapters_;for(p=0;p<n.length;p++)if(n[p].series.name==this.queryResults_[f[g].queryId].query.sId){n[p].objects[f[g].pos].value=a[d].value;break}break}-1==dojo.array.indexOf(c,this.queryResults_[f[g].queryId].observer[l])&&c.push(this.queryResults_[f[g].queryId].observer[l])}else this.queryResults_[f[g].queryId].observer[l](a[d],f[g].pos,f[g].pos);if(this._index[this.getIdentity(a[d])]){var b=!1,q;for(q in a[d])if(q!=this.idAttribute)this.onSet(a[d],
q,"",a[d][q])}b&&console.error("UpdateId "+this.getIdentity(a[d])+" not found in any query")}for(d=0;d<c.length;d++)c[d]()}});dojo.declare("FIRMOS.Tree",dijit.Tree,{constructor:function(a){G_UI_COM.registerStoreView(a.model.store.id,this)},destroy:function(){G_UI_COM.unregisterStoreView(this.model.store.id,this);this.inherited(arguments)},postCreate:function(){this.watch("selectedItems",this.selectionChanged.bind(this));this.inherited(arguments)},getIconClass:function(a,b){if(a._icon_){var c=a._icon_.replace(/[\/\.]/g,
"");G_UI_COM.createCSSRule(c,"background-image: url('"+a._icon_+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");return c}return this.inherited(arguments)},selectionChanged:function(a,b,c){if(c&&0<c.length){if(c[0]._funcclassname_&&c[0]._contentfunc_){var d={};d.classname=c[0]._funcclassname_;d.functionname=c[0]._contentfunc_;d.uidPath=c[0].uidpath?c[0].uidpath instanceof Array?c[0].uidpath:[c[0].uidpath]:[c[0].uid]}d&&G_SERVER_COM.callServerFunction(d.classname,d.functionname,
d.uidPath,null,null,dijit.byId(this.parentId).getParent()._contentId||null)}},refresh:function(){this.dndController.selectNone();this.model.store.clearOnClose=!0;this.model.store.close();this._itemNodesMap={};this.rootNode.state="UNCHECKED";this.model.root.children=null;this.rootNode.destroyRecursive();this.model.constructor(this.model);this.model.root._loadChildren=!0;this.postMixInProperties();this._load()},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=sessionStorage.getItem(this.cookieName);
a&&dojo.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=dojo.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];var c=[],d;for(d in this._openedNodes)c.push(d);sessionStorage.setItem(this.cookieName,c.join(","))}});_ColumnDnDSource=dojo.declare("FIRMOS.ColumnDnDSource",dgrid.ColumnReorder.ColumnDndSource,
{onMouseDown:function(a){a.stopPropagation=function(){};this.inherited(arguments)}});dojo.declare("FIRMOS.ColumnReorder",dgrid.ColumnReorder,{columnDndConstructor:_ColumnDnDSource});_GridDnDSource=dojo.declare("FIRMOS.GridDnDSource",dgrid.DnD.GridSource,{allowNested:!0,checkAcceptance:function(a,b){for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,f=!1,g=0;g<d.length;++g)if(d[g]in this.accept){f=!0;break}if(!f)return!1}return!0},onMouseDown:function(a){a.stopPropagation=function(){};this.inherited(arguments)},
copyState:function(a,b){return!1},getSelectedNodes:function(){if(this.grid.dndDisabled)return[];var a=[];if(!this.current)return[];var b=new dojo.NodeList,c;for(c in this.grid.selection){var d=this.grid.row(c).data;this.grid.dragClasses_&&!(d.dndclass in this.grid.dragClasses_)||d._disabledrag_?a.push(d):b.push(this._selectedNodes[c])}if(0<a.length){b="";for(c=0;c<a.length;c++)b+=", "+this.grid.store.getLabel(a[c]);b=b.substr(2);console.log("Object(s) not dragable "+b);return[]}return b},onDrop:function(a,
b,c){var d=this,f=this._targetAnchor=this.targetAnchor,g=this.grid,k=g.store,f=f&&g.row(f);dojo.Deferred.when(f&&k.get(k.getIdentity(f.data)),function(f){if(d!=a)d.onDropExternal(a,b,c,f);else d.onDropInternal(b,c,f)})},onDropInternal:function(a,b,c){var d=this.grid.store,f=this,g=[];a.forEach(function(a){g.push(f.getObject(a))});d[b&&d.copy?"copy":"put"](g,{before:c,mousePos:this.mousePos_})},onDropExternal:function(a,b,c,d){var f=this.grid.store,g=a.grid,k=[];b.forEach(function(b,c){k.push(a.getObject(b))});
f[c&&f.copy?"copy":"put"](k,{source:g.store,before:d,mousePos:this.mousePos_})},getObject:function(a){return this.grid.row(a).data},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){dojo.dnd.Source.superclass.onMouseMove.call(this,a);var b=dojo.dnd.Manager.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(dojo.dnd.getCopyKeyState(a),
!0))}if(this.isDragging&&(this.mousePos_={x:a.pageX,y:a.pageY},c=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=dojo.domGeo.position(this.current,!0)),c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==dojo.domGeo.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||c!=this.before))if(this._markTargetAnchor(c),this.grid.dropClassesMultiple_||this.grid.dropClassesSimple_)if(this.current)if(a=
this.grid.row(this.current).data,(this.grid.dropClassesSingle_&&a.dndclass in this.grid.dropClassesSingle_&&1==this.grid.selection_.length||this.grid.dropClassesMultiple_&&a.dndclass in this.grid.dropClassesMultiple_)&&!a._disabledrop_){for(var c=!1,d=0;d<b.nodes.length;d++)if(b.source.grid.store.getIdentity(b.source.grid.row(b.nodes[d]))==this.grid.store.getIdentity(a)){c=!0;break}c?b.canDrop(!1):b.canDrop(!0)}else b.canDrop(!1);else b.canDrop(!1);else b.canDrop(!0)}}});dojo.declare("FIRMOS.GridDnD",
dgrid.DnD,{dndAcceptType:["dgrid-row"],dndConstructor:_GridDnDSource,postMixInProperties:function(){this.inherited(arguments);this.dndParams=dojo.mixin(this.dndParams,{accept:this.dndAcceptType})}});dojo.declare("FIRMOS.GridBase",null,{constructor:function(a){if(a.dragClasses){this.dragClasses_={};for(var b=0;b<a.dragClasses.length;b++)this.dragClasses_[a.dragClasses[b]]=!0;delete a.dragClasses}if(a.dropClassesMultiple){this.dropClassesMultiple_={};for(b=0;b<a.dropClassesMultiple.length;b++)this.dropClassesMultiple_[a.dropClassesMultiple[b]]=
!0;delete a.dropClassesMultiple}if(a.dropClassesSingle){this.dropClassesSingle_={};for(b=0;b<a.dropClassesSingle.length;b++)this.dropClassesSingle_[a.dropClassesSingle[b]]=!0;delete a.dropClassesSingle}this.depStores_=[];this.buttons_=[];this.storeRefreshHandler_={};this.selection_=[];this._events=[];G_UI_COM.registerStoreView(a.store.id,this);a.selDepClassname&&(this.id=a.id,G_UI_COM.registerSelDepFunc(a.selDepClassname,a.selDepFunctionname,this))},destroy:function(){G_UI_COM.unregisterStoreView(this.store.id,
this);this.selection={};this.notifyServer();this.selDepClassname&&G_UI_COM.unregisterSelDepFunc(this.selDepClassname,this.selDepFunctionname,this);for(var a=0;a<this.depStores_.length;a++)G_UI_COM.deleteStoreDependency(this.depStores_[a].storeId,this.depStores_[a].refId);for(;0<this._events.length;)this._events.pop().remove();this.inherited(arguments)},getObjectDndType:function(a){return[this.id]},postCreate:function(){this.inherited(arguments);this._events.push(this.on(".dgrid-row:contextmenu",this.onContextMenu.bind(this)));
this._events.push(this.on("dgrid-select",this.onSelect.bind(this)));this._events.push(this.on("dgrid-deselect",this.onDeselect.bind(this)));this._events.push(dojo.aspect.after(this,"expand",this._onExpand.bind(this),!0))},getSelectedIds:function(){var a=[],b;for(b in this.selection)a.push(b);return a},_onExpand:function(a,b,c){b=dojo.query(".firmosIconNode",a.element);for(c=0;c<b.length;c++)if(2==b.length){var d=a.element?a:this.row(a);this._expanded[d.id]?(dojo.style(b[0],"display","none"),dojo.style(b[1],
"display","")):(dojo.style(b[0],"display",""),dojo.style(b[1],"display","none"))}},_renderIconCell:function(a,b,c,d,f,g){c=document.createElement("div");f="<img src='"+a[f]+"' class='firmosIconNode'>";g&&""!=g&&(f=f+"<img src='"+a[g]+"' class='firmosIconNode' style='display:none;'>");c.innerHTML=f+"&nbsp;"+b;return c},_renderDate:function(a,b,c,d){a=document.createElement("div");b&&(a.innerHTML=dojo.date.locale.format(new Date(b),{formatLength:"short"}));return a},_renderIcons:function(a,b,c,d){a=
document.createElement("div");if(!b||""==b)return"";b=b.split(",");c="";for(d=0;d<b.length;d++)c=c+'<img src="'+b[d]+'">';a.innerHTML=c;return a},_selectionChanged:function(){var a=!1,b=this.getSelectedIds();if(b.length!=this.selection_.length)a=!0;else for(var c=0;c<b.length;c++)b[c]!=this.selection_[c]&&(a=!0);a&&(this.selection_=b);return a},onSelect:function(a){if(this._selectionChanged())this.onSelectionChanged(a,this.selection_)},onDeselect:function(a){if(this._selectionChanged())this.onSelectionChanged(a,
this.selection_)},onSelectionChanged:function(a,b){this.refreshDepStores(b);this.refreshButtons(b);this.notifyServer()},updateRow:function(a,b,c,d){if(!b||b.parentNode){b=d.start+c;c=this.id+"-row-"+(d.parentId?d.parentId+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++);var f=(c=dojo.byId(c))&&c.previousSibling;f&&this.adjustRowIndices(f);c.rowIndex=b;a=this.renderRow(a,d);dojo.destroy(c.childNodes[0]);dojo.place(a.childNodes[0],c);dojo.destroy(a);return c}},renderRow:function(a,
b){var c=this.inherited(arguments);if(this.showDetailsSection){var d={params:{}};a._detailsfunc_&&a._funcclassname_?(d.classname=a._funcclassname_,d.functionname=a._detailsfunc_):this.detailsClassname&&(d.classname=this.detailsClassname,d.functionname=this.detailsFunctionname,dojo.mixin(d.params,this.detailsParams),this.detailsUidPath&&(d.uidPath=this.detailsUidPath));if(d.classname){d.params.selected=a.uidpath?a.uidpath instanceof Array?a.uidpath:[a.uidpath]:[a.uid];d.uidPath||(d.uidPath=d.params.selected);
a._detailsfunc_=d;dojo.create("div",{"class":"firmosGridDetailsHidden",id:this.store.getIdentity(a)+"_details_hidden"},c);dojo.create("div",{"class":"firmosGridDetailsLoading",id:this.store.getIdentity(a)+"_details_loading",style:"display:none;"},c);dojo.create("div",{"class":"firmosGridDetails",id:this.store.getIdentity(a)+"_details",style:"display:none;"},c);this.row(a);d=dijit.byId(this.store.getIdentity(a)+"_cc");if(!d){var d=new dijit.layout.ContentPane({id:this.store.getIdentity(a)+"_cc"}),
f=new dijit.layout.ContentPane({id:this.store.getIdentity(a)+"_cp"});d.addChild(f)}dojo.place(d.domNode,c)}}return c},showDetails:function(a){rowId=this.store.getIdentity(a.data);G_UI_COM.setGridDetailsId(rowId);var b=dijit.byId(this.store.getIdentity(a.data)+"_cc");G_SERVER_COM.callServerFunction(a.data._detailsfunc_.classname,a.data._detailsfunc_.functionname,a.data._detailsfunc_.uidPath,a.data._detailsfunc_.params,this.detailsCallback.bind(this),b.getChildren()[0].id);a=dojo.byId(rowId+"_details_hidden");
b=dojo.byId(rowId+"_details_loading");dojo.style(a,"display","none");dojo.style(b,"display","")},detailsCallback:function(a,b,c,d){G_SERVER_COM.handleServerFunctionResponse(a,b,c,d);a=dojo.byId(d.gridDetailsId+"_details_loading");b=dojo.byId(d.gridDetailsId+"_details");dojo.style(a,"display","none");dojo.style(b,"display","");d=dijit.byId(d.gridDetailsId+"_cc");dojo.style(d.domNode,"display","")},hideDetails:function(a){rowId=this.store.getIdentity(a.data);a=dojo.byId(rowId+"_details_hidden");var b=
dojo.byId(rowId+"_details");dojo.style(a,"display","");dojo.style(b,"display","none");a=dijit.byId(rowId+"_cc");dojo.style(a.domNode,"display","none")},onContextMenu:function(a){var b=this.row(a);this.contextMenu._handleGridMenu(a,this,b.data)},_refreshDepStoreViews:function(a){delete this.storeRefreshHandler_[a.store.id];for(var b=0;b<a.views.length;b++)G_UI_COM.refreshView(a.views[b])},refreshDepStore:function(a,b,c){G_UI_COM.setStoreDependency(a,b,"G",c);if(b=G_UI_COM.getStoreById(a))this.storeRefreshHandler_[a]&&
(clearTimeout(this.storeRefreshHandler_[a]),delete this.storeRefreshHandler_[a]),this.storeRefreshHandler_[a]=setTimeout(this._refreshDepStoreViews.bind(this,b),200)},refreshDepStores:function(a){for(var b=0;b<this.depStores_.length;b++)this.refreshDepStore(this.depStores_[b].storeId,this.depStores_[b].refId,a)},refreshButtons:function(a){a=a.length;for(var b=0;b<this.buttons_.length;b++)switch(this.buttons_[b].bType){case "gbd_single":1==a?this.buttons_[b].button.set("disabled",!1):this.buttons_[b].button.set("disabled",
!0);break;case "gbd_multi":0==a?this.buttons_[b].button.set("disabled",!0):this.buttons_[b].button.set("disabled",!1)}},notifyServer:function(){this.selDepClassname&&G_SERVER_COM.callServerFunction(this.selDepClassname,this.selDepFunctionname,this.selDepUidPath,this.selDepParams,null,dijit.byId(this.parentId).getParent()._contentId||null)},registerDepStore:function(a,b){this.depStores_.push({storeId:a,refId:b});this.refreshDepStore(a,b,this.selection_)},registerButton:function(a,b){this.buttons_.push({button:a,
bType:b});a.setGrid(this)},doSearch:function(a){this.store.params_.fulltext=a;this.refresh()}});dojo.declare("FIRMOS.FormButton",dijit.form.Button,{onClick:function(a){a.preventDefault();dojo.stopEvent(a);this._getWidget(dijit.form.Form).disableAllButtons();switch(this.type){case "submit":this.handleTypeSubmit();break;case "button":this.handleTypeButton()}},_getWidget:function(a){for(var b=this.getParent();b&&!b.isInstanceOf(a);)b=b.getParent();return b},handleTypeButton:function(){if(this.closeDialog){var a=
this._getWidget(dijit.Dialog);a&&a.hide()}this.actionClassname&&G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,this.actionParams,this.sfCallback.bind(this));this.downloadId&&(dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),this.downloadId,!0),this.closeDialog||this._getWidget(dijit.form.Form).restoreAllButtons())},handleTypeSubmit:function(){var a=this._getWidget(dijit.form.Form),b=dojo.clone(this.actionParams);a.callServerFunction(this.actionClassname,
this.actionFunctionname,this.actionUidPath,b,this.hiddenFields,this.isDialog)},sfCallback:function(a,b,c,d){this._getWidget(dijit.form.Form).restoreAllButtons();G_SERVER_COM.handleServerFunctionResponse(a,b,c,d)}});dojo.declare("FIRMOS.GridButton",dijit.form.Button,{setGrid:function(a){this.grid_=a},onClick:function(){var a={},b=this.grid_.getSelectedIds(),c;a.dependency=this.grid_.store.params_.dependency;dojo.mixin(a,this.actionParams);a.selected=b;if(this.actionUidPath)c=this.actionUidPath;else if(0<
b.length){var d=this.grid_.row(b[0]);c=[b[0]];d.uidPath?c=d.uidPath:d.uid&&(c=[d.uid])}G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,c,a)}});dojo.declare("FIRMOS.DateTextBox",dijit.form.DateTextBox,{popupClass:"dojox.widget.Calendar",constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_setDisplayedValueAttr:function(a,b){isNaN(a)?this.inherited(arguments):0==Number(a)?this._setValueAttr("",
b,""):this._setValueAttr(new Date(Number(a)),b,new Date(Number(a)))},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.Recurrence",dijit.form._FormValueWidget,{texts:G_TEXTS.recurrence,_selectedRadioCSS:"dijitChecked dijitRadioChecked",_selectedStr:'aria-checked="true"',_rtypeStr:"",_rtypeDetailsStr:"",_startStr:"",
_endStr:"",rtypes:"once minute hour day week month quarter year".split(" "),days:"mo tu we th fr sa su".split(" "),minuteDetails:[{label:"1",value:"1"},{label:"5",value:"5"},{label:"10",value:"10"},{label:"15",value:"15"},{label:"30",value:"30"},{label:"45",value:"45"}],hourDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"6",value:"6"},{label:"12",value:"12"}],dayDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",
value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],monthDetails:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"6",value:"6"}],rtypesVis:[],baseClass:"firmosRecurrenceInput",templateString:"",templateStart:'<div data-dojo-attach-point="wrapperDiv,focusNode" id="${id}" role="presentation">',templateEnd:"</div>",templateDivider:'<div class="firmosRecurrenceDividerContainer"><div class="firmosRecurrenceDivider"></div></div>',templateStartDate:'<div id="${id}_sd"></div><div id="${id}_st"></div>',
templateEndDate:'<div id="${id}_ed"></div><div id="${id}_et"></div>',templateCount:'<div id="${id}_count"></div>',templateCB:'<div data-dojo-attach-point="${value}Div" class="firmosRecurrenceInputItem" role="presentation"><div class="firmosRecurrenceCBContainer"><div class="dijit dijitReset dijitInline dojoxMultiSelectItemBox dijitRadio" role="presentation"><input class="dijitCheckBoxInput" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-event="onclick:_onRadioClick, onmouseover: _onRadioMOver, onmouseout: _onRadioMOut" data-onclick="${onclick}" data-cbid="${value}" type="radio" "/></div><div class="dijitInline dojoxMultiSelectItemLabel" data-dojo-attach-event="onclick:${onclick}" data-cbid="${value}">${caption}</div></div>${details}</div>',
templateonceDetails:"",templateminuteDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_m_detail"></div></div>',templatehourDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_h_detail"></div></div>',templatedayDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_d_detail"></div></div>',
templateweekCB:'<div data-dojo-attach-point="${value}DayDiv" class="dijit dijitReset dijitInline dijitCheckBox" role="presentation"><input class="dijitReset dijitCheckBoxInput" data-onclick="_setWeekDetails" data-day="${value}" type="checkbox" data-dojo-attach-event="onclick:_onBoxClick, onmouseover: _onBoxMOver, onmouseout: _onBoxMOut" style="-moz-user-select: none;"></div>',templateweekDetails:'<div class="dijitInline" style="float:right;">${week_days}</div>',templatemonthDetails:'<div class="dijitInline" style="float:right;"><div class="dijitInline" style="margin: 0 5px;">${caption}:</div><div id="${id}_mo_detail"></div></div>',
templatequarterDetails:"",templateyearDetails:"",constructor:function(a){for(var b="",c=0;c<this.days.length;c++)b=b+this.templateweekCB.replace(/\$\{value\}/g,this.days[c])+this.texts[this.days[c]]+" ";this.templateweekDetails=this.templateweekDetails.replace(/\$\{week_days\}/g,b);this.templateString=this.templateStart;this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.startDate).replace(/\$\{value\}/g,"sd").replace(/\$\{details\}/g,this.templateStartDate).replace(/\$\{onclick\}/g,
"_onSTSelect");this.templateString+=this.templateDivider;for(c=0;c<this.rtypes.length;c++)a["ri"+this.rtypes[c]]&&(this.rtypesVis.push(this.rtypes[c]),this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts[this.rtypes[c]]).replace(/\$\{value\}/g,this.rtypes[c]).replace(/\$\{details\}/g,this["template"+this.rtypes[c]+"Details"].replace(/\$\{caption\}/g,this.texts.interval)).replace(/\$\{onclick\}/g,"_onRTSelect"));this.templateString+=this.templateDivider;this.templateString+=this.templateCB.replace(/\$\{caption\}/g,
this.texts.noEndDate).replace(/\$\{value\}/g,"ned").replace(/\$\{details\}/g,"").replace(/\$\{onclick\}/g,"_onETSelect");this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.endDate).replace(/\$\{value\}/g,"ed").replace(/\$\{details\}/g,this.templateEndDate).replace(/\$\{onclick\}/g,"_onETSelect");this.templateString+=this.templateCB.replace(/\$\{caption\}/g,this.texts.count).replace(/\$\{value\}/g,"count").replace(/\$\{details\}/g,this.templateCount).replace(/\$\{onclick\}/g,
"_onETSelect");this.templateString+=this.templateEnd;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},startup:function(){this.inherited(arguments);this.startDate=new FIRMOS.DateTextBox({style:"float: right;",onChange:this._onSDTChange.bind(this)},this.id+"_sd");this.startTime=new dijit.form.TimeTextBox({style:"float: right;",onChange:this._onSDTChange.bind(this),constraints:{timePattern:"HH:mm",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",
visibleRange:"T01:00:00"}},this.id+"_st");this.endDate=new FIRMOS.DateTextBox({style:"float: right;",onChange:this._onEDTChange.bind(this)},this.id+"_ed");this.endTime=new dijit.form.TimeTextBox({style:"float: right;",onChange:this._onEDTChange.bind(this),constraints:{timePattern:"HH:mm",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T01:00:00"}},this.id+"_et");this.countSelect=new dijit.form.NumberSpinner({style:"float: right; width: 60px;",onChange:this._onCountChange.bind(this),
constraints:{min:1,places:0}},this.id+"_count");this.riminute&&(this.minuteCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setMinuteDetails.bind(this),options:this.minuteDetails},this.id+"_m_detail"),this._setMinuteDetailsUI(""));this.rihour&&(this.hourCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setHourDetails.bind(this),options:this.hourDetails},this.id+"_h_detail"),this._setHourDetailsUI(""));this.riday&&(this.dayCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setDayDetails.bind(this),
options:this.dayDetails},this.id+"_d_detail"),this._setDayDetailsUI(""));this.riweek&&this._setWeekDetailsUI("");this.rimonth&&(this.monthCB=new dijit.form.Select({style:"width: 60px;",onChange:this._setMonthDetails.bind(this),options:this.monthDetails},this.id+"_mo_detail"),this._setMonthDetailsUI(""));this._selectRB(this.sdDiv);this._setValueUI(this.value||"")},_setValueUI:function(a){var b=[];""!=a&&(b=a.split("#"));for(var c=a=!0,d=0;d<b.length;d++)0==b[d].indexOf("DTSTART")?(this._setValueUIStart(b[d]),
a=!1):0==b[d].indexOf("RRULE")?(this._setValueUIRRule(b[d]),c=!1):console.error("Unknown part in recurrence rule definition: "+b[d]);a&&this._setValueUIStart("");c&&this._setValueUIRRule("")},_getChooserTime:function(a){switch(Math.round(a.getMinutes()/15)){case 0:a.setMinutes(0);break;case 1:a.setMinutes(15);break;case 2:a.setMinutes(30);break;case 3:a.setMinutes(45);break;case 4:a.setMinutes(0),a.setHours(a.getHours()+1)}return a},_setValueUIStart:function(a){""==a?(a=this._getChooserTime(new Date),
this.startDate.set("value",a),this.startTime.set("value",a)):(a=this._stringToDateTime(a.substring(8)),this.startDate.set("value",a.date),this.startTime.set("value",a.time))},_setValueUIRRule:function(a){""==a?(this._setRecurrenceTypeUI([]),this._setUntilUI(""),this._setCountUI("")):(a=a.substr(6).split(";"),1<a.length&&0==a[a.length-1].indexOf("UNTIL")?(this._setCountUI(""),this._setUntilUI(a[a.length-1]),a.pop()):(this._setUntilUI(""),1<a.length&&0==a[a.length-1].indexOf("COUNT")?(this._setCountUI(a[a.length-
1]),a.pop()):this._setCountUI("")),this._setRecurrenceTypeUI(a))},_setRecurrenceTypeUI:function(a){var b="";if(0<a.length)switch(a[0].substr(5)){case "MINUTELY":b="minute";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setMinuteDetailsUI(a[1]):this._setMinuteDetailsUI("");break;case "HOURLY":b="hour";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setHourDetailsUI(a[1]):this._setHourDetailsUI("");break;case "DAILY":b="day";1<a.length&&0==a[1].indexOf("INTERVAL")?this._setDayDetailsUI(a[1]):this._setDayDetailsUI("");
break;case "WEEKLY":b="week";1<a.length&&0==a[1].indexOf("BYDAY")?this._setWeekDetailsUI(a[1]):this._setWeekDetailsUI("");break;case "MONTHLY":1<a.length&&"INTERVAL=3"==a[1]?b="quarter":(b="month",1<a.length&&0==a[1].indexOf("INTERVAL")?this._setMonthDetailsUI(a[1]):this._setMonthDetailsUI(""));break;case "YEARLY":b="year"}if(""==b||!this[b+"Div"])for(a=0;a<this.rtypes.length;a++)if(this[this.rtypes[a]+"Div"]){b=this.rtypes[a];break}for(a=0;a<this.rtypesVis.length;a++)this._unselectRB(this[this.rtypesVis[a]+
"Div"]);this._selectRB(this[b+"Div"]);this._setRecurrenceType(b)},_setUntilUI:function(a){""==a?(this._selectRB(this.nedDiv),this._unselectRB(this.edDiv),this._unselectRB(this.countDiv),a=new Date,a.setFullYear(a.getFullYear()+1),a=this._getChooserTime(a),this.endDate.set("value",a),this.endTime.set("value",a),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0)):(this._selectRB(this.edDiv),this._unselectRB(this.nedDiv),this._unselectRB(this.countDiv),a=this._stringToDateTime(a.substring(6)),
this.endDate.set("value",a.date),this.endTime.set("value",a.time),this.endDate.set("disabled",!1),this.endTime.set("disabled",!1));this.countSelect.set("disabled",!0)},_setCountUI:function(a){""==a?(this._selectRB(this.nedDiv),this._unselectRB(this.edDiv),this._unselectRB(this.countDiv),this.countSelect.set("value",1),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!0)):(this._selectRB(this.countDiv),this._unselectRB(this.nedDiv),this.countSelect.set("value",
Number(a.substring(6))),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!1))},_setForeverUI:function(){},_internalSetValue:function(){this.value=this._startStr;""!=this._rtypeStr&&(this.value=this.value+"#"+this._rtypeStr+this._rtypeDetailsStr+this._endStr)},_setRecurrenceType:function(a){this._disableDetails();this._rtypeDetailsStr="";if(a==this.rtypes[0])this._rtypeStr="",this._disableEndBlock(!0);else switch(this._disableEndBlock(!1),a){case this.rtypes[1]:this._disableMinuteDetails(!1);
this._setMinuteDetails();this._rtypeStr="RRULE:FREQ=MINUTELY";break;case this.rtypes[2]:this._disableHourDetails(!1);this._setHourDetails();this._rtypeStr="RRULE:FREQ=HOURLY";break;case this.rtypes[3]:this._disableDayDetails(!1);this._setDayDetails();this._rtypeStr="RRULE:FREQ=DAILY";break;case this.rtypes[4]:this._disableWeekDetails(!1);this._setWeekDetails();this._rtypeStr="RRULE:FREQ=WEEKLY";break;case this.rtypes[5]:this._disableMonthDetails(!1);this._setMonthDetails();this._rtypeStr="RRULE:FREQ=MONTHLY";
break;case this.rtypes[6]:this._rtypeStr="RRULE:FREQ=MONTHLY;INTERVAL=3";break;case this.rtypes[7]:this._rtypeStr="RRULE:FREQ=YEARLY"}this._internalSetValue()},_setMinuteDetailsUI:function(a){""==a?this.minuteCB.set("value",this.minuteDetails[0].id):(a=a.substr(9),this.minuteCB.set("value",a))},_setHourDetailsUI:function(a){""==a?this.hourCB.set("value",this.hourDetails[0].id):(a=a.substr(9),this.hourCB.set("value",a))},_setDayDetailsUI:function(a){""==a?this.dayCB.set("value",this.dayDetails[0].id):
(a=a.substr(9),this.dayCB.set("value",a))},_setWeekDetailsUI:function(a){for(var b=0;b<this.days.length;b++)this._unselectCB(this[this.days[b]+"DayDiv"]);if(""==a)b=(new Date).getDay(),0==b?b=6:b--,this._selectCB(this[this.days[b]+"DayDiv"]);else for(a=a.substr(6).split(","),b=0;b<a.length;b++)this._selectCB(this[a[b].toLowerCase()+"DayDiv"])},_setMonthDetailsUI:function(a){""==a?this.monthCB.set("value",this.monthDetails[0].id):(a=a.substr(9),this.monthCB.set("value",a))},_setMinuteDetails:function(){var a=
this.minuteCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setHourDetails:function(){var a=this.hourCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setDayDetails:function(){var a=this.dayCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_setWeekDetails:function(){for(var a=[],b=0;b<this.days.length;b++)this._isSelectedCB(this[this.days[b]+"DayDiv"])&&a.push(this.days[b].toUpperCase());
this._rtypeDetailsStr=a.join(",");0<this._rtypeDetailsStr.length&&(this._rtypeDetailsStr=";BYDAY="+this._rtypeDetailsStr);this._internalSetValue()},_setMonthDetails:function(){var a=this.monthCB.get("value");this._rtypeDetailsStr="1"!=a?";INTERVAL="+a:"";this._internalSetValue()},_disableDetails:function(){this._disableMinuteDetails(!0);this._disableHourDetails(!0);this._disableDayDetails(!0);this._disableWeekDetails(!0);this._disableMonthDetails(!0)},_disableMinuteDetails:function(a){this.minuteCB.set("disabled",
a)},_disableHourDetails:function(a){this.hourCB.set("disabled",a)},_disableDayDetails:function(a){this.dayCB.set("disabled",a)},_disableWeekDetails:function(a){if(a)for(a=0;a<this.days.length;a++)this._disableCB(this[this.days[a]+"DayDiv"]);else for(a=0;a<this.days.length;a++)this._enableCB(this[this.days[a]+"DayDiv"])},_disableMonthDetails:function(a){this.monthCB.set("disabled",a)},_disableEndBlock:function(a){a?(this._disableRB(this.edDiv),this._disableRB(this.nedDiv),this.endDate.set("disabled",
!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!0)):(this._enableRB(this.edDiv),this._enableRB(this.nedDiv),this._isSelectedRB(this.edDiv)&&(this.endDate.set("disabled",!1),this.endTime.set("disabled",!1)),this._isSelectedRB(this.countDiv)&&this.countSelect.set("disabled",!1))},_onCountChange:function(){this._endStr=";COUNT="+this.countSelect.get("value");this._internalSetValue()},_onEDTChange:function(){this._endStr=";UNTIL="+this._dateTimeToString(this.endDate.get("value"),
this.endTime.get("value"));this._internalSetValue()},_onSDTChange:function(){this._startStr="DTSTART:"+this._dateTimeToString(this.startDate.get("value"),this.startTime.get("value"));this._internalSetValue()},_stringToDateTime:function(a){var b={};a=a.split("T");b.date=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)));1<a.length&&(b.time=new Date(Number(a[0].substr(0,4)),Number(a[0].substr(4,2))-1,Number(a[0].substr(6,2)),Number(a[1].substr(0,2)),Number(a[1].substr(2,
2)),Number(a[1].substr(4,2))),7==a[1].length&&"Z"==a[6]&&b.time.setMinutes(b.time.getMinutes()+b.time.getTimezoneOffset()));return b},_dateTimeToString:function(a,b){var c=""+a.getFullYear();9>a.getMonth()&&(c+="0");c+=a.getMonth()+1;10>a.getDate()&&(c+="0");c+=a.getDate();c+="T";10>b.getHours()&&(c+="0");c+=b.getHours();10>b.getMinutes()&&(c+="0");c+=b.getMinutes();10>b.getSeconds()&&(c+="0");return c+=b.getSeconds()},_onSTSelect:function(a){},_onETSelect:function(a){switch(a.target.getAttribute("data-cbid")){case "ned":this._selectRB(this.nedDiv);
this._unselectRB(this.edDiv);this._unselectRB(this.countDiv);this._endStr="";this.endDate.set("disabled",!0);this.endTime.set("disabled",!0);this.countSelect.set("disabled",!0);break;case "ed":this._selectRB(this.edDiv);this._unselectRB(this.nedDiv);this._unselectRB(this.countDiv);this.endDate.set("disabled",!1);this.endTime.set("disabled",!1);this.countSelect.set("disabled",!0);this._endStr=";UNTIL="+this._dateTimeToString(this.endDate.get("value"),this.endTime.get("value"));break;case "count":this._selectRB(this.countDiv),
this._unselectRB(this.nedDiv),this._unselectRB(this.edDiv),this.endDate.set("disabled",!0),this.endTime.set("disabled",!0),this.countSelect.set("disabled",!1),this._endStr=";COUNT="+this.countSelect.get("value")}this._internalSetValue()},_onRTSelect:function(a){for(var b=0;b<this.rtypesVis.length;b++)this._unselectRB(this[this.rtypesVis[b]+"Div"]);this._selectRB(this[a.target.getAttribute("data-cbid")+"Div"]);this._setRecurrenceType(a.target.getAttribute("data-cbid"))},_disableRB:function(a){dojo.addClass(a.childNodes[0].childNodes[0],
"dijitDisabled");dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioDisabled");this._isSelectedRB(a)&&(dojo.addClass(a.childNodes[0].childNodes[0],"dijitCheckedDisabled"),dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioCheckedDisabled"))},_enableRB:function(a){dojo.removeClass(a.childNodes[0].childNodes[0],"dijitDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitCheckedDisabled");dojo.removeClass(a.childNodes[0].childNodes[0],
"dijitRadioCheckedDisabled")},_unselectRB:function(a){dojo.removeClass(a.childNodes[0].childNodes[0],"dijitChecked");dojo.removeClass(a.childNodes[0].childNodes[0],"dijitRadioChecked")},_selectRB:function(a){dojo.addClass(a.childNodes[0].childNodes[0],"dijitChecked");dojo.addClass(a.childNodes[0].childNodes[0],"dijitRadioChecked");dojo.hasClass(a.childNodes[0].childNodes[0],"dijitHover")&&(dojo.addClass(a.childNodes[0].childNodes[0],"dijitCheckedHover"),dojo.addClass(a.childNodes[0].childNodes[0],
"dijitRadioCheckedHover"))},_isSelectedRB:function(a){return dojo.hasClass(a.childNodes[0].childNodes[0],"dijitChecked")},_disableCB:function(a){dojo.addClass(a,"dijitDisabled");dojo.addClass(a,"dijitCheckBoxDisabled");this._isSelectedCB(a)&&(dojo.addClass(a,"dijitCheckedDisabled"),dojo.addClass(a,"dijitCheckBoxCheckedDisabled"))},_enableCB:function(a){dojo.removeClass(a,"dijitDisabled");dojo.removeClass(a,"dijitCheckBoxDisabled");dojo.removeClass(a,"dijitCheckedDisabled");dojo.removeClass(a,"dijitCheckBoxCheckedDisabled")},
_unselectCB:function(a){dojo.removeClass(a,"dijitChecked");dojo.removeClass(a,"dijitCheckBoxChecked");dojo.removeClass(a,"dijitCheckedHover");dojo.removeClass(a,"dijitCheckBoxCheckedHover")},_selectCB:function(a){dojo.addClass(a,"dijitChecked");dojo.addClass(a,"dijitCheckBoxChecked");dojo.hasClass(a,"dijitHover")&&(dojo.addClass(a,"dijitCheckedHover"),dojo.addClass(a,"dijitCheckBoxCheckedHover"))},_isSelectedCB:function(a){return dojo.hasClass(a,"dijitChecked")},_onBoxClick:function(a){dojo.hasClass(a.target.parentNode,
"dijitDisabled")||("true"==a.target.getAttribute("aria-checked")?(a.target.setAttribute("aria-checked",!1),this._unselectCB(a.target.parentNode)):(a.target.setAttribute("aria-checked",!0),this._selectCB(a.target.parentNode)),this[a.target.getAttribute("data-onclick")](a))},_onBoxMOver:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.addClass(a.target.parentNode,"dijitHover"),dojo.addClass(a.target.parentNode,"dijitCheckBoxHover"),dojo.hasClass(a.target.parentNode,"dijitChecked")&&
(dojo.addClass(a.target.parentNode,"dijitCheckBoxCheckedHover"),dojo.addClass(a.target.parentNode,"dijitCheckedHover")))},_onBoxMOut:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.removeClass(a.target.parentNode,"dijitHover"),dojo.removeClass(a.target.parentNode,"dijitCheckBoxHover"),dojo.removeClass(a.target.parentNode,"dijitCheckBoxCheckedHover"),dojo.removeClass(a.target.parentNode,"dijitCheckedHover"))},_onRadioClick:function(a){if(!dojo.hasClass(a.target.parentNode,"dijitDisabled"))this[a.target.getAttribute("data-onclick")](a)},
_onRadioMOver:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.addClass(a.target.parentNode,"dijitHover"),dojo.addClass(a.target.parentNode,"dijitRadioHover"),dojo.hasClass(a.target.parentNode,"dijitChecked")&&(dojo.addClass(a.target.parentNode,"dijitRadioCheckedHover"),dojo.addClass(a.target.parentNode,"dijitRadioHover")))},_onRadioMOut:function(a){dojo.hasClass(a.target.parentNode,"dijitDisabled")||(dojo.removeClass(a.target.parentNode,"dijitHover"),dojo.removeClass(a.target.parentNode,
"dijitRadioHover"),dojo.removeClass(a.target.parentNode,"dijitRadioCheckedHover"),dojo.removeClass(a.target.parentNode,"dijitRadioHover"))},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.FileUpload",dojox.form.Uploader,{required:!1,constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),
delete a.grouprequired):this.groupRequired=!1;a.disabled&&(setTimeout(this.set.bind(this,"disabled",!0),0),delete a.disabled)},_isEmpty:function(){return""==this.getValue()},isValid:function(a){return!this.required||!this._isEmpty()},validate:function(a){var b="",c=this.disabled||this.isValid(a);dojo.setAttr(this.focusNode,"aria-invalid",c?"false":"true");b=this.getErrorMessage(a);this.set("message",b);return c},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form",
"validate",this.lang)},getErrorMessage:function(a){return this.messages.missingMessage},_createInput:function(){this.inherited(arguments);"image"==this.usefilter&&dojo.setAttr(this.inputNode,"accept","image/*")},_onFocus:function(){this.focused=!0;this.displayMessage(this.message);this.inherited(arguments)},_onBlur:function(){this.focused=!1;this.displayMessage("");this.inherited(arguments)},displayMessage:function(a){a&&this.focused?dijit.Tooltip.show(a,this.titleNode):dijit.Tooltip.hide(this.titleNode)},
_setRequiredAttr:function(a){this._set("required",a);dojo.setAttr(this.focusNode,"aria-required",a)},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.FileUpload.Image",dojox.form.uploader._Base,{uploaderId:"",uploader:null,_upCheckCnt:0,
imgheight:100,imgwidth:100,imgabs:!1,templateString:'<div class="firmosUploaderImage"></div>',constructor:function(a){this._events=[]},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},postCreate:function(){this.inherited(arguments);this.setUploader();this.value?this._createImageTag(this.value):this.contentDiv=dojo.create("div",{"class":"firmosUploaderImageContent",style:"height:"+this.imgheight+"px; width:"+this.imgwidth+"px"},this.domNode)},_createImageTag:function(a){this.contentImg=
dojo.create("img",{"class":"firmosUploaderImageContent",style:this.imgabs?"height:"+this.imgheight+"px; width:"+this.imgwidth+"px":"max-height:"+this.imgheight+"px; max-width:"+this.imgwidth+"px",src:a},this.domNode)},setUploader:function(){if(this.uploaderId||this.uploader){if(this.uploaderId&&!this.uploader&&(this.uploader=dijit.byId(this.uploaderId),!this.uploader)){this._upCheckCnt++;5<this._upCheckCnt?console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload found with id "+this.uploaderId):
setTimeout(this.setUploader.bind(this),250);return}this._events.push(dojo.connect(this.uploader,"onChange",this.selectionChange.bind(this)));this._events.push(dojo.connect(this.uploader,"reset",this.selectionReset.bind(this)))}else console.error("FIRMOS.FileUpload.Image: No FIRMOS.FileUpload set.")},onloadCallback:function(a){this.contentImg?dojo.setAttr(this.contentImg,"src",a.target.result):(dojo.destroy(this.contentDiv),this._createImageTag(a.target.result))},selectionChange:function(){var a=new FileReader;
a.onload=this.onloadCallback.bind(this);a.readAsDataURL(this.uploader._files[0])},selectionReset:function(){console.log("selectionReset")}});dojo.declare("FIRMOS.Form",dijit.form.Form,{constructor:function(a){this.sendChanged=dojo.fromJson(a.sendchanged);this.displayOnly=dojo.fromJson(a.displayonly);delete a.sendchanged;this.groupRequiredFields={};a.dbos&&(this.id=a.id,G_UI_COM.registerFormDBOs(this,a.dbos));a.onChangeClassname&&(this._lastChange=new Date,this._sendChangesParams={},this.sendChangesDelay=
Number(a.onChangeDelay)||0)},destroy:function(){this.dbos&&G_UI_COM.unregisterFormDBOs(this.id,this.dbos);this.inherited(arguments)},onSubmit:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)if(a[b].isInstanceOf(FIRMOS.FormButton)&&"submit"==a[b].type){a[b].handleTypeSubmit();break}return!1},onShow:function(a){this.inherited(arguments);this.sendChanged&&(this.initialData=this.get("value"));for(var b=this.getChildren(),c=0;c<b.length;c++)if(b[c].name){this.displayOnly&&(b[c].isInstanceOf(FIRMOS.FormButton)||
b[c].set("disabled",!0));b[c].isInstanceOf(FIRMOS.BoolCheckBox)&&b[c].updateDepFields(b);b[c].isInstanceOf(FIRMOS.FilteringSelect)&&b[c].init();var d=b[c].name.split(".");d.pop();0==d.length?b[c].groupRequired&&(b[c].set("required",!0),d=dojo.byId(b[c].id+"_label"),dojo.removeClass(d,"firmosFormLabel"),dojo.addClass(d,"firmosFormLabelRequired")):(d=d.join("."),this.groupRequiredFields[d]||(this.groupRequiredFields[d]={},this.groupRequiredFields[d].grf=[],this.groupRequiredFields[d].required=!1,this.groupRequiredFields[d].fields=
[]),b[c].groupRequired&&this.groupRequiredFields[d].grf.push(b[c].id),this.groupRequiredFields[d].fields.push(b[c].id))}for(c in this.groupRequiredFields)if(0==this.groupRequiredFields[c].grf.length)delete this.groupRequiredFields[c];else for(b=0;b<this.groupRequiredFields[c].fields.length;b++)if(d=dijit.byId(this.groupRequiredFields[c].fields[b]),!d.isInstanceOf(FIRMOS.BoolCheckBox)&&(d=d.get("value"))&&""!=d){this._setGroupRequired(c,!0);break}},_setGroupRequired:function(a,b){for(var c=0;c<this.groupRequiredFields[a].grf.length;c++){dijit.byId(this.groupRequiredFields[a].grf[c]).set("required",
b);var d=dojo.byId(this.groupRequiredFields[a].grf[c]+"_label");b?(dojo.removeClass(d,"firmosFormLabel"),dojo.addClass(d,"firmosFormLabelRequired")):(dojo.removeClass(d,"firmosFormLabelRequired"),dojo.addClass(d,"firmosFormLabel"))}this.groupRequiredFields[a].required=b},checkGroupRequiredFields:function(a){if(!a.isInstanceOf(FIRMOS.BoolCheckBox)){var b=a.name.split(".");b.pop();if(0<b.length&&(b=b.join("."),this.groupRequiredFields[b]))if((newValue=a.get("value"))&&""!=newValue)this.groupRequiredFields[b].required||
this._setGroupRequired(b,!0);else{for(a=0;a<this.groupRequiredFields[b].fields.length;a++){var c=dijit.byId(this.groupRequiredFields[b].fields[a]);if(!c.isInstanceOf(FIRMOS.BoolCheckBox)&&(c=c.get("value"))&&""!=c)return}this._setGroupRequired(b,!1)}}},submitOnChange:function(a){if(this.onChangeClassname&&(!a||!a.get("disabled"))){var b=new Date;a&&(this._lastChange=b,this._sendChangesParams[a.name]=a.get("value"));a=b-this._lastChange;a>this.sendChangesDelay?(dojo.clone(this.onChangeParams),G_SERVER_COM.callServerFunction(this.onChangeClassname,
this.onChangeFunctionname,this.onChangeUidPath,this._sendChangesParams),this._sendChangesParams={}):(this._sendTimeout&&clearTimeout(this._sendTimeout),this._sendTimeout=setTimeout(this.submitOnChange.bind(this),this.sendChangesDelay-a))}},_clearObject:function(a,b){for(var c in a)if(a[c]instanceof Array){if(a[c].length==b[c].length){for(var d=!0,f=0;f<a[c].length;f++)if(a[c][f]!=b[c][f]){d=!1;break}d&&delete a[c]}}else if(a[c]instanceof Date||b[c]instanceof Date)a[c]instanceof Date&&b[c]instanceof
Date&&a[c].getTime()==b[c].getTime()&&delete a[c];else if("object"==typeof a[c]){this._clearObject(a[c],b[c]);d=!0;for(f in a[c]){d=!1;break}d&&delete a[c]}else a[c]==b[c]&&delete a[c]},_convertObjectData:function(a){for(var b in a)if(a[b]instanceof Array)for(var c=0;c<a[b].length;c++)a[b][c]instanceof Date&&(a[b][c]=a[b][c].getTime());else a[b]instanceof Date?a[b]=a[b].getTime():"object"==typeof a[b]&&this._convertObjectData(a[b])},_getValueAttr:function(){for(var a=this.inherited(arguments),b=this.getChildren(),
c=0;c<b.length;c++)b[c].name&&b[c]._ignore&&a[b[c].name]&&delete a[b[c].name];return a},_handleFiles:function(a,b,c,d,f,g){for(var k=this.getChildren(),l=[],n=0;n<k.length;n++)if(k[n].name&&k[n].isInstanceOf(FIRMOS.FileUpload)&&k[n]._files)for(var p=0;p<k[n]._files.length;p++)l.push({field:k[n].name,file:k[n]._files[p]});0<l.length?this._sendFiles(a,b,c,d,f,g,l):this._sendData(a,b,c,d,f,g)},_sendFilesCallback:function(a,b,c,d,f,g,k){0==k.length?this._sendData(a,b,c,d,f,g):this._sendFiles(a,b,c,d,
f,g,k)},_sendFiles:function(a,b,c,d,f,g,k){var l=k.pop(),n=l.file,p={data:{}};p.data.size=n.size;p.data.name=n.name;p.data.type=n.type;p.data.field=l.field;p.data.fieldIdx=0;p.data.chunksize=n.size;p.data.chunkIdx=0;a=this._sendFilesCallback.bind(this,a,b,c,d,f,g,k);G_SERVER_COM.callServerFunction("FIRMOS","binaryBulkTransfer",null,p,a,null,n)},_sendData:function(a,b,c,d,f,g){d.data=this.get("value");this.submitData=dojo.clone(d.data);this.sendChanged&&this._clearObject(d.data,this.initialData);this._convertObjectData(d.data);
dojo.mixin(d.data,f);g&&G_UI_COM.isDialogAction();G_SERVER_COM.callServerFunction(a,b,c,d,this.submitCallback.bind(this))},callServerFunction:function(a,b,c,d,f,g){if(!this.validate())return this.restoreAllButtons(),!1;this._handleFiles(a,b,c,d,f,g)},submitCallback:function(a,b,c,d){this.restoreAllButtons();G_SERVER_COM.handleServerFunctionResponse(a,b,c,d)},disableAllButtons:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b]._orgState=a[b].get("disabled"),
a[b].set("disabled",!0))},restoreAllButtons:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)a[b].isInstanceOf(FIRMOS.FormButton)&&(a[b].set("disabled",a[b]._orgState),delete a[b]._orgState)},_updateValues:function(a,b){for(var c in a)if("uid"!=c)if(c instanceof Object)if(c instanceof Array){var d=this._getInputById(b+c);d&&d.set("value",a[c])}else this._updateValues(a[c],b+c+".");else(d=this._getInputById(b+c))&&(d.isInstanceOf(FIRMOS.DateTextBox)?d.set("displayedValue",a[c]):d.set("value",
a[c]))},updateValues:function(a){this._updateValues(a,"")},_getInputById:function(a){for(var b=this.getChildren(),c=0;c<b.length;c++)if(b[c].name==a)return b[c];return null}});dojo.declare("FIRMOS.ToolbarButton",dijit.form.Button,{onClick:function(){this.downloadId&&dojo.io.iframe.setSrc(dojo.byId("FirmOSDownload"),this.downloadId,!0);this.actionClassname&&G_SERVER_COM.callServerFunction(this.actionClassname,this.actionFunctionname,this.actionUidPath,this.actionParams)}});dojo.declare("FIRMOS.Toolbar",
dijit.Toolbar,{constructor:function(a){},postCreate:function(){this.inherited(arguments);for(var a=0;a<this.menuDef.length;a++){if(this.menuDef[a].menu){var b={style:"display: none;"};this.menuDef[a].id&&(b.id=this.menuDef[a].id);var b=new dijit.DropDownMenu(b),c=G_UI_COM.addMenuEntries(b,this.menuDef[a].menu,this.menuDef[a].disabled);b.set("disabled",c);c={label:this.menuDef[a].caption,dropDown:b,disabled:c};c=new dijit.form.DropDownButton(c);b._parentUIElement=c}else{b=this.menuDef[a];c={};b.action&&
(c.actionClassname=b.action["class"],c.actionFunctionname=b.action.func,c.actionUidPath=b.action.uidPath,c.actionParams=b.action.params);b.downloadId&&(c.downloadId=b.downloadId);""==b.caption?c.showLabel=!1:c.label=b.caption;if(b.icon){var d=b.icon.replace(/[\/\.]/g,"");G_UI_COM.createCSSRule(d,"background-image: url('"+b.icon+"');background-repeat: no-repeat; height: 18px;text-align: center;width: 18px;");c.iconClass=d}b.disabled&&(c.disabled=!0);b.id&&(c.id=b.id);c=new FIRMOS.ToolbarButton(c)}this.addChild(c)}}});
dojo.declare("FIRMOS.Menu",dijit.Menu,{_clearEntries:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)this.removeChild(a[b]),a[b].destroyRecursive()},setCoords:function(a,b){this._openMyselfArgs||(this._openMyselfArgs={});this._openMyselfArgs.coords={x:a,y:b}},entriesLoaded:function(a){this._clearEntries();G_UI_COM.addMenuEntries(this,a,!1);this.startup();this._openMyself(this._openMyselfArgs,!0)},_openMyself:function(a,b){if(b)this.inherited(arguments,[a]);else switch(this.cType){case "tree":this._openMyselfArgs=
a;this._handleTreeMenu(a);break;default:0<this.getChildren().length&&this.inherited(arguments)}},_handleTreeMenu:function(a){var b=dijit.getEnclosingWidget(a.target);a={};var c,d;if(b.isInstanceOf(dijit._TreeNode)){var f=b.item,g=b.tree;dojo.mixin(a,g.model.store.params_);b=f.uidpath?f.uidpath instanceof Array?f.uidpath:[f.uidpath]:[f.uid];f._menufunc_&&f._funcclassname_?(c=f._funcclassname_,d=f._menufunc_):this.treeItemClassname&&(c=this.treeItemClassname,d=this.treeItemFunctionname,dojo.mixin(a,
this.treeItemParams),this.treeItemUIDPath&&(b=this.treeItemUIDPath));if(0<b.length||g.model.store.getIdentity(f)!=b[0])a.selected=[g.model.store.getIdentity(f)]}else g=b,dojo.mixin(a,g.model.store.params_),c=this.treeClassname,d=this.treeFunctionname,b=this.treeUidPath,dojo.mixin(a,this.treeParams);if(c){for(;g&&!g.isInstanceOf(dijit.Tree);)g=g.getParent();G_UI_COM.setMenu(this);G_SERVER_COM.callServerFunction(c,d,b,a)}},_handleGridMenu:function(a,b,c){this._openMyselfArgs={target:a.target,coords:{x:a.pageX,
y:a.pageY}};a=dojo.clone(b.store.params_);var d={};d.uidPath=c.uidpath?c.uidpath instanceof Array?c.uidpath:[c.uidpath]:[c.uid];c._menufunc_&&c._funcclassname_?(d.classname=c._funcclassname_,d.functionname=c._menufunc_):this.gridClassname&&(d.classname=this.gridClassname,d.functionname=this.gridFunctionname,dojo.mixin(a,this.gridParams),this.gridUIDPath&&(d.uidPath=this.gridUIDPath));if(d&&d.classname){b=b.getSelectedIds();if(1<b.length||0<d.uidPath.length||b[0]!=d.uidPath[0])a.selected=b;G_UI_COM.setMenu(this);
G_SERVER_COM.callServerFunction(d.classname,d.functionname,d.uidPath,a)}}});dojo.declare("FIRMOS.FilteringSelect",dijit.form.FilteringSelect,{_hidden:!1,constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1;a.depGroup?(this.depGroup=dojo.fromJson(a.depGroup),delete a.depGroup):this.depGroup=[]},_updateDepField:function(a,b){var c=dojo.byId(a.inputId+"_tr");if(c){dijit.byId(a.inputId);for(var d=c.querySelectorAll("[widgetid]"),
f=[],g=0;g<d.length;g++)f[g]=dijit.byId(d[g].getAttribute("widgetid"));if(b||a.value!=this.value)for(dojo.style(c,"display","none"),g=0;g<f.length;g++)a.ignoreHidden&&(f[g]._ignore=!0,f[g].get("required")&&(f[g]._required=!0,f[g].set("required",!1))),f[g].isInstanceOf(FIRMOS.FilteringSelect)&&f[g].hide();else for(dojo.style(c,"display",""),g=0;g<f.length;g++)delete f[g]._ignore,f[g]._required&&(f[g].set("required",f[g]._required),delete f[g]._required),f[g].isInstanceOf(FIRMOS.FilteringSelect)&&f[g].unhide()}},
hide:function(){this._hidden=!0;this._hideAllDepFields()},unhide:function(){this._hidden=!1;this._updateDepGroup()},_updateDepGroup:function(){for(var a=0;a<this.depGroup.length;a++)this._updateDepField(this.depGroup[a])},_hideAllDepFields:function(){for(var a=0;a<this.depGroup.length;a++)this._updateDepField(this.depGroup[a],!0)},init:function(){""==this.value&&(this.required||this._required)&&0<this.store.data.length&&this.set("value",this.store.data[0].value);this._hidden?this._hideAllDepFields():
this._updateDepGroup()},onChange:function(a){this.inherited(arguments);this._hidden||this._updateDepGroup();for(var b=this.getParent();b&&!b.isInstanceOf(dijit.form.Form);)b=b.getParent();b&&b.isInstanceOf(FIRMOS.Form)&&(b.checkGroupRequiredFields(this),b.submitOnChange(this))}});dojo.declare("FIRMOS.BoolCheckBox",dijit.form.CheckBox,{constructor:function(a){a.dependentfields?(this.depFields=dojo.fromJson(a.dependentfields),this.hasDepFields=!0,delete a.dependentfields):(this.hasDepFields=!1,this.depFields=
{});a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},updateDepFields:function(a){for(var b in this.depFields)for(var c=0;c<a.length;c++)if(b==a[c].name){"true"==this.get("value")&&this.depFields[b]||"false"==this.get("value")&&!this.depFields[b]?a[c].set("disabled",!0):a[c].set("disabled",!1);break}},onChange:function(){this.inherited(arguments);if(this.hasDepFields){for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();
this.updateDepFields(a.getChildren())}},_getValueAttr:function(){return this.checked?"true":"false"}});dojo.declare("FIRMOS.MultiValText",dijit.form.Textarea,{constructor:function(a){a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_getValueAttr:function(){var a=this.inherited(arguments);return""==a?[]:a.split("\n")},filter:function(a){var b="object"==typeof a?this.inherited(arguments,[a.join("\n")]):this.inherited(arguments),b=b.replace(/\n+/g,
"\n");b.lastIndexOf("\n")==b.length-1&&(b=b.substring(0,b.length-1));return b},_setBlurValue:function(){},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.ValidationTextBox",dijit.form.ValidationTextBox,{constructor:function(a){a.forbiddenchars?(this.regExpForbidden=eval(a.forbiddenchars),delete a.forbiddenchars):
this.regExpForbidden=null;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},isValid:function(a){if(this.confirms){var b=this.getParent()._getInputById(this.confirms);if(this.get("value")!=b.get("value"))return!1}return this.inherited(arguments)},validate:function(a){if(this.regExpForbidden){var b=this.textbox.selectionStart,c=this.textbox.value.length,d=this.textbox.value.replace(this.regExpForbidden,"");d.length<c&&(this.textbox.value=d,c-=d.length,
this.textbox.selectionStart=b-c,this.textbox.selectionEnd=b-c)}return this.inherited(arguments)},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.NumberTextBox",dijit.form.NumberTextBox,{constructor:function(a){a.constraints||(a.constraints={});this.regExpForbidden=a.constraints.places&&0==a.constraints.places?
/[^\d\-]/g:/[^\d\.\,\-]/g;a.grouprequired?(this.groupRequired=eval(a.grouprequired),delete a.grouprequired):this.groupRequired=!1},_setBlurValue:function(){},validate:function(a){var b=this.textbox.selectionStart,c=this.textbox.value.length,d=this.textbox.value.replace(this.regExpForbidden,"");d.length<c&&(this.textbox.value=d,c-=d.length,this.textbox.selectionStart=b-c,this.textbox.selectionEnd=b-c);return this.inherited(arguments)},_getValueAttr:function(){var a=this.inherited(arguments);isNaN(a)&&
(a="");return a},onChange:function(){this.inherited(arguments);for(var a=this.getParent();a&&!a.isInstanceOf(dijit.form.Form);)a=a.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&(a.checkGroupRequiredFields(this),a.submitOnChange(this))}});dojo.declare("FIRMOS.NumberSlider",dijit.form._FormValueWidget,{templateString:'<div data-dojo-attach-point="focusNode" id="${id}" role="presentation"><div id="${id}_number"></div><div id="${id}_slider"></div></div>',constructor:function(a){a.constraints=dojo.fromJson(a.constraints);
this.sliderParams={};this.sliderParams.minimum=a.constraints.min;this.sliderParams.maximum=a.constraints.max;a.constraints.steps&&(this.sliderParams.discreteValues=a.constraints.steps);this.sliderParams.value=a.value;this.sliderParams.intermediateChanges=a.intermediateChanges;a.showvalue&&(this.showvalue=eval(a.showvalue),delete a.showvalue);this.showvalue&&(this.sliderParams.style="width:75%;",this.numberParams={},this.numberParams.style="width:20%; float:right;",this.numberParams.value=a.value,
this.numberParams.places=a.constraints.places,this.numberParams.disabled=!0);this._multi=1;for(var b=0;b<a.constraints.places;b++)this._multi*=10},startup:function(){this.inherited(arguments);this.sliderParams.onChange=this._onSliderChange.bind(this);this.showvalue&&(this.number=new dijit.form.NumberTextBox(this.numberParams,this.id+"_number"));this.slider=new dijit.form.HorizontalSlider(this.sliderParams,this.id+"_slider")},_onSliderChange:function(){if(Math.round(this.slider.get("value")*this._multi)/
this._multi!=this.value){this.value=Math.round(this.slider.get("value")*this._multi)/this._multi;this.showvalue&&this.number.set("value",this.value);var a=this.getParent();a&&a.isInstanceOf(FIRMOS.Form)&&a.submitOnChange(this)}}});dojo.declare("FIRMOS.TabContainer",dijit.layout.TabContainer,{constructor:function(){this.watch("selectedChildWidget",this.tabChange)},addTabs:function(a){a.sort(G_UI_COM.sortFuncSubSecOrd);for(var b=0;b<a.length;b++)this.addChild(a[b]),G_UI_COM.showSectionPathInProgress||
!a[b].selected||a[b]._fixContent||this.tabChange("",null,a[b])},contentLoadedCallback:function(a,b,c,d,f){G_SERVER_COM.handleServerFunctionResponse(b,c,d,f);a._loadedCallback&&(a._loadedCallback(),delete a._loadedCallback)},selectChild:function(a,b){b&&(a._fixContent?b():a._loadedCallback=b);!a._fixContent&&a.selected&&this.tabChange("",null,a);this.inherited(arguments)},selectDefault:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)if(a[b].selected){this.selectChild(a[b]);break}},tabChange:function(a,
b,c){if(c._fixContent){var d=[];this._getDescendants(c,d,"visibilityChange");for(a=0;a<d.length;a++)d[a].visibilityChange(!0)}else G_SERVER_COM.callServerFunction(c._contentFunc["class"],c._contentFunc.func,c._contentFunc.uidPath,c._contentFuncParams,this.contentLoadedCallback.bind(this,c),c._updateId);this.UIStateChangeClass&&(a=this.UIStateChangeParams,a.sectionId=c.id,G_SERVER_COM.callServerFunction(this.UIStateChangeClass,this.UIStateChangeFunc,this.UIStateChangeUidPath,a));if(b)if(b._fixContent)for(c=
[],this._getDescendants(b,c,"visibilityChange"),a=0;a<c.length;a++)c[a].visibilityChange(!1);else{c=[];this._getDescendants(b,c,"destroyNotify");if(0<c.length){d=[];for(a=0;a<c.length;a++)d.push(c[a].id);G_SERVER_COM.callServerFunction("FIRMOS","destroy",null,{ids:d})}c=null;if(b.isTCElem)for(b=b.getChildren(),a=0;a<b.length;a++){if(!b[a].isInstanceOf(FIRMOS.Toolbar)){b=b[a].getChildren();0<b.length&&(c=b[0]);break}}else c=b.getChildren()[0];c&&c.destroyRecursive()}},_getDescendants:function(a,b,
c){a[c]&&b.push(a);for(var d=a.getChildren(),f=0;f<d.length;f++)a.isInstanceOf(FIRMOS.TabContainer)&&!d[f].selected||this._getDescendants(d[f],b,c)},getChild:function(a){for(var b=this.getChildren(),c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null}});dojo.declare("FIRMOS.MultiContentTabController",null,{constructor:function(){this.domNode=dojo.create("div")},startup:function(){},destroy:function(){dojo.destroy(this.domNode)}});dojo.declare("FIRMOS.MultiContentContainer",FIRMOS.TabContainer,
{baseClass:"firmosMultiContentContainer",constructor:function(a){this.animationSpeed=20;this.animationStep=0.1;this.controllerWidget=FIRMOS.MultiContentTabController},addTabs:function(a){this.inherited(arguments);for(var b=0;b<a.length;b++)a[b].domNode.style.position="absolute"},_animateHideChild:function(a,b){0>b?(a.domNode.style.opacity=0,this.hideChildTO=null,this._hideChild(a,!0)):(a.domNode.style.opacity=b,this.hideChildTO=setTimeout(this._animateHideChild.bind(this,a,b-this.animationStep),this.animationSpeed))},
_hideChild:function(a,b){this.hideChildTO?(clearTimeout(this.hideChildTO),this.hideChildTO=null,this.inherited(this.hideArgs),this.hideArgs=arguments):this.hideArgs||(this.hideArgs=arguments);b?(this.inherited(this.hideArgs),this.hideArgs=null):this._animateHideChild(a,1)},_animateShowChild:function(a,b){1<b?(this.showChildTO=null,a.domNode.style.opacity=1):(a.domNode.style.opacity=b,this.showChildTO=setTimeout(this._animateShowChild.bind(this,a,b+this.animationStep),this.animationSpeed))},_showChild:function(a){this.showChildTO&&
(clearTimeout(this.showChildTO),this.showChildTO=null);this.inherited(arguments);a.domNode.style.opacity=0;this._animateShowChild(a,0)}});dojo.declare("FIRMOS.SplitContainer",dijit.layout.BorderContainer,{addChildren:function(a){var b;if(2<a.length){b=a.shift();b.region="top";var c=100-b._height;b.set("style","height: "+b._height+"%;");this.addChild(b);b=a.pop();b.region="bottom";c-=b._height;b.set("style","height: "+b._height+"%;");this.addChild(b);b=new FIRMOS.SplitContainer({id:this.id+"_child",
"class":"borderContainer",region:"center",gutters:!1});b.set("style","height: "+c+"%;");for(var d=0;d<a.length;d++)a[d]._height=a[d]._height/c*100;this.addChild(b);b.addChildren(a)}else 2==a.length&&(b=a.shift(),b.region="top",b.set("style","height: "+b._height+"%;"),this.addChild(b)),b=a.pop(),b.region="center",b.set("style","height: "+b._height+"%;"),this.addChild(b)}});dojo.declare("FIRMOS.GridFilter",null,{texts:G_TEXTS.gridfilter,renderHeader:function(){this.inherited(arguments);if(!this.filterDisabled)for(var a=
dojo.query(".dgrid-cell",this.headerNode),b=0;b<a.length;b++){var c=a[b].columnId;if(this.columns[c]&&this.columns[c].filterable&&this.columns[c].dataType&&"ICO"!=this.columns[c].dataType){var d=dijit.byId(this.id+"_"+c+"_ddb");if(!d){switch(this.columns[c].dataType){case "STR":var f=this.getStringFilterDialog(this.columns[c]),g="setStringFilter";break;case "DAT":f=this.getDateFilterDialog(this.columns[c]);g="setDateFilter";break;case "NUM":case "PRG":f=this.getNumberFilterDialog(this.columns[c]);
g="setNumberFilter";break;case "BOO":f=this.getBooleanFilterDialog(this.columns[c]);g="setBooleanFilter";break;default:console.error('Grid filter error: Unknown data type set for column "'+this.columns[c].label.replace(/"/g,'"')+'": '+this.columns[c].dataType)}var f='<form dojoType="dijit.form.Form" id="'+this.id+"_"+c+'" onsubmit="return false;"><table style="width:100%">'+f+'<tr><td colspan="2" class="firmosGridFilterDialogButtons"><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.'+
g+"('"+c+"',ttd.formValues); ttd.ddbutton.closeDropDown();\">"+this.texts.setButton+'</button><button data-dojo-type="dijit.form.Button" type="button" onClick="var ttd=this.getParent().getParent(); ttd.formValues=ttd.getChildren()[0].reset(); ttd.formValues=ttd.getChildren()[0].get(\'value\'); ttd.grid.clearFilter(\''+c+"'); ttd.ddbutton.closeDropDown();\">"+this.texts.clearButton+"</button></td></tr></table></form>",k=new dijit.TooltipDialog({id:this.id+"_"+c+"_td","class":"firmosGridFilterDialog"+
this.columns[c].dataType,content:f,onShow:function(a){this.formValues=this.getChildren()[0].get("value")},onOpen:function(a){this.getChildren()[0].set("value",this.formValues)},grid:this}),d=new dijit.form.DropDownButton({id:this.id+"_"+c+"_ddb",label:"",dropDown:k,"class":"firmosGridFilter",iconClass:"firmosGridFilterIconClass",onClick:function(a){a.preventDefault();dojo.stopEvent(a);return!1}});k.ddbutton=d}a[b].appendChild(d.domNode)}}},clearFilter:function(a){G_UI_COM.deleteStoreDependency(this.store.id,
a);a=dojo.query(".firmosGridFilter",this.column(a).headerNode);dojo.removeClass(a[0],"firmosGridFilterSet");this.refresh()},setStringFilter:function(a,b){""==b.filter?this.clearFilter(a):(G_UI_COM.setStoreDependency(this.store.id,a,"SS",[b.filter]),this.filterSet(a))},setNumberFilter:function(a,b){if(b.type==this.texts.numberOptions.gtlt){if(""==b.value1&&""==b.value2){this.clearFilter(a);return}}else if(""==b.value){this.clearFilter(a);return}switch(b.type){case this.texts.numberOptions.eq:G_UI_COM.setStoreDependency(this.store.id,
a,"R8",[b.value],"EX");break;case this.texts.numberOptions.lt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value],"LE");break;case this.texts.numberOptions.gt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value],"GT");break;case this.texts.numberOptions.gtlt:G_UI_COM.setStoreDependency(this.store.id,a,"R8",[b.value1,b.value2],"REXB")}this.filterSet(a)},setDateFilter:function(a,b){if(b.type==this.texts.dateOptions.gtlt){if(!b.value1&&!b.value2){this.clearFilter(a);return}}else if(!b.value){this.clearFilter(a);
return}switch(b.type){case this.texts.dateOptions.eq:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"EX");break;case this.texts.dateOptions.lt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"LE");break;case this.texts.dateOptions.gt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value],"GT");break;case this.texts.dateOptions.gtlt:G_UI_COM.setStoreDependency(this.store.id,a,"DT",[b.value1,b.value2],"REXB")}this.filterSet(a)},setIconFilter:function(a,b){this.filterSet(a)},
setBooleanFilter:function(a,b){G_UI_COM.setStoreDependency(this.store.id,a,"BO",[b.filter]);this.filterSet(a)},filterSet:function(a){a=dojo.query(".firmosGridFilter",this.column(a).headerNode);dojo.addClass(a[0],"firmosGridFilterSet");this.refresh()},getStringFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><label for="'+this.id+"_"+a.id+'_filter">'+this.texts.filterLabel+'</label></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="dijit.form.TextBox" id="'+
this.id+"_"+a.id+'_filter" name="filter" style="width:100%"></td></tr>'},numberFilterTypeChange:function(a,b,c){c=dijit.byId(b+"_value");var d=dijit.byId(b+"_value1");b=dijit.byId(b+"_value2");a==this.texts.numberOptions.gtlt?(dojo.style(c.domNode,"display","none"),dojo.style(d.domNode,"display",""),dojo.style(b.domNode,"display","")):(dojo.style(c.domNode,"display",""),dojo.style(d.domNode,"display","none"),dojo.style(b.domNode,"display","none"))},dateFilterTypeChange:function(a,b,c){c=dijit.byId(b+
"_value");var d=dijit.byId(b+"_value1");b=dijit.byId(b+"_value2");a==this.texts.dateOptions.gtlt?(dojo.style(c.domNode,"display","none"),dojo.style(d.domNode,"display",""),dojo.style(b.domNode,"display","")):(dojo.style(c.domNode,"display",""),dojo.style(d.domNode,"display","none"),dojo.style(b.domNode,"display","none"))},getNumberFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.numberFilterTypeChange(value,\''+
this.id+"_"+a.id+"',this);}\"><option>"+this.texts.numberOptions.eq+"</option><option>"+this.texts.numberOptions.lt+"</option><option>"+this.texts.numberOptions.gt+"</option><option>"+this.texts.numberOptions.gtlt+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.NumberTextBox" id="'+
this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},getDateFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><select id="'+this.id+"_"+a.id+'_type" data-dojo-type="dijit.form.ComboBox" style="width:100%" name="type" data-dojo-props="onChange:function(value) {var ttd=this.getParent().getParent(); ttd.grid.dateFilterTypeChange(value,\''+this.id+"_"+a.id+"',this);}\"><option>"+this.texts.dateOptions.eq+"</option><option>"+this.texts.dateOptions.lt+
"</option><option>"+this.texts.dateOptions.gt+"</option><option>"+this.texts.dateOptions.gtlt+'</option></select></td><td class="firmosGridFilterFormInputTD"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value" name="value" style="width:100%"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value1" name="value1" style="display: none; width:45%; float: left;"><input data-dojo-type="FIRMOS.DateTextBox" id="'+this.id+"_"+a.id+'_value2" name="value2" style="display: none; width:45%; float: right;"></td></tr>'},
getIconFilterDialog:function(a){return""},getBooleanFilterDialog:function(a){return'<tr><td class="firmosGridFilterFormLabelTD"><label for="'+this.id+"_"+a.id+'_filter">'+this.texts.filterLabel+'</label></td><td class="firmosGridFilterFormInputTD"><select data-dojo-type="dojox.form.CheckedMultiSelect" style="width:100%" id="'+this.id+"_"+a.id+'_filter" name="filter" value="true"><option value="true">Yes</option><option value="false">No</option></select></td></tr>'}});dojo.declare("FIRMOS.StoreSeries",
null,{constructor:function(a,b,c,d){this.chartId=d;this.store=a;this.kwArgs=b;this.value=c?"function"==typeof c?c:"object"==typeof c?function(a){var b={},e;for(e in c)b[e]=a[c[e]];return b}:function(a){return a[c]}:function(a){return a.value};this.data=[];this._initialRendering=!1;this.fetch()},destroy:function(){this.observeHandle&&this.observeHandle.remove()},setSeriesObject:function(a){this.series=a},fetch:function(){function a(){b.data=dojo.array.map(b.objects,function(a){return b.value(a,b.store)});
b._pushDataChanges()}this.objects=[];var b=this;this.observeHandle&&this.observeHandle.remove();var c=this.store.query(this.kwArgs.query,this.kwArgs);dojo.Deferred.when(c,function(c){b.objects=c;a()});c.observe&&(this.observeHandle=c.observe(a,!0,this.chartId))},_pushDataChanges:function(){this.series&&(this.series.chart.updateSeries(this.series.name,this,this._initialRendering),this._initialRendering=!1,this.series.chart.delayedRender())}});dojo.declare("FIRMOS.D3Chart",dijit.layout.ContentPane,
{constructor:function(a){for(var b in a)this[b]=a[b];if(!this.seriesColor)for(this.seriesColor=[],b=0;b<this.seriesCount;b++)this.seriesColor[b]="000";G_UI_COM.createCSSRule("d3axis path, .axis line","fill: none;shape-rendering: crispedges;stroke: #000000;");this._events=[];this.scale_y=this.scale_x=this.chartCaption=this.clipPathRect=this.clipPath=this.svgMainG=this.svg=this.container=null;this.margin={top:20,right:20,bottom:20,left:40};this.axisYG=this.axisY=null;this.stopped=!0;this.axisXG=this.axisX=
null;this.axisXMargin=0;this.legend=this.axisYG=this.axisY=null;this.legendItems=[];this.legendSize=0;this.newLines=[];switch(a.type){case "lct_line":this.dataIdx=0;this.buffer=[];this._animationTime=this.updateInterval;this._animationStart_1=new Date;this._animationStart_2=new Date;this._oldAnimationTime_2=this._oldAnimationTime_1=this.updateInterval;this._dataToLate=this._doNotCalc=0;break;case "lct_column":this.data=[],this.rects=[]}this.dummyData=this.dataMin-this.dataMax;this.domainX=[];if("lct_line"==
a.type||"lct_sampledline"==a.type)this.interpolation="linear",this.path=[],this.line=[],this.data=[];G_UI_COM.registerLiveChart(this)},visibilityChange:function(a){a?this.start():this.stop()},destroy:function(){this.stop();G_UI_COM.unregisterLiveChart(this);for(this._removeSeriesCSS();0<this._events.length;)this._events.pop().remove();this.inherited(arguments)},redefine:function(a){var b=!1;a.caption&&this.caption!=a.caption&&(this.caption=a.caption,this.chartCaption.text(this.caption));a.dataLabels&&
(this.dataLabels=a.dataLabels);if(a.dataCount&&this.dataCount!=a.dataCount){switch(this.type){case "lct_line":this.domainX=[1,a.dataCount-2];for(var c=0;c<this.seriesCount;c++)if(a.dataCount>this.dataCount)for(var d=0;d<a.dataCount-this.dataCount;d++)this.data[c].unshift(this.dummyData);else for(d=0;d<this.dataCount-a.dataCount;d++)this.data[c].shift();break;case "lct_sampledline":this.domainX=[0,a.dataCount-1];break;case "lct_column":this.domainX=this.dataLabels?d3.range(a.dataCount).map(function(a){return this.dataLabels[a]}.bind(this)):
d3.range(a.dataCount).map(function(a){return a})}this.dataCount=a.dataCount;this.scale_x.domain(this.domainX)}if(a.dataLabels||a.dataCount&&this.dataCount!=a.dataCount)this.axisXG.call(this.axisX).selectAll("text").style("text-anchor","end"),this._adjustAxisX(),b=!0;(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)&&this._removeSeriesCSS();a.seriesColor&&(this.seriesColor=a.seriesColor);if(a.seriesCount&&this.seriesCount!=a.seriesCount){if(a.seriesCount>this.seriesColor.length)for(c=
this.seriesColor.length;c<a.seriesCount;c++)this.seriesColor[c]="000";else if(a.seriesCount<this.seriesColor.length)for(c=this.seriesColor.length-1;c>=a.seriesCount;c--)this.seriesColor.pop();if(a.seriesCount>this.seriesCount)for(c=this.seriesCount;c<a.seriesCount;c++){if("lct_line"==this.type){this.buffer[c]=[];for(var f=0==this.seriesCount?this.bufferSize+1:this.buffer[0].length,d=0;d<f;d++)this.buffer[c][d]=this.dummyData;0==this.seriesCount?setTimeout(this.updateData.bind(this,c),0):this.newLines.push(c)}if("lct_line"==
this.type||"lct_sampledline"==this.type)this.data[c]=d3.range(this.dataCount).map(function(){return this.dummyData}.bind(this)),this._createLine(c)}else for(c=this.seriesCount-1;c>=a.seriesCount;c--)if("lct_line"==this.type&&this.buffer.pop(),"lct_line"==this.type||"lct_sampledline"==this.type)this.data.pop(),this.line.pop(),this.path.pop().remove();this.seriesCount=a.seriesCount}(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)&&this._createSeriesCSS();if(this.legendLabels&&(a.seriesColor||
a.seriesCount&&this.seriesCount!=a.seriesCount)||a.legendLabels)this.legendLabels?this.legend.remove():(this.margin.bottom+=20,b=!0),a.legendLabels&&(this.legendLabels=a.legendLabels);b&&(this.height=dojo.position(this.container).h-this.margin.top-this.margin.bottom,this.clipPathRect.attr("height",this.height),this.scale_y.range([this.height,0]),this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")"));if(a.dataMin||a.dataMax)a.dataMin&&(this.dataMin=a.dataMin),a.dataMax&&(this.dataMax=
a.dataMax),this.scale_y.domain([this.dataMin,this.dataMax]),this.axisYG.call(this.axisY);(this.legendLabels&&(a.seriesColor||a.seriesCount&&this.seriesCount!=a.seriesCount)||a.legendLabels)&&this._paintLegend();this._paintData()},_removeSeriesCSS:function(){for(var a=0;a<this.seriesCount;a++)G_UI_COM.removeCSSRule("series"+this.id+"_"+a)},_createSeriesCSS:function(){if("lct_line"==this.type||"lct_sampledline"==this.type)for(var a=0;a<this.seriesCount;a++)G_UI_COM.createCSSRule("series"+this.id+"_"+
a,"fill: none; stroke: #"+this.seriesColor[a]+"; stroke-width: 1.5px;");if("lct_column"==this.type)for(a=0;a<this.seriesCount;a++)G_UI_COM.createCSSRule("series"+this.id+"_"+a,"fill: #"+this.seriesColor[a])},_paintData:function(){switch(this.type){case "lct_line":case "lct_sampledline":this.scale_x.range([0,this.width]);for(var a=0;a<this.seriesCount;a++)this.path[a].attr("d",this.line[a]);break;case "lct_column":this.scale_x.rangeRoundBands([0,this.width],0.1),this._paintColumns()}},applyScale:function(){var a=
dojo.position(this.container);this.width=a.w-this.margin.left-this.margin.right;this.height=a.h-this.margin.top-this.margin.bottom;this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom);this.clipPathRect.attr("width",this.width).attr("height",this.height);this.scale_y.range([this.height,0]);this.axisYG.call(this.axisY);this._paintData();this.axisXG&&this.axisXG.attr("transform","translate(0,"+this.height+")").call(this.axisX).selectAll("text").style("text-anchor",
"end");this.chartCaption&&this.chartCaption.attr("x",this.width/2).attr("y",-(this.margin.top-20))},postCreate:function(){this.inherited(arguments);this.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%;"></div>');this.set("style","overflow: hidden");setTimeout(this.createChart.bind(this),0)},stop:function(){this.stopped=!0;this.sfParams.action="stop";G_SERVER_COM.callServerFunction(this.sfClass,this.sfFunc,this.sfUidPath,this.sfParams)},start:function(){if(this.stopped){this.stopped=
!1;switch(this.type){case "lct_line":for(var a=0;a<this.seriesCount;a++)this._createLine(a);for(a=this.dataIdx=0;a<this.seriesCount;a++){this.buffer[a]=[];for(var b=0;b<=this.bufferSize;b++)this.buffer[a][b]=this.dummyData}break;case "lct_sampledline":for(a=0;a<this.seriesCount;a++)this._createLine(a)}this.initClass?G_SERVER_COM.callServerFunction(this.initClass,this.initFunc,this.initUidPath,this.initParams,this._initCallback.bind(this)):this._start()}},_initData:function(){for(var a=0;a<this.seriesCount;a++)this.data[a]=
d3.range(this.dataCount).map(function(){return this.dummyData}.bind(this))},_createLine:function(a){this.line[a]=d3.svg.line().interpolate(this.interpolation).x(function(a,b){return this.scale_x(b)}.bind(this)).y(function(a,b){return this.scale_y(a)}.bind(this));this.path[a]=this.svgMainG.append("g").attr("clip-path","url(#clip)").append("path").data([this.data[a]]).attr("class","series"+this.id+"_"+a).attr("d",this.line[a])},_initCallback:function(a,b,c,d){if(b){a=dojo.fromJson(c.output);switch(this.type){case "lct_line":for(b=
0;b<a.length;b++){c=this.bufferSize+1;d=!0;this.buffer[b]=[];for(var f=a[b].length-1;0<=f;f--)if(d)c--,this.buffer[b][c]=a[b][f],0==c&&(d=!1,c=this.dataCount);else if(c--,this.data[b][c]=a[b][f],0==c)break;if(d&&0<c)for(f=c-1;0<=f;f--)this.buffer[b][f]=this.dummyData;d&&(c=this.dataCount);if(0<c)for(f=c-1;0<=f;f--)this.data[b][f]=this.dummyData}if(this.seriesCount>a.length)for(b=a.length;b<this.seriesCount;b++)this._fillWithDummyData(b);break;case "lct_sampledline":case "lct_column":this.setData(a)}this._start()}else console.error("Server Function Error => "+
c.cn+"."+c.fn+": "+c.error)},_start:function(){this.sfParams.action="start";G_SERVER_COM.callServerFunction(this.sfClass,this.sfFunc,this.sfUidPath,this.sfParams);switch(this.type){case "lct_line":this._animationStart_1=new Date-this.updateInterval;this._animationStart_2=this._animationStart_1-this.updateInterval;this._oldAnimationTime_2=this._oldAnimationTime_1=this.updateInterval;for(var a=this._doNotCalc=0;a<this.seriesCount;a++)this.updateData(a)}},setData:function(a,b){if(!this.stopped)switch(this.type){case "lct_line":this._setLineData(a,
b);break;case "lct_sampledline":this._setSampledLineData(a);break;case "lct_column":this._setColumnData(a)}},_setSampledLineData:function(a){if(this._setCompleteData(a))for(a=0;a<this.seriesCount;a++)this.path[a].attr("d",this.line[a])},_setLineData:function(a,b){if(a.length!=this.seriesCount)console.error("Live Chart "+this.id+": received data points count ("+a.length+") does not match series count ("+this.seriesCount+")");else if(this.dataIdx==b){for(var c=0;c<this.seriesCount;c++)this.buffer[c].push(a[c]);
this.dataIdx++}else if(b<this.dataIdx)this._dataToLate=10*this.bufferSize;else for(c=0;c<this.seriesCount;c++){for(var d=0;d<b-this.dataIdx;d++)this.buffer[c].push(this.dummyData);this.buffer[c].push(a[c]);this.dataIdx=this.dataIdx+(b-this.dataIdx)+1}},_setColumnData:function(a){this._setCompleteData(a)&&this._paintColumns()},_setCompleteData:function(a){if(a.length!=this.seriesCount)return console.error("Live Chart "+this.id+": received data sets count ("+a.length+") does not match series count ("+
this.seriesCount+")"),!1;for(var b=0;b<this.seriesCount;b++)for(var c=0;c<a[b].length;c++){if(a[b].length!=this.dataCount)return console.error("Live Chart "+this.id+": received data count ("+a[b].length+") for set "+b+" does not match data count ("+this.dataCount+")"),!1;this.data[b][c]=a[b][c]}return!0},updateData:function(a){if(!this.stopped)if(this.seriesCount<=a)this._doNotCalc&&(this._doNotCalc=this._doNotClac-1);else{if(0==this.buffer[a].length){this.dataIdx++;for(var b=0;b<this.seriesCount;b++)this.buffer[b].push(this.dummyData)}this.data[a].push(this.buffer[a].shift());
if(this._doNotCalc)this._doNotCalc=this._doNotClac-1;else for(this._doNotCalc=this.seriesCount-1,this._animationTime=this.updateInterval-(this._animationStart_1-this._animationStart_2-this._oldAnimationTime_2),this._animationTime<this.updateInterval/2&&(this._animationTime=this.updateInterval/2),this.buffer[a].length>this.bufferSize&&(this._animationTime-=this.updateInterval/10),this.buffer[a].length<this.bufferSize&&(this._dataToLate=10),this._dataToLate&&(this._dataToLate-=1,this._animationTime+=
this.updateInterval/10),this._oldAnimationTime_2=this._oldAnimationTime_1,this._oldAnimationTime_1=this._animationTime,this._animationStart_2=this._animationStart_1,this._animationStart_1=new Date;0<this.newLines.length;)setTimeout(this.updateData.bind(this,this.newLines.pop()),0);this.path[a].attr("d",this.line[a]).attr("transform",null).transition().duration(this._animationTime).ease("linear").attr("transform","translate("+this.scale_x(0)+")").each("end",this.updateData.bind(this,a));this.data[a].shift()}},
createChart:function(){this.container=dojo.byId(this.id+"_container");this._initData();this._createSeriesCSS();""!=this.caption&&(this.margin.top+=20);this.legendLabels&&(this.margin.bottom+=20);var a=dojo.position(this.container);this.svg=d3.select(this.container).append("svg").attr("width",a.w).attr("height",a.h);this.svgMainG=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");this.width=a.w-this.margin.left-this.margin.right;""!=this.captiom&&(this.chartCaption=
this.svgMainG.append("text").attr("x",this.width/2).attr("y",-(this.margin.top-20)).attr("text-anchor","middle").attr("class","firmosLiveChartCaption").text(this.caption));switch(this.type){case "lct_line":this.domainX=[1,this.dataCount-2];this.scale_x=d3.scale.linear().domain(this.domainX).range([0,this.width]);break;case "lct_sampledline":this.domainX=[0,this.dataCount-1];this.scale_x=d3.scale.linear().domain(this.domainX).range([0,this.width]);break;case "lct_column":this.domainX=this.dataLabels?
d3.range(this.dataCount).map(function(a){return this.dataLabels[a]}.bind(this)):d3.range(this.dataCount).map(function(a){return a}),this.scale_x=d3.scale.ordinal().domain(this.domainX).rangeRoundBands([0,this.width],0.1)}this.dataLabels&&(this.axisX=d3.svg.axis().scale(this.scale_x).orient("bottom"),this.axisXG=this.svgMainG.append("g").attr("class","x d3axis").call(this.axisX),this._adjustAxisX());this.height=a.h-this.margin.top-this.margin.bottom;this.axisXG&&this.axisXG.attr("transform","translate(0,"+
this.height+")");this.legendLabels&&this._paintLegend();this.clipPath=this.svgMainG.append("defs").append("clipPath").attr("id","clip");this.clipPathRect=this.clipPath.append("rect").attr("width",this.width).attr("height",this.height);this.scale_y=d3.scale.linear().domain([this.dataMin,this.dataMax]).range([this.height,0]);this.axisY=d3.svg.axis().scale(this.scale_y).ticks(this.dataTickHint).orient("left");this.axisYG=this.svgMainG.append("g").attr("class","y d3axis").call(this.axisY);this.start();
this._events.push(dojo.connect(this,"resize",this.applyScale.bind(this)))},_adjustAxisX:function(){var a=0;this.axisXG.selectAll("text").style("text-anchor","end").attr("transform",function(a){return"rotate(-90)"}).attr("transform",function(b){b=this.getBoundingClientRect();ySpace=b.bottom-b.top;ySpace>a&&(a=ySpace);return"rotate(-90) translate(-5,"+(b.left-b.right)+")"});this.margin.bottom=this.margin.bottom-this.axisXMargin+a;this.axisXMargin=a},_paintLegend:function(){this.legendSize=0;this.legend=
this.svgMainG.append("g");for(var a=0;a<this.seriesCount;a++){this.legendItems[a]=this.legend.append("g").attr("class","legend");this.legendItems[a].append("rect").attr("x",this.legendSize).attr("y",-5).attr("width",18).attr("height",2).style("fill","#"+this.seriesColor[a]);this.legendSize+=25;var b=this.legendItems[a].append("text").attr("x",this.legendSize).text(this.legendLabels[a]);this.legendSize=this.legendSize+b[0][0].getBBox().width+20}this.legentSize=this.legendSize-20;this.legend.attr("transform",
"translate("+(this.width/2-this.legendSize/2)+","+(this.height+this.margin.top-10)+")")},_paintColumns:function(){for(var a=0;a<this.seriesCount;a++){var b=this.svgMainG.selectAll(".series"+this.id+"_"+a).data(this.data[a]);b.enter().append("rect").attr("class","series"+this.id+"_"+a);var c=0<this.dataMin?this.dataMin:0;b.attr("x",function(a,b){return this.scale_x(this.domainX[b])}.bind(this)).attr("width",this.scale_x.rangeBand()).attr("y",function(a,b){return this.scale_y(a)}.bind(this)).attr("height",
function(a,b){return a<this.dataMin?0:this.scale_y(c)-this.scale_y(a)}.bind(this));b.exit().remove()}}});dojo.declare("FIRMOS.Chart",dojox.charting.widget.Chart,{constructor:function(a){this.store_=a.store;this.type=a.type;this.seriesIds_=a.seriesids;this.title=a.title;this.storeAdapters_=[];if(a.labels){this.labels_=[];for(var b="ct_column"==this.type?1:0,c=0;c<a.labels.length;c++)this.labels_[c]={value:c+b,text:a.labels[c]}}G_UI_COM.registerStoreView(a.store.id,this)},destroy:function(){for(var a=
0;a<this.storeAdapters_.length;a++)this.storeAdapters_[a].destroy();G_UI_COM.unregisterStoreView(this.store.id,this);this.inherited(arguments);this.firstRenderListener_&&(this.firstRenderListener_.remove(),this.firstRenderListener_=null)},_getValueFunc:function(a){var b={};b.y=a.value;a.color&&(b.color=a.color);a.text&&(b.text=a.text);a.legend&&(b.legend=a.legend);return b},_addSeries:function(){this.chart.setTheme(dojox.charting.themes.Firmos);for(var a=0;a<this.seriesIds_.length;a++)this.storeAdapters_.push(new FIRMOS.StoreSeries(this.store_,
{query:{sId:this.seriesIds_[a]}},this._getValueFunc,this.id)),this.chart.addSeries(this.seriesIds_[a],this.storeAdapters_[this.storeAdapters_.length-1]);var a={},b={vertical:!0},c={markers:!0,gap:2};switch(this.type){case "ct_pie":c.type="Pie";break;case "ct_column":c.type="ClusteredColumns";this.labels_&&(a.dropLabels=!1,a.labels=this.labels_,a.rotation=90);a.dropLabels=!1;b.includeZero=!0;0<this.maxValue&&(b.max=this.maxValue);break;case "ct_line":c.type="Lines",this.labels_&&(a.labels=this.labels_),
b.includeZero=!0}this.chart.addAxis("x",a);this.chart.addAxis("y",b);this.chart.title=this.title;this.chart.addPlot("default",c);this.showlegend&&(this.firstRenderListener_=dojo.connect(this.chart,"render",this._showLegend.bind(this)))},_showLegend:function(){this.firstRenderListener_&&(this.firstRenderListener_.remove(),this.firstRenderListener_=null);this.getParent().getParent().getChildren()[1].content.refresh();this.getParent().getParent().layout()},buildRendering:function(){this.inherited(arguments);
setTimeout(this._addSeries.bind(this),0)}});dojo.declare("FIRMOS.TopMenu",dijit.layout.BorderContainer,{constructor:function(a){this._events=[]},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},postCreate:function(){this.inherited(arguments);var a=new dijit.layout.ContentPane({region:"top",splitter:!1,"class":"firmosTransparent"}),b;b='<div class="topMenu"><div class="topMenuLogoLeft"></div>';b+='<div class="topMenuLogoRight"></div>';b+='<div class="buttonListWrapper">';
for(var c,d,f=0;f<this.entries.length;f++)this.entries[f].isBig?(c="53",d="Big"):(c="38",d=""),G_UI_COM.createCSSRule("topMenu"+this.entries[f].entryId,"background: url("+this.entries[f].icon+"); background-repeat: no-repeat; background-size:"+c+"px "+c+"px; background-position: center;"),b=b+'<div class="buttonListItem"><div id="topMenu'+this.entries[f].entryId+'" class="menuButton'+d+'"><div class="base"><div class="shineTop"><div class="buttonIcon topMenu'+this.entries[f].entryId+'"><div class="shineBottom"></div></div></div></div><div class="captionContainer"><div class="buttonCaption">'+
this.entries[f].caption+"</div></div></div></div>";b+="</div></div>";a.set("content",b);this.addChild(a);setTimeout(this._registerButtons.bind(this),0)},_registerButtons:function(){this.layout();for(var a=0;a<this.entries.length;a++){var b=dojo.byId("topMenu"+this.entries[a].entryId);this._events.push(dojo.connect(b,dojox.gesture.tap,this.onClickHandler.bind(this,a)))}},onClickHandler:function(a,b){this.entries[a].isDialog?this.entries[a].isJira?window._showCollectorDialog?window._showCollectorDialog():
console.error("JIRA integration not included!"):G_SERVER_COM.callServerFunction(this.entries[a]["class"],this.entries[a].func,this.entries[a].uidpath,this.entries[a].params):G_UI_COM.showSectionPath(this.subSecsId,[this.entries[a].entryId],!0)}});dojo.declare("FIRMOS.Sitemap",dijit.layout.BorderContainer,{constructor:function(){this._events=[];this.mainEntriesBB=this.mainEntriesGroupGFX=this.mainEntriesSurface=this.mainEntriesContainer=this.detailsCP=this.mainEntriesCP=null;this.mainEntriesMoveCtrl=
!1;this.mainEntriesMoveCtrlDownGFX=this.mainEntriesMoveCtrlUpGFX=null;this.mainEntriesPos=0;this.detailsDim=this.detailsSurface=this.detailsContainer=null;this.detailsMinVisibleSection=100;this.animationRunning=!1;this.toggleAnimationDuration=500;this.focusElementAnimationDuration=250;this.minimizedScale=0.05;this.levelScale=0.6;this.moveFactor=0.2;this.lastMove_=(new Date).getTime();this.moving_=!1;this.mouseWheelDivisor=this.moveToClickTimeMin=100;this.pinchDivisor=5;G_UI_COM.registerSitemap(this)},
destroy:function(){for(G_UI_COM.unregisterSitemap(this);0<this._events.length;)this._events.pop().remove();this.inherited(arguments);this.mainEntriesMoveEndEvent&&(this.mainEntriesMoveEndEvent.remove(),this.mainEntriesMoveEndEvent=null)},postCreate:function(){this.inherited(arguments);this.mainEntriesCP=new dijit.layout.ContentPane({region:"left",splitter:!1,"class":"firmosTransparent"});this.mainEntriesCP.set("content",'<div id="'+this.id+'_me_gfx" style="width:100%; height:100%;"></div>');this.mainEntriesCP.set("style",
"width: 140px; overflow: hidden");this.detailsCP=new dijit.layout.ContentPane({region:"center",splitter:!1,"class":"firmosTransparent"});this.detailsCP.set("content",'<div id="'+this.id+'_d_gfx" style="width:100%; height:100%;"></div>');this.detailsCP.set("style","width: 100%; overflow: hidden");this.addChild(this.mainEntriesCP);this.addChild(this.detailsCP);setTimeout(this.buildSitemap.bind(this),0)},buildSitemap:function(){for(var a=this.getParent(),b=this;a;)a.isInstanceOf(FIRMOS.TabContainer)&&
(b._fixContent=!0),b=a,a=b.getParent();this.mainEntriesContainer=dojo.byId(this.id+"_me_gfx");this.mainEntriesSurface=dojox.gfx.createSurface(this.id+"_me_gfx","100%","100%");this.detailsContainer=dojo.byId(this.id+"_d_gfx");this.detailsSurface=dojox.gfx.createSurface(this.id+"_d_gfx","100%","100%");this.buildSVGDefs();b=!1;for(a=0;a<this.entries.length;a++)this.entries[a].entries?(this.entries[a].collapsed=b,b=!0):this.entries[a].collapsed=!0;if(1==this.entries.length)this.mainEntriesCP.set("style",
"display: none"),this._fixEntriesDataType(this.entries[0]);else for(this.mainEntriesGroupGFX=this.mainEntriesSurface.createGroup(),a=0;a<this.entries.length;a++)b=this.mainEntriesGroupGFX.createGroup(),this.entries[a].groupGFX=b,this.entries[a].x=80,this.entries[a].y=0==a?30:this.entries[a-1].y+this.entries[a-1].height+30,this.createEntry(b,this.entries[a],!1),this.entries[a].collapsed||(this.entries[a].elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryPressed"),this.entries[a].elementGFX.rawNode.childNodes[1].setAttribute("class",
"firmosSitemapEntryPressed2")),this.createShortcut(this.entries[a]);b=[];this.detailsDim=dojo.position(this.detailsContainer);for(a=0;a<this.entries.length;a++)if(this.entries[a].childrenGroupMoveGFX=this.detailsSurface.createGroup(),this.entries[a].childrenGroupGFX=this.entries[a].childrenGroupMoveGFX.createGroup(),this.entries[a].activeLevel=1,this.entries[a].levelScale=1,this.entries[a].maxLevel=1,this.entries[a].maxLevelScale=1,b[0]=a,0<this.entries[a].entries.length){this.buildDetails(this.entries[a],
b,null,this.entries[a].childrenGroupGFX);for(var c=1;c<this.entries[a].maxLevel;c++)this.entries[a].maxLevelScale/=this.levelScale;c=this.entries[a].childrenGroupGFX.getBoundingBox();this.entries[a].eventRect=this.entries[a].childrenGroupMoveGFX.createRect({x:c.x-this.detailsDim.w,y:c.y-this.detailsDim.h,width:c.width+2*this.detailsDim.w,height:c.height+2*this.detailsDim.h}).setFill([0,0,0,0]).moveToBack();c=dojox.gfx.Moveable(this.entries[a].childrenGroupMoveGFX);this._events.push(dojo.connect(c,
"onMoveStop",this._moveActionStop.bind(this)));this._events.push(dojo.connect(c,"onMove",this._moveAction.bind(this)));this._events.push(dojo.connect(this.entries[a].eventRect.getEventSource(),dojox.gesture.tap.doubletap,this.resetDisplay.bind(this,this.entries[a])));this._events.push(dojo.connect(this.entries[a].eventRect.getEventSource(),"gesturechange",this.gestureHandler.bind(this,this.entries[a])));c=dojo.isMozilla?"DOMMouseScroll":"onmousewheel";this._events.push(dojo.connect(this.entries[a].childrenGroupMoveGFX.getEventSource(),
"gesturechange",this.gestureHandler.bind(this,this.entries[a])));this._events.push(dojo.connect(this.entries[a].childrenGroupMoveGFX.getEventSource(),c,this.gestureHandler.bind(this,this.entries[a])))}else this.entries[a].path=dojo.clone(b);1<this.entries.length&&(this.mainEntriesBB=this.mainEntriesGroupGFX.getBoundingBox());this.resizeSVGHandler();this.layout();setTimeout(this._initialLayoutDetails.bind(this),0);this._events.push(dojo.connect(this,"resize",this.resizeSVGHandler.bind(this)))},gestureHandler:function(a,
b){if(this.animationRunning)setTimeout(this.gestureHandler.bind(this,a,b),100);else{if(b.scale)var c=1+(b.scale-1)/this.pinchDivisor;else c=b[dojo.isMozilla?"detail":"wheelDelta"]*(dojo.isMozilla?-1:1),c=1+c/this.mouseWheelDivisor;var d=a.levelScale*c;1>d&&(d=1,c=d/a.levelScale);d>a.maxLevelScale&&(d=a.maxLevelScale,c=d/a.levelScale);var f=dojo.position(this.domNode);a.levelScale=d;a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(c,f.w/2-this.detailsDim.x,f.h/2));for(var c=2,f=1,
g=1/this.levelScale;g<d;)f=g,g/=this.levelScale,c+=1;d-f<g-d&&(c-=1);d=a.activeLevel;a.activeLevel=c;this.highlightActiveLevel(a,d)}},_initialLayoutDetails:function(){for(var a=0;a<this.entries.length;a++)0<this.entries[a].entries.length&&this.layoutDetails(this.entries[a])},_moveAction:function(){this.moving_=!0},_moveActionStop:function(){this.moving_&&(this.lastMove_=(new Date).getTime(),this._checkDetailsVisibility());this.moving_=!1},_checkDetailsVisibility:function(){for(var a=0;a<this.entries.length;a++)if(!1==
this.entries[a].collapsed){var b=this.entries[a].childrenGroupGFX.getTransformedBoundingBox(),c=this.detailsMinVisibleSection-b[1].x,d=this.detailsDim.w-this.detailsMinVisibleSection-b[0].x,f=this.detailsMinVisibleSection-b[2].y,b=this.detailsDim.h-this.detailsMinVisibleSection-b[1].y,g=!1;0<c?g=!0:c=0;0>d?g=!0:d=0;0<f?g=!0:f=0;0>b?g=!0:b=0;g&&this.entries[a].childrenGroupMoveGFX.applyTransform(dojox.gfx.matrix.translate(c+d,f+b));break}},layoutDetails:function(a){this._centerGFX(a.childrenGroupMoveGFX,
a.entries[0].elementGFX);if(a.collapsed){var b=a.childrenGroupMoveGFX.getTransformedBoundingBox(),c=a.groupGFX.getTransformedBoundingBox(),d=dojo.position(this.mainEntriesContainer);c[0].x-=d.w;c[1].x-=d.w;a.childrenGroupMoveGFX.moveToBack();a.childrenGroupMoveGFX.applyTransform(dojox.gfx.matrix.translate(c[0].x+(c[1].x-c[0].x)/2-b[0].x-(b[1].x-b[0].x)/2,c[1].y+(c[2].y-c[1].y)/2-b[1].y-(b[2].y-b[1].y)/2));a.childrenGroupMoveGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(this.minimizedScale,c[0].x+
(c[1].x-c[0].x)/2,c[1].y+(c[2].y-c[1].y)/2));a.childrenGroupMoveGFX.rawNode.style.display="none"}},buildDetails:function(a,b,c,d){a.path=dojo.clone(b);if(c)var f=a.elementGFX.getTransformedBoundingBox(),g=f[0].x+(f[1].x-f[0].x)/2,f=f[1].y+(f[2].y-f[1].y)/2;this.entries[b[0]].maxLevel=Math.max(this.entries[b[0]].maxLevel,b.length-1);for(var k=0;k<a.entries.length;k++){var l=d.createGroup();a.entries[k].groupGFX=l;this.createEntry(l,a.entries[k],1==a.path.length);var n=a.entries[k].groupGFX.getTransformedBoundingBox();
if(c){var p=a.entries[k].elementGFX.getTransformedBoundingBox(),q=p[0].x+(p[1].x-p[0].x)/2,p=p[1].y+(p[2].y-p[1].y)/2,r=d.createRect({x:0,y:0,width:0,height:0});a.entries[k].connector=r;r.rawNode.setAttribute("style",'fill: url("/#connectorgradient"); fill-opacity: 1;');this.repaintConnector(r,q,p,g,f,5)}b.push(k);this.buildDetails(a.entries[k],b,n,l);b.pop();c&&(l=(g-q)*this.moveFactor,n=(f-p)*this.moveFactor,a.entries[k].connector.applyLeftTransform(dojox.gfx.matrix.translate((g-q)*this.moveFactor,
(f-p)*this.moveFactor)),a.entries[k].connector.applyLeftTransform(dojox.gfx.matrix.scaleAt(1-this.moveFactor,q+(g-q)*this.moveFactor,p+(f-p)*this.moveFactor)),a.entries[k].groupGFX.applyTransform(dojox.gfx.matrix.translate(l,n)),a.entries[k].groupGFX.applyLeftTransform(dojox.gfx.matrix.scaleAt(this.levelScale,q+l,p+n)))}},repaintConnector:function(a,b,c,d,f,g){var k=d-b,l=f-c;f=b+k/2;c+=l/2;k=Math.sqrt(k*k+l*l);l=Math.asin(l/k);d<b&&(l=-l);a.setShape({x:f-k/2,y:c-g/2,width:k,height:g});a.applyTransform(dojox.gfx.matrix.rotateAt(l,
f,c)).moveToBack();a._originalTrans=a.getTransform()},_fixEntriesDataType:function(a){a.entries?a.entries instanceof Array||(a.entries=[a.entries]):a.entries=[]},createEntry:function(a,b,c){this._fixEntriesDataType(b);a=a.createGroup();b.elementGFX=a;b.width=100;b.height=b.icon?78:35;var d="";c&&(d="AL");c=a.createPath({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"});c.applyTransform(dojox.gfx.matrix.translate(b.x-
67.2,b.y));var f=a.createPath({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"});f.applyTransform(dojox.gfx.matrix.translate(b.x-67.2,b.y));var g=c.getTransformedBoundingBox();if(b.icon){a.createImage({x:g[0].x+(g[1].x-g[0].x)/2-24,y:g[1].y+5,width:48,height:48,src:b.icon,preserveAspectRatio:"meet"});var k=g[1].y+48+20}else k=
g[1].y+(g[2].y-g[1].y)/2+5;g=a.createText({x:g[0].x+(g[1].x-g[0].x)/2,y:k,text:b.caption,align:"center"}).setFont({family:"Arial",size:"10pt"}).setFill("white");g.applyTransform(dojox.gfx.matrix.translate(-g.getTextWidth()/2,0));g.getTextWidth()>b.width-10&&(g=g.getTextWidth()-b.width+10,b.width+=g,c.setShape({path:"M117.084,49.496c0,1.105-0.941,2-2.103,2h-"+b.width+"c-1.161,0-2.103-0.895-2.103-2v-"+b.height+"c0-1.104,0.941-2,2.103-2h"+b.width+"c1.161,0,2.103,0.896,2.103,2V49.496z"}),f.setShape({path:"M115.75,48.171c0,1.012-0.915,1.829-2.042,1.829h-"+
(b.width-2.879)+"c-1.127,0-2.042-0.817-2.042-1.829v-"+(b.height-2.908)+"c0-1.009,0.915-1.829,2.042-1.829h"+(b.width-2.879)+"c1.127,0,2.042,0.82,2.042,1.829V48.171z"}),c.applyTransform(dojox.gfx.matrix.translate(g/2,0)),f.applyTransform(dojox.gfx.matrix.translate(g/2,0)));b.disabled?(c.rawNode.setAttribute("class","firmosSitemapEntryDisabled"+d),f.rawNode.setAttribute("class","firmosSitemapEntryDisabled2")):(c.rawNode.setAttribute("class","firmosSitemapEntry"+d),f.rawNode.setAttribute("class","firmosSitemapEntry2"));
d=a.getTransformedBoundingBox();a.createRect({x:d[0].x,y:d[1].y,width:d[1].x-d[0].x,height:d[2].y-d[1].y}).setFill([0,0,0,0]);this._events.push(dojo.connect(a.getEventSource(),dojox.gesture.tap,this.elementOnClick.bind(this,b,!1)));1!=b.scale&&(d=a.getTransformedBoundingBox(),a.applyLeftTransform(dojox.gfx.matrix.scaleAt(b.scale,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2)));this.createInfoUI(b)},createInfoUI:function(a){if(0<a.newscount)if(a.infoGFX){var b=0;if(99<a.newscount){var c=8;100>
a.newscount_old&&(b=-1)}else 99<a.newscount_old&&(b=1),c=10;delete a.newscount_old;var d=a.infoGFX.children[2],f=d.getTextWidth();d.setShape({text:a.newscount+""}).setFont({size:c+"pt"});d.applyTransform(dojox.gfx.matrix.translate(f/2-d.getTextWidth()/2,b))}else b=a.elementGFX.getBoundingBox(),f=a.groupGFX.createGroup(),f.createCircle({cx:b.x+b.width,cy:b.y,r:12}).setFill("white"),f.createCircle({cx:b.x+b.width,cy:b.y,r:10}).setFill("red"),c=99<a.newscount?8:10,d=f.createText({x:b.x+b.width+1,y:b.y+
c/2,text:a.newscount+""}).setFont({family:"Arial",size:c+"pt"}).setFill("white"),d.applyTransform(dojox.gfx.matrix.translate(-d.getTextWidth()/2,0)),1!=a.scale&&(f.applyLeftTransform(dojox.gfx.matrix.scaleAt(a.scale,b.x+b.width,b.y)),f.applyTransform(dojox.gfx.matrix.translate(-b.width*(1-a.scale)/2,b.height*(1-a.scale)/2))),a.infoGFX=f;else a.infoGFX&&(a.infoGFX.destroy(),delete a.infoGFX,delete a.newscount_old)},_isShortcutDisabled:function(a){if(!a.entries)return!0;for(var b=0;b<a.entries.length;b++)if(!a.entries[b].disabled||
this._isShortcutDisabled(a.entries[b]))return!1;return!0},createShortcut:function(a){var b=a.disabled||this._isShortcutDisabled(a),c=b?"firmosSMShortcutDisabled":"firmosSMShortcutEnabled",d=a.elementGFX.getBoundingBox(),f=a.groupGFX.createGroup(),g=f.createPath({path:"M19.158,32.64c-2.551,0-5.035-0.738-7.185-2.134c-2.961-1.922-4.995-4.882-5.729-8.334c-0.733-3.452-0.078-6.983,1.844-9.943c2.447-3.77,6.595-6.02,11.094-6.02c2.55,0,5.034,0.738,7.183,2.134c2.961,1.922,4.996,4.882,5.73,8.335c0.734,3.452,0.079,6.984-1.844,9.944C27.805,30.391,23.658,32.64,19.158,32.64z"});
g.rawNode.setAttribute("class",c+"1");g=f.createPath({path:"M19.184,5.709v1c2.453,0,4.842,0.71,6.91,2.053c2.849,1.85,4.807,4.698,5.513,8.02c0.706,3.321,0.076,6.72-1.774,9.568c-2.354,3.625-6.345,5.79-10.675,5.79c-2.454,0-4.844-0.71-6.913-2.053c-2.848-1.85-4.806-4.697-5.511-8.019c-0.706-3.321-0.076-6.719,1.774-9.567c2.354-3.626,6.345-5.792,10.674-5.792L19.184,5.709M19.183,5.709c-4.488,0-8.886,2.202-11.513,6.248C3.544,18.308,5.347,26.8,11.701,30.926c2.308,1.499,4.896,2.214,7.457,2.214c4.489,0,8.888-2.201,11.514-6.246c4.126-6.353,2.32-14.846-4.033-18.971C24.331,6.425,21.742,5.709,19.183,5.709L19.183,5.709z"});
g.rawNode.setAttribute("class",c+"2");g=f.createPath({path:"M0.2-20.001c-10.906,0-19.779,8.874-19.779,19.78c0,10.907,8.873,19.781,19.779,19.781c4.679,0,8.971-1.644,12.356-4.373l-9.806-8.48l25.828-3.813l-0.05,26.107l-9.07-7.845c-5.101,4.599-11.85,7.404-19.259,7.404c-15.894,0-28.779-12.887-28.779-28.781s12.886-28.78,28.779-28.78c12.468,0,23.081,7.928,27.08,19.016l-9.199,1.359C14.913-15.336,8.1-20.001,0.2-20.001z"});g.rawNode.setAttribute("class",c+"3");g.applyTransform({xx:-0.2177,yx:0.1947,xy:0.2037,
yy:0.2278,dx:19.4619,dy:18.75});f.applyTransform(dojox.gfx.matrix.translate(d.x+d.width-25,d.y+d.height-18));1!=a.scale&&(f.applyLeftTransform(dojox.gfx.matrix.scaleAt(a.scale,d.x+d.width,d.y)),f.applyTransform(dojox.gfx.matrix.translate(-d.width*(1-a.scale)/2,-d.height*(1-a.scale)/2)));a.scGFX=f;b||this._events.push(dojo.connect(f.getEventSource(),dojox.gesture.tap,this.elementOnClick.bind(this,a,!0)))},_getEntryByPath:function(a){for(var b,c=this;0<a.length;){var d=a.shift();b=!0;for(var f=0;f<
c.entries.length;f++)if(d==c.entries[f].id){c=c.entries[f];b=!1;break}if(b){console.error("_getEntryByPath: Child "+d+" not found");return}}return c},updateInfoUI:function(a,b){var c=this._getEntryByPath(a);c.newscount_old=c.newscount;c.newscount=b;this.createInfoUI(c)},_buildSVGDef:function(a){var b=dojo.doc.createElementNS("http://www.w3.org/2000/svg",a.tagname);if(a.attrs){a.attrs instanceof Array||(a.attrs=[a.attrs]);for(var c=0;c<a.attrs.length;c++)b.setAttribute(a.attrs[c].name,a.attrs[c].value)}if(a.elems)for(a.elems instanceof
Array||(a.elems=[a.elems]),c=0;c<a.elems.length;c++){var d=this._buildSVGDef(a.elems[c]);b.appendChild(d)}return b},buildSVGDefs:function(){for(var a=this.mainEntriesSurface.rawNode.getElementsByTagName("defs")[0],b=this.detailsSurface.rawNode.getElementsByTagName("defs")[0],c=0;c<this.defs.length;c++){var d=this._buildSVGDef(this.defs[c]);a.appendChild(d);b.appendChild(d)}},_createEventRects:function(){this.detailsDim=dojo.position(this.detailsContainer);for(var a=0;a<this.entries.length;a++)if(0<
this.entries[a].entries.length){var b=this.entries[a].childrenGroupGFX.getBoundingBox();this.entries[a].eventRect.setShape({x:b.x-this.detailsDim.w,y:b.y-this.detailsDim.h,width:b.width+2*this.detailsDim.w,height:b.height+2*this.detailsDim.h})}this._checkDetailsVisibility()},resizeSVGHandler:function(){if(1<this.entries.length)if(this.mainEntriesCP.set("style","width: "+(2*this.mainEntriesBB.x+this.mainEntriesBB.width-1)+"px; overflow: hidden;"),setTimeout(function(){this.mainEntriesCP.set("style",
"width: "+(2*this.mainEntriesBB.x+this.mainEntriesBB.width)+"px; overflow: hidden;")}.bind(this),0),this.mainEntriesContainerDim=dojo.position(this.mainEntriesContainer),this.mainEntriesBB.y+this.mainEntriesBB.height>this.mainEntriesContainerDim.h)if(this.mainEntriesMoveCtrl){var a=this.mainEntriesBB.y+this.mainEntriesBB.height+this.mainEntriesPos-this.mainEntriesContainerDim.h;0<a?(this._createMoveCtrlDown(),this._repositionMoveCtrlDown()):(this._removeMoveCtrlDown(),this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,
-a)),this.mainEntriesPos-=a)}else this.mainEntriesMoveCtrl=!0,this._createMoveCtrlDown();else this.mainEntriesMoveCtrl&&(this._removeMoveCtrlDown(),this._removeMoveCtrlUp(),this.mainEntriesMoveCtrl=!1,this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,-this.mainEntriesPos)),this.mainEntriesPos=0);setTimeout(this._createEventRects.bind(this),1)},_createMoveCtrlDown:function(){this.mainEntriesMoveCtrlDownGFX||(this.mainEntriesMoveCtrlDownGFX=this.mainEntriesSurface.createGroup(),this.mainEntriesMoveCtrlDownGFX.createRect({x:10,
y:this.mainEntriesContainerDim.h-30,width:this.mainEntriesContainerDim.w-20,height:30}).setFill("blue"),this.mainEntriesMoveCtrlDownGFX.createPolyline([{x:15,y:this.mainEntriesContainerDim.h-25},{x:this.mainEntriesContainerDim.w-15,y:this.mainEntriesContainerDim.h-25},{x:this.mainEntriesContainerDim.w/2,y:this.mainEntriesContainerDim.h-5},{x:15,y:this.mainEntriesContainerDim.h-25}]).setFill("white"),this._repositionMoveCtrlDown(),this._events.push(dojo.connect(this.mainEntriesMoveCtrlDownGFX.getEventSource(),
dojo.touch.press,this.mainEntriesMoveHandler.bind(this,-1))))},_createMoveCtrlUp:function(){this.mainEntriesMoveCtrlUpGFX||(this.mainEntriesMoveCtrlUpGFX=this.mainEntriesSurface.createGroup(),this.mainEntriesMoveCtrlUpGFX.createRect({x:10,y:0,width:this.mainEntriesContainerDim.w-20,height:30}).setFill("blue"),this.mainEntriesMoveCtrlUpGFX.createPolyline([{x:15,y:25},{x:this.mainEntriesContainerDim.w-15,y:25},{x:this.mainEntriesContainerDim.w/2,y:5},{x:15,y:25}]).setFill("white"),this._events.push(dojo.connect(this.mainEntriesMoveCtrlUpGFX.getEventSource(),
dojo.touch.press,this.mainEntriesMoveHandler.bind(this,1))))},_removeMoveCtrlUp:function(){this.mainEntriesMoveCtrlUpGFX&&(this.mainEntriesMoveCtrlUpGFX.destroy(),this.mainEntriesMoveCtrlUpGFX=null)},_removeMoveCtrlDown:function(){this.mainEntriesMoveCtrlDownGFX&&(this.mainEntriesMoveCtrlDownGFX.destroy(),this.mainEntriesMoveCtrlDownGFX=null)},_moveMainEntries:function(a){0>a?(this._createMoveCtrlUp(),this.mainEntriesBB.y+this.mainEntriesBB.height+this.mainEntriesPos==this.mainEntriesContainerDim.h&&
(this._removeMoveCtrlDown(),this.mainEntriesMoveEndHandler())):(this._createMoveCtrlDown(),0==this.mainEntriesPos&&(this._removeMoveCtrlUp(),this.mainEntriesMoveEndHandler()));this.mainEntriesMoveEndEvent&&(this.mainEntriesGroupGFX.applyTransform(dojox.gfx.matrix.translate(0,a)),this.mainEntriesPos+=a,setTimeout(this._moveMainEntries.bind(this,a),10))},mainEntriesMoveHandler:function(a){this.mainEntriesMoveEndEvent&&this.mainEntriesMoveEndHandler();this.mainEntriesMoveEndEvent=dojo.connect(document,
dojo.touch.release,this.mainEntriesMoveEndHandler.bind(this));this._moveMainEntries(a)},mainEntriesMoveEndHandler:function(a){this.mainEntriesMoveEndEvent&&(this.mainEntriesMoveEndEvent.remove(),this.mainEntriesMoveEndEvent=null)},_repositionMoveCtrlDown:function(){if(this.mainEntriesMoveCtrlDownGFX){var a=this.mainEntriesMoveCtrlDownGFX.getTransformedBoundingBox()[2].y-this.mainEntriesContainerDim.h;0!=a&&this.mainEntriesMoveCtrlDownGFX.applyTransform(dojox.gfx.matrix.translate(0,-a))}},_centerGFX:function(a,
b){var c=dojo.position(this.domNode),d=b.getTransformedBoundingBox();a.applyLeftTransform(dojox.gfx.matrix.translate(c.w/2-this.detailsDim.x-(d[1].x-d[0].x)/2-d[0].x,c.h/2-(d[2].y-d[1].y)/2-d[1].y))},resetDisplay:function(a){if(!this.animationRunning){this.animationRunning=!0;var b=this._centerAndScale(a,a.levelScale),c=a.activeLevel;a.activeLevel=1;a.levelScale=1;this._events.push(dojo.connect(b,"onEnd",this.highlightActiveLevel.bind(this,a,c)));this._events.push(dojo.connect(b,"onEnd",this.animationEnd.bind(this,
a)))}},_centerAndScale:function(a,b){var c=dojo.position(this.domNode),d=a.entries[0].elementGFX.getTransformedBoundingBox();return(new dojox.gfx.fx.animateTransform({duration:this.toggleAnimationDuration,shape:a.childrenGroupMoveGFX,transform:[{name:"scaleAt",start:[1,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/2],end:[1/b,c.w/2-this.detailsDim.x,c.h/2]},{name:"translate",start:[0,0],end:[c.w/2-this.detailsDim.x-d[0].x-(d[1].x-d[0].x)/2,c.h/2-d[1].y-(d[2].y-d[1].y)/2]},{name:"original"}]})).play()},
elementToggleCollapse:function(a){!this.animationRunning&&a.collapsed&&(this.animationRunning=!0,this._elementExpand(a,!0))},_elementExpand:function(a,b){a.childrenGroupMoveGFX.getTransformedBoundingBox();for(var c=0;c<this.entries.length;c++)this.entries[c].collapsed||this._elementCollapse(this.entries[c],!1);a.childrenGroupMoveGFX.rawNode.style.display="";c=this._centerAndScale(a,this.minimizedScale);a.collapsed=!1;b&&(this._events.push(dojo.connect(c,"onEnd",this.animationEnd.bind(this,a))),this._events.push(dojo.connect(c,
"onEnd",this.expandElementEnd.bind(this,a))))},_elementCollapse:function(a,b){var c=a.childrenGroupMoveGFX.getTransformedBoundingBox(),d=a.groupGFX.getTransformedBoundingBox(),f=dojo.position(this.mainEntriesContainer);d[0].x-=f.w;d[1].x-=f.w;c=(new dojox.gfx.fx.animateTransform({duration:this.toggleAnimationDuration,shape:a.childrenGroupMoveGFX,transform:[{name:"scaleAt",start:[1,c[0].x+(c[1].x-c[0].x)/2,c[1].y+(c[2].y-c[1].y)/2],end:[this.minimizedScale,d[0].x+(d[1].x-d[0].x)/2,d[1].y+(d[2].y-d[1].y)/
2]},{name:"translate",start:[0,0],end:[d[0].x+(d[1].x-d[0].x)/2-c[0].x-(c[1].x-c[0].x)/2,d[1].y+(d[2].y-d[1].y)/2-c[1].y-(c[2].y-c[1].y)/2]},{name:"original"}]})).play();a.collapsed=!0;this._events.push(dojo.connect(c,"onEnd",this.collapseElementEnd.bind(this,a)));b&&this._events.push(dojo.connect(c,"onEnd",this.animationEnd.bind(this,a)))},animationEnd:function(a){this.animationRunning=!1},collapseElementEnd:function(a){a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntry");
a.elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapEntry2")},expandElementEnd:function(a){a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryPressed");a.elementGFX.rawNode.childNodes[1].setAttribute("class","firmosSitemapEntryPressed2")},_highlightALRecursive:function(a,b,c,d){if(b<c||b<d)for(var f=0;f<a.entries.length;f++)this._highlightALRecursive(a.entries[f],b+1,c,d);b==c&&(a.disabled?a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryDisabledAL"):
a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryAL"));b==d&&(a.disabled?a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntryDisabled"):a.elementGFX.rawNode.childNodes[0].setAttribute("class","firmosSitemapEntry"))},highlightActiveLevel:function(a,b){a.activeLevel!=b&&this._highlightALRecursive(a,0,a.activeLevel,b)},elementOnClick:function(a,b,c){if(!(this.moving_||(new Date).getTime()-this.lastMove_<this.moveToClickTimeMin))if(c.preventDefault(),dojo.stopEvent(c),
1!=a.path.length||b){var d=!0;if(1<a.path.length){var f=this.entries[a.path[0]],g=1,k=a.path.length-1,l=f.activeLevel;if(l!=k){d=!1;if(this.animationRunning){setTimeout(this.elementOnClick.bind(this,a,b,c),100);return}this.animationRunning=!0;if(f.activeLevel<k)for(b=f.activeLevel;b<k;b++)g/=this.levelScale;else for(b=f.activeLevel;b>k;b--)g*=this.levelScale;f.activeLevel=k;k=f.levelScale*g;1>k&&(k=1,g=k/f.levelScale);k>f.maxLevelScale&&(k=f.maxLevelScale,g=k/f.levelScale);f.levelScale=k;var n=a.elementGFX.getTransformedBoundingBox(),
k=f.childrenGroupMoveGFX.getTransform();b=n[0].x+(n[1].x-n[0].x)/2;n=n[1].y+(n[2].y-n[1].y)/2;g=dojox.gfx.matrix.scaleAt(g,b,n);if(c.clientX&&c.clientY){var p=c.clientX-this.detailsDim.x;c=c.clientY-this.detailsDim.y}else p=b,c=n;c=dojox.gfx.matrix.translate(p-b,c-n);c=(new dojox.gfx.fx.animateTransform({duration:this.focusElementAnimationDuration,shape:f.childrenGroupMoveGFX,transform:[{name:"matrix",start:k,end:dojox.gfx.matrix.multiply(c,g,k)}]})).play();this._events.push(dojo.connect(c,"onEnd",
this.animationEnd.bind(this,a)));this._events.push(dojo.connect(c,"onEnd",this.highlightActiveLevel.bind(this,f,l)))}}d&&!a.disabled&&(d=a.sectionpath.sectionids instanceof Array?dojo.clone(a.sectionpath.sectionids):[a.sectionpath.sectionids],G_UI_COM.showSectionPathInProgress=!0,G_UI_COM.showSectionPath(a.sectionpath.basecontainerid,d,!1)||console.error("Could not resolve given section path: "+JSON.stringify(a.sectionpath)))}else this.elementToggleCollapse(a)}});dojo.declare("FIRMOS.gridPBColumn",
null,{constructor:function(a){for(var b in a)this[b]=a[b]},renderCell:function(a,b,c,d,f){c=new dijit.ProgressBar({style:"width: 100%"});c.set("value",b/this.maxValue*100);this.labelId&&c.set("label",a[this.labelId]+"");return c.domNode}});dojo.declare("FIRMOS.gridDetailsColumn",null,{constructor:function(){this.label="";this.className="dgrid-details";this.unhidable=!0;this._events=[];return this},destroy:function(){for(;0<this._events.length;)this._events.pop().remove()},renderCell:function(a,b,
c,d,f){b=dojo.create("div");this.grid.detailsClassname||a._detailsfunc_&&a._funcclassname_?(b.className="dgrid-details-closed",b.innerHTML="+",a=a&&this.grid.row(a),a._detailsOpen=!1,this._events.push(dojo.connect(b,"onclick",this.toggleDetails.bind(this,b,a)))):b.className="dgrid-details-none";return b},toggleDetails:function(a,b){b._detailsOpen?(a.className="dgrid-details-closed",a.innerHTML="+",this.grid.hideDetails(b)):(a.className="dgrid-details-open",a.innerHTML="-",this.grid.showDetails(b));
b._detailsOpen=!b._detailsOpen},renderHeaderCell:function(a){return""}});dojo.declare("FIRMOS.OnDemandGrid",[dgrid.OnDemandGrid,FIRMOS.GridBase,dgrid.Selection,FIRMOS.GridFilter,dgrid.ColumnResizer,FIRMOS.ColumnReorder,dgrid.ColumnHider,FIRMOS.GridDnD,dgrid.DijitRegistry]);dojo.declare("FIRMOS.Editor",dijit.layout.BorderContainer,{texts:G_TEXTS.editor,_editorStarted:!1,_savedContent:"",constructor:function(a){switch(a.contentType){case "ct_html":this.editorType="aloha";this.startEditAHandler=this.startEditA.bind(this);
this.pauseEditAHandler=this.pauseEditA.bind(this);break;case "ct_javascript":case "ct_pascal":this.editorType="codemirror";this.startEditCMHandler=this.startEditCM.bind(this);this.pauseEditCMHandler=this.pauseEditCM.bind(this);break;default:console.error("Unknown content type "+a.contentType)}},destroy:function(){switch(this.editorType){case "aloha":$(Aloha,"body").unbind("aloha-editable-activated",this.startEditAHandler);$(Aloha,"body").unbind("aloha-editable-deactivated",this.pauseEditAHandler);
break;case "codemirror":this.cm.off("focus",this.startEditCMHandler),this.cm.off("blur",this.pauseEditCMHandler)}this.editableContent&&this.editableContent.destroy();this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.editorCP=new dijit.layout.ContentPane({region:"center",splitter:!1});this.editorCP.set("content",'<div id="'+this.id+'_container" style="width:100%; height:100%; background-color:#fff; overflow:hidden;" class="article"></div>');if(this.tbBottom){this.toolbar=
new dijit.Toolbar({region:"bottom"});var a=""}else this.toolbar=new dijit.Toolbar({region:"top"}),a="float:right;";this.saveButton=new dijit.form.Button({label:this.texts.saveButton,disabled:!0,onClick:this.save.bind(this),style:a});this.toolbar.addChild(this.saveButton);this.resetButton=new dijit.form.Button({label:this.texts.resetButton,disabled:!0,onClick:this.load.bind(this),style:a});this.toolbar.addChild(this.resetButton);this.addChild(this.toolbar);this.addChild(this.editorCP);setTimeout(this.startEditor.bind(this),
0)},startEditor:function(){switch(this.editorType){case "aloha":$("#"+this.id+"_container").aloha();this.editableContent=Aloha.getEditableById(this.id+"_container");Aloha.bind("aloha-editable-activated",this.startEditAHandler);Aloha.bind("aloha-editable-deactivated",this.pauseEditAHandler);break;case "codemirror":this.cm=CodeMirror(dojo.byId(this.id+"_container"),{lineNumbers:!0,mode:this.contentType.substring(3)});this.cm.on("focus",this.startEditCMHandler);this.cm.on("blur",this.pauseEditCMHandler);
break;default:return}this.load()},loadCallback:function(a,b,c,d){b&&""!=c.output&&(a=dojo.fromJson(c.output),this._savedContent=a.value,this.setValue(a.value))},getValue:function(){switch(this.editorType){case "aloha":return this.editableContent.getContents();case "codemirror":return this.cm.getValue()}},setValue:function(a){switch(this.editorType){case "aloha":this.editableContent&&this.editableContent.setContents(a);break;case "codemirror":this.cm.setValue(a)}},startEdit:function(){this._editorStarted||
(this.saveButton.set("disabled",!1),this.resetButton.set("disabled",!1),G_SERVER_COM.callServerFunction(this.startEditClass,this.startEditFunc,this.startEditUidPath,this.startEditParams),this._editorStarted=!0)},pauseEdit:function(){this._editorStarted&&this.getValue()==this._savedContent&&this.stopEdit()},startEditCM:function(a){this.startEdit()},pauseEditCM:function(a){this.pauseEdit()},startEditA:function(a,b){b.editable.getId()==this.id+"_container"&&this.startEdit()},pauseEditA:function(a,b){b.editable.getId()==
this.id+"_container"&&this.pauseEdit()},stopEdit:function(){this._editorStarted&&(G_SERVER_COM.callServerFunction(this.stopEditClass,this.stopEditFunc,this.stopEditUidPath,this.stopEditParams),this.saveButton.set("disabled",!0),this.resetButton.set("disabled",!0),this._editorStarted=!1)},save:function(){this.stopEdit();var a=dojo.clone,a=dojo.clone(this.saveParams);a.content=this.getValue();this._savedContent=a.content;G_SERVER_COM.callServerFunction(this.saveClass,this.saveFunc,this.saveUidPath,
a)},load:function(){this.stopEdit();G_SERVER_COM.callServerFunction(this.loadClass,this.loadFunc,this.loadUidPath,this.loadParams,this.loadCallback.bind(this))}});dojo.declare("FIRMOS.Shell",dijit.layout.ContentPane,{postCreate:function(){this.set("content",'<iframe id="'+this.id+'_frame" src="'+this.protocol+"://"+this.host+":"+this.port+this.path+'" style="width:100%; height:100%;">Iframe not supported.</iframe>');this.set("style","overflow: hidden;");this.inherited(arguments)}});dojo.declare("FIRMOS.VNC",
dijit.layout.BorderContainer,{texts:G_TEXTS.vnc,constructor:function(a){this.ws=null;this.state="disconnected";this.container=this.canvas=null;this.securityType=0;this.serverSettings={};this.tileImage=this.context=null;this.mouseButtonState=0;this.intervalId=this.mouseCoords=null;this.scale=1;this.isActive=!1;this._events=[]},destroy:function(){this.disconnect();this.inherited(arguments)},postCreate:function(){this.vncCP=new dijit.layout.ContentPane({region:"center",splitter:!1});this.vncCP.set("content",
'<div id="'+this.id+'_container" style="width:100%; height:100%;"><canvas  class="firmosVNCInactive" tabindex="0" id="'+this.id+'_vnc" style="width:0px; height:0px; cursor: none;">Canvas not supported.</canvas></div>');this.vncCP.set("style","overflow: hidden;");this.toolbar=new dijit.Toolbar({region:"top"});this.cadButton=new dijit.form.Button({label:this.texts.cadButton,onClick:this.sendCAD.bind(this)});this.toolbar.addChild(this.cadButton);this.wakeUpButton=new dijit.form.Button({label:this.texts.wakeUpButton,
disabled:!0,onClick:this.wakeUp.bind(this)});this.toolbar.addChild(this.wakeUpButton);this.mountButton=new dijit.form.Button({label:this.texts.mountButton,disabled:!0,onClick:this.mountISO.bind(this)});this.toolbar.addChild(this.mountButton);this.addChild(this.toolbar);this.addChild(this.vncCP);this.inherited(arguments);setTimeout(this.connect.bind(this),0)},sendCAD:function(){this.ws.send((new Uint8Array([4,1,0,0,0,0,255,227])).buffer);this.ws.send((new Uint8Array([4,1,0,0,0,0,255,233])).buffer);
this.ws.send((new Uint8Array([4,1,0,0,0,0,255,255])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,227])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,233])).buffer);this.ws.send((new Uint8Array([4,0,0,0,0,0,255,255])).buffer)},wakeUp:function(){},mountISO:function(){},stopEvent:function(a){dojo.stopEvent(a);a.preventDefault();a.stopPropagation();return!1},visibilityChange:function(a){a?this.connect():this.disconnect()},disconnect:function(){if("disconnected"!=this.state){this.canvas.style.width=
"0px";for(this.canvas.style.height="0px";0<this._events.length;)dojo.disconnect(this._events.pop());this.ws.onopen=null;this.ws.onmessage=null;this.ws.onerror=null;this.ws.close();this.ws=null;this.state="disconnected"}},connect:function(){this.state="connecting";this.ws=new WebSocket(("https:"==document.location.protocol?"wss://":"ws://")+window.location.hostname+":"+window.location.port+"/FirmOS_FRE_WS","FirmOS-VC|"+this.host+"|"+this.port);this.ws.binaryType="arraybuffer";this.ws.onopen=this.wsOpenListener.bind(this);
this.ws.onmessage=this.wsMessageListener.bind(this);this.ws.onerror=this.wsErrorListener.bind(this);this.canvas=dojo.byId(this.id+"_vnc");this.container=dojo.byId(this.id+"_container");this.context=this.canvas.getContext("2d");this._events.push(dojo.connect(this.canvas,"onmousemove",this.mouseMoveListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmousedown",this.mouseDownListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseup",this.mouseUpListener.bind(this)));
this._events.push(dojo.connect(this.canvas,"onclick",this.mouseClickListener.bind(this)));this._events.push(dojo.connect(this.canvas,"oncontextmenu",this.contextMenuListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseenter",this.mouseEnter.bind(this)));this._events.push(dojo.connect(this.canvas,"onmouseout",this.mouseOut.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeydown",this.keyDownListener.bind(this)));this._events.push(dojo.connect(this.canvas,"onkeyup",this.keyUpListener.bind(this)));
this._events.push(dojo.connect(this.canvas,"onkeypress",this.keyPressListener.bind(this)));this._events.push(dojo.connect(this,"resize",this.applyScale.bind(this)));this.intervalId&&window.clearInterval(this.intervalId);this.intervalId=window.setInterval(this.sendMouseCoords.bind(this),40);this.ws.onclose=this.wsCloseListener.bind(this)},decodeMessage2String:function(a){a=new Uint8Array(a);for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},encodeString2Message:function(a){for(var b=
new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer},byteArray2String:function(a,b,c){c=c||a.length;var d="";for(b=b||0;b<c;b++)d+=String.fromCharCode(a[b]);return d},applyScale:function(){var a=dojo.position(this.container);a.w-=2;a.h-=2;if(a.w<this.serverSettings.width||a.h<this.serverSettings.height)this.scale=this.serverSettings.width/this.serverSettings.height>a.w/a.h?a.w/this.serverSettings.width:a.h/this.serverSettings.height;this.canvas.style.width=Math.floor(this.serverSettings.width*
this.scale)+"px";this.canvas.style.height=Math.floor(this.serverSettings.height*this.scale)+"px"},wsMessageListener:function(a){switch(this.state){case "init":a=this.decodeMessage2String(a.data);switch(a){case "RFB 003.008\n":this.vncVersion=3.8;this.state="security";this.ws.send(this.encodeString2Message(a));break;default:console.error('Version "'+a+'" not supported'),this.ws.close()}break;case "security":var b=new Uint8Array(a.data);0==b[0]&&(console.error("Got no valid security type"),this.ws.close());
for(a=0;a<b[0];a++)1==b[a]&&(this.securityType=b[a]);switch(this.securityType){case 0:console.error("Got no valid security type");this.ws.close();break;case 1:this.state="securityResult";this.ws.send((new Uint8Array([this.securityType])).buffer);break;case 2:console.error("VNC Authentication not supported"),this.ws.close()}break;case "securityResult":a=new Uint8Array(a.data);0!=(a[0]||a[1]||a[2]||a[3])?(console.error("Security handshake failed"),this.ws.close()):(this.state="serverInit",this.ws.send((new Uint8Array([1])).buffer));
break;case "serverInit":a=new Uint8Array(a.data);this.serverSettings.width=256*a[0]+a[1];this.serverSettings.height=256*a[2]+a[3];this.applyScale();this.serverSettings.bitPerPixel=a[4];32!=this.serverSettings.bitPerPixel&&console.error("Only True Color supported");this.serverSettings.depth=a[5];this.serverSettings.bigEndianFlag=a[6];this.serverSettings.trueColorFlag=a[7];this.serverSettings.redMax=256*a[8]+a[9];this.serverSettings.greenMax=256*a[10]+a[11];this.serverSettings.blueMax=256*a[12]+a[13];
this.serverSettings.redShift=a[14];this.serverSettings.greenShift=a[15];this.serverSettings.blueShift=a[16];this.serverSettings.name=this.byteArray2String(a,24+256*(256*(256*a[20]+a[21])+a[22])+a[23]);this.state="connected";this.tileImage=this.context.createImageData(16,16);this.canvas.width=this.serverSettings.width;this.canvas.height=this.serverSettings.height;this.ws.send((new Uint8Array([0,0,0,0,32,24,0,1,0,255,0,255,0,255,16,8,0,0,0,0])).buffer);this.ws.send((new Uint8Array([2,0,0,3,0,0,0,1,
0,0,0,5,0,0,0,0])).buffer);this.ws.send((new Uint8Array([3,0,0,0,0,0,a[0],a[1],a[2],a[3]])).buffer);break;case "connected":b=new Uint8Array(a.data);switch(b[0]){case 0:var c=256*b[2]+b[3];if(0==c)break;var d=4;for(a=0;a<c;a++){var f=256*b[d]+b[d+1],g=256*b[d+2]+b[d+3],k=256*b[d+4]+b[d+5],l=256*b[d+6]+b[d+7],d=d+8,n=b[d+3],d=d+4;switch(n){case 0:d=this.handleRaw(b,f,g,k,l,d);break;case 1:d=this.handleCopyrect(b,f,g,k,l,d);break;case 5:d=this.handleHextile(b,f,g,k,l,d);break;case 252:d=this.handleTightPng(b,
f,g,k,l,d);break;default:console.error("Unknown Encoding "+b[12]+"-"+b[13]+"-"+b[14]+"-"+b[15])}}break;default:console.warn("Unknown Server Message "+b[0])}break;case "disconnected":break;default:console.error("State "+this.state+" not implemented")}},reconnect:function(){console.log("RECONNECT!!!");this.disconnect()},_getMouseXY:function(a){for(var b=this.canvas,c=[0,0];b.offsetParent;)c[0]=c[0]+b.offsetLeft-b.scrollLeft,c[1]=c[1]+b.offsetTop-b.scrollTop,b=b.offsetParent;c[0]=a.clientX+document.body.scrollLeft+
document.documentElement.scrollLeft-c[0];c[1]=a.clientY+document.body.scrollTop+document.documentElement.scrollTop-c[1];c[0]/=this.scale;c[1]/=this.scale;return c},sendMouseCoords:function(){this.mouseCoords&&(this.ws.send((new Uint8Array([5,this.mouseButtonState,this.mouseCoords[0]>>8,this.mouseCoords[0]&255,this.mouseCoords[1]>>8,this.mouseCoords[1]&255])).buffer),this.mouseCoords=null)},mouseEnter:function(a){this.canvas.focus();dojo.addClass(this.canvas,"firmosVNCActive");dojo.removeClass(this.canvas,
"firmosVNCInactive");this.isActive=!0},mouseOut:function(a){dojo.addClass(this.canvas,"firmosVNCInactive");dojo.removeClass(this.canvas,"firmosVNCActive");this.isActive=!1},mouseMoveListener:function(a){this.isActive||this.mouseEnter(a);this.mouseCoords=this._getMouseXY(a)},mouseDownListener:function(a){this.mouseButtonState|=1<<a.button;a=this._getMouseXY(a);this.ws.send((new Uint8Array([5,this.mouseButtonState,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.mouseCoords=null},mouseUpListener:function(a){this.mouseButtonState^=
1<<a.button;a=this._getMouseXY(a);this.ws.send((new Uint8Array([5,this.mouseButtonState,a[0]>>8,a[0]&255,a[1]>>8,a[1]&255])).buffer);this.mouseCoords=null},mouseClickListener:function(a){return!1},contextMenuListener:function(a){return!1},getSpecialKeyCode:function(a){switch(a.keyCode){case 8:return 65288;case 9:return 65289;case 13:return 65293;case 27:return 65307;case 45:return 65379;case 46:return 65535;case 36:return 65360;case 35:return 65367;case 33:return 65365;case 34:return 65366;case 37:return 65361;
case 38:return 65362;case 39:return 65363;case 40:return 65364;case 112:return 65470;case 113:return 65471;case 114:return 65472;case 115:return 65473;case 116:return 65474;case 117:return 65475;case 118:return 65476;case 119:return 65477;case 120:return 65478;case 121:return 65479;case 122:return 65480;case 123:return 65481;case 16:return 65505;case 17:return 65507;case 18:return 65406}return 0},keyDownListener:function(a){if(this.isActive){var b=this.getSpecialKeyCode(a);0!=b&&(this.stopEvent(a),
this.ws.send((new Uint8Array([4,1,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},keyUpListener:function(a){if(this.isActive){var b=this.getSpecialKeyCode(a);b&&(this.stopEvent(a),this.ws.send((new Uint8Array([4,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255])).buffer));return!1}},keyPressListener:function(a){if(this.isActive)return 0!=a.which&&0!=a.charCode&&(this.stopEvent(a),a=0<a.charCode?[a.charCode>>24&255,a.charCode>>16&255,a.charCode>>8&255,a.charCode&255]:[a.which>>24&255,a.which>>
16&255,a.which>>8&255,a.which&255],this.ws.send((new Uint8Array([4,1,0,0,a[0],a[1],a[2],a[3],4,0,0,0,a[0],a[1],a[2],a[3]])).buffer)),!1},handleCopyrect:function(a,b,c,d,f,g){var k=256*a[g]+a[g+1];g+=2;a=256*a[g]+a[g+1];g+=2;this.context.drawImage(this.canvas,k,a,d,f,b,c,d,f);return g},handleRaw:function(a,b,c,d,f,g){for(var k=this.context.createImageData(d,f),l,n,p=0;p<d*f;p++)l=4*p,n=l+g,k.data[l]=a[n+2],k.data[l+1]=a[n+1],k.data[l+2]=a[n],k.data[l+3]=255;this.context.putImageData(k,b,c);return n+
4},handleHextile:function(a,b,c,d,f,g){for(var k=Math.ceil(d/16),l=Math.ceil(f/16),n=[0,0,0,255],p=[0,0,0,255],q=[0,0,0,255],r,s=0;s<l;s++)for(var t=0;t<k;t++){r=a[g];g++;var M=16,q=16;s==l-1&&(q=16-(16*l-f));t==k-1&&(M=16-(16*k-d));var E=M*q;if(0==r)this.context.fillStyle="rgb("+n[2]+","+n[1]+","+n[0]+")",this.context.fillRect(b+16*t,c+16*s,M,q);else if(r&1){var K,G;r=256==E?this.tileImage:this.context.createImageData(M,q);for(M=0;M<E;M++)K=4*M,G=K+g,r.data[K]=a[G+2],r.data[K+1]=a[G+1],r.data[K+
2]=a[G],r.data[K+3]=255;this.context.putImageData(r,b+16*t,c+16*s);g=G+4}else if(r&2&&(n=[a[g],a[g+1],a[g+2],a[g+3]],g+=4),r&4&&(p=[a[g],a[g+1],a[g+2],a[g+3]],g+=4),E=b+16*t,K=c+16*s,this.context.fillStyle="rgb("+n[2]+","+n[1]+","+n[0]+")",this.context.fillRect(E,K,M,q),r&8){var u=a[g];g++;for(M=0;M<u;M++){r&16?(q=[a[g],a[g+1],a[g+2],a[g+3]],g+=4):q=p;var S=a[g]>>4,Q=a[g]&15;g++;var W=(a[g]>>4)+1,P=(a[g]&15)+1;g++;this.context.fillStyle="rgb("+q[2]+","+q[1]+","+q[0]+")";this.context.fillRect(E+S,
K+Q,W,P)}}}return g},wsErrorListener:function(a){console.error("wsError "+JSON.stringify(a));this.reconnect()},wsCloseListener:function(){this.state="disconnected";this.intervalId&&window.clearInterval(this.intervalId)},wsOpenListener:function(){this.state="init"}})});d3=function(){function p(a){return null!=a&&!isNaN(a)}function t(a){return a.length}function r(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function s(){}function g(){}function b(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function n(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=hg.length;d>c;++c){var e=hg[c]+b;if(e in a)return e}}function l(a){for(var b=a.length,c=Array(b);b--;)c[b]=
a[b];return c}function d(){}function c(){}function k(a){function b(){for(var d,e=c,f=-1,g=e.length;++f<g;)(d=e[f].on)&&d.apply(this,arguments);return a}var c=[],d=new s;return b.on=function(b,e){var f,g=d.get(b);return 2>arguments.length?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function f(){B.event.preventDefault()}function q(){for(var a,b=B.event;a=b.sourceEvent;)b=a;return b}function a(a){for(var b=new c,d=0,e=arguments.length;++d<
e;)b[arguments[d]]=k(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=B.event;e.target=a;B.event=e;b[e.type].apply(c,d)}finally{B.event=f}}},b}function e(a){return Ye(a,La),a}function m(a){return"function"==typeof a?a:function(){return Kf(a,this)}}function v(a){return"function"==typeof a?a:function(){return Lf(a,this)}}function x(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,
a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function k(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=B.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?k:g:a.local?f:e}function z(a){return a.trim().replace(/\s+/g," ")}function A(a){return RegExp("(?:^|\\s+)"+B.requote(a)+"(?:\\s+|$)","g")}function y(a,b){function c(){for(var d=-1;++d<e;)a[d](this,
b)}function d(){for(var c=-1,f=b.apply(this,arguments);++c<e;)a[c](this,f)}a=a.trim().split(/\s+/).map(C);var e=a.length;return"function"==typeof b?d:c}function C(a){var b=A(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",z(e+" "+a))):c.setAttribute("class",z(e.replace(b," ")))}}function F(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=
b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function D(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function H(a){return"function"==typeof a?a:(a=B.ns.qualify(a)).local?function(){return Ma.createElementNS(a.space,a.local)}:function(){return Ma.createElementNS(this.namespaceURI,a)}}
function N(a){return function(){return ig(this,a)}}function J(a){return arguments.length||(a=B.ascending),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function M(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,k=f.length;k>g;g++)(e=f[g])&&b(e,g,c);return a}function E(a){return Ye(a,cd),a}function K(a){var b,c;return function(d,e,f){d=a[f].update;var g=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<g;);return e}}function G(a,b,c){function e(){var b=this[k];b&&(this.removeEventListener(a,
b,b.$),delete this[k])}function f(){var d=m(b,td(arguments));e.call(this);this.addEventListener(a,this[k]=d,d.$=c);d._=b}function g(){var b,c=RegExp("^__on([^.]+)"+B.requote(a)+"$"),d;for(d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$);delete this[d]}}var k="__on"+a,l=a.indexOf("."),m=u;0<l&&(a=a.substring(0,l));var n=Mf.get(a);return n&&(a=n,m=S),l?b?f:e:b?d:g}function u(a,b){return function(c){var d=B.event;B.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{B.event=
d}}}function S(a,b){var c=u(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||8&b.compareDocumentPosition(this))||c.call(this,a)}}function Q(){var a=".dragsuppress-"+ ++Tg,b="touchmove"+a,c="selectstart"+a,d="dragstart"+a,e="click"+a,g=B.select(Ra).on(b,f).on(c,f).on(d,f),k=Ka.style,l=k[Nf];return k[Nf]="none",function(b){function c(){g.on(e,null)}g.on(a,null);k[Nf]=l;b&&(g.on(e,function(){f();c()},!0),setTimeout(c,0))}}function W(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=
c.createSVGPoint();if(0>Of&&(Ra.scrollX||Ra.scrollY)){var c=B.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();Of=!(e.f||e.e);c.remove()}return Of?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function P(){}function aa(a,b,c){return new ca(a,b,c)}
function ca(a,b,c){this.h=a;this.s=b;this.l=c}function Y(a,b,c){function d(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;return a=isNaN(a)?0:0>(a%=360)?a+360:a,b=isNaN(b)?0:0>b?0:1<b?1:b,c=0>c?0:1<c?1:c,f=0.5>=c?c*(1+b):c+b-c*b,e=2*c-f,db(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function U(a){return 1<a?0:-1>a?ia:Math.acos(a)}function V(a){return 1<a?ia/2:-1>a?-ia/2:Math.asin(a)}function R(a){return(Math.exp(a)-Math.exp(-a))/
2}function ba(a){return(a=Math.sin(a/2))*a}function Z(a,b,c){return new na(a,b,c)}function na(a,b,c){this.h=a;this.c=b;this.l=c}function ka(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),ja(c,Math.cos(a*=sa)*b,Math.sin(a)*b)}function ja(a,b,c){return new ea(a,b,c)}function ea(a,b,c){this.l=a;this.a=b;this.b=c}function da(a,b,c){a=(a+16)/116;b=a+b/500;c=a-c/200;return b=L(b)*jg,a=L(a)*kg,c=L(c)*lg,db(Ua(3.2404542*b-1.5371385*a-0.4985314*c),Ua(-0.969266*b+1.8760108*a+0.041556*c),Ua(0.0556434*b-0.2040259*
a+1.0572252*c))}function wa(a,b,c){return 0<a?Z(Math.atan2(c,b)*fb,Math.sqrt(b*b+c*c),a):Z(0/0,0/0,a)}function L(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Pa(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Ua(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function ra(a){return db(a>>16,255&a>>8,255&a)+""}function db(a,b,c){return new Qa(a,b,c)}function Qa(a,b,c){this.r=a;this.g=b;this.b=c}function Za(a){return 16>a?"0"+Math.max(0,a).toString(16):
Math.min(255,a).toString(16)}function bb(a,b,c){var d,e,f,g=0,k=0,l=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case "hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return b(Va(e[0]),Va(e[1]),Va(e[2]))}return(f=Ze.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,k=a.charAt(2),k+=k,l=a.charAt(3),l+=l):7===a.length&&(g=a.substring(1,3),k=a.substring(3,5),l=a.substring(5,7)),g=parseInt(g,16),k=parseInt(k,
16),l=parseInt(l,16)),b(g,k,l))}function xa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),k=g-f,l=(g+f)/2;return k?(e=0.5>l?k/(g+f):k/(2-g-f),d=a==g?(b-c)/k+(c>b?6:0):b==g?(c-a)/k+2:(a-b)/k+4,d*=60):(d=0/0,e=0<l&&1>l?0:d),aa(d,e,l)}function Ia(a,b,c){a=ma(a);b=ma(b);c=ma(c);var d=Pa((0.4124564*a+0.3575761*b+0.1804375*c)/jg),e=Pa((0.2126729*a+0.7151522*b+0.072175*c)/kg);a=Pa((0.0193339*a+0.119192*b+0.9503041*c)/lg);return ja(116*e-16,500*(d-e),200*(e-a))}function ma(a){return 0.04045>=
(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function Va(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function va(a){return"function"==typeof a?a:function(){return a}}function oa(a){return a}function T(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Fa(b,c,a,d)}}function Fa(a,b,c,d){function e(){var a,b=l.status;if(!b&&l.responseText||200<=b&&300>b||304===b){try{a=c.call(f,l)}catch(d){return g.error.call(f,d),void 0}g.load.call(f,
a)}else g.error.call(f,l)}var f={},g=B.dispatch("progress","load","error"),k={},l=new XMLHttpRequest,m=null;return!Ra.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(a)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=e:l.onreadystatechange=function(){3<l.readyState&&e()},l.onprogress=function(a){var b=B.event;B.event=a;try{g.progress.call(f,l)}finally{B.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),2>arguments.length?k[a]:(null==b?delete k[a]:k[a]=b+"",f)},
f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(m=a,f):m},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(td(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),l.open(c,a,!0),null==b||"accept"in k||(k.accept=b+",*/*"),l.setRequestHeader)for(var g in k)l.setRequestHeader(g,k[g]);return null!=b&&l.overrideMimeType&&
l.overrideMimeType(b),null!=m&&(l.responseType=m),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),l.send(null==d?null:d),f},f.abort=function(){return l.abort(),f},B.rebind(f,g,"on"),null==d?f:f.get(Ha(d))}function Ha(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ba(){var a=Kb(),a=Vb()-a;24<a?(isFinite(a)&&(clearTimeout($e),$e=setTimeout(Ba,a)),af=0):(af=1,mg(Ba))}function mb(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());Sc.callback=a;Sc.time=c+b}function Kb(){var a=
Date.now();for(Sc=bf;Sc;)a>=Sc.time&&(Sc.flush=Sc.callback(a-Sc.time)),Sc=Sc.next;return a}function Vb(){for(var a,b=bf,c=1/0;b;)b.flush?b=a?a.next=b.next:bf=b.next:(b.time<c&&(c=b.time),b=(a=b).next);return cf=a,c}function Ya(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Sa(a){return a+""}function Ub(){}function Oa(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function wb(a,b){a&&ng.hasOwnProperty(a.type)&&ng[a.type](a,b)}function Wa(a,b,c){var d=-1,e=a.length-c;for(b.lineStart();++d<
e;)c=a[d],b.point(c[0],c[1]);b.lineEnd()}function Ta(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Wa(a[c],b,1);b.polygonEnd()}function lb(){function a(b,c){b*=sa;c=c*sa/2+ia/4;var g=b-d,k=Math.cos(c),l=Math.sin(c),m=f*l,n=e*k+m*Math.cos(g),g=m*Math.sin(g);Ud.add(Math.atan2(g,n));d=b;e=k;f=l}var b,c,d,e,f;xc.point=function(g,k){xc.point=a;d=(b=g)*sa;e=Math.cos(k=(c=k)*sa/2+ia/4);f=Math.sin(k)};xc.lineEnd=function(){a(b,c)}}function za(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),
c*Math.sin(b),Math.sin(a)]}function Xa(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function rb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function gb(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function dc(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Qb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Db(a){return[Math.atan2(a[1],a[0]),V(a[2])]}function $a(a,b){return Math.abs(a[0]-b[0])<ta&&Math.abs(a[1]-b[1])<ta}function Aa(a,b){a*=sa;var c=
Math.cos(b*=sa);ha(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function ha(a,b,c){++Ce;dd+=(a-dd)/Ce;ed+=(b-ed)/Ce;Tc+=(c-Tc)/Ce}function Ca(){function a(e,f){e*=sa;var g=Math.cos(f*=sa),k=g*Math.cos(e),g=g*Math.sin(e),l=Math.sin(f),m=Math.atan2(Math.sqrt((m=c*l-d*g)*m+(m=d*k-b*l)*m+(m=b*g-c*k)*m),b*k+c*g+d*l);ie+=m;Cc+=m*(b+(b=k));Dc+=m*(c+(c=g));lc+=m*(d+(d=l));ha(b,c,d)}var b,c,d;Ic.point=function(e,f){e*=sa;var g=Math.cos(f*=sa);b=g*Math.cos(e);c=g*Math.sin(e);d=Math.sin(f);Ic.point=a;ha(b,c,d)}}
function Na(){Ic.point=Aa}function yb(){function a(b,c){b*=sa;var g=Math.cos(c*=sa),k=g*Math.cos(b),g=g*Math.sin(b),l=Math.sin(c),m=e*l-f*g,n=f*k-d*l,p=d*g-e*k,q=Math.sqrt(m*m+n*n+p*p),I=d*k+e*g+f*l,ob=q&&-U(I)/q,q=Math.atan2(q,I);ud+=ob*m;vd+=ob*n;Uc+=ob*p;ie+=q;Cc+=q*(d+(d=k));Dc+=q*(e+(e=g));lc+=q*(f+(f=l));ha(d,e,f)}var b,c,d,e,f;Ic.point=function(g,k){b=g;c=k;Ic.point=a;g*=sa;var l=Math.cos(k*=sa);d=l*Math.cos(g);e=l*Math.sin(g);f=Math.sin(k);ha(d,e,f)};Ic.lineEnd=function(){a(b,c);Ic.lineEnd=
Na;Ic.point=Aa}}function la(){return!0}function Eb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if($a(c,d)){e.lineStart();for(d=0;b>d;++d)e.point((c=a[d])[0],c[1]);return e.lineEnd(),void 0}a={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0};c={point:c,points:[c],other:a,visited:!1,entry:!1,subject:!1};a.other=c;f.push(a);g.push(c);a={point:d,points:[d],other:null,visited:!1,entry:!1,subject:!0};c={point:d,points:[d],other:a,visited:!1,
entry:!0,subject:!1};a.other=c;f.push(a);g.push(c)}}),g.sort(b),ib(f),ib(g),f.length){if(c)for(a=1,c=!c(g[0].point),b=g.length;b>a;++a)g[a].entry=c=!c;for(var k,l=f[0];;){for(c=l;c.visited;)if((c=c.next)===l)return;b=c.points;e.lineStart();do{if(c.visited=c.other.visited=!0,c.entry){if(c.subject)for(a=0;a<b.length;a++)e.point((k=b[a])[0],k[1]);else d(c.point,c.next.point,1,e);c=c.next}else{if(c.subject)for(b=c.prev.points,a=b.length;0<=--a;)e.point((k=b[a])[0],k[1]);else d(c.point,c.prev.point,-1,
e);c=c.prev}c=c.other;b=c.points}while(!c.visited);e.lineEnd()}}}function ib(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.next=c=a[d],c.prev=e,e=c;e.next=c=a[0];c.prev=e}}function Ga(a,b,c,d){return function(e){function f(b,c){a(b,c)&&e.point(b,c)}function g(a,b){s.point(a,b)}function k(){O.point=g;s.lineStart()}function l(){O.point=f;s.lineEnd()}function m(a,b){X.point(a,b);r.push([a,b])}function n(){X.lineStart();r=[]}function p(){m(r[0][0],r[0][1]);X.lineEnd();var a;a=X.clean();var b=t.buffer(),
c=b.length;if(r.pop(),I.push(r),r=null,c){if(1&a){a=b[0];var d,c=a.length-1,b=-1;for(e.lineStart();++b<c;)e.point((d=a[b])[0],d[1]);return e.lineEnd(),void 0}1<c&&2&a&&b.push(b.pop().concat(b.shift()));q.push(b.filter(jb))}}var q,I,r,s=b(e),O={point:f,lineStart:k,lineEnd:l,polygonStart:function(){O.point=m;O.lineStart=n;O.lineEnd=p;q=[];I=[];e.polygonStart()},polygonEnd:function(){O.point=f;O.lineStart=k;O.lineEnd=l;q=B.merge(q);q.length?Eb(q,Lb,null,c,e):d(I)&&(e.lineStart(),c(null,null,1,e),e.lineEnd());
e.polygonEnd();q=I=null},sphere:function(){e.polygonStart();e.lineStart();c(null,null,1,e);e.lineEnd();e.polygonEnd()}},t=tb(),X=b(t);return O}}function jb(a){return 1<a.length}function tb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:d,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Lb(a,b){return(0>(a=a.point)[0]?a[1]-ia/2-ta:ia/2-a[1])-(0>(b=b.point)[0]?b[1]-ia/2-ta:ia/
2-b[1])}function Yb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=!1,k=!1,l=0;Ud.reset();for(var m=0,n=b.length;n>m;++m){var p=b[m],q=p.length;if(q){for(var I=p[0],r=I[0],s=I[1]/2+ia/4,O=Math.sin(s),t=Math.cos(s),s=1;;){s===q&&(s=0);a=p[s];var B=a[0],X=a[1]/2+ia/4,u=Math.sin(X),v=Math.cos(X),ga=B-r,x=Math.abs(ga)>ia,O=O*u;if(Ud.add(Math.atan2(O*Math.sin(ga),t*v+O*Math.cos(ga))),Math.abs(X)<ta&&(k=!0),f+=x?ga+(0<=ga?2:-2)*ia:ga,x^r>=c^B>=c)I=rb(za(I),za(a)),Qb(I),I=rb(e,I),Qb(I),I=(x^
0<=ga?-1:1)*V(I[2]),d>I&&(l+=x^0<=ga?1:-1);if(!s++)break;r=B;O=u;t=v;I=a}Math.abs(f)>ta&&(g=!0)}}return(!k&&!g&&0>Ud||-ta>f)^1&l}function Fb(a){function b(a,c){return Math.cos(a)*Math.cos(c)>e}function c(a,b,d){var f=za(a),g=za(b),k=[1,0,0],g=rb(f,g),l=Xa(g,g),f=g[0],m=l-f*f;if(!m)return!d&&a;l=e*l/m;m=-e*f/m;f=rb(k,g);k=dc(k,l);g=dc(g,m);gb(k,g);g=Xa(k,f);l=Xa(f,f);m=g*g-l*(Xa(k,k)-1);if(!(0>m)){var n=Math.sqrt(m),m=dc(f,(-g-n)/l);if(gb(m,k),m=Db(m),!d)return m;var p;d=a[0];var q=b[0];a=a[1];b=b[1];
d>q&&(p=d,d=q,q=p);var I=q-d,ob=Math.abs(I-ia)<ta,r=ob||ta>I;if(!ob&&a>b&&(p=a,a=b,b=p),r?ob?0<a+b^m[1]<(Math.abs(m[0]-d)<ta?a:b):a<=m[1]&&m[1]<=b:I>ia^(d<=m[0]&&m[0]<=q))return p=dc(f,(-g+n)/l),gb(p,k),[m,Db(p)]}}function d(b,c){var e=f?a:ia-a,g=0;return-e>b?g|=1:b>e&&(g|=2),-e>c?g|=4:c>e&&(g|=8),g}var e=Math.cos(a),f=0<e,g=[a,0],k=Math.abs(e)>ta,l=fa(a,6*sa);return Ga(b,function(a){var e,g,l,m,n;return{lineStart:function(){m=l=!1;n=1},point:function(p,q){var I,ob=[p,q],r=b(p,q),s=f?r?0:d(p,q):r?
d(p+(0>p?ia:-ia),q):0;if(!e&&(m=l=r)&&a.lineStart(),r!==l&&(I=c(e,ob),($a(e,I)||$a(ob,I))&&(ob[0]+=ta,ob[1]+=ta,r=b(ob[0],ob[1]))),r!==l)n=0,r?(a.lineStart(),I=c(ob,e),a.point(I[0],I[1])):(I=c(e,ob),a.point(I[0],I[1]),a.lineEnd()),e=I;else if(k&&e&&f^r){var O;s&g||!(O=c(ob,e,!0))||(n=0,f?(a.lineStart(),a.point(O[0][0],O[0][1]),a.point(O[1][0],O[1][1]),a.lineEnd()):(a.point(O[1][0],O[1][1]),a.lineEnd(),a.lineStart(),a.point(O[0][0],O[0][1])))}!r||e&&$a(e,ob)||a.point(ob[0],ob[1]);e=ob;l=r;g=s},lineEnd:function(){l&&
a.lineEnd();e=null},clean:function(){return n|(m&&l)<<1}}},l,function(a){return Yb(g,a)})}function nb(a,b,c,d){function e(d,f){return Math.abs(d[0]-a)<ta?0<f?0:3:Math.abs(d[0]-c)<ta?0<f?2:1:Math.abs(d[1]-b)<ta?0<f?1:0:0<f?3:2}function f(a,b){return g(a.point,b.point)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(k){function l(f){f=e(f,-1);return m([0===f||3===f?a:c,1<f?d:b])}function m(a){for(var b=0,c=r.length,d=a[1],
e=0;c>e;++e)for(var f,g=1,k=r[e],l=k.length,n=k[0];l>g;++g)f=k[g],n[1]<=d?f[1]>d&&0<(f[0]-n[0])*(a[1]-n[1])-(a[0]-n[0])*(f[1]-n[1])&&++b:f[1]<=d&&0>(f[0]-n[0])*(a[1]-n[1])-(a[0]-n[0])*(f[1]-n[1])&&--b,n=f;return 0!==b}function n(f,k,l,m){var p=0,q=0;if(null==f||(p=e(f,l))!==(q=e(k,l))||0>g(f,k)^0<l){do m.point(0===p||3===p?a:c,1<p?d:b);while((p=(p+l+4)%4)!==q)}else m.point(k[0],k[1])}function p(e,f){e>=a&&c>=e&&f>=b&&d>=f&&k.point(e,f)}function q(e,f){e=Math.max(-df,Math.min(df,e));f=Math.max(-df,
Math.min(df,f));var g=e>=a&&c>=e&&f>=b&&d>=f;if(r&&O.push([e,f]),x)s=e,t=f,X=g,x=!1,g&&(k.lineStart(),k.point(e,f));else if(g&&ga)k.point(e,f);else{var l=[u,v],m=[e,f],n=m[0]-l[0],p=m[1]-l[1],I=[0,1];(Math.abs(n)<ta&&Math.abs(p)<ta?a<=l[0]&&l[0]<=c&&b<=l[1]&&l[1]<=d:eb(a-l[0],n,I)&&eb(l[0]-c,-n,I)&&eb(b-l[1],p,I)&&eb(l[1]-d,-p,I)&&(1>I[1]&&(m[0]=l[0]+I[1]*n,m[1]=l[1]+I[1]*p),0<I[0]&&(l[0]+=I[0]*n,l[1]+=I[0]*p),!0))?(ga||(k.lineStart(),k.point(l[0],l[1])),k.point(m[0],m[1]),g||k.lineEnd()):g&&(k.lineStart(),
k.point(e,f))}u=e;v=f;ga=g}var I,r,O,s,t,X,u,v,ga,x,y=k,Ma=tb(),z={point:p,lineStart:function(){z.point=q;r&&r.push(O=[]);x=!0;ga=!1;u=v=0/0},lineEnd:function(){I&&(q(s,t),X&&ga&&Ma.rejoin(),I.push(Ma.buffer()));z.point=p;ga&&k.lineEnd()},polygonStart:function(){k=Ma;I=[];r=[]},polygonEnd:function(){k=y;(I=B.merge(I)).length?(k.polygonStart(),Eb(I,f,l,n,k),k.polygonEnd()):m([a,b])&&(k.polygonStart(),k.lineStart(),n(null,null,1,k),k.lineEnd(),k.polygonEnd());I=r=O=null}};return z}}function eb(a,b,
c){if(Math.abs(b)<ta)return 0>=a;a/=b;if(0<b){if(a>c[1])return!1;a>c[0]&&(c[0]=a)}else{if(a<c[0])return!1;a<c[1]&&(c[1]=a)}return!0}function Gb(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Mb(a){var b=0,c=ia/3,d=cb(a);a=d(b,c);return a.parallels=function(a){return arguments.length?d(b=a[0]*ia/180,c=a[1]*ia/180):[b/ia*180,c/ia*180]},a}function Ea(a,b){function c(a,b){var d=Math.sqrt(f-
2*e*Math.sin(b))/e;return[d*Math.sin(a*=e),g-d*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,V((f-(a*a+c*c)*e*e)/(2*e))]},c}function Zb(){function a(b,c){ef+=e*b-d*c;d=b;e=c}var b,c,d,e;wd.point=function(f,g){wd.point=a;b=d=f;c=e=g};wd.lineEnd=function(){a(b,c)}}function Ja(){function a(b,c){g.push("M",b,",",c,f)}function b(a,d){g.push("M",a,",",d);k.point=c}function c(a,b){g.push("L",a,",",b)}function d(){k.point=
a}function e(){g.push("Z")}var f=$b(4.5),g=[],k={point:a,lineStart:function(){k.point=b},lineEnd:d,polygonStart:function(){k.lineEnd=e},polygonEnd:function(){k.lineEnd=d;k.point=a},pointRadius:function(a){return f=$b(a),k},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return k}function $b(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function ua(a,b){dd+=a;ed+=b;++Tc}function Hb(){function a(d,e){var f=d-b,g=e-c,f=Math.sqrt(f*f+g*g);Cc+=f*(b+d)/2;
Dc+=f*(c+e)/2;lc+=f;ua(b=d,c=e)}var b,c;Jc.point=function(d,e){Jc.point=a;ua(b=d,c=e)}}function Bc(){Jc.point=ua}function Ib(){function a(b,c){var f=b-d,g=c-e,f=Math.sqrt(f*f+g*g);Cc+=f*(d+b)/2;Dc+=f*(e+c)/2;lc+=f;f=e*b-d*c;ud+=f*(d+b);vd+=f*(e+c);Uc+=3*f;ua(d=b,e=c)}var b,c,d,e;Jc.point=function(f,g){Jc.point=a;ua(b=d=f,c=e=g)};Jc.lineEnd=function(){a(b,c)}}function ab(a){function b(c,d){a.moveTo(c,d);a.arc(c,d,k,0,2*ia)}function c(b,d){a.moveTo(b,d);l.point=e}function e(b,c){a.lineTo(b,c)}function f(){l.point=
b}function g(){a.closePath()}var k=4.5,l={point:b,lineStart:function(){l.point=c},lineEnd:f,polygonStart:function(){l.lineEnd=g},polygonEnd:function(){l.lineEnd=f;l.point=b},pointRadius:function(a){return k=a,l},result:d};return l}function wc(a){function b(d){function e(b,c){b=a(b,c);d.point(b[0],b[1])}function g(){B=0/0;v.point=k;d.lineStart()}function k(b,e){var g=za([b,e]),l=a(b,e);c(B,X,Rc,u,We,Xe,B=l[0],X=l[1],Rc=b,u=g[0],We=g[1],Xe=g[2],f,d);d.point(B,X)}function l(){v.point=e;d.lineEnd()}function m(){g();
v.point=n;v.lineEnd=p}function n(a,b){k(q=a,b);I=B;r=X;O=u;s=We;t=Xe;v.point=k}function p(){c(B,X,Rc,u,We,Xe,I,r,q,O,s,t,f,d);v.lineEnd=l;l()}var q,I,r,O,s,t,Rc,B,X,u,We,Xe,v={point:e,lineStart:g,lineEnd:l,polygonStart:function(){d.polygonStart();v.lineStart=m},polygonEnd:function(){d.polygonEnd();v.lineStart=g}};return v}function c(b,f,g,k,l,m,n,p,q,I,r,O,s,t){var Rc=n-b,B=p-f,X=Rc*Rc+B*B;if(X>4*d&&s--){var u=k+I,he=l+r,v=m+O,ga=Math.sqrt(u*u+he*he+v*v),x=Math.asin(v/=ga),y=Math.abs(Math.abs(v)-
1)<ta?(g+q)/2:Math.atan2(he,u),Ma=a(y,x),x=Ma[0],Ma=Ma[1],z=x-b,A=Ma-f,Ka=B*z-Rc*A;(Ka*Ka/X>d||0.3<Math.abs((Rc*z+B*A)/X-0.5)||e>k*I+l*r+m*O)&&(c(b,f,g,k,l,m,x,Ma,y,u/=ga,he/=ga,v,s,t),t.point(x,Ma),c(x,Ma,y,u,he,v,n,p,q,I,r,O,s,t))}}var d=0.5,e=Math.cos(30*sa),f=16;return b.precision=function(a){return arguments.length?(f=0<(d=a*a)&&16,b):Math.sqrt(d)},b}function vc(a){var b=wc(function(b,c){return a([b*fb,c*fb])});return function(a){return a=b(a),{point:function(b,c){a.point(b*sa,c*sa)},sphere:function(){a.sphere()},
lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}}function sb(a){return cb(function(){return a})()}function cb(a){function b(a){return a=k(a[0]*sa,a[1]*sa),[a[0]*q+l,m-a[1]*q]}function c(a){return a=k.invert((a[0]-l)/q,(m-a[1])/q),a&&[a[0]*fb,a[1]*fb]}function d(){k=Gb(g=Qc(t,X,u),f);var a=f(O,s);return l=I-a[0]*q,m=r+a[1]*q,e()}function e(){return n&&(n.valid=!1,n=null),b}var f,g,k,l,m,n,p=wc(function(a,
b){return a=f(a,b),[a[0]*q+l,m-a[1]*q]}),q=150,I=480,r=250,O=0,s=0,t=0,X=0,u=0,v=og,ga=oa,x=null,y=null;return b.stream=function(a){return n&&(n.valid=!1),n=Sb(g,v(p(ga(a)))),n.valid=!0,n},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,og):Fb((x=+a)*sa),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,ga=null==a?oa:nb(a[0][0],a[0][1],a[1][0],a[1][1]),e()):y},b.scale=function(a){return arguments.length?(q=+a,d()):q},b.translate=function(a){return arguments.length?(I=+a[0],
r=+a[1],d()):[I,r]},b.center=function(a){return arguments.length?(O=a[0]%360*sa,s=a[1]%360*sa,d()):[O*fb,s*fb]},b.rotate=function(a){return arguments.length?(t=a[0]%360*sa,X=a[1]%360*sa,u=2<a.length?a[2]%360*sa:0,d()):[t*fb,X*fb,u*fb]},B.rebind(b,p,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function Sb(a,b){return{point:function(c,d){d=a(c*sa,d*sa);c=d[0];b.point(c>ia?c-2*ia:-ia>c?c+2*ia:c,d[1])},sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},
lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Ob(a,b){return[a,b]}function Qc(a,b,c){return a?b||c?Gb(Rb(a),hb(b,c)):Rb(a):b||c?hb(b,c):Ob}function gc(a){return function(b,c){return b+=a,[b>ia?b-2*ia:-ia>b?b+2*ia:b,c]}}function Rb(a){var b=gc(a);return b.invert=gc(-a),b}function hb(a,b){function c(a,b){var k=Math.cos(b),l=Math.cos(a)*k,k=Math.sin(a)*k,m=Math.sin(b),n=m*d+l*e;return[Math.atan2(k*f-n*g,l*d-m*e),V(n*f+k*g)]}
var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),k=Math.cos(a)*c,c=Math.sin(a)*c,l=Math.sin(b),m=l*f-c*g;return[Math.atan2(c*f+l*g,k*d+m*e),V(m*d-k*e)]},c}function fa(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,k){null!=e?(e=Pb(c,e),f=Pb(c,f),(0<g?f>e:e>f)&&(e+=2*g*ia)):(e=a+2*g*ia,f=a);for(var l,m=g*b;0<g?e>f:f>e;e-=m)k.point((l=Db([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],l[1])}}function Pb(a,b){var c=za(b);c[0]-=a;Qb(c);var d=
U(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-ta)%(2*Math.PI)}function hc(a,b,c){var d=B.range(a,b-ta,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function ub(a,b,c){var d=B.range(a,b-ta,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function Wb(a){return a.source}function xb(a){return a.target}function ld(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),k=Math.sin(d),l=e*Math.cos(a),m=e*Math.sin(a),n=g*Math.cos(c),p=g*Math.sin(c),q=2*Math.asin(Math.sqrt(ba(d-
b)+e*g*ba(c-a))),I=1/Math.sin(q);c=q?function(a){var b=Math.sin(a*=q)*I,c=Math.sin(q-a)*I;a=c*l+b*n;var d=c*m+b*p,b=c*f+b*k;return[Math.atan2(d,a)*fb,Math.atan2(b,Math.sqrt(a*a+d*d))*fb]}:function(){return[a*fb,b*fb]};return c.distance=q,c}function Gc(a,b){function c(b,d){var e=Math.cos(b),f=Math.cos(d),e=a(e*f);return[e*f*Math.sin(b),e*Math.sin(d)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),e=Math.cos(e);return[Math.atan2(a*f,d*e),Math.asin(d&&c*f/d)]},c}function Hc(a,
b){function c(a,b){var d=Math.abs(Math.abs(b)-ia/2)<ta?0:f/Math.pow(Math.tan(ia/4+b/2),e);return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(ia/4+b/2)/Math.tan(ia/4+a/2)),f=d*Math.pow(Math.tan(ia/4+a/2),e)/e;return e?(c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-ia/2]},c):md}function ya(a,b){function c(a,b){var d=f-b;return[d*Math.sin(e*a),f-d*Math.cos(e*
a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return Math.abs(e)<ta?Ob:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]},c)}function md(a,b){return[a,Math.log(Math.tan(ia/4+b/2))]}function Od(a){var b,c=sb(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:
a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var k=ia*d(),l=e();f([[l[0]-k,l[1]-k],[l[0]+k,l[1]+k]])}}else b&&(g=null);return g},c.clipExtent(null)}function nd(a,b){var c=Math.cos(b)*Math.sin(a);return[Math.log((1+c)/(1-c))/2,Math.atan2(Math.tan(b),Math.cos(a))]}function Pd(a){function b(g){function l(){n.push("M",f(a(p),k))}for(var m,n=[],p=[],q=-1,I=g.length,r=va(c),O=va(d);++q<I;)e.call(this,m=g[q],q)?p.push([+r.call(this,m,q),+O.call(this,m,q)]):p.length&&(l(),
p=[]);return p.length&&l(),n.length?n.join(""):null}var c=zb,d=ec,e=la,f=Ab,g=f.key,k=0.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Pf.get(a)||Ab).key,b):g},b.tension=function(a){return arguments.length?(k=a,b):k},b}function zb(a){return a[0]}function ec(a){return a[1]}function Ab(a){return a.join("L")}
function pd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function qd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function rc(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return Ab(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],k=g,l=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],l=2),1<b.length)for(k=b[1],f=a[l],l++,d+=
"C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-k[0])+","+(f[1]-k[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,l++)f=a[l],k=b[e],d+="S"+(f[0]-k[0])+","+(f[1]-k[1])+","+f[0]+","+f[1];c&&(c=a[l],d+="Q"+(f[0]+2*k[0]/3)+","+(f[1]+2*k[1]/3)+","+c[0]+","+c[1]);return d}function sc(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],k=1,l=a.length;++k<l;)c=f,f=g,g=a[k],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function rd(a){if(3>a.length)return Ab(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],k=[f,
f,f,d[1]],e=[e,",",f,"L",Bb(xd,g),",",Bb(xd,k)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),k.shift(),k.push(d[1]),ad(e,g,k);return a.pop(),e.push("L",d),e.join("")}function Bb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function ad(a,b,c){a.push("C",Bb(pg,b),",",Bb(pg,c),",",Bb(qg,b),",",Bb(qg,c),",",Bb(xd,b),",",Bb(xd,c))}function jc(a,b){return(b[1]-a[1])/(b[0]-a[0])}function de(a,b,c,d){var e,f,g,k,l,m,n;return e=d[a],f=e[0],g=e[1],e=d[b],k=e[0],l=e[1],e=d[c],m=e[0],n=e[1],
0<(n-g)*(k-f)-(l-g)*(m-f)}function qa(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function ee(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,k=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(k*(a-c)-d*(e-f))/(d*g-k*b);return[e+f*g,a+f*b]}function fe(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function fc(a,b){var c=a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),d=null,e={list:[],leftEnd:null,rightEnd:null,
init:function(){e.leftEnd=e.createHalfEdge(null,"l");e.rightEnd=e.createHalfEdge(null,"l");e.leftEnd.r=e.rightEnd;e.rightEnd.l=e.leftEnd;e.list.unshift(e.leftEnd,e.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a;b.r=a.r;a.r.l=b;a.r=b},leftBound:function(a){var b=e.leftEnd;do b=b.r;while(b!=e.rightEnd&&f.rightOf(b,a));return b.l},del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},
leftRegion:function(a){return null==a.edge?d:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?d:a.edge.region[Qf[a.side]]}},f={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y;return c.c=a.x*d+a.y*e+0.5*(d*d+e*e),(0<d?d:-d)>(0<e?e:-e)?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e),c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;var e=c.a*d.b-c.b*d.a;if(1E-10>Math.abs(e))return null;var f,g,k=(c.c*d.b-
d.c*c.b)/e,e=(d.c*c.a-c.c*d.a)/e,l=c.region.r,m=d.region.r;l.y<m.y||l.y==m.y&&l.x<m.x?(f=a,g=c):(f=b,g=d);return(c=k>=g.region.r.x)&&"l"===f.side||!c&&"r"===f.side?null:{x:k,y:e}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===c.a){var f=b.y-d.y,g=b.x-d.x,k=0,l=0;(!e&&0>c.b||e&&0<=c.b?l=k=f>=c.b*g:(l=b.x+b.y*c.b>c.c,0>c.b&&(l=!l),l||(k=1)),k)||(d=d.x-c.region.l.x,l=c.b*(g*g-f*f)<d*f*(1+2*g/d+c.b*c.b),0>c.b&&(l=!l))}else g=
c.c-c.a*b.x,c=b.y-g,f=b.x-d.x,d=g-d.y,l=c*c>f*f+d*d;return"l"===a.side?l:!l},endPoint:function(a,c,d){a.ep[c]=d;a.ep[Qf[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},g={list:[],insert:function(a,b,c){a.vertex=b;a.ystar=b.y+c;c=0;for(var d=g.list,e=d.length;e>c;c++){var f=d[c];if(!(a.ystar>f.ystar||a.ystar==f.ystar&&b.x>f.vertex.x))break}d.splice(c,0,a)},del:function(a){for(var b=0,c=g.list,d=c.length;d>b&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===
g.list.length},nextEvent:function(a){for(var b=0,c=g.list,d=c.length;d>b;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=g.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return g.list.shift()}};e.init();for(var d=c.shift(),k,l,m,n,p,q,I,r,O,s,t=c.shift();;)if(g.empty()||(k=g.min()),t&&(g.empty()||t.y<k.y||t.y==k.y&&t.x<k.x))l=e.leftBound(t),m=e.right(l),I=e.rightRegion(l),s=f.bisect(I,t),q=e.createHalfEdge(s,"l"),e.insert(l,q),(O=f.intersect(l,q))&&(g.del(l),g.insert(l,
O,f.distance(O,t))),l=q,q=e.createHalfEdge(s,"r"),e.insert(l,q),(O=f.intersect(q,m))&&g.insert(q,O,f.distance(O,t)),t=c.shift();else{if(g.empty())break;l=g.extractMin();n=e.left(l);m=e.right(l);p=e.right(m);I=e.leftRegion(l);q=e.rightRegion(m);O=l.vertex;f.endPoint(l.edge,l.side,O);f.endPoint(m.edge,m.side,O);e.del(l);g.del(m);e.del(m);l="l";I.y>q.y&&(r=I,I=q,q=r,l="r");s=f.bisect(I,q);q=e.createHalfEdge(s,l);e.insert(n,q);f.endPoint(s,Qf[l],O);(O=f.intersect(n,q))&&(g.del(n),g.insert(n,O,f.distance(O,
I)));(O=f.intersect(q,p))&&g.insert(q,O,f.distance(O,I))}for(l=e.right(e.leftEnd);l!=e.rightEnd;l=e.right(l))b(l.edge)}function kc(a){return a.x}function Qd(a){return a.y}function sd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Xb(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=0.5*(c+e),k=0.5*(d+f);b=b.nodes;b[0]&&Xb(a,b[0],c,d,g,k);b[1]&&Xb(a,b[1],g,d,e,k);b[2]&&Xb(a,b[2],c,k,g,f);b[3]&&Xb(a,b[3],g,k,e,f)}}function od(a,b){a=B.rgb(a);b=B.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,k=b.b-e;
return function(a){return"#"+Za(Math.round(c+f*a))+Za(Math.round(d+g*a))+Za(Math.round(e+k*a))}}function ye(a,b){var c,d={},e={};for(c in a)c in b?d[c]=bd(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function tc(a,b){return b-=a=+a,function(c){return a+b*c}}function ze(a,b){var c,d,e,f,g=0,k=[],l=[];a+="";b+="";for(d=ff.lastIndex=0;c=ff.exec(b);++d)c.index&&k.push(b.substring(g,c.index)),l.push({i:k.length,x:c[0]}),k.push(null),g=ff.lastIndex;
g<b.length&&k.push(b.substring(g));d=0;for(e=l.length;(c=ff.exec(a))&&e>d;++d)if(f=l[d],f.x==c[0]){if(f.i)if(null==k[f.i+1])for(k[f.i-1]+=f.x,k.splice(f.i,1),c=d+1;e>c;++c)l[c].i--;else for(k[f.i-1]+=f.x+k[f.i+1],k.splice(f.i,2),c=d+1;e>c;++c)l[c].i-=2;else if(null==k[f.i+1])k[f.i]=f.x;else for(k[f.i]=f.x+k[f.i+1],k.splice(f.i+1,1),c=d+1;e>c;++c)l[c].i--;l.splice(d,1);e--;d--}else f.x=tc(parseFloat(c[0]),parseFloat(f.x));for(;e>d;)f=l.pop(),null==k[f.i+1]?k[f.i]=f.x:(k[f.i]=f.x+k[f.i+1],k.splice(f.i+
1,1)),e--;return 1===k.length?null==k[0]?(f=l[0].x,function(a){return f(a)+""}):function(){return b}:function(a){for(d=0;e>d;++d)k[(f=l[d]).i]=f.x(a);return k.join("")}}function bd(a,b){for(var c,d=B.interpolators.length;0<=--d&&!(c=B.interpolators[d](a,b)););return c}function Rd(a,b){var c,d=[],e=[],f=a.length,g=b.length,k=Math.min(a.length,b.length);for(c=0;k>c;++c)d.push(bd(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;k>c;++c)e[c]=d[c](a);return e}}function ge(a){return function(b){return 0>=
b?0:1<=b?1:a(b)}}function Ae(a){return function(b){return 1-a(1-b)}}function Be(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function Jf(a){return a*a}function Sd(a){return a*a*a}function Cb(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(0.5>a?c:3*(a-b)+c-0.75)}function Ue(a){return 1-Math.cos(a*ia/2)}function Td(a){return Math.pow(2,10*(a-1))}function Ve(a){return 1-Math.sqrt(1-a*a)}function Da(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/
2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Ac(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Nb(a){var b=[a.a,a.b],c=[a.c,a.d],d=ac(b),e=b[0]*c[0]+b[1]*c[1],f;f=-e;f=(c[0]+=f*b[0],c[1]+=f*b[1],c);f=ac(f)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*fb;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*fb:0}function ac(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);
return b&&(a[0]/=b,a[1]/=b),b}function uc(a,b){var c,d=[],e=[],f=B.transform(a),g=B.transform(b),k=f.translate,l=g.translate,m=f.rotate,n=g.rotate,p=f.skew,q=g.skew,f=f.scale,g=g.scale;return k[0]!=l[0]||k[1]!=l[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:tc(k[0],l[0])},{i:3,x:tc(k[1],l[1])})):l[0]||l[1]?d.push("translate("+l+")"):d.push(""),m!=n?(180<m-n?n+=360:180<n-m&&(m+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:tc(m,n)})):n&&d.push(d.pop()+"rotate("+n+")"),p!=q?e.push({i:d.push(d.pop()+
"skewX(",null,")")-2,x:tc(p,q)}):q&&d.push(d.pop()+"skewX("+q+")"),f[0]!=g[0]||f[1]!=g[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:tc(f[0],g[0])},{i:c-2,x:tc(f[1],g[1])})):(1!=g[0]||1!=g[1])&&d.push(d.pop()+"scale("+g+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Rf(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function Kc(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function yd(a){var b=
a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=je(b);for(var d=je(d),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function je(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function zd(a){a.fixed|=2}function gf(a){a.fixed&=-7}function bc(a){a.fixed|=4;a.px=a.x;a.py=a.y}function hf(a){a.fixed&=-5}function Ec(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,
g=a.nodes,k=g.length,l=-1;++l<k;)f=g[l],null!=f&&(Ec(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Ad(a,b){return B.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=Vd,a}function ke(a){return a.children}function jf(a){return a.value}function yc(a,b){return b.value-a.value}function Vd(a){return B.merge(a.map(function(a){return(a.children||
[]).map(function(b){return{source:a,target:b}})}))}function kf(a){return a.x}function pa(a){return a.y}function le(a,b,c){a.y0=b;a.y=c}function mc(a){return B.range(a.length)}function me(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function pb(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function ne(a){return a.reduce(Wd,0)}function Wd(a,b){return a+b[1]}function Xd(a,b){return lf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function lf(a,b){for(var c=
-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function De(a){return[B.min(a),B.max(a)]}function oe(a,b){return a.parent==b.parent?1:2}function Bd(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Cd(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function Yd(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)0<b(d=Yd(c[f],b),a)&&(a=d);return a}function Sf(a,b){return a.x-b.x}function Ee(a,b){return b.x-a.x}function Fe(a,b){return a.depth-
b.depth}function zc(a,b){function c(a,d){var e=a.children;if(e&&(g=e.length))for(var f,g,k=null,l=-1;++l<g;)f=e[l],c(f,k),k=f;b(a,d)}c(a,null)}function mf(a,b){return a.value-b.value}function Vc(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function qb(a,b){a._pack_next=b;b._pack_prev=a}function fd(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return 0.999*e*e>c*c+d*d}function ic(a){function b(a){n=Math.min(a.x-a.r,n);p=Math.max(a.x+a.r,p);q=Math.min(a.y-a.r,q);I=Math.max(a.y+
a.r,I)}if((c=a.children)&&(m=c.length)){var c,d,e,f,g,k,l,m,n=1/0,p=-1/0,q=1/0,I=-1/0;if(c.forEach(nc),d=c[0],d.x=-d.r,d.y=0,b(d),1<m&&(e=c[1],e.x=e.r,e.y=0,b(e),2<m))for(f=c[2],oc(d,e,f),b(f),Vc(d,f),d._pack_prev=f,Vc(f,e),e=d._pack_next,g=3;m>g;g++){oc(d,e,f=c[g]);var r=0,O=1,s=1;for(k=e._pack_next;k!==e;k=k._pack_next,O++)if(fd(k,f)){r=1;break}if(1==r)for(l=d._pack_prev;l!==k._pack_prev&&!fd(l,f);l=l._pack_prev,s++);r?(s>O||O==s&&e.r<d.r?qb(d,e=k):qb(d=l,e),g--):(Vc(d,f),e=f,b(f))}d=(n+p)/2;e=
(q+I)/2;for(g=k=0;m>g;g++)f=c[g],f.x-=d,f.y-=e,k=Math.max(k,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=k;c.forEach(Tf)}}function nc(a){a._pack_next=a._pack_prev=a}function Tf(a){delete a._pack_next;delete a._pack_prev}function nf(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e){a=-1;for(var f=e.length;++a<f;)nf(e[a],b,c,d)}}function oc(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,k=e*e+f*f,g=g*g,d=d*d;b=0.5+(d-g)/(2*k);g=Math.sqrt(Math.max(0,2*g*(d+k)-(d-=k)*d-g*g))/
(2*k);c.x=a.x+b*e+g*f;c.y=a.y+b*f-g*e}else c.x=a.x+d,c.y=a.y}function Ge(a){return 1+B.max(a,function(a){return a.y})}function He(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function of(a){var b=a.children;return b&&b.length?of(b[0]):a}function pf(a){var b,c=a.children;return c&&(b=c.length)?pf(c[b-1]):a}function Ie(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Dd(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,
dx:e,dy:f}}function Lc(a){var b=a[0];a=a[a.length-1];return a>b?[b,a]:[a,b]}function Mc(a){return a.rangeExtent?a.rangeExtent():Lc(a.range())}function Uf(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Nc(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function qf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Ug}function Je(a,b,c,d){var e=[],
f=[],g=0,k=Math.min(a.length,b.length)-1;for(a[k]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=k;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=B.bisect(a,b,1,k)-1;return f[c](e[c](b))}}function Ke(a,b,c,d){function e(){var l=2<Math.min(a.length,b.length)?Je:Uf,m=d?Kc:Rf;return g=l(a,b,m,c),k=l(b,a,m,bd),f}function f(a){return g(a)}var g,k;return f.invert=function(a){return k(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?
(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ac)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return B.range.apply(B,Zd(a,b))},f.tickFormat=function(b,c){return Ed(a,b,c)},f.nice=function(b){return Wc(a,b),e()},f.copy=function(){return Ke(a,b,c,d)},e()}function gd(a,b){return B.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Wc(a,b){var c=qf,d;b?d=Zd(a,b)[2]:(d=Lc(a),
d=Math.pow(10,Math.round(Math.log(d[1]-d[0])/Math.LN10)-1));return Nc(a,c(d))}function Zd(a,b){var c=Lc(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;return 0.15>=d?e*=10:0.35>=d?e*=5:0.75>=d&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+0.5*e,c[2]=e,c}function Ed(a,b,c){var d=-Math.floor(Math.log(Zd(a,b)[2])/Math.LN10+0.01);return B.format(c?c.replace(rg,function(a,b,c,e,f,g,k,l,m,n){return[b,c,e,f,g,k,l,m||"."+(d-2*("%"===n)),n].join("")}):",."+d+"f")}function $d(a,
b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=0<=b[0],a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Nc(d.map(e),c?Math:Vg);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Lc(d),g=[],
k=a[0],a=a[1],l=Math.floor(e(k)),m=Math.ceil(e(a)),n=b%1?2:b;if(isFinite(m-l)){if(c){for(;m>l;l++)for(var p=1;n>p;p++)g.push(f(l)*p);g.push(f(l))}else for(g.push(f(l));l++<m;)for(p=n-1;0<p;p--)g.push(f(l)*p);for(l=0;g[l]<k;l++);for(m=g.length;g[m-1]>a;m--);g=g.slice(l,m)}return g},g.tickFormat=function(a,b){if(!arguments.length)return sg;2>arguments.length?b=sg:"function"!=typeof b&&(b=B.format(b));var d,k=Math.max(0.1,a/g.ticks().length),l=c?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/
f(l(e(a)+d))<=k?b(a):""}},g.copy=function(){return $d(a.copy(),b,c,d)},gd(g,a)}function Le(a,b,c){function d(b){return a(e(b))}var e=hd(b),f=hd(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return B.range.apply(B,Zd(c,a))},d.tickFormat=function(a,b){return Ed(c,a,b)},d.nice=function(a){return d.domain(Wc(c,a))},d.exponent=function(g){return arguments.length?(e=hd(b=g),f=hd(1/b),a.domain(c.map(e)),
d):b},d.copy=function(){return Le(a.copy(),b,c)},gd(d,a)}function hd(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function pc(a,b){function c(b){return f[((e.get(b)||e.set(b,a.push(b)))-1)%f.length]}function d(b,c){return B.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[];e=new s;for(var f,g=-1,k=d.length;++g<k;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?
(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,k){2>arguments.length&&(k=0);var l=e[0],m=e[1],n=(m-l)/(Math.max(1,a.length-1)+k);return f=d(2>a.length?(l+m)/2:l+n*k/2,n),g=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,k,l){2>arguments.length&&(k=0);3>arguments.length&&(l=k);var m=e[1]<e[0],n=e[m-0],p=(e[1-m]-n)/(a.length-k+2*l);return f=d(n+p*l,p),m&&f.reverse(),g=p*(1-k),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,k,l){2>arguments.length&&(k=0);
3>arguments.length&&(l=k);var m=e[1]<e[0],n=e[m-0],p=e[1-m],q=Math.floor((p-n)/(a.length-k+2*l));return f=d(n+Math.round((p-n-(a.length-k)*q)/2),q),m&&f.reverse(),g=Math.round(q*(1-k)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Lc(b.a[0])},c.copy=function(){return pc(a,b)},c.domain(a)}function Me(a,b){function c(){var f=0,g=b.length;for(e=[];++f<g;)e[f-1]=B.quantile(a,f/g);return d}function d(a){return isNaN(a=+a)?void 0:b[B.bisect(e,a)]}
var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(B.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.invertExtent=function(c){return c=b.indexOf(c),0>c?[0/0,0/0]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]},d.copy=function(){return Me(a,b)},c()}function pe(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-
1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?0/0:b/f+a,[b,b+1/f]},d.copy=function(){return pe(a,b,c)},e()}function qe(a,b){function c(d){return d>=d?b[B.bisect(a,d)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),
[a[c-1],a[c]]},c.copy=function(){return qe(a,b)},c}function re(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return B.range.apply(B,Zd(a,b))},b.tickFormat=function(b,c){return Ed(a,b,c)},b.copy=function(){return re(a)},b}function Fd(a){return a.innerRadius}function Ne(a){return a.outerRadius}function Oe(a){return a.startAngle}function Pe(a){return a.endAngle}function Gd(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=
a[e],c=b[0],d=b[1]+ae,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Hd(a){function b(l){function q(){s.push("M",k(a(B),p),n,m(a(t.reverse()),p),"Z")}for(var I,r,O,s=[],t=[],B=[],X=-1,u=l.length,Rc=va(c),v=va(e),ga=c===d?function(){return r}:va(d),x=e===f?function(){return O}:va(f);++X<u;)g.call(this,I=l[X],X)?(t.push([r=+Rc.call(this,I,X),O=+v.call(this,I,X)]),B.push([+ga.call(this,I,X),+x.call(this,I,X)])):t.length&&(q(),t=[],B=[]);return t.length&&q(),s.length?s.join(""):null}var c=zb,
d=zb,e=0,f=ec,g=la,k=Ab,l=k.key,m=k,n="L",p=0.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(l="function"==typeof a?k=
a:(k=Pf.get(a)||Ab).key,m=k.reverse||k,n=k.closed?"M":"L",b):l},b.tension=function(a){return arguments.length?(p=a,b):p},b}function Qe(a){return a.radius}function Id(a){return[a.x,a.y]}function Re(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+ae;return[c*Math.cos(b),c*Math.sin(b)]}}function Oc(){return 64}function se(){return"circle"}function id(a){a=Math.sqrt(a/ia);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Jd(a,b){return Ye(a,vb),a.id=b,a}
function be(a,b,c,d){var e=a.id;return M(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Vf(a){return null==a&&(a=""),function(){this.textContent=a}}function Jb(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var g=d.time,f=e[c]={tween:new s,time:g,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;B.timer(function(d){function k(d){return e.active>
c?m():(e.active=c,f.event&&f.event.start.call(a,n,b),f.tween.forEach(function(c,d){(d=d.call(a,n,b))&&r.push(d)}),l(d)?1:(mb(l,0,g),void 0))}function l(d){if(e.active!==c)return m();d=(d-q)/I;for(var g=p(d),k=r.length;0<k;)r[--k].call(a,g);return 1<=d?(m(),f.event&&f.event.end.call(a,n,b),1):void 0}function m(){return--e.count?delete e[c]:delete a.__transition__,1}var n=a.__data__,p=f.ease,q=f.delay,I=f.duration,r=[];return d>=q?k(d):(mb(k,q,g),void 0)},0,g)}}function rf(a,b){a.attr("transform",function(a){return"translate("+
b(a)+",0)"})}function Kd(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Xc(a,b,c){if(d=[],c&&1<b.length){for(var d,e,f=Lc(a.domain()),g=-1,k=b.length,l=(b[1]-b[0])/++c;++g<k;)for(a=c;0<--a;)(e=+b[g]-a*l)>=f[0]&&d.push(e);--g;for(a=0;++a<c&&(e=+b[g]+a*l)<f[1];)d.push(e)}return d}function Fc(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function qc(a,b,c){function d(b){var c=a(b),e=f(c,1);return e-b>b-c?c:e}function e(c){return b(c=a(new cc(c-
1)),1),c}function f(a,c){return b(a=new cc(+a),c),a}function g(a,d,f){a=e(a);var k=[];if(1<f)for(;d>a;)c(a)%f||k.push(new Date(+a)),b(a,1);else for(;d>a;)k.push(new Date(+a)),b(a,1);return k}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var k=a.utc=ce(a);return k.floor=k,k.round=ce(d),k.ceil=ce(e),k.offset=ce(f),k.range=function(a,b,c){try{cc=Fc;var d=new Fc;return d._=a,g(d,b,c)}finally{cc=Date}},a}function ce(a){return function(b,c){try{cc=Fc;var d=new Fc;return d._=b,a(d,c)._}finally{cc=Date}}}
function jd(a,b,c,d){for(var e,f,g=0,k=b.length,l=c.length;k>g;){if(d>=l)return-1;if(e=b.charCodeAt(g++),37===e){if(f=Wg[b.charAt(g++)],!f||0>(d=f(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function te(a){return RegExp("^(?:"+a.map(B.requote).join("|")+")","i")}function Ld(a){for(var b=new s,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Tb(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(c>e?Array(c-e+1).join(b)+a:a)}function Md(a,b,c){kb.lastIndex=
0;return(b=kb.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function ue(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Pc(a){return a.toISOString()}function Se(a,b,c){function d(b){return a(b)}return d.invert=function(b){return ve(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(ve)},d.nice=function(a){return d.domain(Nc(d.domain(),a))},d.ticks=function(c,e){var f=Lc(d.domain());if("function"!=typeof c){var g=
(f[1]-f[0])/c,k=B.bisect(sf,g);if(k==sf.length)return b.year(f,c);if(!k)return a.ticks(c).map(ve);g/sf[k-1]<sf[k]/g&&--k;c=b[k];e=c[1];c=c[0].range}return c(f[0],new Date(+f[1]+1),e)},d.tickFormat=function(){return c},d.copy=function(){return Se(a.copy(),b,c)},gd(d,a)}function ve(a){return new Date(a)}function Yc(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function Zc(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function Wf(a){var b=a.getFullYear(),c=
Zc(b),d=Zc(b+1);return b+(a-c)/(d-c)}function I(a){var b=new Date(Date.UTC(a,0,1));return b.setUTCFullYear(a),b}function O(a){var b=a.getUTCFullYear(),c=I(b),d=I(b+1);return b+(a-c)/(d-c)}function X(a){return JSON.parse(a.responseText)}function ga(a){var b=Ma.createRange();return b.selectNode(Ma.body),b.createContextualFragment(a.responseText)}var B={version:"3.2.8"};Date.now||(Date.now=function(){return+new Date});var Ma=document,Ka=Ma.documentElement,Ra=window;try{Ma.createElement("div").style.setProperty("opacity",
0,"")}catch($c){var tf=Ra.Element.prototype,Xg=tf.setAttribute,Yg=tf.setAttributeNS,tg=Ra.CSSStyleDeclaration.prototype,Zg=tg.setProperty;tf.setAttribute=function(a,b){Xg.call(this,a,b+"")};tf.setAttributeNS=function(a,b,c){Yg.call(this,a,b,c+"")};tg.setProperty=function(a,b,c){Zg.call(this,a,b+"",c)}}B.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0};B.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0};B.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&
!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c};B.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c};B.extent=function(a,b){var c,
d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]};B.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d};B.mean=function(a,b){var c,d=a.length,e=0,f=-1,
g=0;if(1===arguments.length)for(;++f<d;)p(c=a[f])&&(e+=(c-e)/++g);else for(;++f<d;)p(c=b.call(a,a[f],f))&&(e+=(c-e)/++g);return g?e:void 0};B.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};B.median=function(a,b){return 1<arguments.length&&(a=a.map(b)),a=a.filter(p),a.length?B.quantile(a.sort(B.ascending),0.5):void 0};B.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=
d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var ug=B.bisector(function(a){return a});B.bisectLeft=ug.left;B.bisect=B.bisectRight=ug.right;B.shuffle=function(a){for(var b,c,d=a.length;d;)c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b;return a};B.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};B.zip=function(){if(!(d=arguments.length))return[];
for(var a=-1,b=B.min(arguments,t),c=Array(b);++a<b;)for(var d,e=-1,f=c[a]=Array(d);++e<d;)f[e]=arguments[e][a];return c};B.transpose=function(a){return B.zip.apply(B,a)};B.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};B.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};B.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};B.merge=function(a){return Array.prototype.concat.apply([],a)};B.range=function(a,b,c){if(3>arguments.length&&(c=1,2>arguments.length&&
(b=a,a=0)),1/0===(b-a)/c)throw Error("infinite range");var d,e=[],f;d=Math.abs(c);for(f=1;d*f%1;)f*=10;var g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e};B.map=function(a){var b=new s;if(a instanceof s)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};r(s,{has:function(a){return Nd+a in this},get:function(a){return this[Nd+a]},set:function(a,b){return this[Nd+a]=b},remove:function(a){return a=Nd+a,a in this&&
delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===vg&&a.call(this,b.substring(1),this[b])}});var Nd="\x00",vg=Nd.charCodeAt(0);B.nest=function(){function a(b,g,k){if(k>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var l,m,n,p,q=-1,I=g.length,
r=f[k++],O=new s;++q<I;)(p=O.get(l=r(m=g[q])))?p.push(m):O.set(l,[m]);return b?(m=b(),n=function(c,d){m.set(c,a(b,d,k))}):(m={},n=function(c,d){m[c]=a(b,d,k)}),O.forEach(n),m}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(B.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=
function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e};B.set=function(a){var b=new g;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b};r(g,{has:function(a){return Nd+a in this},add:function(a){return this[Nd+a]=!0,a},remove:function(a){return a=Nd+a,a in this&&delete this[a]},values:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===vg&&a.call(this,b.substring(1))}});
B.behavior={};B.rebind=function(a,c){for(var d,e=1,f=arguments.length;++e<f;)a[d=arguments[e]]=b(a,c,c[d]);return a};var hg="webkit ms moz Moz o O".split(" "),td=function(a){return Array.prototype.slice.call(a)};try{td(Ka.childNodes)[0].nodeType}catch(Fh){td=l}B.dispatch=function(){for(var a=new c,b=-1,d=arguments.length;++b<d;)a[arguments[b]]=k(a);return a};c.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(0<=c&&(d=a.substring(c+1),a=a.substring(0,c)),a)return 2>arguments.length?this[a].on(d):
this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};B.event=null;B.requote=function(a){return a.replace($g,"\\$&")};var $g=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ye={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Kf=function(a,b){return b.querySelector(a)},Lf=function(a,b){return b.querySelectorAll(a)},ah=Ka[n(Ka,"matchesSelector")],ig=function(a,b){return ah.call(a,b)};"function"==typeof Sizzle&&(Kf=
function(a,b){return Sizzle(a,b)[0]||null},Lf=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},ig=Sizzle.matchesSelector);B.selection=function(){return wg};var La=B.selection.prototype=[];La.select=function(a){var b,c,d,f,g=[];a=m(a);for(var k=-1,l=this.length;++k<l;){g.push(b=[]);b.parentNode=(d=this[k]).parentNode;for(var n=-1,p=d.length;++n<p;)(f=d[n])?(b.push(c=a.call(f,f.__data__,n,k)),c&&"__data__"in f&&(c.__data__=f.__data__)):b.push(null)}return e(g)};La.selectAll=function(a){var b,c,
d=[];a=v(a);for(var f=-1,g=this.length;++f<g;)for(var k=this[f],l=-1,m=k.length;++l<m;)(c=k[l])&&(d.push(b=td(a.call(c,c.__data__,l,f))),b.parentNode=c);return e(d)};var Xf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};B.ns={prefix:Xf,qualify:function(a){var b=a.indexOf(":"),c=a;return 0<=b&&(c=a.substring(0,b),a=a.substring(b+1)),Xf.hasOwnProperty(c)?{space:Xf[c],
local:a}:a}};La.attr=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node();return a=B.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(x(b,a[b]));return this}return this.each(x(a,b))};La.classed=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!A(a[e]).test(b))return!1;
return!0}for(b in a)this.each(y(b,a[b]));return this}return this.each(y(a,b))};La.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(F(c,a[c],b));return this}if(2>d)return Ra.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(F(a,b,c))};La.property=function(a,b){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(b in a)this.each(D(b,a[b]));return this}return this.each(D(a,b))};La.text=function(a){return arguments.length?
this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};La.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};La.append=function(a){return a=H(a),this.select(function(){return this.appendChild(a.apply(this,
arguments))})};La.insert=function(a,b){return a=H(a),b=m(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments))})};La.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};La.data=function(a,b){function c(a,d){var e,f,g,k=a.length,p=d.length,q=Math.min(k,p),I=Array(p),r=Array(p),O=Array(k);if(b){var t=new s,B=new s,X=[];for(e=-1;++e<k;)q=b.call(f=a[e],f.__data__,e),t.has(q)?O[e]=f:t.set(q,f),X.push(q);for(e=-1;++e<
p;)q=b.call(d,g=d[e],e),(f=t.get(q))?(I[e]=f,f.__data__=g):B.has(q)||(r[e]={__data__:g}),B.set(q,g),t.remove(q);for(e=-1;++e<k;)t.has(X[e])&&(O[e]=a[e])}else{for(e=-1;++e<q;)f=a[e],g=d[e],f?(f.__data__=g,I[e]=f):r[e]={__data__:g};for(;p>e;++e)r[e]={__data__:d[e]};for(;k>e;++e)O[e]=a[e]}r.update=I;r.parentNode=I.parentNode=O.parentNode=a.parentNode;l.push(r);m.push(I);n.push(O)}var d,f,g=-1,k=this.length;if(!arguments.length){for(a=Array(k=(d=this[0]).length);++g<k;)(f=d[g])&&(a[g]=f.__data__);return a}var l=
E([]),m=e([]),n=e([]);if("function"==typeof a)for(;++g<k;)c(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;++g<k;)c(d=this[g],a);return m.enter=function(){return l},m.exit=function(){return n},m};La.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};La.filter=function(a){var b,c,d,f=[];"function"!=typeof a&&(a=N(a));for(var g=0,k=this.length;k>g;g++){f.push(b=[]);b.parentNode=(c=this[g]).parentNode;for(var l=0,m=c.length;m>l;l++)(d=c[l])&&a.call(d,
d.__data__,l)&&b.push(d)}return e(f)};La.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];0<=--e;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this};La.sort=function(a){a=J.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};La.each=function(a){return M(this,function(b,c,d){a.call(b,b.__data__,c,d)})};La.call=function(a){var b=td(arguments);return a.apply(b[0]=this,b),this};La.empty=function(){return!this.node()};
La.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null};La.size=function(){var a=0;return this.each(function(){++a}),a};var cd=[];B.selection.enter=E;B.selection.enter.prototype=cd;cd.append=La.append;cd.empty=La.empty;cd.node=La.node;cd.call=La.call;cd.size=La.size;cd.select=function(a){for(var b,c,d,f,g,k=[],l=-1,m=this.length;++l<m;){d=(f=this[l]).update;k.push(b=[]);b.parentNode=f.parentNode;for(var n=-1,p=f.length;++n<
p;)(g=f[n])?(b.push(d[n]=c=a.call(f.parentNode,g.__data__,n,l)),c.__data__=g.__data__):b.push(null)}return e(k)};cd.insert=function(a,b){return 2>arguments.length&&(b=K(this)),La.insert.call(this,a,b)};La.transition=function(){for(var a,b,c=Te||++xg,d=[],e=uf||{time:Date.now(),ease:Cb,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var k=this[f],l=-1,m=k.length;++l<m;)(b=k[l])&&Jb(b,l,c,e),a.push(b)}return Jd(d,c)};B.select=function(a){a=["string"==typeof a?Kf(a,Ma):a];return a.parentNode=
Ka,e([a])};B.selectAll=function(a){a=td("string"==typeof a?Lf(a,Ma):a);return a.parentNode=Ka,e([a])};var wg=B.select(Ka);La.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(G(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(G(a,b,c))};var Mf=B.map({mouseenter:"mouseover",mouseleave:"mouseout"});Mf.forEach(function(a){"on"+a in Ma&&Mf.remove(a)});var Nf=n(Ka.style,"userSelect"),Tg=0;B.mouse=function(a){return W(a,
q())};var Of=/WebKit/.test(Ra.navigator.userAgent)?-1:0;B.touches=function(a,b){return 2>arguments.length&&(b=q().touches),b?td(b).map(function(b){var c=W(a,b);return c.identifier=b.identifier,c}):[]};B.behavior.drag=function(){function b(){this.on("mousedown.drag",g).on("touchstart.drag",k)}function c(a,b,d,g){return function(){function c(){O.on(d+"."+q,null).on(g+"."+q,null);s(r&&B.event.target===n);m({type:"dragend"})}var k,l=this.parentNode,m=e.of(this,arguments),n=B.event.target,p=a(),q=null==
p?"drag":"drag-"+p,I=b(l,p),r=0,O=B.select(Ra).on(d+"."+q,function(){if(!l)return c();var a=b(l,p),d=a[0]-I[0],e=a[1]-I[1];r=r|d|e;I=a;m({type:"drag",x:a[0]+k[0],y:a[1]+k[1],dx:d,dy:e})}).on(g+"."+q,c),s=Q();f?(k=f.apply(this,arguments),k=[k.x-I[0],k.y-I[1]]):k=[0,0];m({type:"dragstart"})}}var e=a(b,"drag","dragstart","dragend"),f=null,g=c(d,B.mouse,"mousemove","mouseup"),k=c(function(){return B.event.changedTouches[0].identifier},function(a,b){return B.touches(a).filter(function(a){return a.identifier===
b})[0]},"touchmove","touchend");return b.origin=function(a){return arguments.length?(f=a,b):f},B.rebind(b,e,"on")};B.behavior.zoom=function(){function b(){this.on(x,l).on(bh+".zoom",n).on(y,p).on("dblclick.zoom",q).on(z,m)}function c(a){return[(a[0]-u[0])/v,(a[1]-u[1])/v]}function d(a){v=Math.max(ga[0],Math.min(ga[1],a))}function e(a,b){b=[b[0]*v+u[0],b[1]*v+u[1]];u[0]+=a[0]-b[0];u[1]+=a[1]-b[1]}function g(){s&&s.domain(O.range().map(function(a){return(a-u[0])/v}).map(O.invert));X&&X.domain(t.range().map(function(a){return(a-
u[1])/v}).map(t.invert))}function k(a){g();a({type:"zoom",scale:v,translate:u})}function l(){var a=this,b=$c.of(a,arguments),d=B.event.target,f=0,g=B.select(Ra).on(y,function(){f=1;e(B.mouse(a),m);k(b)}).on(Ma,function(){g.on(y,Ra===a?p:null).on(Ma,null);n(f&&B.event.target===d)}),m=c(B.mouse(a)),n=Q()}function m(){function a(){var b=B.touches(p);return n=v,g={},b.forEach(function(a){g[a.identifier]=c(a)}),b}function b(){var c=Date.now(),l=a();if(1===l.length){if(500>c-r){var m=l[0],l=g[m.identifier];
d(2*v);e(m,l);f();k(q)}r=c}else 1<l.length&&(m=l[0],l=l[1],c=m[0]-l[0],m=m[1]-l[1],I=c*c+m*m)}var g,n,p=this,q=$c.of(p,arguments),I=0,O=B.select(Ra).on(A,function(){var a=B.touches(p),b=a[0],c=g[b.identifier];if(a=a[1]){var f=g[a.identifier],l=B.event.scale;if(null==l)var m=(m=a[0]-b[0])*m+(m=a[1]-b[1])*m,l=I&&Math.sqrt(m/I);b=[(b[0]+a[0])/2,(b[1]+a[1])/2];c=[(c[0]+f[0])/2,(c[1]+f[1])/2];d(l*n)}r=null;e(b,c);k(q)}).on(Ka,function(){B.event.touches.length?a():(O.on(A,null).on(Ka,null),s.on(x,l).on(z,
m),t())}),s=B.select(p).on(x,null).on(z,b),t=Q();b()}function n(){f();I||(I=c(B.mouse(this)));d(Math.pow(2,0.002*vf())*v);e(B.mouse(this),I);k($c.of(this,arguments))}function p(){I=null}function q(){var a=B.mouse(this),b=c(a),f=Math.log(v)/Math.LN2;d(Math.pow(2,B.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1));e(a,b);k($c.of(this,arguments))}var I,r,O,s,t,X,u=[0,0],v=1,ga=yg,x="mousedown.zoom",y="mousemove.zoom",Ma="mouseup.zoom",z="touchstart.zoom",A="touchmove.zoom",Ka="touchend.zoom",$c=a(b,"zoom");
return b.translate=function(a){return arguments.length?(u=a.map(Number),g(),b):u},b.scale=function(a){return arguments.length?(v=+a,g(),b):v},b.scaleExtent=function(a){return arguments.length?(ga=null==a?yg:a.map(Number),b):ga},b.x=function(a){return arguments.length?(s=a,O=a.copy(),u=[0,0],v=1,b):s},b.y=function(a){return arguments.length?(X=a,t=a.copy(),u=[0,0],v=1,b):X},B.rebind(b,$c,"on")};var vf,yg=[0,1/0],bh="onwheel"in Ma?(vf=function(){return-B.event.deltaY*(B.event.deltaMode?120:1)},"wheel"):
"onmousewheel"in Ma?(vf=function(){return B.event.wheelDelta},"mousewheel"):(vf=function(){return-B.event.detail},"MozMousePixelScroll");P.prototype.toString=function(){return this.rgb()+""};B.hsl=function(a,b,c){return 1===arguments.length?a instanceof ca?aa(a.h,a.s,a.l):bb(""+a,xa,aa):aa(+a,+b,+c)};var Yf=ca.prototype=new P;Yf.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),aa(this.h,this.s,this.l/a)};Yf.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),aa(this.h,this.s,
a*this.l)};Yf.rgb=function(){return Y(this.h,this.s,this.l)};var ia=Math.PI,ta=1E-6,zg=ta*ta,sa=ia/180,fb=180/ia;B.hcl=function(a,b,c){return 1===arguments.length?a instanceof na?Z(a.h,a.c,a.l):a instanceof ea?wa(a.l,a.a,a.b):wa((a=Ia((a=B.rgb(a)).r,a.g,a.b)).l,a.a,a.b):Z(+a,+b,+c)};var Zf=na.prototype=new P;Zf.brighter=function(a){return Z(this.h,this.c,Math.min(100,this.l+wf*(arguments.length?a:1)))};Zf.darker=function(a){return Z(this.h,this.c,Math.max(0,this.l-wf*(arguments.length?a:1)))};Zf.rgb=
function(){return ka(this.h,this.c,this.l).rgb()};B.lab=function(a,b,c){return 1===arguments.length?a instanceof ea?ja(a.l,a.a,a.b):a instanceof na?ka(a.l,a.c,a.h):Ia((a=B.rgb(a)).r,a.g,a.b):ja(+a,+b,+c)};var wf=18,jg=0.95047,kg=1,lg=1.08883,$f=ea.prototype=new P;$f.brighter=function(a){return ja(Math.min(100,this.l+wf*(arguments.length?a:1)),this.a,this.b)};$f.darker=function(a){return ja(Math.max(0,this.l-wf*(arguments.length?a:1)),this.a,this.b)};$f.rgb=function(){return da(this.l,this.a,this.b)};
B.rgb=function(a,b,c){return 1===arguments.length?a instanceof Qa?db(a.r,a.g,a.b):bb(""+a,db,Y):db(~~a,~~b,~~c)};var xf=Qa.prototype=new P;xf.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;return b||c||d?(b&&30>b&&(b=30),c&&30>c&&(c=30),d&&30>d&&(d=30),db(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))):db(30,30,30)};xf.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),db(~~(a*this.r),~~(a*this.g),~~(a*this.b))};xf.hsl=function(){return xa(this.r,
this.g,this.b)};xf.toString=function(){return"#"+Za(this.r)+Za(this.g)+Za(this.b)};var Ze=B.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,
springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ze.forEach(function(a,b){Ze.set(a,db(b>>16,255&b>>8,255&b))});B.functor=va;B.xhr=T(oa);B.dsv=function(a,b){function c(a,f,g){3>arguments.length&&(g=f,f=null);var k=B.xhr(a,b,g);return k.row=function(a){return arguments.length?k.response(null==(f=a)?d:e(a)):f},k.row(f)}function d(a){return c.parse(a.responseText)}
function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(k).join(a)}function k(a){return l.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var l=RegExp('["'+a+"\n]"),m=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(n>=l)return g;
if(e)return e=!1,f;var b=n;if(34===a.charCodeAt(b)){for(var d=b;d++<l;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}n=d+2;var k=a.charCodeAt(d+1);return 13===k?(e=!0,10===a.charCodeAt(d+2)&&++n):10===k&&(e=!0),a.substring(b+1,d).replace(/""/g,'"')}for(;l>n;){k=a.charCodeAt(n++);d=1;if(10===k)e=!0;else if(13===k)e=!0,10===a.charCodeAt(n)&&(++n,++d);else if(k!==m)continue;return a.substring(b,n-d)}return a.substring(b)}for(var d,e,f={},g={},k=[],l=a.length,n=0,p=0;(d=c())!==g;){for(var q=
[];d!==f&&d!==g;)q.push(d),d=c();b&&!(q=b(q,p++))||k.push(q)}return k},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new g,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(k).join(a)].concat(b.map(function(b){return e.map(function(a){return k(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c};B.csv=B.dsv(",","text/csv");B.tsv=B.dsv("\t","text/tab-separated-values");var bf,cf,af,$e,Sc,mg=Ra[n(Ra,"requestAnimationFrame")]||
function(a){setTimeout(a,17)};B.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={callback:a,time:c+b,next:null};cf?cf.next=d:bf=d;cf=d;af||($e=clearTimeout($e),af=1,mg(Ba))};B.timer.flush=function(){Kb();Vb()};var yf=[3,3],ch="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});B.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&
(a=B.round(a,Ya(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),ch[8+c/3]};B.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};B.format=function(a){a=rg.exec(a);var b=a[1]||" ",c=a[2]||">",d=a[3]||"",e=a[4]||"",f=a[5],g=+a[6],k=a[7],l=a[8],m=a[9],n=1,p="",q=!1;switch(l&&(l=+l.substring(1)),(f||"0"===b&&"="===c)&&(f=b="0",c="=",k&&(g-=Math.floor((g-1)/4))),m){case "n":k=!0;m="g";break;case "%":n=100;p="%";
m="f";break;case "p":n=100;p="%";m="r";break;case "b":case "o":case "x":case "X":"#"===e&&(e="0"+m.toLowerCase());case "c":case "d":q=!0;l=0;break;case "s":n=-1,m="r"}"#"===e?e="":"$"===e&&(e="$");"r"!=m||l||(m="g");null!=l&&("g"==m?l=Math.max(1,Math.min(21,l)):("e"==m||"f"==m)&&(l=Math.max(0,Math.min(20,l))));var m=dh.get(m)||Sa,I=f&&k;return function(a){if(q&&a%1)return"";var r=0>a||0===a&&0>1/a?(a=-a,"-"):d;if(0>n){var O=B.formatPrefix(a,l);a=O.scale(a);p=O.symbol}else a*=n;a=m(a,l);var s=a.lastIndexOf("."),
O=0>s?a:a.substring(0,s),s=0>s?"":"."+a.substring(s+1);!f&&k&&(O=ag(O));var t=e.length+O.length+s.length+(I?0:r.length),X=g>t?Array(t=g-t+1).join(b):"";return I&&(O=ag(X+O)),r+=e,a=O+s,("<"===c?r+a+X:">"===c?X+r+a:"^"===c?X.substring(0,t>>=1)+r+a+X.substring(t):r+(I?a:X+a))+p}};var rg=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,dh=B.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},
X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=B.round(a,Ya(a,b))).toFixed(Math.max(0,Math.min(20,Ya(a*(1+1E-15),b))))}}),ag=oa;if(yf)var eh=yf.length,ag=function(a){for(var b=a.length,c=[],d=0,e=yf[0];0<b&&0<e;)c.push(a.substring(b-=e,b+e)),e=yf[d=(d+1)%eh];return c.reverse().join(",")};B.geo={};Ub.prototype={s:0,t:0,add:function(a){Oa(a,this.t,zf);
Oa(zf.s,this.s,this);this.s?this.t+=zf.t:this.s=zf.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var zf=new Ub;B.geo.stream=function(a,b){a&&Ag.hasOwnProperty(a.type)?Ag[a.type](a,b):wb(a,b)};var Ag={Feature:function(a,b){wb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)wb(c[d].geometry,b)}},ng={Sphere:function(a,b){b.sphere()},Point:function(a,b){var c=a.coordinates;b.point(c[0],c[1])},MultiPoint:function(a,b){for(var c,d=a.coordinates,
e=-1,f=d.length;++e<f;)c=d[e],b.point(c[0],c[1])},LineString:function(a,b){Wa(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Wa(c[d],b,0)},Polygon:function(a,b){Ta(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Ta(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)wb(c[d],b)}};B.geo.area=function(a){return we=0,B.geo.stream(a,xc),we};var we,Ud=new Ub,xc={sphere:function(){we+=
4*ia},point:d,lineStart:d,lineEnd:d,polygonStart:function(){Ud.reset();xc.lineStart=lb},polygonEnd:function(){var a=2*Ud;we+=0>a?4*ia+a:a;xc.lineStart=xc.lineEnd=xc.point=d}};B.geo.bounds=function(){function a(b,c){u.push(v=[n=b,q=b]);p>c&&(p=c);c>I&&(I=c)}function b(c,d){var e=za([c*sa,d*sa]);if(t){var f=rb(t,e),f=rb([f[1],-f[0],0],f);Qb(f);var f=Db(f),g=c-r,l=0<g?1:-1,m=f[0]*fb*l,g=180<Math.abs(g);g^(m>l*r&&l*c>m)?(f=f[1]*fb,f>I&&(I=f)):(m=(m+360)%360-180,g^(m>l*r&&l*c>m))?(f=-f[1]*fb,p>f&&(p=f)):
(p>d&&(p=d),d>I&&(I=d));g?r>c?k(n,c)>k(n,q)&&(q=c):k(c,q)>k(n,q)&&(n=c):q>=n?(n>c&&(n=c),c>q&&(q=c)):c>r?k(n,c)>k(n,q)&&(q=c):k(c,q)>k(n,q)&&(n=c)}else a(c,d);t=e;r=c}function c(){ga.point=b}function d(){v[0]=n;v[1]=q;ga.point=a;t=null}function e(a,c){if(t){var d=a-r;X+=180<Math.abs(d)?d+(0<d?360:-360):d}else O=a,s=c;xc.point(a,c);b(a,c)}function f(){xc.lineStart()}function g(){e(O,s);xc.lineEnd();Math.abs(X)>ta&&(n=-(q=180));v[0]=n;v[1]=q;t=null}function k(a,b){return 0>(b-=a)?b+360:b}function l(a,
b){return a[0]-b[0]}function m(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var n,p,q,I,r,O,s,t,X,u,v,ga={point:a,lineStart:c,lineEnd:d,polygonStart:function(){ga.point=e;ga.lineStart=f;ga.lineEnd=g;X=0;xc.polygonStart()},polygonEnd:function(){xc.polygonEnd();ga.point=a;ga.lineStart=c;ga.lineEnd=d;0>Ud?(n=-(q=180),p=-(I=90)):X>ta?I=90:-ta>X&&(p=-90);v[0]=n;v[1]=q}};return function(a){I=q=-(n=p=1/0);u=[];B.geo.stream(a,ga);if(a=u.length){u.sort(l);for(var b,c=1,d=u[0],e=[d];a>c;++c)b=u[c],
m(b[0],d)||m(b[1],d)?(k(d[0],b[1])>k(d[0],d[1])&&(d[1]=b[1]),k(b[0],d[1])>k(d[0],d[1])&&(d[0]=b[0])):e.push(d=b);var f,g=-1/0;a=e.length-1;c=0;for(d=e[a];a>=c;d=b,++c)b=e[c],(f=k(d[1],b[0]))>g&&(g=f,n=b[0],q=d[1])}return u=v=null,1/0===n||1/0===p?[[0/0,0/0],[0/0,0/0]]:[[n,p],[q,I]]}}();B.geo.centroid=function(a){Ce=ie=dd=ed=Tc=Cc=Dc=lc=ud=vd=Uc=0;B.geo.stream(a,Ic);a=ud;var b=vd,c=Uc,d=a*a+b*b+c*c;return zg>d&&(a=Cc,b=Dc,c=lc,ta>ie&&(a=dd,b=ed,c=Tc),d=a*a+b*b+c*c,zg>d)?[0/0,0/0]:[Math.atan2(b,a)*
fb,V(c/Math.sqrt(d))*fb]};var Ce,ie,dd,ed,Tc,Cc,Dc,lc,ud,vd,Uc,Ic={sphere:d,point:Aa,lineStart:Ca,lineEnd:Na,polygonStart:function(){Ic.lineStart=yb},polygonEnd:function(){Ic.lineStart=Ca}},og=Ga(la,function(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart();b=1},point:function(f,g){var k=0<f?ia:-ia,l=Math.abs(f-c);if(Math.abs(l-ia)<ta)a.point(c,d=0<(d+g)/2?ia/2:-ia/2),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(k,d),a.point(f,d),b=0;else if(e!==k&&l>=ia){Math.abs(c-e)<ta&&(c-=
e*ta);Math.abs(f-k)<ta&&(f-=k*ta);var l=c,m=d,n=f,p,q,I=Math.sin(l-n);d=Math.abs(I)>ta?Math.atan((Math.sin(m)*(q=Math.cos(g))*Math.sin(n)-Math.sin(g)*(p=Math.cos(m))*Math.sin(l))/(p*q*I)):(m+g)/2;a.point(e,d);a.lineEnd();a.lineStart();a.point(k,d);b=0}a.point(c=f,d=g);e=k},lineEnd:function(){a.lineEnd();c=d=0/0},clean:function(){return 2-b}}},function(a,b,c,d){null==a?(c=c*ia/2,d.point(-ia,c),d.point(0,c),d.point(ia,c),d.point(ia,0),d.point(ia,-c),d.point(0,-c),d.point(-ia,-c),d.point(-ia,0),d.point(-ia,
c)):Math.abs(a[0]-b[0])>ta?(a=(a[0]<b[0]?1:-1)*ia,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},function(a){return Yb(fh,a)}),fh=[-ia,0],df=1E9;(B.geo.conicEqualArea=function(){return Mb(Ea)}).raw=Ea;B.geo.albers=function(){return B.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};B.geo.albersUsa=function(){function a(f){var g=f[0];f=f[1];return b=null,c(g,f),b||(d(g,f),b)||e(g,f),b}var b,c,d,e,f=B.geo.albers(),g=B.geo.conicEqualArea().rotate([154,
0]).center([-2,58.5]).parallels([55,65]),k=B.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,b=(a[1]-c[1])/b;return(0.12<=b&&0.234>b&&-0.425<=d&&-0.214>d?g:0.166<=b&&0.234>b&&-0.214<=d&&-0.115>d?k:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=k.stream(a);return{point:function(a,e){b.point(a,e);c.point(a,e);d.point(a,e)},sphere:function(){b.sphere();
c.sphere();d.sphere()},lineStart:function(){b.lineStart();c.lineStart();d.lineStart()},lineEnd:function(){b.lineEnd();c.lineEnd();d.lineEnd()},polygonStart:function(){b.polygonStart();c.polygonStart();d.polygonStart()},polygonEnd:function(){b.polygonEnd();c.polygonEnd();d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),k.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(0.35*b),k.scale(b),a.translate(f.translate())):
f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var m=f.scale(),n=+b[0],p=+b[1];return c=f.translate(b).clipExtent([[n-0.455*m,p-0.238*m],[n+0.455*m,p+0.238*m]]).stream(l).point,d=g.translate([n-0.307*m,p+0.201*m]).clipExtent([[n-0.425*m+ta,p+0.12*m+ta],[n-0.214*m-ta,p+0.234*m-ta]]).stream(l).point,e=k.translate([n-0.205*m,p+0.212*m]).clipExtent([[n-0.214*m+ta,p+0.166*m+ta],[n-0.115*m-ta,p+0.234*m-ta]]).stream(l).point,a},a.scale(1070)};var Af,ef,Bf,Cf,Df,Ef,wd={point:d,
lineStart:d,lineEnd:d,polygonStart:function(){ef=0;wd.lineStart=Zb},polygonEnd:function(){wd.lineStart=wd.lineEnd=wd.point=d;Af+=Math.abs(ef/2)}},gh={point:function(a,b){Bf>a&&(Bf=a);a>Df&&(Df=a);Cf>b&&(Cf=b);b>Ef&&(Ef=b)},lineStart:d,lineEnd:d,polygonStart:d,polygonEnd:d},Jc={point:ua,lineStart:Hb,lineEnd:Bc,polygonStart:function(){Jc.lineStart=Ib},polygonEnd:function(){Jc.point=ua;Jc.lineStart=Hb;Jc.lineEnd=Bc}};B.geo.path=function(){function a(b){return b&&("function"==typeof g&&e.pointRadius(+g.apply(this,
arguments)),f&&f.valid||(f=d(e)),B.geo.stream(b,f)),e.result()}var b,c,d,e,f,g=4.5;return a.area=function(a){return Af=0,B.geo.stream(a,d(wd)),Af},a.centroid=function(a){return dd=ed=Tc=Cc=Dc=lc=ud=vd=Uc=0,B.geo.stream(a,d(Jc)),Uc?[ud/Uc,vd/Uc]:lc?[Cc/lc,Dc/lc]:Tc?[dd/Tc,ed/Tc]:[0/0,0/0]},a.bounds=function(a){return Df=Ef=-(Bf=Cf=1/0),B.geo.stream(a,d(gh)),[[Bf,Cf],[Df,Ef]]},a.projection=function(c){return arguments.length?(d=(b=c)?c.stream||vc(c):oa,f=null,a):b},a.context=function(b){return arguments.length?
(e=null==(c=b)?new Ja:new ab(b),"function"!=typeof g&&e.pointRadius(g),f=null,a):c},a.pointRadius=function(b){return arguments.length?(g="function"==typeof b?b:(e.pointRadius(+b),+b),a):g},a.projection(B.geo.albersUsa()).context(null)};B.geo.projection=sb;B.geo.projectionMutator=cb;(B.geo.equirectangular=function(){return sb(Ob)}).raw=Ob.invert=Ob;B.geo.rotation=function(a){function b(c){return c=a(c[0]*sa,c[1]*sa),c[0]*=fb,c[1]*=fb,c}return a=Qc(a[0]%360*sa,a[1]*sa,2<a.length?a[2]*sa:0),b.invert=
function(b){return b=a.invert(b[0]*sa,b[1]*sa),b[0]*=fb,b[1]*=fb,b},b};B.geo.circle=function(){function a(){var b="function"==typeof d?d.apply(this,arguments):d,e=Qc(-b[0]*sa,-b[1]*sa,0).invert,f=[];return c(null,null,1,{point:function(a,b){f.push(a=e(a,b));a[0]*=fb;a[1]*=fb}}),{type:"Polygon",coordinates:[f]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=fa((b=+d)*sa,e*sa),a):b},a.precision=function(d){return arguments.length?
(c=fa(b*sa,(e=+d)*sa),a):e},a.angle(90)};B.geo.distance=function(a,b){var c,d=(b[0]-a[0])*sa,e=a[1]*sa,f=b[1]*sa,g=Math.sin(d),d=Math.cos(d),k=Math.sin(e),e=Math.cos(e),l=Math.sin(f),f=Math.cos(f);return Math.atan2(Math.sqrt((c=f*g)*c+(c=e*l-k*f*d)*c),k*l+e*f*d)};B.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return B.range(Math.ceil(f/s)*s,e,s).map(q).concat(B.range(Math.ceil(m/t)*t,l,t).map(I)).concat(B.range(Math.ceil(d/r)*r,c,r).filter(function(a){return Math.abs(a%
s)>ta}).map(n)).concat(B.range(Math.ceil(k/O)*O,g,O).filter(function(a){return Math.abs(a%t)>ta}).map(p))}var c,d,e,f,g,k,l,m,n,p,q,I,r=10,O=r,s=90,t=360,X=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[q(f).concat(I(l).slice(1),q(e).reverse().slice(1),I(m).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?
(f=+b[0][0],e=+b[1][0],m=+b[0][1],l=+b[1][1],f>e&&(b=f,f=e,e=b),m>l&&(b=m,m=l,l=b),a.precision(X)):[[f,m],[e,l]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],k=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),k>g&&(b=k,k=g,g=b),a.precision(X)):[[d,k],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(s=+b[0],t=+b[1],a):[s,t]},a.minorStep=function(b){return arguments.length?(r=+b[0],O=+b[1],
a):[r,O]},a.precision=function(b){return arguments.length?(X=+b,n=hc(k,g,90),p=ub(d,c,X),q=hc(m,l,90),I=ub(f,e,X),a):X},a.majorExtent([[-180,-90+ta],[180,90-ta]]).minorExtent([[-180,-80-ta],[180,80+ta]])};B.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=Wb,e=xb;return a.distance=function(){return B.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?
(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a};B.geo.interpolate=function(a,b){return ld(a[0]*sa,a[1]*sa,b[0]*sa,b[1]*sa)};B.geo.length=function(a){return Ff=0,B.geo.stream(a,xe),Ff};var Ff,xe={sphere:d,point:d,lineStart:function(){function a(d,f){var g=Math.sin(f*=sa),k=Math.cos(f),l=Math.abs((d*=sa)-b),m=Math.cos(l);Ff+=Math.atan2(Math.sqrt((l=k*Math.sin(l))*l+(l=
e*g-c*k*m)*l),c*g+e*k*m);b=d;c=g;e=k}var b,c,e;xe.point=function(d,f){b=d*sa;c=Math.sin(f*=sa);e=Math.cos(f);xe.point=a};xe.lineEnd=function(){xe.point=xe.lineEnd=d}},lineEnd:d,polygonStart:d,polygonEnd:d},Bg=Gc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(B.geo.azimuthalEqualArea=function(){return sb(Bg)}).raw=Bg;var Cg=Gc(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},oa);(B.geo.azimuthalEquidistant=function(){return sb(Cg)}).raw=Cg;(B.geo.conicConformal=function(){return Mb(Hc)}).raw=
Hc;(B.geo.conicEquidistant=function(){return Mb(ya)}).raw=ya;var Dg=Gc(function(a){return 1/a},Math.atan);(B.geo.gnomonic=function(){return sb(Dg)}).raw=Dg;md.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-ia/2]};(B.geo.mercator=function(){return Od(md)}).raw=md;var Eg=Gc(function(){return 1},Math.asin);(B.geo.orthographic=function(){return sb(Eg)}).raw=Eg;var Fg=Gc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(B.geo.stereographic=function(){return sb(Fg)}).raw=Fg;nd.invert=
function(a,b){var c=Math.atan2(R(a),Math.cos(b)),d=Math.sin(b),e;e=(Math.exp(a)+Math.exp(-a))/2;return[c,V(d/e)]};(B.geo.transverseMercator=function(){return Od(nd)}).raw=nd;B.geom={};B.svg={};B.svg.line=function(){return Pd(oa)};var Pf=B.map({linear:Ab,"linear-closed":function(a){return Ab(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return 1<c&&e.push("H",d[0]),e.join("")},"step-before":pd,"step-after":qd,basis:rd,"basis-open":function(a){if(4>
a.length)return Ab(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];3>++d;)b=a[d],f.push(b[0]),g.push(b[1]);c.push(Bb(xd,f)+","+Bb(xd,g));for(--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),ad(c,f,g);return c.join("")},"basis-closed":function(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],k=[];4>++d;)c=a[d%e],g.push(c[0]),k.push(c[1]);b=[Bb(xd,g),",",Bb(xd,k)];for(--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),k.shift(),k.push(c[1]),ad(b,g,k);return b.join("")},bundle:function(a,b){var c=a.length-
1;if(c)for(var d,e,f=a[0][0],g=a[0][1],k=a[c][0]-f,l=a[c][1]-g,m=-1;++m<=c;)d=a[m],e=m/c,d[0]=b*d[0]+(1-b)*(f+e*k),d[1]=b*d[1]+(1-b)*(g+e*l);return rd(a)},cardinal:function(a,b){return 3>a.length?Ab(a):a[0]+rc(a,sc(a,b))},"cardinal-open":function(a,b){return 4>a.length?Ab(a):a[1]+rc(a.slice(1,a.length-1),sc(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Ab(a):a[0]+rc((a.push(a[0]),a),sc([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Ab(a);else{var b=a[0],c,d,
e,f,g=[],k;c=0;k=a.length-1;for(var l=[],m=a[1],n=l[0]=jc(a[0],m);++c<k;)l[c]=(n+(n=jc(m,m=a[c+1])))/2;k=(l[c]=n,l);l=-1;for(m=a.length-1;++l<m;)c=jc(a[l],a[l+1]),1E-6>Math.abs(c)?k[l]=k[l+1]=0:(d=k[l]/c,e=k[l+1]/c,f=d*d+e*e,9<f&&(f=3*c/Math.sqrt(f),k[l]=f*d,k[l+1]=f*e));for(l=-1;++l<=m;)f=(a[Math.min(m,l+1)][0]-a[Math.max(0,l-1)][0])/(6*(1+k[l]*k[l])),g.push([f||0,k[l]*f||0]);a=b+rc(a,g)}return a}});Pf.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var pg=[0,2/3,1/3,0],qg=[0,1/3,2/3,
0],xd=[0,1/6,2/3,1/6];B.geom.hull=function(a){function b(a){if(3>a.length)return[];var e,f,g,k,l,m,n,p,q,I;p=va(c);q=va(d);I=a.length;var r=I-1,O=[],s=[],t=0;if(p===zb&&d===ec)e=a;else for(g=0,e=[];I>g;++g)e.push([+p.call(this,f=a[g],g),+q.call(this,f,g)]);for(g=1;I>g;++g)(e[g][1]<e[t][1]||e[g][1]==e[t][1]&&e[g][0]<e[t][0])&&(t=g);for(g=0;I>g;++g)g!==t&&(l=e[g][1]-e[t][1],k=e[g][0]-e[t][0],O.push({angle:Math.atan2(l,k),index:g}));O.sort(function(a,b){return a.angle-b.angle});I=O[0].angle;q=O[0].index;
p=0;for(g=1;r>g;++g){if(f=O[g].index,I==O[g].angle){if(k=e[q][0]-e[t][0],l=e[q][1]-e[t][1],m=e[f][0]-e[t][0],n=e[f][1]-e[t][1],k*k+l*l>=m*m+n*n){O[g].index=-1;continue}O[p].index=-1}I=O[g].angle;p=g;q=f}s.push(t);for(f=g=0;2>g;++f)-1<O[f].index&&(s.push(O[f].index),g++);for(g=s.length;r>f;++f)if(!(0>O[f].index)){for(;!de(s[g-2],s[g-1],O[f].index,e);)--g;s[g++]=O[f].index}e=[];for(g-=1;0<=g;--g)e.push(a[s[g]]);return e}var c=zb,d=ec;return arguments.length?b(a):(b.x=function(a){return arguments.length?
(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)};B.geom.polygon=function(a){return Ye(a,Gf),a};var Gf=B.geom.polygon.prototype=[];Gf.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return 0.5*e};Gf.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,k=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=k,k=this[d],c=b[0]*k[1]-k[0]*b[1],f+=(b[0]+k[0])*c,g+=(b[1]+k[1])*c;return[f*a,g*a]};Gf.clip=function(a){for(var b,
c,d,e,f,g,k=fe(a),l=-1,m=this.length-fe(this),n=this[m-1];++l<m;){b=a.slice();a.length=0;e=this[l];f=b[(d=b.length-k)-1];for(c=-1;++c<d;)g=b[c],qa(g,n,e)?(qa(f,n,e)||a.push(ee(f,g,n,e)),a.push(g)):qa(f,n,e)&&a.push(ee(f,g,n,e)),f=g;k&&a.push(a[0]);n=e}return a};B.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];return fc(a,function(c){b[c.region.l.index].push(a[c.region.r.index])}),b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-
g)});b.sort(function(a,b){return a.angle-b.angle});for(var k=0,l=b.length-1;l>k;k++)c.push([e,b[k],b[k+1]])}),c};B.geom.voronoi=function(a){function b(a){var f,g,k,l=a.map(function(){return[]}),m=va(c),n=va(d),p=a.length;if(m===zb&&n===ec)f=a;else for(f=Array(p),k=0;p>k;++k)f[k]=[+m.call(this,g=a[k],k),+n.call(this,g,k)];if(fc(f,function(a){var b,c,d,e,f,g;1===a.a&&0<=a.b?(b=a.ep.r,c=a.ep.l):(b=a.ep.l,c=a.ep.r);1===a.a?(f=b?b.y:-1E6,d=a.c-a.b*f,g=c?c.y:1E6,e=a.c-a.b*g):(d=b?b.x:-1E6,f=a.c-a.a*d,e=
c?c.x:1E6,g=a.c-a.a*e);b=[d,f];e=[e,g];l[a.region.l.index].push(b,e);l[a.region.r.index].push(b,e)}),l=l.map(function(a,b){var c=f[b][0],d=f[b][1],e=a.map(function(a){return Math.atan2(a[0]-c,a[1]-d)}),g=B.range(a.length).sort(function(a,b){return e[a]-e[b]});return g.filter(function(a,b){return!b||e[a]-e[g[b-1]]>ta}).map(function(b){return a[b]})}),l.forEach(function(a,b){var c=a.length;if(!c)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<c)){var d=f[b],e=a[0],g=a[1],c=d[0],d=
d[1],k=e[0],e=e[1],l=g[0],m=g[1],n=Math.abs(l-k),g=m-e;Math.abs(g)<ta?(c=e>d?-1E6:1E6,a.push([-1E6,c],[1E6,c])):ta>n?(c=k>c?-1E6:1E6,a.push([c,-1E6],[c,1E6])):(c=(k-c)*(m-e)>(l-k)*(e-d)?1E6:-1E6,d=Math.abs(g)-n,Math.abs(d)<ta?a.push([0>g?c:-c,c]):(0<d&&(c*=-1),a.push([-1E6,c],[1E6,c])))}}),e)for(k=0;p>k;++k)e.clip(l[k]);for(k=0;p>k;++k)l[k].point=a[k];return l}var c=zb,d=ec,e=null;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?
(d=a,b):d},b.clipExtent=function(a){if(!arguments.length)return e&&[e[0],e[2]];if(null==a)e=null;else{var c=+a[0][0],d=+a[0][1],f=+a[1][0],g=+a[1][1];e=B.geom.polygon([[c,d],[c,g],[f,g],[f,d]])}return b},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):e&&e[2]},b.links=function(a){var b,e,f,g=a.map(function(){return[]}),k=[],l=va(c),m=va(d),n=a.length;if(l===zb&&m===ec)b=a;else for(b=Array(n),f=0;n>f;++f)b[f]=[+l.call(this,e=a[f],f),+m.call(this,e,f)];return fc(b,function(b){var c=
b.region.l.index;b=b.region.r.index;g[c][b]||(g[c][b]=g[b][c]=!0,k.push({source:a[c],target:a[b]}))}),k},b.triangles=function(a){if(c===zb&&d===ec)return B.geom.delaunay(a);for(var b,e=Array(l),f=va(c),g=va(d),k=-1,l=a.length;++k<l;)(e[k]=[+f.call(this,b=a[k],k),+g.call(this,b,k)]).data=b;return B.geom.delaunay(e).map(function(a){return a.map(function(a){return a.data})})},b)};var Qf={l:"r",r:"l"};B.geom.quadtree=function(a,b,c,d,e){function f(a){function m(a,b,c,d,e,f,g,k){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var l=
a.x,p=a.y;if(null!=l){if(!(0.01>Math.abs(l-c)+Math.abs(p-d))){var q=a.point;a.x=a.y=a.point=null;n(a,q,l,p,e,f,g,k)}n(a,b,c,d,e,f,g,k)}else a.x=c,a.y=d,a.point=b}else n(a,b,c,d,e,f,g,k)}function n(a,b,c,d,e,f,g,k){var l=0.5*(e+g),p=0.5*(f+k),q=c>=l,I=d>=p,r=(I<<1)+q;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=sd());q?e=l:g=l;I?f=p:k=p;m(a,b,c,d,e,f,g,k)}var p,q,I,r,O,s,t,X,B,u=va(k),v=va(l);if(null!=b)s=b,t=c,X=d,B=e;else if(X=B=-(s=t=1/0),q=[],I=[],O=a.length,g)for(r=0;O>r;++r)p=a[r],p.x<s&&(s=p.x),p.y<
t&&(t=p.y),p.x>X&&(X=p.x),p.y>B&&(B=p.y),q.push(p.x),I.push(p.y);else for(r=0;O>r;++r){var ga=+u(p=a[r],r);p=+v(p,r);s>ga&&(s=ga);t>p&&(t=p);ga>X&&(X=ga);p>B&&(B=p);q.push(ga);I.push(p)}ga=X-s;p=B-t;ga>p?B=t+ga:X=s+p;var x=sd();if(x.add=function(a){m(x,a,+u(a,++r),+v(a,r),s,t,X,B)},x.visit=function(a){Xb(a,x,s,t,X,B)},r=-1,null==b){for(;++r<O;)m(x,a[r],q[r],I[r],s,t,X,B);--r}else a.forEach(x.add);return q=I=a=p=null,x}var g,k=zb,l=ec;return(g=arguments.length)?(k=kc,l=Qd,3===g&&(e=c,d=b,c=b=0),f(a)):
(f.x=function(a){return arguments.length?(k=a,f):k},f.y=function(a){return arguments.length?(l=a,f):l},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)};B.interpolateRgb=od;B.interpolateObject=ye;B.interpolateNumber=tc;B.interpolateString=ze;var ff=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
B.interpolate=bd;B.interpolators=[function(a,b){var c=typeof b;return("string"===c?Ze.has(b)||/^(#|rgb\(|hsl\()/.test(b)?od:ze:b instanceof P?od:"object"===c?Array.isArray(b)?Rd:ye:tc)(a,b)}];B.interpolateArray=Rd;var Gg=function(){return oa},hh=B.map({linear:Gg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Jf},cubic:function(){return Sd},sin:function(){return Ue},exp:function(){return Td},circle:function(){return Ve},elastic:function(a,b){var c;return 2>arguments.length&&
(b=0.45),arguments.length?c=b/(2*ia)*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*ia/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return Da}}),ih=B.map({"in":oa,out:Ae,"in-out":Be,"out-in":function(a){return Be(Ae(a))}});B.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in";return c=hh.get(c)||Gg,b=ih.get(b)||oa,ge(b(c.apply(null,Array.prototype.slice.call(arguments,
1))))};B.interpolateHcl=function(a,b){a=B.hcl(a);b=B.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,k=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+k*a)+""}};B.interpolateHsl=function(a,b){a=B.hsl(a);b=B.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,k=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return Y(c+f*a,d+g*a,e+k*a)+""}};B.interpolateLab=
function(a,b){a=B.lab(a);b=B.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,k=b.b-e;return function(a){return da(c+f*a,d+g*a,e+k*a)+""}};B.interpolateRound=Ac;B.transform=function(a){var b=Ma.createElementNS(B.ns.prefix.svg,"g");return(B.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Nb(c?c.matrix:jh)})(a)};Nb.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+
")"};var jh={a:1,b:0,c:0,d:1,e:0,f:0};B.interpolateTransform=uc;B.layout={};B.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(yd(a[c]));return b}};B.layout.chord=function(){function a(){var m,p,q,I,r,O={},s=[],t=B.range(f),X=[];c=[];d=[];m=0;for(I=-1;++I<f;){p=0;for(r=-1;++r<f;)p+=e[I][r];s.push(p);X.push(B.range(f));m+=p}g&&t.sort(function(a,b){return g(s[a],s[b])});k&&X.forEach(function(a,b){a.sort(function(a,c){return k(e[b][a],e[b][c])})});m=(2*ia-n*f)/m;
p=0;for(I=-1;++I<f;){q=p;for(r=-1;++r<f;){var u=t[I],v=X[u][r],ga=e[u][v],x=p,y=p+=ga*m;O[u+"-"+v]={index:u,subindex:v,startAngle:x,endAngle:y,value:ga}}d[u]={index:u,startAngle:q,endAngle:p,value:(p-q)/m};p+=n}for(I=-1;++I<f;)for(r=I-1;++r<f;)m=O[I+"-"+r],p=O[r+"-"+I],(m.value||p.value)&&c.push(m.value<p.value?{source:p,target:m}:{source:m,target:p});l&&b()}function b(){c.sort(function(a,b){return l((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,k,l,m={},n=0;
return m.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,m):e},m.padding=function(a){return arguments.length?(n=a,c=d=null,m):n},m.sortGroups=function(a){return arguments.length?(g=a,c=d=null,m):g},m.sortSubgroups=function(a){return arguments.length?(k=a,c=null,m):k},m.sortChords=function(a){return arguments.length?(l=a,c&&b(),m):l},m.chords=function(){return c||a(),c},m.groups=function(){return d||a(),d},m};B.layout.force=function(){function a(b){return function(a,c,d,e){if(a.point!==
b){d=a.cx-b.x;var f=a.cy-b.y,g=1/Math.sqrt(d*d+f*f);if(O>(e-c)*g)return c=a.charge*g*g,b.px-=d*c,b.py-=f*c,!0;a.point&&isFinite(g)&&(c=a.pointCharge*g*g,b.px-=d*c,b.py-=f*c)}return!a.charge}}function b(a){a.px=B.event.x;a.py=B.event.y;k.resume()}var c,d,e,f,g,k={},l=B.dispatch("start","tick","end"),m=[1,1],n=0.9,p=kh,q=lh,I=-30,r=0.1,O=0.8,s=[],t=[];return k.tick=function(){if(0.005>(d*=0.99))return l.end({type:"end",alpha:d=0}),!0;var b,c,k,p,q,O,X,u,v=s.length,ga=t.length;for(c=0;ga>c;++c)k=t[c],
b=k.source,p=k.target,X=p.x-b.x,u=p.y-b.y,(q=X*X+u*u)&&(q=d*f[c]*((q=Math.sqrt(q))-e[c])/q,X*=q,u*=q,p.x-=X*(O=b.weight/(p.weight+b.weight)),p.y-=u*O,b.x+=X*(O=1-O),b.y+=u*O);if((O=d*r)&&(X=m[0]/2,u=m[1]/2,c=-1,O))for(;++c<v;)k=s[c],k.x+=(X-k.x)*O,k.y+=(u-k.y)*O;if(I)for(Ec(b=B.geom.quadtree(s),d,g),c=-1;++c<v;)(k=s[c]).fixed||b.visit(a(k));for(c=-1;++c<v;)k=s[c],k.fixed?(k.x=k.px,k.y=k.py):(k.x-=(k.px-(k.px=k.x))*n,k.y-=(k.py-(k.py=k.y))*n);l.tick({type:"tick",alpha:d})},k.nodes=function(a){return arguments.length?
(s=a,k):s},k.links=function(a){return arguments.length?(t=a,k):t},k.size=function(a){return arguments.length?(m=a,k):m},k.linkDistance=function(a){return arguments.length?(p="function"==typeof a?a:+a,k):p},k.distance=k.linkDistance,k.linkStrength=function(a){return arguments.length?(q="function"==typeof a?a:+a,k):q},k.friction=function(a){return arguments.length?(n=+a,k):n},k.charge=function(a){return arguments.length?(I="function"==typeof a?a:+a,k):I},k.gravity=function(a){return arguments.length?
(r=+a,k):r},k.theta=function(a){return arguments.length?(O=+a,k):O},k.alpha=function(a){return arguments.length?(a=+a,d?d=0<a?a:0:0<a&&(l.start({type:"start",alpha:d=a}),B.timer(k.tick)),k):d},k.start=function(){function a(e,f){var g,k;if(!d){d=[];for(c=0;n>c;++c)d[c]=[];for(c=0;r>c;++c)g=t[c],d[g.source.index].push(g.target),d[g.target.index].push(g.source)}k=d[b];for(var l=-1,m=k.length;++l<m;)if(!isNaN(g=k[l][e]))return g;return Math.random()*f}var b,c,d,l,n=s.length,r=t.length,O=m[0],X=m[1];for(b=
0;n>b;++b)(l=s[b]).index=b,l.weight=0;for(b=0;r>b;++b)l=t[b],"number"==typeof l.source&&(l.source=s[l.source]),"number"==typeof l.target&&(l.target=s[l.target]),++l.source.weight,++l.target.weight;for(b=0;n>b;++b)l=s[b],isNaN(l.x)&&(l.x=a("x",O)),isNaN(l.y)&&(l.y=a("y",X)),isNaN(l.px)&&(l.px=l.x),isNaN(l.py)&&(l.py=l.y);if(e=[],"function"==typeof p)for(b=0;r>b;++b)e[b]=+p.call(this,t[b],b);else for(b=0;r>b;++b)e[b]=p;if(f=[],"function"==typeof q)for(b=0;r>b;++b)f[b]=+q.call(this,t[b],b);else for(b=
0;r>b;++b)f[b]=q;if(g=[],"function"==typeof I)for(b=0;n>b;++b)g[b]=+I.call(this,s[b],b);else for(b=0;n>b;++b)g[b]=I;return k.resume()},k.resume=function(){return k.alpha(0.1)},k.stop=function(){return k.alpha(0)},k.drag=function(){return c||(c=B.behavior.drag().origin(oa).on("dragstart.force",zd).on("drag.force",b).on("dragend.force",gf)),arguments.length?(this.on("mouseover.force",bc).on("mouseout.force",hf).call(c),void 0):c},B.rebind(k,l,"on")};var kh=20,lh=1;B.layout.hierarchy=function(){function a(b,
g,k){var l=e.call(c,b,g);if(b.depth=g,k.push(b),l&&(m=l.length)){for(var m,n=-1,p=b.children=[],q=0,I=g+1;++n<m;)g=a(l[n],I,k),g.parent=b,p.push(g),q+=g.value;d&&p.sort(d);f&&(b.value=q)}else f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,g=0;if(e&&(k=e.length))for(var k,l=-1,m=d+1;++l<k;)g+=b(e[l],m);else f&&(g=+f.call(c,a,d)||0);return f&&(a.value=g),g}function c(b){var d=[];return a(b,0,d),d}var d=yc,e=ke,f=jf;return c.sort=function(a){return arguments.length?(d=a,c):
d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c};B.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,k,l=-1;for(d=b.value?d/b.value:0;++l<g;)a(k=f[l],c,b=k.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(d=a.length))for(var d,e=-1;++e<d;)c=Math.max(c,b(a[e]));return 1+c}function c(f,g){var k=d.call(this,f,
g);return a(k[0],0,e[0],e[1]/b(k[0])),k}var d=B.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Ad(c,d)};B.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=(("function"==typeof e?e.apply(this,arguments):e)-k)/B.sum(g),m=B.range(f.length);null!=c&&m.sort(c===Hg?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var n=[];return m.forEach(function(a){var b;
n[a]={data:f[a],value:b=g[a],startAngle:k,endAngle:k+=b*l}}),n}var b=Number,c=Hg,d=0,e=2*ia;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Hg={};B.layout.stack=function(){function a(k,l){var m=k.map(function(c,d){return b.call(a,c,d)}),n=m.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,
b,c)]})}),p=c.call(a,n,l),m=B.permute(m,p),n=B.permute(n,p),q,I,r=d.call(a,n,l),O=m.length,s=m[0].length;for(q=0;s>q;++q)for(e.call(a,m[0][q],I=r[q],n[0][q][1]),p=1;O>p;++p)e.call(a,m[p][q],I+=n[p-1][q][1],n[p][q][1]);return k}var b=oa,c=mc,d=me,e=le,f=kf,g=pa;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:mh.get(b)||mc,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:nh.get(b)||me,a):
d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var mh=B.map({"inside-out":function(a){var b,c=a.length,d=a.map(pb),e=a.map(ne),f=B.range(c).sort(function(a,b){return d[a]-d[b]}),g=0,k=0,l=[],m=[];for(a=0;c>a;++a)b=f[a],k>g?(g+=e[b],l.push(b)):(k+=e[b],m.push(b));return m.reverse().concat(l)},reverse:function(a){return B.range(a.length).reverse()},"default":mc}),nh=B.map({silhouette:function(a){var b,
c,d,e=a.length,f=a[0].length,g=[],k=0,l=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=a[b][c][1];d>k&&(k=d);g.push(d)}for(c=0;f>c;++c)l[c]=(k-g[c])/2;return l},wiggle:function(a){var b,c,d,e,f,g,k,l,m,n=a.length,p=a[0],q=p.length,I=[];I[0]=l=m=0;for(c=1;q>c;++c){for(e=b=0;n>b;++b)e+=a[b][c][1];f=b=0;for(k=p[c][0]-p[c-1][0];n>b;++b){d=0;for(g=(a[b][c][1]-a[b][c-1][1])/(2*k);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/k;f+=g*a[b][c][1]}I[c]=l-=e?f/e*k:0;m>l&&(m=l)}for(c=0;q>c;++c)I[c]-=m;return I},expand:function(a){var b,
c,d,e=a.length,f=a[0].length,g=1/e,k=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)k[c]=0;return k},zero:me});B.layout.histogram=function(){function a(f,g){var k,l,m=[],n=f.map(c,this),p=d.call(this,n,g),q=e.call(this,p,n,g);g=-1;for(var I=n.length,r=q.length-1,O=b?1:1/I;++g<r;)k=m[g]=[],k.dx=q[g+1]-(k.x=q[g]),k.y=0;if(0<r)for(g=-1;++g<I;)l=n[g],l>=p[0]&&l<=p[1]&&(k=m[B.bisect(q,l,1,r)-1],k.y+=O,k.push(f[g]));
return m}var b=!0,c=Number,d=De,e=Xd;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=va(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return lf(a,b)}:va(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a};B.layout.tree=function(){function a(f,g){function k(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,g,l,m=d[0],n=m,p=-1;++p<f;){l=d[p];k(l,g);var q=l;if(g){for(var I=
void 0,r=q,O=q,s=q.parent.children[0],t=r._tree.mod,X=O._tree.mod,B=g._tree.mod,u=s._tree.mod;g=Cd(g),r=Bd(r),g&&r;){s=Bd(s);O=Cd(O);O._tree.ancestor=q;I=g._tree.prelim+B-r._tree.prelim-t+c(g,r);if(0<I){var v=g._tree.ancestor.parent==q.parent?g._tree.ancestor:n,ga=q,x=I,v=v._tree,ga=ga._tree,y=x/(ga.number-v.number);v.change+=y;ga.change-=y;ga.shift+=x;ga.prelim+=x;ga.mod+=x;t+=I;X+=I}B+=g._tree.mod;t+=r._tree.mod;u+=s._tree.mod;X+=O._tree.mod}g&&!Cd(O)&&(O._tree.thread=g,O._tree.mod+=B-X);r&&!Bd(s)&&
(s._tree.thread=r,s._tree.mod+=t-u,n=q)}g=l}p=f=0;q=a.children;for(n=q.length;0<=--n;)d=q[n]._tree,d.prelim+=f,d.mod+=f,f+=d.shift+(p+=d.change);l=0.5*(m._tree.prelim+l._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-l):e.prelim=l}else b&&(e.prelim=b._tree.prelim+c(a,b))}function l(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;++e<d;)l(c[e],b)}}var m=b.call(this,f,g),n=m[0];zc(n,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,
shift:0,number:b?b._tree.number+1:0}});k(n);l(n,-n._tree.prelim);var p=Yd(n,Ee),q=Yd(n,Sf),I=Yd(n,Fe),r=p.x-c(p,q)/2,O=q.x+c(q,p)/2,s=I.depth||1;return zc(n,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-r)/(O-r)*d[0];a.y=a.depth/s*d[1];delete a._tree}),m}var b=B.layout.hierarchy().sort(null).value(null),c=oe,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=
function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Ad(a,b)};B.layout.pack=function(){function a(f,g){var k=c.call(this,f,g),l=k[0],m=e[0],n=e[1],p=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(l.x=l.y=0,zc(l,function(a){a.r=+p(a.value)}),zc(l,ic),d){var q=d*(b?1:Math.max(2*l.r/m,2*l.r/n))/2;zc(l,function(a){a.r+=q});zc(l,ic);zc(l,function(a){a.r-=q})}return nf(l,m/2,n/2,b?1:1/Math.max(2*l.r/m,2*l.r/n)),k}var b,c=B.layout.hierarchy().sort(mf),d=0,e=[1,1];return a.size=
function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Ad(a,c)};B.layout.cluster=function(){function a(f,g){var k,l=b.call(this,f,g),m=l[0],n=0;zc(m,function(a){var b=a.children;b&&b.length?(a.x=He(b),a.y=Ge(b)):(a.x=k?n+=c(a,k):0,a.y=0,k=a)});var p=of(m),q=pf(m),I=p.x-c(p,q)/2,r=q.x+c(q,p)/2;return zc(m,e?function(a){a.x=(a.x-m.x)*d[0];a.y=(m.y-a.y)*d[1]}:function(a){a.x=
(a.x-I)/(r-I)*d[0];a.y=(1-(m.y?a.y/m.y:1))*d[1]}),l}var b=B.layout.hierarchy().sort(null).value(null),c=oe,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Ad(a,b)};B.layout.treemap=function(){function a(b,c){for(var d,e,f=-1,g=b.length;++f<g;)e=(d=b[f]).value*(0>c?0:c),d.area=isNaN(e)||0>=e?0:e}function b(c){var e=c.children;
if(e&&e.length){var f,g=n(c),k=[],l=e.slice(),m=1/0,p="slice"===q?g.dx:"dice"===q?g.dy:"slice-dice"===q?1&c.depth?g.dy:g.dx:Math.min(g.dx,g.dy);a(l,g.dx*g.dy/c.value);for(k.area=0;0<(c=l.length);){k.push(c=l[c-1]);k.area+=c.area;var r;if(!(r="squarify"!==q)){c=p;f=void 0;var O=k.area;r=0;for(var s=1/0,t=-1,X=k.length;++t<X;)(f=k[t].area)&&(s>f&&(s=f),f>r&&(r=f));r=(f=(O*=O,c*=c,O?Math.max(c*r*I/O,O/(c*s*I)):1/0))<=m}r?(l.pop(),m=f):(k.area-=k.pop().area,d(k,p,g,!1),p=Math.min(g.dx,g.dy),k.length=
k.area=0,m=1/0)}k.length&&(d(k,p,g,!0),k.length=k.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=n(b),g=e.slice(),k=[];a(g,f.dx*f.dy/b.value);for(k.area=0;b=g.pop();)k.push(b),k.area+=b.area,null!=b.z&&(d(k,b.z?f.dx:f.dy,f,!g.length),k.length=k.area=0);e.forEach(c)}}function d(a,b,c,e){var f,g=-1,l=a.length,m=c.x,n=c.y,p=b?k(a.area/b):0;if(b==c.dx){for((e||p>c.dy)&&(p=c.dy);++g<l;)f=a[g],f.x=m,f.y=n,f.dy=p,m+=f.dx=Math.min(c.x+c.dx-m,p?k(f.area/p):0);f.z=!0;f.dx+=c.x+c.dx-
m;c.y+=p;c.dy-=p}else{for((e||p>c.dx)&&(p=c.dx);++g<l;)f=a[g],f.x=m,f.y=n,f.dx=p,n+=f.dy=Math.min(c.y+c.dy-n,p?k(f.area/p):0);f.z=!1;f.dy+=c.y+c.dy-n;c.x+=p;c.dx-=p}}function e(d){d=f||g(d);var k=d[0];return k.x=0,k.y=0,k.dx=l[0],k.dy=l[1],f&&g.revalue(k),a([k],k.dx*k.dy/k.value),(f?c:b)(k),p&&(f=d),d}var f,g=B.layout.hierarchy(),k=Math.round,l=[1,1],m=null,n=Ie,p=!1,q="squarify",I=0.5*(1+Math.sqrt(5));return e.size=function(a){return arguments.length?(l=a,e):l},e.padding=function(a){function b(c){var d=
a.call(e,c,c.depth);return null==d?Ie(c):Dd(c,"number"==typeof d?[d,d,d,d]:d)}function c(b){return Dd(b,a)}if(!arguments.length)return m;var d;return n=null==(m=a)?Ie:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,e},e.round=function(a){return arguments.length?(k=a?Math.round:Number,e):k!=Number},e.sticky=function(a){return arguments.length?(p=a,f=null,e):p},e.ratio=function(a){return arguments.length?(I=a,e):I},e.mode=function(a){return arguments.length?(q=a+"",e):q},Ad(e,g)};B.random=
{normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=B.random.normal.apply(B,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b/a}}};B.scale={};var Ug={floor:oa,ceil:oa};B.scale.linear=function(){return Ke([0,1],[0,1],bd,!1)};B.scale.log=
function(){return $d(B.scale.linear().domain([0,1]),10,!0,[1,10])};var sg=B.format(".0e"),Vg={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};B.scale.pow=function(){return Le(B.scale.linear(),1,[0,1])};B.scale.sqrt=function(){return B.scale.pow().exponent(0.5)};B.scale.ordinal=function(){return pc([],{t:"range",a:[[]]})};B.scale.category10=function(){return B.scale.ordinal().range(oh)};B.scale.category20=function(){return B.scale.ordinal().range(ph)};B.scale.category20b=
function(){return B.scale.ordinal().range(qh)};B.scale.category20c=function(){return B.scale.ordinal().range(rh)};var oh=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ra),ph=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ra),qh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,
8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ra),rh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ra);B.scale.quantile=function(){return Me([],[])};B.scale.quantize=function(){return pe(0,1,[0,1])};B.scale.threshold=function(){return qe([0.5],[0,1])};B.scale.identity=function(){return re([0,1])};B.svg.arc=function(){function a(){var f=b.apply(this,
arguments),g=c.apply(this,arguments),k=d.apply(this,arguments)+ae,l=e.apply(this,arguments)+ae,m=(k>l&&(m=k,k=l,l=m),l-k),n=ia>m?"0":"1",p=Math.cos(k),k=Math.sin(k),q=Math.cos(l),l=Math.sin(l);return m>=sh?f?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":f?"M"+g*p+","+g*k+"A"+g+","+g+" 0 "+n+",1 "+g*q+","+g*l+"L"+f*q+","+f*l+"A"+f+","+f+" 0 "+n+",0 "+f*p+
","+f*k+"Z":"M"+g*p+","+g*k+"A"+g+","+g+" 0 "+n+",1 "+g*q+","+g*l+"L0,0Z"}var b=Fd,c=Ne,d=Oe,e=Pe;return a.innerRadius=function(c){return arguments.length?(b=va(c),a):b},a.outerRadius=function(b){return arguments.length?(c=va(b),a):c},a.startAngle=function(b){return arguments.length?(d=va(b),a):d},a.endAngle=function(b){return arguments.length?(e=va(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+ae;return[Math.cos(f)*
a,Math.sin(f)*a]},a};var ae=-ia/2,sh=2*ia-1E-6;B.svg.line.radial=function(){var a=Pd(Gd);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};pd.reverse=qd;qd.reverse=pd;B.svg.area=function(){return Hd(oa)};B.svg.area.radial=function(){var a=Hd(Gd);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};B.svg.chord=function(){function a(f,g){var k=b(this,d,f,g),l=b(this,e,f,
g);return"M"+k.p0+c(k.r,k.p1,k.a1-k.a0)+(k.a0==l.a0&&k.a1==l.a1?"Q 0,0 "+k.p0:"Q 0,0 "+l.p0+c(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+k.p0))+"Z"}function b(a,c,d,e){var l=c.call(a,d,e);c=f.call(a,l,e);d=g.call(a,l,e)+ae;a=k.call(a,l,e)+ae;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>ia)+",1 "+b}var d=Wb,e=xb,f=Qe,g=Oe,k=Pe;return a.radius=function(b){return arguments.length?(f=va(b),a):f},a.source=function(b){return arguments.length?
(d=va(b),a):d},a.target=function(b){return arguments.length?(e=va(b),a):e},a.startAngle=function(b){return arguments.length?(g=va(b),a):g},a.endAngle=function(b){return arguments.length?(k=va(b),a):k},a};B.svg.diagonal=function(){function a(e,f){var g=b.call(this,e,f),k=c.call(this,e,f),l=(g.y+k.y)/2,g=[g,{x:g.x,y:l},{x:k.x,y:l},k];return g=g.map(d),"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=Wb,c=xb,d=Id;return a.source=function(c){return arguments.length?(b=va(c),a):b},a.target=function(b){return arguments.length?
(c=va(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a};B.svg.diagonal.radial=function(){var a=B.svg.diagonal(),b=Id,c=a.projection;return a.projection=function(a){return arguments.length?c(Re(b=a)):b},a};B.svg.symbol=function(){function a(d,e){return(Ig.get(b.call(this,d,e))||id)(c.call(this,d,e))}var b=se,c=Oc;return a.type=function(c){return arguments.length?(b=va(c),a):b},a.size=function(b){return arguments.length?(c=va(b),a):c},a};var Ig=B.map({circle:id,cross:function(a){a=
Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Jg));var b=a*Jg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Hf);var b=a*Hf/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Hf);var b=a*Hf/2;return"M0,"+-b+"L"+
a+","+b+" "+-a+","+b+"Z"}});B.svg.symbolTypes=Ig.keys();var Te,uf,Hf=Math.sqrt(3),Jg=Math.tan(30*sa),vb=[],xg=0;vb.call=La.call;vb.empty=La.empty;vb.node=La.node;vb.size=La.size;B.transition=function(a){return arguments.length?Te?a.transition():a:wg.transition()};B.transition.prototype=vb;vb.select=function(a){var b,c,d,e=this.id,f=[];a=m(a);for(var g=-1,k=this.length;++g<k;){f.push(b=[]);for(var l=this[g],n=-1,p=l.length;++n<p;)(d=l[n])&&(c=a.call(d,d.__data__,n,g))?("__data__"in d&&(c.__data__=
d.__data__),Jb(c,n,e,d.__transition__[e]),b.push(c)):b.push(null)}return Jd(f,e)};vb.selectAll=function(a){var b,c,d,e,f=this.id,g=[];a=v(a);for(var k=-1,l=this.length;++k<l;)for(var m=this[k],n=-1,p=m.length;++n<p;)if(b=m[n]){e=b.__transition__[f];c=a.call(b,b.__data__,n,k);g.push(b=[]);for(var q=-1,I=c.length;++q<I;)(d=c[q])&&Jb(d,q,f,e),b.push(d)}return Jd(g,f)};vb.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=N(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);c=this[f];for(var k=
0,l=c.length;l>k;k++)(d=c[k])&&a.call(d,d.__data__,k)&&b.push(d)}return Jd(e,this.id)};vb.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):M(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};vb.attr=function(a,b){function c(){this.removeAttribute(k)}function d(){this.removeAttributeNS(k.space,k.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(k);return c!==
a&&(b=g(c,a),function(a){this.setAttribute(k,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(k.space,k.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(k.space,k.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?uc:bd,k=B.ns.qualify(a);return be(this,"attr."+a,b,k.local?f:e)};vb.attrTween=function(a,b){function c(a,d){var f=b.call(this,a,d,this.getAttribute(e));return f&&function(a){this.setAttribute(e,
f(a))}}function d(a,c){var f=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return f&&function(a){this.setAttributeNS(e.space,e.local,f(a))}}var e=B.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};vb.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return be(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d,e=Ra.getComputedStyle(this,
null).getPropertyValue(a);return e!==b&&(d=bd(e,b),function(b){this.style.setProperty(a,d(b),c)})})})};vb.styleTween=function(a,b,c){return 3>arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,Ra.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};vb.text=function(a){return be(this,"text",a,Vf)};vb.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};
vb.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=B.ease.apply(B,arguments)),M(this,function(c){c.__transition__[b].ease=a}))};vb.delay=function(a){var b=this.id;return M(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=0|a.call(c,c.__data__,d,e)}:(a|=0,function(c){c.__transition__[b].delay=a}))};vb.duration=function(a){var b=this.id;return M(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=
Math.max(1,0|a.call(c,c.__data__,d,e))}:(a=Math.max(1,0|a),function(c){c.__transition__[b].duration=a}))};vb.each=function(a,b){var c=this.id;if(2>arguments.length){var d=uf,e=Te;Te=c;M(this,function(b,d,e){uf=b.__transition__[c];a.call(b,b.__data__,d,e)});uf=d;Te=e}else M(this,function(d){d=d.__transition__[c];(d.event||(d.event=B.dispatch("start","end"))).on(a,b)});return this};vb.transition=function(){for(var a,b,c,d,e=this.id,f=++xg,g=[],k=0,l=this.length;l>k;k++){g.push(a=[]);b=this[k];for(var m=
0,n=b.length;n>m;m++)(c=b[m])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Jb(c,m,f,d)),a.push(c)}return Jd(g,f)};B.svg.axis=function(){function a(p){p.each(function(){var a,p=B.select(this),q=null==m?c.ticks?c.ticks.apply(c,l):c.domain():m,I=null==b?c.tickFormat?c.tickFormat.apply(c,l):String:b,r=Xc(c,q,n),O=p.selectAll(".tick.minor").data(r,String),r=O.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),s=B.transition(O.exit()).style("opacity",1E-6).remove(),
O=B.transition(O).style("opacity",1),t=p.selectAll(".tick.major").data(q,String),q=t.enter().insert("g",".domain").attr("class","tick major").style("opacity",1E-6),X=B.transition(t.exit()).style("opacity",1E-6).remove(),u=B.transition(t).style("opacity",1),v=Mc(c),p=p.selectAll(".domain").data([0]),p=(p.enter().append("path").attr("class","domain"),B.transition(p)),ga=c.copy(),x=this.__chart__||ga;this.__chart__=ga;q.append("line");q.append("text");var y=q.select("line"),Ma=u.select("line"),I=t.select("text").text(I),
t=q.select("text"),z=u.select("text");switch(d){case "bottom":a=rf;r.attr("y2",f);O.attr("x2",0).attr("y2",f);y.attr("y2",e);t.attr("y",Math.max(e,0)+k);Ma.attr("x2",0).attr("y2",e);z.attr("x",0).attr("y",Math.max(e,0)+k);I.attr("dy",".71em").style("text-anchor","middle");p.attr("d","M"+v[0]+","+g+"V0H"+v[1]+"V"+g);break;case "top":a=rf;r.attr("y2",-f);O.attr("x2",0).attr("y2",-f);y.attr("y2",-e);t.attr("y",-(Math.max(e,0)+k));Ma.attr("x2",0).attr("y2",-e);z.attr("x",0).attr("y",-(Math.max(e,0)+k));
I.attr("dy","0em").style("text-anchor","middle");p.attr("d","M"+v[0]+","+-g+"V0H"+v[1]+"V"+-g);break;case "left":a=Kd;r.attr("x2",-f);O.attr("x2",-f).attr("y2",0);y.attr("x2",-e);t.attr("x",-(Math.max(e,0)+k));Ma.attr("x2",-e).attr("y2",0);z.attr("x",-(Math.max(e,0)+k)).attr("y",0);I.attr("dy",".32em").style("text-anchor","end");p.attr("d","M"+-g+","+v[0]+"H0V"+v[1]+"H"+-g);break;case "right":a=Kd,r.attr("x2",f),O.attr("x2",f).attr("y2",0),y.attr("x2",e),t.attr("x",Math.max(e,0)+k),Ma.attr("x2",e).attr("y2",
0),z.attr("x",Math.max(e,0)+k).attr("y",0),I.attr("dy",".32em").style("text-anchor","start"),p.attr("d","M"+g+","+v[0]+"H0V"+v[1]+"H"+g)}if(c.rangeBand){var A=ga.rangeBand()/2,r=function(a){return ga(a)+A};q.call(a,r);u.call(a,r)}else q.call(a,x),u.call(a,ga),X.call(a,ga),r.call(a,x),O.call(a,ga),s.call(a,ga)})}var b,c=B.scale.linear(),d=Kg,e=6,f=6,g=6,k=3,l=[10],m=null,n=0;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in th?b+"":Kg,
a):d},a.ticks=function(){return arguments.length?(l=arguments,a):l},a.tickValues=function(b){return arguments.length?(m=b,a):m},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b,c){if(!arguments.length)return e;var d=arguments.length-1;return e=+b,f=1<d?+c:e,g=0<d?+arguments[d]:e,a},a.tickPadding=function(b){return arguments.length?(k=+b,a):k},a.tickSubdivide=function(b){return arguments.length?(n=+b,a):n},a};var Kg="bottom",th={top:1,right:1,bottom:1,left:1};B.svg.brush=
function(){function b(a){a.each(function(){var a,f=B.select(this),k=f.selectAll(".background").data([0]),l=f.selectAll(".extent").data([0]),q=f.selectAll(".resize").data(p,String);f.style("pointer-events","all").on("mousedown.brush",g).on("touchstart.brush",g);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");l.enter().append("rect").attr("class","extent").style("cursor","move");q.enter().append("g").attr("class",function(a){return"resize "+
a}).style("cursor",function(a){return uh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");q.style("display",b.empty()?"none":null);q.exit().remove();m&&(a=Mc(m),k.attr("x",a[0]).attr("width",a[1]-a[0]),d(f));n&&(a=Mc(n),k.attr("y",a[0]).attr("height",a[1]-a[0]),e(f));c(f)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+q[+/e$/.test(a)][0]+
","+q[+/^s/.test(a)][1]+")"})}function d(a){a.select(".extent").attr("x",q[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1][0]-q[0][0])}function e(a){a.select(".extent").attr("y",q[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",q[1][1]-q[0][1])}function g(){function a(){var b=B.event.changedTouches;return b?B.touches(X,b)[0]:B.mouse(X)}function p(){var b=a(),f=!1;t&&(b[0]+=t[0],b[1]+=t[1]);z||(B.event.altKey?(s||(s=[(q[0][0]+q[1][0])/2,(q[0][1]+q[1][1])/2]),Ka[0]=q[+(b[0]<
s[0])][0],Ka[1]=q[+(b[1]<s[1])][1]):s=null);y&&r(b,m,0)&&(d(ga),f=!0);Ma&&r(b,n,1)&&(e(ga),f=!0);f&&(c(ga),v({type:"brush",mode:z?"move":"resize"}))}function r(a,b,c){var d,e,f=Mc(b);b=f[0];var f=f[1],g=Ka[c],l=q[1][c]-q[0][c];return z&&(b-=g,f-=l+g),d=I[c]?Math.max(b,Math.min(f,a[c])):a[c],z?e=(d+=g)+l:(s&&(g=Math.max(b,Math.min(f,2*s[c]-d))),d>g?(e=d,d=g):e=g),q[0][c]!==d||q[1][c]!==e?(k=null,q[0][c]=d,q[1][c]=e,!0):void 0}function O(){p();ga.style("pointer-events","all").selectAll(".resize").style("display",
b.empty()?"none":null);B.select("body").style("cursor",null);$c.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);A();v({type:"brushend"})}var s,t,X=this,u=B.select(B.event.target),v=l.of(X,arguments),ga=B.select(X),x=u.datum(),y=!/^(n|s)$/.test(x)&&m,Ma=!/^(e|w)$/.test(x)&&n,z=u.classed("extent"),A=Q(),Ka=a(),$c=B.select(Ra).on("keydown.brush",function(){32==B.event.keyCode&&(z||(s=null,Ka[0]-=
q[1][0],Ka[1]-=q[1][1],z=2),f())}).on("keyup.brush",function(){32==B.event.keyCode&&2==z&&(Ka[0]+=q[1][0],Ka[1]+=q[1][1],z=0,f())});if(B.event.changedTouches?$c.on("touchmove.brush",p).on("touchend.brush",O):$c.on("mousemove.brush",p).on("mouseup.brush",O),z)Ka[0]=q[0][0]-Ka[0],Ka[1]=q[0][1]-Ka[1];else if(x){var C=+/w$/.test(x),x=+/^n/.test(x);t=[q[1-C][0]-Ka[0],q[1-x][1]-Ka[1]];Ka[0]=q[C][0];Ka[1]=q[x][1]}else B.event.altKey&&(s=Ka.slice());ga.style("pointer-events","none").selectAll(".resize").style("display",
null);B.select("body").style("cursor",u.style("cursor"));v({type:"brushstart"});p()}var k,l=a(b,"brushstart","brush","brushend"),m=null,n=null,p=bg[0],q=[[0,0],[0,0]],I=[!0,!0];return b.x=function(a){return arguments.length?(m=a,p=bg[!m<<1|!n],b):m},b.y=function(a){return arguments.length?(n=a,p=bg[!m<<1|!n],b):n},b.clamp=function(a){return arguments.length?(m&&n?I=[!!a[0],!!a[1]]:(m||n)&&(I[+!m]=!!a),b):m&&n?I:m||n?I[+!m]:null},b.extent=function(a){var c,d,e,f,g;return arguments.length?(k=[[0,0],
[0,0]],m&&(c=a[0],d=a[1],n&&(c=c[0],d=d[0]),k[0][0]=c,k[1][0]=d,m.invert&&(c=m(c),d=m(d)),c>d&&(g=c,c=d,d=g),q[0][0]=0|c,q[1][0]=0|d),n&&(e=a[0],f=a[1],m&&(e=e[1],f=f[1]),k[0][1]=e,k[1][1]=f,n.invert&&(e=n(e),f=n(f)),e>f&&(g=e,e=f,f=g),q[0][1]=0|e,q[1][1]=0|f),b):(a=k||q,m&&(c=a[0][0],d=a[1][0],k||(c=q[0][0],d=q[1][0],m.invert&&(c=m.invert(c),d=m.invert(d)),c>d&&(g=c,c=d,d=g))),n&&(e=a[0][1],f=a[1][1],k||(e=q[0][1],f=q[1][1],n.invert&&(e=n.invert(e),f=n.invert(f)),e>f&&(g=e,e=f,f=g))),m&&n?[[c,e],
[d,f]]:m?[c,d]:n&&[e,f])},b.clear=function(){return k=null,q[0][0]=q[0][1]=q[1][0]=q[1][1]=0,b},b.empty=function(){return m&&q[0][0]===q[1][0]||n&&q[0][1]===q[1][1]},B.rebind(b,l,"on")};var uh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},bg=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]];B.time={};var cc=Date;Fc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},
getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){kd.setUTCDate.apply(this._,arguments)},
setDay:function(){kd.setUTCDay.apply(this._,arguments)},setFullYear:function(){kd.setUTCFullYear.apply(this._,arguments)},setHours:function(){kd.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){kd.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){kd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){kd.setUTCMonth.apply(this._,arguments)},setSeconds:function(){kd.setUTCSeconds.apply(this._,arguments)},setTime:function(){kd.setTime.apply(this._,arguments)}};var kd=
Date.prototype,cg="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dg="Sun Mon Tue Wed Thu Fri Sat".split(" "),eg="January February March April May June July August September October November December".split(" "),fg="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");B.time.year=qc(function(a){return a=B.time.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});B.time.years=B.time.year.range;B.time.years.utc=B.time.year.utc.range;
B.time.day=qc(function(a){var b=new cc(2E3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});B.time.days=B.time.day.range;B.time.days.utc=B.time.day.utc.range;B.time.dayOfYear=function(a){var b=B.time.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,b){a=a.toLowerCase();b=7-b;
var c=B.time[a]=qc(function(a){return(a=B.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=B.time.year(a).getDay();return Math.floor((B.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});B.time[a+"s"]=c.range;B.time[a+"s"].utc=c.utc.range;B.time[a+"OfYear"]=function(a){var c=B.time.year(a).getDay();return Math.floor((B.time.dayOfYear(a)+(c+b)%7)/7)}});B.time.week=B.time.sunday;B.time.weeks=B.time.sunday.range;B.time.weeks.utc=B.time.sunday.utc.range;
B.time.weekOfYear=B.time.sundayOfYear;B.time.format=function(a){function b(d){for(var e,f,g,k=[],l=-1,m=0;++l<c;)37===a.charCodeAt(l)&&(k.push(a.substring(m,l)),null!=(f=vh[e=a.charAt(++l)])&&(e=a.charAt(++l)),(g=If[e])&&(e=g(d,null==f?"e"===e?" ":"0":f)),k.push(e),m=l+1);return k.push(a.substring(m,l)),k.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(jd(c,a,b,0)!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);b=new cc;return"j"in c?b.setFullYear(c.y,
0,c.j):"w"in c&&("W"in c||"U"in c)?(b.setFullYear(c.y,0,1),b.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-(b.getDay()+5)%7:c.w+7*c.U-(b.getDay()+6)%7)):b.setFullYear(c.y,c.m,c.d),b.setHours(c.H,c.M,c.S,c.L),b},b.toString=function(){return a},b};var Lg=te(cg),wh=Ld(cg),Mg=te(dg),xh=Ld(dg),Ng=te(eg),yh=Ld(eg),Og=te(fg),zh=Ld(fg),Pg=/^%/,vh={"-":"",_:" ",0:"0"},If={a:function(a){return dg[a.getDay()]},A:function(a){return cg[a.getDay()]},b:function(a){return fg[a.getMonth()]},B:function(a){return eg[a.getMonth()]},
c:B.time.format("%a %b %e %X %Y"),d:function(a,b){return Tb(a.getDate(),b,2)},e:function(a,b){return Tb(a.getDate(),b,2)},H:function(a,b){return Tb(a.getHours(),b,2)},I:function(a,b){return Tb(a.getHours()%12||12,b,2)},j:function(a,b){return Tb(1+B.time.dayOfYear(a),b,3)},L:function(a,b){return Tb(a.getMilliseconds(),b,3)},m:function(a,b){return Tb(a.getMonth()+1,b,2)},M:function(a,b){return Tb(a.getMinutes(),b,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,b){return Tb(a.getSeconds(),
b,2)},U:function(a,b){return Tb(B.time.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Tb(B.time.mondayOfYear(a),b,2)},x:B.time.format("%m/%d/%Y"),X:B.time.format("%H:%M:%S"),y:function(a,b){return Tb(a.getFullYear()%100,b,2)},Y:function(a,b){return Tb(a.getFullYear()%1E4,b,4)},Z:function(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(Math.abs(b)/60),b=Math.abs(b)%60;return a+Tb(c,"0",2)+Tb(b,"0",2)},"%":function(){return"%"}},Wg={a:function(a,b,c){Mg.lastIndex=
0;return(b=Mg.exec(b.substring(c)))?(a.w=xh.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){Lg.lastIndex=0;return(b=Lg.exec(b.substring(c)))?(a.w=wh.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){Og.lastIndex=0;return(b=Og.exec(b.substring(c)))?(a.m=zh.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){Ng.lastIndex=0;return(b=Ng.exec(b.substring(c)))?(a.m=yh.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return jd(a,If.c.toString(),b,c)},d:Md,e:Md,
H:ue,I:ue,j:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1},L:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1},p:function(a,b,c){b=Ah.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,
c)},S:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},U:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1},w:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+1)))?(a.w=+b[0],c+b[0].length):-1},W:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1},x:function(a,b,c){return jd(a,If.x.toString(),b,c)},X:function(a,b,c){return jd(a,If.X.toString(),b,c)},
y:function(a,b,c){kb.lastIndex=0;if(b=kb.exec(b.substring(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a},Y:function(a,b,c){kb.lastIndex=0;return(b=kb.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1},"%":function(a,b,c){Pg.lastIndex=0;return(a=Pg.exec(b.substring(c,c+1)))?c+a[0].length:-1}},kb=/^\s*\d+/,Ah=B.map({am:0,pm:1});B.time.format.utc=function(a){function b(a){try{cc=Fc;var d=new cc;return d._=a,c(d)}finally{cc=Date}}var c=B.time.format(a);return b.parse=
function(a){try{cc=Fc;var b=c.parse(a);return b&&b._}finally{cc=Date}},b.toString=c.toString,b};var Qg=B.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");B.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Pc:Qg;Pc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Pc.toString=Qg.toString;B.time.second=qc(function(a){return new cc(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});B.time.seconds=B.time.second.range;
B.time.seconds.utc=B.time.second.utc.range;B.time.minute=qc(function(a){return new cc(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});B.time.minutes=B.time.minute.range;B.time.minutes.utc=B.time.minute.utc.range;B.time.hour=qc(function(a){var b=a.getTimezoneOffset()/60;return new cc(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});B.time.hours=B.time.hour.range;
B.time.hours.utc=B.time.hour.utc.range;B.time.month=qc(function(a){return a=B.time.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});B.time.months=B.time.month.range;B.time.months.utc=B.time.month.utc.range;var sf=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],gg=[[B.time.second,1],[B.time.second,5],[B.time.second,15],[B.time.second,30],[B.time.minute,1],[B.time.minute,5],[B.time.minute,15],[B.time.minute,
30],[B.time.hour,1],[B.time.hour,3],[B.time.hour,6],[B.time.hour,12],[B.time.day,1],[B.time.day,2],[B.time.week,1],[B.time.month,1],[B.time.month,3],[B.time.year,1]],Bh=[[B.time.format("%Y"),la],[B.time.format("%B"),function(a){return a.getMonth()}],[B.time.format("%b %d"),function(a){return 1!=a.getDate()}],[B.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[B.time.format("%I %p"),function(a){return a.getHours()}],[B.time.format("%I:%M"),function(a){return a.getMinutes()}],[B.time.format(":%S"),
function(a){return a.getSeconds()}],[B.time.format(".%L"),function(a){return a.getMilliseconds()}]],Rg=B.scale.linear(),Ch=Yc(Bh);gg.year=function(a,b){return Rg.domain(a.map(Wf)).ticks(b).map(Zc)};B.time.scale=function(){return Se(B.scale.linear(),gg,Ch)};var Sg=gg.map(function(a){return[a[0].utc,a[1]]}),Dh=[[B.time.format.utc("%Y"),la],[B.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[B.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[B.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&
1!=a.getUTCDate()}],[B.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[B.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[B.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[B.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Eh=Yc(Dh);return Sg.year=function(a,b){return Rg.domain(a.map(O)).ticks(b).map(I)},B.time.scale.utc=function(){return Se(B.scale.linear(),Sg,Eh)},B.text=T(function(a){return a.responseText}),B.json=function(a,b){return Fa(a,
"application/json",X,b)},B.html=function(a,b){return Fa(a,"text/html",ga,b)},B.xml=T(function(a){return a.responseXML}),B}();window.CodeMirror=function(){function p(a,b){if(!(this instanceof p))return new p(a,b);this.options=b=b||{};for(var c in Ne)!b.hasOwnProperty(c)&&Ne.hasOwnProperty(c)&&(b[c]=Ne[c]);f(b);c=this.display=t(a,"string"==typeof b.value?0:b.value.first);c.wrapper.CodeMirror=this;d(this);b.autofocus&&!Lc&&xa(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new je};n(this);b.lineWrapping&&(this.display.wrapper.className+=
" CodeMirror-wrap");var e=b.value;"string"==typeof e&&(e=new Jb(b.value,b.mode));L(this,de)(this,e);qb&&setTimeout(yc(bb,this,!0),20);ma(this);var g;try{g=document.activeElement==c.input}catch(k){}g||b.autofocus&&!Lc?setTimeout(yc(wb,this),20):Wa(this);L(this,function(){for(var a in Fd)if(Fd.propertyIsEnumerable(a))Fd[a](this,b[a],Oe);for(a=0;a<Qe.length;++a)Qe[a](this)})()}function t(a,b){var c={},d=c.input=pa("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");
nc?d.style.width="1000px":d.setAttribute("wrap","off");Dd&&(d.style.border="1px solid black");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck","false");c.inputDiv=pa("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");c.scrollbarH=pa("div",[pa("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");c.scrollbarV=pa("div",[pa("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");c.scrollbarFiller=pa("div",null,"CodeMirror-scrollbar-filler");
c.gutterFiller=pa("div",null,"CodeMirror-gutter-filler");c.lineDiv=pa("div",null,"CodeMirror-code");c.selectionDiv=pa("div",null,null,"position: relative; z-index: 1");c.cursor=pa("div","\u00a0","CodeMirror-cursor");c.otherCursor=pa("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");c.measure=pa("div",null,"CodeMirror-measure");c.lineSpace=pa("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none");c.mover=pa("div",[pa("div",[c.lineSpace],
"CodeMirror-lines")],null,"position: relative");c.sizer=pa("div",[c.mover],"CodeMirror-sizer");c.heightForcer=pa("div",null,null,"position: absolute; height: "+qc+"px; width: 1px;");c.gutters=pa("div",null,"CodeMirror-gutters");c.lineGutter=null;c.scroller=pa("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll");c.scroller.setAttribute("tabIndex","-1");c.wrapper=pa("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror");fd&&(c.gutters.style.zIndex=
-1,c.scroller.style.paddingRight=0);a.appendChild?a.appendChild(c.wrapper):a(c.wrapper);Dd&&(d.style.width="0px");nc||(c.scroller.draggable=!0);He?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):fd&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px");c.viewOffset=c.lastSizeC=0;c.showingFrom=c.showingTo=b;c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null;c.prevInput="";c.alignWidgets=!1;c.pollingFast=!1;c.poll=new je;c.cachedCharWidth=c.cachedTextHeight=null;
c.measureLineCache=[];c.measureLineCachePos=0;c.inaccurateSelection=!1;c.maxLine=null;c.maxLineLength=0;c.maxLineChanged=!1;c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null;return c}function r(a){a.doc.mode=p.getMode(a.options,a.doc.modeOption);a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;K(a,100);a.state.modeGen++;a.curOp&&ra(a)}function s(a){var b=ja(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/
ea(a.display)-3);return function(e){return Wb(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function g(a){var b=a.doc,c=s(a);b.iter(function(a){var b=c(a);b!=a.height&&fc(a,b)})}function b(a){var b=Oc[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:"");a.state.disableInput=b.disableInput}function n(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g,
" cm-s-");Y(a)}function l(a){d(a);ra(a);setTimeout(function(){e(a)},20)}function d(a){var b=a.display.gutters,c=a.options.gutters;le(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(pa("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function c(a,b){if(0==b.height)return 0;for(var c=b.text.length,d,e=b;d=Pb(e,-1);)d=d.find(),e=qa(a,d.from.line),c+=d.from.ch-d.to.ch;for(e=b;d=
hc(e);)d=d.find(),c-=e.text.length-d.from.ch,e=qa(a,d.to.line),c+=e.text.length-d.to.ch;return c}function k(a){var b=a.display,d=a.doc;b.maxLine=qa(d,d.first);b.maxLineLength=c(d,b.maxLine);b.maxLineChanged=!0;d.iter(function(a){var e=c(d,a);e>b.maxLineLength&&(b.maxLineLength=e,b.maxLine=a)})}function f(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function q(a){var b=
a.display,c=a.doc.height+(b.mover.offsetHeight-b.lineSpace.offsetHeight);b.sizer.style.minHeight=b.heightForcer.style.top=c+"px";b.gutters.style.height=Math.max(c,b.scroller.clientHeight-qc)+"px";var c=Math.max(c,b.scroller.scrollHeight),d=b.scroller.scrollWidth>b.scroller.clientWidth+1,e=c>b.scroller.clientHeight+1;e?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=d?Wd(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=c-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):
b.scrollbarV.style.display="";d?(b.scrollbarH.style.display="block",b.scrollbarH.style.right=e?Wd(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):b.scrollbarH.style.display="";d&&e?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=Wd(b.measure)+"px"):b.scrollbarFiller.style.display="";d&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(b.gutterFiller.style.display=
"block",b.gutterFiller.style.height=Wd(b.measure)+"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="";of&&0===Wd(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=pf?"18px":"12px")}function a(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top);d=Math.floor(d-a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:Qd(b,d),to:Qd(b,a)}}function e(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&
a.options.fixedGutter){for(var c=x(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,k=f.alignable;g<k.length;++g)k[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function m(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=v(a.options,b.first+b.size-1);a=a.display;if(b.length!=a.lineNumChars){var c=a.measure.appendChild(pa("div",[pa("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),
d=c.firstChild.offsetWidth,c=c.offsetWidth-d;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-c);a.lineNumWidth=a.lineNumInnerWidth+c;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";return!0}return!1}function v(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function x(a){return pb(a.scroller).left-pb(a.sizer).left}function z(b,c,d,e){for(var f=b.display.showingFrom,g=b.display.showingTo,k,l=a(b.display,
b.doc,d);A(b,c,l,e);){e=!1;k=!0;J(b);q(b);d&&(d=Math.min(b.display.scroller.scrollHeight-b.display.scroller.clientHeight,"number"==typeof d?d:d.top));l=a(b.display,b.doc,d);if(l.from>=b.display.showingFrom&&l.to<=b.display.showingTo)break;c=[]}k&&(ac(b,"update",b),b.display.showingFrom==f&&b.display.showingTo==g||ac(b,"viewportChange",b,b.display.showingFrom,b.display.showingTo));return k}function A(a,b,c,d){var e=a.display,f=a.doc;if(!e.wrapper.clientWidth)e.showingFrom=e.showingTo=f.first,e.viewOffset=
0;else if(d||!(0==b.length&&c.from>e.showingFrom&&c.to<e.showingTo)){m(a)&&(b=[{from:f.first,to:f.first+f.size}]);var g=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?g:"0";g=Infinity;if(a.options.lineNumbers)for(var k=0;k<b.length;++k)if(b[k].diff){g=b[k].from;break}var k=f.first+f.size,l=Math.max(c.from-a.options.viewportMargin,f.first);c=Math.min(k,c.to+a.options.viewportMargin);e.showingFrom<l&&20>l-e.showingFrom&&(l=Math.max(f.first,e.showingFrom));
e.showingTo>c&&20>e.showingTo-c&&(c=Math.min(k,e.showingTo));if(gd)for(l=kc(ub(f,qa(f,l)));c<k&&Wb(f,qa(f,c));)++c;var n=[{from:Math.max(e.showingFrom,f.first),to:Math.min(e.showingTo,k)}],n=n[0].from>=n[0].to?[]:F(n,b);if(gd)for(k=0;k<n.length;++k){b=n[k];for(var p;p=hc(qa(f,b.to-1));)if(p=p.find().from.line,p>b.from)b.to=p;else{n.splice(k--,1);break}}for(k=f=0;k<n.length;++k)b=n[k],b.from<l&&(b.from=l),b.to>c&&(b.to=c),b.from>=b.to?n.splice(k--,1):f+=b.to-b.from;if(d||f!=c-l||l!=e.showingFrom||
c!=e.showingTo){n.sort(function(a,b){return a.from-b.from});try{var q=document.activeElement}catch(r){}f<0.7*(c-l)&&(e.lineDiv.style.display="none");H(a,l,c,n,g);e.lineDiv.style.display="";q&&document.activeElement!=q&&q.offsetHeight&&q.focus();if(l!=e.showingFrom||c!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight)e.lastSizeC=e.wrapper.clientHeight,K(a,400);e.showingFrom=l;e.showingTo=c;y(a);C(a);return!0}C(a)}}function y(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=a.lineDiv.firstChild,d;c;c=
c.nextSibling)if(c.lineObj){if(fd){var e=c.offsetTop+c.offsetHeight;d=e-b;b=e}else d=pb(c),d=d.bottom-d.top;e=c.lineObj.height-d;2>d&&(d=ja(a));if(0.001<e||-0.001>e)if(fc(c.lineObj,d),d=c.lineObj.widgets)for(e=0;e<d.length;++e)d[e].height=d[e].node.offsetHeight}}function C(a){var b=a.display.viewOffset=sd(a,qa(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function F(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||0,k=0,l=a.length;k<l;++k){var m=a[k];e.to<=m.from&&
e.diff?f.push({from:m.from+g,to:m.to+g}):e.to<=m.from||e.from>=m.to?f.push(m):(e.from>m.from&&f.push({from:m.from,to:e.from}),e.to<m.to&&f.push({from:e.to+g,to:m.to+g}))}a=f}return a}function D(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:x(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function H(a,b,c,d,e){function f(b){var c=
b.nextSibling;nc&&Mc&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b);return c}var g=D(a),k=a.display,l=a.options.lineNumbers;d.length||nc&&a.display.currentWheelTarget||le(k.lineDiv);var m=k.lineDiv,n=m.firstChild,p=d.shift(),q=b;for(a.doc.iter(b,c,function(b){p&&p.to==q&&(p=d.shift());if(Wb(a.doc,b)){if(0!=b.height&&fc(b,0),b.widgets&&n.previousSibling)for(var c=0;c<b.widgets.length;++c){var k=b.widgets[c];if(k.showIfHidden){var r=n.previousSibling;
if(/pre/i.test(r.nodeName)){var s=pa("div",null,null,"position: relative");r.parentNode.replaceChild(s,r);s.appendChild(r);r=s}s=r.appendChild(pa("div",[k.node],"CodeMirror-linewidget"));k.handleMouseEvents||(s.ignoreEvents=!0);N(k,s,r,g)}}}else if(p&&p.from<=q&&p.to>q){for(;n.lineObj!=b;)n=f(n);l&&e<=q&&n.lineNumber&&me(n.lineNumber,v(a.options,q));n=n.nextSibling}else{if(b.widgets)for(var s=0,t=n;t&&20>s;++s,t=t.nextSibling)if(t.lineObj==b&&/div/i.test(t.nodeName)){c=t;break}var s=a,O=q,X=c,t=Ab(s,
b),u=b.gutterMarkers,x=s.display;if(s.options.lineNumbers||u||b.bgClass||b.wrapClass||b.widgets){if(X){X.alignable=null;for(var y=!0,z=0,A=null,C=X.firstChild,D;C;C=D)if(D=C.nextSibling,/\bCodeMirror-linewidget\b/.test(C.className)){for(var E=0;E<b.widgets.length;++E){var Ra=b.widgets[E];if(Ra.node==C.firstChild){Ra.above||A||(A=C);N(Ra,C,X,g);++z;break}}if(E==b.widgets.length){y=!1;break}}else X.removeChild(C);X.insertBefore(t,A);y&&z==b.widgets.length&&(k=X,X.className=b.wrapClass||"")}k||(k=pa("div",
null,b.wrapClass,"position: relative"),k.appendChild(t));b.bgClass&&k.insertBefore(pa("div",null,b.bgClass+" CodeMirror-linebackground"),k.firstChild);if(s.options.lineNumbers||u)if(r=k.insertBefore(pa("div",null,null,"position: absolute; left: "+(s.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px"),k.firstChild),s.options.fixedGutter&&(k.alignable||(k.alignable=[])).push(r),!s.options.lineNumbers||u&&u["CodeMirror-linenumbers"]||(k.lineNumber=r.appendChild(pa("div",v(s.options,O),"CodeMirror-linenumber CodeMirror-gutter-elt",
"left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+x.lineNumInnerWidth+"px"))),u)for(E=0;E<s.options.gutters.length;++E)Ra=s.options.gutters[E],(O=u.hasOwnProperty(Ra)&&u[Ra])&&r.appendChild(pa("div",[O],"CodeMirror-gutter-elt","left: "+g.gutterLeft[Ra]+"px; width: "+g.gutterWidth[Ra]+"px"));fd&&(k.style.zIndex=2);if(b.widgets&&k!=X)for(E=0,X=b.widgets;E<X.length;++E)Ra=X[E],u=pa("div",[Ra.node],"CodeMirror-linewidget"),Ra.handleMouseEvents||(u.ignoreEvents=!0),N(Ra,u,k,g),Ra.above?k.insertBefore(u,
s.options.lineNumbers&&0!=b.height?r:t):k.appendChild(u),ac(Ra,"redraw")}else k=t;if(k!=c)m.insertBefore(k,n);else{for(;n!=c;)n=f(n);n=n.nextSibling}k.lineObj=b}++q});n;)n=f(n)}function N(a,b,c,d){a.noHScroll&&((c.alignable||(c.alignable=[])).push(b),c=d.wrapperWidth,b.style.left=d.fixedPos+"px",a.coverGutter||(c-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=c+"px");a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+
"px"))}function J(a){var b=a.display,c=Ca(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting){var d=a.display,e=ba(a,a.doc.sel.head,"div");d.cursor.style.left=e.left+"px";d.cursor.style.top=e.top+"px";d.cursor.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px";d.cursor.style.display="";e.other?(d.otherCursor.style.display="",d.otherCursor.style.left=e.other.left+"px",d.otherCursor.style.top=e.other.top+"px",d.otherCursor.style.height=0.85*(e.other.bottom-e.other.top)+
"px"):d.otherCursor.style.display="none"}else b.cursor.style.display=b.otherCursor.style.display="none";c?b.selectionDiv.style.display="none":M(a);a.options.moveInputWithCursor&&(a=ba(a,a.doc.sel.head,"div"),c=pb(b.wrapper),d=pb(b.lineDiv),b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+d.top-c.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+d.left-c.left))+"px")}function M(a){function b(a,c,d,e){0>c&&(c=0);g.appendChild(pa("div",null,
"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+c+"px; width: "+(null==d?k-a:d)+"px; height: "+(e-c)+"px"))}function c(d,f,g){var m=qa(e,d),n=m.text.length,p,q;lf(Xb(m),f||0,null==g?n:g,function(c,e,r){var s=R(a,ha(d,c),"div",m,"left"),t,B;c==e?(t=s,r=B=s.left):(t=R(a,ha(d,e-1),"div",m,"right"),"rtl"==r&&(r=s,s=t,t=r),r=s.left,B=t.right);null==f&&0==c&&(r=l);3<t.top-s.top&&(b(r,s.top,null,s.bottom),r=l,s.bottom<t.top&&b(r,s.bottom,null,t.top));null==g&&e==n&&(B=k);if(!p||s.top<p.top||
s.top==p.top&&s.left<p.left)p=s;if(!q||t.bottom>q.bottom||t.bottom==q.bottom&&t.right>q.right)q=t;r<l+1&&(r=l);b(r,t.top,B-r,t.bottom)});return{start:p,end:q}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),k=d.lineSpace.offsetWidth,l=mc(a.display.measure,pa("pre",null,null,"text-align: left")).appendChild(pa("span","x")).offsetLeft;if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var m=qa(e,f.from.line),n=qa(e,f.to.line),n=ub(e,m)==ub(e,n),m=c(f.from.line,f.from.ch,
n?m.text.length:null).end,f=c(f.to.line,n?0:null,f.to.ch).start;n&&(m.top<f.top-2?(b(m.right,m.top,null,m.bottom),b(l,f.top,f.left,f.bottom)):b(m.right,m.top,f.left-m.right,m.bottom));m.bottom<f.top&&b(l,m.bottom,null,f.top)}mc(d.selectionDiv,g);d.selectionDiv.style.display=""}function E(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="";b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=
(c=!c)?"":"hidden"},a.options.cursorBlinkRate)}}function K(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,yc(G,a))}function G(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.showingTo)){var c=+new Date+a.options.workTime,d=Hb(b.mode,S(a,b.frontier)),e=[],f;b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var k=g.styles;g.styles=nd(a,g,d);for(var l=!k||k.length!=
g.styles.length,m=0;!l&&m<k.length;++m)l=k[m]!=g.styles[m];l&&(f&&f.end==b.frontier?f.end++:e.push(f={start:b.frontier,end:b.frontier+1}));g.stateAfter=Hb(b.mode,d)}else zb(a,g,d),g.stateAfter=0==b.frontier%5?Hb(b.mode,d):null;++b.frontier;if(+new Date>c)return K(a,a.options.workDelay),!0});e.length&&L(a,function(){for(var a=0;a<e.length;++a)ra(this,e[a].start,e[a].end)})()}}function u(a,b,c){var d,e,f=a.doc,g=b;for(b-=100;g>b;--g){if(g<=f.first)return f.first;var k=qa(f,g-1);if(k.stateAfter&&(!c||
g<=f.frontier))return g;k=zd(k.text,null,a.options.tabSize);if(null==e||d>k)e=g-1,d=k}return e}function S(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=u(a,b,c),g=f>d.first&&qa(d,f-1).stateAfter,g=g?Hb(d.mode,g):Bc(d.mode);d.iter(f,b,function(c){zb(a,c,g);c.stateAfter=f==b-1||0==f%5||f>=e.showingFrom&&f<e.showingTo?Hb(d.mode,g):null;++f});return g}function Q(a,b,c,d,e){var f=-1;d=d||aa(a,b);for(a=c;;a+=f){var g=d[a];if(g)break;0>f&&0==a&&(f=1)}e=a>c?"left":a<c?"right":e;"left"==
e&&g.leftSide?g=g.leftSide:"right"==e&&g.rightSide&&(g=g.rightSide);return{left:a<c?g.right:g.left,right:a>c?g.left:g.right,top:g.top,bottom:g.bottom}}function W(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e}}function P(a,b){var c=W(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function aa(a,b){var c=W(a,b);if(c)return c.measure;
var c=ca(a,b),d=a.display.measureLineCache,e={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};16==d.length?d[++a.display.measureLineCachePos%16]=e:d.push(e);return c}function ca(a,b){function c(a){var b=a.top-r.top,d=a.bottom-r.top;d>t&&(d=t);0>b&&(b=0);for(var e=s.length-2;0<=e;e-=2){var f=s[e],g=s[e+1];if(!(f>d||g<b)&&(f<=b&&g>=d||b<=f&&d>=g||Math.min(d,g)-Math.max(b,f)>=d-b>>1)){s[e]=Math.min(b,f);s[e+1]=Math.max(d,
g);break}}0>e&&(e=s.length,s.push(b,d));return{left:a.left-r.left,right:a.right-r.left,top:e,bottom:null}}function d(a){a.bottom=s[a.top+1];a.top=s[a.top]}var e=a.display,f=jf(b.text.length),g=Ab(a,b,f,!0);if(qb&&!fd&&!a.options.lineWrapping&&100<g.childNodes.length){for(var k=document.createDocumentFragment(),l=g.childNodes.length,m=0,n=Math.ceil(l/10);m<n;++m){for(var p=pa("div",null,null,"display: inline-block"),q=0;10>q&&l;++q)p.appendChild(g.firstChild),--l;k.appendChild(p)}g.appendChild(k)}mc(e.measure,
g);var r=pb(e.lineDiv),s=[],k=jf(b.text.length),t=g.offsetHeight;ic&&e.measure.first!=g&&mc(e.measure,g);for(m=0;m<f.length;++m)if(e=f[m])g=e,l=null,/\bCodeMirror-widget\b/.test(e.className)&&e.getClientRects&&(1==e.firstChild.nodeType&&(g=e.firstChild),n=g.getClientRects(),1<n.length&&(l=k[m]=c(n[0]),l.rightSide=c(n[n.length-1]))),l||(l=k[m]=c(pb(g))),e.measureRight&&(l.right=pb(e.measureRight).left),e.leftSide&&(l.leftSide=c(pb(e.leftSide)));for(m=0;m<k.length;++m)if(e=k[m])d(e),e.leftSide&&d(e.leftSide),
e.rightSide&&d(e.rightSide);return k}function Y(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0;a.display.cachedCharWidth=a.display.cachedTextHeight=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function U(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=ya(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=sd(a,b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;
if("page"==d||"window"==d)a=pb(a.display.lineSpace),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function V(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):
"local"!=c&&c||(c=pb(a.display.sizer),d+=c.left,b+=c.top);a=pb(a.display.lineSpace);return{left:d-a.left,top:b-a.top}}function R(a,b,c,d,e){d||(d=qa(a.doc,b.line));return U(a,d,Q(a,d,b.ch,null,e),c)}function ba(a,b,c,d,e){function f(b,g){var k=Q(a,d,b,e,g?"right":"left");g?k.left=k.right:k.right=k.left;return U(a,d,k,c)}function g(a,b){var c=k[b],d=c.level%2;a==De(c)&&b&&c.level<k[b-1].level?(c=k[--b],a=oe(c)-(c.level%2?0:1),d=!0):a==oe(c)&&b<k.length-1&&c.level<k[b+1].level&&(c=k[++b],a=De(c)-c.level%
2,d=!1);return d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||qa(a.doc,b.line);e||(e=aa(a,d));var k=Xb(d);b=b.ch;if(!k)return f(b);var l=Ee(k,b),l=g(b,l);null!=Zc&&(l.other=g(b,Zc));return l}function Z(a,b,c,d){a=new ha(a,b);a.xRel=d;c&&(a.outside=!0);return a}function na(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Z(d.first,0,!0,-1);var e=Qd(d,c),f=d.first+d.size-1;if(e>f)return Z(d.first+d.size-1,qa(d,f).text.length,!0,1);for(0>b&&(b=0);;){var f=qa(d,e),e=ka(a,f,e,b,c),g=(f=hc(f))&&f.find();
if(f&&(e.ch>g.from.ch||e.ch==g.from.ch&&0<e.xRel))e=g.to.line;else return e}}function ka(a,b,c,d,e){function f(d){d=ba(a,ha(c,d),"line",b,m);k=!0;if(g>d.bottom)return d.left-l;if(g<d.top)return d.left+l;k=!1;return d.left}var g=e-sd(a,b),k=!1,l=2*a.display.wrapper.clientWidth,m=aa(a,b),n=Xb(b),p=b.text.length;e=Bd(b);var q=Cd(b),r=f(e),s=k,t=f(q),u=k;if(d>t)return Z(c,q,u,1);for(;;){if(n?q==e||q==zc(b,e,1):1>=q-e){n=d<r||d-r<=t-d?e:q;for(d-=n==e?r:t;Ld.test(b.text.charAt(n));)++n;return Z(c,n,n==
e?s:u,0>d?-1:d?1:0)}var v=Math.ceil(p/2),x=e+v;if(n)for(var x=e,y=0;y<v;++y)x=zc(b,x,1);y=f(x);if(y>d){q=x;t=y;if(u=k)t+=1E3;p=v}else e=x,r=y,s=k,p-=v}}function ja(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Wc){Wc=pa("pre");for(var b=0;49>b;++b)Wc.appendChild(document.createTextNode("x")),Wc.appendChild(pa("br"));Wc.appendChild(document.createTextNode("x"))}mc(a.measure,Wc);b=Wc.offsetHeight/50;3<b&&(a.cachedTextHeight=b);le(a.measure);return b||1}function ea(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;
var b=pa("span","x"),c=pa("pre",[b]);mc(a.measure,c);b=b.offsetWidth;2<b&&(a.cachedCharWidth=b);return b||10}function da(a){a.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Zd};Fc++||(Xc=[])}function wa(a){var b=a.curOp,c=a.doc,d=a.display;a.curOp=null;b.updateMaxLine&&k(a);if(d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var f;f=d.maxLine;var g=!1;if(f.markedSpans)for(var l=
0;l<f.markedSpans;++l){var m=f.markedSpans[l];!m.collapsed||null!=m.to&&m.to!=f.text.length||(g=!0)}(g=!g&&W(a,f))?f=Q(a,f,f.text.length,g.measure,"right").right:(f=Ab(a,f,null,!0),g=f.appendChild(Xd(a.display.measure)),mc(a.display.measure,f),f=pb(g).right-pb(a.display.lineDiv).left);d.sizer.style.minWidth=Math.max(0,f+3+qc)+"px";d.maxLineChanged=!1;f=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);f<c.scrollLeft&&!b.updateScrollPos&&Ba(a,Math.min(d.scroller.scrollLeft,
f),!0)}var n,p;b.updateScrollPos?n=b.updateScrollPos:b.selectionChanged&&d.scroller.clientHeight&&(n=ba(a,c.sel.head),n=Fb(a,n.left,n.top,n.left,n.bottom));if(b.changes.length||b.forceUpdate||n&&null!=n.scrollTop)p=z(a,b.changes,n&&n.scrollTop,b.forceUpdate),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop);!p&&b.selectionChanged&&J(a);if(b.updateScrollPos)d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=n.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=
c.scrollLeft=n.scrollLeft,e(a),b.scrollToPos&&Yb(a,la(a.doc,b.scrollToPos),b.scrollToPosMargin);else if(n&&(c=Yb(a,a.doc.sel.head,a.options.cursorScrollMargin),a.state.focused&&(d=a.display,n=pb(d.sizer),p=null,0>c.top+n.top?p=!0:c.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(p=!1),null!=p&&!Ie))){if(n="none"==d.cursor.style.display)d.cursor.style.display="",d.cursor.style.left=c.left+"px",d.cursor.style.top=c.top-d.viewOffset+"px";d.cursor.scrollIntoView(p);n&&(d.cursor.style.display=
"none")}b.selectionChanged&&E(a);a.state.focused&&b.updateInput&&bb(a,b.userSelChange);c=b.maybeHiddenMarkers;d=b.maybeUnhiddenMarkers;if(c)for(p=0;p<c.length;++p)c[p].lines.length||Nb(c[p],"hide");if(d)for(p=0;p<d.length;++p)d[p].lines.length&&Nb(d[p],"unhide");var q;--Fc||(q=Xc,Xc=null);b.textChanged&&Nb(a,"change",a,b.textChanged);b.cursorActivity&&Nb(a,"cursorActivity",a);if(q)for(p=0;p<q.length;++p)q[p]()}function L(a,b){return function(){var c=a||this,d=!c.curOp;d&&da(c);try{var e=b.apply(c,
arguments)}finally{d&&wa(c)}return e}}function Pa(a){return function(){var b=this.cm&&!this.cm.curOp,c;b&&da(this.cm);try{c=a.apply(this,arguments)}finally{b&&wa(this.cm)}return c}}function Ua(a,b){var c=!a.curOp,d;c&&da(a);try{d=b()}finally{c&&wa(a)}return d}function ra(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);a.curOp.changes.push({from:b,to:c,diff:d})}function db(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){Za(a);a.state.focused&&db(a)})}
function Qa(a){function b(){Za(a)||c?(a.display.pollingFast=!1,db(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function Za(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||Se(b)||Ia(a)||a.state.disableInput)return!1;var f=b.value;if(f==c&&Ca(e.from,e.to))return!1;if(qb&&!ic&&a.display.inputHasSelection===f)return bb(a,!0),!1;var g=!a.curOp;g&&da(a);e.shift=!1;for(var k=0,l=Math.min(c.length,f.length);k<l&&c.charCodeAt(k)==
f.charCodeAt(k);)++k;l=e.from;e=e.to;k<c.length?l=ha(l.line,l.ch-(c.length-k)):a.state.overwrite&&Ca(l,e)&&!a.state.pasteIncoming&&(e=ha(e.line,Math.min(qa(d,e.line).text.length,e.ch+(f.length-k))));c=a.curOp.updateInput;k={from:l,to:e,text:Pc(f.slice(k)),origin:a.state.pasteIncoming?"paste":"+input"};rb(a.doc,k,"end");a.curOp.updateInput=c;ac(a,"inputRead",a,k);1E3<f.length||-1<f.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=f;g&&wa(a);a.state.pasteIncoming=!1;return!0}function bb(a,
b){var c,d,e=a.doc;Ca(e.sel.from,e.sel.to)?b&&(a.display.prevInput=a.display.input.value="",qb&&!ic&&(a.display.inputHasSelection=null)):(a.display.prevInput="",d=(c=ve&&(100<e.sel.to.line-e.sel.from.line||1E3<(d=a.getSelection()).length))?"-":d||a.getSelection(),a.display.input.value=d,a.state.focused&&hf(a.display.input),qb&&!ic&&(a.display.inputHasSelection=d));a.display.inaccurateSelection=c}function xa(a){"nocursor"==a.options.readOnly||Lc&&document.activeElement==a.display.input||a.display.input.focus()}
function Ia(a){return a.options.readOnly||a.doc.cantEdit}function ma(a){function b(){a.state.focused&&setTimeout(yc(xa,a),0)}function c(){null==k&&(k=setTimeout(function(){k=null;g.cachedCharWidth=g.cachedTextHeight=Md=null;Y(a);Ua(a,yc(ra,a))},100))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5E3):Ac(window,"resize",c)}function e(b){uc(a,b)||a.options.onDragEvent&&a.options.onDragEvent(a,Sd(b))||Td(b)}function f(){g.inaccurateSelection&&(g.prevInput=
"",g.inaccurateSelection=!1,g.input.value=a.getSelection(),hf(g.input))}var g=a.display;Da(g.scroller,"mousedown",L(a,oa));qb?Da(g.scroller,"dblclick",L(a,function(b){if(!uc(a,b)){var c=va(a,b);!c||T(a,b)||Va(a.display,b)||(Cb(b),b=Ja(qa(a.doc,c.line).text,c),Ga(a.doc,b.from,b.to))}})):Da(g.scroller,"dblclick",function(b){uc(a,b)||Cb(b)});Da(g.lineSpace,"selectstart",function(a){Va(g,a)||Cb(a)});Je||Da(g.scroller,"contextmenu",function(b){Ta(a,b)});Da(g.scroller,"scroll",function(){g.scroller.clientHeight&&
(Ha(a,g.scroller.scrollTop),Ba(a,g.scroller.scrollLeft,!0),Nb(a,"scroll",a))});Da(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&Ha(a,g.scrollbarV.scrollTop)});Da(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&Ba(a,g.scrollbarH.scrollLeft)});Da(g.scroller,"mousewheel",function(b){mb(a,b)});Da(g.scroller,"DOMMouseScroll",function(b){mb(a,b)});Da(g.scrollbarH,"mousedown",b);Da(g.scrollbarV,"mousedown",b);Da(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=
0});var k;Da(window,"resize",c);setTimeout(d,5E3);Da(g.input,"keyup",L(a,function(b){uc(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,Sd(b))||16!=b.keyCode||(a.doc.sel.shift=!1)}));Da(g.input,"input",yc(Qa,a));Da(g.input,"keydown",L(a,Ub));Da(g.input,"keypress",L(a,Oa));Da(g.input,"focus",yc(wb,a));Da(g.input,"blur",yc(Wa,a));a.options.dragDrop&&(Da(g.scroller,"dragstart",function(b){var c=a;if(qb&&(!c.state.draggingText||100>+new Date-Le))Td(b);else if(!uc(c,b)&&!Va(c.display,b)){var d=c.getSelection();
b.dataTransfer.setData("Text",d);b.dataTransfer.setDragImage&&!Ge&&(d=pa("img",null,null,"position: fixed; left: 0; top: 0;"),oc&&(d.width=d.height=1,c.display.wrapper.appendChild(d),d._top=d.offsetTop),b.dataTransfer.setDragImage(d,0,0),oc&&d.parentNode.removeChild(d))}}),Da(g.scroller,"dragenter",e),Da(g.scroller,"dragover",e),Da(g.scroller,"drop",L(a,Fa)));Da(g.scroller,"paste",function(b){Va(g,b)||(xa(a),Qa(a))});Da(g.input,"paste",function(){a.state.pasteIncoming=!0;Qa(a)});Da(g.input,"cut",
f);Da(g.input,"copy",f);He&&Da(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur();xa(a)})}function Va(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function va(a,b,c){var d=a.display;if(!c&&(c=b.target||b.srcElement,c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller||c==d.gutterFiller))return null;var e,f,d=pb(d.lineSpace);try{e=
b.clientX,f=b.clientY}catch(g){return null}return na(a,e-d.left,f-d.top)}function oa(b){function c(a){if(!Ca(t,a))if(t=a,"single"==p)Ga(f.doc,la(k,m),a);else if(r=la(k,r),s=la(k,s),"double"==p){var b=Ja(qa(k,a.line).text,a);Na(a,r)?Ga(f.doc,b.from,s):Ga(f.doc,r,b.to)}else"triple"==p&&(Na(a,r)?Ga(f.doc,s,la(k,ha(a.line,0))):Ga(f.doc,r,la(k,ha(a.line+1,0))))}function d(b){var e=++v,l=va(f,b,!0);if(l)if(Ca(l,q)){var m=b.clientY<u.top?-20:b.clientY>u.bottom?20:0;m&&setTimeout(L(f,function(){v==e&&(g.scroller.scrollTop+=
m,d(b))}),50)}else{f.state.focused||wb(f);q=l;c(l);var n=a(g,k);(l.line>=n.to||l.line<n.from)&&setTimeout(L(f,function(){v==e&&d(b)}),150)}}function e(a){v=Infinity;Cb(a);xa(f);Ac(document,"mousemove",x);Ac(document,"mouseup",y)}if(!uc(this,b)){var f=this,g=f.display,k=f.doc,l=k.sel;l.shift=b.shiftKey;if(Va(g,b))nc||(g.scroller.draggable=!1,setTimeout(function(){g.scroller.draggable=!0},100));else if(!T(f,b)){var m=va(f,b);switch(Ve(b)){case 3:Je&&Ta.call(f,f,b);return;case 2:m&&Ga(f.doc,m);setTimeout(yc(xa,
f),20);Cb(b);return}if(m){f.state.focused||wb(f);var n=+new Date,p="single";$d&&$d.time>n-400&&Ca($d.pos,m)?(p="triple",Cb(b),setTimeout(yc(xa,f),20),$b(f,m.line)):Ed&&Ed.time>n-400&&Ca(Ed.pos,m)?(p="double",$d={time:n,pos:m},Cb(b),n=Ja(qa(k,m.line).text,m),Ga(f.doc,n.from,n.to)):Ed={time:n,pos:m};var q=m;if(!f.options.dragDrop||!Tb||Ia(f)||Ca(l.from,l.to)||Na(m,l.from)||Na(l.to,m)||"single"!=p){Cb(b);"single"==p&&Ga(f.doc,la(k,m));var r=l.from,s=l.to,t=m,u=pb(g.wrapper),v=0,x=L(f,function(a){qb||
Ve(a)?d(a):e(a)}),y=L(f,e);Da(document,"mousemove",x);Da(document,"mouseup",y)}else{var z=L(f,function(a){nc&&(g.scroller.draggable=!1);f.state.draggingText=!1;Ac(document,"mouseup",z);Ac(g.scroller,"drop",z);10>Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)&&(Cb(a),Ga(f.doc,m),xa(f))});nc&&(g.scroller.draggable=!0);f.state.draggingText=z;g.scroller.dragDrop&&g.scroller.dragDrop();Da(document,"mouseup",z);Da(g.scroller,"drop",z)}}else(b.target||b.srcElement)==g.scroller&&Cb(b)}}}function T(a,
b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(f){return!1}if(d>=Math.floor(pb(c.gutters).right))return!1;Cb(b);if(!Kc(a,"gutterClick"))return!0;var g=pb(c.lineDiv);if(e>g.bottom)return!0;e-=g.top-c.viewOffset;for(g=0;g<a.options.gutters.length;++g){var k=c.gutters.childNodes[g];if(k&&pb(k).right>=d){c=Qd(a.doc,e);ac(a,"gutterClick",a,c,a.options.gutters[g],b);break}}return!0}function Fa(a){var b=this;if(!(uc(b,a)||Va(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Sd(a)))){Cb(a);
qb&&(Le=+new Date);var c=va(b,a,!0),d=a.dataTransfer.files;if(c&&!Ia(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var k=new FileReader;k.onload=function(){f[d]=k.result;++g==e&&(c=la(b.doc,c),rb(b.doc,{from:c,to:c,text:Pc(f.join("\n")),origin:"paste"},"around"))};k.readAsText(a)};for(var k=0;k<e;++k)a(d[k],k)}else if(!b.state.draggingText||Na(c,b.doc.sel.from)||Na(b.doc.sel.to,c))try{if(f=a.dataTransfer.getData("Text")){var k=b.doc.sel.from,l=b.doc.sel.to;
jb(b.doc,c,c);b.state.draggingText&&Aa(b.doc,"",k,l,"paste");b.replaceSelection(f,null,"paste");xa(b);wb(b)}}catch(m){}else b.state.draggingText(a),setTimeout(yc(xa,b),20)}}function Ha(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Vc||z(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Vc&&z(a,[]),K(a,100))}function Ba(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,
a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,e(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function mb(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>
f.clientHeight){if(d&&Mc&&nc)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(!c||Vc||oc||null==pc){if(d&&null!=pc){var g=d*pc,k=a.doc.scrollTop,l=k+e.wrapper.clientHeight;0>g?k=Math.max(0,k+g-50):l=Math.min(a.doc.height,l+g+50);z(a,[],{top:k,bottom:l})}20>hd&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,
a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(pc=(pc*hd+a)/(hd+1),++hd)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}else d&&Ha(a,Math.max(0,Math.min(f.scrollTop+d*pc,f.scrollHeight-f.clientHeight))),Ba(a,Math.max(0,Math.min(f.scrollLeft+c*pc,f.scrollWidth-f.clientWidth))),Cb(b),e.wheelStartX=null}}function Kb(a,b,c){if("string"==typeof b&&(b=Re[b],!b))return!1;a.display.pollingFast&&Za(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{Ia(a)&&
(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=ce}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function Vb(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function Ya(a,c){var d=Ib(a.options.keyMap),e=d.auto;clearTimeout(Me);e&&!wc(c)&&(Me=setTimeout(function(){Ib(a.options.keyMap)==d&&(a.options.keyMap=e.call?e.call(null,a):e,b(a))},50));var f=vc(c,!0),g=!1;if(!f)return!1;g=Vb(a);if(g=c.shiftKey?ab("Shift-"+f,
g,function(b){return Kb(a,b,!0)})||ab(f,g,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return Kb(a,b)}):ab(f,g,function(b){return Kb(a,b)}))Cb(c),E(a),ic&&(c.oldKeyCode=c.keyCode,c.keyCode=0),ac(a,"keyHandled",a,f,c);return g}function Sa(a,b,c){var d=ab("'"+c+"'",Vb(a),function(b){return Kb(a,b,!0)});d&&(Cb(b),E(a),ac(a,"keyHandled",a,"'"+c+"'",b));return d}function Ub(a){this.state.focused||wb(this);qb&&27==a.keyCode&&(a.returnValue=!1);if(!(uc(this,a)||this.options.onKeyEvent&&
this.options.onKeyEvent(this,Sd(a)))){var b=a.keyCode;this.doc.sel.shift=16==b||a.shiftKey;var c=Ya(this,a);oc&&(pe=c?b:null,!c&&88==b&&!ve&&(Mc?a.metaKey:a.ctrlKey)&&this.replaceSelection(""))}}function Oa(a){var b=this;if(!(uc(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Sd(a)))){var c=a.keyCode,d=a.charCode;oc&&c==pe?(pe=null,Cb(a)):(oc&&(!a.which||10>a.which)||He)&&Ya(b,a)||(c=String.fromCharCode(null==d?c:d),this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&
!Ia(this)&&-1<this.doc.mode.electricChars.indexOf(c)&&setTimeout(L(b,function(){Gb(b,b.doc.sel.to.line,"smart")}),75),Sa(b,a,c)||(qb&&!ic&&(b.display.inputHasSelection=null),Qa(b)))}}function wb(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Nb(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),bb(a,!0)),db(a),E(a))}function Wa(a){a.state.focused&&(Nb(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=
a.display.wrapper.className.replace(" CodeMirror-focused",""));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Ta(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value=" "+(Ca(f.from,f.to)?"":e.input.value);e.prevInput=" ";e.input.selectionStart=1;e.input.selectionEnd=a.length}}function d(){e.inputDiv.style.position="relative";e.input.style.cssText=l;ic&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=k);db(a);if(null!=e.input.selectionStart){qb&&
!ic||c();clearTimeout(qe);var b=0,f=function(){" "==e.prevInput&&0==e.input.selectionStart?L(a,Re.selectAll)(a):10>b++?qe=setTimeout(f,500):bb(a)};qe=setTimeout(f,200)}}if(!uc(a,b,"contextmenu")){var e=a.display,f=a.doc.sel;if(!Va(e,b)){var g=va(a,b),k=e.scroller.scrollTop;if(g&&!oc){(Ca(f.from,f.to)||Na(g,f.from)||!Na(g,f.to))&&L(a,jb)(a.doc,g,g);var l=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+
"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";xa(a);bb(a,!0);Ca(f.from,f.to)&&(e.input.value=e.prevInput=" ");qb&&!ic&&c();if(Je){Td(b);var m=function(){Ac(window,"mouseup",m);setTimeout(d,20)};Da(window,"mouseup",m)}else setTimeout(d,50)}}}}function lb(a,b,c){if(!Na(b.from,c))return la(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+
d)return b=c.line-d,d=a.first+a.size-1,b>d?ha(d,qa(a,d).text.length):Eb(c,qa(a,b).text.length);if(c.line==b.to.line+d)return Eb(c,bc(b.text).length+(1==b.text.length?b.from.ch:0)+qa(a,b.to.line).text.length-b.to.ch);a=c.line-b.from.line;return Eb(c,b.text[a].length+(a?0:b.from.ch))}function za(a,b,c){if(c&&"object"==typeof c)return{anchor:lb(a,b,c.anchor),head:lb(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=re(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,
head:d};c=function(a){if(Na(a,b.from))return a;if(!Na(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;a.line==b.to.line&&(e+=d.ch-b.to.ch);return ha(c,e)};return{anchor:c(a.sel.anchor),head:c(a.sel.head)}}function Xa(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=la(a,b));c&&(this.to=la(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});Nb(a,"beforeChange",a,b);a.cm&&
Nb(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function rb(a,b,c,d){if(a.cm){if(!a.cm.curOp)return L(a.cm,rb)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(Kc(a,"beforeChange")||a.cm&&Kc(a.cm,"beforeChange"))if(b=Xa(a,b,!0),!b)return;if(d=Ke&&!d&&fa(a,b.from,b.to)){for(var e=d.length-1;1<=e;--e)gb(a,{from:d[e].from,to:d[e].to,text:[""]});d.length&&gb(a,{from:d[0].from,to:d[0].to,text:b.text},c)}else gb(a,b,c)}function gb(a,b,c){c=za(a,b,c);
ze(a,b,c,a.cm?a.cm.curOp.id:NaN);Db(a,b,c,Rb(a,b));var d=[];jc(a,function(a,c){c||-1!=Ec(d,a.history)||(Be(a.history,b),d.push(a.history));Db(a,b,null,Rb(a,b))})}function dc(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e);c.generation=d.generation||++c.maxGeneration;for(var f=
Kc(a,"beforeChange")||a.cm&&Kc(a.cm,"beforeChange"),g=d.changes.length-1;0<=g;--g){var k=d.changes[g];k.origin=b;if(f&&!Xa(a,k,!1)){("undo"==b?c.done:c.undone).length=0;break}e.changes.push(tc(a,k));var l=g?za(a,k,null):{anchor:d.anchorBefore,head:d.headBefore};Db(a,k,l,hb(a,k));var m=[];jc(a,function(a,b){b||-1!=Ec(m,a.history)||(Be(a.history,k),m.push(a.history));Db(a,k,null,hb(a,k))})}}}}function Qb(a,b){function c(a){return ha(a.line+b,a.ch)}a.first+=b;a.cm&&ra(a.cm,a.first,a.first,b);a.sel.head=
c(a.sel.head);a.sel.anchor=c(a.sel.anchor);a.sel.from=c(a.sel.from);a.sel.to=c(a.sel.to)}function Db(a,b,c,d){if(a.cm&&!a.cm.curOp)return L(a.cm,Db)(a,b,c,d);if(b.to.line<a.first)Qb(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Qb(a,e);b={from:ha(a.first,0),to:ha(b.to.line+e,b.to.ch),text:[bc(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:ha(e,qa(a,e).text.length),text:[b.text[0]],
origin:b.origin});b.removed=ee(a,b.from,b.to);c||(c=za(a,b,null));a.cm?$a(a.cm,b,d,c):rd(a,b,d,c)}}function $a(a,b,d,e){var f=a.doc,g=a.display,k=b.from,l=b.to,m=!1,n=k.line;a.options.lineWrapping||(n=kc(ub(f,qa(f,k.line))),f.iter(n,l.line+1,function(a){if(a==g.maxLine)return m=!0}));Na(f.sel.head,b.from)||Na(b.to,f.sel.head)||(a.curOp.cursorActivity=!0);rd(f,b,d,e,s(a));a.options.lineWrapping||(f.iter(n,k.line+b.text.length,function(a){var b=c(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=
b,g.maxLineChanged=!0,m=!1)}),m&&(a.curOp.updateMaxLine=!0));f.frontier=Math.min(f.frontier,k.line);K(a,400);ra(a,k.line,l.line+1,b.text.length-(l.line-k.line)-1);if(Kc(a,"change"))if(b={from:k,to:l,text:b.text,removed:b.removed,origin:b.origin},a.curOp.textChanged){for(a=a.curOp.textChanged;a.next;a=a.next);a.next=b}else a.curOp.textChanged=b}function Aa(a,b,c,d,e){d||(d=c);if(Na(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=Pc(b));rb(a,{from:c,to:d,text:b,origin:e},null)}function ha(a,b){if(!(this instanceof
ha))return new ha(a,b);this.line=a;this.ch=b}function Ca(a,b){return a.line==b.line&&a.ch==b.ch}function Na(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function yb(a){return ha(a.line,a.ch)}function la(a,b){if(b.line<a.first)return ha(a.first,0);var c=a.first+a.size-1;return b.line>c?ha(c,qa(a,c).text.length):Eb(b,qa(a,b.line).text.length)}function Eb(a,b){var c=a.ch;return null==c||c>b?ha(a.line,b):0>c?ha(a.line,0):a}function ib(a,b){return b>=a.first&&b<a.first+a.size}function Ga(a,b,c,
d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Na(b,e);f!=Na(c,e)?(e=b,b=c):f!=Na(b,c)&&(b=c)}jb(a,e,b,d)}else jb(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function jb(a,b,c,d,e){if(!e&&Kc(a,"beforeSelectionChange")||a.cm&&Kc(a.cm,"beforeSelectionChange"))b={anchor:b,head:c},Nb(a,"beforeSelectionChange",a,b),a.cm&&Nb(a.cm,"beforeSelectionChange",a.cm,b),b.anchor=la(a,b.anchor),b.head=la(a,b.head),c=b.head,b=b.anchor;var f=a.sel;f.goalColumn=null;if(e||!Ca(b,f.anchor))b=Lb(a,
b,d,"push"!=e);if(e||!Ca(c,f.head))c=Lb(a,c,d,"push"!=e);Ca(f.anchor,b)&&Ca(f.head,c)||(f.anchor=b,f.head=c,d=Na(c,b),f.from=d?c:b,f.to=d?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),ac(a,"cursorActivity",a))}function tb(a){jb(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function Lb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var k=qa(a,f.line);if(k.markedSpans)for(var l=0;l<k.markedSpans.length;++l){var m=k.markedSpans[l],n=m.marker;if((null==
m.from||(n.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(n.inclusiveRight?m.to>=f.ch:m.to>f.ch))){if(d&&(Nb(n,"beforeCursorEnter"),n.explicitlyCleared))if(k.markedSpans){--l;continue}else break;if(n.atomic){l=n.find()[0>g?"from":"to"];if(Ca(l,f)&&(l.ch+=g,0>l.ch?l=l.line>a.first?la(a,ha(l.line-1)):null:l.ch>k.text.length&&(l=l.line<a.first+a.size-1?ha(l.line+1,0):null),!l)){if(e){if(!d)return Lb(a,b,c,!0);a.cantEdit=!0;return ha(a.first,0)}e=!0;l=b;g=-g}f=l;continue a}}}return f}}function Yb(a,
b,c){for(null==c&&(c=0);;){var d=!1,e=ba(a,b),f=Fb(a,e.left,e.top-c,e.left,e.bottom+c),g=a.doc.scrollTop,k=a.doc.scrollLeft;null!=f.scrollTop&&(Ha(a,f.scrollTop),1<Math.abs(a.doc.scrollTop-g)&&(d=!0));null!=f.scrollLeft&&(Ba(a,f.scrollLeft),1<Math.abs(a.doc.scrollLeft-k)&&(d=!0));if(!d)return e}}function Fb(a,b,c,d,e){var f=a.display,g=ja(a.display);0>c&&(c=0);var k=f.scroller.clientHeight-qc,l=f.scroller.scrollTop,m={};a=a.doc.height+(f.mover.offsetHeight-f.lineSpace.offsetHeight);var n=c<g,g=e>
a-g;c<l?m.scrollTop=n?0:c:e>l+k&&(c=Math.min(c,(g?a:e)-k),c!=l&&(m.scrollTop=c));l=f.scroller.clientWidth-qc;c=f.scroller.scrollLeft;b+=f.gutters.offsetWidth;d+=f.gutters.offsetWidth;f=f.gutters.offsetWidth;e=b<f+10;b<c+f||e?(e&&(b=0),m.scrollLeft=Math.max(0,b-10-f)):d>l+c-3&&(m.scrollLeft=d+10-l);return m}function nb(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function eb(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos=
{scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop});a=a.display.scroller;d.scrollTop=Math.max(0,Math.min(a.scrollHeight-a.clientHeight,d.scrollTop+c));d.scrollLeft=Math.max(0,Math.min(a.scrollWidth-a.clientWidth,d.scrollLeft+b))}function Gb(a,b,c,d){var e=a.doc;null==c&&(c="add");if("smart"==c)if(a.doc.mode.indent)var f=S(a,b);else c="prev";var g=a.options.tabSize,k=qa(e,b),l=zd(k.text,null,g),m=k.text.match(/^\s*/)[0],n;if("smart"==c&&(n=a.doc.mode.indent(f,k.text.slice(m.length),k.text),n==
ce)){if(!d)return;c="prev"}"prev"==c?n=b>e.first?zd(qa(e,b-1).text,null,g):0:"add"==c?n=l+a.options.indentUnit:"subtract"==c?n=l-a.options.indentUnit:"number"==typeof c&&(n=l+c);n=Math.max(0,n);c="";d=0;if(a.options.indentWithTabs)for(e=Math.floor(n/g);e;--e)d+=g,c+="\t";d<n&&(c+=gf(n-d));c!=m&&Aa(a.doc,c,ha(b,0),ha(b,m.length),"+input");k.stateAfter=null}function Mb(a,b,c){var d=b,e=b,f=a.doc;"number"==typeof b?e=qa(f,Math.max(f.first,Math.min(b,f.first+f.size-1))):d=kc(b);if(null!=d&&c(e,d))ra(a,
d,d+1);else return null;return e}function Ea(a,b,c,d,e){function f(b){var d=(e?zc:mf)(l,k,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=m=!1:(g=b,b=l=qa(a,b));if(b)k=e?(0>c?Cd:Bd)(l):0>c?l.text.length:0;else return m=!1}else k=d;return!0}var g=b.line,k=b.ch;b=c;var l=qa(a,g),m=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var n=null;d="group"==d;for(var p=!0;!(0>c)||f(!p);p=!1){var q=l.text.charAt(k)||"\n",q=Vd(q)?"w":d?/\s/.test(q)?null:"p":null;if(n&&
n!=q){0>c&&(c=1,f());break}q&&(n=q);if(0<c&&!f(!p))break}}b=Lb(a,ha(g,k),b,!0);m||(b.hitSide=!0);return b}function Zb(a,b,c,d){var e=a.doc,f=b.left,g;"page"==d?(d=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(d-(0>c?1.5:0.5)*ja(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){var k=na(a,f,g);if(!k.outside)break;if(0>c?0>=g:g>=e.height){k.hitSide=!0;break}g+=5*c}return k}function Ja(a,b){var c=b.ch,d=b.ch;if(a){(0>b.xRel||d==
a.length)&&c?--c:++d;for(var e=a.charAt(c),e=Vd(e)?Vd:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Vd(a)};0<c&&e(a.charAt(c-1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:ha(b.line,c),to:ha(b.line,d)}}function $b(a,b){Ga(a.doc,ha(b,0),la(a.doc,ha(b+1,0)))}function ua(a,b,c,d){p.defaults[a]=b;c&&(Fd[a]=d?function(a,b,d){d!=Oe&&c(a,b,d)}:c)}function Hb(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof
Array&&(e=e.concat([]));c[d]=e}return c}function Bc(a,b,c){return a.startState?a.startState(b,c):!0}function Ib(a){return"string"==typeof a?Oc[a]:a}function ab(a,b,c){function d(b){b=Ib(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(var e=0,f=b.length;e<f;++e){var g=d(b[e]);if(g)return g}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=
f}}function wc(a){a=Yc[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function vc(a,b){if(oc&&34==a.keyCode&&a["char"])return!1;var c=Yc[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(qf?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(qf?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c}function sb(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lastColumnPos=this.lastColumnValue=0}function cb(a,b){this.lines=[];this.type=b;this.doc=a}function Sb(a,
b,c,d,e){if(d&&d.shared)return Qc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return L(a.cm,Sb)(a,b,c,d,e);var f=new cb(a,e);if("range"==e&&!Na(b,c))return f;d&&ke(d,f);f.replacedWith&&(f.collapsed=!0,f.replacedWith=pa("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.replacedWith.ignoreEvents=!0));f.collapsed&&(gd=!0);f.addToHistory&&ze(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var g=b.line,k=0,l,m,n=a.cm,p;a.iter(g,c.line+1,function(d){n&&f.collapsed&&!n.options.lineWrapping&&
ub(a,d)==n.display.maxLine&&(p=!0);var e={from:null,to:null,marker:f};k+=d.text.length;g==b.line&&(e.from=b.ch,k-=b.ch);g==c.line&&(e.to=c.ch,k-=d.text.length-c.ch);f.collapsed&&(g==c.line&&(m=Pb(d,c.ch)),g==b.line?l=Pb(d,b.ch):fc(d,0));d.markedSpans=d.markedSpans?d.markedSpans.concat([e]):[e];e.marker.attachLine(d);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){Wb(a,b)&&fc(b,0)});f.clearOnEnter&&Da(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(Ke=!0,(a.history.done.length||a.history.undone.length)&&
a.clearHistory());if(f.collapsed){if(l!=m)throw Error("Inserting collapsed marker overlapping an existing one");f.size=k;f.atomic=!0}n&&(p&&(n.curOp.updateMaxLine=!0),(f.className||f.title||f.startStyle||f.endStyle||f.collapsed)&&ra(n,b.line,c.line+1),f.atomic&&tb(n));return f}function Ob(a,b){this.markers=a;this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Da(a[c],"clear",function(){d.clear()})}function Qc(a,b,c,d,e){d=ke(d);d.shared=!1;var f=[Sb(a,b,c,d,e)],g=f[0],k=d.replacedWith;
jc(a,function(a){k&&(d.replacedWith=k.cloneNode(!0));f.push(Sb(a,la(a,b),la(a,c),d,e));for(var l=0;l<a.linked.length;++l)if(a.linked[l].isParent)return;g=bc(f)});return new Ob(f,g)}function gc(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Rb(a,b){var c=ib(a,b.from.line)&&qa(a,b.from.line).markedSpans,d=ib(a,b.to.line)&&qa(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Ca(b.from,b.to);if(c)for(var k=0,l;k<c.length;++k){var m=c[k],n=m.marker;
if(null==m.from||(n.inclusiveLeft?m.from<=e:m.from<e)||"bookmark"==n.type&&!(m.from!=e||g&&m.marker.insertLeft)){var p=null==m.to||(n.inclusiveRight?m.to>=e:m.to>e);(l||(l=[])).push({from:m.from,to:p?null:m.to,marker:n})}}c=l;if(d)for(var k=0,q;k<d.length;++k)if(l=d[k],m=l.marker,null==l.to||(m.inclusiveRight?l.to>=f:l.to>f)||"bookmark"==m.type&&l.from==f&&(!g||l.marker.insertLeft))n=null==l.from||(m.inclusiveLeft?l.from<=f:l.from<f),(q||(q=[])).push({from:n?null:l.from-f,to:null==l.to?null:l.to-
f,marker:m});d=q;g=1==b.text.length;q=bc(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(k=c[f],null==k.to)(l=gc(d,k.marker),l)?g&&(k.to=null==l.to?null:l.to+q):k.to=e;if(d)for(f=0;f<d.length;++f)k=d[f],null!=k.to&&(k.to+=q),null==k.from?(l=gc(c,k.marker),l||(k.from=q,g&&(c||(c=[])).push(k))):(k.from+=q,g&&(c||(c=[])).push(k));if(g&&c){for(f=0;f<c.length;++f)null!=c[f].from&&c[f].from==c[f].to&&"bookmark"!=c[f].marker.type&&c.splice(f--,1);c.length||(c=null)}e=[c];if(!g){var g=b.text.length-
2,r;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(r||(r=[])).push({from:null,to:null,marker:c[f].marker});for(f=0;f<g;++f)e.push(r);e.push(d)}return e}function hb(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(bd(c[d]));c=e}else c=null;d=Rb(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var k=0;a:for(;k<g.length;++k){for(var l=g[k],m=0;m<f.length;++m)if(f[m].marker==l.marker)continue a;f.push(l)}}else g&&(c[e]=g)}return c}function fa(a,
b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Ec(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(),f=0;f<a.length;++f){var g=a[f];if(!Na(g.to,e.from)&&!Na(e.to,g.from)){var k=[f,1];(Na(g.from,e.from)||!c.inclusiveLeft&&Ca(g.from,e.from))&&k.push({from:g.from,to:e.from});(Na(e.to,g.to)||!c.inclusiveRight&&Ca(g.to,e.to))&&k.push({from:e.to,
to:g.to});a.splice.apply(a,k);f+=k.length-1}}}return a}function Pb(a,b){var c=gd&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!d||d.width<e.marker.width)&&(d=e.marker);return d}function hc(a){return Pb(a,a.text.length+1)}function ub(a,b){for(var c;c=Pb(b,-1);)b=qa(a,c.find().from.line);return b}function Wb(a,b){var c=gd&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.replacedWith&&
0==d.from&&d.marker.inclusiveLeft&&xb(a,b,d)))return!0}function xb(a,b,c){if(null==c.to)return b=c.marker.find().to,b=qa(a,b.line),xb(a,b,gc(b.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.replacedWith&&d.from==c.to&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&xb(a,b,d))return!0}function ld(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);
a.markedSpans=null}}function Gc(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Hc(a){return function(){var b=!this.cm.curOp;b&&da(this.cm);try{var c=a.apply(this,arguments)}finally{b&&wa(this.cm)}return c}}function ya(a){if(null!=a.height)return a.height;a.node.parentNode&&1==a.node.parentNode.nodeType||mc(a.cm.display.measure,pa("div",[a.node],null,"position: relative"));return a.height=a.node.offsetHeight}function md(a,b,c,d){var e=new se(a,c,d);e.noHScroll&&
(a.display.alignWidgets=!0);Mb(a,b,function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;if(!Wb(a.doc,b)||e.showIfHidden)c=sd(a,b)<a.doc.scrollTop,fc(b,b.height+ya(e)),c&&eb(a,0,e.height);return!0});return e}function Od(a,b,c,d,e){var f=c.flattenSpans;null==f&&(f=a.options.flattenSpans);var g=0,k=null,l=new sb(b,a.options.tabSize),m;for(""==b&&c.blankLine&&c.blankLine(d);!l.eol();)l.pos>a.options.maxHighlightLength?
(f=!1,l.pos=Math.min(b.length,l.start+5E4),m=null):m=c.token(l,d),f&&k==m||(g<l.start&&e(l.start,k),g=l.start,k=m),l.start=l.pos;g<l.pos&&e(l.pos,k)}function nd(a,b,c){var d=[a.state.modeGen];Od(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(c=0;c<a.state.overlays.length;++c){var e=a.state.overlays[c],f=1,g=0;Od(a,b.text,e.mode,!0,function(a,b){for(var c=f;g<a;){var k=d[f];k>a&&d.splice(f,1,a,d[f+1],k);f+=2;g=Math.min(a,k)}if(b)if(e.opaque)d.splice(c,f-c,a,b),f=c+2;else for(;c<f;c+=2)k=d[c+
1],d[c+1]=k?k+" "+b:b})}return d}function Pd(a,b){b.styles&&b.styles[0]==a.state.modeGen||(b.styles=nd(a,b,b.stateAfter=S(a,kc(b))));return b.styles}function zb(a,b,c){var d=a.doc.mode,e=new sb(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,c),e.start=e.pos}function ec(a){return a?Jd[a]||(Jd[a]="cm-"+a.replace(/ +/g," cm-")):null}function Ab(a,b,c,d){for(var e,f=b,g=!0;e=Pb(f,-1);)f=qa(a.doc,e.find().from.line);d={pre:pa("pre"),
col:0,pos:0,measure:null,measuredSomething:!1,cm:a,copyWidgets:d};f.textClass&&(d.pre.className=f.textClass);do{f.text&&(g=!1);d.measure=f==b&&c;d.pos=0;d.addToken=d.measure?qd:pd;(qb||nc)&&a.getOption("lineWrapping")&&(d.addToken=rc(d.addToken));a:{e=d;var k=Pd(a,f),l=f.markedSpans,m=f.text,n=0;if(l)for(var p=m.length,q=0,r=1,s="",t=void 0,u=0,v=void 0,x=void 0,y=void 0,z=void 0,A=void 0;;){if(u==q){for(var v=x=y=z="",A=null,u=Infinity,C=null,E=0;E<l.length;++E){var D=l[E],F=D.marker;D.from<=q&&
(null==D.to||D.to>q)?(null!=D.to&&u>D.to&&(u=D.to,x=""),F.className&&(v+=" "+F.className),F.startStyle&&D.from==q&&(y+=" "+F.startStyle),F.endStyle&&D.to==u&&(x+=" "+F.endStyle),F.title&&!z&&(z=F.title),F.collapsed&&(!A||A.marker.size<F.size)&&(A=D)):D.from>q&&u>D.from&&(u=D.from);"bookmark"==F.type&&D.from==q&&F.replacedWith&&(C=F)}if(A&&(A.from||0)==q&&(sc(e,(null==A.to?p:A.to)-q,A.marker,null==A.from),null==A.to)){e=A.marker.find();break a}C&&!A&&sc(e,0,C)}if(q>=p)break;for(C=Math.min(p,u);;){if(s){E=
q+s.length;A||(D=E>C?s.slice(0,C-q):s,e.addToken(e,D,t?t+v:v,y,q+D.length==u?x:"",z));if(E>=C){s=s.slice(C-q);q=C;break}q=E;y=""}s=m.slice(n,n=k[r++]);t=ec(k[r++])}}else for(var r=1;r<k.length;r+=2)e.addToken(e,m.slice(n,n=k[r]),ec(k[r+1]));e=void 0}c&&f==b&&!d.measuredSomething&&(c[0]=d.pre.appendChild(Xd(a.display.measure)),d.measuredSomething=!0);e&&(f=qa(a.doc,e.to.line))}while(e);!c||d.measuredSomething||c[0]||(c[0]=d.pre.appendChild(g?pa("span","\u00a0"):Xd(a.display.measure)));d.pre.firstChild||
Wb(a.doc,b)||d.pre.appendChild(document.createTextNode("\u00a0"));var G;c&&qb&&(G=Xb(f))&&(g=G.length-1,G[g].from==G[g].to&&--g,f=G[g],G=G[g-1],f.from+1==f.to&&G&&f.level<G.level&&(c=c[d.pos-1])&&c.parentNode.insertBefore(c.measureRight=Xd(a.display.measure),c.nextSibling));Nb(a,"renderLine",a,b,d.pre);return d.pre}function pd(a,b,c,d,e,f){if(b){if(be.test(b))for(var g=document.createDocumentFragment(),k=0;;){be.lastIndex=k;var l=be.exec(b),m=l?l.index-k:b.length-k;m&&(g.appendChild(document.createTextNode(b.slice(k,
k+m))),a.col+=m);if(!l)break;k+=m+1;"\t"==l[0]?(l=a.cm.options.tabSize,l-=a.col%l,g.appendChild(pa("span",gf(l),"cm-tab")),a.col+=l):(m=pa("span","\u2022","cm-invalidchar"),m.title="\\u"+l[0].charCodeAt(0).toString(16),g.appendChild(m),a.col+=1)}else{a.col+=b.length;var g=document.createTextNode(b)}if(c||d||e||a.measure)return b=c||"",d&&(b+=d),e&&(b+=e),m=pa("span",[g],b),f&&(m.title=f),a.pre.appendChild(m);a.pre.appendChild(g)}}function qd(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var k=
b.charAt(g),l=0==g;"\ud800"<=k&&"\udbff">k&&g<b.length-1?(k=b.slice(g,g+2),++g):g&&f&&ne(b,g)&&a.pre.appendChild(pa("wbr"));var m=a.measure[a.pos],l=a.measure[a.pos]=pd(a,k,c,l&&d,g==b.length-1&&e);m&&(l.leftSide=m.leftSide||m);qb&&f&&" "==k&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(l.style.whiteSpace="normal");a.pos+=k.length}b.length&&(a.measuredSomething=!0)}function rc(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,
d,e,f,g,k){return a(c,d.replace(/ {3,}/,b),e,f,g,k)}}function sc(a,b,c,d){if(d=!d&&c.replacedWith)if(a.copyWidgets&&(d=d.cloneNode(!0)),a.pre.appendChild(d),a.measure){if(b)a.measure[a.pos]=d;else{var e=a.measure[a.pos]=Xd(a.cm.display.measure);"bookmark"!=c.type||c.insertLeft?a.pre.insertBefore(e,d):a.pre.appendChild(e)}a.measuredSomething=!0}a.pos+=b}function rd(a,b,c,d,e){function f(a,c,d){var g=e;a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);
ld(a);Gc(a,d);c=g?g(a):1;c!=a.height&&fc(a,c);ac(a,"change",a,b)}var g=b.from,k=b.to,l=b.text,m=qa(a,g.line),n=qa(a,k.line),p=bc(l),q=c?c[l.length-1]:null,r=k.line-g.line;if(0==g.ch&&0==k.ch&&""==p){for(var s=0,t=l.length-1,u=[];s<t;++s)u.push(new id(l[s],c?c[s]:null,e));f(n,n.text,q);r&&a.remove(g.line,r);u.length&&a.insert(g.line,u)}else if(m==n)if(1==l.length)f(m,m.text.slice(0,g.ch)+p+m.text.slice(k.ch),q);else{u=[];s=1;for(t=l.length-1;s<t;++s)u.push(new id(l[s],c?c[s]:null,e));u.push(new id(p+
m.text.slice(k.ch),q,e));f(m,m.text.slice(0,g.ch)+l[0],c?c[0]:null);a.insert(g.line+1,u)}else if(1==l.length)f(m,m.text.slice(0,g.ch)+l[0]+n.text.slice(k.ch),c?c[0]:null),a.remove(g.line+1,r);else{f(m,m.text.slice(0,g.ch)+l[0],c?c[0]:null);f(n,p+n.text.slice(k.ch),q);s=1;t=l.length-1;for(u=[];s<t;++s)u.push(new id(l[s],c?c[s]:null,e));1<r&&a.remove(g.line+1,r-1);a.insert(g.line+1,u)}ac(a,"change",a,b);jb(a,d.anchor,d.head,null,!0)}function Bb(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,
d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function ad(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function jc(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var k=a.linked[g];if(k.doc!=e){var l=f&&k.sharedHist;if(!c||l)b(k.doc,l),d(k.doc,a,l)}}}d(a,null,!0)}function de(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;
g(a);r(a);a.options.lineWrapping||k(a);a.options.mode=b.modeOption;ra(a)}function qa(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function ee(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function fe(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function fc(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=
c}function kc(a){if(null==a.parent)return null;var b=a.parent;a=Ec(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Qd(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function sd(a,b){b=ub(a.doc,b);for(var c=0,d=b.parent,
e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;else c+=f.height}for(f=d.parent;f;d=f,f=d.parent)for(e=0;e<f.children.length;++e){var g=f.children[e];if(g==d)break;else c+=g.height}return c}function Xb(a){var b=a.order;null==b&&(b=a.order=Wf(a.text));return b}function od(a){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function ye(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,
d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function tc(a,b){var c={from:{line:b.from.line,ch:b.from.ch},to:re(b),text:ee(a,b.from,b.to)};ye(a,c,b.from.line,b.to.line+1);jc(a,function(a){ye(a,c,b.from.line,b.to.line+1)},!0);return c}function ze(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=bc(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var k=
bc(g.changes);Ca(b.from,b.to)&&Ca(b.from,k.to)?k.to=re(b):g.changes.push(tc(a,b));g.anchorAfter=c.anchor;g.headAfter=c.head}else for(g={changes:[tc(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g),e.generation=++e.maxGeneration;e.done.length>e.undoDepth;)e.done.shift();e.lastTime=f;e.lastOp=d;e.lastOrigin=b.origin}function bd(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,
b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Rd(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(e=0;e<f.length;++e){var k=f[e],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var m in k)(l=m.match(/^spans_(\d+)$/))&&-1<Ec(b,Number(l[1]))&&(bc(g)[m]=k[m],delete k[m])}}return d}function ge(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}
function Ae(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,k=0;k<f.changes.length;++k){var l=f.changes[k];f.copied||(l.from=yb(l.from),l.to=yb(l.to));if(c<l.from.line)l.from.line+=d,l.to.line+=d;else if(b<=l.to.line){g=!1;break}}f.copied||(f.anchorBefore=yb(f.anchorBefore),f.headBefore=yb(f.headBefore),f.anchorAfter=yb(f.anchorAfter),f.readAfter=yb(f.headAfter),f.copied=!0);g?(ge(f.anchorBefore),ge(f.headBefore),ge(f.anchorAfter),ge(f.headAfter)):(a.splice(0,e+1),e=0)}}function Be(a,b){var c=
b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Ae(a.done,c,d,e);Ae(a.undone,c,d,e)}function Jf(){Td(this)}function Sd(a){a.stop||(a.stop=Jf);return a}function Cb(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Ue(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Td(a){Cb(a);Ue(a)}function Ve(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Mc&&a.ctrlKey&&1==b&&(b=3);return b}function Da(a,b,c){a.addEventListener?a.addEventListener(b,c,
!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))}function Ac(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}}function Nb(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function ac(a,b){function c(a){return function(){a.apply(null,
e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);Xc||(++Fc,Xc=[],setTimeout(Rf,0));for(var f=0;f<d.length;++f)Xc.push(c(d[f]))}}function uc(a,b,c){Nb(a,c||b.type,a,b);return(null!=b.defaultPrevented?b.defaultPrevented:!1==b.returnValue)||b.codemirrorIgnore}function Rf(){--Fc;var a=Xc;Xc=null;for(var b=0;b<a.length;++b)a[b]()}function Kc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function yd(a){a.prototype.on=function(a,b){Da(this,a,b)};a.prototype.off=
function(a,b){Ac(this,a,b)}}function je(){this.id=null}function zd(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function gf(a){for(;jd.length<=a;)jd.push(bc(jd)+" ");return jd[a]}function bc(a){return a[a.length-1]}function hf(a){if(Dd)a.selectionStart=0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function Ec(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;
return-1}function Ad(a,b){function c(){}c.prototype=a;var d=new c;b&&ke(b,d);return d}function ke(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function jf(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}function yc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Vd(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||te.test(a))}function kf(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}
function pa(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)me(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function le(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function mc(a,b){return le(a).appendChild(b)}function me(a,b){ic?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function pb(a){return a.getBoundingClientRect()}function ne(){return!1}function Wd(a){if(null!=
Md)return Md;var b=pa("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");mc(a,b);b.offsetWidth&&(Md=b.offsetHeight-b.clientHeight);return Md||0}function Xd(a){if(null==ue){var b=pa("span","\u200b");mc(a,pa("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(ue=1>=b.offsetWidth&&2<b.offsetHeight&&!fd)}return ue?pa("span","\u200b"):pa("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function lf(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=
!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function De(a){return a.level%2?a.to:a.from}function oe(a){return a.level%2?a.from:a.to}function Bd(a){return(a=Xb(a))?De(a[0]):0}function Cd(a){var b=Xb(a);return b?oe(bc(b)):a.text.length}function Yd(a,b){var c=qa(a.doc,b),d=ub(a.doc,c);d!=c&&(b=kc(d));d=(c=Xb(d))?c[0].level%2?Cd(d):Bd(d):0;return ha(b,d)}function Sf(a,b){for(var c,d;c=hc(d=qa(a.doc,
b));)b=c.find().to.line;d=(c=Xb(d))?c[0].level%2?Bd(d):Cd(d):d.text.length;return ha(b,d)}function Ee(a,b){for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return Zc=null,c;if(e.from==b||e.to==b)if(null==d)d=c;else{var e=e.level,f=a[d].level,g=a[0].level,e=e==g?!0:f==g?!1:e<f;if(e)return Zc=d,c;Zc=c;return d}}Zc=null;return d}function Fe(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&Ld.test(a.text.charAt(b)));return b}function zc(a,b,c,d){var e=Xb(a);if(!e)return mf(a,b,c,d);var f=Ee(e,
b),g=e[f];for(b=Fe(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(Ee(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?Fe(a,g.to,-1,d):Fe(a,g.from,1,d)}}function mf(a,b,c,d){b+=c;if(d)for(;0<b&&Ld.test(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Vc=/gecko\/\d/i.test(navigator.userAgent),qb=/MSIE \d/.test(navigator.userAgent),fd=qb&&(null==document.documentMode||8>document.documentMode),ic=qb&&
(null==document.documentMode||9>document.documentMode),nc=/WebKit\//.test(navigator.userAgent),Tf=nc&&/Qt\/\d+\.\d+/.test(navigator.userAgent),nf=/Chrome\//.test(navigator.userAgent),oc=/Opera\//.test(navigator.userAgent),Ge=/Apple Computer/.test(navigator.vendor),He=/KHTML\//.test(navigator.userAgent),of=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),pf=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Ie=/PhantomJS/.test(navigator.userAgent),Dd=/AppleWebKit/.test(navigator.userAgent)&&
/Mobile\/\w+/.test(navigator.userAgent),Lc=Dd||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Mc=Dd||/Mac/.test(navigator.platform),Uf=/windows/i.test(navigator.platform),Nc=oc&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Nc&&(Nc=Number(Nc[1]));Nc&&15<=Nc&&(oc=!1,nc=!0);var qf=Mc&&(Tf||oc&&(null==Nc||12.11>Nc)),Je=Vc||qb&&!ic,Ke=!1,gd=!1,Wc,Zd=0,Ed,$d,Le=0,hd=0,pc=null;qb?pc=-0.53:Vc?pc=15:nf?pc=-0.7:Ge&&(pc=-1/3);var Me,pe=null,qe,re=p.changeEnd=function(a){return a.text?
ha(a.from.line+a.text.length-1,bc(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};p.Pos=ha;p.prototype={constructor:p,focus:function(){window.focus();xa(this);wb(this);Qa(this)},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Fd.hasOwnProperty(a)&&L(this,Fd[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,
c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:L(null,function(a,b){var c=a.token?a:p.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;ra(this)}),removeOverlay:L(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;
ra(this);break}}}),indentLine:L(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");ib(this.doc,a)&&Gb(this,a,b,c)}),indentSelection:L(null,function(a){var b=this.doc.sel;if(Ca(b.from,b.to))return Gb(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),b=b.from.line;b<=c;++b)Gb(this,b,a)}),getTokenAt:function(a,b){var c=this.doc;a=la(c,a);for(var d=S(this,a.line,b),e=this.doc.mode,c=qa(c,a.line),c=new sb(c.text,this.options.tabSize);c.pos<
a.ch&&!c.eol();){c.start=c.pos;var f=e.token(c,d)}return{start:c.start,end:c.pos,string:c.current(),className:f||null,type:f||null,state:d}},getTokenTypeAt:function(a){a=la(this.doc,a);var b=Pd(this,qa(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)return b[2];for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else return b[2*e+2]}},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?p.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){if(Id.hasOwnProperty(b)){var c=
Id[b],d=this.getModeAt(a);return d[b]&&c[d[b]]||d.helperType&&c[d.helperType]||c[d.name]}},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return S(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel;c=null==a?c.head:"object"==typeof a?la(this.doc,a):a?c.from:c.to;return ba(this,c,b||"page")},charCoords:function(a,b){return R(this,la(this.doc,a),b||"page")},coordsChar:function(a,b){a=V(this,a,b||"page");return na(this,a.left,
a.top)},lineAtHeight:function(a,b){a=V(this,{top:a,left:0},b||"page").top;return Qd(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=qa(this.doc,a);return U(this,qa(this.doc,a),{top:0,left:0},b||"page").top+(c?d.height:0)},defaultTextHeight:function(){return ja(this.display)},defaultCharWidth:function(){return ea(this.display)},setGutterMarker:L(null,function(a,b,c){return Mb(this,a,function(a){var d=
a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&kf(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:L(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,ra(b,d,d+1),kf(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineClass:L(null,function(a,b,c){return Mb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=
" "+c}else a[d]=c;return!0})}),removeLineClass:L(null,function(a,b,c){return Mb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),addLineWidget:L(null,function(a,b,c){return md(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==
typeof a){if(!ib(this.doc,a))return null;var b=a;a=qa(this.doc,a);if(!a)return null}else if(b=kc(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=ba(this,la(this.doc,a));var g=a.bottom,k=a.left;b.style.position="absolute";f.sizer.appendChild(b);
if("over"==d)g=a.top;else if("above"==d||"near"==d){var l=Math.max(f.wrapper.clientHeight,this.doc.height),m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>l)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=l&&(g=a.bottom);k+b.offsetWidth>m&&(k=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(k=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?k=0:"middle"==e&&(k=(f.sizer.clientWidth-b.offsetWidth)/
2),b.style.left=k+"px");c&&(a=Fb(this,k,g,k+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&Ha(this,a.scrollTop),null!=a.scrollLeft&&Ba(this,a.scrollLeft))},triggerOnKeyDown:L(null,Ub),execCommand:function(a){return Re[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=la(this.doc,a);f<b&&(a=Ea(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:L(null,function(a,b){var c=this.doc.sel,c=c.shift||c.extend||Ca(c.from,c.to)?Ea(this.doc,c.head,a,b,this.options.rtlMoveVisually):
0>a?c.from:c.to;Ga(this.doc,c,c,a)}),deleteH:L(null,function(a,b){var c=this.doc.sel;Ca(c.from,c.to)?Aa(this.doc,"",c.from,Ea(this.doc,c.head,a,b,!1),"+delete"):Aa(this.doc,"",c.from,c.to,"+delete");this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=la(this.doc,a);f<b&&(a=ba(this,a,"div"),null==d?d=a.left:a.left=d,a=Zb(this,a,e,c),!a.hitSide);++f);return a},moveV:L(null,function(a,b){var c=this.doc.sel,d=ba(this,c.head,"div");null!=c.goalColumn&&(d.left=
c.goalColumn);var e=Zb(this,d,a,b);"page"==b&&eb(this,0,R(this,e,"div").top-d.top);Ga(this.doc,e,e,a);c.goalColumn=d.left}),toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:L(null,function(a,b){nb(this,a,b)}),getScrollInfo:function(){var a=
this.display.scroller,b=qc;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:L(null,function(a,b){"number"==typeof a&&(a=ha(a,0));b||(b=0);var c=a;a&&null==a.line||(this.curOp.scrollToPos=a?la(this.doc,a):this.doc.sel.head,this.curOp.scrollToPosMargin=b,c=ba(this,this.curOp.scrollToPos));c=Fb(this,c.left,c.top-b,c.right,c.bottom+b);nb(this,c.scrollLeft,c.scrollTop)}),setSize:L(null,function(a,
b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0);this.curOp.forceUpdate=!0}),operation:function(a){return Ua(this,a)},refresh:L(null,function(){Y(this);nb(this,this.doc.scrollLeft,this.doc.scrollTop);ra(this)}),swapDoc:L(null,function(a){var b=this.doc;b.cm=null;de(this,a);
Y(this);bb(this,!0);nb(this,a.scrollLeft,a.scrollTop);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};yd(p);var Fd=p.optionHandlers={},Ne=p.defaults={},Oe=p.Init={toString:function(){return"CodeMirror.Init"}};ua("value","",function(a,b){a.setValue(b)},!0);ua("mode",null,function(a,b){a.doc.modeOption=b;r(a)},
!0);ua("indentUnit",2,r,!0);ua("indentWithTabs",!1);ua("smartIndent",!0);ua("tabSize",4,function(a){r(a);Y(a);ra(a)},!0);ua("electricChars",!0);ua("rtlMoveVisually",!Uf);ua("theme","default",function(a){n(a);l(a)},!0);ua("keyMap","default",b);ua("extraKeys",null);ua("onKeyEvent",null);ua("onDragEvent",null);ua("lineWrapping",!1,function(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",
""),k(a));g(a);ra(a);Y(a);setTimeout(function(){q(a)},100)},!0);ua("gutters",[],function(a){f(a.options);l(a)},!0);ua("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?x(a.display)+"px":"0";a.refresh()},!0);ua("coverGutterNextToScrollbar",!1,q,!0);ua("lineNumbers",!1,function(a){f(a.options);l(a)},!0);ua("firstLineNumber",1,l,!0);ua("lineNumberFormatter",function(a){return a},l,!0);ua("showCursorWhenSelecting",!1,J,!0);ua("readOnly",!1,function(a,b){"nocursor"==b?(Wa(a),a.display.input.blur()):
b||bb(a,!0)});ua("dragDrop",!0);ua("cursorBlinkRate",530);ua("cursorScrollMargin",0);ua("cursorHeight",1);ua("workTime",100);ua("workDelay",100);ua("flattenSpans",!0);ua("pollInterval",100);ua("undoDepth",40,function(a,b){a.doc.history.undoDepth=b});ua("historyEventDelay",500);ua("viewportMargin",10,function(a){a.refresh()},!0);ua("maxHighlightLength",1E4,function(a){r(a);a.refresh()},!0);ua("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});
ua("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});ua("autofocus",null);var Pe=p.modes={},Gd=p.mimeModes={};p.defineMode=function(a,b){p.defaults.mode||"null"==a||(p.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}Pe[a]=b};p.defineMIME=function(a,b){Gd[a]=b};p.resolveMode=function(a){if("string"==typeof a&&Gd.hasOwnProperty(a))a=Gd[a];else if(a&&"string"==typeof a.name&&Gd.hasOwnProperty(a.name)){var b=Gd[a.name];
a=Ad(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return p.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};p.getMode=function(a,b){b=p.resolveMode(b);var c=Pe[b.name];if(!c)return p.getMode(a,"text/plain");c=c(a,b);if(Hd.hasOwnProperty(b.name)){var d=Hd[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;return c};p.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});
p.defineMIME("text/plain","null");var Hd=p.modeExtensions={};p.extendMode=function(a,b){var c=Hd.hasOwnProperty(a)?Hd[a]:Hd[a]={};ke(b,c)};p.defineExtension=function(a,b){p.prototype[a]=b};p.defineDocExtension=function(a,b){Jb.prototype[a]=b};p.defineOption=ua;var Qe=[];p.defineInitHook=function(a){Qe.push(a)};var Id=p.helpers={};p.registerHelper=function(a,b,c){Id.hasOwnProperty(a)||(Id[a]=p[a]={});Id[a][b]=c};p.isWordChar=Vd;p.copyState=Hb;p.startState=Bc;p.innerMode=function(a,b){for(;a.innerMode;){var c=
a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var Re=p.commands={selectAll:function(a){a.setSelection(ha(a.firstLine(),0),ha(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Ca(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:ha(b.line),"+delete"):a.replaceRange("",b,ha(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",ha(b,0),ha(b),"+delete")},delLineLeft:function(a){var b=
a.getCursor();a.replaceRange("",ha(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(ha(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(ha(a.lastLine()))},goLineStart:function(a){a.extendSelection(Yd(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=Yd(a,b.line),d=a.getLineHandle(c.line),e=Xb(d);e&&0!=e[0].level?a.extendSelection(c):(d=Math.max(0,d.text.search(/\S/)),a.extendSelection(ha(c.line,
b.line==c.line&&b.ch<=d&&b.ch?0:d)))},goLineEnd:function(a){a.extendSelection(Sf(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,
"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},
delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t",
"end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),ha(b.line,b.ch-1),ha(b.line,b.ch+1))},newlineAndIndent:function(a){L(a,function(){a.replaceSelection("\n","end","+input");a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},Oc=p.keyMap={};Oc.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",
PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};Oc.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore",
"Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};Oc.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore",
"Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};Oc["default"]=Mc?Oc.macDefault:Oc.pcDefault;Oc.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart",
"Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};p.lookupKey=ab;p.isModifierKey=wc;p.keyName=vc;p.fromTextArea=function(a,b){function c(){a.value=m.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=document.body;
try{d=document.activeElement}catch(e){}b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(Da(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var f=a.form,g=f.submit;try{var k=f.submit=function(){c();f.submit=g;f.submit();f.submit=k}}catch(l){}}a.style.display="none";var m=p(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);m.save=c;m.getTextArea=function(){return a};m.toTextArea=function(){c();a.parentNode.removeChild(m.getWrapperElement());a.style.display="";
a.form&&(Ac(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=g))};return m};sb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););
return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=zd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue},
indentation:function(){return zd(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)}};p.StringStream=sb;p.TextMarker=cb;yd(cb);cb.prototype.clear=function(){if(!this.explicitlyCleared){var a=
this.doc.cm,b=a&&!a.curOp;b&&da(a);if(Kc(this,"clear")){var d=this.find();d&&ac(this,"clear",d.from,d.to)}for(var e=d=null,f=0;f<this.lines.length;++f){var g=this.lines[f],k=gc(g.markedSpans,this);null!=k.to&&(e=kc(g));for(var l=g,m=g.markedSpans,n=k,p=void 0,q=0;q<m.length;++q)m[q]!=n&&(p||(p=[])).push(m[q]);l.markedSpans=p;null!=k.from?d=kc(g):this.collapsed&&!Wb(this.doc,g)&&a&&fc(g,ja(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(f=0;f<this.lines.length;++f)g=ub(a.doc,this.lines[f]),
k=c(a.doc,g),k>a.display.maxLineLength&&(a.display.maxLine=g,a.display.maxLineLength=k,a.display.maxLineChanged=!0);null!=d&&a&&ra(a,d,e+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&tb(a));b&&wa(a)}};cb.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=gc(d.markedSpans,this);if(null!=e.from||null!=e.to)d=kc(d),null!=e.from&&(a=ha(d,e.from)),null!=e.to&&(b=ha(d,e.to))}return"bookmark"==this.type?a:a&&
{from:a,to:b}};cb.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){var c=qa(this.doc,a.from.line);P(b,c);if(a.from.line>=b.display.showingFrom&&a.from.line<b.display.showingTo){for(a=b.display.lineDiv.firstChild;a;a=a.nextSibling)if(a.lineObj==c){a.offsetHeight!=c.height&&fc(c,a.offsetHeight);break}Ua(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=b.curOp.updateMaxLine=!0})}}};cb.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;
b.maybeHiddenMarkers&&-1!=Ec(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};cb.prototype.detachLine=function(a){this.lines.splice(Ec(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};p.SharedTextMarker=Ob;yd(Ob);Ob.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();
ac(this,"clear")}};Ob.prototype.find=function(){return this.primary.find()};var se=p.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};yd(se);se.prototype.clear=Hc(function(){var a=this.line.widgets,b=kc(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null);a=sd(this.cm,this.line)<this.cm.doc.scrollTop;fc(this.line,Math.max(0,this.line.height-ya(this)));a&&eb(this.cm,0,-this.height);
ra(this.cm,b,b+1)}});se.prototype.changed=Hc(function(){var a=this.height;this.height=null;if(a=ya(this)-a)fc(this.line,this.line.height+a),a=kc(this.line),ra(this.cm,a,a+1)});var id=p.Line=function(a,b,c){this.text=a;Gc(this,b);this.height=c?c(this):1};yd(id);var Jd={},be=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;Bb.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;
ld(f);ac(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};ad.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],
e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(c=[],this.collapse(c),this.children=[new Bb(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],
g=f.chunkSize();if(a<=g){f.insertInner(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new Bb(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new ad(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Ec(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new ad(a.children),
c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){g=Math.min(b,g-a);if(f.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};var Vf=0,Jb=p.Doc=function(a,b,c){if(!(this instanceof Jb))return new Jb(a,b,c);null==c&&(c=0);ad.call(this,[new Bb([new id("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.history=
od();this.cleanGeneration=1;this.frontier=c;c=ha(c,0);this.sel={from:c,to:c,head:c,anchor:c,shift:!1,extend:!1,goalColumn:null};this.id=++Vf;this.modeOption=b;"string"==typeof a&&(a=Pc(a));rd(this,{from:c,to:c,text:a},null,{head:c,anchor:c})};Jb.prototype=Ad(ad.prototype,{constructor:Jb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,
b){this.removeInner(a-this.first,b)},getValue:function(a){var b=fe(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:function(a){var b=ha(this.first,0),c=this.first+this.size-1;rb(this,{from:b,to:ha(c,qa(this,c).text.length),text:Pc(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=la(this,b);c=c?la(this,c):b;Aa(this,a,b,c,d)},getRange:function(a,b,c){a=ee(this,la(this,a),la(this,b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=
this.getLineHandle(a))&&a.text},setLine:function(a,b){ib(this,a)&&Aa(this,b,ha(a,0),la(this,ha(a)))},removeLine:function(a){a?Aa(this,"",la(this,ha(a-1)),la(this,ha(a))):Aa(this,"",ha(0,0),la(this,ha(1,0)))},getLineHandle:function(a){if(ib(this,a))return qa(this,a)},getLineNumber:function(a){return kc(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=qa(this,a));return ub(this,a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+
this.size-1},clipPos:function(a){return la(this,a)},getCursor:function(a){var b=this.sel;return yb(null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||!1===a?b.to:b.from)},somethingSelected:function(){return!Ca(this.sel.head,this.sel.anchor)},setCursor:Pa(function(a,b,c){a=la(this,"number"==typeof a?ha(a,b||0):a);c?Ga(this,a):jb(this,a,a)}),setSelection:Pa(function(a,b){jb(this,la(this,a),la(this,b||a))}),extendSelection:Pa(function(a,b){Ga(this,la(this,a),b&&la(this,b))}),getSelection:function(a){return this.getRange(this.sel.from,
this.sel.to,a)},replaceSelection:function(a,b,c){rb(this,{from:this.sel.from,to:this.sel.to,text:Pc(a),origin:c},b||"around")},undo:Pa(function(){dc(this,"undo")}),redo:Pa(function(){dc(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=od(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){this.history.lastOp=
this.history.lastOrigin=null;return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Rd(this.history.done),undone:Rd(this.history.undone)}},setHistory:function(a){var b=this.history=od(this.history.maxGeneration);b.done=a.done.slice(0);b.undone=a.undone.slice(0)},markText:function(a,b,c){return Sb(this,la(this,a),la(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:
b),insertLeft:b&&b.insertLeft};a=la(this,a);return Sb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=la(this,a);var b=[],c=qa(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=
d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return la(this,ha(c,b))},indexFromPos:function(a){a=la(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new Jb(fe(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn};
a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Jb(fe(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];return b},unlinkDoc:function(a){a instanceof p&&(a=a.doc);if(this.linked)for(var b=
0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);break}if(a.history==this.history){var c=[a.id];jc(a,function(a){c.push(a.id)},!0);a.history=od();a.history.done=Rd(this.history.done,c);a.history.undone=Rd(this.history.undone,c)}},iterLinkedDocs:function(a){jc(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});Jb.prototype.eachLine=Jb.prototype.iter;var rf=["iter","insert","remove","copy","getEditor"],Kd;for(Kd in Jb.prototype)Jb.prototype.hasOwnProperty(Kd)&&
0>Ec(rf,Kd)&&(p.prototype[Kd]=function(a){return function(){return a.apply(this.doc,arguments)}}(Jb.prototype[Kd]));yd(Jb);p.e_stop=Td;p.e_preventDefault=Cb;p.e_stopPropagation=Ue;var Xc,Fc=0;p.on=Da;p.off=Ac;p.signal=Nb;var qc=30,ce=p.Pass={toString:function(){return"CodeMirror.Pass"}};je.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};p.countColumn=zd;var jd=[""],te=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ld=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;
p.replaceGetRect=function(a){pb=a};var Tb=function(){if(ic)return!1;var a=pa("div");return"draggable"in a||"dragDrop"in a}();Vc?ne=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:Ge&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ne=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:nc&&!/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)&&(ne=function(a,b){if(1<b&&45==a.charCodeAt(b-1)){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return!0;
if(2<b&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return!1}return/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-1,b+1))});var Md,ue,Pc=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};
p.splitLines=Pc;var Se=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},ve=function(){var a=pa("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),Yc={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",
32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};p.keyNames=Yc;(function(){for(var a=0;10>a;a++)Yc[a+48]=String(a);for(a=65;90>=
a;a++)Yc[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Yc[a+111]=Yc[a+63235]="F"+a})();var Zc,Wf=function(){function a(d){return 255>=d?b.charAt(d):1424<=d&&1524>=d?"R":1536<=d&&1791>=d?c.charAt(d-1536):1792<=d&&2220>=d?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",
d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,k=/[1n]/;return function(b){if(!d.test(b))return!1;for(var c=b.length,l=[],m=0,n;m<c;++m)l.push(a(b.charCodeAt(m)));for(var m=0,p="L";m<c;++m)n=l[m],"m"==n?l[m]=p:p=n;m=0;for(p="L";m<c;++m)n=l[m],"1"==n&&"r"==p?l[m]="n":f.test(n)&&(p=n,"r"==n&&(l[m]="R"));m=1;for(p=l[0];m<c-1;++m)n=l[m],"+"==n&&"1"==p&&"1"==l[m+1]?l[m]="1":","!=n||p!=l[m+1]||"1"!=p&&"n"!=p||(l[m]=p),p=n;for(m=0;m<c;++m)if(n=l[m],","==n)l[m]="N";else if("%"==
n){for(p=m+1;p<c&&"%"==l[p];++p);var q=m&&"!"==l[m-1]||p<c-1&&"1"==l[p]?"1":"N";for(n=m;n<p;++n)l[n]=q;m=p-1}m=0;for(p="L";m<c;++m)n=l[m],"L"==p&&"1"==n?l[m]="L":f.test(n)&&(p=n);for(m=0;m<c;++m)if(e.test(l[m])){for(p=m+1;p<c&&e.test(l[p]);++p);n="L"==(p<c-1?l[p]:"L");q="L"==(m?l[m-1]:"L")||n?"L":"R";for(n=m;n<p;++n)l[n]=q;m=p-1}for(var p=[],r,m=0;m<c;)if(g.test(l[m])){n=m;for(++m;m<c&&g.test(l[m]);++m);p.push({from:n,to:m,level:0})}else{var s=m,q=p.length;for(++m;m<c&&"L"!=l[m];++m);for(n=s;n<m;)if(k.test(l[n])){s<
n&&p.splice(q,0,{from:s,to:n,level:1});s=n;for(++n;n<m&&k.test(l[n]);++n);p.splice(q,0,{from:s,to:n,level:2});s=n}else++n;s<m&&p.splice(q,0,{from:s,to:m,level:1})}1==p[0].level&&(r=b.match(/^\s+/))&&(p[0].from=r[0].length,p.unshift({from:0,to:r[0].length,level:0}));1==bc(p).level&&(r=b.match(/\s+$/))&&(bc(p).to-=r[0].length,p.push({from:c-r[0].length,to:c,level:0}));p[0].level!=bc(p).level&&p.push({from:c,to:c,level:p[0].level});return p}}();p.version="3.15.0";return p}();CodeMirror.defineMode("javascript",function(p,t){function r(a,b){for(var c=!1,d;null!=(d=a.next());){if(d==b&&!c)return!1;c=!c&&"\\"==d}return c}function s(a,b,c){ea=a;da=c;return b}function g(a,c){var d=a.next();if('"'==d||"'"==d)return d=b(d),c.tokenize=d,d(a,c);if(/[\[\]{}\(\),;\:\.]/.test(d))return s(d);if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),s("number","number");if(/\d/.test(d)||"-"==d&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),s("number","number");if("/"==d){if(a.eat("*"))return d=
n,c.tokenize=d,d(a,c);if(a.eat("/"))return a.skipToEnd(),s("comment","comment");if("operator"==c.lastType||"keyword c"==c.lastType||/^[\[{}\(,;:]$/.test(c.lastType))return r(a,"/"),a.eatWhile(/[gimy]/),s("regexp","string-2");a.eatWhile(ja);return s("operator",null,a.current())}if("#"==d)return a.skipToEnd(),s("error","error");if(ja.test(d))return a.eatWhile(ja),s("operator",null,a.current());a.eatWhile(/[\w\$_]/);var d=a.current(),e=ka.propertyIsEnumerable(d)&&ka[d];return e&&"."!=c.lastType?s(e.type,
e.style,d):s("variable","variable",d)}function b(a){return function(b,c){r(b,a)||(c.tokenize=g);return s("string","string")}}function n(a,b){for(var c=!1,d;d=a.next();){if("/"==d&&c){b.tokenize=g;break}c="*"==d}return s("comment","comment")}function l(a,b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function d(){for(var a=arguments.length-1;0<=a;a--)L.cc.push(arguments[a])}function c(){d.apply(null,arguments);return!0}function k(a){function b(c){for(;c;c=
c.next)if(c.name==a)return!0;return!1}var c=L.state;c.context?(L.marked="def",b(c.localVars)||(c.localVars={name:a,next:c.localVars})):b(c.globalVars)||(c.globalVars={name:a,next:c.globalVars})}function f(){L.state.context={prev:L.state.context,vars:L.state.localVars};L.state.localVars=Pa}function q(){L.state.localVars=L.state.context.vars;L.state.context=L.state.context.prev}function a(a,b){var c=function(){var c=L.state,d=c.indented;"stat"==c.lexical.type&&(d=c.lexical.indented);c.lexical=new l(d,
L.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function e(){var a=L.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function m(a){return function(b){return b==a?c():";"==a?d():c(arguments.callee)}}function v(b){return"var"==b?c(a("vardef"),S,m(";"),e):"keyword a"==b?c(a("form"),x,v,e):"keyword b"==b?c(a("form"),v,e):"{"==b?c(a("}"),K,e):";"==b?c():"if"==b?c(a("form"),x,v,e,W):"function"==b?c(U):"for"==b?c(a("form"),m("("),a(")"),P,m(")"),
e,v,e):"variable"==b?c(a("stat"),H):"switch"==b?c(a("form"),x,a("}","switch"),m("{"),K,e,e):"case"==b?c(x,m(":")):"default"==b?c(m(":")):"catch"==b?c(a("form"),f,m("("),V,m(")"),v,e,q):d(a("stat"),x,m(";"),e)}function x(a){return A(a,!1)}function z(a){return A(a,!0)}function A(b,d){var f=d?D:F;return wa.hasOwnProperty(b)?c(f):"function"==b?c(U):"keyword c"==b?c(d?C:y):"("==b?c(a(")"),y,m(")"),e,f):"operator"==b?c(d?z:x):"["==b?c(a("]"),E(z,"]"),e,f):"{"==b?c(a("}"),E(J,"}"),e,f):c()}function y(a){return a.match(/[;\}\)\],]/)?
d():d(x)}function C(a){return a.match(/[;\}\)\],]/)?d():d(z)}function F(a,b){return","==a?c(x):D(a,b,!1)}function D(b,d,f){var g=!1==f?F:D;f=!1==f?x:z;if("operator"==b)return/\+\+|--/.test(d)?c(g):"?"==d?c(x,m(":"),f):c(f);if(";"!=b){if("("==b)return c(a(")","call"),E(z,")"),e,g);if("."==b)return c(N,g);if("["==b)return c(a("]"),y,m("]"),e,g)}}function H(a){return":"==a?c(e,v):d(F,m(";"),e)}function N(a){if("variable"==a)return L.marked="property",c()}function J(a,b){if("variable"==a){if(L.marked=
"property","get"==b||"set"==b)return c(M)}else if("number"==a||"string"==a)L.marked=a+" property";if(wa.hasOwnProperty(a))return c(m(":"),z)}function M(a){if(":"==a)return c(x);if("variable"!=a)return c(m(":"),x);L.marked="property";return c(U)}function E(a,b){function e(d){return","==d?(d=L.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),c(a,e)):d==b?c():c(m(b))}return function(f){return f==b?c():d(a,e)}}function K(a){return"}"==a?c():d(v,K)}function G(a){return":"==a?c(u):d()}function u(a){return"variable"==
a?(L.marked="variable-3",c()):d()}function S(a,b){return"variable"==a?(k(b),na?c(G,Q):c(Q)):d()}function Q(a,b){if("="==b)return c(z,Q);if(","==a)return c(S)}function W(b,d){if("keyword b"==b&&"else"==d)return c(a("form"),v,e)}function P(a){return"var"==a?c(S,m(";"),ca):";"==a?c(ca):"variable"==a?c(aa):d(x,m(";"),ca)}function aa(a,b){return"in"==b?c(x):c(F,ca)}function ca(a,b){return";"==a?c(Y):"in"==b?c(x):d(x,m(";"),Y)}function Y(a){")"!=a&&c(x)}function U(b,d){if("variable"==b)return k(d),c(U);
if("("==b)return c(a(")"),f,E(V,")"),e,v,q)}function V(a,b){if("variable"==a)return k(b),na?c(G):c()}var R=p.indentUnit,ba=t.statementIndent,Z=t.json,na=t.typescript,ka=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"var":a("var"),"const":a("var"),let:a("var"),
"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this")};if(na){var c={type:"variable",style:"variable-3"},c={"interface":a("interface"),"class":a("class"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),"super":a("super"),string:c,number:c,
bool:c,any:c},g;for(g in c)b[g]=c[g]}return b}(),ja=/[+\-*&%=<>!?|~^]/,ea,da,wa={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},L={state:null,column:null,marked:null,cc:null},Pa={name:"this",next:{name:"arguments"}};e.lex=!0;return{startState:function(a){return{tokenize:g,lastType:null,cc:[],lexical:new l((a||0)-R,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||
(b.lexical.align=!1),b.indented=a.indentation());if(b.tokenize!=n&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==ea)return c;b.lastType="operator"!=ea||"++"!=da&&"--"!=da?ea:"incdec";a:{var d=ea,e=da,f=b.cc;L.state=b;L.stream=a;L.marked=null;L.cc=f;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((f.length?f.pop():Z?x:v)(d,e)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(L.marked){c=L.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=
!0;break b}d=void 0}if(d){c="variable-2";break a}break a}c=void 0}return c},indent:function(a,b){if(a.tokenize==n)return CodeMirror.Pass;if(a.tokenize!=g)return 0;for(var c=b&&b.charAt(0),d=a.lexical,f=a.cc.length-1;0<=f;--f){var k=a.cc[f];if(k==e)d=d.prev;else if(k!=W||/^else\b/.test(b))break}"stat"==d.type&&"}"==c&&(d=d.prev);ba&&")"==d.type&&"stat"==d.prev.type&&(d=d.prev);f=d.type;k=c==f;return"vardef"==f?d.indented+("operator"==a.lastType||","==a.lastType?4:0):"form"==f&&"{"==c?d.indented:"form"==
f?d.indented+R:"stat"==f?d.indented+("operator"==a.lastType||","==a.lastType?ba||R:0):"switch"!=d.info||k||!1==t.doubleIndentSwitch?d.align?d.column+(k?0:1):d.indented+(k?0:R):d.indented+(/^(?:case|default)\b/.test(b)?R:2*R)},electricChars:":{}",blockCommentStart:Z?null:"/*",blockCommentEnd:Z?null:"*/",lineComment:Z?null:"//",fold:"brace",helperType:Z?"json":"javascript",jsonMode:Z}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");
CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMode("pascal",function(){function p(n,l){var d=n.next();if("#"==d&&l.startOfLine)return n.skipToEnd(),"meta";if('"'==d||"'"==d)return l.tokenize=t(d),l.tokenize(n,l);if("("==d&&n.eat("*"))return l.tokenize=r,r(n,l);if(/[\[\]{}\(\),;\:\.]/.test(d))return null;if(/\d/.test(d))return n.eatWhile(/[\w\.]/),"number";if("/"==d&&n.eat("/"))return n.skipToEnd(),"comment";if(b.test(d))return n.eatWhile(b),"operator";n.eatWhile(/[\w\$_]/);d=n.current();return s.propertyIsEnumerable(d)?"keyword":
g.propertyIsEnumerable(d)?"atom":"variable"}function t(b){return function(g,d){for(var c=!1,k,f=!1;null!=(k=g.next());){if(k==b&&!c){f=!0;break}c=!c&&"\\"==k}if(f||!c)d.tokenize=null;return"string"}}function r(b,g){for(var d=!1,c;c=b.next();){if(")"==c&&d){g.tokenize=null;break}d="*"==c}return"comment"}var s=function(b){var g={};b=b.split(" ");for(var d=0;d<b.length;++d)g[b[d]]=!0;return g}("and array begin case const div do downto else end file for forward integer boolean char function goto if in label mod nil not of or packed procedure program record repeat set string then to type until var while with"),
g={"null":!0},b=/[+\-*&%=<>!?|\/]/;return{startState:function(){return{tokenize:null}},token:function(b,g){return b.eatSpace()?null:(g.tokenize||p)(b,g)},electricChars:"{}"}});CodeMirror.defineMIME("text/x-pascal","pascal");
